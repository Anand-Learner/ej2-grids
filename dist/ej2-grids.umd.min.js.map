/*!
*  filename: ej2-grids.umd.min.js.map
*  version : 1.0.25
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-grids.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_8__","__WEBPACK_EXTERNAL_MODULE_23__","__WEBPACK_EXTERNAL_MODULE_24__","__WEBPACK_EXTERNAL_MODULE_61__","__WEBPACK_EXTERNAL_MODULE_71__","__WEBPACK_EXTERNAL_MODULE_73__","__WEBPACK_EXTERNAL_MODULE_98__","__WEBPACK_EXTERNAL_MODULE_101__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","__export","hasOwnProperty","Object","defineProperty","value","apply","common_1","actions_1","models_1","renderer_1","services_1","grid_1","enum_1","util_1","constant_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","ej2_base_3","ej2_base_4","ej2_base_5","ej2_popups_1","events","render_1","cell_render_factory_1","service_locator_1","value_formatter_1","renderer_factory_1","width_controller_1","aria_service_1","focus_strategy_1","page_settings_1","selection_1","search_1","show_hide_1","scroll_1","print_1","aggregate_1","column_chooser_1","clipboard_1","SortDescriptor","_super","ChildProperty","Property","SortSettings","Collection","Predicate","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","Grid","options","element","_this","isInitial","sortedColumns","inViewIndexes","mediaCol","isMediaQuery","isInitialLoad","freezeRefresh","Component","refresh","mergeCells","isEdit","filterOperators","contains","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Print","Pdfexport","Excelexport","Wordexport","Csvexport","Search","Save","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","FilterButton","ClearButton","StartsWith","EndsWidth","Contains","Equal","NotEqual","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","ChooseDate","EnterValue","Copy","Group","Ungroup","autoFitAll","autoFit","Export","FirstPage","LastPage","PreviousPage","NextPage","SortAscending","SortDescending","EditRecord","DeleteRecord","FilterMenu","Columnchooser","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDown","shiftUp","shiftRight","shiftLeft","home","end","escape","ctrlHome","ctrlEnd","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusA","ctrlPlusP","insert","delete","f2","enter","ctrlEnter","shiftEnter","tab","shiftTab","space","ctrlPlusC","ctrlShiftPlusH","setValue","mergePersistGridData","getPersistData","keyEntity","ignoreOnPersist","pageSettings","filterSettings","groupSettings","searchSettings","sortSettings","columns","selectedRowIndex","ignoreOnColumn","forEach","currentObject","_i","_a","ignoreInArrays","addOnPersist","column","ignoreInColumn","val","requiredModules","allowFiltering","push","member","args","serviceLocator","allowExcelExport","allowPdfExport","allowSorting","allowPaging","allowSelection","selectionSettings","allowReordering","allowRowDragAndDrop","allowGrouping","aggregates","isDetail","toolbar","toolbarTemplate","enableVirtualization","enableColumnVirtualization","frozenColumns","frozenRows","editSettings","allowAdding","allowDeleting","allowEditing","extendRequiredModules","isCommandColumn","contextMenuItems","showColumnMenu","preRender","ServiceLocator","initializeServices","render","ariaService","setOptions","role","createSpinner","renderModule","Render","getMediaColumns","searchModule","scrollModule","Scroll","showColumnChooser","columnChooserModule","ColumnChooser","notify","initialLoad","trigger","load","prepareColumns","getColumns","processModel","gridRender","wireEvents","addListener","updateDefaultCursor","showSpinner","initialEnd","hideSpinner","gcol","getShowHideService","getService","isNullOrUndefined","index","hideAtMedia","media","window","matchMedia","mediaQueryUpdate","bind","columnIndex","e","col","visible","matches","showHider","show","headerText","hide","refreshMediaCol","eventInitializer","destroy","unwireEvents","removeListener","destroyDependentModules","innerHTML","classList","keyboardModule","focusModule","getModuleName","onPropertyChanged","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","requestType","isDestroyed","keys","prop","uiUpdate","enable","inBoundModelChanged","properties","currentPage","totalRecordsCount","localeObj","setLocale","locale","valueFormatterService","setCulture","width","height","rowTemplateFn","templateCompiler","rowTemplate","detailTemplateFn","detailTemplate","headerModule","refreshUI","showDropArea","updateColumnObject","extendedPropertyChange","modelChanged","updateRTL","querySelector","ej2_instances","enableRtl","dataBind","removePadding","setPadding","toolbarModule","getToolbar","contextMenuModule","getContextMenu","columnMenuModule","getColumnMenu","updateGridLines","allowTextWrap","applyTextWrap","removeTextWrap","dataSourceModified","enableHover","addClass","removeClass","headerRows","slice","querySelectorAll","headerRows_1","row","remove","add","updateColumnModel","len","columnModel","inview","map","v","filter","vLen","getColumnIndexesInView","getLocaleConstants","setColumnIndexesInView","indexes","getVisibleColumns","cols","getHeaderContent","getPanel","setGridHeaderContent","setPanel","getContentTable","contentModule","getTable","setGridContentTable","setTable","getContent","setGridContent","getHeaderTable","setGridHeaderTable","getFooterContent","footerElement","getElementsByClassName","getFooterContentTable","firstChild","getPager","gridPager","setGridPager","getRowByIndex","getRows","getRowElements","getDataRows","rows","children","dataRows","getCellFromIndex","rowIndex","getColumnHeaderByIndex","getRowObjectFromUID","uid","getRowsObject","getColumnHeaderByField","field","getColumnHeaderByUid","getColumnByField","parentElement","iterateArrayOrObject","item","getColumnIndexByField","getColumnByUid","getColumnIndexByUid","getUidByColumnField","getNormalizedColumnIndex","getColumnFieldNames","columnNames","getRowTemplate","getDetailTemplate","getPrimaryKeyFieldNames","cLen","isPrimaryKey","refreshHeader","getSelectedRows","selectionModule","selectedRecords","getSelectedRowIndexes","selectedRowIndexes","getSelectedRowCellIndexes","selectedRowCellIndexes","getSelectedRecords","getDataModule","data","showColumns","showBy","hideColumns","hideBy","goToPage","pageNo","pagerModule","updateExternalMessage","message","sortColumn","columnName","direction","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","fieldName","filterOperator","filterValue","predicate","matchCase","actualFilterValue","actualOperator","filterModule","clearFiltering","removeFilteredColsByField","isClearFilterBar","selectRow","isToggle","selectRows","rowIndexes","clearSelection","selectCell","cellIndex","search","searchString","print","printModule","deleteRecord","fieldname","editModule","startEdit","endEdit","closeEdit","addRecord","deleteRow","tr","copy","withHeader","clipboardModule","recalcIndentWidth","getAttribute","indentWidth","offsetWidth","headerCol","childNodes","contentCol","perPixel","style","columnWidthChanged","setAttribute","reorderColumns","fromFName","toFName","reorderModule","autoFitColumns","fieldNames","resizeModule","createColumnchooser","x","y","renderColumnChooser","register","widthService","ColumnWidthService","CellRendererFactory","RendererFactory","L10n","ValueFormatter","ShowHide","AriaService","FocusStrategy","flag","j","gCols","sCols","this_1","sLen","showGroupedColumn","parentDetails","parentKeyFieldValue","query","where","queryString","Browser","isDevice","rendererFactory","getRenderer","RenderType","Header","Content","Clipboard","createGridPopUpElement","setWidthToColumns","dataReady","setWidth","setHeight","popup","createElement","className","styles","content","attrs","tabIndex","append","appendChild","gridLines","textWrapSettings","wrapMode","wrap","refreshTooltip","headerTable","htable","createTable","ctable","all","allele","table","ele","getBoundingClientRect","Tooltip","document","body","removeChild","tag","type","myTableDiv","cssText","mySubDiv","myTable","myTr","mytd","EventHandler","mouseClickHandler","focusOutHandler","dblClickHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","on","contentReady","updateData","event","headerRefreshed","dataBoundFunction","addEventListener","dataBound","off","removeEventListener","getCurrentViewRecords","currentViewData","records","isChildGrid","parentsUntil","touches","checkEdit","preventDefault","click","mode","closest","dblclick","display","filterClear","gridElement","localStorage","getItem","dataObj_1","JSON","parse","isProtectedOnChange","this_2","keys_1","isArray","extend","childGrid","action","keyPressed","setInjectedModules","injectedModules","autoCol","refreshColumns","excelExport","exportProperties","isMultipleExport","workbook","excelExportModule","Map","csvExport","pdfExport","pdfDoc","pdfExportModule","columns_1","commands","commandsTemplate","groupColumn","groupModule","ungroupColumn","isContextMenuOpen","isOpen","ensureModuleInjected","getInjectedModules","indexOf","showColumn","hideColumn","Complex","PageSettings","AggregateRow","Event","NotifyPropertyChanges","Inject","Selection","cultureName","intl","Internationalization","culture","getFormatFunction","format","getDateFormat","getNumberFormat","getParserFunction","getDateParser","getNumberParser","fromView","toView","result","ej2_data_1","column_1","doesImplementInterface","checkFor","valueAccessor","getValue","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","collection","pred","template","compile","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","setStyleAttribute","attributes","copied","first","second","exclude","moved","autoWidth","Column","setCssInGridPopUp","popUp","isBottomTail","popUpSpan","position","targetPosition","clientY","changedTouches","offsetHeight","top","left","getPopupLeftPosition","getPosition","right","getActualProperties","obj","elem","selector","isID","parent","getElementIndex","elements","isEqualNode","inArray","getActualPropFromColl","coll","removeElement","clientX","getUid","prefix","appendChildren","parents","calculateAggregate","context","customAggregate","DataUtil","getScrollBarWidth","scrollWidth","divNode","clientWidth","getRowHeight","rowHeight","rect","Math","ceil","isEditable","isOldRow","isIdentity","isActionPrevent","inst","dlg","changeButtonType","elements_1","button","setFormatter","fmtr","skeleton","setParser","addRemoveActiveClasses","cells","removeAttribute","distinctStringValues","temp","res","toString","getFilterMenuPostion","dialogObj","elementVisible","dlgWidth","newpos","calculateRelativeBasedPosition","leftPos","getZIndexCalcualtion","zIndex","toogleCheckbox","span","createCboxWithWrap","div","allowResizing","enableGroupByFormat","showInColumnChooser","merge","valueFormatter","textAlign","templateFn","itemTemplate","fltrTemplateFn","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getFilterItemTemplate","getDomSetter","disableHtmlEncode","created","destroyed","rowDataBound","queryCellInfo","actionBegin","actionComplete","actionFailure","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDragStart","columnDrag","columnDrop","rowDragStart","rowDrag","rowDrop","beforePrint","printComplete","detailDataBound","toolbarClick","batchAdd","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beginEdit","cellEdit","cellSave","endAdd","endDelete","recordDoubleClick","recordClick","beforeDataBound","beforeOpenColumnChooser","resizeStart","onResize","resizeStop","checkBoxChange","beforeCopy","filterChoiceRequest","filterAfterOpen","filterBeforeOpen","onEmpty","colGroupRefresh","pageBegin","pageComplete","sortBegin","sortComplete","filterBegin","filterComplete","searchBegin","searchComplete","reorderBegin","reorderComplete","rowDragAndDropBegin","rowDragAndDropComplete","groupBegin","groupComplete","ungroupBegin","ungroupComplete","rowSelectionBegin","rowSelectionComplete","columnSelectionBegin","columnSelectionComplete","cellSelectionBegin","cellSelectionComplete","beforeCellFocused","cellFocused","columnVisibilityChanged","scroll","columnPositionChanged","rowDragAndDrop","rowsAdded","rowsRemoved","columnDragStop","headerDrop","refreshComplete","refreshVirtualBlock","toolbarRefresh","bulkSave","tooltipDestroy","editBegin","editComplete","addBegin","addComplete","saveComplete","deleteBegin","deleteComplete","preventBatch","dialogDestroy","crudAction","addDeleteAction","destroyForm","doubleTap","beforeExcelExport","excelExportComplete","excelQueryCellInfo","beforePdfExport","pdfExportComplete","pdfQueryCellInfo","accessPredicate","contextMenuClick","contextMenuOpen","columnMenuClick","columnMenuOpen","filterOpen","filterDialogCreated","filterMenuClose","data_1","row_1","cell_1","content_renderer_1","header_renderer_1","cell_renderer_1","header_cell_renderer_1","stacked_cell_renderer_1","indent_cell_renderer_1","caption_cell_renderer_1","expand_cell_renderer_1","header_indent_renderer_1","detail_header_indent_renderer_1","detail_expand_cell_renderer_1","locator","Data","l10n","renderer","gObj","headerRenderer","contentRenderer","renderPanel","renderTable","emptyRow","refreshDataManager","cancel","ready","dataManager","setBusy","getData","generateQuery","requiresCount","disablePageWiseAggregates","then","validateGroupRecords","dataManagerSuccess","catch","dataManagerFailure","sendBulkRequest","promise","saveChanges","changes","dataSource","offline","dmSuccess","dmFailure","renderEmptyRow","isTrigger","tbody","getConstant","colspan","renderEmpty","Row","isDataRow","Cell","isDataCell","updateColumnType","record","items","isColTypeDef","getDay","getHours","getMinutes","getSeconds","getMilliseconds","count","pageSize","updatesOnInitialRender","refreshContentRows","alert","setRowElements","toLowerCase","busy","invalid","error","buildColumns","instantiateRenderer","addRenderer","HeaderRender","ContentRender","cellrender","addCellRenderer","CellType","HeaderCellRenderer","CellRenderer","StackedHeader","StackedHeaderCellRenderer","Indent","IndentCellRenderer","GroupCaption","GroupCaptionCellRenderer","GroupCaptionEmpty","GroupCaptionEmptyCellRenderer","Expand","ExpandCellRenderer","HeaderIndent","HeaderIndentCellRenderer","DetailHeader","DetailHeaderIndentCellRenderer","DetailExpand","DetailExpandCellRenderer","Promise","resolve","group0","groupN","addWhere","input","group","and","getPredicate","or","Query","curDm","DataManager","curFilter","executeLocal","newQuery","rPredicate","isRemote","deferred","Deferred","updateGroupInfo","reject","operator","Date","getDatePredicate","current","untouched","dm","array","uGroup","itemGroup","uGroupItem","GroupGuid","level","row_renderer_1","cell_merge_renderer_1","row_model_generator_1","group_model_generator_1","isLoaded","drop","droppedElement","rafCallback","generator","getModelGenerator","setVisible","innerDiv","contentDiv","createContentTable","multiselectable","initializeContentDrop","cellspacing","setColGroup","cloneNode","getColGroup","frag","createDocumentFragment","hdrfrag","RowRenderer","rowElements","modelData","generateRows","idx","fCont","mCont","cont","CellMergeRender","updateVirtualCells","isTR","nodeName","td","colcount","hdrTbody","overflowY","overflow","appendContent","contentPanel","panel","contentTable","colgroup","colGroup","testRow","some","clen","canSkip","displayVal","Droppable","accept","GroupModelGenerator","RowModelGenerator","setSelection","set","clearAll","isSelected","cellType","refreshRow","isChanged","refreshMergeCells","cells_1","cell","rowArgs","cellArgs","attrCopy","buildAttributeFromRow","cellRendererFact","cellRenderer","getCellRenderer","colSpan","cellSpan","isSpanned","cssClass","attr","rowindex","dataUID","ariaSelected","classes","isAltRow","rowSpan","class","spanText","aria-colSpan","containsKey","backupMergeCells","fName","setMergeCells","generteKey","fname","splitKey","split","getMergeCells","mCells","getIndexFromAllColumns","vColumnIndices","_b","rows_1","startIndex","generateRow","ensureColumns","generateCell","indent","enableAltRow","concat","generateCells","dummies","tmp","dummy","CommandColumn","rowId","oIndex","opt","isTemplate","rowID","refreshRows","summary_model_generator_1","summaryModelGen","GroupSummaryModelGenerator","captionModelGen","CaptionSummaryModelGenerator","getGroupedRecords","raw","generateDataRows","generateCaptionRow","getCaptionRowCells","visibles","groupedLen","generateIndentCell","isEmpty","captionCells","cIndex_1","wFlag","tmpFlag","unshift","cRow","SummaryModelGenerator","footerTemplate","groupFooterTemplate","groupCaptionTemplate","columnSelector","buildSummaryData","getGeneratedRow","summaryRow","indents","getIndentByLevel","indentLength","getGeneratedCell","getCellType","sColumn","scolumn","summaryRows","single","setTemplate","types","helper","disp","Summary","indx","GroupSummary","initVal","reduce","prev","cur","CaptionSummary","checkbox_filter_1","initDataManager","addRows","removeRows","crudActions","skipPage","clone","predicates","CheckBoxFilter","sType","sSettings","fields","ignoreCase","aggregate","sortGrp","sortBy","page","isGrpFmt","formatGroupColumn","getKey","foreignKeyData","executeQuery","date","update","url","filterObject","datePredicate","prevDate","nextDate","prevObj","nextObj","setDate","getDate","predicateSt","predicateEnd","json","splice","toIndex","ej2_buttons_1","util_2","ej2_inputs_1","ej2_popups_2","util_3","defaultConstants","OK","Filter","Clear","SelectAll","Blanks","NoResult","values","cBoxTrue","createCheckBox","checked","label","cBoxFalse","initLocale","insertBefore","constants","closeDialog","clickHandler","searchBoxKeyUp","unWireEvents","searchBoxClick","sInput","refreshCheckboxes","updateSearchIcon","focus","sIcon","getLocalizedLabel","updateDataSource","updateModel","filteredColumns","allowCaseSensitive","isFiltered","localizedStrings","getAndSetChkElem","sBox","hideSearchbox","placeholder","searchBox","Input","createInput","floatLabelType","spinner","cBox","showDialog","filterModel","columnType","Dialog","close","animationSettings","effect","buttons","btnClick","buttonModel","isExcel","isPrimary","dialogCreated","open","dialogOpen","appendTo","maxHeight","getAllData","X","Y","openDialog","text","innerText","fltrBtnHandler","handler","optr","caseSen","defaults","matchcase","isNotEqual","itemsCnt","fObj","setDateObject","initiateFilter","fColl","firstVal","ejpredicate","filterCollection","parsed","parseFloat","processDataSource","getPredicateFromCols","dataSuccess","fullData","select","getDistinct","filteredData","updateResult","createFilterItems","result_1","selectAll","updateAllCBoxes","updateIndeterminatenBtn","cBoxes","cBoxes_1","createCheckbox","cnt","selected","btn","disabled","isColFiltered","getCheckedState","lookup","sort","fnAscending","generatePredicate","updateDateFilter","visualElement","sender","headercelldiv","headerTemplate","textContent","firstElementChild","lineHeight","dragStart","drag","cloneElement","dragStop","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","headerPanel","tHead","bodyCell","findHeaderRow","createHeaderContent","thead","rowBody","len_1","updateColGroup","colHeader","rowRenderer","headerRow","colDepth","getObjDepth","getHeaderCells","len_2","appendCells","isFirstObj","isFirstCol","isLastCol","lastCol","getCellCnt","colIndex","gCells","max","depth","checkDepth","Draggable","dragTarget","distance","abort","tabindex","rowChkBox","localizer","formatter","getGui","evaluate","invokeFormatter","refreshCell","refreshTD","innerHtml","isNull","displayAsCheckBox","localeStr","fromFormatter","appendHtml","checkBox","persistSelection","CheckBox","setAttributes","property","buildAttributeFromCell","clipMode","colindex","hTxtEle","sortEle","gui","chkAllBox","fltrMenuEle","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","editType","checkAllBox","matchFlColumns","grabbed","extendPrepareHeader","headerTextAlign","alignment","matchFilteredColumns","setStateAndProperties","attribute","name","config","setExpand","expand","setSort","isBusy","setGrabbed","isGrabbed","setDropTarget","isTarget","dropeffect","haspopup","toolTip","captionTemplate","aria-expanded","cellRenderMap","getEnumValue","services","rendererMap","rName","setColumnWidth","cWidth","getWidth","setWidthToTable","header","fWidth","formatUnit","mHdr","edit","getSiblingsHeight","getHeightFromDirection","sibling","parseInt","minWidth","maxWidth","getTableWidth","tWidth","freezeWidth","colGrp","mColGrp","currentInfo","oneTime","forget","skipFocus","prevIndexes","focusCheck","onFocus","setActive","matrix","get","validator","onClick","force","isContent","beforeArgs","byKey","byClick","clickArgs","onKeyPress","skipOn","keyArgs","bValue","outline","swap","jump","isHeader","rowInitVal","activeElement","getFocusedElement","elementToFocus","active","setFocusedElement","setTimeout","removeFocus","addFocus","getFocusInfo","info","isFocused","isJump","container","getInfo","refreshMatrix","ContentFocus","HeaderFocus","cFocus","generate","actions","restoreFocus","evt","clearOutline","getPrevIndexes","forgetPrevious","Matrix","allow","min","navigator","inValid","vector","moveTo","rIndex","cIndex","keyActions","indexesByKey","getCurrentFromAction","isPresent","shouldFocusChange","rN","cN","oRowIndex","oCellIndex","_c","getFocusable","child","isDirty","isData","isSelectable","preventFocus","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","selectedRowState","isBatchEdit","prevKey","isChkAll","isUnChkAll","chkAllCollec","isCheckedOnAdd","persistSelectedData","selectionRequest","initializeSelection","mouseDownHandler","onActionBegin","onActionComplete","hidePopUp","isEditing","selectedRow","selectData","isRowType","isRowSelected","hasAttribute","prevRowIndex","isCtrlPressed","isShiftPressed","previousRow","previousRowIndex","clearRow","updateRowSelection","updateRowProps","selectRowsByRange","endIndex","getCollectionFromIndexes","selectedData","isSingleSel","prevRow","rowIndexes_1","addRowsToSelection","rowIndexes_2","isUnSelected","rowDeselect","addRemoveClassesForRow","reverse","clearRowSelection","updatePersistCollection","chkState","rowObj","pKey","primaryKey","updateCheckBoxes","chkBox","checkedTarget","setProperties","setCheckAllState","clearCellSelection","isCellType","selectedCell","getColIndex","currentIndex","isCellSelected","isUndefined","prevCIdxs","currentCell","previousRowCellIndex","prevECIdxs","previousRowCell","clearCell","updateCellSelection","updateCellProps","selectedRowCellIndex","selectCellsByRange","cellIndexes","stIndex","edIndex","cellSelectionMode","getLastColIndex","addAttribute","selectCells","rowCellIndexes","cellLen","addRowCellIndex","addCellsToSelection","cellIndexes_1","selectedCellIdx","cellDeselect","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","elementFromPoint","offsetLeft","ctrlKey","shiftKey","mouseUpHandler","postion","clearSelAfterRefresh","onCellFocused","onDataBound","checkBoxSelectionChanged","isCheckColumn","isChkSelection","chkField","chkAllObj","proxy_1","refreshPersistSelection","checkState","editChkBox","checkSelectAllAction","editForm","checkSelectAll","triggerChkChangeEvent","checkSelect","rowCellSelectionHandler","moveIntoUncheckCollection","checkedLen","indeterminate","popUpClickHandler","chkSelect","checkboxOnly","showPopup","clear","headerAction","applyDownUpKey","applyRightLeftKey","shiftDownKey","applyShiftLeftRightKey","applyHomeEndKey","applyCtrlHomeEndKey","applyUpDown","isAdd","instance","arg1","getToggleFields","getKeyBy","lastScrollTop","previousValues","oneTimeReady","refreshOverflow","mHdrHeight","ensureOverflow","getThreshold","cssProps","getCssProperties","border","padding","rtl","onContentScroll","scrollTarget","scrollLeft","isFooter","scrollTop","onFreezeContentScroll","onWheelScroll","deltaY","onTouchScroll","pageY","getPointY","setPageY","scrollHeight","clientHeight","css","isPrinting","printWindow","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","printMode","isPagerDisabled","removeColGroup","selectedRows","groupCaption","colGroups","AggregateColumn","fn","getTemplate","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","isCustomizeOpenCC","dlgObj","hideDialog","renderDlgContent","targetElement","columnChooserSearch","removeCancelIcon","addcancelIcon","args1","refreshCheckboxState","refreshPosition","mOpenDlg","openColumnChooser","renderChooserList","beforeOpen","customDialogOpen","beforeClose","customDialogClose","searchElement","columnChooserManualSearch","dlgDiv","tarElement","showCloseIcon","closeOnEscape","getElementById","confirmDlgBtnClick","clearActions","mainDiv","searchDiv","ccsearchele","ccsearchicon","conDiv","searchFocus","searchBlur","innerDivContent","refreshCheckboxList","targt","columnStateChange","params","dialogInstance","stateColumns","state","colUid","currentCol","checkstatecolumn","isChecked","coluid","searchVal","fltrCol","clearSearch","nMatchele","stopTimer","checkBoxClickHandler","checkstate","columnUid","gdCol","ulElement","renderCheckbox","columnUID","cbox","cclist","hideColState","showColState","cccheckboxlist","searchValue","startTimer","proxy","interval","keyCode","timer","setInterval","clearInterval","copyContent","isSelect","keyDownHandler","clipBoardTextArea","readonly","setCopyData","getSelection","selectedIndexes","getCopyData","userAgent","match","setSelectionRange","isCell","queryCommandSupported","execCommand","blur","removeAllRanges","sort_1","page_1","filter_1","resize_1","reorder_1","row_reorder_1","group_1","detail_row_1","toolbar_1","virtual_scroll_1","edit_1","batch_edit_1","inline_edit_1","normal_edit_1","dialog_edit_1","excel_export_1","pdf_export_1","export_helper_1","command_column_1","context_menu_1","freeze_1","column_menu_1","excel_filter_1","virtual_content_renderer_1","VirtualScroll","VirtualHeaderRenderer","VirtualContentRenderer","ensurePageSize","blockSize","size","refreshVirtualElement","intersection_observer_1","virtual_row_model_generator_1","prevHeight","preventEvent","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","pageHeight","getBlockHeight","axes","observer","InterSectionObserver","adjustTable","scrollListener","scrollArgs","sentinel","viewInfo","getInfoFromView","offset","prevInfo","axis","blockIndexes","columnIndexes","loadNext","loadSelf","nextInfo","virtualInfo","block","blk","isBlockAvailable","tempBlocks","infoType","sentinelInfo","getPageFromTop","getBlockIndexes","blocks","ensureBlocks","every","getColumnIndexes","mIdx","old","ind","isEndBlock","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","isIE","sTop","setVirtualHeight","setPageHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","iOffset","Number","getPage","cHeight","endTranslate","maxBlock","onEntered","xAxis","observe","getBlockSize","totalBlocks","cOffsets","VirtualRowModelGenerator","startIdx","bSize","cache","rem","refreshColOffsets","gen","xValue","yValue","transform","full","fromWheel","touchMove","up","check","containerRect","entered","down","bottom","callback","onEnterCallback","virtualScrollHandler","prevTop","prevLeft","debounced100","debounce","debounced50","groups","model","rowModelGenerator","notifyArgs","loadedBlocks","checkAndResetCache","getStartIndex","median","updateGroupRow","even","sLeft","calWidth","offsetVal","gLen","isVisible","n","currentFirst","iterateGroup","oRow","shift","Sort","contentRefresh","isModelChanged","aria","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","lastSortedCol","isRemove","allowMultiSorting","arg2","arg3","removeSortIcons","updateSortedCols","addSortIcons","refreshSortIcons","colObj","initiateSort","showPopUp","allowUnsort","enableSortMultiTouch","filterElement","updateAriaAttr","pager_1","pager_dropdown_1","external_message_1","Pager","ExternalMessage","PagerDropDown","Page","pagerObj","pagerTemplate","dropDownChanged","onSelect","addAriaAttr","numericContainer","links","isForceCancel","prevPage","previousPage","keyPressHandler","canSkipAction","el","enableExternalMessage","externalMessage","appendToElement","enableAfterRender","handlers","complete","updateLayout","inboundChange","keyPress","numeric_container_1","pager_message_1","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","containerModule","NumericContainer","pagerMessageModule","PagerMessage","checkpagesizes","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","refreshNumericLinks","checkGoToPage","currentPageChanged","showMessage","hideMessage","pageSizes","newPageNo","oldPageNo","previousPageNo","totalPages","enableQueryString","updateQueryString","pageCount","getPagerTemplate","updateTotalPages","updatedUrl","getUpdatedURL","location","href","history","pushState","path","uri","regx","RegExp","replace","hash","title","pagerElement","renderNumericContainer","updateLinksHtml","updateStyles","link","aria-label","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","PP","NP","next","last","currentPageSet","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","pageNoMsgElem","pageCountMsgElem","str","ej2_dropdowns_1","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","defaultValue","dropDownListObject","DropDownList","change","onChange","filter_cell_renderer_1","filter_menu_renderer_1","nextFlMenuOpen","menu","FilterMenuRenderer","checkbox","excel","ExcelFilter","fltrDlgDetails","getLocalizedCustomOperators","FilterCellRenderer","detail","updateFilterMsg","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","updateSpanClass","keyUpHandler","columnMenuFilter","isClose","filterDialogOpen","customOperators","displayName","filterHandler","filterCell","arg4","arg5","arg6","arg7","checkForSkipInput","filterStatusMsg","checkAlreadyColFiltered","fltrElement","updateCrossIcon","processFilter","targetText","previousElementSibling","lastFilterElement","nextElementSibling","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","onTimerTick","immediateModeDelay","stringify","validateFilterValue","getOperator","substring","isNaN","charAt","singleOp","multipleOp","operators","=","!","filterCells","fromIndex","filterCells_1","numOptr","stringOperator","numberOperator","dateOperator","datetimeOperator","booleanOperator","gClient","fClient","datepickerEle","filterIconElement","iconClass","filterBarTemplate","templateRead","read","templateWrite","write","filter_menu_operator_1","string_filter_ui_1","number_filter_ui_1","boolean_filter_ui_1","date_filter_ui_1","customFltrOperators","fltrObj","colTypes","string","StringFilterUI","number","NumberFilterUI","DateFilterUI","boolean","BooleanFilterUI","datetime","customFilterOperators","filterObj","flMuiObj","FlMenuOptrUI","filterBtnClick","clearBtnClick","renderFilterUI","writeMethod","dlgConetntEle","renderOperatorUI","renderFlValueUI","valueDiv","instanceofFilterUI","ui","getOptrInstance","localizeText","dlgContentEle","flValue","filteredValue","flOptrValue","targ","getFlOperator","flIcon","serLocator","actObj","AutoComplete","sortOrder","openPopup","filterType","autofill","arr","mapObj","filterOptr","actuiObj","optrData","customOptr","dropDatasource","selectedValue","dropSelectedVal","optrDiv","optrInput","dropOptr","dropDownOpen","selValue","selectedField","numericTxtObj","NumericTextBox","numberuiObj","dropInstance","ddActionComplete","drpuiObj","ej2_calendars_1","fltrSettings","colFormat","getDatePattern","inputElem","datePickerObj","DatePicker","dateuiObj","popupElement","ej2_navigations_1","localeConstants","ClearFilter","NumberFilter","TextFilter","DateFilter","MatchCase","Between","CustomFilter","EndsWith","getCMenuDS","iconCss","separator","cmenu","createMenu","ul","icon","createMenuElem","iconName","isSubMenu","li","wireExEvents","hoverHandler","clickExHandler","menuItem","destroyCMenu","menuObj","focused","isCMenuOpen","menuOptions","selectHandler","onClose","ContextMenu","client","resizeClassList","suppress","cursor","lines","Resize","tapped","isDblClk","findColumn","resizeColumn","indentWidthClone","headerTextClone","contentTextClone","contentText","wHeader","wContent","columnbyindex","tableWidth_1","tableWidth","offsetWidthValue","setHandlerHeight","getResizeHandlers","touchStartEvent","callAutoFit","getTargetColumn","refreshColumnWidth","appendHelper","pageX","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","detach","mousemove","colData","updateHelper","doubleTapEvent","pos","calcPos","floor","cls","parentOffset","doc","ownerDocument","offsetParent","documentElement","parentNode","nodeType","getUserAgent","clearTimeout","timeoutHandler","test","Reorder","createReorderElement","chkDropPosition","srcElem","destElem","targetParentContainerIndex","chkDropAllCols","isFound","headers","pop","findColParent","getColumnsModel","subCols","oldIdx","newIndex","moveColumns","destIndex","getColParent","srcIdx","flatColumns","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","draggableType","cliRectBase","scrollElem","setScrollLeft","cliRect","RowDD","dropElem","rowDropSettings","targetID","isDragStop","getElementFromPosition","initializeDrag","getTargetIdx","targetRow","srcControl","targetIndex","skip","dropArea","dataRow","grpRow","expandCollapseRows","expandAll","collapseAll","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","cellIdx","rowIdx","rowNodes","isHide","expandElem","toExpand","expandCollapse","isExpand","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","addColToGroupDrop","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","clearGrouping","DetailRow","toogleExpandcollapse","uid_1","nextRow","isDetailRow","detailRow","detailCell","nextSibling","parentID","parentPrimaryKeys","parentKeyField","parentRowData","grid","injectedModues","gridElem","idx_1","detailElement","getTDfromIndex","collapse","Toolbar","predefinedItems","gridID","preItems","preItems_1","localeName","toUpperCase","prefixIcon","tooltipText","align","columnchooser","suffixIcon","createToolbar","unWireEvent","getItems","clicked","toolbarClickHandler","enablePersistence","viewStr","wireEvent","refreshToolbarItems","updateSearchBox","enableItems","disableItems","toolbarItems","toolbarItems_1","getItemObject","itemObject","itemName","isEnable","items_1","gID","originalEvent","targetEle","offsetTop","footer_renderer_1","summary_cell_renderer_1","summaryIterator","Aggregate","initiateRender","cellFac","SummaryCellRenderer","footerRenderer","FooterRenderer","prepareSummaryInfo","dataColumn","getFormatFromType","cModel","gridModule","modelGenerator","overflowX","tFoot","renderSummaryContent","summaries","fragment","rowrenderer","srow","onScroll","refreshCol","replaceChild","onWidthChange","updateFooterTableWidth","tempObj","edit_renderer_1","boolean_edit_cell_1","dropdown_edit_cell_1","numeric_edit_cell_1","default_edit_cell_1","datepicker_edit_cell_1","editCellType","dropdownedit","DropDownEditCell","numericedit","NumericEditCell","datepickeredit","DatePickerEditCell","booleanedit","BooleanEditCell","defaultedit","DefaultEditCell","inline","InlineEdit","normal","batch","BatchEdit","dialog","DialogEdit","updateEditObj","createAlertDlg","createConfirmDlg","updateColTypeObj","EditRender","tapEvent","alertDObj","refreshToolbar","showConfirmDialog","showDeleteConfirmDialog","endEditing","updateCell","updateRow","batchCancel","batchSave","editCell","editFormValidate","formObj","validate","getBatchChanges","getCurrentEditCellData","getCurrentEditedData","saveCell","getValueFromType","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","isModal","executeAction","actionBeginFunction","actionCompleteFunction","form","editedData","inputs","destroyWidgets","cols_1","preventObj","applyFormValidation","rules","cols_2","validationRules","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","parentElem","createTooltip","inputName","status","inputClient","arrow","isInline","rowData","enabled","inline_edit_renderer_1","batch_edit_renderer_1","dialog_edit_renderer_1","InlineEditRender","BatchEditRender","DialogEditRender","addNew","getEditElements","convertWidget","focusElement","tArgs","isInput","tagName","getEditElement","tdElement","td_1","columnObject","setLocaleObj","createDialog","primaryKeyValue","allowDragging","dataCell","activeClasses","classNames","selectChkBox","editRow","popupHeight","dlgElement","NormalEdit","allowEditOnDblClick","editRowIndex","primaryKeys","primaryKeyValues","previousData","stopEditStatus","editHandler","edSucc","edFail","editSuccess","editFailure","cellDetails","onBeforeCellFocused","setCellIdx","validateFormObj","editCellFromIndex","isAddRow","removeRowObjectFromUID","refreshRowIdx","bulkDelete","bulkAddRow","batchChanges","addedRecords","deletedRecords","changedRecords","addRowObject","getIndexFromData","defaultData","getDefaultData","findNextEditableCell","checkNPCell","dValues","getDataByIndex","getCellIdx","isForeignKey","foreignKeyValue","isColored","setChanges","cIdx","isForceSave","previousValue","ej2_excel_export_1","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","isElementIdChanged","init","toISOString","isExporting","footer","exportValueFormatter","ExportValueFormatter","theme","isCsv","processRecords","adaptor","processInnerRecords","blankRows","multipleExport","worksheets","processExcelHeader","ExportHelper","getHeaders","groupIndent","childLevels","processHeaderContent","exportType","processRecordContent","returnType","currentViewRecords","processGroupedRows","processRecordRows","processAggregates","processExcelFooter","sheet","Workbook","save","dataSource_1","formatCellValue","getCaptionThemeStyle","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","_d","rLen","excelCellArgs","styleIndex","getColumnStyle","mergeOptions","rec","summaryModel","groupSummaryModel","groupSummaryRows","sRows","customIndex","cells_2","eCell","txt","wholeText","sum","average","truecount","falsecount","custom","JSON1","JSON2","attrname","returnValue","gridRows","gridColumns","spannedCells","currentCellIndex","gridCell","getIndex","spannedCell","getHeaderThemeStyle","hAlign","parseStyles","getRecordThemeStyle","fontColor","fontName","fontSize","borders","color","bold","backColor","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","numberFormat","hideColumnInclude","isHideColumnInclude","measureColumnDepth","actualColumns","processColumns","processHeaderCells","removeCellFromRow","generateActualColumns","getCellCount","resultCells","appendGridCells","isFirstColumn","isLastColumn","isIgnoreFirstCell","gridColumn","option","gridObj","internationalization","customFormat","ej2_pdf_export_1","ej2_pdf_export_2","ej2_pdf_export_3","ej2_pdf_export_4","ej2_pdf_export_5","ej2_pdf_export_6","PdfExport","customDataSource","gridTheme","isGrouping","pdfDocument","pdfExportProperties","PdfDocument","processExport","section","sections","processExportProperties","pdfPage","pages","pdfGrid","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","setBorder","draw","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfColor","PdfBorders","PdfPen","groupIndex","dataSourceItems","getCell","stringFormat","PdfStringFormat","PdfTextAlignment","Left","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","columnCount","getColumn","gridHeader","getHeader","getHorizontalAlignment","getVerticalAlignment","k","allowHorizontalOverflow","pageOrientation","pdfPageSettings","PdfPageSettings","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","clientSize","PointF","fromTop","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromBottom","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","hexToRgb","g","setContentFormat","graphics","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfPageCountField","PdfCompositeField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","sRows_1","leastCaptionSummaryIndex","getTemplateFunction","templateFunction","getSummaryWithoutTemplate","gridRow","setRecordThemeStyle","processCellStyle","spanCell","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","fontFamily","italic","underline","strikeout","borderWidth","borderColor","Right","Center","Justify","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","getFontFamily","fontStyle","PdfFontStyle","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","command_column_renderer_1","CommandColumnRenderer","commandClickHandler","buttonElement","unbounDiv","command","renderButton","buttonOption","onclick","Button","menuClass","editIcon","pager","pdf","ungroup","csv","fPage","nPage","lPage","pPage","ascending","descending","groupHeader","touchPop","defaultItems","hiddenItems","localeText","setLocaleKey","contextMenu","getMenuItems","contextMenuItemClick","contextMenuBeforeOpen","onOpen","contextMenuOnClose","menuItems","exportItems","getDefaultItems","toLocaleLowerCase","buildDefaultItems","exportGroup","getLastPage","totalpage","getKeyFromId","targetColumn","eventArgs","updateItemStatus","getLocaleText","showItems","dItem","ensureDisabledStatus","parentItem","hideItems","generateID","export","sortAscending","sortDescending","freeze_renderer_1","Freeze","FreezeRender","FreezeContentRender","freeze_row_model_generator_1","fDiv","mDiv","setFrozenContent","setMovableContent","getMovableContent","frozenContent","movableContent","getFrozenContent","FreezeRowModelGenerator","mTbl","rfshMovable","setFrozenHeader","setMovableHeader","getMovableHeader","mTable","renderMovable","getFrozenHeader","filterRow","frozenHeader","movableHeader","mEle","childElementCount","isFrzLoad","ColumnMenu","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","getColumnMenuHandlers","columnMenuHandlerDown","columnMenu","unwireFilterEvents","columnMenuHandlerClick","getHeaderCell","openColumnMenu","elePos","innerHeight","innerWidth","calculatePosition","filterPosition","columnMenuItemClick","columnMenuBeforeOpen","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","columnMenuBeforeClose","wireFilterEvents","appendFilter","isChooserItem","getFilter","defultItems","columnMenuItems","getDefault","defultItems_1","getDefaultItem","createChooserItems","columnChooser","isFilterPopupOpen","filterPopup","getFilterPoup","setPosition","gridPos","liPos","filter_cell_renderer_2"],"mappings":"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","file":"ej2-grids.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-dropdowns\"), require(\"@syncfusion/ej2-calendars\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-excel-export\"), require(\"@syncfusion/ej2-pdf-export\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-popups\", \"@syncfusion/ej2-data\", \"@syncfusion/ej2-buttons\", \"@syncfusion/ej2-inputs\", \"@syncfusion/ej2-dropdowns\", \"@syncfusion/ej2-calendars\", \"@syncfusion/ej2-navigations\", \"@syncfusion/ej2-excel-export\", \"@syncfusion/ej2-pdf-export\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-dropdowns\"), require(\"@syncfusion/ej2-calendars\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-excel-export\"), require(\"@syncfusion/ej2-pdf-export\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-popups\"], root[\"@syncfusion/ej2-data\"], root[\"@syncfusion/ej2-buttons\"], root[\"@syncfusion/ej2-inputs\"], root[\"@syncfusion/ej2-dropdowns\"], root[\"@syncfusion/ej2-calendars\"], root[\"@syncfusion/ej2-navigations\"], root[\"@syncfusion/ej2-excel-export\"], root[\"@syncfusion/ej2-pdf-export\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_23__, __WEBPACK_EXTERNAL_MODULE_24__, __WEBPACK_EXTERNAL_MODULE_61__, __WEBPACK_EXTERNAL_MODULE_71__, __WEBPACK_EXTERNAL_MODULE_73__, __WEBPACK_EXTERNAL_MODULE_98__, __WEBPACK_EXTERNAL_MODULE_101__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(112)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(50), __webpack_require__(109), __webpack_require__(110), __webpack_require__(111)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, common_1, actions_1, models_1, renderer_1, services_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(common_1);\n\t    __export(actions_1);\n\t    __export(models_1);\n\t    __export(renderer_1);\n\t    __export(services_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(14), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, grid_1, enum_1, util_1, constant_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(grid_1);\n\t    __export(enum_1);\n\t    __export(util_1);\n\t    __export(constant_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(7), __webpack_require__(10), __webpack_require__(11), __webpack_require__(14), __webpack_require__(36), __webpack_require__(37), __webpack_require__(4), __webpack_require__(38), __webpack_require__(39), __webpack_require__(28), __webpack_require__(40), __webpack_require__(41), __webpack_require__(42), __webpack_require__(43), __webpack_require__(44), __webpack_require__(45), __webpack_require__(46), __webpack_require__(47), __webpack_require__(48), __webpack_require__(49)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_popups_1, util_1, events, render_1, enum_1, cell_render_factory_1, service_locator_1, value_formatter_1, renderer_factory_1, width_controller_1, aria_service_1, focus_strategy_1, page_settings_1, selection_1, search_1, show_hide_1, scroll_1, print_1, aggregate_1, column_chooser_1, clipboard_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SortDescriptor = (function (_super) {\n\t        __extends(SortDescriptor, _super);\n\t        function SortDescriptor() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SortDescriptor;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], SortDescriptor.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], SortDescriptor.prototype, \"direction\", void 0);\n\t    exports.SortDescriptor = SortDescriptor;\n\t    var SortSettings = (function (_super) {\n\t        __extends(SortSettings, _super);\n\t        function SortSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SortSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Collection([], SortDescriptor)\n\t    ], SortSettings.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], SortSettings.prototype, \"allowUnsort\", void 0);\n\t    exports.SortSettings = SortSettings;\n\t    var Predicate = (function (_super) {\n\t        __extends(Predicate, _super);\n\t        function Predicate() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Predicate;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"operator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"value\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"matchCase\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"predicate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({})\n\t    ], Predicate.prototype, \"actualFilterValue\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({})\n\t    ], Predicate.prototype, \"actualOperator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"ejpredicate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"matchcase\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"ignoreCase\", void 0);\n\t    exports.Predicate = Predicate;\n\t    var FilterSettings = (function (_super) {\n\t        __extends(FilterSettings, _super);\n\t        function FilterSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return FilterSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Collection([], Predicate)\n\t    ], FilterSettings.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('filterbar')\n\t    ], FilterSettings.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], FilterSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1500)\n\t    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], FilterSettings.prototype, \"operators\", void 0);\n\t    exports.FilterSettings = FilterSettings;\n\t    var SelectionSettings = (function (_super) {\n\t        __extends(SelectionSettings, _super);\n\t        function SelectionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SelectionSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property('row')\n\t    ], SelectionSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('flow')\n\t    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('single')\n\t    ], SelectionSettings.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], SelectionSettings.prototype, \"checkboxOnly\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], SelectionSettings.prototype, \"persistSelection\", void 0);\n\t    exports.SelectionSettings = SelectionSettings;\n\t    var SearchSettings = (function (_super) {\n\t        __extends(SearchSettings, _super);\n\t        function SearchSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SearchSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], SearchSettings.prototype, \"fields\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('')\n\t    ], SearchSettings.prototype, \"key\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('contains')\n\t    ], SearchSettings.prototype, \"operator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n\t    exports.SearchSettings = SearchSettings;\n\t    var RowDropSettings = (function (_super) {\n\t        __extends(RowDropSettings, _super);\n\t        function RowDropSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return RowDropSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], RowDropSettings.prototype, \"targetID\", void 0);\n\t    exports.RowDropSettings = RowDropSettings;\n\t    var TextWrapSettings = (function (_super) {\n\t        __extends(TextWrapSettings, _super);\n\t        function TextWrapSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TextWrapSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property('both')\n\t    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n\t    exports.TextWrapSettings = TextWrapSettings;\n\t    var GroupSettings = (function (_super) {\n\t        __extends(GroupSettings, _super);\n\t        function GroupSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return GroupSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], GroupSettings.prototype, \"showDropArea\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], GroupSettings.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], GroupSettings.prototype, \"captionTemplate\", void 0);\n\t    exports.GroupSettings = GroupSettings;\n\t    var EditSettings = (function (_super) {\n\t        __extends(EditSettings, _super);\n\t        function EditSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return EditSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowAdding\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowEditing\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowDeleting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('normal')\n\t    ], EditSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n\t    exports.EditSettings = EditSettings;\n\t    var Grid = (function (_super) {\n\t        __extends(Grid, _super);\n\t        function Grid(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.isInitial = true;\n\t            _this.sortedColumns = [];\n\t            _this.inViewIndexes = [];\n\t            _this.mediaCol = [];\n\t            _this.isMediaQuery = false;\n\t            _this.isInitialLoad = false;\n\t            _this.freezeRefresh = ej2_base_1.Component.prototype.refresh;\n\t            _this.mergeCells = {};\n\t            _this.isEdit = false;\n\t            _this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            _this.defaultLocale = {\n\t                EmptyRecord: 'No records to display',\n\t                True: 'true',\n\t                False: 'false',\n\t                InvalidFilterMessage: 'Invalid Filter Data',\n\t                GroupDropArea: 'Drag a column header here to group its column',\n\t                UnGroup: 'Click here to ungroup',\n\t                GroupDisable: 'Grouping is disabled for this column',\n\t                FilterbarTitle: '\\'s filter bar cell',\n\t                EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n\t                Add: 'Add',\n\t                Edit: 'Edit',\n\t                Cancel: 'Cancel',\n\t                Update: 'Update',\n\t                Delete: 'Delete',\n\t                Print: 'Print',\n\t                Pdfexport: 'PDF Export',\n\t                Excelexport: 'Excel Export',\n\t                Wordexport: 'Word Export',\n\t                Csvexport: 'CSV Export',\n\t                Search: 'Search',\n\t                Save: 'Save',\n\t                Item: 'item',\n\t                Items: 'items',\n\t                EditOperationAlert: 'No records selected for edit operation',\n\t                DeleteOperationAlert: 'No records selected for delete operation',\n\t                SaveButton: 'Save',\n\t                OKButton: 'OK',\n\t                CancelButton: 'Cancel',\n\t                EditFormTitle: 'Details of ',\n\t                AddFormTitle: 'Add New Record',\n\t                BatchSaveConfirm: 'Are you sure you want to save changes?',\n\t                BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n\t                ConfirmDelete: 'Are you sure you want to Delete Record?',\n\t                CancelEdit: 'Are you sure you want to Cancel the changes?',\n\t                ChooseColumns: 'Choose Column',\n\t                SearchColumns: 'search columns',\n\t                Matchs: 'No Matches Found',\n\t                FilterButton: 'Filter',\n\t                ClearButton: 'Clear',\n\t                StartsWith: 'StartsWith',\n\t                EndsWidth: 'EndsWith',\n\t                Contains: 'Contains',\n\t                Equal: 'Equal',\n\t                NotEqual: 'NotEqual',\n\t                LessThan: 'LessThan',\n\t                LessThanOrEqual: 'LessThanOrEqual',\n\t                GreaterThan: 'GreaterThan',\n\t                GreaterThanOrEqual: 'GreaterThanOrEqual',\n\t                ChooseDate: 'Choose a Date',\n\t                EnterValue: 'Enter the value',\n\t                Copy: 'Copy',\n\t                Group: 'Group by this column',\n\t                Ungroup: 'Ungroup by this column',\n\t                autoFitAll: 'Auto Fit all columns',\n\t                autoFit: 'Auto Fit this column',\n\t                Export: 'Export',\n\t                FirstPage: 'First Page',\n\t                LastPage: 'Last Page',\n\t                PreviousPage: 'Previous Page',\n\t                NextPage: 'Next Page',\n\t                SortAscending: 'Sort Ascending',\n\t                SortDescending: 'Sort Descending',\n\t                EditRecord: 'Edit Record',\n\t                DeleteRecord: 'Delete Record',\n\t                FilterMenu: 'Filter',\n\t                Columnchooser: 'Columns'\n\t            };\n\t            _this.keyConfigs = {\n\t                downArrow: 'downarrow',\n\t                upArrow: 'uparrow',\n\t                rightArrow: 'rightarrow',\n\t                leftArrow: 'leftarrow',\n\t                shiftDown: 'shift+downarrow',\n\t                shiftUp: 'shift+uparrow',\n\t                shiftRight: 'shift+rightarrow',\n\t                shiftLeft: 'shift+leftarrow',\n\t                home: 'home',\n\t                end: 'end',\n\t                escape: 'escape',\n\t                ctrlHome: 'ctrl+home',\n\t                ctrlEnd: 'ctrl+end',\n\t                pageUp: 'pageup',\n\t                pageDown: 'pagedown',\n\t                ctrlAltPageUp: 'ctrl+alt+pageup',\n\t                ctrlAltPageDown: 'ctrl+alt+pagedown',\n\t                altPageUp: 'alt+pageup',\n\t                altPageDown: 'alt+pagedown',\n\t                altDownArrow: 'alt+downarrow',\n\t                altUpArrow: 'alt+uparrow',\n\t                ctrlDownArrow: 'ctrl+downarrow',\n\t                ctrlUpArrow: 'ctrl+uparrow',\n\t                ctrlPlusA: 'ctrl+A',\n\t                ctrlPlusP: 'ctrl+P',\n\t                insert: 'insert',\n\t                delete: 'delete',\n\t                f2: 'f2',\n\t                enter: 'enter',\n\t                ctrlEnter: 'ctrl+enter',\n\t                shiftEnter: 'shift+enter',\n\t                tab: 'tab',\n\t                shiftTab: 'shift+tab',\n\t                space: 'space',\n\t                ctrlPlusC: 'ctrl+C',\n\t                ctrlShiftPlusH: 'ctrl+shift+H'\n\t            };\n\t            ej2_base_2.setValue('mergePersistData', _this.mergePersistGridData, _this);\n\t            return _this;\n\t        }\n\t        Grid.prototype.getPersistData = function () {\n\t            var _this = this;\n\t            var keyEntity = ['pageSettings', 'sortSettings',\n\t                'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex'];\n\t            var ignoreOnPersist = {\n\t                pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n\t                filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay'],\n\t                groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n\t                    'disablePageWiseAggregates', 'hideCaptionCount'],\n\t                searchSettings: ['fields', 'operator', 'ignoreCase'],\n\t                sortSettings: [], columns: [], selectedRowIndex: []\n\t            };\n\t            var ignoreOnColumn = ['filter', 'edit', 'filterBarTemplate', 'headerTemplate', 'template',\n\t                'commandTemplate', 'commands'];\n\t            keyEntity.forEach(function (value) {\n\t                var currentObject = _this[value];\n\t                for (var _i = 0, _a = ignoreOnPersist[value]; _i < _a.length; _i++) {\n\t                    var val = _a[_i];\n\t                    delete currentObject[val];\n\t                }\n\t            });\n\t            this.ignoreInArrays(ignoreOnColumn, this.columns);\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Grid.prototype.ignoreInArrays = function (ignoreOnColumn, columns) {\n\t            var _this = this;\n\t            columns.forEach(function (column) {\n\t                if (column.columns) {\n\t                    _this.ignoreInColumn(ignoreOnColumn, column);\n\t                    _this.ignoreInArrays(ignoreOnColumn, column.columns);\n\t                }\n\t                else {\n\t                    _this.ignoreInColumn(ignoreOnColumn, column);\n\t                }\n\t            });\n\t        };\n\t        Grid.prototype.ignoreInColumn = function (ignoreOnColumn, column) {\n\t            ignoreOnColumn.forEach(function (val) {\n\t                delete column[val];\n\t            });\n\t        };\n\t        Grid.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.allowFiltering) {\n\t                modules.push({\n\t                    member: 'filter',\n\t                    args: [this, this.filterSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.allowExcelExport) {\n\t                modules.push({\n\t                    member: 'ExcelExport',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowPdfExport) {\n\t                modules.push({\n\t                    member: 'PdfExport',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowSorting) {\n\t                modules.push({\n\t                    member: 'sort',\n\t                    args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.allowPaging) {\n\t                modules.push({\n\t                    member: 'pager',\n\t                    args: [this, this.pageSettings]\n\t                });\n\t            }\n\t            if (this.allowSelection) {\n\t                modules.push({\n\t                    member: 'selection',\n\t                    args: [this, this.selectionSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            modules.push({\n\t                member: 'resize',\n\t                args: [this]\n\t            });\n\t            if (this.allowReordering) {\n\t                modules.push({\n\t                    member: 'reorder',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowRowDragAndDrop) {\n\t                modules.push({\n\t                    member: 'rowDragAndDrop',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowGrouping) {\n\t                modules.push({\n\t                    member: 'group',\n\t                    args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.aggregates.length) {\n\t                modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n\t            }\n\t            if (this.isDetail()) {\n\t                modules.push({\n\t                    member: 'detailRow',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.toolbar || this.toolbarTemplate) {\n\t                modules.push({\n\t                    member: 'toolbar',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.enableVirtualization || this.enableColumnVirtualization) {\n\t                modules.push({\n\t                    member: 'virtualscroll',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.frozenColumns || this.frozenRows) {\n\t                modules.push({ member: 'freeze', args: [this, this.serviceLocator] });\n\t            }\n\t            if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n\t                modules.push({\n\t                    member: 'edit',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            this.extendRequiredModules(modules);\n\t            return modules;\n\t        };\n\t        Grid.prototype.extendRequiredModules = function (modules) {\n\t            if (this.isCommandColumn(this.columns)) {\n\t                modules.push({\n\t                    member: 'commandColumn',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.contextMenuItems) {\n\t                modules.push({\n\t                    member: 'contextMenu',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.showColumnMenu) {\n\t                modules.push({\n\t                    member: 'columnMenu',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t        };\n\t        Grid.prototype.preRender = function () {\n\t            this.serviceLocator = new service_locator_1.ServiceLocator;\n\t            this.initializeServices();\n\t        };\n\t        Grid.prototype.render = function () {\n\t            this.ariaService.setOptions(this.element, { role: 'grid' });\n\t            ej2_popups_1.createSpinner({ target: this.element });\n\t            this.renderModule = new render_1.Render(this, this.serviceLocator);\n\t            this.getMediaColumns();\n\t            this.searchModule = new search_1.Search(this);\n\t            this.scrollModule = new scroll_1.Scroll(this);\n\t            if (this.showColumnChooser) {\n\t                this.columnChooserModule = new column_chooser_1.ColumnChooser(this, this.serviceLocator);\n\t            }\n\t            this.notify(events.initialLoad, {});\n\t            this.trigger(events.load);\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            this.getColumns();\n\t            this.processModel();\n\t            this.gridRender();\n\t            this.wireEvents();\n\t            this.addListener();\n\t            this.updateDefaultCursor();\n\t            this.showSpinner();\n\t            this.notify(events.initialEnd, {});\n\t        };\n\t        Grid.prototype.showSpinner = function () {\n\t            ej2_popups_1.showSpinner(this.element);\n\t        };\n\t        Grid.prototype.hideSpinner = function () {\n\t            ej2_popups_1.hideSpinner(this.element);\n\t        };\n\t        Grid.prototype.getMediaColumns = function () {\n\t            if (!this.enableColumnVirtualization) {\n\t                var gcol = this.getColumns();\n\t                this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t                if (!ej2_base_2.isNullOrUndefined(gcol)) {\n\t                    for (var index = 0; index < gcol.length; index++) {\n\t                        if (!ej2_base_2.isNullOrUndefined(gcol[index].hideAtMedia)) {\n\t                            this.mediaCol.push(gcol[index]);\n\t                            var media = window.matchMedia(gcol[index].hideAtMedia);\n\t                            this.mediaQueryUpdate(index, media);\n\t                            media.addListener(this.mediaQueryUpdate.bind(this, index));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n\t            this.isMediaQuery = true;\n\t            var col = this.getColumns()[columnIndex];\n\t            col.visible = e.matches;\n\t            if (this.isInitialLoad) {\n\t                if (col.visible) {\n\t                    this.showHider.show(col.headerText, 'headerText');\n\t                }\n\t                else {\n\t                    this.showHider.hide(col.headerText, 'headerText');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.refreshMediaCol = function () {\n\t            if (this.isMediaQuery) {\n\t                this.refresh();\n\t                this.isMediaQuery = false;\n\t            }\n\t            this.isInitialLoad = true;\n\t        };\n\t        Grid.prototype.eventInitializer = function () {\n\t        };\n\t        Grid.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t            this.removeListener();\n\t            this.notify(events.destroy, {});\n\t            this.destroyDependentModules();\n\t            _super.prototype.destroy.call(this);\n\t            this.element.innerHTML = '';\n\t            ej2_base_3.classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device']);\n\t        };\n\t        Grid.prototype.destroyDependentModules = function () {\n\t            this.scrollModule.destroy();\n\t            this.keyboardModule.destroy();\n\t            this.focusModule.destroy();\n\t        };\n\t        Grid.prototype.getModuleName = function () {\n\t            return 'grid';\n\t        };\n\t        Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var requireRefresh = false;\n\t            var requireGridRefresh = false;\n\t            var checkCursor;\n\t            var args = { requestType: 'refresh' };\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowPaging':\n\t                        this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'pageSettings':\n\t                        this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n\t                        if (ej2_base_2.isNullOrUndefined(newProp.pageSettings.currentPage) && ej2_base_2.isNullOrUndefined(newProp.pageSettings.totalRecordsCount)) {\n\t                            requireRefresh = true;\n\t                        }\n\t                        break;\n\t                    case 'locale':\n\t                        this.localeObj.setLocale(newProp.locale);\n\t                        this.valueFormatterService.setCulture(newProp.locale);\n\t                        requireRefresh = true;\n\t                        if (this.toolbar) {\n\t                            this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        }\n\t                        break;\n\t                    case 'allowSorting':\n\t                        this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowFiltering':\n\t                        this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'height':\n\t                    case 'width':\n\t                        this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n\t                        break;\n\t                    case 'allowReordering':\n\t                        this.notify(events.uiUpdate, { module: 'reorder', enable: this.allowReordering });\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowRowDragAndDrop':\n\t                        this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n\t                        break;\n\t                    case 'rowTemplate':\n\t                        this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'detailTemplate':\n\t                        this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'allowGrouping':\n\t                        this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n\t                        this.headerModule.refreshUI();\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'childGrid':\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'toolbar':\n\t                        this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        break;\n\t                    case 'groupSettings':\n\t                        if (!(ej2_base_2.isNullOrUndefined(newProp.groupSettings.showDropArea))) {\n\t                            this.headerModule.refreshUI();\n\t                            requireRefresh = true;\n\t                            checkCursor = true;\n\t                        }\n\t                        this.notify(events.inBoundModelChanged, { module: 'group', properties: newProp.groupSettings });\n\t                        break;\n\t                    case 'aggregates':\n\t                        this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n\t                        break;\n\t                    case 'columns':\n\t                        this.updateColumnObject();\n\t                        requireGridRefresh = true;\n\t                        break;\n\t                    case 'frozenColumns':\n\t                    case 'frozenRows':\n\t                        this.freezeRefresh();\n\t                        break;\n\t                    default:\n\t                        this.extendedPropertyChange(prop, newProp);\n\t                }\n\t            }\n\t            if (checkCursor) {\n\t                this.updateDefaultCursor();\n\t            }\n\t            if (requireGridRefresh) {\n\t                this.refresh();\n\t            }\n\t            else if (requireRefresh) {\n\t                this.notify(events.modelChanged, args);\n\t                requireRefresh = false;\n\t            }\n\t        };\n\t        Grid.prototype.extendedPropertyChange = function (prop, newProp) {\n\t            switch (prop) {\n\t                case 'enableRtl':\n\t                    this.updateRTL();\n\t                    if (this.allowPaging) {\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.height !== 'auto') {\n\t                        this.scrollModule.removePadding(!newProp.enableRtl);\n\t                        this.scrollModule.setPadding();\n\t                    }\n\t                    if (this.toolbar) {\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.contextMenuItems) {\n\t                        this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.showColumnMenu) {\n\t                        this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();\n\t                    }\n\t                    break;\n\t                case 'enableAltRow':\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'allowResizing':\n\t                    this.headerModule.refreshUI();\n\t                    break;\n\t                case 'gridLines':\n\t                    this.updateGridLines();\n\t                    break;\n\t                case 'filterSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n\t                    break;\n\t                case 'searchSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n\t                    break;\n\t                case 'sortSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'sort' });\n\t                    break;\n\t                case 'selectionSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n\t                    break;\n\t                case 'editSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n\t                    break;\n\t                case 'allowTextWrap':\n\t                case 'textWrapSettings':\n\t                    if (this.allowTextWrap) {\n\t                        this.applyTextWrap();\n\t                    }\n\t                    else {\n\t                        this.removeTextWrap();\n\t                    }\n\t                    break;\n\t                case 'dataSource':\n\t                    this.notify(events.dataSourceModified, {});\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'enableHover':\n\t                    var action = newProp.enableHover ? ej2_base_3.addClass : ej2_base_3.removeClass;\n\t                    action([this.element], 'e-gridhover');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.updateDefaultCursor = function () {\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                if (this.allowSorting || this.allowGrouping || this.allowReordering) {\n\t                    row.classList.remove('e-defaultcursor');\n\t                }\n\t                else {\n\t                    row.classList.add('e-defaultcursor');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.updateColumnModel = function (columns) {\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                if (columns[i].columns) {\n\t                    this.updateColumnModel(columns[i].columns);\n\t                }\n\t                else {\n\t                    this.columnModel.push(columns[i]);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.getColumns = function () {\n\t            var _this = this;\n\t            var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n\t            var vLen = inview.length;\n\t            if (!this.enableColumnVirtualization || ej2_base_2.isNullOrUndefined(this.columnModel) || this.columnModel.length === 0) {\n\t                this.columnModel = [];\n\t                this.updateColumnModel(this.columns);\n\t            }\n\t            var columns = vLen === 0 ? this.columnModel :\n\t                this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n\t            return columns;\n\t        };\n\t        Grid.prototype.getColumnIndexesInView = function () {\n\t            return this.inViewIndexes;\n\t        };\n\t        Grid.prototype.getLocaleConstants = function () {\n\t            return this.defaultLocale;\n\t        };\n\t        Grid.prototype.setColumnIndexesInView = function (indexes) {\n\t            this.inViewIndexes = indexes;\n\t        };\n\t        Grid.prototype.getVisibleColumns = function () {\n\t            var cols = [];\n\t            for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.visible) {\n\t                    cols.push(col);\n\t                }\n\t            }\n\t            return cols;\n\t        };\n\t        Grid.prototype.getHeaderContent = function () {\n\t            return this.headerModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridHeaderContent = function (element) {\n\t            this.headerModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getContentTable = function () {\n\t            return this.contentModule.getTable();\n\t        };\n\t        Grid.prototype.setGridContentTable = function (element) {\n\t            this.contentModule.setTable(element);\n\t        };\n\t        Grid.prototype.getContent = function () {\n\t            return this.contentModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridContent = function (element) {\n\t            this.contentModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getHeaderTable = function () {\n\t            return this.headerModule.getTable();\n\t        };\n\t        Grid.prototype.setGridHeaderTable = function (element) {\n\t            this.headerModule.setTable(element);\n\t        };\n\t        Grid.prototype.getFooterContent = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement;\n\t        };\n\t        Grid.prototype.getFooterContentTable = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement.firstChild.firstChild;\n\t        };\n\t        Grid.prototype.getPager = function () {\n\t            return this.gridPager;\n\t        };\n\t        Grid.prototype.setGridPager = function (element) {\n\t            this.gridPager = element;\n\t        };\n\t        Grid.prototype.getRowByIndex = function (index) {\n\t            return this.contentModule.getRowByIndex(index);\n\t        };\n\t        Grid.prototype.getRows = function () {\n\t            return this.contentModule.getRowElements();\n\t        };\n\t        Grid.prototype.getDataRows = function () {\n\t            var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    dataRows.push(rows[i]);\n\t                }\n\t            }\n\t            return dataRows;\n\t        };\n\t        Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n\t            return this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n\t        };\n\t        Grid.prototype.getColumnHeaderByIndex = function (index) {\n\t            return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n\t        };\n\t        Grid.prototype.getRowObjectFromUID = function (uid) {\n\t            for (var _i = 0, _a = this.contentModule.getRows(); _i < _a.length; _i++) {\n\t                var row = _a[_i];\n\t                if (row.uid === uid) {\n\t                    return row;\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        Grid.prototype.getRowsObject = function () {\n\t            return this.contentModule.getRows();\n\t        };\n\t        Grid.prototype.getColumnHeaderByField = function (field) {\n\t            return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n\t        };\n\t        Grid.prototype.getColumnHeaderByUid = function (uid) {\n\t            return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n\t        };\n\t        Grid.prototype.getColumnByField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByField = function (field) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getColumnByUid = function (uid) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByUid = function (uid) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getUidByColumnField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item.uid;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getNormalizedColumnIndex = function (uid) {\n\t            var index = this.getColumnIndexByUid(uid);\n\t            if (this.allowGrouping) {\n\t                index += this.groupSettings.columns.length;\n\t            }\n\t            if (this.isDetail()) {\n\t                index++;\n\t            }\n\t            return index;\n\t        };\n\t        Grid.prototype.getColumnFieldNames = function () {\n\t            var columnNames = [];\n\t            var column;\n\t            for (var i = 0, len = this.getColumns().length; i < len; i++) {\n\t                column = this.getColumns()[i];\n\t                if (column.visible) {\n\t                    columnNames.push(column.field);\n\t                }\n\t            }\n\t            return columnNames;\n\t        };\n\t        Grid.prototype.getRowTemplate = function () {\n\t            return this.rowTemplateFn;\n\t        };\n\t        Grid.prototype.getDetailTemplate = function () {\n\t            return this.detailTemplateFn;\n\t        };\n\t        Grid.prototype.getPrimaryKeyFieldNames = function () {\n\t            var keys = [];\n\t            for (var key = 0, col = this.columns, cLen = col.length; key < cLen; key++) {\n\t                if (col[key].isPrimaryKey) {\n\t                    keys.push(col[key].field);\n\t                }\n\t            }\n\t            return keys;\n\t        };\n\t        Grid.prototype.refresh = function () {\n\t            this.headerModule.refreshUI();\n\t            this.renderModule.refresh();\n\t        };\n\t        Grid.prototype.refreshHeader = function () {\n\t            this.headerModule.refreshUI();\n\t        };\n\t        Grid.prototype.getSelectedRows = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRecords : [];\n\t        };\n\t        Grid.prototype.getSelectedRowIndexes = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n\t        };\n\t        Grid.prototype.getSelectedRowCellIndexes = function () {\n\t            return this.selectionModule.selectedRowCellIndexes;\n\t        };\n\t        Grid.prototype.getSelectedRecords = function () {\n\t            return this.selectionModule.getSelectedRecords();\n\t        };\n\t        Grid.prototype.getDataModule = function () {\n\t            return this.renderModule.data;\n\t        };\n\t        Grid.prototype.showColumns = function (keys, showBy) {\n\t            showBy = showBy ? showBy : 'headerText';\n\t            this.showHider.show(keys, showBy);\n\t        };\n\t        Grid.prototype.hideColumns = function (keys, hideBy) {\n\t            hideBy = hideBy ? hideBy : 'headerText';\n\t            this.showHider.hide(keys, hideBy);\n\t        };\n\t        Grid.prototype.goToPage = function (pageNo) {\n\t            this.pagerModule.goToPage(pageNo);\n\t        };\n\t        Grid.prototype.updateExternalMessage = function (message) {\n\t            this.pagerModule.updateExternalMessage(message);\n\t        };\n\t        Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            this.sortModule.sortColumn(columnName, direction, isMultiSort);\n\t        };\n\t        Grid.prototype.clearSorting = function () {\n\t            this.sortModule.clearSorting();\n\t        };\n\t        Grid.prototype.removeSortColumn = function (field) {\n\t            this.sortModule.removeSortColumn(field);\n\t        };\n\t        Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator);\n\t        };\n\t        Grid.prototype.clearFiltering = function () {\n\t            this.filterModule.clearFiltering();\n\t        };\n\t        Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n\t        };\n\t        Grid.prototype.selectRow = function (index, isToggle) {\n\t            this.selectionModule.selectRow(index, isToggle);\n\t        };\n\t        Grid.prototype.selectRows = function (rowIndexes) {\n\t            this.selectionModule.selectRows(rowIndexes);\n\t        };\n\t        Grid.prototype.clearSelection = function () {\n\t            this.selectionModule.clearSelection();\n\t        };\n\t        Grid.prototype.selectCell = function (cellIndex, isToggle) {\n\t            this.selectionModule.selectCell(cellIndex, isToggle);\n\t        };\n\t        Grid.prototype.search = function (searchString) {\n\t            this.searchModule.search(searchString);\n\t        };\n\t        Grid.prototype.print = function () {\n\t            this.printModule.print();\n\t        };\n\t        Grid.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Grid.prototype.startEdit = function () {\n\t            this.editModule.startEdit();\n\t        };\n\t        Grid.prototype.endEdit = function () {\n\t            this.editModule.endEdit();\n\t        };\n\t        Grid.prototype.closeEdit = function () {\n\t            this.editModule.closeEdit();\n\t        };\n\t        Grid.prototype.addRecord = function (data) {\n\t            this.editModule.addRecord(data);\n\t        };\n\t        Grid.prototype.deleteRow = function (tr) {\n\t            this.editModule.deleteRow(tr);\n\t        };\n\t        Grid.prototype.copy = function (withHeader) {\n\t            this.clipboardModule.copy(withHeader);\n\t        };\n\t        Grid.prototype.recalcIndentWidth = function () {\n\t            if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n\t                return;\n\t            }\n\t            if ((!this.groupSettings.columns.length && !this.isDetail()) ||\n\t                this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n\t                !this.getContentTable()) {\n\t                return;\n\t            }\n\t            var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n\t            var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n\t            var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n\t            var perPixel = indentWidth / 30;\n\t            var i = 0;\n\t            if (perPixel >= 1) {\n\t                indentWidth = (30 / perPixel);\n\t            }\n\t            if (this.enableColumnVirtualization) {\n\t                indentWidth = 30;\n\t            }\n\t            while (i < this.groupSettings.columns.length) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t                i++;\n\t            }\n\t            if (this.isDetail()) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t            }\n\t            this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n\t        };\n\t        Grid.prototype.reorderColumns = function (fromFName, toFName) {\n\t            this.reorderModule.reorderColumns(fromFName, toFName);\n\t        };\n\t        Grid.prototype.autoFitColumns = function (fieldNames) {\n\t            this.resizeModule.autoFitColumns(fieldNames);\n\t        };\n\t        Grid.prototype.createColumnchooser = function (x, y, target) {\n\t            this.columnChooserModule.renderColumnChooser(x, y, target);\n\t        };\n\t        Grid.prototype.initializeServices = function () {\n\t            this.serviceLocator.register('widthService', this.widthService = new width_controller_1.ColumnWidthService(this));\n\t            this.serviceLocator.register('cellRendererFactory', new cell_render_factory_1.CellRendererFactory);\n\t            this.serviceLocator.register('rendererFactory', new renderer_factory_1.RendererFactory);\n\t            this.serviceLocator.register('localization', this.localeObj = new ej2_base_4.L10n(this.getModuleName(), this.defaultLocale, this.locale));\n\t            this.serviceLocator.register('valueFormatter', this.valueFormatterService = new value_formatter_1.ValueFormatter(this.locale));\n\t            this.serviceLocator.register('showHideService', this.showHider = new show_hide_1.ShowHide(this));\n\t            this.serviceLocator.register('ariaService', this.ariaService = new aria_service_1.AriaService());\n\t            this.serviceLocator.register('focus', this.focusModule = new focus_strategy_1.FocusStrategy(this));\n\t        };\n\t        Grid.prototype.processModel = function () {\n\t            var gCols = this.groupSettings.columns;\n\t            var sCols = this.sortSettings.columns;\n\t            var flag;\n\t            var j;\n\t            if (this.allowGrouping) {\n\t                var _loop_1 = function (i, len) {\n\t                    j = 0;\n\t                    for (var sLen = sCols.length; j < sLen; j++) {\n\t                        if (sCols[j].field === gCols[i]) {\n\t                            flag = true;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sCols.push({ field: gCols[i], direction: 'ascending' });\n\t                    }\n\t                    else {\n\t                        if (this_1.allowSorting) {\n\t                            this_1.sortedColumns.push(sCols[j].field);\n\t                        }\n\t                        else {\n\t                            sCols[j].direction = 'ascending';\n\t                        }\n\t                    }\n\t                    if (!this_1.groupSettings.showGroupedColumn) {\n\t                        var column = this_1.enableColumnVirtualization ?\n\t                            this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n\t                        column.visible = false;\n\t                    }\n\t                };\n\t                var this_1 = this;\n\t                for (var i = 0, len = gCols.length; i < len; i++) {\n\t                    _loop_1(i, len);\n\t                }\n\t            }\n\t            this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t            this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t            if (!ej2_base_2.isNullOrUndefined(this.parentDetails)) {\n\t                var value = ej2_base_2.isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n\t                    this.parentDetails.parentKeyFieldValue;\n\t                this.query.where(this.queryString, 'equal', value, true);\n\t            }\n\t        };\n\t        Grid.prototype.gridRender = function () {\n\t            this.updateRTL();\n\t            if (this.enableHover) {\n\t                this.element.classList.add('e-gridhover');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                this.element.classList.add('e-device');\n\t            }\n\t            ej2_base_3.classList(this.element, ['e-responsive', 'e-default'], []);\n\t            var rendererFactory = this.serviceLocator.getService('rendererFactory');\n\t            this.headerModule = rendererFactory.getRenderer(enum_1.RenderType.Header);\n\t            this.contentModule = rendererFactory.getRenderer(enum_1.RenderType.Content);\n\t            this.printModule = new print_1.Print(this, this.scrollModule);\n\t            this.clipboardModule = new clipboard_1.Clipboard(this);\n\t            this.renderModule.render();\n\t            this.eventInitializer();\n\t            this.createGridPopUpElement();\n\t            this.widthService.setWidthToColumns();\n\t            this.updateGridLines();\n\t            this.applyTextWrap();\n\t        };\n\t        Grid.prototype.dataReady = function () {\n\t            this.scrollModule.setWidth();\n\t            this.scrollModule.setHeight();\n\t            if (this.height !== 'auto') {\n\t                this.scrollModule.setPadding();\n\t            }\n\t        };\n\t        Grid.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Grid.prototype.createGridPopUpElement = function () {\n\t            var popup = ej2_base_3.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n\t            var content = ej2_base_3.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-uptail e-tail' })], popup);\n\t            content.appendChild(ej2_base_3.createElement('span'));\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-downtail e-tail' })], popup);\n\t            this.element.appendChild(popup);\n\t        };\n\t        Grid.prototype.updateGridLines = function () {\n\t            ej2_base_3.classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n\t            switch (this.gridLines) {\n\t                case 'horizontal':\n\t                    this.element.classList.add('e-horizontallines');\n\t                    break;\n\t                case 'vertical':\n\t                    this.element.classList.add('e-verticallines');\n\t                    break;\n\t                case 'none':\n\t                    this.element.classList.add('e-hidelines');\n\t                    break;\n\t                case 'both':\n\t                    this.element.classList.add('e-bothlines');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.applyTextWrap = function () {\n\t            if (this.allowTextWrap) {\n\t                var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t                switch (this.textWrapSettings.wrapMode) {\n\t                    case 'header':\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, true);\n\t                        break;\n\t                    case 'content':\n\t                        util_1.wrap(this.getContent(), true);\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(headerRows, false);\n\t                        break;\n\t                    default:\n\t                        util_1.wrap(this.element, true);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, false);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.removeTextWrap = function () {\n\t            util_1.wrap(this.element, false);\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            util_1.wrap(headerRows, false);\n\t            util_1.wrap(this.getContent(), false);\n\t        };\n\t        Grid.prototype.refreshTooltip = function () {\n\t            var width;\n\t            var headerTable = this.getHeaderTable();\n\t            var contentTable = this.getContentTable();\n\t            var headerDivTag = 'e-gridheader';\n\t            var contentDivTag = 'e-gridcontent';\n\t            var htable = this.createTable(headerTable, headerDivTag, 'header');\n\t            var ctable = this.createTable(headerTable, headerDivTag, 'content');\n\t            var all = this.element.querySelectorAll('.e-ellipsistooltip');\n\t            var allele = [];\n\t            for (var i = 0; i < all.length; i++) {\n\t                allele[i] = all[i];\n\t            }\n\t            allele.forEach(function (element) {\n\t                var td = element;\n\t                var table = headerTable.contains(element) ? htable : ctable;\n\t                var ele = headerTable.contains(element) ? 'th' : 'tr';\n\t                table.querySelector(ele).className = element.className;\n\t                table.querySelector(ele).innerHTML = element.innerHTML;\n\t                width = table.querySelector(ele).getBoundingClientRect().width;\n\t                if (width > element.getBoundingClientRect().width && !element.classList.contains('e-tooltip')) {\n\t                    var tooltip = new ej2_popups_1.Tooltip({ content: element.innerHTML }, element);\n\t                }\n\t                else if (width < element.getBoundingClientRect().width && element.classList.contains('e-tooltip')) {\n\t                    element.ej2_instances[0].destroy();\n\t                }\n\t            });\n\t            document.body.removeChild(htable);\n\t            document.body.removeChild(ctable);\n\t        };\n\t        Grid.prototype.createTable = function (table, tag, type) {\n\t            var myTableDiv = ej2_base_3.createElement('div');\n\t            myTableDiv.className = this.element.className;\n\t            myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n\t            var mySubDiv = ej2_base_3.createElement('div');\n\t            mySubDiv.className = tag;\n\t            var myTable = ej2_base_3.createElement('table');\n\t            myTable.className = table.className;\n\t            myTable.style.cssText = 'table-layout: auto;width: auto';\n\t            var ele = (type === 'header') ? 'th' : 'td';\n\t            var myTr = ej2_base_3.createElement('tr');\n\t            var mytd = ej2_base_3.createElement(ele);\n\t            myTr.appendChild(mytd);\n\t            myTable.appendChild(myTr);\n\t            mySubDiv.appendChild(myTable);\n\t            myTableDiv.appendChild(mySubDiv);\n\t            document.body.appendChild(myTableDiv);\n\t            return myTableDiv;\n\t        };\n\t        Grid.prototype.wireEvents = function () {\n\t            ej2_base_5.EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n\t            ej2_base_5.EventHandler.add(this.getContent(), 'dblclick', this.dblClickHandler, this);\n\t            if (this.allowKeyboard) {\n\t                this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n\t            }\n\t            this.keyboardModule = new ej2_base_5.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs,\n\t                eventName: 'keydown'\n\t            });\n\t        };\n\t        Grid.prototype.unwireEvents = function () {\n\t            ej2_base_5.EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n\t        };\n\t        Grid.prototype.addListener = function () {\n\t            var _this = this;\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.on(events.dataReady, this.dataReady, this);\n\t            this.on(events.contentReady, this.recalcIndentWidth, this);\n\t            [events.updateData, events.modelChanged, events.contentReady, events.columnWidthChanged].forEach(function (event) {\n\t                return _this.on(event, _this.refreshTooltip, _this);\n\t            });\n\t            this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n\t            this.dataBoundFunction = this.refreshMediaCol.bind(this);\n\t            this.addEventListener(events.dataBound, this.dataBoundFunction);\n\t        };\n\t        Grid.prototype.removeListener = function () {\n\t            var _this = this;\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.off(events.dataReady, this.dataReady);\n\t            this.off(events.contentReady, this.recalcIndentWidth);\n\t            [events.updateData, events.modelChanged, events.contentReady, events.columnWidthChanged].forEach(function (event) {\n\t                return _this.off(event, _this.refreshTooltip);\n\t            });\n\t            this.off(events.headerRefreshed, this.recalcIndentWidth);\n\t            this.removeEventListener(events.dataBound, this.dataBoundFunction);\n\t        };\n\t        Grid.prototype.getCurrentViewRecords = function () {\n\t            return (this.allowGrouping && this.groupSettings.columns.length) ?\n\t                this.currentViewData.records : this.currentViewData;\n\t        };\n\t        Grid.prototype.mouseClickHandler = function (e) {\n\t            if (this.isChildGrid(e) || (util_1.parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n\t                this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n\t                return;\n\t            }\n\t            if (((!this.allowRowDragAndDrop && util_1.parentsUntil(e.target, 'e-gridcontent')) ||\n\t                (!(this.allowGrouping || this.allowReordering) && util_1.parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n\t                return;\n\t            }\n\t            if (util_1.parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n\t                e.preventDefault();\n\t            }\n\t            this.notify(events.click, e);\n\t        };\n\t        Grid.prototype.checkEdit = function (e) {\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            var isEdit = this.editSettings.mode !== 'batch' &&\n\t                this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n\t            return !util_1.parentsUntil(e.target, 'e-unboundcelldiv') && (isEdit || (util_1.parentsUntil(e.target, 'e-rowcell') &&\n\t                util_1.parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell')));\n\t        };\n\t        Grid.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-grid').id !== this.element.id || ej2_base_1.closest(e.target, '.e-unboundcelldiv')) {\n\t                return;\n\t            }\n\t            this.notify(events.dblclick, e);\n\t        };\n\t        Grid.prototype.focusOutHandler = function (e) {\n\t            if (this.isChildGrid(e)) {\n\t                return;\n\t            }\n\t            if (!util_1.parentsUntil(e.target, 'e-grid')) {\n\t                this.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n\t            if (filterClear) {\n\t                filterClear.classList.add('e-hide');\n\t            }\n\t        };\n\t        Grid.prototype.isChildGrid = function (e) {\n\t            var gridElement = util_1.parentsUntil(e.target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.element.id) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Grid.prototype.mergePersistGridData = function () {\n\t            var data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n\t            if (!(ej2_base_2.isNullOrUndefined(data) || (data === ''))) {\n\t                var dataObj_1 = JSON.parse(data);\n\t                var keys = Object.keys(dataObj_1);\n\t                this.isProtectedOnChange = true;\n\t                var _loop_2 = function (key) {\n\t                    if ((typeof this_2[key] === 'object') && !ej2_base_2.isNullOrUndefined(this_2[key])) {\n\t                        if (Array.isArray(this_2[key])) {\n\t                            this_2[key].forEach(function (element, index) {\n\t                                ej2_base_1.extend(element, dataObj_1[key][index]);\n\t                            });\n\t                        }\n\t                        else {\n\t                            ej2_base_1.extend(this_2[key], dataObj_1[key]);\n\t                        }\n\t                    }\n\t                    else {\n\t                        this_2[key] = dataObj_1[key];\n\t                    }\n\t                };\n\t                var this_2 = this;\n\t                for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                    var key = keys_1[_i];\n\t                    _loop_2(key);\n\t                }\n\t                this.isProtectedOnChange = false;\n\t            }\n\t        };\n\t        Grid.prototype.isDetail = function () {\n\t            return !ej2_base_2.isNullOrUndefined(this.detailTemplate) || !ej2_base_2.isNullOrUndefined(this.childGrid);\n\t        };\n\t        Grid.prototype.keyActionHandler = function (e) {\n\t            if (this.isChildGrid(e) ||\n\t                (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'shiftEnter'\n\t                    && e.action !== 'tab' && e.action !== 'shiftTab')) {\n\t                return;\n\t            }\n\t            if (this.allowKeyboard) {\n\t                if (e.action === 'ctrlPlusP') {\n\t                    e.preventDefault();\n\t                    this.print();\n\t                }\n\t                this.notify(events.keyPressed, e);\n\t            }\n\t        };\n\t        Grid.prototype.setInjectedModules = function (modules) {\n\t            this.injectedModules = modules;\n\t        };\n\t        Grid.prototype.updateColumnObject = function () {\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            if (this.editSettings.allowEditing || this.editSettings.allowAdding || this.editSettings.allowDeleting) {\n\t                this.notify(events.autoCol, {});\n\t            }\n\t        };\n\t        Grid.prototype.refreshColumns = function () {\n\t            this.updateColumnObject();\n\t            this.refresh();\n\t        };\n\t        Grid.prototype.excelExport = function (exportProperties, isMultipleExport, workbook) {\n\t            return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, false);\n\t        };\n\t        Grid.prototype.csvExport = function (exportProperties, isMultipleExport, workbook) {\n\t            return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, true);\n\t        };\n\t        Grid.prototype.pdfExport = function (exportProperties, isMultipleExport, pdfDoc) {\n\t            return this.pdfExportModule.Map(this, exportProperties, isMultipleExport, pdfDoc);\n\t        };\n\t        Grid.prototype.isCommandColumn = function (columns) {\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                if (column.columns) {\n\t                    if (this.isCommandColumn(column.columns)) {\n\t                        return true;\n\t                    }\n\t                }\n\t                else if (column.commands || column.commandsTemplate) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Grid.prototype.groupColumn = function (columnName) {\n\t            this.groupModule.groupColumn(columnName);\n\t        };\n\t        Grid.prototype.ungroupColumn = function (columnName) {\n\t            this.groupModule.ungroupColumn(columnName);\n\t        };\n\t        Grid.prototype.isContextMenuOpen = function () {\n\t            return this.contextMenuModule && this.contextMenuModule.isOpen;\n\t        };\n\t        Grid.prototype.ensureModuleInjected = function (module) {\n\t            return this.getInjectedModules().indexOf(module) >= 0;\n\t        };\n\t        Grid.prototype.showColumn = function (columnName, showBy) {\n\t            this.showHider.show(columnName, showBy);\n\t        };\n\t        Grid.prototype.hideColumn = function (columnName, hideBy) {\n\t            this.showHider.hide(columnName, hideBy);\n\t        };\n\t        return Grid;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], Grid.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"enableAltRow\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"enableHover\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowKeyboard\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowTextWrap\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, TextWrapSettings)\n\t    ], Grid.prototype, \"textWrapSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowPaging\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, page_settings_1.PageSettings)\n\t    ], Grid.prototype, \"pageSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"enableVirtualization\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SearchSettings)\n\t    ], Grid.prototype, \"searchSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowSorting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowMultiSorting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowExcelExport\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowPdfExport\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SortSettings)\n\t    ], Grid.prototype, \"sortSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowSelection\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(-1)\n\t    ], Grid.prototype, \"selectedRowIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SelectionSettings)\n\t    ], Grid.prototype, \"selectionSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowFiltering\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowReordering\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowResizing\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, RowDropSettings)\n\t    ], Grid.prototype, \"rowDropSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, FilterSettings)\n\t    ], Grid.prototype, \"filterSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowGrouping\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"showColumnMenu\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, GroupSettings)\n\t    ], Grid.prototype, \"groupSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, EditSettings)\n\t    ], Grid.prototype, \"editSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Collection([], aggregate_1.AggregateRow)\n\t    ], Grid.prototype, \"aggregates\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"showColumnChooser\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Grid.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Grid.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('default')\n\t    ], Grid.prototype, \"gridLines\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"rowTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"detailTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"childGrid\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"queryString\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('allpages')\n\t    ], Grid.prototype, \"printMode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], Grid.prototype, \"dataSource\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"query\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"toolbar\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"contextMenuItems\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"columnMenuItems\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"toolbarTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"pagerTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(0)\n\t    ], Grid.prototype, \"frozenRows\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(0)\n\t    ], Grid.prototype, \"frozenColumns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"load\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"queryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionBegin\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionFailure\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"dataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowSelecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDeselecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDeselected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSelecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellDeselecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellDeselected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDrag\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"printComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforePrint\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"detailDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDrag\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"toolbarClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"batchAdd\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"batchDelete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchSave\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beginEdit\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellEdit\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSave\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"resizeStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"onResize\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"resizeStop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"contextMenuOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"contextMenuClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnMenuOpen\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnMenuClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"checkBoxChange\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeCopy\", void 0);\n\t    Grid = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Grid);\n\t    exports.Grid = Grid;\n\t    Grid.Inject(selection_1.Selection);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ValueFormatter = (function () {\n\t        function ValueFormatter(cultureName) {\n\t            this.intl = new ej2_base_2.Internationalization();\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                this.intl.culture = cultureName;\n\t            }\n\t        }\n\t        ValueFormatter.prototype.getFormatFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateFormat(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberFormat(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.getParserFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateParser(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberParser(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.fromView = function (value, format, type) {\n\t            if (type === 'date' || type === 'datetime' || type === 'number') {\n\t                return format(value);\n\t            }\n\t            else {\n\t                return value;\n\t            }\n\t        };\n\t        ValueFormatter.prototype.toView = function (value, format) {\n\t            var result = value;\n\t            if (!ej2_base_1.isNullOrUndefined(format) && !ej2_base_1.isNullOrUndefined(value)) {\n\t                result = format(value);\n\t            }\n\t            return result;\n\t        };\n\t        ValueFormatter.prototype.setCulture = function (cultureName) {\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                ej2_base_2.setCulture(cultureName);\n\t            }\n\t        };\n\t        return ValueFormatter;\n\t    }());\n\t    exports.ValueFormatter = ValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(9), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, column_1, ej2_popups_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    function doesImplementInterface(target, checkFor) {\n\t        return target.prototype && checkFor in target.prototype;\n\t    }\n\t    exports.doesImplementInterface = doesImplementInterface;\n\t    function valueAccessor(field, data, column) {\n\t        field = ej2_base_2.isNullOrUndefined(field) ? '' : field;\n\t        return ej2_base_2.getValue(field, data);\n\t    }\n\t    exports.valueAccessor = valueAccessor;\n\t    function getUpdateUsingRaf(updateFunction, callBack) {\n\t        requestAnimationFrame(function () {\n\t            try {\n\t                callBack(null, updateFunction());\n\t            }\n\t            catch (e) {\n\t                callBack(e);\n\t            }\n\t        });\n\t    }\n\t    exports.getUpdateUsingRaf = getUpdateUsingRaf;\n\t    function iterateArrayOrObject(collection, predicate) {\n\t        var result = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            var pred = predicate(collection[i], i);\n\t            if (!ej2_base_2.isNullOrUndefined(pred)) {\n\t                result.push(pred);\n\t            }\n\t        }\n\t        return result;\n\t    }\n\t    exports.iterateArrayOrObject = iterateArrayOrObject;\n\t    function templateCompiler(template) {\n\t        if (template) {\n\t            var e = void 0;\n\t            try {\n\t                if (document.querySelectorAll(template).length) {\n\t                    return ej2_base_1.compile(document.querySelector(template).innerHTML.trim());\n\t                }\n\t            }\n\t            catch (e) {\n\t                return ej2_base_1.compile(template);\n\t            }\n\t        }\n\t        return undefined;\n\t    }\n\t    exports.templateCompiler = templateCompiler;\n\t    function setStyleAndAttributes(node, customAttributes) {\n\t        var copyAttr = {};\n\t        var literals = ['style', 'class'];\n\t        ej2_base_2.extend(copyAttr, customAttributes, {});\n\t        if ('style' in copyAttr) {\n\t            ej2_base_3.setStyleAttribute(node, copyAttr[literals[0]]);\n\t            delete copyAttr[literals[0]];\n\t        }\n\t        if ('class' in copyAttr) {\n\t            ej2_base_3.addClass([node], copyAttr[literals[1]]);\n\t            delete copyAttr[literals[1]];\n\t        }\n\t        ej2_base_3.attributes(node, copyAttr);\n\t    }\n\t    exports.setStyleAndAttributes = setStyleAndAttributes;\n\t    function extend(copied, first, second, exclude) {\n\t        var moved = ej2_base_2.extend(copied, first, second);\n\t        Object.keys(moved).forEach(function (value, index) {\n\t            if (exclude.indexOf(value) !== -1) {\n\t                delete moved[value];\n\t            }\n\t        });\n\t        return moved;\n\t    }\n\t    exports.extend = extend;\n\t    function prepareColumns(columns, autoWidth) {\n\t        for (var c = 0, len = columns.length; c < len; c++) {\n\t            var column = void 0;\n\t            if (typeof columns[c] === 'string') {\n\t                column = new column_1.Column({ field: columns[c] });\n\t            }\n\t            else if (!(columns[c] instanceof column_1.Column)) {\n\t                if (!columns[c].columns) {\n\t                    column = new column_1.Column(columns[c]);\n\t                }\n\t                else {\n\t                    column = new column_1.Column(columns[c]);\n\t                    columns[c].columns = prepareColumns(columns[c].columns);\n\t                }\n\t            }\n\t            else {\n\t                column = columns[c];\n\t            }\n\t            column.headerText = ej2_base_2.isNullOrUndefined(column.headerText) ? column.field || '' : column.headerText;\n\t            column.valueAccessor = column.valueAccessor || valueAccessor;\n\t            column.width = autoWidth && ej2_base_2.isNullOrUndefined(column.width) ? 200 : column.width;\n\t            if (ej2_base_2.isNullOrUndefined(column.visible)) {\n\t                column.visible = true;\n\t            }\n\t            columns[c] = column;\n\t        }\n\t        return columns;\n\t    }\n\t    exports.prepareColumns = prepareColumns;\n\t    function setCssInGridPopUp(popUp, e, className) {\n\t        var popUpSpan = popUp.querySelector('span');\n\t        var position = popUp.parentElement.getBoundingClientRect();\n\t        var targetPosition = e.target.getBoundingClientRect();\n\t        var isBottomTail;\n\t        popUpSpan.className = className;\n\t        popUp.style.display = '';\n\t        isBottomTail = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY) > popUp.offsetHeight + 10;\n\t        popUp.style.top = targetPosition.top - position.top +\n\t            (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px';\n\t        popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n\t        if (isBottomTail) {\n\t            popUp.querySelector('.e-downtail').style.display = '';\n\t            popUp.querySelector('.e-uptail').style.display = 'none';\n\t        }\n\t        else {\n\t            popUp.querySelector('.e-downtail').style.display = 'none';\n\t            popUp.querySelector('.e-uptail').style.display = '';\n\t        }\n\t    }\n\t    exports.setCssInGridPopUp = setCssInGridPopUp;\n\t    function getPopupLeftPosition(popup, e, targetPosition, left) {\n\t        var width = popup.offsetWidth / 2;\n\t        var x = getPosition(e).x;\n\t        if (x - targetPosition.left < width) {\n\t            return targetPosition.left - left;\n\t        }\n\t        else if (targetPosition.right - x < width) {\n\t            return targetPosition.right - left - width * 2;\n\t        }\n\t        else {\n\t            return x - left - width;\n\t        }\n\t    }\n\t    function getActualProperties(obj) {\n\t        if (obj instanceof ej2_base_1.ChildProperty) {\n\t            return ej2_base_2.getValue('properties', obj);\n\t        }\n\t        else {\n\t            return obj;\n\t        }\n\t    }\n\t    exports.getActualProperties = getActualProperties;\n\t    function parentsUntil(elem, selector, isID) {\n\t        var parent = elem;\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                break;\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parent;\n\t    }\n\t    exports.parentsUntil = parentsUntil;\n\t    function getElementIndex(element, elements) {\n\t        var index = -1;\n\t        for (var i = 0, len = elements.length; i < len; i++) {\n\t            if (elements[i].isEqualNode(element)) {\n\t                index = i;\n\t                break;\n\t            }\n\t        }\n\t        return index;\n\t    }\n\t    exports.getElementIndex = getElementIndex;\n\t    function inArray(value, collection) {\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i] === value) {\n\t                return i;\n\t            }\n\t        }\n\t        return -1;\n\t    }\n\t    exports.inArray = inArray;\n\t    function getActualPropFromColl(collection) {\n\t        var coll = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i].hasOwnProperty('properties')) {\n\t                coll.push(collection[i].properties);\n\t            }\n\t            else {\n\t                coll.push(collection[i]);\n\t            }\n\t        }\n\t        return coll;\n\t    }\n\t    exports.getActualPropFromColl = getActualPropFromColl;\n\t    function removeElement(target, selector) {\n\t        var elements = [].slice.call(target.querySelectorAll(selector));\n\t        for (var i = 0; i < elements.length; i++) {\n\t            ej2_base_3.remove(elements[i]);\n\t        }\n\t    }\n\t    exports.removeElement = removeElement;\n\t    function getPosition(e) {\n\t        var position = {};\n\t        position.x = (ej2_base_2.isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n\t            e.clientX);\n\t        position.y = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY);\n\t        return position;\n\t    }\n\t    exports.getPosition = getPosition;\n\t    var uid = 0;\n\t    function getUid(prefix) {\n\t        return prefix + uid++;\n\t    }\n\t    exports.getUid = getUid;\n\t    function appendChildren(elem, children) {\n\t        for (var i = 0, len = children.length; i < len; i++) {\n\t            if (len === children.length) {\n\t                elem.appendChild(children[i]);\n\t            }\n\t            else {\n\t                elem.appendChild(children[0]);\n\t            }\n\t        }\n\t        return elem;\n\t    }\n\t    exports.appendChildren = appendChildren;\n\t    function parents(elem, selector, isID) {\n\t        var parent = elem;\n\t        var parents = [];\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                parents.push(parent);\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parents;\n\t    }\n\t    exports.parents = parents;\n\t    function calculateAggregate(type, data, column, context) {\n\t        if (type === 'custom') {\n\t            return column.customAggregate ? column.customAggregate.call(context, data, column) : '';\n\t        }\n\t        return ej2_data_1.DataUtil.aggregates[type](data, column.field);\n\t    }\n\t    exports.calculateAggregate = calculateAggregate;\n\t    var scrollWidth = null;\n\t    function getScrollBarWidth() {\n\t        if (scrollWidth !== null) {\n\t            return scrollWidth;\n\t        }\n\t        var divNode = document.createElement('div');\n\t        var value = 0;\n\t        divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n\t        document.body.appendChild(divNode);\n\t        value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n\t        document.body.removeChild(divNode);\n\t        return scrollWidth = value;\n\t    }\n\t    exports.getScrollBarWidth = getScrollBarWidth;\n\t    var rowHeight;\n\t    function getRowHeight(element) {\n\t        if (rowHeight !== undefined) {\n\t            return rowHeight;\n\t        }\n\t        var table = ej2_base_3.createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n\t        table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n\t        element.appendChild(table);\n\t        var rect = table.querySelector('td').getBoundingClientRect();\n\t        element.removeChild(table);\n\t        rowHeight = Math.ceil(rect.height);\n\t        return rowHeight;\n\t    }\n\t    exports.getRowHeight = getRowHeight;\n\t    function isEditable(col, type, elem) {\n\t        var row = parentsUntil(elem, 'e-row');\n\t        var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n\t        if (type === 'beginEdit' && isOldRow) {\n\t            if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t        else {\n\t            if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t    }\n\t    exports.isEditable = isEditable;\n\t    function isActionPrevent(inst) {\n\t        var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n\t        return inst.editSettings.mode === 'batch' &&\n\t            (inst.element.querySelectorAll('.e-updatedtd').length) &&\n\t            (dlg ? dlg.classList.contains('e-popup-close') : true);\n\t    }\n\t    exports.isActionPrevent = isActionPrevent;\n\t    function wrap(elem, action) {\n\t        var clName = 'e-wrap';\n\t        elem = elem instanceof Array ? elem : [elem];\n\t        for (var i = 0; i < elem.length; i++) {\n\t            action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n\t        }\n\t    }\n\t    exports.wrap = wrap;\n\t    function changeButtonType(target) {\n\t        var elements = [].slice.call(target.querySelectorAll('button'));\n\t        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t            var button = elements_1[_i];\n\t            ej2_base_3.attributes(button, { type: 'button' });\n\t        }\n\t    }\n\t    exports.changeButtonType = changeButtonType;\n\t    function setFormatter(serviceLocator, column) {\n\t        var fmtr = serviceLocator.getService('valueFormatter');\n\t        switch (column.type) {\n\t            case 'date':\n\t                column.setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: column.format }));\n\t                column.setParser(fmtr.getParserFunction({ type: 'date', skeleton: column.format }));\n\t                break;\n\t            case 'datetime':\n\t                column.setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: column.format }));\n\t                column.setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: column.format }));\n\t                break;\n\t            case 'number':\n\t                column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n\t                column.setParser(fmtr.getParserFunction({ format: column.format }));\n\t                break;\n\t        }\n\t    }\n\t    exports.setFormatter = setFormatter;\n\t    function addRemoveActiveClasses(cells, add) {\n\t        var args = [];\n\t        for (var _i = 2; _i < arguments.length; _i++) {\n\t            args[_i - 2] = arguments[_i];\n\t        }\n\t        for (var i = 0, len = cells.length; i < len; i++) {\n\t            if (add) {\n\t                ej2_base_1.classList(cells[i], args.slice(), []);\n\t                cells[i].setAttribute('aria-selected', 'true');\n\t            }\n\t            else {\n\t                ej2_base_1.classList(cells[i], [], args.slice());\n\t                cells[i].removeAttribute('aria-selected');\n\t            }\n\t        }\n\t    }\n\t    exports.addRemoveActiveClasses = addRemoveActiveClasses;\n\t    function distinctStringValues(result) {\n\t        var temp = {};\n\t        var res = [];\n\t        for (var i = 0; i < result.length; i++) {\n\t            if (!(result[i] in temp)) {\n\t                res.push(result[i].toString());\n\t                temp[result[i]] = 1;\n\t            }\n\t        }\n\t        return res;\n\t    }\n\t    exports.distinctStringValues = distinctStringValues;\n\t    function getFilterMenuPostion(target, dialogObj) {\n\t        var elementVisible = dialogObj.element.style.display;\n\t        dialogObj.element.style.display = 'block';\n\t        var dlgWidth = dialogObj.width;\n\t        var newpos = ej2_popups_1.calculateRelativeBasedPosition(target, dialogObj.element);\n\t        dialogObj.element.style.display = elementVisible;\n\t        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 5 + 'px';\n\t        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n\t        if (leftPos < 1) {\n\t            dialogObj.element.style.left = (dlgWidth + leftPos) - 16 + 'px';\n\t        }\n\t        else {\n\t            dialogObj.element.style.left = leftPos + -4 + 'px';\n\t        }\n\t    }\n\t    exports.getFilterMenuPostion = getFilterMenuPostion;\n\t    function getZIndexCalcualtion(args, dialogObj) {\n\t        args.popup.element.style.zIndex = (dialogObj.zIndex + 1).toString();\n\t    }\n\t    exports.getZIndexCalcualtion = getZIndexCalcualtion;\n\t    function toogleCheckbox(elem) {\n\t        var span = elem.querySelector('.e-frame');\n\t        span.classList.contains('e-check') ? ej2_base_1.classList(span, ['e-uncheck'], ['e-check']) :\n\t            ej2_base_1.classList(span, ['e-check'], ['e-uncheck']);\n\t    }\n\t    exports.toogleCheckbox = toogleCheckbox;\n\t    function createCboxWithWrap(uid, elem, className) {\n\t        var div = ej2_base_3.createElement('div', { className: className });\n\t        div.appendChild(elem);\n\t        div.setAttribute('uid', uid);\n\t        return div;\n\t    }\n\t    exports.createCboxWithWrap = createCboxWithWrap;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(4), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, value_formatter_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Column = (function () {\n\t        function Column(options) {\n\t            this.allowSorting = true;\n\t            this.allowResizing = true;\n\t            this.allowFiltering = true;\n\t            this.allowGrouping = true;\n\t            this.showColumnMenu = true;\n\t            this.enableGroupByFormat = false;\n\t            this.allowEditing = true;\n\t            this.filter = {};\n\t            this.showInColumnChooser = true;\n\t            ej2_base_1.merge(this, options);\n\t            this.uid = util_1.getUid('grid-column');\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (options.format && (options.format.skeleton || options.format.format)) {\n\t                this.setFormatter(valueFormatter.getFormatFunction(options.format));\n\t                this.setParser(valueFormatter.getParserFunction(options.format));\n\t            }\n\t            if (!this.field) {\n\t                this.allowFiltering = false;\n\t                this.allowGrouping = false;\n\t                this.allowSorting = false;\n\t            }\n\t            if (this.commands && !this.textAlign) {\n\t                this.textAlign = 'right';\n\t            }\n\t            if (this.template || this.commandsTemplate) {\n\t                this.templateFn = util_1.templateCompiler(this.template || this.commandsTemplate);\n\t            }\n\t            if (this.filter.itemTemplate) {\n\t                this.fltrTemplateFn = util_1.templateCompiler(this.filter.itemTemplate);\n\t            }\n\t        }\n\t        Column.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        Column.prototype.setFormatter = function (value) {\n\t            this.formatFn = value;\n\t        };\n\t        Column.prototype.getParser = function () {\n\t            return this.parserFn;\n\t        };\n\t        Column.prototype.setParser = function (value) {\n\t            this.parserFn = value;\n\t        };\n\t        Column.prototype.getColumnTemplate = function () {\n\t            return this.templateFn;\n\t        };\n\t        Column.prototype.getFilterItemTemplate = function () {\n\t            return this.fltrTemplateFn;\n\t        };\n\t        Column.prototype.getDomSetter = function () {\n\t            return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n\t        };\n\t        return Column;\n\t    }());\n\t    exports.Column = Column;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.created = 'create';\n\t    exports.destroyed = 'destroy';\n\t    exports.load = 'load';\n\t    exports.rowDataBound = 'rowDataBound';\n\t    exports.queryCellInfo = 'queryCellInfo';\n\t    exports.actionBegin = 'actionBegin';\n\t    exports.actionComplete = 'actionComplete';\n\t    exports.actionFailure = 'actionFailure';\n\t    exports.dataBound = 'dataBound';\n\t    exports.rowSelecting = 'rowSelecting';\n\t    exports.rowSelected = 'rowSelected';\n\t    exports.rowDeselecting = 'rowDeselecting';\n\t    exports.rowDeselected = 'rowDeselected';\n\t    exports.cellSelecting = 'cellSelecting';\n\t    exports.cellSelected = 'cellSelected';\n\t    exports.cellDeselecting = 'cellDeselecting';\n\t    exports.cellDeselected = 'cellDeselected';\n\t    exports.columnDragStart = 'columnDragStart';\n\t    exports.columnDrag = 'columnDrag';\n\t    exports.columnDrop = 'columnDrop';\n\t    exports.rowDragStart = 'rowDragStart';\n\t    exports.rowDrag = 'rowDrag';\n\t    exports.rowDrop = 'rowDrop';\n\t    exports.beforePrint = 'beforePrint';\n\t    exports.printComplete = 'printComplete';\n\t    exports.detailDataBound = 'detailDataBound';\n\t    exports.toolbarClick = 'toolbarClick';\n\t    exports.batchAdd = 'batchAdd';\n\t    exports.batchDelete = 'batchDelete';\n\t    exports.beforeBatchAdd = 'beforeBatchAdd';\n\t    exports.beforeBatchDelete = 'beforeBatchDelete';\n\t    exports.beforeBatchSave = 'beforeBatchSave';\n\t    exports.beginEdit = 'beginEdit';\n\t    exports.cellEdit = 'cellEdit';\n\t    exports.cellSave = 'cellSave';\n\t    exports.endAdd = 'endAdd';\n\t    exports.endDelete = 'endDelete';\n\t    exports.endEdit = 'endEdit';\n\t    exports.recordDoubleClick = 'recordDoubleClick';\n\t    exports.recordClick = 'recordClick';\n\t    exports.beforeDataBound = 'beforeDataBound';\n\t    exports.beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n\t    exports.resizeStart = 'resizeStart';\n\t    exports.onResize = 'onResize';\n\t    exports.resizeStop = 'resizeStop';\n\t    exports.checkBoxChange = 'checkBoxChange';\n\t    exports.beforeCopy = 'beforeCopy';\n\t    exports.filterChoiceRequest = 'filterchoicerequest';\n\t    exports.filterAfterOpen = 'filterafteropen';\n\t    exports.filterBeforeOpen = 'filterbeforeopen';\n\t    exports.initialLoad = 'initial-load';\n\t    exports.initialEnd = 'initial-end';\n\t    exports.dataReady = 'data-ready';\n\t    exports.contentReady = 'content-ready';\n\t    exports.uiUpdate = 'ui-update';\n\t    exports.onEmpty = 'on-empty';\n\t    exports.inBoundModelChanged = 'inbound-model-changed';\n\t    exports.modelChanged = 'model-changed';\n\t    exports.colGroupRefresh = 'colgroup-refresh';\n\t    exports.headerRefreshed = 'header-refreshed';\n\t    exports.pageBegin = 'paging-begin';\n\t    exports.pageComplete = 'paging-complete';\n\t    exports.sortBegin = 'sorting-begin';\n\t    exports.sortComplete = 'sorting-complete';\n\t    exports.filterBegin = 'filtering-begin';\n\t    exports.filterComplete = 'filtering-complete';\n\t    exports.searchBegin = 'searching-begin';\n\t    exports.searchComplete = 'searching-complete';\n\t    exports.reorderBegin = 'reorder-begin';\n\t    exports.reorderComplete = 'reorder-complete';\n\t    exports.rowDragAndDropBegin = 'rowdraganddrop-begin';\n\t    exports.rowDragAndDropComplete = 'rowdraganddrop-complete';\n\t    exports.groupBegin = 'grouping-begin';\n\t    exports.groupComplete = 'grouping-complete';\n\t    exports.ungroupBegin = 'ungrouping-begin';\n\t    exports.ungroupComplete = 'ungrouping-complete';\n\t    exports.rowSelectionBegin = 'rowselecting';\n\t    exports.rowSelectionComplete = 'rowselected';\n\t    exports.columnSelectionBegin = 'columnselecting';\n\t    exports.columnSelectionComplete = 'columnselected';\n\t    exports.cellSelectionBegin = 'cellselecting';\n\t    exports.cellSelectionComplete = 'cellselected';\n\t    exports.beforeCellFocused = 'beforecellfocused';\n\t    exports.cellFocused = 'cellfocused';\n\t    exports.keyPressed = 'key-pressed';\n\t    exports.click = 'click';\n\t    exports.destroy = 'destroy';\n\t    exports.columnVisibilityChanged = 'column-visible-changed';\n\t    exports.scroll = 'scroll';\n\t    exports.columnWidthChanged = 'column-width-changed';\n\t    exports.columnPositionChanged = 'column-position-changed';\n\t    exports.rowDragAndDrop = 'row-drag-and-drop';\n\t    exports.rowsAdded = 'rows-added';\n\t    exports.rowsRemoved = 'rows-removed';\n\t    exports.columnDragStop = 'column-drag-stop';\n\t    exports.headerDrop = 'header-drop';\n\t    exports.dataSourceModified = 'datasource-modified';\n\t    exports.refreshComplete = 'refresh-complete';\n\t    exports.refreshVirtualBlock = 'refresh-virtual-block';\n\t    exports.dblclick = 'dblclick';\n\t    exports.toolbarRefresh = 'toolbar-refresh';\n\t    exports.bulkSave = 'bulk-save';\n\t    exports.autoCol = 'auto-col';\n\t    exports.tooltipDestroy = 'tooltip-destroy';\n\t    exports.updateData = 'update-data';\n\t    exports.editBegin = 'edit-begin';\n\t    exports.editComplete = 'edit-complete';\n\t    exports.addBegin = 'add-begin';\n\t    exports.addComplete = 'add-complete';\n\t    exports.saveComplete = 'save-complete';\n\t    exports.deleteBegin = 'delete-begin';\n\t    exports.deleteComplete = 'delete-complete';\n\t    exports.preventBatch = 'prevent-batch';\n\t    exports.dialogDestroy = 'dialog-destroy';\n\t    exports.crudAction = 'crud-Action';\n\t    exports.addDeleteAction = 'add-delete-Action';\n\t    exports.destroyForm = 'destroy-form';\n\t    exports.doubleTap = 'double-tap';\n\t    exports.beforeExcelExport = 'beforeExcelExport';\n\t    exports.excelExportComplete = 'excelExportComplete';\n\t    exports.excelQueryCellInfo = 'excelQueryCellInfo';\n\t    exports.beforePdfExport = 'beforePdfExport';\n\t    exports.pdfExportComplete = 'pdfExportComplete';\n\t    exports.pdfQueryCellInfo = 'pdfQueryCellInfo';\n\t    exports.accessPredicate = 'access-predicate';\n\t    exports.contextMenuClick = 'contextMenuClick';\n\t    exports.freezeRefresh = 'freezerefresh';\n\t    exports.contextMenuOpen = 'contextMenuOpen';\n\t    exports.columnMenuClick = 'contextMenuClick';\n\t    exports.columnMenuOpen = 'columnMenuOpen';\n\t    exports.filterOpen = 'filterOpen';\n\t    exports.filterDialogCreated = 'filterDialogCreated';\n\t    exports.filterMenuClose = 'filter-menu-close';\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(14), __webpack_require__(21), __webpack_require__(17), __webpack_require__(18), __webpack_require__(10), __webpack_require__(7), __webpack_require__(12), __webpack_require__(25), __webpack_require__(26), __webpack_require__(27), __webpack_require__(29), __webpack_require__(30), __webpack_require__(31), __webpack_require__(32), __webpack_require__(33), __webpack_require__(34), __webpack_require__(35)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_data_1, enum_1, data_1, row_1, cell_1, events, util_1, content_renderer_1, header_renderer_1, cell_renderer_1, header_cell_renderer_1, stacked_cell_renderer_1, indent_cell_renderer_1, caption_cell_renderer_1, expand_cell_renderer_1, header_indent_renderer_1, detail_header_indent_renderer_1, detail_expand_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Render = (function () {\n\t        function Render(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.data = new data_1.Data(parent, locator);\n\t            this.l10n = locator.getService('localization');\n\t            this.ariaService = this.locator.getService('ariaService');\n\t            this.renderer = this.locator.getService('rendererFactory');\n\t            this.addEventListener();\n\t        }\n\t        Render.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            this.headerRenderer = this.renderer.getRenderer(enum_1.RenderType.Header);\n\t            this.contentRenderer = this.renderer.getRenderer(enum_1.RenderType.Content);\n\t            this.headerRenderer.renderPanel();\n\t            this.contentRenderer.renderPanel();\n\t            if (gObj.getColumns().length) {\n\t                this.headerRenderer.renderTable();\n\t                this.contentRenderer.renderTable();\n\t                this.emptyRow(false);\n\t            }\n\t            this.refreshDataManager();\n\t        };\n\t        Render.prototype.refresh = function (e) {\n\t            if (e === void 0) { e = { requestType: 'refresh' }; }\n\t            this.parent.notify(e.requestType + \"-begin\", e);\n\t            this.parent.trigger(events.actionBegin, e);\n\t            if (e.cancel) {\n\t                return;\n\t            }\n\t            if (e.requestType === 'save' && e.action === 'add') {\n\t                this.parent.isEdit = false;\n\t            }\n\t            this.refreshDataManager(e);\n\t        };\n\t        Render.prototype.refreshComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, e);\n\t        };\n\t        Render.prototype.refreshDataManager = function (args) {\n\t            var _this = this;\n\t            if (args === void 0) { args = {}; }\n\t            if (args.requestType !== 'virtualscroll') {\n\t                this.parent.showSpinner();\n\t            }\n\t            var ready = this.data.dataManager.ready;\n\t            this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n\t            var dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n\t            if (!ready) {\n\t                if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n\t                    dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n\t                }\n\t                dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dataManagerFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.sendBulkRequest = function (args) {\n\t            var _this = this;\n\t            var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0]);\n\t            if (this.data.dataManager.dataSource.offline) {\n\t                this.refreshDataManager({ requestType: 'batchsave' });\n\t                return;\n\t            }\n\t            else {\n\t                promise.then(function (e) { return _this.dmSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dmFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.dmSuccess = function (e, args) {\n\t            this.dataManagerSuccess(e, args);\n\t        };\n\t        Render.prototype.dmFailure = function (e) {\n\t            this.dataManagerFailure(e);\n\t        };\n\t        Render.prototype.renderEmptyRow = function () {\n\t            this.emptyRow(true);\n\t        };\n\t        Render.prototype.emptyRow = function (isTrigger) {\n\t            var gObj = this.parent;\n\t            var tbody = this.contentRenderer.getTable().querySelector('tbody');\n\t            var tr;\n\t            ej2_base_1.remove(tbody);\n\t            tbody = ej2_base_1.createElement('tbody');\n\t            tr = ej2_base_1.createElement('tr', { className: 'e-emptyrow' });\n\t            tr.appendChild(ej2_base_1.createElement('td', {\n\t                innerHTML: this.l10n.getConstant('EmptyRecord'),\n\t                attrs: { colspan: gObj.getColumns().length.toString() }\n\t            }));\n\t            tbody.appendChild(tr);\n\t            this.contentRenderer.renderEmpty(tbody);\n\t            if (isTrigger) {\n\t                this.parent.trigger(events.dataBound, {});\n\t                this.parent.notify(events.onEmpty, { rows: [new row_1.Row({ isDataRow: true, cells: [new cell_1.Cell({ isDataCell: true, visible: true })] })] });\n\t            }\n\t        };\n\t        Render.prototype.updateColumnType = function (record) {\n\t            var columns = this.parent.getColumns();\n\t            var value;\n\t            var data = record && record.items ? record.items[0] : record;\n\t            var fmtr = this.locator.getService('valueFormatter');\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                value = ej2_base_2.getValue(columns[i].field || '', data);\n\t                if (!ej2_base_2.isNullOrUndefined(value)) {\n\t                    this.isColTypeDef = true;\n\t                    if (!columns[i].type) {\n\t                        columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n\t                            value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n\t                    }\n\t                    if (typeof (columns[i].format) === 'string') {\n\t                        util_1.setFormatter(this.locator, columns[i]);\n\t                    }\n\t                    else if (!columns[i].format && columns[i].type === 'number') {\n\t                        columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n\t                    }\n\t                }\n\t                else {\n\t                    columns[i].type = columns[i].type || null;\n\t                }\n\t            }\n\t        };\n\t        Render.prototype.dataManagerSuccess = function (e, args) {\n\t            var gObj = this.parent;\n\t            gObj.trigger(events.beforeDataBound, e);\n\t            var len = Object.keys(e.result).length;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            gObj.currentViewData = e.result;\n\t            if (!len && e.count && gObj.allowPaging) {\n\t                gObj.pageSettings.currentPage = Math.ceil(e.count / gObj.pageSettings.pageSize);\n\t                gObj.dataBind();\n\t                return;\n\t            }\n\t            if (!gObj.getColumns().length && len) {\n\t                this.updatesOnInitialRender(e);\n\t            }\n\t            if (!this.isColTypeDef) {\n\t                this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n\t            }\n\t            this.parent.notify(events.dataReady, ej2_base_2.extend({ count: e.count, result: e.result, aggregates: e.aggregates }, args));\n\t            if (gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping')) {\n\t                this.headerRenderer.refreshUI();\n\t            }\n\t            if (len) {\n\t                this.contentRenderer.refreshContentRows(args);\n\t            }\n\t            else {\n\t                if (!gObj.getColumns().length) {\n\t                    gObj.element.innerHTML = '';\n\t                    alert(this.l10n.getConstant('EmptyDataSourceError'));\n\t                    return;\n\t                }\n\t                this.contentRenderer.setRowElements([]);\n\t                this.renderEmptyRow();\n\t                if (args) {\n\t                    var action = (args.requestType || '').toLowerCase() + '-complete';\n\t                    this.parent.notify(action, args);\n\t                }\n\t                this.parent.hideSpinner();\n\t            }\n\t        };\n\t        Render.prototype.dataManagerFailure = function (e) {\n\t            this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n\t            this.parent.trigger(events.actionFailure, { error: e });\n\t            this.parent.currentViewData = [];\n\t            this.renderEmptyRow();\n\t            this.parent.hideSpinner();\n\t        };\n\t        Render.prototype.updatesOnInitialRender = function (e) {\n\t            this.buildColumns(e.result[0]);\n\t            util_1.prepareColumns(this.parent.columns);\n\t            this.headerRenderer.renderTable();\n\t            this.contentRenderer.renderTable();\n\t            this.parent.notify(events.autoCol, {});\n\t        };\n\t        Render.prototype.buildColumns = function (record) {\n\t            var columns = Object.keys(record);\n\t            var cols = [];\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                cols[i] = { 'field': columns[i] };\n\t                if (this.parent.enableColumnVirtualization) {\n\t                    cols[i].width = !ej2_base_2.isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n\t                }\n\t            }\n\t            this.parent.columns = cols;\n\t        };\n\t        Render.prototype.instantiateRenderer = function () {\n\t            this.renderer.addRenderer(enum_1.RenderType.Header, new header_renderer_1.HeaderRender(this.parent, this.locator));\n\t            this.renderer.addRenderer(enum_1.RenderType.Content, new content_renderer_1.ContentRender(this.parent, this.locator));\n\t            var cellrender = this.locator.getService('cellRendererFactory');\n\t            cellrender.addCellRenderer(enum_1.CellType.Header, new header_cell_renderer_1.HeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Data, new cell_renderer_1.CellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Indent, new indent_cell_renderer_1.IndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaption, new caption_cell_renderer_1.GroupCaptionCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaptionEmpty, new caption_cell_renderer_1.GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Expand, new expand_cell_renderer_1.ExpandCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.HeaderIndent, new header_indent_renderer_1.HeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailHeader, new detail_header_indent_renderer_1.DetailHeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailExpand, new detail_expand_cell_renderer_1.DetailExpandCellRenderer(this.parent, this.locator));\n\t        };\n\t        Render.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.modelChanged, this.refresh, this);\n\t            this.parent.on(events.refreshComplete, this.refreshComplete, this);\n\t            this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n\t        };\n\t        Render.prototype.validateGroupRecords = function (e) {\n\t            var _this = this;\n\t            var index = e.result.length - 1;\n\t            if (index < 0) {\n\t                return Promise.resolve(e);\n\t            }\n\t            var group0 = e.result[0];\n\t            var groupN = e.result[index];\n\t            var predicate = [];\n\t            var addWhere = function (input) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return predicate.push(new ej2_data_1.Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n\t                });\n\t                input.where(ej2_data_1.Predicate.or(predicate));\n\t            };\n\t            var query = new ej2_data_1.Query();\n\t            addWhere(query);\n\t            var curDm = new ej2_data_1.DataManager(e.result);\n\t            var curFilter = curDm.executeLocal(query);\n\t            var newQuery = this.data.generateQuery(true);\n\t            var rPredicate = [];\n\t            if (this.data.isRemote()) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n\t                });\n\t                newQuery.where(ej2_data_1.Predicate.or(rPredicate));\n\t            }\n\t            else {\n\t                addWhere(newQuery);\n\t            }\n\t            var deferred = new ej2_data_1.Deferred();\n\t            this.data.getData({}, newQuery).then(function (r) {\n\t                _this.updateGroupInfo(curFilter, r.result);\n\t                deferred.resolve(e);\n\t            }).catch(function (e) { return deferred.reject(e); });\n\t            return deferred.promise;\n\t        };\n\t        Render.prototype.getPredicate = function (key, operator, value) {\n\t            if (value instanceof Date) {\n\t                return this.data.getDatePredicate({ field: key, operator: operator, value: value });\n\t            }\n\t            return new ej2_data_1.Predicate(key, operator, value);\n\t        };\n\t        Render.prototype.updateGroupInfo = function (current, untouched) {\n\t            var _this = this;\n\t            var dm = new ej2_data_1.DataManager(untouched);\n\t            current.forEach(function (element, index, array) {\n\t                var uGroup = dm.executeLocal(new ej2_data_1.Query()\n\t                    .where(new ej2_data_1.Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n\t                element.count = uGroup.count;\n\t                var itemGroup = element.items;\n\t                var uGroupItem = uGroup.items;\n\t                if (itemGroup.GroupGuid) {\n\t                    element.items = _this.updateGroupInfo(element.items, uGroup.items);\n\t                }\n\t                _this.parent.aggregates.forEach(function (row) {\n\t                    return row.columns.forEach(function (column) {\n\t                        var types = column.type instanceof Array ? column.type : [column.type];\n\t                        types.forEach(function (type) {\n\t                            var key = column.field + ' - ' + type;\n\t                            element.aggregates[key] = util_1.calculateAggregate(type, itemGroup.level ? uGroupItem.records : uGroup.items, column);\n\t                        });\n\t                    });\n\t                });\n\t            });\n\t            return current;\n\t        };\n\t        return Render;\n\t    }());\n\t    exports.Render = Render;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(13), __webpack_require__(15), __webpack_require__(16), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, row_renderer_1, cell_merge_renderer_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ContentRender = (function () {\n\t        function ContentRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.rows = [];\n\t            this.isLoaded = true;\n\t            this.drop = function (e) {\n\t                _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n\t                ej2_base_3.remove(e.droppedElement);\n\t            };\n\t            this.rafCallback = function (args) { return function () {\n\t                if (_this.isLoaded) {\n\t                    _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n\t                    if (_this.parent.isDestroyed) {\n\t                        return;\n\t                    }\n\t                    _this.parent.notify(events.contentReady, { rows: _this.rows, args: args });\n\t                    _this.parent.trigger(events.dataBound, {});\n\t                    if (args) {\n\t                        var action = (args.requestType || '').toLowerCase() + '-complete';\n\t                        _this.parent.notify(action, args);\n\t                    }\n\t                    _this.parent.hideSpinner();\n\t                }\n\t            }; };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.generator = this.getModelGenerator();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n\t        }\n\t        ContentRender.prototype.renderPanel = function () {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_3.createElement('div', { className: 'e-gridcontent' });\n\t            var innerDiv = ej2_base_3.createElement('div', {\n\t                className: 'e-content'\n\t            });\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                innerDiv.setAttribute('tabindex', '0');\n\t            }\n\t            this.ariaService.setOptions(innerDiv, { busy: false });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            gObj.element.appendChild(div);\n\t        };\n\t        ContentRender.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            contentDiv.appendChild(this.createContentTable());\n\t            this.setTable(contentDiv.querySelector('.e-table'));\n\t            this.ariaService.setOptions(this.getTable(), {\n\t                multiselectable: this.parent.selectionSettings.type === 'multiple'\n\t            });\n\t            this.initializeContentDrop();\n\t        };\n\t        ContentRender.prototype.createContentTable = function () {\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var table = ej2_base_3.createElement('table', {\n\t                className: 'e-table', attrs: {\n\t                    cellspacing: '0.25px', role: 'grid',\n\t                    id: this.parent.element.id + '_content_table'\n\t                }\n\t            });\n\t            this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n\t            table.appendChild(this.getColGroup());\n\t            table.appendChild(ej2_base_3.createElement('tbody'));\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        ContentRender.prototype.refreshContentRows = function (args) {\n\t            var _this = this;\n\t            if (args === void 0) { args = {}; }\n\t            var gObj = this.parent;\n\t            var dataSource = gObj.currentViewData;\n\t            var frag = document.createDocumentFragment();\n\t            var hdrfrag = document.createDocumentFragment();\n\t            var columns = gObj.getColumns();\n\t            var tr;\n\t            var tbody;\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            this.rowElements = [];\n\t            this.rows = [];\n\t            var modelData = this.generator.generateRows(dataSource, args);\n\t            var idx = modelData[0].cells[0].index;\n\t            var fCont = this.getPanel().querySelector('.e-frozencontent');\n\t            var mCont = this.getPanel().querySelector('.e-movablecontent');\n\t            var cont = this.getPanel().querySelector('.e-content');\n\t            if (this.parent.enableColumnVirtualization) {\n\t                var cellMerge = new cell_merge_renderer_1.CellMergeRender(this.serviceLocator, this.parent);\n\t                cellMerge.updateVirtualCells(modelData);\n\t            }\n\t            if (this.parent.frozenColumns && idx >= this.parent.frozenColumns) {\n\t                tbody = mCont.querySelector('tbody');\n\t            }\n\t            else {\n\t                tbody = this.getTable().querySelector('tbody');\n\t            }\n\t            for (var i = 0, len = modelData.length; i < len; i++) {\n\t                if (!gObj.rowTemplate) {\n\t                    tr = row.render(modelData[i], columns);\n\t                }\n\t                else {\n\t                    var elements = gObj.getRowTemplate()(ej2_base_2.extend({ index: i }, dataSource[i]), gObj, 'rowTemplate');\n\t                    for (var j = 0; j < elements.length; j++) {\n\t                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n\t                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n\t                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n\t                        }\n\t                    }\n\t                }\n\t                if (gObj.frozenRows && i < gObj.frozenRows) {\n\t                    hdrfrag.appendChild(tr);\n\t                }\n\t                else {\n\t                    frag.appendChild(tr);\n\t                }\n\t                this.rows.push(modelData[i]);\n\t                if (modelData[i].isDataRow) {\n\t                    var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n\t                    if (td) {\n\t                        td.classList.add('e-detailrowvisible');\n\t                    }\n\t                    this.rowElements.push(tr);\n\t                }\n\t                this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n\t            }\n\t            this.args = args;\n\t            util_1.getUpdateUsingRaf(function () {\n\t                var hdrTbody;\n\t                ej2_base_3.remove(tbody);\n\t                tbody = ej2_base_3.createElement('tbody');\n\t                if (gObj.frozenColumns) {\n\t                    tbody.appendChild(frag);\n\t                    if (idx === 0) {\n\t                        _this.isLoaded = false;\n\t                        fCont.querySelector('table').appendChild(tbody);\n\t                        _this.getPanel().firstChild.style.overflowY = 'hidden';\n\t                    }\n\t                    else {\n\t                        _this.isLoaded = true;\n\t                        mCont.querySelector('table').appendChild(tbody);\n\t                    }\n\t                    if (gObj.frozenRows) {\n\t                        hdrTbody = gObj.getHeaderContent().querySelector(idx === 0 ? '.e-frozenheader'\n\t                            : '.e-movableheader').querySelector('tbody');\n\t                        hdrTbody.innerHTML = '';\n\t                        hdrTbody.appendChild(hdrfrag);\n\t                    }\n\t                    fCont.style.height\n\t                        = ((mCont.offsetHeight) - 17) + 'px';\n\t                    mCont.style.overflow = 'scroll';\n\t                }\n\t                else {\n\t                    _this.appendContent(tbody, frag, args);\n\t                }\n\t                if (gObj.frozenRows && !gObj.frozenColumns) {\n\t                    hdrTbody = gObj.getHeaderTable().querySelector('tbody');\n\t                    hdrTbody.innerHTML = '';\n\t                    hdrTbody.appendChild(hdrfrag);\n\t                }\n\t                if (gObj.frozenRows && idx === 0 && cont.offsetHeight === gObj.height) {\n\t                    cont.style.height =\n\t                        (cont.offsetHeight -\n\t                            gObj.getHeaderContent().querySelector('tbody').offsetHeight) + 'px';\n\t                }\n\t                if (gObj.frozenColumns && idx === 0) {\n\t                    _this.refreshContentRows(args);\n\t                }\n\t            }, this.rafCallback(args));\n\t        };\n\t        ContentRender.prototype.appendContent = function (tbody, frag, args) {\n\t            tbody.appendChild(frag);\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.getPanel = function () {\n\t            return this.contentPanel;\n\t        };\n\t        ContentRender.prototype.setPanel = function (panel) {\n\t            this.contentPanel = panel;\n\t        };\n\t        ContentRender.prototype.getTable = function () {\n\t            return this.contentTable;\n\t        };\n\t        ContentRender.prototype.setTable = function (table) {\n\t            this.contentTable = table;\n\t        };\n\t        ContentRender.prototype.getRows = function () {\n\t            return this.rows;\n\t        };\n\t        ContentRender.prototype.getRowElements = function () {\n\t            return this.rowElements;\n\t        };\n\t        ContentRender.prototype.setRowElements = function (elements) {\n\t            this.rowElements = elements;\n\t        };\n\t        ContentRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        ContentRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        ContentRender.prototype.setVisible = function (columns) {\n\t            var rows = this.getRows();\n\t            var element;\n\t            var testRow;\n\t            rows.some(function (r) { if (r.isDataRow) {\n\t                testRow = r;\n\t            } return r.isDataRow; });\n\t            var tasks = [];\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                var idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (this.canSkip(column, testRow, idx)) {\n\t                    continue;\n\t                }\n\t                var displayVal = column.visible === true ? '' : 'none';\n\t                ej2_base_3.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t            }\n\t            this.refreshContentRows({ requestType: 'refresh' });\n\t        };\n\t        ContentRender.prototype.colGroupRefresh = function () {\n\t            if (this.getColGroup()) {\n\t                var colGroup = this.getColGroup();\n\t                colGroup.innerHTML = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').innerHTML;\n\t                this.setColGroup(colGroup);\n\t            }\n\t        };\n\t        ContentRender.prototype.initializeContentDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(gObj.getContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        ContentRender.prototype.canSkip = function (column, row, index) {\n\t            return ej2_base_2.isNullOrUndefined(row) ||\n\t                ej2_base_2.isNullOrUndefined(column.visible) ||\n\t                row.cells[index].visible === column.visible;\n\t        };\n\t        ContentRender.prototype.getModelGenerator = function () {\n\t            return this.generator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        };\n\t        ContentRender.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n\t            this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n\t                .forEach(function (row) { return row.isSelected = set; });\n\t        };\n\t        ContentRender.prototype.getRowByIndex = function (index) {\n\t            return this.parent.getDataRows()[index];\n\t        };\n\t        return ContentRender;\n\t    }());\n\t    exports.ContentRender = ContentRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(10), __webpack_require__(7), __webpack_require__(14), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, util_1, enum_1, cell_merge_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowRenderer = (function () {\n\t        function RowRenderer(serviceLocator, cellType, parent) {\n\t            this.element = ej2_base_2.createElement('tr', { attrs: { role: 'row' } });\n\t            this.cellType = cellType;\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent = parent;\n\t        }\n\t        RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate) {\n\t            return this.refreshRow(row, columns, attributes, rowTemplate);\n\t        };\n\t        RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n\t            if (isChanged) {\n\t                row.data = ej2_base_1.extend({}, row.changes);\n\t                this.refreshMergeCells(row);\n\t            }\n\t            var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n\t            var tr = this.refreshRow(row, columns, attributes, rowTemplate);\n\t            var cells = [].slice.call(tr.cells);\n\t            node.innerHTML = '';\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var cell = cells_1[_i];\n\t                node.appendChild(cell);\n\t            }\n\t        };\n\t        RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate) {\n\t            var tr = this.element.cloneNode();\n\t            var rowArgs = { data: row.data };\n\t            var cellArgs = { data: row.data };\n\t            var attrCopy = ej2_base_1.extend({}, attributes, {});\n\t            if (row.isDataRow) {\n\t                row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1;\n\t            }\n\t            this.buildAttributeFromRow(tr, row);\n\t            ej2_base_2.attributes(tr, attrCopy);\n\t            util_1.setStyleAndAttributes(tr, row.attributes);\n\t            var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t            for (var i = 0, len = row.cells.length; i < len; i++) {\n\t                var cell = row.cells[i];\n\t                cell.isSelected = row.isSelected;\n\t                var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || enum_1.CellType.Data);\n\t                var td = cellRenderer.render(row.cells[i], row.data, { 'index': !ej2_base_1.isNullOrUndefined(row.index) ? row.index.toString() : '' });\n\t                if (row.cells[i].cellType === enum_1.CellType.Data) {\n\t                    this.parent.trigger(constant_1.queryCellInfo, ej2_base_1.extend(cellArgs, { cell: td, column: cell.column, colSpan: 1 }));\n\t                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1) {\n\t                        var cellMerge = new cell_merge_renderer_1.CellMergeRender(this.serviceLocator, this.parent);\n\t                        td = cellMerge.render(cellArgs, row, i, td);\n\t                    }\n\t                }\n\t                if (!row.cells[i].isSpanned) {\n\t                    tr.appendChild(td);\n\t                }\n\t            }\n\t            if (row.isDataRow) {\n\t                this.parent.trigger(constant_1.rowDataBound, ej2_base_1.extend(rowArgs, { row: tr }));\n\t            }\n\t            if (row.cssClass) {\n\t                tr.classList.add(row.cssClass);\n\t            }\n\t            return tr;\n\t        };\n\t        RowRenderer.prototype.refreshMergeCells = function (row) {\n\t            for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n\t                var cell = _a[_i];\n\t                cell.isSpanned = false;\n\t            }\n\t            return row;\n\t        };\n\t        RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n\t            var attr = {};\n\t            var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n\t            var classes = [];\n\t            if (row.isDataRow) {\n\t                classes.push('e-row');\n\t            }\n\t            if (row.isAltRow) {\n\t                classes.push('e-altrow');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(row.index)) {\n\t                attr[prop.rowindex] = row.index;\n\t            }\n\t            if (row.rowSpan) {\n\t                attr.rowSpan = row.rowSpan;\n\t            }\n\t            if (row.uid) {\n\t                attr[prop.dataUID] = row.uid;\n\t            }\n\t            if (row.isSelected) {\n\t                attr[prop.ariaSelected] = true;\n\t            }\n\t            if (row.visible === false) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(tr, attr);\n\t        };\n\t        return RowRenderer;\n\t    }());\n\t    exports.RowRenderer = RowRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellType;\n\t    (function (CellType) {\n\t        CellType[CellType[\"Data\"] = 0] = \"Data\";\n\t        CellType[CellType[\"Header\"] = 1] = \"Header\";\n\t        CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n\t        CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n\t        CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n\t        CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n\t        CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n\t        CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n\t        CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n\t        CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n\t        CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n\t        CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n\t        CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n\t        CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n\t        CellType[CellType[\"CommandColumn\"] = 14] = \"CommandColumn\";\n\t    })(CellType = exports.CellType || (exports.CellType = {}));\n\t    var RenderType;\n\t    (function (RenderType) {\n\t        RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n\t        RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n\t        RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n\t    })(RenderType = exports.RenderType || (exports.RenderType = {}));\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellMergeRender = (function () {\n\t        function CellMergeRender(serviceLocator, parent) {\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent = parent;\n\t        }\n\t        CellMergeRender.prototype.render = function (cellArgs, row, i, td) {\n\t            var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || enum_1.CellType.Data);\n\t            var span = row.cells[i].cellSpan ? row.cells[i].cellSpan :\n\t                (cellArgs.colSpan + i) <= row.cells.length ? cellArgs.colSpan : row.cells.length - i;\n\t            var visible = 0;\n\t            for (var j = i + 1; j < i + span && j < row.cells.length; j++) {\n\t                if (row.cells[j].visible === false) {\n\t                    visible++;\n\t                }\n\t                else {\n\t                    row.cells[j].isSpanned = true;\n\t                }\n\t            }\n\t            if (visible > 0) {\n\t                for (var j = i + span; j < i + span + visible && j < row.cells.length; j++) {\n\t                    row.cells[j].isSpanned = true;\n\t                }\n\t                if (i + span + visible >= row.cells.length) {\n\t                    span -= (i + span + visible) - row.cells.length;\n\t                }\n\t            }\n\t            if (row.cells[i].cellSpan) {\n\t                row.data[cellArgs.column.field] = row.cells[i].spanText;\n\t                td = cellRenderer.render(row.cells[i], row.data, { 'index': !ej2_base_1.isNullOrUndefined(row.index) ? row.index.toString() : '' });\n\t            }\n\t            if (span > 1) {\n\t                ej2_base_1.attributes(td, { 'colSpan': span.toString(), 'aria-colSpan': span.toString() });\n\t            }\n\t            if (this.parent.enableColumnVirtualization && !row.cells[i].cellSpan &&\n\t                !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {\n\t                this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);\n\t            }\n\t            return td;\n\t        };\n\t        CellMergeRender.prototype.backupMergeCells = function (fName, data, span) {\n\t            this.setMergeCells(this.generteKey(fName, data), span);\n\t        };\n\t        CellMergeRender.prototype.generteKey = function (fname, data) {\n\t            return fname + '__' + data.toString();\n\t        };\n\t        CellMergeRender.prototype.splitKey = function (key) {\n\t            return key.split('__');\n\t        };\n\t        CellMergeRender.prototype.containsKey = function (fname, data) {\n\t            return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));\n\t        };\n\t        CellMergeRender.prototype.getMergeCells = function () {\n\t            return this.parent.mergeCells;\n\t        };\n\t        CellMergeRender.prototype.setMergeCells = function (key, span) {\n\t            this.parent.mergeCells[key] = span;\n\t        };\n\t        CellMergeRender.prototype.updateVirtualCells = function (rows) {\n\t            var mCells = this.getMergeCells();\n\t            for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {\n\t                var key = _a[_i];\n\t                var value = mCells[key];\n\t                var merge = this.splitKey(key);\n\t                var columnIndex = this.getIndexFromAllColumns(merge[0]);\n\t                var vColumnIndices = this.parent.getColumnIndexesInView();\n\t                var span = value - (vColumnIndices[0] - columnIndex);\n\t                if (columnIndex < vColumnIndices[0] && span > 1) {\n\t                    for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {\n\t                        var row = rows_1[_b];\n\t                        if (row.data[merge[0]].toString() === merge[1].toString()) {\n\t                            row.cells[0].cellSpan = span;\n\t                            row.cells[0].spanText = merge[1];\n\t                            break;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        CellMergeRender.prototype.getIndexFromAllColumns = function (field) {\n\t            var index = util_1.iterateArrayOrObject(this.parent.getVisibleColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return index;\n\t        };\n\t        return CellMergeRender;\n\t    }());\n\t    exports.CellMergeRender = CellMergeRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(17), __webpack_require__(14), __webpack_require__(18), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_1, enum_1, cell_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowModelGenerator = (function () {\n\t        function RowModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        RowModelGenerator.prototype.generateRows = function (data, args) {\n\t            var rows = [];\n\t            var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n\t            for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n\t                rows[i] = this.generateRow(data[i], startIndex);\n\t            }\n\t            return rows;\n\t        };\n\t        RowModelGenerator.prototype.ensureColumns = function () {\n\t            var cols = [];\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cols.push(this.generateCell({}, null, enum_1.CellType.DetailExpand));\n\t            }\n\t            return cols;\n\t        };\n\t        RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            options.uid = util_1.getUid('grid-row');\n\t            options.data = data;\n\t            options.index = index;\n\t            options.indent = indent;\n\t            options.isDataRow = true;\n\t            options.cssClass = cssClass;\n\t            options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n\t            options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n\t            var cells = this.ensureColumns();\n\t            var row = new row_1.Row(options);\n\t            row.cells = cells.concat(this.generateCells(options));\n\t            return row;\n\t        };\n\t        RowModelGenerator.prototype.generateCells = function (options) {\n\t            var _this = this;\n\t            var dummies = this.parent.getColumns();\n\t            var tmp = [];\n\t            dummies.forEach(function (dummy, index) {\n\t                return tmp.push(_this.generateCell(dummy, options.uid, ej2_base_1.isNullOrUndefined(dummy.commands) ? undefined : enum_1.CellType.CommandColumn, null, index));\n\t            });\n\t            return tmp;\n\t        };\n\t        RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(column.field || column.template),\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.template),\n\t                'rowID': rowId,\n\t                'column': column,\n\t                'cellType': !ej2_base_1.isNullOrUndefined(cellType) ? cellType : enum_1.CellType.Data,\n\t                'colSpan': colSpan,\n\t                'commands': column.commands\n\t            };\n\t            if (opt.isDataCell || opt.column.type === 'checkbox') {\n\t                opt.index = this.parent.getColumnIndexByField(column.field);\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        RowModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            input.forEach(function (row) { return row.cells = _this.generateCells(row); });\n\t            return input;\n\t        };\n\t        return RowModelGenerator;\n\t    }());\n\t    exports.RowModelGenerator = RowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Row = (function () {\n\t        function Row(options) {\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Row;\n\t    }());\n\t    exports.Row = Row;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Cell = (function () {\n\t        function Cell(options) {\n\t            this.isSpanned = false;\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Cell;\n\t    }());\n\t    exports.Cell = Cell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(5), __webpack_require__(14), __webpack_require__(16), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, ej2_base_1, enum_1, row_model_generator_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupModelGenerator = (function (_super) {\n\t        __extends(GroupModelGenerator, _super);\n\t        function GroupModelGenerator(parent) {\n\t            var _this = _super.call(this, parent) || this;\n\t            _this.rows = [];\n\t            _this.index = 0;\n\t            _this.parent = parent;\n\t            _this.summaryModelGen = new summary_model_generator_1.GroupSummaryModelGenerator(parent);\n\t            _this.captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(parent);\n\t            return _this;\n\t        }\n\t        GroupModelGenerator.prototype.generateRows = function (data, args) {\n\t            if (this.parent.groupSettings.columns.length === 0) {\n\t                return _super.prototype.generateRows.call(this, data, args);\n\t            }\n\t            this.rows = [];\n\t            this.index = this.parent.enableVirtualization ? (this.parent.pageSettings.currentPage - 1) * data.records.length : 0;\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                this.getGroupedRecords(0, data[i], data.level);\n\t            }\n\t            this.index = 0;\n\t            return this.rows;\n\t        };\n\t        GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw) {\n\t            var level = raw;\n\t            if (ej2_base_1.isNullOrUndefined(data.items)) {\n\t                if (ej2_base_1.isNullOrUndefined(data.GroupGuid)) {\n\t                    this.rows = this.rows.concat(this.generateDataRows(data, index));\n\t                }\n\t                else {\n\t                    for (var j = 0, len = data.length; j < len; j++) {\n\t                        this.getGroupedRecords(index, data[j], data.level);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.rows = this.rows.concat(this.generateCaptionRow(data, index));\n\t                if (data.items && data.items.length) {\n\t                    this.getGroupedRecords(index + 1, data.items, data.items.level);\n\t                }\n\t                if (this.parent.aggregates.length) {\n\t                    (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n\t                }\n\t            }\n\t            var _a;\n\t        };\n\t        GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n\t            var _this = this;\n\t            var cells = [];\n\t            var visibles = [];\n\t            var column = this.parent.getColumnByField(field);\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization) {\n\t                column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n\t            }\n\t            var groupedLen = this.parent.groupSettings.columns.length;\n\t            var gObj = this.parent;\n\t            if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n\t                for (var i = 0; i < indent; i++) {\n\t                    cells.push(this.generateIndentCell());\n\t                }\n\t                cells.push(this.generateCell({}, null, enum_1.CellType.Expand));\n\t            }\n\t            indent = this.parent.enableColumnVirtualization ? 1 :\n\t                (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n\t                    indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n\t            if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n\t                var captionCells = this.captionModelGen.generateRows(data)[0];\n\t                ej2_base_1.extend(data, captionCells.data);\n\t                var cIndex_1 = 0;\n\t                captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n\t                visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n\t                if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n\t                    visibles = visibles.slice(1);\n\t                }\n\t                if (this.parent.getVisibleColumns().length === 1) {\n\t                    visibles = [];\n\t                }\n\t                indent = indent - visibles.length;\n\t            }\n\t            var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n\t            var wFlag = true;\n\t            cols.forEach(function (col, index) {\n\t                var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n\t                if (tmpFlag) {\n\t                    wFlag = false;\n\t                }\n\t                var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n\t                    enum_1.CellType.GroupCaption : enum_1.CellType.GroupCaptionEmpty;\n\t                indent = _this.parent.enableColumnVirtualization && cellType === enum_1.CellType.GroupCaption ? indent + groupedLen : indent;\n\t                cells.push(_this.generateCell(column, null, cellType, indent));\n\t            });\n\t            cells.push.apply(cells, visibles);\n\t            return cells;\n\t        };\n\t        GroupModelGenerator.prototype.generateCaptionRow = function (data, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            var col = this.parent.getColumnByField(data.field);\n\t            options.data = ej2_base_1.extend({}, data);\n\t            if (col) {\n\t                options.data.field = data.field;\n\t            }\n\t            options.isDataRow = false;\n\t            var row = new row_1.Row(options);\n\t            row.indent = indent;\n\t            row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n\t            return row;\n\t        };\n\t        GroupModelGenerator.prototype.generateDataRows = function (data, indent) {\n\t            var rows = [];\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent);\n\t                for (var j = 0; j < indent; j++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n\t                        continue;\n\t                    }\n\t                    rows[i].cells.unshift(this.generateIndentCell());\n\t                }\n\t                this.index++;\n\t            }\n\t            return rows;\n\t        };\n\t        GroupModelGenerator.prototype.generateIndentCell = function () {\n\t            return this.generateCell({}, null, enum_1.CellType.Indent);\n\t        };\n\t        GroupModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            input.forEach(function (row) {\n\t                if (row.isDataRow) {\n\t                    row.cells = _this.generateCells(row);\n\t                    for (var j = 0; j < row.indent; j++) {\n\t                        if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n\t                            continue;\n\t                        }\n\t                        row.cells.unshift(_this.generateIndentCell());\n\t                    }\n\t                }\n\t                else {\n\t                    var cRow = _this.generateCaptionRow(row.data, row.indent);\n\t                    row.cells = cRow.cells;\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        return GroupModelGenerator;\n\t    }(row_model_generator_1.RowModelGenerator));\n\t    exports.GroupModelGenerator = GroupModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(9), __webpack_require__(5), __webpack_require__(7), __webpack_require__(14), __webpack_require__(18)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, column_1, ej2_base_1, util_1, enum_1, cell_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryModelGenerator = (function () {\n\t        function SummaryModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        SummaryModelGenerator.prototype.getData = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            this.parent.aggregates.slice().forEach(function (row) {\n\t                var columns = row.columns.filter(function (column) {\n\t                    return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n\t                        || _this.columnSelector(column);\n\t                });\n\t                if (columns.length) {\n\t                    rows.push({ columns: columns });\n\t                }\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.footerTemplate !== undefined;\n\t        };\n\t        SummaryModelGenerator.prototype.getColumns = function () {\n\t            var columns = [];\n\t            if (this.parent.allowGrouping) {\n\t                this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new column_1.Column({})); });\n\t            }\n\t            if (this.parent.detailTemplate) {\n\t                columns.push(new column_1.Column({}));\n\t            }\n\t            columns.push.apply(columns, this.parent.getColumns());\n\t            return columns;\n\t        };\n\t        SummaryModelGenerator.prototype.generateRows = function (input, args) {\n\t            var _this = this;\n\t            if (this.parent.currentViewData.length === 0) {\n\t                return [];\n\t            }\n\t            var data = this.buildSummaryData(input, args);\n\t            var rows = [];\n\t            this.getData().forEach(function (row, index) {\n\t                rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined));\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw) {\n\t            var _this = this;\n\t            var tmp = [];\n\t            var indents = this.getIndentByLevel(raw);\n\t            var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ? 1 : 0);\n\t            this.getColumns().forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() : enum_1.CellType.Indent, indents[index])); });\n\t            var row = new row_1.Row({ data: data, attributes: { class: 'e-summaryrow' } });\n\t            row.cells = tmp;\n\t            row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n\t            return row;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent) {\n\t            var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n\t            var attrs = { 'style': { 'textAlign': column.textAlign } };\n\t            if (indent) {\n\t                attrs.class = indent;\n\t            }\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(sColumn),\n\t                'isTemplate': sColumn && !ej2_base_1.isNullOrUndefined(sColumn.footerTemplate\n\t                    || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n\t                'column': sColumn || {},\n\t                'attributes': attrs,\n\t                'cellType': cellType\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n\t            var _this = this;\n\t            var dummy = [];\n\t            var summaryRows = this.getData();\n\t            var single = {};\n\t            var key = '';\n\t            summaryRows.forEach(function (row) {\n\t                single = {};\n\t                row.columns.forEach(function (column) {\n\t                    single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n\t                });\n\t                dummy.push(single);\n\t            });\n\t            return dummy;\n\t        };\n\t        SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n\t            return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n\t        };\n\t        SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n\t            var _this = this;\n\t            var types = column.type;\n\t            var helper = {};\n\t            var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n\t            var group = data;\n\t            if (!(types instanceof Array)) {\n\t                types = [column.type];\n\t            }\n\t            types.forEach(function (type) {\n\t                var key = column.field + ' - ' + type;\n\t                var disp = column.columnName;\n\t                var val = group.aggregates && !ej2_base_1.isNullOrUndefined(group.aggregates[key]) ? group.aggregates[key] :\n\t                    util_1.calculateAggregate(type, group.aggregates ? group.result : data, column, _this.parent);\n\t                single[disp] = single[disp] || {};\n\t                single[disp][key] = val;\n\t                single[disp][type] = formatFn(val);\n\t                if (group.field) {\n\t                    single[disp].field = group.field;\n\t                    single[disp].key = group.key;\n\t                }\n\t            });\n\t            helper.format = column.getFormatter();\n\t            column.setTemplate(helper);\n\t            return single;\n\t        };\n\t        SummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.Summary;\n\t        };\n\t        return SummaryModelGenerator;\n\t    }());\n\t    exports.SummaryModelGenerator = SummaryModelGenerator;\n\t    var GroupSummaryModelGenerator = (function (_super) {\n\t        __extends(GroupSummaryModelGenerator, _super);\n\t        function GroupSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupFooterTemplate !== undefined;\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n\t            if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n\t            return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.GroupSummary;\n\t        };\n\t        return GroupSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.GroupSummaryModelGenerator = GroupSummaryModelGenerator;\n\t    var CaptionSummaryModelGenerator = (function (_super) {\n\t        __extends(CaptionSummaryModelGenerator, _super);\n\t        function CaptionSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupCaptionTemplate !== undefined;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getData = function () {\n\t            var initVal = { columns: [] };\n\t            return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n\t                    prev.columns = prev.columns.concat(cur.columns);\n\t                    return prev;\n\t                }, initVal)];\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n\t            return (this.getData()[0].columns || []).length === 0;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.CaptionSummary;\n\t        };\n\t        return CaptionSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.CaptionSummaryModelGenerator = CaptionSummaryModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(10), __webpack_require__(4), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, util_1, events, value_formatter_1, checkbox_filter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Data = (function () {\n\t        function Data(parent, serviceLocator) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.initDataManager();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.rowsAdded, this.addRows, this);\n\t            this.parent.on(events.rowsRemoved, this.removeRows, this);\n\t            this.parent.on(events.dataSourceModified, this.initDataManager, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.updateData, this.crudActions, this);\n\t            this.parent.on(events.addDeleteAction, this.getData, this);\n\t        }\n\t        Data.prototype.initDataManager = function () {\n\t            var gObj = this.parent;\n\t            this.dataManager = gObj.dataSource instanceof ej2_data_1.DataManager ? gObj.dataSource :\n\t                (ej2_base_1.isNullOrUndefined(gObj.dataSource) ? new ej2_data_1.DataManager() : new ej2_data_1.DataManager(gObj.dataSource));\n\t            gObj.query = gObj.query instanceof ej2_data_1.Query ? gObj.query : new ej2_data_1.Query();\n\t        };\n\t        Data.prototype.generateQuery = function (skipPage) {\n\t            var gObj = this.parent;\n\t            var query = gObj.query.clone();\n\t            if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n\t                var columns = gObj.filterSettings.columns;\n\t                var predicate = void 0;\n\t                if (gObj.filterSettings.type === 'checkbox') {\n\t                    var predicates = checkbox_filter_1.CheckBoxFilter.getPredicate(gObj.filterSettings.columns);\n\t                    for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n\t                        var prop = _a[_i];\n\t                        var and = 'and';\n\t                        var obj = predicates[prop];\n\t                        predicate = !ej2_base_1.isNullOrUndefined(predicate) ?\n\t                            predicate[and](obj) :\n\t                            obj;\n\t                    }\n\t                    query.where(predicate);\n\t                }\n\t                else {\n\t                    for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n\t                        var col = columns_1[_b];\n\t                        var sType = gObj.getColumnByField(col.field).type;\n\t                        if (sType !== 'date' && sType !== 'datetime') {\n\t                            query.where(col.field, col.operator, col.value, !col.matchCase);\n\t                        }\n\t                        else {\n\t                            query.where(this.getDatePredicate(col));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (gObj.searchSettings.key.length) {\n\t                var sSettings = gObj.searchSettings;\n\t                sSettings.fields = sSettings.fields.length ? sSettings.fields : gObj.getColumnFieldNames();\n\t                query.search(sSettings.key, sSettings.fields, sSettings.operator, sSettings.ignoreCase);\n\t            }\n\t            gObj.aggregates.forEach(function (row) {\n\t                row.columns.forEach(function (column) {\n\t                    var types = column.type instanceof Array ? column.type : [column.type];\n\t                    types.forEach(function (type) { return query.aggregate(type, column.field); });\n\t                });\n\t            });\n\t            if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n\t                var columns = gObj.sortSettings.columns;\n\t                var sortGrp = [];\n\t                for (var i = columns.length - 1; i > -1; i--) {\n\t                    if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n\t                        query.sortBy(columns[i].field, columns[i].direction);\n\t                    }\n\t                    else {\n\t                        sortGrp.push(columns[i]);\n\t                    }\n\t                }\n\t                for (var i = 0, len = sortGrp.length; i < len; i++) {\n\t                    query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n\t                }\n\t            }\n\t            if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n\t                query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n\t            }\n\t            if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n\t                var columns = gObj.groupSettings.columns;\n\t                for (var i = 0, len = columns.length; i < len; i++) {\n\t                    var isGrpFmt = gObj.getColumnByField(columns[i]).enableGroupByFormat;\n\t                    var format = gObj.getColumnByField(columns[i]).format;\n\t                    if (isGrpFmt) {\n\t                        query.group(columns[i], this.formatGroupColumn.bind(this), format);\n\t                    }\n\t                    else {\n\t                        query.group(columns[i], null);\n\t                    }\n\t                }\n\t            }\n\t            return query;\n\t        };\n\t        Data.prototype.getData = function (args, query) {\n\t            var _this = this;\n\t            if (args === void 0) { args = { requestType: '' }; }\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ?\n\t                args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'delete':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.remove(key, args.data[0], null, query);\n\t                    break;\n\t                case 'save':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.insert(args.data, null, query, 0);\n\t                    break;\n\t            }\n\t            if (this.dataManager.ready) {\n\t                var ready = this.dataManager.ready;\n\t                ready.then(function (e) {\n\t                    _this.dataManager = new ej2_data_1.DataManager(e.result);\n\t                    _this.parent.refresh();\n\t                }).catch(function (e) {\n\t                    _this.parent.trigger(events.actionFailure, { error: e });\n\t                });\n\t            }\n\t            return this.dataManager.executeQuery(query);\n\t        };\n\t        Data.prototype.formatGroupColumn = function (value, field) {\n\t            var gObj = this.parent;\n\t            var serviceLocator = this.serviceLocator;\n\t            var column = gObj.getColumnByField(field);\n\t            var date = value;\n\t            if (!column.type) {\n\t                column.type = date.getDay ? (date.getHours() > 0 || date.getMinutes() > 0 ||\n\t                    date.getSeconds() > 0 || date.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n\t            }\n\t            if (ej2_base_1.isNullOrUndefined(column.getFormatter())) {\n\t                util_1.setFormatter(serviceLocator, column);\n\t            }\n\t            var formatVal = value_formatter_1.ValueFormatter.prototype.toView(value, column.getFormatter());\n\t            return formatVal;\n\t        };\n\t        Data.prototype.crudActions = function (args) {\n\t            this.generateQuery();\n\t            var promise = null;\n\t            var pr = 'promise';\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n\t                this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'save':\n\t                    promise = this.dataManager.update(key, args.data, null, this.generateQuery());\n\t                    break;\n\t            }\n\t            args[pr] = promise;\n\t            this.parent.notify(events.crudAction, args);\n\t        };\n\t        Data.prototype.saveChanges = function (changes, key) {\n\t            var promise = this.dataManager.saveChanges(changes, key, null, this.generateQuery().requiresCount());\n\t            return promise;\n\t        };\n\t        Data.prototype.getKey = function (keys) {\n\t            if (keys && keys.length) {\n\t                return keys[0];\n\t            }\n\t            return undefined;\n\t        };\n\t        Data.prototype.isRemote = function () {\n\t            return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined;\n\t        };\n\t        Data.prototype.getDatePredicate = function (filterObject) {\n\t            var datePredicate;\n\t            var prevDate;\n\t            var nextDate;\n\t            var prevObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var nextObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var value = new Date(filterObject.value);\n\t            if (filterObject.operator === 'equal' || filterObject.operator === 'notequal') {\n\t                prevDate = new Date(value.setDate(value.getDate() - 1));\n\t                nextDate = new Date(value.setDate(value.getDate() + 2));\n\t                prevObj.value = prevDate;\n\t                nextObj.value = nextDate;\n\t                if (filterObject.operator === 'equal') {\n\t                    prevObj.operator = 'greaterthan';\n\t                    nextObj.operator = 'lessthan';\n\t                }\n\t                else if (filterObject.operator === 'notequal') {\n\t                    prevObj.operator = 'lessthanorequal';\n\t                    nextObj.operator = 'greaterthanorequal';\n\t                }\n\t                var predicateSt = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t                var predicateEnd = new ej2_data_1.Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n\t                datePredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n\t            }\n\t            else {\n\t                var predicates = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t                datePredicate = predicates;\n\t            }\n\t            return datePredicate;\n\t        };\n\t        Data.prototype.addRows = function (e) {\n\t            for (var i = e.records.length; i > 0; i--) {\n\t                this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n\t            }\n\t        };\n\t        Data.prototype.removeRows = function (e) {\n\t            var json = this.dataManager.dataSource.json;\n\t            this.dataManager.dataSource.json = json.filter(function (value, index) { return e.records.indexOf(value) === -1; });\n\t        };\n\t        Data.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.rowsAdded, this.addRows);\n\t            this.parent.off(events.rowsRemoved, this.removeRows);\n\t            this.parent.off(events.dataSourceModified, this.initDataManager);\n\t            this.parent.off(events.dataSourceModified, this.destroy);\n\t            this.parent.off(events.updateData, this.crudActions);\n\t            this.parent.off(events.addDeleteAction, this.getData);\n\t        };\n\t        return Data;\n\t    }());\n\t    exports.Data = Data;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(5), __webpack_require__(8), __webpack_require__(23), __webpack_require__(10), __webpack_require__(4), __webpack_require__(7), __webpack_require__(6), __webpack_require__(24), __webpack_require__(6), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, ej2_base_2, ej2_data_1, ej2_buttons_1, events, value_formatter_1, util_2, ej2_popups_1, ej2_inputs_1, ej2_popups_2, util_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CheckBoxFilter = (function () {\n\t        function CheckBoxFilter(parent, filterSettings, serviceLocator) {\n\t            this.defaultConstants = {\n\t                Search: 'Search',\n\t                OK: 'OK',\n\t                Cancel: 'Cancel',\n\t                Filter: 'Filter',\n\t                Clear: 'Clear',\n\t                SelectAll: 'Select All',\n\t                Blanks: 'Blanks',\n\t                True: 'True',\n\t                False: 'False',\n\t                NoResult: 'No Matches Found'\n\t            };\n\t            this.values = {};\n\t            this.cBoxTrue = ej2_buttons_1.createCheckBox(false, { checked: true, label: ' ' });\n\t            this.cBoxFalse = ej2_buttons_1.createCheckBox(false, { checked: false, label: ' ' });\n\t            this.parent = parent;\n\t            this.id = this.parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.valueFormatter = new value_formatter_1.ValueFormatter(this.parent.locale);\n\t            this.initLocale(this.defaultConstants);\n\t            this.cBoxTrue.insertBefore(ej2_base_2.createElement('input', {\n\t                className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n\t            }), this.cBoxTrue.firstChild);\n\t            this.cBoxFalse.insertBefore(ej2_base_2.createElement('input', {\n\t                className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n\t            }), this.cBoxFalse.firstChild);\n\t            this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n\t            if (this.parent.enableRtl) {\n\t                ej2_base_1.addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n\t            }\n\t        }\n\t        CheckBoxFilter.prototype.initLocale = function (constants) {\n\t            this.localeObj = new ej2_base_1.L10n(this.getModuleName(), this.defaultConstants, this.parent.locale || 'en-US');\n\t        };\n\t        CheckBoxFilter.prototype.destroy = function () {\n\t            this.closeDialog();\n\t        };\n\t        CheckBoxFilter.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n\t            ej2_base_1.EventHandler.add(this.dlg.querySelector('.e-searchinput'), 'keyup', this.searchBoxKeyUp, this);\n\t        };\n\t        CheckBoxFilter.prototype.unWireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.dlg, 'click', this.clickHandler);\n\t            var elem = this.dlg.querySelector('.e-searchinput');\n\t            if (elem) {\n\t                ej2_base_1.EventHandler.remove(elem, 'keyup', this.searchBoxKeyUp);\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.searchBoxClick = function (e) {\n\t            var target = e.target;\n\t            if (target.classList.contains('e-searchclear')) {\n\t                this.sInput.value = '';\n\t                this.refreshCheckboxes();\n\t                this.updateSearchIcon();\n\t                this.sInput.focus();\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.searchBoxKeyUp = function (e) {\n\t            this.refreshCheckboxes();\n\t            this.updateSearchIcon();\n\t        };\n\t        CheckBoxFilter.prototype.updateSearchIcon = function () {\n\t            if (this.sInput.value.length) {\n\t                ej2_base_1.classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n\t            }\n\t            else {\n\t                ej2_base_1.classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.getLocalizedLabel = function (key) {\n\t            return this.localeObj.getConstant(key);\n\t        };\n\t        CheckBoxFilter.prototype.updateDataSource = function () {\n\t            var dataSource = this.options.dataSource;\n\t            if (!(dataSource instanceof ej2_data_1.DataManager)) {\n\t                for (var i = 0; i < dataSource.length; i++) {\n\t                    if (typeof dataSource !== 'object') {\n\t                        var obj = {};\n\t                        obj[this.options.field] = dataSource[i];\n\t                        dataSource[i] = obj;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.updateModel = function (options) {\n\t            this.options = options;\n\t            this.options.dataSource = options.dataSource;\n\t            this.updateDataSource();\n\t            this.options.type = options.type || 'string';\n\t            this.options.format = options.format || '';\n\t            this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n\t            this.options.sortedColumns = options.sortedColumns || this.parent.sortSettings.columns;\n\t            this.options.query = options.query || new ej2_data_1.Query();\n\t            this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n\t            this.values = {};\n\t            this.isFiltered = options.filteredColumns.length;\n\t            ej2_base_1.extend(this.defaultConstants, options.localizedStrings);\n\t        };\n\t        CheckBoxFilter.prototype.getAndSetChkElem = function (options) {\n\t            this.dlg = ej2_base_2.createElement('div', {\n\t                id: this.id + this.options.type + '_excelDlg',\n\t                className: 'e-checkboxfilter e-filter-popup'\n\t            });\n\t            this.sBox = ej2_base_2.createElement('div', { className: 'e-searchcontainer' });\n\t            if (!options.hideSearchbox) {\n\t                this.sInput = ej2_base_2.createElement('input', {\n\t                    id: this.id + '_SearchBox',\n\t                    className: 'e-searchinput'\n\t                });\n\t                this.sIcon = ej2_base_2.createElement('span', {\n\t                    className: 'e-searchclear e-search-icon e-icons', attrs: {\n\t                        type: 'text', placeholder: this.getLocalizedLabel('Search')\n\t                    }\n\t                });\n\t                this.searchBox = ej2_base_2.createElement('span', { className: 'e-searchbox e-fields' });\n\t                this.searchBox.appendChild(this.sInput);\n\t                this.sBox.appendChild(this.searchBox);\n\t                ej2_inputs_1.Input.createInput({\n\t                    element: this.sInput, floatLabelType: 'Never', properties: {\n\t                        placeholder: this.getLocalizedLabel('Search')\n\t                    }\n\t                });\n\t                this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n\t            }\n\t            this.spinner = ej2_base_2.createElement('div', { className: 'e-spinner' });\n\t            this.cBox = ej2_base_2.createElement('div', {\n\t                id: this.id + this.options.type + '_CheckBoxList',\n\t                className: 'e-checkboxlist e-fields'\n\t            });\n\t            this.spinner.appendChild(this.cBox);\n\t            this.sBox.appendChild(this.spinner);\n\t            return this.sBox;\n\t        };\n\t        CheckBoxFilter.prototype.showDialog = function (options) {\n\t            var args = {\n\t                requestType: events.filterBeforeOpen, filterModel: this,\n\t                columnName: this.options.field, columnType: this.options.type\n\t            };\n\t            this.parent.trigger(events.actionBegin, args);\n\t            this.dialogObj = new ej2_popups_1.Dialog({\n\t                visible: false, content: this.sBox,\n\t                close: this.closeDialog.bind(this),\n\t                width: (!ej2_base_1.isNullOrUndefined(util_1.parentsUntil(options.target, 'e-bigger')))\n\t                    || this.parent.element.classList.contains('e-device') ? 260 : 250,\n\t                target: this.parent.element, animationSettings: { effect: 'None' },\n\t                buttons: [{\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { content: this.getLocalizedLabel(this.isExcel ? 'OK' : 'Filter'), cssClass: 'e-primary', isPrimary: true }\n\t                    },\n\t                    {\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'Cancel' : 'Clear') }\n\t                    }],\n\t                created: this.dialogCreated.bind(this),\n\t                open: this.dialogOpen.bind(this)\n\t            });\n\t            this.dialogObj.appendTo(this.dlg);\n\t            this.dialogObj.element.style.maxHeight = '800px';\n\t            this.dialogObj.show();\n\t            this.wireEvents();\n\t            ej2_popups_2.createSpinner({ target: this.spinner });\n\t            ej2_popups_2.showSpinner(this.spinner);\n\t            this.getAllData();\n\t        };\n\t        CheckBoxFilter.prototype.dialogCreated = function (e) {\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                util_3.getFilterMenuPostion(this.options.target, this.dialogObj);\n\t            }\n\t            else {\n\t                this.dialogObj.position = { X: 'center', Y: 'center' };\n\t            }\n\t            this.parent.notify(events.filterDialogCreated, e);\n\t        };\n\t        CheckBoxFilter.prototype.openDialog = function (options) {\n\t            this.updateModel(options);\n\t            this.getAndSetChkElem(options);\n\t            this.showDialog(options);\n\t        };\n\t        CheckBoxFilter.prototype.closeDialog = function () {\n\t            if (this.dialogObj && !this.dialogObj.isDestroyed) {\n\t                this.parent.notify(events.filterMenuClose, { field: this.options.field });\n\t                this.dialogObj.destroy();\n\t                this.unWireEvents();\n\t                ej2_base_2.remove(this.dlg);\n\t                this.dlg = null;\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.btnClick = function (e) {\n\t            var text = e.target.innerText.toLowerCase();\n\t            if (this.getLocalizedLabel(this.isExcel ? 'OK' : 'Filter').toLowerCase() === text) {\n\t                this.fltrBtnHandler();\n\t            }\n\t            else if (this.getLocalizedLabel('Clear').toLowerCase() === text) {\n\t                this.options.handler({ action: 'clear-filter', field: this.options.field });\n\t            }\n\t            this.closeDialog();\n\t        };\n\t        CheckBoxFilter.prototype.fltrBtnHandler = function () {\n\t            var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n\t            var optr = 'equal';\n\t            var caseSen = this.options.type === 'string' ?\n\t                this.options.allowCaseSensitive : true;\n\t            var defaults = {\n\t                field: this.options.field, predicate: 'or',\n\t                operator: optr, matchcase: caseSen\n\t            };\n\t            var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n\t            if (isNotEqual) {\n\t                optr = 'notequal';\n\t                checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n\t                defaults.predicate = 'and';\n\t                defaults.operator = 'notequal';\n\t            }\n\t            var value;\n\t            var fObj;\n\t            var coll = [];\n\t            for (var i = 0; i < checked.length; i++) {\n\t                value = this.values[util_1.parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n\t                fObj = ej2_base_1.extend({}, { value: value }, defaults);\n\t                if (value && !value.toString().length) {\n\t                    fObj.operator = isNotEqual ? 'notequal' : 'equal';\n\t                }\n\t                coll.push(this.options.type === 'date' ? CheckBoxFilter.setDateObject(fObj) : fObj);\n\t            }\n\t            this.initiateFilter(coll);\n\t        };\n\t        CheckBoxFilter.prototype.initiateFilter = function (fColl) {\n\t            var firstVal = fColl[0];\n\t            var predicate;\n\t            if (!ej2_base_1.isNullOrUndefined(firstVal)) {\n\t                predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n\t                    new ej2_data_1.Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchcase);\n\t                for (var j = 1; j < fColl.length; j++) {\n\t                    predicate = fColl[j].ejpredicate !== undefined ?\n\t                        predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n\t                        predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchcase);\n\t                }\n\t                var args = {\n\t                    action: 'filtering', filterCollection: fColl, field: this.options.field,\n\t                    ejpredicate: ej2_data_1.Predicate.or(predicate)\n\t                };\n\t                this.options.handler(args);\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.refreshCheckboxes = function () {\n\t            var val = this.sInput.value;\n\t            var query = this.options.query.clone();\n\t            var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n\t            var operator = 'contains';\n\t            var matchcase = true;\n\t            parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n\t            if (this.options.type === 'boolean') {\n\t                if (parsed !== undefined &&\n\t                    this.getLocalizedLabel('True').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n\t                    parsed = 'true';\n\t                }\n\t                else if (parsed !== undefined &&\n\t                    this.getLocalizedLabel('False').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n\t                    parsed = 'false';\n\t                }\n\t            }\n\t            if (this.options.type === 'date' || this.options.type === 'datetime') {\n\t                parsed = this.valueFormatter.fromView(val, this.options.parserFn, this.options.type);\n\t                operator = 'equal';\n\t                if (ej2_base_1.isNullOrUndefined(parsed) && val.length) {\n\t                    return;\n\t                }\n\t            }\n\t            if (val.length) {\n\t                query.where(this.options.field, operator, parsed, matchcase);\n\t            }\n\t            this.processDataSource(query);\n\t        };\n\t        CheckBoxFilter.prototype.getPredicateFromCols = function (columns) {\n\t            var predicate;\n\t            var predicates = CheckBoxFilter.getPredicate(columns);\n\t            for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                var and = 'and';\n\t                var obj = predicates[prop];\n\t                predicate = !ej2_base_1.isNullOrUndefined(predicate) ?\n\t                    predicate[and](obj) :\n\t                    obj;\n\t            }\n\t            return predicate;\n\t        };\n\t        CheckBoxFilter.prototype.getAllData = function () {\n\t            var _this = this;\n\t            var query = new ej2_data_1.Query();\n\t            query.requiresCount();\n\t            this.options.dataSource = this.options.dataSource instanceof ej2_data_1.DataManager ?\n\t                this.options.dataSource : new ej2_data_1.DataManager(this.options.dataSource);\n\t            var promise = this.options.dataSource.executeQuery(query);\n\t            promise.then(function (e) { return _this.dataSuccess(e); });\n\t        };\n\t        CheckBoxFilter.prototype.dataSuccess = function (e) {\n\t            this.fullData = e.result;\n\t            var query = new ej2_data_1.Query();\n\t            if ((this.options.filteredColumns.length)) {\n\t                var cols = [];\n\t                for (var i = 0; i < this.options.filteredColumns.length; i++) {\n\t                    if (this.options.filteredColumns[i].field !== this.options.field) {\n\t                        cols.push(this.options.filteredColumns[i]);\n\t                    }\n\t                }\n\t                var predicate = this.getPredicateFromCols(cols);\n\t                if (predicate) {\n\t                    query.where(predicate);\n\t                }\n\t            }\n\t            query.select(this.options.field);\n\t            var result = new ej2_data_1.DataManager(this.fullData).executeLocal(query);\n\t            var res = CheckBoxFilter.getDistinct(result, this.options.field);\n\t            this.filteredData = res.records;\n\t            this.processDataSource(null, true);\n\t            var args = {\n\t                requestType: events.filterAfterOpen,\n\t                filterModel: this, columnName: this.options.field, columnType: this.options.type\n\t            };\n\t            this.parent.trigger(events.actionComplete, args);\n\t        };\n\t        CheckBoxFilter.prototype.processDataSource = function (query, isInitial) {\n\t            ej2_popups_2.showSpinner(this.spinner);\n\t            query = query ? query : this.options.query.clone();\n\t            query.requiresCount();\n\t            var args = {\n\t                requestType: events.filterChoiceRequest, filterModel: this, query: query,\n\t                dataSource: this.filteredData\n\t            };\n\t            this.parent.trigger(events.actionBegin, args);\n\t            var result = new ej2_data_1.DataManager(args.dataSource).executeLocal(args.query);\n\t            var res = result;\n\t            this.updateResult();\n\t            this.createFilterItems(res.result, isInitial);\n\t        };\n\t        CheckBoxFilter.prototype.updateResult = function () {\n\t            this.result = {};\n\t            var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n\t            var query = new ej2_data_1.Query();\n\t            if (predicate) {\n\t                query.where(predicate);\n\t            }\n\t            var result = new ej2_data_1.DataManager(this.fullData).executeLocal(query);\n\t            for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n\t                var res = result_1[_i];\n\t                this.result[res[this.options.field]] = true;\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            var elem = util_1.parentsUntil(target, 'e-checkbox-wrapper');\n\t            if (util_1.parentsUntil(target, 'e-searchbox')) {\n\t                this.searchBoxClick(e);\n\t            }\n\t            if (elem) {\n\t                var selectAll = elem.querySelector('.e-selectall');\n\t                if (selectAll) {\n\t                    this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n\t                }\n\t                else {\n\t                    util_3.toogleCheckbox(elem.parentElement);\n\t                }\n\t                this.updateIndeterminatenBtn();\n\t                elem.querySelector('.e-chk-hidden').focus();\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.updateAllCBoxes = function (checked) {\n\t            var cBoxes = [].slice.call(this.cBox.querySelectorAll('.e-frame'));\n\t            for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n\t                var cBox = cBoxes_1[_i];\n\t                ej2_base_1.removeClass([cBox], ['e-check', 'e-stop', 'e-uncheck']);\n\t                if (checked) {\n\t                    cBox.classList.add('e-check');\n\t                }\n\t                else {\n\t                    cBox.classList.add('e-uncheck');\n\t                }\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.dialogOpen = function () {\n\t            if (this.parent.element.classList.contains('e-device')) {\n\t                this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n\t                this.dialogObj.element.querySelector('.e-btn').focus();\n\t            }\n\t        };\n\t        CheckBoxFilter.prototype.createCheckbox = function (value, checked) {\n\t            var elem = checked ? this.cBoxTrue.cloneNode(true) :\n\t                this.cBoxFalse.cloneNode(true);\n\t            var label = elem.querySelector('.e-label');\n\t            label.innerHTML = !ej2_base_1.isNullOrUndefined(value) && value.toString().length ? value :\n\t                this.getLocalizedLabel('Blanks');\n\t            if (this.options.template) {\n\t                label.innerHTML = '';\n\t                var args = {};\n\t                args[this.options.field] = value;\n\t                util_1.appendChildren(label, this.options.template(args));\n\t            }\n\t            return elem;\n\t        };\n\t        CheckBoxFilter.prototype.updateIndeterminatenBtn = function () {\n\t            var cnt = this.cBox.children.length - 1;\n\t            var className = [];\n\t            var elem = this.cBox.querySelector('.e-selectall');\n\t            var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n\t            var btn = this.dlg.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n\t            btn.disabled = false;\n\t            if (cnt === selected) {\n\t                className = ['e-check'];\n\t            }\n\t            else if (selected) {\n\t                className = ['e-stop'];\n\t            }\n\t            else {\n\t                btn.disabled = true;\n\t            }\n\t            ej2_base_1.removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n\t            ej2_base_1.addClass([elem], className);\n\t        };\n\t        CheckBoxFilter.prototype.createFilterItems = function (data, isInitial) {\n\t            var cBoxes = ej2_base_2.createElement('div');\n\t            this.itemsCnt = data.length;\n\t            if (data.length || isInitial) {\n\t                var selectAll = util_3.createCboxWithWrap(util_1.getUid('cbox'), this.createCheckbox(this.getLocalizedLabel('SelectAll'), false), 'e-ftrchk');\n\t                selectAll.querySelector('.e-frame').classList.add('e-selectall');\n\t                cBoxes.appendChild(selectAll);\n\t                var isColFiltered = new ej2_data_1.DataManager(this.options.filteredColumns).executeLocal(new ej2_data_1.Query().where('field', 'equal', this.options.field)).length;\n\t                for (var i = 0; i < data.length; i++) {\n\t                    var uid = util_1.getUid('cbox');\n\t                    this.values[uid] = data[i][this.options.field];\n\t                    var value = this.valueFormatter.toView(data[i][this.options.field], this.options.formatFn);\n\t                    cBoxes.appendChild(util_3.createCboxWithWrap(uid, this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid])), 'e-ftrchk'));\n\t                }\n\t                this.cBox.innerHTML = cBoxes.innerHTML;\n\t                this.updateIndeterminatenBtn();\n\t            }\n\t            else {\n\t                cBoxes.appendChild(ej2_base_2.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n\t                this.cBox.innerHTML = cBoxes.innerHTML;\n\t            }\n\t            var args = { requestType: events.filterChoiceRequest, filterModel: this, dataSource: data };\n\t            this.parent.trigger(events.actionComplete, args);\n\t            ej2_popups_2.hideSpinner(this.spinner);\n\t        };\n\t        CheckBoxFilter.prototype.getCheckedState = function (isColFiltered, value) {\n\t            if (!this.isFiltered || !isColFiltered) {\n\t                return true;\n\t            }\n\t            else {\n\t                return this.result[value];\n\t            }\n\t        };\n\t        CheckBoxFilter.getDistinct = function (json, field) {\n\t            var len = json.length;\n\t            var result = [];\n\t            var value;\n\t            var ejValue = 'ejValue';\n\t            var lookup = {};\n\t            while (len--) {\n\t                value = json[len];\n\t                value = typeof value === 'object' && !(value instanceof Date) ?\n\t                    value[field] : value;\n\t                if (!ej2_base_1.isNullOrUndefined(value)) {\n\t                    if (!(value in lookup)) {\n\t                        var obj = {};\n\t                        obj[ejValue] = value;\n\t                        obj[field] = value;\n\t                        result.push(obj);\n\t                    }\n\t                    lookup[value] = true;\n\t                }\n\t            }\n\t            return ej2_data_1.DataUtil.group(ej2_data_1.DataUtil.sort(result, field, ej2_data_1.DataUtil.fnAscending), 'ejValue');\n\t        };\n\t        CheckBoxFilter.setDateObject = function (filterObject) {\n\t            var prevObj = ej2_base_1.extend({}, util_2.getActualProperties(filterObject));\n\t            var nextObj = ej2_base_1.extend({}, util_2.getActualProperties(filterObject));\n\t            var value = new Date(filterObject.value);\n\t            var prevDate = new Date(value.setDate(value.getDate() - 1));\n\t            var nextDate = new Date(value.setDate(value.getDate() + 2));\n\t            prevObj.value = prevDate;\n\t            nextObj.value = nextDate;\n\t            if (filterObject.operator === 'equal') {\n\t                nextObj.operator = 'lessthan';\n\t                nextObj.predicate = 'and';\n\t                prevObj.operator = 'greaterthan';\n\t                prevObj.predicate = 'and';\n\t            }\n\t            else if (filterObject.operator === 'notequal') {\n\t                nextObj.operator = 'greaterthanorequal';\n\t                nextObj.predicate = 'or';\n\t                prevObj.operator = 'lessthanorequal';\n\t                prevObj.predicate = 'or';\n\t            }\n\t            var predicateSt = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t            var predicateEnd = new ej2_data_1.Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n\t            filterObject.ejpredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) :\n\t                predicateSt.or(predicateEnd);\n\t            filterObject.type = 'date';\n\t            return filterObject;\n\t        };\n\t        CheckBoxFilter.getPredicate = function (columns) {\n\t            var cols = CheckBoxFilter.getDistinct(columns, 'field').records;\n\t            var collection;\n\t            var pred = {};\n\t            for (var i = 0; i < cols.length; i++) {\n\t                collection = new ej2_data_1.DataManager(columns).executeLocal(new ej2_data_1.Query().where('field', 'equal', cols[i].field));\n\t                pred[cols[i].field] = CheckBoxFilter.generatePredicate(collection);\n\t            }\n\t            return pred;\n\t        };\n\t        CheckBoxFilter.generatePredicate = function (cols) {\n\t            var len = cols ? cols.length : 0;\n\t            var predicate;\n\t            var first;\n\t            first = CheckBoxFilter.updateDateFilter(cols[0]);\n\t            if (first.type === 'date' || first.type === 'datetime') {\n\t                predicate = CheckBoxFilter.getDatePredicate(first);\n\t            }\n\t            else {\n\t                predicate = first.ejpredicate ? first.ejpredicate :\n\t                    new ej2_data_1.Predicate(first.field, first.operator, first.value, first.ignoreCase || !first.matchcase);\n\t            }\n\t            for (var p = 1; p < len; p++) {\n\t                cols[p] = CheckBoxFilter.updateDateFilter(cols[p]);\n\t                if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n\t                    if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n\t                        predicate.predicates.push(CheckBoxFilter.getDatePredicate(cols[p]));\n\t                    }\n\t                    else {\n\t                        predicate.predicates.push(new ej2_data_1.Predicate(cols[p].field, cols[p].operator, cols[p].value, cols[p].ignoreCase || !cols[p].matchcase));\n\t                    }\n\t                }\n\t                else {\n\t                    if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n\t                        predicate = predicate[(cols[p].predicate)](CheckBoxFilter.getDatePredicate(cols[p]));\n\t                    }\n\t                    else {\n\t                        predicate = cols[p].ejpredicate ?\n\t                            predicate[cols[p].predicate](cols[p].ejpredicate) :\n\t                            predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, cols[p].ignoreCase || !cols[p].matchcase);\n\t                    }\n\t                }\n\t            }\n\t            return predicate || null;\n\t        };\n\t        CheckBoxFilter.getDatePredicate = function (predicate) {\n\t            return new ej2_data_1.Predicate(predicate.field, predicate.operator, predicate.value, predicate.ignoreCase || !predicate.matchcase);\n\t        };\n\t        CheckBoxFilter.updateDateFilter = function (filter) {\n\t            if (filter.type !== 'date' && !(filter.value instanceof Date)) {\n\t                return filter;\n\t            }\n\t            return ['equal', 'notequal'].indexOf(filter.operator) === -1 ? filter :\n\t                CheckBoxFilter.setDateObject(filter);\n\t        };\n\t        CheckBoxFilter.prototype.getModuleName = function () {\n\t            return 'checkboxFilter';\n\t        };\n\t        return CheckBoxFilter;\n\t    }());\n\t    exports.CheckBoxFilter = CheckBoxFilter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_23__;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_24__;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(14), __webpack_require__(13), __webpack_require__(18), __webpack_require__(17), __webpack_require__(10), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, enum_1, row_renderer_1, cell_1, row_1, events, ej2_base_4, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderRender = (function () {\n\t        function HeaderRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (!(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_2.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-headercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-headercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                var height = element.offsetHeight;\n\t                var headercelldiv = element.querySelector('.e-headercelldiv');\n\t                var col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n\t                if (!ej2_base_1.isNullOrUndefined(col.headerTemplate)) {\n\t                    if (col.headerTemplate.indexOf('#') !== -1) {\n\t                        visualElement.innerHTML = document.querySelector(col.headerTemplate).innerHTML.trim();\n\t                    }\n\t                    else {\n\t                        visualElement.innerHTML = col.headerTemplate;\n\t                    }\n\t                }\n\t                else {\n\t                    visualElement.textContent = headercelldiv ?\n\t                        gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid')).headerText : element.firstElementChild.innerHTML;\n\t                }\n\t                visualElement.style.width = element.offsetWidth + 'px';\n\t                visualElement.style.height = element.offsetHeight + 'px';\n\t                visualElement.style.lineHeight = (height - 6).toString() + 'px';\n\t                if (element.querySelector('.e-headercelldiv')) {\n\t                    _this.column = gObj.getColumnByUid(element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                    visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                }\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.target;\n\t                if (target) {\n\t                    var closest = ej2_base_2.closest(target, '.e-grid');\n\t                    var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                    if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n\t                        ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                        if (gObj.allowReordering) {\n\t                            gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n\t                            gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n\t                        }\n\t                        return;\n\t                    }\n\t                    gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                var cancel;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                if ((!util_1.parentsUntil(e.target, 'e-headercell') && !util_1.parentsUntil(e.target, 'e-groupdroparea')) ||\n\t                    (!gObj.allowReordering && util_1.parentsUntil(e.target, 'e-headercell')) ||\n\t                    (!e.helper.getAttribute('e-mappinguid') && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    cancel = true;\n\t                }\n\t                gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var uid = e.droppedElement.getAttribute('e-mappinguid');\n\t                var closest = ej2_base_2.closest(e.target, '.e-grid');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n\t                    !(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return;\n\t                }\n\t                gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.widthService = this.serviceLocator.getService('widthService');\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.columnPositionChanged, this.refreshUI, this);\n\t        }\n\t        HeaderRender.prototype.renderPanel = function () {\n\t            var div = ej2_base_2.createElement('div', { className: 'e-gridheader' });\n\t            var innerDiv = ej2_base_2.createElement('div', { className: 'e-headercontent' });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            this.parent.element.appendChild(div);\n\t        };\n\t        HeaderRender.prototype.renderTable = function () {\n\t            var headerDiv = this.getPanel();\n\t            headerDiv.appendChild(this.createHeaderTable());\n\t            this.setTable(headerDiv.querySelector('.e-table'));\n\t            this.initializeHeaderDrag();\n\t            this.initializeHeaderDrop();\n\t            this.parent.notify(events.headerRefreshed, { rows: this.rows });\n\t        };\n\t        HeaderRender.prototype.getPanel = function () {\n\t            return this.headerPanel;\n\t        };\n\t        HeaderRender.prototype.setPanel = function (panel) {\n\t            this.headerPanel = panel;\n\t        };\n\t        HeaderRender.prototype.getTable = function () {\n\t            return this.headerTable;\n\t        };\n\t        HeaderRender.prototype.setTable = function (table) {\n\t            this.headerTable = table;\n\t        };\n\t        HeaderRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        HeaderRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        HeaderRender.prototype.getRows = function () {\n\t            var table = this.getTable();\n\t            return table.tHead.rows;\n\t        };\n\t        HeaderRender.prototype.createHeaderTable = function () {\n\t            var table = this.createTable();\n\t            var innerDiv = this.getPanel().firstChild;\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        HeaderRender.prototype.createTable = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var table = ej2_base_2.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var findHeaderRow = this.createHeaderContent();\n\t            var thead = findHeaderRow.thead;\n\t            var tbody = ej2_base_2.createElement('tbody', { className: 'e-hide' });\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var rowBody = ej2_base_2.createElement('tr');\n\t            var bodyCell;\n\t            var rows = this.rows = findHeaderRow.rows;\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Header);\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n\t                    var cell = rows[i].cells[j];\n\t                    bodyCell = ej2_base_2.createElement('td');\n\t                    rowBody.appendChild(bodyCell);\n\t                }\n\t            }\n\t            if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n\t                table.classList.add('e-sortfilter');\n\t            }\n\t            this.updateColGroup(colGroup);\n\t            tbody.appendChild(rowBody);\n\t            table.appendChild(this.setColGroup(colGroup));\n\t            table.appendChild(thead);\n\t            table.appendChild(tbody);\n\t            this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n\t            return table;\n\t        };\n\t        HeaderRender.prototype.createHeaderContent = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var thead = ej2_base_2.createElement('thead');\n\t            var colHeader = ej2_base_2.createElement('tr', { className: 'e-columnheader' });\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Header, gObj);\n\t            rowRenderer.element = colHeader;\n\t            var rows = [];\n\t            var headerRow;\n\t            this.colDepth = this.getObjDepth();\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                rows[i] = this.generateRow(i);\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.ensureColumns(rows);\n\t            rows = this.getHeaderCells(rows);\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                headerRow = rowRenderer.render(rows[i], columns);\n\t                thead.appendChild(headerRow);\n\t            }\n\t            var findHeaderRow = {\n\t                thead: thead,\n\t                rows: rows\n\t            };\n\t            return findHeaderRow;\n\t        };\n\t        HeaderRender.prototype.updateColGroup = function (colGroup) {\n\t            var cols = this.parent.getColumns();\n\t            var col;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.allowGrouping) {\n\t                for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        continue;\n\t                    }\n\t                    col = ej2_base_2.createElement('col');\n\t                    colGroup.appendChild(col);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                col = ej2_base_2.createElement('col');\n\t                colGroup.appendChild(col);\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                col = ej2_base_2.createElement('col');\n\t                if (cols[i].visible === false) {\n\t                    ej2_base_2.setStyleAttribute(col, { 'display': 'none' });\n\t                }\n\t                colGroup.appendChild(col);\n\t            }\n\t            return colGroup;\n\t        };\n\t        HeaderRender.prototype.ensureColumns = function (rows) {\n\t            var gObj = this.parent;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gObj.allowGrouping) {\n\t                    for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n\t                        if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gObj.detailTemplate || gObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.getHeaderCells = function (rows) {\n\t            var column;\n\t            if (this.parent.frozenColumns) {\n\t                if (this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead')) {\n\t                    column = this.parent.columns.slice(this.parent.frozenColumns, this.parent.columns.length);\n\t                }\n\t                else {\n\t                    column = this.parent.columns.slice(0, this.parent.frozenColumns);\n\t                }\n\t            }\n\t            var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns()\n\t                : (this.parent.frozenColumns ? column : this.parent.columns);\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol) {\n\t            var lastCol = isLastCol ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                rows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCnt(cols, 0);\n\t                if (colSpan) {\n\t                    rows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol);\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.generateRow = function (index) {\n\t            return new row_1.Row({});\n\t        };\n\t        HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.headerTemplate),\n\t                'rowID': '',\n\t                'column': column,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': colIndex\n\t            };\n\t            if (!opt.rowSpan || opt.rowSpan < 2) {\n\t                delete opt.rowSpan;\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        HeaderRender.prototype.setVisible = function (columns) {\n\t            var rows = [].slice.call(this.getRows());\n\t            var displayVal = '';\n\t            var idx;\n\t            var className;\n\t            var element;\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (column.visible === false) {\n\t                    displayVal = 'none';\n\t                }\n\t                ej2_base_2.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t                this.refreshUI();\n\t            }\n\t        };\n\t        HeaderRender.prototype.refreshUI = function () {\n\t            var headerDiv = this.getPanel();\n\t            var table = this.getTable();\n\t            ej2_base_2.remove(this.getTable());\n\t            table.removeChild(table.firstChild);\n\t            table.removeChild(table.childNodes[0]);\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var findHeaderRow = this.createHeaderContent();\n\t            this.rows = findHeaderRow.rows;\n\t            table.insertBefore(findHeaderRow.thead, table.firstChild);\n\t            this.updateColGroup(colGroup);\n\t            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n\t            this.setTable(table);\n\t            this.appendContent(table);\n\t            this.parent.notify(events.colGroupRefresh, {});\n\t            this.widthService.setWidthToColumns();\n\t            this.initializeHeaderDrag();\n\t            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                var gCells = [].slice.call(row.querySelectorAll('.e-grouptopleftcell'));\n\t                if (gCells.length) {\n\t                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n\t                }\n\t            }\n\t            this.parent.notify(events.headerRefreshed, { rows: this.rows });\n\t            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'header') {\n\t                util_1.wrap(rows, true);\n\t            }\n\t        };\n\t        HeaderRender.prototype.appendContent = function (table) {\n\t            this.getPanel().firstChild.appendChild(table);\n\t        };\n\t        HeaderRender.prototype.getObjDepth = function () {\n\t            var max = 0;\n\t            var cols = this.parent.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                var depth = this.checkDepth(cols[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        HeaderRender.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        HeaderRender.prototype.getCellCnt = function (col, cnt) {\n\t            if (col.columns) {\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    cnt = this.getCellCnt(col.columns[i], cnt);\n\t                }\n\t            }\n\t            else {\n\t                if (col.visible) {\n\t                    cnt++;\n\t                }\n\t            }\n\t            return cnt;\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrag = function () {\n\t            var gObj = this.parent;\n\t            if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n\t                return;\n\t            }\n\t            var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n\t            for (var i = 0, len = headerRows.length; i < len; i++) {\n\t                var drag = new ej2_base_4.Draggable(headerRows[i], {\n\t                    dragTarget: '.e-headercell',\n\t                    distance: 5,\n\t                    helper: this.helper,\n\t                    dragStart: this.dragStart,\n\t                    drag: this.drag,\n\t                    dragStop: this.dragStop,\n\t                    abort: '.e-rhandler'\n\t                });\n\t            }\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_4.Droppable(gObj.getHeaderContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        return HeaderRender;\n\t    }());\n\t    exports.HeaderRender = HeaderRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, ej2_buttons_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRenderer = (function () {\n\t        function CellRenderer(parent, locator) {\n\t            this.element = ej2_base_2.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            this.rowChkBox = ej2_base_2.createElement('input', { className: 'e-checkselect', attrs: { 'type': 'checkbox' } });\n\t            this.localizer = locator.getService('localization');\n\t            this.formatter = locator.getService('valueFormatter');\n\t            this.parent = parent;\n\t        }\n\t        CellRenderer.prototype.getGui = function () {\n\t            return '';\n\t        };\n\t        CellRenderer.prototype.format = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.format)) {\n\t                value = this.formatter.toView(value, column.getFormatter());\n\t            }\n\t            return ej2_base_1.isNullOrUndefined(value) ? '' : value.toString();\n\t        };\n\t        CellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var result;\n\t            if (cell.column.template) {\n\t                var literals = ['index'];\n\t                result = cell.column.getColumnTemplate()(ej2_base_1.extend({ 'index': attributes[literals[0]] }, data), this.parent, 'template');\n\t                util_1.appendChildren(node, result);\n\t                node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n\t                    cell.column.headerText);\n\t                return false;\n\t            }\n\t            return true;\n\t        };\n\t        CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.formatter)) {\n\t                if (util_1.doesImplementInterface(column.formatter, 'getValue')) {\n\t                    var formatter = column.formatter;\n\t                    value = new formatter().getValue(column, data);\n\t                }\n\t                else if (typeof column.formatter === 'function') {\n\t                    value = column.formatter(column, data);\n\t                }\n\t                else {\n\t                    value = column.formatter.getValue(column, data);\n\t                }\n\t            }\n\t            return value;\n\t        };\n\t        CellRenderer.prototype.render = function (cell, data, attributes) {\n\t            return this.refreshCell(cell, data, attributes);\n\t        };\n\t        CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n\t            var node = this.refreshCell(cell, data, attributes);\n\t            td.innerHTML = '';\n\t            var elements = [].slice.call(node.childNodes);\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                td.appendChild(elem);\n\t            }\n\t        };\n\t        CellRenderer.prototype.refreshCell = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var column = cell.column;\n\t            var innerHtml = this.getGui();\n\t            var value = this.getValue(column.field, data, column);\n\t            if (column.type === 'date') {\n\t                value = new Date(value);\n\t            }\n\t            value = this.format(column, value, data);\n\t            innerHtml = value.toString();\n\t            if (column.type === 'boolean') {\n\t                var isNull = (value !== 'true' && value !== 'false');\n\t                if (column.displayAsCheckBox) {\n\t                    node.classList.add('e-checkbox');\n\t                    innerHtml = isNull ? null : '<input type=\"checkbox\" disabled ' + '/>';\n\t                }\n\t                else {\n\t                    var localeStr = isNull ? null : value === 'true' ? 'True' : 'False';\n\t                    innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n\t                }\n\t            }\n\t            var fromFormatter = this.invokeFormatter(column, value, data);\n\t            innerHtml = !ej2_base_1.isNullOrUndefined(column.formatter) ? ej2_base_1.isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n\t            node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n\t            if (this.evaluate(node, cell, data, attributes) && column.type !== 'checkbox') {\n\t                this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n\t            }\n\t            else if (column.type === 'checkbox') {\n\t                node.classList.add('e-gridchkbox');\n\t                node.setAttribute('aria-label', 'column header ' + cell.column.headerText);\n\t                var checkBox = this.rowChkBox.cloneNode();\n\t                checkBox.id = 'checkselect_' + cell.rowID.split('grid-row')[1];\n\t                node.appendChild(checkBox);\n\t                if (this.parent.selectionSettings.persistSelection) {\n\t                    value = value === 'true';\n\t                }\n\t                else {\n\t                    value = false;\n\t                }\n\t                new ej2_buttons_1.CheckBox({ checked: value }).appendTo(checkBox);\n\t            }\n\t            this.setAttributes(node, cell, attributes);\n\t            if (column.type === 'boolean') {\n\t                var obj = new ej2_buttons_1.CheckBox({ disabled: true, checked: value === 'true' });\n\t                obj.appendTo(node.firstElementChild);\n\t            }\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n\t            if (property === void 0) { property = 'innerHTML'; }\n\t            node[property] = innerHtml;\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n\t            var column = cell.column;\n\t            this.buildAttributeFromCell(node, cell);\n\t            util_1.setStyleAndAttributes(node, attributes);\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.textAlign) {\n\t                node.style.textAlign = column.textAlign;\n\t            }\n\t            if (column.clipMode === 'clip') {\n\t                node.classList.add('e-gridclip');\n\t            }\n\t            else if (column.clipMode === 'ellipsiswithtooltip') {\n\t                node.classList.add('e-ellipsistooltip');\n\t            }\n\t        };\n\t        CellRenderer.prototype.buildAttributeFromCell = function (node, cell) {\n\t            var attr = {};\n\t            var prop = { 'colindex': 'aria-colindex' };\n\t            var classes = [];\n\t            if (cell.colSpan) {\n\t                attr.colSpan = cell.colSpan;\n\t            }\n\t            if (cell.rowSpan) {\n\t                attr.rowSpan = cell.rowSpan;\n\t            }\n\t            if (cell.isTemplate) {\n\t                classes.push('e-templatecell');\n\t            }\n\t            if (cell.isSelected) {\n\t                classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(cell.index)) {\n\t                attr[prop.colindex] = cell.index;\n\t            }\n\t            if (!cell.visible) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(node, attr);\n\t        };\n\t        CellRenderer.prototype.getValue = function (field, data, column) {\n\t            return column.valueAccessor(column.field, data, column);\n\t        };\n\t        return CellRenderer;\n\t    }());\n\t    exports.CellRenderer = CellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(26), __webpack_require__(28), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1, aria_service_1, ej2_buttons_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderCellRenderer = (function (_super) {\n\t        __extends(HeaderCellRenderer, _super);\n\t        function HeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n\t            _this.ariaService = new aria_service_1.AriaService();\n\t            _this.hTxtEle = ej2_base_2.createElement('span', { className: 'e-headertext' });\n\t            _this.sortEle = ej2_base_2.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n\t            _this.gui = ej2_base_2.createElement('div');\n\t            _this.chkAllBox = ej2_base_2.createElement('input', { className: 'e-checkselectall', attrs: { 'type': 'checkbox' } });\n\t            return _this;\n\t        }\n\t        HeaderCellRenderer.prototype.getGui = function () {\n\t            return this.gui.cloneNode();\n\t        };\n\t        HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var fltrMenuEle = ej2_base_2.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n\t            return this.prepareHeader(cell, node, fltrMenuEle);\n\t        };\n\t        HeaderCellRenderer.prototype.refresh = function (cell, node) {\n\t            this.clean(node);\n\t            var fltrMenuEle = ej2_base_2.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n\t            return this.prepareHeader(cell, node, fltrMenuEle);\n\t        };\n\t        HeaderCellRenderer.prototype.clean = function (node) {\n\t            node.innerHTML = '';\n\t        };\n\t        HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n\t            var column = cell.column;\n\t            var ariaAttr = {};\n\t            var innerDIV = this.getGui();\n\t            ej2_base_2.attributes(innerDIV, {\n\t                'e-mappinguid': column.uid,\n\t                'class': 'e-headercelldiv'\n\t            });\n\t            if (column.type !== 'checkbox') {\n\t                var value = column.headerText;\n\t                var headerText = this.hTxtEle.cloneNode();\n\t                headerText[column.getDomSetter()] = value;\n\t                innerDIV.appendChild(headerText);\n\t            }\n\t            else {\n\t                column.editType = 'booleanedit';\n\t                var checkAllBox = this.chkAllBox.cloneNode();\n\t                innerDIV.appendChild(checkAllBox);\n\t                var checkAllBoxObj = new ej2_buttons_1.CheckBox();\n\t                checkAllBoxObj.appendTo(checkAllBox);\n\t                innerDIV.classList.add('e-headerchkcelldiv');\n\t            }\n\t            this.buildAttributeFromCell(node, cell);\n\t            this.appendHtml(node, innerDIV);\n\t            node.appendChild(this.sortEle.cloneNode());\n\t            if ((this.parent.allowFiltering && this.parent.filterSettings.type !== 'filterbar') &&\n\t                (column.allowFiltering && ej2_base_1.isNullOrUndefined(column.template)) &&\n\t                !(this.parent.showColumnMenu && column.showColumnMenu)) {\n\t                ej2_base_2.attributes(fltrMenuEle, {\n\t                    'e-mappinguid': 'e-flmenu-' + column.uid,\n\t                });\n\t                node.classList.add('e-fltr-icon');\n\t                var matchFlColumns = [];\n\t                if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n\t                    for (var index = 0; index < this.parent.columns.length; index++) {\n\t                        for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n\t                            if (this.parent.filterSettings.columns[count].field === column.field) {\n\t                                fltrMenuEle.classList.add('e-filtered');\n\t                                matchFlColumns.push(column.field);\n\t                                break;\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                node.appendChild(fltrMenuEle.cloneNode());\n\t            }\n\t            if (cell.className) {\n\t                node.classList.add(cell.className);\n\t            }\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.allowSorting) {\n\t                ariaAttr.sort = 'none';\n\t            }\n\t            if (column.allowGrouping) {\n\t                ariaAttr.grabbed = false;\n\t            }\n\t            node = this.extendPrepareHeader(column, node);\n\t            if (!ej2_base_1.isNullOrUndefined(column.headerTemplate)) {\n\t                if (column.headerTemplate.indexOf('#') !== -1) {\n\t                    innerDIV.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n\t                }\n\t                else {\n\t                    innerDIV.innerHTML = column.headerTemplate;\n\t                }\n\t            }\n\t            this.ariaService.setOptions(node, ariaAttr);\n\t            if (!ej2_base_1.isNullOrUndefined(column.headerTextAlign) || !ej2_base_1.isNullOrUndefined(column.textAlign)) {\n\t                var alignment = column.headerTextAlign || column.textAlign;\n\t                innerDIV.style.textAlign = alignment;\n\t                if (alignment === 'right' || alignment === 'left') {\n\t                    node.classList.add(alignment === 'right' ? 'e-rightalign' : 'e-leftalign');\n\t                }\n\t            }\n\t            if (column.clipMode === 'clip') {\n\t                node.classList.add('e-gridclip');\n\t            }\n\t            else if (column.clipMode === 'ellipsiswithtooltip') {\n\t                node.classList.add('e-ellipsistooltip');\n\t            }\n\t            node.setAttribute('aria-rowspan', (!ej2_base_1.isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n\t            node.setAttribute('aria-colspan', '1');\n\t            return node;\n\t        };\n\t        HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n\t            if (this.parent.showColumnMenu && column.showColumnMenu) {\n\t                var element = (ej2_base_2.createElement('div', { className: 'e-icons e-columnmenu' }));\n\t                var matchFilteredColumns = [];\n\t                if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n\t                    for (var i = 0; i < this.parent.columns.length; i++) {\n\t                        for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n\t                            if (this.parent.filterSettings.columns[j].field === column.field) {\n\t                                element.classList.add('e-filtered');\n\t                                matchFilteredColumns.push(column.field);\n\t                                break;\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                node.classList.add('e-fltr-icon');\n\t                node.appendChild(element);\n\t            }\n\t            if (this.parent.allowResizing) {\n\t                var handler = ej2_base_2.createElement('div');\n\t                handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n\t                node.appendChild(handler);\n\t            }\n\t            return node;\n\t        };\n\t        HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return HeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderCellRenderer = HeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AriaService = (function () {\n\t        function AriaService() {\n\t        }\n\t        AriaService.prototype.setOptions = function (target, options) {\n\t            var props = Object.keys(options);\n\t            props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n\t        };\n\t        AriaService.prototype.setExpand = function (target, expand) {\n\t            setStateAndProperties(target, config.expand, expand);\n\t        };\n\t        AriaService.prototype.setSort = function (target, direction) {\n\t            setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n\t        };\n\t        AriaService.prototype.setBusy = function (target, isBusy) {\n\t            setStateAndProperties(target, config.busy, isBusy);\n\t            setStateAndProperties(target, config.invalid, null, true);\n\t        };\n\t        AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n\t            setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n\t        };\n\t        AriaService.prototype.setDropTarget = function (target, isTarget) {\n\t            setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n\t        };\n\t        return AriaService;\n\t    }());\n\t    exports.AriaService = AriaService;\n\t    function setStateAndProperties(target, attribute, value, remove) {\n\t        if (remove) {\n\t            target.removeAttribute(attribute);\n\t            return;\n\t        }\n\t        if (target) {\n\t            target.setAttribute(attribute, value);\n\t        }\n\t    }\n\t    var config = {\n\t        expand: 'aria-expanded',\n\t        role: 'role',\n\t        selected: 'aria-selected',\n\t        multiselectable: 'aria-multiselectable',\n\t        sort: 'aria-sort',\n\t        busy: 'aria-busy',\n\t        invalid: 'aria-invalid',\n\t        grabbed: 'aria-grabbed',\n\t        dropeffect: 'aria-dropeffect',\n\t        haspopup: 'aria-haspopup',\n\t        level: 'aria-level',\n\t        colcount: 'aria-colcount'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StackedHeaderCellRenderer = (function (_super) {\n\t        __extends(StackedHeaderCellRenderer, _super);\n\t        function StackedHeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', {\n\t                className: 'e-headercell e-stackedheadercell', attrs: {\n\t                    role: 'columnheader',\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            return _this;\n\t        }\n\t        StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var div = ej2_base_1.createElement('div', { className: 'e-stackedheadercelldiv' });\n\t            node.appendChild(div);\n\t            div.innerHTML = cell.column.headerText;\n\t            if (cell.column.toolTip) {\n\t                node.setAttribute('title', cell.column.toolTip);\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(cell.column.textAlign)) {\n\t                div.style.textAlign = cell.column.textAlign;\n\t            }\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-rowspan', '1');\n\t            return node;\n\t        };\n\t        return StackedHeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.StackedHeaderCellRenderer = StackedHeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var IndentCellRenderer = (function (_super) {\n\t        __extends(IndentCellRenderer, _super);\n\t        function IndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-indentcell' });\n\t            return _this;\n\t        }\n\t        IndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            return node;\n\t        };\n\t        return IndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.IndentCellRenderer = IndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(26), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupCaptionCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionCellRenderer, _super);\n\t        function GroupCaptionCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var gObj = this.parent;\n\t            var result;\n\t            var helper = {};\n\t            var value = cell.column.enableGroupByFormat ? data.key :\n\t                this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n\t            if (!ej2_base_1.isNullOrUndefined(gObj.groupSettings.captionTemplate)) {\n\t                if (gObj.groupSettings.captionTemplate.indexOf('#') !== -1) {\n\t                    result = util_1.templateCompiler(document.querySelector(gObj.groupSettings.captionTemplate).innerHTML.trim())(data);\n\t                }\n\t                else {\n\t                    result = util_1.templateCompiler(gObj.groupSettings.captionTemplate)(data);\n\t                }\n\t                util_1.appendChildren(node, result);\n\t            }\n\t            else {\n\t                node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n\t                    (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n\t            }\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n\t            return node;\n\t        };\n\t        return GroupCaptionCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionCellRenderer = GroupCaptionCellRenderer;\n\t    var GroupCaptionEmptyCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionEmptyCellRenderer, _super);\n\t        function GroupCaptionEmptyCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption' });\n\t            return _this;\n\t        }\n\t        GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.innerHTML = '&nbsp;';\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            return node;\n\t        };\n\t        return GroupCaptionEmptyCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionEmptyCellRenderer = GroupCaptionEmptyCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, indent_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExpandCellRenderer = (function (_super) {\n\t        __extends(ExpandCellRenderer, _super);\n\t        function ExpandCellRenderer() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        ExpandCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.className = 'e-recordplusexpand';\n\t            node.setAttribute('ej-mappingname', data.field);\n\t            node.setAttribute('ej-mappingvalue', data.key);\n\t            node.setAttribute('aria-expanded', 'true');\n\t            node.setAttribute('tabindex', '-1');\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-gdiagonaldown e-icon-gdownarrow' }));\n\t            return node;\n\t        };\n\t        return ExpandCellRenderer;\n\t    }(indent_cell_renderer_1.IndentCellRenderer));\n\t    exports.ExpandCellRenderer = ExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderIndentCellRenderer = (function (_super) {\n\t        __extends(HeaderIndentCellRenderer, _super);\n\t        function HeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-grouptopleftcell' });\n\t            return _this;\n\t        }\n\t        HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '&nbsp;' }));\n\t            return node;\n\t        };\n\t        return HeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderIndentCellRenderer = HeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailHeaderIndentCellRenderer = (function (_super) {\n\t        __extends(DetailHeaderIndentCellRenderer, _super);\n\t        function DetailHeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-detailheadercell' });\n\t            return _this;\n\t        }\n\t        DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-emptycell' }));\n\t            return node;\n\t        };\n\t        return DetailHeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailHeaderIndentCellRenderer = DetailHeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailExpandCellRenderer = (function (_super) {\n\t        __extends(DetailExpandCellRenderer, _super);\n\t        function DetailExpandCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', {\n\t                className: 'e-detailrowcollapse',\n\t                attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n\t            });\n\t            return _this;\n\t        }\n\t        DetailExpandCellRenderer.prototype.render = function () {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n\t            return node;\n\t        };\n\t        return DetailExpandCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailExpandCellRenderer = DetailExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRendererFactory = (function () {\n\t        function CellRendererFactory() {\n\t            this.cellRenderMap = {};\n\t        }\n\t        CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                this.cellRenderMap[name] = type;\n\t            }\n\t        };\n\t        CellRendererFactory.prototype.getCellRenderer = function (name) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                throw \"The cellRenderer \" + name + \" is not found\";\n\t            }\n\t            else {\n\t                return this.cellRenderMap[name];\n\t            }\n\t        };\n\t        return CellRendererFactory;\n\t    }());\n\t    exports.CellRendererFactory = CellRendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ServiceLocator = (function () {\n\t        function ServiceLocator() {\n\t            this.services = {};\n\t        }\n\t        ServiceLocator.prototype.register = function (name, type) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                this.services[name] = type;\n\t            }\n\t        };\n\t        ServiceLocator.prototype.getService = function (name) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                throw \"The service \" + name + \" is not registered\";\n\t            }\n\t            return this.services[name];\n\t        };\n\t        return ServiceLocator;\n\t    }());\n\t    exports.ServiceLocator = ServiceLocator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RendererFactory = (function () {\n\t        function RendererFactory() {\n\t            this.rendererMap = {};\n\t        }\n\t        RendererFactory.prototype.addRenderer = function (name, type) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                this.rendererMap[rName] = type;\n\t            }\n\t        };\n\t        RendererFactory.prototype.getRenderer = function (name) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                throw \"The renderer \" + rName + \" is not found\";\n\t            }\n\t            else {\n\t                return this.rendererMap[rName];\n\t            }\n\t        };\n\t        return RendererFactory;\n\t    }());\n\t    exports.RendererFactory = RendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(10), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, column_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnWidthService = (function () {\n\t        function ColumnWidthService(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ColumnWidthService.prototype.setWidthToColumns = function () {\n\t            var _this = this;\n\t            var i = 0;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            var wFlag = true;\n\t            if (this.parent.allowGrouping) {\n\t                for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        wFlag = false;\n\t                        continue;\n\t                    }\n\t                    this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t            }\n\t            this.parent.getColumns().forEach(function (column, index) {\n\t                _this.setColumnWidth(column, wFlag ? undefined : index);\n\t            });\n\t        };\n\t        ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n\t            var columnIndex = ej2_base_1.isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n\t            var cWidth = this.getWidth(column);\n\t            if (cWidth !== null) {\n\t                this.setWidth(cWidth, columnIndex);\n\t                if (this.parent.allowResizing && module === 'resize') {\n\t                    this.setWidthToTable();\n\t                }\n\t                this.parent.notify(constant_1.columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.setWidth = function (width, index) {\n\t            var header = this.parent.getHeaderTable();\n\t            var content = this.parent.getContentTable();\n\t            var fWidth = ej2_base_2.formatUnit(width);\n\t            var headerCol;\n\t            var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n\t            if (this.parent.frozenColumns && index >= this.parent.frozenColumns && mHdr && mHdr.querySelector('colgroup')) {\n\t                headerCol = mHdr.querySelector('colgroup').children[index - this.parent.frozenColumns];\n\t            }\n\t            else {\n\t                headerCol = header.querySelector('colgroup').children[index];\n\t            }\n\t            if (headerCol) {\n\t                headerCol.style.width = fWidth;\n\t            }\n\t            var contentCol;\n\t            if (this.parent.frozenColumns && index >= this.parent.frozenColumns) {\n\t                contentCol = this.parent.getContent().querySelector('.e-movablecontent')\n\t                    .querySelector('colgroup').children[index - this.parent.frozenColumns];\n\t            }\n\t            else {\n\t                contentCol = content.querySelector('colgroup').children[index];\n\t            }\n\t            if (contentCol) {\n\t                contentCol.style.width = fWidth;\n\t            }\n\t            var edit = content.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.querySelector('colgroup').children[index].style.width = fWidth;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n\t            var previous = this.getHeightFromDirection(element, 'previous');\n\t            var next = this.getHeightFromDirection(element, 'next');\n\t            return previous + next;\n\t        };\n\t        ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n\t            var sibling = element[direction + 'ElementSibling'];\n\t            var result = 0;\n\t            while (sibling) {\n\t                result += sibling.offsetHeight;\n\t                sibling = sibling[direction + 'ElementSibling'];\n\t            }\n\t            return result;\n\t        };\n\t        ColumnWidthService.prototype.getWidth = function (column) {\n\t            if (ej2_base_1.isNullOrUndefined(column.width) && this.parent.allowResizing) {\n\t                column.width = 200;\n\t            }\n\t            if (!column.width) {\n\t                return null;\n\t            }\n\t            var width = parseInt(column.width.toString(), 10);\n\t            if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n\t                return column.minWidth;\n\t            }\n\t            else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n\t                return column.maxWidth;\n\t            }\n\t            else {\n\t                return column.width;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getTableWidth = function (columns) {\n\t            var tWidth = 0;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                var cWidth = this.getWidth(column);\n\t                if (column.visible !== false && cWidth !== null) {\n\t                    tWidth += parseInt(cWidth.toString(), 10);\n\t                }\n\t            }\n\t            return tWidth;\n\t        };\n\t        ColumnWidthService.prototype.setWidthToTable = function () {\n\t            var tWidth = null;\n\t            if (this.parent.frozenColumns) {\n\t                var freezeWidth = 0;\n\t                var colGrp = this.parent.getContentTable().querySelector('colgroup');\n\t                var mColGrp = ej2_base_1.select('.e-movablecontent');\n\t                for (var i = 0; i < this.parent.getHeaderTable().querySelector('.e-columnheader').children.length; i++) {\n\t                    freezeWidth += parseInt(colGrp.children[i].style.width, 10);\n\t                }\n\t                tWidth = ej2_base_2.formatUnit(freezeWidth);\n\t                this.parent.getHeaderTable().style.width = tWidth;\n\t                this.parent.getContentTable().style.width = tWidth;\n\t                freezeWidth = 0;\n\t                for (var i = 0; i < ej2_base_1.select('.e-movableheader').querySelector('.e-columnheader').children.length; i++) {\n\t                    freezeWidth += parseInt(mColGrp.children[0].querySelector('colgroup').children[i].style.width, 10);\n\t                }\n\t                tWidth = ej2_base_2.formatUnit(freezeWidth);\n\t                ej2_base_1.select('.e-movableheader').firstElementChild.style.width = tWidth;\n\t                ej2_base_1.select('.e-movablecontent').firstElementChild.style.width = tWidth;\n\t            }\n\t            else {\n\t                tWidth = ej2_base_2.formatUnit(this.getTableWidth(this.parent.getColumns()));\n\t                this.parent.getHeaderTable().style.width = tWidth;\n\t                this.parent.getContentTable().style.width = tWidth;\n\t            }\n\t            var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.style.width = tWidth;\n\t            }\n\t        };\n\t        return ColumnWidthService;\n\t    }());\n\t    exports.ColumnWidthService = ColumnWidthService;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(14), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1, event) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FocusStrategy = (function () {\n\t        function FocusStrategy(parent) {\n\t            this.currentInfo = {};\n\t            this.oneTime = true;\n\t            this.forget = true;\n\t            this.skipFocus = false;\n\t            this.prevIndexes = {};\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        FocusStrategy.prototype.focusCheck = function (e) {\n\t            var target = e.target;\n\t            this.skipFocus = ej2_base_1.closest(target, 'e-pager') !== null;\n\t        };\n\t        FocusStrategy.prototype.onFocus = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.setActive(true);\n\t            var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n\t            this.getContent().matrix.select(current[0], current[1]);\n\t            if (this.skipFocus) {\n\t                this.focus();\n\t                this.skipFocus = false;\n\t            }\n\t        };\n\t        FocusStrategy.prototype.onClick = function (e, force) {\n\t            var isContent = !ej2_base_1.isNullOrUndefined(ej2_base_1.closest(e.target, '.e-gridcontent'));\n\t            if (!isContent && ej2_base_1.isNullOrUndefined(ej2_base_1.closest(e.target, '.e-gridheader')) ||\n\t                e.target.classList.contains('e-filtermenudiv')) {\n\t                return;\n\t            }\n\t            var beforeArgs = { cancel: false, byKey: false, byClick: !ej2_base_1.isNullOrUndefined(e.target), clickArgs: e };\n\t            this.parent.notify(event.beforeCellFocused, beforeArgs);\n\t            if (beforeArgs.cancel) {\n\t                return;\n\t            }\n\t            this.setActive(isContent);\n\t            var returnVal = this.getContent().onClick(e, force);\n\t            if (returnVal === false) {\n\t                return;\n\t            }\n\t            this.focus();\n\t        };\n\t        FocusStrategy.prototype.onKeyPress = function (e) {\n\t            if (this.skipOn(e)) {\n\t                return;\n\t            }\n\t            var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };\n\t            this.parent.notify(event.beforeCellFocused, beforeArgs);\n\t            if (beforeArgs.cancel) {\n\t                return;\n\t            }\n\t            var bValue = this.getContent().matrix.current;\n\t            this.currentInfo.outline = true;\n\t            this.swap = this.getContent().jump(e.action, bValue);\n\t            if (this.swap) {\n\t                var isHeader = this.header === this.getContent();\n\t                this.setActive(isHeader);\n\t                var rowInitVal = isHeader ? -1 : this.header.matrix.matrix.length;\n\t                var current = this.getContent().matrix.get(rowInitVal, bValue[1], [0, 0], e.action, this.getContent().validator());\n\t                this.getContent().matrix.current = [rowInitVal, current[1]];\n\t                this.prevIndexes = {};\n\t            }\n\t            e.preventDefault();\n\t            this.getContent().onKeyPress(e);\n\t            this.focus(e);\n\t        };\n\t        FocusStrategy.prototype.skipOn = function (e) {\n\t            var target = e.target;\n\t            if (!target) {\n\t                return false;\n\t            }\n\t            return (this.parent.editSettings.mode !== 'batch' && (this.parent.isEdit || ['insert', 'f2', 'delete'].indexOf(e.action) > -1)\n\t                || (ej2_base_1.closest(document.activeElement, '.e-filterbarcell') !== null && ['leftArrow', 'rightArrow'].indexOf(e.action) > -1)\n\t                || (ej2_base_1.closest(target, '.e-gridcontent') === null && ej2_base_1.closest(target, '.e-gridheader') === null)\n\t                || (e.action === 'space' && (!target.classList.contains('e-gridchkbox') && ej2_base_1.closest(target, '.e-gridchkbox') === null\n\t                    && ej2_base_1.closest(target, '.e-headerchkcelldiv') === null)));\n\t        };\n\t        FocusStrategy.prototype.getFocusedElement = function () {\n\t            return this.currentInfo.elementToFocus;\n\t        };\n\t        FocusStrategy.prototype.getContent = function () {\n\t            return this.active || this.content;\n\t        };\n\t        FocusStrategy.prototype.setActive = function (content) {\n\t            this.active = content ? this.content : this.header;\n\t        };\n\t        FocusStrategy.prototype.setFocusedElement = function (element) {\n\t            var _this = this;\n\t            this.currentInfo.elementToFocus = element;\n\t            setTimeout(function () { return _this.currentInfo.elementToFocus.focus(); }, 0);\n\t        };\n\t        FocusStrategy.prototype.focus = function (e) {\n\t            this.removeFocus();\n\t            this.addFocus(this.getContent().getFocusInfo(), e);\n\t        };\n\t        FocusStrategy.prototype.removeFocus = function () {\n\t            if (!this.currentInfo.element) {\n\t                return;\n\t            }\n\t            ej2_base_1.removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focused', 'e-focus']);\n\t            this.currentInfo.elementToFocus.tabIndex = -1;\n\t        };\n\t        FocusStrategy.prototype.addFocus = function (info, e) {\n\t            this.currentInfo = info;\n\t            this.currentInfo.outline = info.outline && !ej2_base_1.isNullOrUndefined(e);\n\t            if (!info.element) {\n\t                return;\n\t            }\n\t            var isFocused = info.elementToFocus.classList.contains('e-focus');\n\t            if (isFocused) {\n\t                return;\n\t            }\n\t            if (this.currentInfo.outline) {\n\t                ej2_base_1.addClass([info.element], ['e-focused']);\n\t            }\n\t            ej2_base_1.addClass([info.elementToFocus], ['e-focus']);\n\t            info.element.tabIndex = 0;\n\t            if (!isFocused) {\n\t                this.setFocusedElement(info.elementToFocus);\n\t            }\n\t            this.parent.notify(event.cellFocused, {\n\t                element: info.elementToFocus,\n\t                parent: info.element,\n\t                indexes: this.getContent().matrix.current,\n\t                byKey: !ej2_base_1.isNullOrUndefined(e),\n\t                byClick: ej2_base_1.isNullOrUndefined(e),\n\t                keyArgs: e,\n\t                isJump: this.swap,\n\t                container: this.getContent().getInfo(e),\n\t                outline: !ej2_base_1.isNullOrUndefined(e)\n\t            });\n\t            var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];\n\t            this.prevIndexes = { rowIndex: rowIndex, cellIndex: cellIndex };\n\t        };\n\t        FocusStrategy.prototype.refreshMatrix = function (content) {\n\t            var _this = this;\n\t            return function (e) {\n\t                if (content && !_this.content) {\n\t                    _this.content = new ContentFocus(_this.parent);\n\t                }\n\t                if (!content && !_this.header) {\n\t                    _this.header = new HeaderFocus(_this.parent);\n\t                }\n\t                var cFocus = content ? _this.content : _this.header;\n\t                cFocus.matrix.generate(e.rows, cFocus.selector);\n\t                cFocus.generateRows(e.rows);\n\t                var actions = ['paging', 'grouping'];\n\t                if (e.args && actions.indexOf(e.args.requestType) > -1) {\n\t                    _this.skipFocus = true;\n\t                    _this.onFocus();\n\t                }\n\t            };\n\t        };\n\t        FocusStrategy.prototype.addEventListener = function () {\n\t            var _this = this;\n\t            if (this.parent.isDestroyed || this.parent.frozenColumns || this.parent.frozenRows) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'mousedown', this.focusCheck, this);\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'focus', this.onFocus, this);\n\t            this.parent.on(event.keyPressed, this.onKeyPress, this);\n\t            this.parent.on(event.click, this.onClick, this);\n\t            this.parent.on(event.contentReady, this.refreshMatrix(true), this);\n\t            this.parent.on(event.headerRefreshed, this.refreshMatrix(), this);\n\t            this.parent.on('close-edit', this.restoreFocus, this);\n\t            ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.on(evt, _this.clearOutline, _this); });\n\t            ['sorting'].forEach(function (action) { return _this.parent.on(action + \"-complete\", _this.restoreFocus, _this); });\n\t            this.parent.on(event.batchAdd, this.refreshMatrix(true), this);\n\t            this.parent.on(event.batchDelete, this.refreshMatrix(true), this);\n\t            this.parent.on(event.detailDataBound, this.refreshMatrix(true), this);\n\t            this.parent.on(event.onEmpty, this.refreshMatrix(true), this);\n\t        };\n\t        FocusStrategy.prototype.removeEventListener = function () {\n\t            var _this = this;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'mousedown', this.focusCheck);\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'focus', this.onFocus);\n\t            this.parent.off(event.keyPressed, this.onKeyPress);\n\t            this.parent.off(event.click, this.onClick);\n\t            this.parent.off(event.contentReady, this.refreshMatrix(true));\n\t            this.parent.off(event.headerRefreshed, this.refreshMatrix());\n\t            this.parent.off('close-edit', this.restoreFocus);\n\t            ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.off(evt, _this.clearOutline); });\n\t            ['sorting'].forEach(function (action) { return _this.parent.off(action + \"-complete\", _this.restoreFocus); });\n\t            this.parent.off(event.batchAdd, this.refreshMatrix(true));\n\t            this.parent.off(event.batchDelete, this.refreshMatrix(true));\n\t            this.parent.off(event.detailDataBound, this.refreshMatrix(true));\n\t            this.parent.off(event.onEmpty, this.refreshMatrix(true));\n\t        };\n\t        FocusStrategy.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        FocusStrategy.prototype.restoreFocus = function () {\n\t            this.addFocus(this.getContent().getFocusInfo());\n\t        };\n\t        FocusStrategy.prototype.clearOutline = function () {\n\t            this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], 'downArrow', this.getContent().validator());\n\t            if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {\n\t                return;\n\t            }\n\t            ej2_base_1.removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focus', 'e-focused']);\n\t        };\n\t        FocusStrategy.prototype.getPrevIndexes = function () {\n\t            var forget = this.forget;\n\t            this.forget = false;\n\t            return forget ? { rowIndex: null, cellIndex: null } : this.prevIndexes;\n\t        };\n\t        FocusStrategy.prototype.forgetPrevious = function () {\n\t            this.forget = true;\n\t        };\n\t        return FocusStrategy;\n\t    }());\n\t    exports.FocusStrategy = FocusStrategy;\n\t    var Matrix = (function () {\n\t        function Matrix() {\n\t            this.matrix = [];\n\t            this.current = [];\n\t        }\n\t        Matrix.prototype.set = function (rowIndex, columnIndex, allow) {\n\t            rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n\t            columnIndex = Math.max(0, Math.min(columnIndex, this.columns));\n\t            this.matrix[rowIndex] = this.matrix[rowIndex] || [];\n\t            this.matrix[rowIndex][columnIndex] = allow ? 1 : 0;\n\t        };\n\t        Matrix.prototype.get = function (rowIndex, columnIndex, navigator, action, validator) {\n\t            var tmp = columnIndex;\n\t            if (rowIndex + navigator[0] < 0) {\n\t                return [rowIndex, columnIndex];\n\t            }\n\t            rowIndex = Math.max(0, Math.min(rowIndex + navigator[0], this.rows));\n\t            columnIndex = Math.max(0, Math.min(columnIndex + navigator[1], this.matrix[rowIndex].length - 1));\n\t            var first = this.first(this.matrix[rowIndex], columnIndex, navigator, true, action);\n\t            columnIndex = first === null ? tmp : first;\n\t            var val = ej2_base_1.getValue(rowIndex + \".\" + columnIndex, this.matrix);\n\t            return this.inValid(val) || !validator(rowIndex, columnIndex, action) ?\n\t                this.get(rowIndex, tmp, navigator, action, validator) : [rowIndex, columnIndex];\n\t        };\n\t        Matrix.prototype.first = function (vector, index, navigator, moveTo, action) {\n\t            if (((index < 0 || index === vector.length) && this.inValid(vector[index])\n\t                && (action !== 'upArrow' && action !== 'downArrow')) || !vector.some(function (v) { return v === 1; })) {\n\t                return null;\n\t            }\n\t            return !this.inValid(vector[index]) ? index :\n\t                this.first(vector, (['upArrow', 'downArrow', 'shiftUp', 'shiftDown'].indexOf(action) !== -1) ? moveTo ? 0 : ++index : index + navigator[1], navigator, false, action);\n\t        };\n\t        Matrix.prototype.select = function (rowIndex, columnIndex) {\n\t            rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n\t            columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[rowIndex].length - 1));\n\t            this.current = [rowIndex, columnIndex];\n\t        };\n\t        Matrix.prototype.generate = function (rows, selector) {\n\t            var _this = this;\n\t            this.rows = rows.length - 1;\n\t            this.matrix = [];\n\t            rows.forEach(function (row, rIndex) {\n\t                var cells = row.cells.filter(function (c) { return c.isSpanned !== true; });\n\t                _this.columns = Math.max(cells.length - 1, _this.columns | 0);\n\t                cells.forEach(function (cell, cIndex) {\n\t                    _this.set(rIndex, cIndex, selector(row, cell));\n\t                });\n\t            });\n\t            return this.matrix;\n\t        };\n\t        Matrix.prototype.inValid = function (value) {\n\t            return value === 0 || value === undefined;\n\t        };\n\t        return Matrix;\n\t    }());\n\t    exports.Matrix = Matrix;\n\t    var ContentFocus = (function () {\n\t        function ContentFocus(parent) {\n\t            var _this = this;\n\t            this.matrix = new Matrix();\n\t            this.parent = parent;\n\t            this.keyActions = {\n\t                'rightArrow': [0, 1],\n\t                'tab': [0, 1],\n\t                'leftArrow': [0, -1],\n\t                'shiftTab': [0, -1],\n\t                'upArrow': [-1, 0],\n\t                'downArrow': [1, 0],\n\t                'shiftUp': [-1, 0],\n\t                'shiftDown': [1, 0],\n\t                'shiftRight': [0, 1],\n\t                'shiftLeft': [0, -1],\n\t                'enter': [1, 0],\n\t                'shiftEnter': [-1, 0]\n\t            };\n\t            this.indexesByKey = function (action) {\n\t                var opt = {\n\t                    'home': [_this.matrix.current[0], -1, 0, 1],\n\t                    'end': [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],\n\t                    'ctrlHome': [0, -1, 0, 1],\n\t                    'ctrlEnd': [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]\n\t                };\n\t                return opt[action] || null;\n\t            };\n\t        }\n\t        ContentFocus.prototype.onKeyPress = function (e) {\n\t            var navigator = this.keyActions[e.action];\n\t            var current = this.getCurrentFromAction(e.action, navigator, e.action in this.keyActions, e);\n\t            if (!current) {\n\t                return;\n\t            }\n\t            this.matrix.select(current[0], current[1]);\n\t        };\n\t        ContentFocus.prototype.getCurrentFromAction = function (action, navigator, isPresent, e) {\n\t            if (navigator === void 0) { navigator = [0, 0]; }\n\t            if (!isPresent && !this.indexesByKey(action)) {\n\t                return null;\n\t            }\n\t            if (!this.shouldFocusChange(e)) {\n\t                return this.matrix.current;\n\t            }\n\t            var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];\n\t            var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator());\n\t            return current;\n\t        };\n\t        ContentFocus.prototype.onClick = function (e, force) {\n\t            var target = e.target;\n\t            target = (target.classList.contains('e-rowcell') ? target : ej2_base_1.closest(target, 'td'));\n\t            if (!target) {\n\t                return;\n\t            }\n\t            var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n\t            var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];\n\t            var val = ej2_base_1.getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n\t            if (this.matrix.inValid(val) || (!force && oRowIndex === rowIndex && oCellIndex === cellIndex)) {\n\t                return false;\n\t            }\n\t            this.matrix.select(rowIndex, cellIndex);\n\t        };\n\t        ContentFocus.prototype.getFocusInfo = function () {\n\t            var info = {};\n\t            var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n\t            this.matrix.current = [rowIndex, cellIndex];\n\t            info.element = this.parent.getContentTable()\n\t                .rows[rowIndex].cells[cellIndex];\n\t            info.elementToFocus = this.getFocusable(info.element);\n\t            info.outline = !info.element.classList.contains('e-detailcell');\n\t            return info;\n\t        };\n\t        ContentFocus.prototype.getFocusable = function (element) {\n\t            var child = [].slice\n\t                .call(element.querySelectorAll('button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])'));\n\t            return child.length ? child[0] : element;\n\t        };\n\t        ContentFocus.prototype.selector = function (row, cell) {\n\t            var types = [enum_1.CellType.Expand, enum_1.CellType.GroupCaption, enum_1.CellType.CaptionSummary, enum_1.CellType.GroupSummary];\n\t            return ((row.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate))\n\t                || (row.isDataRow && cell.cellType === enum_1.CellType.DetailExpand)\n\t                || (!row.isDataRow && types.indexOf(cell.cellType) > -1)\n\t                || (cell.column && cell.column.type === 'checkbox'))\n\t                && !(row.edit === 'delete' && row.isDirty);\n\t        };\n\t        ContentFocus.prototype.jump = function (action, current) {\n\t            return action === 'upArrow' && current[0] === 0;\n\t        };\n\t        ContentFocus.prototype.generateRows = function (rows) {\n\t        };\n\t        ContentFocus.prototype.getInfo = function (e) {\n\t            var info = this.getFocusInfo();\n\t            var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n\t            var isData = info.element.classList.contains('e-rowcell');\n\t            var isSelectable = isData || (e && e.action !== 'enter' && (info.element.classList.contains('e-detailrowcollapse')\n\t                || info.element.classList.contains('e-detailrowexpand')));\n\t            var _b = [Math.min(parseInt(info.element.parentElement.getAttribute('aria-rowindex'), 10), rIndex),\n\t                Math.min(parseInt(info.element.getAttribute('aria-colindex'), 10), cIndex)], rowIndex = _b[0], cellIndex = _b[1];\n\t            return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable: isSelectable };\n\t        };\n\t        ContentFocus.prototype.validator = function () {\n\t            var table = this.parent.getContentTable();\n\t            return function (rowIndex, cellIndex, action) {\n\t                var cell = table.rows[rowIndex].cells[cellIndex];\n\t                if (action === 'enter' || action === 'shiftEnter') {\n\t                    return cell.classList.contains('e-rowcell');\n\t                }\n\t                if ((action === 'shiftUp' || action === 'shiftDown') && cell.classList.contains('e-rowcell')) {\n\t                    return true;\n\t                }\n\t                else if (action !== 'shiftUp' && action !== 'shiftDown') {\n\t                    return cell.getBoundingClientRect().width !== 0;\n\t                }\n\t                return false;\n\t            };\n\t        };\n\t        ContentFocus.prototype.shouldFocusChange = function (e) {\n\t            var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;\n\t            if (rIndex < 0 || cIndex < 0) {\n\t                return true;\n\t            }\n\t            var cell = this.parent.getContentTable().rows[rIndex].cells[cIndex];\n\t            return e.action === 'enter' || e.action === 'shiftEnter' ? cell.classList.contains('e-rowcell') : true;\n\t        };\n\t        return ContentFocus;\n\t    }());\n\t    exports.ContentFocus = ContentFocus;\n\t    var HeaderFocus = (function (_super) {\n\t        __extends(HeaderFocus, _super);\n\t        function HeaderFocus(parent) {\n\t            return _super.call(this, parent) || this;\n\t        }\n\t        HeaderFocus.prototype.onClick = function (e) {\n\t            var target = e.target;\n\t            target = (target.classList.contains('e-headercell') ? target : ej2_base_1.closest(target, 'th'));\n\t            var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n\t            var val = ej2_base_1.getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n\t            if (this.matrix.inValid(val)) {\n\t                return false;\n\t            }\n\t            this.matrix.select(target.parentElement.rowIndex, target.cellIndex);\n\t        };\n\t        HeaderFocus.prototype.getFocusInfo = function () {\n\t            var info = {};\n\t            var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n\t            info.element = this.parent.getHeaderTable()\n\t                .rows[rowIndex].cells[cellIndex];\n\t            info.elementToFocus = this.getFocusable(info.element);\n\t            info.outline = !info.element.classList.contains('e-filterbarcell');\n\t            return info;\n\t        };\n\t        HeaderFocus.prototype.selector = function (row, cell) {\n\t            return (cell.visible && (cell.column.field !== undefined || cell.isTemplate)) || cell.column.type === 'checkbox';\n\t        };\n\t        HeaderFocus.prototype.jump = function (action, current) {\n\t            return action === 'downArrow' && current[0] === this.matrix.matrix.length - 1;\n\t        };\n\t        HeaderFocus.prototype.generateRows = function (rows) {\n\t            var _this = this;\n\t            var length = this.matrix.matrix.length;\n\t            if (this.parent.allowFiltering && this.parent.filterSettings.type === 'filterbar') {\n\t                this.matrix.rows = ++this.matrix.rows;\n\t                rows[0].cells.forEach(function (cell, cIndex) {\n\t                    return _this.matrix.set(length, cIndex, cell.visible && cell.column.allowFiltering !== false);\n\t                });\n\t            }\n\t        };\n\t        HeaderFocus.prototype.getInfo = function () {\n\t            return { isContent: false, isHeader: true };\n\t        };\n\t        HeaderFocus.prototype.validator = function () {\n\t            return function () { return true; };\n\t        };\n\t        HeaderFocus.prototype.shouldFocusChange = function (e) {\n\t            var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n\t            if (rIndex < 0 || cIndex < 0) {\n\t                return true;\n\t            }\n\t            var cell = this.parent.getHeaderTable().rows[rIndex].cells[cIndex];\n\t            return e.action === 'enter' ? !cell.classList.contains('e-headercell') : true;\n\t        };\n\t        return HeaderFocus;\n\t    }(ContentFocus));\n\t    exports.HeaderFocus = HeaderFocus;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PageSettings = (function (_super) {\n\t        __extends(PageSettings, _super);\n\t        function PageSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return PageSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(12)\n\t    ], PageSettings.prototype, \"pageSize\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(8)\n\t    ], PageSettings.prototype, \"pageCount\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], PageSettings.prototype, \"currentPage\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], PageSettings.prototype, \"enableQueryString\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], PageSettings.prototype, \"pageSizes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], PageSettings.prototype, \"template\", void 0);\n\t    exports.PageSettings = PageSettings;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(10), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, util_1, events, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Selection = (function () {\n\t        function Selection(parent, selectionSettings, locator) {\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRowCellIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.preventFocus = false;\n\t            this.isMultiShiftRequest = false;\n\t            this.isMultiCtrlRequest = false;\n\t            this.enableSelectMultiTouch = false;\n\t            this.persistSelection = false;\n\t            this.selectedRowState = {};\n\t            this.isBatchEdit = false;\n\t            this.prevKey = 0;\n\t            this.totalRecordsCount = 0;\n\t            this.isChkAll = false;\n\t            this.isUnChkAll = false;\n\t            this.chkAllCollec = [];\n\t            this.isCheckedOnAdd = false;\n\t            this.persistSelectedData = [];\n\t            this.selectionRequest = false;\n\t            this.parent = parent;\n\t            this.selectionSettings = selectionSettings;\n\t            this.factory = locator.getService('rendererFactory');\n\t            this.focus = locator.getService('focus');\n\t            this.addEventListener();\n\t        }\n\t        Selection.prototype.initializeSelection = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n\t        };\n\t        Selection.prototype.onActionBegin = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.onActionComplete = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.getModuleName = function () {\n\t            return 'selection';\n\t        };\n\t        Selection.prototype.destroy = function () {\n\t            this.hidePopUp();\n\t            this.clearSelection();\n\t            this.removeEventListener();\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n\t        };\n\t        Selection.prototype.isEditing = function () {\n\t            return this.parent.editSettings.mode !== 'batch' && this.parent.isEdit && !this.persistSelection;\n\t        };\n\t        Selection.prototype.selectRow = function (index, isToggle) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(index);\n\t            var selectData = gObj.getCurrentViewRecords()[index];\n\t            if (!this.isRowType() || !selectedRow || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isRowSelected = selectedRow.hasAttribute('aria-selected');\n\t            isToggle = !isToggle ? isToggle : index === this.prevRowIndex && isRowSelected;\n\t            if (!isToggle) {\n\t                this.onActionBegin({\n\t                    data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    isShiftPressed: this.isMultiShiftRequest, row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelecting);\n\t            }\n\t            this.clearRow();\n\t            if (!isToggle) {\n\t                this.updateRowSelection(selectedRow, index);\n\t                this.parent.selectedRowIndex = index;\n\t            }\n\t            this.updateRowProps(index);\n\t            if (!isToggle) {\n\t                this.onActionComplete({\n\t                    data: selectData, rowIndex: index,\n\t                    row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n\t            this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n\t            this.parent.selectedRowIndex = endIndex;\n\t        };\n\t        Selection.prototype.selectRows = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            var selectedData = gObj.getCurrentViewRecords()[rowIndexes[0]];\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n\t                data: selectedData\n\t            }, events.rowSelecting);\n\t            this.clearRow();\n\t            for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n\t                var rowIndex = rowIndexes_1[_i];\n\t                this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n\t            }\n\t            this.updateRowProps(rowIndexes[0]);\n\t            this.onActionComplete({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                data: selectedData\n\t            }, events.rowSelected);\n\t        };\n\t        Selection.prototype.addRowsToSelection = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n\t                var rowIndex = rowIndexes_2[_i];\n\t                var data = gObj.getCurrentViewRecords()[rowIndex];\n\t                var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n\t                gObj.selectedRowIndex = rowIndex;\n\t                if (isUnSelected) {\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                    this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n\t                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n\t                    selectedRow.removeAttribute('aria-selected');\n\t                    this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                }\n\t                else {\n\t                    this.onActionBegin({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                        isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n\t                    }, events.rowSelecting);\n\t                    this.updateRowSelection(selectedRow, rowIndex);\n\t                }\n\t                this.updateRowProps(rowIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex\n\t                    }, events.rowSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n\t            var indexes = [];\n\t            var _a = (startIndex < endIndex) ?\n\t                { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n\t            for (; i <= max; i++) {\n\t                indexes.push(i);\n\t            }\n\t            if (startIndex > endIndex) {\n\t                indexes.reverse();\n\t            }\n\t            return indexes;\n\t        };\n\t        Selection.prototype.clearRow = function () {\n\t            this.clearRowSelection();\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.parent.selectedRowIndex = -1;\n\t        };\n\t        Selection.prototype.updateRowProps = function (startIndex) {\n\t            this.prevRowIndex = startIndex;\n\t            this.isRowSelected = this.selectedRowIndexes.length && true;\n\t        };\n\t        Selection.prototype.updatePersistCollection = function (selectedRow, chkState) {\n\t            if (this.persistSelection && !ej2_base_2.isNullOrUndefined(selectedRow)) {\n\t                var rowObj = this.parent.getRowObjectFromUID(selectedRow.getAttribute('data-uid'));\n\t                var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n\t                if (pKey === null) {\n\t                    return;\n\t                }\n\t                rowObj.isSelected = chkState;\n\t                if (chkState) {\n\t                    this.selectedRowState[pKey] = chkState;\n\t                    if (this.selectionRequest && this.persistSelectedData.indexOf(rowObj.data) < 0) {\n\t                        this.persistSelectedData.push(rowObj.data);\n\t                    }\n\t                }\n\t                else {\n\t                    delete (this.selectedRowState[pKey]);\n\t                    if (this.selectionRequest && this.persistSelectedData.indexOf(rowObj.data) >= 0) {\n\t                        this.persistSelectedData.splice(this.persistSelectedData.indexOf(rowObj.data), 1);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.updateCheckBoxes = function (row, chkState) {\n\t            if (!ej2_base_2.isNullOrUndefined(row)) {\n\t                var chkBox = row.querySelector('.e-checkselect');\n\t                if (!ej2_base_2.isNullOrUndefined(chkBox) && this.checkedTarget !== chkBox) {\n\t                    chkBox.ej2_instances[0].setProperties({ checked: chkState });\n\t                    if (ej2_base_2.isNullOrUndefined(this.checkedTarget) || (!ej2_base_2.isNullOrUndefined(this.checkedTarget)\n\t                        && !this.checkedTarget.classList.contains('e-checkselectall'))) {\n\t                        this.setCheckAllState();\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n\t            if (!selectedRow) {\n\t                return;\n\t            }\n\t            this.selectedRowIndexes.push(startIndex);\n\t            this.selectedRecords.push(selectedRow);\n\t            selectedRow.setAttribute('aria-selected', 'true');\n\t            this.updatePersistCollection(selectedRow, true);\n\t            this.updateCheckBoxes(selectedRow, true);\n\t            this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n\t            if (!this.preventFocus) {\n\t                var target = this.focus.getPrevIndexes().cellIndex ?\n\t                    selectedRow.cells[this.focus.getPrevIndexes().cellIndex] :\n\t                    selectedRow.querySelector('.e-selectionbackground:not(.e-hide)');\n\t                if (!target) {\n\t                    return;\n\t                }\n\t                this.focus.onClick({ target: target }, true);\n\t            }\n\t        };\n\t        Selection.prototype.clearSelection = function () {\n\t            if (!this.persistSelection || (this.persistSelection && !this.parent.isEdit) ||\n\t                (!ej2_base_2.isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains('e-checkselectall'))) {\n\t                var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n\t                if (span.classList.contains('e-rowselect')) {\n\t                    span.classList.remove('e-spanclicked');\n\t                }\n\t                this.clearRowSelection();\n\t                this.clearCellSelection();\n\t                this.enableSelectMultiTouch = false;\n\t            }\n\t        };\n\t        Selection.prototype.clearRowSelection = function () {\n\t            if (this.isRowSelected) {\n\t                var rows = this.parent.getDataRows();\n\t                var data = [];\n\t                var row = [];\n\t                var rowIndex = [];\n\t                var currentViewData = this.parent.getCurrentViewRecords();\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    data.push(currentViewData[this.selectedRowIndexes[i]]);\n\t                    row.push(this.parent.getRows()[this.selectedRowIndexes[i]]);\n\t                    rowIndex.push(this.selectedRowIndexes[i]);\n\t                }\n\t                this.rowDeselect(events.rowDeselecting, rowIndex, data, row);\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    var row_1 = this.parent.getRowByIndex(this.selectedRowIndexes[i]);\n\t                    if (row_1) {\n\t                        row_1.removeAttribute('aria-selected');\n\t                    }\n\t                    this.addRemoveClassesForRow(row_1, false, true, 'e-selectionbackground', 'e-active');\n\t                    this.updatePersistCollection(row_1, false);\n\t                    this.updateCheckBoxes(row_1);\n\t                }\n\t                this.selectedRowIndexes = [];\n\t                this.selectedRecords = [];\n\t                this.isRowSelected = false;\n\t                this.parent.selectedRowIndex = undefined;\n\t                this.rowDeselect(events.rowDeselected, rowIndex, data, row);\n\t            }\n\t        };\n\t        Selection.prototype.rowDeselect = function (type, rowIndex, data, row) {\n\t            this.updatePersistCollection(row[0], false);\n\t            this.parent.trigger(type, {\n\t                rowIndex: rowIndex, data: data, row: row\n\t            });\n\t            this.updateCheckBoxes(row[0]);\n\t        };\n\t        Selection.prototype.selectCell = function (cellIndex, isToggle) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n\t            this.currentIndex = cellIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (!this.isCellType() || !selectedCell || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n\t            isToggle = !isToggle ? isToggle : !(!ej2_base_2.isUndefined(this.prevCIdxs) &&\n\t                cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n\t                isCellSelected);\n\t            if (isToggle) {\n\t                this.onActionBegin({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelecting);\n\t            }\n\t            this.clearCell();\n\t            if (isToggle) {\n\t                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t            }\n\t            this.updateCellProps(cellIndex, cellIndex);\n\t            if (isToggle) {\n\t                this.onActionComplete({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n\t            var min;\n\t            var max;\n\t            var stIndex = startIndex;\n\t            var edIndex = endIndex = endIndex ? endIndex : startIndex;\n\t            var cellIndexes;\n\t            this.currentIndex = startIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            this.clearCell();\n\t            if (startIndex.rowIndex > endIndex.rowIndex) {\n\t                var temp = startIndex;\n\t                startIndex = endIndex;\n\t                endIndex = temp;\n\t            }\n\t            for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n\t                if (this.selectionSettings.cellSelectionMode !== 'box') {\n\t                    min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n\t                    max = i === endIndex.rowIndex ? (endIndex.cellIndex) : this.getLastColIndex(i);\n\t                }\n\t                else {\n\t                    min = startIndex.cellIndex;\n\t                    max = endIndex.cellIndex;\n\t                }\n\t                cellIndexes = [];\n\t                for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(i, j);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    cellIndexes.push(j);\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                }\n\t                this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n\t            }\n\t            this.updateCellProps(stIndex, edIndex);\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.selectCells = function (rowCellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n\t            this.currentIndex = rowCellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n\t                for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                    this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n\t                }\n\t            }\n\t            this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.addCellsToSelection = function (cellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndexes[0].rowIndex, this.getColIndex(cellIndexes[0].rowIndex, cellIndexes[0].cellIndex));\n\t            var index;\n\t            this.currentIndex = cellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n\t                var cellIndex = cellIndexes_1[_i];\n\t                for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                    if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n\t                        index = i;\n\t                        break;\n\t                    }\n\t                }\n\t                var args = {\n\t                    data: selectedData, cellIndex: cellIndexes[0],\n\t                    isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                };\n\t                var isUnSelected = index > -1;\n\t                if (isUnSelected) {\n\t                    var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n\t                    if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n\t                        this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                        selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n\t                        selectedCell.classList.remove('e-cellselectionbackground');\n\t                        selectedCell.removeAttribute('aria-selected');\n\t                        this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                    }\n\t                    else {\n\t                        isUnSelected = false;\n\t                        this.onActionBegin(args, events.cellSelecting);\n\t                        this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n\t                        this.updateCellSelection(selectedCell);\n\t                        this.addAttribute(selectedCell);\n\t                    }\n\t                }\n\t                else {\n\t                    this.onActionBegin(args, events.cellSelecting);\n\t                    this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t                }\n\t                this.updateCellProps(cellIndex, cellIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n\t                        previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n\t                            undefined, previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes\n\t                    }, events.cellSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.getColIndex = function (rowIndex, index) {\n\t            var cells = this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n\t            for (var m = 0; m < cells.length; m++) {\n\t                var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n\t                if (colIndex === index) {\n\t                    return m;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Selection.prototype.getLastColIndex = function (rowIndex) {\n\t            var cells = this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n\t            return parseInt(cells[cells.length - 1].getAttribute('aria-colindex'), 10);\n\t        };\n\t        Selection.prototype.clearCell = function () {\n\t            this.clearCellSelection();\n\t        };\n\t        Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells) {\n\t            if (cells[0] && cells[0].classList.contains('e-gridchkbox')) {\n\t                this.updateCheckBoxes(ej2_base_3.closest(cells[0], 'tr'));\n\t            }\n\t            this.parent.trigger(type, {\n\t                cells: cells, data: data, cellIndexes: cellIndexes\n\t            });\n\t        };\n\t        Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n\t            if (!ej2_base_2.isNullOrUndefined(rowIndex)) {\n\t                this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            selectedCell.classList.add('e-cellselectionbackground');\n\t            if (selectedCell.classList.contains('e-gridchkbox')) {\n\t                this.updateCheckBoxes(ej2_base_3.closest(selectedCell, 'tr'), true);\n\t            }\n\t            this.addAttribute(selectedCell);\n\t        };\n\t        Selection.prototype.addAttribute = function (cell) {\n\t            this.target = cell;\n\t            cell.setAttribute('aria-selected', 'true');\n\t            if (!this.preventFocus) {\n\t                this.focus.onClick({ target: cell }, true);\n\t            }\n\t        };\n\t        Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n\t            this.prevCIdxs = startIndex;\n\t            this.prevECIdxs = endIndex;\n\t            this.isCellSelected = this.selectedRowCellIndexes.length && true;\n\t        };\n\t        Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n\t            var isRowAvail;\n\t            var index;\n\t            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n\t                    isRowAvail = true;\n\t                    index = i;\n\t                    break;\n\t                }\n\t            }\n\t            if (isRowAvail) {\n\t                if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n\t                    this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n\t                }\n\t            }\n\t            else {\n\t                this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n\t            }\n\t        };\n\t        Selection.prototype.clearCellSelection = function () {\n\t            if (this.isCellSelected) {\n\t                var gObj = this.parent;\n\t                var selectedCells = this.getSelectedCellsElement();\n\t                var rowCell = this.selectedRowCellIndexes;\n\t                var data = [];\n\t                var cells = [];\n\t                var currentViewData = gObj.getCurrentViewRecords();\n\t                for (var i = 0, len = rowCell.length; i < len; i++) {\n\t                    data.push(currentViewData[rowCell[i].rowIndex]);\n\t                    for (var j = 0, cLen = rowCell.length; j < cLen; j++) {\n\t                        cells.push(this.parent.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n\t                    }\n\t                }\n\t                this.cellDeselect(events.cellDeselecting, rowCell, data, cells);\n\t                for (var i = 0, len = selectedCells.length; i < len; i++) {\n\t                    selectedCells[i].classList.remove('e-cellselectionbackground');\n\t                    selectedCells[i].removeAttribute('aria-selected');\n\t                }\n\t                this.selectedRowCellIndexes = [];\n\t                this.isCellSelected = false;\n\t                this.cellDeselect(events.cellDeselected, rowCell, data, cells);\n\t            }\n\t        };\n\t        Selection.prototype.getSelectedCellsElement = function () {\n\t            var rows = this.parent.getDataRows();\n\t            var cells = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n\t            }\n\t            return cells;\n\t        };\n\t        Selection.prototype.mouseMoveHandler = function (e) {\n\t            e.preventDefault();\n\t            var gBRect = this.parent.element.getBoundingClientRect();\n\t            var x1 = this.x;\n\t            var y1 = this.y;\n\t            var position = util_1.getPosition(e);\n\t            var x2 = position.x - gBRect.left;\n\t            var y2 = position.y - gBRect.top;\n\t            var tmp;\n\t            var target = ej2_base_3.closest(e.target, 'tr');\n\t            this.isDragged = true;\n\t            if (!target) {\n\t                target = ej2_base_3.closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n\t            }\n\t            if (x1 > x2) {\n\t                tmp = x2;\n\t                x2 = x1;\n\t                x1 = tmp;\n\t            }\n\t            if (y1 > y2) {\n\t                tmp = y2;\n\t                y2 = y1;\n\t                y1 = tmp;\n\t            }\n\t            this.element.style.left = x1 + 'px';\n\t            this.element.style.top = y1 + 'px';\n\t            this.element.style.width = x2 - x1 + 'px';\n\t            this.element.style.height = y2 - y1 + 'px';\n\t            if (target && !e.ctrlKey && !e.shiftKey) {\n\t                var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n\t                this.selectRowsByRange(this.startIndex, rowIndex);\n\t            }\n\t        };\n\t        Selection.prototype.mouseUpHandler = function (e) {\n\t            document.body.classList.remove('e-disableuserselect');\n\t            ej2_base_3.remove(this.element);\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n\t            ej2_base_1.EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.mouseDownHandler = function (e) {\n\t            var target = e.target;\n\t            var gridElement = util_1.parentsUntil(target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.parent.element.id) {\n\t                return;\n\t            }\n\t            if (e.shiftKey || e.ctrlKey) {\n\t                e.preventDefault();\n\t            }\n\t            if (this.parent.allowRowDragAndDrop && target.classList.contains('e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n\t                if (!this.isRowType() || this.isSingleSel() || ej2_base_3.closest(target, 'td').classList.contains('e-selectionbackground')) {\n\t                    this.isDragged = false;\n\t                    return;\n\t                }\n\t                document.body.classList.add('e-disableuserselect');\n\t                var tr = ej2_base_3.closest(e.target, 'tr');\n\t                var gBRect = this.parent.element.getBoundingClientRect();\n\t                var postion = util_1.getPosition(e);\n\t                this.startIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t                this.x = postion.x - gBRect.left;\n\t                this.y = postion.y - gBRect.top;\n\t                this.element = ej2_base_3.createElement('div', { className: 'e-griddragarea' });\n\t                this.parent.getContent().appendChild(this.element);\n\t                ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousemove', this.mouseMoveHandler, this);\n\t                ej2_base_1.EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n\t            }\n\t        };\n\t        Selection.prototype.clearSelAfterRefresh = function (e) {\n\t            if (e.requestType !== 'virtualscroll' && !this.persistSelection) {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        Selection.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeSelection, this);\n\t            this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.cellFocused, this.onCellFocused, this);\n\t            this.parent.on(events.dataReady, this.dataReady, this);\n\t            this.parent.on(events.dataReady, this.clearSelAfterRefresh, this);\n\t            this.parent.on(events.columnPositionChanged, this.clearSelection, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.addEventListener(events.dataBound, this.onDataBound.bind(this));\n\t            this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n\t            this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n\t        };\n\t        Selection.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeSelection);\n\t            this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.cellFocused, this.onCellFocused);\n\t            this.parent.off(events.dataReady, this.dataReady);\n\t            this.parent.off(events.dataReady, this.clearSelAfterRefresh);\n\t            this.parent.off(events.columnPositionChanged, this.clearSelection);\n\t            this.parent.removeEventListener(events.dataBound, this.onDataBound);\n\t            this.parent.removeEventListener(events.actionBegin, this.actionBegin);\n\t            this.parent.removeEventListener(events.actionComplete, this.actionComplete);\n\t        };\n\t        Selection.prototype.dataReady = function (e) {\n\t            if (e.requestType !== 'virtualscroll' && !this.persistSelection) {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        ;\n\t        Selection.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'single') {\n\t                if (this.selectedRowCellIndexes.length > 1) {\n\t                    this.clearCellSelection();\n\t                }\n\t                if (this.selectedRowIndexes.length > 1) {\n\t                    this.clearRowSelection();\n\t                }\n\t                this.enableSelectMultiTouch = false;\n\t                this.hidePopUp();\n\t            }\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.mode) ||\n\t                !ej2_base_2.isNullOrUndefined(e.properties.cellSelectionMode)) {\n\t                this.clearSelection();\n\t            }\n\t            this.checkBoxSelectionChanged();\n\t        };\n\t        Selection.prototype.hidePopUp = function () {\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            this.selectRow(this.parent.selectedRowIndex);\n\t            this.checkBoxSelectionChanged();\n\t        };\n\t        Selection.prototype.checkBoxSelectionChanged = function () {\n\t            var isCheckColumn = false;\n\t            for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.type === 'checkbox') {\n\t                    this.isChkSelection = true;\n\t                    this.parent.selectionSettings.type = 'multiple';\n\t                    this.chkField = col.field;\n\t                    this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n\t                    if (ej2_base_2.isNullOrUndefined(this.totalRecordsCount)) {\n\t                        this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n\t                    }\n\t                    this.chkAllBox = this.parent.element.querySelector('.e-checkselectall');\n\t                    this.chkAllObj = this.chkAllBox;\n\t                    isCheckColumn = true;\n\t                    this.parent.element.classList.add('e-checkboxselection');\n\t                    break;\n\t                }\n\t            }\n\t            if (!isCheckColumn) {\n\t                this.isChkSelection = false;\n\t                this.chkField = '';\n\t                this.chkAllBox = this.chkAllObj = null;\n\t                this.parent.element.classList.remove('e-checkboxselection');\n\t            }\n\t            if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {\n\t                this.persistSelection = true;\n\t                this.parent.element.classList.add('e-persistselection');\n\t                this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n\t                if (!this.parent.enableVirtualization && this.chkField && Object.keys(this.selectedRowState).length === 0) {\n\t                    var data = this.parent.getDataModule();\n\t                    var query = new ej2_data_1.Query().where(this.chkField, 'equal', true);\n\t                    var dataManager = data.getData({}, query);\n\t                    var proxy_1 = this;\n\t                    this.parent.showSpinner();\n\t                    dataManager.then(function (e) {\n\t                        proxy_1.dataSuccess(e.result);\n\t                        proxy_1.refreshPersistSelection();\n\t                        proxy_1.parent.hideSpinner();\n\t                    });\n\t                }\n\t            }\n\t            else {\n\t                this.persistSelection = false;\n\t                this.parent.element.classList.remove('e-persistselection');\n\t                this.selectedRowState = {};\n\t            }\n\t        };\n\t        Selection.prototype.dataSuccess = function (res) {\n\t            for (var i = 0; i < res.length; i++) {\n\t                if (ej2_base_2.isNullOrUndefined(this.selectedRowState[res[i][this.primaryKey]]) && res[i][this.chkField]) {\n\t                    this.selectedRowState[res[i][this.primaryKey]] = res[i][this.chkField];\n\t                }\n\t            }\n\t            this.persistSelectedData = res;\n\t        };\n\t        Selection.prototype.refreshPersistSelection = function () {\n\t            this.chkAllBox = this.parent.element.querySelector('.e-checkselectall');\n\t            this.chkAllObj = this.chkAllBox;\n\t            var rows = this.parent.getRows();\n\t            if (rows.length > 0 && (this.persistSelection || this.chkField)) {\n\t                var indexes = [];\n\t                for (var j = 0; j < rows.length; j++) {\n\t                    var rowObj = this.parent.getRowObjectFromUID(rows[j].getAttribute('data-uid'));\n\t                    var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n\t                    if (pKey === null) {\n\t                        return;\n\t                    }\n\t                    var checkState = void 0;\n\t                    if (this.selectedRowState[pKey] || (this.isChkAll && this.chkAllCollec.indexOf(pKey) < 0)\n\t                        || (this.isUnChkAll && this.chkAllCollec.indexOf(pKey) > 0) || (this.chkField && rowObj.data[this.chkField])) {\n\t                        indexes.push(parseInt(rows[j].getAttribute('aria-rowindex'), 10));\n\t                        checkState = true;\n\t                    }\n\t                    else {\n\t                        var chkBox = rows[j].querySelector('.e-checkselect');\n\t                        checkState = false;\n\t                        if (this.checkedTarget !== chkBox && this.isChkSelection) {\n\t                            chkBox.ej2_instances[0].setProperties({ checked: checkState });\n\t                        }\n\t                    }\n\t                    this.updatePersistCollection(rows[j], checkState);\n\t                }\n\t                if (this.selectionSettings.type === 'multiple') {\n\t                    this.selectRows(indexes);\n\t                }\n\t                else {\n\t                    this.clearSelection();\n\t                    if (indexes.length > 0) {\n\t                        this.selectRow(indexes[0], true);\n\t                    }\n\t                }\n\t            }\n\t            if (this.isChkSelection) {\n\t                this.setCheckAllState();\n\t            }\n\t        };\n\t        Selection.prototype.actionBegin = function (e) {\n\t            if (e.requestType === 'save' && this.persistSelection) {\n\t                var editChkBox = this.parent.element.querySelector('.e-edit-checkselect');\n\t                if (!ej2_base_2.isNullOrUndefined(editChkBox)) {\n\t                    var row = ej2_base_3.closest(editChkBox, '.e-editedrow');\n\t                    if (row) {\n\t                        if (this.parent.editSettings.mode === 'dialog') {\n\t                            row = this.parent.element.querySelector('.e-dlgeditrow');\n\t                        }\n\t                        var rowObj = this.parent.getRowObjectFromUID(row.getAttribute('data-uid'));\n\t                        if (!rowObj) {\n\t                            return;\n\t                        }\n\t                        this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = editChkBox.checked;\n\t                    }\n\t                    else {\n\t                        this.isCheckedOnAdd = editChkBox.checked;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.actionComplete = function (e) {\n\t            if (e.requestType === 'save' && this.persistSelection) {\n\t                if (e.action === 'add' && this.isCheckedOnAdd) {\n\t                    var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute('data-uid'));\n\t                    this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = this.isCheckedOnAdd;\n\t                }\n\t                this.refreshPersistSelection();\n\t            }\n\t        };\n\t        Selection.prototype.onDataBound = function () {\n\t            if (this.persistSelection || this.chkField) {\n\t                if (this.parent.enableVirtualization) {\n\t                    var records = this.parent.getCurrentViewRecords();\n\t                    this.dataSuccess(records);\n\t                }\n\t                this.refreshPersistSelection();\n\t            }\n\t        };\n\t        Selection.prototype.checkSelectAllAction = function (checkState) {\n\t            var editForm = this.parent.element.querySelector('.e-gridform');\n\t            this.checkedTarget = this.chkAllBox;\n\t            if (checkState) {\n\t                this.selectRowsByRange(0, this.parent.getCurrentViewRecords().length);\n\t                this.isChkAll = true;\n\t                this.isUnChkAll = false;\n\t            }\n\t            else {\n\t                this.clearSelection();\n\t                this.isUnChkAll = true;\n\t                this.isChkAll = false;\n\t            }\n\t            this.chkAllCollec = [];\n\t            if (this.persistSelection) {\n\t                var rows = this.parent.getRows();\n\t                for (var i = 0; i < rows.length; i++) {\n\t                    this.updatePersistCollection(rows[i], checkState);\n\t                }\n\t                if (this.isUnChkAll) {\n\t                    this.selectedRowState = {};\n\t                    this.persistSelectedData = [];\n\t                }\n\t            }\n\t            if (!ej2_base_2.isNullOrUndefined(editForm)) {\n\t                var editChkBox = editForm.querySelector('.e-edit-checkselect');\n\t                editChkBox.ej2_instances[0].setProperties({ checked: checkState });\n\t            }\n\t        };\n\t        Selection.prototype.checkSelectAll = function (checkBox) {\n\t            var checkObj = checkBox;\n\t            this.checkSelectAllAction(checkBox.checked);\n\t            this.target = null;\n\t            this.triggerChkChangeEvent(checkBox, checkBox.checked);\n\t        };\n\t        Selection.prototype.checkSelect = function (checkBox) {\n\t            var target = ej2_base_3.closest(this.checkedTarget, '.e-rowcell');\n\t            var checkObj = checkBox;\n\t            this.isMultiCtrlRequest = true;\n\t            var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t            if (this.persistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n\t                ++rIndex;\n\t            }\n\t            this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n\t            this.moveIntoUncheckCollection(ej2_base_3.closest(target, '.e-row'));\n\t            this.setCheckAllState();\n\t            this.isMultiCtrlRequest = false;\n\t            this.triggerChkChangeEvent(checkBox, checkBox.checked);\n\t        };\n\t        Selection.prototype.moveIntoUncheckCollection = function (row) {\n\t            if (this.isChkAll || this.isUnChkAll) {\n\t                var rowObj = this.parent.getRowObjectFromUID(row.getAttribute('data-uid'));\n\t                var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n\t                if (!pKey) {\n\t                    return;\n\t                }\n\t                if (this.chkAllCollec.indexOf(pKey) < 0) {\n\t                    this.chkAllCollec.push(pKey);\n\t                }\n\t                else {\n\t                    this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.triggerChkChangeEvent = function (checkBox, checkState) {\n\t            this.parent.trigger(events.checkBoxChange, {\n\t                checked: checkState, selectedRowIndexes: this.parent.getSelectedRowIndexes(),\n\t                target: checkBox\n\t            });\n\t            if (!this.parent.isEdit) {\n\t                this.checkedTarget = null;\n\t            }\n\t        };\n\t        Selection.prototype.setCheckAllState = function () {\n\t            if (this.isChkSelection) {\n\t                var checkedLen = Object.keys(this.selectedRowState).length;\n\t                if (!this.persistSelection) {\n\t                    checkedLen = this.selectedRecords.length;\n\t                    this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n\t                }\n\t                if (checkedLen === this.totalRecordsCount || (this.persistSelection && this.parent.allowPaging\n\t                    && this.isChkAll && this.chkAllCollec.length === 0)) {\n\t                    this.chkAllObj.ej2_instances[0].setProperties({ checked: true });\n\t                }\n\t                else if (checkedLen === 0 || this.parent.getCurrentViewRecords().length === 0) {\n\t                    this.chkAllObj.ej2_instances[0].setProperties({ indeterminate: false, checked: false });\n\t                }\n\t                else {\n\t                    this.chkAllObj.ej2_instances[0].setProperties({ indeterminate: true });\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch;\n\t            this.isMultiShiftRequest = e.shiftKey;\n\t            this.popUpClickHandler(e);\n\t            var chkSelect = false;\n\t            this.preventFocus = true;\n\t            var checkBox;\n\t            this.selectionRequest = true;\n\t            if (target.classList.contains('e-checkselect') || target.classList.contains('e-checkselectall')) {\n\t                checkBox = target;\n\t                chkSelect = true;\n\t            }\n\t            if (target && (target.classList.contains('e-rowcell') && !this.parent.selectionSettings.checkboxOnly) || chkSelect) {\n\t                if (this.isChkSelection) {\n\t                    this.isMultiCtrlRequest = true;\n\t                }\n\t                this.target = target;\n\t                if (!ej2_base_2.isNullOrUndefined(checkBox)) {\n\t                    this.checkedTarget = checkBox;\n\t                    if (checkBox.classList.contains('e-checkselectall')) {\n\t                        this.checkSelectAll(checkBox);\n\t                    }\n\t                    else {\n\t                        this.checkSelect(checkBox);\n\t                        this.target = ej2_base_3.closest(target, '.e-rowcell');\n\t                    }\n\t                }\n\t                else {\n\t                    var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t                    if (this.persistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n\t                        ++rIndex;\n\t                    }\n\t                    this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n\t                    if (this.isChkSelection) {\n\t                        this.moveIntoUncheckCollection(ej2_base_3.closest(target, '.e-row'));\n\t                        this.setCheckAllState();\n\t                    }\n\t                }\n\t                if (!this.isChkSelection && ej2_base_1.Browser.isDevice && this.parent.selectionSettings.type === 'multiple') {\n\t                    this.showPopup(e);\n\t                }\n\t            }\n\t            this.isMultiCtrlRequest = false;\n\t            this.isMultiShiftRequest = false;\n\t            this.selectionRequest = false;\n\t            this.preventFocus = false;\n\t        };\n\t        Selection.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-rowselect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSelectMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSelectMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.showPopup = function (e) {\n\t            util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n\t                (this.selectionSettings.type === 'multiple' &&\n\t                    (this.selectedRecords.length > 1 || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n\t        };\n\t        Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n\t            if (!this.isMultiCtrlRequest && !this.isMultiShiftRequest) {\n\t                if (!this.isDragged) {\n\t                    this.selectRow(rowIndex, true);\n\t                }\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t            else if (this.isMultiShiftRequest) {\n\t                this.selectRowsByRange(ej2_base_2.isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n\t                this.selectCellsByRange(ej2_base_2.isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            else {\n\t                this.addRowsToSelection([rowIndex]);\n\t                this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n\t            }\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.onCellFocused = function (e) {\n\t            var clear = ((e.container.isHeader && e.isJump) || (e.container.isContent && !e.container.isSelectable)) &&\n\t                !(e.byKey && e.keyArgs.action === 'space');\n\t            var headerAction = e.container.isHeader && !(e.byKey && e.keyArgs.action === 'space');\n\t            if (!e.byKey || clear) {\n\t                if (clear) {\n\t                    this.clearSelection();\n\t                }\n\t                return;\n\t            }\n\t            var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];\n\t            var prev = this.focus.getPrevIndexes();\n\t            if (headerAction || (['ctrlPlusA', 'escape'].indexOf(e.keyArgs.action) === -1 && e.keyArgs.action !== 'space' &&\n\t                rowIndex === prev.rowIndex && cellIndex === prev.cellIndex)) {\n\t                return;\n\t            }\n\t            this.preventFocus = true;\n\t            switch (e.keyArgs.action) {\n\t                case 'downArrow':\n\t                case 'upArrow':\n\t                case 'enter':\n\t                case 'shiftEnter':\n\t                    this.applyDownUpKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'rightArrow':\n\t                case 'leftArrow':\n\t                    this.applyRightLeftKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'shiftDown':\n\t                case 'shiftUp':\n\t                    this.shiftDownKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'shiftLeft':\n\t                case 'shiftRight':\n\t                    this.applyShiftLeftRightKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'home':\n\t                case 'end':\n\t                    this.applyHomeEndKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'ctrlHome':\n\t                case 'ctrlEnd':\n\t                    this.applyCtrlHomeEndKey(rowIndex, cellIndex);\n\t                    break;\n\t                case 'escape':\n\t                    this.clearSelection();\n\t                    break;\n\t                case 'ctrlPlusA':\n\t                    this.ctrlPlusA();\n\t                    break;\n\t                case 'space':\n\t                    this.selectionRequest = true;\n\t                    var target = e.element;\n\t                    if (target.classList.contains('e-checkselectall')) {\n\t                        this.checkedTarget = target;\n\t                        this.checkSelectAll(this.checkedTarget);\n\t                    }\n\t                    else {\n\t                        if (target.classList.contains('e-checkselect')) {\n\t                            this.checkedTarget = target;\n\t                            this.checkSelect(this.checkedTarget);\n\t                        }\n\t                    }\n\t                    this.selectionRequest = false;\n\t                    break;\n\t            }\n\t            this.preventFocus = false;\n\t        };\n\t        Selection.prototype.ctrlPlusA = function () {\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                this.selectRowsByRange(0, this.parent.getRows().length - 1);\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n\t            }\n\t        };\n\t        Selection.prototype.applyDownUpKey = function (rowIndex, cellIndex) {\n\t            var gObj = this.parent;\n\t            if (this.isChkSelection && this.isChkAll) {\n\t                this.checkSelectAllAction(false);\n\t                this.checkedTarget = null;\n\t            }\n\t            if (this.isRowType()) {\n\t                this.selectRow(rowIndex, true);\n\t                this.applyUpDown(gObj.selectedRowIndex);\n\t            }\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t        };\n\t        Selection.prototype.applyUpDown = function (rowIndex) {\n\t            if (rowIndex < 0) {\n\t                return;\n\t            }\n\t            if (!this.target) {\n\t                this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];\n\t            }\n\t            var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n\t            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n\t            this.addAttribute(this.target);\n\t        };\n\t        Selection.prototype.applyRightLeftKey = function (rowIndex, cellIndex) {\n\t            var gObj = this.parent;\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t                this.addAttribute(this.target);\n\t            }\n\t        };\n\t        Selection.prototype.applyHomeEndKey = function (rowIndex, cellIndex) {\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t            else {\n\t                this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n\t            }\n\t        };\n\t        Selection.prototype.shiftDownKey = function (rowIndex, cellIndex) {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                if (!ej2_base_2.isUndefined(this.prevRowIndex)) {\n\t                    this.selectRowsByRange(this.prevRowIndex, rowIndex);\n\t                    this.applyUpDown(rowIndex);\n\t                }\n\t                else {\n\t                    this.selectRow(0, true);\n\t                }\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.applyShiftLeftRightKey = function (rowIndex, cellIndex) {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            this.selectCellsByRange(this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, cellIndex) {\n\t            if (this.isRowType()) {\n\t                this.selectRow(rowIndex, true);\n\t                this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n\t            }\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t        };\n\t        Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n\t            var args = [];\n\t            for (var _i = 3; _i < arguments.length; _i++) {\n\t                args[_i - 3] = arguments[_i];\n\t            }\n\t            if (row) {\n\t                var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n\t                var cell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n\t                if (cell) {\n\t                    cells.push(cell);\n\t                }\n\t                util_1.addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));\n\t            }\n\t            this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n\t        };\n\t        Selection.prototype.isRowType = function () {\n\t            return this.selectionSettings.mode === 'row' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isCellType = function () {\n\t            return this.selectionSettings.mode === 'cell' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isSingleSel = function () {\n\t            return this.selectionSettings.type === 'single';\n\t        };\n\t        Selection.prototype.getRenderer = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.contentRenderer)) {\n\t                this.contentRenderer = this.factory.getRenderer(enum_1.RenderType.Content);\n\t            }\n\t            return this.contentRenderer;\n\t        };\n\t        Selection.prototype.getSelectedRecords = function () {\n\t            var selectedData = [];\n\t            if (!this.selectionSettings.persistSelection) {\n\t                selectedData = this.parent.getRowsObject().filter(function (row) { return row.isSelected; })\n\t                    .map(function (m) { return m.data; });\n\t            }\n\t            else {\n\t                selectedData = this.persistSelectedData;\n\t            }\n\t            return selectedData;\n\t        };\n\t        return Selection;\n\t    }());\n\t    exports.Selection = Selection;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Search = (function () {\n\t        function Search(parent) {\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        Search.prototype.search = function (searchString) {\n\t            var gObj = this.parent;\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n\t                return;\n\t            }\n\t            searchString = searchString.toLowerCase();\n\t            if (searchString !== gObj.searchSettings.key) {\n\t                gObj.searchSettings.key = searchString;\n\t                gObj.dataBind();\n\t            }\n\t        };\n\t        Search.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.searchComplete, this.onActionComplete, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        };\n\t        Search.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.searchComplete, this.onActionComplete);\n\t            this.parent.off(events.destroy, this.destroy);\n\t        };\n\t        Search.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        Search.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(e.properties.key)) {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n\t                });\n\t            }\n\t            else {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin\n\t                });\n\t            }\n\t        };\n\t        Search.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n\t            }));\n\t        };\n\t        Search.prototype.getModuleName = function () {\n\t            return 'search';\n\t        };\n\t        return Search;\n\t    }());\n\t    exports.Search = Search;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ShowHide = (function () {\n\t        function ShowHide(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ShowHide.prototype.show = function (columnName, showBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, showBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = true;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.hide = function (columnName, hideBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, hideBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = false;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.getToggleFields = function (key) {\n\t            var finalized = [];\n\t            if (typeof key === 'string') {\n\t                finalized = [key];\n\t            }\n\t            else {\n\t                finalized = key;\n\t            }\n\t            return finalized;\n\t        };\n\t        ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n\t            var _this = this;\n\t            var columns = util_1.iterateArrayOrObject(keys, function (key, index) {\n\t                return util_1.iterateArrayOrObject(_this.parent.getColumns(), function (item, index) {\n\t                    if (item[getKeyBy] === key) {\n\t                        return item;\n\t                    }\n\t                    return undefined;\n\t                })[0];\n\t            });\n\t            return columns;\n\t        };\n\t        ShowHide.prototype.setVisible = function (columns) {\n\t            columns = ej2_base_1.isNullOrUndefined(columns) ? this.parent.getColumns() : columns;\n\t            this.parent.notify(events.columnVisibilityChanged, columns);\n\t        };\n\t        return ShowHide;\n\t    }());\n\t    exports.ShowHide = ShowHide;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(39)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, constant_1, width_controller_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Scroll = (function () {\n\t        function Scroll(parent) {\n\t            this.lastScrollTop = 0;\n\t            this.previousValues = { top: 0, left: 0 };\n\t            this.oneTimeReady = true;\n\t            this.parent = parent;\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Scroll.prototype.getModuleName = function () {\n\t            return 'scroll';\n\t        };\n\t        Scroll.prototype.setWidth = function () {\n\t            this.parent.element.style.width = ej2_base_3.formatUnit(this.parent.width);\n\t            if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n\t                this.parent.toolbarModule.toolbar.element) {\n\t                this.parent.toolbarModule.toolbar.refreshOverflow();\n\t            }\n\t        };\n\t        Scroll.prototype.setHeight = function () {\n\t            var mHdrHeight = 0;\n\t            var content = this.parent.getContent().firstChild;\n\t            if (this.parent.frozenRows) {\n\t                mHdrHeight =\n\t                    this.parent.getHeaderContent().querySelector('tbody').offsetHeight;\n\t                content.style.height = ej2_base_3.formatUnit(this.parent.height - mHdrHeight);\n\t            }\n\t            else {\n\t                content.style.height = ej2_base_3.formatUnit(this.parent.height);\n\t            }\n\t            this.ensureOverflow(content);\n\t        };\n\t        Scroll.prototype.setPadding = function () {\n\t            var content = this.parent.getHeaderContent();\n\t            var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n\t            var cssProps = this.getCssProperties();\n\t            content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n\t            content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n\t        };\n\t        Scroll.prototype.removePadding = function (rtl) {\n\t            var cssProps = this.getCssProperties(rtl);\n\t            this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n\t            this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n\t        };\n\t        Scroll.prototype.refresh = function () {\n\t            if (this.parent.height !== '100%') {\n\t                return;\n\t            }\n\t            var content = this.parent.getContent();\n\t            this.parent.element.style.height = '100%';\n\t            var height = this.widthService.getSiblingsHeight(content);\n\t            content.style.height = 'calc(100% - ' + height + 'px)';\n\t        };\n\t        Scroll.prototype.getThreshold = function () {\n\t            var appName = ej2_base_1.Browser.info.name;\n\t            if (appName === 'mozilla') {\n\t                return 0.5;\n\t            }\n\t            return 1;\n\t        };\n\t        Scroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.contentReady, this.wireEvents, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Scroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.contentReady, this.wireEvents);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Scroll.prototype.onContentScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            var isHeader = element.classList.contains('e-headercontent');\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var target = e.target;\n\t                var left = target.scrollLeft;\n\t                var sLimit = target.scrollWidth;\n\t                var isFooter = target.classList.contains('e-summarycontent');\n\t                if (_this.previousValues.left === left) {\n\t                    _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n\t                    return;\n\t                }\n\t                element.scrollLeft = left;\n\t                if (isFooter) {\n\t                    _this.header.scrollLeft = left;\n\t                }\n\t                _this.previousValues.left = left;\n\t                _this.parent.notify(constant_1.scroll, { left: left });\n\t            };\n\t        };\n\t        Scroll.prototype.onFreezeContentScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var target = e.target;\n\t                var top = target.scrollTop;\n\t                if (_this.previousValues.top === top) {\n\t                    return;\n\t                }\n\t                element.scrollTop = top;\n\t                _this.previousValues.top = top;\n\t                if (_this.parent.isDestroyed) {\n\t                    return;\n\t                }\n\t            };\n\t        };\n\t        Scroll.prototype.onWheelScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var top = element.scrollTop + e.deltaY;\n\t                if (_this.previousValues.top === top) {\n\t                    return;\n\t                }\n\t                e.preventDefault();\n\t                _this.parent.getContent().querySelector('.e-frozencontent').scrollTop = top;\n\t                element.scrollTop = top;\n\t                _this.previousValues.top = top;\n\t            };\n\t        };\n\t        Scroll.prototype.onTouchScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            return function (e) {\n\t                var pageY = _this.getPointY(e);\n\t                var top = element.scrollTop + (_this.pageY - pageY);\n\t                if (_this.previousValues.top === top) {\n\t                    return;\n\t                }\n\t                e.preventDefault();\n\t                _this.parent.getContent().querySelector('.e-frozencontent').scrollTop = top;\n\t                element.scrollTop = top;\n\t                _this.pageY = pageY;\n\t                _this.previousValues.top = top;\n\t            };\n\t        };\n\t        Scroll.prototype.setPageY = function () {\n\t            var _this = this;\n\t            return function (e) {\n\t                _this.pageY = _this.getPointY(e);\n\t            };\n\t        };\n\t        Scroll.prototype.getPointY = function (e) {\n\t            if (e.touches && e.touches.length) {\n\t                return e.touches[0].pageY;\n\t            }\n\t            else {\n\t                return e.pageY;\n\t            }\n\t        };\n\t        Scroll.prototype.wireEvents = function () {\n\t            if (this.oneTimeReady) {\n\t                this.content = this.parent.getContent().firstChild;\n\t                this.header = this.parent.getHeaderContent().firstChild;\n\t                var mCont = this.content.querySelector('.e-movablecontent');\n\t                var fCont = this.content.querySelector('.e-frozencontent');\n\t                var mHdr = this.header.querySelector('.e-movableheader');\n\t                if (this.parent.frozenColumns) {\n\t                    ej2_base_1.EventHandler.add(mCont, 'scroll', this.onContentScroll(mHdr), this);\n\t                    ej2_base_1.EventHandler.add(mCont, 'scroll', this.onFreezeContentScroll(fCont), this);\n\t                    ej2_base_1.EventHandler.add(fCont, 'scroll', this.onFreezeContentScroll(mCont), this);\n\t                    ej2_base_1.EventHandler.add(mHdr, 'scroll', this.onContentScroll(mCont), this);\n\t                    ej2_base_1.EventHandler.add(fCont, 'wheel', this.onWheelScroll(mCont), this);\n\t                    ej2_base_1.EventHandler.add(fCont, 'touchstart', this.setPageY(), this);\n\t                    ej2_base_1.EventHandler.add(fCont, 'touchmove', this.onTouchScroll(mCont), this);\n\t                }\n\t                else {\n\t                    ej2_base_1.EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n\t                    ej2_base_1.EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n\t                }\n\t                if (this.parent.aggregates.length) {\n\t                    ej2_base_1.EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n\t                }\n\t                this.refresh();\n\t                this.oneTimeReady = false;\n\t            }\n\t            var table = this.parent.getContentTable();\n\t            if (table.scrollHeight < this.parent.getContent().clientHeight) {\n\t                ej2_base_2.addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n\t            }\n\t            if (!this.parent.enableVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t                this.content.scrollTop = this.previousValues.top;\n\t            }\n\t            if (!this.parent.enableColumnVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t            }\n\t        };\n\t        Scroll.prototype.getCssProperties = function (rtl) {\n\t            var css = {};\n\t            var enableRtl = ej2_base_3.isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n\t            css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n\t            css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n\t            return css;\n\t        };\n\t        Scroll.prototype.ensureOverflow = function (content) {\n\t            if (this.parent.frozenColumns) {\n\t                content.querySelector('.e-movablecontent').style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n\t            }\n\t            else {\n\t                content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n\t            }\n\t        };\n\t        Scroll.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            this.setPadding();\n\t            this.oneTimeReady = true;\n\t            if (this.parent.height === 'auto') {\n\t                this.removePadding();\n\t            }\n\t            this.wireEvents();\n\t            this.setHeight();\n\t            this.setWidth();\n\t        };\n\t        Scroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.removePadding();\n\t            ej2_base_2.removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n\t            ej2_base_2.removeClass([this.parent.getContent().firstChild], 'e-content');\n\t            this.parent.getContent().firstChild.style.height = '';\n\t            this.parent.element.style.width = '';\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n\t        };\n\t        Scroll.getScrollBarWidth = function () {\n\t            return util_1.getScrollBarWidth();\n\t        };\n\t        return Scroll;\n\t    }());\n\t    exports.Scroll = Scroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Print = (function () {\n\t        function Print(parent, scrollModule) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.contentReady.bind(this));\n\t            this.scrollModule = scrollModule;\n\t        }\n\t        Print.prototype.print = function () {\n\t            var gObj = this.parent;\n\t            this.isPrinting = true;\n\t            this.element = gObj.element.cloneNode(true);\n\t            this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n\t            this.printWindow.moveTo(0, 0);\n\t            this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n\t            if (gObj.allowPaging) {\n\t                if (gObj.printMode === 'currentpage') {\n\t                    this.element.querySelector('.e-gridpager').style.display = 'none';\n\t                    this.contentReady();\n\t                }\n\t                else {\n\t                    this.isPagerDisabled = true;\n\t                    gObj.allowPaging = false;\n\t                    gObj.dataBind();\n\t                }\n\t            }\n\t            else {\n\t                this.contentReady();\n\t            }\n\t        };\n\t        Print.prototype.contentReady = function () {\n\t            var gObj = this.parent;\n\t            if (!this.isPrinting) {\n\t                return;\n\t            }\n\t            if (this.isPagerDisabled) {\n\t                this.element = gObj.element.cloneNode(true);\n\t                this.isPagerDisabled = false;\n\t                gObj.allowPaging = true;\n\t            }\n\t            if (gObj.height !== 'auto') {\n\t                var cssProps = this.scrollModule.getCssProperties();\n\t                var contentDiv = this.element.querySelector('.e-content');\n\t                var headerDiv = this.element.querySelector('.e-gridheader');\n\t                contentDiv.style.height = 'auto';\n\t                contentDiv.style.overflowY = 'auto';\n\t                headerDiv.style[cssProps.padding] = '';\n\t                headerDiv.firstElementChild.style[cssProps.border] = '';\n\t            }\n\t            if (gObj.allowGrouping) {\n\t                if (!gObj.groupSettings.columns.length) {\n\t                    this.element.querySelector('.e-groupdroparea').style.display = 'none';\n\t                }\n\t                else {\n\t                    this.removeColGroup(gObj.groupSettings.columns.length);\n\t                    util_1.removeElement(this.element, '.e-grouptopleftcell');\n\t                    util_1.removeElement(this.element, '.e-recordpluscollapse');\n\t                    util_1.removeElement(this.element, '.e-indentcell');\n\t                    util_1.removeElement(this.element, '.e-recordplusexpand');\n\t                }\n\t            }\n\t            if (gObj.toolbar) {\n\t                this.element.querySelector('.e-toolbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowFiltering && gObj.filterSettings.type === 'filterbar') {\n\t                this.element.querySelector('.e-filterbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowSelection) {\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-active'), 'e-active');\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-cellselection1background'), 'e-cellselection1background');\n\t            }\n\t            var args = {\n\t                requestType: 'print', element: this.element,\n\t                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]')\n\t            };\n\t            gObj.trigger(events.beforePrint, args);\n\t            ej2_base_2.print(this.element, this.printWindow);\n\t            this.isPrinting = false;\n\t            gObj.trigger(events.printComplete, args);\n\t        };\n\t        Print.prototype.removeColGroup = function (depth) {\n\t            var groupCaption = this.element.querySelectorAll('.e-groupcaption');\n\t            var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n\t            for (var i = 0; i < groupCaption.length; i++) {\n\t                groupCaption[i].setAttribute('colspan', colSpan);\n\t            }\n\t            var colGroups = this.element.querySelectorAll('colgroup');\n\t            for (var i = 0; i < colGroups.length; i++) {\n\t                for (var j = 0; j < depth; j++) {\n\t                    colGroups[i].childNodes[j].style.display = 'none';\n\t                }\n\t            }\n\t        };\n\t        Print.prototype.destroy = function () {\n\t        };\n\t        Print.prototype.getModuleName = function () {\n\t            return 'print';\n\t        };\n\t        return Print;\n\t    }());\n\t    exports.Print = Print;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(14), __webpack_require__(5), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, ej2_base_3, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AggregateColumn = (function (_super) {\n\t        __extends(AggregateColumn, _super);\n\t        function AggregateColumn() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.templateFn = {};\n\t            return _this;\n\t        }\n\t        AggregateColumn.prototype.setFormatter = function () {\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (this.format && (this.format.skeleton || this.format.format)) {\n\t                this.formatFn = valueFormatter.getFormatFunction(this.format);\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        AggregateColumn.prototype.setTemplate = function (helper) {\n\t            if (helper === void 0) { helper = {}; }\n\t            if (this.footerTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = { fn: ej2_base_1.compile(this.footerTemplate, helper),\n\t                    property: 'footerTemplate' };\n\t            }\n\t            if (this.groupFooterTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = { fn: ej2_base_1.compile(this.groupFooterTemplate, helper),\n\t                    property: 'groupFooterTemplate' };\n\t            }\n\t            if (this.groupCaptionTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = { fn: ej2_base_1.compile(this.groupCaptionTemplate, helper),\n\t                    property: 'groupCaptionTemplate' };\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getTemplate = function (type) {\n\t            return this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, type)];\n\t        };\n\t        return AggregateColumn;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"columnName\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"format\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n\t    exports.AggregateColumn = AggregateColumn;\n\t    var AggregateRow = (function (_super) {\n\t        __extends(AggregateRow, _super);\n\t        function AggregateRow() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AggregateRow;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Collection([], AggregateColumn)\n\t    ], AggregateRow.prototype, \"columns\", void 0);\n\t    exports.AggregateRow = AggregateRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(8), __webpack_require__(5), __webpack_require__(10), __webpack_require__(6), __webpack_require__(7), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, ej2_base_2, events, ej2_popups_1, util_1, ej2_buttons_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnChooser = (function () {\n\t        function ColumnChooser(parent, serviceLocator) {\n\t            this.showColumn = [];\n\t            this.hideColumn = [];\n\t            this.isDlgOpen = false;\n\t            this.dlghide = false;\n\t            this.initialOpenDlg = true;\n\t            this.stateChangeColumns = [];\n\t            this.isInitialOpen = false;\n\t            this.isCustomizeOpenCC = false;\n\t            this.cBoxTrue = ej2_buttons_1.createCheckBox(true, { checked: true, label: ' ' });\n\t            this.cBoxFalse = ej2_buttons_1.createCheckBox(true, { checked: false, label: ' ' });\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t            this.cBoxTrue.insertBefore(ej2_base_1.createElement('input', {\n\t                className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n\t            }), this.cBoxTrue.firstChild);\n\t            this.cBoxFalse.insertBefore(ej2_base_1.createElement('input', {\n\t                className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n\t            }), this.cBoxFalse.firstChild);\n\t            this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n\t            if (this.parent.enableRtl) {\n\t                ej2_base_1.addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n\t            }\n\t        }\n\t        ColumnChooser.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t            if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.element) {\n\t                this.dlgObj.destroy();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        };\n\t        ColumnChooser.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.destroy, this.destroy);\n\t        };\n\t        ColumnChooser.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderDlgContent();\n\t            this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t        };\n\t        ColumnChooser.prototype.clickHandler = function (e) {\n\t            var targetElement = e.target;\n\t            if (!this.isCustomizeOpenCC) {\n\t                if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc')) || !ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc-toolbar'))) {\n\t                    if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n\t                        if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n\t                            this.isDlgOpen = true;\n\t                            return;\n\t                        }\n\t                    }\n\t                    else if (targetElement.classList.contains('e-cc-cancel')) {\n\t                        targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n\t                        this.columnChooserSearch('');\n\t                        this.removeCancelIcon();\n\t                    }\n\t                }\n\t                else {\n\t                    if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n\t                        this.dlgObj.hide();\n\t                        this.isDlgOpen = false;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.hideDialog = function () {\n\t            if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n\t                this.dlgObj.hide();\n\t                this.isDlgOpen = false;\n\t            }\n\t        };\n\t        ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n\t            if (!this.dlgObj.visible) {\n\t                var pos = { X: null, Y: null };\n\t                var args1 = {\n\t                    requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n\t                    columns: this.parent.getColumns()\n\t                };\n\t                this.parent.trigger(events.beforeOpenColumnChooser, args1);\n\t                this.refreshCheckboxState();\n\t                this.dlgObj.dataBind();\n\t                this.dlgObj.element.style.maxHeight = '430px';\n\t                var elementVisible = this.dlgObj.element.style.display;\n\t                this.dlgObj.element.style.display = 'block';\n\t                var newpos = ej2_popups_1.calculateRelativeBasedPosition(ej2_base_2.closest(target, '.e-toolbar-item'), this.dlgObj.element);\n\t                this.dlgObj.element.style.display = elementVisible;\n\t                this.dlgObj.element.style.top = newpos.top + ej2_base_2.closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n\t                var dlgWidth = 250;\n\t                if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(target, '.e-bigger'))) {\n\t                    this.dlgObj.width = 253;\n\t                }\n\t                if (ej2_base_1.Browser.isDevice) {\n\t                    this.dlgObj.target = document.body;\n\t                    this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                    this.dlgObj.refreshPosition();\n\t                    this.dlgObj.open = this.mOpenDlg.bind(this);\n\t                }\n\t                else {\n\t                    if (this.parent.enableRtl) {\n\t                        this.dlgObj.element.style.left = target.offsetLeft + 'px';\n\t                    }\n\t                    else {\n\t                        this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + ej2_base_2.closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n\t                    }\n\t                }\n\t                this.removeCancelIcon();\n\t                this.dlgObj.show();\n\t            }\n\t            else {\n\t                this.hideDialog();\n\t                this.addcancelIcon();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n\t            this.isCustomizeOpenCC = true;\n\t            if (this.dlgObj.visible) {\n\t                this.hideDialog();\n\t                return;\n\t            }\n\t            if (!this.isInitialOpen) {\n\t                this.dlgObj.content = this.renderChooserList();\n\t            }\n\t            else {\n\t                this.refreshCheckboxState();\n\t            }\n\t            this.dlgObj.dataBind();\n\t            this.dlgObj.position = { X: 'center', Y: 'center' };\n\t            if (ej2_base_1.isNullOrUndefined(X)) {\n\t                this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                this.dlgObj.refreshPosition();\n\t            }\n\t            else {\n\t                this.dlgObj.element.style.top = '';\n\t                this.dlgObj.element.style.left = '';\n\t                this.dlgObj.element.style.top = Y + 'px';\n\t                this.dlgObj.element.style.left = X + 'px';\n\t            }\n\t            this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n\t            this.dlgObj.show();\n\t            this.isInitialOpen = true;\n\t            this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n\t        };\n\t        ColumnChooser.prototype.customDialogOpen = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n\t        };\n\t        ColumnChooser.prototype.customDialogClose = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n\t        };\n\t        ColumnChooser.prototype.renderDlgContent = function () {\n\t            var y;\n\t            this.dlgDiv = ej2_base_1.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n\t            this.parent.element.appendChild(this.dlgDiv);\n\t            var xpos = this.parent.element.getBoundingClientRect().width - 250;\n\t            var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n\t            var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t            if (!ej2_base_1.isNullOrUndefined(tarElement)) {\n\t                y = tarElement.getBoundingClientRect().top;\n\t            }\n\t            var pos = { X: null, Y: null };\n\t            this.dlgObj = new ej2_popups_1.Dialog({\n\t                header: this.l10n.getConstant('ChooseColumns'),\n\t                showCloseIcon: false,\n\t                closeOnEscape: false,\n\t                locale: this.parent.locale,\n\t                visible: false,\n\t                enableRtl: this.parent.enableRtl,\n\t                target: document.getElementById(this.parent.element.id),\n\t                buttons: [{\n\t                        click: this.confirmDlgBtnClick.bind(this),\n\t                        buttonModel: {\n\t                            content: this.l10n.getConstant('OKButton'), isPrimary: true,\n\t                            cssClass: 'e-cc e-cc_okbtn',\n\t                        }\n\t                    },\n\t                    {\n\t                        click: this.clearActions.bind(this),\n\t                        buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n\t                    }],\n\t                content: this.renderChooserList(),\n\t                width: 250,\n\t                cssClass: 'e-cc',\n\t                animationSettings: { effect: 'None' },\n\t            });\n\t            this.dlgObj.appendTo(this.dlgDiv);\n\t            util_1.changeButtonType(this.dlgObj.element);\n\t            this.wireEvents();\n\t        };\n\t        ColumnChooser.prototype.renderChooserList = function () {\n\t            this.mainDiv = ej2_base_1.createElement('div', { className: 'e-main-div e-cc' });\n\t            var searchDiv = ej2_base_1.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n\t            var ccsearchele = ej2_base_1.createElement('input', {\n\t                className: 'e-ccsearch e-cc e-input',\n\t                attrs: { placeholder: this.l10n.getConstant('Search') }\n\t            });\n\t            var ccsearchicon = ej2_base_1.createElement('span', { className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon' });\n\t            var conDiv = ej2_base_1.createElement('div', { className: 'e-cc-contentdiv' });\n\t            this.innerDiv = ej2_base_1.createElement('div', { className: 'e-innerdiv e-cc' });\n\t            searchDiv.appendChild(ccsearchele);\n\t            searchDiv.appendChild(ccsearchicon);\n\t            ccsearchele.addEventListener('focus', this.searchFocus.bind(this, ccsearchele));\n\t            ccsearchele.addEventListener('blur', this.searchBlur.bind(this, ccsearchele));\n\t            var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n\t            this.innerDiv.appendChild(innerDivContent);\n\t            conDiv.appendChild(this.innerDiv);\n\t            this.mainDiv.appendChild(searchDiv);\n\t            this.mainDiv.appendChild(conDiv);\n\t            return this.mainDiv;\n\t        };\n\t        ColumnChooser.prototype.searchFocus = function (targt) {\n\t            targt.parentElement.classList.add('e-input-focus');\n\t        };\n\t        ColumnChooser.prototype.searchBlur = function (targt) {\n\t            targt.parentElement.classList.remove('e-input-focus');\n\t        };\n\t        ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n\t            this.stateChangeColumns = [];\n\t            if (!ej2_base_1.isNullOrUndefined(args)) {\n\t                if (this.hideColumn.length) {\n\t                    this.columnStateChange(this.hideColumn, false);\n\t                }\n\t                if (this.showColumn.length) {\n\t                    this.columnStateChange(this.showColumn, true);\n\t                }\n\t                var params = {\n\t                    requestType: 'columnstate', element: this.parent.element,\n\t                    columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n\t                };\n\t                this.parent.trigger(events.actionComplete, params);\n\t                this.getShowHideService.setVisible(this.stateChangeColumns);\n\t                this.clearActions();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n\t            for (var index = 0; index < stateColumns.length; index++) {\n\t                var colUid = stateColumns[index];\n\t                var currentCol = this.parent.getColumnByUid(colUid);\n\t                currentCol.visible = state;\n\t                this.stateChangeColumns.push(currentCol);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.clearActions = function () {\n\t            this.hideColumn = [];\n\t            this.showColumn = [];\n\t            this.hideDialog();\n\t            this.addcancelIcon();\n\t        };\n\t        ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid) {\n\t            if (isChecked) {\n\t                if (this.hideColumn.indexOf(coluid) !== -1) {\n\t                    this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n\t                }\n\t                if (this.showColumn.indexOf(coluid) === -1) {\n\t                    this.showColumn.push(coluid);\n\t                }\n\t            }\n\t            else {\n\t                if (this.showColumn.indexOf(coluid) !== -1) {\n\t                    this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n\t                }\n\t                if (this.hideColumn.indexOf(coluid) === -1) {\n\t                    this.hideColumn.push(coluid);\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n\t            var clearSearch = false;\n\t            var fltrCol;\n\t            if (searchVal === '') {\n\t                this.removeCancelIcon();\n\t                fltrCol = this.parent.getColumns();\n\t                clearSearch = true;\n\t            }\n\t            else {\n\t                fltrCol = new ej2_data_1.DataManager(this.parent.getColumns()).executeLocal(new ej2_data_1.Query()\n\t                    .where('headerText', 'startswith', searchVal, true));\n\t            }\n\t            if (fltrCol.length) {\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.classList.remove('e-ccnmdiv');\n\t                this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n\t                if (!clearSearch) {\n\t                    this.addcancelIcon();\n\t                }\n\t            }\n\t            else {\n\t                var nMatchele = ej2_base_1.createElement('span', { className: 'e-cc e-nmatch' });\n\t                nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.appendChild(nMatchele);\n\t                this.innerDiv.classList.add('e-ccnmdiv');\n\t            }\n\t            this.flag = true;\n\t            this.stopTimer();\n\t        };\n\t        ColumnChooser.prototype.wireEvents = function () {\n\t            ej2_base_2.EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n\t        };\n\t        ColumnChooser.prototype.unWireEvents = function () {\n\t            if (this.dlgObj.element) {\n\t                ej2_base_2.EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n\t            }\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n\t        };\n\t        ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n\t            var checkstate;\n\t            var elem = util_1.parentsUntil(e.target, 'e-checkbox-wrapper');\n\t            if (elem) {\n\t                util_1.toogleCheckbox(elem.parentElement);\n\t                elem.querySelector('.e-chk-hidden').focus();\n\t                if (elem.querySelector('.e-check')) {\n\t                    checkstate = true;\n\t                }\n\t                else if (elem.querySelector('.e-uncheck')) {\n\t                    checkstate = false;\n\t                }\n\t                else {\n\t                    return;\n\t                }\n\t                var columnUid = util_1.parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n\t                this.checkstatecolumn(checkstate, columnUid);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n\t            this.ulElement = ej2_base_1.createElement('ul', { className: 'e-ccul-ele e-cc' });\n\t            for (var i = 0; i < gdCol.length; i++) {\n\t                var columns = gdCol[i];\n\t                this.renderCheckbox(columns);\n\t            }\n\t            return this.ulElement;\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxState = function () {\n\t            this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n\t            this.columnChooserSearch('');\n\t            for (var i = 0; i < this.parent.element.querySelectorAll('.e-cc-chbox').length; i++) {\n\t                var element = this.parent.element.querySelectorAll('.e-cc-chbox')[i];\n\t                var columnUID = util_1.parentsUntil(element, 'e-ccheck').getAttribute('uid');\n\t                var column = this.parent.getColumnByUid(columnUID);\n\t                if (column.visible) {\n\t                    element.checked = true;\n\t                }\n\t                else {\n\t                    element.checked = false;\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n\t            var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n\t            cbox.querySelector('.e-label').innerHTML = label;\n\t            return util_1.createCboxWithWrap(uid, cbox, 'e-ccheck');\n\t        };\n\t        ColumnChooser.prototype.renderCheckbox = function (column) {\n\t            var cclist;\n\t            var hideColState;\n\t            var showColState;\n\t            var checkBoxObj;\n\t            if (column.showInColumnChooser) {\n\t                cclist = ej2_base_1.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n\t                hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n\t                showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n\t                var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n\t                cclist.appendChild(cccheckboxlist);\n\t                this.ulElement.appendChild(cclist);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n\t            this.addcancelIcon();\n\t            this.searchValue = e.target.value;\n\t            var proxy = this;\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        ColumnChooser.prototype.startTimer = function (e) {\n\t            var proxy = this;\n\t            var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n\t            this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n\t        };\n\t        ColumnChooser.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        ColumnChooser.prototype.addcancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.removeCancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.mOpenDlg = function () {\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n\t                this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.getModuleName = function () {\n\t            return 'ColumnChooser';\n\t        };\n\t        return ColumnChooser;\n\t    }());\n\t    exports.ColumnChooser = ColumnChooser;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Clipboard = (function () {\n\t        function Clipboard(parent) {\n\t            this.copyContent = '';\n\t            this.isSelect = false;\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        Clipboard.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.keyPressed, this.keyDownHandler, this);\n\t        };\n\t        Clipboard.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.keyPressed, this.keyDownHandler);\n\t        };\n\t        Clipboard.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            this.clipBoardTextArea = ej2_base_1.createElement('textarea', {\n\t                className: 'e-clipboard',\n\t                styles: 'opacity: 0',\n\t                attrs: { readonly: 'true' }\n\t            });\n\t            this.parent.element.appendChild(this.clipBoardTextArea);\n\t        };\n\t        Clipboard.prototype.keyDownHandler = function (e) {\n\t            if (e.action === 'ctrlPlusC') {\n\t                this.copy();\n\t            }\n\t            else if (e.action === 'ctrlShiftPlusH') {\n\t                this.copy(true);\n\t            }\n\t        };\n\t        Clipboard.prototype.setCopyData = function (withHeader) {\n\t            if (window.getSelection().toString() === '') {\n\t                this.clipBoardTextArea.value = this.copyContent = '';\n\t                if (this.parent.selectionSettings.mode !== 'cell') {\n\t                    var rows = this.parent.getRows();\n\t                    var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function (a, b) { return a - b; });\n\t                    if (withHeader) {\n\t                        this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-headercell')), false, '\\t', withHeader);\n\t                        this.copyContent += '\\n';\n\t                    }\n\t                    for (var i = 0; i < selectedIndexes.length; i++) {\n\t                        if (i > 0) {\n\t                            this.copyContent += '\\n';\n\t                        }\n\t                        this.getCopyData([].slice.call(rows[selectedIndexes[i]].querySelectorAll('.e-rowcell')), false, '\\t', withHeader);\n\t                    }\n\t                }\n\t                else {\n\t                    this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground')), true, '\\n', withHeader);\n\t                }\n\t                var args = {\n\t                    data: this.copyContent,\n\t                    cancel: false,\n\t                };\n\t                this.parent.trigger(events.beforeCopy, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                this.clipBoardTextArea.value = this.copyContent = args.data;\n\t                if (!ej2_base_1.Browser.userAgent.match(/ipad|ipod|iphone/i)) {\n\t                    this.clipBoardTextArea.select();\n\t                }\n\t                else {\n\t                    this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n\t                }\n\t                this.isSelect = true;\n\t            }\n\t        };\n\t        Clipboard.prototype.getCopyData = function (cells, isCell, splitKey, withHeader) {\n\t            for (var j = 0; j < cells.length; j++) {\n\t                if (withHeader && isCell) {\n\t                    this.copyContent += this.parent.getVisibleColumns()[parseInt(cells[j].getAttribute('aria-colindex'), 10)].headerText + '\\n';\n\t                }\n\t                this.copyContent += cells[j].textContent;\n\t                if (j < cells.length - 1) {\n\t                    this.copyContent += splitKey;\n\t                }\n\t            }\n\t        };\n\t        Clipboard.prototype.copy = function (withHeader) {\n\t            if (document.queryCommandSupported('copy')) {\n\t                this.setCopyData(withHeader);\n\t                document.execCommand('copy');\n\t                this.clipBoardTextArea.blur();\n\t            }\n\t            if (this.isSelect) {\n\t                window.getSelection().removeAllRanges();\n\t                this.isSelect = false;\n\t            }\n\t        };\n\t        Clipboard.prototype.getModuleName = function () {\n\t            return 'clipboard';\n\t        };\n\t        Clipboard.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            ej2_base_1.remove(this.clipBoardTextArea);\n\t        };\n\t        return Clipboard;\n\t    }());\n\t    exports.Clipboard = Clipboard;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(21), __webpack_require__(55), __webpack_require__(56), __webpack_require__(42), __webpack_require__(63), __webpack_require__(43), __webpack_require__(45), __webpack_require__(74), __webpack_require__(75), __webpack_require__(76), __webpack_require__(77), __webpack_require__(46), __webpack_require__(78), __webpack_require__(79), __webpack_require__(80), __webpack_require__(51), __webpack_require__(83), __webpack_require__(94), __webpack_require__(92), __webpack_require__(93), __webpack_require__(95), __webpack_require__(48), __webpack_require__(97), __webpack_require__(100), __webpack_require__(99), __webpack_require__(49), __webpack_require__(102), __webpack_require__(22), __webpack_require__(104), __webpack_require__(105), __webpack_require__(108), __webpack_require__(72)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, data_1, sort_1, page_1, selection_1, filter_1, search_1, scroll_1, resize_1, reorder_1, row_reorder_1, group_1, print_1, detail_row_1, toolbar_1, aggregate_1, virtual_scroll_1, edit_1, batch_edit_1, inline_edit_1, normal_edit_1, dialog_edit_1, column_chooser_1, excel_export_1, pdf_export_1, export_helper_1, clipboard_1, command_column_1, checkbox_filter_1, context_menu_1, freeze_1, column_menu_1, excel_filter_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(data_1);\n\t    __export(sort_1);\n\t    __export(page_1);\n\t    __export(selection_1);\n\t    __export(filter_1);\n\t    __export(search_1);\n\t    __export(scroll_1);\n\t    __export(resize_1);\n\t    __export(reorder_1);\n\t    __export(row_reorder_1);\n\t    __export(group_1);\n\t    __export(print_1);\n\t    __export(detail_row_1);\n\t    __export(toolbar_1);\n\t    __export(aggregate_1);\n\t    __export(virtual_scroll_1);\n\t    __export(edit_1);\n\t    __export(batch_edit_1);\n\t    __export(inline_edit_1);\n\t    __export(normal_edit_1);\n\t    __export(dialog_edit_1);\n\t    __export(column_chooser_1);\n\t    __export(excel_export_1);\n\t    __export(pdf_export_1);\n\t    __export(export_helper_1);\n\t    __export(clipboard_1);\n\t    __export(command_column_1);\n\t    __export(checkbox_filter_1);\n\t    __export(context_menu_1);\n\t    __export(freeze_1);\n\t    __export(column_menu_1);\n\t    __export(excel_filter_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(7), __webpack_require__(10), __webpack_require__(14), __webpack_require__(52), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, constant_1, enum_1, virtual_content_renderer_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualScroll = (function () {\n\t        function VirtualScroll(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        VirtualScroll.prototype.getModuleName = function () {\n\t            return 'virtualscroll';\n\t        };\n\t        VirtualScroll.prototype.instantiateRenderer = function () {\n\t            var renderer = this.locator.getService('rendererFactory');\n\t            if (this.parent.enableColumnVirtualization) {\n\t                renderer.addRenderer(enum_1.RenderType.Header, new virtual_content_renderer_1.VirtualHeaderRenderer(this.parent, this.locator));\n\t            }\n\t            renderer.addRenderer(enum_1.RenderType.Content, new virtual_content_renderer_1.VirtualContentRenderer(this.parent, this.locator));\n\t            this.ensurePageSize();\n\t        };\n\t        VirtualScroll.prototype.ensurePageSize = function () {\n\t            var rowHeight = util_1.getRowHeight(this.parent.element);\n\t            this.blockSize = ~~(this.parent.height / rowHeight);\n\t            var height = this.blockSize * 2;\n\t            var size = this.parent.pageSettings.pageSize;\n\t            this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n\t        };\n\t        VirtualScroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n\t        };\n\t        VirtualScroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.initialLoad, this.instantiateRenderer);\n\t            this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n\t        };\n\t        VirtualScroll.prototype.refreshVirtualElement = function (args) {\n\t            if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n\t                var renderer = this.locator.getService('rendererFactory');\n\t                renderer.getRenderer(enum_1.RenderType.Content).refreshVirtualElement();\n\t            }\n\t        };\n\t        VirtualScroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return VirtualScroll;\n\t    }());\n\t    exports.VirtualScroll = VirtualScroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(10), __webpack_require__(14), __webpack_require__(12), __webpack_require__(25), __webpack_require__(53), __webpack_require__(54)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, util_1, constant_1, enum_1, content_renderer_1, header_renderer_1, intersection_observer_1, virtual_row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualContentRenderer = (function (_super) {\n\t        __extends(VirtualContentRenderer, _super);\n\t        function VirtualContentRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.prevHeight = 0;\n\t            _this.preventEvent = false;\n\t            _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n\t            _this.offsets = {};\n\t            _this.tmpOffsets = {};\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.offsetKeys = [];\n\t            _this.isFocused = false;\n\t            _this.locator = locator;\n\t            _this.eventListener('on');\n\t            _this.vgenerator = _this.generator;\n\t            return _this;\n\t        }\n\t        VirtualContentRenderer.prototype.renderTable = function () {\n\t            this.header = this.locator.getService('rendererFactory').getRenderer(enum_1.RenderType.Header);\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.content = this.getPanel().firstChild;\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder();\n\t            this.virtualEle.wrapper.style.position = 'absolute';\n\t            var debounceEvent = (this.parent.dataSource instanceof ej2_data_1.DataManager && !this.parent.dataSource.dataSource.offline);\n\t            var opt = {\n\t                container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n\t                axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n\t            };\n\t            this.observer = new intersection_observer_1.InterSectionObserver(this.virtualEle.wrapper, opt);\n\t        };\n\t        VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t            this.virtualEle.adjustTable(0, 0);\n\t        };\n\t        VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n\t            if (this.preventEvent || this.parent.isDestroyed) {\n\t                this.preventEvent = false;\n\t                return;\n\t            }\n\t            this.isFocused = this.content === ej2_base_1.closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n\t            var info = scrollArgs.sentinel;\n\t            var viewInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n\t            if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n\t                || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n\t                return;\n\t            }\n\t            this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n\t            this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n\t            this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo });\n\t        };\n\t        VirtualContentRenderer.prototype.block = function (blk) {\n\t            return this.vgenerator.isBlockAvailable(blk);\n\t        };\n\t        VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n\t            var tempBlocks = [];\n\t            var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n\t            infoType.page = this.getPageFromTop(e.top, infoType);\n\t            infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n\t            infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n\t            var blocks = this.ensureBlocks(infoType);\n\t            infoType.blockIndexes = blocks;\n\t            infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n\t                .every(this.block.bind(this));\n\t            infoType.event = (infoType.loadNext || infoType.loadSelf) ? constant_1.modelChanged : constant_1.refreshVirtualBlock;\n\t            infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n\t            infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n\t                infoType.event = constant_1.refreshVirtualBlock;\n\t            }\n\t            return infoType;\n\t        };\n\t        VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n\t            var _this = this;\n\t            var index = info.blockIndexes[info.block];\n\t            var mIdx;\n\t            var old = index;\n\t            var max = Math.max;\n\t            var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n\t            indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n\t            if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n\t                return indexes;\n\t            }\n\t            if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n\t                indexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            indexes.some(function (val, ind) {\n\t                var result = val === _this.getTotalBlocks();\n\t                if (result) {\n\t                    mIdx = ind;\n\t                }\n\t                return result;\n\t            });\n\t            if (mIdx !== undefined) {\n\t                indexes = indexes.slice(0, mIdx + 1);\n\t                if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n\t                    indexes = [indexes[0] - 1, indexes[0]];\n\t                }\n\t            }\n\t            return indexes;\n\t        };\n\t        VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n\t            var info = e.virtualInfo;\n\t            this.prevInfo = this.prevInfo || e.virtualInfo;\n\t            var cBlock = (info.columnIndexes[0]) - 1;\n\t            var cOffset = this.getColumnOffset(cBlock);\n\t            var width;\n\t            var blocks = info.blockIndexes;\n\t            if (this.parent.groupSettings.columns.length) {\n\t                this.refreshOffsets();\n\t            }\n\t            var translate = this.getTranslateY(this.content.scrollTop, this.content.getBoundingClientRect().height, info);\n\t            this.virtualEle.adjustTable(cOffset, translate);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.adjustTable(cOffset, 0);\n\t            }\n\t            if (this.parent.enableColumnVirtualization) {\n\t                var cIndex = info.columnIndexes;\n\t                width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n\t                this.header.virtualEle.setWrapperWidth(width);\n\t            }\n\t            this.virtualEle.setWrapperWidth(width, this.parent.enableColumnVirtualization || ej2_base_2.Browser.isIE);\n\t            target.appendChild(newChild);\n\t            this.getTable().appendChild(target);\n\t            if (this.parent.groupSettings.columns.length) {\n\t                if (info.direction === 'up') {\n\t                    var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n\t                    this.preventEvent = true;\n\t                    var sTop = this.content.scrollTop;\n\t                    this.content.scrollTop = sTop + blk;\n\t                }\n\t                this.setVirtualHeight();\n\t                this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n\t            }\n\t            this.prevInfo = info;\n\t            if (this.isFocused) {\n\t                this.content.focus();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onDataReady = function (e) {\n\t            if (!ej2_base_3.isNullOrUndefined(e.count)) {\n\t                this.count = e.count;\n\t                this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n\t            }\n\t            this.refreshOffsets();\n\t            this.setVirtualHeight();\n\t            this.resetScrollPosition(e.requestType);\n\t        };\n\t        VirtualContentRenderer.prototype.setVirtualHeight = function () {\n\t            var width = this.parent.enableColumnVirtualization ?\n\t                this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n\t            this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()], width);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.setVirtualHeight(1, width);\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n\t            var _this = this;\n\t            var total = this.getTotalBlocks();\n\t            var page = 0;\n\t            var extra = this.offsets[total] - this.prevHeight;\n\t            this.offsetKeys.some(function (offset) {\n\t                var iOffset = Number(offset);\n\t                var border = sTop < _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n\t                if (border) {\n\t                    info.block = iOffset % 2 === 0 ? 1 : 0;\n\t                    page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n\t                }\n\t                return border;\n\t            });\n\t            return page;\n\t        };\n\t        VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info) {\n\t            if (info === undefined) {\n\t                info = { page: this.getPageFromTop(sTop, {}) };\n\t                info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            var block = (info.blockIndexes[0] || 1) - 1;\n\t            var translate = this.getOffset(block);\n\t            var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n\t            return translate > sTop ? this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n\t        };\n\t        VirtualContentRenderer.prototype.getOffset = function (block) {\n\t            return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock]);\n\t        };\n\t        VirtualContentRenderer.prototype.onEntered = function () {\n\t            var _this = this;\n\t            return function (element, current, direction, e) {\n\t                var xAxis = current.axis === 'X';\n\t                var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n\t                var height = _this.content.getBoundingClientRect().height;\n\t                var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n\t                var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined);\n\t                _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n\t                if (_this.parent.enableColumnVirtualization) {\n\t                    _this.header.virtualEle.adjustTable(x, 0);\n\t                }\n\t            };\n\t        };\n\t        VirtualContentRenderer.prototype.eventListener = function (action) {\n\t            var _this = this;\n\t            this.parent[action](constant_1.dataReady, this.onDataReady, this);\n\t            this.parent[action](constant_1.refreshVirtualBlock, this.refreshContentRows, this);\n\t            this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n\t            var fn = function () {\n\t                _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n\t                _this.parent.off(constant_1.contentReady, fn);\n\t            };\n\t            this.parent.on(constant_1.contentReady, fn, this);\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockSize = function () {\n\t            return this.parent.pageSettings.pageSize >> 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockHeight = function () {\n\t            return this.getBlockSize() * util_1.getRowHeight();\n\t        };\n\t        VirtualContentRenderer.prototype.isEndBlock = function (index) {\n\t            var totalBlocks = this.getTotalBlocks();\n\t            return index >= totalBlocks || index === totalBlocks - 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getTotalBlocks = function () {\n\t            return Math.ceil(this.count / this.getBlockSize());\n\t        };\n\t        VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n\t            return this.vgenerator.cOffsets[block] | 0;\n\t        };\n\t        VirtualContentRenderer.prototype.getModelGenerator = function () {\n\t            return new virtual_row_model_generator_1.VirtualRowModelGenerator(this.parent);\n\t        };\n\t        VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n\t            if (this.actions.some(function (value) { return value === action; })) {\n\t                this.preventEvent = this.content.scrollTop !== 0;\n\t                this.content.scrollTop = 0;\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onActionBegin = function (e) {\n\t            this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n\t        };\n\t        VirtualContentRenderer.prototype.getRows = function () {\n\t            return this.vgenerator.getRows();\n\t        };\n\t        VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n\t            var prev = this.prevInfo.blockIndexes;\n\t            var startIdx = (prev[0] - 1) * this.getBlockSize();\n\t            return this.parent.getDataRows()[index - startIdx];\n\t        };\n\t        VirtualContentRenderer.prototype.refreshOffsets = function () {\n\t            var _this = this;\n\t            var row = 0;\n\t            var bSize = this.getBlockSize();\n\t            var total = this.getTotalBlocks();\n\t            this.prevHeight = this.offsets[total];\n\t            this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n\t            this.offsets = {};\n\t            Array.apply(null, Array(total)).map(function () { return ++row; })\n\t                .forEach(function (block) {\n\t                var tmp = (_this.vgenerator.cache[block] || []).length;\n\t                var rem = _this.count % bSize;\n\t                var size = block in _this.vgenerator.cache ?\n\t                    tmp * util_1.getRowHeight() : rem && block === total ? rem * util_1.getRowHeight() : _this.getBlockHeight();\n\t                _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n\t                _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n\t            });\n\t            this.offsetKeys = Object.keys(this.offsets);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.vgenerator.refreshColOffsets();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n\t            this.vgenerator.refreshColOffsets();\n\t            this.setVirtualHeight();\n\t        };\n\t        return VirtualContentRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.VirtualContentRenderer = VirtualContentRenderer;\n\t    var VirtualHeaderRenderer = (function (_super) {\n\t        __extends(VirtualHeaderRenderer, _super);\n\t        function VirtualHeaderRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.gen = new virtual_row_model_generator_1.VirtualRowModelGenerator(_this.parent);\n\t            _this.parent.on(constant_1.refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n\t            return _this;\n\t        }\n\t        VirtualHeaderRenderer.prototype.renderTable = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.getPanel().firstChild;\n\t            this.virtualEle.content.style.position = 'relative';\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder('absolute');\n\t        };\n\t        VirtualHeaderRenderer.prototype.appendContent = function (table) {\n\t            this.virtualEle.wrapper.appendChild(table);\n\t        };\n\t        VirtualHeaderRenderer.prototype.refreshUI = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.refreshUI.call(this);\n\t        };\n\t        return VirtualHeaderRenderer;\n\t    }(header_renderer_1.HeaderRender));\n\t    exports.VirtualHeaderRenderer = VirtualHeaderRenderer;\n\t    var VirtualElementHandler = (function () {\n\t        function VirtualElementHandler() {\n\t        }\n\t        VirtualElementHandler.prototype.renderWrapper = function () {\n\t            this.wrapper = ej2_base_1.createElement('div', { className: 'e-virtualtable' });\n\t            this.wrapper.appendChild(this.table);\n\t            this.content.appendChild(this.wrapper);\n\t        };\n\t        VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n\t            if (position === void 0) { position = 'relative'; }\n\t            this.placeholder = ej2_base_1.createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n\t            this.content.appendChild(this.placeholder);\n\t        };\n\t        VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n\t            this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n\t        };\n\t        VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n\t            this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n\t        };\n\t        VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n\t            this.placeholder.style.height = height + \"px\";\n\t            this.placeholder.style.width = width;\n\t        };\n\t        return VirtualElementHandler;\n\t    }());\n\t    exports.VirtualElementHandler = VirtualElementHandler;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InterSectionObserver = (function () {\n\t        function InterSectionObserver(element, options) {\n\t            var _this = this;\n\t            this.fromWheel = false;\n\t            this.touchMove = false;\n\t            this.options = {};\n\t            this.sentinelInfo = {\n\t                'up': {\n\t                    check: function (rect, info) {\n\t                        var top = rect.top - _this.containerRect.top;\n\t                        info.entered = top >= 0;\n\t                        return top + (_this.options.pageHeight / 2) >= 0;\n\t                    },\n\t                    axis: 'Y'\n\t                },\n\t                'down': {\n\t                    check: function (rect, info) {\n\t                        var cHeight = _this.options.container.clientHeight;\n\t                        var top = rect.bottom;\n\t                        info.entered = rect.bottom <= _this.containerRect.bottom;\n\t                        return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n\t                    }, axis: 'Y'\n\t                },\n\t                'right': {\n\t                    check: function (rect, info) {\n\t                        var right = rect.right;\n\t                        info.entered = right < _this.containerRect.right;\n\t                        return right - _this.containerRect.width <= _this.containerRect.right;\n\t                    }, axis: 'X'\n\t                },\n\t                'left': {\n\t                    check: function (rect, info) {\n\t                        var left = rect.left;\n\t                        info.entered = left > 0;\n\t                        return left + _this.containerRect.width >= _this.containerRect.left;\n\t                    }, axis: 'X'\n\t                }\n\t            };\n\t            this.element = element;\n\t            this.options = options;\n\t        }\n\t        InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            this.containerRect = this.options.container.getBoundingClientRect();\n\t            ej2_base_1.EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n\t            ej2_base_1.EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n\t        };\n\t        InterSectionObserver.prototype.check = function (direction) {\n\t            var info = this.sentinelInfo[direction];\n\t            return info.check(this.element.getBoundingClientRect(), info);\n\t        };\n\t        InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            var prevTop = 0;\n\t            var prevLeft = 0;\n\t            var debounced100 = ej2_base_2.debounce(callback, 100);\n\t            var debounced50 = ej2_base_2.debounce(callback, 50);\n\t            return function (e) {\n\t                var top = e.target.scrollTop;\n\t                var left = e.target.scrollLeft;\n\t                var direction = prevTop < top ? 'down' : 'up';\n\t                direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n\t                prevTop = top;\n\t                prevLeft = left;\n\t                var current = _this.sentinelInfo[direction];\n\t                if (_this.options.axes.indexOf(current.axis) === -1) {\n\t                    return;\n\t                }\n\t                var check = _this.check(direction);\n\t                if (current.entered) {\n\t                    onEnterCallback(_this.element, current, direction, { top: top, left: left });\n\t                }\n\t                if (check) {\n\t                    var fn = _this.fromWheel ? _this.options.debounceEvent ? debounced100 : callback : debounced100;\n\t                    if (current.axis === 'X') {\n\t                        fn = debounced50;\n\t                    }\n\t                    fn({ direction: direction, sentinel: current, offset: { top: top, left: left } });\n\t                }\n\t                _this.fromWheel = false;\n\t            };\n\t        };\n\t        InterSectionObserver.prototype.setPageHeight = function (value) {\n\t            this.options.pageHeight = value;\n\t        };\n\t        return InterSectionObserver;\n\t    }());\n\t    exports.InterSectionObserver = InterSectionObserver;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(16), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualRowModelGenerator = (function () {\n\t        function VirtualRowModelGenerator(parent) {\n\t            this.cOffsets = {};\n\t            this.cache = {};\n\t            this.data = {};\n\t            this.groups = {};\n\t            this.parent = parent;\n\t            this.model = this.parent.pageSettings;\n\t            this.rowModelGenerator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        }\n\t        VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n\t            var _this = this;\n\t            var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n\t            var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n\t            var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n\t            var result = [];\n\t            var center = ~~(this.model.pageSize / 2);\n\t            var indexes = this.getBlockIndexes(page);\n\t            var loadedBlocks = [];\n\t            this.checkAndResetCache(notifyArgs.requestType);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                info.blockIndexes.forEach(function (value) {\n\t                    if (_this.isBlockAvailable(value)) {\n\t                        _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n\t                    }\n\t                });\n\t            }\n\t            info.blockIndexes.forEach(function (value) {\n\t                if (!_this.isBlockAvailable(value)) {\n\t                    var rows = _this.rowModelGenerator.generateRows(data, {\n\t                        virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n\t                    });\n\t                    var median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n\t                    if (!_this.isBlockAvailable(indexes[0])) {\n\t                        _this.cache[indexes[0]] = rows.slice(0, median);\n\t                    }\n\t                    if (!_this.isBlockAvailable(indexes[1])) {\n\t                        _this.cache[indexes[1]] = rows.slice(median);\n\t                    }\n\t                }\n\t                if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n\t                    _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n\t                }\n\t                result.push.apply(result, _this.cache[value]);\n\t                if (_this.isBlockAvailable(value)) {\n\t                    loadedBlocks.push(value);\n\t                }\n\t            });\n\t            info.blockIndexes = loadedBlocks;\n\t            return result;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n\t            return [page + (page - 1), page * 2];\n\t        };\n\t        VirtualRowModelGenerator.prototype.getPage = function (block) {\n\t            return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n\t        };\n\t        VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n\t            return value in this.cache;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getData = function () {\n\t            return {\n\t                page: this.model.currentPage,\n\t                blockIndexes: this.getBlockIndexes(this.model.currentPage),\n\t                direction: 'down',\n\t                columnIndexes: this.parent.getColumnIndexesInView()\n\t            };\n\t        };\n\t        VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n\t            if (full === void 0) { full = true; }\n\t            var page = this.getPage(blk);\n\t            var even = blk % 2 === 0;\n\t            var index = (page - 1) * this.model.pageSize;\n\t            return full || !even ? index : index + ~~(this.model.pageSize / 2);\n\t        };\n\t        VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n\t            var _this = this;\n\t            if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n\t            var indexes = [];\n\t            var sLeft = content.scrollLeft | 0;\n\t            var keys = Object.keys(this.cOffsets);\n\t            var cWidth = content.getBoundingClientRect().width;\n\t            sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n\t            var calWidth = ej2_base_1.Browser.isDevice ? 2 * cWidth : cWidth / 2;\n\t            var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n\t            keys.some(function (offset, indx, input) {\n\t                var iOffset = Number(offset);\n\t                var offsetVal = _this.cOffsets[offset];\n\t                var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n\t                if (border) {\n\t                    indexes.push(iOffset);\n\t                }\n\t                return left + calWidth < offsetVal;\n\t            });\n\t            return indexes;\n\t        };\n\t        VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n\t            var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping']\n\t                .some(function (value) { return action === value; });\n\t            if (clear) {\n\t                this.cache = {};\n\t                this.data = {};\n\t                this.groups = {};\n\t            }\n\t            return clear;\n\t        };\n\t        VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n\t            var _this = this;\n\t            var col = 0;\n\t            this.cOffsets = {};\n\t            var gLen = this.parent.groupSettings.columns.length;\n\t            var cols = this.parent.columns;\n\t            var cLen = cols.length;\n\t            var isVisible = function (column) { return column.visible &&\n\t                (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n\t            this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n\t            Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n\t                block = block + gLen;\n\t                _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n\t            });\n\t        };\n\t        VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n\t            var _this = this;\n\t            var currentFirst = current[0];\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) {\n\t                if (Number(key) < block) {\n\t                    rows = rows.concat(_this.cache[key]);\n\t                }\n\t            });\n\t            if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n\t                return current;\n\t            }\n\t            return this.iterateGroup(current, rows);\n\t        };\n\t        VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n\t            var currentFirst = current[0];\n\t            var offset = 0;\n\t            if (currentFirst && currentFirst.isDataRow) {\n\t                return current;\n\t            }\n\t            var isPresent = current.some(function (row) {\n\t                return rows.some(function (oRow, index) {\n\t                    var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n\t                        oRow.data.key === row.data.key;\n\t                    if (res) {\n\t                        offset = index;\n\t                    }\n\t                    return res;\n\t                });\n\t            });\n\t            if (isPresent) {\n\t                current.shift();\n\t                current = this.iterateGroup(current, rows.slice(offset));\n\t            }\n\t            return current;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getRows = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n\t            return rows;\n\t        };\n\t        return VirtualRowModelGenerator;\n\t    }());\n\t    exports.VirtualRowModelGenerator = VirtualRowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Sort = (function () {\n\t        function Sort(parent, sortSettings, sortedColumns, locator) {\n\t            this.contentRefresh = true;\n\t            this.isModelChanged = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.sortSettings = sortSettings;\n\t            this.sortedColumns = sortedColumns;\n\t            this.focus = locator.getService('focus');\n\t            this.addEventListener();\n\t        }\n\t        Sort.prototype.updateModel = function () {\n\t            var sortedColumn = { field: this.columnName, direction: this.direction };\n\t            var index;\n\t            var gCols = this.parent.groupSettings.columns;\n\t            var flag = false;\n\t            if (!this.isMultiSort) {\n\t                if (!gCols.length) {\n\t                    this.sortSettings.columns = [sortedColumn];\n\t                }\n\t                else {\n\t                    var sortedCols = [];\n\t                    for (var i = 0, len = gCols.length; i < len; i++) {\n\t                        index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n\t                        if (this.columnName === gCols[i]) {\n\t                            flag = true;\n\t                            sortedCols.push(sortedColumn);\n\t                        }\n\t                        else {\n\t                            var sCol = this.getSortColumnFromField(gCols[i]);\n\t                            sortedCols.push({ field: sCol.field, direction: sCol.direction });\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sortedCols.push(sortedColumn);\n\t                    }\n\t                    this.sortSettings.columns = sortedCols;\n\t                }\n\t            }\n\t            else {\n\t                index = this.getSortedColsIndexByField(this.columnName);\n\t                if (index > -1) {\n\t                    this.sortSettings.columns[index] = sortedColumn;\n\t                }\n\t                else {\n\t                    this.sortSettings.columns.push(sortedColumn);\n\t                }\n\t                this.sortSettings.columns = this.sortSettings.columns;\n\t            }\n\t            this.parent.dataBind();\n\t            this.lastSortedCol = this.columnName;\n\t        };\n\t        Sort.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n\t            } : { requestType: 'sorting', type: events.actionComplete };\n\t            this.isRemove = false;\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, args));\n\t        };\n\t        Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            var gObj = this.parent;\n\t            if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n\t                return;\n\t            }\n\t            if (!gObj.allowMultiSorting) {\n\t                isMultiSort = gObj.allowMultiSorting;\n\t            }\n\t            if (this.isActionPrevent()) {\n\t                gObj.notify(events.preventBatch, {\n\t                    instance: this, handler: this.sortColumn,\n\t                    arg1: columnName, arg2: direction, arg3: isMultiSort\n\t                });\n\t                return;\n\t            }\n\t            this.columnName = columnName;\n\t            this.direction = direction;\n\t            this.isMultiSort = isMultiSort;\n\t            this.removeSortIcons();\n\t            var column = gObj.getColumnHeaderByField(columnName);\n\t            this.updateSortedCols(columnName, isMultiSort);\n\t            this.updateModel();\n\t        };\n\t        Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n\t            if (!isMultiSort) {\n\t                if (this.parent.allowGrouping) {\n\t                    for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n\t                        if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n\t                            this.sortedColumns.splice(i, 1);\n\t                            len--;\n\t                            i--;\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    this.sortedColumns.splice(0, this.sortedColumns.length);\n\t                }\n\t            }\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                this.sortedColumns.push(columnName);\n\t            }\n\t        };\n\t        Sort.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (this.contentRefresh) {\n\t                var args = this.sortSettings.columns.length ? {\n\t                    columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionBegin\n\t                } : { requestType: 'sorting', type: events.actionBegin };\n\t                this.parent.notify(events.modelChanged, args);\n\t            }\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.clearSorting = function () {\n\t            var cols = util_1.getActualPropFromColl(this.sortSettings.columns);\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeSortColumn(cols[i].field);\n\t            }\n\t        };\n\t        Sort.prototype.isActionPrevent = function () {\n\t            return util_1.isActionPrevent(this.parent);\n\t        };\n\t        Sort.prototype.removeSortColumn = function (field) {\n\t            var gObj = this.parent;\n\t            var cols = this.sortSettings.columns;\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n\t                return;\n\t            }\n\t            this.removeSortIcons();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                        continue;\n\t                    }\n\t                    this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n\t                    cols.splice(i, 1);\n\t                    this.isRemove = true;\n\t                    if (this.isModelChanged) {\n\t                        this.parent.notify(events.modelChanged, {\n\t                            requestType: 'sorting', type: events.actionBegin\n\t                        });\n\t                    }\n\t                    break;\n\t                }\n\t            }\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n\t            var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Sort.prototype.getModuleName = function () {\n\t            return 'sort';\n\t        };\n\t        Sort.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                this.isMultiSort = this.sortSettings.columns.length > 1;\n\t                for (var _i = 0, _a = gObj.sortSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    if (this.sortedColumns.indexOf(col.field) > -1) {\n\t                        this.sortColumn(col.field, col.direction, true);\n\t                    }\n\t                }\n\t                this.isMultiSort = false;\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Sort.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.sortComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t            this.parent.on(events.keyPressed, this.keyPressed, this);\n\t        };\n\t        Sort.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.sortComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t            this.parent.off(events.keyPressed, this.keyPressed);\n\t        };\n\t        Sort.prototype.destroy = function () {\n\t            this.isModelChanged = false;\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            this.clearSorting();\n\t            this.isModelChanged = true;\n\t            this.removeEventListener();\n\t        };\n\t        Sort.prototype.clickHandler = function (e) {\n\t            this.popUpClickHandler(e);\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (target && !e.target.classList.contains('e-grptogglebtn') &&\n\t                !e.target.classList.contains('e-stackedheadercell') &&\n\t                !e.target.classList.contains('e-stackedheadercelldiv') &&\n\t                !e.target.classList.contains('e-rhandler') &&\n\t                !e.target.classList.contains('e-columnmenu') &&\n\t                !e.target.classList.contains('e-filtermenudiv')) {\n\t                var gObj = this.parent;\n\t                var colObj = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                var direction = !target.querySelectorAll('.e-ascending').length ? 'ascending' :\n\t                    'descending';\n\t                if (colObj.type !== 'checkbox') {\n\t                    this.initiateSort(target, e, colObj);\n\t                    if (ej2_base_1.Browser.isDevice) {\n\t                        this.showPopUp(e);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.keyPressed = function (e) {\n\t            if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')) {\n\t                var target = this.focus.getFocusedElement();\n\t                if (!target || !target.classList.contains('e-headercell') || (this.parent.frozenColumns || this.parent.frozenRows)) {\n\t                    return;\n\t                }\n\t                var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                this.initiateSort(target, e, col);\n\t            }\n\t        };\n\t        Sort.prototype.initiateSort = function (target, e, column) {\n\t            var gObj = this.parent;\n\t            var field = column.field;\n\t            var direction = !target.querySelectorAll('.e-ascending').length ? 'ascending' :\n\t                'descending';\n\t            if (e.shiftKey || (this.sortSettings.allowUnsort && target.querySelectorAll('.e-descending').length)\n\t                && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n\t                this.removeSortColumn(field);\n\t            }\n\t            else {\n\t                this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n\t            }\n\t        };\n\t        Sort.prototype.showPopUp = function (e) {\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (!ej2_base_2.isNullOrUndefined(target) || this.parent.isContextMenuOpen()) {\n\t                util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n\t            }\n\t        };\n\t        Sort.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-sortdirect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSortMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSortMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Sort.prototype.addSortIcons = function () {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var filterElement;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, cols[i].direction);\n\t                if (this.isMultiSort && cols.length > 1) {\n\t                    header.querySelector('.e-headercelldiv').insertBefore(ej2_base_3.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n\t                }\n\t                filterElement = header.querySelector('.e-sortfilterdiv');\n\t                if (cols[i].direction === 'ascending') {\n\t                    ej2_base_3.classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n\t                }\n\t                else {\n\t                    ej2_base_3.classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.removeSortIcons = function (position) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = position ? position : 0, len = !ej2_base_2.isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n\t                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                    continue;\n\t                }\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, 'none');\n\t                ej2_base_3.classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n\t                if (header.querySelector('.e-sortnumber')) {\n\t                    header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.getSortColumnFromField = function (field) {\n\t            for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n\t                if (this.sortSettings.columns[i].field === field) {\n\t                    return this.sortSettings.columns[i];\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Sort.prototype.updateAriaAttr = function () {\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (fieldNames.indexOf(col) === -1) {\n\t                    continue;\n\t                }\n\t                var header = this.parent.getColumnHeaderByField(col);\n\t                this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n\t            }\n\t        };\n\t        Sort.prototype.refreshSortIcons = function () {\n\t            this.removeSortIcons();\n\t            this.isMultiSort = true;\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t            this.isMultiSort = false;\n\t            this.updateAriaAttr();\n\t        };\n\t        return Sort;\n\t    }());\n\t    exports.Sort = Sort;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(57), __webpack_require__(60), __webpack_require__(62), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, pager_1, pager_dropdown_1, external_message_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    pager_1.Pager.Inject(external_message_1.ExternalMessage, pager_dropdown_1.PagerDropDown);\n\t    var Page = (function () {\n\t        function Page(parent, pageSettings) {\n\t            this.parent = parent;\n\t            this.pageSettings = pageSettings;\n\t            this.addEventListener();\n\t        }\n\t        Page.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Page.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            var pagerObj;\n\t            if (!ej2_base_2.isNullOrUndefined(this.parent.pagerTemplate)) {\n\t                this.pageSettings.template = this.parent.pagerTemplate;\n\t            }\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-gridpager' });\n\t            pagerObj = util_1.extend({}, ej2_base_1.extend({}, util_1.getActualProperties(this.pageSettings)), {\n\t                click: this.clickHandler.bind(this),\n\t                dropDownChanged: this.onSelect.bind(this),\n\t                enableRtl: gObj.enableRtl, locale: gObj.locale,\n\t                created: this.addAriaAttr.bind(this)\n\t            }, ['parentObj', 'propName']);\n\t            this.pagerObj = new pager_1.Pager(pagerObj);\n\t        };\n\t        Page.prototype.onSelect = function (e) {\n\t            this.pageSettings.pageSize = e.pageSize;\n\t            this.pageSettings.currentPage = 1;\n\t        };\n\t        Page.prototype.addAriaAttr = function () {\n\t            var _this = this;\n\t            if (!(this.pageSettings.template)) {\n\t                var numericContainer = this.element.querySelector('.e-numericcontainer');\n\t                var links = numericContainer.querySelectorAll('a');\n\t                for (var i = 0; i < links.length; i++) {\n\t                    if (this.parent.getContentTable()) {\n\t                        links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n\t                    }\n\t                }\n\t                var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n\t                classList.forEach(function (value) {\n\t                    var element = _this.element.querySelector(value);\n\t                    if (_this.parent.getContentTable()) {\n\t                        element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n\t                    }\n\t                });\n\t            }\n\t        };\n\t        Page.prototype.dataReady = function (e) {\n\t            this.updateModel(e);\n\t        };\n\t        Page.prototype.refresh = function () {\n\t            this.pagerObj.refresh();\n\t        };\n\t        Page.prototype.goToPage = function (pageNo) {\n\t            this.pagerObj.goToPage(pageNo);\n\t        };\n\t        Page.prototype.updateModel = function (e) {\n\t            this.parent.pageSettings.totalRecordsCount = e.count;\n\t            this.parent.dataBind();\n\t        };\n\t        Page.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n\t                type: events.actionComplete\n\t            }));\n\t        };\n\t        Page.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                this.pagerObj[prop] = newProp[prop];\n\t            }\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.clickHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (this.isForceCancel || util_1.isActionPrevent(gObj)) {\n\t                if (!this.isForceCancel) {\n\t                    gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n\t                    this.isForceCancel = true;\n\t                    this.pagerObj.currentPage = gObj.pageSettings.currentPage;\n\t                    this.pagerObj.dataBind();\n\t                }\n\t                else {\n\t                    this.isForceCancel = false;\n\t                }\n\t                e.cancel = true;\n\t                return;\n\t            }\n\t            var prevPage = this.pageSettings.currentPage;\n\t            this.pageSettings.currentPage = e.currentPage;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'paging',\n\t                previousPage: prevPage,\n\t                currentPage: e.currentPage,\n\t                type: events.actionBegin\n\t            });\n\t        };\n\t        Page.prototype.keyPressHandler = function (e) {\n\t            if (this.canSkipAction(e.action)) {\n\t                return;\n\t            }\n\t            if (e.action in keyActions) {\n\t                e.preventDefault();\n\t                this.element.querySelector(keyActions[e.action]).click();\n\t            }\n\t        };\n\t        Page.prototype.canSkipAction = function (action) {\n\t            var page = {\n\t                pageUp: function (el) { return el.scrollTop !== 0; },\n\t                pageDown: function (el) { return !(el.scrollTop >= el.scrollHeight - el.clientHeight); }\n\t            };\n\t            var activeElement = document.activeElement;\n\t            if (activeElement.classList.contains('e-content') &&\n\t                activeElement.isEqualNode(this.parent.getContent().firstElementChild) && ['pageUp', 'pageDown'].indexOf(action) !== -1) {\n\t                return page[action](this.parent.getContent().firstChild);\n\t            }\n\t            return false;\n\t        };\n\t        Page.prototype.updateExternalMessage = function (message) {\n\t            if (!this.pagerObj.enableExternalMessage) {\n\t                this.pagerObj.enableExternalMessage = true;\n\t                this.pagerObj.dataBind();\n\t            }\n\t            this.pagerObj.externalMessage = message;\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.appendToElement = function (e) {\n\t            this.parent.element.appendChild(this.element);\n\t            this.parent.setGridPager(this.element);\n\t            this.pagerObj.appendTo(this.element);\n\t        };\n\t        Page.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t                this.appendToElement();\n\t            }\n\t        };\n\t        Page.prototype.addEventListener = function () {\n\t            this.handlers = {\n\t                load: this.render,\n\t                end: this.appendToElement,\n\t                ready: this.dataReady,\n\t                complete: this.onActionComplete,\n\t                updateLayout: this.enableAfterRender,\n\t                inboundChange: this.onPropertyChanged,\n\t                keyPress: this.keyPressHandler\n\t            };\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.handlers.load, this);\n\t            this.parent.on(events.initialEnd, this.handlers.end, this);\n\t            this.parent.on(events.dataReady, this.handlers.ready, this);\n\t            this.parent.on(events.pageComplete, this.handlers.complete, this);\n\t            this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n\t            this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n\t            this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n\t        };\n\t        Page.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.handlers.load);\n\t            this.parent.off(events.initialEnd, this.handlers.end);\n\t            this.parent.off(events.dataReady, this.handlers.ready);\n\t            this.parent.off(events.pageComplete, this.handlers.complete);\n\t            this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n\t            this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n\t            this.parent.off(events.keyPressed, this.handlers.keyPress);\n\t        };\n\t        Page.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.pagerObj.destroy();\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        return Page;\n\t    }());\n\t    exports.Page = Page;\n\t    var keyActions = {\n\t        pageUp: '.e-prev',\n\t        pageDown: '.e-next',\n\t        ctrlAltPageDown: '.e-last',\n\t        ctrlAltPageUp: '.e-first',\n\t        altPageUp: '.e-pp',\n\t        altPageDown: '.e-np'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(58), __webpack_require__(59), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, numeric_container_1, pager_message_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Pager = (function (_super) {\n\t        __extends(Pager, _super);\n\t        function Pager(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.defaultConstants = {\n\t                currentPageInfo: '{0} of {1} pages',\n\t                totalItemsInfo: '({0} items)',\n\t                firstPageTooltip: 'Go to first page',\n\t                lastPageTooltip: 'Go to last page',\n\t                nextPageTooltip: 'Go to next page',\n\t                previousPageTooltip: 'Go to previous page',\n\t                nextPagerTooltip: 'Go to next pager',\n\t                previousPagerTooltip: 'Go to previous pager',\n\t                pagerDropDown: 'Items per page'\n\t            };\n\t            _this.containerModule = new numeric_container_1.NumericContainer(_this);\n\t            _this.pagerMessageModule = new pager_message_1.PagerMessage(_this);\n\t            return _this;\n\t        }\n\t        Pager.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.enableExternalMessage) {\n\t                modules.push({\n\t                    member: 'externalMessage',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.checkpagesizes()) {\n\t                modules.push({\n\t                    member: 'pagerdropdown',\n\t                    args: [this]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Pager.prototype.preRender = function () {\n\t        };\n\t        Pager.prototype.render = function () {\n\t            if (this.template) {\n\t                this.pagerTemplate();\n\t            }\n\t            else {\n\t                this.initLocalization();\n\t                this.updateRTL();\n\t                this.totalRecordsCount = this.totalRecordsCount || 0;\n\t                this.renderFirstPrevDivForDevice();\n\t                this.containerModule.render();\n\t                if (this.enablePagerMessage) {\n\t                    this.pagerMessageModule.render();\n\t                }\n\t                this.renderNextLastDivForDevice();\n\t                if (this.checkpagesizes()) {\n\t                    this.pagerdropdownModule.render();\n\t                }\n\t                this.addAriaLabel();\n\t                if (this.enableExternalMessage && this.externalMessageModule) {\n\t                    this.externalMessageModule.render();\n\t                }\n\t                this.refresh();\n\t                this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n\t            }\n\t        };\n\t        Pager.prototype.getPersistData = function () {\n\t            var keyEntity = ['currentPage', 'pageSize'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Pager.prototype.destroy = function () {\n\t            _super.prototype.destroy.call(this);\n\t            this.containerModule.destroy();\n\t            this.pagerMessageModule.destroy();\n\t            this.element.innerHTML = '';\n\t        };\n\t        Pager.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'pageCount':\n\t                        this.containerModule.refreshNumericLinks();\n\t                        this.containerModule.refresh();\n\t                        break;\n\t                    case 'currentPage':\n\t                        if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n\t                            this.currentPageChanged();\n\t                        }\n\t                        break;\n\t                    case 'pageSize':\n\t                    case 'totalRecordsCount':\n\t                    case 'customText':\n\t                        this.refresh();\n\t                        break;\n\t                    case 'pageSizes':\n\t                        if (this.checkpagesizes()) {\n\t                            this.pagerdropdownModule.destroy();\n\t                            this.pagerdropdownModule.render();\n\t                        }\n\t                        this.refresh();\n\t                        break;\n\t                    case 'template':\n\t                        this.templateFn = this.compile(this.template);\n\t                        this.refresh();\n\t                        break;\n\t                    case 'locale':\n\t                        this.initLocalization();\n\t                        this.refresh();\n\t                        break;\n\t                    case 'enableExternalMessage':\n\t                        if (this.enableExternalMessage) {\n\t                            this.externalMessageModule.render();\n\t                        }\n\t                        break;\n\t                    case 'externalMessage':\n\t                        if (this.externalMessageModule) {\n\t                            this.externalMessageModule.refresh();\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.updateRTL();\n\t                        break;\n\t                    case 'enablePagerMessage':\n\t                        if (this.enablePagerMessage) {\n\t                            this.pagerMessageModule.showMessage();\n\t                        }\n\t                        else {\n\t                            this.pagerMessageModule.hideMessage();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Pager.prototype.getLocalizedLabel = function (key) {\n\t            return this.localeObj.getConstant(key);\n\t        };\n\t        Pager.prototype.goToPage = function (pageNo) {\n\t            if (this.checkGoToPage(pageNo)) {\n\t                this.currentPage = pageNo;\n\t                this.dataBind();\n\t            }\n\t        };\n\t        Pager.prototype.checkpagesizes = function () {\n\t            if (this.pageSizes === true || this.pageSizes.length) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n\t            if (newPageNo !== this.currentPage) {\n\t                this.previousPageNo = this.currentPage;\n\t            }\n\t            if (!ej2_base_3.isNullOrUndefined(oldPageNo)) {\n\t                this.previousPageNo = oldPageNo;\n\t            }\n\t            if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.currentPageChanged = function () {\n\t            if (this.enableQueryString) {\n\t                this.updateQueryString(this.currentPage);\n\t            }\n\t            var args = { currentPage: this.currentPage, cancel: false };\n\t            this.trigger('click', args);\n\t            if (!args.cancel) {\n\t                this.refresh();\n\t            }\n\t        };\n\t        Pager.prototype.pagerTemplate = function () {\n\t            var result;\n\t            this.element.classList.add('e-pagertemplate');\n\t            this.compile(this.template);\n\t            var data = {\n\t                currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n\t                totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n\t            };\n\t            result = this.getPagerTemplate()(data);\n\t            util_1.appendChildren(this.element, result);\n\t        };\n\t        Pager.prototype.updateTotalPages = function () {\n\t            this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n\t                (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n\t        };\n\t        Pager.prototype.getPagerTemplate = function () {\n\t            return this.templateFn;\n\t        };\n\t        Pager.prototype.compile = function (template) {\n\t            if (template) {\n\t                var e = void 0;\n\t                try {\n\t                    if (document.querySelectorAll(template).length) {\n\t                        this.templateFn = ej2_base_2.compile(document.querySelector(template).innerHTML.trim());\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    this.templateFn = ej2_base_2.compile(template);\n\t                }\n\t            }\n\t            return undefined;\n\t        };\n\t        Pager.prototype.refresh = function () {\n\t            if (this.template) {\n\t                this.element.innerHTML = '';\n\t                this.updateTotalPages();\n\t                this.pagerTemplate();\n\t            }\n\t            else {\n\t                this.updateRTL();\n\t                this.containerModule.refresh();\n\t                if (this.enablePagerMessage) {\n\t                    this.pagerMessageModule.refresh();\n\t                }\n\t                if (this.enableExternalMessage && this.externalMessageModule) {\n\t                    this.externalMessageModule.refresh();\n\t                }\n\t            }\n\t        };\n\t        Pager.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Pager.prototype.initLocalization = function () {\n\t            this.localeObj = new ej2_base_1.L10n(this.getModuleName(), this.defaultConstants, this.locale);\n\t        };\n\t        Pager.prototype.updateQueryString = function (value) {\n\t            var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n\t            window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n\t        };\n\t        Pager.prototype.getUpdatedURL = function (uri, key, value) {\n\t            var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n\t            if (uri.match(regx)) {\n\t                return uri.replace(regx, '$1' + key + '=' + value + '$2');\n\t            }\n\t            else {\n\t                var hash = '';\n\t                if (uri.indexOf('#') !== -1) {\n\t                    hash = uri.replace(/.*#/, '#');\n\t                    uri = uri.replace(/#.*/, '');\n\t                }\n\t                return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n\t            }\n\t        };\n\t        Pager.prototype.renderFirstPrevDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mfirst e-icons e-icon-first',\n\t                attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mprev e-icons e-icon-prev',\n\t                attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.renderNextLastDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mnext e-icons e-icon-next',\n\t                attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mlast e-icons e-icon-last',\n\t                attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.addAriaLabel = function () {\n\t            var _this = this;\n\t            var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                classList.forEach(function (value) {\n\t                    var element = _this.element.querySelector(value);\n\t                    element.setAttribute('aria-label', element.getAttribute('title'));\n\t                });\n\t            }\n\t        };\n\t        return Pager;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"enableQueryString\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"enableExternalMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Pager.prototype, \"enablePagerMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(12)\n\t    ], Pager.prototype, \"pageSize\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(10)\n\t    ], Pager.prototype, \"pageCount\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1)\n\t    ], Pager.prototype, \"currentPage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"totalRecordsCount\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"externalMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"pageSizes\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"template\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('')\n\t    ], Pager.prototype, \"customText\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"click\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"dropDownChanged\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"created\", void 0);\n\t    Pager = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Pager);\n\t    exports.Pager = Pager;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericContainer = (function () {\n\t        function NumericContainer(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        NumericContainer.prototype.render = function () {\n\t            this.pagerElement = this.pagerModule.element;\n\t            this.renderNumericContainer();\n\t            this.refreshNumericLinks();\n\t            this.wireEvents();\n\t        };\n\t        NumericContainer.prototype.refresh = function () {\n\t            this.pagerModule.updateTotalPages();\n\t            if (this.links.length) {\n\t                this.updateLinksHtml();\n\t            }\n\t            this.updateStyles();\n\t        };\n\t        NumericContainer.prototype.refreshNumericLinks = function () {\n\t            var link;\n\t            var pagerObj = this.pagerModule;\n\t            var div = pagerObj.element.querySelector('.e-numericcontainer');\n\t            var frag = document.createDocumentFragment();\n\t            div.innerHTML = '';\n\t            for (var i = 1; i <= pagerObj.pageCount; i++) {\n\t                link = ej2_base_3.createElement('a', {\n\t                    className: 'e-link e-numericitem e-spacing e-pager-default',\n\t                    attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i }\n\t                });\n\t                if (pagerObj.currentPage === i) {\n\t                    ej2_base_3.classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n\t                }\n\t                frag.appendChild(link);\n\t            }\n\t            div.appendChild(frag);\n\t            this.links = [].slice.call(div.childNodes);\n\t        };\n\t        NumericContainer.prototype.wireEvents = function () {\n\t            ej2_base_2.EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n\t        };\n\t        NumericContainer.prototype.unwireEvents = function () {\n\t            ej2_base_2.EventHandler.remove(this.pagerElement, 'click', this.clickHandler);\n\t        };\n\t        NumericContainer.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t        };\n\t        NumericContainer.prototype.renderNumericContainer = function () {\n\t            this.element = ej2_base_3.createElement('div', {\n\t                className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n\t            });\n\t            this.renderFirstNPrev(this.element);\n\t            this.renderPrevPagerSet(this.element);\n\t            this.element.appendChild(ej2_base_3.createElement('div', { className: 'e-numericcontainer' }));\n\t            this.renderNextPagerSet(this.element);\n\t            this.renderNextNLast(this.element);\n\t            this.pagerModule.element.appendChild(this.element);\n\t        };\n\t        NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n\t            this.first = ej2_base_3.createElement('div', {\n\t                className: 'e-first e-icons e-icon-first',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.prev = ej2_base_3.createElement('div', {\n\t                className: 'e-prev e-icons e-icon-prev',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.first, this.prev], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n\t            this.PP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-pp e-spacing', innerHTML: '...',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.PP);\n\t        };\n\t        NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n\t            this.NP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-np e-spacing',\n\t                innerHTML: '...', attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.NP);\n\t        };\n\t        NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n\t            this.next = ej2_base_3.createElement('div', {\n\t                className: 'e-next e-icons e-icon-next',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.last = ej2_base_3.createElement('div', {\n\t                className: 'e-last e-icons e-icon-last',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.next, this.last], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.clickHandler = function (e) {\n\t            var pagerObj = this.pagerModule;\n\t            var target = e.target;\n\t            pagerObj.previousPageNo = pagerObj.currentPage;\n\t            if (!target.classList.contains('e-disable') && !ej2_base_1.isNullOrUndefined(target.getAttribute('index'))) {\n\t                pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n\t                pagerObj.dataBind();\n\t            }\n\t            return false;\n\t        };\n\t        NumericContainer.prototype.updateLinksHtml = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var currentPageSet;\n\t            var pageNo;\n\t            pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n\t            if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n\t                pagerObj.currentPage = pagerObj.totalPages;\n\t            }\n\t            currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n\t            if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n\t                currentPageSet = currentPageSet - 1;\n\t            }\n\t            for (var i = 0; i < pagerObj.pageCount; i++) {\n\t                pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n\t                if (pageNo <= pagerObj.totalPages) {\n\t                    this.links[i].style.display = '';\n\t                    this.links[i].setAttribute('index', pageNo.toString());\n\t                    this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n\t                    if (pagerObj.currentPage !== pageNo) {\n\t                        this.links[i].classList.add('e-pager-default');\n\t                    }\n\t                    else {\n\t                        this.links[i].classList.remove('e-pager-default');\n\t                    }\n\t                }\n\t                else {\n\t                    this.links[i].style.display = 'none';\n\t                }\n\t                ej2_base_3.classList(this.links[i], [], ['e-currentitem', 'e-active']);\n\t            }\n\t            this.first.setAttribute('index', '1');\n\t            this.last.setAttribute('index', pagerObj.totalPages.toString());\n\t            this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n\t            this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n\t            this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n\t            this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n\t        };\n\t        NumericContainer.prototype.updateStyles = function () {\n\t            this.updateFirstNPrevStyles();\n\t            this.updatePrevPagerSetStyles();\n\t            this.updateNextPagerSetStyles();\n\t            this.updateNextNLastStyles();\n\t            if (this.links.length) {\n\t                ej2_base_3.classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateFirstNPrevStyles = function () {\n\t            var firstPage = ['e-firstpage', 'e-pager-default'];\n\t            var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n\t            var prevPage = ['e-prevpage', 'e-pager-default'];\n\t            var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n\t            if (this.pagerModule.currentPage > 1) {\n\t                ej2_base_3.classList(this.prev, prevPage, prevPageDisabled);\n\t                ej2_base_3.classList(this.first, firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.prev, prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.first, firstPageDisabled, firstPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n\t            if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n\t                ej2_base_3.classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextPagerSetStyles = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n\t            if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n\t                ej2_base_3.classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextNLastStyles = function () {\n\t            var lastPage = ['e-lastpage', 'e-pager-default'];\n\t            var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n\t            var nextPage = ['e-nextpage', 'e-pager-default'];\n\t            var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n\t            var pagerObj = this.pagerModule;\n\t            if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n\t                ej2_base_3.classList(this.last, lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.next, nextPageDisabled, nextPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.last, lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.next, nextPage, nextPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n\t            }\n\t        };\n\t        return NumericContainer;\n\t    }());\n\t    exports.NumericContainer = NumericContainer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerMessage = (function () {\n\t        function PagerMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerMessage.prototype.render = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n\t            this.pageNoMsgElem = ej2_base_1.createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n\t            this.pageCountMsgElem = ej2_base_1.createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n\t            ej2_base_1.append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n\t            this.pagerModule.element.appendChild(div);\n\t            this.refresh();\n\t        };\n\t        PagerMessage.prototype.refresh = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n\t                    pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n\t            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n\t            this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n\t        };\n\t        PagerMessage.prototype.hideMessage = function () {\n\t            if (this.pageNoMsgElem) {\n\t                this.pageNoMsgElem.style.display = 'none';\n\t            }\n\t            if (this.pageCountMsgElem) {\n\t                this.pageCountMsgElem.style.display = 'none';\n\t            }\n\t        };\n\t        PagerMessage.prototype.showMessage = function () {\n\t            if (!this.pageNoMsgElem) {\n\t                this.render();\n\t            }\n\t            this.pageNoMsgElem.style.display = '';\n\t            this.pageCountMsgElem.style.display = '';\n\t        };\n\t        PagerMessage.prototype.destroy = function () {\n\t        };\n\t        PagerMessage.prototype.format = function (str, args) {\n\t            var regx;\n\t            for (var i = 0; i < args.length; i++) {\n\t                regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n\t                str = str.replace(regx, args[i].toString());\n\t            }\n\t            return str;\n\t        };\n\t        return PagerMessage;\n\t    }());\n\t    exports.PagerMessage = PagerMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(61)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_dropdowns_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerDropDown = (function () {\n\t        function PagerDropDown(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerDropDown.prototype.getModuleName = function () {\n\t            return 'pagerdropdown';\n\t        };\n\t        PagerDropDown.prototype.render = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pagerDropDownDiv = ej2_base_1.createElement('div', { className: 'e-pagesizes' });\n\t            var dropDownDiv = ej2_base_1.createElement('div', { className: 'e-pagerdropdown' });\n\t            var defaultTextDiv = ej2_base_1.createElement('div', { className: 'e-pagerconstant' });\n\t            var input = ej2_base_1.createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n\t            this.pagerCons = ej2_base_1.createElement('span', { className: 'e-constant', innerHTML: this.pagerModule.getLocalizedLabel('pagerDropDown') });\n\t            dropDownDiv.appendChild(input);\n\t            defaultTextDiv.appendChild(this.pagerCons);\n\t            this.pagerDropDownDiv.appendChild(dropDownDiv);\n\t            this.pagerDropDownDiv.appendChild(defaultTextDiv);\n\t            this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n\t            var pageSizesModule = this.pagerModule.pageSizes;\n\t            var pageSizesArray = (pageSizesModule.length ? pageSizesModule : [5, 10, 12, 20]);\n\t            var defaultValue = (pageSizesArray).indexOf(this.pagerModule.pageSize) > -1 ? this.pagerModule.pageSize : pageSizesArray[0];\n\t            this.dropDownListObject = new ej2_dropdowns_1.DropDownList({\n\t                dataSource: pageSizesArray,\n\t                value: defaultValue,\n\t                change: this.onChange.bind(this)\n\t            });\n\t            this.dropDownListObject.appendTo(input);\n\t            pagerObj.pageSize = defaultValue;\n\t            pagerObj.dataBind();\n\t            pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n\t        };\n\t        PagerDropDown.prototype.onChange = function (e) {\n\t            this.pagerModule.pageSize = this.dropDownListObject.value;\n\t            this.pagerModule.dataBind();\n\t            this.pagerModule.trigger('dropDownChanged', { pageSize: this.dropDownListObject.value });\n\t        };\n\t        PagerDropDown.prototype.destroy = function (args) {\n\t            if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n\t                this.dropDownListObject.destroy();\n\t                ej2_base_1.remove(this.pagerDropDownDiv);\n\t            }\n\t        };\n\t        return PagerDropDown;\n\t    }());\n\t    exports.PagerDropDown = PagerDropDown;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_61__;\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExternalMessage = (function () {\n\t        function ExternalMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        ExternalMessage.prototype.getModuleName = function () {\n\t            return 'externalMessage';\n\t        };\n\t        ExternalMessage.prototype.render = function () {\n\t            this.element = ej2_base_1.createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n\t            this.pagerModule.element.appendChild(this.element);\n\t            this.refresh();\n\t        };\n\t        ExternalMessage.prototype.refresh = function () {\n\t            if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n\t                this.showMessage();\n\t                this.element.innerHTML = this.pagerModule.externalMessage;\n\t            }\n\t            else {\n\t                this.hideMessage();\n\t            }\n\t        };\n\t        ExternalMessage.prototype.hideMessage = function () {\n\t            this.element.style.display = 'none';\n\t        };\n\t        ExternalMessage.prototype.showMessage = function () {\n\t            this.element.style.display = '';\n\t        };\n\t        ExternalMessage.prototype.destroy = function () {\n\t            ej2_base_1.remove(this.element);\n\t        };\n\t        return ExternalMessage;\n\t    }());\n\t    exports.ExternalMessage = ExternalMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(5), __webpack_require__(8), __webpack_require__(10), __webpack_require__(14), __webpack_require__(13), __webpack_require__(18), __webpack_require__(17), __webpack_require__(64), __webpack_require__(7), __webpack_require__(65), __webpack_require__(22), __webpack_require__(72)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, ej2_base_2, ej2_data_1, events, enum_1, row_renderer_1, cell_1, row_1, filter_cell_renderer_1, util_2, filter_menu_renderer_1, checkbox_filter_1, excel_filter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Filter = (function () {\n\t        function Filter(parent, filterSettings, serviceLocator) {\n\t            this.predicate = 'and';\n\t            this.contentRefresh = true;\n\t            this.values = {};\n\t            this.nextFlMenuOpen = '';\n\t            this.type = { 'menu': filter_menu_renderer_1.FilterMenuRenderer, 'checkbox': checkbox_filter_1.CheckBoxFilter, 'excel': excel_filter_1.ExcelFilter };\n\t            this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            this.fltrDlgDetails = { field: '', isOpen: false };\n\t            this.parent = parent;\n\t            this.filterSettings = filterSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Filter.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.getLocalizedCustomOperators();\n\t            if (this.parent.filterSettings.type === 'filterbar') {\n\t                if (gObj.columns.length) {\n\t                    var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Filter, gObj);\n\t                    var row = void 0;\n\t                    var cellrender = this.serviceLocator.getService('cellRendererFactory');\n\t                    cellrender.addCellRenderer(enum_1.CellType.Filter, new filter_cell_renderer_1.FilterCellRenderer(this.parent, this.serviceLocator));\n\t                    this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n\t                    rowRenderer.element = ej2_base_2.createElement('tr', { className: 'e-filterbar' });\n\t                    row = this.generateRow();\n\t                    row.data = this.values;\n\t                    this.element = rowRenderer.render(row, gObj.getColumns());\n\t                    this.parent.getHeaderContent().querySelector('thead').appendChild(this.element);\n\t                    var detail = this.element.querySelector('.e-detailheadercell');\n\t                    if (detail) {\n\t                        detail.className = 'e-filterbarcell e-mastercell';\n\t                    }\n\t                    var gCells = [].slice.call(this.element.querySelectorAll('.e-grouptopleftcell'));\n\t                    if (gCells.length) {\n\t                        gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n\t                    }\n\t                    this.wireEvents();\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.destroy = function () {\n\t            if (this.filterModule) {\n\t                this.filterModule.destroy();\n\t            }\n\t            this.filterSettings.columns = [];\n\t            this.updateFilterMsg();\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t            if (this.element) {\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t        };\n\t        Filter.prototype.generateRow = function (index) {\n\t            var options = {};\n\t            var row = new row_1.Row(options);\n\t            row.cells = this.generateCells();\n\t            return row;\n\t        };\n\t        Filter.prototype.generateCells = function () {\n\t            var cells = [];\n\t            if (this.parent.allowGrouping) {\n\t                for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n\t                    cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t            }\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var dummy = _a[_i];\n\t                cells.push(this.generateCell(dummy));\n\t            }\n\t            return cells;\n\t        };\n\t        Filter.prototype.generateCell = function (column, cellType) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'rowId': '',\n\t                'column': column,\n\t                'cellType': cellType ? cellType : enum_1.CellType.Filter,\n\t                'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        Filter.prototype.updateModel = function () {\n\t            this.currentFilterObject = {\n\t                field: this.fieldName, operator: this.operator, value: this.value, predicate: this.predicate,\n\t                matchCase: this.matchCase, actualFilterValue: {}, actualOperator: {}\n\t            };\n\t            var index = this.getFilteredColsIndexByField(this.fieldName);\n\t            if (index > -1) {\n\t                this.filterSettings.columns[index] = this.currentFilterObject;\n\t            }\n\t            else {\n\t                this.filterSettings.columns.push(this.currentFilterObject);\n\t            }\n\t            this.filterSettings.columns = this.filterSettings.columns;\n\t            this.parent.dataBind();\n\t        };\n\t        Filter.prototype.getFilteredColsIndexByField = function (field) {\n\t            var cols = this.filterSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Filter.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column.field,\n\t                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n\t            } : {\n\t                requestType: 'filtering', type: events.actionComplete\n\t            };\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, args));\n\t            this.isRemove = false;\n\t        };\n\t        Filter.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'focusin', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n\t        };\n\t        Filter.prototype.unWireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'focusin', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n\t        };\n\t        Filter.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Filter.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.actualFilterValue, col.actualOperator);\n\t                }\n\t                this.updateFilterMsg();\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Filter.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.filterComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.keyPressed, this.keyUpHandler, this);\n\t            this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n\t            this.parent.on(events.headerRefreshed, this.render, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n\t            ej2_base_1.EventHandler.add(document, 'click', this.clickHandler, this);\n\t            this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n\t        };\n\t        Filter.prototype.removeEventListener = function () {\n\t            ej2_base_1.EventHandler.remove(document, 'click', this.clickHandler);\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.filterComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.keyPressed, this.keyUpHandler);\n\t            this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t            this.parent.off(events.filterOpen, this.columnMenuFilter);\n\t            this.parent.off(events.filterMenuClose, this.filterMenuClose);\n\t        };\n\t        Filter.prototype.filterMenuClose = function (args) {\n\t            this.fltrDlgDetails.isOpen = false;\n\t        };\n\t        Filter.prototype.columnMenuFilter = function (args) {\n\t            this.column = args.col;\n\t            var ele = ej2_base_1.closest(args.target, '#' + args.id);\n\t            if (args.isClose && !ele) {\n\t                this.filterModule.closeDialog();\n\t            }\n\t            else if (ele) {\n\t                this.filterDialogOpen(this.column, args.target);\n\t            }\n\t        };\n\t        Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n\t            var gObj = this.parent;\n\t            if (this.filterModule) {\n\t                this.filterModule.closeDialog();\n\t            }\n\t            this.filterModule = new this.type[col.filter.type || this.parent.filterSettings.type](this.parent, gObj.filterSettings, this.serviceLocator, this.customOperators, this);\n\t            this.filterModule.openDialog({\n\t                type: col.type, field: col.field, displayName: col.headerText,\n\t                dataSource: col.filter.dataSource || gObj.dataSource, format: col.format,\n\t                filteredColumns: gObj.filterSettings.columns, target: target,\n\t                sortedColumns: gObj.sortSettings.columns, formatFn: col.getFormatter(),\n\t                parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n\t                hideSearchbox: ej2_base_1.isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n\t                handler: this.filterHandler.bind(this), localizedStrings: {},\n\t                position: { X: left, Y: top }\n\t            });\n\t        };\n\t        Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            var gObj = this.parent;\n\t            var filterCell;\n\t            this.column = gObj.getColumnByField(fieldName);\n\t            if (this.filterSettings.type === 'filterbar') {\n\t                filterCell = gObj.getHeaderContent().querySelector('#' + this.column.field + '_filterBarcell');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, {\n\t                    instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n\t                    arg5: matchCase, arg6: actualFilterValue, arg7: actualOperator\n\t                });\n\t                return;\n\t            }\n\t            this.value = filterValue;\n\t            this.matchCase = matchCase || false;\n\t            this.fieldName = fieldName;\n\t            this.predicate = predicate || 'and';\n\t            this.operator = filterOperator;\n\t            filterValue = !ej2_base_1.isNullOrUndefined(filterValue) && filterValue.toString();\n\t            if (this.column.type === 'number' || this.column.type === 'date') {\n\t                this.matchCase = true;\n\t            }\n\t            this.values[this.column.field] = filterValue;\n\t            gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n\t            if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n\t                this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n\t                this.updateFilterMsg();\n\t                return;\n\t            }\n\t            if (this.filterSettings.type === 'filterbar' && filterCell.value !== filterValue) {\n\t                filterCell.value = filterValue;\n\t            }\n\t            if (this.checkAlreadyColFiltered(this.column.field)) {\n\t                return;\n\t            }\n\t            this.updateModel();\n\t        };\n\t        Filter.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            this.parent.notify(events.modelChanged, {\n\t                                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n\t                                    this.column.field : undefined,\n\t                                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n\t                            });\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        break;\n\t                    case 'showFilterBarStatus':\n\t                        if (e.properties[prop]) {\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        else if (this.parent.allowPaging) {\n\t                            this.parent.updateExternalMessage('');\n\t                        }\n\t                        break;\n\t                    case 'type':\n\t                        this.parent.refreshHeader();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.clearFiltering = function () {\n\t            var cols = util_1.getActualPropFromColl(this.filterSettings.columns);\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeFilteredColsByField(cols[i].field, true);\n\t            }\n\t            this.isRemove = true;\n\t            this.filterStatusMsg = '';\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.checkAlreadyColFiltered = function (field) {\n\t            var columns = this.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var col = columns_1[_i];\n\t                if (col.field === field && col.value === this.value &&\n\t                    col.operator === this.operator && col.predicate === this.predicate) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            var fCell;\n\t            var cols = this.filterSettings.columns;\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, {\n\t                    instance: this, handler: this.removeFilteredColsByField,\n\t                    arg1: field, arg2: isClearFilterBar\n\t                });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (this.filterSettings.type === 'filterbar' && !isClearFilterBar) {\n\t                        fCell = this.parent.getHeaderContent().querySelector('#' + cols[i].field + '_filterBarcell');\n\t                        delete this.values[field];\n\t                    }\n\t                    cols.splice(i, 1);\n\t                    var fltrElement = this.parent.getColumnHeaderByField(field);\n\t                    fltrElement.removeAttribute('aria-filtered');\n\t                    if (this.filterSettings.type !== 'filterbar') {\n\t                        fltrElement.querySelector('.e-icon-filter').classList.remove('e-filtered');\n\t                    }\n\t                    this.isRemove = true;\n\t                    this.parent.notify(events.modelChanged, {\n\t                        requestType: 'filtering', type: events.actionBegin\n\t                    });\n\t                    break;\n\t                }\n\t            }\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.getModuleName = function () {\n\t            return 'filter';\n\t        };\n\t        Filter.prototype.keyUpHandler = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            if (target && ej2_base_2.matches(target, '.e-filterbar input')) {\n\t                this.column = gObj.getColumnByField(target.id.split('_')[0]);\n\t                if (!this.column) {\n\t                    return;\n\t                }\n\t                this.updateCrossIcon(target);\n\t                if ((this.filterSettings.mode === 'immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n\t                    this.value = target.value.trim();\n\t                    this.processFilter(e);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.updateSpanClass = function (e) {\n\t            var target = e.target;\n\t            if (e.type === 'mousedown' && target.classList.contains('e-cancel')) {\n\t                var targetText = target.previousElementSibling;\n\t                targetText.value = '';\n\t                target.classList.add('e-hide');\n\t                targetText.focus();\n\t                e.preventDefault();\n\t            }\n\t            if (e.type === 'focusin' && target.classList.contains('e-filtertext') && !target.disabled) {\n\t                if (this.lastFilterElement) {\n\t                    this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t                }\n\t                this.updateCrossIcon(target);\n\t                this.lastFilterElement = target;\n\t            }\n\t            if (e.type === 'focusin' && !target.classList.contains('e-filtertext') && this.lastFilterElement) {\n\t                this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.updateCrossIcon = function (element) {\n\t            if (element.value.length) {\n\t                element.nextElementSibling.classList.remove('e-hide');\n\t            }\n\t        };\n\t        Filter.prototype.updateFilterMsg = function () {\n\t            if (this.filterSettings.type === 'filterbar') {\n\t                var gObj = this.parent;\n\t                var columns = this.filterSettings.columns;\n\t                var formater = this.serviceLocator.getService('valueFormatter');\n\t                var column = void 0;\n\t                var value = void 0;\n\t                if (!this.filterSettings.showFilterBarStatus) {\n\t                    return;\n\t                }\n\t                if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n\t                    this.filterStatusMsg = '';\n\t                    for (var index = 0; index < columns.length; index++) {\n\t                        column = gObj.getColumnByField(columns[index].field);\n\t                        if (index) {\n\t                            this.filterStatusMsg += ' && ';\n\t                        }\n\t                        this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n\t                    }\n\t                }\n\t                if (gObj.allowPaging) {\n\t                    gObj.updateExternalMessage(this.filterStatusMsg);\n\t                }\n\t                this.filterStatusMsg = '';\n\t            }\n\t        };\n\t        Filter.prototype.checkForSkipInput = function (column, value) {\n\t            var isSkip;\n\t            var skipInput;\n\t            if (column.type === 'number') {\n\t                skipInput = ['=', ' ', '!'];\n\t                if (ej2_data_1.DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n\t                    isSkip = true;\n\t                }\n\t            }\n\t            else if (column.type === 'string') {\n\t                skipInput = ['>', '<', '=', '!'];\n\t                for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n\t                    var val = value_1[_i];\n\t                    if (skipInput.indexOf(val) > -1) {\n\t                        isSkip = true;\n\t                    }\n\t                }\n\t            }\n\t            return isSkip;\n\t        };\n\t        Filter.prototype.processFilter = function (e) {\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        Filter.prototype.startTimer = function (e) {\n\t            var _this = this;\n\t            this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n\t        };\n\t        Filter.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Filter.prototype.onTimerTick = function () {\n\t            var filterElement = this.parent.getHeaderContent()\n\t                .querySelector('#' + this.column.field + '_filterBarcell');\n\t            var filterValue = JSON.parse(JSON.stringify(filterElement.value));\n\t            this.stopTimer();\n\t            if (this.value === '') {\n\t                this.removeFilteredColsByField(this.column.field);\n\t                return;\n\t            }\n\t            this.validateFilterValue(this.value);\n\t            this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase);\n\t            this.values[this.column.field] = filterValue;\n\t            filterElement.value = filterValue;\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.validateFilterValue = function (value) {\n\t            var gObj = this.parent;\n\t            var skipInput;\n\t            var index;\n\t            this.matchCase = true;\n\t            switch (this.column.type) {\n\t                case 'number':\n\t                    this.operator = this.filterOperators.equal;\n\t                    skipInput = ['>', '<', '=', '!'];\n\t                    for (var i = 0; i < value.length; i++) {\n\t                        if (skipInput.indexOf(value[i]) > -1) {\n\t                            index = i;\n\t                            break;\n\t                        }\n\t                    }\n\t                    this.getOperator(value.substring(index));\n\t                    if (index !== 0) {\n\t                        this.value = value.substring(0, index);\n\t                    }\n\t                    if (this.value !== '' && value.length >= 1) {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                    }\n\t                    if (isNaN(this.value)) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                case 'datetime':\n\t                    this.operator = this.filterOperators.equal;\n\t                    this.getOperator(value);\n\t                    if (this.value !== '') {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                        if (ej2_base_1.isNullOrUndefined(this.value)) {\n\t                            this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'string':\n\t                    this.matchCase = false;\n\t                    if (value.charAt(0) === '*') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(value.length - 1) === '%') {\n\t                        this.value = this.value.slice(0, -1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(0) === '%') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.endsWith;\n\t                    }\n\t                    else {\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    break;\n\t                case 'boolean':\n\t                    if (value.toLowerCase() === 'true' || value === '1') {\n\t                        this.value = true;\n\t                    }\n\t                    else if (value.toLowerCase() === 'false' || value === '0') {\n\t                        this.value = false;\n\t                    }\n\t                    else if (value.length) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    this.operator = this.filterOperators.equal;\n\t                    break;\n\t                default:\n\t                    this.operator = this.filterOperators.equal;\n\t            }\n\t        };\n\t        Filter.prototype.getOperator = function (value) {\n\t            var singleOp = value.charAt(0);\n\t            var multipleOp = value.slice(0, 2);\n\t            var operators = ej2_base_1.extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, ej2_data_1.DataUtil.operatorSymbols);\n\t            if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n\t                this.operator = operators[singleOp];\n\t                this.value = value.substring(1);\n\t                if (!this.operator) {\n\t                    this.operator = operators[multipleOp];\n\t                    this.value = value.substring(2);\n\t                }\n\t            }\n\t            if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n\t                if (this.value.charAt(0) === '=') {\n\t                    this.operator = this.operator + 'orequal';\n\t                    this.value = this.value.substring(1);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.columnPositionChanged = function (e) {\n\t            var filterCells = [].slice.call(this.element.querySelectorAll('.e-filterbarcell'));\n\t            filterCells.splice(e.toIndex, 0, filterCells.splice(e.fromIndex, 1)[0]);\n\t            this.element.innerHTML = '';\n\t            for (var _i = 0, filterCells_1 = filterCells; _i < filterCells_1.length; _i++) {\n\t                var cell = filterCells_1[_i];\n\t                this.element.appendChild(cell);\n\t            }\n\t        };\n\t        Filter.prototype.getLocalizedCustomOperators = function () {\n\t            var numOptr = [\n\t                { value: 'equal', text: this.l10n.getConstant('Equal') },\n\t                { value: 'greaterThan', text: this.l10n.getConstant('GreaterThan') },\n\t                { value: 'greaterThanOrEqual', text: this.l10n.getConstant('GreaterThanOrEqual') },\n\t                { value: 'lessThan', text: this.l10n.getConstant('LessThan') },\n\t                { value: 'lessThanOrEqual', text: this.l10n.getConstant('LessThanOrEqual') },\n\t                { value: 'notEqual', text: this.l10n.getConstant('NotEqual') }\n\t            ];\n\t            this.customOperators = {\n\t                stringOperator: [\n\t                    { value: 'startsWith', text: this.l10n.getConstant('StartsWith') },\n\t                    { value: 'endsWith', text: this.l10n.getConstant('EndsWith') },\n\t                    { value: 'contains', text: this.l10n.getConstant('Contains') },\n\t                    { value: 'equal', text: this.l10n.getConstant('Equal') }, { value: 'notEqual', text: this.l10n.getConstant('NotEqual') }\n\t                ],\n\t                numberOperator: numOptr,\n\t                dateOperator: numOptr,\n\t                datetimeOperator: numOptr,\n\t                booleanOperator: [\n\t                    { value: 'equal', text: this.l10n.getConstant('Equal') }, { value: 'notEqual', text: this.l10n.getConstant('NotEqual') }\n\t                ]\n\t            };\n\t        };\n\t        ;\n\t        Filter.prototype.clickHandler = function (e) {\n\t            if (this.parent.filterSettings.type === 'menu' ||\n\t                this.parent.filterSettings.type === 'checkbox' || this.parent.filterSettings.type === 'excel') {\n\t                var gObj = this.parent;\n\t                var target = e.target;\n\t                var elem = util_2.parentsUntil(target, 'e-filter-popup');\n\t                if (elem) {\n\t                    return;\n\t                }\n\t                if (target.classList.contains('e-filtermenudiv')) {\n\t                    var col = gObj.getColumnByUid(util_2.parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n\t                    var gClient = gObj.element.getBoundingClientRect();\n\t                    var fClient = target.getBoundingClientRect();\n\t                    this.column = col;\n\t                    if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n\t                        return;\n\t                    }\n\t                    if (this.filterModule) {\n\t                        this.filterModule.closeDialog();\n\t                    }\n\t                    this.fltrDlgDetails = { field: col.field, isOpen: true };\n\t                    this.filterDialogOpen(this.column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n\t                }\n\t                else {\n\t                    var datepickerEle = target.classList.contains('e-day');\n\t                    if (this.filterModule &&\n\t                        (!util_2.parentsUntil(target, 'e-popup-wrapper')\n\t                            && (!ej2_base_1.closest(target, '.e-filter-item.e-menu-item'))\n\t                            && (!util_2.parentsUntil(target, 'e-popup'))) && !datepickerEle) {\n\t                        this.filterModule.closeDialog(target);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.filterHandler = function (args) {\n\t            var filterIconElement;\n\t            var dataManager = new ej2_data_1.DataManager(this.filterSettings.columns);\n\t            var query = new ej2_data_1.Query().where('field', this.filterOperators.equal, args.field);\n\t            var result = dataManager.executeLocal(query);\n\t            for (var i = 0; i < result.length; i++) {\n\t                var index = -1;\n\t                for (var j = 0; j < this.filterSettings.columns.length; j++) {\n\t                    if (result[i].field === this.filterSettings.columns[j].field) {\n\t                        index = j;\n\t                        break;\n\t                    }\n\t                }\n\t                if (index !== -1) {\n\t                    this.filterSettings.columns.splice(index, 1);\n\t                }\n\t            }\n\t            var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n\t            filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n\t            if (args.action === 'filtering') {\n\t                this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n\t                if (this.filterSettings.columns.length && filterIconElement) {\n\t                    filterIconElement.classList.add('e-filtered');\n\t                }\n\t            }\n\t            else {\n\t                if (filterIconElement) {\n\t                    filterIconElement.classList.remove('e-filtered');\n\t                }\n\t                this.parent.refresh();\n\t            }\n\t            this.parent.dataBind();\n\t        };\n\t        return Filter;\n\t    }());\n\t    exports.Filter = Filter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FilterCellRenderer = (function (_super) {\n\t        __extends(FilterCellRenderer, _super);\n\t        function FilterCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-filterbarcell' });\n\t            return _this;\n\t        }\n\t        FilterCellRenderer.prototype.getGui = function () {\n\t            return ej2_base_2.createElement('div');\n\t        };\n\t        FilterCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var innerDIV = this.getGui();\n\t            var input;\n\t            var column = cell.column;\n\t            if (column.type !== 'checkbox') {\n\t                if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                    node.classList.add('e-fltrtemp');\n\t                    ej2_base_2.attributes(innerDIV, {\n\t                        'class': 'e-fltrtempdiv'\n\t                    });\n\t                    if (ej2_base_1.isNullOrUndefined(column.filterBarTemplate.create)) {\n\t                        input = ej2_base_2.createElement('input', {\n\t                            id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                            attrs: { type: 'search', title: column.headerText }\n\t                        });\n\t                        innerDIV.appendChild(input);\n\t                    }\n\t                    else {\n\t                        var args = { column: column };\n\t                        var temp = column.filterBarTemplate.create;\n\t                        if (typeof temp === 'string') {\n\t                            temp = ej2_base_1.getValue(temp, window);\n\t                        }\n\t                        input = temp(args);\n\t                        if (typeof input === 'string') {\n\t                            var div = ej2_base_2.createElement('div');\n\t                            div.innerHTML = input;\n\t                            input = div.firstChild;\n\t                        }\n\t                        ej2_base_2.attributes(innerDIV, {\n\t                            class: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                            title: column.headerText,\n\t                            id: column.field + '_filterBarcell',\n\t                        });\n\t                        innerDIV.appendChild(input);\n\t                    }\n\t                }\n\t                else {\n\t                    ej2_base_2.attributes(innerDIV, {\n\t                        'class': 'e-filterdiv e-fltrinputdiv'\n\t                    });\n\t                    input = ej2_base_2.createElement('input', {\n\t                        id: column.field + '_filterBarcell', className: 'e-filtertext',\n\t                        attrs: {\n\t                            type: 'search', title: column.headerText + cell.attributes.title,\n\t                            value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n\t                        }\n\t                    });\n\t                    innerDIV.appendChild(input);\n\t                    innerDIV.appendChild(ej2_base_2.createElement('span', {\n\t                        className: 'e-cancel e-hide e-icons e-icon-hide',\n\t                        attrs: { 'aria-label': 'clear filter cell', tabindex: '-1' }\n\t                    }));\n\t                }\n\t                if (column.allowFiltering === false || column.field === '' || ej2_base_1.isNullOrUndefined(column.field)) {\n\t                    input.setAttribute('disabled', 'true');\n\t                    input.classList.add('e-disable');\n\t                }\n\t                if (!column.visible) {\n\t                    node.classList.add('e-hide');\n\t                }\n\t                if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                    var templateRead = column.filterBarTemplate.read;\n\t                    var templateWrite = column.filterBarTemplate.write;\n\t                    var args = { element: input, column: column };\n\t                    if (typeof templateRead === 'string') {\n\t                        templateRead = args.column = ej2_base_1.getValue(templateRead, window);\n\t                    }\n\t                    if (typeof templateWrite === 'string') {\n\t                        templateWrite = ej2_base_1.getValue(templateWrite, window);\n\t                    }\n\t                    templateWrite.call(this, args);\n\t                }\n\t                this.appendHtml(node, innerDIV);\n\t            }\n\t            return node;\n\t        };\n\t        FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return FilterCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.FilterCellRenderer = FilterCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(67), __webpack_require__(66), __webpack_require__(68), __webpack_require__(69), __webpack_require__(70), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_popups_1, filter_menu_operator_1, string_filter_ui_1, number_filter_ui_1, boolean_filter_ui_1, date_filter_ui_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FilterMenuRenderer = (function () {\n\t        function FilterMenuRenderer(parent, filterSettings, serviceLocator, customFltrOperators, fltrObj) {\n\t            this.colTypes = {\n\t                'string': string_filter_ui_1.StringFilterUI, 'number': number_filter_ui_1.NumberFilterUI, 'date': date_filter_ui_1.DateFilterUI, 'boolean': boolean_filter_ui_1.BooleanFilterUI, 'datetime': date_filter_ui_1.DateFilterUI\n\t            };\n\t            this.parent = parent;\n\t            this.filterSettings = filterSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.customFilterOperators = customFltrOperators;\n\t            this.filterObj = fltrObj;\n\t            this.flMuiObj = new filter_menu_operator_1.FlMenuOptrUI(this.parent, this.customFilterOperators, this.serviceLocator);\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t        }\n\t        FilterMenuRenderer.prototype.openDialog = function (args) {\n\t            this.col = this.parent.getColumnByField(args.field);\n\t            if (ej2_base_1.isNullOrUndefined(this.col.filter) || (ej2_base_1.isNullOrUndefined(this.col.filter.type) || this.col.filter.type === 'menu')) {\n\t                this.renderDlgContent(args.target, this.col);\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.closeDialog = function () {\n\t            var elem = document.getElementById(this.dlgObj.element.id);\n\t            if (this.dlgObj && !this.dlgObj.isDestroyed && elem) {\n\t                this.parent.notify(events.filterMenuClose, { field: this.col.field });\n\t                this.dlgObj.destroy();\n\t                ej2_base_1.remove(elem);\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.renderDlgContent = function (target, column) {\n\t            var mainDiv = ej2_base_2.createElement('div', { className: 'e-flmenu-maindiv', id: column.uid + '-flmenu' });\n\t            this.dlgDiv = ej2_base_2.createElement('div', { className: 'e-flmenu', id: column.uid + '-flmdlg' });\n\t            this.parent.element.appendChild(this.dlgDiv);\n\t            this.dlgObj = new ej2_popups_1.Dialog({\n\t                showCloseIcon: false,\n\t                closeOnEscape: false,\n\t                locale: this.parent.locale,\n\t                visible: false,\n\t                enableRtl: this.parent.enableRtl,\n\t                created: this.dialogCreated.bind(this, target, column),\n\t                position: this.parent.element.classList.contains('e-device') ? { X: 'center', Y: 'center' } : { X: '', Y: '' },\n\t                target: this.parent.element.classList.contains('e-device') ? document.body : this.parent.element,\n\t                buttons: [{\n\t                        click: this.filterBtnClick.bind(this, column),\n\t                        buttonModel: {\n\t                            content: this.l10n.getConstant('FilterButton'), isPrimary: true, cssClass: 'e-flmenu-okbtn'\n\t                        }\n\t                    },\n\t                    {\n\t                        click: this.clearBtnClick.bind(this, column),\n\t                        buttonModel: { content: this.l10n.getConstant('ClearButton'), cssClass: 'e-flmenu-cancelbtn' }\n\t                    }],\n\t                content: mainDiv,\n\t                width: (!ej2_base_1.isNullOrUndefined(util_1.parentsUntil(target, 'e-bigger'))) || this.parent.element.classList.contains('e-device') ? 260 : 250,\n\t                animationSettings: { effect: 'None' },\n\t                cssClass: 'e-filter-popup'\n\t            });\n\t            this.dlgObj.appendTo(this.dlgDiv);\n\t        };\n\t        FilterMenuRenderer.prototype.dialogCreated = function (target, column) {\n\t            if (!ej2_base_2.Browser.isDevice) {\n\t                util_1.getFilterMenuPostion(target, this.dlgObj);\n\t            }\n\t            this.renderFilterUI(target, column);\n\t            this.parent.notify(events.filterDialogCreated, {});\n\t            this.dlgObj.element.style.maxHeight = '350px';\n\t            this.dlgObj.show();\n\t            this.writeMethod(column, this.dlgObj.element.querySelector('#' + column.uid + '-flmenu'));\n\t        };\n\t        FilterMenuRenderer.prototype.renderFilterUI = function (target, col) {\n\t            var dlgConetntEle = this.dlgObj.element.querySelector('.e-flmenu-maindiv');\n\t            this.renderOperatorUI(dlgConetntEle, target, col);\n\t            this.renderFlValueUI(dlgConetntEle, target, col);\n\t        };\n\t        FilterMenuRenderer.prototype.renderOperatorUI = function (dlgConetntEle, target, column) {\n\t            this.flMuiObj.renderOperatorUI(dlgConetntEle, target, column, this.dlgObj);\n\t        };\n\t        FilterMenuRenderer.prototype.renderFlValueUI = function (dlgConetntEle, target, column) {\n\t            var valueDiv = ej2_base_2.createElement('div', { className: 'e-flmenu-valuediv' });\n\t            dlgConetntEle.appendChild(valueDiv);\n\t            var args = { target: valueDiv, column: column, getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj };\n\t            var instanceofFilterUI = new this.colTypes[column.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n\t            if (!ej2_base_1.isNullOrUndefined(column.filter) && !ej2_base_1.isNullOrUndefined(column.filter.ui)\n\t                && !ej2_base_1.isNullOrUndefined(column.filter.ui.create)) {\n\t                var temp = column.filter.ui.create;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                column.filter.ui.create({\n\t                    column: column, target: valueDiv,\n\t                    getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj\n\t                });\n\t            }\n\t            else {\n\t                instanceofFilterUI.create({\n\t                    column: column, target: valueDiv,\n\t                    getOptrInstance: this.flMuiObj, localizeText: this.l10n, dialogObj: this.dlgObj\n\t                });\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.writeMethod = function (col, dlgContentEle) {\n\t            var flValue;\n\t            var target = dlgContentEle.querySelector('.e-flmenu-valinput');\n\t            var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n\t            var columns = this.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                if (col.field === column.field) {\n\t                    flValue = column.value;\n\t                }\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(col.filter) && !ej2_base_1.isNullOrUndefined(col.filter.ui)\n\t                && !ej2_base_1.isNullOrUndefined(col.filter.ui.write)) {\n\t                var temp = col.filter.ui.write;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                col.filter.ui.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n\t            }\n\t            else {\n\t                instanceofFilterUI.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.filterBtnClick = function (col) {\n\t            var flValue;\n\t            var flOptrValue;\n\t            var targ = this.dlgObj.element.querySelector('.e-flmenu-valuediv input');\n\t            flOptrValue = this.flMuiObj.getFlOperator();\n\t            var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n\t            if (!ej2_base_1.isNullOrUndefined(col.filter) &&\n\t                !ej2_base_1.isNullOrUndefined(col.filter.ui) && !ej2_base_1.isNullOrUndefined(col.filter.ui.read)) {\n\t                var temp = col.filter.ui.read;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                flValue = col.filter.ui.read({ element: targ, column: col, operator: flOptrValue, fltrObj: this.filterObj });\n\t            }\n\t            else {\n\t                instanceofFilterUI.read(targ, col, flOptrValue, this.filterObj);\n\t            }\n\t            var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n\t            var column = this.parent.element.querySelector('[e-mappinguid=\"' + col.uid + '\"]').parentElement;\n\t            var flIcon = column.querySelector(iconClass);\n\t            if (flIcon) {\n\t                flIcon.classList.add('e-filtered');\n\t            }\n\t            this.closeDialog();\n\t        };\n\t        FilterMenuRenderer.prototype.clearBtnClick = function (column) {\n\t            this.filterObj.removeFilteredColsByField(column.field);\n\t            this.closeDialog();\n\t            var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n\t            var col = this.parent.element.querySelector('[e-mappinguid=\"' + column.uid + '\"]').parentElement;\n\t            var flIcon = col.querySelector(iconClass);\n\t            if (flIcon) {\n\t                flIcon.classList.remove('e-filtered');\n\t            }\n\t        };\n\t        FilterMenuRenderer.prototype.destroy = function () {\n\t        };\n\t        return FilterMenuRenderer;\n\t    }());\n\t    exports.FilterMenuRenderer = FilterMenuRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(61), __webpack_require__(8), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_dropdowns_1, ej2_data_1, ej2_base_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StringFilterUI = (function () {\n\t        function StringFilterUI(parent, serviceLocator, filterSettings) {\n\t            this.parent = parent;\n\t            this.serLocator = serviceLocator;\n\t            this.filterSettings = filterSettings;\n\t        }\n\t        StringFilterUI.prototype.create = function (args) {\n\t            var _this = this;\n\t            var data;\n\t            var floptr;\n\t            this.instance = ej2_base_1.createElement('input', { className: 'e-flmenu-input', id: 'strui-' + args.column.uid });\n\t            args.target.appendChild(this.instance);\n\t            this.dialogObj = args.dialogObj;\n\t            this.actObj = new ej2_dropdowns_1.AutoComplete({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                fields: { value: args.column.field },\n\t                locale: this.parent.locale,\n\t                enableRtl: this.parent.enableRtl,\n\t                sortOrder: 'Ascending',\n\t                open: this.openPopup.bind(this),\n\t                cssClass: 'e-popup-flmenu',\n\t                focus: function () {\n\t                    _this.actObj.filterType = args.getOptrInstance.getFlOperator();\n\t                },\n\t                autofill: true,\n\t                placeholder: args.localizeText.getConstant('EnterValue'),\n\t                actionComplete: function (e) {\n\t                    e.result = e.result.filter(function (obj, index, arr) {\n\t                        return arr.map(function (mapObj) {\n\t                            return mapObj[_this.actObj.fields.value];\n\t                        }).indexOf(obj[_this.actObj.fields.value]) === index;\n\t                    });\n\t                }\n\t            });\n\t            this.actObj.appendTo(this.instance);\n\t        };\n\t        StringFilterUI.prototype.write = function (args) {\n\t            var columns = this.filterSettings.columns;\n\t            if (args.filteredValue !== '') {\n\t                var struiObj = document.querySelector('#strui-' + args.column.uid).ej2_instances[0];\n\t                struiObj.value = args.filteredValue;\n\t            }\n\t        };\n\t        StringFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n\t            var actuiObj = document.querySelector('#strui-' + column.uid).ej2_instances[0];\n\t            var filterValue = actuiObj.value;\n\t            filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n\t        };\n\t        StringFilterUI.prototype.openPopup = function (args) {\n\t            util_1.getZIndexCalcualtion(args, this.dialogObj);\n\t        };\n\t        return StringFilterUI;\n\t    }());\n\t    exports.StringFilterUI = StringFilterUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(61), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_dropdowns_1, ej2_base_1, ej2_base_2, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FlMenuOptrUI = (function () {\n\t        function FlMenuOptrUI(parent, customFltrOperators, serviceLocator, filterSettings) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.filterSettings = filterSettings;\n\t            this.customFilterOperators = customFltrOperators;\n\t        }\n\t        FlMenuOptrUI.prototype.renderOperatorUI = function (dlgConetntEle, target, column, dlgObj) {\n\t            this.dialogObj = dlgObj;\n\t            var optr = column.type + 'Operator';\n\t            this.optrData = this.customOptr = (!ej2_base_1.isNullOrUndefined(this.parent.filterSettings.operators) &&\n\t                !ej2_base_1.isNullOrUndefined(this.parent.filterSettings.operators[optr])) ?\n\t                this.parent.filterSettings.operators[optr] : this.customFilterOperators[optr];\n\t            var dropDatasource = this.customOptr;\n\t            var selectedValue = this.dropSelectedVal(column, optr);\n\t            var optrDiv = ej2_base_2.createElement('div', { className: 'e-flm_optrdiv' });\n\t            dlgConetntEle.appendChild(optrDiv);\n\t            var optrInput = ej2_base_2.createElement('input', { id: column.uid + '-floptr' });\n\t            optrDiv.appendChild(optrInput);\n\t            this.dropOptr = new ej2_dropdowns_1.DropDownList({\n\t                dataSource: dropDatasource,\n\t                fields: { text: 'text', value: 'value' },\n\t                open: this.dropDownOpen.bind(this),\n\t                text: selectedValue\n\t            });\n\t            this.dropOptr.appendTo('#' + column.uid + '-floptr');\n\t        };\n\t        FlMenuOptrUI.prototype.dropDownOpen = function (args) {\n\t            args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n\t        };\n\t        FlMenuOptrUI.prototype.dropSelectedVal = function (col, optr) {\n\t            var selValue = '';\n\t            var columns = this.parent.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                if (col.field === column.field) {\n\t                    var selectedField = new ej2_data_1.DataManager(this.optrData).executeLocal(new ej2_data_1.Query().where('value', 'equal', column.operator));\n\t                    selValue = !ej2_base_1.isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n\t                }\n\t            }\n\t            if (selValue === '') {\n\t                selValue = this.optrData[0].text;\n\t            }\n\t            return selValue;\n\t        };\n\t        FlMenuOptrUI.prototype.getFlOperator = function () {\n\t            return this.dropOptr.value;\n\t        };\n\t        return FlMenuOptrUI;\n\t    }());\n\t    exports.FlMenuOptrUI = FlMenuOptrUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(24), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_inputs_1, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumberFilterUI = (function () {\n\t        function NumberFilterUI(parent, serviceLocator, filterSettings) {\n\t            this.filterSettings = filterSettings;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t        }\n\t        NumberFilterUI.prototype.create = function (args) {\n\t            this.instance = ej2_base_1.createElement('input', { className: 'e-flmenu-input', id: 'numberui-' + args.column.uid });\n\t            args.target.appendChild(this.instance);\n\t            this.numericTxtObj = new ej2_inputs_1.NumericTextBox({\n\t                format: args.column.format,\n\t                locale: this.parent.locale,\n\t                cssClass: 'e-popup-flmenu',\n\t                placeholder: args.localizeText.getConstant('EnterValue'),\n\t                enableRtl: this.parent.enableRtl,\n\t            });\n\t            this.numericTxtObj.appendTo(this.instance);\n\t        };\n\t        NumberFilterUI.prototype.write = function (args) {\n\t            var numberuiObj = document.querySelector('#numberui-' + args.column.uid).ej2_instances[0];\n\t            numberuiObj.value = args.filteredValue;\n\t        };\n\t        NumberFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n\t            var numberuiObj = document.querySelector('#numberui-' + column.uid).ej2_instances[0];\n\t            var filterValue = numberuiObj.value;\n\t            filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n\t        };\n\t        return NumberFilterUI;\n\t    }());\n\t    exports.NumberFilterUI = NumberFilterUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(7), __webpack_require__(8), __webpack_require__(61), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, ej2_data_1, ej2_dropdowns_1, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BooleanFilterUI = (function () {\n\t        function BooleanFilterUI(parent, serviceLocator, filterSettings) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.filterSettings = filterSettings;\n\t        }\n\t        BooleanFilterUI.prototype.create = function (args) {\n\t            var data;\n\t            this.elem = ej2_base_1.createElement('input', { className: 'e-flmenu-input', id: 'bool-ui-' + args.column.uid });\n\t            args.target.appendChild(this.elem);\n\t            this.dialogObj = args.dialogObj;\n\t            this.dropInstance = new ej2_dropdowns_1.DropDownList({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                query: new ej2_data_1.Query().select(args.column.field),\n\t                fields: { text: args.column.field, value: args.column.field },\n\t                placeholder: args.localizeText.getConstant('SelectValue'),\n\t                cssClass: 'e-popup-flmenu',\n\t                locale: this.parent.locale,\n\t                enableRtl: this.parent.enableRtl,\n\t                open: this.openPopup.bind(this),\n\t                actionComplete: this.ddActionComplete\n\t            });\n\t            this.dropInstance.appendTo(this.elem);\n\t        };\n\t        BooleanFilterUI.prototype.write = function (args) {\n\t            var drpuiObj = document.querySelector('#bool-ui-' + args.column.uid).ej2_instances[0];\n\t            drpuiObj.text = !ej2_base_1.isNullOrUndefined(args.filteredValue) ? args.filteredValue : '';\n\t        };\n\t        BooleanFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n\t            var drpuiObj = document.querySelector('#bool-ui-' + column.uid).ej2_instances[0];\n\t            var filterValue = drpuiObj.value;\n\t            filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n\t        };\n\t        BooleanFilterUI.prototype.ddActionComplete = function (e) {\n\t            e.result = util_1.distinctStringValues(e.result);\n\t        };\n\t        BooleanFilterUI.prototype.openPopup = function (args) {\n\t            util_1.getZIndexCalcualtion(args, this.dialogObj);\n\t        };\n\t        return BooleanFilterUI;\n\t    }());\n\t    exports.BooleanFilterUI = BooleanFilterUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(71), __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_calendars_1, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DateFilterUI = (function () {\n\t        function DateFilterUI(parent, serviceLocator, filterSettings) {\n\t            this.parent = parent;\n\t            this.locator = serviceLocator;\n\t            this.fltrSettings = filterSettings;\n\t        }\n\t        DateFilterUI.prototype.create = function (args) {\n\t            var intl = new ej2_base_2.Internationalization();\n\t            var colFormat = args.column.format;\n\t            var format = intl.getDatePattern({ type: 'date', skeleton: colFormat }, false);\n\t            this.dialogObj = args.dialogObj;\n\t            this.inputElem = ej2_base_1.createElement('input', { className: 'e-flmenu-input', id: 'dateui-' + args.column.uid });\n\t            args.target.appendChild(this.inputElem);\n\t            this.datePickerObj = new ej2_calendars_1.DatePicker({\n\t                format: format,\n\t                cssClass: 'e-popup-flmenu',\n\t                placeholder: args.localizeText.getConstant('ChooseDate'),\n\t                width: '100%',\n\t                locale: this.parent.locale,\n\t                enableRtl: this.parent.enableRtl,\n\t                open: this.openPopup.bind(this),\n\t            });\n\t            this.datePickerObj.appendTo(this.inputElem);\n\t        };\n\t        DateFilterUI.prototype.write = function (args) {\n\t            var columns = this.fltrSettings.columns;\n\t            var dateuiObj = document.querySelector('#dateui-' + args.column.uid).ej2_instances[0];\n\t            dateuiObj.value = args.filteredValue;\n\t        };\n\t        DateFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n\t            var dateuiObj = document.querySelector('#dateui-' + column.uid).ej2_instances[0];\n\t            var filterValue = dateuiObj.value;\n\t            filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n\t        };\n\t        DateFilterUI.prototype.openPopup = function (args) {\n\t            args.popupElement.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n\t        };\n\t        return DateFilterUI;\n\t    }());\n\t    exports.DateFilterUI = DateFilterUI;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_71__;\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(73), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, ej2_navigations_1, checkbox_filter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExcelFilter = (function (_super) {\n\t        __extends(ExcelFilter, _super);\n\t        function ExcelFilter(parent, filterSettings, serviceLocator) {\n\t            var _this = _super.call(this, parent, filterSettings, serviceLocator) || this;\n\t            _this.localeConstants = {\n\t                ClearFilter: 'Clear Filter',\n\t                NumberFilter: 'Number Filters',\n\t                TextFilter: 'Text Filters',\n\t                DateFilter: 'Date Filters',\n\t                MatchCase: 'Match Case',\n\t                Equal: 'Equal',\n\t                NotEqual: 'Not Equal',\n\t                LessThan: 'Less Than',\n\t                LessThanOrEqual: 'Less Than Or Equal',\n\t                GreaterThan: 'Greater Than',\n\t                GreaterThanOrEqual: 'Greater Than Or Equal',\n\t                Between: 'Between',\n\t                CustomFilter: 'Custom Filter',\n\t                StartsWith: 'Starts With',\n\t                EndsWith: 'Ends With',\n\t                Contains: 'Contains',\n\t                OK: 'OK',\n\t                Cancel: 'Cancel'\n\t            };\n\t            ej2_base_1.extend(_this.defaultConstants, _this.localeConstants);\n\t            _this.isExcel = true;\n\t            _this.initLocale(_this.defaultConstants);\n\t            return _this;\n\t        }\n\t        ExcelFilter.prototype.getCMenuDS = function (type, operator) {\n\t            var options = {\n\t                number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n\t                    'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n\t                string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter'],\n\t            };\n\t            options.date = options.number;\n\t            options.datetime = options.number;\n\t            var model = [];\n\t            for (var i = 0; i < options[type].length; i++) {\n\t                if (options[type][i].length) {\n\t                    if (operator) {\n\t                        model.push({\n\t                            text: this.getLocalizedLabel(options[type][i]) + '...',\n\t                            iconCss: 'e-icons e-icon-check ' + (operator === options[type][i] ? '' : 'e-emptyicon')\n\t                        });\n\t                    }\n\t                    else {\n\t                        model.push({\n\t                            text: this.getLocalizedLabel(options[type][i]) + '...'\n\t                        });\n\t                    }\n\t                }\n\t                else {\n\t                    model.push({ separator: true });\n\t                }\n\t            }\n\t            return model;\n\t        };\n\t        ExcelFilter.prototype.destroy = function () {\n\t            _super.prototype.destroy.call(this);\n\t            ej2_base_1.remove(this.cmenu);\n\t        };\n\t        ExcelFilter.prototype.createMenu = function (type, isFiltered) {\n\t            var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateFilter', number: 'NumberFilter' };\n\t            this.menu = ej2_base_1.createElement('div', { className: 'e-contextmenu-wrapper' });\n\t            var ul = ej2_base_1.createElement('ul');\n\t            var icon = isFiltered ? 'e-icon-filter e-filtered' : 'e-icon-filter';\n\t            ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n\t            if (type !== 'boolean') {\n\t                ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isFiltered ? 'e-icon-check' : icon + ' e-emptyicon', true));\n\t            }\n\t            this.menu.appendChild(ul);\n\t        };\n\t        ExcelFilter.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n\t            var li = ej2_base_1.createElement('li', { className: className + ' e-menu-item' });\n\t            li.innerHTML = val;\n\t            li.insertBefore(ej2_base_1.createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n\t            if (isSubMenu) {\n\t                li.appendChild(ej2_base_1.createElement('span', { className: 'e-icons e-caret' }));\n\t            }\n\t            return li;\n\t        };\n\t        ExcelFilter.prototype.wireExEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n\t            ej2_base_1.EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n\t        };\n\t        ExcelFilter.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n\t            ej2_base_1.EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n\t        };\n\t        ExcelFilter.prototype.clickExHandler = function (e) {\n\t            var menuItem = util_1.parentsUntil(e.target, 'e-menu-item');\n\t            if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText) {\n\t            }\n\t        };\n\t        ExcelFilter.prototype.destroyCMenu = function () {\n\t            if (this.menuObj && !this.menuObj.isDestroyed) {\n\t                this.menuObj.destroy();\n\t            }\n\t        };\n\t        ExcelFilter.prototype.hoverHandler = function (e) {\n\t            var target = e.target.querySelector('.e-contextmenu');\n\t            var li = util_1.parentsUntil(e.target, 'e-menu-item');\n\t            var focused = this.menu.querySelector('.e-focused');\n\t            var isSubMenu;\n\t            if (focused) {\n\t                focused.classList.remove('e-focused');\n\t            }\n\t            if (li) {\n\t                li.classList.add('e-focused');\n\t                isSubMenu = li.classList.contains('e-submenu');\n\t            }\n\t            if (target) {\n\t                return;\n\t            }\n\t            if (!isSubMenu) {\n\t                var submenu = this.menu.querySelector('.e-submenu');\n\t                submenu.classList.remove('e-selected');\n\t                this.isCMenuOpen = false;\n\t                this.destroyCMenu();\n\t            }\n\t            if (!this.isCMenuOpen && isSubMenu) {\n\t                li.classList.add('e-selected');\n\t                this.isCMenuOpen = true;\n\t                var menuOptions = {\n\t                    items: this.getCMenuDS(this.options.type),\n\t                    select: this.selectHandler.bind(this),\n\t                    onClose: this.destroyCMenu.bind(this),\n\t                };\n\t                this.parent.element.appendChild(this.cmenu);\n\t                this.menuObj = new ej2_navigations_1.ContextMenu(menuOptions, this.cmenu);\n\t                var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n\t                this.menuObj.open(client.top, this.dlg.getBoundingClientRect().right + 1);\n\t            }\n\t        };\n\t        ExcelFilter.prototype.openDialog = function (options) {\n\t            this.updateModel(options);\n\t            this.getAndSetChkElem(options);\n\t            this.showDialog(options);\n\t            this.dialogObj.height = '345px';\n\t            this.dialogObj.dataBind();\n\t            this.createMenu(options.type, false);\n\t            this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n\t            this.dlg.classList.add('e-excelfilter');\n\t            this.cmenu = ej2_base_1.createElement('ul', { className: 'e-excel-menu' });\n\t            this.wireExEvents();\n\t        };\n\t        ExcelFilter.prototype.closeDialog = function () {\n\t            _super.prototype.closeDialog.call(this);\n\t            this.unwireEvents();\n\t        };\n\t        ExcelFilter.prototype.selectHandler = function (e) {\n\t        };\n\t        ExcelFilter.prototype.getModuleName = function () {\n\t            return 'excelFilter';\n\t        };\n\t        return ExcelFilter;\n\t    }(checkbox_filter_1.CheckBoxFilter));\n\t    exports.ExcelFilter = ExcelFilter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_73__;\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(39), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, width_controller_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.resizeClassList = {\n\t        root: 'e-rhandler',\n\t        suppress: 'e-rsuppress',\n\t        icon: 'e-ricon',\n\t        helper: 'e-rhelper',\n\t        header: 'th.e-headercell',\n\t        cursor: 'e-rcursor',\n\t        lines: 'e-rlines'\n\t    };\n\t    var Resize = (function () {\n\t        function Resize(parent) {\n\t            this.tapped = false;\n\t            this.isDblClk = true;\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Resize.prototype.autoFitColumns = function (fName) {\n\t            var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n\t                this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n\t            this.findColumn(columnName);\n\t        };\n\t        Resize.prototype.resizeColumn = function (fName, index, id) {\n\t            var gObj = this.parent;\n\t            var tWidth = 0;\n\t            var headerTable = this.parent.getHeaderTable();\n\t            var contentTable = this.parent.getContentTable();\n\t            var headerDivTag = 'e-gridheader';\n\t            var contentDivTag = 'e-gridcontent';\n\t            var indentWidthClone = gObj.getHeaderTable().querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n\t            var indentWidth = 0;\n\t            if (indentWidthClone.length > 0) {\n\t                for (var i = 0; i < indentWidthClone.length; i++) {\n\t                    indentWidth += indentWidthClone[i].offsetWidth;\n\t                }\n\t            }\n\t            var uid = id ? id : this.parent.getUidByColumnField(fName);\n\t            var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n\t            var headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n\t            var headerText = [headerTextClone];\n\t            var contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n\t            var contentText = [];\n\t            for (var i = 0; i < contentTextClone.length; i++) {\n\t                contentText[i] = contentTextClone[i].cloneNode(true);\n\t            }\n\t            var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n\t            var wContent = this.createTable(contentTable, contentText, contentDivTag);\n\t            var columnbyindex = gObj.getColumns()[index];\n\t            var result;\n\t            var width = (wHeader > wContent) ? columnbyindex.width = ej2_base_1.formatUnit(wHeader) : columnbyindex.width = ej2_base_1.formatUnit(wContent);\n\t            this.widthService.setColumnWidth(gObj.getColumns()[index]);\n\t            if (!this.parent.allowResizing) {\n\t                result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n\t                if (result === false) {\n\t                    gObj.getColumns().forEach(function (element) {\n\t                        if (element.visible) {\n\t                            tWidth = tWidth + parseInt(element.width, 10);\n\t                        }\n\t                    });\n\t                }\n\t                var tableWidth_1 = tWidth + indentWidth;\n\t                if (tWidth > 0) {\n\t                    headerTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                    contentTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                }\n\t            }\n\t            var tableWidth = headerTable.offsetWidth;\n\t            var contentwidth = (gObj.getContent().scrollWidth);\n\t            if (contentwidth > tableWidth) {\n\t                headerTable.classList.add('e-tableborder');\n\t                contentTable.classList.add('e-tableborder');\n\t            }\n\t            else {\n\t                headerTable.classList.remove('e-tableborder');\n\t                contentTable.classList.remove('e-tableborder');\n\t            }\n\t        };\n\t        Resize.prototype.destroy = function () {\n\t            this.widthService = null;\n\t            this.unwireEvents();\n\t            this.removeEventListener();\n\t        };\n\t        Resize.prototype.getModuleName = function () {\n\t            return 'resize';\n\t        };\n\t        Resize.prototype.findColumn = function (fName) {\n\t            var _this = this;\n\t            fName.forEach(function (element) {\n\t                var fieldName = element;\n\t                var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n\t                if (_this.parent.getColumns()[columnIndex].visible === true) {\n\t                    _this.resizeColumn(fieldName, columnIndex);\n\t                }\n\t            });\n\t        };\n\t        Resize.prototype.createTable = function (table, text, tag) {\n\t            var myTableDiv = ej2_base_1.createElement('div');\n\t            myTableDiv.className = this.parent.element.className;\n\t            myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n\t            var mySubDiv = ej2_base_1.createElement('div');\n\t            mySubDiv.className = tag;\n\t            var myTable = ej2_base_1.createElement('table');\n\t            myTable.className = table.className;\n\t            myTable.style.cssText = 'table-layout: auto;width: auto';\n\t            var myTr = ej2_base_1.createElement('tr');\n\t            text.forEach(function (element) {\n\t                var tr = myTr.cloneNode();\n\t                tr.className = table.querySelector('tr').className;\n\t                tr.appendChild(element);\n\t                myTable.appendChild(tr);\n\t            });\n\t            mySubDiv.appendChild(myTable);\n\t            myTableDiv.appendChild(mySubDiv);\n\t            document.body.appendChild(myTableDiv);\n\t            var offsetWidthValue = myTable.getBoundingClientRect().width;\n\t            document.body.removeChild(myTableDiv);\n\t            return Math.ceil(offsetWidthValue);\n\t        };\n\t        Resize.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            if (this.parent.frozenColumns) {\n\t                this.parent.on(events.freezeRefresh, this.render, this);\n\t            }\n\t            else {\n\t                this.parent.on(events.headerRefreshed, this.render, this);\n\t            }\n\t        };\n\t        Resize.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t        };\n\t        Resize.prototype.render = function () {\n\t            this.wireEvents();\n\t            if (!(this.parent.gridLines === 'vertical' || this.parent.gridLines === 'both')) {\n\t                this.parent.element.classList.add(exports.resizeClassList.lines);\n\t            }\n\t            this.setHandlerHeight();\n\t        };\n\t        Resize.prototype.wireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t                ej2_base_1.EventHandler.add(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart, _this);\n\t                ej2_base_1.EventHandler.add(ele, events.dblclick, _this.callAutoFit, _this);\n\t            });\n\t        };\n\t        Resize.prototype.unwireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.remove(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart);\n\t                ej2_base_1.EventHandler.remove(ele, events.dblclick, _this.callAutoFit);\n\t            });\n\t        };\n\t        Resize.prototype.getResizeHandlers = function () {\n\t            return this.parent.frozenColumns ?\n\t                [].slice.call(this.parent.getHeaderContent().querySelectorAll('.' + exports.resizeClassList.root))\n\t                : [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.root));\n\t        };\n\t        Resize.prototype.setHandlerHeight = function () {\n\t            [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.suppress)).forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t            });\n\t        };\n\t        Resize.prototype.callAutoFit = function (e) {\n\t            var col = this.getTargetColumn(e);\n\t            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n\t        };\n\t        Resize.prototype.resizeStart = function (e) {\n\t            if (!this.helper) {\n\t                if (this.getScrollBarWidth() === 0) {\n\t                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n\t                        var col = _a[_i];\n\t                        this.widthService.setColumnWidth(col);\n\t                    }\n\t                    this.widthService.setWidthToTable();\n\t                }\n\t                this.element = e.target;\n\t                this.appendHelper();\n\t                this.column = this.getTargetColumn(e);\n\t                this.pageX = this.getPointX(e);\n\t                if (this.parent.enableRtl) {\n\t                    this.minMove = parseInt(this.column.width.toString(), 10)\n\t                        - (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0);\n\t                }\n\t                else {\n\t                    this.minMove = (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0)\n\t                        - parseInt(this.column.width.toString(), 10);\n\t                }\n\t                this.minMove += this.pageX;\n\t            }\n\t            if (ej2_base_1.Browser.isDevice && !this.helper.classList.contains(exports.resizeClassList.icon)) {\n\t                this.helper.classList.add(exports.resizeClassList.icon);\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper, this);\n\t                ej2_base_1.EventHandler.add(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart, this);\n\t            }\n\t            else {\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.resizeStart, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction();\n\t                    return;\n\t                }\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd, this);\n\t                ej2_base_1.EventHandler.add(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing, this);\n\t                this.updateCursor('add');\n\t            }\n\t        };\n\t        Resize.prototype.cancelResizeAction = function (removeEvents) {\n\t            if (removeEvents) {\n\t                ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t                this.updateCursor('remove');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t            }\n\t            ej2_base_1.detach(this.helper);\n\t            this.refresh();\n\t        };\n\t        Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n\t            if (minWidth && width < minWidth) {\n\t                return minWidth;\n\t            }\n\t            else if ((maxWidth && width > maxWidth)) {\n\t                return maxWidth;\n\t            }\n\t            else {\n\t                return width;\n\t            }\n\t        };\n\t        Resize.prototype.resizing = function (e) {\n\t            var pageX = this.getPointX(e);\n\t            var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n\t            var colData = {\n\t                width: parseInt(this.widthService.getWidth(this.column).toString(), 10) + mousemove,\n\t                minWidth: this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : null,\n\t                maxWidth: this.column.maxWidth ? parseInt(this.column.maxWidth.toString(), 10) : null\n\t            };\n\t            var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n\t            if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n\t                width = this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0;\n\t                this.pageX = pageX = this.minMove;\n\t            }\n\t            if (width !== parseInt(this.column.width.toString(), 10)) {\n\t                this.pageX = pageX;\n\t                this.column.width = ej2_base_1.formatUnit(width);\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.onResize, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction(true);\n\t                    return;\n\t                }\n\t                this.widthService.setColumnWidth(this.column, null, 'resize');\n\t                this.updateHelper();\n\t            }\n\t            this.isDblClk = false;\n\t        };\n\t        Resize.prototype.resizeEnd = function (e) {\n\t            if (!this.helper || this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t            ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t            this.updateCursor('remove');\n\t            ej2_base_1.detach(this.helper);\n\t            var args = {\n\t                e: e,\n\t                column: this.column\n\t            };\n\t            this.parent.trigger(events.resizeStop, args);\n\t            this.refresh();\n\t            this.doubleTapEvent(e);\n\t            this.isDblClk = true;\n\t        };\n\t        Resize.prototype.getPointX = function (e) {\n\t            if (e.touches && e.touches.length) {\n\t                return e.touches[0].pageX;\n\t            }\n\t            else {\n\t                return e.pageX;\n\t            }\n\t        };\n\t        Resize.prototype.refreshColumnWidth = function () {\n\t            var columns = this.parent.getColumns();\n\t            for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderTable().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n\t                var ele = _a[_i];\n\t                for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n\t                    var column = columns_1[_b];\n\t                    if (ele.querySelector('[e-mappinguid]') &&\n\t                        ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n\t                        column.width = ele.getBoundingClientRect().width;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            return columns;\n\t        };\n\t        Resize.prototype.getTargetColumn = function (e) {\n\t            var cell = ej2_base_1.closest(e.target, exports.resizeClassList.header);\n\t            var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t            return this.parent.getColumnByUid(uid);\n\t        };\n\t        Resize.prototype.updateCursor = function (action) {\n\t            var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n\t            headerRows.push(this.parent.element);\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                row.classList[action](exports.resizeClassList.cursor);\n\t            }\n\t        };\n\t        Resize.prototype.refresh = function () {\n\t            this.column = null;\n\t            this.pageX = null;\n\t            this.element = null;\n\t            this.helper = null;\n\t        };\n\t        Resize.prototype.appendHelper = function () {\n\t            this.helper = ej2_base_1.createElement('div', {\n\t                className: exports.resizeClassList.helper\n\t            });\n\t            this.parent.element.appendChild(this.helper);\n\t            var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n\t            if (this.parent.frozenColumns) {\n\t                if (rect.parentElement.children.length !== this.parent.frozenColumns) {\n\t                    tr.splice(0, tr.length / 2);\n\t                }\n\t                else {\n\t                    tr.splice(tr.length / 2, tr.length / 2);\n\t                }\n\t            }\n\t            for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n\t                height += tr[i].offsetHeight;\n\t            }\n\t            var pos = this.calcPos(rect);\n\t            pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n\t            this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n\t        };\n\t        Resize.prototype.getScrollBarWidth = function (height) {\n\t            var ele = this.parent.frozenColumns ? this.parent.getContent().querySelector('.e-movablecontent')\n\t                : this.parent.getContent().firstChild;\n\t            return (ele.scrollHeight > ele.clientHeight && height) ||\n\t                ele.scrollWidth > ele.clientWidth ? util_1.getScrollBarWidth() : 0;\n\t        };\n\t        Resize.prototype.removeHelper = function (e) {\n\t            var cls = e.target.classList;\n\t            if (!(cls.contains(exports.resizeClassList.root) || cls.contains(exports.resizeClassList.icon)) && this.helper) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t                ej2_base_1.detach(this.helper);\n\t                this.refresh();\n\t            }\n\t        };\n\t        Resize.prototype.updateHelper = function () {\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            this.helper.style.left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2)) + 'px';\n\t        };\n\t        Resize.prototype.calcPos = function (elem) {\n\t            var parentOffset = {\n\t                top: 0,\n\t                left: 0\n\t            };\n\t            var offset = elem.getBoundingClientRect();\n\t            var doc = elem.ownerDocument;\n\t            var offsetParent = elem.offsetParent || doc.documentElement;\n\t            while (offsetParent &&\n\t                (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n\t                offsetParent.style.position === 'static') {\n\t                offsetParent = offsetParent.parentNode;\n\t            }\n\t            if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n\t                parentOffset = offsetParent.getBoundingClientRect();\n\t            }\n\t            return {\n\t                top: offset.top - parentOffset.top,\n\t                left: offset.left - parentOffset.left\n\t            };\n\t        };\n\t        Resize.prototype.doubleTapEvent = function (e) {\n\t            if (this.getUserAgent() && this.isDblClk) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.callAutoFit(e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Resize.prototype.getUserAgent = function () {\n\t            var userAgent = ej2_base_1.Browser.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Resize.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        return Resize;\n\t    }());\n\t    exports.Resize = Resize;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Reorder = (function () {\n\t        function Reorder(parent) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.reorderComplete, this.onActionComplete, this);\n\t            this.parent.on(events.columnDrag, this.drag, this);\n\t            this.parent.on(events.columnDragStart, this.dragStart, this);\n\t            this.parent.on(events.columnDragStop, this.dragStop, this);\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n\t        }\n\t        Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n\t            return srcElem.parentElement.isEqualNode(destElem.parentElement) && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t        };\n\t        Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n\t            var isFound;\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var header;\n\t            while (!isFound && headers.length > 0) {\n\t                header = headers.pop();\n\t                isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t            }\n\t            return isFound;\n\t        };\n\t        Reorder.prototype.findColParent = function (col, cols, parent) {\n\t            parent = parent;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (col === cols[i]) {\n\t                    return true;\n\t                }\n\t                else if (cols[i].columns) {\n\t                    var cnt = parent.length;\n\t                    parent.push(cols[i]);\n\t                    if (!this.findColParent(col, cols[i].columns, parent)) {\n\t                        parent.splice(cnt, parent.length - cnt);\n\t                    }\n\t                    else {\n\t                        return true;\n\t                    }\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Reorder.prototype.getColumnsModel = function (cols) {\n\t            var columnModel = [];\n\t            var subCols = [];\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                columnModel.push(cols[i]);\n\t                if (cols[i].columns) {\n\t                    subCols = subCols.concat(cols[i].columns);\n\t                }\n\t            }\n\t            if (subCols.length) {\n\t                columnModel = columnModel.concat(this.getColumnsModel(subCols));\n\t            }\n\t            return columnModel;\n\t        };\n\t        Reorder.prototype.headerDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.closest(e.target, 'th')) {\n\t                return;\n\t            }\n\t            var destElem = ej2_base_2.closest(e.target, '.e-headercell');\n\t            if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t                var oldIdx = util_1.getElementIndex(this.element, headers);\n\t                var columns = this.getColumnsModel(this.parent.columns);\n\t                var column = columns[oldIdx];\n\t                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n\t                this.moveColumns(newIndex, column);\n\t            }\n\t        };\n\t        Reorder.prototype.isActionPrevent = function (gObj) {\n\t            return util_1.isActionPrevent(gObj);\n\t        };\n\t        Reorder.prototype.moveColumns = function (destIndex, column) {\n\t            var gObj = this.parent;\n\t            if (this.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n\t                return;\n\t            }\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var cols = parent ? parent.columns : this.parent.columns;\n\t            var srcIdx = util_1.inArray(column, cols);\n\t            if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n\t                return;\n\t            }\n\t            cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n\t            gObj.getColumns(true);\n\t            gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n\t            gObj.notify(events.modelChanged, {\n\t                type: events.actionBegin, requestType: 'reorder'\n\t            });\n\t        };\n\t        Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var cols = this.parent.columns;\n\t            var flatColumns = this.getColumnsModel(cols);\n\t            var parent = this.getColParent(flatColumns[util_1.getElementIndex(srcElem, headers)], cols);\n\t            cols = parent ? parent.columns : cols;\n\t            return util_1.inArray(flatColumns[util_1.getElementIndex(destElem, headers)], cols);\n\t        };\n\t        Reorder.prototype.getColParent = function (column, columns) {\n\t            var parents = [];\n\t            this.findColParent(column, columns, parents);\n\t            return parents[parents.length - 1];\n\t        };\n\t        Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n\t            var column = this.parent.getColumnByField(toFName);\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var columns = parent ? parent.columns : this.parent.columns;\n\t            var destIndex = util_1.inArray(column, columns);\n\t            if (destIndex > -1) {\n\t                this.moveColumns(destIndex, this.parent.getColumnByField(fromFName));\n\t            }\n\t        };\n\t        Reorder.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.createReorderElement();\n\t            }\n\t        };\n\t        Reorder.prototype.createReorderElement = function () {\n\t            var header = this.parent.element.querySelector('.e-headercontent');\n\t            this.upArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n\t            this.downArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n\t        };\n\t        Reorder.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, { type: events.actionComplete }));\n\t        };\n\t        Reorder.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_2.remove(this.upArrow);\n\t            ej2_base_2.remove(this.downArrow);\n\t            this.parent.off(events.headerDrop, this.headerDrop);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.reorderComplete, this.onActionComplete);\n\t            this.parent.off(events.columnDrag, this.drag);\n\t            this.parent.off(events.columnDragStart, this.dragStart);\n\t            this.parent.off(events.columnDragStop, this.dragStop);\n\t            this.parent.off(events.headerRefreshed, this.createReorderElement);\n\t        };\n\t        Reorder.prototype.drag = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            var closest = ej2_base_2.closest(target, '.e-headercell:not(.e-stackedHeaderCell)');\n\t            var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n\t            var isLeft = this.x > util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            this.updateScrollPostion(e.event);\n\t            if (closest && !closest.isEqualNode(this.element)) {\n\t                target = closest;\n\t                if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n\t                    this.updateArrowPosition(target, isLeft);\n\t                    ej2_base_2.classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n\t                }\n\t                else if (!(gObj.allowGrouping && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            }\n\t            gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n\t        };\n\t        Reorder.prototype.updateScrollPostion = function (e) {\n\t            var _this = this;\n\t            var x = util_1.getPosition(e).x;\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            var scrollElem = this.parent.getContent().firstElementChild;\n\t            if (x > cliRectBase.left && x < cliRectBase.left + 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n\t            }\n\t            else if (x < cliRectBase.right && x > cliRectBase.right - 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n\t            }\n\t        };\n\t        Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n\t            var scrollLeft = scrollElem.scrollLeft;\n\t            scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n\t            if (scrollLeft !== scrollElem.scrollLeft) {\n\t                this.setDisplay('none');\n\t            }\n\t        };\n\t        Reorder.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n\t            var cliRect = target.getBoundingClientRect();\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n\t                return;\n\t            }\n\t            this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n\t            this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n\t            this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n\t            this.setDisplay('');\n\t        };\n\t        Reorder.prototype.dragStart = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            this.element = target.classList.contains('e-headercell') ? target :\n\t                util_1.parentsUntil(target, 'e-headercell');\n\t            this.x = util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            gObj.trigger(events.columnDragStart, {\n\t                target: target, draggableType: 'headercell', column: e.column\n\t            });\n\t        };\n\t        Reorder.prototype.dragStop = function (e) {\n\t            var gObj = this.parent;\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            if (!e.cancel) {\n\t                gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n\t            }\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t        };\n\t        Reorder.prototype.setDisplay = function (display) {\n\t            this.upArrow.style.display = display;\n\t            this.downArrow.style.display = display;\n\t        };\n\t        Reorder.prototype.getModuleName = function () {\n\t            return 'reorder';\n\t        };\n\t        return Reorder;\n\t    }());\n\t    exports.Reorder = Reorder;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowDD = (function () {\n\t        function RowDD(parent) {\n\t            var _this = this;\n\t            this.selectedRows = [];\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length ||\n\t                    !e.sender.target.classList.contains('e-selectionbackground')) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_3.createElement('div', {\n\t                    className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n\t                    styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n\t                });\n\t                var table = ej2_base_3.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n\t                var tbody = ej2_base_3.createElement('tbody');\n\t                var selectedRows = gObj.getSelectedRows();\n\t                for (var i = 0, len = selectedRows.length; i < len; i++) {\n\t                    var selectedRow = selectedRows[i].cloneNode(true);\n\t                    util_1.removeElement(selectedRow, '.e-indentcell');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowcollapse');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowexpand');\n\t                    tbody.appendChild(selectedRow);\n\t                }\n\t                table.appendChild(tbody);\n\t                visualElement.appendChild(table);\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length) {\n\t                    return;\n\t                }\n\t                gObj.trigger(events.rowDragStart, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: e.target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n\t                }\n\t                _this.isDragStop = false;\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                var target = _this.getElementFromPosition(cloneElement, e.event);\n\t                ej2_base_3.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                gObj.trigger(events.rowDrag, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                gObj.element.classList.add('e-rowdrag');\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent') ||\n\t                    util_1.parentsUntil(cloneElement.parentElement, 'e-grid').id === util_1.parentsUntil(target, 'e-grid').id) {\n\t                    ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                if (_this.parent.isDestroyed) {\n\t                    return;\n\t                }\n\t                var target = _this.getElementFromPosition(e.helper, e.event);\n\t                gObj.element.classList.remove('e-rowdrag');\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n\t                }\n\t                gObj.trigger(events.rowDrop, {\n\t                    target: target, draggableType: 'rows',\n\t                    rows: gObj.getSelectedRows(), data: gObj.getSelectedRecords()\n\t                });\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent')) {\n\t                    ej2_base_3.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeDrag, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.rowDragAndDropComplete, this.onActionComplete, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t        }\n\t        RowDD.prototype.initializeDrag = function () {\n\t            var gObj = this.parent;\n\t            var column;\n\t            var drag;\n\t            drag = new ej2_base_1.Draggable(gObj.getContent(), {\n\t                dragTarget: '.e-rowcell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        RowDD.prototype.getElementFromPosition = function (element, event) {\n\t            var target;\n\t            var position = util_1.getPosition(event);\n\t            element.style.display = 'none';\n\t            target = document.elementFromPoint(position.x, position.y);\n\t            element.style.display = '';\n\t            return target;\n\t        };\n\t        RowDD.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, { type: events.actionComplete }));\n\t        };\n\t        RowDD.prototype.getTargetIdx = function (targetRow) {\n\t            return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n\t        };\n\t        RowDD.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') !== 'grouping') {\n\t                var targetRow = ej2_base_3.closest(e.target, 'tr');\n\t                var srcControl = void 0;\n\t                var currentIndex = void 0;\n\t                if (e.droppedElement.parentElement.id !== gObj.element.id) {\n\t                    srcControl = e.droppedElement.parentElement.ej2_instances[0];\n\t                }\n\t                else {\n\t                    return;\n\t                }\n\t                if (srcControl.element.id !== gObj.element.id && srcControl.rowDropSettings.targetID !== gObj.element.id) {\n\t                    return;\n\t                }\n\t                var records = srcControl.getSelectedRecords();\n\t                var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n\t                var count = 0;\n\t                if (isNaN(targetIndex)) {\n\t                    targetIndex = currentIndex = 0;\n\t                }\n\t                if (gObj.allowPaging) {\n\t                    targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n\t                }\n\t                gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n\t                gObj.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t                var selectedRows = srcControl.getSelectedRowIndexes();\n\t                var skip = srcControl.allowPaging ?\n\t                    (srcControl.pageSettings.currentPage * srcControl.pageSettings.pageSize) - srcControl.pageSettings.pageSize : 0;\n\t                this.selectedRows = [];\n\t                for (var i = 0, len = records.length; i < len; i++) {\n\t                    this.selectedRows.push(skip + selectedRows[i]);\n\t                }\n\t                srcControl.notify(events.rowsRemoved, { indexes: this.selectedRows, records: records });\n\t                srcControl.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t            }\n\t        };\n\t        RowDD.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.initializeDrag();\n\t            }\n\t        };\n\t        RowDD.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeDrag);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.rowDragAndDropComplete, this.onActionComplete);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t        };\n\t        RowDD.prototype.getModuleName = function () {\n\t            return 'rowDragAndDrop';\n\t        };\n\t        return RowDD;\n\t    }());\n\t    exports.RowDD = RowDD;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Group = (function () {\n\t        function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n\t            var _this = this;\n\t            this.visualElement = ej2_base_2.createElement('div', {\n\t                className: 'e-cloneproperties e-dragclone e-gdclone',\n\t                styles: 'line-height:23px', attrs: { action: 'grouping' }\n\t            });\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-groupheadercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-groupheadercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n\t                _this.visualElement.textContent = element.textContent;\n\t                _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n\t                _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n\t                _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                gObj.element.appendChild(_this.visualElement);\n\t                return _this.visualElement;\n\t            };\n\t            this.dragStart = function () {\n\t                _this.parent.element.classList.add('e-ungroupdrag');\n\t            };\n\t            this.drag = function (e) {\n\t                var target = e.target;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n\t                ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                if (!(util_1.parentsUntil(target, 'e-gridcontent') || util_1.parentsUntil(target, 'e-headercell'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                _this.parent.element.classList.remove('e-ungroupdrag');\n\t                if (!(util_1.parentsUntil(e.target, 'e-gridcontent') || util_1.parentsUntil(e.target, 'e-gridheader'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                _this.element.classList.remove('e-hover');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n\t                _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                _this.groupColumn(column.field);\n\t            };\n\t            this.contentRefresh = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.groupSettings = groupSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.sortedColumns = sortedColumns;\n\t            this.focus = serviceLocator.getService('focus');\n\t            this.addEventListener();\n\t        }\n\t        Group.prototype.columnDrag = function (e) {\n\t            var gObj = this.parent;\n\t            var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            if (!util_1.parentsUntil(e.target, 'e-groupdroparea') &&\n\t                !(this.parent.allowReordering && util_1.parentsUntil(e.target, 'e-headercell'))) {\n\t                ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t            }\n\t            e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n\t        };\n\t        Group.prototype.columnDragStart = function (e) {\n\t            if (e.target.classList.contains('e-stackedheadercell')) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n\t            this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n\t            var element = e.target.classList.contains('e-headercell') ? e.target : util_1.parentsUntil(e.target, 'e-headercell');\n\t            this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n\t        };\n\t        Group.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') === 'grouping') {\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                this.ungroupColumn(column.field);\n\t            }\n\t        };\n\t        Group.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.groupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.columnDrag, this.columnDrag, this);\n\t            this.parent.on(events.columnDragStart, this.columnDragStart, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t            this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t        };\n\t        Group.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.groupComplete, this.onActionComplete);\n\t            this.parent.off(events.ungroupComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.columnDrag, this.columnDrag);\n\t            this.parent.off(events.columnDragStart, this.columnDragStart);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t            this.parent.off(events.sortComplete, this.refreshSortIcons);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.headerDrop, this.headerDrop);\n\t        };\n\t        Group.prototype.initialEnd = function () {\n\t            var gObj = this.parent;\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.groupColumn(col);\n\t                }\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Group.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (!this.groupSettings.columns.length) {\n\t                return;\n\t            }\n\t            e.preventDefault();\n\t            switch (e.action) {\n\t                case 'altDownArrow':\n\t                case 'altUpArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var rows = gObj.getContentTable().querySelector('tbody').children;\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var grpRow = void 0;\n\t                        for (var i = dataRow.rowIndex; i >= 0; i--) {\n\t                            if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n\t                                grpRow = rows[i];\n\t                                break;\n\t                            }\n\t                        }\n\t                        this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n\t                            '.e-recordplusexpand' : '.e-recordpluscollapse'));\n\t                    }\n\t                    break;\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t                case 'enter':\n\t                    if (this.parent.isEdit) {\n\t                        return;\n\t                    }\n\t                    var element = this.focus.getFocusedElement();\n\t                    var row = element.parentElement.querySelector('[class^=\"e-record\"]');\n\t                    if (!row) {\n\t                        break;\n\t                    }\n\t                    this.expandCollapseRows(row);\n\t                    break;\n\t            }\n\t        };\n\t        Group.prototype.clickHandler = function (e) {\n\t            this.expandCollapseRows(e.target);\n\t            this.applySortFromTarget(e.target);\n\t            this.unGroupFromTarget(e.target);\n\t            this.toogleGroupFromHeader(e.target);\n\t        };\n\t        Group.prototype.unGroupFromTarget = function (target) {\n\t            if (target.classList.contains('e-ungroupbutton')) {\n\t                this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t            }\n\t        };\n\t        Group.prototype.toogleGroupFromHeader = function (target) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                if (target.classList.contains('e-grptogglebtn')) {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                    else {\n\t                        this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                }\n\t                else {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.applySortFromTarget = function (target) {\n\t            var gObj = this.parent;\n\t            var gHeader = ej2_base_2.closest(target, '.e-groupheadercell');\n\t            if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n\t                !target.classList.contains('e-toggleungroup')) {\n\t                var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n\t                if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n\t                    gObj.sortColumn(field, 'descending', true);\n\t                }\n\t                else {\n\t                    gObj.sortColumn(field, 'ascending', true);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapseRows = function (target) {\n\t            var trgt = util_1.parentsUntil(target, 'e-recordplusexpand') ||\n\t                util_1.parentsUntil(target, 'e-recordpluscollapse');\n\t            if (trgt) {\n\t                var cellIdx = trgt.cellIndex;\n\t                var rowIdx = trgt.parentElement.rowIndex;\n\t                var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t                var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n\t                var isHide = void 0;\n\t                var expandElem = void 0;\n\t                var toExpand = [];\n\t                var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n\t                var expand = false;\n\t                if (trgt.classList.contains('e-recordpluscollapse')) {\n\t                    ej2_base_2.addClass([trgt], 'e-recordplusexpand');\n\t                    ej2_base_2.removeClass([trgt], 'e-recordpluscollapse');\n\t                    trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n\t                    expand = true;\n\t                }\n\t                else {\n\t                    isHide = true;\n\t                    ej2_base_2.removeClass([trgt], 'e-recordplusexpand');\n\t                    ej2_base_2.addClass([trgt], 'e-recordpluscollapse');\n\t                    trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                }\n\t                this.aria.setExpand(trgt, expand);\n\t                for (var i = 0, len = rows.length; i < len; i++) {\n\t                    if (rows[i].querySelectorAll('td')[cellIdx] &&\n\t                        rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n\t                        if (isHide) {\n\t                            rows[i].style.display = 'none';\n\t                        }\n\t                        else {\n\t                            if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n\t                                rows[i].style.display = '';\n\t                                expandElem = rows[i].querySelector('.e-recordplusexpand');\n\t                                if (expandElem) {\n\t                                    toExpand.push(expandElem);\n\t                                }\n\t                                if (rows[i].classList.contains('e-detailrow')) {\n\t                                    if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n\t                                        rows[i].style.display = 'none';\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        break;\n\t                    }\n\t                }\n\t                for (var i = 0, len = toExpand.length; i < len; i++) {\n\t                    ej2_base_2.removeClass([toExpand[i]], 'e-recordplusexpand');\n\t                    ej2_base_2.addClass([toExpand[i]], 'e-recordpluscollapse');\n\t                    toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                    this.expandCollapseRows(toExpand[i]);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapse = function (isExpand) {\n\t            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t            var row;\n\t            for (var i = 0, len = rowNodes.length; i < len; i++) {\n\t                if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n\t                    row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n\t                    if (row) {\n\t                        row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n\t                        row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n\t                            'e-icons e-gnextforward e-icon-grightarrow';\n\t                    }\n\t                    if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n\t                        rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n\t                        rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                    }\n\t                }\n\t                else {\n\t                    rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        Group.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        Group.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderGroupDropArea();\n\t            this.initDragAndDrop();\n\t            this.refreshToggleBtn();\n\t        };\n\t        Group.prototype.renderGroupDropArea = function () {\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n\t            this.updateGroupDropArea();\n\t            this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n\t            if (!this.groupSettings.showDropArea) {\n\t                this.element.style.display = 'none';\n\t            }\n\t        };\n\t        Group.prototype.updateGroupDropArea = function () {\n\t            if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n\t                var dragLabel = this.l10n.getConstant('GroupDropArea');\n\t                this.element.innerHTML = dragLabel;\n\t                this.element.classList.remove('e-grouped');\n\t            }\n\t            else {\n\t                if (this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && this.groupSettings.columns.length === 1) {\n\t                    this.element.innerHTML = '';\n\t                }\n\t                this.element.classList.add('e-grouped');\n\t            }\n\t        };\n\t        Group.prototype.initDragAndDrop = function () {\n\t            this.initializeGHeaderDrop();\n\t            this.initializeGHeaderDrag();\n\t        };\n\t        Group.prototype.initializeGHeaderDrag = function () {\n\t            var drag = new ej2_base_1.Draggable(this.element, {\n\t                dragTarget: '.e-groupheadercell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        Group.prototype.headerDrop = function (e) {\n\t            if (!e.uid) {\n\t                return;\n\t            }\n\t            var column = this.parent.getColumnByUid(e.uid);\n\t            this.ungroupColumn(column.field);\n\t        };\n\t        Group.prototype.initializeGHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(this.element, {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        Group.prototype.groupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = gObj.groupSettings.showGroupedColumn;\n\t            this.colName = columnName;\n\t            if (this.contentRefresh) {\n\t                this.updateModel();\n\t            }\n\t            else {\n\t                this.addColToGroupDrop(columnName);\n\t            }\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.ungroupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = this.parent.enableColumnVirtualization ?\n\t                this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = true;\n\t            this.colName = column.field;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.splice(columns.indexOf(this.colName), 1);\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n\t                    if (columnName === gObj.sortSettings.columns[i].field) {\n\t                        gObj.sortSettings.columns.splice(i, 1);\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            this.groupSettings.columns = columns;\n\t            if (gObj.allowGrouping) {\n\t                this.parent.dataBind();\n\t            }\n\t        };\n\t        Group.prototype.updateModel = function () {\n\t            var gObj = this.parent;\n\t            var i = 0;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.push(this.colName);\n\t            this.groupSettings.columns = columns;\n\t            while (i < gObj.sortSettings.columns.length) {\n\t                if (gObj.sortSettings.columns[i].field === this.colName) {\n\t                    break;\n\t                }\n\t                i++;\n\t            }\n\t            if (gObj.sortSettings.columns.length === i) {\n\t                gObj.sortSettings.columns.push({ field: this.colName, direction: 'ascending' });\n\t            }\n\t            else if (!gObj.allowSorting) {\n\t                gObj.sortSettings.columns[i].direction = 'ascending';\n\t            }\n\t            this.parent.dataBind();\n\t        };\n\t        Group.prototype.onActionComplete = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.requestType === 'grouping') {\n\t                this.addColToGroupDrop(this.colName);\n\t            }\n\t            else {\n\t                this.removeColFromGroupDrop(this.colName);\n\t            }\n\t            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n\t            } : { requestType: 'ungrouping', type: events.actionComplete };\n\t            this.parent.trigger(events.actionComplete, ej2_base_3.extend(e, args));\n\t        };\n\t        Group.prototype.addColToGroupDrop = function (field) {\n\t            var gObj = this.parent;\n\t            var direction = 'ascending';\n\t            var groupedColumn = ej2_base_2.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n\t            var childDiv = ej2_base_2.createElement('div', { attrs: { 'ej-mappingname': field } });\n\t            var column = this.parent.getColumnByField(field);\n\t            var headerCell = gObj.getColumnHeaderByUid(column.uid);\n\t            if (!ej2_base_3.isNullOrUndefined(column.headerTemplate)) {\n\t                if (column.headerTemplate.indexOf('#') !== -1) {\n\t                    childDiv.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n\t                }\n\t                else {\n\t                    childDiv.innerHTML = column.headerTemplate;\n\t                }\n\t                childDiv.firstElementChild.classList.add('e-grouptext');\n\t            }\n\t            else {\n\t                childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-grouptext', innerHTML: column.headerText,\n\t                    attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t                }));\n\t            }\n\t            if (this.groupSettings.showToggleButton) {\n\t                childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n\t                    attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n\t                }));\n\t            }\n\t            if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n\t                direction = headerCell.querySelector('.e-ascending') ? 'ascending' : 'descending';\n\t            }\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-groupsort e-icons ' + ('e-' + direction + ' e-icon-' + direction), innerHTML: '&nbsp;',\n\t                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t            }));\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n\t                attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n\t                styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n\t            }));\n\t            groupedColumn.appendChild(childDiv);\n\t            this.element.appendChild(groupedColumn);\n\t        };\n\t        Group.prototype.refreshToggleBtn = function (isRemove) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n\t                for (var i = 0, len = headers.length; i < len; i++) {\n\t                    if (!(headers[i].classList.contains('e-emptycell'))) {\n\t                        var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n\t                        if (!this.parent.showColumnMenu || (this.parent.showColumnMenu && !column.showColumnMenu)) {\n\t                            if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n\t                                ej2_base_2.remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n\t                            }\n\t                            if (!isRemove) {\n\t                                headers[i].appendChild(ej2_base_2.createElement('span', {\n\t                                    className: 'e-grptogglebtn e-icons ' +\n\t                                        (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n\t                                            : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n\t                                }));\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.removeColFromGroupDrop = function (field) {\n\t            ej2_base_2.remove(this.getGHeaderCell(field));\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                                columnName: this.colName, requestType: 'grouping', type: events.actionBegin\n\t                            } : { requestType: 'ungrouping', type: events.actionBegin };\n\t                            this.parent.notify(events.modelChanged, args);\n\t                        }\n\t                        break;\n\t                    case 'showDropArea':\n\t                        this.updateGroupDropArea();\n\t                        this.groupSettings.showDropArea ? this.element.style.display = '' : this.element.style.display = 'none';\n\t                        break;\n\t                    case 'showGroupedColumn':\n\t                        this.updateGroupedColumn(this.groupSettings.showGroupedColumn);\n\t                        this.parent.notify(events.modelChanged, { requestType: 'refresh' });\n\t                        break;\n\t                    case 'showUngroupButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showUngroupButton, 'e-ungroupbutton');\n\t                        break;\n\t                    case 'showToggleButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n\t                        this.parent.refreshHeader();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.updateGroupedColumn = function (isVisible) {\n\t            for (var i = 0; i < this.groupSettings.columns.length; i++) {\n\t                this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n\t            }\n\t        };\n\t        Group.prototype.updateButtonVisibility = function (isVisible, className) {\n\t            var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n\t            for (var i = 0; i < gHeader.length; i++) {\n\t                gHeader[i].style.display = isVisible ? '' : 'none';\n\t            }\n\t        };\n\t        Group.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Group.prototype.destroy = function () {\n\t            this.clearGrouping();\n\t            this.removeEventListener();\n\t            this.refreshToggleBtn(true);\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        Group.prototype.clearGrouping = function () {\n\t            var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            this.contentRefresh = false;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.ungroupColumn(cols[i]);\n\t            }\n\t            this.contentRefresh = true;\n\t        };\n\t        Group.prototype.getModuleName = function () {\n\t            return 'group';\n\t        };\n\t        Group.prototype.refreshSortIcons = function (e) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = gObj.sortSettings.columns;\n\t            var gCols = gObj.groupSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            this.refreshToggleBtn();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n\t                    this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n\t                    ej2_base_2.classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n\t                    if (cols.length > 1) {\n\t                        header.querySelector('.e-headercelldiv').appendChild(ej2_base_2.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n\t                    }\n\t                }\n\t                else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n\t                    if (cols[i].direction === 'ascending') {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n\t                    }\n\t                    else {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0, len = gCols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(gCols[i]) === -1) {\n\t                    continue;\n\t                }\n\t                gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n\t            }\n\t        };\n\t        Group.prototype.getGHeaderCell = function (field) {\n\t            if (this.element && this.element.querySelector('[ej-mappingname=' + field + ']')) {\n\t                return this.element.querySelector('[ej-mappingname=' + field + ']').parentElement;\n\t            }\n\t            return null;\n\t        };\n\t        return Group;\n\t    }());\n\t    exports.Group = Group;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(3), __webpack_require__(7), __webpack_require__(10), __webpack_require__(28), __webpack_require__(17), __webpack_require__(18), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, grid_1, util_1, events, aria_service_1, row_1, cell_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailRow = (function () {\n\t        function DetailRow(parent, locator) {\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.focus = locator.getService('focus');\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t        }\n\t        DetailRow.prototype.clickHandler = function (e) {\n\t            this.toogleExpandcollapse(ej2_base_1.closest(e.target, 'td'));\n\t        };\n\t        DetailRow.prototype.toogleExpandcollapse = function (target) {\n\t            var gObj = this.parent;\n\t            var parent = 'parentDetails';\n\t            if (target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) {\n\t                var tr = target.parentElement;\n\t                var uid_1 = tr.getAttribute('data-uid');\n\t                var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n\t                if (target.classList.contains('e-detailrowcollapse')) {\n\t                    var key = 'records';\n\t                    var currentViewData = gObj.allowGrouping && gObj.groupSettings.columns.length ?\n\t                        gObj.currentViewData[key] : gObj.currentViewData;\n\t                    var data = currentViewData[tr.getAttribute('aria-rowindex')];\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = '';\n\t                    }\n\t                    else if (gObj.getDetailTemplate() || gObj.childGrid) {\n\t                        var detailRow = ej2_base_1.createElement('tr', { className: 'e-detailrow' });\n\t                        var detailCell = ej2_base_1.createElement('td', { className: 'e-detailcell' });\n\t                        detailCell.setAttribute('colspan', this.parent.getVisibleColumns().length.toString());\n\t                        var row = new row_1.Row({\n\t                            isDataRow: true,\n\t                            cells: [new cell_1.Cell({ cellType: enum_1.CellType.Indent }), new cell_1.Cell({ isDataCell: true, visible: true })]\n\t                        });\n\t                        for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n\t                            detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                            row.cells.unshift(new cell_1.Cell({ cellType: enum_1.CellType.Indent }));\n\t                        }\n\t                        detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-detailindentcell' }));\n\t                        detailRow.appendChild(detailCell);\n\t                        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n\t                        if (gObj.detailTemplate) {\n\t                            util_1.appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate'));\n\t                        }\n\t                        else {\n\t                            gObj.childGrid[parent] = {\n\t                                parentID: gObj.element.id,\n\t                                parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n\t                                parentKeyField: gObj.childGrid.queryString,\n\t                                parentKeyFieldValue: data[gObj.childGrid.queryString],\n\t                                parentRowData: data\n\t                            };\n\t                            var grid = new grid_1.Grid(gObj.childGrid);\n\t                            var modules = grid.getInjectedModules();\n\t                            var injectedModues = gObj.getInjectedModules();\n\t                            if (!modules || modules.length !== injectedModues.length) {\n\t                                grid.setInjectedModules(injectedModues);\n\t                            }\n\t                            var gridElem = ej2_base_1.createElement('div', {\n\t                                id: 'child' + util_1.parents(tr, 'e-grid').length +\n\t                                    '_grid' + tr.rowIndex + util_1.getUid('')\n\t                            });\n\t                            detailCell.appendChild(gridElem);\n\t                            grid.appendTo(gridElem);\n\t                        }\n\t                        detailRow.appendChild(detailCell);\n\t                        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n\t                        var idx_1;\n\t                        this.parent.getRowsObject().some(function (r, rIndex) { idx_1 = rIndex; return r.uid === uid_1; });\n\t                        gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n\t                        this.parent.getRowsObject().splice(idx_1 + 1, 0, row);\n\t                        gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data });\n\t                        gObj.notify(events.detailDataBound, { rows: this.parent.getRowsObject() });\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n\t                    this.aria.setExpand(target, true);\n\t                }\n\t                else {\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = 'none';\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n\t                    this.aria.setExpand(target, false);\n\t                }\n\t            }\n\t        };\n\t        DetailRow.prototype.isDetailRow = function (row) {\n\t            return row && row.classList.contains('e-detailrow');\n\t        };\n\t        DetailRow.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.destroy, this.destroy);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t        };\n\t        DetailRow.prototype.getTDfromIndex = function (index, className) {\n\t            var tr = this.parent.getDataRows()[index];\n\t            if (tr && tr.querySelector(className)) {\n\t                return tr.querySelector(className);\n\t            }\n\t            return null;\n\t        };\n\t        DetailRow.prototype.expand = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowcollapse')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.collapse = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowexpand');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowexpand')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        DetailRow.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        DetailRow.prototype.expandCollapse = function (isExpand) {\n\t            var td;\n\t            var rows = this.parent.getDataRows();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                isExpand ? this.expand(td) : this.collapse(td);\n\t            }\n\t        };\n\t        DetailRow.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            switch (e.action) {\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t                case 'altUpArrow':\n\t                case 'altDownArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                        e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n\t                    }\n\t                    break;\n\t                case 'enter':\n\t                    if (this.parent.isEdit) {\n\t                        return;\n\t                    }\n\t                    var element = this.focus.getFocusedElement();\n\t                    if (!element.classList.contains('e-detailrowcollapse') && !element.classList.contains('e-detailrowexpand')) {\n\t                        break;\n\t                    }\n\t                    this.toogleExpandcollapse(element);\n\t                    break;\n\t            }\n\t        };\n\t        DetailRow.prototype.getModuleName = function () {\n\t            return 'detailRow';\n\t        };\n\t        return DetailRow;\n\t    }());\n\t    exports.DetailRow = DetailRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(73), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Toolbar = (function () {\n\t        function Toolbar(parent, serviceLocator) {\n\t            this.predefinedItems = {};\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Toolbar.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            var preItems = ['add', 'edit', 'update', 'delete', 'cancel', 'print',\n\t                'pdfexport', 'excelexport', 'wordexport', 'csvexport'];\n\t            for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n\t                var item = preItems_1[_i];\n\t                var localeName = item[0].toUpperCase() + item.slice(1);\n\t                this.predefinedItems[item] = {\n\t                    id: this.gridID + '_' + item, prefixIcon: 'e-' + item,\n\t                    text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n\t                };\n\t            }\n\t            this.predefinedItems.search = {\n\t                id: this.gridID + '_search', template: '<div class=\"e-search\" role=\"search\" >\\\n\t                         <span id=\"' + this.gridID + '_searchbutton\" class=\"e-searchfind e-icons\" tabindex=\"-1\"\\\n\t                         role=\"button\" aria-label= \"search\"></span>\\\n\t                         <input id=\"' + this.gridID + '_searchbar\" aria-multiline= \"false\" type=\"search\"\\\n\t                         placeholder=' + this.l10n.getConstant('Search') + '>\\\n\t                         </input></div>', tooltipText: this.l10n.getConstant('Search'), align: 'right'\n\t            };\n\t            this.predefinedItems.columnchooser = {\n\t                id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n\t                text: 'Columns', tooltipText: 'columns', align: 'right',\n\t            };\n\t            this.createToolbar();\n\t        };\n\t        Toolbar.prototype.getToolbar = function () {\n\t            return this.toolbar.element;\n\t        };\n\t        Toolbar.prototype.destroy = function () {\n\t            if (!this.toolbar.isDestroyed) {\n\t                this.unWireEvent();\n\t                this.toolbar.destroy();\n\t                this.removeEventListener();\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t        };\n\t        Toolbar.prototype.createToolbar = function () {\n\t            var items = this.getItems();\n\t            this.toolbar = new ej2_navigations_1.Toolbar({\n\t                items: items,\n\t                clicked: this.toolbarClickHandler.bind(this),\n\t                enablePersistence: this.parent.enablePersistence,\n\t                enableRtl: this.parent.enableRtl\n\t            });\n\t            var viewStr = 'viewContainerRef';\n\t            var registerTemp = 'registeredTemplate';\n\t            if (this.parent[viewStr]) {\n\t                this.toolbar[registerTemp] = {};\n\t                this.toolbar[viewStr] = this.parent[viewStr];\n\t            }\n\t            this.element = ej2_base_2.createElement('div', { id: this.gridID + '_toolbarItems' });\n\t            if (this.parent.toolbarTemplate) {\n\t                if (typeof (this.parent.toolbarTemplate) === 'string') {\n\t                    this.toolbar.appendTo(this.parent.toolbarTemplate);\n\t                    this.element = this.toolbar.element;\n\t                }\n\t                else {\n\t                    util_1.appendChildren(this.element, util_1.templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n\t                }\n\t            }\n\t            else {\n\t                this.toolbar.appendTo(this.element);\n\t            }\n\t            this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n\t            this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n\t            this.wireEvent();\n\t            this.refreshToolbarItems();\n\t            if (this.parent.searchSettings) {\n\t                this.updateSearchBox();\n\t            }\n\t        };\n\t        Toolbar.prototype.refreshToolbarItems = function (args) {\n\t            var gObj = this.parent;\n\t            var enableItems = [];\n\t            var disableItems = [];\n\t            var edit = gObj.editSettings;\n\t            edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n\t            edit.allowEditing ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n\t            edit.allowDeleting ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n\t            if (gObj.editSettings.mode === 'batch') {\n\t                if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems.push(this.gridID + '_update');\n\t                    enableItems.push(this.gridID + '_cancel');\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            else {\n\t                if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n\t                    disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            this.enableItems(enableItems, true);\n\t            this.enableItems(disableItems, false);\n\t        };\n\t        Toolbar.prototype.getItems = function () {\n\t            var items = [];\n\t            var toolbarItems = this.parent.toolbar || [];\n\t            if (typeof (this.parent.toolbar) === 'string') {\n\t                return [];\n\t            }\n\t            for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n\t                var item = toolbarItems_1[_i];\n\t                typeof (item) === 'string' ? items.push(this.getItemObject(item)) : items.push(this.getItem(item));\n\t            }\n\t            return items;\n\t        };\n\t        Toolbar.prototype.getItem = function (itemObject) {\n\t            var item = this.predefinedItems[itemObject.text];\n\t            return item ? ej2_base_1.extend(item, item, itemObject) : itemObject;\n\t        };\n\t        Toolbar.prototype.getItemObject = function (itemName) {\n\t            return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n\t        };\n\t        Toolbar.prototype.enableItems = function (items, isEnable) {\n\t            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n\t                var item = items_1[_i];\n\t                var element = this.element.querySelector('#' + item);\n\t                if (element) {\n\t                    this.toolbar.enableItems(element.parentElement, isEnable);\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.toolbarClickHandler = function (args) {\n\t            var gObj = this.parent;\n\t            var gID = this.gridID;\n\t            if (!args.item) {\n\t                gObj.trigger(events.toolbarClick, args);\n\t                return;\n\t            }\n\t            switch (args.item.id) {\n\t                case gID + '_print':\n\t                    gObj.print();\n\t                    break;\n\t                case gID + '_edit':\n\t                    gObj.startEdit();\n\t                    break;\n\t                case gID + '_update':\n\t                    gObj.endEdit();\n\t                    break;\n\t                case gID + '_cancel':\n\t                    gObj.closeEdit();\n\t                    break;\n\t                case gID + '_add':\n\t                    gObj.addRecord();\n\t                    break;\n\t                case gID + '_delete':\n\t                    gObj.deleteRecord();\n\t                    break;\n\t                case gID + '_search':\n\t                    if (args.originalEvent.target.id === gID + '_searchbutton') {\n\t                        this.search();\n\t                    }\n\t                    break;\n\t                case gID + '_columnchooser':\n\t                    var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t                    var y = tarElement.getBoundingClientRect().top;\n\t                    var x = tarElement.getBoundingClientRect().left;\n\t                    var targetEle = args.originalEvent.target;\n\t                    y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n\t                    gObj.createColumnchooser(x, y, targetEle);\n\t                    break;\n\t                default:\n\t                    gObj.trigger(events.toolbarClick, args);\n\t            }\n\t        };\n\t        Toolbar.prototype.modelChanged = function (e) {\n\t            if (e.module === 'edit') {\n\t                this.refreshToolbarItems();\n\t            }\n\t        };\n\t        Toolbar.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n\t                return;\n\t            }\n\t            if (this.element) {\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t            this.render();\n\t        };\n\t        Toolbar.prototype.keyUpHandler = function (e) {\n\t            if (e.keyCode === 13) {\n\t                this.search();\n\t            }\n\t        };\n\t        Toolbar.prototype.search = function () {\n\t            this.parent.search(this.searchElement.value);\n\t        };\n\t        Toolbar.prototype.updateSearchBox = function () {\n\t            if (this.searchElement) {\n\t                this.searchElement.value = this.parent.searchSettings.key;\n\t            }\n\t        };\n\t        Toolbar.prototype.wireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n\t            }\n\t        };\n\t        Toolbar.prototype.unWireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n\t            }\n\t        };\n\t        Toolbar.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n\t            this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n\t            this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n\t            this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n\t            this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n\t            this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n\t        };\n\t        Toolbar.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.onPropertyChanged);\n\t            this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n\t            this.parent.off(events.modelChanged, this.refreshToolbarItems);\n\t            this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n\t            this.parent.off(events.inBoundModelChanged, this.modelChanged);\n\t            this.parent.off(events.dataBound, this.refreshToolbarItems);\n\t        };\n\t        Toolbar.prototype.getModuleName = function () {\n\t            return 'toolbar';\n\t        };\n\t        return Toolbar;\n\t    }());\n\t    exports.Toolbar = Toolbar;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(14), __webpack_require__(10), __webpack_require__(81), __webpack_require__(82), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, constant_1, footer_renderer_1, summary_cell_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Aggregate = (function () {\n\t        function Aggregate(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        Aggregate.prototype.getModuleName = function () {\n\t            return 'aggregate';\n\t        };\n\t        Aggregate.prototype.initiateRender = function () {\n\t            var _this = this;\n\t            var cellFac = this.locator.getService('cellRendererFactory');\n\t            var instance = new summary_cell_renderer_1.SummaryCellRenderer(this.parent, this.locator);\n\t            [enum_1.CellType.Summary, enum_1.CellType.CaptionSummary, enum_1.CellType.GroupSummary].forEach(function (type) {\n\t                return cellFac.addCellRenderer(type, instance);\n\t            });\n\t            this.footerRenderer = new footer_renderer_1.FooterRenderer(this.parent, this.locator);\n\t            this.footerRenderer.renderPanel();\n\t            this.footerRenderer.renderTable();\n\t            this.locator.register('footerRenderer', this.footerRenderer);\n\t            var fn = function () {\n\t                _this.prepareSummaryInfo();\n\t                _this.parent.off(constant_1.dataReady, fn);\n\t            };\n\t            this.parent.on(constant_1.dataReady, fn, this);\n\t            this.parent.on(constant_1.dataReady, this.footerRenderer.refresh, this.footerRenderer);\n\t        };\n\t        Aggregate.prototype.prepareSummaryInfo = function () {\n\t            var _this = this;\n\t            summaryIterator(this.parent.aggregates, function (column) {\n\t                var dataColumn = _this.parent.getColumnByField(column.field) || {};\n\t                var type = dataColumn.type;\n\t                column.format = _this.getFormatFromType(column.format, type);\n\t                column.setFormatter();\n\t                column.columnName = column.columnName || column.field;\n\t            });\n\t        };\n\t        Aggregate.prototype.getFormatFromType = function (format, type) {\n\t            if (ej2_base_2.isNullOrUndefined(type) || typeof format !== 'string') {\n\t                return format;\n\t            }\n\t            var obj;\n\t            switch (type) {\n\t                case 'number':\n\t                    obj = { format: format };\n\t                    break;\n\t                case 'date':\n\t                    obj = { type: type, skeleton: format };\n\t                    break;\n\t                case 'datetime':\n\t                    obj = { type: 'dateTime', skeleton: format };\n\t                    break;\n\t            }\n\t            return obj;\n\t        };\n\t        Aggregate.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(this.footerRenderer)) {\n\t                this.initiateRender();\n\t            }\n\t            this.prepareSummaryInfo();\n\t            this.footerRenderer.refresh();\n\t            var cModel = new summary_model_generator_1.CaptionSummaryModelGenerator(this.parent);\n\t            var gModel = new summary_model_generator_1.GroupSummaryModelGenerator(this.parent);\n\t            if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n\t                this.parent.notify(constant_1.modelChanged, {});\n\t            }\n\t        };\n\t        Aggregate.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialEnd, this.initiateRender, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Aggregate.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.footerRenderer.removeEventListener();\n\t            this.parent.off(constant_1.initialEnd, this.initiateRender);\n\t            this.parent.off(constant_1.dataReady, this.footerRenderer.refresh);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Aggregate.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            ej2_base_1.remove(this.parent.getFooterContent());\n\t        };\n\t        return Aggregate;\n\t    }());\n\t    exports.Aggregate = Aggregate;\n\t    function summaryIterator(aggregates, callback) {\n\t        aggregates.forEach(function (row) {\n\t            row.columns.forEach(function (column) {\n\t                callback(column, row);\n\t            });\n\t        });\n\t    }\n\t    exports.summaryIterator = summaryIterator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(10), __webpack_require__(12), __webpack_require__(13), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, constant_1, content_renderer_1, row_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FooterRenderer = (function (_super) {\n\t        __extends(FooterRenderer, _super);\n\t        function FooterRenderer(gridModule, serviceLocator) {\n\t            var _this = _super.call(this, gridModule, serviceLocator) || this;\n\t            _this.aggregates = {};\n\t            _this.parent = gridModule;\n\t            _this.locator = serviceLocator;\n\t            _this.modelGenerator = new summary_model_generator_1.SummaryModelGenerator(_this.parent);\n\t            _this.addEventListener();\n\t            return _this;\n\t        }\n\t        FooterRenderer.prototype.renderPanel = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-gridfooter' });\n\t            var innerDiv = ej2_base_1.createElement('div', { className: 'e-summarycontent' });\n\t            if (ej2_base_3.Browser.isDevice) {\n\t                innerDiv.style.overflowX = 'scroll';\n\t            }\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            if (this.parent.getPager() != null) {\n\t                this.parent.element.insertBefore(div, this.parent.getPager());\n\t            }\n\t            else {\n\t                this.parent.element.appendChild(div);\n\t            }\n\t        };\n\t        FooterRenderer.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            var innerDiv = this.createContentTable();\n\t            var table = innerDiv.querySelector('.e-table');\n\t            var tFoot = ej2_base_1.createElement('tfoot');\n\t            table.appendChild(tFoot);\n\t            this.setTable(table);\n\t        };\n\t        FooterRenderer.prototype.renderSummaryContent = function (e) {\n\t            var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n\t            var summaries = this.modelGenerator.getData();\n\t            var dummies = this.modelGenerator.getColumns();\n\t            var rows = this.modelGenerator.generateRows(input, e || this.aggregates);\n\t            var fragment = document.createDocumentFragment();\n\t            var rowrenderer = new row_renderer_1.RowRenderer(this.locator, null, this.parent);\n\t            rowrenderer.element = ej2_base_1.createElement('TR', { className: 'e-summaryrow' });\n\t            for (var srow = 0, len = summaries.length; srow < len; srow++) {\n\t                var row = rows[srow];\n\t                if (!row) {\n\t                    continue;\n\t                }\n\t                var tr = rowrenderer.render(row, dummies);\n\t                fragment.appendChild(tr);\n\t            }\n\t            this.getTable().tFoot.appendChild(fragment);\n\t            this.aggregates = e;\n\t        };\n\t        FooterRenderer.prototype.refresh = function (e) {\n\t            this.getTable().tFoot.innerHTML = '';\n\t            this.renderSummaryContent(e);\n\t            this.onScroll();\n\t        };\n\t        FooterRenderer.prototype.refreshCol = function () {\n\t            var headerCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n\t            this.getTable().replaceChild(headerCol, this.getColGroup());\n\t            this.setColGroup(headerCol);\n\t        };\n\t        FooterRenderer.prototype.onWidthChange = function (args) {\n\t            this.getColGroup().children[args.index].style.width = ej2_base_2.formatUnit(args.width);\n\t            if (this.parent.allowResizing && args.module === 'resize') {\n\t                this.updateFooterTableWidth(this.getTable());\n\t            }\n\t        };\n\t        FooterRenderer.prototype.onScroll = function (e) {\n\t            if (e === void 0) { e = { left: this.parent.getContent().firstChild.scrollLeft }; }\n\t            this.getPanel().firstChild.scrollLeft = e.left;\n\t        };\n\t        FooterRenderer.prototype.columnVisibilityChanged = function () {\n\t            this.refresh();\n\t        };\n\t        FooterRenderer.prototype.addEventListener = function () {\n\t            this.parent.on(constant_1.colGroupRefresh, this.refreshCol, this);\n\t            this.parent.on(constant_1.columnWidthChanged, this.onWidthChange, this);\n\t            this.parent.on(constant_1.scroll, this.onScroll, this);\n\t            this.parent.on(constant_1.columnVisibilityChanged, this.columnVisibilityChanged, this);\n\t        };\n\t        FooterRenderer.prototype.removeEventListener = function () {\n\t            this.parent.off(constant_1.colGroupRefresh, this.refreshCol);\n\t            this.parent.off(constant_1.columnWidthChanged, this.onWidthChange);\n\t            this.parent.off(constant_1.scroll, this.onScroll);\n\t            this.parent.off(constant_1.columnVisibilityChanged, this.columnVisibilityChanged);\n\t        };\n\t        FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n\t            var tHead = this.parent.getHeaderTable();\n\t            if (tHead && tFoot) {\n\t                tFoot.style.width = tHead.style.width;\n\t            }\n\t        };\n\t        return FooterRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.FooterRenderer = FooterRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(26)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryCellRenderer = (function (_super) {\n\t        __extends(SummaryCellRenderer, _super);\n\t        function SummaryCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n\t            var key;\n\t            key = !ej2_base_1.isNullOrUndefined(column.type) ? column.field + ' - ' + (column.type) : column.columnName;\n\t            return data[column.columnName] ? data[column.columnName][key] : '';\n\t        };\n\t        SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var column = cell.column;\n\t            if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n\t                return true;\n\t            }\n\t            var tempObj = column.getTemplate(cell.cellType);\n\t            util_1.appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property));\n\t            return false;\n\t        };\n\t        return SummaryCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.SummaryCellRenderer = SummaryCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(10), __webpack_require__(85), __webpack_require__(89), __webpack_require__(90), __webpack_require__(84), __webpack_require__(91), __webpack_require__(92), __webpack_require__(94), __webpack_require__(95), __webpack_require__(6), __webpack_require__(7), __webpack_require__(24), __webpack_require__(96)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, events, edit_renderer_1, boolean_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1, default_edit_cell_1, inline_edit_1, batch_edit_1, dialog_edit_1, ej2_popups_1, util_1, ej2_inputs_1, datepicker_edit_cell_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Edit = (function () {\n\t        function Edit(parent, serviceLocator) {\n\t            this.editCellType = {\n\t                'dropdownedit': dropdown_edit_cell_1.DropDownEditCell, 'numericedit': numeric_edit_cell_1.NumericEditCell,\n\t                'datepickeredit': datepicker_edit_cell_1.DatePickerEditCell, 'booleanedit': boolean_edit_cell_1.BooleanEditCell, 'defaultedit': default_edit_cell_1.DefaultEditCell\n\t            };\n\t            this.editType = { 'inline': inline_edit_1.InlineEdit, 'normal': inline_edit_1.InlineEdit, 'batch': batch_edit_1.BatchEdit, 'dialog': dialog_edit_1.DialogEdit };\n\t            this.tapped = false;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.addEventListener();\n\t            this.updateEditObj();\n\t            this.createAlertDlg();\n\t            this.createConfirmDlg();\n\t        }\n\t        Edit.prototype.updateColTypeObj = function () {\n\t            for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                col.edit = ej2_base_2.extend(new this.editCellType[col.editType && this.editCellType[col.editType] ?\n\t                    col.editType : 'defaultedit'](this.parent, this.serviceLocator), col.edit || {});\n\t            }\n\t        };\n\t        Edit.prototype.getModuleName = function () {\n\t            return 'edit';\n\t        };\n\t        Edit.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowAdding':\n\t                    case 'allowDeleting':\n\t                    case 'allowEditing':\n\t                        if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n\t                            this.initialEnd();\n\t                        }\n\t                        break;\n\t                    case 'mode':\n\t                        this.updateEditObj();\n\t                        gObj.isEdit = false;\n\t                        gObj.refresh();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.updateEditObj = function () {\n\t            if (this.editModule) {\n\t                this.editModule.destroy();\n\t            }\n\t            this.renderer = new edit_renderer_1.EditRender(this.parent, this.serviceLocator);\n\t            this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n\t        };\n\t        Edit.prototype.initialEnd = function () {\n\t            this.updateColTypeObj();\n\t        };\n\t        Edit.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n\t        };\n\t        Edit.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n\t        };\n\t        Edit.prototype.tapEvent = function (e) {\n\t            if (this.getUserAgent()) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.parent.notify(events.doubleTap, e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.getUserAgent = function () {\n\t            var userAgent = window.navigator.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Edit.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        Edit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'batch') {\n\t                return;\n\t            }\n\t            if (!gObj.getSelectedRows().length) {\n\t                if (!tr) {\n\t                    this.showDialog('EditOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t            }\n\t            else if (!tr) {\n\t                tr = gObj.getSelectedRows()[0];\n\t            }\n\t            if (tr.style.display === 'none') {\n\t                return;\n\t            }\n\t            this.editModule.startEdit(tr);\n\t            this.refreshToolbar();\n\t            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            this.parent.notify('start-edit', {});\n\t        };\n\t        Edit.prototype.closeEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog\n\t                && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n\t                this.showDialog('CancelEdit', this.dialogObj);\n\t                return;\n\t            }\n\t            this.editModule.closeEdit();\n\t            this.refreshToolbar();\n\t            this.parent.notify('close-edit', {});\n\t        };\n\t        Edit.prototype.refreshToolbar = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        Edit.prototype.addRecord = function (data) {\n\t            if (!this.parent.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            this.editModule.addRecord(data);\n\t            this.refreshToolbar();\n\t            this.parent.notify('start-add', {});\n\t        };\n\t        Edit.prototype.deleteRecord = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowDeleting) {\n\t                return;\n\t            }\n\t            if (!data) {\n\t                if (ej2_base_4.isNullOrUndefined(gObj.selectedRowIndex) || gObj.selectedRowIndex === -1) {\n\t                    this.showDialog('DeleteOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t                if (gObj.editSettings.showDeleteConfirmDialog) {\n\t                    this.showDialog('ConfirmDelete', this.dialogObj);\n\t                    return;\n\t                }\n\t            }\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Edit.prototype.deleteRow = function (tr) {\n\t            this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n\t        };\n\t        Edit.prototype.endEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog) {\n\t                this.showDialog('BatchSaveConfirm', this.dialogObj);\n\t                return;\n\t            }\n\t            this.endEditing();\n\t        };\n\t        Edit.prototype.updateCell = function (rowIndex, field, value) {\n\t            this.editModule.updateCell(rowIndex, field, value);\n\t        };\n\t        Edit.prototype.updateRow = function (index, data) {\n\t            this.editModule.updateRow(index, data);\n\t        };\n\t        Edit.prototype.batchCancel = function () {\n\t            this.closeEdit();\n\t        };\n\t        Edit.prototype.batchSave = function () {\n\t            this.endEdit();\n\t        };\n\t        Edit.prototype.editCell = function (index, field) {\n\t            this.editModule.editCell(index, field);\n\t        };\n\t        Edit.prototype.editFormValidate = function () {\n\t            if (this.formObj) {\n\t                return this.formObj.validate();\n\t            }\n\t            return false;\n\t        };\n\t        Edit.prototype.getBatchChanges = function () {\n\t            return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n\t        };\n\t        Edit.prototype.getCurrentEditCellData = function () {\n\t            var obj = this.getCurrentEditedData(this.formObj.element, {});\n\t            return obj[Object.keys(obj)[0]];\n\t        };\n\t        Edit.prototype.saveCell = function () {\n\t            this.editModule.saveCell();\n\t        };\n\t        Edit.prototype.endEditing = function () {\n\t            this.editModule.endEdit();\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.showDialog = function (content, obj) {\n\t            obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n\t            obj.dataBind();\n\t            obj.show();\n\t        };\n\t        Edit.prototype.getValueFromType = function (col, value) {\n\t            var val = value;\n\t            switch (col.type) {\n\t                case 'number':\n\t                    val = !isNaN(parseFloat(value)) ? parseFloat(value) : null;\n\t                    break;\n\t                case 'boolean':\n\t                    if (col.editType !== 'booleanedit') {\n\t                        val = value === this.l10n.getConstant('True') ? true : false;\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                    if (col.editType !== 'datepicker') {\n\t                        val = new Date(value);\n\t                    }\n\t                    break;\n\t            }\n\t            return val;\n\t        };\n\t        Edit.prototype.destroyToolTip = function () {\n\t            var elements = [].slice.call(this.parent.getContentTable().querySelectorAll('.e-griderror'));\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                ej2_base_3.remove(elem);\n\t            }\n\t        };\n\t        Edit.prototype.createConfirmDlg = function () {\n\t            this.dialogObj = this.dlgWidget([\n\t                {\n\t                    click: this.dlgOk.bind(this),\n\t                    buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n\t                },\n\t                {\n\t                    click: this.dlgCancel.bind(this),\n\t                    buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n\t                }\n\t            ], 'EditConfirm');\n\t        };\n\t        Edit.prototype.createAlertDlg = function () {\n\t            this.alertDObj = this.dlgWidget([\n\t                {\n\t                    click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n\t                }\n\t            ], 'EditAlert');\n\t        };\n\t        Edit.prototype.alertClick = function () {\n\t            this.alertDObj.hide();\n\t        };\n\t        Edit.prototype.dlgWidget = function (btnOptions, name) {\n\t            var div = ej2_base_3.createElement('div', { id: this.parent.element.id + name });\n\t            this.parent.element.appendChild(div);\n\t            var options = {\n\t                showCloseIcon: false,\n\t                isModal: true,\n\t                visible: false,\n\t                closeOnEscape: true,\n\t                target: this.parent.element,\n\t                width: '320px',\n\t                animationSettings: { effect: 'None' }\n\t            };\n\t            options.buttons = btnOptions;\n\t            var obj = new ej2_popups_1.Dialog(options);\n\t            obj.appendTo(div);\n\t            util_1.changeButtonType(obj.element);\n\t            return obj;\n\t        };\n\t        Edit.prototype.dlgCancel = function () {\n\t            this.dialogObj.hide();\n\t        };\n\t        Edit.prototype.dlgOk = function (e) {\n\t            switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n\t                case this.l10n.getConstant('ConfirmDelete'):\n\t                    this.editModule.deleteRecord();\n\t                    break;\n\t                case this.l10n.getConstant('CancelEdit'):\n\t                    this.editModule.closeEdit();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveConfirm'):\n\t                    this.endEditing();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveLostChanges'):\n\t                    this.executeAction();\n\t                    break;\n\t            }\n\t            this.dlgCancel();\n\t        };\n\t        Edit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.initialEnd, this.initialEnd, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.autoCol, this.updateColTypeObj, this);\n\t            this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n\t            this.parent.on(events.preventBatch, this.preventBatch, this);\n\t            this.parent.on(events.destroyForm, this.destroyForm, this);\n\t            this.actionBeginFunction = this.onActionBegin.bind(this);\n\t            this.actionCompleteFunction = this.actionComplete.bind(this);\n\t            this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n\t            this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n\t            this.parent.on(events.initialEnd, this.wireEvents, this);\n\t        };\n\t        Edit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.initialEnd, this.initialEnd);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.autoCol, this.updateColTypeObj);\n\t            this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n\t            this.parent.off(events.preventBatch, this.preventBatch);\n\t            this.parent.off(events.destroyForm, this.destroyForm);\n\t            this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n\t            this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n\t            this.parent.off(events.initialEnd, this.unwireEvents);\n\t        };\n\t        Edit.prototype.actionComplete = function (e) {\n\t            var actions = ['add', 'beginEdit', 'save', 'delete', 'cancel'];\n\t            if (actions.indexOf(e.requestType) < 0) {\n\t                this.parent.isEdit = false;\n\t            }\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.getCurrentEditedData = function (form, editedData) {\n\t            var gObj = this.parent;\n\t            var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n\t            for (var i = 0, len = inputs.length; i < len; i++) {\n\t                var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n\t                var value = void 0;\n\t                if (col && col.field) {\n\t                    var temp = col.edit.read;\n\t                    if (typeof temp === 'string') {\n\t                        temp = ej2_base_2.getValue(temp, window);\n\t                    }\n\t                    if (col.type !== 'checkbox') {\n\t                        value = gObj.editModule.getValueFromType(col, col.edit.read(inputs[i]));\n\t                    }\n\t                    else {\n\t                        value = inputs[i].checked;\n\t                    }\n\t                    ej2_base_4.setValue(col.field, value, editedData);\n\t                }\n\t            }\n\t            return editedData;\n\t        };\n\t        Edit.prototype.onActionBegin = function (e) {\n\t            if (this.parent.editSettings.mode !== 'batch' && e.requestType !== 'save' && this.formObj && !this.formObj.isDestroyed) {\n\t                this.destroyForm();\n\t                this.destroyWidgets();\n\t            }\n\t        };\n\t        Edit.prototype.destroyWidgets = function (cols) {\n\t            cols = cols ? cols : this.parent.columns;\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (col.edit.destroy) {\n\t                    col.edit.destroy();\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.destroyForm = function () {\n\t            this.destroyToolTip();\n\t            if (this.formObj && !this.formObj.isDestroyed) {\n\t                this.formObj.destroy();\n\t            }\n\t            this.destroyToolTip();\n\t        };\n\t        Edit.prototype.destroy = function () {\n\t            this.destroyForm();\n\t            this.removeEventListener();\n\t            var elem = this.dialogObj.element;\n\t            this.dialogObj.destroy();\n\t            ej2_base_3.remove(elem);\n\t            elem = this.alertDObj.element;\n\t            this.alertDObj.destroy();\n\t            ej2_base_3.remove(elem);\n\t            this.unwireEvents();\n\t        };\n\t        Edit.prototype.keyPressHandler = function (e) {\n\t            switch (e.action) {\n\t                case 'insert':\n\t                    this.addRecord();\n\t                    break;\n\t                case 'delete':\n\t                    this.deleteRecord();\n\t                    break;\n\t                case 'f2':\n\t                    this.startEdit();\n\t                    break;\n\t                case 'enter':\n\t                    if (!util_1.parentsUntil(e.target, '.e-unboundcelldiv') && this.parent.editSettings.mode !== 'batch' &&\n\t                        util_1.parentsUntil(e.target, 'e-gridcontent') && !document.querySelectorAll('.e-popup-open').length) {\n\t                        e.preventDefault();\n\t                        this.endEdit();\n\t                    }\n\t                    break;\n\t                case 'escape':\n\t                    this.closeEdit();\n\t                    break;\n\t            }\n\t        };\n\t        Edit.prototype.preventBatch = function (args) {\n\t            this.preventObj = args;\n\t            this.showDialog('BatchSaveLostChanges', this.dialogObj);\n\t        };\n\t        Edit.prototype.executeAction = function () {\n\t            this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7);\n\t        };\n\t        Edit.prototype.applyFormValidation = function (cols) {\n\t            var _this = this;\n\t            var gObj = this.parent;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var rules = {};\n\t            cols = cols ? cols : gObj.columns;\n\t            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n\t                var col = cols_2[_i];\n\t                if (col.validationRules && form.querySelectorAll('#' + gObj.element.id + col.field).length) {\n\t                    rules[col.field] = col.validationRules;\n\t                }\n\t            }\n\t            this.parent.editModule.formObj = new ej2_inputs_1.FormValidator(form, {\n\t                rules: rules,\n\t                validationComplete: function (args) {\n\t                    _this.validationComplete(args);\n\t                },\n\t                customPlacement: function (inputElement, error) {\n\t                    _this.valErrorPlacement(inputElement, error);\n\t                }\n\t            });\n\t        };\n\t        Edit.prototype.valErrorPlacement = function (inputElement, error) {\n\t            if (this.parent.isEdit) {\n\t                var id = error.getAttribute('for');\n\t                var parentElem = this.parent.editSettings.mode !== 'dialog' ? this.parent.getContentTable() :\n\t                    this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n\t                var elem = parentElem.querySelector('#' + id + '_Error');\n\t                if (!elem) {\n\t                    this.createTooltip(inputElement, error, id, '');\n\t                }\n\t                else {\n\t                    elem.querySelector('.e-tip-content').innerHTML = error.innerHTML;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.validationComplete = function (args) {\n\t            if (this.parent.isEdit) {\n\t                var parentElem = this.parent.editSettings.mode !== 'dialog' ? this.parent.getContentTable() :\n\t                    this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n\t                var elem = parentElem.querySelector('#' + args.inputName + '_Error');\n\t                if (elem) {\n\t                    if (args.status === 'failure') {\n\t                        elem.style.display = '';\n\t                    }\n\t                    else {\n\t                        elem.style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.createTooltip = function (element, error, name, display) {\n\t            var table = this.parent.editSettings.mode !== 'dialog' ? this.parent.getContentTable() :\n\t                this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper').querySelector('.e-dlg-content');\n\t            var client = table.getBoundingClientRect();\n\t            var inputClient = util_1.parentsUntil(element, 'e-rowcell').getBoundingClientRect();\n\t            var div = ej2_base_3.createElement('div', {\n\t                className: 'e-tooltip-wrap e-popup e-griderror',\n\t                id: name + '_Error',\n\t                styles: 'display:' + display + ';top:' +\n\t                    (inputClient.bottom - client.top + table.scrollTop + 9) + 'px;left:' +\n\t                    (inputClient.left - client.left + table.scrollLeft + inputClient.width / 2) + 'px;'\n\t            });\n\t            var content = ej2_base_3.createElement('div', { className: 'e-tip-content' });\n\t            content.appendChild(error);\n\t            var arrow = ej2_base_3.createElement('div', { className: 'e-arrow-tip e-tip-top' });\n\t            arrow.appendChild(ej2_base_3.createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n\t            arrow.appendChild(ej2_base_3.createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n\t            div.appendChild(content);\n\t            div.appendChild(arrow);\n\t            table.appendChild(div);\n\t            div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n\t        };\n\t        return Edit;\n\t    }());\n\t    exports.Edit = Edit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(24), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericEditCell = (function () {\n\t        function NumericEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        NumericEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, 'e-mappinguid': args.column.uid\n\t                }\n\t            });\n\t        };\n\t        NumericEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        NumericEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_inputs_1.NumericTextBox(ej2_base_1.extend({\n\t                value: parseFloat(args.rowData[col.field]), enableRtl: this.parent.enableRtl,\n\t                placeholder: isInline ? '' : args.column.headerText,\n\t                enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t            }, col.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', col.field);\n\t        };\n\t        NumericEditCell.prototype.destroy = function () {\n\t            if (this.obj && !this.obj.isDestroyed) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return NumericEditCell;\n\t    }());\n\t    exports.NumericEditCell = NumericEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(86), __webpack_require__(87), __webpack_require__(88), __webpack_require__(5), __webpack_require__(14), __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, inline_edit_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, ej2_base_2, enum_1, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var EditRender = (function () {\n\t        function EditRender(parent, serviceLocator) {\n\t            this.editType = {\n\t                'inline': inline_edit_renderer_1.InlineEditRender,\n\t                'normal': inline_edit_renderer_1.InlineEditRender, 'batch': batch_edit_renderer_1.BatchEditRender, 'dialog': dialog_edit_renderer_1.DialogEditRender\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n\t            this.focus = serviceLocator.getService('focus');\n\t        }\n\t        EditRender.prototype.addNew = function (args) {\n\t            this.renderer.addNew(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.update = function (args) {\n\t            this.renderer.update(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.convertWidget = function (args) {\n\t            var gObj = this.parent;\n\t            var isFocused;\n\t            var cell;\n\t            var value;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.columns : [gObj.getColumnByField(args.columnName)];\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (!col.visible || col.commands) {\n\t                    continue;\n\t                }\n\t                value = col.valueAccessor(col.field, args.rowData, col);\n\t                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n\t                var temp = col.edit.write;\n\t                col.edit.write({\n\t                    rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row\n\t                });\n\t                if (!isFocused && !cell.getAttribute('disabled')) {\n\t                    this.focusElement(cell, args.type);\n\t                    isFocused = true;\n\t                }\n\t            }\n\t        };\n\t        EditRender.prototype.focusElement = function (elem, type) {\n\t            var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n\t            if (!ej2_base_1.isNullOrUndefined(chkBox)) {\n\t                chkBox.nextElementSibling.classList.add('e-focus');\n\t            }\n\t            if (this.parent.editSettings.mode === 'batch') {\n\t                this.focus.onClick({ target: ej2_base_1.closest(elem, 'td') }, true);\n\t            }\n\t            else {\n\t                elem.focus();\n\t            }\n\t            if (elem.classList.contains('e-defaultcell')) {\n\t                elem.setSelectionRange(elem.value.length, elem.value.length);\n\t            }\n\t        };\n\t        EditRender.prototype.getEditElements = function (args) {\n\t            var gObj = this.parent;\n\t            var elements = {};\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.columns : [gObj.getColumnByField(args.columnName)];\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                var col = cols[i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                if (col.commands || col.commandsTemplate) {\n\t                    var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t                    var model = new row_model_generator_1.RowModelGenerator(this.parent);\n\t                    var cellRenderer = cellRendererFact.getCellRenderer(enum_1.CellType.CommandColumn);\n\t                    var cells = model.generateRows(args.rowData)[0].cells;\n\t                    var td = cellRenderer.render(cells[i], args.rowData, { 'index': args.row ? args.row.getAttribute('aria-rowindex') : 0 });\n\t                    var div = td.firstElementChild;\n\t                    div.setAttribute('textAlign', td.getAttribute('textAlign'));\n\t                    elements[col.uid] = div;\n\t                    continue;\n\t                }\n\t                var value = col.valueAccessor(col.field, args.rowData, col);\n\t                var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n\t                var temp = col.edit.create;\n\t                var input = void 0;\n\t                input = col.edit.create(tArgs);\n\t                if (typeof input === 'string') {\n\t                    var div = ej2_base_2.createElement('div');\n\t                    div.innerHTML = input;\n\t                    input = div.firstChild;\n\t                }\n\t                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n\t                ej2_base_2.attributes(isInput ? input.querySelector('input') : input, {\n\t                    name: col.field, 'e-mappinguid': col.uid,\n\t                    id: gObj.element.id + col.field,\n\t                });\n\t                ej2_base_2.classList(input, ['e-input', 'e-field'], []);\n\t                if (col.textAlign === 'right') {\n\t                    input.classList.add('e-ralign');\n\t                }\n\t                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit') {\n\t                    input.setAttribute('disabled', 'true');\n\t                }\n\t                elements[col.uid] = input;\n\t            }\n\t            return elements;\n\t        };\n\t        return EditRender;\n\t    }());\n\t    exports.EditRender = EditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEditRender = (function () {\n\t        function InlineEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        InlineEditRender.prototype.addNew = function (elements, args) {\n\t            var tbody = this.parent.getContentTable().querySelector('tbody');\n\t            args.row = ej2_base_1.createElement('tr', { className: 'e-row e-addedrow' });\n\t            tbody.insertBefore(args.row, tbody.firstChild);\n\t            args.row.appendChild(this.getEditElement(elements, false));\n\t        };\n\t        InlineEditRender.prototype.update = function (elements, args) {\n\t            var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n\t            args.row.innerHTML = '';\n\t            args.row.appendChild(this.getEditElement(elements, true, tdElement));\n\t            args.row.classList.add('e-editedrow');\n\t        };\n\t        InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement) {\n\t            var gObj = this.parent;\n\t            var gLen = 0;\n\t            var isDetail = !ej2_base_1.isNullOrUndefined(gObj.detailTemplate) || !ej2_base_1.isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n\t            if (gObj.allowGrouping) {\n\t                gLen = gObj.groupSettings.columns.length;\n\t            }\n\t            var td = ej2_base_1.createElement('td', {\n\t                className: 'e-editcell e-normaledit',\n\t                attrs: { colspan: (gObj.getVisibleColumns().length + gLen + isDetail).toString() }\n\t            });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n\t            table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var tr = ej2_base_1.createElement('tr');\n\t            var i = 0;\n\t            if (isDetail) {\n\t                tr.insertBefore(ej2_base_1.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n\t            }\n\t            while (i < gLen) {\n\t                tr.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                i++;\n\t            }\n\t            var m = 0;\n\t            i = 0;\n\t            while ((isEdit && m < tdElement.length && i < gObj.columns.length) || i < gObj.columns.length) {\n\t                var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n\t                var col = gObj.columns[i];\n\t                if (col.visible) {\n\t                    var td_1 = ej2_base_1.createElement('td', {\n\t                        className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n\t                    });\n\t                    td_1.appendChild(elements[col.uid]);\n\t                    if (col.editType === 'booleanedit') {\n\t                        td_1.classList.add('e-boolcell');\n\t                    }\n\t                    else if (col.commands || col.commandsTemplate) {\n\t                        ej2_base_1.addClass([td_1], 'e-unboundcell');\n\t                    }\n\t                    tr.appendChild(td_1);\n\t                }\n\t                i = span ? i + parseInt(span, 10) : i + 1;\n\t                m++;\n\t            }\n\t            tbody.appendChild(tr);\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            td.appendChild(form);\n\t            return td;\n\t        };\n\t        return InlineEditRender;\n\t    }());\n\t    exports.InlineEditRender = InlineEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEditRender = (function () {\n\t        function BatchEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        BatchEditRender.prototype.update = function (elements, args) {\n\t            args.cell.innerHTML = '';\n\t            args.cell.appendChild(this.getEditElement(elements, args));\n\t            args.cell.classList.add('e-editedbatchcell');\n\t            ej2_base_1.classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n\t        };\n\t        BatchEditRender.prototype.getEditElement = function (elements, args) {\n\t            var gObj = this.parent;\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            form.appendChild(elements[args.columnObject.uid]);\n\t            if (args.columnObject.editType === 'booleanedit') {\n\t                args.cell.classList.add('e-boolcell');\n\t            }\n\t            if (!args.columnObject.editType) {\n\t                args.cell.classList.add('e-inputbox');\n\t            }\n\t            return form;\n\t        };\n\t        return BatchEditRender;\n\t    }());\n\t    exports.BatchEditRender = BatchEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(6), __webpack_require__(5), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_popups_1, ej2_base_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEditRender = (function () {\n\t        function DialogEditRender(parent, serviceLocator) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.dialogDestroy, this.destroy, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        }\n\t        DialogEditRender.prototype.setLocaleObj = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t        };\n\t        DialogEditRender.prototype.addNew = function (elements, args) {\n\t            this.isEdit = false;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.update = function (elements, args) {\n\t            this.isEdit = true;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.createDialog = function (elements, args) {\n\t            var gObj = this.parent;\n\t            this.dialog = ej2_base_1.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper' });\n\t            gObj.element.appendChild(this.dialog);\n\t            this.setLocaleObj();\n\t            this.dialogObj = new ej2_popups_1.Dialog({\n\t                header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n\t                    this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n\t                content: this.getEditElement(elements), showCloseIcon: true, allowDragging: true, close: this.destroy.bind(this),\n\t                closeOnEscape: true, width: '330px', target: gObj.element, animationSettings: { effect: 'None' },\n\t                buttons: [{\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n\t                    },\n\t                    { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n\t            });\n\t            this.dialogObj.appendTo(this.dialog);\n\t            util_1.changeButtonType(this.dialogObj.element);\n\t        };\n\t        DialogEditRender.prototype.btnClick = function (e) {\n\t            if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.toLowerCase()) {\n\t                this.parent.closeEdit();\n\t                this.destroy();\n\t            }\n\t            else {\n\t                this.parent.endEdit();\n\t            }\n\t        };\n\t        DialogEditRender.prototype.destroy = function (args) {\n\t            this.parent.notify(events.destroyForm, {});\n\t            this.parent.isEdit = false;\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t            if (this.dialog && !this.dialogObj.isDestroyed) {\n\t                this.dialogObj.destroy();\n\t                ej2_base_1.remove(this.dialog);\n\t            }\n\t        };\n\t        DialogEditRender.prototype.getEditElement = function (elements) {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_1.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var cols = gObj.columns;\n\t            for (var i = 0; i < cols.length; i++) {\n\t                if (!cols[i].visible || cols[i].commands || cols[i].commandsTemplate) {\n\t                    continue;\n\t                }\n\t                var tr = ej2_base_1.createElement('tr');\n\t                var dataCell = ej2_base_1.createElement('td', { className: 'e-rowcell', attrs: { style: 'text-align:left;width:190px' } });\n\t                var label = ej2_base_1.createElement('label', { innerHTML: cols[i].field });\n\t                elements[cols[i].uid].classList.remove('e-input');\n\t                dataCell.appendChild(elements[cols[i].uid]);\n\t                tr.appendChild(dataCell);\n\t                tbody.appendChild(tr);\n\t            }\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            div.appendChild(form);\n\t            return div;\n\t        };\n\t        return DialogEditRender;\n\t    }());\n\t    exports.DialogEditRender = DialogEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_buttons_1, ej2_base_2, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BooleanEditCell = (function () {\n\t        function BooleanEditCell(parent) {\n\t            this.activeClasses = ['e-selectionbackground', 'e-active'];\n\t            this.parent = parent;\n\t        }\n\t        BooleanEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var classNames = 'e-field e-boolcell';\n\t            if (col.type === 'checkbox') {\n\t                classNames = 'e-field e-boolcell e-edit-checkselect';\n\t            }\n\t            return ej2_base_1.createElement('input', {\n\t                className: classNames, attrs: {\n\t                    type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field\n\t                }\n\t            });\n\t        };\n\t        BooleanEditCell.prototype.read = function (element) {\n\t            return element.checked;\n\t        };\n\t        BooleanEditCell.prototype.write = function (args) {\n\t            var selectChkBox;\n\t            var chkState;\n\t            if (!ej2_base_1.isNullOrUndefined(args.row)) {\n\t                selectChkBox = args.row.querySelector('.e-edit-checkselect');\n\t            }\n\t            if (args.rowData[args.column.field]) {\n\t                chkState = JSON.parse(args.rowData[args.column.field].toString().toLowerCase());\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(selectChkBox)) {\n\t                this.editType = this.parent.editSettings.mode;\n\t                this.editRow = args.row;\n\t                if (args.requestType !== 'add') {\n\t                    var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n\t                    chkState = row ? row.isSelected : false;\n\t                }\n\t                util_1.addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), chkState].concat(this.activeClasses));\n\t            }\n\t            this.obj = new ej2_buttons_1.CheckBox(ej2_base_2.extend({\n\t                label: this.parent.editSettings.mode !== 'dialog' ? '' : args.column.headerText,\n\t                checked: chkState,\n\t                disabled: !util_1.isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n\t                change: this.checkBoxChange.bind(this)\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t        };\n\t        BooleanEditCell.prototype.checkBoxChange = function (args) {\n\t            if (this.editRow && this.editType !== 'dialog') {\n\t                var add = false;\n\t                if (!args.checked) {\n\t                    this.editRow.removeAttribute('aria-selected');\n\t                }\n\t                else {\n\t                    add = true;\n\t                    this.editRow.setAttribute('aria-selected', add.toString());\n\t                }\n\t                util_1.addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), add].concat(this.activeClasses));\n\t            }\n\t        };\n\t        BooleanEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return BooleanEditCell;\n\t    }());\n\t    exports.BooleanEditCell = BooleanEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(61), __webpack_require__(8), __webpack_require__(7), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_dropdowns_1, ej2_data_1, util_1, util_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DropDownEditCell = (function () {\n\t        function DropDownEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DropDownEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, type: 'text', 'e-mappinguid': args.column.uid,\n\t                }\n\t            });\n\t        };\n\t        DropDownEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_dropdowns_1.DropDownList(ej2_base_1.extend({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                query: new ej2_data_1.Query().select(args.column.field), enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                fields: { value: args.column.field }, value: args.rowData[args.column.field],\n\t                enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete,\n\t                placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n\t                floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', args.column.field);\n\t        };\n\t        DropDownEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        DropDownEditCell.prototype.ddActionComplete = function (e) {\n\t            e.result = e.result.filter(function (val, i, values) { return values.indexOf(val) === i; });\n\t            e.result.sort();\n\t        };\n\t        DropDownEditCell.prototype.dropDownOpen = function (args) {\n\t            var dlgElement = util_2.parentsUntil(this.obj.element, 'e-dialog');\n\t            if (!ej2_base_1.isNullOrUndefined(dlgElement)) {\n\t                var dlgObj = this.parent.element.querySelector('#' + dlgElement.id).ej2_instances[0];\n\t                args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n\t            }\n\t        };\n\t        DropDownEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return DropDownEditCell;\n\t    }());\n\t    exports.DropDownEditCell = DropDownEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(24), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DefaultEditCell = (function () {\n\t        function DefaultEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DefaultEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var input = ej2_base_1.createElement('input', {\n\t                className: 'e-field e-input e-defaultcell', attrs: {\n\t                    type: 'text', value: !ej2_base_1.isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field, style: 'text-align:' + col.textAlign,\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        DefaultEditCell.prototype.read = function (element) {\n\t            return element.value;\n\t        };\n\t        DefaultEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            ej2_inputs_1.Input.createInput({\n\t                element: args.element, floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t                properties: {\n\t                    enableRtl: this.parent.enableRtl, enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                    placeholder: isInline ? '' : args.column.headerText\n\t                }\n\t            });\n\t        };\n\t        return DefaultEditCell;\n\t    }());\n\t    exports.DefaultEditCell = DefaultEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(93)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEdit = (function (_super) {\n\t        __extends(InlineEdit, _super);\n\t        function InlineEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        InlineEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        InlineEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        InlineEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return InlineEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.InlineEdit = InlineEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(10), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events, row_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NormalEdit = (function () {\n\t        function NormalEdit(parent, serviceLocator, renderer) {\n\t            this.parent = parent;\n\t            this.renderer = renderer;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        NormalEdit.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            var gObj = this.parent;\n\t            if (util_1.parentsUntil(target, 'e-gridcontent') && !util_1.parentsUntil(target, 'e-unboundcelldiv')) {\n\t                this.rowIndex = util_1.parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n\t                if (gObj.isEdit) {\n\t                    gObj.editModule.endEdit();\n\t                }\n\t            }\n\t        };\n\t        NormalEdit.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n\t                this.parent.editModule.startEdit(util_1.parentsUntil(e.target, 'e-row'));\n\t            }\n\t        };\n\t        NormalEdit.prototype.editComplete = function (e) {\n\t            this.parent.isEdit = false;\n\t            switch (e.requestType) {\n\t                case 'save':\n\t                    if (!this.parent.element.classList.contains('e-checkboxselection')\n\t                        || !this.parent.element.classList.contains('e-persistselection')) {\n\t                        this.parent.selectRow(0);\n\t                    }\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'save',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t                case 'delete':\n\t                    this.parent.selectRow(this.editRowIndex);\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'delete',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t            }\n\t        };\n\t        NormalEdit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            var primaryKeys = gObj.getPrimaryKeyFieldNames();\n\t            var primaryKeyValues = [];\n\t            this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t            this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n\t            for (var i = 0; i < primaryKeys.length; i++) {\n\t                primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n\t            }\n\t            var args = {\n\t                row: tr, primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n\t                rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false\n\t            };\n\t            gObj.trigger(events.beginEdit, args);\n\t            args.type = 'actionBegin';\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.isEdit = true;\n\t            gObj.clearSelection();\n\t            if (gObj.editSettings.mode === 'dialog') {\n\t                args.row.classList.add('e-dlgeditrow');\n\t            }\n\t            this.renderer.update(args);\n\t            this.uid = tr.getAttribute('data-uid');\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = 'actionComplete';\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.endEdit = function () {\n\t            var gObj = this.parent;\n\t            if (!this.parent.isEdit || !gObj.editModule.formObj.validate()) {\n\t                return;\n\t            }\n\t            var editedData = ej2_base_1.extend({}, this.previousData);\n\t            var args = {\n\t                requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n\t                previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n\t            };\n\t            editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-gridform'), editedData);\n\t            if (gObj.element.querySelectorAll('.e-editedrow').length) {\n\t                args.action = 'edit';\n\t                gObj.trigger(events.actionBegin, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                gObj.showSpinner();\n\t                gObj.notify(events.updateData, args);\n\t            }\n\t            else {\n\t                args.action = 'add';\n\t                args.selectedRow = 0;\n\t                gObj.notify(events.modelChanged, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            gObj.editModule.destroyWidgets();\n\t            gObj.editModule.destroyForm();\n\t            gObj.notify(events.dialogDestroy, {});\n\t            this.stopEditStatus();\n\t            if (gObj.editSettings.mode === 'dialog' && args.action !== 'add') {\n\t                gObj.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n\t            }\n\t        };\n\t        NormalEdit.prototype.editHandler = function (args) {\n\t            var _this = this;\n\t            if (args.promise) {\n\t                args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n\t            }\n\t            else {\n\t                this.editSuccess({}, args);\n\t            }\n\t        };\n\t        NormalEdit.prototype.edSucc = function (e, args) {\n\t            this.editSuccess(e, args);\n\t        };\n\t        NormalEdit.prototype.edFail = function (e) {\n\t            this.editFailure(e);\n\t        };\n\t        NormalEdit.prototype.editSuccess = function (e, args) {\n\t            if (e.result) {\n\t                this.parent.trigger(events.beforeDataBound, e);\n\t                args.data = e.result;\n\t            }\n\t            else {\n\t                this.parent.trigger(events.beforeDataBound, args);\n\t            }\n\t            args.type = events.actionComplete;\n\t            this.parent.isEdit = false;\n\t            this.refreshRow(args.data);\n\t            this.parent.trigger(events.actionComplete, args);\n\t            if (!this.parent.element.classList.contains('e-checkboxselection')\n\t                || !this.parent.element.classList.contains('e-persistselection')) {\n\t                this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n\t            }\n\t            this.parent.element.focus();\n\t            this.parent.hideSpinner();\n\t        };\n\t        NormalEdit.prototype.editFailure = function (e) {\n\t            this.parent.trigger(events.actionFailure, e);\n\t        };\n\t        NormalEdit.prototype.refreshRow = function (data) {\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var rowObj = this.parent.getRowObjectFromUID(this.uid);\n\t            if (rowObj) {\n\t                rowObj.changes = data;\n\t                row.refresh(rowObj, this.parent.columns, true);\n\t            }\n\t        };\n\t        NormalEdit.prototype.closeEdit = function () {\n\t            if (!this.parent.isEdit) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var args = {\n\t                requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            gObj.isEdit = false;\n\t            this.stopEditStatus();\n\t            args.type = events.actionComplete;\n\t            if (gObj.editSettings.mode !== 'dialog') {\n\t                this.refreshRow(args.data);\n\t            }\n\t            gObj.selectRow(this.rowIndex);\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.addRecord = function (data) {\n\t            var gObj = this.parent;\n\t            if (data) {\n\t                gObj.notify(events.modelChanged, {\n\t                    requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add'\n\t                });\n\t                return;\n\t            }\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            this.previousData = {};\n\t            this.uid = '';\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                this.previousData[col.field] = data && data[col.field] ? data[col.field] : col.defaultValue;\n\t            }\n\t            var args = {\n\t                cancel: false, foreignKeyData: {},\n\t                requestType: 'add', data: this.previousData, type: events.actionBegin\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.isEdit = true;\n\t            gObj.clearSelection();\n\t            this.renderer.addNew({ rowData: args.data, requestType: 'add' });\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = events.actionComplete;\n\t            args.row = gObj.element.querySelector('.e-addedrow');\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editRowIndex = this.parent.selectedRowIndex;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n\t                data: data ? [data] : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n\t            });\n\t        };\n\t        NormalEdit.prototype.stopEditStatus = function () {\n\t            var gObj = this.parent;\n\t            var elem = gObj.element.querySelector('.e-addedrow');\n\t            if (elem) {\n\t                ej2_base_2.remove(elem);\n\t            }\n\t            elem = gObj.element.querySelector('.e-editedrow');\n\t            if (elem) {\n\t                elem.classList.remove('e-editedrow');\n\t            }\n\t        };\n\t        NormalEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.crudAction, this.editHandler, this);\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.deleteComplete, this.editComplete, this);\n\t            this.parent.on(events.saveComplete, this.editComplete, this);\n\t        };\n\t        NormalEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.crudAction, this.editHandler);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.deleteComplete, this.editComplete);\n\t            this.parent.off(events.saveComplete, this.editComplete);\n\t        };\n\t        NormalEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return NormalEdit;\n\t    }());\n\t    exports.NormalEdit = NormalEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(14), __webpack_require__(7), __webpack_require__(10), __webpack_require__(13), __webpack_require__(26), __webpack_require__(18), __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, enum_1, util_1, events, row_renderer_1, cell_renderer_1, cell_1, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEdit = (function () {\n\t        function BatchEdit(parent, serviceLocator, renderer) {\n\t            this.cellDetails = {};\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = renderer;\n\t            this.focus = serviceLocator.getService('focus');\n\t            this.addEventListener();\n\t        }\n\t        BatchEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.beforeCellFocused, this.onBeforeCellFocused, this);\n\t            this.parent.on(events.cellFocused, this.onCellFocused, this);\n\t            this.dataBoundFunction = this.dataBound.bind(this);\n\t            this.parent.addEventListener(events.dataBound, this.dataBoundFunction);\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t        };\n\t        BatchEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.beforeCellFocused, this.onBeforeCellFocused);\n\t            this.parent.on(events.cellFocused, this.onCellFocused);\n\t            this.parent.removeEventListener(events.dataBound, this.dataBoundFunction);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t        };\n\t        BatchEdit.prototype.dataBound = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        BatchEdit.prototype.clickHandler = function (e) {\n\t            if (!util_1.parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n\t                this.saveCell();\n\t                if (util_1.parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n\t                    this.setCellIdx(e.target);\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.dblClickHandler = function (e) {\n\t            var target = util_1.parentsUntil(e.target, 'e-rowcell');\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            if (target && tr && !isNaN(parseInt(target.getAttribute('aria-colindex'), 10))) {\n\t                this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.columns[parseInt(target.getAttribute('aria-colindex'), 10)].field);\n\t            }\n\t        };\n\t        BatchEdit.prototype.onBeforeCellFocused = function (e) {\n\t            if (this.parent.isEdit && this.validateFormObj() &&\n\t                (e.byClick || (['tab', 'shiftTab', 'enter', 'shiftEnter'].indexOf(e.keyArgs.action) > -1))) {\n\t                e.cancel = true;\n\t                if (e.byClick) {\n\t                    e.clickArgs.preventDefault();\n\t                }\n\t                else {\n\t                    e.keyArgs.preventDefault();\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.onCellFocused = function (e) {\n\t            var clear = !e.container.isContent || !e.container.isDataCell;\n\t            if (!e.byKey || clear) {\n\t                return;\n\t            }\n\t            var _a = e.container.indexes, rowIndex = _a[0], cellIndex = _a[1];\n\t            var isEdit = this.parent.isEdit;\n\t            if (!document.querySelectorAll('.e-popup-open').length) {\n\t                isEdit = isEdit && !this.validateFormObj();\n\t                switch (e.keyArgs.action) {\n\t                    case 'tab':\n\t                    case 'shiftTab':\n\t                        if (isEdit) {\n\t                            this.editCellFromIndex(rowIndex, cellIndex);\n\t                        }\n\t                        break;\n\t                    case 'enter':\n\t                    case 'shiftEnter':\n\t                        e.keyArgs.preventDefault();\n\t                        if (isEdit) {\n\t                            this.editCell(rowIndex, this.cellDetails.column.field);\n\t                        }\n\t                        break;\n\t                    case 'f2':\n\t                        this.editCellFromIndex(rowIndex, cellIndex);\n\t                        this.focus.focus();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.isAddRow = function (index) {\n\t            return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n\t        };\n\t        BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n\t            this.cellDetails.rowIndex = rowIdx;\n\t            this.cellDetails.cellIndex = cellIdx;\n\t            this.editCell(rowIdx, this.parent.columns[cellIdx].field);\n\t        };\n\t        BatchEdit.prototype.closeEdit = function () {\n\t            var gObj = this.parent;\n\t            var rows = this.parent.getRowsObject();\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var tr;\n\t            if (gObj.isEdit) {\n\t                this.saveCell(true);\n\t            }\n\t            gObj.clearSelection();\n\t            for (var i = 0; i < rows.length; i++) {\n\t                if (rows[i].isDirty) {\n\t                    tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n\t                    if (tr) {\n\t                        if (tr.classList.contains('e-insertedrow')) {\n\t                            ej2_base_2.remove(tr);\n\t                            this.removeRowObjectFromUID(rows[i].uid);\n\t                            i--;\n\t                        }\n\t                        else {\n\t                            delete rows[i].changes;\n\t                            rows[i].isDirty = false;\n\t                            ej2_base_2.classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n\t                            rowRenderer.refresh(rows[i], gObj.columns, false);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            gObj.selectRow(this.cellDetails.rowIndex);\n\t            this.refreshRowIdx();\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t        };\n\t        BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.saveCell();\n\t            this.bulkDelete(fieldname, data);\n\t        };\n\t        BatchEdit.prototype.addRecord = function (data) {\n\t            this.bulkAddRow(data);\n\t        };\n\t        BatchEdit.prototype.endEdit = function (data) {\n\t            if (this.parent.isEdit && this.validateFormObj()) {\n\t                return;\n\t            }\n\t            this.batchSave();\n\t        };\n\t        BatchEdit.prototype.validateFormObj = function () {\n\t            return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n\t        };\n\t        BatchEdit.prototype.batchSave = function () {\n\t            var gObj = this.parent;\n\t            this.saveCell();\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var changes = this.getBatchChanges();\n\t            var args = { batchChanges: changes, cancel: false };\n\t            gObj.trigger(events.beforeBatchSave, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.showSpinner();\n\t            gObj.notify(events.bulkSave, { changes: changes });\n\t        };\n\t        BatchEdit.prototype.getBatchChanges = function () {\n\t            var changes = {\n\t                addedRecords: [],\n\t                deletedRecords: [],\n\t                changedRecords: []\n\t            };\n\t            var rows = this.parent.getRowsObject();\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                if (row.isDirty) {\n\t                    switch (row.edit) {\n\t                        case 'add':\n\t                            changes.addedRecords.push(row.changes);\n\t                            break;\n\t                        case 'delete':\n\t                            changes.deletedRecords.push(row.data);\n\t                            break;\n\t                        default:\n\t                            changes.changedRecords.push(row.changes);\n\t                    }\n\t                }\n\t            }\n\t            return changes;\n\t        };\n\t        BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n\t            var rows = this.parent.getRowsObject();\n\t            var i = 0;\n\t            for (var len = rows.length; i < len; i++) {\n\t                if (rows[i].uid === uid) {\n\t                    break;\n\t                }\n\t            }\n\t            rows.splice(i, 1);\n\t        };\n\t        BatchEdit.prototype.addRowObject = function (row) {\n\t            this.parent.getRowsObject().unshift(row);\n\t        };\n\t        BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            var index = data ? this.getIndexFromData(data) : gObj.selectedRowIndex;\n\t            var args = {\n\t                primaryKey: this.parent.getPrimaryKeyFieldNames(),\n\t                rowIndex: index,\n\t                rowData: data ? data : gObj.getSelectedRecords()[0],\n\t                row: data ? gObj.getRows()[index] : gObj.getSelectedRows()[0], cancel: false\n\t            };\n\t            if (!args.row) {\n\t                return;\n\t            }\n\t            gObj.trigger(events.beforeBatchDelete, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var uid = args.row.getAttribute('data-uid');\n\t            if (args.row.classList.contains('e-insertedrow')) {\n\t                this.removeRowObjectFromUID(uid);\n\t                ej2_base_2.remove(args.row);\n\t            }\n\t            else {\n\t                var rowObj = gObj.getRowObjectFromUID(uid);\n\t                rowObj.isDirty = true;\n\t                rowObj.edit = 'delete';\n\t                ej2_base_2.classList(args.row, ['e-hiddenrow', 'e-updatedtd'], []);\n\t            }\n\t            this.refreshRowIdx();\n\t            gObj.selectRow(index);\n\t            delete args.row;\n\t            gObj.trigger(events.batchDelete, args);\n\t            gObj.notify(events.batchDelete, { rows: this.parent.getRowsObject() });\n\t            gObj.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.refreshRowIdx = function () {\n\t            var rows = [].slice.call(this.parent.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    rows[i].setAttribute('aria-rowindex', j.toString());\n\t                    j++;\n\t                }\n\t                else {\n\t                    rows[i].removeAttribute('aria-rowindex');\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.getIndexFromData = function (data) {\n\t            return util_1.inArray(data, this.parent.getCurrentViewRecords());\n\t        };\n\t        BatchEdit.prototype.bulkAddRow = function (data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            if (gObj.isEdit) {\n\t                this.saveCell();\n\t            }\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var defaultData = data ? data : this.getDefaultData();\n\t            var args = {\n\t                defaultData: defaultData,\n\t                primaryKey: gObj.getPrimaryKeyFieldNames(),\n\t                cancel: false\n\t            };\n\t            gObj.trigger(events.beforeBatchAdd, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var model = new row_model_generator_1.RowModelGenerator(this.parent);\n\t            var modelData = model.generateRows([args.defaultData]);\n\t            var tr = row.render(modelData[0], gObj.getColumns());\n\t            var col;\n\t            var index;\n\t            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n\t                tr.insertBefore(ej2_base_2.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n\t                modelData[0].cells.unshift(new cell_1.Cell({ cellType: enum_1.CellType.Indent }));\n\t            }\n\t            var tbody = gObj.getContentTable().querySelector('tbody');\n\t            tr.classList.add('e-insertedrow');\n\t            tbody.insertBefore(tr, tbody.firstChild);\n\t            ej2_base_1.addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n\t            modelData[0].isDirty = true;\n\t            modelData[0].changes = ej2_base_1.extend({}, modelData[0].data);\n\t            modelData[0].edit = 'add';\n\t            this.addRowObject(modelData[0]);\n\t            this.refreshRowIdx();\n\t            this.focus.forgetPrevious();\n\t            gObj.selectRow(0);\n\t            if (!data) {\n\t                index = this.findNextEditableCell(0, true);\n\t                col = gObj.columns[index];\n\t                this.editCell(0, col.field, true);\n\t            }\n\t            var args1 = {\n\t                defaultData: args.defaultData, row: tr,\n\t                columnObject: col, columnIndex: index, primaryKey: args.primaryKey, cell: tr.cells[index]\n\t            };\n\t            gObj.trigger(events.batchAdd, args1);\n\t            gObj.notify(events.batchAdd, { rows: this.parent.getRowsObject() });\n\t        };\n\t        BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd) {\n\t            var cols = this.parent.columns;\n\t            var endIndex = cols.length;\n\t            for (var i = columnIndex; i < endIndex; i++) {\n\t                if (!isAdd && this.checkNPCell(cols[i])) {\n\t                    return i;\n\t                }\n\t                else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.checkNPCell = function (col) {\n\t            return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n\t        };\n\t        BatchEdit.prototype.getDefaultData = function () {\n\t            var gObj = this.parent;\n\t            var data = {};\n\t            var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                data[col.field] = col.defaultValue ? col.defaultValue : dValues[col.type];\n\t            }\n\t            return data;\n\t        };\n\t        BatchEdit.prototype.setCellIdx = function (target) {\n\t            var gLen = 0;\n\t            if (this.parent.allowGrouping) {\n\t                gLen = this.parent.groupSettings.columns.length;\n\t            }\n\t            this.cellDetails.cellIndex = target.cellIndex - gLen;\n\t            this.cellDetails.rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t        };\n\t        BatchEdit.prototype.editCell = function (index, field, isAdd) {\n\t            var gObj = this.parent;\n\t            var col = gObj.getColumnByField(field);\n\t            var keys = gObj.getPrimaryKeyFieldNames();\n\t            if (gObj.editSettings.allowEditing && col.allowEditing) {\n\t                if (gObj.isEdit && !(this.cellDetails.column.field === field && this.cellDetails.rowIndex === index)) {\n\t                    this.saveCell();\n\t                }\n\t                if (gObj.isEdit) {\n\t                    return;\n\t                }\n\t                var row = gObj.getDataRows()[index];\n\t                if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.template || col.columns) {\n\t                    return;\n\t                }\n\t                var rowData = ej2_base_1.extend({}, this.getDataByIndex(index));\n\t                var cells = [].slice.apply(row.cells);\n\t                var args = {\n\t                    cell: cells[this.getColIndex(cells, this.getCellIdx(col.uid))], row: row,\n\t                    columnName: col.field, columnObject: col, isForeignKey: !ej2_base_3.isNullOrUndefined(col.foreignKeyValue),\n\t                    primaryKey: keys, rowData: rowData,\n\t                    validationRules: ej2_base_1.extend({}, col.validationRules ? col.validationRules : {}),\n\t                    value: rowData[col.field], type: !isAdd ? 'edit' : 'add', cancel: false\n\t                };\n\t                if (!args.cell) {\n\t                    return;\n\t                }\n\t                gObj.trigger(events.cellEdit, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                this.cellDetails = {\n\t                    rowData: rowData, column: col, value: args.value, isForeignKey: args.isForeignKey, rowIndex: index,\n\t                    cellIndex: parseInt(args.cell.getAttribute('aria-colindex'), 10)\n\t                };\n\t                if (args.cell.classList.contains('e-updatedtd')) {\n\t                    this.isColored = true;\n\t                    args.cell.classList.remove('e-updatedtd');\n\t                }\n\t                gObj.isEdit = true;\n\t                gObj.clearSelection();\n\t                if (!gObj.element.classList.contains('e-checkboxselection') || !gObj.element.classList.contains('e-persistselection')) {\n\t                    gObj.selectRow(this.cellDetails.rowIndex, true);\n\t                }\n\t                this.renderer.update(args);\n\t                this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n\t                gObj.editModule.applyFormValidation([col]);\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n\t            var col = this.parent.getColumnByField(field);\n\t            if (col && !col.isPrimaryKey) {\n\t                var td = this.parent.getDataRows()[rowIndex].cells[this.parent.getColumnIndexByField(field)];\n\t                var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n\t                this.refreshTD(td, col, rowObj, value);\n\t                this.parent.trigger(events.queryCellInfo, {\n\t                    cell: td, column: col, data: rowObj.changes\n\t                });\n\t            }\n\t        };\n\t        BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n\t            if (!rowObj.changes) {\n\t                rowObj.changes = ej2_base_1.extend({}, rowObj.data);\n\t            }\n\t            rowObj.changes[field] = value;\n\t            rowObj.isDirty = true;\n\t        };\n\t        BatchEdit.prototype.updateRow = function (index, data) {\n\t            var keys = Object.keys(data);\n\t            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                var col = keys_1[_i];\n\t                this.updateCell(index, col, data[col]);\n\t            }\n\t        };\n\t        BatchEdit.prototype.getCellIdx = function (uid) {\n\t            var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n\t            if (!ej2_base_3.isNullOrUndefined(this.parent.detailTemplate) || !ej2_base_3.isNullOrUndefined(this.parent.childGrid)) {\n\t                cIdx++;\n\t            }\n\t            return cIdx;\n\t        };\n\t        BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n\t            var cell = new cell_renderer_1.CellRenderer(this.parent, this.serviceLocator);\n\t            this.setChanges(rowObj, column.field, value);\n\t            cell.refreshTD(td, rowObj.cells[this.getCellIdx(column.uid)], rowObj.changes);\n\t            td.classList.add('e-updatedtd');\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.getColIndex = function (cells, index) {\n\t            for (var m = 0; m < cells.length; m++) {\n\t                var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n\t                if (colIndex === index) {\n\t                    return m;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.saveCell = function (isForceSave) {\n\t            var gObj = this.parent;\n\t            if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n\t                return;\n\t            }\n\t            var tr = util_1.parentsUntil(this.form, 'e-row');\n\t            var column = this.cellDetails.column;\n\t            var editedData = gObj.editModule.getCurrentEditedData(this.form, {});\n\t            editedData = ej2_base_1.extend(this.cellDetails.rowData, editedData);\n\t            var args = {\n\t                columnName: column.field,\n\t                value: editedData[column.field],\n\t                rowData: this.cellDetails.rowData,\n\t                previousValue: this.cellDetails.value,\n\t                columnObject: column,\n\t                cell: this.form.parentElement,\n\t                isForeignKey: this.cellDetails.isForeignKey, cancel: false\n\t            };\n\t            if (!isForceSave) {\n\t                gObj.trigger(events.cellSave, args);\n\t            }\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.editModule.destroyForm();\n\t            gObj.editModule.destroyWidgets([column]);\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            this.refreshTD(args.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), args.value);\n\t            ej2_base_1.removeClass([tr], ['e-editedrow', 'e-batchrow']);\n\t            ej2_base_1.removeClass([args.cell], ['e-editedbatchcell', 'e-boolcell']);\n\t            gObj.isEdit = false;\n\t            if (!ej2_base_3.isNullOrUndefined(args.value) && args.value.toString() ===\n\t                (!ej2_base_3.isNullOrUndefined(this.cellDetails.value) ? this.cellDetails.value : '').toString() && !this.isColored) {\n\t                args.cell.classList.remove('e-updatedtd');\n\t            }\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.isColored = false;\n\t        };\n\t        BatchEdit.prototype.getDataByIndex = function (index) {\n\t            var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n\t            return row.changes ? row.changes : row.data;\n\t        };\n\t        return BatchEdit;\n\t    }());\n\t    exports.BatchEdit = BatchEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(93)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEdit = (function (_super) {\n\t        __extends(DialogEdit, _super);\n\t        function DialogEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        DialogEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        DialogEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        DialogEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return DialogEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.DialogEdit = DialogEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(71), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_calendars_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DatePickerEditCell = (function () {\n\t        function DatePickerEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DatePickerEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, type: 'text', 'e-mappinguid': args.column.uid\n\t                }\n\t            });\n\t        };\n\t        DatePickerEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        DatePickerEditCell.prototype.write = function (args) {\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_calendars_1.DatePicker(ej2_base_1.extend({\n\t                floatLabelType: isInline ? 'Never' : 'Always',\n\t                value: new Date(args.rowData[args.column.field]), placeholder: isInline ?\n\t                    '' : args.column.headerText, enableRtl: this.parent.enableRtl,\n\t                enabled: util_1.isEditable(args.column, args.type, args.element),\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t        };\n\t        DatePickerEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return DatePickerEditCell;\n\t    }());\n\t    exports.DatePickerEditCell = DatePickerEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(10), __webpack_require__(98), __webpack_require__(5), __webpack_require__(21), __webpack_require__(99), __webpack_require__(20), __webpack_require__(14), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, ej2_excel_export_1, ej2_base_1, data_1, export_helper_1, summary_model_generator_1, enum_1, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExcelExport = (function () {\n\t        function ExcelExport(parent) {\n\t            this.book = {};\n\t            this.workSheet = [];\n\t            this.rows = [];\n\t            this.columns = [];\n\t            this.styles = [];\n\t            this.rowLength = 1;\n\t            this.expType = 'appendtosheet';\n\t            this.includeHiddenColumn = false;\n\t            this.isCsvExport = false;\n\t            this.isElementIdChanged = false;\n\t            this.parent = parent;\n\t        }\n\t        ExcelExport.prototype.getModuleName = function () {\n\t            return 'ExcelExport';\n\t        };\n\t        ExcelExport.prototype.init = function (gObj) {\n\t            if (gObj.element !== null && gObj.element.id === '') {\n\t                gObj.element.id = new Date().toISOString();\n\t                this.isElementIdChanged = true;\n\t            }\n\t            this.parent = gObj;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.isExporting = undefined;\n\t            this.book = {};\n\t            this.workSheet = [];\n\t            this.rows = [];\n\t            this.columns = [];\n\t            this.styles = [];\n\t            this.rowLength = 1;\n\t            this.footer = undefined;\n\t            this.expType = 'appendtosheet';\n\t            this.includeHiddenColumn = false;\n\t            this.exportValueFormatter = new export_helper_1.ExportValueFormatter();\n\t            this.theme = 'material';\n\t        };\n\t        ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv) {\n\t            var gObj = grid;\n\t            this.data = new data_1.Data(gObj);\n\t            this.isExporting = true;\n\t            if (isCsv) {\n\t                this.isCsvExport = isCsv;\n\t            }\n\t            else {\n\t                this.isCsvExport = false;\n\t            }\n\t            gObj.trigger(events.beforeExcelExport);\n\t            return this.processRecords(grid, exportProperties, isMultipleExport, workbook);\n\t        };\n\t        ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n\t            var _this = this;\n\t            if (exportProperties !== undefined && exportProperties.dataSource !== undefined &&\n\t                exportProperties.dataSource instanceof ej2_data_1.DataManager) {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = new ej2_data_1.DataManager({ url: exportProperties.dataSource.dataSource.url, adaptor: exportProperties.dataSource.adaptor }).executeQuery(new ej2_data_1.Query());\n\t                    dataManager.then(function (r) {\n\t                        _this.init(gObj);\n\t                        _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n\t                        resolve(_this.book);\n\t                    });\n\t                });\n\t            }\n\t            else {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = _this.data.getData({}, _this.data.generateQuery(true).requiresCount());\n\t                    dataManager.then(function (r) {\n\t                        _this.init(gObj);\n\t                        _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n\t                        resolve(_this.book);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t        ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, isMultipleExport, workbook, r) {\n\t            var blankRows = 5;\n\t            if (exportProperties !== undefined && exportProperties.multipleExport !== undefined) {\n\t                this.expType = (exportProperties.multipleExport.type !== undefined ? exportProperties.multipleExport.type : 'appendtosheet');\n\t                if (exportProperties.multipleExport.blankRows !== undefined) {\n\t                    blankRows = exportProperties.multipleExport.blankRows;\n\t                }\n\t            }\n\t            if (workbook === undefined) {\n\t                this.workSheet = [];\n\t                this.rows = [];\n\t                this.columns = [];\n\t                this.styles = [];\n\t            }\n\t            else if (this.expType === 'newsheet') {\n\t                this.workSheet = workbook.worksheets;\n\t                this.rows = [];\n\t                this.columns = [];\n\t                this.styles = workbook.styles;\n\t            }\n\t            else {\n\t                this.workSheet = [];\n\t                this.rows = workbook.worksheets[0].rows;\n\t                this.columns = workbook.worksheets[0].columns;\n\t                this.styles = workbook.styles;\n\t                this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n\t                this.rowLength++;\n\t            }\n\t            if (exportProperties !== undefined) {\n\t                if (isMultipleExport !== undefined) {\n\t                    if (exportProperties.header !== undefined && (isMultipleExport || this.expType === 'newsheet')) {\n\t                        this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n\t                    }\n\t                    if (exportProperties.footer !== undefined) {\n\t                        if (this.expType === 'appendtosheet') {\n\t                            if (!isMultipleExport) {\n\t                                this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                            }\n\t                        }\n\t                        else {\n\t                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (exportProperties.header !== undefined) {\n\t                        this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n\t                    }\n\t                    if (exportProperties.footer !== undefined) {\n\t                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                    }\n\t                }\n\t            }\n\t            this.includeHiddenColumn = (exportProperties !== undefined ? exportProperties.includeHiddenColumn : false);\n\t            var headerRow = new export_helper_1.ExportHelper(gObj).getHeaders(gObj.columns, this.includeHiddenColumn);\n\t            var groupIndent = 0;\n\t            if ((r.result).level !== undefined) {\n\t                groupIndent += (r.result).level;\n\t                groupIndent += (r.result).childLevels;\n\t            }\n\t            this.processHeaderContent(gObj, headerRow, exportProperties, groupIndent);\n\t            if (exportProperties !== undefined && exportProperties.dataSource !== undefined && !(exportProperties.dataSource instanceof ej2_data_1.DataManager)) {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties.dataSource);\n\t            }\n\t            else if (exportProperties !== undefined && exportProperties.exportType === 'currentview') {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport, gObj.getCurrentViewRecords());\n\t            }\n\t            else {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport);\n\t            }\n\t            this.isExporting = false;\n\t            gObj.trigger(events.excelExportComplete);\n\t        };\n\t        ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, isMultipleExport, currentViewRecords) {\n\t            var column = gObj.columns;\n\t            var record = undefined;\n\t            if (currentViewRecords !== undefined) {\n\t                record = currentViewRecords;\n\t            }\n\t            else {\n\t                record = returnType.result;\n\t            }\n\t            if (record.level !== undefined) {\n\t                this.processGroupedRows(gObj, record, headerRow, record.level);\n\t            }\n\t            else {\n\t                this.processRecordRows(gObj, record, headerRow, 0);\n\t                if (returnType.aggregates !== undefined) {\n\t                    if (currentViewRecords !== undefined) {\n\t                        this.processAggregates(gObj, returnType.result, currentViewRecords);\n\t                    }\n\t                    else {\n\t                        this.processAggregates(gObj, returnType.result);\n\t                    }\n\t                }\n\t            }\n\t            if (this.footer !== undefined) {\n\t                if ((this.expType === 'appendtosheet' && !isMultipleExport) || (this.expType === 'newsheet')) {\n\t                    this.processExcelFooter(this.footer);\n\t                }\n\t            }\n\t            var sheet = {};\n\t            if (this.columns.length > 0) {\n\t                sheet.columns = this.columns;\n\t            }\n\t            sheet.rows = this.rows;\n\t            this.workSheet.push(sheet);\n\t            this.book.worksheets = this.workSheet;\n\t            this.book.styles = this.styles;\n\t            if (!isMultipleExport) {\n\t                if (this.isCsvExport) {\n\t                    var book = new ej2_excel_export_1.Workbook(this.book, 'csv');\n\t                    book.save('Export.csv');\n\t                }\n\t                else {\n\t                    var book = new ej2_excel_export_1.Workbook(this.book, 'xlsx');\n\t                    book.save('Export.xlsx');\n\t                }\n\t                if (this.isElementIdChanged) {\n\t                    gObj.element.id = '';\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level) {\n\t            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n\t                var item = dataSource_1[_i];\n\t                var cells = [];\n\t                var index = 1;\n\t                var cell = {};\n\t                cell.index = index + level;\n\t                var args = {\n\t                    value: item.key,\n\t                    column: gObj.getColumnByField(item.field),\n\t                    style: undefined\n\t                };\n\t                cell.value = item.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ';\n\t                if (item.count > 1) {\n\t                    cell.value += item.count + ' items';\n\t                }\n\t                else {\n\t                    cell.value += item.count + ' item';\n\t                }\n\t                cell.style = this.getCaptionThemeStyle(this.theme);\n\t                var captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(gObj);\n\t                var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n\t                this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, this.rowLength);\n\t                cells.push(cell);\n\t                if (this.rows[this.rowLength - 1].cells.length > 0) {\n\t                    var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n\t                    var hIndex = 0;\n\t                    for (var _a = 0, _b = this.rows[this.rowLength - 1].cells; _a < _b.length; _a++) {\n\t                        var tCell = _b[_a];\n\t                        if (tCell.index < lIndex) {\n\t                            lIndex = tCell.index;\n\t                        }\n\t                        if (tCell.index > hIndex) {\n\t                            hIndex = tCell.index;\n\t                        }\n\t                        tCell.style = this.getCaptionThemeStyle(this.theme);\n\t                        cells.push(tCell);\n\t                    }\n\t                    if ((lIndex - cell.index) > 1) {\n\t                        cell.colSpan = lIndex - cell.index;\n\t                    }\n\t                    while (hIndex < (headerRow.columns.length + index + level)) {\n\t                        var sCell = {};\n\t                        if (dataSource.childLevels === 0) {\n\t                            sCell.index = (hIndex);\n\t                        }\n\t                        else {\n\t                            sCell.index = (hIndex + 1);\n\t                        }\n\t                        sCell.style = this.getCaptionThemeStyle(this.theme);\n\t                        cells.push(sCell);\n\t                        hIndex++;\n\t                    }\n\t                }\n\t                else {\n\t                    var span = 0;\n\t                    for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n\t                        var col = _d[_c];\n\t                        if (col.visible) {\n\t                            span++;\n\t                        }\n\t                    }\n\t                    cell.colSpan = (dataSource.childLevels + span);\n\t                }\n\t                this.rows[this.rowLength - 1].cells = cells;\n\t                this.rowLength++;\n\t                if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n\t                    this.processGroupedRows(gObj, item.items, headerRow, item.items.level);\n\t                }\n\t                else {\n\t                    this.processRecordRows(gObj, item.items, headerRow, (level));\n\t                    this.processAggregates(gObj, item, undefined, (level));\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level) {\n\t            var rLen = Object.keys(record).length;\n\t            var index = 1;\n\t            var cells = [];\n\t            for (var r = 0; r < rLen; r++) {\n\t                cells = [];\n\t                index = 1;\n\t                for (var c = 0, len = headerRow.columns.length; c < len; c++) {\n\t                    var value = record[r][headerRow.columns[c].field];\n\t                    if (!ej2_base_1.isNullOrUndefined(value)) {\n\t                        var excelCellArgs = { data: record[r], column: headerRow.columns[c] };\n\t                        gObj.trigger(events.excelQueryCellInfo, ej2_base_1.extend(excelCellArgs, {\n\t                            column: headerRow.columns[c], data: record[r],\n\t                            value: value, style: undefined, colSpan: 1\n\t                        }));\n\t                        var cell = {};\n\t                        cell.index = index + level;\n\t                        cell.value = excelCellArgs.value;\n\t                        if (excelCellArgs.colSpan > 1) {\n\t                            cell.colSpan = excelCellArgs.colSpan;\n\t                        }\n\t                        if (excelCellArgs.style !== undefined) {\n\t                            var styleIndex = this.getColumnStyle(gObj, index + level);\n\t                            cell.style = this.mergeOptions(this.styles[styleIndex], excelCellArgs.style);\n\t                        }\n\t                        else {\n\t                            cell.style = { name: gObj.element.id + 'column' + (index + level) };\n\t                        }\n\t                        cells.push(cell);\n\t                    }\n\t                    index++;\n\t                }\n\t                this.rows.push({ index: this.rowLength++, cells: cells });\n\t            }\n\t        };\n\t        ExcelExport.prototype.processAggregates = function (gObj, rec, currentViewRecords, indent) {\n\t            var summaryModel = new summary_model_generator_1.SummaryModelGenerator(gObj);\n\t            var data = undefined;\n\t            if (currentViewRecords !== undefined) {\n\t                data = currentViewRecords;\n\t            }\n\t            else {\n\t                data = rec;\n\t            }\n\t            if (indent === undefined) {\n\t                indent = 0;\n\t            }\n\t            if (gObj.groupSettings.columns.length > 0) {\n\t                var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n\t                if (groupSummaryRows.length > 0) {\n\t                    this.fillAggregates(gObj, groupSummaryRows, indent);\n\t                }\n\t            }\n\t            var sRows = summaryModel.generateRows(data, rec.aggregates);\n\t            if (sRows.length > 0) {\n\t                this.fillAggregates(gObj, sRows, indent);\n\t            }\n\t        };\n\t        ExcelExport.prototype.fillAggregates = function (gObj, cells, indent, customIndex) {\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var row = cells_1[_i];\n\t                var cells_2 = [];\n\t                var index = 0;\n\t                for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n\t                    var cell = _b[_a];\n\t                    var eCell = {};\n\t                    if ((cell.visible || this.includeHiddenColumn)) {\n\t                        index++;\n\t                        if (cell.isDataCell) {\n\t                            eCell.index = index + indent;\n\t                            var templateFn = {};\n\t                            if (cell.column.footerTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(cell.column.footerTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else if (cell.column.groupFooterTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(cell.column.groupFooterTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else if (cell.column.groupCaptionTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(cell.column.groupCaptionTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else {\n\t                                for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n\t                                    var key = _d[_c];\n\t                                    if (key === cell.column.type) {\n\t                                        if (row.data[cell.column.field].sum !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].sum;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].average !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].average;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].max !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].max;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].min !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].min;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].count !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].count;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].truecount !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].truecount;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].falsecount !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].falsecount;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].custom !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].custom;\n\t                                        }\n\t                                    }\n\t                                }\n\t                            }\n\t                            eCell.style = this.getCaptionThemeStyle(this.theme);\n\t                            cells_2.push(eCell);\n\t                        }\n\t                        else {\n\t                            if (customIndex === undefined) {\n\t                                eCell.index = index + indent;\n\t                                eCell.style = this.getCaptionThemeStyle(this.theme);\n\t                                cells_2.push(eCell);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                if (customIndex !== undefined) {\n\t                    this.rows.push({ index: customIndex, cells: cells_2 });\n\t                }\n\t                else {\n\t                    this.rows.push({ index: this.rowLength++, cells: cells_2 });\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n\t            var result = {};\n\t            var attrname = Object.keys(JSON1);\n\t            for (var index = 0; index < attrname.length; index++) {\n\t                if (attrname[index] !== 'name') {\n\t                    result[attrname[index]] = JSON1[attrname[index]];\n\t                }\n\t            }\n\t            attrname = Object.keys(JSON2);\n\t            for (var index = 0; index < attrname.length; index++) {\n\t                if (attrname[index] !== 'name') {\n\t                    result[attrname[index]] = JSON2[attrname[index]];\n\t                }\n\t            }\n\t            return result;\n\t        };\n\t        ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n\t            var index = 0;\n\t            for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n\t                var style = _a[_i];\n\t                if (style.name === gObj.element.id + 'column' + columnIndex) {\n\t                    return index;\n\t                }\n\t                index++;\n\t            }\n\t            return undefined;\n\t        };\n\t        ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, exportProperties, indent) {\n\t            var column = gObj.columns;\n\t            var rowIndex = 1;\n\t            var returnValue = headerRow;\n\t            var gridRows = returnValue.rows;\n\t            var gridColumns = returnValue.columns;\n\t            var spannedCells = [];\n\t            if (indent > 0) {\n\t                var index = 0;\n\t                while (index !== indent) {\n\t                    this.columns.push({ index: index + 1, width: 30 });\n\t                    index++;\n\t                }\n\t            }\n\t            for (var row = 0; row < gridRows.length; row++) {\n\t                var currentCellIndex = 1 + indent;\n\t                var cells = [];\n\t                for (var column_1 = 0; column_1 < gridRows[row].cells.length; column_1++) {\n\t                    var style = {};\n\t                    var cell = {};\n\t                    var gridCell = gridRows[row].cells[column_1];\n\t                    var result = { contains: true, index: 1 };\n\t                    while (result.contains) {\n\t                        result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n\t                        currentCellIndex = result.index;\n\t                        if (!result.contains) {\n\t                            cell.index = result.index;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (gridCell.rowSpan !== undefined && gridCell.rowSpan !== 1) {\n\t                        cell.rowSpan = gridCell.rowSpan;\n\t                        for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n\t                            var spannedCell = { rowIndex: 0, columnIndex: 0 };\n\t                            spannedCell.rowIndex = i;\n\t                            spannedCell.columnIndex = currentCellIndex;\n\t                            spannedCells.push(spannedCell);\n\t                        }\n\t                    }\n\t                    if (gridCell.colSpan !== undefined && gridCell.colSpan !== 1) {\n\t                        cell.colSpan = gridCell.colSpan;\n\t                        currentCellIndex = currentCellIndex + cell.colSpan - 1;\n\t                    }\n\t                    cell.value = gridCell.column.headerText;\n\t                    if (exportProperties !== undefined && exportProperties.theme !== undefined) {\n\t                        this.theme = exportProperties.theme;\n\t                    }\n\t                    cell.style = this.getHeaderThemeStyle(this.theme);\n\t                    if (gridCell.column.textAlign !== undefined) {\n\t                        style.hAlign = gridCell.column.textAlign;\n\t                    }\n\t                    if (gridCell.column.headerTextAlign !== undefined) {\n\t                        style.hAlign = gridCell.column.headerTextAlign;\n\t                    }\n\t                    cell.style = style;\n\t                    cells.push(cell);\n\t                    currentCellIndex++;\n\t                }\n\t                this.rows.push({ index: this.rowLength++, cells: cells });\n\t            }\n\t            for (var col = 0; col < gridColumns.length; col++) {\n\t                this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n\t            }\n\t        };\n\t        ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n\t            var style = {};\n\t            switch (theme) {\n\t                case 'fabric':\n\t                    style.fontColor = '#666666';\n\t                    style.fontName = 'Segoe UI';\n\t                    style.fontSize = 14;\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                case 'bootstrap':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontSize = 14;\n\t                    style.bold = true;\n\t                    style.borders = { color: '#33330F' };\n\t                    break;\n\t                default:\n\t                    style.fontSize = 12;\n\t                    style.borders = { color: '#E0E0E0' };\n\t                    break;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n\t            var style = {};\n\t            switch (theme) {\n\t                case 'fabric':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontName = 'Segoe UI';\n\t                    style.fontSize = 14;\n\t                    style.backColor = '#F6F6F6';\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                case 'bootstrap':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontSize = 14;\n\t                    style.bold = true;\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                default:\n\t                    style.fontSize = 13;\n\t                    style.backColor = '#F6F6F6';\n\t                    break;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n\t            var style = {};\n\t            switch (theme) {\n\t                case 'fabric':\n\t                    style.fontColor = '#333333';\n\t                    style.fontName = 'Segoe UI';\n\t                    style.fontSize = 13;\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                case 'bootstrap':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontSize = 14;\n\t                    style.borders = { color: '#DDDDDD' };\n\t                    break;\n\t                default:\n\t                    style.fontSize = 13;\n\t                    style.borders = { color: '#E0E0E0' };\n\t                    break;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.processExcelHeader = function (header) {\n\t            if (header.rows !== undefined && (this.expType === 'newsheet' || this.rowLength === 1)) {\n\t                var noRows = void 0;\n\t                if (header.headerRows === undefined) {\n\t                    this.rowLength = header.rows.length;\n\t                }\n\t                else {\n\t                    this.rowLength = header.headerRows;\n\t                }\n\t                if (this.rowLength < header.rows.length) {\n\t                    noRows = this.rowLength;\n\t                }\n\t                else {\n\t                    noRows = header.rows.length;\n\t                }\n\t                this.rowLength++;\n\t                for (var row = 0; row < noRows; row++) {\n\t                    var json = header.rows[row];\n\t                    if (!(json.index !== null && json.index !== undefined)) {\n\t                        json.index = (row + 1);\n\t                    }\n\t                    this.updatedCellIndex(json);\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.updatedCellIndex = function (json) {\n\t            var cellsLength = json.cells.length;\n\t            for (var cellId = 0; cellId < cellsLength; cellId++) {\n\t                var jsonCell = json.cells[cellId];\n\t                if (!(jsonCell.index !== null && jsonCell.index !== undefined)) {\n\t                    jsonCell.index = (cellId + 1);\n\t                }\n\t            }\n\t            this.rows.push(json);\n\t        };\n\t        ExcelExport.prototype.processExcelFooter = function (footer) {\n\t            if (footer.rows !== undefined) {\n\t                var noRows = void 0;\n\t                if (footer.footerRows === undefined) {\n\t                    this.rowLength += footer.rows.length;\n\t                }\n\t                else {\n\t                    if (footer.footerRows > footer.rows.length) {\n\t                        this.rowLength += (footer.footerRows - footer.rows.length);\n\t                        noRows = footer.rows.length;\n\t                    }\n\t                    else {\n\t                        noRows = footer.footerRows;\n\t                    }\n\t                }\n\t                for (var row = 0; row < noRows; row++) {\n\t                    var json = footer.rows[row];\n\t                    if (json.index === null || json.index === undefined) {\n\t                        json.index = this.rowLength++;\n\t                    }\n\t                    else {\n\t                        json.index += this.rowLength;\n\t                    }\n\t                    this.updatedCellIndex(json);\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n\t            for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n\t                var spannedCell = spannedCells_1[_i];\n\t                if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n\t                    columnIndex = columnIndex + 1;\n\t                    return { contains: true, index: columnIndex };\n\t                }\n\t            }\n\t            return { contains: false, index: columnIndex };\n\t        };\n\t        ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n\t            if (col.format !== undefined) {\n\t                if (col.format.skeleton !== undefined) {\n\t                    style.numberFormat = col.format.skeleton;\n\t                    if (col.format.type !== undefined) {\n\t                        style.type = col.format.type;\n\t                    }\n\t                }\n\t                else {\n\t                    style.numberFormat = col.format;\n\t                    style.type = col.type;\n\t                }\n\t            }\n\t            if (col.textAlign !== undefined) {\n\t                style.hAlign = col.textAlign;\n\t            }\n\t            if (Object.keys(style).length > 0) {\n\t                style.name = gObj.element.id + 'column' + index;\n\t                this.styles.push(style);\n\t            }\n\t            if (col.width !== undefined) {\n\t                this.columns.push({ index: index, width: col.width });\n\t            }\n\t        };\n\t        ExcelExport.prototype.destroy = function () {\n\t        };\n\t        return ExcelExport;\n\t    }());\n\t    exports.ExcelExport = ExcelExport;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_98__;\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(14), __webpack_require__(5), __webpack_require__(18), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, enum_1, ej2_base_1, cell_1, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExportHelper = (function () {\n\t        function ExportHelper(parent) {\n\t            this.hideColumnInclude = false;\n\t            this.parent = parent;\n\t        }\n\t        ExportHelper.prototype.getHeaders = function (column, isHideColumnInclude) {\n\t            if (isHideColumnInclude) {\n\t                this.hideColumnInclude = true;\n\t            }\n\t            else {\n\t                this.hideColumnInclude = false;\n\t            }\n\t            var cols = column;\n\t            this.colDepth = this.measureColumnDepth(cols);\n\t            var rows = [];\n\t            var actualColumns = [];\n\t            for (var i = 0; i < this.colDepth; i++) {\n\t                rows[i] = new row_1.Row({});\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.processColumns(rows);\n\t            rows = this.processHeaderCells(rows);\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                for (var i = 0; i < row.cells.length; i++) {\n\t                    var cell = row.cells[i];\n\t                    if (cell.visible === undefined && cell.cellType !== 9) {\n\t                        row.cells = this.removeCellFromRow(row.cells, i);\n\t                        i = i - 1;\n\t                    }\n\t                    if ((!isHideColumnInclude) && cell.visible !== undefined && (!cell.visible)) {\n\t                        row.cells = this.removeCellFromRow(row.cells, i);\n\t                        i = i - 1;\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0; i < cols.length; i++) {\n\t                this.generateActualColumns(cols[i], actualColumns);\n\t            }\n\t            return { rows: rows, columns: actualColumns };\n\t        };\n\t        ExportHelper.prototype.generateActualColumns = function (column, actualColumns) {\n\t            if (!column.columns) {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    actualColumns.push(column);\n\t                }\n\t            }\n\t            else {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    var colSpan = this.getCellCount(column, 0);\n\t                    if (colSpan !== 0) {\n\t                        for (var i = 0; i < column.columns.length; i++) {\n\t                            this.generateActualColumns(column.columns[i], actualColumns);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ExportHelper.prototype.removeCellFromRow = function (cells, cellIndex) {\n\t            var resultCells = [];\n\t            for (var i = 0; i < cellIndex; i++) {\n\t                resultCells.push(cells[i]);\n\t            }\n\t            for (var i = (cellIndex + 1); i < cells.length; i++) {\n\t                resultCells.push(cells[i]);\n\t            }\n\t            return resultCells;\n\t        };\n\t        ExportHelper.prototype.processHeaderCells = function (rows) {\n\t            var columns = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n\t            for (var i = 0; i < columns.length; i++) {\n\t                rows = this.appendGridCells(columns[i], rows, 0, i === 0, false, i === (columns.length - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        ExportHelper.prototype.appendGridCells = function (cols, gridRows, index, isFirstObj, isFirstColumn, isLastColumn) {\n\t            var lastCol = isLastColumn ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                gridRows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstColumn ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCount(cols, 0);\n\t                if (colSpan) {\n\t                    gridRows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                var isFirstCell = void 0;\n\t                var isIgnoreFirstCell = void 0;\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    isFirstCell = false;\n\t                    if (cols.columns[i].visible && !isIgnoreFirstCell) {\n\t                        isFirstCell = true;\n\t                        isIgnoreFirstCell = true;\n\t                    }\n\t                    gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastColumn);\n\t                }\n\t            }\n\t            return gridRows;\n\t        };\n\t        ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, className, rowIndex, columnIndex) {\n\t            var option = {\n\t                'visible': gridColumn.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(gridColumn.headerTemplate),\n\t                'rowID': '',\n\t                'column': gridColumn,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': columnIndex\n\t            };\n\t            if (!option.rowSpan || option.rowSpan < 2) {\n\t                delete option.rowSpan;\n\t            }\n\t            return new cell_1.Cell(option);\n\t        };\n\t        ExportHelper.prototype.processColumns = function (rows) {\n\t            var gridObj = this.parent;\n\t            var columnIndexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gridObj.allowGrouping) {\n\t                    for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n\t                        if (this.parent.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gridObj.detailTemplate || gridObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        ExportHelper.prototype.getCellCount = function (column, count) {\n\t            if (column.columns) {\n\t                for (var i = 0; i < column.columns.length; i++) {\n\t                    count = this.getCellCount(column.columns[i], count);\n\t                }\n\t            }\n\t            else {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    count++;\n\t                }\n\t            }\n\t            return count;\n\t        };\n\t        ExportHelper.prototype.measureColumnDepth = function (column) {\n\t            var max = 0;\n\t            for (var i = 0; i < column.length; i++) {\n\t                var depth = this.checkDepth(column[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        ExportHelper.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0; i < col.columns.length; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        ;\n\t        return ExportHelper;\n\t    }());\n\t    exports.ExportHelper = ExportHelper;\n\t    var ExportValueFormatter = (function () {\n\t        function ExportValueFormatter() {\n\t            this.valueFormatter = new value_formatter_1.ValueFormatter();\n\t            this.internationalization = new ej2_base_1.Internationalization();\n\t        }\n\t        ExportValueFormatter.prototype.formatCellValue = function (args) {\n\t            if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n\t                return this.internationalization.getNumberFormat({ format: args.column.format })(args.value);\n\t            }\n\t            else if (args.column.type === 'boolean') {\n\t                return args.value ? 'true' : 'false';\n\t            }\n\t            else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n\t                if (typeof args.column.format === 'string') {\n\t                    var format = void 0;\n\t                    if (args.column.type === 'date') {\n\t                        format = { type: 'date', skeleton: args.column.format };\n\t                    }\n\t                    else if (args.column.type === 'time') {\n\t                        format = { type: 'time', skeleton: args.column.format };\n\t                    }\n\t                    else {\n\t                        format = { type: 'dateTime', skeleton: args.column.format };\n\t                    }\n\t                    return this.valueFormatter.getFormatFunction(format)(args.value);\n\t                }\n\t                else {\n\t                    if (args.column.format instanceof Object && args.column.format.type === undefined) {\n\t                        return (args.value.toString());\n\t                    }\n\t                    else {\n\t                        var customFormat = void 0;\n\t                        if (args.column.type === 'date') {\n\t                            customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        else if (args.column.type === 'time') {\n\t                            customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        else {\n\t                            customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                if (args.column.type === undefined || args.column.type === null) {\n\t                    return '';\n\t                }\n\t                else {\n\t                    return (args.value).toString();\n\t                }\n\t            }\n\t        };\n\t        return ExportValueFormatter;\n\t    }());\n\t    exports.ExportValueFormatter = ExportValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(10), __webpack_require__(101), __webpack_require__(101), __webpack_require__(101), __webpack_require__(101), __webpack_require__(101), __webpack_require__(101), __webpack_require__(99), __webpack_require__(21), __webpack_require__(20), __webpack_require__(5), __webpack_require__(14), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, ej2_pdf_export_1, ej2_pdf_export_2, ej2_pdf_export_3, ej2_pdf_export_4, ej2_pdf_export_5, ej2_pdf_export_6, export_helper_1, data_1, summary_model_generator_1, ej2_base_1, enum_1, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PdfExport = (function () {\n\t        function PdfExport(parent) {\n\t            this.hideColumnInclude = false;\n\t            this.currentViewData = false;\n\t            this.customDataSource = false;\n\t            this.gridTheme = 'material';\n\t            this.isGrouping = false;\n\t            this.parent = parent;\n\t            this.data = new data_1.Data(parent);\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t        }\n\t        PdfExport.prototype.getModuleName = function () {\n\t            return 'PdfExport';\n\t        };\n\t        PdfExport.prototype.init = function (parent) {\n\t            this.exportValueFormatter = new export_helper_1.ExportValueFormatter();\n\t            this.pdfDocument = undefined;\n\t            this.hideColumnInclude = false;\n\t            this.currentViewData = false;\n\t            this.parent = parent;\n\t            var gObj = parent;\n\t            this.gridTheme = 'material';\n\t            this.isGrouping = false;\n\t            this.isExporting = true;\n\t            gObj.trigger(events.beforePdfExport);\n\t        };\n\t        PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc) {\n\t            var _this = this;\n\t            this.data = new data_1.Data(this.parent);\n\t            if (pdfExportProperties !== undefined && pdfExportProperties.dataSource !== undefined && pdfExportProperties.dataSource instanceof ej2_data_1.DataManager) {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    new ej2_data_1.DataManager({ url: pdfExportProperties.dataSource.dataSource.url, adaptor: pdfExportProperties.dataSource.adaptor }).executeQuery(new ej2_data_1.Query()).then(function (returnType) {\n\t                        _this.init(parent);\n\t                        if (pdfDoc !== undefined) {\n\t                            _this.pdfDocument = pdfDoc;\n\t                        }\n\t                        else {\n\t                            _this.pdfDocument = new ej2_pdf_export_1.PdfDocument();\n\t                        }\n\t                        _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n\t                        _this.isExporting = false;\n\t                        parent.trigger(events.pdfExportComplete);\n\t                        resolve(_this.pdfDocument);\n\t                    });\n\t                });\n\t            }\n\t            else {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = _this.data.getData({}, _this.data.generateQuery(true).requiresCount());\n\t                    dataManager.then(function (returnType) {\n\t                        _this.init(parent);\n\t                        if (pdfDoc !== undefined) {\n\t                            _this.pdfDocument = pdfDoc;\n\t                        }\n\t                        else {\n\t                            _this.pdfDocument = new ej2_pdf_export_1.PdfDocument();\n\t                        }\n\t                        _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n\t                        _this.isExporting = false;\n\t                        parent.trigger(events.pdfExportComplete);\n\t                        resolve(_this.pdfDocument);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t        PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n\t            var columns = gObj.columns;\n\t            var dataSource = returnType.result;\n\t            var section = this.pdfDocument.sections.add();\n\t            var result = this.processExportProperties(pdfExportProperties, dataSource, section);\n\t            dataSource = result.dataSource;\n\t            if (dataSource.GroupGuid !== undefined) {\n\t                this.isGrouping = true;\n\t            }\n\t            section = result.section;\n\t            var pdfPage = section.pages.add();\n\t            var pdfGrid = new ej2_pdf_export_1.PdfGrid();\n\t            var headerThemeStyle = this.getHeaderThemeStyle();\n\t            var border = headerThemeStyle.border;\n\t            var headerFont = headerThemeStyle.font;\n\t            var headerBrush = headerThemeStyle.brush;\n\t            var returnValue = (new export_helper_1.ExportHelper(this.parent)).getHeaders(columns, this.hideColumnInclude);\n\t            var rows = returnValue.rows;\n\t            var gridColumns = returnValue.columns;\n\t            pdfGrid = this.processGridHeaders(dataSource.childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush);\n\t            this.setColumnProperties(gridColumns, pdfGrid);\n\t            var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n\t            if (dataSource !== undefined && dataSource !== null && dataSource.length > 0) {\n\t                if (this.isGrouping) {\n\t                    this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, returnType);\n\t                }\n\t                else {\n\t                    this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid);\n\t                }\n\t                if (returnType.aggregates !== undefined) {\n\t                    var summaryModel = new summary_model_generator_1.SummaryModelGenerator(gObj);\n\t                    var sRows = void 0;\n\t                    if (this.customDataSource) {\n\t                        sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n\t                    }\n\t                    else if (this.currentViewData) {\n\t                        sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n\t                    }\n\t                    else if (this.isGrouping) {\n\t                        sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n\t                    }\n\t                    else {\n\t                        sRows = summaryModel.generateRows(returnType.result, returnType.aggregates);\n\t                    }\n\t                    this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n\t                }\n\t            }\n\t            else {\n\t                var row = pdfGrid.rows.addRow();\n\t                row.style.setBorder(border);\n\t            }\n\t            pdfGrid.draw(pdfPage, 20, 20);\n\t            if (!isMultipleExport) {\n\t                this.pdfDocument.save('Export.pdf');\n\t            }\n\t        };\n\t        PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n\t            switch (this.gridTheme) {\n\t                case 'bootstrap':\n\t                    return { font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(51, 51, 51)), backgroundBrush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(255, 255, 255)) };\n\t                case 'fabric':\n\t                    return { font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(51, 51, 51)), backgroundBrush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(246, 246, 246)) };\n\t                default:\n\t                    return { font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 9.75), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0)), backgroundBrush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(246, 246, 246)) };\n\t            }\n\t        };\n\t        PdfExport.prototype.getHeaderThemeStyle = function () {\n\t            var border = new ej2_pdf_export_1.PdfBorders();\n\t            switch (this.gridTheme) {\n\t                case 'bootstrap':\n\t                    border.all = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(221, 221, 221));\n\t                    return { border: border, font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(51, 51, 51)) };\n\t                case 'fabric':\n\t                    border.all = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(224, 224, 224));\n\t                    return { border: border, font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 9), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0.54)) };\n\t                default:\n\t                    border.all = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(234, 234, 234));\n\t                    return { border: border, font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(102, 102, 102)) };\n\t            }\n\t        };\n\t        PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType) {\n\t            var groupIndex = level;\n\t            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n\t                var dataSourceItems = dataSource_1[_i];\n\t                var row = pdfGrid.rows.addRow();\n\t                var args = {\n\t                    value: dataSourceItems.key,\n\t                    column: gObj.getColumnByField(dataSourceItems.field),\n\t                    style: undefined\n\t                };\n\t                var value = dataSourceItems.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n\t                row.cells.getCell(groupIndex).value = value;\n\t                row.cells.getCell(groupIndex + 1).style.stringFormat = new ej2_pdf_export_3.PdfStringFormat(ej2_pdf_export_3.PdfTextAlignment.Left);\n\t                row.style.setBorder(border);\n\t                row.style.setFont(font);\n\t                row.style.setTextBrush(brush);\n\t                row.style.setBackgroundBrush(backgroundBrush);\n\t                var sRows = void 0;\n\t                var captionSummaryModel = new summary_model_generator_1.CaptionSummaryModelGenerator(gObj);\n\t                if (dataSourceItems.items.records !== undefined) {\n\t                    sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n\t                }\n\t                else {\n\t                    sRows = captionSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n\t                }\n\t                if (sRows !== undefined && sRows.length === 0) {\n\t                    row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n\t                }\n\t                if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\t                    this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType);\n\t                    var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                    sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n\t                }\n\t                else {\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\t                    this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1));\n\t                    var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                    sRows = groupSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush) {\n\t            var columnCount = gridColumns.length;\n\t            if (this.isGrouping) {\n\t                columnCount += (childLevels + 1);\n\t            }\n\t            pdfGrid.columns.add(columnCount);\n\t            if (this.isGrouping) {\n\t                for (var i = 0; i < (childLevels + 1); i++) {\n\t                    pdfGrid.columns.getColumn(i).width = 20;\n\t                }\n\t            }\n\t            pdfGrid.headers.add(rows.length);\n\t            for (var i = 0; i < rows.length; i++) {\n\t                var gridHeader = pdfGrid.headers.getHeader(i);\n\t                gridHeader.style.setBorder(border);\n\t                gridHeader.style.setFont(headerFont);\n\t                gridHeader.style.setTextBrush(headerBrush);\n\t                var cellIndex = this.isGrouping ? (childLevels + 1) : 0;\n\t                if (rows[i].cells.length === 0) {\n\t                    for (var j = 0; j < gridHeader.cells.count; j++) {\n\t                        var cell = gridHeader.cells.getCell(j);\n\t                        cell.value = '';\n\t                    }\n\t                }\n\t                else {\n\t                    for (var j = 0; j < cellIndex; j++) {\n\t                        var cell = gridHeader.cells.getCell(j);\n\t                        cell.value = '';\n\t                    }\n\t                    for (var j = 0; j < rows[i].cells.length; j++) {\n\t                        var cell = gridHeader.cells.getCell(cellIndex);\n\t                        if (cell.value !== null) {\n\t                            cell.value = rows[i].cells[j].column.headerText;\n\t                            if (rows[i].cells[j].column.headerTextAlign !== undefined) {\n\t                                cell.style.stringFormat = this.getHorizontalAlignment(rows[i].cells[j].column.headerTextAlign);\n\t                            }\n\t                            if (rows[i].cells[j].rowSpan !== undefined) {\n\t                                cell.rowSpan = rows[i].cells[j].rowSpan;\n\t                                cell.style.stringFormat = this.getVerticalAlignment('bottom', cell.style.stringFormat, rows[i].cells[j].column.textAlign);\n\t                                for (var k = 1; k < rows[i].cells[j].rowSpan; k++) {\n\t                                    pdfGrid.headers.getHeader(i + k).cells.getCell(cellIndex).value = null;\n\t                                }\n\t                            }\n\t                            if (rows[i].cells[j].colSpan !== undefined) {\n\t                                cell.columnSpan = rows[i].cells[j].colSpan;\n\t                            }\n\t                            cellIndex += cell.columnSpan;\n\t                        }\n\t                        else {\n\t                            cell.value = '';\n\t                            cellIndex += cell.columnSpan;\n\t                            j = j - 1;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (pdfGrid.columns.count >= 6) {\n\t                pdfGrid.style.allowHorizontalOverflow = true;\n\t            }\n\t            return pdfGrid;\n\t        };\n\t        PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource, section) {\n\t            if (pdfExportProperties !== undefined) {\n\t                if (pdfExportProperties.theme !== undefined) {\n\t                    this.gridTheme = pdfExportProperties.theme;\n\t                }\n\t                if (pdfExportProperties.pageOrientation !== undefined || pdfExportProperties.pageSize !== undefined) {\n\t                    var pdfPageSettings = new ej2_pdf_export_6.PdfPageSettings();\n\t                    pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ? ej2_pdf_export_6.PdfPageOrientation.Landscape : ej2_pdf_export_6.PdfPageOrientation.Portrait;\n\t                    pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n\t                    section.setPageSettings(pdfPageSettings);\n\t                }\n\t                var clientSize = this.pdfDocument.pageSettings.size;\n\t                if (pdfExportProperties.header !== undefined) {\n\t                    var header = pdfExportProperties.header;\n\t                    var position = new ej2_pdf_export_5.PointF(0, header.fromTop);\n\t                    var size = new ej2_pdf_export_6.SizeF((clientSize.width - 80), (header.height * 0.75));\n\t                    var bounds = new ej2_pdf_export_4.RectangleF(position, size);\n\t                    this.pdfDocument.template.top = this.drawPageTemplate(new ej2_pdf_export_4.PdfPageTemplateElement(bounds), header);\n\t                }\n\t                if (pdfExportProperties.footer !== undefined) {\n\t                    var footer = pdfExportProperties.footer;\n\t                    var position = new ej2_pdf_export_5.PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n\t                    var size = new ej2_pdf_export_6.SizeF((clientSize.width - 80), (footer.height * 0.75));\n\t                    var bounds = new ej2_pdf_export_4.RectangleF(position, size);\n\t                    this.pdfDocument.template.bottom = this.drawPageTemplate(new ej2_pdf_export_4.PdfPageTemplateElement(bounds), footer);\n\t                }\n\t                if (pdfExportProperties.includeHiddenColumn !== undefined && !this.isGrouping) {\n\t                    this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n\t                }\n\t                if (pdfExportProperties.dataSource !== undefined) {\n\t                    if (!(pdfExportProperties.dataSource instanceof ej2_data_1.DataManager)) {\n\t                        dataSource = pdfExportProperties.dataSource;\n\t                    }\n\t                    this.customDataSource = true;\n\t                    this.currentViewData = false;\n\t                }\n\t                else if (pdfExportProperties.exportType !== undefined) {\n\t                    if (pdfExportProperties.exportType === 'currentview') {\n\t                        dataSource = this.parent.getCurrentViewRecords();\n\t                        this.currentViewData = true;\n\t                        this.customDataSource = false;\n\t                    }\n\t                    else {\n\t                        this.currentViewData = false;\n\t                        this.customDataSource = false;\n\t                    }\n\t                }\n\t                else {\n\t                    this.currentViewData = false;\n\t                    this.customDataSource = false;\n\t                }\n\t            }\n\t            else {\n\t                this.currentViewData = false;\n\t                this.customDataSource = false;\n\t            }\n\t            return { dataSource: dataSource, section: section };\n\t        };\n\t        PdfExport.prototype.drawPageTemplate = function (template, element) {\n\t            for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n\t                var content = _a[_i];\n\t                this.processContentValidation(content);\n\t                switch (content.type) {\n\t                    case 'text':\n\t                        if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n\t                            throw new Error('please enter the valid input value in text content...');\n\t                        }\n\t                        this.drawText(template, content);\n\t                        break;\n\t                    case 'pageNumber':\n\t                        this.drawPageNumber(template, content);\n\t                        break;\n\t                    case 'image':\n\t                        if (content.src === undefined || content.src === null || content.src === '') {\n\t                            throw new Error('please enter the valid base64 string in image content...');\n\t                        }\n\t                        this.drawImage(template, content);\n\t                        break;\n\t                    case 'line':\n\t                        this.drawLine(template, content);\n\t                        break;\n\t                    default:\n\t                        throw new Error('Please set valid content type...');\n\t                }\n\t            }\n\t            return template;\n\t        };\n\t        PdfExport.prototype.processContentValidation = function (content) {\n\t            if (content.type === '' || content.type === undefined || content.type === null) {\n\t                throw new Error('please set valid content type...');\n\t            }\n\t            else {\n\t                if (content.type === 'line') {\n\t                    if (content.points === '' || content.points === undefined || content.points === null) {\n\t                        throw new Error('please enter valid points in ' + content.type + ' content...');\n\t                    }\n\t                    else {\n\t                        if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n\t                            throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n\t                            throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n\t                            throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n\t                            throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (content.position === '' || content.position === undefined || content.position === null) {\n\t                        throw new Error('please enter valid position in ' + content.type + ' content...');\n\t                    }\n\t                    else {\n\t                        if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n\t                            throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n\t                        }\n\t                        if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n\t                            throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.drawText = function (pageTemplate, content) {\n\t            var font = this.getFont(content);\n\t            var brush = this.getBrushFromContent(content);\n\t            var pen = null;\n\t            if (content.style.textPenColor !== undefined) {\n\t                var penColor = this.hexToRgb(content.style.textPenColor);\n\t                pen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(penColor.r, penColor.g, penColor.b));\n\t            }\n\t            if (brush == null && pen == null) {\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0));\n\t            }\n\t            var value = content.value.toString();\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var format;\n\t            var result = this.setContentFormat(content, format);\n\t            if (result !== null && result.format !== undefined && result.size !== undefined) {\n\t                pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n\t            }\n\t            else {\n\t                pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n\t            }\n\t        };\n\t        PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n\t            var font = this.getFont(content);\n\t            var brush = null;\n\t            if (content.style.textBrushColor !== undefined) {\n\t                var brushColor = this.hexToRgb(content.style.textBrushColor);\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(brushColor.r, brushColor.g, brushColor.b));\n\t            }\n\t            else {\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0));\n\t            }\n\t            var pageNumber = new ej2_pdf_export_5.PdfPageNumberField(font, brush);\n\t            pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n\t            var compositeField;\n\t            var format;\n\t            if (content.format !== undefined) {\n\t                if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n\t                    var pageCount = new ej2_pdf_export_6.PdfPageCountField(font);\n\t                    if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n\t                        format = content.format.replace('$current', '0');\n\t                        format = format.replace('$total', '1');\n\t                    }\n\t                    else {\n\t                        format = content.format.replace('$current', '1');\n\t                        format = format.replace('$total', '0');\n\t                    }\n\t                    compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageNumber, pageCount);\n\t                }\n\t                else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n\t                    format = content.format.replace('$current', '0');\n\t                    compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageNumber);\n\t                }\n\t                else {\n\t                    var pageCount = new ej2_pdf_export_6.PdfPageCountField(font);\n\t                    format = content.format.replace('$total', '0');\n\t                    compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageCount);\n\t                }\n\t            }\n\t            else {\n\t                format = '{0}';\n\t                compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageNumber);\n\t            }\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var result = this.setContentFormat(content, compositeField.stringFormat);\n\t            if (result !== null && result.format !== undefined && result.size !== undefined) {\n\t                compositeField.stringFormat = result.format;\n\t                compositeField.bounds = new ej2_pdf_export_4.RectangleF(x, y, result.size.width, result.size.height);\n\t            }\n\t            compositeField.draw(documentHeader.graphics, x, y);\n\t        };\n\t        PdfExport.prototype.drawImage = function (documentHeader, content) {\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var width = (content.size !== undefined) ? (content.size.width * 0.75) : undefined;\n\t            var height = (content.size !== undefined) ? (content.size.height * 0.75) : undefined;\n\t            var image = new ej2_pdf_export_2.PdfBitmap(content.src);\n\t            if (width !== undefined) {\n\t                documentHeader.graphics.drawImage(image, x, y, width, height);\n\t            }\n\t            else {\n\t                documentHeader.graphics.drawImage(image, x, y);\n\t            }\n\t        };\n\t        PdfExport.prototype.drawLine = function (documentHeader, content) {\n\t            var x1 = content.points.x1 * 0.75;\n\t            var y1 = content.points.y1 * 0.75;\n\t            var x2 = content.points.x2 * 0.75;\n\t            var y2 = content.points.y2 * 0.75;\n\t            var pen = this.getPenFromContent(content);\n\t            if (content.style !== undefined && content.style !== null) {\n\t                if (content.style.penSize !== undefined && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n\t                    pen.width = content.style.penSize * 0.75;\n\t                }\n\t                pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n\t            }\n\t            documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n\t        };\n\t        PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex) {\n\t            for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n\t                var row = sRows_1[_i];\n\t                var startIndex = 0;\n\t                var leastCaptionSummaryIndex = -1;\n\t                var index = 0;\n\t                var isEmpty = true;\n\t                var value = [];\n\t                for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                    var cell = row.cells[index];\n\t                    if (!this.hideColumnInclude) {\n\t                        while (cell.visible === undefined) {\n\t                            if (captionRow !== undefined) {\n\t                                if (captionRow.cells.getCell(i).value !== undefined) {\n\t                                    value.push('');\n\t                                    value.push(captionRow.cells.getCell(i).value);\n\t                                    isEmpty = false;\n\t                                    i += 1;\n\t                                }\n\t                                else {\n\t                                    value.push('');\n\t                                }\n\t                            }\n\t                            else {\n\t                                value.push('');\n\t                            }\n\t                            i += 1;\n\t                            index = index + 1;\n\t                            cell = row.cells[index];\n\t                        }\n\t                        while (cell.visible !== undefined && !cell.visible) {\n\t                            index = index + 1;\n\t                            cell = row.cells[index];\n\t                        }\n\t                    }\n\t                    if (cell.isDataCell) {\n\t                        var templateFn = {};\n\t                        if (cell.column.footerTemplate !== undefined || cell.column.groupCaptionTemplate !== undefined || cell.column.groupFooterTemplate !== undefined) {\n\t                            var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell.column);\n\t                            templateFn = result.templateFunction;\n\t                            leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n\t                            var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                            value.push(txt[0].wholeText);\n\t                            isEmpty = false;\n\t                        }\n\t                        else {\n\t                            var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n\t                            if (result !== undefined) {\n\t                                value.push(result);\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        value.push('');\n\t                    }\n\t                    if (isEmpty && value[i] !== '' && value[i] !== undefined && value[i] !== null) {\n\t                        isEmpty = false;\n\t                    }\n\t                    index += 1;\n\t                }\n\t                if (!isEmpty) {\n\t                    if (!isCaption) {\n\t                        var gridRow = pdfGrid.rows.addRow();\n\t                        gridRow.style.setBorder(border);\n\t                        gridRow.style.setFont(font);\n\t                        gridRow.style.setTextBrush(brush);\n\t                        gridRow.style.setBackgroundBrush(backgroundBrush);\n\t                        for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                            gridRow.cells.getCell(i).value = value[i].toString();\n\t                        }\n\t                    }\n\t                    else {\n\t                        for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                            captionRow.cells.getCell(i).value = value[i].toString();\n\t                            if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1) {\n\t                                captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n\t                            }\n\t                            else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n\t                                captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, column) {\n\t            if (column.footerTemplate !== undefined) {\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(column.footerTemplate);\n\t            }\n\t            else if (column.groupCaptionTemplate !== undefined) {\n\t                if (leastCaptionSummaryIndex === -1) {\n\t                    leastCaptionSummaryIndex = index;\n\t                }\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(column.groupCaptionTemplate);\n\t            }\n\t            else {\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(column.groupFooterTemplate);\n\t            }\n\t            return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n\t        };\n\t        PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n\t            if (data.sum !== undefined) {\n\t                return data.sum;\n\t            }\n\t            else if (data.average !== undefined) {\n\t                return data.average;\n\t            }\n\t            else if (data.max !== undefined) {\n\t                return data.max;\n\t            }\n\t            else if (data.min !== undefined) {\n\t                return data.min;\n\t            }\n\t            else if (data.count !== undefined) {\n\t                return data.count;\n\t            }\n\t            else if (data.truecount !== undefined) {\n\t                return data.truecount;\n\t            }\n\t            else if (data.falsecount !== undefined) {\n\t                return data.falsecount;\n\t            }\n\t            else if (data.custom !== undefined) {\n\t                return data.custom;\n\t            }\n\t        };\n\t        PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid) {\n\t            var startIndex = this.isGrouping ? (pdfGrid.columns.count - gridColumns.length) : 0;\n\t            for (var i = 0; i < gridColumns.length; i++) {\n\t                if (gridColumns[i].textAlign !== undefined) {\n\t                    pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n\t                }\n\t                if (pdfGrid.style.allowHorizontalOverflow && gridColumns[i].width !== undefined) {\n\t                    pdfGrid.columns.getColumn(i + startIndex).width = (gridColumns[i].width * 0.75);\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n\t            switch (this.gridTheme) {\n\t                case 'bootstrap':\n\t                    row.style.setTextBrush(new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(51, 51, 51)));\n\t                    break;\n\t                case 'fabric':\n\t                    row.style.setTextBrush(new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(51, 51, 51)));\n\t                    break;\n\t                default:\n\t                    row.style.setTextBrush(new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0)));\n\t            }\n\t            row.style.setBorder(border);\n\t            return row;\n\t        };\n\t        PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, groupIndex) {\n\t            var startIndex = this.isGrouping ? groupIndex : 0;\n\t            for (var _i = 0, _a = dataSource; _i < _a.length; _i++) {\n\t                var items = _a[_i];\n\t                var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n\t                for (var j = 0; j < columns.length; j++) {\n\t                    var value = items[columns[j].field];\n\t                    var data = items;\n\t                    var args = {\n\t                        data: data,\n\t                        value: value,\n\t                        column: columns[j],\n\t                        style: undefined,\n\t                        colSpan: 1\n\t                    };\n\t                    gObj.trigger(events.pdfQueryCellInfo, args);\n\t                    var cell = gridRow.cells.getCell(j + startIndex);\n\t                    cell.value = this.exportValueFormatter.formatCellValue(args);\n\t                    if (args.style !== undefined) {\n\t                        this.processCellStyle(cell, args);\n\t                    }\n\t                    if (args.colSpan > 1) {\n\t                        if ((j + startIndex + 1 + args.colSpan) > gridRow.cells.count) {\n\t                            args.colSpan = gridRow.cells.count - (j + startIndex + 1);\n\t                        }\n\t                        cell.columnSpan = args.colSpan;\n\t                        for (var i = 1; i < cell.columnSpan; i++) {\n\t                            var spanCell = gridRow.cells.getCell(j + startIndex + i);\n\t                            spanCell.value = '';\n\t                        }\n\t                        j += (args.colSpan - 1);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.processCellStyle = function (cell, args) {\n\t            if (args.style.backgroundColor !== undefined) {\n\t                var backColor = this.hexToRgb(args.style.backgroundColor);\n\t                cell.style.backgroundBrush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(backColor.r, backColor.g, backColor.b));\n\t            }\n\t            if (args.style.textAlignment !== undefined) {\n\t                cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n\t            }\n\t            if (args.style.verticalAlignment !== undefined) {\n\t                cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n\t            }\n\t            if (args.style.textBrushColor !== undefined) {\n\t                var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n\t                cell.style.textBrush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n\t            }\n\t            if (args.style.textPenColor !== undefined) {\n\t                cell.style.textPen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(args.style.textPenColor.r, args.style.textPenColor.g, args.style.textPenColor.b));\n\t            }\n\t            if (args.style.fontFamily !== undefined || args.style.fontSize !== undefined || args.style.bold !== undefined || args.style.italic !== undefined || args.style.underline !== undefined || args.style.strikeout !== undefined) {\n\t                cell.style.font = this.getFont(args);\n\t            }\n\t            if (args.style.border !== undefined) {\n\t                var border = new ej2_pdf_export_1.PdfBorders();\n\t                var borderWidth = args.style.border.width;\n\t                var width = (borderWidth !== undefined && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n\t                var color = new ej2_pdf_export_3.PdfColor(196, 196, 196);\n\t                if (args.style.border.color !== undefined) {\n\t                    var borderColor = this.hexToRgb(args.style.border.color);\n\t                    color = new ej2_pdf_export_3.PdfColor(borderColor.r, borderColor.g, borderColor.b);\n\t                }\n\t                var pen = new ej2_pdf_export_1.PdfPen(color, width);\n\t                if (args.style.border.dashStyle !== undefined) {\n\t                    pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n\t                }\n\t                border.all = pen;\n\t                cell.style.borders = border;\n\t            }\n\t        };\n\t        PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n\t            if (format === undefined) {\n\t                format = new ej2_pdf_export_3.PdfStringFormat();\n\t            }\n\t            switch (textAlign) {\n\t                case 'right':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Right;\n\t                    break;\n\t                case 'center':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Center;\n\t                    break;\n\t                case 'justify':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Justify;\n\t                    break;\n\t                case 'left':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Left;\n\t                    break;\n\t            }\n\t            return format;\n\t        };\n\t        PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n\t            if (format === undefined) {\n\t                format = new ej2_pdf_export_3.PdfStringFormat();\n\t                format = this.getHorizontalAlignment(textAlign, format);\n\t            }\n\t            switch (verticalAlign) {\n\t                case 'bottom':\n\t                    format.lineAlignment = ej2_pdf_export_4.PdfVerticalAlignment.Bottom;\n\t                    break;\n\t                case 'middle':\n\t                    format.lineAlignment = ej2_pdf_export_4.PdfVerticalAlignment.Middle;\n\t                    break;\n\t                case 'top':\n\t                    format.lineAlignment = ej2_pdf_export_4.PdfVerticalAlignment.Top;\n\t                    break;\n\t            }\n\t            return format;\n\t        };\n\t        PdfExport.prototype.getFontFamily = function (fontFamily) {\n\t            switch (fontFamily) {\n\t                case 'TimesRoman':\n\t                    return 2;\n\t                case 'Courier':\n\t                    return 1;\n\t                case 'Symbol':\n\t                    return 3;\n\t                case 'ZapfDingbats':\n\t                    return 4;\n\t                default:\n\t                    return 0;\n\t            }\n\t        };\n\t        PdfExport.prototype.getFont = function (content) {\n\t            var fontSize = (content.style.fontSize !== undefined) ? (content.style.fontSize * 0.75) : 9.75;\n\t            var fontFamily = (content.style.fontFamily !== undefined) ? (this.getFontFamily(content.style.fontFamily)) : ej2_pdf_export_2.PdfFontFamily.Helvetica;\n\t            var fontStyle = ej2_pdf_export_2.PdfFontStyle.Regular;\n\t            if (content.style.bold !== undefined && content.style.bold) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Bold;\n\t            }\n\t            if (content.style.italic !== undefined && content.style.italic) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Italic;\n\t            }\n\t            if (content.style.underline !== undefined && content.style.underline) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Underline;\n\t            }\n\t            if (content.style.strikeout !== undefined && content.style.strikeout) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Strikeout;\n\t            }\n\t            return new ej2_pdf_export_2.PdfStandardFont(fontFamily, fontSize, fontStyle);\n\t        };\n\t        PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n\t            switch (pageNumberType) {\n\t                case 'LowerLatin':\n\t                    return 2;\n\t                case 'LowerRoman':\n\t                    return 3;\n\t                case 'UpperLatin':\n\t                    return 4;\n\t                case 'UpperRoman':\n\t                    return 5;\n\t                default:\n\t                    return 1;\n\t            }\n\t        };\n\t        PdfExport.prototype.setContentFormat = function (content, format) {\n\t            if (content.size !== undefined) {\n\t                var width = content.size.width * 0.75;\n\t                var height = content.size.height * 0.75;\n\t                format = new ej2_pdf_export_3.PdfStringFormat(ej2_pdf_export_3.PdfTextAlignment.Left, ej2_pdf_export_4.PdfVerticalAlignment.Middle);\n\t                if (content.style.hAlign !== undefined) {\n\t                    switch (content.style.hAlign) {\n\t                        case 'right':\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Right;\n\t                            break;\n\t                        case 'center':\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Center;\n\t                            break;\n\t                        case 'justify':\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Justify;\n\t                            break;\n\t                        default:\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Left;\n\t                    }\n\t                }\n\t                if (content.style.vAlign !== undefined) {\n\t                    format = this.getVerticalAlignment(content.style.vAlign, format);\n\t                }\n\t                return { format: format, size: new ej2_pdf_export_6.SizeF(width, height) };\n\t            }\n\t            return null;\n\t        };\n\t        PdfExport.prototype.getPageSize = function (pageSize) {\n\t            switch (pageSize) {\n\t                case 'Letter':\n\t                    return new ej2_pdf_export_6.SizeF(612, 792);\n\t                case 'Note':\n\t                    return new ej2_pdf_export_6.SizeF(540, 720);\n\t                case 'Legal':\n\t                    return new ej2_pdf_export_6.SizeF(612, 1008);\n\t                case 'A0':\n\t                    return new ej2_pdf_export_6.SizeF(2380, 3368);\n\t                case 'A1':\n\t                    return new ej2_pdf_export_6.SizeF(1684, 2380);\n\t                case 'A2':\n\t                    return new ej2_pdf_export_6.SizeF(1190, 1684);\n\t                case 'A3':\n\t                    return new ej2_pdf_export_6.SizeF(842, 1190);\n\t                case 'A5':\n\t                    return new ej2_pdf_export_6.SizeF(421, 595);\n\t                case 'A6':\n\t                    return new ej2_pdf_export_6.SizeF(297, 421);\n\t                case 'A7':\n\t                    return new ej2_pdf_export_6.SizeF(210, 297);\n\t                case 'A8':\n\t                    return new ej2_pdf_export_6.SizeF(148, 210);\n\t                case 'A9':\n\t                    return new ej2_pdf_export_6.SizeF(105, 148);\n\t                case 'B0':\n\t                    return new ej2_pdf_export_6.SizeF(2836, 4008);\n\t                case 'B1':\n\t                    return new ej2_pdf_export_6.SizeF(2004, 2836);\n\t                case 'B2':\n\t                    return new ej2_pdf_export_6.SizeF(1418, 2004);\n\t                case 'B3':\n\t                    return new ej2_pdf_export_6.SizeF(1002, 1418);\n\t                case 'B4':\n\t                    return new ej2_pdf_export_6.SizeF(709, 1002);\n\t                case 'B5':\n\t                    return new ej2_pdf_export_6.SizeF(501, 709);\n\t                case 'ArchA':\n\t                    return new ej2_pdf_export_6.SizeF(648, 864);\n\t                case 'ArchB':\n\t                    return new ej2_pdf_export_6.SizeF(864, 1296);\n\t                case 'ArchC':\n\t                    return new ej2_pdf_export_6.SizeF(1296, 1728);\n\t                case 'ArchD':\n\t                    return new ej2_pdf_export_6.SizeF(1728, 2592);\n\t                case 'ArchE':\n\t                    return new ej2_pdf_export_6.SizeF(2592, 3456);\n\t                case 'Flsa':\n\t                    return new ej2_pdf_export_6.SizeF(612, 936);\n\t                case 'HalfLetter':\n\t                    return new ej2_pdf_export_6.SizeF(396, 612);\n\t                case 'Letter11x17':\n\t                    return new ej2_pdf_export_6.SizeF(792, 1224);\n\t                case 'Ledger':\n\t                    return new ej2_pdf_export_6.SizeF(1224, 792);\n\t                default:\n\t                    return new ej2_pdf_export_6.SizeF(595, 842);\n\t            }\n\t        };\n\t        PdfExport.prototype.getDashStyle = function (dashStyle) {\n\t            switch (dashStyle) {\n\t                case 'Dash':\n\t                    return 1;\n\t                case 'Dot':\n\t                    return 2;\n\t                case 'DashDot':\n\t                    return 3;\n\t                case 'DashDotDot':\n\t                    return 4;\n\t                default:\n\t                    return 0;\n\t            }\n\t        };\n\t        PdfExport.prototype.getPenFromContent = function (content) {\n\t            var pen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(0, 0, 0));\n\t            if (content.style !== undefined && content.style !== null && content.style.penColor !== undefined) {\n\t                var penColor = this.hexToRgb(content.style.penColor);\n\t                pen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(penColor.r, penColor.g, penColor.b));\n\t            }\n\t            return pen;\n\t        };\n\t        PdfExport.prototype.getBrushFromContent = function (content) {\n\t            var brush = null;\n\t            if (content.style.textBrushColor !== undefined) {\n\t                var brushColor = this.hexToRgb(content.style.textBrushColor);\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(brushColor.r, brushColor.g, brushColor.b));\n\t            }\n\t            return brush;\n\t        };\n\t        PdfExport.prototype.hexToRgb = function (hex) {\n\t            if (hex === null || hex === '' || hex.length !== 7) {\n\t                throw new Error('please set valid hex value for color...');\n\t            }\n\t            hex = hex.substring(1);\n\t            var bigint = parseInt(hex, 16);\n\t            var r = (bigint >> 16) & 255;\n\t            var g = (bigint >> 8) & 255;\n\t            var b = bigint & 255;\n\t            return { r: r, g: g, b: b };\n\t        };\n\t        PdfExport.prototype.destroy = function () {\n\t        };\n\t        return PdfExport;\n\t    }());\n\t    exports.PdfExport = PdfExport;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_101__;\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(10), __webpack_require__(14), __webpack_require__(103)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, constant_1, enum_1, command_column_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CommandColumn = (function () {\n\t        function CommandColumn(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        CommandColumn.prototype.initiateRender = function () {\n\t            var cellFac = this.locator.getService('cellRendererFactory');\n\t            cellFac.addCellRenderer(enum_1.CellType.CommandColumn, new command_column_renderer_1.CommandColumnRenderer(this.parent, this.locator));\n\t        };\n\t        CommandColumn.prototype.commandClickHandler = function (e) {\n\t            var gObj = this.parent;\n\t            var gID = this.parent.element.id;\n\t            var target = ej2_base_1.closest(e.target, 'button');\n\t            if (!target || !gObj.editModule) {\n\t                return;\n\t            }\n\t            switch (target.id.split('_')[0]) {\n\t                case gID + 'edit':\n\t                    this.parent.editModule.endEdit();\n\t                    gObj.editModule.startEdit(ej2_base_1.closest(target, 'tr'));\n\t                    break;\n\t                case gID + 'cancel':\n\t                    gObj.editModule.closeEdit();\n\t                    break;\n\t                case gID + 'save':\n\t                    this.parent.editModule.endEdit();\n\t                    break;\n\t                case gID + 'delete':\n\t                    this.parent.editModule.endEdit();\n\t                    gObj.editModule.deleteRow(ej2_base_1.closest(target, 'tr'));\n\t                    break;\n\t            }\n\t        };\n\t        CommandColumn.prototype.getModuleName = function () {\n\t            return 'commandColumn';\n\t        };\n\t        CommandColumn.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.removeEventListener();\n\t        };\n\t        CommandColumn.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.click, this.commandClickHandler);\n\t            this.parent.off(constant_1.initialEnd, this.initiateRender);\n\t            this.parent.off(constant_1.keyPressed, this.keyPressHandler);\n\t        };\n\t        CommandColumn.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.click, this.commandClickHandler, this);\n\t            this.parent.on(constant_1.initialEnd, this.initiateRender, this);\n\t            this.parent.on(constant_1.keyPressed, this.keyPressHandler, this);\n\t        };\n\t        CommandColumn.prototype.keyPressHandler = function (e) {\n\t            if (e.action === 'enter' && ej2_base_1.closest(e.target, 'button')) {\n\t                this.commandClickHandler(e);\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        return CommandColumn;\n\t    }());\n\t    exports.CommandColumn = CommandColumn;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23), __webpack_require__(26), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_buttons_1, cell_renderer_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CommandColumnRenderer = (function (_super) {\n\t        __extends(CommandColumnRenderer, _super);\n\t        function CommandColumnRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.buttonElement = ej2_base_1.createElement('button', {});\n\t            _this.unbounDiv = ej2_base_1.createElement('div', { className: 'e-unboundcelldiv', styles: 'display: inline-block' });\n\t            _this.element = ej2_base_1.createElement('TD', {\n\t                className: 'e-rowcell e-unboundcell', attrs: {\n\t                    role: 'gridcell', tabindex: '-1'\n\t                }\n\t            });\n\t            return _this;\n\t        }\n\t        CommandColumnRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(this.unbounDiv.cloneNode());\n\t            node.setAttribute('aria-label', 'is Command column column header ' + cell.column.headerText);\n\t            if (cell.column.commandsTemplate) {\n\t                util_1.appendChildren(node.firstElementChild, cell.column.getColumnTemplate()(data));\n\t            }\n\t            else {\n\t                for (var _i = 0, _a = cell.commands; _i < _a.length; _i++) {\n\t                    var command = _a[_i];\n\t                    node = this.renderButton(node, command, attributes.index);\n\t                }\n\t            }\n\t            this.setAttributes(node, cell, attributes);\n\t            if (this.parent.isEdit) {\n\t                ej2_base_1.addClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n\t                ej2_base_1.removeClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n\t            }\n\t            else {\n\t                ej2_base_1.addClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n\t                ej2_base_1.removeClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n\t            }\n\t            return node;\n\t        };\n\t        CommandColumnRenderer.prototype.renderButton = function (node, buttonOption, index) {\n\t            var button = this.buttonElement.cloneNode();\n\t            ej2_base_1.attributes(button, { 'id': this.parent.element.id + (buttonOption.type || '') + '_' + index, 'type': 'button' });\n\t            button.onclick = buttonOption.buttonOption.click;\n\t            node.firstElementChild.appendChild(new ej2_buttons_1.Button(buttonOption.buttonOption, button).element);\n\t            switch (buttonOption.type) {\n\t                case 'edit':\n\t                case 'delete':\n\t                    ej2_base_1.addClass([button], ['e-edit-delete', 'e-' + buttonOption.type + 'button']);\n\t                    break;\n\t                case 'cancel':\n\t                case 'save':\n\t                    ej2_base_1.addClass([button], ['e-save-cancel', 'e-' + buttonOption.type + 'button']);\n\t                    break;\n\t            }\n\t            return node;\n\t        };\n\t        return CommandColumnRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.CommandColumnRenderer = CommandColumnRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(73), __webpack_require__(10), __webpack_require__(74), __webpack_require__(56), __webpack_require__(77), __webpack_require__(55), __webpack_require__(100), __webpack_require__(97)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, events, resize_1, page_1, group_1, sort_1, pdf_export_1, excel_export_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.menuClass = {\n\t        header: '.e-gridheader',\n\t        content: '.e-gridcontent',\n\t        edit: '.e-inline-edit',\n\t        editIcon: 'e-edit',\n\t        pager: '.e-gridpager',\n\t        delete: 'e-delete',\n\t        save: 'e-save',\n\t        cancel: 'e-cancel',\n\t        copy: 'e-copy',\n\t        pdf: 'e-pdfexport',\n\t        group: 'e-icon-group',\n\t        ungroup: 'e-icon-ungroup',\n\t        csv: 'e-csvexport',\n\t        excel: 'e-excelexport',\n\t        fPage: 'e-icon-first',\n\t        nPage: 'e-icon-next',\n\t        lPage: 'e-icon-last',\n\t        pPage: 'e-icon-prev',\n\t        ascending: 'e-icon-ascending',\n\t        descending: 'e-icon-descending',\n\t        groupHeader: 'e-groupdroparea',\n\t        touchPop: 'e-gridpopup'\n\t    };\n\t    var ContextMenu = (function () {\n\t        function ContextMenu(parent, serviceLocator) {\n\t            this.defaultItems = {};\n\t            this.disableItems = [];\n\t            this.hiddenItems = [];\n\t            this.localeText = this.setLocaleKey();\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        ContextMenu.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.render, this);\n\t        };\n\t        ContextMenu.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.render);\n\t        };\n\t        ContextMenu.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.element = ej2_base_2.createElement('ul', { id: this.gridID + '_cmenu' });\n\t            this.parent.element.appendChild(this.element);\n\t            var target = '#' + this.gridID;\n\t            this.contextMenu = new ej2_navigations_1.ContextMenu({\n\t                items: this.getMenuItems(),\n\t                enableRtl: this.parent.enableRtl,\n\t                enablePersistence: this.parent.enablePersistence,\n\t                locale: this.parent.locale,\n\t                target: target,\n\t                select: this.contextMenuItemClick.bind(this),\n\t                beforeOpen: this.contextMenuBeforeOpen.bind(this),\n\t                onOpen: this.contextMenuOpen.bind(this),\n\t                onClose: this.contextMenuOnClose.bind(this),\n\t                cssClass: 'e-grid-menu'\n\t            });\n\t            this.contextMenu.appendTo(this.element);\n\t        };\n\t        ContextMenu.prototype.getMenuItems = function () {\n\t            var menuItems = [];\n\t            var exportItems = [];\n\t            for (var _i = 0, _a = this.parent.contextMenuItems; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n\t                    if (item.toLocaleLowerCase().indexOf('export') !== -1) {\n\t                        exportItems.push(this.buildDefaultItems(item));\n\t                    }\n\t                    else {\n\t                        menuItems.push(this.buildDefaultItems(item));\n\t                    }\n\t                }\n\t                else if (typeof item !== 'string') {\n\t                    menuItems.push(item);\n\t                }\n\t            }\n\t            if (exportItems.length > 0) {\n\t                var exportGroup = this.buildDefaultItems('export');\n\t                exportGroup.items = exportItems;\n\t                menuItems.push(exportGroup);\n\t            }\n\t            return menuItems;\n\t        };\n\t        ContextMenu.prototype.getLastPage = function () {\n\t            var totalpage = Math.floor(this.parent.pageSettings.totalRecordsCount / this.parent.pageSettings.pageSize);\n\t            if (this.parent.pageSettings.totalRecordsCount % this.parent.pageSettings.pageSize) {\n\t                totalpage += 1;\n\t            }\n\t            return totalpage;\n\t        };\n\t        ContextMenu.prototype.contextMenuOpen = function () {\n\t            this.isOpen = true;\n\t        };\n\t        ContextMenu.prototype.contextMenuItemClick = function (args) {\n\t            var item = this.getKeyFromId(args.item.id);\n\t            switch (item) {\n\t                case 'autoFitAll':\n\t                    this.parent.autoFitColumns([]);\n\t                    break;\n\t                case 'autoFit':\n\t                    this.parent.autoFitColumns(this.targetColumn.field);\n\t                    break;\n\t                case 'group':\n\t                    this.parent.groupColumn(this.targetColumn.field);\n\t                    break;\n\t                case 'ungroup':\n\t                    this.parent.ungroupColumn(this.targetColumn.field);\n\t                    break;\n\t                case 'edit':\n\t                    this.parent.editModule.endEdit();\n\t                    this.selectRow(this.eventArgs);\n\t                    this.parent.editModule.startEdit();\n\t                    break;\n\t                case 'delete':\n\t                    this.parent.editModule.endEdit();\n\t                    this.selectRow(this.eventArgs);\n\t                    this.parent.editModule.deleteRow(this.parent.getRowByIndex(this.parent.selectedRowIndex));\n\t                    break;\n\t                case 'save':\n\t                    this.parent.editModule.endEdit();\n\t                    break;\n\t                case 'cancel':\n\t                    this.parent.editModule.closeEdit();\n\t                    break;\n\t                case 'copy':\n\t                    this.parent.copy();\n\t                    break;\n\t                case 'pdfExport':\n\t                    this.parent.pdfExport();\n\t                    break;\n\t                case 'excelExport':\n\t                    this.parent.excelExport();\n\t                    break;\n\t                case 'csvExport':\n\t                    this.parent.csvExport();\n\t                    break;\n\t                case 'sortAscending':\n\t                    this.isOpen = false;\n\t                    this.parent.sortColumn(this.targetColumn.field, 'ascending');\n\t                    break;\n\t                case 'sortDescending':\n\t                    this.isOpen = false;\n\t                    this.parent.sortColumn(this.targetColumn.field, 'descending');\n\t                    break;\n\t                case 'firstPage':\n\t                    this.parent.goToPage(1);\n\t                    break;\n\t                case 'prevPage':\n\t                    this.parent.goToPage(this.parent.pageSettings.currentPage - 1);\n\t                    break;\n\t                case 'lastPage':\n\t                    this.parent.goToPage(this.getLastPage());\n\t                    break;\n\t                case 'nextPage':\n\t                    this.parent.goToPage(this.parent.pageSettings.currentPage + 1);\n\t                    break;\n\t            }\n\t            this.parent.trigger(events.contextMenuClick, args);\n\t        };\n\t        ContextMenu.prototype.contextMenuOnClose = function (args) {\n\t            var parent = 'parentObj';\n\t            if (args.items.length > 0 && args.items[0][parent] instanceof ej2_navigations_1.ContextMenu) {\n\t                this.updateItemStatus();\n\t            }\n\t        };\n\t        ContextMenu.prototype.getLocaleText = function (item) {\n\t            return this.l10n.getConstant(this.localeText[item]);\n\t        };\n\t        ContextMenu.prototype.updateItemStatus = function () {\n\t            this.contextMenu.showItems(this.hiddenItems);\n\t            this.contextMenu.enableItems(this.disableItems);\n\t            this.hiddenItems = [];\n\t            this.disableItems = [];\n\t            this.isOpen = false;\n\t        };\n\t        ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n\t            this.targetColumn = this.getColumn(args.event);\n\t            if (args.event && (ej2_base_1.closest(args.event.target, '.' + exports.menuClass.groupHeader)\n\t                || ej2_base_1.closest(args.event.target, '.' + exports.menuClass.touchPop))) {\n\t                args.cancel = true;\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                var key = this.getKeyFromId(item.id);\n\t                var dItem = this.defaultItems[key];\n\t                if (this.getDefaultItems().indexOf(key) !== -1) {\n\t                    if (this.ensureDisabledStatus(key)) {\n\t                        this.disableItems.push(item.text);\n\t                    }\n\t                    if (args.event && ej2_base_1.closest(args.event.target, exports.menuClass.edit)) {\n\t                        if (key !== 'save' && key !== 'cancel') {\n\t                            this.hiddenItems.push(item.text);\n\t                        }\n\t                    }\n\t                    else if (ej2_base_1.isNullOrUndefined(args.parentItem) && args.event\n\t                        && !ej2_base_1.closest(args.event.target, dItem.target)) {\n\t                        this.hiddenItems.push(item.text);\n\t                    }\n\t                }\n\t            }\n\t            this.contextMenu.enableItems(this.disableItems, false);\n\t            this.contextMenu.hideItems(this.hiddenItems);\n\t            this.eventArgs = args.event;\n\t            this.parent.trigger(events.contextMenuOpen, args);\n\t            if (this.hiddenItems.indexOf('Export') >= 0) {\n\t                if (this.hiddenItems.length === this.parent.contextMenuItems.length - 2) {\n\t                    this.updateItemStatus();\n\t                    args.cancel = true;\n\t                }\n\t            }\n\t            else {\n\t                if (this.hiddenItems.length === this.parent.contextMenuItems.length) {\n\t                    this.updateItemStatus();\n\t                    args.cancel = true;\n\t                }\n\t            }\n\t        };\n\t        ContextMenu.prototype.ensureDisabledStatus = function (item) {\n\t            var _this = this;\n\t            var status = false;\n\t            switch (item) {\n\t                case 'autoFitAll':\n\t                case 'autoFit':\n\t                    status = !this.parent.ensureModuleInjected(resize_1.Resize);\n\t                    break;\n\t                case 'group':\n\t                    if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(group_1.Group) && this.targetColumn\n\t                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'ungroup':\n\t                    if (!this.parent.ensureModuleInjected(group_1.Group) || (this.parent.ensureModuleInjected(group_1.Group) && this.targetColumn\n\t                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'edit':\n\t                case 'delete':\n\t                case 'save':\n\t                case 'cancel':\n\t                    if (!this.parent.editModule) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'copy':\n\t                    if (this.parent.getSelectedRowIndexes().length === 0) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'export':\n\t                    if (!this.parent.ensureModuleInjected(pdf_export_1.PdfExport) && !this.parent.ensureModuleInjected(excel_export_1.ExcelExport)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'pdfExport':\n\t                    if (!this.parent.ensureModuleInjected(pdf_export_1.PdfExport)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'excelExport':\n\t                case 'csvExport':\n\t                    if (!this.parent.ensureModuleInjected(excel_export_1.ExcelExport)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'sortAscending':\n\t                case 'sortDescending':\n\t                    if (!this.parent.ensureModuleInjected(sort_1.Sort)) {\n\t                        status = true;\n\t                    }\n\t                    else if (this.parent.ensureModuleInjected(sort_1.Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n\t                        this.parent.sortSettings.columns.forEach(function (element) {\n\t                            if (element.field === _this.targetColumn.field\n\t                                && element.direction === item.replace('sort', '').toLocaleLowerCase()) {\n\t                                status = true;\n\t                            }\n\t                        });\n\t                    }\n\t                    break;\n\t                case 'firstPage':\n\t                case 'prevPage':\n\t                    if (!this.parent.ensureModuleInjected(page_1.Page) ||\n\t                        (this.parent.ensureModuleInjected(page_1.Page) && this.parent.pageSettings.currentPage === 1)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'lastPage':\n\t                case 'nextPage':\n\t                    if (!this.parent.ensureModuleInjected(page_1.Page) ||\n\t                        (this.parent.ensureModuleInjected(page_1.Page) && this.parent.pageSettings.currentPage === this.getLastPage())) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t            }\n\t            return status;\n\t        };\n\t        ContextMenu.prototype.getContextMenu = function () {\n\t            return this.element;\n\t        };\n\t        ContextMenu.prototype.destroy = function () {\n\t            this.contextMenu.destroy();\n\t            ej2_base_2.remove(this.element);\n\t            this.removeEventListener();\n\t        };\n\t        ContextMenu.prototype.getModuleName = function () {\n\t            return 'contextMenu';\n\t        };\n\t        ContextMenu.prototype.generateID = function (item) {\n\t            return this.gridID + '_cmenu_' + item;\n\t        };\n\t        ContextMenu.prototype.getKeyFromId = function (id) {\n\t            return id.replace(this.gridID + '_cmenu_', '');\n\t        };\n\t        ContextMenu.prototype.buildDefaultItems = function (item) {\n\t            var menuItem;\n\t            switch (item) {\n\t                case 'autoFitAll':\n\t                case 'autoFit':\n\t                    menuItem = { target: exports.menuClass.header };\n\t                    break;\n\t                case 'group':\n\t                    menuItem = { target: exports.menuClass.header, iconCss: exports.menuClass.group };\n\t                    break;\n\t                case 'ungroup':\n\t                    menuItem = { target: exports.menuClass.header, iconCss: exports.menuClass.ungroup };\n\t                    break;\n\t                case 'edit':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.editIcon };\n\t                    break;\n\t                case 'delete':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.delete };\n\t                    break;\n\t                case 'save':\n\t                    menuItem = { target: exports.menuClass.edit, iconCss: exports.menuClass.save };\n\t                    break;\n\t                case 'cancel':\n\t                    menuItem = { target: exports.menuClass.edit, iconCss: exports.menuClass.cancel };\n\t                    break;\n\t                case 'copy':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.copy };\n\t                    break;\n\t                case 'export':\n\t                    menuItem = { target: exports.menuClass.content };\n\t                    break;\n\t                case 'pdfExport':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.pdf };\n\t                    break;\n\t                case 'excelExport':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.excel };\n\t                    break;\n\t                case 'csvExport':\n\t                    menuItem = { target: exports.menuClass.content, iconCss: exports.menuClass.csv };\n\t                    break;\n\t                case 'sortAscending':\n\t                    menuItem = { target: exports.menuClass.header, iconCss: exports.menuClass.ascending };\n\t                    break;\n\t                case 'sortDescending':\n\t                    menuItem = { target: exports.menuClass.header, iconCss: exports.menuClass.descending };\n\t                    break;\n\t                case 'firstPage':\n\t                    menuItem = { target: exports.menuClass.pager, iconCss: exports.menuClass.fPage };\n\t                    break;\n\t                case 'prevPage':\n\t                    menuItem = { target: exports.menuClass.pager, iconCss: exports.menuClass.pPage };\n\t                    break;\n\t                case 'lastPage':\n\t                    menuItem = { target: exports.menuClass.pager, iconCss: exports.menuClass.lPage };\n\t                    break;\n\t                case 'nextPage':\n\t                    menuItem = { target: exports.menuClass.pager, iconCss: exports.menuClass.nPage };\n\t                    break;\n\t            }\n\t            this.defaultItems[item] = {\n\t                text: this.getLocaleText(item), id: this.generateID(item),\n\t                target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n\t            };\n\t            return this.defaultItems[item];\n\t        };\n\t        ContextMenu.prototype.getDefaultItems = function () {\n\t            return ['autoFitAll', 'autoFit',\n\t                'group', 'ungroup', 'edit', 'delete', 'save', 'cancel', 'copy', 'export',\n\t                'pdfExport', 'excelExport', 'csvExport', 'sortAscending', 'sortDescending',\n\t                'firstPage', 'prevPage', 'lastPage', 'nextPage'];\n\t        };\n\t        ContextMenu.prototype.setLocaleKey = function () {\n\t            return {\n\t                'autoFitAll': 'autoFitAll',\n\t                'autoFit': 'autoFit',\n\t                'copy': 'Copy',\n\t                'group': 'Group',\n\t                'ungroup': 'Ungroup',\n\t                'edit': 'EditRecord',\n\t                'delete': 'DeleteRecord',\n\t                'save': 'Save',\n\t                'cancel': 'CancelButton',\n\t                'pdfExport': 'Pdfexport',\n\t                'excelExport': 'Excelexport',\n\t                'csvExport': 'Csvexport',\n\t                'export': 'Export',\n\t                'sortAscending': 'SortAscending',\n\t                'sortDescending': 'SortDescending',\n\t                'firstPage': 'FirstPage',\n\t                'lastPage': 'LastPage',\n\t                'prevPage': 'PreviousPage',\n\t                'nextPage': 'NextPage'\n\t            };\n\t        };\n\t        ContextMenu.prototype.getColumn = function (e) {\n\t            var cell = ej2_base_1.closest(e.target, 'th.e-headercell');\n\t            if (cell) {\n\t                var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t                return this.parent.getColumnByUid(uid);\n\t            }\n\t            return null;\n\t        };\n\t        ContextMenu.prototype.selectRow = function (e) {\n\t            var row = ej2_base_1.closest(e.target, 'tr.e-row');\n\t            if (row) {\n\t                this.parent.selectRow(this.parent.getDataRows().indexOf(row));\n\t            }\n\t        };\n\t        return ContextMenu;\n\t    }());\n\t    exports.ContextMenu = ContextMenu;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(10), __webpack_require__(14), __webpack_require__(106)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, enum_1, freeze_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Freeze = (function () {\n\t        function Freeze(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        Freeze.prototype.getModuleName = function () {\n\t            return 'freeze';\n\t        };\n\t        Freeze.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n\t        };\n\t        Freeze.prototype.instantiateRenderer = function () {\n\t            var renderer = this.locator.getService('rendererFactory');\n\t            if (this.parent.frozenColumns) {\n\t                renderer.addRenderer(enum_1.RenderType.Header, new freeze_renderer_1.FreezeRender(this.parent, this.locator));\n\t                renderer.addRenderer(enum_1.RenderType.Content, new freeze_renderer_1.FreezeContentRender(this.parent, this.locator));\n\t            }\n\t            if (this.parent.frozenRows && !this.parent.frozenColumns) {\n\t                renderer.addRenderer(enum_1.RenderType.Content, new freeze_renderer_1.FreezeContentRender(this.parent, this.locator));\n\t            }\n\t        };\n\t        Freeze.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.instantiateRenderer);\n\t        };\n\t        Freeze.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return Freeze;\n\t    }());\n\t    exports.Freeze = Freeze;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(25), __webpack_require__(12), __webpack_require__(107), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, header_renderer_1, content_renderer_1, freeze_row_model_generator_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FreezeContentRender = (function (_super) {\n\t        __extends(FreezeContentRender, _super);\n\t        function FreezeContentRender(parent, locator) {\n\t            return _super.call(this, parent, locator) || this;\n\t        }\n\t        FreezeContentRender.prototype.renderPanel = function () {\n\t            _super.prototype.renderPanel.call(this);\n\t            if (this.parent.frozenColumns) {\n\t                var fDiv = ej2_base_1.createElement('div', { className: 'e-frozencontent' });\n\t                var mDiv = ej2_base_1.createElement('div', { className: 'e-movablecontent' });\n\t                this.getPanel().firstChild.appendChild(fDiv);\n\t                this.getPanel().firstChild.appendChild(mDiv);\n\t                this.setFrozenContent(fDiv);\n\t                this.setMovableContent(mDiv);\n\t            }\n\t        };\n\t        FreezeContentRender.prototype.renderEmpty = function (tbody) {\n\t            _super.prototype.renderEmpty.call(this, tbody);\n\t            if (this.parent.frozenColumns) {\n\t                this.getMovableContent().querySelector('tbody').innerHTML = '';\n\t                this.getMovableContent().style.overflow = 'hidden';\n\t                if (this.parent.frozenRows) {\n\t                    this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n\t                    this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n\t                }\n\t            }\n\t            else if (this.parent.frozenRows) {\n\t                this.parent.getHeaderContent().querySelector('tbody').innerHTML = '';\n\t            }\n\t        };\n\t        FreezeContentRender.prototype.setFrozenContent = function (ele) {\n\t            this.frozenContent = ele;\n\t        };\n\t        FreezeContentRender.prototype.setMovableContent = function (ele) {\n\t            this.movableContent = ele;\n\t        };\n\t        FreezeContentRender.prototype.getFrozenContent = function () {\n\t            return this.frozenContent;\n\t        };\n\t        FreezeContentRender.prototype.getMovableContent = function () {\n\t            return this.movableContent;\n\t        };\n\t        FreezeContentRender.prototype.getModelGenerator = function () {\n\t            return new freeze_row_model_generator_1.FreezeRowModelGenerator(this.parent);\n\t        };\n\t        FreezeContentRender.prototype.renderTable = function () {\n\t            _super.prototype.renderTable.call(this);\n\t            if (this.parent.frozenColumns) {\n\t                this.getFrozenContent().appendChild(this.getTable());\n\t                var mTbl = this.getTable().cloneNode(true);\n\t                this.getMovableContent().appendChild(mTbl);\n\t            }\n\t            if (this.parent.frozenRows) {\n\t                this.parent.getHeaderContent().firstChild.classList.add('e-frozenhdrcont');\n\t                this.parent.getHeaderTable().querySelector('tbody').classList.remove('e-hide');\n\t            }\n\t        };\n\t        return FreezeContentRender;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.FreezeContentRender = FreezeContentRender;\n\t    var FreezeRender = (function (_super) {\n\t        __extends(FreezeRender, _super);\n\t        function FreezeRender(parent, locator) {\n\t            return _super.call(this, parent, locator) || this;\n\t        }\n\t        FreezeRender.prototype.renderTable = function () {\n\t            _super.prototype.renderTable.call(this);\n\t            this.rfshMovable();\n\t        };\n\t        FreezeRender.prototype.renderPanel = function () {\n\t            _super.prototype.renderPanel.call(this);\n\t            var fDiv = ej2_base_1.createElement('div', { className: 'e-frozenheader' });\n\t            var mDiv = ej2_base_1.createElement('div', { className: 'e-movableheader' });\n\t            this.getPanel().firstChild.appendChild(fDiv);\n\t            this.getPanel().firstChild.appendChild(mDiv);\n\t            this.setFrozenHeader(fDiv);\n\t            this.setMovableHeader(mDiv);\n\t        };\n\t        FreezeRender.prototype.refreshUI = function () {\n\t            this.getMovableHeader().innerHTML = '';\n\t            _super.prototype.refreshUI.call(this);\n\t            this.rfshMovable();\n\t            var mTable = this.getMovableHeader().querySelector('table');\n\t            ej2_base_1.remove(this.getMovableHeader().querySelector('colgroup'));\n\t            mTable.insertBefore(this.renderMovable(this.getFrozenHeader().querySelector('colgroup')), mTable.querySelector('thead'));\n\t        };\n\t        FreezeRender.prototype.rfshMovable = function () {\n\t            var filterRow;\n\t            this.getFrozenHeader().appendChild(this.getTable());\n\t            this.getMovableHeader().appendChild(this.createTable());\n\t            if (this.parent.frozenRows) {\n\t                this.getFrozenHeader().querySelector('tbody').classList.remove('e-hide');\n\t                this.getMovableHeader().querySelector('tbody').classList.remove('e-hide');\n\t            }\n\t            filterRow = this.getTable().querySelector('.e-filterbar');\n\t            if (this.parent.allowFiltering && filterRow) {\n\t                this.getMovableHeader().querySelector('thead')\n\t                    .appendChild(this.renderMovable(filterRow));\n\t            }\n\t            this.parent.notify(events.freezeRefresh, {});\n\t        };\n\t        FreezeRender.prototype.setFrozenHeader = function (ele) {\n\t            this.frozenHeader = ele;\n\t        };\n\t        FreezeRender.prototype.setMovableHeader = function (ele) {\n\t            this.movableHeader = ele;\n\t        };\n\t        FreezeRender.prototype.getFrozenHeader = function () {\n\t            return this.frozenHeader;\n\t        };\n\t        FreezeRender.prototype.getMovableHeader = function () {\n\t            return this.movableHeader;\n\t        };\n\t        FreezeRender.prototype.renderMovable = function (ele) {\n\t            var mEle = ele.cloneNode(true);\n\t            for (var i = 0; i < this.parent.frozenColumns; i++) {\n\t                mEle.removeChild(mEle.children[0]);\n\t            }\n\t            for (var i = this.parent.frozenColumns, len = ele.childElementCount; i < len; i++) {\n\t                ele.removeChild(ele.children[ele.childElementCount - 1]);\n\t            }\n\t            return mEle;\n\t        };\n\t        return FreezeRender;\n\t    }(header_renderer_1.HeaderRender));\n\t    exports.FreezeRender = FreezeRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FreezeRowModelGenerator = (function () {\n\t        function FreezeRowModelGenerator(parent) {\n\t            this.isFrzLoad = 1;\n\t            this.parent = parent;\n\t            this.rowModelGenerator = new row_model_generator_1.RowModelGenerator(this.parent);\n\t        }\n\t        FreezeRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n\t            var row = this.rowModelGenerator.generateRows(data, notifyArgs);\n\t            if (this.parent.frozenColumns) {\n\t                for (var i = 0, len = row.length; i < len; i++) {\n\t                    if (this.isFrzLoad % 2 === 0) {\n\t                        row[i].cells = row[i].cells.slice(this.parent.frozenColumns, row[i].cells.length);\n\t                    }\n\t                    else {\n\t                        row[i].cells = row[i].cells.slice(0, this.parent.frozenColumns);\n\t                    }\n\t                }\n\t            }\n\t            this.isFrzLoad++;\n\t            return row;\n\t        };\n\t        return FreezeRowModelGenerator;\n\t    }());\n\t    exports.FreezeRowModelGenerator = FreezeRowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(73), __webpack_require__(7), __webpack_require__(10), __webpack_require__(6), __webpack_require__(23), __webpack_require__(77), __webpack_require__(55), __webpack_require__(63), __webpack_require__(74)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, util_1, events, ej2_popups_1, ej2_buttons_1, group_1, sort_1, filter_1, resize_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnMenu = (function () {\n\t        function ColumnMenu(parent, serviceLocator) {\n\t            this.defaultItems = {};\n\t            this.localeText = this.setLocaleKey();\n\t            this.disableItems = [];\n\t            this.isOpen = false;\n\t            this.GROUP = 'e-icon-group';\n\t            this.UNGROUP = 'e-icon-ungroup';\n\t            this.ASCENDING = 'e-icon-ascending';\n\t            this.DESCENDING = 'e-icon-descending';\n\t            this.ROOT = 'e-columnmenu';\n\t            this.FILTER = 'e-icon-filter';\n\t            this.POP = 'e-filter-popup';\n\t            this.WRAP = 'e-col-menu';\n\t            this.CHOOSER = '_chooser_';\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        ColumnMenu.prototype.wireEvents = function () {\n\t            var _this = this;\n\t            this.getColumnMenuHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.add(ele, 'mousedown', _this.columnMenuHandlerDown, _this);\n\t            });\n\t        };\n\t        ColumnMenu.prototype.unwireEvents = function () {\n\t            var _this = this;\n\t            this.getColumnMenuHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.remove(ele, 'mousedown', _this.columnMenuHandlerDown);\n\t            });\n\t        };\n\t        ColumnMenu.prototype.destroy = function () {\n\t            this.columnMenu.destroy();\n\t            this.removeEventListener();\n\t            this.unwireFilterEvents();\n\t            this.unwireEvents();\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n\t            if (e.target.classList.contains('e-columnmenu')) {\n\t                if (!this.isOpen) {\n\t                    this.openColumnMenu(e);\n\t                }\n\t                else if (this.isOpen && this.headerCell !== this.getHeaderCell(e)) {\n\t                    this.columnMenu.close();\n\t                    this.openColumnMenu(e);\n\t                }\n\t                else {\n\t                    this.columnMenu.close();\n\t                }\n\t            }\n\t        };\n\t        ColumnMenu.prototype.openColumnMenu = function (e) {\n\t            var pos = { top: 0, left: 0 };\n\t            this.element.style.cssText = 'display:block;visibility:hidden';\n\t            var elePos = this.element.getBoundingClientRect();\n\t            this.element.style.cssText = 'display:none;visibility:visible';\n\t            this.headerCell = this.getHeaderCell(e);\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n\t                pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n\t            }\n\t            else {\n\t                if (this.parent.enableRtl) {\n\t                    pos = ej2_popups_1.calculatePosition(this.headerCell, 'left', 'bottom');\n\t                }\n\t                else {\n\t                    pos = ej2_popups_1.calculatePosition(this.headerCell, 'right', 'bottom');\n\t                    pos.left -= elePos.width;\n\t                }\n\t            }\n\t            this.columnMenu.open(pos.top, pos.left);\n\t            e.preventDefault();\n\t        };\n\t        ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n\t            this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n\t        };\n\t        ColumnMenu.prototype.getColumnMenuHandlers = function () {\n\t            return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n\t        };\n\t        ColumnMenu.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerRefreshed, this.wireEvents, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n\t            this.parent.on(events.click, this.columnMenuHandlerClick, this);\n\t        };\n\t        ColumnMenu.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.headerRefreshed, this.unwireEvents);\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.filterDialogCreated, this.filterPosition);\n\t            this.parent.off(events.click, this.columnMenuHandlerClick);\n\t        };\n\t        ColumnMenu.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.element = ej2_base_2.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n\t            this.parent.element.appendChild(this.element);\n\t            this.columnMenu = new ej2_navigations_1.ContextMenu({\n\t                cssClass: 'e-grid-menu',\n\t                enableRtl: this.parent.enableRtl,\n\t                enablePersistence: this.parent.enablePersistence,\n\t                locale: this.parent.locale,\n\t                items: this.getItems(),\n\t                select: this.columnMenuItemClick.bind(this),\n\t                beforeOpen: this.columnMenuBeforeOpen.bind(this),\n\t                onClose: this.columnMenuOnClose.bind(this),\n\t                beforeItemRender: this.beforeMenuItemRender.bind(this),\n\t                beforeClose: this.columnMenuBeforeClose.bind(this)\n\t            });\n\t            this.columnMenu.appendTo(this.element);\n\t            this.wireFilterEvents();\n\t        };\n\t        ColumnMenu.prototype.wireFilterEvents = function () {\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                ej2_base_1.EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n\t            }\n\t        };\n\t        ColumnMenu.prototype.unwireFilterEvents = function () {\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                ej2_base_1.EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n\t            }\n\t        };\n\t        ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n\t            if (this.isChooserItem(args.item)) {\n\t                var field = this.getKeyFromId(args.item.id, this.CHOOSER);\n\t                var column = this.parent.getColumnByField(field);\n\t                var check = ej2_buttons_1.createCheckBox(false, {\n\t                    label: args.item.text,\n\t                    checked: column.visible\n\t                });\n\t                if (this.parent.enableRtl) {\n\t                    check.classList.add('e-rtl');\n\t                }\n\t                args.element.innerHTML = '';\n\t                args.element.appendChild(check);\n\t            }\n\t            else if (this.getKeyFromId(args.item.id) === 'filter') {\n\t                args.element.appendChild(ej2_base_2.createElement('span', { className: 'e-icons e-caret' }));\n\t                args.element.className += 'e-filter-item e-menu-caret-icon';\n\t            }\n\t        };\n\t        ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n\t            if (!ej2_base_1.isNullOrUndefined(args.parentItem) &&\n\t                this.getKeyFromId(args.parentItem.id) === 'columnChooser' &&\n\t                ej2_base_1.closest(args.event.target, '.e-menu-parent')) {\n\t                args.cancel = true;\n\t            }\n\t            else if (args.event && (ej2_base_1.closest(args.event.target, '.' + this.POP)\n\t                || (util_1.parentsUntil(args.event.target, 'e-popup')))) {\n\t                args.cancel = true;\n\t            }\n\t        };\n\t        ColumnMenu.prototype.isChooserItem = function (item) {\n\t            return this.getKeyFromId(item.id, this.CHOOSER).indexOf(this.gridID) === -1;\n\t        };\n\t        ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n\t            args.column = this.targetColumn = this.getColumn();\n\t            this.parent.trigger(events.columnMenuOpen, args);\n\t            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                var key = this.getKeyFromId(item.id);\n\t                var dItem = this.defaultItems[key];\n\t                if (this.getDefaultItems().indexOf(key) !== -1) {\n\t                    if (this.ensureDisabledStatus(key) && !dItem.hide) {\n\t                        this.disableItems.push(item.text);\n\t                    }\n\t                }\n\t            }\n\t            this.columnMenu.enableItems(this.disableItems, false);\n\t        };\n\t        ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n\t            var _this = this;\n\t            var status = false;\n\t            switch (item) {\n\t                case 'group':\n\t                    if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(group_1.Group) && this.targetColumn\n\t                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'autoFitAll':\n\t                case 'autoFit':\n\t                    status = !this.parent.ensureModuleInjected(resize_1.Resize);\n\t                    break;\n\t                case 'ungroup':\n\t                    if (!this.parent.ensureModuleInjected(group_1.Group) || (this.parent.ensureModuleInjected(group_1.Group) && this.targetColumn\n\t                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t                case 'sortDescending':\n\t                case 'sortAscending':\n\t                    if (this.parent.ensureModuleInjected(sort_1.Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n\t                        this.parent.sortSettings.columns.forEach(function (ele) {\n\t                            if (ele.field === _this.targetColumn.field\n\t                                && ele.direction === item.replace('sort', '').toLocaleLowerCase()) {\n\t                                status = true;\n\t                            }\n\t                        });\n\t                    }\n\t                    else if (!this.parent.ensureModuleInjected(sort_1.Sort)) {\n\t                        status = true;\n\t                    }\n\t                    break;\n\t            }\n\t            return status;\n\t        };\n\t        ColumnMenu.prototype.columnMenuItemClick = function (args) {\n\t            var item = this.isChooserItem(args.item) ? 'columnChooser' : this.getKeyFromId(args.item.id);\n\t            switch (item) {\n\t                case 'autoFit':\n\t                    this.parent.autoFitColumns(this.targetColumn.field);\n\t                    break;\n\t                case 'autoFitAll':\n\t                    this.parent.autoFitColumns([]);\n\t                    break;\n\t                case 'ungroup':\n\t                    this.parent.ungroupColumn(this.targetColumn.field);\n\t                    break;\n\t                case 'group':\n\t                    this.parent.groupColumn(this.targetColumn.field);\n\t                    break;\n\t                case 'sortAscending':\n\t                    this.parent.sortColumn(this.targetColumn.field, 'ascending');\n\t                    break;\n\t                case 'sortDescending':\n\t                    this.parent.sortColumn(this.targetColumn.field, 'descending');\n\t                    break;\n\t                case 'columnChooser':\n\t                    var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n\t                    var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n\t                    if (checkbox && checkbox.classList.contains('e-check')) {\n\t                        checkbox.classList.remove('e-check');\n\t                        this.parent.hideColumn(key, 'field');\n\t                    }\n\t                    else if (checkbox) {\n\t                        this.parent.showColumn(key, 'field');\n\t                        checkbox.classList.add('e-check');\n\t                    }\n\t                    break;\n\t                case 'filter':\n\t                    this.getFilter(args.element, args.item.id);\n\t                    break;\n\t            }\n\t            this.parent.trigger(events.columnMenuClick, args);\n\t        };\n\t        ColumnMenu.prototype.columnMenuOnClose = function (args) {\n\t            var parent = 'parentObj';\n\t            if (args.items.length > 0 && args.items[0][parent] instanceof ej2_navigations_1.ContextMenu) {\n\t                this.columnMenu.enableItems(this.disableItems);\n\t                this.disableItems = [];\n\t            }\n\t        };\n\t        ColumnMenu.prototype.getDefaultItems = function () {\n\t            return ['autoFitAll', 'autoFit', 'sortAscending', 'sortDescending', 'group', 'ungroup', 'columnChooser', 'filter'];\n\t        };\n\t        ColumnMenu.prototype.getItems = function () {\n\t            var items = [];\n\t            var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n\t            for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n\t                var item = defultItems_1[_i];\n\t                if (typeof item === 'string') {\n\t                    if (item === 'columnChooser') {\n\t                        var col = this.getDefaultItem(item);\n\t                        col.items = this.createChooserItems();\n\t                        items.push(col);\n\t                    }\n\t                    else {\n\t                        items.push(this.getDefaultItem(item));\n\t                    }\n\t                }\n\t                else {\n\t                    items.push(item);\n\t                }\n\t            }\n\t            return items;\n\t        };\n\t        ColumnMenu.prototype.getDefaultItem = function (item) {\n\t            var menuItem = {};\n\t            switch (item) {\n\t                case 'sortAscending':\n\t                    menuItem = { iconCss: this.ASCENDING };\n\t                    break;\n\t                case 'sortDescending':\n\t                    menuItem = { iconCss: this.DESCENDING };\n\t                    break;\n\t                case 'group':\n\t                    menuItem = { iconCss: this.GROUP };\n\t                    break;\n\t                case 'ungroup':\n\t                    menuItem = { iconCss: this.UNGROUP };\n\t                    break;\n\t                case 'filter':\n\t                    menuItem = { iconCss: this.FILTER };\n\t                    break;\n\t            }\n\t            this.defaultItems[item] = {\n\t                text: this.getLocaleText(item), id: this.generateID(item),\n\t                iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n\t            };\n\t            return this.defaultItems[item];\n\t        };\n\t        ColumnMenu.prototype.getLocaleText = function (item) {\n\t            return this.l10n.getConstant(this.localeText[item]);\n\t        };\n\t        ColumnMenu.prototype.generateID = function (item, append) {\n\t            return this.gridID + '_colmenu_' + (append ? append + item : item);\n\t        };\n\t        ColumnMenu.prototype.getKeyFromId = function (id, append) {\n\t            return id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n\t        };\n\t        ColumnMenu.prototype.getColumnMenu = function () {\n\t            return this.element;\n\t        };\n\t        ColumnMenu.prototype.getModuleName = function () {\n\t            return 'columnMenu';\n\t        };\n\t        ColumnMenu.prototype.setLocaleKey = function () {\n\t            return {\n\t                'autoFitAll': 'autoFitAll',\n\t                'autoFit': 'autoFit',\n\t                'group': 'Group',\n\t                'ungroup': 'Ungroup',\n\t                'sortAscending': 'SortAscending',\n\t                'sortDescending': 'SortDescending',\n\t                'columnChooser': 'Columnchooser',\n\t                'filter': 'FilterMenu'\n\t            };\n\t        };\n\t        ColumnMenu.prototype.getHeaderCell = function (e) {\n\t            return ej2_base_1.closest(e.target, 'th.e-headercell');\n\t        };\n\t        ColumnMenu.prototype.getColumn = function () {\n\t            if (this.headerCell) {\n\t                var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t                return this.parent.getColumnByUid(uid);\n\t            }\n\t            return null;\n\t        };\n\t        ColumnMenu.prototype.createChooserItems = function () {\n\t            var items = [];\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.showInColumnChooser) {\n\t                    items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n\t                }\n\t            }\n\t            return items;\n\t        };\n\t        ColumnMenu.prototype.appendFilter = function (e) {\n\t            var filter = 'filter';\n\t            var key = this.defaultItems[filter].id;\n\t            if (ej2_base_1.closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n\t                this.getFilter(e.target, key);\n\t            }\n\t            else if (!ej2_base_1.closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n\t                this.getFilter(e.target, key, true);\n\t            }\n\t        };\n\t        ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n\t            var filterPopup = this.getFilterPoup();\n\t            if (filterPopup) {\n\t                filterPopup.style.display = isClose ? 'none' : 'block';\n\t            }\n\t            else {\n\t                this.parent.notify(events.filterOpen, {\n\t                    col: this.targetColumn, target: target, isClose: isClose, id: id\n\t                });\n\t            }\n\t        };\n\t        ColumnMenu.prototype.setPosition = function (li, ul) {\n\t            var gridPos = this.parent.element.getBoundingClientRect();\n\t            var liPos = li.getBoundingClientRect();\n\t            var left = liPos.left - gridPos.left;\n\t            var top = liPos.top - gridPos.top;\n\t            if (gridPos.height < top) {\n\t                top = top - ul.offsetHeight + liPos.height;\n\t            }\n\t            else if (gridPos.height < top + ul.offsetHeight) {\n\t                top = gridPos.height - ul.offsetHeight;\n\t            }\n\t            if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n\t                top = window.innerHeight - ul.offsetHeight - gridPos.top;\n\t            }\n\t            left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n\t            if (gridPos.width <= left + ul.offsetWidth) {\n\t                left -= liPos.width + ul.offsetWidth;\n\t            }\n\t            else if (left < 0) {\n\t                left += ul.offsetWidth + liPos.width;\n\t            }\n\t            ul.style.top = top + 'px';\n\t            ul.style.left = left + 'px';\n\t        };\n\t        ColumnMenu.prototype.filterPosition = function (e) {\n\t            var filterPopup = this.getFilterPoup();\n\t            filterPopup.classList.add(this.WRAP);\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                var disp = filterPopup.style.display;\n\t                filterPopup.style.display = 'block';\n\t                filterPopup.classList.add(this.WRAP);\n\t                var li = this.element.querySelector('.' + this.FILTER);\n\t                if (li) {\n\t                    this.setPosition(li.parentElement, filterPopup);\n\t                    filterPopup.style.display = disp;\n\t                }\n\t            }\n\t        };\n\t        ColumnMenu.prototype.getDefault = function () {\n\t            var items = [];\n\t            if (this.parent.ensureModuleInjected(resize_1.Resize)) {\n\t                items.push('autoFitAll');\n\t                items.push('autoFit');\n\t            }\n\t            if (this.parent.ensureModuleInjected(group_1.Group)) {\n\t                items.push('group');\n\t                items.push('ungroup');\n\t            }\n\t            if (this.parent.ensureModuleInjected(sort_1.Sort)) {\n\t                items.push('sortAscending');\n\t                items.push('sortDescending');\n\t            }\n\t            items.push('columnChooser');\n\t            if (this.parent.ensureModuleInjected(filter_1.Filter)) {\n\t                items.push('filter');\n\t            }\n\t            return items;\n\t        };\n\t        ColumnMenu.prototype.isFilterPopupOpen = function () {\n\t            var filterPopup = this.getFilterPoup();\n\t            return filterPopup && filterPopup.style.display !== 'none';\n\t        };\n\t        ColumnMenu.prototype.getFilterPoup = function () {\n\t            return document.querySelector('.' + this.POP);\n\t        };\n\t        return ColumnMenu;\n\t    }());\n\t    exports.ColumnMenu = ColumnMenu;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, column_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(column_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 110 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(25), __webpack_require__(12), __webpack_require__(13), __webpack_require__(26), __webpack_require__(27), __webpack_require__(64), __webpack_require__(29), __webpack_require__(11), __webpack_require__(64), __webpack_require__(30), __webpack_require__(31), __webpack_require__(87), __webpack_require__(88), __webpack_require__(86), __webpack_require__(85), __webpack_require__(89), __webpack_require__(91), __webpack_require__(90), __webpack_require__(84), __webpack_require__(96), __webpack_require__(103), __webpack_require__(106)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, header_renderer_1, content_renderer_1, row_renderer_1, cell_renderer_1, header_cell_renderer_1, filter_cell_renderer_1, stacked_cell_renderer_1, render_1, filter_cell_renderer_2, indent_cell_renderer_1, caption_cell_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, inline_edit_renderer_1, edit_renderer_1, boolean_edit_cell_1, default_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1, datepicker_edit_cell_1, command_column_renderer_1, freeze_renderer_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(header_renderer_1);\n\t    __export(content_renderer_1);\n\t    __export(row_renderer_1);\n\t    __export(cell_renderer_1);\n\t    __export(header_cell_renderer_1);\n\t    __export(filter_cell_renderer_1);\n\t    __export(stacked_cell_renderer_1);\n\t    __export(render_1);\n\t    __export(filter_cell_renderer_2);\n\t    __export(indent_cell_renderer_1);\n\t    __export(caption_cell_renderer_1);\n\t    __export(batch_edit_renderer_1);\n\t    __export(dialog_edit_renderer_1);\n\t    __export(inline_edit_renderer_1);\n\t    __export(edit_renderer_1);\n\t    __export(boolean_edit_cell_1);\n\t    __export(default_edit_cell_1);\n\t    __export(dropdown_edit_cell_1);\n\t    __export(numeric_edit_cell_1);\n\t    __export(datepicker_edit_cell_1);\n\t    __export(command_column_renderer_1);\n\t    __export(freeze_renderer_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 111 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(36), __webpack_require__(37), __webpack_require__(16), __webpack_require__(19), __webpack_require__(107)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, cell_render_factory_1, service_locator_1, row_model_generator_1, group_model_generator_1, freeze_row_model_generator_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(cell_render_factory_1);\n\t    __export(service_locator_1);\n\t    __export(row_model_generator_1);\n\t    __export(group_model_generator_1);\n\t    __export(freeze_row_model_generator_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 112 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(57), __webpack_require__(62), __webpack_require__(58), __webpack_require__(59)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, pager_1, external_message_1, numeric_container_1, pager_message_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(pager_1);\n\t    __export(external_message_1);\n\t    __export(numeric_container_1);\n\t    __export(pager_message_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBjY2FiMDBlZGQzYTRkZjM4M2ZkYiIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvY29tbW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2Jhc2UvZ3JpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYmFzZS91dGlsLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL2NvbHVtbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9iYXNlL2NvbnN0YW50LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3JlbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9jb250ZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3Jvdy1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9iYXNlL2VudW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvY2VsbC1tZXJnZS1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL21vZGVscy9yb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL2NlbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3N1bW1hcnktbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2NoZWNrYm94LWZpbHRlci5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9hcmlhLXNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvc3RhY2tlZC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2NhcHRpb24tY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9leHBhbmQtY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1leHBhbmQtY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9jZWxsLXJlbmRlci1mYWN0b3J5LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3NlcnZpY2UtbG9jYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yZW5kZXJlci1mYWN0b3J5LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvZm9jdXMtc3RyYXRlZ3kuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL3BhZ2Utc2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zZWxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zaG93LWhpZGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zY3JvbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9wcmludC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2RlbHMvYWdncmVnYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvY29sdW1uLWNob29zZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9jbGlwYm9hcmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3ZpcnR1YWwtc2Nyb2xsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3ZpcnR1YWwtY29udGVudC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvdmlydHVhbC1yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvc29ydC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3BhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL3BhZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9udW1lcmljLWNvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvcGFnZXItbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvcGFnZXItZHJvcGRvd24uanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9leHRlcm5hbC1tZXNzYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZmlsdGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2ZpbHRlci1tZW51LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3N0cmluZy1maWx0ZXItdWkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZmlsdGVyLW1lbnUtb3BlcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvbnVtYmVyLWZpbHRlci11aS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9ib29sZWFuLWZpbHRlci11aS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kYXRlLWZpbHRlci11aS5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItY2FsZW5kYXJzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9leGNlbC1maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yZXNpemUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yZW9yZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvcm93LXJlb3JkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9ncm91cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2RldGFpbC1yb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy90b29sYmFyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvYWdncmVnYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2Zvb3Rlci1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9zdW1tYXJ5LWNlbGwtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL251bWVyaWMtZWRpdC1jZWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2VkaXQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvaW5saW5lLWVkaXQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvYmF0Y2gtZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kaWFsb2ctZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9ib29sZWFuLWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kcm9wZG93bi1lZGl0LWNlbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZGVmYXVsdC1lZGl0LWNlbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9pbmxpbmUtZWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL25vcm1hbC1lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvYmF0Y2gtZWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2RpYWxvZy1lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RhdGVwaWNrZXItZWRpdC1jZWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZXhjZWwtZXhwb3J0LmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2V4cG9ydC1oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9wZGYtZXhwb3J0LmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9jb21tYW5kLWNvbHVtbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9jb21tYW5kLWNvbHVtbi1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbnRleHQtbWVudS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2ZyZWV6ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9mcmVlemUtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvZnJlZXplLXJvdy1tb2RlbC1nZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9jb2x1bW4tbWVudS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2RlbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO0FDVkE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7OztpRUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ1JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUNYRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O0FDVkQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBOEI7QUFDOUI7QUFDQTtBQUNBLCtCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBNkQsZ0JBQWdCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSwrQkFBOEIseURBQXlEO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSwrQkFBOEIsc0RBQXNEO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxlQUFlO0FBQ3RFLHlDQUF3Qyx1QkFBdUI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF1QyxxQkFBcUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxnQkFBZ0I7QUFDdkU7QUFDQTtBQUNBO0FBQ0EsdURBQXNELDRDQUE0QztBQUNsRztBQUNBO0FBQ0E7QUFDQSxrRUFBaUUsb0RBQW9EO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEwRCxvQkFBb0I7QUFDOUU7QUFDQTtBQUNBO0FBQ0EsdURBQXNELDRDQUE0QztBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUFzRCxnREFBZ0Q7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0QsZ0NBQWdDLCtDQUErQyxFQUFFO0FBQ3ZJO0FBQ0E7QUFDQSx1REFBc0Qsa0RBQWtEO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBLHVEQUFzRCw2REFBNkQ7QUFDbkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0QsOENBQThDO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0Qsb0JBQW9CO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWlFLHFEQUFxRDtBQUN0SDtBQUNBO0FBQ0EsdURBQXNELDJDQUEyQztBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQTZELHVEQUF1RDtBQUNwSDtBQUNBO0FBQ0EsOERBQTZELHVEQUF1RDtBQUNwSDtBQUNBO0FBQ0EsOERBQTZELGlCQUFpQjtBQUM5RTtBQUNBO0FBQ0EsOERBQTZELDZEQUE2RDtBQUMxSDtBQUNBO0FBQ0EsOERBQTZELG1EQUFtRDtBQUNoSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQTZEO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELDBCQUEwQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFpRCxTQUFTO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQThELCtDQUErQyxFQUFFLHVCQUF1QixlQUFlLEVBQUU7QUFDdko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFtRCxnQkFBZ0I7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBOEMsU0FBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUErRCxnQkFBZ0I7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBMkQsU0FBUztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBb0UsWUFBWTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdELCtCQUErQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdELCtCQUErQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQzd3REQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O0FDakRELGdEOzs7Ozs7QUNBQSxnRDs7Ozs7O2lFQ0FBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWdELFNBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLFNBQVM7QUFDdEQ7QUFDQTtBQUNBLCtDQUE4QyxvQkFBb0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQThDLFNBQVM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWdELFNBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWdELFNBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXVCLHFCQUFxQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QyxTQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxjQUFjLGlCQUFpQixtQkFBbUIsYUFBYTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELHFEQUFxRDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXVCLGlCQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBK0Msd0JBQXdCO0FBQ3ZFO0FBQ0EsNENBQTJDLGlCQUFpQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE0RCx3Q0FBd0M7QUFDcEcsMERBQXlELHdDQUF3QztBQUNqRztBQUNBO0FBQ0EsNkRBQTRELDRDQUE0QztBQUN4RywwREFBeUQsNENBQTRDO0FBQ3JHO0FBQ0E7QUFDQSw2REFBNEQsd0JBQXdCO0FBQ3BGLDBEQUF5RCx3QkFBd0I7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0EsNENBQTJDLFNBQVM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF1QixtQkFBbUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFtRCx1QkFBdUI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7QUN2WUQsZ0Q7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQzVERDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWdFLDhCQUE4QjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0QsZ0JBQWdCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixnQkFBZ0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLGlCQUFpQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBbUUsc0JBQXNCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLGlCQUFpQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBMkQsc0JBQXNCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBd0QsYUFBYTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0M7QUFDcEM7QUFDQSx5Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUEyRCxtRUFBbUU7QUFDOUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsdUNBQXNDO0FBQ3RDLHNCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0MsaUJBQWlCO0FBQ3JELGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTRELCtCQUErQjtBQUMzRiw4REFBNkQsaURBQWlEO0FBQzlHO0FBQ0E7QUFDQSx5QkFBd0I7QUFDeEIsY0FBYTtBQUNiLGtFQUFpRSwrREFBK0Q7QUFDaEksMkRBQTBELCtCQUErQjtBQUN6Riw4REFBNkQsK0JBQStCO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQiw2QkFBNkI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQWtFLDZCQUE2QjtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE2RCwrQkFBK0I7QUFDNUYsNEJBQTJCLGtCQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLGdFQUFnRTtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUF5RCxvRkFBb0Y7QUFDN0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUF5RCw4Q0FBOEMsRUFBRTtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUNuYUQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXdCO0FBQ3hCLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxR0FBb0csY0FBYyxFQUFFO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW1DLDRCQUE0QjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQzlHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDdENEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF1QyxnQkFBZ0IsMENBQTBDLEVBQUU7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O0FDckREO0FBQ0E7QUFDQSxXQUFVLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDbkYsMEJBQXlCLHVEQUF1RDtBQUNoRjtBQUNBO0FBQ0Esd0JBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWdELHNEQUFzRDtBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUErRCx1Q0FBdUMsRUFBRTtBQUN4RztBQUNBO0FBQ0Esc0RBQXFELHFFQUFxRTtBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEwRCxxQ0FBcUMsRUFBRTtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFD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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QyxTQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFnRSxnQkFBZ0I7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXdFLGdCQUFnQixFQUFFO0FBQzFGLCtDQUE4QyxTQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZHQUE0RywyREFBMkQ7QUFDdks7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF3RSxnQkFBZ0IsRUFBRTtB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LGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUF5QywrRUFBK0U7QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsZ0JBQWdCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQ25MRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFvRDtBQUNwRCxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBeUQsb0VBQW9FO0FBQzdIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWlFLGdCQUFnQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXNELFFBQVE7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELFNBQVM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXNELFNBQVM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsU0FBUztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTJELDRCQUE0QjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUFzRDtBQUN0RDtBQUNBO0FBQ0EsOENBQTZDLHFCQUFxQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUFzRCxnQkFBZ0I7QUFDdEU7QUFDQTtBQUNBLG9HQUFtRztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTRELGdCQUFnQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQStDO0FBQy9DO0FBQ0E7QUFDQSx5REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF3RTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW1ELHdCQUF3QjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQWtDO0FBQ2xDLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsbUNBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFxRTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxvQ0FBb0M7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBZ0QsU0FBUztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsMEJBQTBCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQThFLGdCQUFnQjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE0RCxnQkFBZ0I7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsVUFBVTtBQUNyQztBQUNBO0FBQ0EsZ0VBQStELFNBQVM7QUFDeEU7QUFDQTtBQUNBLDhDQUE2QztB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0Esb0RBQW1ELGdCQUFnQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixFQUFFO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxxQkFBcUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLDJCQUEyQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF1QywyQkFBMkI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBdUMsMkJBQTJCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsd0JBQXdCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxnQkFBZ0I7QUFDN0Q7QUFDQTtBQUNBLGdDQUErQixvQkFBb0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF1QyxxQkFBcUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUM1NUJELGtEOzs7Ozs7aUVDQUE7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUN2RUQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXVFO0FBQ3ZFLGdFQUErRCxpRUFBaUU7QUFDaEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBb0QsZ0JBQWdCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsMkZBQTJGO0FBQ3RJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDdEVEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUEyRCw2QkFBNkI7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUErRCxnQkFBZ0I7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxnQkFBZ0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDcGJEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQ3hDRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHdCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE0RCwrQkFBK0I7QUFDM0YsNkRBQTRELGdDQUFnQztBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXdELDhCQUE4QjtBQUN0Rix5REFBd0QsK0JBQStCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQ7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLCtCQUErQjtBQUMxRDtBQUNBO0FBQ0EsaUZBQWdGLFNBQVM7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDM0lEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBaUQsU0FBUztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQzNCRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF1QjtBQUN2Qix5REFBd0Q7QUFDeEQ7QUFDQSx3REFBdUQ7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBMkQsMERBQTBEO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTJFLCtCQUErQjtBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLGdCQUFnQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQXlELDJCQUEyQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLGlDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTJELGdCQUFnQjtBQUMzRTtBQUNBO0FBQ0EsaUNBQWdDLGtHQUFrRztBQUNsSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUMvYkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0EsRUFBQzs7Ozs7OztpRUNQRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQzVCRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDWEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQyIsImZpbGUiOiJlajItZ3JpZHMudW1kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWNhbGVuZGFyc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1uYXZpZ2F0aW9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiwgXCJAc3luY2Z1c2lvbi9lajItY2FsZW5kYXJzXCIsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCJdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBmYWN0b3J5KHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItY2FsZW5kYXJzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIpKSA6IGZhY3Rvcnkocm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1jYWxlbmRhcnNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItZXhjZWwtZXhwb3J0XCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIl0pO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzhfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yM19fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzI0X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNjFfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV83MV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzczX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOThfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xMDFfXykge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBjY2FiMDBlZGQzYTRkZjM4M2ZkYiIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vZ3JpZC9pbmRleFwiLCBcIi4vcGFnZXIvaW5kZXhcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbmRleF8xLCBpbmRleF8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChpbmRleF8xKTtcbiAgICBfX2V4cG9ydChpbmRleF8yKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9jb21tb25cIiwgXCIuL2FjdGlvbnNcIiwgXCIuL21vZGVsc1wiLCBcIi4vcmVuZGVyZXJcIiwgXCIuL3NlcnZpY2VzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY29tbW9uXzEsIGFjdGlvbnNfMSwgbW9kZWxzXzEsIHJlbmRlcmVyXzEsIHNlcnZpY2VzXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGNvbW1vbl8xKTtcbiAgICBfX2V4cG9ydChhY3Rpb25zXzEpO1xuICAgIF9fZXhwb3J0KG1vZGVsc18xKTtcbiAgICBfX2V4cG9ydChyZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChzZXJ2aWNlc18xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2Jhc2UvZ3JpZFwiLCBcIi4vYmFzZS9lbnVtXCIsIFwiLi9iYXNlL3V0aWxcIiwgXCIuL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBncmlkXzEsIGVudW1fMSwgdXRpbF8xLCBjb25zdGFudF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChncmlkXzEpO1xuICAgIF9fZXhwb3J0KGVudW1fMSk7XG4gICAgX19leHBvcnQodXRpbF8xKTtcbiAgICBfX2V4cG9ydChjb25zdGFudF8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9jb21tb24uanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIi4vdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9yZW5kZXJlci9yZW5kZXJcIiwgXCIuL2VudW1cIiwgXCIuLi9zZXJ2aWNlcy9jZWxsLXJlbmRlci1mYWN0b3J5XCIsIFwiLi4vc2VydmljZXMvc2VydmljZS1sb2NhdG9yXCIsIFwiLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCIsIFwiLi4vc2VydmljZXMvcmVuZGVyZXItZmFjdG9yeVwiLCBcIi4uL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXJcIiwgXCIuLi9zZXJ2aWNlcy9hcmlhLXNlcnZpY2VcIiwgXCIuLi9zZXJ2aWNlcy9mb2N1cy1zdHJhdGVneVwiLCBcIi4uL21vZGVscy9wYWdlLXNldHRpbmdzXCIsIFwiLi4vYWN0aW9ucy9zZWxlY3Rpb25cIiwgXCIuLi9hY3Rpb25zL3NlYXJjaFwiLCBcIi4uL2FjdGlvbnMvc2hvdy1oaWRlXCIsIFwiLi4vYWN0aW9ucy9zY3JvbGxcIiwgXCIuLi9hY3Rpb25zL3ByaW50XCIsIFwiLi4vbW9kZWxzL2FnZ3JlZ2F0ZVwiLCBcIi4uL2FjdGlvbnMvY29sdW1uLWNob29zZXJcIiwgXCIuLi9hY3Rpb25zL2NsaXBib2FyZFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGVqMl9wb3B1cHNfMSwgdXRpbF8xLCBldmVudHMsIHJlbmRlcl8xLCBlbnVtXzEsIGNlbGxfcmVuZGVyX2ZhY3RvcnlfMSwgc2VydmljZV9sb2NhdG9yXzEsIHZhbHVlX2Zvcm1hdHRlcl8xLCByZW5kZXJlcl9mYWN0b3J5XzEsIHdpZHRoX2NvbnRyb2xsZXJfMSwgYXJpYV9zZXJ2aWNlXzEsIGZvY3VzX3N0cmF0ZWd5XzEsIHBhZ2Vfc2V0dGluZ3NfMSwgc2VsZWN0aW9uXzEsIHNlYXJjaF8xLCBzaG93X2hpZGVfMSwgc2Nyb2xsXzEsIHByaW50XzEsIGFnZ3JlZ2F0ZV8xLCBjb2x1bW5fY2hvb3Nlcl8xLCBjbGlwYm9hcmRfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU29ydERlc2NyaXB0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU29ydERlc2NyaXB0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFNvcnREZXNjcmlwdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTb3J0RGVzY3JpcHRvcjtcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBTb3J0RGVzY3JpcHRvci5wcm90b3R5cGUsIFwiZmllbGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgU29ydERlc2NyaXB0b3IucHJvdG90eXBlLCBcImRpcmVjdGlvblwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuU29ydERlc2NyaXB0b3IgPSBTb3J0RGVzY3JpcHRvcjtcbiAgICB2YXIgU29ydFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFNvcnRTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU29ydFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTb3J0U2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBTb3J0RGVzY3JpcHRvcilcbiAgICBdLCBTb3J0U2V0dGluZ3MucHJvdG90eXBlLCBcImNvbHVtbnNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIFNvcnRTZXR0aW5ncy5wcm90b3R5cGUsIFwiYWxsb3dVbnNvcnRcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlNvcnRTZXR0aW5ncyA9IFNvcnRTZXR0aW5ncztcbiAgICB2YXIgUHJlZGljYXRlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFByZWRpY2F0ZSwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUHJlZGljYXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcmVkaWNhdGU7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJmaWVsZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcIm9wZXJhdG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJtYXRjaENhc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJwcmVkaWNhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh7fSlcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcImFjdHVhbEZpbHRlclZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoe30pXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJhY3R1YWxPcGVyYXRvclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJlanByZWRpY2F0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcIm1hdGNoY2FzZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcImlnbm9yZUNhc2VcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlByZWRpY2F0ZSA9IFByZWRpY2F0ZTtcbiAgICB2YXIgRmlsdGVyU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRmlsdGVyU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEZpbHRlclNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBGaWx0ZXJTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbGxlY3Rpb24oW10sIFByZWRpY2F0ZSlcbiAgICBdLCBGaWx0ZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdmaWx0ZXJiYXInKVxuICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJtb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBGaWx0ZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd0ZpbHRlckJhclN0YXR1c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KDE1MDApXG4gICAgXSwgRmlsdGVyU2V0dGluZ3MucHJvdG90eXBlLCBcImltbWVkaWF0ZU1vZGVEZWxheVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBGaWx0ZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwib3BlcmF0b3JzXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5GaWx0ZXJTZXR0aW5ncyA9IEZpbHRlclNldHRpbmdzO1xuICAgIHZhciBTZWxlY3Rpb25TZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTZWxlY3Rpb25TZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU2VsZWN0aW9uU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNlbGVjdGlvblNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ3JvdycpXG4gICAgXSwgU2VsZWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcIm1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnZmxvdycpXG4gICAgXSwgU2VsZWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImNlbGxTZWxlY3Rpb25Nb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ3NpbmdsZScpXG4gICAgXSwgU2VsZWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBTZWxlY3Rpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiY2hlY2tib3hPbmx5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgU2VsZWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcInBlcnNpc3RTZWxlY3Rpb25cIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlNlbGVjdGlvblNldHRpbmdzID0gU2VsZWN0aW9uU2V0dGluZ3M7XG4gICAgdmFyIFNlYXJjaFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFNlYXJjaFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTZWFyY2hTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU2VhcmNoU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShbXSlcbiAgICBdLCBTZWFyY2hTZXR0aW5ncy5wcm90b3R5cGUsIFwiZmllbGRzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJycpXG4gICAgXSwgU2VhcmNoU2V0dGluZ3MucHJvdG90eXBlLCBcImtleVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdjb250YWlucycpXG4gICAgXSwgU2VhcmNoU2V0dGluZ3MucHJvdG90eXBlLCBcIm9wZXJhdG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBTZWFyY2hTZXR0aW5ncy5wcm90b3R5cGUsIFwiaWdub3JlQ2FzZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuU2VhcmNoU2V0dGluZ3MgPSBTZWFyY2hTZXR0aW5ncztcbiAgICB2YXIgUm93RHJvcFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFJvd0Ryb3BTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUm93RHJvcFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSb3dEcm9wU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUm93RHJvcFNldHRpbmdzLnByb3RvdHlwZSwgXCJ0YXJnZXRJRFwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuUm93RHJvcFNldHRpbmdzID0gUm93RHJvcFNldHRpbmdzO1xuICAgIHZhciBUZXh0V3JhcFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRleHRXcmFwU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFRleHRXcmFwU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFRleHRXcmFwU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnYm90aCcpXG4gICAgXSwgVGV4dFdyYXBTZXR0aW5ncy5wcm90b3R5cGUsIFwid3JhcE1vZGVcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlRleHRXcmFwU2V0dGluZ3MgPSBUZXh0V3JhcFNldHRpbmdzO1xuICAgIHZhciBHcm91cFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyb3VwU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEdyb3VwU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dEcm9wQXJlYVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dUb2dnbGVCdXR0b25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93R3JvdXBlZENvbHVtblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd1VuZ3JvdXBCdXR0b25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJkaXNhYmxlUGFnZVdpc2VBZ2dyZWdhdGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoW10pXG4gICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJjYXB0aW9uVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkdyb3VwU2V0dGluZ3MgPSBHcm91cFNldHRpbmdzO1xuICAgIHZhciBFZGl0U2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRWRpdFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBFZGl0U2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVkaXRTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwiYWxsb3dBZGRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcImFsbG93RWRpdGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwiYWxsb3dEZWxldGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdub3JtYWwnKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwibW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJhbGxvd0VkaXRPbkRibENsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dDb25maXJtRGlhbG9nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93RGVsZXRlQ29uZmlybURpYWxvZ1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuRWRpdFNldHRpbmdzID0gRWRpdFNldHRpbmdzO1xuICAgIHZhciBHcmlkID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyaWQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyaWQob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmlzSW5pdGlhbCA9IHRydWU7XG4gICAgICAgICAgICBfdGhpcy5zb3J0ZWRDb2x1bW5zID0gW107XG4gICAgICAgICAgICBfdGhpcy5pblZpZXdJbmRleGVzID0gW107XG4gICAgICAgICAgICBfdGhpcy5tZWRpYUNvbCA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaXNNZWRpYVF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5pc0luaXRpYWxMb2FkID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5mcmVlemVSZWZyZXNoID0gZWoyX2Jhc2VfMS5Db21wb25lbnQucHJvdG90eXBlLnJlZnJlc2g7XG4gICAgICAgICAgICBfdGhpcy5tZXJnZUNlbGxzID0ge307XG4gICAgICAgICAgICBfdGhpcy5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLmZpbHRlck9wZXJhdG9ycyA9IHtcbiAgICAgICAgICAgICAgICBjb250YWluczogJ2NvbnRhaW5zJywgZW5kc1dpdGg6ICdlbmRzd2l0aCcsIGVxdWFsOiAnZXF1YWwnLCBncmVhdGVyVGhhbjogJ2dyZWF0ZXJ0aGFuJywgZ3JlYXRlclRoYW5PckVxdWFsOiAnZ3JlYXRlcnRoYW5vcmVxdWFsJyxcbiAgICAgICAgICAgICAgICBsZXNzVGhhbjogJ2xlc3N0aGFuJywgbGVzc1RoYW5PckVxdWFsOiAnbGVzc3RoYW5vcmVxdWFsJywgbm90RXF1YWw6ICdub3RlcXVhbCcsIHN0YXJ0c1dpdGg6ICdzdGFydHN3aXRoJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLmRlZmF1bHRMb2NhbGUgPSB7XG4gICAgICAgICAgICAgICAgRW1wdHlSZWNvcmQ6ICdObyByZWNvcmRzIHRvIGRpc3BsYXknLFxuICAgICAgICAgICAgICAgIFRydWU6ICd0cnVlJyxcbiAgICAgICAgICAgICAgICBGYWxzZTogJ2ZhbHNlJyxcbiAgICAgICAgICAgICAgICBJbnZhbGlkRmlsdGVyTWVzc2FnZTogJ0ludmFsaWQgRmlsdGVyIERhdGEnLFxuICAgICAgICAgICAgICAgIEdyb3VwRHJvcEFyZWE6ICdEcmFnIGEgY29sdW1uIGhlYWRlciBoZXJlIHRvIGdyb3VwIGl0cyBjb2x1bW4nLFxuICAgICAgICAgICAgICAgIFVuR3JvdXA6ICdDbGljayBoZXJlIHRvIHVuZ3JvdXAnLFxuICAgICAgICAgICAgICAgIEdyb3VwRGlzYWJsZTogJ0dyb3VwaW5nIGlzIGRpc2FibGVkIGZvciB0aGlzIGNvbHVtbicsXG4gICAgICAgICAgICAgICAgRmlsdGVyYmFyVGl0bGU6ICdcXCdzIGZpbHRlciBiYXIgY2VsbCcsXG4gICAgICAgICAgICAgICAgRW1wdHlEYXRhU291cmNlRXJyb3I6ICdEYXRhU291cmNlIG11c3Qgbm90IGJlIGVtcHR5IGF0IGluaXRpYWwgbG9hZCBzaW5jZSBjb2x1bW5zIGFyZSBnZW5lcmF0ZWQgZnJvbSBkYXRhU291cmNlIGluIEF1dG9HZW5lcmF0ZSBDb2x1bW4gR3JpZCcsXG4gICAgICAgICAgICAgICAgQWRkOiAnQWRkJyxcbiAgICAgICAgICAgICAgICBFZGl0OiAnRWRpdCcsXG4gICAgICAgICAgICAgICAgQ2FuY2VsOiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICBVcGRhdGU6ICdVcGRhdGUnLFxuICAgICAgICAgICAgICAgIERlbGV0ZTogJ0RlbGV0ZScsXG4gICAgICAgICAgICAgICAgUHJpbnQ6ICdQcmludCcsXG4gICAgICAgICAgICAgICAgUGRmZXhwb3J0OiAnUERGIEV4cG9ydCcsXG4gICAgICAgICAgICAgICAgRXhjZWxleHBvcnQ6ICdFeGNlbCBFeHBvcnQnLFxuICAgICAgICAgICAgICAgIFdvcmRleHBvcnQ6ICdXb3JkIEV4cG9ydCcsXG4gICAgICAgICAgICAgICAgQ3N2ZXhwb3J0OiAnQ1NWIEV4cG9ydCcsXG4gICAgICAgICAgICAgICAgU2VhcmNoOiAnU2VhcmNoJyxcbiAgICAgICAgICAgICAgICBTYXZlOiAnU2F2ZScsXG4gICAgICAgICAgICAgICAgSXRlbTogJ2l0ZW0nLFxuICAgICAgICAgICAgICAgIEl0ZW1zOiAnaXRlbXMnLFxuICAgICAgICAgICAgICAgIEVkaXRPcGVyYXRpb25BbGVydDogJ05vIHJlY29yZHMgc2VsZWN0ZWQgZm9yIGVkaXQgb3BlcmF0aW9uJyxcbiAgICAgICAgICAgICAgICBEZWxldGVPcGVyYXRpb25BbGVydDogJ05vIHJlY29yZHMgc2VsZWN0ZWQgZm9yIGRlbGV0ZSBvcGVyYXRpb24nLFxuICAgICAgICAgICAgICAgIFNhdmVCdXR0b246ICdTYXZlJyxcbiAgICAgICAgICAgICAgICBPS0J1dHRvbjogJ09LJyxcbiAgICAgICAgICAgICAgICBDYW5jZWxCdXR0b246ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgIEVkaXRGb3JtVGl0bGU6ICdEZXRhaWxzIG9mICcsXG4gICAgICAgICAgICAgICAgQWRkRm9ybVRpdGxlOiAnQWRkIE5ldyBSZWNvcmQnLFxuICAgICAgICAgICAgICAgIEJhdGNoU2F2ZUNvbmZpcm06ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc2F2ZSBjaGFuZ2VzPycsXG4gICAgICAgICAgICAgICAgQmF0Y2hTYXZlTG9zdENoYW5nZXM6ICdVbnNhdmVkIGNoYW5nZXMgd2lsbCBiZSBsb3N0LiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY29udGludWU/JyxcbiAgICAgICAgICAgICAgICBDb25maXJtRGVsZXRlOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIERlbGV0ZSBSZWNvcmQ/JyxcbiAgICAgICAgICAgICAgICBDYW5jZWxFZGl0OiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIENhbmNlbCB0aGUgY2hhbmdlcz8nLFxuICAgICAgICAgICAgICAgIENob29zZUNvbHVtbnM6ICdDaG9vc2UgQ29sdW1uJyxcbiAgICAgICAgICAgICAgICBTZWFyY2hDb2x1bW5zOiAnc2VhcmNoIGNvbHVtbnMnLFxuICAgICAgICAgICAgICAgIE1hdGNoczogJ05vIE1hdGNoZXMgRm91bmQnLFxuICAgICAgICAgICAgICAgIEZpbHRlckJ1dHRvbjogJ0ZpbHRlcicsXG4gICAgICAgICAgICAgICAgQ2xlYXJCdXR0b246ICdDbGVhcicsXG4gICAgICAgICAgICAgICAgU3RhcnRzV2l0aDogJ1N0YXJ0c1dpdGgnLFxuICAgICAgICAgICAgICAgIEVuZHNXaWR0aDogJ0VuZHNXaXRoJyxcbiAgICAgICAgICAgICAgICBDb250YWluczogJ0NvbnRhaW5zJyxcbiAgICAgICAgICAgICAgICBFcXVhbDogJ0VxdWFsJyxcbiAgICAgICAgICAgICAgICBOb3RFcXVhbDogJ05vdEVxdWFsJyxcbiAgICAgICAgICAgICAgICBMZXNzVGhhbjogJ0xlc3NUaGFuJyxcbiAgICAgICAgICAgICAgICBMZXNzVGhhbk9yRXF1YWw6ICdMZXNzVGhhbk9yRXF1YWwnLFxuICAgICAgICAgICAgICAgIEdyZWF0ZXJUaGFuOiAnR3JlYXRlclRoYW4nLFxuICAgICAgICAgICAgICAgIEdyZWF0ZXJUaGFuT3JFcXVhbDogJ0dyZWF0ZXJUaGFuT3JFcXVhbCcsXG4gICAgICAgICAgICAgICAgQ2hvb3NlRGF0ZTogJ0Nob29zZSBhIERhdGUnLFxuICAgICAgICAgICAgICAgIEVudGVyVmFsdWU6ICdFbnRlciB0aGUgdmFsdWUnLFxuICAgICAgICAgICAgICAgIENvcHk6ICdDb3B5JyxcbiAgICAgICAgICAgICAgICBHcm91cDogJ0dyb3VwIGJ5IHRoaXMgY29sdW1uJyxcbiAgICAgICAgICAgICAgICBVbmdyb3VwOiAnVW5ncm91cCBieSB0aGlzIGNvbHVtbicsXG4gICAgICAgICAgICAgICAgYXV0b0ZpdEFsbDogJ0F1dG8gRml0IGFsbCBjb2x1bW5zJyxcbiAgICAgICAgICAgICAgICBhdXRvRml0OiAnQXV0byBGaXQgdGhpcyBjb2x1bW4nLFxuICAgICAgICAgICAgICAgIEV4cG9ydDogJ0V4cG9ydCcsXG4gICAgICAgICAgICAgICAgRmlyc3RQYWdlOiAnRmlyc3QgUGFnZScsXG4gICAgICAgICAgICAgICAgTGFzdFBhZ2U6ICdMYXN0IFBhZ2UnLFxuICAgICAgICAgICAgICAgIFByZXZpb3VzUGFnZTogJ1ByZXZpb3VzIFBhZ2UnLFxuICAgICAgICAgICAgICAgIE5leHRQYWdlOiAnTmV4dCBQYWdlJyxcbiAgICAgICAgICAgICAgICBTb3J0QXNjZW5kaW5nOiAnU29ydCBBc2NlbmRpbmcnLFxuICAgICAgICAgICAgICAgIFNvcnREZXNjZW5kaW5nOiAnU29ydCBEZXNjZW5kaW5nJyxcbiAgICAgICAgICAgICAgICBFZGl0UmVjb3JkOiAnRWRpdCBSZWNvcmQnLFxuICAgICAgICAgICAgICAgIERlbGV0ZVJlY29yZDogJ0RlbGV0ZSBSZWNvcmQnLFxuICAgICAgICAgICAgICAgIEZpbHRlck1lbnU6ICdGaWx0ZXInLFxuICAgICAgICAgICAgICAgIENvbHVtbmNob29zZXI6ICdDb2x1bW5zJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLmtleUNvbmZpZ3MgPSB7XG4gICAgICAgICAgICAgICAgZG93bkFycm93OiAnZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICB1cEFycm93OiAndXBhcnJvdycsXG4gICAgICAgICAgICAgICAgcmlnaHRBcnJvdzogJ3JpZ2h0YXJyb3cnLFxuICAgICAgICAgICAgICAgIGxlZnRBcnJvdzogJ2xlZnRhcnJvdycsXG4gICAgICAgICAgICAgICAgc2hpZnREb3duOiAnc2hpZnQrZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdFVwOiAnc2hpZnQrdXBhcnJvdycsXG4gICAgICAgICAgICAgICAgc2hpZnRSaWdodDogJ3NoaWZ0K3JpZ2h0YXJyb3cnLFxuICAgICAgICAgICAgICAgIHNoaWZ0TGVmdDogJ3NoaWZ0K2xlZnRhcnJvdycsXG4gICAgICAgICAgICAgICAgaG9tZTogJ2hvbWUnLFxuICAgICAgICAgICAgICAgIGVuZDogJ2VuZCcsXG4gICAgICAgICAgICAgICAgZXNjYXBlOiAnZXNjYXBlJyxcbiAgICAgICAgICAgICAgICBjdHJsSG9tZTogJ2N0cmwraG9tZScsXG4gICAgICAgICAgICAgICAgY3RybEVuZDogJ2N0cmwrZW5kJyxcbiAgICAgICAgICAgICAgICBwYWdlVXA6ICdwYWdldXAnLFxuICAgICAgICAgICAgICAgIHBhZ2VEb3duOiAncGFnZWRvd24nLFxuICAgICAgICAgICAgICAgIGN0cmxBbHRQYWdlVXA6ICdjdHJsK2FsdCtwYWdldXAnLFxuICAgICAgICAgICAgICAgIGN0cmxBbHRQYWdlRG93bjogJ2N0cmwrYWx0K3BhZ2Vkb3duJyxcbiAgICAgICAgICAgICAgICBhbHRQYWdlVXA6ICdhbHQrcGFnZXVwJyxcbiAgICAgICAgICAgICAgICBhbHRQYWdlRG93bjogJ2FsdCtwYWdlZG93bicsXG4gICAgICAgICAgICAgICAgYWx0RG93bkFycm93OiAnYWx0K2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgYWx0VXBBcnJvdzogJ2FsdCt1cGFycm93JyxcbiAgICAgICAgICAgICAgICBjdHJsRG93bkFycm93OiAnY3RybCtkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIGN0cmxVcEFycm93OiAnY3RybCt1cGFycm93JyxcbiAgICAgICAgICAgICAgICBjdHJsUGx1c0E6ICdjdHJsK0EnLFxuICAgICAgICAgICAgICAgIGN0cmxQbHVzUDogJ2N0cmwrUCcsXG4gICAgICAgICAgICAgICAgaW5zZXJ0OiAnaW5zZXJ0JyxcbiAgICAgICAgICAgICAgICBkZWxldGU6ICdkZWxldGUnLFxuICAgICAgICAgICAgICAgIGYyOiAnZjInLFxuICAgICAgICAgICAgICAgIGVudGVyOiAnZW50ZXInLFxuICAgICAgICAgICAgICAgIGN0cmxFbnRlcjogJ2N0cmwrZW50ZXInLFxuICAgICAgICAgICAgICAgIHNoaWZ0RW50ZXI6ICdzaGlmdCtlbnRlcicsXG4gICAgICAgICAgICAgICAgdGFiOiAndGFiJyxcbiAgICAgICAgICAgICAgICBzaGlmdFRhYjogJ3NoaWZ0K3RhYicsXG4gICAgICAgICAgICAgICAgc3BhY2U6ICdzcGFjZScsXG4gICAgICAgICAgICAgICAgY3RybFBsdXNDOiAnY3RybCtDJyxcbiAgICAgICAgICAgICAgICBjdHJsU2hpZnRQbHVzSDogJ2N0cmwrc2hpZnQrSCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlajJfYmFzZV8yLnNldFZhbHVlKCdtZXJnZVBlcnNpc3REYXRhJywgX3RoaXMubWVyZ2VQZXJzaXN0R3JpZERhdGEsIF90aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIga2V5RW50aXR5ID0gWydwYWdlU2V0dGluZ3MnLCAnc29ydFNldHRpbmdzJyxcbiAgICAgICAgICAgICAgICAnZmlsdGVyU2V0dGluZ3MnLCAnZ3JvdXBTZXR0aW5ncycsICdjb2x1bW5zJywgJ3NlYXJjaFNldHRpbmdzJywgJ3NlbGVjdGVkUm93SW5kZXgnXTtcbiAgICAgICAgICAgIHZhciBpZ25vcmVPblBlcnNpc3QgPSB7XG4gICAgICAgICAgICAgICAgcGFnZVNldHRpbmdzOiBbJ3RlbXBsYXRlJywgJ3BhZ2VTaXplcycsICdlbmFibGVRdWVyeVN0cmluZycsICd0b3RhbFJlY29yZHNDb3VudCcsICdwYWdlQ291bnQnXSxcbiAgICAgICAgICAgICAgICBmaWx0ZXJTZXR0aW5nczogWyd0eXBlJywgJ21vZGUnLCAnc2hvd0ZpbHRlckJhclN0YXR1cycsICdpbW1lZGlhdGVNb2RlRGVsYXknXSxcbiAgICAgICAgICAgICAgICBncm91cFNldHRpbmdzOiBbJ3Nob3dEcm9wQXJlYScsICdzaG93VG9nZ2xlQnV0dG9uJywgJ3Nob3dHcm91cGVkQ29sdW1uJywgJ3Nob3dVbmdyb3VwQnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgJ2Rpc2FibGVQYWdlV2lzZUFnZ3JlZ2F0ZXMnLCAnaGlkZUNhcHRpb25Db3VudCddLFxuICAgICAgICAgICAgICAgIHNlYXJjaFNldHRpbmdzOiBbJ2ZpZWxkcycsICdvcGVyYXRvcicsICdpZ25vcmVDYXNlJ10sXG4gICAgICAgICAgICAgICAgc29ydFNldHRpbmdzOiBbXSwgY29sdW1uczogW10sIHNlbGVjdGVkUm93SW5kZXg6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGlnbm9yZU9uQ29sdW1uID0gWydmaWx0ZXInLCAnZWRpdCcsICdmaWx0ZXJCYXJUZW1wbGF0ZScsICdoZWFkZXJUZW1wbGF0ZScsICd0ZW1wbGF0ZScsXG4gICAgICAgICAgICAgICAgJ2NvbW1hbmRUZW1wbGF0ZScsICdjb21tYW5kcyddO1xuICAgICAgICAgICAga2V5RW50aXR5LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRPYmplY3QgPSBfdGhpc1t2YWx1ZV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGlnbm9yZU9uUGVyc2lzdFt2YWx1ZV07IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjdXJyZW50T2JqZWN0W3ZhbF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmlnbm9yZUluQXJyYXlzKGlnbm9yZU9uQ29sdW1uLCB0aGlzLmNvbHVtbnMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KGtleUVudGl0eSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmlnbm9yZUluQXJyYXlzID0gZnVuY3Rpb24gKGlnbm9yZU9uQ29sdW1uLCBjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaWdub3JlSW5Db2x1bW4oaWdub3JlT25Db2x1bW4sIGNvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmlnbm9yZUluQXJyYXlzKGlnbm9yZU9uQ29sdW1uLCBjb2x1bW4uY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pZ25vcmVJbkNvbHVtbihpZ25vcmVPbkNvbHVtbiwgY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuaWdub3JlSW5Db2x1bW4gPSBmdW5jdGlvbiAoaWdub3JlT25Db2x1bW4sIGNvbHVtbikge1xuICAgICAgICAgICAgaWdub3JlT25Db2x1bW4uZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGNvbHVtblt2YWxdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlcXVpcmVkTW9kdWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtb2R1bGVzID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0ZpbHRlcmluZykge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ2ZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLmZpbHRlclNldHRpbmdzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dFeGNlbEV4cG9ydCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ0V4Y2VsRXhwb3J0JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1BkZkV4cG9ydCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ1BkZkV4cG9ydCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dTb3J0aW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnc29ydCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNvcnRTZXR0aW5ncywgdGhpcy5zb3J0ZWRDb2x1bW5zLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdwYWdlcicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnBhZ2VTZXR0aW5nc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnc2VsZWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG1lbWJlcjogJ3Jlc2l6ZScsXG4gICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93UmVvcmRlcmluZykge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3Jlb3JkZXInLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93Um93RHJhZ0FuZERyb3ApIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdyb3dEcmFnQW5kRHJvcCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ2dyb3VwJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuZ3JvdXBTZXR0aW5ncywgdGhpcy5zb3J0ZWRDb2x1bW5zLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWdncmVnYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goeyBtZW1iZXI6ICdhZ2dyZWdhdGUnLCBhcmdzOiBbdGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcl0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0RldGFpbCgpKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZGV0YWlsUm93JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy50b29sYmFyIHx8IHRoaXMudG9vbGJhclRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAndG9vbGJhcicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlVmlydHVhbGl6YXRpb24gfHwgdGhpcy5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3ZpcnR1YWxzY3JvbGwnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmZyb3plbkNvbHVtbnMgfHwgdGhpcy5mcm96ZW5Sb3dzKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHsgbWVtYmVyOiAnZnJlZXplJywgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFNldHRpbmdzLmFsbG93QWRkaW5nIHx8IHRoaXMuZWRpdFNldHRpbmdzLmFsbG93RGVsZXRpbmcgfHwgdGhpcy5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZWRpdCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHRlbmRSZXF1aXJlZE1vZHVsZXMobW9kdWxlcyk7XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlcztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZXh0ZW5kUmVxdWlyZWRNb2R1bGVzID0gZnVuY3Rpb24gKG1vZHVsZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ29tbWFuZENvbHVtbih0aGlzLmNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnY29tbWFuZENvbHVtbicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGV4dE1lbnVJdGVtcykge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ2NvbnRleHRNZW51JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Q29sdW1uTWVudSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ2NvbHVtbk1lbnUnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IG5ldyBzZXJ2aWNlX2xvY2F0b3JfMS5TZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNlcnZpY2VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyh0aGlzLmVsZW1lbnQsIHsgcm9sZTogJ2dyaWQnIH0pO1xuICAgICAgICAgICAgZWoyX3BvcHVwc18xLmNyZWF0ZVNwaW5uZXIoeyB0YXJnZXQ6IHRoaXMuZWxlbWVudCB9KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlID0gbmV3IHJlbmRlcl8xLlJlbmRlcih0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0TWVkaWFDb2x1bW5zKCk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaE1vZHVsZSA9IG5ldyBzZWFyY2hfMS5TZWFyY2godGhpcyk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZSA9IG5ldyBzY3JvbGxfMS5TY3JvbGwodGhpcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Q29sdW1uQ2hvb3Nlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uQ2hvb3Nlck1vZHVsZSA9IG5ldyBjb2x1bW5fY2hvb3Nlcl8xLkNvbHVtbkNob29zZXIodGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5pdGlhbExvYWQsIHt9KTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihldmVudHMubG9hZCk7XG4gICAgICAgICAgICB1dGlsXzEucHJlcGFyZUNvbHVtbnModGhpcy5jb2x1bW5zLCB0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzTW9kZWwoKTtcbiAgICAgICAgICAgIHRoaXMuZ3JpZFJlbmRlcigpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURlZmF1bHRDdXJzb3IoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd1NwaW5uZXIoKTtcbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbml0aWFsRW5kLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNob3dTcGlubmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX3BvcHVwc18xLnNob3dTcGlubmVyKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmhpZGVTcGlubmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX3BvcHVwc18xLmhpZGVTcGlubmVyKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldE1lZGlhQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBnY29sID0gdGhpcy5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTaG93SGlkZVNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3Nob3dIaWRlU2VydmljZScpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChnY29sKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgZ2NvbC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChnY29sW2luZGV4XS5oaWRlQXRNZWRpYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lZGlhQ29sLnB1c2goZ2NvbFtpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhKGdjb2xbaW5kZXhdLmhpZGVBdE1lZGlhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lZGlhUXVlcnlVcGRhdGUoaW5kZXgsIG1lZGlhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5hZGRMaXN0ZW5lcih0aGlzLm1lZGlhUXVlcnlVcGRhdGUuYmluZCh0aGlzLCBpbmRleCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5tZWRpYVF1ZXJ5VXBkYXRlID0gZnVuY3Rpb24gKGNvbHVtbkluZGV4LCBlKSB7XG4gICAgICAgICAgICB0aGlzLmlzTWVkaWFRdWVyeSA9IHRydWU7XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5nZXRDb2x1bW5zKClbY29sdW1uSW5kZXhdO1xuICAgICAgICAgICAgY29sLnZpc2libGUgPSBlLm1hdGNoZXM7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxMb2FkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVyLnNob3coY29sLmhlYWRlclRleHQsICdoZWFkZXJUZXh0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dIaWRlci5oaWRlKGNvbC5oZWFkZXJUZXh0LCAnaGVhZGVyVGV4dCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVmcmVzaE1lZGlhQ29sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNZWRpYVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc01lZGlhUXVlcnkgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsTG9hZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmV2ZW50SW5pdGlhbGl6ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmRlc3Ryb3ksIHt9KTtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveURlcGVuZGVudE1vZHVsZXMoKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5lbGVtZW50LCBbXSwgWydlLXJ0bCcsICdlLWdyaWRob3ZlcicsICdlLXJlc3BvbnNpdmUnLCAnZS1kZWZhdWx0JywgJ2UtZGV2aWNlJ10pO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kZXN0cm95RGVwZW5kZW50TW9kdWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c01vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2dyaWQnO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICB2YXIgcmVxdWlyZVJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciByZXF1aXJlR3JpZFJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBjaGVja0N1cnNvcjtcbiAgICAgICAgICAgIHZhciBhcmdzID0geyByZXF1ZXN0VHlwZTogJ3JlZnJlc2gnIH07XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dQYWdpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3BhZ2VyJywgZW5hYmxlOiB0aGlzLmFsbG93UGFnaW5nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhZ2VTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdwYWdlcicsIHByb3BlcnRpZXM6IG5ld1Byb3AucGFnZVNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQobmV3UHJvcC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UpICYmIGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQobmV3UHJvcC5wYWdlU2V0dGluZ3MudG90YWxSZWNvcmRzQ291bnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xvY2FsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsZU9iai5zZXRMb2NhbGUobmV3UHJvcC5sb2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2Uuc2V0Q3VsdHVyZShuZXdQcm9wLmxvY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sYmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3Rvb2xiYXInIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93U29ydGluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAnc29ydCcsIGVuYWJsZTogdGhpcy5hbGxvd1NvcnRpbmcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0N1cnNvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dGaWx0ZXJpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ2ZpbHRlcicsIGVuYWJsZTogdGhpcy5hbGxvd0ZpbHRlcmluZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICd3aWR0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAnc2Nyb2xsJywgcHJvcGVydGllczogeyB3aWR0aDogbmV3UHJvcC53aWR0aCwgaGVpZ2h0OiBuZXdQcm9wLmhlaWdodCB9IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93UmVvcmRlcmluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAncmVvcmRlcicsIGVuYWJsZTogdGhpcy5hbGxvd1Jlb3JkZXJpbmcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0N1cnNvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dSb3dEcmFnQW5kRHJvcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAncm93RHJhZ0FuZERyb3AnLCBlbmFibGU6IHRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdyb3dUZW1wbGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd1RlbXBsYXRlRm4gPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLnJvd1RlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdkZXRhaWxUZW1wbGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGFpbFRlbXBsYXRlRm4gPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLmRldGFpbFRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0dyb3VwaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdncm91cCcsIGVuYWJsZTogdGhpcy5hbGxvd0dyb3VwaW5nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUucmVmcmVzaFVJKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0N1cnNvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2hpbGRHcmlkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0b29sYmFyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICd0b29sYmFyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdncm91cFNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQobmV3UHJvcC5ncm91cFNldHRpbmdzLnNob3dEcm9wQXJlYSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUucmVmcmVzaFVJKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ2dyb3VwJywgcHJvcGVydGllczogbmV3UHJvcC5ncm91cFNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FnZ3JlZ2F0ZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ2FnZ3JlZ2F0ZScsIHByb3BlcnRpZXM6IG5ld1Byb3AgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29sdW1ucyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbk9iamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZUdyaWRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmcm96ZW5Db2x1bW5zJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZnJvemVuUm93cyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyZWV6ZVJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRlZFByb3BlcnR5Q2hhbmdlKHByb3AsIG5ld1Byb3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGVja0N1cnNvcikge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGVmYXVsdEN1cnNvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVpcmVHcmlkUmVmcmVzaCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVxdWlyZVJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCBhcmdzKTtcbiAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5leHRlbmRlZFByb3BlcnR5Q2hhbmdlID0gZnVuY3Rpb24gKHByb3AsIG5ld1Byb3ApIHtcbiAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZVJ0bCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUlRMKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBhZ2VyJykuZWoyX2luc3RhbmNlc1swXS5lbmFibGVSdGwgPSBuZXdQcm9wLmVuYWJsZVJ0bDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcGFnZXInKS5lajJfaW5zdGFuY2VzWzBdLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVpZ2h0ICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLnJlbW92ZVBhZGRpbmcoIW5ld1Byb3AuZW5hYmxlUnRsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLnNldFBhZGRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sYmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXJNb2R1bGUuZ2V0VG9vbGJhcigpLmVqMl9pbnN0YW5jZXNbMF0uZW5hYmxlUnRsID0gbmV3UHJvcC5lbmFibGVSdGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXJNb2R1bGUuZ2V0VG9vbGJhcigpLmVqMl9pbnN0YW5jZXNbMF0uZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250ZXh0TWVudUl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51TW9kdWxlLmdldENvbnRleHRNZW51KCkuZWoyX2luc3RhbmNlc1swXS5lbmFibGVSdGwgPSBuZXdQcm9wLmVuYWJsZVJ0bDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnVNb2R1bGUuZ2V0Q29udGV4dE1lbnUoKS5lajJfaW5zdGFuY2VzWzBdLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbk1lbnUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudU1vZHVsZS5nZXRDb2x1bW5NZW51KCkuZWoyX2luc3RhbmNlc1swXS5lbmFibGVSdGwgPSBuZXdQcm9wLmVuYWJsZVJ0bDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudU1vZHVsZS5nZXRDb2x1bW5NZW51KCkuZWoyX2luc3RhbmNlc1swXS5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZUFsdFJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dSZXNpemluZyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdncmlkTGluZXMnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUdyaWRMaW5lcygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmaWx0ZXJTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ2ZpbHRlcicsIHByb3BlcnRpZXM6IG5ld1Byb3AuZmlsdGVyU2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NlYXJjaFNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnc2VhcmNoJywgcHJvcGVydGllczogbmV3UHJvcC5zZWFyY2hTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydFNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnc29ydCcgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdGlvblNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnc2VsZWN0aW9uJywgcHJvcGVydGllczogbmV3UHJvcC5zZWxlY3Rpb25TZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZWRpdFNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnZWRpdCcsIHByb3BlcnRpZXM6IG5ld1Byb3AuZWRpdFNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1RleHRXcmFwJzpcbiAgICAgICAgICAgICAgICBjYXNlICd0ZXh0V3JhcFNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dUZXh0V3JhcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVRleHRXcmFwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVRleHRXcmFwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0YVNvdXJjZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5kYXRhU291cmNlTW9kaWZpZWQsIHt9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVIb3Zlcic6XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSBuZXdQcm9wLmVuYWJsZUhvdmVyID8gZWoyX2Jhc2VfMy5hZGRDbGFzcyA6IGVqMl9iYXNlXzMucmVtb3ZlQ2xhc3M7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbihbdGhpcy5lbGVtZW50XSwgJ2UtZ3JpZGhvdmVyJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51cGRhdGVEZWZhdWx0Q3Vyc29yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlclJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jb2x1bW5oZWFkZXInKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGhlYWRlclJvd3NfMSA9IGhlYWRlclJvd3M7IF9pIDwgaGVhZGVyUm93c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBoZWFkZXJSb3dzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93U29ydGluZyB8fCB0aGlzLmFsbG93R3JvdXBpbmcgfHwgdGhpcy5hbGxvd1Jlb3JkZXJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNsYXNzTGlzdC5yZW1vdmUoJ2UtZGVmYXVsdGN1cnNvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2UtZGVmYXVsdGN1cnNvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlQ29sdW1uTW9kZWwgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uc1tpXS5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sdW1uTW9kZWwoY29sdW1uc1tpXS5jb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTW9kZWwucHVzaChjb2x1bW5zW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGludmlldyA9IHRoaXMuaW5WaWV3SW5kZXhlcy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYgLSBfdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyB9KS5maWx0ZXIoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYgPiAtMTsgfSk7XG4gICAgICAgICAgICB2YXIgdkxlbiA9IGludmlldy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gfHwgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbHVtbk1vZGVsKSB8fCB0aGlzLmNvbHVtbk1vZGVsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTW9kZWwgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbk1vZGVsKHRoaXMuY29sdW1ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHZMZW4gPT09IDAgPyB0aGlzLmNvbHVtbk1vZGVsIDpcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1vZGVsLnNsaWNlKGludmlld1swXSwgaW52aWV3W3ZMZW4gLSAxXSArIDEpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbnM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkluZGV4ZXNJblZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pblZpZXdJbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRMb2NhbGVDb25zdGFudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0TG9jYWxlO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRDb2x1bW5JbmRleGVzSW5WaWV3ID0gZnVuY3Rpb24gKGluZGV4ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuaW5WaWV3SW5kZXhlcyA9IGluZGV4ZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFZpc2libGVDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmNvbHVtbk1vZGVsOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHMucHVzaChjb2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2xzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRIZWFkZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyTW9kdWxlLmdldFBhbmVsKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEdyaWRIZWFkZXJDb250ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnNldFBhbmVsKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb250ZW50VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TW9kdWxlLmdldFRhYmxlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEdyaWRDb250ZW50VGFibGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50TW9kdWxlLnNldFRhYmxlKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1vZHVsZS5nZXRQYW5lbCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkQ29udGVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRNb2R1bGUuc2V0UGFuZWwoZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldEhlYWRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyTW9kdWxlLmdldFRhYmxlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEdyaWRIZWFkZXJUYWJsZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5zZXRUYWJsZShlbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Rm9vdGVyQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZm9vdGVyRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvb3RlckVsZW1lbnQgPSB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1ncmlkZm9vdGVyJylbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb290ZXJFbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRGb290ZXJDb250ZW50VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmZvb3RlckVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb290ZXJFbGVtZW50ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZ3JpZGZvb3RlcicpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9vdGVyRWxlbWVudC5maXJzdENoaWxkLmZpcnN0Q2hpbGQ7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFBhZ2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZFBhZ2VyO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkUGFnZXIgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5ncmlkUGFnZXIgPSBlbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRSb3dCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TW9kdWxlLmdldFJvd0J5SW5kZXgoaW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1vZHVsZS5nZXRSb3dFbGVtZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXREYXRhUm93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW4pO1xuICAgICAgICAgICAgdmFyIGRhdGFSb3dzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1yb3cnKSAmJiAhcm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGlkZGVucm93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVJvd3MucHVzaChyb3dzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YVJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENlbGxGcm9tSW5kZXggPSBmdW5jdGlvbiAocm93SW5kZXgsIGNvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhUm93cygpW3Jvd0luZGV4XS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJylbY29sdW1uSW5kZXhdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5IZWFkZXJCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWhlYWRlcmNlbGwnKVtpbmRleF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFJvd09iamVjdEZyb21VSUQgPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5jb250ZW50TW9kdWxlLmdldFJvd3MoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChyb3cudWlkID09PSB1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93c09iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0Um93cygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2x1bW5IZWFkZXJCeVVpZCh0aGlzLmdldENvbHVtbkJ5RmllbGQoZmllbGQpLnVpZCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkhlYWRlckJ5VWlkID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWQ9JyArIHVpZCArICddJykucGFyZW50RWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uQnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkluZGV4QnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgICAgICByZXR1cm4gIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpID8gaW5kZXggOiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uQnlVaWQgPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleEJ5VWlkID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgIHJldHVybiAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChpbmRleCkgPyBpbmRleCA6IC0xO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRVaWRCeUNvbHVtbkZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udWlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0Q29sdW1uSW5kZXhCeVVpZCh1aWQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGluZGV4ICs9IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5GaWVsZE5hbWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbk5hbWVzID0gW107XG4gICAgICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuZ2V0Q29sdW1ucygpLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gdGhpcy5nZXRDb2x1bW5zKClbaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbk5hbWVzLnB1c2goY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uTmFtZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFJvd1RlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93VGVtcGxhdGVGbjtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0RGV0YWlsVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZXRhaWxUZW1wbGF0ZUZuO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRQcmltYXJ5S2V5RmllbGROYW1lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgPSAwLCBjb2wgPSB0aGlzLmNvbHVtbnMsIGNMZW4gPSBjb2wubGVuZ3RoOyBrZXkgPCBjTGVuOyBrZXkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2xba2V5XS5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKGNvbFtrZXldLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWZyZXNoSGVhZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUucmVmcmVzaFVJKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFNlbGVjdGVkUm93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZHVsZSA/IHRoaXMuc2VsZWN0aW9uTW9kdWxlLnNlbGVjdGVkUmVjb3JkcyA6IFtdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRTZWxlY3RlZFJvd0luZGV4ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2R1bGUgPyB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZFJvd0luZGV4ZXMgOiBbXTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZFJvd0NlbGxJbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRTZWxlY3RlZFJlY29yZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2R1bGUuZ2V0U2VsZWN0ZWRSZWNvcmRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldERhdGFNb2R1bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJNb2R1bGUuZGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2hvd0NvbHVtbnMgPSBmdW5jdGlvbiAoa2V5cywgc2hvd0J5KSB7XG4gICAgICAgICAgICBzaG93QnkgPSBzaG93QnkgPyBzaG93QnkgOiAnaGVhZGVyVGV4dCc7XG4gICAgICAgICAgICB0aGlzLnNob3dIaWRlci5zaG93KGtleXMsIHNob3dCeSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmhpZGVDb2x1bW5zID0gZnVuY3Rpb24gKGtleXMsIGhpZGVCeSkge1xuICAgICAgICAgICAgaGlkZUJ5ID0gaGlkZUJ5ID8gaGlkZUJ5IDogJ2hlYWRlclRleHQnO1xuICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuaGlkZShrZXlzLCBoaWRlQnkpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nb1RvUGFnZSA9IGZ1bmN0aW9uIChwYWdlTm8pIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZ29Ub1BhZ2UocGFnZU5vKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlRXh0ZXJuYWxNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUudXBkYXRlRXh0ZXJuYWxNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zb3J0Q29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIGRpcmVjdGlvbiwgaXNNdWx0aVNvcnQpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydE1vZHVsZS5zb3J0Q29sdW1uKGNvbHVtbk5hbWUsIGRpcmVjdGlvbiwgaXNNdWx0aVNvcnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jbGVhclNvcnRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRNb2R1bGUuY2xlYXJTb3J0aW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbW92ZVNvcnRDb2x1bW4gPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydE1vZHVsZS5yZW1vdmVTb3J0Q29sdW1uKGZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZmlsdGVyQnlDb2x1bW4gPSBmdW5jdGlvbiAoZmllbGROYW1lLCBmaWx0ZXJPcGVyYXRvciwgZmlsdGVyVmFsdWUsIHByZWRpY2F0ZSwgbWF0Y2hDYXNlLCBhY3R1YWxGaWx0ZXJWYWx1ZSwgYWN0dWFsT3BlcmF0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyTW9kdWxlLmZpbHRlckJ5Q29sdW1uKGZpZWxkTmFtZSwgZmlsdGVyT3BlcmF0b3IsIGZpbHRlclZhbHVlLCBwcmVkaWNhdGUsIG1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWUsIGFjdHVhbE9wZXJhdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY2xlYXJGaWx0ZXJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5jbGVhckZpbHRlcmluZygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkLCBpc0NsZWFyRmlsdGVyQmFyKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkKGZpZWxkLCBpc0NsZWFyRmlsdGVyQmFyKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2VsZWN0Um93ID0gZnVuY3Rpb24gKGluZGV4LCBpc1RvZ2dsZSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0Um93KGluZGV4LCBpc1RvZ2dsZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNlbGVjdFJvd3MgPSBmdW5jdGlvbiAocm93SW5kZXhlcykge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0Um93cyhyb3dJbmRleGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZHVsZS5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZWxlY3RDZWxsID0gZnVuY3Rpb24gKGNlbGxJbmRleCwgaXNUb2dnbGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kdWxlLnNlbGVjdENlbGwoY2VsbEluZGV4LCBpc1RvZ2dsZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2hTdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoTW9kdWxlLnNlYXJjaChzZWFyY2hTdHJpbmcpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5wcmludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJpbnRNb2R1bGUucHJpbnQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlbGV0ZVJlY29yZChmaWVsZG5hbWUsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuc3RhcnRFZGl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuY2xvc2VFZGl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuYWRkUmVjb3JkKGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kZWxldGVSb3cgPSBmdW5jdGlvbiAodHIpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5kZWxldGVSb3codHIpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKHdpdGhIZWFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY2xpcGJvYXJkTW9kdWxlLmNvcHkod2l0aEhlYWRlcik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlY2FsY0luZGVudFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKCF0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggJiYgIXRoaXMuaXNEZXRhaWwoKSkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykuZ2V0QXR0cmlidXRlKCdpbmRlbnRSZWZyZXNoZWQnKSB8fFxuICAgICAgICAgICAgICAgICF0aGlzLmdldENvbnRlbnRUYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGluZGVudFdpZHRoID0gdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWVtcHR5Y2VsbCcpLnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQ29sID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50Q29sID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICB2YXIgcGVyUGl4ZWwgPSBpbmRlbnRXaWR0aCAvIDMwO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgaWYgKHBlclBpeGVsID49IDEpIHtcbiAgICAgICAgICAgICAgICBpbmRlbnRXaWR0aCA9ICgzMCAvIHBlclBpeGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaW5kZW50V2lkdGggPSAzMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChpIDwgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29sW2ldLnN0eWxlLndpZHRoID0gaW5kZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRDb2xbaV0uc3R5bGUud2lkdGggPSBpbmRlbnRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmNvbHVtbldpZHRoQ2hhbmdlZCwgeyBpbmRleDogaSwgd2lkdGg6IGluZGVudFdpZHRoIH0pO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJDb2xbaV0uc3R5bGUud2lkdGggPSBpbmRlbnRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgY29udGVudENvbFtpXS5zdHlsZS53aWR0aCA9IGluZGVudFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkLCB7IGluZGV4OiBpLCB3aWR0aDogaW5kZW50V2lkdGggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykuc2V0QXR0cmlidXRlKCdpbmRlbnRSZWZyZXNoZWQnLCAndHJ1ZScpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW9yZGVyQ29sdW1ucyA9IGZ1bmN0aW9uIChmcm9tRk5hbWUsIHRvRk5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVvcmRlck1vZHVsZS5yZW9yZGVyQ29sdW1ucyhmcm9tRk5hbWUsIHRvRk5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5hdXRvRml0Q29sdW1ucyA9IGZ1bmN0aW9uIChmaWVsZE5hbWVzKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU1vZHVsZS5hdXRvRml0Q29sdW1ucyhmaWVsZE5hbWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY3JlYXRlQ29sdW1uY2hvb3NlciA9IGZ1bmN0aW9uICh4LCB5LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uQ2hvb3Nlck1vZHVsZS5yZW5kZXJDb2x1bW5DaG9vc2VyKHgsIHksIHRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmluaXRpYWxpemVTZXJ2aWNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3dpZHRoU2VydmljZScsIHRoaXMud2lkdGhTZXJ2aWNlID0gbmV3IHdpZHRoX2NvbnRyb2xsZXJfMS5Db2x1bW5XaWR0aFNlcnZpY2UodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvci5yZWdpc3RlcignY2VsbFJlbmRlcmVyRmFjdG9yeScsIG5ldyBjZWxsX3JlbmRlcl9mYWN0b3J5XzEuQ2VsbFJlbmRlcmVyRmFjdG9yeSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdyZW5kZXJlckZhY3RvcnknLCBuZXcgcmVuZGVyZXJfZmFjdG9yeV8xLlJlbmRlcmVyRmFjdG9yeSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdsb2NhbGl6YXRpb24nLCB0aGlzLmxvY2FsZU9iaiA9IG5ldyBlajJfYmFzZV80LkwxMG4odGhpcy5nZXRNb2R1bGVOYW1lKCksIHRoaXMuZGVmYXVsdExvY2FsZSwgdGhpcy5sb2NhbGUpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3ZhbHVlRm9ybWF0dGVyJywgdGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2UgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIodGhpcy5sb2NhbGUpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3Nob3dIaWRlU2VydmljZScsIHRoaXMuc2hvd0hpZGVyID0gbmV3IHNob3dfaGlkZV8xLlNob3dIaWRlKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ2FyaWFTZXJ2aWNlJywgdGhpcy5hcmlhU2VydmljZSA9IG5ldyBhcmlhX3NlcnZpY2VfMS5BcmlhU2VydmljZSgpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ2ZvY3VzJywgdGhpcy5mb2N1c01vZHVsZSA9IG5ldyBmb2N1c19zdHJhdGVneV8xLkZvY3VzU3RyYXRlZ3kodGhpcykpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5wcm9jZXNzTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ0NvbHMgPSB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBzQ29scyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmxhZztcbiAgICAgICAgICAgIHZhciBqO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGksIGxlbikge1xuICAgICAgICAgICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgc0xlbiA9IHNDb2xzLmxlbmd0aDsgaiA8IHNMZW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNDb2xzW2pdLmZpZWxkID09PSBnQ29sc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmxhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc0NvbHMucHVzaCh7IGZpZWxkOiBnQ29sc1tpXSwgZGlyZWN0aW9uOiAnYXNjZW5kaW5nJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzXzEuYWxsb3dTb3J0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLnNvcnRlZENvbHVtbnMucHVzaChzQ29sc1tqXS5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzQ29sc1tqXS5kaXJlY3Rpb24gPSAnYXNjZW5kaW5nJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXNfMS5ncm91cFNldHRpbmdzLnNob3dHcm91cGVkQ29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpc18xLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEuY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQgPT09IGdDb2xzW2ldOyB9KVswXSA6IHRoaXNfMS5nZXRDb2x1bW5CeUZpZWxkKGdDb2xzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbi52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciB0aGlzXzEgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnQ29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBfbG9vcF8xKGksIGxlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3dUZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5yb3dUZW1wbGF0ZSk7XG4gICAgICAgICAgICB0aGlzLmRldGFpbFRlbXBsYXRlRm4gPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLmRldGFpbFRlbXBsYXRlKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBhcmVudERldGFpbHMpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBhcmVudERldGFpbHMucGFyZW50S2V5RmllbGRWYWx1ZSkgPyAndW5kZWZpbmVkJyA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RGV0YWlscy5wYXJlbnRLZXlGaWVsZFZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMucXVlcnkud2hlcmUodGhpcy5xdWVyeVN0cmluZywgJ2VxdWFsJywgdmFsdWUsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5ncmlkUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUhvdmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtZ3JpZGhvdmVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtZGV2aWNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmVsZW1lbnQsIFsnZS1yZXNwb25zaXZlJywgJ2UtZGVmYXVsdCddLCBbXSk7XG4gICAgICAgICAgICB2YXIgcmVuZGVyZXJGYWN0b3J5ID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlID0gcmVuZGVyZXJGYWN0b3J5LmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkhlYWRlcik7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRNb2R1bGUgPSByZW5kZXJlckZhY3RvcnkuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCk7XG4gICAgICAgICAgICB0aGlzLnByaW50TW9kdWxlID0gbmV3IHByaW50XzEuUHJpbnQodGhpcywgdGhpcy5zY3JvbGxNb2R1bGUpO1xuICAgICAgICAgICAgdGhpcy5jbGlwYm9hcmRNb2R1bGUgPSBuZXcgY2xpcGJvYXJkXzEuQ2xpcGJvYXJkKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUucmVuZGVyKCk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50SW5pdGlhbGl6ZXIoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlR3JpZFBvcFVwRWxlbWVudCgpO1xuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2Uuc2V0V2lkdGhUb0NvbHVtbnMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlR3JpZExpbmVzKCk7XG4gICAgICAgICAgICB0aGlzLmFwcGx5VGV4dFdyYXAoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGF0YVJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUuc2V0V2lkdGgoKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLnNldEhlaWdodCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGVpZ2h0ICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5zZXRQYWRkaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZVJUTCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtcnRsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNyZWF0ZUdyaWRQb3BVcEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcG9wdXAgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkcG9wdXAnLCBzdHlsZXM6ICdkaXNwbGF5Om5vbmU7JyB9KTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtY29udGVudCcsIGF0dHJzOiB7IHRhYkluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFwcGVuZChbY29udGVudCwgZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtdXB0YWlsIGUtdGFpbCcgfSldLCBwb3B1cCk7XG4gICAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnc3BhbicpKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXBwZW5kKFtjb250ZW50LCBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1kb3dudGFpbCBlLXRhaWwnIH0pXSwgcG9wdXApO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHBvcHVwKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlR3JpZExpbmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5lbGVtZW50LCBbXSwgWydlLXZlcnRpY2FsbGluZXMnLCAnZS1ob3Jpem9udGFsbGluZXMnLCAnZS1oaWRlbGluZXMnLCAnZS1ib3RobGluZXMnXSk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZ3JpZExpbmVzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnaG9yaXpvbnRhbCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWhvcml6b250YWxsaW5lcycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd2ZXJ0aWNhbCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXZlcnRpY2FsbGluZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbm9uZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWhpZGVsaW5lcycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib3RoJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtYm90aGxpbmVzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5hcHBseVRleHRXcmFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dUZXh0V3JhcCkge1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJSb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY29sdW1uaGVhZGVyJykpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy50ZXh0V3JhcFNldHRpbmdzLndyYXBNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlYWRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZ2V0Q29udGVudCgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcChoZWFkZXJSb3dzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjb250ZW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZ2V0Q29udGVudCgpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZWxlbWVudCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAoaGVhZGVyUm93cywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmVsZW1lbnQsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5nZXRDb250ZW50KCksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKGhlYWRlclJvd3MsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbW92ZVRleHRXcmFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5lbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNvbHVtbmhlYWRlcicpKTtcbiAgICAgICAgICAgIHV0aWxfMS53cmFwKGhlYWRlclJvd3MsIGZhbHNlKTtcbiAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZ2V0Q29udGVudCgpLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlZnJlc2hUb29sdGlwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoO1xuICAgICAgICAgICAgdmFyIGhlYWRlclRhYmxlID0gdGhpcy5nZXRIZWFkZXJUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRUYWJsZSA9IHRoaXMuZ2V0Q29udGVudFRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRGl2VGFnID0gJ2UtZ3JpZGhlYWRlcic7XG4gICAgICAgICAgICB2YXIgY29udGVudERpdlRhZyA9ICdlLWdyaWRjb250ZW50JztcbiAgICAgICAgICAgIHZhciBodGFibGUgPSB0aGlzLmNyZWF0ZVRhYmxlKGhlYWRlclRhYmxlLCBoZWFkZXJEaXZUYWcsICdoZWFkZXInKTtcbiAgICAgICAgICAgIHZhciBjdGFibGUgPSB0aGlzLmNyZWF0ZVRhYmxlKGhlYWRlclRhYmxlLCBoZWFkZXJEaXZUYWcsICdjb250ZW50Jyk7XG4gICAgICAgICAgICB2YXIgYWxsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWVsbGlwc2lzdG9vbHRpcCcpO1xuICAgICAgICAgICAgdmFyIGFsbGVsZSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbGwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhbGxlbGVbaV0gPSBhbGxbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbGxlbGUuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gaGVhZGVyVGFibGUuY29udGFpbnMoZWxlbWVudCkgPyBodGFibGUgOiBjdGFibGU7XG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IGhlYWRlclRhYmxlLmNvbnRhaW5zKGVsZW1lbnQpID8gJ3RoJyA6ICd0cic7XG4gICAgICAgICAgICAgICAgdGFibGUucXVlcnlTZWxlY3RvcihlbGUpLmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lO1xuICAgICAgICAgICAgICAgIHRhYmxlLnF1ZXJ5U2VsZWN0b3IoZWxlKS5pbm5lckhUTUwgPSBlbGVtZW50LmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoZWxlKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgICAgICBpZiAod2lkdGggPiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS10b29sdGlwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvb2x0aXAgPSBuZXcgZWoyX3BvcHVwc18xLlRvb2x0aXAoeyBjb250ZW50OiBlbGVtZW50LmlubmVySFRNTCB9LCBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAod2lkdGggPCBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXRvb2x0aXAnKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmVqMl9pbnN0YW5jZXNbMF0uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChodGFibGUpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChjdGFibGUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jcmVhdGVUYWJsZSA9IGZ1bmN0aW9uICh0YWJsZSwgdGFnLCB0eXBlKSB7XG4gICAgICAgICAgICB2YXIgbXlUYWJsZURpdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBteVRhYmxlRGl2LmNsYXNzTmFtZSA9IHRoaXMuZWxlbWVudC5jbGFzc05hbWU7XG4gICAgICAgICAgICBteVRhYmxlRGl2LnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTogaW5saW5lLWJsb2NrO3Zpc2liaWxpdHk6aGlkZGVuO3Bvc2l0aW9uOmFic29sdXRlJztcbiAgICAgICAgICAgIHZhciBteVN1YkRpdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBteVN1YkRpdi5jbGFzc05hbWUgPSB0YWc7XG4gICAgICAgICAgICB2YXIgbXlUYWJsZSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgICAgICAgICAgIG15VGFibGUuY2xhc3NOYW1lID0gdGFibGUuY2xhc3NOYW1lO1xuICAgICAgICAgICAgbXlUYWJsZS5zdHlsZS5jc3NUZXh0ID0gJ3RhYmxlLWxheW91dDogYXV0bzt3aWR0aDogYXV0byc7XG4gICAgICAgICAgICB2YXIgZWxlID0gKHR5cGUgPT09ICdoZWFkZXInKSA/ICd0aCcgOiAndGQnO1xuICAgICAgICAgICAgdmFyIG15VHIgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICB2YXIgbXl0ZCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudChlbGUpO1xuICAgICAgICAgICAgbXlUci5hcHBlbmRDaGlsZChteXRkKTtcbiAgICAgICAgICAgIG15VGFibGUuYXBwZW5kQ2hpbGQobXlUcik7XG4gICAgICAgICAgICBteVN1YkRpdi5hcHBlbmRDaGlsZChteVRhYmxlKTtcbiAgICAgICAgICAgIG15VGFibGVEaXYuYXBwZW5kQ2hpbGQobXlTdWJEaXYpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChteVRhYmxlRGl2KTtcbiAgICAgICAgICAgIHJldHVybiBteVRhYmxlRGl2O1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAndG91Y2hlbmQnLCB0aGlzLm1vdXNlQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdmb2N1c291dCcsIHRoaXMuZm9jdXNPdXRIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmdldENvbnRlbnQoKSwgJ2RibGNsaWNrJywgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dLZXlib2FyZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50YWJJbmRleCA9IHRoaXMuZWxlbWVudC50YWJJbmRleCA9PT0gLTEgPyAwIDogdGhpcy5lbGVtZW50LnRhYkluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5rZXlib2FyZE1vZHVsZSA9IG5ldyBlajJfYmFzZV81LktleWJvYXJkRXZlbnRzKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGtleUFjdGlvbjogdGhpcy5rZXlBY3Rpb25IYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAga2V5Q29uZmlnczogdGhpcy5rZXlDb25maWdzLFxuICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogJ2tleWRvd24nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAndG91Y2hlbmQnLCB0aGlzLm1vdXNlQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdmb2N1c291dCcsIHRoaXMuZm9jdXNPdXRIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuZGF0YVJlYWR5LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5yZWNhbGNJbmRlbnRXaWR0aCwgdGhpcyk7XG4gICAgICAgICAgICBbZXZlbnRzLnVwZGF0ZURhdGEsIGV2ZW50cy5tb2RlbENoYW5nZWQsIGV2ZW50cy5jb250ZW50UmVhZHksIGV2ZW50cy5jb2x1bW5XaWR0aENoYW5nZWRdLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9uKGV2ZW50LCBfdGhpcy5yZWZyZXNoVG9vbHRpcCwgX3RoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVjYWxjSW5kZW50V2lkdGgsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5kYXRhQm91bmRGdW5jdGlvbiA9IHRoaXMucmVmcmVzaE1lZGlhQ29sLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5kYXRhQm91bmRGdW5jdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vZmYoZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5kYXRhUmVhZHkpO1xuICAgICAgICAgICAgdGhpcy5vZmYoZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5yZWNhbGNJbmRlbnRXaWR0aCk7XG4gICAgICAgICAgICBbZXZlbnRzLnVwZGF0ZURhdGEsIGV2ZW50cy5tb2RlbENoYW5nZWQsIGV2ZW50cy5jb250ZW50UmVhZHksIGV2ZW50cy5jb2x1bW5XaWR0aENoYW5nZWRdLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9mZihldmVudCwgX3RoaXMucmVmcmVzaFRvb2x0aXApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlY2FsY0luZGVudFdpZHRoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLmRhdGFCb3VuZEZ1bmN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q3VycmVudFZpZXdSZWNvcmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmFsbG93R3JvdXBpbmcgJiYgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEucmVjb3JkcyA6IHRoaXMuY3VycmVudFZpZXdEYXRhO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5tb3VzZUNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSB8fCAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZHBvcHVwJykgJiYgZS50b3VjaGVzKSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jbG9uZXByb3BlcnRpZXMnKS5sZW5ndGggfHwgdGhpcy5jaGVja0VkaXQoZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKCghdGhpcy5hbGxvd1Jvd0RyYWdBbmREcm9wICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRjb250ZW50JykpIHx8XG4gICAgICAgICAgICAgICAgKCEodGhpcy5hbGxvd0dyb3VwaW5nIHx8IHRoaXMuYWxsb3dSZW9yZGVyaW5nKSAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkaGVhZGVyJykpKSAmJiBlLnRvdWNoZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGhlYWRlcicpICYmIHRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5jbGljaywgZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNoZWNrRWRpdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdHIgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3cnKTtcbiAgICAgICAgICAgIHZhciBpc0VkaXQgPSB0aGlzLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmXG4gICAgICAgICAgICAgICAgdGhpcy5pc0VkaXQgJiYgdHIgJiYgKHRyLmNsYXNzTGlzdC5jb250YWlucygnZS1lZGl0ZWRyb3cnKSB8fCB0ci5jbGFzc0xpc3QuY29udGFpbnMoJ2UtYWRkZWRyb3cnKSk7XG4gICAgICAgICAgICByZXR1cm4gIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXVuYm91bmRjZWxsZGl2JykgJiYgKGlzRWRpdCB8fCAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Y2VsbCcpICYmXG4gICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Y2VsbCcpLmNsYXNzTGlzdC5jb250YWlucygnZS1lZGl0ZWRiYXRjaGNlbGwnKSkpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kYmxDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWQnKS5pZCAhPT0gdGhpcy5lbGVtZW50LmlkIHx8IGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJy5lLXVuYm91bmRjZWxsZGl2JykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuZGJsY2xpY2ssIGUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5mb2N1c091dEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGlsZEdyaWQoZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZpbHRlckNsZWFyID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNhbmNlbDpub3QoLmUtaGlkZSknKTtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJDbGVhcikge1xuICAgICAgICAgICAgICAgIGZpbHRlckNsZWFyLmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5pc0NoaWxkR3JpZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ3JpZEVsZW1lbnQgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkJyk7XG4gICAgICAgICAgICBpZiAoZ3JpZEVsZW1lbnQgJiYgZ3JpZEVsZW1lbnQuaWQgIT09IHRoaXMuZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5tZXJnZVBlcnNpc3RHcmlkRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuZ2V0TW9kdWxlTmFtZSgpICsgdGhpcy5lbGVtZW50LmlkKTtcbiAgICAgICAgICAgIGlmICghKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZGF0YSkgfHwgKGRhdGEgPT09ICcnKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YU9ial8xID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGFPYmpfMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgX2xvb3BfMiA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh0eXBlb2YgdGhpc18yW2tleV0gPT09ICdvYmplY3QnKSAmJiAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzXzJba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXNfMltrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMltrZXldLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuZXh0ZW5kKGVsZW1lbnQsIGRhdGFPYmpfMVtrZXldW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmV4dGVuZCh0aGlzXzJba2V5XSwgZGF0YU9ial8xW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18yW2tleV0gPSBkYXRhT2JqXzFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIHRoaXNfMiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBrZXlzXzEgPSBrZXlzOyBfaSA8IGtleXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIF9sb29wXzIoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmlzRGV0YWlsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGV0YWlsVGVtcGxhdGUpIHx8ICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2hpbGRHcmlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUua2V5QWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSB8fFxuICAgICAgICAgICAgICAgICh0aGlzLmlzRWRpdCAmJiBlLmFjdGlvbiAhPT0gJ2VzY2FwZScgJiYgZS5hY3Rpb24gIT09ICdlbnRlcicgJiYgZS5hY3Rpb24gIT09ICdzaGlmdEVudGVyJ1xuICAgICAgICAgICAgICAgICAgICAmJiBlLmFjdGlvbiAhPT0gJ3RhYicgJiYgZS5hY3Rpb24gIT09ICdzaGlmdFRhYicpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dLZXlib2FyZCkge1xuICAgICAgICAgICAgICAgIGlmIChlLmFjdGlvbiA9PT0gJ2N0cmxQbHVzUCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5rZXlQcmVzc2VkLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0SW5qZWN0ZWRNb2R1bGVzID0gZnVuY3Rpb24gKG1vZHVsZXMpIHtcbiAgICAgICAgICAgIHRoaXMuaW5qZWN0ZWRNb2R1bGVzID0gbW9kdWxlcztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlQ29sdW1uT2JqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdXRpbF8xLnByZXBhcmVDb2x1bW5zKHRoaXMuY29sdW1ucywgdGhpcy5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbik7XG4gICAgICAgICAgICBpZiAodGhpcy5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0aW5nIHx8IHRoaXMuZWRpdFNldHRpbmdzLmFsbG93QWRkaW5nIHx8IHRoaXMuZWRpdFNldHRpbmdzLmFsbG93RGVsZXRpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuYXV0b0NvbCwge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWZyZXNoQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sdW1uT2JqZWN0KCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZXhjZWxFeHBvcnQgPSBmdW5jdGlvbiAoZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4Y2VsRXhwb3J0TW9kdWxlLk1hcCh0aGlzLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaywgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jc3ZFeHBvcnQgPSBmdW5jdGlvbiAoZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4Y2VsRXhwb3J0TW9kdWxlLk1hcCh0aGlzLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaywgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnBkZkV4cG9ydCA9IGZ1bmN0aW9uIChleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCBwZGZEb2MpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBkZkV4cG9ydE1vZHVsZS5NYXAodGhpcywgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgcGRmRG9jKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuaXNDb21tYW5kQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2kgPCBjb2x1bW5zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ29tbWFuZENvbHVtbihjb2x1bW4uY29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi5jb21tYW5kcyB8fCBjb2x1bW4uY29tbWFuZHNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdyb3VwQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBNb2R1bGUuZ3JvdXBDb2x1bW4oY29sdW1uTmFtZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVuZ3JvdXBDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uTmFtZSkge1xuICAgICAgICAgICAgdGhpcy5ncm91cE1vZHVsZS51bmdyb3VwQ29sdW1uKGNvbHVtbk5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5pc0NvbnRleHRNZW51T3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRleHRNZW51TW9kdWxlICYmIHRoaXMuY29udGV4dE1lbnVNb2R1bGUuaXNPcGVuO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5lbnN1cmVNb2R1bGVJbmplY3RlZCA9IGZ1bmN0aW9uIChtb2R1bGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEluamVjdGVkTW9kdWxlcygpLmluZGV4T2YobW9kdWxlKSA+PSAwO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zaG93Q29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIHNob3dCeSkge1xuICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuc2hvdyhjb2x1bW5OYW1lLCBzaG93QnkpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5oaWRlQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIGhpZGVCeSkge1xuICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuaGlkZShjb2x1bW5OYW1lLCBoaWRlQnkpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JpZDtcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoW10pXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZW5hYmxlQWx0Um93XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVIb3ZlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dLZXlib2FyZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93VGV4dFdyYXBcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBUZXh0V3JhcFNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInRleHRXcmFwU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1BhZ2luZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIHBhZ2Vfc2V0dGluZ3NfMS5QYWdlU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicGFnZVNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZW5hYmxlVmlydHVhbGl6YXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIFNlYXJjaFNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNlYXJjaFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dTb3J0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd011bHRpU29ydGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93RXhjZWxFeHBvcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1BkZkV4cG9ydFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIFNvcnRTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJzb3J0U2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93U2VsZWN0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoLTEpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic2VsZWN0ZWRSb3dJbmRleFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIFNlbGVjdGlvblNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNlbGVjdGlvblNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dGaWx0ZXJpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1Jlb3JkZXJpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1Jlc2l6aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dSb3dEcmFnQW5kRHJvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIFJvd0Ryb3BTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEcm9wU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBGaWx0ZXJTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJmaWx0ZXJTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93R3JvdXBpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJzaG93Q29sdW1uTWVudVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIEdyb3VwU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZ3JvdXBTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIEVkaXRTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlZGl0U2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBhZ2dyZWdhdGVfMS5BZ2dyZWdhdGVSb3cpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWdncmVnYXRlc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNob3dDb2x1bW5DaG9vc2VyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdkZWZhdWx0JylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJncmlkTGluZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93VGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZGV0YWlsVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2hpbGRHcmlkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInF1ZXJ5U3RyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2FsbHBhZ2VzJylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJwcmludE1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShbXSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkYXRhU291cmNlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInF1ZXJ5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInRvb2xiYXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29udGV4dE1lbnVJdGVtc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb2x1bW5NZW51SXRlbXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidG9vbGJhclRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInBhZ2VyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgwKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImZyb3plblJvd3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgwKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImZyb3plbkNvbHVtbnNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY3JlYXRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkZXN0cm95ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwibG9hZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEYXRhQm91bmRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicXVlcnlDZWxsSW5mb1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhY3Rpb25CZWdpblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhY3Rpb25Db21wbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhY3Rpb25GYWlsdXJlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRhdGFCb3VuZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dTZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93U2VsZWN0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RGVzZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RGVzZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsU2VsZWN0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxTZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsRGVzZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2VsbERlc2VsZWN0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uRHJhZ1N0YXJ0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbHVtbkRyYWdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uRHJvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJwcmludENvbXBsZXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZVByaW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInBkZlF1ZXJ5Q2VsbEluZm9cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZXhjZWxRdWVyeUNlbGxJbmZvXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRldGFpbERhdGFCb3VuZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEcmFnU3RhcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RHJhZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEcm9wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInRvb2xiYXJDbGlja1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVPcGVuQ29sdW1uQ2hvb3NlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiYXRjaEFkZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiYXRjaERlbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVCYXRjaEFkZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVCYXRjaERlbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVCYXRjaFNhdmVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVnaW5FZGl0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxFZGl0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxTYXZlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJlc2l6ZVN0YXJ0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcIm9uUmVzaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJlc2l6ZVN0b3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVmb3JlRGF0YUJvdW5kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbnRleHRNZW51T3BlblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb250ZXh0TWVudUNsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbHVtbk1lbnVPcGVuXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbHVtbk1lbnVDbGlja1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjaGVja0JveENoYW5nZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVDb3B5XCIsIHZvaWQgMCk7XG4gICAgR3JpZCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80Lk5vdGlmeVByb3BlcnR5Q2hhbmdlc1xuICAgIF0sIEdyaWQpO1xuICAgIGV4cG9ydHMuR3JpZCA9IEdyaWQ7XG4gICAgR3JpZC5JbmplY3Qoc2VsZWN0aW9uXzEuU2VsZWN0aW9uKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9iYXNlL2dyaWQuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZhbHVlRm9ybWF0dGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVmFsdWVGb3JtYXR0ZXIoY3VsdHVyZU5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuaW50bCA9IG5ldyBlajJfYmFzZV8yLkludGVybmF0aW9uYWxpemF0aW9uKCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY3VsdHVyZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRsLmN1bHR1cmUgPSBjdWx0dXJlTmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuZ2V0Rm9ybWF0RnVuY3Rpb24gPSBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAoZm9ybWF0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRsLmdldERhdGVGb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGwuZ2V0TnVtYmVyRm9ybWF0KGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZhbHVlRm9ybWF0dGVyLnByb3RvdHlwZS5nZXRQYXJzZXJGdW5jdGlvbiA9IGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgICAgICAgIGlmIChmb3JtYXQudHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGwuZ2V0RGF0ZVBhcnNlcihmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50bC5nZXROdW1iZXJQYXJzZXIoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLmZyb21WaWV3ID0gZnVuY3Rpb24gKHZhbHVlLCBmb3JtYXQsIHR5cGUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnZGF0ZScgfHwgdHlwZSA9PT0gJ2RhdGV0aW1lJyB8fCB0eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUudG9WaWV3ID0gZnVuY3Rpb24gKHZhbHVlLCBmb3JtYXQpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChmb3JtYXQpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZvcm1hdCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuc2V0Q3VsdHVyZSA9IGZ1bmN0aW9uIChjdWx0dXJlTmFtZSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGN1bHR1cmVOYW1lKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0Q3VsdHVyZShjdWx0dXJlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWYWx1ZUZvcm1hdHRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVmFsdWVGb3JtYXR0ZXIgPSBWYWx1ZUZvcm1hdHRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzVfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIlxuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIi4uL21vZGVscy9jb2x1bW5cIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2RhdGFfMSwgY29sdW1uXzEsIGVqMl9wb3B1cHNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBmdW5jdGlvbiBkb2VzSW1wbGVtZW50SW50ZXJmYWNlKHRhcmdldCwgY2hlY2tGb3IpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5wcm90b3R5cGUgJiYgY2hlY2tGb3IgaW4gdGFyZ2V0LnByb3RvdHlwZTtcbiAgICB9XG4gICAgZXhwb3J0cy5kb2VzSW1wbGVtZW50SW50ZXJmYWNlID0gZG9lc0ltcGxlbWVudEludGVyZmFjZTtcbiAgICBmdW5jdGlvbiB2YWx1ZUFjY2Vzc29yKGZpZWxkLCBkYXRhLCBjb2x1bW4pIHtcbiAgICAgICAgZmllbGQgPSBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGZpZWxkKSA/ICcnIDogZmllbGQ7XG4gICAgICAgIHJldHVybiBlajJfYmFzZV8yLmdldFZhbHVlKGZpZWxkLCBkYXRhKTtcbiAgICB9XG4gICAgZXhwb3J0cy52YWx1ZUFjY2Vzc29yID0gdmFsdWVBY2Nlc3NvcjtcbiAgICBmdW5jdGlvbiBnZXRVcGRhdGVVc2luZ1JhZih1cGRhdGVGdW5jdGlvbiwgY2FsbEJhY2spIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2FsbEJhY2sobnVsbCwgdXBkYXRlRnVuY3Rpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNhbGxCYWNrKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRVcGRhdGVVc2luZ1JhZiA9IGdldFVwZGF0ZVVzaW5nUmFmO1xuICAgIGZ1bmN0aW9uIGl0ZXJhdGVBcnJheU9yT2JqZWN0KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJlZCA9IHByZWRpY2F0ZShjb2xsZWN0aW9uW2ldLCBpKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChwcmVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHByZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGV4cG9ydHMuaXRlcmF0ZUFycmF5T3JPYmplY3QgPSBpdGVyYXRlQXJyYXlPck9iamVjdDtcbiAgICBmdW5jdGlvbiB0ZW1wbGF0ZUNvbXBpbGVyKHRlbXBsYXRlKSB7XG4gICAgICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgdmFyIGUgPSB2b2lkIDA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRlbXBsYXRlKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuY29tcGlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmNvbXBpbGUodGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGV4cG9ydHMudGVtcGxhdGVDb21waWxlciA9IHRlbXBsYXRlQ29tcGlsZXI7XG4gICAgZnVuY3Rpb24gc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGN1c3RvbUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgdmFyIGNvcHlBdHRyID0ge307XG4gICAgICAgIHZhciBsaXRlcmFscyA9IFsnc3R5bGUnLCAnY2xhc3MnXTtcbiAgICAgICAgZWoyX2Jhc2VfMi5leHRlbmQoY29weUF0dHIsIGN1c3RvbUF0dHJpYnV0ZXMsIHt9KTtcbiAgICAgICAgaWYgKCdzdHlsZScgaW4gY29weUF0dHIpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUobm9kZSwgY29weUF0dHJbbGl0ZXJhbHNbMF1dKTtcbiAgICAgICAgICAgIGRlbGV0ZSBjb3B5QXR0cltsaXRlcmFsc1swXV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdjbGFzcycgaW4gY29weUF0dHIpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYWRkQ2xhc3MoW25vZGVdLCBjb3B5QXR0cltsaXRlcmFsc1sxXV0pO1xuICAgICAgICAgICAgZGVsZXRlIGNvcHlBdHRyW2xpdGVyYWxzWzFdXTtcbiAgICAgICAgfVxuICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXMobm9kZSwgY29weUF0dHIpO1xuICAgIH1cbiAgICBleHBvcnRzLnNldFN0eWxlQW5kQXR0cmlidXRlcyA9IHNldFN0eWxlQW5kQXR0cmlidXRlcztcbiAgICBmdW5jdGlvbiBleHRlbmQoY29waWVkLCBmaXJzdCwgc2Vjb25kLCBleGNsdWRlKSB7XG4gICAgICAgIHZhciBtb3ZlZCA9IGVqMl9iYXNlXzIuZXh0ZW5kKGNvcGllZCwgZmlyc3QsIHNlY29uZCk7XG4gICAgICAgIE9iamVjdC5rZXlzKG1vdmVkKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChleGNsdWRlLmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBtb3ZlZFt2YWx1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbW92ZWQ7XG4gICAgfVxuICAgIGV4cG9ydHMuZXh0ZW5kID0gZXh0ZW5kO1xuICAgIGZ1bmN0aW9uIHByZXBhcmVDb2x1bW5zKGNvbHVtbnMsIGF1dG9XaWR0aCkge1xuICAgICAgICBmb3IgKHZhciBjID0gMCwgbGVuID0gY29sdW1ucy5sZW5ndGg7IGMgPCBsZW47IGMrKykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHZvaWQgMDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29sdW1uc1tjXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBuZXcgY29sdW1uXzEuQ29sdW1uKHsgZmllbGQ6IGNvbHVtbnNbY10gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghKGNvbHVtbnNbY10gaW5zdGFuY2VvZiBjb2x1bW5fMS5Db2x1bW4pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb2x1bW5zW2NdLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gbmV3IGNvbHVtbl8xLkNvbHVtbihjb2x1bW5zW2NdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IG5ldyBjb2x1bW5fMS5Db2x1bW4oY29sdW1uc1tjXSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbY10uY29sdW1ucyA9IHByZXBhcmVDb2x1bW5zKGNvbHVtbnNbY10uY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gY29sdW1uc1tjXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHVtbi5oZWFkZXJUZXh0ID0gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uaGVhZGVyVGV4dCkgPyBjb2x1bW4uZmllbGQgfHwgJycgOiBjb2x1bW4uaGVhZGVyVGV4dDtcbiAgICAgICAgICAgIGNvbHVtbi52YWx1ZUFjY2Vzc29yID0gY29sdW1uLnZhbHVlQWNjZXNzb3IgfHwgdmFsdWVBY2Nlc3NvcjtcbiAgICAgICAgICAgIGNvbHVtbi53aWR0aCA9IGF1dG9XaWR0aCAmJiBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi53aWR0aCkgPyAyMDAgOiBjb2x1bW4ud2lkdGg7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udmlzaWJsZSkpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4udmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2x1bW5zW2NdID0gY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgIH1cbiAgICBleHBvcnRzLnByZXBhcmVDb2x1bW5zID0gcHJlcGFyZUNvbHVtbnM7XG4gICAgZnVuY3Rpb24gc2V0Q3NzSW5HcmlkUG9wVXAocG9wVXAsIGUsIGNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgcG9wVXBTcGFuID0gcG9wVXAucXVlcnlTZWxlY3Rvcignc3BhbicpO1xuICAgICAgICB2YXIgcG9zaXRpb24gPSBwb3BVcC5wYXJlbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgdGFyZ2V0UG9zaXRpb24gPSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGlzQm90dG9tVGFpbDtcbiAgICAgICAgcG9wVXBTcGFuLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICAgICAgcG9wVXAuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICBpc0JvdHRvbVRhaWwgPSAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLmNsaWVudFkpID8gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZIDpcbiAgICAgICAgICAgIGUuY2xpZW50WSkgPiBwb3BVcC5vZmZzZXRIZWlnaHQgKyAxMDtcbiAgICAgICAgcG9wVXAuc3R5bGUudG9wID0gdGFyZ2V0UG9zaXRpb24udG9wIC0gcG9zaXRpb24udG9wICtcbiAgICAgICAgICAgIChpc0JvdHRvbVRhaWwgPyAtKHBvcFVwLm9mZnNldEhlaWdodCArIDEwKSA6IHBvcFVwLm9mZnNldEhlaWdodCArIDEwKSArICdweCc7XG4gICAgICAgIHBvcFVwLnN0eWxlLmxlZnQgPSBnZXRQb3B1cExlZnRQb3NpdGlvbihwb3BVcCwgZSwgdGFyZ2V0UG9zaXRpb24sIHBvc2l0aW9uLmxlZnQpICsgJ3B4JztcbiAgICAgICAgaWYgKGlzQm90dG9tVGFpbCkge1xuICAgICAgICAgICAgcG9wVXAucXVlcnlTZWxlY3RvcignLmUtZG93bnRhaWwnKS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICBwb3BVcC5xdWVyeVNlbGVjdG9yKCcuZS11cHRhaWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcG9wVXAucXVlcnlTZWxlY3RvcignLmUtZG93bnRhaWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgcG9wVXAucXVlcnlTZWxlY3RvcignLmUtdXB0YWlsJykuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuc2V0Q3NzSW5HcmlkUG9wVXAgPSBzZXRDc3NJbkdyaWRQb3BVcDtcbiAgICBmdW5jdGlvbiBnZXRQb3B1cExlZnRQb3NpdGlvbihwb3B1cCwgZSwgdGFyZ2V0UG9zaXRpb24sIGxlZnQpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gcG9wdXAub2Zmc2V0V2lkdGggLyAyO1xuICAgICAgICB2YXIgeCA9IGdldFBvc2l0aW9uKGUpLng7XG4gICAgICAgIGlmICh4IC0gdGFyZ2V0UG9zaXRpb24ubGVmdCA8IHdpZHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0UG9zaXRpb24ubGVmdCAtIGxlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGFyZ2V0UG9zaXRpb24ucmlnaHQgLSB4IDwgd2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRQb3NpdGlvbi5yaWdodCAtIGxlZnQgLSB3aWR0aCAqIDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geCAtIGxlZnQgLSB3aWR0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRBY3R1YWxQcm9wZXJ0aWVzKG9iaikge1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5nZXRWYWx1ZSgncHJvcGVydGllcycsIG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0QWN0dWFsUHJvcGVydGllcyA9IGdldEFjdHVhbFByb3BlcnRpZXM7XG4gICAgZnVuY3Rpb24gcGFyZW50c1VudGlsKGVsZW0sIHNlbGVjdG9yLCBpc0lEKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBlbGVtO1xuICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgICBpZiAoaXNJRCA/IHBhcmVudC5pZCA9PT0gc2VsZWN0b3IgOiBwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICB9XG4gICAgZXhwb3J0cy5wYXJlbnRzVW50aWwgPSBwYXJlbnRzVW50aWw7XG4gICAgZnVuY3Rpb24gZ2V0RWxlbWVudEluZGV4KGVsZW1lbnQsIGVsZW1lbnRzKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS5pc0VxdWFsTm9kZShlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0RWxlbWVudEluZGV4ID0gZ2V0RWxlbWVudEluZGV4O1xuICAgIGZ1bmN0aW9uIGluQXJyYXkodmFsdWUsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbGxlY3Rpb24ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uW2ldID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgZXhwb3J0cy5pbkFycmF5ID0gaW5BcnJheTtcbiAgICBmdW5jdGlvbiBnZXRBY3R1YWxQcm9wRnJvbUNvbGwoY29sbGVjdGlvbikge1xuICAgICAgICB2YXIgY29sbCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sbGVjdGlvbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb25baV0uaGFzT3duUHJvcGVydHkoJ3Byb3BlcnRpZXMnKSkge1xuICAgICAgICAgICAgICAgIGNvbGwucHVzaChjb2xsZWN0aW9uW2ldLnByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29sbC5wdXNoKGNvbGxlY3Rpb25baV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xsO1xuICAgIH1cbiAgICBleHBvcnRzLmdldEFjdHVhbFByb3BGcm9tQ29sbCA9IGdldEFjdHVhbFByb3BGcm9tQ29sbDtcbiAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KHRhcmdldCwgc2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbCh0YXJnZXQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZShlbGVtZW50c1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5yZW1vdmVFbGVtZW50ID0gcmVtb3ZlRWxlbWVudDtcbiAgICBmdW5jdGlvbiBnZXRQb3NpdGlvbihlKSB7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHt9O1xuICAgICAgICBwb3NpdGlvbi54ID0gKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5jbGllbnRYKSA/IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCA6XG4gICAgICAgICAgICBlLmNsaWVudFgpO1xuICAgICAgICBwb3NpdGlvbi55ID0gKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5jbGllbnRZKSA/IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSA6XG4gICAgICAgICAgICBlLmNsaWVudFkpO1xuICAgICAgICByZXR1cm4gcG9zaXRpb247XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0UG9zaXRpb24gPSBnZXRQb3NpdGlvbjtcbiAgICB2YXIgdWlkID0gMDtcbiAgICBmdW5jdGlvbiBnZXRVaWQocHJlZml4KSB7XG4gICAgICAgIHJldHVybiBwcmVmaXggKyB1aWQrKztcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRVaWQgPSBnZXRVaWQ7XG4gICAgZnVuY3Rpb24gYXBwZW5kQ2hpbGRyZW4oZWxlbSwgY2hpbGRyZW4pIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGVuID09PSBjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlbGVtLmFwcGVuZENoaWxkKGNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW0uYXBwZW5kQ2hpbGQoY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtO1xuICAgIH1cbiAgICBleHBvcnRzLmFwcGVuZENoaWxkcmVuID0gYXBwZW5kQ2hpbGRyZW47XG4gICAgZnVuY3Rpb24gcGFyZW50cyhlbGVtLCBzZWxlY3RvciwgaXNJRCkge1xuICAgICAgICB2YXIgcGFyZW50ID0gZWxlbTtcbiAgICAgICAgdmFyIHBhcmVudHMgPSBbXTtcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKGlzSUQgPyBwYXJlbnQuaWQgPT09IHNlbGVjdG9yIDogcGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnRzO1xuICAgIH1cbiAgICBleHBvcnRzLnBhcmVudHMgPSBwYXJlbnRzO1xuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUFnZ3JlZ2F0ZSh0eXBlLCBkYXRhLCBjb2x1bW4sIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdjdXN0b20nKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLmN1c3RvbUFnZ3JlZ2F0ZSA/IGNvbHVtbi5jdXN0b21BZ2dyZWdhdGUuY2FsbChjb250ZXh0LCBkYXRhLCBjb2x1bW4pIDogJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVqMl9kYXRhXzEuRGF0YVV0aWwuYWdncmVnYXRlc1t0eXBlXShkYXRhLCBjb2x1bW4uZmllbGQpO1xuICAgIH1cbiAgICBleHBvcnRzLmNhbGN1bGF0ZUFnZ3JlZ2F0ZSA9IGNhbGN1bGF0ZUFnZ3JlZ2F0ZTtcbiAgICB2YXIgc2Nyb2xsV2lkdGggPSBudWxsO1xuICAgIGZ1bmN0aW9uIGdldFNjcm9sbEJhcldpZHRoKCkge1xuICAgICAgICBpZiAoc2Nyb2xsV2lkdGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGl2Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB2YXIgdmFsdWUgPSAwO1xuICAgICAgICBkaXZOb2RlLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6MTAwcHg7aGVpZ2h0OiAxMDBweDtvdmVyZmxvdzogc2Nyb2xsO3Bvc2l0aW9uOiBhYnNvbHV0ZTt0b3A6IC05OTk5cHg7JztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXZOb2RlKTtcbiAgICAgICAgdmFsdWUgPSAoZGl2Tm9kZS5vZmZzZXRXaWR0aCAtIGRpdk5vZGUuY2xpZW50V2lkdGgpIHwgMDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkaXZOb2RlKTtcbiAgICAgICAgcmV0dXJuIHNjcm9sbFdpZHRoID0gdmFsdWU7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0U2Nyb2xsQmFyV2lkdGggPSBnZXRTY3JvbGxCYXJXaWR0aDtcbiAgICB2YXIgcm93SGVpZ2h0O1xuICAgIGZ1bmN0aW9uIGdldFJvd0hlaWdodChlbGVtZW50KSB7XG4gICAgICAgIGlmIChyb3dIZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJvd0hlaWdodDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywgeyBjbGFzc05hbWU6ICdlLXRhYmxlJywgc3R5bGVzOiAndmlzaWJpbGl0eTogaGlkZGVuJyB9KTtcbiAgICAgICAgdGFibGUuaW5uZXJIVE1MID0gJzx0cj48dGQgY2xhc3M9XCJlLXJvd2NlbGxcIj5BPHRkPjwvdHI+JztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgIHZhciByZWN0ID0gdGFibGUucXVlcnlTZWxlY3RvcigndGQnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZCh0YWJsZSk7XG4gICAgICAgIHJvd0hlaWdodCA9IE1hdGguY2VpbChyZWN0LmhlaWdodCk7XG4gICAgICAgIHJldHVybiByb3dIZWlnaHQ7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0Um93SGVpZ2h0ID0gZ2V0Um93SGVpZ2h0O1xuICAgIGZ1bmN0aW9uIGlzRWRpdGFibGUoY29sLCB0eXBlLCBlbGVtKSB7XG4gICAgICAgIHZhciByb3cgPSBwYXJlbnRzVW50aWwoZWxlbSwgJ2Utcm93Jyk7XG4gICAgICAgIHZhciBpc09sZFJvdyA9ICFyb3cgPyB0cnVlIDogcm93ICYmICFyb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWluc2VydGVkcm93Jyk7XG4gICAgICAgIGlmICh0eXBlID09PSAnYmVnaW5FZGl0JyAmJiBpc09sZFJvdykge1xuICAgICAgICAgICAgaWYgKGNvbC5pc0lkZW50aXR5IHx8IGNvbC5pc1ByaW1hcnlLZXkgfHwgIWNvbC5hbGxvd0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChpc09sZFJvdyAmJiAhY29sLmFsbG93RWRpdGluZyAmJiAhY29sLmlzSWRlbnRpdHkgJiYgIWNvbC5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLmlzRWRpdGFibGUgPSBpc0VkaXRhYmxlO1xuICAgIGZ1bmN0aW9uIGlzQWN0aW9uUHJldmVudChpbnN0KSB7XG4gICAgICAgIHZhciBkbGcgPSBpbnN0LmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBpbnN0LmVsZW1lbnQuaWQgKyAnRWRpdENvbmZpcm0nKTtcbiAgICAgICAgcmV0dXJuIGluc3QuZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcgJiZcbiAgICAgICAgICAgIChpbnN0LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtdXBkYXRlZHRkJykubGVuZ3RoKSAmJlxuICAgICAgICAgICAgKGRsZyA/IGRsZy5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcG9wdXAtY2xvc2UnKSA6IHRydWUpO1xuICAgIH1cbiAgICBleHBvcnRzLmlzQWN0aW9uUHJldmVudCA9IGlzQWN0aW9uUHJldmVudDtcbiAgICBmdW5jdGlvbiB3cmFwKGVsZW0sIGFjdGlvbikge1xuICAgICAgICB2YXIgY2xOYW1lID0gJ2Utd3JhcCc7XG4gICAgICAgIGVsZW0gPSBlbGVtIGluc3RhbmNlb2YgQXJyYXkgPyBlbGVtIDogW2VsZW1dO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFjdGlvbiA/IGVsZW1baV0uY2xhc3NMaXN0LmFkZChjbE5hbWUpIDogZWxlbVtpXS5jbGFzc0xpc3QucmVtb3ZlKGNsTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy53cmFwID0gd3JhcDtcbiAgICBmdW5jdGlvbiBjaGFuZ2VCdXR0b25UeXBlKHRhcmdldCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBbXS5zbGljZS5jYWxsKHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSk7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgZWxlbWVudHNfMSA9IGVsZW1lbnRzOyBfaSA8IGVsZW1lbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uID0gZWxlbWVudHNfMVtfaV07XG4gICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXMoYnV0dG9uLCB7IHR5cGU6ICdidXR0b24nIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuY2hhbmdlQnV0dG9uVHlwZSA9IGNoYW5nZUJ1dHRvblR5cGU7XG4gICAgZnVuY3Rpb24gc2V0Rm9ybWF0dGVyKHNlcnZpY2VMb2NhdG9yLCBjb2x1bW4pIHtcbiAgICAgICAgdmFyIGZtdHIgPSBzZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCd2YWx1ZUZvcm1hdHRlcicpO1xuICAgICAgICBzd2l0Y2ggKGNvbHVtbi50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICBjb2x1bW4uc2V0Rm9ybWF0dGVyKGZtdHIuZ2V0Rm9ybWF0RnVuY3Rpb24oeyB0eXBlOiAnZGF0ZScsIHNrZWxldG9uOiBjb2x1bW4uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uc2V0UGFyc2VyKGZtdHIuZ2V0UGFyc2VyRnVuY3Rpb24oeyB0eXBlOiAnZGF0ZScsIHNrZWxldG9uOiBjb2x1bW4uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICBjb2x1bW4uc2V0Rm9ybWF0dGVyKGZtdHIuZ2V0Rm9ybWF0RnVuY3Rpb24oeyB0eXBlOiAnZGF0ZVRpbWUnLCBza2VsZXRvbjogY29sdW1uLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgY29sdW1uLnNldFBhcnNlcihmbXRyLmdldFBhcnNlckZ1bmN0aW9uKHsgdHlwZTogJ2RhdGVUaW1lJywgc2tlbGV0b246IGNvbHVtbi5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICBjb2x1bW4uc2V0Rm9ybWF0dGVyKGZtdHIuZ2V0Rm9ybWF0RnVuY3Rpb24oeyBmb3JtYXQ6IGNvbHVtbi5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5zZXRQYXJzZXIoZm10ci5nZXRQYXJzZXJGdW5jdGlvbih7IGZvcm1hdDogY29sdW1uLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5zZXRGb3JtYXR0ZXIgPSBzZXRGb3JtYXR0ZXI7XG4gICAgZnVuY3Rpb24gYWRkUmVtb3ZlQWN0aXZlQ2xhc3NlcyhjZWxscywgYWRkKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjZWxscy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGFkZCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xhc3NMaXN0KGNlbGxzW2ldLCBhcmdzLnNsaWNlKCksIFtdKTtcbiAgICAgICAgICAgICAgICBjZWxsc1tpXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QoY2VsbHNbaV0sIFtdLCBhcmdzLnNsaWNlKCkpO1xuICAgICAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuYWRkUmVtb3ZlQWN0aXZlQ2xhc3NlcyA9IGFkZFJlbW92ZUFjdGl2ZUNsYXNzZXM7XG4gICAgZnVuY3Rpb24gZGlzdGluY3RTdHJpbmdWYWx1ZXMocmVzdWx0KSB7XG4gICAgICAgIHZhciB0ZW1wID0ge307XG4gICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghKHJlc3VsdFtpXSBpbiB0ZW1wKSkge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKHJlc3VsdFtpXS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB0ZW1wW3Jlc3VsdFtpXV0gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGV4cG9ydHMuZGlzdGluY3RTdHJpbmdWYWx1ZXMgPSBkaXN0aW5jdFN0cmluZ1ZhbHVlcztcbiAgICBmdW5jdGlvbiBnZXRGaWx0ZXJNZW51UG9zdGlvbih0YXJnZXQsIGRpYWxvZ09iaikge1xuICAgICAgICB2YXIgZWxlbWVudFZpc2libGUgPSBkaWFsb2dPYmouZWxlbWVudC5zdHlsZS5kaXNwbGF5O1xuICAgICAgICBkaWFsb2dPYmouZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgdmFyIGRsZ1dpZHRoID0gZGlhbG9nT2JqLndpZHRoO1xuICAgICAgICB2YXIgbmV3cG9zID0gZWoyX3BvcHVwc18xLmNhbGN1bGF0ZVJlbGF0aXZlQmFzZWRQb3NpdGlvbih0YXJnZXQsIGRpYWxvZ09iai5lbGVtZW50KTtcbiAgICAgICAgZGlhbG9nT2JqLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IGVsZW1lbnRWaXNpYmxlO1xuICAgICAgICBkaWFsb2dPYmouZWxlbWVudC5zdHlsZS50b3AgPSAobmV3cG9zLnRvcCArIHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQpIC0gNSArICdweCc7XG4gICAgICAgIHZhciBsZWZ0UG9zID0gKChuZXdwb3MubGVmdCAtIGRsZ1dpZHRoKSArIHRhcmdldC5jbGllbnRXaWR0aCk7XG4gICAgICAgIGlmIChsZWZ0UG9zIDwgMSkge1xuICAgICAgICAgICAgZGlhbG9nT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9IChkbGdXaWR0aCArIGxlZnRQb3MpIC0gMTYgKyAncHgnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlhbG9nT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9IGxlZnRQb3MgKyAtNCArICdweCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5nZXRGaWx0ZXJNZW51UG9zdGlvbiA9IGdldEZpbHRlck1lbnVQb3N0aW9uO1xuICAgIGZ1bmN0aW9uIGdldFpJbmRleENhbGN1YWx0aW9uKGFyZ3MsIGRpYWxvZ09iaikge1xuICAgICAgICBhcmdzLnBvcHVwLmVsZW1lbnQuc3R5bGUuekluZGV4ID0gKGRpYWxvZ09iai56SW5kZXggKyAxKS50b1N0cmluZygpO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFpJbmRleENhbGN1YWx0aW9uID0gZ2V0WkluZGV4Q2FsY3VhbHRpb247XG4gICAgZnVuY3Rpb24gdG9vZ2xlQ2hlY2tib3goZWxlbSkge1xuICAgICAgICB2YXIgc3BhbiA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmUtZnJhbWUnKTtcbiAgICAgICAgc3Bhbi5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2snKSA/IGVqMl9iYXNlXzEuY2xhc3NMaXN0KHNwYW4sIFsnZS11bmNoZWNrJ10sIFsnZS1jaGVjayddKSA6XG4gICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdChzcGFuLCBbJ2UtY2hlY2snXSwgWydlLXVuY2hlY2snXSk7XG4gICAgfVxuICAgIGV4cG9ydHMudG9vZ2xlQ2hlY2tib3ggPSB0b29nbGVDaGVja2JveDtcbiAgICBmdW5jdGlvbiBjcmVhdGVDYm94V2l0aFdyYXAodWlkLCBlbGVtLCBjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IGNsYXNzTmFtZSB9KTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCd1aWQnLCB1aWQpO1xuICAgICAgICByZXR1cm4gZGl2O1xuICAgIH1cbiAgICBleHBvcnRzLmNyZWF0ZUNib3hXaXRoV3JhcCA9IGNyZWF0ZUNib3hXaXRoV3JhcDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9iYXNlL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzhfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXJcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB2YWx1ZV9mb3JtYXR0ZXJfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb2x1bW4gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDb2x1bW4ob3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5hbGxvd1NvcnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hbGxvd1Jlc2l6aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYWxsb3dGaWx0ZXJpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hbGxvd0dyb3VwaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbHVtbk1lbnUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVHcm91cEJ5Rm9ybWF0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmFsbG93RWRpdGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmZpbHRlciA9IHt9O1xuICAgICAgICAgICAgdGhpcy5zaG93SW5Db2x1bW5DaG9vc2VyID0gdHJ1ZTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEubWVyZ2UodGhpcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnVpZCA9IHV0aWxfMS5nZXRVaWQoJ2dyaWQtY29sdW1uJyk7XG4gICAgICAgICAgICB2YXIgdmFsdWVGb3JtYXR0ZXIgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZvcm1hdCAmJiAob3B0aW9ucy5mb3JtYXQuc2tlbGV0b24gfHwgb3B0aW9ucy5mb3JtYXQuZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9ybWF0dGVyKHZhbHVlRm9ybWF0dGVyLmdldEZvcm1hdEZ1bmN0aW9uKG9wdGlvbnMuZm9ybWF0KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQYXJzZXIodmFsdWVGb3JtYXR0ZXIuZ2V0UGFyc2VyRnVuY3Rpb24ob3B0aW9ucy5mb3JtYXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5maWVsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dGaWx0ZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93R3JvdXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93U29ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29tbWFuZHMgJiYgIXRoaXMudGV4dEFsaWduKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0QWxpZ24gPSAncmlnaHQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudGVtcGxhdGUgfHwgdGhpcy5jb21tYW5kc1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy50ZW1wbGF0ZSB8fCB0aGlzLmNvbW1hbmRzVGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyLml0ZW1UZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmx0clRlbXBsYXRlRm4gPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLmZpbHRlci5pdGVtVGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Rm47XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuc2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdEZuID0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0UGFyc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VyRm47XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuc2V0UGFyc2VyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnNlckZuID0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0Q29sdW1uVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZUZuO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmdldEZpbHRlckl0ZW1UZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZsdHJUZW1wbGF0ZUZuO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmdldERvbVNldHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVIdG1sRW5jb2RlID8gJ3RleHRDb250ZW50JyA6ICdpbm5lckhUTUwnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29sdW1uO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW4gPSBDb2x1bW47XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvbW9kZWxzL2NvbHVtbi5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMuY3JlYXRlZCA9ICdjcmVhdGUnO1xuICAgIGV4cG9ydHMuZGVzdHJveWVkID0gJ2Rlc3Ryb3knO1xuICAgIGV4cG9ydHMubG9hZCA9ICdsb2FkJztcbiAgICBleHBvcnRzLnJvd0RhdGFCb3VuZCA9ICdyb3dEYXRhQm91bmQnO1xuICAgIGV4cG9ydHMucXVlcnlDZWxsSW5mbyA9ICdxdWVyeUNlbGxJbmZvJztcbiAgICBleHBvcnRzLmFjdGlvbkJlZ2luID0gJ2FjdGlvbkJlZ2luJztcbiAgICBleHBvcnRzLmFjdGlvbkNvbXBsZXRlID0gJ2FjdGlvbkNvbXBsZXRlJztcbiAgICBleHBvcnRzLmFjdGlvbkZhaWx1cmUgPSAnYWN0aW9uRmFpbHVyZSc7XG4gICAgZXhwb3J0cy5kYXRhQm91bmQgPSAnZGF0YUJvdW5kJztcbiAgICBleHBvcnRzLnJvd1NlbGVjdGluZyA9ICdyb3dTZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMucm93U2VsZWN0ZWQgPSAncm93U2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMucm93RGVzZWxlY3RpbmcgPSAncm93RGVzZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMucm93RGVzZWxlY3RlZCA9ICdyb3dEZXNlbGVjdGVkJztcbiAgICBleHBvcnRzLmNlbGxTZWxlY3RpbmcgPSAnY2VsbFNlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5jZWxsU2VsZWN0ZWQgPSAnY2VsbFNlbGVjdGVkJztcbiAgICBleHBvcnRzLmNlbGxEZXNlbGVjdGluZyA9ICdjZWxsRGVzZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY2VsbERlc2VsZWN0ZWQgPSAnY2VsbERlc2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMuY29sdW1uRHJhZ1N0YXJ0ID0gJ2NvbHVtbkRyYWdTdGFydCc7XG4gICAgZXhwb3J0cy5jb2x1bW5EcmFnID0gJ2NvbHVtbkRyYWcnO1xuICAgIGV4cG9ydHMuY29sdW1uRHJvcCA9ICdjb2x1bW5Ecm9wJztcbiAgICBleHBvcnRzLnJvd0RyYWdTdGFydCA9ICdyb3dEcmFnU3RhcnQnO1xuICAgIGV4cG9ydHMucm93RHJhZyA9ICdyb3dEcmFnJztcbiAgICBleHBvcnRzLnJvd0Ryb3AgPSAncm93RHJvcCc7XG4gICAgZXhwb3J0cy5iZWZvcmVQcmludCA9ICdiZWZvcmVQcmludCc7XG4gICAgZXhwb3J0cy5wcmludENvbXBsZXRlID0gJ3ByaW50Q29tcGxldGUnO1xuICAgIGV4cG9ydHMuZGV0YWlsRGF0YUJvdW5kID0gJ2RldGFpbERhdGFCb3VuZCc7XG4gICAgZXhwb3J0cy50b29sYmFyQ2xpY2sgPSAndG9vbGJhckNsaWNrJztcbiAgICBleHBvcnRzLmJhdGNoQWRkID0gJ2JhdGNoQWRkJztcbiAgICBleHBvcnRzLmJhdGNoRGVsZXRlID0gJ2JhdGNoRGVsZXRlJztcbiAgICBleHBvcnRzLmJlZm9yZUJhdGNoQWRkID0gJ2JlZm9yZUJhdGNoQWRkJztcbiAgICBleHBvcnRzLmJlZm9yZUJhdGNoRGVsZXRlID0gJ2JlZm9yZUJhdGNoRGVsZXRlJztcbiAgICBleHBvcnRzLmJlZm9yZUJhdGNoU2F2ZSA9ICdiZWZvcmVCYXRjaFNhdmUnO1xuICAgIGV4cG9ydHMuYmVnaW5FZGl0ID0gJ2JlZ2luRWRpdCc7XG4gICAgZXhwb3J0cy5jZWxsRWRpdCA9ICdjZWxsRWRpdCc7XG4gICAgZXhwb3J0cy5jZWxsU2F2ZSA9ICdjZWxsU2F2ZSc7XG4gICAgZXhwb3J0cy5lbmRBZGQgPSAnZW5kQWRkJztcbiAgICBleHBvcnRzLmVuZERlbGV0ZSA9ICdlbmREZWxldGUnO1xuICAgIGV4cG9ydHMuZW5kRWRpdCA9ICdlbmRFZGl0JztcbiAgICBleHBvcnRzLnJlY29yZERvdWJsZUNsaWNrID0gJ3JlY29yZERvdWJsZUNsaWNrJztcbiAgICBleHBvcnRzLnJlY29yZENsaWNrID0gJ3JlY29yZENsaWNrJztcbiAgICBleHBvcnRzLmJlZm9yZURhdGFCb3VuZCA9ICdiZWZvcmVEYXRhQm91bmQnO1xuICAgIGV4cG9ydHMuYmVmb3JlT3BlbkNvbHVtbkNob29zZXIgPSAnYmVmb3JlT3BlbkNvbHVtbkNob29zZXInO1xuICAgIGV4cG9ydHMucmVzaXplU3RhcnQgPSAncmVzaXplU3RhcnQnO1xuICAgIGV4cG9ydHMub25SZXNpemUgPSAnb25SZXNpemUnO1xuICAgIGV4cG9ydHMucmVzaXplU3RvcCA9ICdyZXNpemVTdG9wJztcbiAgICBleHBvcnRzLmNoZWNrQm94Q2hhbmdlID0gJ2NoZWNrQm94Q2hhbmdlJztcbiAgICBleHBvcnRzLmJlZm9yZUNvcHkgPSAnYmVmb3JlQ29weSc7XG4gICAgZXhwb3J0cy5maWx0ZXJDaG9pY2VSZXF1ZXN0ID0gJ2ZpbHRlcmNob2ljZXJlcXVlc3QnO1xuICAgIGV4cG9ydHMuZmlsdGVyQWZ0ZXJPcGVuID0gJ2ZpbHRlcmFmdGVyb3Blbic7XG4gICAgZXhwb3J0cy5maWx0ZXJCZWZvcmVPcGVuID0gJ2ZpbHRlcmJlZm9yZW9wZW4nO1xuICAgIGV4cG9ydHMuaW5pdGlhbExvYWQgPSAnaW5pdGlhbC1sb2FkJztcbiAgICBleHBvcnRzLmluaXRpYWxFbmQgPSAnaW5pdGlhbC1lbmQnO1xuICAgIGV4cG9ydHMuZGF0YVJlYWR5ID0gJ2RhdGEtcmVhZHknO1xuICAgIGV4cG9ydHMuY29udGVudFJlYWR5ID0gJ2NvbnRlbnQtcmVhZHknO1xuICAgIGV4cG9ydHMudWlVcGRhdGUgPSAndWktdXBkYXRlJztcbiAgICBleHBvcnRzLm9uRW1wdHkgPSAnb24tZW1wdHknO1xuICAgIGV4cG9ydHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCA9ICdpbmJvdW5kLW1vZGVsLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMubW9kZWxDaGFuZ2VkID0gJ21vZGVsLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMuY29sR3JvdXBSZWZyZXNoID0gJ2NvbGdyb3VwLXJlZnJlc2gnO1xuICAgIGV4cG9ydHMuaGVhZGVyUmVmcmVzaGVkID0gJ2hlYWRlci1yZWZyZXNoZWQnO1xuICAgIGV4cG9ydHMucGFnZUJlZ2luID0gJ3BhZ2luZy1iZWdpbic7XG4gICAgZXhwb3J0cy5wYWdlQ29tcGxldGUgPSAncGFnaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnNvcnRCZWdpbiA9ICdzb3J0aW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnNvcnRDb21wbGV0ZSA9ICdzb3J0aW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLmZpbHRlckJlZ2luID0gJ2ZpbHRlcmluZy1iZWdpbic7XG4gICAgZXhwb3J0cy5maWx0ZXJDb21wbGV0ZSA9ICdmaWx0ZXJpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMuc2VhcmNoQmVnaW4gPSAnc2VhcmNoaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnNlYXJjaENvbXBsZXRlID0gJ3NlYXJjaGluZy1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5yZW9yZGVyQmVnaW4gPSAncmVvcmRlci1iZWdpbic7XG4gICAgZXhwb3J0cy5yZW9yZGVyQ29tcGxldGUgPSAncmVvcmRlci1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5yb3dEcmFnQW5kRHJvcEJlZ2luID0gJ3Jvd2RyYWdhbmRkcm9wLWJlZ2luJztcbiAgICBleHBvcnRzLnJvd0RyYWdBbmREcm9wQ29tcGxldGUgPSAncm93ZHJhZ2FuZGRyb3AtY29tcGxldGUnO1xuICAgIGV4cG9ydHMuZ3JvdXBCZWdpbiA9ICdncm91cGluZy1iZWdpbic7XG4gICAgZXhwb3J0cy5ncm91cENvbXBsZXRlID0gJ2dyb3VwaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnVuZ3JvdXBCZWdpbiA9ICd1bmdyb3VwaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnVuZ3JvdXBDb21wbGV0ZSA9ICd1bmdyb3VwaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnJvd1NlbGVjdGlvbkJlZ2luID0gJ3Jvd3NlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5yb3dTZWxlY3Rpb25Db21wbGV0ZSA9ICdyb3dzZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5jb2x1bW5TZWxlY3Rpb25CZWdpbiA9ICdjb2x1bW5zZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY29sdW1uU2VsZWN0aW9uQ29tcGxldGUgPSAnY29sdW1uc2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMuY2VsbFNlbGVjdGlvbkJlZ2luID0gJ2NlbGxzZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY2VsbFNlbGVjdGlvbkNvbXBsZXRlID0gJ2NlbGxzZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5iZWZvcmVDZWxsRm9jdXNlZCA9ICdiZWZvcmVjZWxsZm9jdXNlZCc7XG4gICAgZXhwb3J0cy5jZWxsRm9jdXNlZCA9ICdjZWxsZm9jdXNlZCc7XG4gICAgZXhwb3J0cy5rZXlQcmVzc2VkID0gJ2tleS1wcmVzc2VkJztcbiAgICBleHBvcnRzLmNsaWNrID0gJ2NsaWNrJztcbiAgICBleHBvcnRzLmRlc3Ryb3kgPSAnZGVzdHJveSc7XG4gICAgZXhwb3J0cy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCA9ICdjb2x1bW4tdmlzaWJsZS1jaGFuZ2VkJztcbiAgICBleHBvcnRzLnNjcm9sbCA9ICdzY3JvbGwnO1xuICAgIGV4cG9ydHMuY29sdW1uV2lkdGhDaGFuZ2VkID0gJ2NvbHVtbi13aWR0aC1jaGFuZ2VkJztcbiAgICBleHBvcnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCA9ICdjb2x1bW4tcG9zaXRpb24tY2hhbmdlZCc7XG4gICAgZXhwb3J0cy5yb3dEcmFnQW5kRHJvcCA9ICdyb3ctZHJhZy1hbmQtZHJvcCc7XG4gICAgZXhwb3J0cy5yb3dzQWRkZWQgPSAncm93cy1hZGRlZCc7XG4gICAgZXhwb3J0cy5yb3dzUmVtb3ZlZCA9ICdyb3dzLXJlbW92ZWQnO1xuICAgIGV4cG9ydHMuY29sdW1uRHJhZ1N0b3AgPSAnY29sdW1uLWRyYWctc3RvcCc7XG4gICAgZXhwb3J0cy5oZWFkZXJEcm9wID0gJ2hlYWRlci1kcm9wJztcbiAgICBleHBvcnRzLmRhdGFTb3VyY2VNb2RpZmllZCA9ICdkYXRhc291cmNlLW1vZGlmaWVkJztcbiAgICBleHBvcnRzLnJlZnJlc2hDb21wbGV0ZSA9ICdyZWZyZXNoLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnJlZnJlc2hWaXJ0dWFsQmxvY2sgPSAncmVmcmVzaC12aXJ0dWFsLWJsb2NrJztcbiAgICBleHBvcnRzLmRibGNsaWNrID0gJ2RibGNsaWNrJztcbiAgICBleHBvcnRzLnRvb2xiYXJSZWZyZXNoID0gJ3Rvb2xiYXItcmVmcmVzaCc7XG4gICAgZXhwb3J0cy5idWxrU2F2ZSA9ICdidWxrLXNhdmUnO1xuICAgIGV4cG9ydHMuYXV0b0NvbCA9ICdhdXRvLWNvbCc7XG4gICAgZXhwb3J0cy50b29sdGlwRGVzdHJveSA9ICd0b29sdGlwLWRlc3Ryb3knO1xuICAgIGV4cG9ydHMudXBkYXRlRGF0YSA9ICd1cGRhdGUtZGF0YSc7XG4gICAgZXhwb3J0cy5lZGl0QmVnaW4gPSAnZWRpdC1iZWdpbic7XG4gICAgZXhwb3J0cy5lZGl0Q29tcGxldGUgPSAnZWRpdC1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5hZGRCZWdpbiA9ICdhZGQtYmVnaW4nO1xuICAgIGV4cG9ydHMuYWRkQ29tcGxldGUgPSAnYWRkLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnNhdmVDb21wbGV0ZSA9ICdzYXZlLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLmRlbGV0ZUJlZ2luID0gJ2RlbGV0ZS1iZWdpbic7XG4gICAgZXhwb3J0cy5kZWxldGVDb21wbGV0ZSA9ICdkZWxldGUtY29tcGxldGUnO1xuICAgIGV4cG9ydHMucHJldmVudEJhdGNoID0gJ3ByZXZlbnQtYmF0Y2gnO1xuICAgIGV4cG9ydHMuZGlhbG9nRGVzdHJveSA9ICdkaWFsb2ctZGVzdHJveSc7XG4gICAgZXhwb3J0cy5jcnVkQWN0aW9uID0gJ2NydWQtQWN0aW9uJztcbiAgICBleHBvcnRzLmFkZERlbGV0ZUFjdGlvbiA9ICdhZGQtZGVsZXRlLUFjdGlvbic7XG4gICAgZXhwb3J0cy5kZXN0cm95Rm9ybSA9ICdkZXN0cm95LWZvcm0nO1xuICAgIGV4cG9ydHMuZG91YmxlVGFwID0gJ2RvdWJsZS10YXAnO1xuICAgIGV4cG9ydHMuYmVmb3JlRXhjZWxFeHBvcnQgPSAnYmVmb3JlRXhjZWxFeHBvcnQnO1xuICAgIGV4cG9ydHMuZXhjZWxFeHBvcnRDb21wbGV0ZSA9ICdleGNlbEV4cG9ydENvbXBsZXRlJztcbiAgICBleHBvcnRzLmV4Y2VsUXVlcnlDZWxsSW5mbyA9ICdleGNlbFF1ZXJ5Q2VsbEluZm8nO1xuICAgIGV4cG9ydHMuYmVmb3JlUGRmRXhwb3J0ID0gJ2JlZm9yZVBkZkV4cG9ydCc7XG4gICAgZXhwb3J0cy5wZGZFeHBvcnRDb21wbGV0ZSA9ICdwZGZFeHBvcnRDb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5wZGZRdWVyeUNlbGxJbmZvID0gJ3BkZlF1ZXJ5Q2VsbEluZm8nO1xuICAgIGV4cG9ydHMuYWNjZXNzUHJlZGljYXRlID0gJ2FjY2Vzcy1wcmVkaWNhdGUnO1xuICAgIGV4cG9ydHMuY29udGV4dE1lbnVDbGljayA9ICdjb250ZXh0TWVudUNsaWNrJztcbiAgICBleHBvcnRzLmZyZWV6ZVJlZnJlc2ggPSAnZnJlZXplcmVmcmVzaCc7XG4gICAgZXhwb3J0cy5jb250ZXh0TWVudU9wZW4gPSAnY29udGV4dE1lbnVPcGVuJztcbiAgICBleHBvcnRzLmNvbHVtbk1lbnVDbGljayA9ICdjb250ZXh0TWVudUNsaWNrJztcbiAgICBleHBvcnRzLmNvbHVtbk1lbnVPcGVuID0gJ2NvbHVtbk1lbnVPcGVuJztcbiAgICBleHBvcnRzLmZpbHRlck9wZW4gPSAnZmlsdGVyT3Blbic7XG4gICAgZXhwb3J0cy5maWx0ZXJEaWFsb2dDcmVhdGVkID0gJ2ZpbHRlckRpYWxvZ0NyZWF0ZWQnO1xuICAgIGV4cG9ydHMuZmlsdGVyTWVudUNsb3NlID0gJ2ZpbHRlci1tZW51LWNsb3NlJztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9iYXNlL2NvbnN0YW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9hY3Rpb25zL2RhdGFcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vcmVuZGVyZXIvY29udGVudC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2hlYWRlci1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2NlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL3N0YWNrZWQtY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvY2FwdGlvbi1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvZXhwYW5kLWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9oZWFkZXItaW5kZW50LXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvZGV0YWlsLWhlYWRlci1pbmRlbnQtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9kZXRhaWwtZXhwYW5kLWNlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfZGF0YV8xLCBlbnVtXzEsIGRhdGFfMSwgcm93XzEsIGNlbGxfMSwgZXZlbnRzLCB1dGlsXzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgaGVhZGVyX3JlbmRlcmVyXzEsIGNlbGxfcmVuZGVyZXJfMSwgaGVhZGVyX2NlbGxfcmVuZGVyZXJfMSwgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEsIGluZGVudF9jZWxsX3JlbmRlcmVyXzEsIGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xLCBleHBhbmRfY2VsbF9yZW5kZXJlcl8xLCBoZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEsIGRldGFpbF9oZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEsIGRldGFpbF9leHBhbmRfY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSZW5kZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgZGF0YV8xLkRhdGEocGFyZW50LCBsb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IGxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ2FyaWFTZXJ2aWNlJyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlciA9IHRoaXMucmVuZGVyZXIuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyID0gdGhpcy5yZW5kZXJlci5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50KTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIucmVuZGVyUGFuZWwoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlclBhbmVsKCk7XG4gICAgICAgICAgICBpZiAoZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbXB0eVJvdyhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hEYXRhTWFuYWdlcigpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUgPT09IHZvaWQgMCkgeyBlID0geyByZXF1ZXN0VHlwZTogJ3JlZnJlc2gnIH07IH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShlLnJlcXVlc3RUeXBlICsgXCItYmVnaW5cIiwgZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgZSk7XG4gICAgICAgICAgICBpZiAoZS5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5yZXF1ZXN0VHlwZSA9PT0gJ3NhdmUnICYmIGUuYWN0aW9uID09PSAnYWRkJykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGF0YU1hbmFnZXIoZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUucmVmcmVzaENvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoRGF0YU1hbmFnZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChhcmdzID09PSB2b2lkIDApIHsgYXJncyA9IHt9OyB9XG4gICAgICAgICAgICBpZiAoYXJncy5yZXF1ZXN0VHlwZSAhPT0gJ3ZpcnR1YWxzY3JvbGwnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2hvd1NwaW5uZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZWFkeSA9IHRoaXMuZGF0YS5kYXRhTWFuYWdlci5yZWFkeTtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0QnVzeSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZCwgdHJ1ZSk7XG4gICAgICAgICAgICB2YXIgZGF0YU1hbmFnZXIgPSB0aGlzLmRhdGEuZ2V0RGF0YShhcmdzLCB0aGlzLmRhdGEuZ2VuZXJhdGVRdWVyeSgpLnJlcXVpcmVzQ291bnQoKSk7XG4gICAgICAgICAgICBpZiAoIXJlYWR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuZGlzYWJsZVBhZ2VXaXNlQWdncmVnYXRlcyAmJiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyID0gZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMudmFsaWRhdGVHcm91cFJlY29yZHMoZSk7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkYXRhTWFuYWdlci50aGVuKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5kYXRhTWFuYWdlclN1Y2Nlc3MoZSwgYXJncyk7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZGF0YU1hbmFnZXJGYWlsdXJlKGUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5zZW5kQnVsa1JlcXVlc3QgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5kYXRhLnNhdmVDaGFuZ2VzKGFyZ3MuY2hhbmdlcywgdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKVswXSk7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2Uub2ZmbGluZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaERhdGFNYW5hZ2VyKHsgcmVxdWVzdFR5cGU6ICdiYXRjaHNhdmUnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZG1TdWNjZXNzKGUsIGFyZ3MpOyB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmRtRmFpbHVyZShlKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZG1TdWNjZXNzID0gZnVuY3Rpb24gKGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXJTdWNjZXNzKGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmRtRmFpbHVyZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyRmFpbHVyZShlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZW5kZXJFbXB0eVJvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZW1wdHlSb3codHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZW1wdHlSb3cgPSBmdW5jdGlvbiAoaXNUcmlnZ2VyKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gdGhpcy5jb250ZW50UmVuZGVyZXIuZ2V0VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuICAgICAgICAgICAgdmFyIHRyO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGJvZHkpO1xuICAgICAgICAgICAgdGJvZHkgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB0ciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtZW1wdHlyb3cnIH0pO1xuICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICBpbm5lckhUTUw6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnRW1wdHlSZWNvcmQnKSxcbiAgICAgICAgICAgICAgICBhdHRyczogeyBjb2xzcGFuOiBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5yZW5kZXJFbXB0eSh0Ym9keSk7XG4gICAgICAgICAgICBpZiAoaXNUcmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuZGF0YUJvdW5kLCB7fSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5vbkVtcHR5LCB7IHJvd3M6IFtuZXcgcm93XzEuUm93KHsgaXNEYXRhUm93OiB0cnVlLCBjZWxsczogW25ldyBjZWxsXzEuQ2VsbCh7IGlzRGF0YUNlbGw6IHRydWUsIHZpc2libGU6IHRydWUgfSldIH0pXSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS51cGRhdGVDb2x1bW5UeXBlID0gZnVuY3Rpb24gKHJlY29yZCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHJlY29yZCAmJiByZWNvcmQuaXRlbXMgPyByZWNvcmQuaXRlbXNbMF0gOiByZWNvcmQ7XG4gICAgICAgICAgICB2YXIgZm10ciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCd2YWx1ZUZvcm1hdHRlcicpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGVqMl9iYXNlXzIuZ2V0VmFsdWUoY29sdW1uc1tpXS5maWVsZCB8fCAnJywgZGF0YSk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29sVHlwZURlZiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29sdW1uc1tpXS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnR5cGUgPSB2YWx1ZS5nZXREYXkgPyAodmFsdWUuZ2V0SG91cnMoKSA+IDAgfHwgdmFsdWUuZ2V0TWludXRlcygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmdldFNlY29uZHMoKSA+IDAgfHwgdmFsdWUuZ2V0TWlsbGlzZWNvbmRzKCkgPiAwID8gJ2RhdGV0aW1lJyA6ICdkYXRlJykgOiB0eXBlb2YgKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChjb2x1bW5zW2ldLmZvcm1hdCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEuc2V0Rm9ybWF0dGVyKHRoaXMubG9jYXRvciwgY29sdW1uc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWNvbHVtbnNbaV0uZm9ybWF0ICYmIGNvbHVtbnNbaV0udHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0uc2V0UGFyc2VyKGZtdHIuZ2V0UGFyc2VyRnVuY3Rpb24oeyBmb3JtYXQ6ICduMicgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnR5cGUgPSBjb2x1bW5zW2ldLnR5cGUgfHwgbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZGF0YU1hbmFnZXJTdWNjZXNzID0gZnVuY3Rpb24gKGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZm9yZURhdGFCb3VuZCwgZSk7XG4gICAgICAgICAgICB2YXIgbGVuID0gT2JqZWN0LmtleXMoZS5yZXN1bHQpLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbHRpcERlc3Ryb3ksIHt9KTtcbiAgICAgICAgICAgIGdPYmouY3VycmVudFZpZXdEYXRhID0gZS5yZXN1bHQ7XG4gICAgICAgICAgICBpZiAoIWxlbiAmJiBlLmNvdW50ICYmIGdPYmouYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICBnT2JqLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA9IE1hdGguY2VpbChlLmNvdW50IC8gZ09iai5wYWdlU2V0dGluZ3MucGFnZVNpemUpO1xuICAgICAgICAgICAgICAgIGdPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aCAmJiBsZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZXNPbkluaXRpYWxSZW5kZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDb2xUeXBlRGVmKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5UeXBlKGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5kYXRhUmVhZHksIGVqMl9iYXNlXzIuZXh0ZW5kKHsgY291bnQ6IGUuY291bnQsIHJlc3VsdDogZS5yZXN1bHQsIGFnZ3JlZ2F0ZXM6IGUuYWdncmVnYXRlcyB9LCBhcmdzKSk7XG4gICAgICAgICAgICBpZiAoZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoIHx8IChhcmdzICYmIGFyZ3MucmVxdWVzdFR5cGUgPT09ICd1bmdyb3VwaW5nJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlclJlbmRlcmVyLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlZnJlc2hDb250ZW50Um93cyhhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQodGhpcy5sMTBuLmdldENvbnN0YW50KCdFbXB0eURhdGFTb3VyY2VFcnJvcicpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5zZXRSb3dFbGVtZW50cyhbXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJFbXB0eVJvdygpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSAoYXJncy5yZXF1ZXN0VHlwZSB8fCAnJykudG9Mb3dlckNhc2UoKSArICctY29tcGxldGUnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoYWN0aW9uLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5kYXRhTWFuYWdlckZhaWx1cmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLCB7IGJ1c3k6IGZhbHNlLCBpbnZhbGlkOiB0cnVlIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uRmFpbHVyZSwgeyBlcnJvcjogZSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmN1cnJlbnRWaWV3RGF0YSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJFbXB0eVJvdygpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS51cGRhdGVzT25Jbml0aWFsUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuYnVpbGRDb2x1bW5zKGUucmVzdWx0WzBdKTtcbiAgICAgICAgICAgIHV0aWxfMS5wcmVwYXJlQ29sdW1ucyh0aGlzLnBhcmVudC5jb2x1bW5zKTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIucmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmF1dG9Db2wsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5idWlsZENvbHVtbnMgPSBmdW5jdGlvbiAocmVjb3JkKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IE9iamVjdC5rZXlzKHJlY29yZCk7XG4gICAgICAgICAgICB2YXIgY29scyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb2xzW2ldID0geyAnZmllbGQnOiBjb2x1bW5zW2ldIH07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHNbaV0ud2lkdGggPSAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2xzW2ldLndpZHRoKSA/IGNvbHNbaV0ud2lkdGggOiAyMDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuY29sdW1ucyA9IGNvbHM7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuaW5zdGFudGlhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyLCBuZXcgaGVhZGVyX3JlbmRlcmVyXzEuSGVhZGVyUmVuZGVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCwgbmV3IGNvbnRlbnRfcmVuZGVyZXJfMS5Db250ZW50UmVuZGVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIHZhciBjZWxscmVuZGVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5IZWFkZXIsIG5ldyBoZWFkZXJfY2VsbF9yZW5kZXJlcl8xLkhlYWRlckNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRGF0YSwgbmV3IGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLlN0YWNrZWRIZWFkZXIsIG5ldyBzdGFja2VkX2NlbGxfcmVuZGVyZXJfMS5TdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5JbmRlbnQsIG5ldyBpbmRlbnRfY2VsbF9yZW5kZXJlcl8xLkluZGVudENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuR3JvdXBDYXB0aW9uLCBuZXcgY2FwdGlvbl9jZWxsX3JlbmRlcmVyXzEuR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb25FbXB0eSwgbmV3IGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xLkdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5FeHBhbmQsIG5ldyBleHBhbmRfY2VsbF9yZW5kZXJlcl8xLkV4cGFuZENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuSGVhZGVySW5kZW50LCBuZXcgaGVhZGVyX2luZGVudF9yZW5kZXJlcl8xLkhlYWRlckluZGVudENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuU3RhY2tlZEhlYWRlciwgbmV3IHN0YWNrZWRfY2VsbF9yZW5kZXJlcl8xLlN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkRldGFpbEhlYWRlciwgbmV3IGRldGFpbF9oZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEuRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5EZXRhaWxFeHBhbmQsIG5ldyBkZXRhaWxfZXhwYW5kX2NlbGxfcmVuZGVyZXJfMS5EZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbExvYWQsIHRoaXMuaW5zdGFudGlhdGVSZW5kZXJlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMubW9kZWxDaGFuZ2VkLCB0aGlzLnJlZnJlc2gsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJlZnJlc2hDb21wbGV0ZSwgdGhpcy5yZWZyZXNoQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmJ1bGtTYXZlLCB0aGlzLnNlbmRCdWxrUmVxdWVzdCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUudmFsaWRhdGVHcm91cFJlY29yZHMgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGUucmVzdWx0Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBncm91cDAgPSBlLnJlc3VsdFswXTtcbiAgICAgICAgICAgIHZhciBncm91cE4gPSBlLnJlc3VsdFtpbmRleF07XG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlID0gW107XG4gICAgICAgICAgICB2YXIgYWRkV2hlcmUgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICBbZ3JvdXAwLCBncm91cE5dLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVkaWNhdGUucHVzaChuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUoJ2ZpZWxkJywgJz09JywgZ3JvdXAuZmllbGQpLmFuZChfdGhpcy5nZXRQcmVkaWNhdGUoJ2tleScsICdlcXVhbCcsIGdyb3VwLmtleSkpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpbnB1dC53aGVyZShlajJfZGF0YV8xLlByZWRpY2F0ZS5vcihwcmVkaWNhdGUpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpO1xuICAgICAgICAgICAgYWRkV2hlcmUocXVlcnkpO1xuICAgICAgICAgICAgdmFyIGN1ckRtID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoZS5yZXN1bHQpO1xuICAgICAgICAgICAgdmFyIGN1ckZpbHRlciA9IGN1ckRtLmV4ZWN1dGVMb2NhbChxdWVyeSk7XG4gICAgICAgICAgICB2YXIgbmV3UXVlcnkgPSB0aGlzLmRhdGEuZ2VuZXJhdGVRdWVyeSh0cnVlKTtcbiAgICAgICAgICAgIHZhciByUHJlZGljYXRlID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLmlzUmVtb3RlKCkpIHtcbiAgICAgICAgICAgICAgICBbZ3JvdXAwLCBncm91cE5dLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByUHJlZGljYXRlLnB1c2goX3RoaXMuZ2V0UHJlZGljYXRlKGdyb3VwLmZpZWxkLCAnZXF1YWwnLCBncm91cC5rZXkpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBuZXdRdWVyeS53aGVyZShlajJfZGF0YV8xLlByZWRpY2F0ZS5vcihyUHJlZGljYXRlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRXaGVyZShuZXdRdWVyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgZWoyX2RhdGFfMS5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhpcy5kYXRhLmdldERhdGEoe30sIG5ld1F1ZXJ5KS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlR3JvdXBJbmZvKGN1ckZpbHRlciwgci5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZSk7XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gZGVmZXJyZWQucmVqZWN0KGUpOyB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmdldFByZWRpY2F0ZSA9IGZ1bmN0aW9uIChrZXksIG9wZXJhdG9yLCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuZ2V0RGF0ZVByZWRpY2F0ZSh7IGZpZWxkOiBrZXksIG9wZXJhdG9yOiBvcGVyYXRvciwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShrZXksIG9wZXJhdG9yLCB2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUudXBkYXRlR3JvdXBJbmZvID0gZnVuY3Rpb24gKGN1cnJlbnQsIHVudG91Y2hlZCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkbSA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHVudG91Y2hlZCk7XG4gICAgICAgICAgICBjdXJyZW50LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgICAgIHZhciB1R3JvdXAgPSBkbS5leGVjdXRlTG9jYWwobmV3IGVqMl9kYXRhXzEuUXVlcnkoKVxuICAgICAgICAgICAgICAgICAgICAud2hlcmUobmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKCdmaWVsZCcsICc9PScsIGVsZW1lbnQuZmllbGQpLmFuZChfdGhpcy5nZXRQcmVkaWNhdGUoJ2tleScsICdlcXVhbCcsIGVsZW1lbnQua2V5KSkpKVswXTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNvdW50ID0gdUdyb3VwLmNvdW50O1xuICAgICAgICAgICAgICAgIHZhciBpdGVtR3JvdXAgPSBlbGVtZW50Lml0ZW1zO1xuICAgICAgICAgICAgICAgIHZhciB1R3JvdXBJdGVtID0gdUdyb3VwLml0ZW1zO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtR3JvdXAuR3JvdXBHdWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXRlbXMgPSBfdGhpcy51cGRhdGVHcm91cEluZm8oZWxlbWVudC5pdGVtcywgdUdyb3VwLml0ZW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LmFnZ3JlZ2F0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3cuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eXBlcyA9IGNvbHVtbi50eXBlIGluc3RhbmNlb2YgQXJyYXkgPyBjb2x1bW4udHlwZSA6IFtjb2x1bW4udHlwZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGNvbHVtbi5maWVsZCArICcgLSAnICsgdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFnZ3JlZ2F0ZXNba2V5XSA9IHV0aWxfMS5jYWxjdWxhdGVBZ2dyZWdhdGUodHlwZSwgaXRlbUdyb3VwLmxldmVsID8gdUdyb3VwSXRlbS5yZWNvcmRzIDogdUdyb3VwLml0ZW1zLCBjb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUmVuZGVyID0gUmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL3JlbmRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4vcm93LXJlbmRlcmVyXCIsIFwiLi9jZWxsLW1lcmdlLXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4uL3NlcnZpY2VzL2dyb3VwLW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzLCByb3dfcmVuZGVyZXJfMSwgY2VsbF9tZXJnZV9yZW5kZXJlcl8xLCByb3dfbW9kZWxfZ2VuZXJhdG9yXzEsIGdyb3VwX21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb250ZW50UmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29udGVudFJlbmRlcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm5vdGlmeShldmVudHMuY29sdW1uRHJvcCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCBkcm9wcGVkRWxlbWVudDogZS5kcm9wcGVkRWxlbWVudCB9KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZShlLmRyb3BwZWRFbGVtZW50KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnJhZkNhbGxiYWNrID0gZnVuY3Rpb24gKGFyZ3MpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYXJpYVNlcnZpY2Uuc2V0QnVzeShfdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNvbnRlbnRSZWFkeSwgeyByb3dzOiBfdGhpcy5yb3dzLCBhcmdzOiBhcmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuZGF0YUJvdW5kLCB7fSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gKGFyZ3MucmVxdWVzdFR5cGUgfHwgJycpLnRvTG93ZXJDYXNlKCkgKyAnLWNvbXBsZXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5ub3RpZnkoYWN0aW9uLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdhcmlhU2VydmljZScpO1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0b3IgPSB0aGlzLmdldE1vZGVsR2VuZXJhdG9yKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMuc2V0VmlzaWJsZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sR3JvdXBSZWZyZXNoLCB0aGlzLmNvbEdyb3VwUmVmcmVzaCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUucmVuZGVyUGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyaWRjb250ZW50JyB9KTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY29udGVudCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBpbm5lckRpdi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyhpbm5lckRpdiwgeyBidXN5OiBmYWxzZSB9KTtcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbm5lckRpdik7XG4gICAgICAgICAgICB0aGlzLnNldFBhbmVsKGRpdik7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudERpdiA9IHRoaXMuZ2V0UGFuZWwoKTtcbiAgICAgICAgICAgIGNvbnRlbnREaXYuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVDb250ZW50VGFibGUoKSk7XG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKGNvbnRlbnREaXYucXVlcnlTZWxlY3RvcignLmUtdGFibGUnKSk7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnModGhpcy5nZXRUYWJsZSgpLCB7XG4gICAgICAgICAgICAgICAgbXVsdGlzZWxlY3RhYmxlOiB0aGlzLnBhcmVudC5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnbXVsdGlwbGUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvbnRlbnREcm9wKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmNyZWF0ZUNvbnRlbnRUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXRhYmxlJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbHNwYWNpbmc6ICcwLjI1cHgnLCByb2xlOiAnZ3JpZCcsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgJ19jb250ZW50X3RhYmxlJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRDb2xHcm91cCh0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRoZWFkZXInKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0aGlzLmdldENvbEdyb3VwKCkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0Ym9keScpKTtcbiAgICAgICAgICAgIGlubmVyRGl2LmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgICAgIHJldHVybiBpbm5lckRpdjtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUucmVmcmVzaENvbnRlbnRSb3dzID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoYXJncyA9PT0gdm9pZCAwKSB7IGFyZ3MgPSB7fTsgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkYXRhU291cmNlID0gZ09iai5jdXJyZW50Vmlld0RhdGE7XG4gICAgICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIHZhciBoZHJmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB0cjtcbiAgICAgICAgICAgIHZhciB0Ym9keTtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgbnVsbCwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdGhpcy5yb3dFbGVtZW50cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICB2YXIgbW9kZWxEYXRhID0gdGhpcy5nZW5lcmF0b3IuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2UsIGFyZ3MpO1xuICAgICAgICAgICAgdmFyIGlkeCA9IG1vZGVsRGF0YVswXS5jZWxsc1swXS5pbmRleDtcbiAgICAgICAgICAgIHZhciBmQ29udCA9IHRoaXMuZ2V0UGFuZWwoKS5xdWVyeVNlbGVjdG9yKCcuZS1mcm96ZW5jb250ZW50Jyk7XG4gICAgICAgICAgICB2YXIgbUNvbnQgPSB0aGlzLmdldFBhbmVsKCkucXVlcnlTZWxlY3RvcignLmUtbW92YWJsZWNvbnRlbnQnKTtcbiAgICAgICAgICAgIHZhciBjb250ID0gdGhpcy5nZXRQYW5lbCgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWNvbnRlbnQnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsTWVyZ2UgPSBuZXcgY2VsbF9tZXJnZV9yZW5kZXJlcl8xLkNlbGxNZXJnZVJlbmRlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICAgICAgY2VsbE1lcmdlLnVwZGF0ZVZpcnR1YWxDZWxscyhtb2RlbERhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgJiYgaWR4ID49IHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICB0Ym9keSA9IG1Db250LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0Ym9keSA9IHRoaXMuZ2V0VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG1vZGVsRGF0YS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghZ09iai5yb3dUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0ciA9IHJvdy5yZW5kZXIobW9kZWxEYXRhW2ldLCBjb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGdPYmouZ2V0Um93VGVtcGxhdGUoKShlajJfYmFzZV8yLmV4dGVuZCh7IGluZGV4OiBpIH0sIGRhdGFTb3VyY2VbaV0pLCBnT2JqLCAncm93VGVtcGxhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBlbGVtZW50cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzVFIgPSBlbGVtZW50c1tqXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndHInO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVFIgfHwgKGVsZW1lbnRzW2pdLnF1ZXJ5U2VsZWN0b3JBbGwgJiYgZWxlbWVudHNbal0ucXVlcnlTZWxlY3RvckFsbCgndHInKS5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHIgPSBpc1RSID8gZWxlbWVudHNbal0gOiBlbGVtZW50c1tqXS5xdWVyeVNlbGVjdG9yKCd0cicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmZyb3plblJvd3MgJiYgaSA8IGdPYmouZnJvemVuUm93cykge1xuICAgICAgICAgICAgICAgICAgICBoZHJmcmFnLmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaChtb2RlbERhdGFbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlbERhdGFbaV0uaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZCA9IHRyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGw6bm90KC5lLWhpZGUpJylbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGQuY2xhc3NMaXN0LmFkZCgnZS1kZXRhaWxyb3d2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dFbGVtZW50cy5wdXNoKHRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRoaXMuZ2V0VGFibGUoKSwgeyBjb2xjb3VudDogZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoLnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuICAgICAgICAgICAgdXRpbF8xLmdldFVwZGF0ZVVzaW5nUmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGRyVGJvZHk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUodGJvZHkpO1xuICAgICAgICAgICAgICAgIHRib2R5ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoZnJhZyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpZHggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzTG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBmQ29udC5xdWVyeVNlbGVjdG9yKCd0YWJsZScpLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZC5zdHlsZS5vdmVyZmxvd1kgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1Db250LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJykuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmZyb3plblJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhkclRib2R5ID0gZ09iai5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvcihpZHggPT09IDAgPyAnLmUtZnJvemVuaGVhZGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJy5lLW1vdmFibGVoZWFkZXInKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGRyVGJvZHkuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZHJUYm9keS5hcHBlbmRDaGlsZChoZHJmcmFnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmQ29udC5zdHlsZS5oZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgID0gKChtQ29udC5vZmZzZXRIZWlnaHQpIC0gMTcpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgbUNvbnQuc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmFwcGVuZENvbnRlbnQodGJvZHksIGZyYWcsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5mcm96ZW5Sb3dzICYmICFnT2JqLmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaGRyVGJvZHkgPSBnT2JqLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICAgICAgICAgICAgICAgICAgaGRyVGJvZHkuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGhkclRib2R5LmFwcGVuZENoaWxkKGhkcmZyYWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5mcm96ZW5Sb3dzICYmIGlkeCA9PT0gMCAmJiBjb250Lm9mZnNldEhlaWdodCA9PT0gZ09iai5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udC5zdHlsZS5oZWlnaHQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgKGNvbnQub2Zmc2V0SGVpZ2h0IC1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLm9mZnNldEhlaWdodCkgKyAncHgnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5mcm96ZW5Db2x1bW5zICYmIGlkeCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZWZyZXNoQ29udGVudFJvd3MoYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGhpcy5yYWZDYWxsYmFjayhhcmdzKSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmFwcGVuZENvbnRlbnQgPSBmdW5jdGlvbiAodGJvZHksIGZyYWcsIGFyZ3MpIHtcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0UGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50UGFuZWw7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldFBhbmVsID0gZnVuY3Rpb24gKHBhbmVsKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRQYW5lbCA9IHBhbmVsO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRUYWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0VGFibGUgPSBmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFRhYmxlID0gdGFibGU7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldFJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3dzO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRSb3dFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd0VsZW1lbnRzO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRSb3dFbGVtZW50cyA9IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgICAgICAgdGhpcy5yb3dFbGVtZW50cyA9IGVsZW1lbnRzO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRDb2xHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbGdyb3VwO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRDb2xHcm91cCA9IGZ1bmN0aW9uIChjb2xHcm91cCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sZ3JvdXAgPSBjb2xHcm91cDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMuZ2V0Um93cygpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgdGVzdFJvdztcbiAgICAgICAgICAgIHJvd3Muc29tZShmdW5jdGlvbiAocikgeyBpZiAoci5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICB0ZXN0Um93ID0gcjtcbiAgICAgICAgICAgIH0gcmV0dXJuIHIuaXNEYXRhUm93OyB9KTtcbiAgICAgICAgICAgIHZhciB0YXNrcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDAsIGNsZW4gPSBjb2x1bW5zLmxlbmd0aDsgYyA8IGNsZW47IGMrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zW2NdO1xuICAgICAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLnBhcmVudC5nZXROb3JtYWxpemVkQ29sdW1uSW5kZXgoY29sdW1uLnVpZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FuU2tpcChjb2x1bW4sIHRlc3RSb3csIGlkeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkaXNwbGF5VmFsID0gY29sdW1uLnZpc2libGUgPT09IHRydWUgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZ2V0Q29sR3JvdXAoKS5jaGlsZE5vZGVzW2lkeF0sIHsgJ2Rpc3BsYXknOiBkaXNwbGF5VmFsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ29udGVudFJvd3MoeyByZXF1ZXN0VHlwZTogJ3JlZnJlc2gnIH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5jb2xHcm91cFJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRDb2xHcm91cCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbEdyb3VwID0gdGhpcy5nZXRDb2xHcm91cCgpO1xuICAgICAgICAgICAgICAgIGNvbEdyb3VwLmlubmVySFRNTCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGhlYWRlcicpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29sR3JvdXAoY29sR3JvdXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5pbml0aWFsaXplQ29udGVudERyb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRyb3AgPSBuZXcgZWoyX2Jhc2VfMS5Ecm9wcGFibGUoZ09iai5nZXRDb250ZW50KCksIHtcbiAgICAgICAgICAgICAgICBhY2NlcHQ6ICcuZS1kcmFnY2xvbmUnLFxuICAgICAgICAgICAgICAgIGRyb3A6IHRoaXMuZHJvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmNhblNraXAgPSBmdW5jdGlvbiAoY29sdW1uLCByb3csIGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChyb3cpIHx8XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udmlzaWJsZSkgfHxcbiAgICAgICAgICAgICAgICByb3cuY2VsbHNbaW5kZXhdLnZpc2libGUgPT09IGNvbHVtbi52aXNpYmxlO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRNb2RlbEdlbmVyYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvciA9IHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcgPyBuZXcgZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCkgOiBuZXcgcm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUucmVuZGVyRW1wdHkgPSBmdW5jdGlvbiAodGJvZHkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldFNlbGVjdGlvbiA9IGZ1bmN0aW9uICh1aWQsIHNldCwgY2xlYXJBbGwpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0Um93cygpLmZpbHRlcihmdW5jdGlvbiAocm93KSB7IHJldHVybiBjbGVhckFsbCB8fCB1aWQgPT09IHJvdy51aWQ7IH0pXG4gICAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gcm93LmlzU2VsZWN0ZWQgPSBzZXQ7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRSb3dCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtpbmRleF07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb250ZW50UmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db250ZW50UmVuZGVyID0gQ29udGVudFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9jb250ZW50LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4vY2VsbC1tZXJnZS1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGNvbnN0YW50XzEsIHV0aWxfMSwgZW51bV8xLCBjZWxsX21lcmdlX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJvd1JlbmRlcmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUm93UmVuZGVyZXIoc2VydmljZUxvY2F0b3IsIGNlbGxUeXBlLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndHInLCB7IGF0dHJzOiB7IHJvbGU6ICdyb3cnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLmNlbGxUeXBlID0gY2VsbFR5cGU7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBSb3dSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHJvdywgY29sdW1ucywgYXR0cmlidXRlcywgcm93VGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZnJlc2hSb3cocm93LCBjb2x1bW5zLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJvd1JlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKHJvdywgY29sdW1ucywgaXNDaGFuZ2VkLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSkge1xuICAgICAgICAgICAgaWYgKGlzQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHJvdy5kYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHJvdy5jaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hNZXJnZUNlbGxzKHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtdWlkPScgKyByb3cudWlkICsgJ10nKTtcbiAgICAgICAgICAgIHZhciB0ciA9IHRoaXMucmVmcmVzaFJvdyhyb3csIGNvbHVtbnMsIGF0dHJpYnV0ZXMsIHJvd1RlbXBsYXRlKTtcbiAgICAgICAgICAgIHZhciBjZWxscyA9IFtdLnNsaWNlLmNhbGwodHIuY2VsbHMpO1xuICAgICAgICAgICAgbm9kZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY2VsbHNfMSA9IGNlbGxzOyBfaSA8IGNlbGxzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBjZWxsc18xW19pXTtcbiAgICAgICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGNlbGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSb3dSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaFJvdyA9IGZ1bmN0aW9uIChyb3csIGNvbHVtbnMsIGF0dHJpYnV0ZXMsIHJvd1RlbXBsYXRlKSB7XG4gICAgICAgICAgICB2YXIgdHIgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB2YXIgcm93QXJncyA9IHsgZGF0YTogcm93LmRhdGEgfTtcbiAgICAgICAgICAgIHZhciBjZWxsQXJncyA9IHsgZGF0YTogcm93LmRhdGEgfTtcbiAgICAgICAgICAgIHZhciBhdHRyQ29weSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBhdHRyaWJ1dGVzLCB7fSk7XG4gICAgICAgICAgICBpZiAocm93LmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgIHJvdy5pc1NlbGVjdGVkID0gdGhpcy5wYXJlbnQuZ2V0U2VsZWN0ZWRSb3dJbmRleGVzKCkuaW5kZXhPZihyb3cuaW5kZXgpID4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJ1aWxkQXR0cmlidXRlRnJvbVJvdyh0ciwgcm93KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyh0ciwgYXR0ckNvcHkpO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyh0ciwgcm93LmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgdmFyIGNlbGxSZW5kZXJlckZhY3QgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3cuY2VsbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvdy5jZWxsc1tpXTtcbiAgICAgICAgICAgICAgICBjZWxsLmlzU2VsZWN0ZWQgPSByb3cuaXNTZWxlY3RlZDtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbFJlbmRlcmVyID0gY2VsbFJlbmRlcmVyRmFjdC5nZXRDZWxsUmVuZGVyZXIocm93LmNlbGxzW2ldLmNlbGxUeXBlIHx8IGVudW1fMS5DZWxsVHlwZS5EYXRhKTtcbiAgICAgICAgICAgICAgICB2YXIgdGQgPSBjZWxsUmVuZGVyZXIucmVuZGVyKHJvdy5jZWxsc1tpXSwgcm93LmRhdGEsIHsgJ2luZGV4JzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQocm93LmluZGV4KSA/IHJvdy5pbmRleC50b1N0cmluZygpIDogJycgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5jZWxsc1tpXS5jZWxsVHlwZSA9PT0gZW51bV8xLkNlbGxUeXBlLkRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihjb25zdGFudF8xLnF1ZXJ5Q2VsbEluZm8sIGVqMl9iYXNlXzEuZXh0ZW5kKGNlbGxBcmdzLCB7IGNlbGw6IHRkLCBjb2x1bW46IGNlbGwuY29sdW1uLCBjb2xTcGFuOiAxIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxBcmdzLmNvbFNwYW4gPiAxIHx8IHJvdy5jZWxsc1tpXS5jZWxsU3BhbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsTWVyZ2UgPSBuZXcgY2VsbF9tZXJnZV9yZW5kZXJlcl8xLkNlbGxNZXJnZVJlbmRlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZCA9IGNlbGxNZXJnZS5yZW5kZXIoY2VsbEFyZ3MsIHJvdywgaSwgdGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghcm93LmNlbGxzW2ldLmlzU3Bhbm5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGNvbnN0YW50XzEucm93RGF0YUJvdW5kLCBlajJfYmFzZV8xLmV4dGVuZChyb3dBcmdzLCB7IHJvdzogdHIgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5jc3NDbGFzcykge1xuICAgICAgICAgICAgICAgIHRyLmNsYXNzTGlzdC5hZGQocm93LmNzc0NsYXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cjtcbiAgICAgICAgfTtcbiAgICAgICAgUm93UmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hNZXJnZUNlbGxzID0gZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHJvdy5jZWxsczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBjZWxsLmlzU3Bhbm5lZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgUm93UmVuZGVyZXIucHJvdG90eXBlLmJ1aWxkQXR0cmlidXRlRnJvbVJvdyA9IGZ1bmN0aW9uICh0ciwgcm93KSB7XG4gICAgICAgICAgICB2YXIgYXR0ciA9IHt9O1xuICAgICAgICAgICAgdmFyIHByb3AgPSB7ICdyb3dpbmRleCc6ICdhcmlhLXJvd2luZGV4JywgJ2RhdGFVSUQnOiAnZGF0YS11aWQnLCAnYXJpYVNlbGVjdGVkJzogJ2FyaWEtc2VsZWN0ZWQnIH07XG4gICAgICAgICAgICB2YXIgY2xhc3NlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHJvdy5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goJ2Utcm93Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LmlzQWx0Um93KSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdlLWFsdHJvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHJvdy5pbmRleCkpIHtcbiAgICAgICAgICAgICAgICBhdHRyW3Byb3Aucm93aW5kZXhdID0gcm93LmluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5yb3dTcGFuKSB7XG4gICAgICAgICAgICAgICAgYXR0ci5yb3dTcGFuID0gcm93LnJvd1NwYW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LnVpZCkge1xuICAgICAgICAgICAgICAgIGF0dHJbcHJvcC5kYXRhVUlEXSA9IHJvdy51aWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LmlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBhdHRyW3Byb3AuYXJpYVNlbGVjdGVkXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LnZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHIuY2xhc3MgPSBjbGFzc2VzO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyh0ciwgYXR0cik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSb3dSZW5kZXJlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUm93UmVuZGVyZXIgPSBSb3dSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9yb3ctcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENlbGxUeXBlO1xuICAgIChmdW5jdGlvbiAoQ2VsbFR5cGUpIHtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJEYXRhXCJdID0gMF0gPSBcIkRhdGFcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJIZWFkZXJcIl0gPSAxXSA9IFwiSGVhZGVyXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiU3VtbWFyeVwiXSA9IDJdID0gXCJTdW1tYXJ5XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiR3JvdXBTdW1tYXJ5XCJdID0gM10gPSBcIkdyb3VwU3VtbWFyeVwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkNhcHRpb25TdW1tYXJ5XCJdID0gNF0gPSBcIkNhcHRpb25TdW1tYXJ5XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRmlsdGVyXCJdID0gNV0gPSBcIkZpbHRlclwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkluZGVudFwiXSA9IDZdID0gXCJJbmRlbnRcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJHcm91cENhcHRpb25cIl0gPSA3XSA9IFwiR3JvdXBDYXB0aW9uXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiR3JvdXBDYXB0aW9uRW1wdHlcIl0gPSA4XSA9IFwiR3JvdXBDYXB0aW9uRW1wdHlcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJFeHBhbmRcIl0gPSA5XSA9IFwiRXhwYW5kXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiSGVhZGVySW5kZW50XCJdID0gMTBdID0gXCJIZWFkZXJJbmRlbnRcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJTdGFja2VkSGVhZGVyXCJdID0gMTFdID0gXCJTdGFja2VkSGVhZGVyXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRGV0YWlsSGVhZGVyXCJdID0gMTJdID0gXCJEZXRhaWxIZWFkZXJcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJEZXRhaWxFeHBhbmRcIl0gPSAxM10gPSBcIkRldGFpbEV4cGFuZFwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkNvbW1hbmRDb2x1bW5cIl0gPSAxNF0gPSBcIkNvbW1hbmRDb2x1bW5cIjtcbiAgICB9KShDZWxsVHlwZSA9IGV4cG9ydHMuQ2VsbFR5cGUgfHwgKGV4cG9ydHMuQ2VsbFR5cGUgPSB7fSkpO1xuICAgIHZhciBSZW5kZXJUeXBlO1xuICAgIChmdW5jdGlvbiAoUmVuZGVyVHlwZSkge1xuICAgICAgICBSZW5kZXJUeXBlW1JlbmRlclR5cGVbXCJIZWFkZXJcIl0gPSAwXSA9IFwiSGVhZGVyXCI7XG4gICAgICAgIFJlbmRlclR5cGVbUmVuZGVyVHlwZVtcIkNvbnRlbnRcIl0gPSAxXSA9IFwiQ29udGVudFwiO1xuICAgICAgICBSZW5kZXJUeXBlW1JlbmRlclR5cGVbXCJTdW1tYXJ5XCJdID0gMl0gPSBcIlN1bW1hcnlcIjtcbiAgICB9KShSZW5kZXJUeXBlID0gZXhwb3J0cy5SZW5kZXJUeXBlIHx8IChleHBvcnRzLlJlbmRlclR5cGUgPSB7fSkpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2Jhc2UvZW51bS5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2VudW1cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB1dGlsXzEsIGVudW1fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2VsbE1lcmdlUmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ2VsbE1lcmdlUmVuZGVyKHNlcnZpY2VMb2NhdG9yLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGxBcmdzLCByb3csIGksIHRkKSB7XG4gICAgICAgICAgICB2YXIgY2VsbFJlbmRlcmVyRmFjdCA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnY2VsbFJlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgdmFyIGNlbGxSZW5kZXJlciA9IGNlbGxSZW5kZXJlckZhY3QuZ2V0Q2VsbFJlbmRlcmVyKHJvdy5jZWxsc1tpXS5jZWxsVHlwZSB8fCBlbnVtXzEuQ2VsbFR5cGUuRGF0YSk7XG4gICAgICAgICAgICB2YXIgc3BhbiA9IHJvdy5jZWxsc1tpXS5jZWxsU3BhbiA/IHJvdy5jZWxsc1tpXS5jZWxsU3BhbiA6XG4gICAgICAgICAgICAgICAgKGNlbGxBcmdzLmNvbFNwYW4gKyBpKSA8PSByb3cuY2VsbHMubGVuZ3RoID8gY2VsbEFyZ3MuY29sU3BhbiA6IHJvdy5jZWxscy5sZW5ndGggLSBpO1xuICAgICAgICAgICAgdmFyIHZpc2libGUgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgaSArIHNwYW4gJiYgaiA8IHJvdy5jZWxscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3cuY2VsbHNbal0udmlzaWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzW2pdLmlzU3Bhbm5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZpc2libGUgPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgKyBzcGFuOyBqIDwgaSArIHNwYW4gKyB2aXNpYmxlICYmIGogPCByb3cuY2VsbHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzW2pdLmlzU3Bhbm5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpICsgc3BhbiArIHZpc2libGUgPj0gcm93LmNlbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBzcGFuIC09IChpICsgc3BhbiArIHZpc2libGUpIC0gcm93LmNlbGxzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LmNlbGxzW2ldLmNlbGxTcGFuKSB7XG4gICAgICAgICAgICAgICAgcm93LmRhdGFbY2VsbEFyZ3MuY29sdW1uLmZpZWxkXSA9IHJvdy5jZWxsc1tpXS5zcGFuVGV4dDtcbiAgICAgICAgICAgICAgICB0ZCA9IGNlbGxSZW5kZXJlci5yZW5kZXIocm93LmNlbGxzW2ldLCByb3cuZGF0YSwgeyAnaW5kZXgnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChyb3cuaW5kZXgpID8gcm93LmluZGV4LnRvU3RyaW5nKCkgOiAnJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzcGFuID4gMSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYXR0cmlidXRlcyh0ZCwgeyAnY29sU3Bhbic6IHNwYW4udG9TdHJpbmcoKSwgJ2FyaWEtY29sU3Bhbic6IHNwYW4udG9TdHJpbmcoKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiAhcm93LmNlbGxzW2ldLmNlbGxTcGFuICYmXG4gICAgICAgICAgICAgICAgIXRoaXMuY29udGFpbnNLZXkoY2VsbEFyZ3MuY29sdW1uLmZpZWxkLCBjZWxsQXJncy5kYXRhW2NlbGxBcmdzLmNvbHVtbi5maWVsZF0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5iYWNrdXBNZXJnZUNlbGxzKGNlbGxBcmdzLmNvbHVtbi5maWVsZCwgY2VsbEFyZ3MuZGF0YVtjZWxsQXJncy5jb2x1bW4uZmllbGRdLCBjZWxsQXJncy5jb2xTcGFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0ZDtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbE1lcmdlUmVuZGVyLnByb3RvdHlwZS5iYWNrdXBNZXJnZUNlbGxzID0gZnVuY3Rpb24gKGZOYW1lLCBkYXRhLCBzcGFuKSB7XG4gICAgICAgICAgICB0aGlzLnNldE1lcmdlQ2VsbHModGhpcy5nZW5lcnRlS2V5KGZOYW1lLCBkYXRhKSwgc3Bhbik7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUuZ2VuZXJ0ZUtleSA9IGZ1bmN0aW9uIChmbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGZuYW1lICsgJ19fJyArIGRhdGEudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbE1lcmdlUmVuZGVyLnByb3RvdHlwZS5zcGxpdEtleSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBrZXkuc3BsaXQoJ19fJyk7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUuY29udGFpbnNLZXkgPSBmdW5jdGlvbiAoZm5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE1lcmdlQ2VsbHMoKS5oYXNPd25Qcm9wZXJ0eSh0aGlzLmdlbmVydGVLZXkoZm5hbWUsIGRhdGEpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbE1lcmdlUmVuZGVyLnByb3RvdHlwZS5nZXRNZXJnZUNlbGxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Lm1lcmdlQ2VsbHM7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUuc2V0TWVyZ2VDZWxscyA9IGZ1bmN0aW9uIChrZXksIHNwYW4pIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm1lcmdlQ2VsbHNba2V5XSA9IHNwYW47XG4gICAgICAgIH07XG4gICAgICAgIENlbGxNZXJnZVJlbmRlci5wcm90b3R5cGUudXBkYXRlVmlydHVhbENlbGxzID0gZnVuY3Rpb24gKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBtQ2VsbHMgPSB0aGlzLmdldE1lcmdlQ2VsbHMoKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhtQ2VsbHMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbUNlbGxzW2tleV07XG4gICAgICAgICAgICAgICAgdmFyIG1lcmdlID0gdGhpcy5zcGxpdEtleShrZXkpO1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5JbmRleCA9IHRoaXMuZ2V0SW5kZXhGcm9tQWxsQ29sdW1ucyhtZXJnZVswXSk7XG4gICAgICAgICAgICAgICAgdmFyIHZDb2x1bW5JbmRpY2VzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgICAgIHZhciBzcGFuID0gdmFsdWUgLSAodkNvbHVtbkluZGljZXNbMF0gLSBjb2x1bW5JbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbkluZGV4IDwgdkNvbHVtbkluZGljZXNbMF0gJiYgc3BhbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCByb3dzXzEgPSByb3dzOyBfYiA8IHJvd3NfMS5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSByb3dzXzFbX2JdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5kYXRhW21lcmdlWzBdXS50b1N0cmluZygpID09PSBtZXJnZVsxXS50b1N0cmluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzWzBdLmNlbGxTcGFuID0gc3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHNbMF0uc3BhblRleHQgPSBtZXJnZVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsTWVyZ2VSZW5kZXIucHJvdG90eXBlLmdldEluZGV4RnJvbUFsbENvbHVtbnMgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDZWxsTWVyZ2VSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNlbGxNZXJnZVJlbmRlciA9IENlbGxNZXJnZVJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9jZWxsLW1lcmdlLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL21vZGVscy9yb3dcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHJvd18xLCBlbnVtXzEsIGNlbGxfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSb3dNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJvd01vZGVsR2VuZXJhdG9yKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChkYXRhLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLnBhcmVudC5lbmFibGVWaXJ0dWFsaXphdGlvbiA/IGFyZ3Muc3RhcnRJbmRleCA6IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoOyBpIDwgbGVuOyBpKyssIHN0YXJ0SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHJvd3NbaV0gPSB0aGlzLmdlbmVyYXRlUm93KGRhdGFbaV0sIHN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5lbnN1cmVDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSB8fCB0aGlzLnBhcmVudC5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICBjb2xzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIG51bGwsIGVudW1fMS5DZWxsVHlwZS5EZXRhaWxFeHBhbmQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2xzO1xuICAgICAgICB9O1xuICAgICAgICBSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVSb3cgPSBmdW5jdGlvbiAoZGF0YSwgaW5kZXgsIGNzc0NsYXNzLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgdG1wID0gW107XG4gICAgICAgICAgICBvcHRpb25zLnVpZCA9IHV0aWxfMS5nZXRVaWQoJ2dyaWQtcm93Jyk7XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgb3B0aW9ucy5pbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgb3B0aW9ucy5pbmRlbnQgPSBpbmRlbnQ7XG4gICAgICAgICAgICBvcHRpb25zLmlzRGF0YVJvdyA9IHRydWU7XG4gICAgICAgICAgICBvcHRpb25zLmNzc0NsYXNzID0gY3NzQ2xhc3M7XG4gICAgICAgICAgICBvcHRpb25zLmlzQWx0Um93ID0gdGhpcy5wYXJlbnQuZW5hYmxlQWx0Um93ID8gaW5kZXggJSAyICE9PSAwIDogZmFsc2U7XG4gICAgICAgICAgICBvcHRpb25zLmlzU2VsZWN0ZWQgPSB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKS5pbmRleE9mKGluZGV4KSA+IC0xO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gdGhpcy5lbnN1cmVDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd18xLlJvdyhvcHRpb25zKTtcbiAgICAgICAgICAgIHJvdy5jZWxscyA9IGNlbGxzLmNvbmNhdCh0aGlzLmdlbmVyYXRlQ2VsbHMob3B0aW9ucykpO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlQ2VsbHMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkdW1taWVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgZHVtbWllcy5mb3JFYWNoKGZ1bmN0aW9uIChkdW1teSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG1wLnB1c2goX3RoaXMuZ2VuZXJhdGVDZWxsKGR1bW15LCBvcHRpb25zLnVpZCwgZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChkdW1teS5jb21tYW5kcykgPyB1bmRlZmluZWQgOiBlbnVtXzEuQ2VsbFR5cGUuQ29tbWFuZENvbHVtbiwgbnVsbCwgaW5kZXgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRtcDtcbiAgICAgICAgfTtcbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW4sIHJvd0lkLCBjZWxsVHlwZSwgY29sU3Bhbiwgb0luZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogY29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmllbGQgfHwgY29sdW1uLnRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAnaXNUZW1wbGF0ZSc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi50ZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgJ3Jvd0lEJzogcm93SWQsXG4gICAgICAgICAgICAgICAgJ2NvbHVtbic6IGNvbHVtbixcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjZWxsVHlwZSkgPyBjZWxsVHlwZSA6IGVudW1fMS5DZWxsVHlwZS5EYXRhLFxuICAgICAgICAgICAgICAgICdjb2xTcGFuJzogY29sU3BhbixcbiAgICAgICAgICAgICAgICAnY29tbWFuZHMnOiBjb2x1bW4uY29tbWFuZHNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAob3B0LmlzRGF0YUNlbGwgfHwgb3B0LmNvbHVtbi50eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgb3B0LmluZGV4ID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeUZpZWxkKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5yZWZyZXNoUm93cyA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlucHV0LmZvckVhY2goZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gcm93LmNlbGxzID0gX3RoaXMuZ2VuZXJhdGVDZWxscyhyb3cpOyB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJvd01vZGVsR2VuZXJhdG9yO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Sb3dNb2RlbEdlbmVyYXRvciA9IFJvd01vZGVsR2VuZXJhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUm93ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUm93KG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEubWVyZ2UodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJvdztcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUm93ID0gUm93O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9yb3cuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENlbGwob3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5pc1NwYW5uZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEubWVyZ2UodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENlbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNlbGwgPSBDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL21vZGVscy9yb3dcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHJvd18xLCBlajJfYmFzZV8xLCBlbnVtXzEsIHJvd19tb2RlbF9nZW5lcmF0b3JfMSwgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgR3JvdXBNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcm91cE1vZGVsR2VuZXJhdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBHcm91cE1vZGVsR2VuZXJhdG9yKHBhcmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaW5kZXggPSAwO1xuICAgICAgICAgICAgX3RoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgX3RoaXMuc3VtbWFyeU1vZGVsR2VuID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IocGFyZW50KTtcbiAgICAgICAgICAgIF90aGlzLmNhcHRpb25Nb2RlbEdlbiA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkNhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IocGFyZW50KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAoZGF0YSwgYXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MuY2FsbCh0aGlzLCBkYXRhLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMucGFyZW50LmVuYWJsZVZpcnR1YWxpemF0aW9uID8gKHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpICogZGF0YS5yZWNvcmRzLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZGF0YS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0R3JvdXBlZFJlY29yZHMoMCwgZGF0YVtpXSwgZGF0YS5sZXZlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldEdyb3VwZWRSZWNvcmRzID0gZnVuY3Rpb24gKGluZGV4LCBkYXRhLCByYXcpIHtcbiAgICAgICAgICAgIHZhciBsZXZlbCA9IHJhdztcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGRhdGEuaXRlbXMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZGF0YS5Hcm91cEd1aWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IHRoaXMucm93cy5jb25jYXQodGhpcy5nZW5lcmF0ZURhdGFSb3dzKGRhdGEsIGluZGV4KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuID0gZGF0YS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRHcm91cGVkUmVjb3JkcyhpbmRleCwgZGF0YVtqXSwgZGF0YS5sZXZlbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MgPSB0aGlzLnJvd3MuY29uY2F0KHRoaXMuZ2VuZXJhdGVDYXB0aW9uUm93KGRhdGEsIGluZGV4KSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuaXRlbXMgJiYgZGF0YS5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRHcm91cGVkUmVjb3JkcyhpbmRleCArIDEsIGRhdGEuaXRlbXMsIGRhdGEuaXRlbXMubGV2ZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWdncmVnYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgKF9hID0gdGhpcy5yb3dzKS5wdXNoLmFwcGx5KF9hLCB0aGlzLnN1bW1hcnlNb2RlbEdlbi5nZW5lcmF0ZVJvd3MoZGF0YSwgeyBsZXZlbDogbGV2ZWwgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q2FwdGlvblJvd0NlbGxzID0gZnVuY3Rpb24gKGZpZWxkLCBpbmRlbnQsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIHZhciB2aXNpYmxlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoZmllbGQpO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSB0aGlzLnBhcmVudC5jb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZCA9PT0gZmllbGQ7IH0pWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdyb3VwZWRMZW4gPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gfHwgaW5kZXhlcy5pbmRleE9mKGluZGVudCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRlbnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVJbmRlbnRDZWxsKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBudWxsLCBlbnVtXzEuQ2VsbFR5cGUuRXhwYW5kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRlbnQgPSB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/IDEgOlxuICAgICAgICAgICAgICAgICh0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aCArIGdyb3VwZWRMZW4gKyAoZ09iai5kZXRhaWxUZW1wbGF0ZSB8fCBnT2JqLmNoaWxkR3JpZCA/IDEgOiAwKSAtXG4gICAgICAgICAgICAgICAgICAgIGluZGVudCArICh0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aCA/IC0xIDogMCkpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMubGVuZ3RoICYmICF0aGlzLmNhcHRpb25Nb2RlbEdlbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FwdGlvbkNlbGxzID0gdGhpcy5jYXB0aW9uTW9kZWxHZW4uZ2VuZXJhdGVSb3dzKGRhdGEpWzBdO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuZXh0ZW5kKGRhdGEsIGNhcHRpb25DZWxscy5kYXRhKTtcbiAgICAgICAgICAgICAgICB2YXIgY0luZGV4XzEgPSAwO1xuICAgICAgICAgICAgICAgIGNhcHRpb25DZWxscy5jZWxscy5zb21lKGZ1bmN0aW9uIChjZWxsLCBpbmRleCkgeyBjSW5kZXhfMSA9IGluZGV4OyByZXR1cm4gY2VsbC52aXNpYmxlICYmIGNlbGwuaXNEYXRhQ2VsbDsgfSk7XG4gICAgICAgICAgICAgICAgdmlzaWJsZXMgPSBjYXB0aW9uQ2VsbHMuY2VsbHMuc2xpY2UoY0luZGV4XzEpLmZpbHRlcihmdW5jdGlvbiAoY2VsbCkgeyByZXR1cm4gY2VsbC52aXNpYmxlOyB9KTtcbiAgICAgICAgICAgICAgICBpZiAoY2FwdGlvbkNlbGxzLnZpc2libGUgJiYgdmlzaWJsZXNbMF0uY29sdW1uLmZpZWxkID09PSB0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpWzBdLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVzID0gdmlzaWJsZXMuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlcyA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmRlbnQgPSBpbmRlbnQgLSB2aXNpYmxlcy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29scyA9ICghdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyBbY29sdW1uXSA6IHRoaXMucGFyZW50LmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICB2YXIgd0ZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgY29scy5mb3JFYWNoKGZ1bmN0aW9uIChjb2wsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRtcEZsYWcgPSB3RmxhZyAmJiBpbmRleGVzLmluZGV4T2YoaW5kZW50KSAhPT0gLTE7XG4gICAgICAgICAgICAgICAgaWYgKHRtcEZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgd0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxUeXBlID0gIV90aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiB8fCB0bXBGbGFnID9cbiAgICAgICAgICAgICAgICAgICAgZW51bV8xLkNlbGxUeXBlLkdyb3VwQ2FwdGlvbiA6IGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb25FbXB0eTtcbiAgICAgICAgICAgICAgICBpbmRlbnQgPSBfdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgY2VsbFR5cGUgPT09IGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb24gPyBpbmRlbnQgKyBncm91cGVkTGVuIDogaW5kZW50O1xuICAgICAgICAgICAgICAgIGNlbGxzLnB1c2goX3RoaXMuZ2VuZXJhdGVDZWxsKGNvbHVtbiwgbnVsbCwgY2VsbFR5cGUsIGluZGVudCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjZWxscy5wdXNoLmFwcGx5KGNlbGxzLCB2aXNpYmxlcyk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbHM7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlQ2FwdGlvblJvdyA9IGZ1bmN0aW9uIChkYXRhLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgdG1wID0gW107XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChkYXRhLmZpZWxkKTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBkYXRhKTtcbiAgICAgICAgICAgIGlmIChjb2wpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuZmllbGQgPSBkYXRhLmZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucy5pc0RhdGFSb3cgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93XzEuUm93KG9wdGlvbnMpO1xuICAgICAgICAgICAgcm93LmluZGVudCA9IGluZGVudDtcbiAgICAgICAgICAgIHJvdy5jZWxscyA9IHRoaXMuZ2V0Q2FwdGlvblJvd0NlbGxzKGRhdGEuZmllbGQsIGluZGVudCwgcm93LmRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVEYXRhUm93cyA9IGZ1bmN0aW9uIChkYXRhLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkYXRhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93c1tpXSA9IHRoaXMuZ2VuZXJhdGVSb3coZGF0YVtpXSwgdGhpcy5pbmRleCwgaSA/IHVuZGVmaW5lZCA6ICdlLWZpcnN0Y2hpbGRyb3cnLCBpbmRlbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaW5kZW50OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZGV4ZXMuaW5kZXhPZihpbmRlbnQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscy51bnNoaWZ0KHRoaXMuZ2VuZXJhdGVJbmRlbnRDZWxsKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVJbmRlbnRDZWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBudWxsLCBlbnVtXzEuQ2VsbFR5cGUuSW5kZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUucmVmcmVzaFJvd3MgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGlucHV0LmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIGlmIChyb3cuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscyA9IF90aGlzLmdlbmVyYXRlQ2VsbHMocm93KTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3cuaW5kZW50OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5kZXhlcy5pbmRleE9mKHJvdy5pbmRlbnQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzLnVuc2hpZnQoX3RoaXMuZ2VuZXJhdGVJbmRlbnRDZWxsKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY1JvdyA9IF90aGlzLmdlbmVyYXRlQ2FwdGlvblJvdyhyb3cuZGF0YSwgcm93LmluZGVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscyA9IGNSb3cuY2VsbHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcm91cE1vZGVsR2VuZXJhdG9yO1xuICAgIH0ocm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKSk7XG4gICAgZXhwb3J0cy5Hcm91cE1vZGVsR2VuZXJhdG9yID0gR3JvdXBNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9ncm91cC1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vbW9kZWxzL3Jvd1wiLCBcIi4uL21vZGVscy9jb2x1bW5cIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL21vZGVscy9jZWxsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcm93XzEsIGNvbHVtbl8xLCBlajJfYmFzZV8xLCB1dGlsXzEsIGVudW1fMSwgY2VsbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMuc2xpY2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IHJvdy5jb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhKGNvbHVtbi5mb290ZXJUZW1wbGF0ZSB8fCBjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSB8fCBjb2x1bW4uZ3JvdXBDYXB0aW9uVGVtcGxhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCBfdGhpcy5jb2x1bW5TZWxlY3Rvcihjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goeyBjb2x1bW5zOiBjb2x1bW5zIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuY29sdW1uU2VsZWN0b3IgPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gY29sdW1ucy5wdXNoKG5ldyBjb2x1bW5fMS5Db2x1bW4oe30pKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5zLnB1c2gobmV3IGNvbHVtbl8xLkNvbHVtbih7fSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1ucy5wdXNoLmFwcGx5KGNvbHVtbnMsIHRoaXMucGFyZW50LmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAoaW5wdXQsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuY3VycmVudFZpZXdEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5idWlsZFN1bW1hcnlEYXRhKGlucHV0LCBhcmdzKTtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmdldERhdGEoKS5mb3JFYWNoKGZ1bmN0aW9uIChyb3csIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcm93cy5wdXNoKF90aGlzLmdldEdlbmVyYXRlZFJvdyhyb3csIGRhdGFbaW5kZXhdLCBhcmdzID8gYXJncy5sZXZlbCA6IHVuZGVmaW5lZCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRHZW5lcmF0ZWRSb3cgPSBmdW5jdGlvbiAoc3VtbWFyeVJvdywgZGF0YSwgcmF3KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgdmFyIGluZGVudHMgPSB0aGlzLmdldEluZGVudEJ5TGV2ZWwocmF3KTtcbiAgICAgICAgICAgIHZhciBpbmRlbnRMZW5ndGggPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoICsgKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlID8gMSA6IDApO1xuICAgICAgICAgICAgdGhpcy5nZXRDb2x1bW5zKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7IHJldHVybiB0bXAucHVzaChfdGhpcy5nZXRHZW5lcmF0ZWRDZWxsKHZhbHVlLCBzdW1tYXJ5Um93LCBpbmRleCA+PSBpbmRlbnRMZW5ndGggPyBfdGhpcy5nZXRDZWxsVHlwZSgpIDogZW51bV8xLkNlbGxUeXBlLkluZGVudCwgaW5kZW50c1tpbmRleF0pKTsgfSk7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd18xLlJvdyh7IGRhdGE6IGRhdGEsIGF0dHJpYnV0ZXM6IHsgY2xhc3M6ICdlLXN1bW1hcnlyb3cnIH0gfSk7XG4gICAgICAgICAgICByb3cuY2VsbHMgPSB0bXA7XG4gICAgICAgICAgICByb3cudmlzaWJsZSA9IHRtcC5zb21lKGZ1bmN0aW9uIChjZWxsKSB7IHJldHVybiBjZWxsLmlzRGF0YUNlbGwgJiYgY2VsbC52aXNpYmxlOyB9KTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0R2VuZXJhdGVkQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW4sIHN1bW1hcnlSb3csIGNlbGxUeXBlLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBzQ29sdW1uID0gc3VtbWFyeVJvdy5jb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoc2NvbHVtbikgeyByZXR1cm4gc2NvbHVtbi5jb2x1bW5OYW1lID09PSBjb2x1bW4uZmllbGQ7IH0pWzBdO1xuICAgICAgICAgICAgdmFyIGF0dHJzID0geyAnc3R5bGUnOiB7ICd0ZXh0QWxpZ24nOiBjb2x1bW4udGV4dEFsaWduIH0gfTtcbiAgICAgICAgICAgIGlmIChpbmRlbnQpIHtcbiAgICAgICAgICAgICAgICBhdHRycy5jbGFzcyA9IGluZGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBjb2x1bW4udmlzaWJsZSxcbiAgICAgICAgICAgICAgICAnaXNEYXRhQ2VsbCc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHNDb2x1bW4pLFxuICAgICAgICAgICAgICAgICdpc1RlbXBsYXRlJzogc0NvbHVtbiAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChzQ29sdW1uLmZvb3RlclRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgIHx8IHNDb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSB8fCBzQ29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogc0NvbHVtbiB8fCB7fSxcbiAgICAgICAgICAgICAgICAnYXR0cmlidXRlcyc6IGF0dHJzLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6IGNlbGxUeXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmJ1aWxkU3VtbWFyeURhdGEgPSBmdW5jdGlvbiAoZGF0YSwgYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkdW1teSA9IFtdO1xuICAgICAgICAgICAgdmFyIHN1bW1hcnlSb3dzID0gdGhpcy5nZXREYXRhKCk7XG4gICAgICAgICAgICB2YXIgc2luZ2xlID0ge307XG4gICAgICAgICAgICB2YXIga2V5ID0gJyc7XG4gICAgICAgICAgICBzdW1tYXJ5Um93cy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICBzaW5nbGUgPSB7fTtcbiAgICAgICAgICAgICAgICByb3cuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlID0gX3RoaXMuc2V0VGVtcGxhdGUoY29sdW1uLCAoYXJncyAmJiBhcmdzLmFnZ3JlZ2F0ZXMpID8gYXJncyA6IGRhdGEsIHNpbmdsZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZHVtbXkucHVzaChzaW5nbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZHVtbXk7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0SW5kZW50QnlMZXZlbCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiAnZS1pbmRlbnRjZWxsdG9wJzsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuc2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoY29sdW1uLCBkYXRhLCBzaW5nbGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdHlwZXMgPSBjb2x1bW4udHlwZTtcbiAgICAgICAgICAgIHZhciBoZWxwZXIgPSB7fTtcbiAgICAgICAgICAgIHZhciBmb3JtYXRGbiA9IGNvbHVtbi5nZXRGb3JtYXR0ZXIoKSB8fCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGE7IH07IH0pKCk7XG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBkYXRhO1xuICAgICAgICAgICAgaWYgKCEodHlwZXMgaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICAgICAgICB0eXBlcyA9IFtjb2x1bW4udHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGNvbHVtbi5maWVsZCArICcgLSAnICsgdHlwZTtcbiAgICAgICAgICAgICAgICB2YXIgZGlzcCA9IGNvbHVtbi5jb2x1bW5OYW1lO1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBncm91cC5hZ2dyZWdhdGVzICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGdyb3VwLmFnZ3JlZ2F0ZXNba2V5XSkgPyBncm91cC5hZ2dyZWdhdGVzW2tleV0gOlxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEuY2FsY3VsYXRlQWdncmVnYXRlKHR5cGUsIGdyb3VwLmFnZ3JlZ2F0ZXMgPyBncm91cC5yZXN1bHQgOiBkYXRhLCBjb2x1bW4sIF90aGlzLnBhcmVudCk7XG4gICAgICAgICAgICAgICAgc2luZ2xlW2Rpc3BdID0gc2luZ2xlW2Rpc3BdIHx8IHt9O1xuICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXVtrZXldID0gdmFsO1xuICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXVt0eXBlXSA9IGZvcm1hdEZuKHZhbCk7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXS5maWVsZCA9IGdyb3VwLmZpZWxkO1xuICAgICAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF0ua2V5ID0gZ3JvdXAua2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGVscGVyLmZvcm1hdCA9IGNvbHVtbi5nZXRGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIGNvbHVtbi5zZXRUZW1wbGF0ZShoZWxwZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHNpbmdsZTtcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDZWxsVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnVtXzEuQ2VsbFR5cGUuU3VtbWFyeTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIHZhciBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmNvbHVtblNlbGVjdG9yID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRJbmRlbnRCeUxldmVsID0gZnVuY3Rpb24gKGxldmVsKSB7XG4gICAgICAgICAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubWFwKGZ1bmN0aW9uICh2LCBpbmR4KSB7IHJldHVybiBpbmR4IDw9IGxldmVsIC0gMSA/ICcnIDogJ2UtaW5kZW50Y2VsbHRvcCc7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q2VsbFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIH0oU3VtbWFyeU1vZGVsR2VuZXJhdG9yKSk7XG4gICAgZXhwb3J0cy5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIHZhciBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuY29sdW1uU2VsZWN0b3IgPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5pdFZhbCA9IHsgY29sdW1uczogW10gfTtcbiAgICAgICAgICAgIHJldHVybiBbX3N1cGVyLnByb3RvdHlwZS5nZXREYXRhLmNhbGwodGhpcykucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBjdXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldi5jb2x1bW5zID0gcHJldi5jb2x1bW5zLmNvbmNhdChjdXIuY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgIH0sIGluaXRWYWwpXTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5nZXREYXRhKClbMF0uY29sdW1ucyB8fCBbXSkubGVuZ3RoID09PSAwO1xuICAgICAgICB9O1xuICAgICAgICBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDZWxsVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIH0oU3VtbWFyeU1vZGVsR2VuZXJhdG9yKSk7XG4gICAgZXhwb3J0cy5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXJcIiwgXCIuLi9hY3Rpb25zL2NoZWNrYm94LWZpbHRlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9kYXRhXzEsIHV0aWxfMSwgZXZlbnRzLCB2YWx1ZV9mb3JtYXR0ZXJfMSwgY2hlY2tib3hfZmlsdGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERhdGEgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEYXRhKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5pbml0RGF0YU1hbmFnZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5yb3dzQWRkZWQsIHRoaXMuYWRkUm93cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucm93c1JlbW92ZWQsIHRoaXMucmVtb3ZlUm93cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YVNvdXJjZU1vZGlmaWVkLCB0aGlzLmluaXREYXRhTWFuYWdlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51cGRhdGVEYXRhLCB0aGlzLmNydWRBY3Rpb25zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5hZGREZWxldGVBY3Rpb24sIHRoaXMuZ2V0RGF0YSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgRGF0YS5wcm90b3R5cGUuaW5pdERhdGFNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXIgPSBnT2JqLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyID8gZ09iai5kYXRhU291cmNlIDpcbiAgICAgICAgICAgICAgICAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChnT2JqLmRhdGFTb3VyY2UpID8gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoKSA6IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKGdPYmouZGF0YVNvdXJjZSkpO1xuICAgICAgICAgICAgZ09iai5xdWVyeSA9IGdPYmoucXVlcnkgaW5zdGFuY2VvZiBlajJfZGF0YV8xLlF1ZXJ5ID8gZ09iai5xdWVyeSA6IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdlbmVyYXRlUXVlcnkgPSBmdW5jdGlvbiAoc2tpcFBhZ2UpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBnT2JqLnF1ZXJ5LmNsb25lKCk7XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0ZpbHRlcmluZyAmJiBnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICAgICAgdmFyIHByZWRpY2F0ZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmVkaWNhdGVzID0gY2hlY2tib3hfZmlsdGVyXzEuQ2hlY2tCb3hGaWx0ZXIuZ2V0UHJlZGljYXRlKGdPYmouZmlsdGVyU2V0dGluZ3MuY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhwcmVkaWNhdGVzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuZCA9ICdhbmQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IHByZWRpY2F0ZXNbcHJvcF07XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGUgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChwcmVkaWNhdGUpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGVbYW5kXShvYmopIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmo7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcXVlcnkud2hlcmUocHJlZGljYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9iID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2IgPCBjb2x1bW5zXzEubGVuZ3RoOyBfYisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sdW1uc18xW19iXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzVHlwZSA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChjb2wuZmllbGQpLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc1R5cGUgIT09ICdkYXRlJyAmJiBzVHlwZSAhPT0gJ2RhdGV0aW1lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LndoZXJlKGNvbC5maWVsZCwgY29sLm9wZXJhdG9yLCBjb2wudmFsdWUsICFjb2wubWF0Y2hDYXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LndoZXJlKHRoaXMuZ2V0RGF0ZVByZWRpY2F0ZShjb2wpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLnNlYXJjaFNldHRpbmdzLmtleS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc1NldHRpbmdzID0gZ09iai5zZWFyY2hTZXR0aW5ncztcbiAgICAgICAgICAgICAgICBzU2V0dGluZ3MuZmllbGRzID0gc1NldHRpbmdzLmZpZWxkcy5sZW5ndGggPyBzU2V0dGluZ3MuZmllbGRzIDogZ09iai5nZXRDb2x1bW5GaWVsZE5hbWVzKCk7XG4gICAgICAgICAgICAgICAgcXVlcnkuc2VhcmNoKHNTZXR0aW5ncy5rZXksIHNTZXR0aW5ncy5maWVsZHMsIHNTZXR0aW5ncy5vcGVyYXRvciwgc1NldHRpbmdzLmlnbm9yZUNhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5hZ2dyZWdhdGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIHJvdy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZXMgPSBjb2x1bW4udHlwZSBpbnN0YW5jZW9mIEFycmF5ID8gY29sdW1uLnR5cGUgOiBbY29sdW1uLnR5cGVdO1xuICAgICAgICAgICAgICAgICAgICB0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7IHJldHVybiBxdWVyeS5hZ2dyZWdhdGUodHlwZSwgY29sdW1uLmZpZWxkKTsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICgoZ09iai5hbGxvd1NvcnRpbmcgfHwgZ09iai5hbGxvd0dyb3VwaW5nKSAmJiBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgICAgICB2YXIgc29ydEdycCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBjb2x1bW5zLmxlbmd0aCAtIDE7IGkgPiAtMTsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHVtbnNbaV0uZmllbGQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkuc29ydEJ5KGNvbHVtbnNbaV0uZmllbGQsIGNvbHVtbnNbaV0uZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRHcnAucHVzaChjb2x1bW5zW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc29ydEdycC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeS5zb3J0Qnkoc29ydEdycFtpXS5maWVsZCwgc29ydEdycFtpXS5kaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoZ09iai5hbGxvd1BhZ2luZyB8fCBnT2JqLmVuYWJsZVZpcnR1YWxpemF0aW9uKSAmJiBza2lwUGFnZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LnBhZ2UoZ09iai5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UsIGdPYmoucGFnZVNldHRpbmdzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcgJiYgZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXNHcnBGbXQgPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uc1tpXSkuZW5hYmxlR3JvdXBCeUZvcm1hdDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW5zW2ldKS5mb3JtYXQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0dycEZtdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkuZ3JvdXAoY29sdW1uc1tpXSwgdGhpcy5mb3JtYXRHcm91cENvbHVtbi5iaW5kKHRoaXMpLCBmb3JtYXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkuZ3JvdXAoY29sdW1uc1tpXSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcXVlcnk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoYXJncywgcXVlcnkpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoYXJncyA9PT0gdm9pZCAwKSB7IGFyZ3MgPSB7IHJlcXVlc3RUeXBlOiAnJyB9OyB9XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoYXJncy5mb3JlaWduS2V5RGF0YSAmJlxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGFyZ3MuZm9yZWlnbktleURhdGEpLmxlbmd0aCA/XG4gICAgICAgICAgICAgICAgYXJncy5mb3JlaWduS2V5RGF0YSA6IHRoaXMucGFyZW50LmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCkpO1xuICAgICAgICAgICAgc3dpdGNoIChhcmdzLnJlcXVlc3RUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeSA/IHF1ZXJ5IDogdGhpcy5nZW5lcmF0ZVF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXIucmVtb3ZlKGtleSwgYXJncy5kYXRhWzBdLCBudWxsLCBxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NhdmUnOlxuICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5ID8gcXVlcnkgOiB0aGlzLmdlbmVyYXRlUXVlcnkoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlci5pbnNlcnQoYXJncy5kYXRhLCBudWxsLCBxdWVyeSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YU1hbmFnZXIucmVhZHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVhZHkgPSB0aGlzLmRhdGFNYW5hZ2VyLnJlYWR5O1xuICAgICAgICAgICAgICAgIHJlYWR5LnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGF0YU1hbmFnZXIgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcihlLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkZhaWx1cmUsIHsgZXJyb3I6IGUgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhTWFuYWdlci5leGVjdXRlUXVlcnkocXVlcnkpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5mb3JtYXRHcm91cENvbHVtbiA9IGZ1bmN0aW9uICh2YWx1ZSwgZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VydmljZUxvY2F0b3IgPSB0aGlzLnNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICB2YXIgZGF0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKCFjb2x1bW4udHlwZSkge1xuICAgICAgICAgICAgICAgIGNvbHVtbi50eXBlID0gZGF0ZS5nZXREYXkgPyAoZGF0ZS5nZXRIb3VycygpID4gMCB8fCBkYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgZGF0ZS5nZXRTZWNvbmRzKCkgPiAwIHx8IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgPiAwID8gJ2RhdGV0aW1lJyA6ICdkYXRlJykgOiB0eXBlb2YgKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5nZXRGb3JtYXR0ZXIoKSkpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuc2V0Rm9ybWF0dGVyKHNlcnZpY2VMb2NhdG9yLCBjb2x1bW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZvcm1hdFZhbCA9IHZhbHVlX2Zvcm1hdHRlcl8xLlZhbHVlRm9ybWF0dGVyLnByb3RvdHlwZS50b1ZpZXcodmFsdWUsIGNvbHVtbi5nZXRGb3JtYXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0VmFsO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5jcnVkQWN0aW9ucyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlUXVlcnkoKTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBwciA9ICdwcm9taXNlJztcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmdldEtleShhcmdzLmZvcmVpZ25LZXlEYXRhICYmXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoYXJncy5mb3JlaWduS2V5RGF0YSkubGVuZ3RoID8gYXJncy5mb3JlaWduS2V5RGF0YSA6XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKSk7XG4gICAgICAgICAgICBzd2l0Y2ggKGFyZ3MucmVxdWVzdFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IHRoaXMuZGF0YU1hbmFnZXIudXBkYXRlKGtleSwgYXJncy5kYXRhLCBudWxsLCB0aGlzLmdlbmVyYXRlUXVlcnkoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJnc1twcl0gPSBwcm9taXNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jcnVkQWN0aW9uLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoY2hhbmdlcywga2V5KSB7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuZGF0YU1hbmFnZXIuc2F2ZUNoYW5nZXMoY2hhbmdlcywga2V5LCBudWxsLCB0aGlzLmdlbmVyYXRlUXVlcnkoKS5yZXF1aXJlc0NvdW50KCkpO1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICAgICAgICBpZiAoa2V5cyAmJiBrZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBrZXlzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuaXNSZW1vdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLm9mZmxpbmUgIT09IHRydWUgJiYgdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLnVybCAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZXREYXRlUHJlZGljYXRlID0gZnVuY3Rpb24gKGZpbHRlck9iamVjdCkge1xuICAgICAgICAgICAgdmFyIGRhdGVQcmVkaWNhdGU7XG4gICAgICAgICAgICB2YXIgcHJldkRhdGU7XG4gICAgICAgICAgICB2YXIgbmV4dERhdGU7XG4gICAgICAgICAgICB2YXIgcHJldk9iaiA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB1dGlsXzEuZ2V0QWN0dWFsUHJvcGVydGllcyhmaWx0ZXJPYmplY3QpKTtcbiAgICAgICAgICAgIHZhciBuZXh0T2JqID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHV0aWxfMS5nZXRBY3R1YWxQcm9wZXJ0aWVzKGZpbHRlck9iamVjdCkpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gbmV3IERhdGUoZmlsdGVyT2JqZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJPYmplY3Qub3BlcmF0b3IgPT09ICdlcXVhbCcgfHwgZmlsdGVyT2JqZWN0Lm9wZXJhdG9yID09PSAnbm90ZXF1YWwnKSB7XG4gICAgICAgICAgICAgICAgcHJldkRhdGUgPSBuZXcgRGF0ZSh2YWx1ZS5zZXREYXRlKHZhbHVlLmdldERhdGUoKSAtIDEpKTtcbiAgICAgICAgICAgICAgICBuZXh0RGF0ZSA9IG5ldyBEYXRlKHZhbHVlLnNldERhdGUodmFsdWUuZ2V0RGF0ZSgpICsgMikpO1xuICAgICAgICAgICAgICAgIHByZXZPYmoudmFsdWUgPSBwcmV2RGF0ZTtcbiAgICAgICAgICAgICAgICBuZXh0T2JqLnZhbHVlID0gbmV4dERhdGU7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlck9iamVjdC5vcGVyYXRvciA9PT0gJ2VxdWFsJykge1xuICAgICAgICAgICAgICAgICAgICBwcmV2T2JqLm9wZXJhdG9yID0gJ2dyZWF0ZXJ0aGFuJztcbiAgICAgICAgICAgICAgICAgICAgbmV4dE9iai5vcGVyYXRvciA9ICdsZXNzdGhhbic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpbHRlck9iamVjdC5vcGVyYXRvciA9PT0gJ25vdGVxdWFsJykge1xuICAgICAgICAgICAgICAgICAgICBwcmV2T2JqLm9wZXJhdG9yID0gJ2xlc3N0aGFub3JlcXVhbCc7XG4gICAgICAgICAgICAgICAgICAgIG5leHRPYmoub3BlcmF0b3IgPSAnZ3JlYXRlcnRoYW5vcmVxdWFsJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHByZWRpY2F0ZVN0ID0gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKHByZXZPYmouZmllbGQsIHByZXZPYmoub3BlcmF0b3IsIHByZXZPYmoudmFsdWUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJlZGljYXRlRW5kID0gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKG5leHRPYmouZmllbGQsIG5leHRPYmoub3BlcmF0b3IsIG5leHRPYmoudmFsdWUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBkYXRlUHJlZGljYXRlID0gZmlsdGVyT2JqZWN0Lm9wZXJhdG9yID09PSAnZXF1YWwnID8gcHJlZGljYXRlU3QuYW5kKHByZWRpY2F0ZUVuZCkgOiBwcmVkaWNhdGVTdC5vcihwcmVkaWNhdGVFbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZWRpY2F0ZXMgPSBuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUocHJldk9iai5maWVsZCwgcHJldk9iai5vcGVyYXRvciwgcHJldk9iai52YWx1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGRhdGVQcmVkaWNhdGUgPSBwcmVkaWNhdGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGVQcmVkaWNhdGU7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmFkZFJvd3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGUucmVjb3Jkcy5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2UuanNvbi5zcGxpY2UoZS50b0luZGV4LCAwLCBlLnJlY29yZHNbaSAtIDFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUucmVtb3ZlUm93cyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIganNvbiA9IHRoaXMuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS5qc29uO1xuICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLmpzb24gPSBqc29uLmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7IHJldHVybiBlLnJlY29yZHMuaW5kZXhPZih2YWx1ZSkgPT09IC0xOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucm93c0FkZGVkLCB0aGlzLmFkZFJvd3MpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5yb3dzUmVtb3ZlZCwgdGhpcy5yZW1vdmVSb3dzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YVNvdXJjZU1vZGlmaWVkLCB0aGlzLmluaXREYXRhTWFuYWdlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFTb3VyY2VNb2RpZmllZCwgdGhpcy5kZXN0cm95KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudXBkYXRlRGF0YSwgdGhpcy5jcnVkQWN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmFkZERlbGV0ZUFjdGlvbiwgdGhpcy5nZXREYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERhdGE7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRhdGEgPSBEYXRhO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgdXRpbF8xLCBlajJfYmFzZV8yLCBlajJfZGF0YV8xLCBlajJfYnV0dG9uc18xLCBldmVudHMsIHZhbHVlX2Zvcm1hdHRlcl8xLCB1dGlsXzIsIGVqMl9wb3B1cHNfMSwgZWoyX2lucHV0c18xLCBlajJfcG9wdXBzXzIsIHV0aWxfMykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2hlY2tCb3hGaWx0ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDaGVja0JveEZpbHRlcihwYXJlbnQsIGZpbHRlclNldHRpbmdzLCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0Q29uc3RhbnRzID0ge1xuICAgICAgICAgICAgICAgIFNlYXJjaDogJ1NlYXJjaCcsXG4gICAgICAgICAgICAgICAgT0s6ICdPSycsXG4gICAgICAgICAgICAgICAgQ2FuY2VsOiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICBGaWx0ZXI6ICdGaWx0ZXInLFxuICAgICAgICAgICAgICAgIENsZWFyOiAnQ2xlYXInLFxuICAgICAgICAgICAgICAgIFNlbGVjdEFsbDogJ1NlbGVjdCBBbGwnLFxuICAgICAgICAgICAgICAgIEJsYW5rczogJ0JsYW5rcycsXG4gICAgICAgICAgICAgICAgVHJ1ZTogJ1RydWUnLFxuICAgICAgICAgICAgICAgIEZhbHNlOiAnRmFsc2UnLFxuICAgICAgICAgICAgICAgIE5vUmVzdWx0OiAnTm8gTWF0Y2hlcyBGb3VuZCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jQm94VHJ1ZSA9IGVqMl9idXR0b25zXzEuY3JlYXRlQ2hlY2tCb3goZmFsc2UsIHsgY2hlY2tlZDogdHJ1ZSwgbGFiZWw6ICcgJyB9KTtcbiAgICAgICAgICAgIHRoaXMuY0JveEZhbHNlID0gZWoyX2J1dHRvbnNfMS5jcmVhdGVDaGVja0JveChmYWxzZSwgeyBjaGVja2VkOiBmYWxzZSwgbGFiZWw6ICcgJyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5pZCA9IHRoaXMucGFyZW50LmVsZW1lbnQuaWQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnZhbHVlRm9ybWF0dGVyID0gbmV3IHZhbHVlX2Zvcm1hdHRlcl8xLlZhbHVlRm9ybWF0dGVyKHRoaXMucGFyZW50LmxvY2FsZSk7XG4gICAgICAgICAgICB0aGlzLmluaXRMb2NhbGUodGhpcy5kZWZhdWx0Q29uc3RhbnRzKTtcbiAgICAgICAgICAgIHRoaXMuY0JveFRydWUuaW5zZXJ0QmVmb3JlKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jaGstaGlkZGVuJywgYXR0cnM6IHsgdHlwZTogJ2NoZWNrYm94JyB9XG4gICAgICAgICAgICB9KSwgdGhpcy5jQm94VHJ1ZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHRoaXMuY0JveEZhbHNlLmluc2VydEJlZm9yZShlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2hrLWhpZGRlbicsIGF0dHJzOiB7ICd0eXBlJzogJ2NoZWNrYm94JyB9XG4gICAgICAgICAgICB9KSwgdGhpcy5jQm94RmFsc2UuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLmNCb3hGYWxzZS5xdWVyeVNlbGVjdG9yKCcuZS1mcmFtZScpLmNsYXNzTGlzdC5hZGQoJ2UtdW5jaGVjaycpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW3RoaXMuY0JveFRydWUsIHRoaXMuY0JveEZhbHNlXSwgWydlLXJ0bCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuaW5pdExvY2FsZSA9IGZ1bmN0aW9uIChjb25zdGFudHMpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxlT2JqID0gbmV3IGVqMl9iYXNlXzEuTDEwbih0aGlzLmdldE1vZHVsZU5hbWUoKSwgdGhpcy5kZWZhdWx0Q29uc3RhbnRzLCB0aGlzLnBhcmVudC5sb2NhbGUgfHwgJ2VuLVVTJyk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmRsZywgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZGxnLnF1ZXJ5U2VsZWN0b3IoJy5lLXNlYXJjaGlucHV0JyksICdrZXl1cCcsIHRoaXMuc2VhcmNoQm94S2V5VXAsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZGxnLCAnY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IHRoaXMuZGxnLnF1ZXJ5U2VsZWN0b3IoJy5lLXNlYXJjaGlucHV0Jyk7XG4gICAgICAgICAgICBpZiAoZWxlbSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShlbGVtLCAna2V5dXAnLCB0aGlzLnNlYXJjaEJveEtleVVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLnNlYXJjaEJveENsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNlYXJjaGNsZWFyJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaENoZWNrYm94ZXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlYXJjaEljb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuc2VhcmNoQm94S2V5VXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2hlY2tib3hlcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWFyY2hJY29uKCk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS51cGRhdGVTZWFyY2hJY29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc0lucHV0LnZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xhc3NMaXN0KHRoaXMuc0ljb24sIFsnZS1jaGtjYW5jZWwtaWNvbiddLCBbJ2Utc2VhcmNoLWljb24nXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdCh0aGlzLnNJY29uLCBbJ2Utc2VhcmNoLWljb24nXSwgWydlLWNoa2NhbmNlbC1pY29uJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZ2V0TG9jYWxpemVkTGFiZWwgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVPYmouZ2V0Q29uc3RhbnQoa2V5KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZURhdGFTb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGF0YVNvdXJjZSA9IHRoaXMub3B0aW9ucy5kYXRhU291cmNlO1xuICAgICAgICAgICAgaWYgKCEoZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhU291cmNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YVNvdXJjZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ialt0aGlzLm9wdGlvbnMuZmllbGRdID0gZGF0YVNvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VbaV0gPSBvYmo7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRhdGFTb3VyY2UgPSBvcHRpb25zLmRhdGFTb3VyY2U7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFTb3VyY2UoKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy50eXBlID0gb3B0aW9ucy50eXBlIHx8ICdzdHJpbmcnO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0IHx8ICcnO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZpbHRlcmVkQ29sdW1ucyA9IG9wdGlvbnMuZmlsdGVyZWRDb2x1bW5zIHx8IHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuc29ydGVkQ29sdW1ucyA9IG9wdGlvbnMuc29ydGVkQ29sdW1ucyB8fCB0aGlzLnBhcmVudC5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5xdWVyeSA9IG9wdGlvbnMucXVlcnkgfHwgbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5hbGxvd0Nhc2VTZW5zaXRpdmUgPSBvcHRpb25zLmFsbG93Q2FzZVNlbnNpdGl2ZSB8fCBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzID0ge307XG4gICAgICAgICAgICB0aGlzLmlzRmlsdGVyZWQgPSBvcHRpb25zLmZpbHRlcmVkQ29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmV4dGVuZCh0aGlzLmRlZmF1bHRDb25zdGFudHMsIG9wdGlvbnMubG9jYWxpemVkU3RyaW5ncyk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5nZXRBbmRTZXRDaGtFbGVtID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuZGxnID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQgKyB0aGlzLm9wdGlvbnMudHlwZSArICdfZXhjZWxEbGcnLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2hlY2tib3hmaWx0ZXIgZS1maWx0ZXItcG9wdXAnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc0JveCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXNlYXJjaGNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuaGlkZVNlYXJjaGJveCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc0lucHV0ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQgKyAnX1NlYXJjaEJveCcsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2Utc2VhcmNoaW5wdXQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zSWNvbiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1zZWFyY2hjbGVhciBlLXNlYXJjaC1pY29uIGUtaWNvbnMnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLCBwbGFjZWhvbGRlcjogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnU2VhcmNoJylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoQm94ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXNlYXJjaGJveCBlLWZpZWxkcycgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hCb3guYXBwZW5kQ2hpbGQodGhpcy5zSW5wdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc0JveC5hcHBlbmRDaGlsZCh0aGlzLnNlYXJjaEJveCk7XG4gICAgICAgICAgICAgICAgZWoyX2lucHV0c18xLklucHV0LmNyZWF0ZUlucHV0KHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5zSW5wdXQsIGZsb2F0TGFiZWxUeXBlOiAnTmV2ZXInLCBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnU2VhcmNoJylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoQm94LnF1ZXJ5U2VsZWN0b3IoJy5lLWlucHV0LWdyb3VwJykuYXBwZW5kQ2hpbGQodGhpcy5zSWNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNwaW5uZXIgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1zcGlubmVyJyB9KTtcbiAgICAgICAgICAgIHRoaXMuY0JveCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkICsgdGhpcy5vcHRpb25zLnR5cGUgKyAnX0NoZWNrQm94TGlzdCcsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jaGVja2JveGxpc3QgZS1maWVsZHMnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc3Bpbm5lci5hcHBlbmRDaGlsZCh0aGlzLmNCb3gpO1xuICAgICAgICAgICAgdGhpcy5zQm94LmFwcGVuZENoaWxkKHRoaXMuc3Bpbm5lcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zQm94O1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuc2hvd0RpYWxvZyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogZXZlbnRzLmZpbHRlckJlZm9yZU9wZW4sIGZpbHRlck1vZGVsOiB0aGlzLFxuICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IHRoaXMub3B0aW9ucy5maWVsZCwgY29sdW1uVHlwZTogdGhpcy5vcHRpb25zLnR5cGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iaiA9IG5ldyBlajJfcG9wdXBzXzEuRGlhbG9nKHtcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSwgY29udGVudDogdGhpcy5zQm94LFxuICAgICAgICAgICAgICAgIGNsb3NlOiB0aGlzLmNsb3NlRGlhbG9nLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgd2lkdGg6ICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh1dGlsXzEucGFyZW50c1VudGlsKG9wdGlvbnMudGFyZ2V0LCAnZS1iaWdnZXInKSkpXG4gICAgICAgICAgICAgICAgICAgIHx8IHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldmljZScpID8gMjYwIDogMjUwLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5wYXJlbnQuZWxlbWVudCwgYW5pbWF0aW9uU2V0dGluZ3M6IHsgZWZmZWN0OiAnTm9uZScgfSxcbiAgICAgICAgICAgICAgICBidXR0b25zOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuYnRuQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwodGhpcy5pc0V4Y2VsID8gJ09LJyA6ICdGaWx0ZXInKSwgY3NzQ2xhc3M6ICdlLXByaW1hcnknLCBpc1ByaW1hcnk6IHRydWUgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5idG5DbGljay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgY3NzQ2xhc3M6ICdlLWZsYXQnLCBjb250ZW50OiB0aGlzLmdldExvY2FsaXplZExhYmVsKHRoaXMuaXNFeGNlbCA/ICdDYW5jZWwnIDogJ0NsZWFyJykgfVxuICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkOiB0aGlzLmRpYWxvZ0NyZWF0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBvcGVuOiB0aGlzLmRpYWxvZ09wZW4uYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5hcHBlbmRUbyh0aGlzLmRsZyk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5lbGVtZW50LnN0eWxlLm1heEhlaWdodCA9ICc4MDBweCc7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5zaG93KCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMi5jcmVhdGVTcGlubmVyKHsgdGFyZ2V0OiB0aGlzLnNwaW5uZXIgfSk7XG4gICAgICAgICAgICBlajJfcG9wdXBzXzIuc2hvd1NwaW5uZXIodGhpcy5zcGlubmVyKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0QWxsRGF0YSgpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZGlhbG9nQ3JlYXRlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIHV0aWxfMy5nZXRGaWx0ZXJNZW51UG9zdGlvbih0aGlzLm9wdGlvbnMudGFyZ2V0LCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5wb3NpdGlvbiA9IHsgWDogJ2NlbnRlcicsIFk6ICdjZW50ZXInIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmZpbHRlckRpYWxvZ0NyZWF0ZWQsIGUpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUub3BlbkRpYWxvZyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGVsKG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5nZXRBbmRTZXRDaGtFbGVtKG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKG9wdGlvbnMpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuY2xvc2VEaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kaWFsb2dPYmogJiYgIXRoaXMuZGlhbG9nT2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5maWx0ZXJNZW51Q2xvc2UsIHsgZmllbGQ6IHRoaXMub3B0aW9ucy5maWVsZCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmRsZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGcgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuYnRuQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRleHQgPSBlLnRhcmdldC5pbm5lclRleHQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldExvY2FsaXplZExhYmVsKHRoaXMuaXNFeGNlbCA/ICdPSycgOiAnRmlsdGVyJykudG9Mb3dlckNhc2UoKSA9PT0gdGV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmx0ckJ0bkhhbmRsZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ0NsZWFyJykudG9Mb3dlckNhc2UoKSA9PT0gdGV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5oYW5kbGVyKHsgYWN0aW9uOiAnY2xlYXItZmlsdGVyJywgZmllbGQ6IHRoaXMub3B0aW9ucy5maWVsZCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmZsdHJCdG5IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBbXS5zbGljZS5jYWxsKHRoaXMuY0JveC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jaGVjazpub3QoLmUtc2VsZWN0YWxsKScpKTtcbiAgICAgICAgICAgIHZhciBvcHRyID0gJ2VxdWFsJztcbiAgICAgICAgICAgIHZhciBjYXNlU2VuID0gdGhpcy5vcHRpb25zLnR5cGUgPT09ICdzdHJpbmcnID9cbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuYWxsb3dDYXNlU2Vuc2l0aXZlIDogdHJ1ZTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICBmaWVsZDogdGhpcy5vcHRpb25zLmZpZWxkLCBwcmVkaWNhdGU6ICdvcicsXG4gICAgICAgICAgICAgICAgb3BlcmF0b3I6IG9wdHIsIG1hdGNoY2FzZTogY2FzZVNlblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBpc05vdEVxdWFsID0gdGhpcy5pdGVtc0NudCAhPT0gY2hlY2tlZC5sZW5ndGggJiYgdGhpcy5pdGVtc0NudCAtIGNoZWNrZWQubGVuZ3RoIDwgY2hlY2tlZC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoaXNOb3RFcXVhbCkge1xuICAgICAgICAgICAgICAgIG9wdHIgPSAnbm90ZXF1YWwnO1xuICAgICAgICAgICAgICAgIGNoZWNrZWQgPSBbXS5zbGljZS5jYWxsKHRoaXMuY0JveC5xdWVyeVNlbGVjdG9yQWxsKCcuZS11bmNoZWNrOm5vdCguZS1zZWxlY3RhbGwpJykpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHRzLnByZWRpY2F0ZSA9ICdhbmQnO1xuICAgICAgICAgICAgICAgIGRlZmF1bHRzLm9wZXJhdG9yID0gJ25vdGVxdWFsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBmT2JqO1xuICAgICAgICAgICAgdmFyIGNvbGwgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hlY2tlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy52YWx1ZXNbdXRpbF8xLnBhcmVudHNVbnRpbChjaGVja2VkW2ldLCAnZS1mdHJjaGsnKS5nZXRBdHRyaWJ1dGUoJ3VpZCcpXTtcbiAgICAgICAgICAgICAgICBmT2JqID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHsgdmFsdWU6IHZhbHVlIH0sIGRlZmF1bHRzKTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgIXZhbHVlLnRvU3RyaW5nKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZPYmoub3BlcmF0b3IgPSBpc05vdEVxdWFsID8gJ25vdGVxdWFsJyA6ICdlcXVhbCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbGwucHVzaCh0aGlzLm9wdGlvbnMudHlwZSA9PT0gJ2RhdGUnID8gQ2hlY2tCb3hGaWx0ZXIuc2V0RGF0ZU9iamVjdChmT2JqKSA6IGZPYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbml0aWF0ZUZpbHRlcihjb2xsKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmluaXRpYXRlRmlsdGVyID0gZnVuY3Rpb24gKGZDb2xsKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3RWYWwgPSBmQ29sbFswXTtcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGU7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZmlyc3RWYWwpKSB7XG4gICAgICAgICAgICAgICAgcHJlZGljYXRlID0gZmlyc3RWYWwuZWpwcmVkaWNhdGUgPyBmaXJzdFZhbC5lanByZWRpY2F0ZSA6XG4gICAgICAgICAgICAgICAgICAgIG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShmaXJzdFZhbC5maWVsZCwgZmlyc3RWYWwub3BlcmF0b3IsIGZpcnN0VmFsLnZhbHVlLCAhZmlyc3RWYWwubWF0Y2hjYXNlKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8IGZDb2xsLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZSA9IGZDb2xsW2pdLmVqcHJlZGljYXRlICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlW2ZDb2xsW2pdLnByZWRpY2F0ZV0oZkNvbGxbal0uZWpwcmVkaWNhdGUpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZVtmQ29sbFtqXS5wcmVkaWNhdGVdKGZDb2xsW2pdLmZpZWxkLCBmQ29sbFtqXS5vcGVyYXRvciwgZkNvbGxbal0udmFsdWUsICFmQ29sbFtqXS5tYXRjaGNhc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnZmlsdGVyaW5nJywgZmlsdGVyQ29sbGVjdGlvbjogZkNvbGwsIGZpZWxkOiB0aGlzLm9wdGlvbnMuZmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGVqcHJlZGljYXRlOiBlajJfZGF0YV8xLlByZWRpY2F0ZS5vcihwcmVkaWNhdGUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuaGFuZGxlcihhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLnJlZnJlc2hDaGVja2JveGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IHRoaXMuc0lucHV0LnZhbHVlO1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5vcHRpb25zLnF1ZXJ5LmNsb25lKCk7XG4gICAgICAgICAgICB2YXIgcGFyc2VkID0gKHRoaXMub3B0aW9ucy50eXBlICE9PSAnc3RyaW5nJyAmJiBwYXJzZUZsb2F0KHZhbCkpID8gcGFyc2VGbG9hdCh2YWwpIDogdmFsO1xuICAgICAgICAgICAgdmFyIG9wZXJhdG9yID0gJ2NvbnRhaW5zJztcbiAgICAgICAgICAgIHZhciBtYXRjaGNhc2UgPSB0cnVlO1xuICAgICAgICAgICAgcGFyc2VkID0gKHBhcnNlZCA9PT0gJycgfHwgcGFyc2VkID09PSB1bmRlZmluZWQpID8gdW5kZWZpbmVkIDogcGFyc2VkO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50eXBlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnVHJ1ZScpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihwYXJzZWQudG9Mb3dlckNhc2UoKSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9ICd0cnVlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnRmFsc2UnKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YocGFyc2VkLnRvTG93ZXJDYXNlKCkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWQgPSAnZmFsc2UnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHlwZSA9PT0gJ2RhdGUnIHx8IHRoaXMub3B0aW9ucy50eXBlID09PSAnZGF0ZXRpbWUnKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkID0gdGhpcy52YWx1ZUZvcm1hdHRlci5mcm9tVmlldyh2YWwsIHRoaXMub3B0aW9ucy5wYXJzZXJGbiwgdGhpcy5vcHRpb25zLnR5cGUpO1xuICAgICAgICAgICAgICAgIG9wZXJhdG9yID0gJ2VxdWFsJztcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChwYXJzZWQpICYmIHZhbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWwubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkud2hlcmUodGhpcy5vcHRpb25zLmZpZWxkLCBvcGVyYXRvciwgcGFyc2VkLCBtYXRjaGNhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRGF0YVNvdXJjZShxdWVyeSk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5nZXRQcmVkaWNhdGVGcm9tQ29scyA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlO1xuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZXMgPSBDaGVja0JveEZpbHRlci5nZXRQcmVkaWNhdGUoY29sdW1ucyk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMocHJlZGljYXRlcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGFuZCA9ICdhbmQnO1xuICAgICAgICAgICAgICAgIHZhciBvYmogPSBwcmVkaWNhdGVzW3Byb3BdO1xuICAgICAgICAgICAgICAgIHByZWRpY2F0ZSA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHByZWRpY2F0ZSkgP1xuICAgICAgICAgICAgICAgICAgICBwcmVkaWNhdGVbYW5kXShvYmopIDpcbiAgICAgICAgICAgICAgICAgICAgb2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByZWRpY2F0ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIucHJvdG90eXBlLmdldEFsbERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgICAgIHF1ZXJ5LnJlcXVpcmVzQ291bnQoKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kYXRhU291cmNlID0gdGhpcy5vcHRpb25zLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyID9cbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZSA6IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMub3B0aW9ucy5kYXRhU291cmNlKTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5vcHRpb25zLmRhdGFTb3VyY2UuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KTtcbiAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZGF0YVN1Y2Nlc3MoZSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZGF0YVN1Y2Nlc3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5mdWxsRGF0YSA9IGUucmVzdWx0O1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gbmV3IGVqMl9kYXRhXzEuUXVlcnkoKTtcbiAgICAgICAgICAgIGlmICgodGhpcy5vcHRpb25zLmZpbHRlcmVkQ29sdW1ucy5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub3B0aW9ucy5maWx0ZXJlZENvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5maWx0ZXJlZENvbHVtbnNbaV0uZmllbGQgIT09IHRoaXMub3B0aW9ucy5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29scy5wdXNoKHRoaXMub3B0aW9ucy5maWx0ZXJlZENvbHVtbnNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwcmVkaWNhdGUgPSB0aGlzLmdldFByZWRpY2F0ZUZyb21Db2xzKGNvbHMpO1xuICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkud2hlcmUocHJlZGljYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxdWVyeS5zZWxlY3QodGhpcy5vcHRpb25zLmZpZWxkKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih0aGlzLmZ1bGxEYXRhKS5leGVjdXRlTG9jYWwocXVlcnkpO1xuICAgICAgICAgICAgdmFyIHJlcyA9IENoZWNrQm94RmlsdGVyLmdldERpc3RpbmN0KHJlc3VsdCwgdGhpcy5vcHRpb25zLmZpZWxkKTtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyZWREYXRhID0gcmVzLnJlY29yZHM7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NEYXRhU291cmNlKG51bGwsIHRydWUpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6IGV2ZW50cy5maWx0ZXJBZnRlck9wZW4sXG4gICAgICAgICAgICAgICAgZmlsdGVyTW9kZWw6IHRoaXMsIGNvbHVtbk5hbWU6IHRoaXMub3B0aW9ucy5maWVsZCwgY29sdW1uVHlwZTogdGhpcy5vcHRpb25zLnR5cGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5wcm9jZXNzRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChxdWVyeSwgaXNJbml0aWFsKSB7XG4gICAgICAgICAgICBlajJfcG9wdXBzXzIuc2hvd1NwaW5uZXIodGhpcy5zcGlubmVyKTtcbiAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkgPyBxdWVyeSA6IHRoaXMub3B0aW9ucy5xdWVyeS5jbG9uZSgpO1xuICAgICAgICAgICAgcXVlcnkucmVxdWlyZXNDb3VudCgpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6IGV2ZW50cy5maWx0ZXJDaG9pY2VSZXF1ZXN0LCBmaWx0ZXJNb2RlbDogdGhpcywgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IHRoaXMuZmlsdGVyZWREYXRhXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKGFyZ3MuZGF0YVNvdXJjZSkuZXhlY3V0ZUxvY2FsKGFyZ3MucXVlcnkpO1xuICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3VsdDtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUmVzdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUZpbHRlckl0ZW1zKHJlcy5yZXN1bHQsIGlzSW5pdGlhbCk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS51cGRhdGVSZXN1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdCA9IHt9O1xuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZSA9IHRoaXMuZ2V0UHJlZGljYXRlRnJvbUNvbHModGhpcy5vcHRpb25zLmZpbHRlcmVkQ29sdW1ucyk7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpO1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LndoZXJlKHByZWRpY2F0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIodGhpcy5mdWxsRGF0YSkuZXhlY3V0ZUxvY2FsKHF1ZXJ5KTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVzdWx0XzEgPSByZXN1bHQ7IF9pIDwgcmVzdWx0XzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3VsdF8xW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdFtyZXNbdGhpcy5vcHRpb25zLmZpZWxkXV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBlbGVtID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWNoZWNrYm94LXdyYXBwZXInKTtcbiAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2Utc2VhcmNoYm94JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEJveENsaWNrKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0QWxsID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuZS1zZWxlY3RhbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0QWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQWxsQ0JveGVzKCFzZWxlY3RBbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNoZWNrJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8zLnRvb2dsZUNoZWNrYm94KGVsZW0ucGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSW5kZXRlcm1pbmF0ZW5CdG4oKTtcbiAgICAgICAgICAgICAgICBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5lLWNoay1oaWRkZW4nKS5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUudXBkYXRlQWxsQ0JveGVzID0gZnVuY3Rpb24gKGNoZWNrZWQpIHtcbiAgICAgICAgICAgIHZhciBjQm94ZXMgPSBbXS5zbGljZS5jYWxsKHRoaXMuY0JveC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1mcmFtZScpKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY0JveGVzXzEgPSBjQm94ZXM7IF9pIDwgY0JveGVzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNCb3ggPSBjQm94ZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbY0JveF0sIFsnZS1jaGVjaycsICdlLXN0b3AnLCAnZS11bmNoZWNrJ10pO1xuICAgICAgICAgICAgICAgIGlmIChjaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNCb3guY2xhc3NMaXN0LmFkZCgnZS1jaGVjaycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY0JveC5jbGFzc0xpc3QuYWRkKCdlLXVuY2hlY2snKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5kaWFsb2dPcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldmljZScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1pbnB1dC1ncm91cCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2UtaW5wdXQtZm9jdXMnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWJ0bicpLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5jcmVhdGVDaGVja2JveCA9IGZ1bmN0aW9uICh2YWx1ZSwgY2hlY2tlZCkge1xuICAgICAgICAgICAgdmFyIGVsZW0gPSBjaGVja2VkID8gdGhpcy5jQm94VHJ1ZS5jbG9uZU5vZGUodHJ1ZSkgOlxuICAgICAgICAgICAgICAgIHRoaXMuY0JveEZhbHNlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmUtbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSAmJiB2YWx1ZS50b1N0cmluZygpLmxlbmd0aCA/IHZhbHVlIDpcbiAgICAgICAgICAgICAgICB0aGlzLmdldExvY2FsaXplZExhYmVsKCdCbGFua3MnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHt9O1xuICAgICAgICAgICAgICAgIGFyZ3NbdGhpcy5vcHRpb25zLmZpZWxkXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbihsYWJlbCwgdGhpcy5vcHRpb25zLnRlbXBsYXRlKGFyZ3MpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUudXBkYXRlSW5kZXRlcm1pbmF0ZW5CdG4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY250ID0gdGhpcy5jQm94LmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gW107XG4gICAgICAgICAgICB2YXIgZWxlbSA9IHRoaXMuY0JveC5xdWVyeVNlbGVjdG9yKCcuZS1zZWxlY3RhbGwnKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IHRoaXMuY0JveC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jaGVjazpub3QoLmUtc2VsZWN0YWxsKScpLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBidG4gPSB0aGlzLmRsZy5xdWVyeVNlbGVjdG9yKCcuZS1mb290ZXItY29udGVudCcpLnF1ZXJ5U2VsZWN0b3IoJy5lLWJ0bicpLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICBidG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChjbnQgPT09IHNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gWydlLWNoZWNrJ107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IFsnZS1zdG9wJ107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBidG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbZWxlbV0sIFsnZS1jaGVjaycsICdlLXN0b3AnLCAnZS11bmNoZWNrJ10pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbZWxlbV0sIGNsYXNzTmFtZSk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5jcmVhdGVGaWx0ZXJJdGVtcyA9IGZ1bmN0aW9uIChkYXRhLCBpc0luaXRpYWwpIHtcbiAgICAgICAgICAgIHZhciBjQm94ZXMgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdGhpcy5pdGVtc0NudCA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoIHx8IGlzSW5pdGlhbCkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RBbGwgPSB1dGlsXzMuY3JlYXRlQ2JveFdpdGhXcmFwKHV0aWxfMS5nZXRVaWQoJ2Nib3gnKSwgdGhpcy5jcmVhdGVDaGVja2JveCh0aGlzLmdldExvY2FsaXplZExhYmVsKCdTZWxlY3RBbGwnKSwgZmFsc2UpLCAnZS1mdHJjaGsnKTtcbiAgICAgICAgICAgICAgICBzZWxlY3RBbGwucXVlcnlTZWxlY3RvcignLmUtZnJhbWUnKS5jbGFzc0xpc3QuYWRkKCdlLXNlbGVjdGFsbCcpO1xuICAgICAgICAgICAgICAgIGNCb3hlcy5hcHBlbmRDaGlsZChzZWxlY3RBbGwpO1xuICAgICAgICAgICAgICAgIHZhciBpc0NvbEZpbHRlcmVkID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIodGhpcy5vcHRpb25zLmZpbHRlcmVkQ29sdW1ucykuZXhlY3V0ZUxvY2FsKG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkud2hlcmUoJ2ZpZWxkJywgJ2VxdWFsJywgdGhpcy5vcHRpb25zLmZpZWxkKSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdWlkID0gdXRpbF8xLmdldFVpZCgnY2JveCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1t1aWRdID0gZGF0YVtpXVt0aGlzLm9wdGlvbnMuZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlRm9ybWF0dGVyLnRvVmlldyhkYXRhW2ldW3RoaXMub3B0aW9ucy5maWVsZF0sIHRoaXMub3B0aW9ucy5mb3JtYXRGbik7XG4gICAgICAgICAgICAgICAgICAgIGNCb3hlcy5hcHBlbmRDaGlsZCh1dGlsXzMuY3JlYXRlQ2JveFdpdGhXcmFwKHVpZCwgdGhpcy5jcmVhdGVDaGVja2JveCh2YWx1ZSwgdGhpcy5nZXRDaGVja2VkU3RhdGUoaXNDb2xGaWx0ZXJlZCwgdGhpcy52YWx1ZXNbdWlkXSkpLCAnZS1mdHJjaGsnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY0JveC5pbm5lckhUTUwgPSBjQm94ZXMuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSW5kZXRlcm1pbmF0ZW5CdG4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNCb3hlcy5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGlubmVySFRNTDogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnTm9SZXN1bHQnKSB9KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jQm94LmlubmVySFRNTCA9IGNCb3hlcy5pbm5lckhUTUw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHsgcmVxdWVzdFR5cGU6IGV2ZW50cy5maWx0ZXJDaG9pY2VSZXF1ZXN0LCBmaWx0ZXJNb2RlbDogdGhpcywgZGF0YVNvdXJjZTogZGF0YSB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGFyZ3MpO1xuICAgICAgICAgICAgZWoyX3BvcHVwc18yLmhpZGVTcGlubmVyKHRoaXMuc3Bpbm5lcik7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnByb3RvdHlwZS5nZXRDaGVja2VkU3RhdGUgPSBmdW5jdGlvbiAoaXNDb2xGaWx0ZXJlZCwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0ZpbHRlcmVkIHx8ICFpc0NvbEZpbHRlcmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRbdmFsdWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5nZXREaXN0aW5jdCA9IGZ1bmN0aW9uIChqc29uLCBmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IGpzb24ubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgdmFyIGVqVmFsdWUgPSAnZWpWYWx1ZSc7XG4gICAgICAgICAgICB2YXIgbG9va3VwID0ge307XG4gICAgICAgICAgICB3aGlsZSAobGVuLS0pIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGpzb25bbGVuXTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpID9cbiAgICAgICAgICAgICAgICAgICAgdmFsdWVbZmllbGRdIDogdmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISh2YWx1ZSBpbiBsb29rdXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpbZWpWYWx1ZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ialtmaWVsZF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbG9va3VwW3ZhbHVlXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVqMl9kYXRhXzEuRGF0YVV0aWwuZ3JvdXAoZWoyX2RhdGFfMS5EYXRhVXRpbC5zb3J0KHJlc3VsdCwgZmllbGQsIGVqMl9kYXRhXzEuRGF0YVV0aWwuZm5Bc2NlbmRpbmcpLCAnZWpWYWx1ZScpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5zZXREYXRlT2JqZWN0ID0gZnVuY3Rpb24gKGZpbHRlck9iamVjdCkge1xuICAgICAgICAgICAgdmFyIHByZXZPYmogPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgdXRpbF8yLmdldEFjdHVhbFByb3BlcnRpZXMoZmlsdGVyT2JqZWN0KSk7XG4gICAgICAgICAgICB2YXIgbmV4dE9iaiA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB1dGlsXzIuZ2V0QWN0dWFsUHJvcGVydGllcyhmaWx0ZXJPYmplY3QpKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IG5ldyBEYXRlKGZpbHRlck9iamVjdC52YWx1ZSk7XG4gICAgICAgICAgICB2YXIgcHJldkRhdGUgPSBuZXcgRGF0ZSh2YWx1ZS5zZXREYXRlKHZhbHVlLmdldERhdGUoKSAtIDEpKTtcbiAgICAgICAgICAgIHZhciBuZXh0RGF0ZSA9IG5ldyBEYXRlKHZhbHVlLnNldERhdGUodmFsdWUuZ2V0RGF0ZSgpICsgMikpO1xuICAgICAgICAgICAgcHJldk9iai52YWx1ZSA9IHByZXZEYXRlO1xuICAgICAgICAgICAgbmV4dE9iai52YWx1ZSA9IG5leHREYXRlO1xuICAgICAgICAgICAgaWYgKGZpbHRlck9iamVjdC5vcGVyYXRvciA9PT0gJ2VxdWFsJykge1xuICAgICAgICAgICAgICAgIG5leHRPYmoub3BlcmF0b3IgPSAnbGVzc3RoYW4nO1xuICAgICAgICAgICAgICAgIG5leHRPYmoucHJlZGljYXRlID0gJ2FuZCc7XG4gICAgICAgICAgICAgICAgcHJldk9iai5vcGVyYXRvciA9ICdncmVhdGVydGhhbic7XG4gICAgICAgICAgICAgICAgcHJldk9iai5wcmVkaWNhdGUgPSAnYW5kJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZpbHRlck9iamVjdC5vcGVyYXRvciA9PT0gJ25vdGVxdWFsJykge1xuICAgICAgICAgICAgICAgIG5leHRPYmoub3BlcmF0b3IgPSAnZ3JlYXRlcnRoYW5vcmVxdWFsJztcbiAgICAgICAgICAgICAgICBuZXh0T2JqLnByZWRpY2F0ZSA9ICdvcic7XG4gICAgICAgICAgICAgICAgcHJldk9iai5vcGVyYXRvciA9ICdsZXNzdGhhbm9yZXF1YWwnO1xuICAgICAgICAgICAgICAgIHByZXZPYmoucHJlZGljYXRlID0gJ29yJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGVTdCA9IG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShwcmV2T2JqLmZpZWxkLCBwcmV2T2JqLm9wZXJhdG9yLCBwcmV2T2JqLnZhbHVlLCBmYWxzZSk7XG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlRW5kID0gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKG5leHRPYmouZmllbGQsIG5leHRPYmoub3BlcmF0b3IsIG5leHRPYmoudmFsdWUsIGZhbHNlKTtcbiAgICAgICAgICAgIGZpbHRlck9iamVjdC5lanByZWRpY2F0ZSA9IGZpbHRlck9iamVjdC5vcGVyYXRvciA9PT0gJ2VxdWFsJyA/IHByZWRpY2F0ZVN0LmFuZChwcmVkaWNhdGVFbmQpIDpcbiAgICAgICAgICAgICAgICBwcmVkaWNhdGVTdC5vcihwcmVkaWNhdGVFbmQpO1xuICAgICAgICAgICAgZmlsdGVyT2JqZWN0LnR5cGUgPSAnZGF0ZSc7XG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyT2JqZWN0O1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5nZXRQcmVkaWNhdGUgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBDaGVja0JveEZpbHRlci5nZXREaXN0aW5jdChjb2x1bW5zLCAnZmllbGQnKS5yZWNvcmRzO1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb247XG4gICAgICAgICAgICB2YXIgcHJlZCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbiA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKGNvbHVtbnMpLmV4ZWN1dGVMb2NhbChuZXcgZWoyX2RhdGFfMS5RdWVyeSgpLndoZXJlKCdmaWVsZCcsICdlcXVhbCcsIGNvbHNbaV0uZmllbGQpKTtcbiAgICAgICAgICAgICAgICBwcmVkW2NvbHNbaV0uZmllbGRdID0gQ2hlY2tCb3hGaWx0ZXIuZ2VuZXJhdGVQcmVkaWNhdGUoY29sbGVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJlZDtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hlY2tCb3hGaWx0ZXIuZ2VuZXJhdGVQcmVkaWNhdGUgPSBmdW5jdGlvbiAoY29scykge1xuICAgICAgICAgICAgdmFyIGxlbiA9IGNvbHMgPyBjb2xzLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlO1xuICAgICAgICAgICAgdmFyIGZpcnN0O1xuICAgICAgICAgICAgZmlyc3QgPSBDaGVja0JveEZpbHRlci51cGRhdGVEYXRlRmlsdGVyKGNvbHNbMF0pO1xuICAgICAgICAgICAgaWYgKGZpcnN0LnR5cGUgPT09ICdkYXRlJyB8fCBmaXJzdC50eXBlID09PSAnZGF0ZXRpbWUnKSB7XG4gICAgICAgICAgICAgICAgcHJlZGljYXRlID0gQ2hlY2tCb3hGaWx0ZXIuZ2V0RGF0ZVByZWRpY2F0ZShmaXJzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmVkaWNhdGUgPSBmaXJzdC5lanByZWRpY2F0ZSA/IGZpcnN0LmVqcHJlZGljYXRlIDpcbiAgICAgICAgICAgICAgICAgICAgbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKGZpcnN0LmZpZWxkLCBmaXJzdC5vcGVyYXRvciwgZmlyc3QudmFsdWUsIGZpcnN0Lmlnbm9yZUNhc2UgfHwgIWZpcnN0Lm1hdGNoY2FzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBwID0gMTsgcCA8IGxlbjsgcCsrKSB7XG4gICAgICAgICAgICAgICAgY29sc1twXSA9IENoZWNrQm94RmlsdGVyLnVwZGF0ZURhdGVGaWx0ZXIoY29sc1twXSk7XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA+IDIgJiYgcCA+IDEgJiYgY29sc1twXS5wcmVkaWNhdGUgPT09ICdvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHNbcF0udHlwZSA9PT0gJ2RhdGUnIHx8IGNvbHNbcF0udHlwZSA9PT0gJ2RhdGV0aW1lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlLnByZWRpY2F0ZXMucHVzaChDaGVja0JveEZpbHRlci5nZXREYXRlUHJlZGljYXRlKGNvbHNbcF0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZS5wcmVkaWNhdGVzLnB1c2gobmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKGNvbHNbcF0uZmllbGQsIGNvbHNbcF0ub3BlcmF0b3IsIGNvbHNbcF0udmFsdWUsIGNvbHNbcF0uaWdub3JlQ2FzZSB8fCAhY29sc1twXS5tYXRjaGNhc2UpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHNbcF0udHlwZSA9PT0gJ2RhdGUnIHx8IGNvbHNbcF0udHlwZSA9PT0gJ2RhdGV0aW1lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlID0gcHJlZGljYXRlWyhjb2xzW3BdLnByZWRpY2F0ZSldKENoZWNrQm94RmlsdGVyLmdldERhdGVQcmVkaWNhdGUoY29sc1twXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlID0gY29sc1twXS5lanByZWRpY2F0ZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlW2NvbHNbcF0ucHJlZGljYXRlXShjb2xzW3BdLmVqcHJlZGljYXRlKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlWyhjb2xzW3BdLnByZWRpY2F0ZSldKGNvbHNbcF0uZmllbGQsIGNvbHNbcF0ub3BlcmF0b3IsIGNvbHNbcF0udmFsdWUsIGNvbHNbcF0uaWdub3JlQ2FzZSB8fCAhY29sc1twXS5tYXRjaGNhc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByZWRpY2F0ZSB8fCBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5nZXREYXRlUHJlZGljYXRlID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShwcmVkaWNhdGUuZmllbGQsIHByZWRpY2F0ZS5vcGVyYXRvciwgcHJlZGljYXRlLnZhbHVlLCBwcmVkaWNhdGUuaWdub3JlQ2FzZSB8fCAhcHJlZGljYXRlLm1hdGNoY2FzZSk7XG4gICAgICAgIH07XG4gICAgICAgIENoZWNrQm94RmlsdGVyLnVwZGF0ZURhdGVGaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgICAgICAgICBpZiAoZmlsdGVyLnR5cGUgIT09ICdkYXRlJyAmJiAhKGZpbHRlci52YWx1ZSBpbnN0YW5jZW9mIERhdGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbJ2VxdWFsJywgJ25vdGVxdWFsJ10uaW5kZXhPZihmaWx0ZXIub3BlcmF0b3IpID09PSAtMSA/IGZpbHRlciA6XG4gICAgICAgICAgICAgICAgQ2hlY2tCb3hGaWx0ZXIuc2V0RGF0ZU9iamVjdChmaWx0ZXIpO1xuICAgICAgICB9O1xuICAgICAgICBDaGVja0JveEZpbHRlci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnY2hlY2tib3hGaWx0ZXInO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2hlY2tCb3hGaWx0ZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNoZWNrQm94RmlsdGVyID0gQ2hlY2tCb3hGaWx0ZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9jaGVja2JveC1maWx0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yM19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIlxuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzI0X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCJcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4vcm93LXJlbmRlcmVyXCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZW51bV8xLCByb3dfcmVuZGVyZXJfMSwgY2VsbF8xLCByb3dfMSwgZXZlbnRzLCBlajJfYmFzZV80LCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEhlYWRlclJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEhlYWRlclJlbmRlcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIGlmICghKGdPYmouYWxsb3dSZW9yZGVyaW5nIHx8IGdPYmouYWxsb3dHcm91cGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdmlzdWFsRWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNsb25lcHJvcGVydGllcyBlLWRyYWdjbG9uZSBlLWhlYWRlcmNsb25lJyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS5zZW5kZXIudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1oZWFkZXJjZWxsJykgPyB0YXJnZXQgOlxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyY2VsbGRpdiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpO1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBnT2JqLmdldENvbHVtbkJ5VWlkKGhlYWRlcmNlbGxkaXYuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbC5oZWFkZXJUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5oZWFkZXJUZW1wbGF0ZS5pbmRleE9mKCcjJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LmlubmVySFRNTCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29sLmhlYWRlclRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5pbm5lckhUTUwgPSBjb2wuaGVhZGVyVGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQudGV4dENvbnRlbnQgPSBoZWFkZXJjZWxsZGl2ID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZ2V0Q29sdW1uQnlVaWQoaGVhZGVyY2VsbGRpdi5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKS5oZWFkZXJUZXh0IDogZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQuc3R5bGUud2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnN0eWxlLmhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnN0eWxlLmxpbmVIZWlnaHQgPSAoaGVpZ2h0IC0gNikudG9TdHJpbmcoKSArICdweCc7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlVaWQoZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnLCBfdGhpcy5jb2x1bW4udWlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmFwcGVuZENoaWxkKHZpc3VhbEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB2aXN1YWxFbGVtZW50O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB7IHRhcmdldDogZS50YXJnZXQsIGNvbHVtbjogX3RoaXMuY29sdW1uLCBldmVudDogZS5ldmVudCB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbG9zZXN0ID0gZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lRWxlbWVudCA9IF90aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNsb25lcHJvcGVydGllcycpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNsb3Nlc3QgfHwgY2xvc2VzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09IGdPYmouZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLW5vdGFsbG93ZWRjdXInXSwgWydlLWRlZmF1bHRjdXInXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd1Jlb3JkZXJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtcmVvcmRlcnVwYXJyb3cnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1yZW9yZGVyZG93bmFycm93Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuY29sdW1uRHJhZywgeyB0YXJnZXQ6IGUudGFyZ2V0LCBjb2x1bW46IF90aGlzLmNvbHVtbiwgZXZlbnQ6IGUuZXZlbnQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0b3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBjYW5jZWw7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgaWYgKCghdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpICYmICF1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncm91cGRyb3BhcmVhJykpIHx8XG4gICAgICAgICAgICAgICAgICAgICghZ09iai5hbGxvd1Jlb3JkZXJpbmcgJiYgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpKSB8fFxuICAgICAgICAgICAgICAgICAgICAoIWUuaGVscGVyLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykgJiYgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JvdXBkcm9wYXJlYScpKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShlLmhlbHBlcik7XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5jb2x1bW5EcmFnU3RvcCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCBldmVudDogZS5ldmVudCwgY29sdW1uOiBfdGhpcy5jb2x1bW4sIGNhbmNlbDogY2FuY2VsIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHVpZCA9IGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgY2xvc2VzdCA9IGVqMl9iYXNlXzIuY2xvc2VzdChlLnRhcmdldCwgJy5lLWdyaWQnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShlLmRyb3BwZWRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VzdCAmJiBjbG9zZXN0LmdldEF0dHJpYnV0ZSgnaWQnKSAhPT0gZ09iai5lbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSB8fFxuICAgICAgICAgICAgICAgICAgICAhKGdPYmouYWxsb3dSZW9yZGVyaW5nIHx8IGdPYmouYWxsb3dHcm91cGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuaGVhZGVyRHJvcCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCB1aWQ6IHVpZCB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2FyaWFTZXJ2aWNlJyk7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnd2lkdGhTZXJ2aWNlJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMuc2V0VmlzaWJsZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLnJlZnJlc2hVSSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5yZW5kZXJQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkaGVhZGVyJyB9KTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWhlYWRlcmNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlubmVyRGl2KTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGFuZWwoZGl2KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJEaXYgPSB0aGlzLmdldFBhbmVsKCk7XG4gICAgICAgICAgICBoZWFkZXJEaXYuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVIZWFkZXJUYWJsZSgpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VGFibGUoaGVhZGVyRGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlJykpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplSGVhZGVyRHJhZygpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplSGVhZGVyRHJvcCgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHsgcm93czogdGhpcy5yb3dzIH0pO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldFBhbmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyUGFuZWw7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuc2V0UGFuZWwgPSBmdW5jdGlvbiAocGFuZWwpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUGFuZWwgPSBwYW5lbDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlclRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnNldFRhYmxlID0gZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlclRhYmxlID0gdGFibGU7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0Q29sR3JvdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2xncm91cDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5zZXRDb2xHcm91cCA9IGZ1bmN0aW9uIChjb2xHcm91cCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sZ3JvdXAgPSBjb2xHcm91cDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5nZXRUYWJsZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRhYmxlLnRIZWFkLnJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuY3JlYXRlSGVhZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB0aGlzLmNyZWF0ZVRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGlubmVyRGl2LmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgICAgIHJldHVybiBpbm5lckRpdjtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5jcmVhdGVUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdPYmouZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHsgY2xhc3NOYW1lOiAnZS10YWJsZScsIGF0dHJzOiB7IGNlbGxzcGFjaW5nOiAnMC4yNXB4Jywgcm9sZTogJ2dyaWQnIH0gfSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIHZhciBmaW5kSGVhZGVyUm93ID0gdGhpcy5jcmVhdGVIZWFkZXJDb250ZW50KCk7XG4gICAgICAgICAgICB2YXIgdGhlYWQgPSBmaW5kSGVhZGVyUm93LnRoZWFkO1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0Ym9keScsIHsgY2xhc3NOYW1lOiAnZS1oaWRlJyB9KTtcbiAgICAgICAgICAgIHZhciBjb2xHcm91cCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnY29sZ3JvdXAnKTtcbiAgICAgICAgICAgIHZhciByb3dCb2R5ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgdmFyIGJvZHlDZWxsO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnJvd3MgPSBmaW5kSGVhZGVyUm93LnJvd3M7XG4gICAgICAgICAgICB2YXIgcm93UmVuZGVyZXIgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgZW51bV8xLkNlbGxUeXBlLkhlYWRlcik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsZW5fMSA9IHJvd3NbaV0uY2VsbHMubGVuZ3RoOyBqIDwgbGVuXzE7IGorKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvd3NbaV0uY2VsbHNbal07XG4gICAgICAgICAgICAgICAgICAgIGJvZHlDZWxsID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgICAgICByb3dCb2R5LmFwcGVuZENoaWxkKGJvZHlDZWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0ZpbHRlcmluZyB8fCBnT2JqLmFsbG93U29ydGluZyB8fCBnT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICB0YWJsZS5jbGFzc0xpc3QuYWRkKCdlLXNvcnRmaWx0ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sR3JvdXAoY29sR3JvdXApO1xuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQocm93Qm9keSk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0aGlzLnNldENvbEdyb3VwKGNvbEdyb3VwKSk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0aGVhZCk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnModGFibGUsIHsgY29sY291bnQ6IGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aC50b1N0cmluZygpIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmNyZWF0ZUhlYWRlckNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB0aGVhZCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGhlYWQnKTtcbiAgICAgICAgICAgIHZhciBjb2xIZWFkZXIgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RyJywgeyBjbGFzc05hbWU6ICdlLWNvbHVtbmhlYWRlcicgfSk7XG4gICAgICAgICAgICB2YXIgcm93UmVuZGVyZXIgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgZW51bV8xLkNlbGxUeXBlLkhlYWRlciwgZ09iaik7XG4gICAgICAgICAgICByb3dSZW5kZXJlci5lbGVtZW50ID0gY29sSGVhZGVyO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3c7XG4gICAgICAgICAgICB0aGlzLmNvbERlcHRoID0gdGhpcy5nZXRPYmpEZXB0aCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuY29sRGVwdGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3NbaV0gPSB0aGlzLmdlbmVyYXRlUm93KGkpO1xuICAgICAgICAgICAgICAgIHJvd3NbaV0uY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvd3MgPSB0aGlzLmVuc3VyZUNvbHVtbnMocm93cyk7XG4gICAgICAgICAgICByb3dzID0gdGhpcy5nZXRIZWFkZXJDZWxscyhyb3dzKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmNvbERlcHRoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJSb3cgPSByb3dSZW5kZXJlci5yZW5kZXIocm93c1tpXSwgY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgdGhlYWQuYXBwZW5kQ2hpbGQoaGVhZGVyUm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmaW5kSGVhZGVyUm93ID0ge1xuICAgICAgICAgICAgICAgIHRoZWFkOiB0aGVhZCxcbiAgICAgICAgICAgICAgICByb3dzOiByb3dzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGZpbmRIZWFkZXJSb3c7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUudXBkYXRlQ29sR3JvdXAgPSBmdW5jdGlvbiAoY29sR3JvdXApIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIGNvbDtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2YoaSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb2wgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbCcpO1xuICAgICAgICAgICAgICAgICAgICBjb2xHcm91cC5hcHBlbmRDaGlsZChjb2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSB8fCB0aGlzLnBhcmVudC5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICBjb2wgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbCcpO1xuICAgICAgICAgICAgICAgIGNvbEdyb3VwLmFwcGVuZENoaWxkKGNvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnY29sJyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0udmlzaWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZXRTdHlsZUF0dHJpYnV0ZShjb2wsIHsgJ2Rpc3BsYXknOiAnbm9uZScgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbEdyb3VwLmFwcGVuZENoaWxkKGNvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sR3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZW5zdXJlQ29sdW1ucyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDAsIGxlbl8yID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBjIDwgbGVuXzI7IGMrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZGV4ZXMuaW5kZXhPZihjKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgZW51bV8xLkNlbGxUeXBlLkhlYWRlckluZGVudCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmRldGFpbFRlbXBsYXRlIHx8IGdPYmouY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgZW51bV8xLkNlbGxUeXBlLkRldGFpbEhlYWRlcikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldEhlYWRlckNlbGxzID0gZnVuY3Rpb24gKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW47XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpICYmIHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcigndGhlYWQnKSkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSB0aGlzLnBhcmVudC5jb2x1bW5zLnNsaWNlKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMsIHRoaXMucGFyZW50LmNvbHVtbnMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IHRoaXMucGFyZW50LmNvbHVtbnMuc2xpY2UoMCwgdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/IHRoaXMucGFyZW50LmdldENvbHVtbnMoKVxuICAgICAgICAgICAgICAgIDogKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgPyBjb2x1bW4gOiB0aGlzLnBhcmVudC5jb2x1bW5zKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93cyA9IHRoaXMuYXBwZW5kQ2VsbHMoY29sc1tpXSwgcm93cywgMCwgaSA9PT0gMCwgZmFsc2UsIGkgPT09IChsZW4gLSAxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5hcHBlbmRDZWxscyA9IGZ1bmN0aW9uIChjb2xzLCByb3dzLCBpbmRleCwgaXNGaXJzdE9iaiwgaXNGaXJzdENvbCwgaXNMYXN0Q29sKSB7XG4gICAgICAgICAgICB2YXIgbGFzdENvbCA9IGlzTGFzdENvbCA/ICdlLWxhc3RjZWxsJyA6ICcnO1xuICAgICAgICAgICAgaWYgKCFjb2xzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICByb3dzW2luZGV4XS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKGNvbHMsIGVudW1fMS5DZWxsVHlwZS5IZWFkZXIsIHRoaXMuY29sRGVwdGggLSBpbmRleCwgKGlzRmlyc3RPYmogPyAnJyA6IChpc0ZpcnN0Q29sID8gJ2UtZmlyc3RjZWxsJyA6ICcnKSkgKyBsYXN0Q29sLCBpbmRleCwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeVVpZChjb2xzLnVpZCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjb2xTcGFuID0gdGhpcy5nZXRDZWxsQ250KGNvbHMsIDApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3NbaW5kZXhdLmNlbGxzLnB1c2gobmV3IGNlbGxfMS5DZWxsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxUeXBlOiBlbnVtXzEuQ2VsbFR5cGUuU3RhY2tlZEhlYWRlciwgY29sdW1uOiBjb2xzLCBjb2xTcGFuOiBjb2xTcGFuXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICByb3dzID0gdGhpcy5hcHBlbmRDZWxscyhjb2xzLmNvbHVtbnNbaV0sIHJvd3MsIGluZGV4ICsgMSwgaXNGaXJzdE9iaiwgaSA9PT0gMCwgaSA9PT0gKGxlbiAtIDEpICYmIGlzTGFzdENvbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2VuZXJhdGVSb3cgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgcm93XzEuUm93KHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGwgPSBmdW5jdGlvbiAoY29sdW1uLCBjZWxsVHlwZSwgcm93U3BhbiwgY2xhc3NOYW1lLCByb3dJbmRleCwgY29sSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBjb2x1bW4udmlzaWJsZSxcbiAgICAgICAgICAgICAgICAnaXNEYXRhQ2VsbCc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICdpc1RlbXBsYXRlJzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmhlYWRlclRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAncm93SUQnOiAnJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogY29sdW1uLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6IGNlbGxUeXBlLFxuICAgICAgICAgICAgICAgICdyb3dTcGFuJzogcm93U3BhbixcbiAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzogY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICdpbmRleCc6IHJvd0luZGV4LFxuICAgICAgICAgICAgICAgICdjb2xJbmRleCc6IGNvbEluZGV4XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFvcHQucm93U3BhbiB8fCBvcHQucm93U3BhbiA8IDIpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0LnJvd1NwYW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5nZXRSb3dzKCkpO1xuICAgICAgICAgICAgdmFyIGRpc3BsYXlWYWwgPSAnJztcbiAgICAgICAgICAgIHZhciBpZHg7XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQ7XG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMCwgY2xlbiA9IGNvbHVtbnMubGVuZ3RoOyBjIDwgY2xlbjsgYysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNbY107XG4gICAgICAgICAgICAgICAgaWR4ID0gdGhpcy5wYXJlbnQuZ2V0Tm9ybWFsaXplZENvbHVtbkluZGV4KGNvbHVtbi51aWQpO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVZhbCA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmdldENvbEdyb3VwKCkuY2hpbGROb2Rlc1tpZHhdLCB7ICdkaXNwbGF5JzogZGlzcGxheVZhbCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hVSSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJEaXYgPSB0aGlzLmdldFBhbmVsKCk7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB0aGlzLmdldFRhYmxlKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmdldFRhYmxlKCkpO1xuICAgICAgICAgICAgdGFibGUucmVtb3ZlQ2hpbGQodGFibGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0YWJsZS5yZW1vdmVDaGlsZCh0YWJsZS5jaGlsZE5vZGVzWzBdKTtcbiAgICAgICAgICAgIHZhciBjb2xHcm91cCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnY29sZ3JvdXAnKTtcbiAgICAgICAgICAgIHZhciBmaW5kSGVhZGVyUm93ID0gdGhpcy5jcmVhdGVIZWFkZXJDb250ZW50KCk7XG4gICAgICAgICAgICB0aGlzLnJvd3MgPSBmaW5kSGVhZGVyUm93LnJvd3M7XG4gICAgICAgICAgICB0YWJsZS5pbnNlcnRCZWZvcmUoZmluZEhlYWRlclJvdy50aGVhZCwgdGFibGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbEdyb3VwKGNvbEdyb3VwKTtcbiAgICAgICAgICAgIHRhYmxlLmluc2VydEJlZm9yZSh0aGlzLnNldENvbEdyb3VwKGNvbEdyb3VwKSwgdGFibGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKHRhYmxlKTtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kQ29udGVudCh0YWJsZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNvbEdyb3VwUmVmcmVzaCwge30pO1xuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2Uuc2V0V2lkdGhUb0NvbHVtbnMoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUhlYWRlckRyYWcoKTtcbiAgICAgICAgICAgIHZhciByb3dzID0gW10uc2xpY2UuY2FsbChoZWFkZXJEaXYucXVlcnlTZWxlY3RvckFsbCgndHIuZS1jb2x1bW5oZWFkZXInKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd3NfMSA9IHJvd3M7IF9pIDwgcm93c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSByb3dzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBnQ2VsbHMgPSBbXS5zbGljZS5jYWxsKHJvdy5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncm91cHRvcGxlZnRjZWxsJykpO1xuICAgICAgICAgICAgICAgIGlmIChnQ2VsbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdDZWxsc1tnQ2VsbHMubGVuZ3RoIC0gMV0uY2xhc3NMaXN0LmFkZCgnZS1sYXN0Z3JvdXB0b3BsZWZ0Y2VsbCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB7IHJvd3M6IHRoaXMucm93cyB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1RleHRXcmFwICYmIHRoaXMucGFyZW50LnRleHRXcmFwU2V0dGluZ3Mud3JhcE1vZGUgPT09ICdoZWFkZXInKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLndyYXAocm93cywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuYXBwZW5kQ29udGVudCA9IGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldE9iakRlcHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1heCA9IDA7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkZXB0aCA9IHRoaXMuY2hlY2tEZXB0aChjb2xzW2ldLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAobWF4IDwgZGVwdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gZGVwdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1heCArIDE7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuY2hlY2tEZXB0aCA9IGZ1bmN0aW9uIChjb2wsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoY29sLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2wuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuY2hlY2tEZXB0aChjb2wuY29sdW1uc1tpXSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRDZWxsQ250ID0gZnVuY3Rpb24gKGNvbCwgY250KSB7XG4gICAgICAgICAgICBpZiAoY29sLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY250ID0gdGhpcy5nZXRDZWxsQ250KGNvbC5jb2x1bW5zW2ldLCBjbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBjbnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY250O1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmluaXRpYWxpemVIZWFkZXJEcmFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghKHRoaXMucGFyZW50LmFsbG93UmVvcmRlcmluZyB8fCAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZyAmJiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLnNob3dEcm9wQXJlYSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGhlYWRlclJvd3MgPSBbXS5zbGljZS5jYWxsKGdPYmouZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNvbHVtbmhlYWRlcicpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBoZWFkZXJSb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyYWcgPSBuZXcgZWoyX2Jhc2VfNC5EcmFnZ2FibGUoaGVhZGVyUm93c1tpXSwge1xuICAgICAgICAgICAgICAgICAgICBkcmFnVGFyZ2V0OiAnLmUtaGVhZGVyY2VsbCcsXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlOiA1LFxuICAgICAgICAgICAgICAgICAgICBoZWxwZXI6IHRoaXMuaGVscGVyLFxuICAgICAgICAgICAgICAgICAgICBkcmFnU3RhcnQ6IHRoaXMuZHJhZ1N0YXJ0LFxuICAgICAgICAgICAgICAgICAgICBkcmFnOiB0aGlzLmRyYWcsXG4gICAgICAgICAgICAgICAgICAgIGRyYWdTdG9wOiB0aGlzLmRyYWdTdG9wLFxuICAgICAgICAgICAgICAgICAgICBhYm9ydDogJy5lLXJoYW5kbGVyJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmluaXRpYWxpemVIZWFkZXJEcm9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkcm9wID0gbmV3IGVqMl9iYXNlXzQuRHJvcHBhYmxlKGdPYmouZ2V0SGVhZGVyQ29udGVudCgpLCB7XG4gICAgICAgICAgICAgICAgYWNjZXB0OiAnLmUtZHJhZ2Nsb25lJyxcbiAgICAgICAgICAgICAgICBkcm9wOiB0aGlzLmRyb3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSGVhZGVyUmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5IZWFkZXJSZW5kZXIgPSBIZWFkZXJSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvaGVhZGVyLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGVqMl9idXR0b25zXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENlbGxSZW5kZXJlcihwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnVEQnLCB7IGNsYXNzTmFtZTogJ2Utcm93Y2VsbCcsIGF0dHJzOiB7IHJvbGU6ICdncmlkY2VsbCcsIHRhYmluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLnJvd0Noa0JveCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGNsYXNzTmFtZTogJ2UtY2hlY2tzZWxlY3QnLCBhdHRyczogeyAndHlwZSc6ICdjaGVja2JveCcgfSB9KTtcbiAgICAgICAgICAgIHRoaXMubG9jYWxpemVyID0gbG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0dGVyID0gbG9jYXRvci5nZXRTZXJ2aWNlKCd2YWx1ZUZvcm1hdHRlcicpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5nZXRHdWkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKGNvbHVtbiwgdmFsdWUsIGRhdGEpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5mb3JtYXR0ZXIudG9WaWV3KHZhbHVlLCBjb2x1bW4uZ2V0Rm9ybWF0dGVyKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpID8gJycgOiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKG5vZGUsIGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICBpZiAoY2VsbC5jb2x1bW4udGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGl0ZXJhbHMgPSBbJ2luZGV4J107XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gY2VsbC5jb2x1bW4uZ2V0Q29sdW1uVGVtcGxhdGUoKShlajJfYmFzZV8xLmV4dGVuZCh7ICdpbmRleCc6IGF0dHJpYnV0ZXNbbGl0ZXJhbHNbMF1dIH0sIGRhdGEpLCB0aGlzLnBhcmVudCwgJ3RlbXBsYXRlJyk7XG4gICAgICAgICAgICAgICAgdXRpbF8xLmFwcGVuZENoaWxkcmVuKG5vZGUsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBub2RlLmlubmVyVGV4dCArICcgaXMgdGVtcGxhdGUgY2VsbCcgKyAnIGNvbHVtbiBoZWFkZXIgJyArXG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY29sdW1uLmhlYWRlclRleHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmludm9rZUZvcm1hdHRlciA9IGZ1bmN0aW9uIChjb2x1bW4sIHZhbHVlLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZvcm1hdHRlcikpIHtcbiAgICAgICAgICAgICAgICBpZiAodXRpbF8xLmRvZXNJbXBsZW1lbnRJbnRlcmZhY2UoY29sdW1uLmZvcm1hdHRlciwgJ2dldFZhbHVlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdHRlciA9IGNvbHVtbi5mb3JtYXR0ZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IGZvcm1hdHRlcigpLmdldFZhbHVlKGNvbHVtbiwgZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBjb2x1bW4uZm9ybWF0dGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29sdW1uLmZvcm1hdHRlcihjb2x1bW4sIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjb2x1bW4uZm9ybWF0dGVyLmdldFZhbHVlKGNvbHVtbiwgZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWZyZXNoQ2VsbChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoVEQgPSBmdW5jdGlvbiAodGQsIGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5yZWZyZXNoQ2VsbChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHRkLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbChub2RlLmNoaWxkTm9kZXMpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBlbGVtZW50c18xID0gZWxlbWVudHM7IF9pIDwgZWxlbWVudHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGVsZW1lbnRzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHRkLmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hDZWxsID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlubmVySHRtbCA9IHRoaXMuZ2V0R3VpKCk7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmdldFZhbHVlKGNvbHVtbi5maWVsZCwgZGF0YSwgY29sdW1uKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZm9ybWF0KGNvbHVtbiwgdmFsdWUsIGRhdGEpO1xuICAgICAgICAgICAgaW5uZXJIdG1sID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzTnVsbCA9ICh2YWx1ZSAhPT0gJ3RydWUnICYmIHZhbHVlICE9PSAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmRpc3BsYXlBc0NoZWNrQm94KSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnZS1jaGVja2JveCcpO1xuICAgICAgICAgICAgICAgICAgICBpbm5lckh0bWwgPSBpc051bGwgPyBudWxsIDogJzxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBkaXNhYmxlZCAnICsgJy8+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbGVTdHIgPSBpc051bGwgPyBudWxsIDogdmFsdWUgPT09ICd0cnVlJyA/ICdUcnVlJyA6ICdGYWxzZSc7XG4gICAgICAgICAgICAgICAgICAgIGlubmVySHRtbCA9IGxvY2FsZVN0ciA/IHRoaXMubG9jYWxpemVyLmdldENvbnN0YW50KGxvY2FsZVN0cikgOiBpbm5lckh0bWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZyb21Gb3JtYXR0ZXIgPSB0aGlzLmludm9rZUZvcm1hdHRlcihjb2x1bW4sIHZhbHVlLCBkYXRhKTtcbiAgICAgICAgICAgIGlubmVySHRtbCA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5mb3JtYXR0ZXIpID8gZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChmcm9tRm9ybWF0dGVyKSA/ICcnIDogZnJvbUZvcm1hdHRlci50b1N0cmluZygpIDogaW5uZXJIdG1sO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpbm5lckh0bWwgKyAnIGNvbHVtbiBoZWFkZXIgJyArIGNlbGwuY29sdW1uLmhlYWRlclRleHQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZXZhbHVhdGUobm9kZSwgY2VsbCwgZGF0YSwgYXR0cmlidXRlcykgJiYgY29sdW1uLnR5cGUgIT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEh0bWwobm9kZSwgaW5uZXJIdG1sLCBjb2x1bW4uZ2V0RG9tU2V0dGVyID8gY29sdW1uLmdldERvbVNldHRlcigpIDogJ2lubmVySFRNTCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29sdW1uLnR5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZ3JpZGNoa2JveCcpO1xuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ2NvbHVtbiBoZWFkZXIgJyArIGNlbGwuY29sdW1uLmhlYWRlclRleHQpO1xuICAgICAgICAgICAgICAgIHZhciBjaGVja0JveCA9IHRoaXMucm93Q2hrQm94LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgICAgIGNoZWNrQm94LmlkID0gJ2NoZWNrc2VsZWN0XycgKyBjZWxsLnJvd0lELnNwbGl0KCdncmlkLXJvdycpWzFdO1xuICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoY2hlY2tCb3gpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5zZWxlY3Rpb25TZXR0aW5ncy5wZXJzaXN0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgPT09ICd0cnVlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ldyBlajJfYnV0dG9uc18xLkNoZWNrQm94KHsgY2hlY2tlZDogdmFsdWUgfSkuYXBwZW5kVG8oY2hlY2tCb3gpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVzKG5vZGUsIGNlbGwsIGF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi50eXBlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0gbmV3IGVqMl9idXR0b25zXzEuQ2hlY2tCb3goeyBkaXNhYmxlZDogdHJ1ZSwgY2hlY2tlZDogdmFsdWUgPT09ICd0cnVlJyB9KTtcbiAgICAgICAgICAgICAgICBvYmouYXBwZW5kVG8obm9kZS5maXJzdEVsZW1lbnRDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5hcHBlbmRIdG1sID0gZnVuY3Rpb24gKG5vZGUsIGlubmVySHRtbCwgcHJvcGVydHkpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gdm9pZCAwKSB7IHByb3BlcnR5ID0gJ2lubmVySFRNTCc7IH1cbiAgICAgICAgICAgIG5vZGVbcHJvcGVydHldID0gaW5uZXJIdG1sO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuc2V0QXR0cmlidXRlcyA9IGZ1bmN0aW9uIChub2RlLCBjZWxsLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2VsbC5jb2x1bW47XG4gICAgICAgICAgICB0aGlzLmJ1aWxkQXR0cmlidXRlRnJvbUNlbGwobm9kZSwgY2VsbCk7XG4gICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBjZWxsLmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5jdXN0b21BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBjb2x1bW4uY3VzdG9tQXR0cmlidXRlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLnRleHRBbGlnbikge1xuICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUudGV4dEFsaWduID0gY29sdW1uLnRleHRBbGlnbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2x1bW4uY2xpcE1vZGUgPT09ICdjbGlwJykge1xuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnZS1ncmlkY2xpcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29sdW1uLmNsaXBNb2RlID09PSAnZWxsaXBzaXN3aXRodG9vbHRpcCcpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZWxsaXBzaXN0b29sdGlwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuYnVpbGRBdHRyaWJ1dGVGcm9tQ2VsbCA9IGZ1bmN0aW9uIChub2RlLCBjZWxsKSB7XG4gICAgICAgICAgICB2YXIgYXR0ciA9IHt9O1xuICAgICAgICAgICAgdmFyIHByb3AgPSB7ICdjb2xpbmRleCc6ICdhcmlhLWNvbGluZGV4JyB9O1xuICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSBbXTtcbiAgICAgICAgICAgIGlmIChjZWxsLmNvbFNwYW4pIHtcbiAgICAgICAgICAgICAgICBhdHRyLmNvbFNwYW4gPSBjZWxsLmNvbFNwYW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2VsbC5yb3dTcGFuKSB7XG4gICAgICAgICAgICAgICAgYXR0ci5yb3dTcGFuID0gY2VsbC5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNlbGwuaXNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS10ZW1wbGF0ZWNlbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjZWxsLmlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2guYXBwbHkoY2xhc3NlcywgWydlLXNlbGVjdGlvbmJhY2tncm91bmQnLCAnZS1hY3RpdmUnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY2VsbC5pbmRleCkpIHtcbiAgICAgICAgICAgICAgICBhdHRyW3Byb3AuY29saW5kZXhdID0gY2VsbC5pbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2VsbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHIuY2xhc3MgPSBjbGFzc2VzO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBhdHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uIChmaWVsZCwgZGF0YSwgY29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLnZhbHVlQWNjZXNzb3IoY29sdW1uLmZpZWxkLCBkYXRhLCBjb2x1bW4pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2VsbFJlbmRlcmVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DZWxsUmVuZGVyZXIgPSBDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvYXJpYS1zZXJ2aWNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGNlbGxfcmVuZGVyZXJfMSwgYXJpYV9zZXJ2aWNlXzEsIGVqMl9idXR0b25zXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEhlYWRlckNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhIZWFkZXJDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEhlYWRlckNlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnVEgnLCB7IGNsYXNzTmFtZTogJ2UtaGVhZGVyY2VsbCcsIGF0dHJzOiB7IHJvbGU6ICdjb2x1bW5oZWFkZXInLCB0YWJpbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgX3RoaXMuYXJpYVNlcnZpY2UgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKTtcbiAgICAgICAgICAgIF90aGlzLmhUeHRFbGUgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtaGVhZGVydGV4dCcgfSk7XG4gICAgICAgICAgICBfdGhpcy5zb3J0RWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2Utc29ydGZpbHRlcmRpdiBlLWljb25zJyB9KTtcbiAgICAgICAgICAgIF90aGlzLmd1aSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBfdGhpcy5jaGtBbGxCb3ggPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBjbGFzc05hbWU6ICdlLWNoZWNrc2VsZWN0YWxsJywgYXR0cnM6IHsgJ3R5cGUnOiAnY2hlY2tib3gnIH0gfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5nZXRHdWkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ndWkuY2xvbmVOb2RlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdmFyIGZsdHJNZW51RWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZmlsdGVybWVudWRpdiBlLWljb25zIGUtaWNvbi1maWx0ZXInIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJlcGFyZUhlYWRlcihjZWxsLCBub2RlLCBmbHRyTWVudUVsZSk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uIChjZWxsLCBub2RlKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFuKG5vZGUpO1xuICAgICAgICAgICAgdmFyIGZsdHJNZW51RWxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZmlsdGVybWVudWRpdiBlLWljb25zIGUtaWNvbi1maWx0ZXInIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJlcGFyZUhlYWRlcihjZWxsLCBub2RlLCBmbHRyTWVudUVsZSk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuY2xlYW4gPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgbm9kZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlSGVhZGVyID0gZnVuY3Rpb24gKGNlbGwsIG5vZGUsIGZsdHJNZW51RWxlKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2VsbC5jb2x1bW47XG4gICAgICAgICAgICB2YXIgYXJpYUF0dHIgPSB7fTtcbiAgICAgICAgICAgIHZhciBpbm5lckRJViA9IHRoaXMuZ2V0R3VpKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAnZS1tYXBwaW5ndWlkJzogY29sdW1uLnVpZCxcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiAnZS1oZWFkZXJjZWxsZGl2J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgIT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjb2x1bW4uaGVhZGVyVGV4dDtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyVGV4dCA9IHRoaXMuaFR4dEVsZS5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgICAgICBoZWFkZXJUZXh0W2NvbHVtbi5nZXREb21TZXR0ZXIoKV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChoZWFkZXJUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbHVtbi5lZGl0VHlwZSA9ICdib29sZWFuZWRpdCc7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrQWxsQm94ID0gdGhpcy5jaGtBbGxCb3guY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICAgICAgaW5uZXJESVYuYXBwZW5kQ2hpbGQoY2hlY2tBbGxCb3gpO1xuICAgICAgICAgICAgICAgIHZhciBjaGVja0FsbEJveE9iaiA9IG5ldyBlajJfYnV0dG9uc18xLkNoZWNrQm94KCk7XG4gICAgICAgICAgICAgICAgY2hlY2tBbGxCb3hPYmouYXBwZW5kVG8oY2hlY2tBbGxCb3gpO1xuICAgICAgICAgICAgICAgIGlubmVyRElWLmNsYXNzTGlzdC5hZGQoJ2UtaGVhZGVyY2hrY2VsbGRpdicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5idWlsZEF0dHJpYnV0ZUZyb21DZWxsKG5vZGUsIGNlbGwpO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRIdG1sKG5vZGUsIGlubmVyRElWKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5zb3J0RWxlLmNsb25lTm9kZSgpKTtcbiAgICAgICAgICAgIGlmICgodGhpcy5wYXJlbnQuYWxsb3dGaWx0ZXJpbmcgJiYgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MudHlwZSAhPT0gJ2ZpbHRlcmJhcicpICYmXG4gICAgICAgICAgICAgICAgKGNvbHVtbi5hbGxvd0ZpbHRlcmluZyAmJiBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi50ZW1wbGF0ZSkpICYmXG4gICAgICAgICAgICAgICAgISh0aGlzLnBhcmVudC5zaG93Q29sdW1uTWVudSAmJiBjb2x1bW4uc2hvd0NvbHVtbk1lbnUpKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGZsdHJNZW51RWxlLCB7XG4gICAgICAgICAgICAgICAgICAgICdlLW1hcHBpbmd1aWQnOiAnZS1mbG1lbnUtJyArIGNvbHVtbi51aWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWZsdHItaWNvbicpO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaEZsQ29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCAmJiB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCAhPT0gbWF0Y2hGbENvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnBhcmVudC5jb2x1bW5zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgY291bnQgPSAwOyBjb3VudCA8IHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBjb3VudCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLmNvbHVtbnNbY291bnRdLmZpZWxkID09PSBjb2x1bW4uZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmx0ck1lbnVFbGUuY2xhc3NMaXN0LmFkZCgnZS1maWx0ZXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEZsQ29sdW1ucy5wdXNoKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGZsdHJNZW51RWxlLmNsb25lTm9kZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjZWxsLmNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChjZWxsLmNsYXNzTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLmN1c3RvbUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGNvbHVtbi5jdXN0b21BdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2x1bW4uYWxsb3dTb3J0aW5nKSB7XG4gICAgICAgICAgICAgICAgYXJpYUF0dHIuc29ydCA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2x1bW4uYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGFyaWFBdHRyLmdyYWJiZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUgPSB0aGlzLmV4dGVuZFByZXBhcmVIZWFkZXIoY29sdW1uLCBub2RlKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uaGVhZGVyVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5oZWFkZXJUZW1wbGF0ZS5pbmRleE9mKCcjJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyRElWLmlubmVySFRNTCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29sdW1uLmhlYWRlclRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJESVYuaW5uZXJIVE1MID0gY29sdW1uLmhlYWRlclRlbXBsYXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyhub2RlLCBhcmlhQXR0cik7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmhlYWRlclRleHRBbGlnbikgfHwgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLnRleHRBbGlnbikpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWxpZ25tZW50ID0gY29sdW1uLmhlYWRlclRleHRBbGlnbiB8fCBjb2x1bW4udGV4dEFsaWduO1xuICAgICAgICAgICAgICAgIGlubmVyRElWLnN0eWxlLnRleHRBbGlnbiA9IGFsaWdubWVudDtcbiAgICAgICAgICAgICAgICBpZiAoYWxpZ25tZW50ID09PSAncmlnaHQnIHx8IGFsaWdubWVudCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChhbGlnbm1lbnQgPT09ICdyaWdodCcgPyAnZS1yaWdodGFsaWduJyA6ICdlLWxlZnRhbGlnbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2x1bW4uY2xpcE1vZGUgPT09ICdjbGlwJykge1xuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnZS1ncmlkY2xpcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29sdW1uLmNsaXBNb2RlID09PSAnZWxsaXBzaXN3aXRodG9vbHRpcCcpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZWxsaXBzaXN0b29sdGlwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1yb3dzcGFuJywgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGwucm93U3BhbikgPyBjZWxsLnJvd1NwYW4gOiAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWNvbHNwYW4nLCAnMScpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuZXh0ZW5kUHJlcGFyZUhlYWRlciA9IGZ1bmN0aW9uIChjb2x1bW4sIG5vZGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5zaG93Q29sdW1uTWVudSAmJiBjb2x1bW4uc2hvd0NvbHVtbk1lbnUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWNvbHVtbm1lbnUnIH0pKTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hGaWx0ZXJlZENvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggJiYgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggIT09IG1hdGNoRmlsdGVyZWRDb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyZW50LmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zW2pdLmZpZWxkID09PSBjb2x1bW4uZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWZpbHRlcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoRmlsdGVyZWRDb2x1bW5zLnB1c2goY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnZS1mbHRyLWljb24nKTtcbiAgICAgICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93UmVzaXppbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlciA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgaGFuZGxlci5jbGFzc05hbWUgPSBjb2x1bW4uYWxsb3dSZXNpemluZyA/ICdlLXJoYW5kbGVyIGUtcmN1cnNvcicgOiAnZS1yc3VwcHJlc3MnO1xuICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5hcHBlbmRIdG1sID0gZnVuY3Rpb24gKG5vZGUsIGlubmVySHRtbCkge1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChpbm5lckh0bWwpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIZWFkZXJDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5IZWFkZXJDZWxsUmVuZGVyZXIgPSBIZWFkZXJDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvaGVhZGVyLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEFyaWFTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQXJpYVNlcnZpY2UoKSB7XG4gICAgICAgIH1cbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiAodGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgcHJvcHMgPSBPYmplY3Qua2V5cyhvcHRpb25zKTtcbiAgICAgICAgICAgIHByb3BzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZ1tuYW1lXSwgb3B0aW9uc1tuYW1lXSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0RXhwYW5kID0gZnVuY3Rpb24gKHRhcmdldCwgZXhwYW5kKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuZXhwYW5kLCBleHBhbmQpO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0U29ydCA9IGZ1bmN0aW9uICh0YXJnZXQsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLnNvcnQsIGRpcmVjdGlvbiwgdHlwZW9mIGRpcmVjdGlvbiA9PT0gJ2Jvb2xlYW4nKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldEJ1c3kgPSBmdW5jdGlvbiAodGFyZ2V0LCBpc0J1c3kpIHtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5idXN5LCBpc0J1c3kpO1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLmludmFsaWQsIG51bGwsIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0R3JhYmJlZCA9IGZ1bmN0aW9uICh0YXJnZXQsIGlzR3JhYmJlZCwgcmVtb3ZlKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuZ3JhYmJlZCwgaXNHcmFiYmVkLCByZW1vdmUpO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0RHJvcFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQsIGlzVGFyZ2V0KSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuZHJvcGVmZmVjdCwgJ2NvcHknLCAhaXNUYXJnZXQpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQXJpYVNlcnZpY2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkFyaWFTZXJ2aWNlID0gQXJpYVNlcnZpY2U7XG4gICAgZnVuY3Rpb24gc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgYXR0cmlidXRlLCB2YWx1ZSwgcmVtb3ZlKSB7XG4gICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgIGV4cGFuZDogJ2FyaWEtZXhwYW5kZWQnLFxuICAgICAgICByb2xlOiAncm9sZScsXG4gICAgICAgIHNlbGVjdGVkOiAnYXJpYS1zZWxlY3RlZCcsXG4gICAgICAgIG11bHRpc2VsZWN0YWJsZTogJ2FyaWEtbXVsdGlzZWxlY3RhYmxlJyxcbiAgICAgICAgc29ydDogJ2FyaWEtc29ydCcsXG4gICAgICAgIGJ1c3k6ICdhcmlhLWJ1c3knLFxuICAgICAgICBpbnZhbGlkOiAnYXJpYS1pbnZhbGlkJyxcbiAgICAgICAgZ3JhYmJlZDogJ2FyaWEtZ3JhYmJlZCcsXG4gICAgICAgIGRyb3BlZmZlY3Q6ICdhcmlhLWRyb3BlZmZlY3QnLFxuICAgICAgICBoYXNwb3B1cDogJ2FyaWEtaGFzcG9wdXAnLFxuICAgICAgICBsZXZlbDogJ2FyaWEtbGV2ZWwnLFxuICAgICAgICBjb2xjb3VudDogJ2FyaWEtY29sY291bnQnXG4gICAgfTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9hcmlhLXNlcnZpY2UuanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdUSCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWhlYWRlcmNlbGwgZS1zdGFja2VkaGVhZGVyY2VsbCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdjb2x1bW5oZWFkZXInLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1zdGFja2VkaGVhZGVyY2VsbGRpdicgfSk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gY2VsbC5jb2x1bW4uaGVhZGVyVGV4dDtcbiAgICAgICAgICAgIGlmIChjZWxsLmNvbHVtbi50b29sVGlwKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgY2VsbC5jb2x1bW4udG9vbFRpcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjZWxsLmNvbHVtbi50ZXh0QWxpZ24pKSB7XG4gICAgICAgICAgICAgICAgZGl2LnN0eWxlLnRleHRBbGlnbiA9IGNlbGwuY29sdW1uLnRleHRBbGlnbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY2VsbC5jb2xTcGFuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29sc3BhbicsIGNlbGwuY29sU3Bhbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLXJvd3NwYW4nLCAnMScpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlciA9IFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvc3RhY2tlZC1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgdXRpbF8xLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEluZGVudENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhJbmRlbnRDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEluZGVudENlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEQnLCB7IGNsYXNzTmFtZTogJ2UtaW5kZW50Y2VsbCcgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgSW5kZW50Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGNlbGwuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEluZGVudENlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkluZGVudENlbGxSZW5kZXJlciA9IEluZGVudENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9pbmRlbnQtY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNlbGxfcmVuZGVyZXJfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBHcm91cENhcHRpb25DZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBHcm91cENhcHRpb25DZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1REJywgeyBjbGFzc05hbWU6ICdlLWdyb3VwY2FwdGlvbicsIGF0dHJzOiB7IHJvbGU6ICdncmlkY2VsbCcsIHRhYmluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIHZhciBoZWxwZXIgPSB7fTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNlbGwuY29sdW1uLmVuYWJsZUdyb3VwQnlGb3JtYXQgPyBkYXRhLmtleSA6XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtYXQoY2VsbC5jb2x1bW4sIGNlbGwuY29sdW1uLnZhbHVlQWNjZXNzb3IoJ2tleScsIGRhdGEsIGNlbGwuY29sdW1uKSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZ09iai5ncm91cFNldHRpbmdzLmNhcHRpb25UZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5ncm91cFNldHRpbmdzLmNhcHRpb25UZW1wbGF0ZS5pbmRleE9mKCcjJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ09iai5ncm91cFNldHRpbmdzLmNhcHRpb25UZW1wbGF0ZSkuaW5uZXJIVE1MLnRyaW0oKSkoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcihnT2JqLmdyb3VwU2V0dGluZ3MuY2FwdGlvblRlbXBsYXRlKShkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXRpbF8xLmFwcGVuZENoaWxkcmVuKG5vZGUsIHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlLmlubmVySFRNTCA9IGNlbGwuY29sdW1uLmhlYWRlclRleHQgKyAnOiAnICsgdmFsdWUgKyAnIC0gJyArIGRhdGEuY291bnQgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAoZGF0YS5jb3VudCA8IDIgPyB0aGlzLmxvY2FsaXplci5nZXRDb25zdGFudCgnSXRlbScpIDogdGhpcy5sb2NhbGl6ZXIuZ2V0Q29uc3RhbnQoJ0l0ZW1zJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjZWxsLmNvbFNwYW4udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIG5vZGUuaW5uZXJIVE1MICsgJyBpcyBncm91cGNhcHRpb24gY2VsbCcpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcm91cENhcHRpb25DZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5Hcm91cENhcHRpb25DZWxsUmVuZGVyZXIgPSBHcm91cENhcHRpb25DZWxsUmVuZGVyZXI7XG4gICAgdmFyIEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEQnLCB7IGNsYXNzTmFtZTogJ2UtZ3JvdXBjYXB0aW9uJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgbm9kZS5pbm5lckhUTUwgPSAnJm5ic3A7JztcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY2VsbC5jb2xTcGFuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyID0gR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvY2FwdGlvbi1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9pbmRlbnQtY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGluZGVudF9jZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEV4cGFuZENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhFeHBhbmRDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEV4cGFuZENlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBFeHBhbmRDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuY2xhc3NOYW1lID0gJ2UtcmVjb3JkcGx1c2V4cGFuZCc7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZWotbWFwcGluZ25hbWUnLCBkYXRhLmZpZWxkKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdlai1tYXBwaW5ndmFsdWUnLCBkYXRhLmtleSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgZS1nZGlhZ29uYWxkb3duIGUtaWNvbi1nZG93bmFycm93JyB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV4cGFuZENlbGxSZW5kZXJlcjtcbiAgICB9KGluZGVudF9jZWxsX3JlbmRlcmVyXzEuSW5kZW50Q2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5FeHBhbmRDZWxsUmVuZGVyZXIgPSBFeHBhbmRDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZXhwYW5kLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDMyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEhlYWRlckluZGVudENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEhlYWRlckluZGVudENlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEgnLCB7IGNsYXNzTmFtZTogJ2UtZ3JvdXB0b3BsZWZ0Y2VsbCcgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWhlYWRlcmNlbGxkaXYgZS1lbXB0eWNlbGwnLCBpbm5lckhUTUw6ICcmbmJzcDsnIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyID0gSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1pbmRlbnQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEgnLCB7IGNsYXNzTmFtZTogJ2UtZGV0YWlsaGVhZGVyY2VsbCcgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWVtcHR5Y2VsbCcgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5EZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIgPSBEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZGV0YWlsLWhlYWRlci1pbmRlbnQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERldGFpbEV4cGFuZENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIERldGFpbEV4cGFuZENlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1kZXRhaWxyb3djb2xsYXBzZScsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgJ2FyaWEtZXhwYW5kZWQnOiAnZmFsc2UnLCByb2xlOiAnZ3JpZGNlbGwnLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWR0ZGlhZ29uYWxyaWdodCBlLWljb24tZ3JpZ2h0YXJyb3cnIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyID0gRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1leHBhbmQtY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlbnVtXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENlbGxSZW5kZXJlckZhY3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDZWxsUmVuZGVyZXJGYWN0b3J5KCkge1xuICAgICAgICAgICAgdGhpcy5jZWxsUmVuZGVyTWFwID0ge307XG4gICAgICAgIH1cbiAgICAgICAgQ2VsbFJlbmRlcmVyRmFjdG9yeS5wcm90b3R5cGUuYWRkQ2VsbFJlbmRlcmVyID0gZnVuY3Rpb24gKG5hbWUsIHR5cGUpIHtcbiAgICAgICAgICAgIG5hbWUgPSB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgPyBuYW1lIDogZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBuYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2VsbFJlbmRlck1hcFtuYW1lXSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxSZW5kZXJNYXBbbmFtZV0gPSB0eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXJGYWN0b3J5LnByb3RvdHlwZS5nZXRDZWxsUmVuZGVyZXIgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgbmFtZSA9IHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyA/IG5hbWUgOiBlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIG5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jZWxsUmVuZGVyTWFwW25hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IFwiVGhlIGNlbGxSZW5kZXJlciBcIiArIG5hbWUgKyBcIiBpcyBub3QgZm91bmRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNlbGxSZW5kZXJNYXBbbmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDZWxsUmVuZGVyZXJGYWN0b3J5O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DZWxsUmVuZGVyZXJGYWN0b3J5ID0gQ2VsbFJlbmRlcmVyRmFjdG9yeTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9jZWxsLXJlbmRlci1mYWN0b3J5LmpzXG4vLyBtb2R1bGUgaWQgPSAzNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNlcnZpY2VMb2NhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU2VydmljZUxvY2F0b3IoKSB7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgU2VydmljZUxvY2F0b3IucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKG5hbWUsIHR5cGUpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuc2VydmljZXNbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXJ2aWNlc1tuYW1lXSA9IHR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlcnZpY2VMb2NhdG9yLnByb3RvdHlwZS5nZXRTZXJ2aWNlID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuc2VydmljZXNbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJUaGUgc2VydmljZSBcIiArIG5hbWUgKyBcIiBpcyBub3QgcmVnaXN0ZXJlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZXNbbmFtZV07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTZXJ2aWNlTG9jYXRvcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2VydmljZUxvY2F0b3IgPSBTZXJ2aWNlTG9jYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9zZXJ2aWNlLWxvY2F0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDM3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZW51bV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSZW5kZXJlckZhY3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSZW5kZXJlckZhY3RvcnkoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyTWFwID0ge307XG4gICAgICAgIH1cbiAgICAgICAgUmVuZGVyZXJGYWN0b3J5LnByb3RvdHlwZS5hZGRSZW5kZXJlciA9IGZ1bmN0aW9uIChuYW1lLCB0eXBlKSB7XG4gICAgICAgICAgICB2YXIgck5hbWUgPSBlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuUmVuZGVyVHlwZSwgbmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnJlbmRlcmVyTWFwW3JOYW1lXSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyTWFwW3JOYW1lXSA9IHR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlcmVyRmFjdG9yeS5wcm90b3R5cGUuZ2V0UmVuZGVyZXIgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgdmFyIHJOYW1lID0gZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLlJlbmRlclR5cGUsIG5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5yZW5kZXJlck1hcFtyTmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJUaGUgcmVuZGVyZXIgXCIgKyByTmFtZSArIFwiIGlzIG5vdCBmb3VuZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJNYXBbck5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUmVuZGVyZXJGYWN0b3J5O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5SZW5kZXJlckZhY3RvcnkgPSBSZW5kZXJlckZhY3Rvcnk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvcmVuZGVyZXItZmFjdG9yeS5qc1xuLy8gbW9kdWxlIGlkID0gMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9tb2RlbHMvY29sdW1uXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgY29uc3RhbnRfMSwgY29sdW1uXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENvbHVtbldpZHRoU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbHVtbldpZHRoU2VydmljZShwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuc2V0V2lkdGhUb0NvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICB2YXIgd0ZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBsZW4gPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZGV4ZXMuaW5kZXhPZihpKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbldpZHRoKG5ldyBjb2x1bW5fMS5Db2x1bW4oeyB3aWR0aDogJzMwcHgnIH0pLCBpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgfHwgdGhpcy5wYXJlbnQuY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb2x1bW5XaWR0aChuZXcgY29sdW1uXzEuQ29sdW1uKHsgd2lkdGg6ICczMHB4JyB9KSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnNldENvbHVtbldpZHRoKGNvbHVtbiwgd0ZsYWcgPyB1bmRlZmluZWQgOiBpbmRleCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5zZXRDb2x1bW5XaWR0aCA9IGZ1bmN0aW9uIChjb2x1bW4sIGluZGV4LCBtb2R1bGUpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5JbmRleCA9IGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpID8gdGhpcy5wYXJlbnQuZ2V0Tm9ybWFsaXplZENvbHVtbkluZGV4KGNvbHVtbi51aWQpIDogaW5kZXg7XG4gICAgICAgICAgICB2YXIgY1dpZHRoID0gdGhpcy5nZXRXaWR0aChjb2x1bW4pO1xuICAgICAgICAgICAgaWYgKGNXaWR0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgoY1dpZHRoLCBjb2x1bW5JbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93UmVzaXppbmcgJiYgbW9kdWxlID09PSAncmVzaXplJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFdpZHRoVG9UYWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoY29uc3RhbnRfMS5jb2x1bW5XaWR0aENoYW5nZWQsIHsgaW5kZXg6IGNvbHVtbkluZGV4LCB3aWR0aDogY1dpZHRoLCBjb2x1bW46IGNvbHVtbiwgbW9kdWxlOiBtb2R1bGUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuc2V0V2lkdGggPSBmdW5jdGlvbiAod2lkdGgsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgZldpZHRoID0gZWoyX2Jhc2VfMi5mb3JtYXRVbml0KHdpZHRoKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJDb2w7XG4gICAgICAgICAgICB2YXIgbUhkciA9IHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCcuZS1tb3ZhYmxlaGVhZGVyJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyAmJiBpbmRleCA+PSB0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zICYmIG1IZHIgJiYgbUhkci5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29sID0gbUhkci5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNoaWxkcmVuW2luZGV4IC0gdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1uc107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJDb2wgPSBoZWFkZXIucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZHJlbltpbmRleF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGVhZGVyQ29sKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29sLnN0eWxlLndpZHRoID0gZldpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbnRlbnRDb2w7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyAmJiBpbmRleCA+PSB0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgY29udGVudENvbCA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCcuZS1tb3ZhYmxlY29udGVudCcpXG4gICAgICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNoaWxkcmVuW2luZGV4IC0gdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1uc107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZW50Q29sID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNoaWxkcmVuW2luZGV4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50Q29sKSB7XG4gICAgICAgICAgICAgICAgY29udGVudENvbC5zdHlsZS53aWR0aCA9IGZXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlZGl0ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZS10YWJsZS5lLWlubGluZS1lZGl0Jyk7XG4gICAgICAgICAgICBpZiAoZWRpdCkge1xuICAgICAgICAgICAgICAgIGVkaXQucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZHJlbltpbmRleF0uc3R5bGUud2lkdGggPSBmV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuZ2V0U2libGluZ3NIZWlnaHQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzID0gdGhpcy5nZXRIZWlnaHRGcm9tRGlyZWN0aW9uKGVsZW1lbnQsICdwcmV2aW91cycpO1xuICAgICAgICAgICAgdmFyIG5leHQgPSB0aGlzLmdldEhlaWdodEZyb21EaXJlY3Rpb24oZWxlbWVudCwgJ25leHQnKTtcbiAgICAgICAgICAgIHJldHVybiBwcmV2aW91cyArIG5leHQ7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuZ2V0SGVpZ2h0RnJvbURpcmVjdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBzaWJsaW5nID0gZWxlbWVudFtkaXJlY3Rpb24gKyAnRWxlbWVudFNpYmxpbmcnXTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKHNpYmxpbmcpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gc2libGluZy5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgc2libGluZyA9IHNpYmxpbmdbZGlyZWN0aW9uICsgJ0VsZW1lbnRTaWJsaW5nJ107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLndpZHRoKSAmJiB0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uLndpZHRoID0gMjAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjb2x1bW4ud2lkdGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHBhcnNlSW50KGNvbHVtbi53aWR0aC50b1N0cmluZygpLCAxMCk7XG4gICAgICAgICAgICBpZiAoY29sdW1uLm1pbldpZHRoICYmIHdpZHRoIDwgcGFyc2VJbnQoY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW4ubWluV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgoY29sdW1uLm1heFdpZHRoICYmIHdpZHRoID4gcGFyc2VJbnQoY29sdW1uLm1heFdpZHRoLnRvU3RyaW5nKCksIDEwKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uLm1heFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5nZXRUYWJsZVdpZHRoID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciB0V2lkdGggPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfaSA8IGNvbHVtbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc18xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgY1dpZHRoID0gdGhpcy5nZXRXaWR0aChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSAhPT0gZmFsc2UgJiYgY1dpZHRoICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRXaWR0aCArPSBwYXJzZUludChjV2lkdGgudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0V2lkdGg7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuc2V0V2lkdGhUb1RhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRXaWR0aCA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIHZhciBmcmVlemVXaWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGNvbEdycCA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJyk7XG4gICAgICAgICAgICAgICAgdmFyIG1Db2xHcnAgPSBlajJfYmFzZV8xLnNlbGVjdCgnLmUtbW92YWJsZWNvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtY29sdW1uaGVhZGVyJykuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZnJlZXplV2lkdGggKz0gcGFyc2VJbnQoY29sR3JwLmNoaWxkcmVuW2ldLnN0eWxlLndpZHRoLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRXaWR0aCA9IGVqMl9iYXNlXzIuZm9ybWF0VW5pdChmcmVlemVXaWR0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5zdHlsZS53aWR0aCA9IHRXaWR0aDtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5zdHlsZS53aWR0aCA9IHRXaWR0aDtcbiAgICAgICAgICAgICAgICBmcmVlemVXaWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlajJfYmFzZV8xLnNlbGVjdCgnLmUtbW92YWJsZWhlYWRlcicpLnF1ZXJ5U2VsZWN0b3IoJy5lLWNvbHVtbmhlYWRlcicpLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyZWV6ZVdpZHRoICs9IHBhcnNlSW50KG1Db2xHcnAuY2hpbGRyZW5bMF0ucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZHJlbltpXS5zdHlsZS53aWR0aCwgMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0V2lkdGggPSBlajJfYmFzZV8yLmZvcm1hdFVuaXQoZnJlZXplV2lkdGgpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuc2VsZWN0KCcuZS1tb3ZhYmxlaGVhZGVyJykuZmlyc3RFbGVtZW50Q2hpbGQuc3R5bGUud2lkdGggPSB0V2lkdGg7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5zZWxlY3QoJy5lLW1vdmFibGVjb250ZW50JykuZmlyc3RFbGVtZW50Q2hpbGQuc3R5bGUud2lkdGggPSB0V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0V2lkdGggPSBlajJfYmFzZV8yLmZvcm1hdFVuaXQodGhpcy5nZXRUYWJsZVdpZHRoKHRoaXMucGFyZW50LmdldENvbHVtbnMoKSkpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkuc3R5bGUud2lkdGggPSB0V2lkdGg7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkuc3R5bGUud2lkdGggPSB0V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWRpdCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtdGFibGUuZS1pbmxpbmUtZWRpdCcpO1xuICAgICAgICAgICAgaWYgKGVkaXQpIHtcbiAgICAgICAgICAgICAgICBlZGl0LnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29sdW1uV2lkdGhTZXJ2aWNlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW5XaWR0aFNlcnZpY2UgPSBDb2x1bW5XaWR0aFNlcnZpY2U7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvd2lkdGgtY29udHJvbGxlci5qc1xuLy8gbW9kdWxlIGlkID0gMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlbnVtXzEsIGV2ZW50KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBGb2N1c1N0cmF0ZWd5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRm9jdXNTdHJhdGVneShwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZm8gPSB7fTtcbiAgICAgICAgICAgIHRoaXMub25lVGltZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmZvcmdldCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNraXBGb2N1cyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wcmV2SW5kZXhlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5mb2N1c0NoZWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuc2tpcEZvY3VzID0gZWoyX2Jhc2VfMS5jbG9zZXN0KHRhcmdldCwgJ2UtcGFnZXInKSAhPT0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUub25Gb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlKHRydWUpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmdldENvbnRlbnQoKS5tYXRyaXguZ2V0KDAsIC0xLCBbMCwgMV0sIG51bGwsIHRoaXMuZ2V0Q29udGVudCgpLnZhbGlkYXRvcigpKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29udGVudCgpLm1hdHJpeC5zZWxlY3QoY3VycmVudFswXSwgY3VycmVudFsxXSk7XG4gICAgICAgICAgICBpZiAodGhpcy5za2lwRm9jdXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5za2lwRm9jdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uIChlLCBmb3JjZSkge1xuICAgICAgICAgICAgdmFyIGlzQ29udGVudCA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJy5lLWdyaWRjb250ZW50JykpO1xuICAgICAgICAgICAgaWYgKCFpc0NvbnRlbnQgJiYgZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICcuZS1ncmlkaGVhZGVyJykpIHx8XG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWZpbHRlcm1lbnVkaXYnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBiZWZvcmVBcmdzID0geyBjYW5jZWw6IGZhbHNlLCBieUtleTogZmFsc2UsIGJ5Q2xpY2s6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGUudGFyZ2V0KSwgY2xpY2tBcmdzOiBlIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnQuYmVmb3JlQ2VsbEZvY3VzZWQsIGJlZm9yZUFyZ3MpO1xuICAgICAgICAgICAgaWYgKGJlZm9yZUFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmUoaXNDb250ZW50KTtcbiAgICAgICAgICAgIHZhciByZXR1cm5WYWwgPSB0aGlzLmdldENvbnRlbnQoKS5vbkNsaWNrKGUsIGZvcmNlKTtcbiAgICAgICAgICAgIGlmIChyZXR1cm5WYWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5vbktleVByZXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNraXBPbihlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBiZWZvcmVBcmdzID0geyBjYW5jZWw6IGZhbHNlLCBieUtleTogdHJ1ZSwgYnlDbGljazogZmFsc2UsIGtleUFyZ3M6IGUgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudC5iZWZvcmVDZWxsRm9jdXNlZCwgYmVmb3JlQXJncyk7XG4gICAgICAgICAgICBpZiAoYmVmb3JlQXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYlZhbHVlID0gdGhpcy5nZXRDb250ZW50KCkubWF0cml4LmN1cnJlbnQ7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmZvLm91dGxpbmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zd2FwID0gdGhpcy5nZXRDb250ZW50KCkuanVtcChlLmFjdGlvbiwgYlZhbHVlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN3YXApIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNIZWFkZXIgPSB0aGlzLmhlYWRlciA9PT0gdGhpcy5nZXRDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmUoaXNIZWFkZXIpO1xuICAgICAgICAgICAgICAgIHZhciByb3dJbml0VmFsID0gaXNIZWFkZXIgPyAtMSA6IHRoaXMuaGVhZGVyLm1hdHJpeC5tYXRyaXgubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5nZXRDb250ZW50KCkubWF0cml4LmdldChyb3dJbml0VmFsLCBiVmFsdWVbMV0sIFswLCAwXSwgZS5hY3Rpb24sIHRoaXMuZ2V0Q29udGVudCgpLnZhbGlkYXRvcigpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldENvbnRlbnQoKS5tYXRyaXguY3VycmVudCA9IFtyb3dJbml0VmFsLCBjdXJyZW50WzFdXTtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZJbmRleGVzID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmdldENvbnRlbnQoKS5vbktleVByZXNzKGUpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cyhlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuc2tpcE9uID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2JhdGNoJyAmJiAodGhpcy5wYXJlbnQuaXNFZGl0IHx8IFsnaW5zZXJ0JywgJ2YyJywgJ2RlbGV0ZSddLmluZGV4T2YoZS5hY3Rpb24pID4gLTEpXG4gICAgICAgICAgICAgICAgfHwgKGVqMl9iYXNlXzEuY2xvc2VzdChkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAnLmUtZmlsdGVyYmFyY2VsbCcpICE9PSBudWxsICYmIFsnbGVmdEFycm93JywgJ3JpZ2h0QXJyb3cnXS5pbmRleE9mKGUuYWN0aW9uKSA+IC0xKVxuICAgICAgICAgICAgICAgIHx8IChlajJfYmFzZV8xLmNsb3Nlc3QodGFyZ2V0LCAnLmUtZ3JpZGNvbnRlbnQnKSA9PT0gbnVsbCAmJiBlajJfYmFzZV8xLmNsb3Nlc3QodGFyZ2V0LCAnLmUtZ3JpZGhlYWRlcicpID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHx8IChlLmFjdGlvbiA9PT0gJ3NwYWNlJyAmJiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JpZGNoa2JveCcpICYmIGVqMl9iYXNlXzEuY2xvc2VzdCh0YXJnZXQsICcuZS1ncmlkY2hrYm94JykgPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgJiYgZWoyX2Jhc2VfMS5jbG9zZXN0KHRhcmdldCwgJy5lLWhlYWRlcmNoa2NlbGxkaXYnKSA9PT0gbnVsbCkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuZ2V0Rm9jdXNlZEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50SW5mby5lbGVtZW50VG9Gb2N1cztcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuZ2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZSB8fCB0aGlzLmNvbnRlbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLnNldEFjdGl2ZSA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGNvbnRlbnQgPyB0aGlzLmNvbnRlbnQgOiB0aGlzLmhlYWRlcjtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuc2V0Rm9jdXNlZEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZm8uZWxlbWVudFRvRm9jdXMgPSBlbGVtZW50O1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5jdXJyZW50SW5mby5lbGVtZW50VG9Gb2N1cy5mb2N1cygpOyB9LCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuZm9jdXMgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVGb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5hZGRGb2N1cyh0aGlzLmdldENvbnRlbnQoKS5nZXRGb2N1c0luZm8oKSwgZSk7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLnJlbW92ZUZvY3VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRJbmZvLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKFt0aGlzLmN1cnJlbnRJbmZvLmVsZW1lbnQsIHRoaXMuY3VycmVudEluZm8uZWxlbWVudFRvRm9jdXNdLCBbJ2UtZm9jdXNlZCcsICdlLWZvY3VzJ10pO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5mby5lbGVtZW50VG9Gb2N1cy50YWJJbmRleCA9IC0xO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5hZGRGb2N1cyA9IGZ1bmN0aW9uIChpbmZvLCBlKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmZvID0gaW5mbztcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZm8ub3V0bGluZSA9IGluZm8ub3V0bGluZSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlKTtcbiAgICAgICAgICAgIGlmICghaW5mby5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzRm9jdXNlZCA9IGluZm8uZWxlbWVudFRvRm9jdXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWZvY3VzJyk7XG4gICAgICAgICAgICBpZiAoaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEluZm8ub3V0bGluZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW2luZm8uZWxlbWVudF0sIFsnZS1mb2N1c2VkJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbaW5mby5lbGVtZW50VG9Gb2N1c10sIFsnZS1mb2N1cyddKTtcbiAgICAgICAgICAgIGluZm8uZWxlbWVudC50YWJJbmRleCA9IDA7XG4gICAgICAgICAgICBpZiAoIWlzRm9jdXNlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNlZEVsZW1lbnQoaW5mby5lbGVtZW50VG9Gb2N1cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnQuY2VsbEZvY3VzZWQsIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBpbmZvLmVsZW1lbnRUb0ZvY3VzLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5mby5lbGVtZW50LFxuICAgICAgICAgICAgICAgIGluZGV4ZXM6IHRoaXMuZ2V0Q29udGVudCgpLm1hdHJpeC5jdXJyZW50LFxuICAgICAgICAgICAgICAgIGJ5S2V5OiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlKSxcbiAgICAgICAgICAgICAgICBieUNsaWNrOiBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGUpLFxuICAgICAgICAgICAgICAgIGtleUFyZ3M6IGUsXG4gICAgICAgICAgICAgICAgaXNKdW1wOiB0aGlzLnN3YXAsXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiB0aGlzLmdldENvbnRlbnQoKS5nZXRJbmZvKGUpLFxuICAgICAgICAgICAgICAgIG91dGxpbmU6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGUpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMuZ2V0Q29udGVudCgpLm1hdHJpeC5jdXJyZW50LCByb3dJbmRleCA9IF9hWzBdLCBjZWxsSW5kZXggPSBfYVsxXTtcbiAgICAgICAgICAgIHRoaXMucHJldkluZGV4ZXMgPSB7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUucmVmcmVzaE1hdHJpeCA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgJiYgIV90aGlzLmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29udGVudCA9IG5ldyBDb250ZW50Rm9jdXMoX3RoaXMucGFyZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFjb250ZW50ICYmICFfdGhpcy5oZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGVhZGVyID0gbmV3IEhlYWRlckZvY3VzKF90aGlzLnBhcmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjRm9jdXMgPSBjb250ZW50ID8gX3RoaXMuY29udGVudCA6IF90aGlzLmhlYWRlcjtcbiAgICAgICAgICAgICAgICBjRm9jdXMubWF0cml4LmdlbmVyYXRlKGUucm93cywgY0ZvY3VzLnNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICBjRm9jdXMuZ2VuZXJhdGVSb3dzKGUucm93cyk7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGlvbnMgPSBbJ3BhZ2luZycsICdncm91cGluZyddO1xuICAgICAgICAgICAgICAgIGlmIChlLmFyZ3MgJiYgYWN0aW9ucy5pbmRleE9mKGUuYXJncy5yZXF1ZXN0VHlwZSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5za2lwRm9jdXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQgfHwgdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyB8fCB0aGlzLnBhcmVudC5mcm96ZW5Sb3dzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmVsZW1lbnQsICdtb3VzZWRvd24nLCB0aGlzLmZvY3VzQ2hlY2ssIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmVsZW1lbnQsICdmb2N1cycsIHRoaXMub25Gb2N1cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudC5rZXlQcmVzc2VkLCB0aGlzLm9uS2V5UHJlc3MsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnQuY2xpY2ssIHRoaXMub25DbGljaywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudC5jb250ZW50UmVhZHksIHRoaXMucmVmcmVzaE1hdHJpeCh0cnVlKSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudC5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVmcmVzaE1hdHJpeCgpLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKCdjbG9zZS1lZGl0JywgdGhpcy5yZXN0b3JlRm9jdXMsIHRoaXMpO1xuICAgICAgICAgICAgWydzdGFydC1lZGl0JywgJ3N0YXJ0LWFkZCddLmZvckVhY2goZnVuY3Rpb24gKGV2dCkgeyByZXR1cm4gX3RoaXMucGFyZW50Lm9uKGV2dCwgX3RoaXMuY2xlYXJPdXRsaW5lLCBfdGhpcyk7IH0pO1xuICAgICAgICAgICAgWydzb3J0aW5nJ10uZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBfdGhpcy5wYXJlbnQub24oYWN0aW9uICsgXCItY29tcGxldGVcIiwgX3RoaXMucmVzdG9yZUZvY3VzLCBfdGhpcyk7IH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnQuYmF0Y2hBZGQsIHRoaXMucmVmcmVzaE1hdHJpeCh0cnVlKSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudC5iYXRjaERlbGV0ZSwgdGhpcy5yZWZyZXNoTWF0cml4KHRydWUpLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50LmRldGFpbERhdGFCb3VuZCwgdGhpcy5yZWZyZXNoTWF0cml4KHRydWUpLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50Lm9uRW1wdHksIHRoaXMucmVmcmVzaE1hdHJpeCh0cnVlKSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmVsZW1lbnQsICdtb3VzZWRvd24nLCB0aGlzLmZvY3VzQ2hlY2spO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmVsZW1lbnQsICdmb2N1cycsIHRoaXMub25Gb2N1cyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnQua2V5UHJlc3NlZCwgdGhpcy5vbktleVByZXNzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudC5jbGljaywgdGhpcy5vbkNsaWNrKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudC5jb250ZW50UmVhZHksIHRoaXMucmVmcmVzaE1hdHJpeCh0cnVlKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnQuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hNYXRyaXgoKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoJ2Nsb3NlLWVkaXQnLCB0aGlzLnJlc3RvcmVGb2N1cyk7XG4gICAgICAgICAgICBbJ3N0YXJ0LWVkaXQnLCAnc3RhcnQtYWRkJ10uZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7IHJldHVybiBfdGhpcy5wYXJlbnQub2ZmKGV2dCwgX3RoaXMuY2xlYXJPdXRsaW5lKTsgfSk7XG4gICAgICAgICAgICBbJ3NvcnRpbmcnXS5mb3JFYWNoKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIF90aGlzLnBhcmVudC5vZmYoYWN0aW9uICsgXCItY29tcGxldGVcIiwgX3RoaXMucmVzdG9yZUZvY3VzKTsgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnQuYmF0Y2hBZGQsIHRoaXMucmVmcmVzaE1hdHJpeCh0cnVlKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnQuYmF0Y2hEZWxldGUsIHRoaXMucmVmcmVzaE1hdHJpeCh0cnVlKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnQuZGV0YWlsRGF0YUJvdW5kLCB0aGlzLnJlZnJlc2hNYXRyaXgodHJ1ZSkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50Lm9uRW1wdHksIHRoaXMucmVmcmVzaE1hdHJpeCh0cnVlKSk7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9jdXNTdHJhdGVneS5wcm90b3R5cGUucmVzdG9yZUZvY3VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hZGRGb2N1cyh0aGlzLmdldENvbnRlbnQoKS5nZXRGb2N1c0luZm8oKSk7XG4gICAgICAgIH07XG4gICAgICAgIEZvY3VzU3RyYXRlZ3kucHJvdG90eXBlLmNsZWFyT3V0bGluZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29udGVudCgpLm1hdHJpeC5jdXJyZW50ID0gdGhpcy5nZXRDb250ZW50KCkubWF0cml4LmdldCgwLCAtMSwgWzAsIDFdLCAnZG93bkFycm93JywgdGhpcy5nZXRDb250ZW50KCkudmFsaWRhdG9yKCkpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRJbmZvLmVsZW1lbnQgfHwgIXRoaXMuY3VycmVudEluZm8uZWxlbWVudFRvRm9jdXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKFt0aGlzLmN1cnJlbnRJbmZvLmVsZW1lbnQsIHRoaXMuY3VycmVudEluZm8uZWxlbWVudFRvRm9jdXNdLCBbJ2UtZm9jdXMnLCAnZS1mb2N1c2VkJ10pO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5nZXRQcmV2SW5kZXhlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmb3JnZXQgPSB0aGlzLmZvcmdldDtcbiAgICAgICAgICAgIHRoaXMuZm9yZ2V0ID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gZm9yZ2V0ID8geyByb3dJbmRleDogbnVsbCwgY2VsbEluZGV4OiBudWxsIH0gOiB0aGlzLnByZXZJbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBGb2N1c1N0cmF0ZWd5LnByb3RvdHlwZS5mb3JnZXRQcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZm9yZ2V0ID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZvY3VzU3RyYXRlZ3k7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkZvY3VzU3RyYXRlZ3kgPSBGb2N1c1N0cmF0ZWd5O1xuICAgIHZhciBNYXRyaXggPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBNYXRyaXgoKSB7XG4gICAgICAgICAgICB0aGlzLm1hdHJpeCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gW107XG4gICAgICAgIH1cbiAgICAgICAgTWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNvbHVtbkluZGV4LCBhbGxvdykge1xuICAgICAgICAgICAgcm93SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihyb3dJbmRleCwgdGhpcy5yb3dzKSk7XG4gICAgICAgICAgICBjb2x1bW5JbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGNvbHVtbkluZGV4LCB0aGlzLmNvbHVtbnMpKTtcbiAgICAgICAgICAgIHRoaXMubWF0cml4W3Jvd0luZGV4XSA9IHRoaXMubWF0cml4W3Jvd0luZGV4XSB8fCBbXTtcbiAgICAgICAgICAgIHRoaXMubWF0cml4W3Jvd0luZGV4XVtjb2x1bW5JbmRleF0gPSBhbGxvdyA/IDEgOiAwO1xuICAgICAgICB9O1xuICAgICAgICBNYXRyaXgucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY29sdW1uSW5kZXgsIG5hdmlnYXRvciwgYWN0aW9uLCB2YWxpZGF0b3IpIHtcbiAgICAgICAgICAgIHZhciB0bXAgPSBjb2x1bW5JbmRleDtcbiAgICAgICAgICAgIGlmIChyb3dJbmRleCArIG5hdmlnYXRvclswXSA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW3Jvd0luZGV4LCBjb2x1bW5JbmRleF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHJvd0luZGV4ICsgbmF2aWdhdG9yWzBdLCB0aGlzLnJvd3MpKTtcbiAgICAgICAgICAgIGNvbHVtbkluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oY29sdW1uSW5kZXggKyBuYXZpZ2F0b3JbMV0sIHRoaXMubWF0cml4W3Jvd0luZGV4XS5sZW5ndGggLSAxKSk7XG4gICAgICAgICAgICB2YXIgZmlyc3QgPSB0aGlzLmZpcnN0KHRoaXMubWF0cml4W3Jvd0luZGV4XSwgY29sdW1uSW5kZXgsIG5hdmlnYXRvciwgdHJ1ZSwgYWN0aW9uKTtcbiAgICAgICAgICAgIGNvbHVtbkluZGV4ID0gZmlyc3QgPT09IG51bGwgPyB0bXAgOiBmaXJzdDtcbiAgICAgICAgICAgIHZhciB2YWwgPSBlajJfYmFzZV8xLmdldFZhbHVlKHJvd0luZGV4ICsgXCIuXCIgKyBjb2x1bW5JbmRleCwgdGhpcy5tYXRyaXgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5WYWxpZCh2YWwpIHx8ICF2YWxpZGF0b3Iocm93SW5kZXgsIGNvbHVtbkluZGV4LCBhY3Rpb24pID9cbiAgICAgICAgICAgICAgICB0aGlzLmdldChyb3dJbmRleCwgdG1wLCBuYXZpZ2F0b3IsIGFjdGlvbiwgdmFsaWRhdG9yKSA6IFtyb3dJbmRleCwgY29sdW1uSW5kZXhdO1xuICAgICAgICB9O1xuICAgICAgICBNYXRyaXgucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKHZlY3RvciwgaW5kZXgsIG5hdmlnYXRvciwgbW92ZVRvLCBhY3Rpb24pIHtcbiAgICAgICAgICAgIGlmICgoKGluZGV4IDwgMCB8fCBpbmRleCA9PT0gdmVjdG9yLmxlbmd0aCkgJiYgdGhpcy5pblZhbGlkKHZlY3RvcltpbmRleF0pXG4gICAgICAgICAgICAgICAgJiYgKGFjdGlvbiAhPT0gJ3VwQXJyb3cnICYmIGFjdGlvbiAhPT0gJ2Rvd25BcnJvdycpKSB8fCAhdmVjdG9yLnNvbWUoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYgPT09IDE7IH0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuaW5WYWxpZCh2ZWN0b3JbaW5kZXhdKSA/IGluZGV4IDpcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0KHZlY3RvciwgKFsndXBBcnJvdycsICdkb3duQXJyb3cnLCAnc2hpZnRVcCcsICdzaGlmdERvd24nXS5pbmRleE9mKGFjdGlvbikgIT09IC0xKSA/IG1vdmVUbyA/IDAgOiArK2luZGV4IDogaW5kZXggKyBuYXZpZ2F0b3JbMV0sIG5hdmlnYXRvciwgZmFsc2UsIGFjdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIE1hdHJpeC5wcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjb2x1bW5JbmRleCkge1xuICAgICAgICAgICAgcm93SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihyb3dJbmRleCwgdGhpcy5yb3dzKSk7XG4gICAgICAgICAgICBjb2x1bW5JbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGNvbHVtbkluZGV4LCB0aGlzLm1hdHJpeFtyb3dJbmRleF0ubGVuZ3RoIC0gMSkpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gW3Jvd0luZGV4LCBjb2x1bW5JbmRleF07XG4gICAgICAgIH07XG4gICAgICAgIE1hdHJpeC5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiAocm93cywgc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnJvd3MgPSByb3dzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB0aGlzLm1hdHJpeCA9IFtdO1xuICAgICAgICAgICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uIChyb3csIHJJbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciBjZWxscyA9IHJvdy5jZWxscy5maWx0ZXIoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuaXNTcGFubmVkICE9PSB0cnVlOyB9KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5jb2x1bW5zID0gTWF0aC5tYXgoY2VsbHMubGVuZ3RoIC0gMSwgX3RoaXMuY29sdW1ucyB8IDApO1xuICAgICAgICAgICAgICAgIGNlbGxzLmZvckVhY2goZnVuY3Rpb24gKGNlbGwsIGNJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXQockluZGV4LCBjSW5kZXgsIHNlbGVjdG9yKHJvdywgY2VsbCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7XG4gICAgICAgIH07XG4gICAgICAgIE1hdHJpeC5wcm90b3R5cGUuaW5WYWxpZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSAwIHx8IHZhbHVlID09PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBNYXRyaXg7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLk1hdHJpeCA9IE1hdHJpeDtcbiAgICB2YXIgQ29udGVudEZvY3VzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29udGVudEZvY3VzKHBhcmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3IE1hdHJpeCgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmtleUFjdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgJ3JpZ2h0QXJyb3cnOiBbMCwgMV0sXG4gICAgICAgICAgICAgICAgJ3RhYic6IFswLCAxXSxcbiAgICAgICAgICAgICAgICAnbGVmdEFycm93JzogWzAsIC0xXSxcbiAgICAgICAgICAgICAgICAnc2hpZnRUYWInOiBbMCwgLTFdLFxuICAgICAgICAgICAgICAgICd1cEFycm93JzogWy0xLCAwXSxcbiAgICAgICAgICAgICAgICAnZG93bkFycm93JzogWzEsIDBdLFxuICAgICAgICAgICAgICAgICdzaGlmdFVwJzogWy0xLCAwXSxcbiAgICAgICAgICAgICAgICAnc2hpZnREb3duJzogWzEsIDBdLFxuICAgICAgICAgICAgICAgICdzaGlmdFJpZ2h0JzogWzAsIDFdLFxuICAgICAgICAgICAgICAgICdzaGlmdExlZnQnOiBbMCwgLTFdLFxuICAgICAgICAgICAgICAgICdlbnRlcic6IFsxLCAwXSxcbiAgICAgICAgICAgICAgICAnc2hpZnRFbnRlcic6IFstMSwgMF1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmluZGV4ZXNCeUtleSA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICAgICAnaG9tZSc6IFtfdGhpcy5tYXRyaXguY3VycmVudFswXSwgLTEsIDAsIDFdLFxuICAgICAgICAgICAgICAgICAgICAnZW5kJzogW190aGlzLm1hdHJpeC5jdXJyZW50WzBdLCBfdGhpcy5tYXRyaXguY29sdW1ucyArIDEsIDAsIC0xXSxcbiAgICAgICAgICAgICAgICAgICAgJ2N0cmxIb21lJzogWzAsIC0xLCAwLCAxXSxcbiAgICAgICAgICAgICAgICAgICAgJ2N0cmxFbmQnOiBbX3RoaXMubWF0cml4LnJvd3MsIF90aGlzLm1hdHJpeC5jb2x1bW5zICsgMSwgMCwgLTFdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0W2FjdGlvbl0gfHwgbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgQ29udGVudEZvY3VzLnByb3RvdHlwZS5vbktleVByZXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBuYXZpZ2F0b3IgPSB0aGlzLmtleUFjdGlvbnNbZS5hY3Rpb25dO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmdldEN1cnJlbnRGcm9tQWN0aW9uKGUuYWN0aW9uLCBuYXZpZ2F0b3IsIGUuYWN0aW9uIGluIHRoaXMua2V5QWN0aW9ucywgZSk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hdHJpeC5zZWxlY3QoY3VycmVudFswXSwgY3VycmVudFsxXSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRGb2N1cy5wcm90b3R5cGUuZ2V0Q3VycmVudEZyb21BY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uLCBuYXZpZ2F0b3IsIGlzUHJlc2VudCwgZSkge1xuICAgICAgICAgICAgaWYgKG5hdmlnYXRvciA9PT0gdm9pZCAwKSB7IG5hdmlnYXRvciA9IFswLCAwXTsgfVxuICAgICAgICAgICAgaWYgKCFpc1ByZXNlbnQgJiYgIXRoaXMuaW5kZXhlc0J5S2V5KGFjdGlvbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5zaG91bGRGb2N1c0NoYW5nZShlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hdHJpeC5jdXJyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5pbmRleGVzQnlLZXkoYWN0aW9uKSB8fCB0aGlzLm1hdHJpeC5jdXJyZW50LmNvbmNhdChuYXZpZ2F0b3IpLCByb3dJbmRleCA9IF9hWzBdLCBjZWxsSW5kZXggPSBfYVsxXSwgck4gPSBfYVsyXSwgY04gPSBfYVszXTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5tYXRyaXguZ2V0KHJvd0luZGV4LCBjZWxsSW5kZXgsIFtyTiwgY05dLCBhY3Rpb24sIHRoaXMudmFsaWRhdG9yKCkpO1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRGb2N1cy5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uIChlLCBmb3JjZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdGFyZ2V0ID0gKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpID8gdGFyZ2V0IDogZWoyX2Jhc2VfMS5jbG9zZXN0KHRhcmdldCwgJ3RkJykpO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2EgPSBbdGFyZ2V0LnBhcmVudEVsZW1lbnQucm93SW5kZXgsIHRhcmdldC5jZWxsSW5kZXhdLCByb3dJbmRleCA9IF9hWzBdLCBjZWxsSW5kZXggPSBfYVsxXTtcbiAgICAgICAgICAgIHZhciBfYiA9IHRoaXMubWF0cml4LmN1cnJlbnQsIG9Sb3dJbmRleCA9IF9iWzBdLCBvQ2VsbEluZGV4ID0gX2JbMV07XG4gICAgICAgICAgICB2YXIgdmFsID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZShyb3dJbmRleCArIFwiLlwiICsgY2VsbEluZGV4LCB0aGlzLm1hdHJpeC5tYXRyaXgpO1xuICAgICAgICAgICAgaWYgKHRoaXMubWF0cml4LmluVmFsaWQodmFsKSB8fCAoIWZvcmNlICYmIG9Sb3dJbmRleCA9PT0gcm93SW5kZXggJiYgb0NlbGxJbmRleCA9PT0gY2VsbEluZGV4KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWF0cml4LnNlbGVjdChyb3dJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudEZvY3VzLnByb3RvdHlwZS5nZXRGb2N1c0luZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IHt9O1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5tYXRyaXguY3VycmVudCwgX2IgPSBfYVswXSwgcm93SW5kZXggPSBfYiA9PT0gdm9pZCAwID8gMCA6IF9iLCBfYyA9IF9hWzFdLCBjZWxsSW5kZXggPSBfYyA9PT0gdm9pZCAwID8gMCA6IF9jO1xuICAgICAgICAgICAgdGhpcy5tYXRyaXguY3VycmVudCA9IFtyb3dJbmRleCwgY2VsbEluZGV4XTtcbiAgICAgICAgICAgIGluZm8uZWxlbWVudCA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpXG4gICAgICAgICAgICAgICAgLnJvd3Nbcm93SW5kZXhdLmNlbGxzW2NlbGxJbmRleF07XG4gICAgICAgICAgICBpbmZvLmVsZW1lbnRUb0ZvY3VzID0gdGhpcy5nZXRGb2N1c2FibGUoaW5mby5lbGVtZW50KTtcbiAgICAgICAgICAgIGluZm8ub3V0bGluZSA9ICFpbmZvLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbGNlbGwnKTtcbiAgICAgICAgICAgIHJldHVybiBpbmZvO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50Rm9jdXMucHJvdG90eXBlLmdldEZvY3VzYWJsZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBbXS5zbGljZVxuICAgICAgICAgICAgICAgIC5jYWxsKGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uLCBbaHJlZl0sIGlucHV0Om5vdChbdHlwZT1cImhpZGRlblwiXSksIHNlbGVjdCwgdGV4dGFyZWEsIFt0YWJpbmRleF06bm90KFt0YWJpbmRleD1cIi0xXCJdKScpKTtcbiAgICAgICAgICAgIHJldHVybiBjaGlsZC5sZW5ndGggPyBjaGlsZFswXSA6IGVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRGb2N1cy5wcm90b3R5cGUuc2VsZWN0b3IgPSBmdW5jdGlvbiAocm93LCBjZWxsKSB7XG4gICAgICAgICAgICB2YXIgdHlwZXMgPSBbZW51bV8xLkNlbGxUeXBlLkV4cGFuZCwgZW51bV8xLkNlbGxUeXBlLkdyb3VwQ2FwdGlvbiwgZW51bV8xLkNlbGxUeXBlLkNhcHRpb25TdW1tYXJ5LCBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBTdW1tYXJ5XTtcbiAgICAgICAgICAgIHJldHVybiAoKHJvdy5pc0RhdGFSb3cgJiYgY2VsbC52aXNpYmxlICYmIChjZWxsLmlzRGF0YUNlbGwgfHwgY2VsbC5pc1RlbXBsYXRlKSlcbiAgICAgICAgICAgICAgICB8fCAocm93LmlzRGF0YVJvdyAmJiBjZWxsLmNlbGxUeXBlID09PSBlbnVtXzEuQ2VsbFR5cGUuRGV0YWlsRXhwYW5kKVxuICAgICAgICAgICAgICAgIHx8ICghcm93LmlzRGF0YVJvdyAmJiB0eXBlcy5pbmRleE9mKGNlbGwuY2VsbFR5cGUpID4gLTEpXG4gICAgICAgICAgICAgICAgfHwgKGNlbGwuY29sdW1uICYmIGNlbGwuY29sdW1uLnR5cGUgPT09ICdjaGVja2JveCcpKVxuICAgICAgICAgICAgICAgICYmICEocm93LmVkaXQgPT09ICdkZWxldGUnICYmIHJvdy5pc0RpcnR5KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudEZvY3VzLnByb3RvdHlwZS5qdW1wID0gZnVuY3Rpb24gKGFjdGlvbiwgY3VycmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGFjdGlvbiA9PT0gJ3VwQXJyb3cnICYmIGN1cnJlbnRbMF0gPT09IDA7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRGb2N1cy5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzID0gZnVuY3Rpb24gKHJvd3MpIHtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudEZvY3VzLnByb3RvdHlwZS5nZXRJbmZvID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBpbmZvID0gdGhpcy5nZXRGb2N1c0luZm8oKTtcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMubWF0cml4LmN1cnJlbnQsIHJJbmRleCA9IF9hWzBdLCBjSW5kZXggPSBfYVsxXTtcbiAgICAgICAgICAgIHZhciBpc0RhdGEgPSBpbmZvLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKTtcbiAgICAgICAgICAgIHZhciBpc1NlbGVjdGFibGUgPSBpc0RhdGEgfHwgKGUgJiYgZS5hY3Rpb24gIT09ICdlbnRlcicgJiYgKGluZm8uZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93Y29sbGFwc2UnKVxuICAgICAgICAgICAgICAgIHx8IGluZm8uZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93ZXhwYW5kJykpKTtcbiAgICAgICAgICAgIHZhciBfYiA9IFtNYXRoLm1pbihwYXJzZUludChpbmZvLmVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApLCBySW5kZXgpLFxuICAgICAgICAgICAgICAgIE1hdGgubWluKHBhcnNlSW50KGluZm8uZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApLCBjSW5kZXgpXSwgcm93SW5kZXggPSBfYlswXSwgY2VsbEluZGV4ID0gX2JbMV07XG4gICAgICAgICAgICByZXR1cm4geyBpc0NvbnRlbnQ6IHRydWUsIGlzRGF0YUNlbGw6IGlzRGF0YSwgaW5kZXhlczogW3Jvd0luZGV4LCBjZWxsSW5kZXhdLCBpc1NlbGVjdGFibGU6IGlzU2VsZWN0YWJsZSB9O1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50Rm9jdXMucHJvdG90eXBlLnZhbGlkYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyb3dJbmRleCwgY2VsbEluZGV4LCBhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHRhYmxlLnJvd3Nbcm93SW5kZXhdLmNlbGxzW2NlbGxJbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2VudGVyJyB8fCBhY3Rpb24gPT09ICdzaGlmdEVudGVyJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKGFjdGlvbiA9PT0gJ3NoaWZ0VXAnIHx8IGFjdGlvbiA9PT0gJ3NoaWZ0RG93bicpICYmIGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYWN0aW9uICE9PSAnc2hpZnRVcCcgJiYgYWN0aW9uICE9PSAnc2hpZnREb3duJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2VsbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAhPT0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudEZvY3VzLnByb3RvdHlwZS5zaG91bGRGb2N1c0NoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLm1hdHJpeC5jdXJyZW50LCBfYiA9IF9hWzBdLCBySW5kZXggPSBfYiA9PT0gdm9pZCAwID8gLTEgOiBfYiwgX2MgPSBfYVsxXSwgY0luZGV4ID0gX2MgPT09IHZvaWQgMCA/IC0xIDogX2M7XG4gICAgICAgICAgICBpZiAockluZGV4IDwgMCB8fCBjSW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2VsbCA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnJvd3NbckluZGV4XS5jZWxsc1tjSW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuIGUuYWN0aW9uID09PSAnZW50ZXInIHx8IGUuYWN0aW9uID09PSAnc2hpZnRFbnRlcicgPyBjZWxsLmNsYXNzTGlzdC5jb250YWlucygnZS1yb3djZWxsJykgOiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29udGVudEZvY3VzO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db250ZW50Rm9jdXMgPSBDb250ZW50Rm9jdXM7XG4gICAgdmFyIEhlYWRlckZvY3VzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEhlYWRlckZvY3VzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBIZWFkZXJGb2N1cyhwYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgSGVhZGVyRm9jdXMucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdGFyZ2V0ID0gKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGVhZGVyY2VsbCcpID8gdGFyZ2V0IDogZWoyX2Jhc2VfMS5jbG9zZXN0KHRhcmdldCwgJ3RoJykpO1xuICAgICAgICAgICAgdmFyIF9hID0gW3RhcmdldC5wYXJlbnRFbGVtZW50LnJvd0luZGV4LCB0YXJnZXQuY2VsbEluZGV4XSwgcm93SW5kZXggPSBfYVswXSwgY2VsbEluZGV4ID0gX2FbMV07XG4gICAgICAgICAgICB2YXIgdmFsID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZShyb3dJbmRleCArIFwiLlwiICsgY2VsbEluZGV4LCB0aGlzLm1hdHJpeC5tYXRyaXgpO1xuICAgICAgICAgICAgaWYgKHRoaXMubWF0cml4LmluVmFsaWQodmFsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWF0cml4LnNlbGVjdCh0YXJnZXQucGFyZW50RWxlbWVudC5yb3dJbmRleCwgdGFyZ2V0LmNlbGxJbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckZvY3VzLnByb3RvdHlwZS5nZXRGb2N1c0luZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IHt9O1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5tYXRyaXguY3VycmVudCwgX2IgPSBfYVswXSwgcm93SW5kZXggPSBfYiA9PT0gdm9pZCAwID8gMCA6IF9iLCBfYyA9IF9hWzFdLCBjZWxsSW5kZXggPSBfYyA9PT0gdm9pZCAwID8gMCA6IF9jO1xuICAgICAgICAgICAgaW5mby5lbGVtZW50ID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKVxuICAgICAgICAgICAgICAgIC5yb3dzW3Jvd0luZGV4XS5jZWxsc1tjZWxsSW5kZXhdO1xuICAgICAgICAgICAgaW5mby5lbGVtZW50VG9Gb2N1cyA9IHRoaXMuZ2V0Rm9jdXNhYmxlKGluZm8uZWxlbWVudCk7XG4gICAgICAgICAgICBpbmZvLm91dGxpbmUgPSAhaW5mby5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1maWx0ZXJiYXJjZWxsJyk7XG4gICAgICAgICAgICByZXR1cm4gaW5mbztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyRm9jdXMucHJvdG90eXBlLnNlbGVjdG9yID0gZnVuY3Rpb24gKHJvdywgY2VsbCkge1xuICAgICAgICAgICAgcmV0dXJuIChjZWxsLnZpc2libGUgJiYgKGNlbGwuY29sdW1uLmZpZWxkICE9PSB1bmRlZmluZWQgfHwgY2VsbC5pc1RlbXBsYXRlKSkgfHwgY2VsbC5jb2x1bW4udHlwZSA9PT0gJ2NoZWNrYm94JztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyRm9jdXMucHJvdG90eXBlLmp1bXAgPSBmdW5jdGlvbiAoYWN0aW9uLCBjdXJyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uID09PSAnZG93bkFycm93JyAmJiBjdXJyZW50WzBdID09PSB0aGlzLm1hdHJpeC5tYXRyaXgubGVuZ3RoIC0gMTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyRm9jdXMucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMubWF0cml4Lm1hdHJpeC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dGaWx0ZXJpbmcgJiYgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2ZpbHRlcmJhcicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hdHJpeC5yb3dzID0gKyt0aGlzLm1hdHJpeC5yb3dzO1xuICAgICAgICAgICAgICAgIHJvd3NbMF0uY2VsbHMuZm9yRWFjaChmdW5jdGlvbiAoY2VsbCwgY0luZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5tYXRyaXguc2V0KGxlbmd0aCwgY0luZGV4LCBjZWxsLnZpc2libGUgJiYgY2VsbC5jb2x1bW4uYWxsb3dGaWx0ZXJpbmcgIT09IGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyRm9jdXMucHJvdG90eXBlLmdldEluZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4geyBpc0NvbnRlbnQ6IGZhbHNlLCBpc0hlYWRlcjogdHJ1ZSB9O1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJGb2N1cy5wcm90b3R5cGUudmFsaWRhdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH07XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckZvY3VzLnByb3RvdHlwZS5zaG91bGRGb2N1c0NoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLm1hdHJpeC5jdXJyZW50LCBySW5kZXggPSBfYVswXSwgY0luZGV4ID0gX2FbMV07XG4gICAgICAgICAgICBpZiAockluZGV4IDwgMCB8fCBjSW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2VsbCA9IHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucm93c1tySW5kZXhdLmNlbGxzW2NJbmRleF07XG4gICAgICAgICAgICByZXR1cm4gZS5hY3Rpb24gPT09ICdlbnRlcicgPyAhY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGVhZGVyY2VsbCcpIDogdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEhlYWRlckZvY3VzO1xuICAgIH0oQ29udGVudEZvY3VzKSk7XG4gICAgZXhwb3J0cy5IZWFkZXJGb2N1cyA9IEhlYWRlckZvY3VzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL2ZvY3VzLXN0cmF0ZWd5LmpzXG4vLyBtb2R1bGUgaWQgPSA0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUGFnZVNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFBhZ2VTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUGFnZVNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQYWdlU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxMilcbiAgICBdLCBQYWdlU2V0dGluZ3MucHJvdG90eXBlLCBcInBhZ2VTaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoOClcbiAgICBdLCBQYWdlU2V0dGluZ3MucHJvdG90eXBlLCBcInBhZ2VDb3VudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJjdXJyZW50UGFnZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KClcbiAgICBdLCBQYWdlU2V0dGluZ3MucHJvdG90eXBlLCBcInRvdGFsUmVjb3Jkc0NvdW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJlbmFibGVRdWVyeVN0cmluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwicGFnZVNpemVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBQYWdlU2V0dGluZ3MucHJvdG90eXBlLCBcInRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5QYWdlU2V0dGluZ3MgPSBQYWdlU2V0dGluZ3M7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvbW9kZWxzL3BhZ2Utc2V0dGluZ3MuanNcbi8vIG1vZHVsZSBpZCA9IDQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvZW51bVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9kYXRhXzEsIHV0aWxfMSwgZXZlbnRzLCBlbnVtXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNlbGVjdGlvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNlbGVjdGlvbihwYXJlbnQsIHNlbGVjdGlvblNldHRpbmdzLCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmVjb3JkcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Rm9jdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpQ3RybFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wZXJzaXN0U2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93U3RhdGUgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuaXNCYXRjaEVkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucHJldktleSA9IDA7XG4gICAgICAgICAgICB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50ID0gMDtcbiAgICAgICAgICAgIHRoaXMuaXNDaGtBbGwgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNVbkNoa0FsbCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jaGtBbGxDb2xsZWMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNDaGVja2VkT25BZGQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdFNlbGVjdGVkRGF0YSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25SZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MgPSBzZWxlY3Rpb25TZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuZmFjdG9yeSA9IGxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzID0gbG9jYXRvci5nZXRTZXJ2aWNlKCdmb2N1cycpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pbml0aWFsaXplU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUub25BY3Rpb25CZWdpbiA9IGZ1bmN0aW9uIChhcmdzLCB0eXBlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKHR5cGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoYXJncywgdHlwZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdzZWxlY3Rpb24nO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVQb3BVcCgpO1xuICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLCAnbW91c2Vkb3duJywgdGhpcy5tb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pc0VkaXRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgJiYgdGhpcy5wYXJlbnQuaXNFZGl0ICYmICF0aGlzLnBlcnNpc3RTZWxlY3Rpb247XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Um93ID0gZnVuY3Rpb24gKGluZGV4LCBpc1RvZ2dsZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvdyA9IGdPYmouZ2V0Um93QnlJbmRleChpbmRleCk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0RGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUm93VHlwZSgpIHx8ICFzZWxlY3RlZFJvdyB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzUm93U2VsZWN0ZWQgPSBzZWxlY3RlZFJvdy5oYXNBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIGlzVG9nZ2xlID0gIWlzVG9nZ2xlID8gaXNUb2dnbGUgOiBpbmRleCA9PT0gdGhpcy5wcmV2Um93SW5kZXggJiYgaXNSb3dTZWxlY3RlZDtcbiAgICAgICAgICAgIGlmICghaXNUb2dnbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3REYXRhLCByb3dJbmRleDogaW5kZXgsIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCByb3c6IHNlbGVjdGVkUm93LCBwcmV2aW91c1JvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCwgdGFyZ2V0OiB0aGlzLnRhcmdldFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhclJvdygpO1xuICAgICAgICAgICAgaWYgKCFpc1RvZ2dsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUm93U2VsZWN0aW9uKHNlbGVjdGVkUm93LCBpbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dQcm9wcyhpbmRleCk7XG4gICAgICAgICAgICBpZiAoIWlzVG9nZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0RGF0YSwgcm93SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByb3c6IHNlbGVjdGVkUm93LCBwcmV2aW91c1JvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCwgdGFyZ2V0OiB0aGlzLnRhcmdldFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Um93c0J5UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93cyh0aGlzLmdldENvbGxlY3Rpb25Gcm9tSW5kZXhlcyhzdGFydEluZGV4LCBlbmRJbmRleCkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IGVuZEluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdFJvd3MgPSBmdW5jdGlvbiAocm93SW5kZXhlcykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvdyA9IGdPYmouZ2V0Um93QnlJbmRleChyb3dJbmRleGVzWzBdKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3Jvd0luZGV4ZXNbMF1dO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWwoKSB8fCAhdGhpcy5pc1Jvd1R5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICByb3dJbmRleGVzOiByb3dJbmRleGVzLCByb3c6IHNlbGVjdGVkUm93LCByb3dJbmRleDogcm93SW5kZXhlc1swXSwgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICBwcmV2Um93OiBnT2JqLmdldFJvd3MoKVt0aGlzLnByZXZSb3dJbmRleF0sIHByZXZpb3VzUm93SW5kZXg6IHRoaXMucHJldlJvd0luZGV4LFxuICAgICAgICAgICAgICAgIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LCBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YVxuICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGluZyk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyUm93KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd0luZGV4ZXNfMSA9IHJvd0luZGV4ZXM7IF9pIDwgcm93SW5kZXhlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IHJvd0luZGV4ZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dTZWxlY3Rpb24oZ09iai5nZXRSb3dCeUluZGV4KHJvd0luZGV4KSwgcm93SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dQcm9wcyhyb3dJbmRleGVzWzBdKTtcbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgcm93SW5kZXhlczogcm93SW5kZXhlcywgcm93OiBzZWxlY3RlZFJvdywgcm93SW5kZXg6IHJvd0luZGV4ZXNbMF0sIHRhcmdldDogdGhpcy50YXJnZXQsXG4gICAgICAgICAgICAgICAgcHJldlJvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLCBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCxcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGFcbiAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkUm93c1RvU2VsZWN0aW9uID0gZnVuY3Rpb24gKHJvd0luZGV4ZXMpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3cgPSBnT2JqLmdldFJvd0J5SW5kZXgocm93SW5kZXhlc1swXSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzUm93VHlwZSgpIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd0luZGV4ZXNfMiA9IHJvd0luZGV4ZXM7IF9pIDwgcm93SW5kZXhlc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IHJvd0luZGV4ZXNfMltfaV07XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3Jvd0luZGV4XTtcbiAgICAgICAgICAgICAgICB2YXIgaXNVblNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMuaW5kZXhPZihyb3dJbmRleCkgPiAtMTtcbiAgICAgICAgICAgICAgICBnT2JqLnNlbGVjdGVkUm93SW5kZXggPSByb3dJbmRleDtcbiAgICAgICAgICAgICAgICBpZiAoaXNVblNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93RGVzZWxlY3QoZXZlbnRzLnJvd0Rlc2VsZWN0aW5nLCBbcm93SW5kZXhdLCBkYXRhLCBbc2VsZWN0ZWRSb3ddKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMuc3BsaWNlKHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmluZGV4T2Yocm93SW5kZXgpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHMuc3BsaWNlKHRoaXMuc2VsZWN0ZWRSZWNvcmRzLmluZGV4T2Yoc2VsZWN0ZWRSb3cpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3cucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyhzZWxlY3RlZFJvdywgZmFsc2UsIG51bGwsICdlLXNlbGVjdGlvbmJhY2tncm91bmQnLCAnZS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dEZXNlbGVjdChldmVudHMucm93RGVzZWxlY3RpbmcsIFtyb3dJbmRleF0sIGRhdGEsIFtzZWxlY3RlZFJvd10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsIHJvd0luZGV4OiByb3dJbmRleCwgcm93OiBzZWxlY3RlZFJvdywgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSwgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCwgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAgICB9LCBldmVudHMucm93U2VsZWN0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dTZWxlY3Rpb24oc2VsZWN0ZWRSb3csIHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dQcm9wcyhyb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1VuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsIHJvd0luZGV4OiByb3dJbmRleCwgcm93OiBzZWxlY3RlZFJvdywgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSwgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXhcbiAgICAgICAgICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0Q29sbGVjdGlvbkZyb21JbmRleGVzID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIF9hID0gKHN0YXJ0SW5kZXggPCBlbmRJbmRleCkgP1xuICAgICAgICAgICAgICAgIHsgaTogc3RhcnRJbmRleCwgbWF4OiBlbmRJbmRleCB9IDogeyBpOiBlbmRJbmRleCwgbWF4OiBzdGFydEluZGV4IH0sIGkgPSBfYS5pLCBtYXggPSBfYS5tYXg7XG4gICAgICAgICAgICBmb3IgKDsgaSA8PSBtYXg7IGkrKykge1xuICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGFydEluZGV4ID4gZW5kSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpbmRleGVzLnJldmVyc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyUm93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclJvd1NlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzID0gW107XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4ID0gLTE7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlUm93UHJvcHMgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2Um93SW5kZXggPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgdGhpcy5pc1Jvd1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMubGVuZ3RoICYmIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlUGVyc2lzdENvbGxlY3Rpb24gPSBmdW5jdGlvbiAoc2VsZWN0ZWRSb3csIGNoa1N0YXRlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wZXJzaXN0U2VsZWN0aW9uICYmICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHNlbGVjdGVkUm93KSkge1xuICAgICAgICAgICAgICAgIHZhciByb3dPYmogPSB0aGlzLnBhcmVudC5nZXRSb3dPYmplY3RGcm9tVUlEKHNlbGVjdGVkUm93LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICAgICAgdmFyIHBLZXkgPSByb3dPYmogPyByb3dPYmouZGF0YVt0aGlzLnByaW1hcnlLZXldIDogbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAocEtleSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJvd09iai5pc1NlbGVjdGVkID0gY2hrU3RhdGU7XG4gICAgICAgICAgICAgICAgaWYgKGNoa1N0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dTdGF0ZVtwS2V5XSA9IGNoa1N0YXRlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25SZXF1ZXN0ICYmIHRoaXMucGVyc2lzdFNlbGVjdGVkRGF0YS5pbmRleE9mKHJvd09iai5kYXRhKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc2lzdFNlbGVjdGVkRGF0YS5wdXNoKHJvd09iai5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlICh0aGlzLnNlbGVjdGVkUm93U3RhdGVbcEtleV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25SZXF1ZXN0ICYmIHRoaXMucGVyc2lzdFNlbGVjdGVkRGF0YS5pbmRleE9mKHJvd09iai5kYXRhKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNpc3RTZWxlY3RlZERhdGEuc3BsaWNlKHRoaXMucGVyc2lzdFNlbGVjdGVkRGF0YS5pbmRleE9mKHJvd09iai5kYXRhKSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlQ2hlY2tCb3hlcyA9IGZ1bmN0aW9uIChyb3csIGNoa1N0YXRlKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocm93KSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGtCb3ggPSByb3cucXVlcnlTZWxlY3RvcignLmUtY2hlY2tzZWxlY3QnKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY2hrQm94KSAmJiB0aGlzLmNoZWNrZWRUYXJnZXQgIT09IGNoa0JveCkge1xuICAgICAgICAgICAgICAgICAgICBjaGtCb3guZWoyX2luc3RhbmNlc1swXS5zZXRQcm9wZXJ0aWVzKHsgY2hlY2tlZDogY2hrU3RhdGUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2hlY2tlZFRhcmdldCkgfHwgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2hlY2tlZFRhcmdldClcbiAgICAgICAgICAgICAgICAgICAgICAgICYmICF0aGlzLmNoZWNrZWRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNoZWNrc2VsZWN0YWxsJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENoZWNrQWxsU3RhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVSb3dTZWxlY3Rpb24gPSBmdW5jdGlvbiAoc2VsZWN0ZWRSb3csIHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5wdXNoKHN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHMucHVzaChzZWxlY3RlZFJvdyk7XG4gICAgICAgICAgICBzZWxlY3RlZFJvdy5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQZXJzaXN0Q29sbGVjdGlvbihzZWxlY3RlZFJvdywgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrQm94ZXMoc2VsZWN0ZWRSb3csIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5hZGRSZW1vdmVDbGFzc2VzRm9yUm93KHNlbGVjdGVkUm93LCB0cnVlLCBudWxsLCAnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJywgJ2UtYWN0aXZlJyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJldmVudEZvY3VzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuZm9jdXMuZ2V0UHJldkluZGV4ZXMoKS5jZWxsSW5kZXggP1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdy5jZWxsc1t0aGlzLmZvY3VzLmdldFByZXZJbmRleGVzKCkuY2VsbEluZGV4XSA6XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93LnF1ZXJ5U2VsZWN0b3IoJy5lLXNlbGVjdGlvbmJhY2tncm91bmQ6bm90KC5lLWhpZGUpJyk7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzLm9uQ2xpY2soeyB0YXJnZXQ6IHRhcmdldCB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wZXJzaXN0U2VsZWN0aW9uIHx8ICh0aGlzLnBlcnNpc3RTZWxlY3Rpb24gJiYgIXRoaXMucGFyZW50LmlzRWRpdCkgfHxcbiAgICAgICAgICAgICAgICAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jaGVja2VkVGFyZ2V0KSAmJiB0aGlzLmNoZWNrZWRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNoZWNrc2VsZWN0YWxsJykpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTtcbiAgICAgICAgICAgICAgICBpZiAoc3Bhbi5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93c2VsZWN0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCdlLXNwYW5jbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJSb3dTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyUm93U2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFZpZXdEYXRhID0gdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChjdXJyZW50Vmlld0RhdGFbdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LnB1c2godGhpcy5wYXJlbnQuZ2V0Um93cygpW3RoaXMuc2VsZWN0ZWRSb3dJbmRleGVzW2ldXSk7XG4gICAgICAgICAgICAgICAgICAgIHJvd0luZGV4LnB1c2godGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd0Rlc2VsZWN0KGV2ZW50cy5yb3dEZXNlbGVjdGluZywgcm93SW5kZXgsIGRhdGEsIHJvdyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dfMSA9IHRoaXMucGFyZW50LmdldFJvd0J5SW5kZXgodGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93XzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd18xLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyhyb3dfMSwgZmFsc2UsIHRydWUsICdlLXNlbGVjdGlvbmJhY2tncm91bmQnLCAnZS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQZXJzaXN0Q29sbGVjdGlvbihyb3dfMSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrQm94ZXMocm93XzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Jvd1NlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0Rlc2VsZWN0KGV2ZW50cy5yb3dEZXNlbGVjdGVkLCByb3dJbmRleCwgZGF0YSwgcm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5yb3dEZXNlbGVjdCA9IGZ1bmN0aW9uICh0eXBlLCByb3dJbmRleCwgZGF0YSwgcm93KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBlcnNpc3RDb2xsZWN0aW9uKHJvd1swXSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCB7XG4gICAgICAgICAgICAgICAgcm93SW5kZXg6IHJvd0luZGV4LCBkYXRhOiBkYXRhLCByb3c6IHJvd1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrQm94ZXMocm93WzBdKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RDZWxsID0gZnVuY3Rpb24gKGNlbGxJbmRleCwgaXNUb2dnbGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChjZWxsSW5kZXgucm93SW5kZXgsIHRoaXMuZ2V0Q29sSW5kZXgoY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXguY2VsbEluZGV4KSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGNlbGxJbmRleC5yb3dJbmRleDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkgfHwgIXNlbGVjdGVkQ2VsbCB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzQ2VsbFNlbGVjdGVkID0gc2VsZWN0ZWRDZWxsLmNsYXNzTGlzdC5jb250YWlucygnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgaXNUb2dnbGUgPSAhaXNUb2dnbGUgPyBpc1RvZ2dsZSA6ICEoIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Q0lkeHMpICYmXG4gICAgICAgICAgICAgICAgY2VsbEluZGV4LnJvd0luZGV4ID09PSB0aGlzLnByZXZDSWR4cy5yb3dJbmRleCAmJiBjZWxsSW5kZXguY2VsbEluZGV4ID09PSB0aGlzLnByZXZDSWR4cy5jZWxsSW5kZXggJiZcbiAgICAgICAgICAgICAgICBpc0NlbGxTZWxlY3RlZCk7XG4gICAgICAgICAgICBpZiAoaXNUb2dnbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogY2VsbEluZGV4LCBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgICAgICBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCwgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCwgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cyxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbCgpO1xuICAgICAgICAgICAgaWYgKGlzVG9nZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCwgY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXguY2VsbEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFByb3BzKGNlbGxJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgIGlmIChpc1RvZ2dsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBjZWxsSW5kZXgsIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsIHNlbGVjdGVkUm93Q2VsbEluZGV4OiB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Q2VsbHNCeVJhbmdlID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZENlbGwgPSBnT2JqLmdldENlbGxGcm9tSW5kZXgoc3RhcnRJbmRleC5yb3dJbmRleCwgc3RhcnRJbmRleC5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgdmFyIG1pbjtcbiAgICAgICAgICAgIHZhciBtYXg7XG4gICAgICAgICAgICB2YXIgc3RJbmRleCA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICB2YXIgZWRJbmRleCA9IGVuZEluZGV4ID0gZW5kSW5kZXggPyBlbmRJbmRleCA6IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICB2YXIgY2VsbEluZGV4ZXM7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHN0YXJ0SW5kZXgucm93SW5kZXg7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzQ2VsbFR5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogc3RhcnRJbmRleCwgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCwgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCwgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/IGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGluZyk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbCgpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXgucm93SW5kZXggPiBlbmRJbmRleC5yb3dJbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgICAgICBzdGFydEluZGV4ID0gZW5kSW5kZXg7XG4gICAgICAgICAgICAgICAgZW5kSW5kZXggPSB0ZW1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXgucm93SW5kZXg7IGkgPD0gZW5kSW5kZXgucm93SW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvblNldHRpbmdzLmNlbGxTZWxlY3Rpb25Nb2RlICE9PSAnYm94Jykge1xuICAgICAgICAgICAgICAgICAgICBtaW4gPSBpID09PSBzdGFydEluZGV4LnJvd0luZGV4ID8gKHN0YXJ0SW5kZXguY2VsbEluZGV4KSA6IDA7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGkgPT09IGVuZEluZGV4LnJvd0luZGV4ID8gKGVuZEluZGV4LmNlbGxJbmRleCkgOiB0aGlzLmdldExhc3RDb2xJbmRleChpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IHN0YXJ0SW5kZXguY2VsbEluZGV4O1xuICAgICAgICAgICAgICAgICAgICBtYXggPSBlbmRJbmRleC5jZWxsSW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNlbGxJbmRleGVzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IG1pbiA8IG1heCA/IG1pbiA6IG1heCwgbGVuID0gbWluID4gbWF4ID8gbWluIDogbWF4OyBqIDw9IGxlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChpLCBqKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZENlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleGVzLnB1c2goaik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFNlbGVjdGlvbihzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZShzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMucHVzaCh7IHJvd0luZGV4OiBpLCBjZWxsSW5kZXhlczogY2VsbEluZGV4ZXMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxQcm9wcyhzdEluZGV4LCBlZEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IHN0YXJ0SW5kZXgsIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cywgc2VsZWN0ZWRSb3dDZWxsSW5kZXg6IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/IGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGVkKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RDZWxscyA9IGZ1bmN0aW9uIChyb3dDZWxsSW5kZXhlcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KHJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4LCByb3dDZWxsSW5kZXhlc1swXS5jZWxsSW5kZXhlc1swXSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbdGhpcy5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWwoKSB8fCAhdGhpcy5pc0NlbGxUeXBlKCkgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbih7XG4gICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLmNlbGxJbmRleGVzWzBdLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgPyBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RpbmcpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd0NlbGxJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGNlbGxMZW4gPSByb3dDZWxsSW5kZXhlc1tpXS5jZWxsSW5kZXhlcy5sZW5ndGg7IGogPCBjZWxsTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KHJvd0NlbGxJbmRleGVzW2ldLnJvd0luZGV4LCByb3dDZWxsSW5kZXhlc1tpXS5jZWxsSW5kZXhlc1tqXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZWN0ZWRDZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSb3dDZWxsSW5kZXgoeyByb3dJbmRleDogcm93Q2VsbEluZGV4ZXNbaV0ucm93SW5kZXgsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbaV0uY2VsbEluZGV4ZXNbal0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsUHJvcHMoeyByb3dJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0ucm93SW5kZXgsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0gfSwgeyByb3dJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0ucm93SW5kZXgsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0gfSk7XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiByb3dDZWxsSW5kZXhlc1swXS5jZWxsSW5kZXhlc1swXSxcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsIHNlbGVjdGVkUm93Q2VsbEluZGV4OiB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgPyBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkQ2VsbHNUb1NlbGVjdGlvbiA9IGZ1bmN0aW9uIChjZWxsSW5kZXhlcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KGNlbGxJbmRleGVzWzBdLnJvd0luZGV4LCB0aGlzLmdldENvbEluZGV4KGNlbGxJbmRleGVzWzBdLnJvd0luZGV4LCBjZWxsSW5kZXhlc1swXS5jZWxsSW5kZXgpKTtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gY2VsbEluZGV4ZXNbMF0ucm93SW5kZXg7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzQ2VsbFR5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjZWxsSW5kZXhlc18xID0gY2VsbEluZGV4ZXM7IF9pIDwgY2VsbEluZGV4ZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbEluZGV4ID0gY2VsbEluZGV4ZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2ldLnJvd0luZGV4ID09PSBjZWxsSW5kZXgucm93SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogY2VsbEluZGV4ZXNbMF0sXG4gICAgICAgICAgICAgICAgICAgIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGlzVW5TZWxlY3RlZCA9IGluZGV4ID4gLTE7XG4gICAgICAgICAgICAgICAgaWYgKGlzVW5TZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsSWR4ID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2luZGV4XS5jZWxsSW5kZXhlcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ2VsbElkeC5pbmRleE9mKGNlbGxJbmRleC5jZWxsSW5kZXgpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2VsbERlc2VsZWN0KGV2ZW50cy5jZWxsRGVzZWxlY3RpbmcsIFt7IHJvd0luZGV4OiBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleGVzOiBbY2VsbEluZGV4LmNlbGxJbmRleF0gfV0sIHNlbGVjdGVkRGF0YSwgW3NlbGVjdGVkQ2VsbF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsSWR4LnNwbGljZShzZWxlY3RlZENlbGxJZHguaW5kZXhPZihjZWxsSW5kZXguY2VsbEluZGV4KSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGVkLCBbeyByb3dJbmRleDogY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXhlczogW2NlbGxJbmRleC5jZWxsSW5kZXhdIH1dLCBzZWxlY3RlZERhdGEsIFtzZWxlY3RlZENlbGxdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVW5TZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKGFyZ3MsIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93Q2VsbEluZGV4KHsgcm93SW5kZXg6IGNlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXguY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZShzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oYXJncywgZXZlbnRzLmNlbGxTZWxlY3RpbmcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsLCBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleC5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxQcm9wcyhjZWxsSW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1VuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBjZWxsSW5kZXhlc1swXSwgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cywgc2VsZWN0ZWRSb3dDZWxsSW5kZXg6IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1xuICAgICAgICAgICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0Q29sSW5kZXggPSBmdW5jdGlvbiAocm93SW5kZXgsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW3Jvd0luZGV4XS5xdWVyeVNlbGVjdG9yQWxsKCd0ZC5lLXJvd2NlbGwnKTtcbiAgICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgY2VsbHMubGVuZ3RoOyBtKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sSW5kZXggPSBwYXJzZUludChjZWxsc1ttXS5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCA9PT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldExhc3RDb2xJbmRleCA9IGZ1bmN0aW9uIChyb3dJbmRleCkge1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtyb3dJbmRleF0ucXVlcnlTZWxlY3RvckFsbCgndGQuZS1yb3djZWxsJyk7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoY2VsbHNbY2VsbHMubGVuZ3RoIC0gMV0uZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhckNlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbFNlbGVjdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNlbGxEZXNlbGVjdCA9IGZ1bmN0aW9uICh0eXBlLCBjZWxsSW5kZXhlcywgZGF0YSwgY2VsbHMpIHtcbiAgICAgICAgICAgIGlmIChjZWxsc1swXSAmJiBjZWxsc1swXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JpZGNoa2JveCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja0JveGVzKGVqMl9iYXNlXzMuY2xvc2VzdChjZWxsc1swXSwgJ3RyJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCB7XG4gICAgICAgICAgICAgICAgY2VsbHM6IGNlbGxzLCBkYXRhOiBkYXRhLCBjZWxsSW5kZXhlczogY2VsbEluZGV4ZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUNlbGxTZWxlY3Rpb24gPSBmdW5jdGlvbiAoc2VsZWN0ZWRDZWxsLCByb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocm93SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRSb3dDZWxsSW5kZXgoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZWN0ZWRDZWxsLmNsYXNzTGlzdC5hZGQoJ2UtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZENlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWdyaWRjaGtib3gnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tCb3hlcyhlajJfYmFzZV8zLmNsb3Nlc3Qoc2VsZWN0ZWRDZWxsLCAndHInKSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZShzZWxlY3RlZENlbGwpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChjZWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IGNlbGw7XG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJldmVudEZvY3VzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cy5vbkNsaWNrKHsgdGFyZ2V0OiBjZWxsIH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUNlbGxQcm9wcyA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2Q0lkeHMgPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgdGhpcy5wcmV2RUNJZHhzID0gZW5kSW5kZXg7XG4gICAgICAgICAgICB0aGlzLmlzQ2VsbFNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLmxlbmd0aCAmJiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZFJvd0NlbGxJbmRleCA9IGZ1bmN0aW9uIChyb3dDZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBpc1Jvd0F2YWlsO1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbaV0ucm93SW5kZXggPT09IHJvd0NlbGxJbmRleC5yb3dJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBpc1Jvd0F2YWlsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNSb3dBdmFpbCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbaW5kZXhdLmNlbGxJbmRleGVzLmluZGV4T2Yocm93Q2VsbEluZGV4LmNlbGxJbmRleCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1tpbmRleF0uY2VsbEluZGV4ZXMucHVzaChyb3dDZWxsSW5kZXguY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMucHVzaCh7IHJvd0luZGV4OiByb3dDZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleGVzOiBbcm93Q2VsbEluZGV4LmNlbGxJbmRleF0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJDZWxsU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZENlbGxzID0gdGhpcy5nZXRTZWxlY3RlZENlbGxzRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgIHZhciByb3dDZWxsID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWaWV3RGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd0NlbGwubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKGN1cnJlbnRWaWV3RGF0YVtyb3dDZWxsW2ldLnJvd0luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBjTGVuID0gcm93Q2VsbC5sZW5ndGg7IGogPCBjTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5wYXJlbnQuZ2V0Q2VsbEZyb21JbmRleChyb3dDZWxsW2ldLnJvd0luZGV4LCByb3dDZWxsW2ldLmNlbGxJbmRleGVzW2pdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGluZywgcm93Q2VsbCwgZGF0YSwgY2VsbHMpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzZWxlY3RlZENlbGxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbHNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGxzW2ldLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2VsbFNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGVkLCByb3dDZWxsLCBkYXRhLCBjZWxscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRDZWxsc0VsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldERhdGFSb3dzKCk7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2VsbHMgPSBjZWxscy5jb25jYXQoW10uc2xpY2UuY2FsbChyb3dzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNlbGxzZWxlY3Rpb25iYWNrZ3JvdW5kJykpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjZWxscztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5tb3VzZU1vdmVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBnQlJlY3QgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIHgxID0gdGhpcy54O1xuICAgICAgICAgICAgdmFyIHkxID0gdGhpcy55O1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdXRpbF8xLmdldFBvc2l0aW9uKGUpO1xuICAgICAgICAgICAgdmFyIHgyID0gcG9zaXRpb24ueCAtIGdCUmVjdC5sZWZ0O1xuICAgICAgICAgICAgdmFyIHkyID0gcG9zaXRpb24ueSAtIGdCUmVjdC50b3A7XG4gICAgICAgICAgICB2YXIgdG1wO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJ3RyJyk7XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHRoaXMucGFyZW50LmVsZW1lbnQub2Zmc2V0TGVmdCArIDIsIGUuY2xpZW50WSksICd0cicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHgxID4geDIpIHtcbiAgICAgICAgICAgICAgICB0bXAgPSB4MjtcbiAgICAgICAgICAgICAgICB4MiA9IHgxO1xuICAgICAgICAgICAgICAgIHgxID0gdG1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHkxID4geTIpIHtcbiAgICAgICAgICAgICAgICB0bXAgPSB5MjtcbiAgICAgICAgICAgICAgICB5MiA9IHkxO1xuICAgICAgICAgICAgICAgIHkxID0gdG1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSB4MSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0geTEgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0geDIgLSB4MSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0geTIgLSB5MSArICdweCc7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmICFlLmN0cmxLZXkgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSBwYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3NCeVJhbmdlKHRoaXMuc3RhcnRJbmRleCwgcm93SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm1vdXNlVXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZS1kaXNhYmxldXNlcnNlbGVjdCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LmJvZHksICdtb3VzZXVwJywgdGhpcy5tb3VzZVVwSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm1vdXNlRG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGdyaWRFbGVtZW50ID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWQnKTtcbiAgICAgICAgICAgIGlmIChncmlkRWxlbWVudCAmJiBncmlkRWxlbWVudC5pZCAhPT0gdGhpcy5wYXJlbnQuZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5IHx8IGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jvd0RyYWdBbmREcm9wICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpICYmICFlLnNoaWZ0S2V5ICYmICFlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNSb3dUeXBlKCkgfHwgdGhpcy5pc1NpbmdsZVNlbCgpIHx8IGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICd0ZCcpLmNsYXNzTGlzdC5jb250YWlucygnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2UtZGlzYWJsZXVzZXJzZWxlY3QnKTtcbiAgICAgICAgICAgICAgICB2YXIgdHIgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZS50YXJnZXQsICd0cicpO1xuICAgICAgICAgICAgICAgIHZhciBnQlJlY3QgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0aW9uID0gdXRpbF8xLmdldFBvc2l0aW9uKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRJbmRleCA9IHBhcnNlSW50KHRyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy54ID0gcG9zdGlvbi54IC0gZ0JSZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgdGhpcy55ID0gcG9zdGlvbi55IC0gZ0JSZWN0LnRvcDtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkZHJhZ2FyZWEnIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudC5ib2R5LCAnbW91c2V1cCcsIHRoaXMubW91c2VVcEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyU2VsQWZ0ZXJSZWZyZXNoID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnJlcXVlc3RUeXBlICE9PSAndmlydHVhbHNjcm9sbCcgJiYgIXRoaXMucGVyc2lzdFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbGl6ZVNlbGVjdGlvbiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucm93U2VsZWN0aW9uQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2VsbFNlbGVjdGlvbkNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2VsbEZvY3VzZWQsIHRoaXMub25DZWxsRm9jdXNlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmRhdGFSZWFkeSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmNsZWFyU2VsQWZ0ZXJSZWZyZXNoLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHRoaXMuY2xlYXJTZWxlY3Rpb24sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5vbkRhdGFCb3VuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCB0aGlzLmFjdGlvbkJlZ2luLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHRoaXMuYWN0aW9uQ29tcGxldGUuYmluZCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsaXplU2VsZWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucm93U2VsZWN0aW9uQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNlbGxTZWxlY3Rpb25Db21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNlbGxGb2N1c2VkLCB0aGlzLm9uQ2VsbEZvY3VzZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuZGF0YVJlYWR5KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmNsZWFyU2VsQWZ0ZXJSZWZyZXNoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLmNsZWFyU2VsZWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5vbkRhdGFCb3VuZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25CZWdpbiwgdGhpcy5hY3Rpb25CZWdpbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgdGhpcy5hY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZGF0YVJlYWR5ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnJlcXVlc3RUeXBlICE9PSAndmlydHVhbHNjcm9sbCcgJiYgIXRoaXMucGVyc2lzdFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUucHJvcGVydGllcy50eXBlKSAmJiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdzaW5nbGUnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJSb3dTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTZWxlY3RNdWx0aVRvdWNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlUG9wVXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLnByb3BlcnRpZXMubW9kZSkgfHxcbiAgICAgICAgICAgICAgICAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLnByb3BlcnRpZXMuY2VsbFNlbGVjdGlvbk1vZGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jaGVja0JveFNlbGVjdGlvbkNoYW5nZWQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5oaWRlUG9wVXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3dzZWxlY3QnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3codGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrQm94U2VsZWN0aW9uQ2hhbmdlZCgpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNoZWNrQm94U2VsZWN0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpc0NoZWNrQ29sdW1uID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wYXJlbnQuY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2hrU2VsZWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9ICdtdWx0aXBsZSc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hrRmllbGQgPSBjb2wuZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxSZWNvcmRzQ291bnQgPSB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MudG90YWxSZWNvcmRzQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudG90YWxSZWNvcmRzQ291bnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50ID0gdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCkubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hrQWxsQm94ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jaGVja3NlbGVjdGFsbCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoa0FsbE9iaiA9IHRoaXMuY2hrQWxsQm94O1xuICAgICAgICAgICAgICAgICAgICBpc0NoZWNrQ29sdW1uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWNoZWNrYm94c2VsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNDaGVja0NvbHVtbikge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDaGtTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoa0ZpZWxkID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGtBbGxCb3ggPSB0aGlzLmNoa0FsbE9iaiA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWNoZWNrYm94c2VsZWN0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuc2VsZWN0aW9uU2V0dGluZ3MucGVyc2lzdFNlbGVjdGlvbiAmJiB0aGlzLnBhcmVudC5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBlcnNpc3RTZWxlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1wZXJzaXN0c2VsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmltYXJ5S2V5ID0gdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKVswXTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVuYWJsZVZpcnR1YWxpemF0aW9uICYmIHRoaXMuY2hrRmllbGQgJiYgT2JqZWN0LmtleXModGhpcy5zZWxlY3RlZFJvd1N0YXRlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLnBhcmVudC5nZXREYXRhTW9kdWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkud2hlcmUodGhpcy5jaGtGaWVsZCwgJ2VxdWFsJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IGRhdGEuZ2V0RGF0YSh7fSwgcXVlcnkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJveHlfMSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNob3dTcGlubmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5XzEuZGF0YVN1Y2Nlc3MoZS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfMS5yZWZyZXNoUGVyc2lzdFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfMS5wYXJlbnQuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0U2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXBlcnNpc3RzZWxlY3Rpb24nKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93U3RhdGUgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5kYXRhU3VjY2VzcyA9IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5zZWxlY3RlZFJvd1N0YXRlW3Jlc1tpXVt0aGlzLnByaW1hcnlLZXldXSkgJiYgcmVzW2ldW3RoaXMuY2hrRmllbGRdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dTdGF0ZVtyZXNbaV1bdGhpcy5wcmltYXJ5S2V5XV0gPSByZXNbaV1bdGhpcy5jaGtGaWVsZF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wZXJzaXN0U2VsZWN0ZWREYXRhID0gcmVzO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJlZnJlc2hQZXJzaXN0U2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jaGtBbGxCb3ggPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNoZWNrc2VsZWN0YWxsJyk7XG4gICAgICAgICAgICB0aGlzLmNoa0FsbE9iaiA9IHRoaXMuY2hrQWxsQm94O1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXRSb3dzKCk7XG4gICAgICAgICAgICBpZiAocm93cy5sZW5ndGggPiAwICYmICh0aGlzLnBlcnNpc3RTZWxlY3Rpb24gfHwgdGhpcy5jaGtGaWVsZCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcm93cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93T2JqID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRChyb3dzW2pdLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwS2V5ID0gcm93T2JqID8gcm93T2JqLmRhdGFbdGhpcy5wcmltYXJ5S2V5XSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwS2V5ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrU3RhdGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93U3RhdGVbcEtleV0gfHwgKHRoaXMuaXNDaGtBbGwgJiYgdGhpcy5jaGtBbGxDb2xsZWMuaW5kZXhPZihwS2V5KSA8IDApXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCAodGhpcy5pc1VuQ2hrQWxsICYmIHRoaXMuY2hrQWxsQ29sbGVjLmluZGV4T2YocEtleSkgPiAwKSB8fCAodGhpcy5jaGtGaWVsZCAmJiByb3dPYmouZGF0YVt0aGlzLmNoa0ZpZWxkXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChwYXJzZUludChyb3dzW2pdLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tTdGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hrQm94ID0gcm93c1tqXS5xdWVyeVNlbGVjdG9yKCcuZS1jaGVja3NlbGVjdCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tTdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZFRhcmdldCAhPT0gY2hrQm94ICYmIHRoaXMuaXNDaGtTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGtCb3guZWoyX2luc3RhbmNlc1swXS5zZXRQcm9wZXJ0aWVzKHsgY2hlY2tlZDogY2hlY2tTdGF0ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBlcnNpc3RDb2xsZWN0aW9uKHJvd3Nbal0sIGNoZWNrU3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnbXVsdGlwbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93cyhpbmRleGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3coaW5kZXhlc1swXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Noa1NlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tBbGxTdGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFjdGlvbkJlZ2luID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnJlcXVlc3RUeXBlID09PSAnc2F2ZScgJiYgdGhpcy5wZXJzaXN0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVkaXRDaGtCb3ggPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWVkaXQtY2hlY2tzZWxlY3QnKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZWRpdENoa0JveCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdyA9IGVqMl9iYXNlXzMuY2xvc2VzdChlZGl0Q2hrQm94LCAnLmUtZWRpdGVkcm93Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2RpYWxvZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWRsZ2VkaXRyb3cnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3dPYmogPSB0aGlzLnBhcmVudC5nZXRSb3dPYmplY3RGcm9tVUlEKHJvdy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyb3dPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93U3RhdGVbcm93T2JqLmRhdGFbdGhpcy5wcmltYXJ5S2V5XV0gPSByb3dPYmouaXNTZWxlY3RlZCA9IGVkaXRDaGtCb3guY2hlY2tlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDaGVja2VkT25BZGQgPSBlZGl0Q2hrQm94LmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUucmVxdWVzdFR5cGUgPT09ICdzYXZlJyAmJiB0aGlzLnBlcnNpc3RTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5hY3Rpb24gPT09ICdhZGQnICYmIHRoaXMuaXNDaGVja2VkT25BZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd09iaiA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQodGhpcy5wYXJlbnQuZ2V0Um93cygpW2Uuc2VsZWN0ZWRSb3ddLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dTdGF0ZVtyb3dPYmouZGF0YVt0aGlzLnByaW1hcnlLZXldXSA9IHJvd09iai5pc1NlbGVjdGVkID0gdGhpcy5pc0NoZWNrZWRPbkFkZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUGVyc2lzdFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm9uRGF0YUJvdW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdFNlbGVjdGlvbiB8fCB0aGlzLmNoa0ZpZWxkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZVZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWNvcmRzID0gdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVN1Y2Nlc3MocmVjb3Jkcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFBlcnNpc3RTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jaGVja1NlbGVjdEFsbEFjdGlvbiA9IGZ1bmN0aW9uIChjaGVja1N0YXRlKSB7XG4gICAgICAgICAgICB2YXIgZWRpdEZvcm0gPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRmb3JtJyk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrZWRUYXJnZXQgPSB0aGlzLmNoa0FsbEJveDtcbiAgICAgICAgICAgIGlmIChjaGVja1N0YXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSgwLCB0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDaGtBbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNVbkNoa0FsbCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNVbkNoa0FsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0Noa0FsbCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jaGtBbGxDb2xsZWMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBlcnNpc3RTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldFJvd3MoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQZXJzaXN0Q29sbGVjdGlvbihyb3dzW2ldLCBjaGVja1N0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNVbkNoa0FsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93U3RhdGUgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0U2VsZWN0ZWREYXRhID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGVkaXRGb3JtKSkge1xuICAgICAgICAgICAgICAgIHZhciBlZGl0Q2hrQm94ID0gZWRpdEZvcm0ucXVlcnlTZWxlY3RvcignLmUtZWRpdC1jaGVja3NlbGVjdCcpO1xuICAgICAgICAgICAgICAgIGVkaXRDaGtCb3guZWoyX2luc3RhbmNlc1swXS5zZXRQcm9wZXJ0aWVzKHsgY2hlY2tlZDogY2hlY2tTdGF0ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jaGVja1NlbGVjdEFsbCA9IGZ1bmN0aW9uIChjaGVja0JveCkge1xuICAgICAgICAgICAgdmFyIGNoZWNrT2JqID0gY2hlY2tCb3g7XG4gICAgICAgICAgICB0aGlzLmNoZWNrU2VsZWN0QWxsQWN0aW9uKGNoZWNrQm94LmNoZWNrZWQpO1xuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyQ2hrQ2hhbmdlRXZlbnQoY2hlY2tCb3gsIGNoZWNrQm94LmNoZWNrZWQpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNoZWNrU2VsZWN0ID0gZnVuY3Rpb24gKGNoZWNrQm94KSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRoaXMuY2hlY2tlZFRhcmdldCwgJy5lLXJvd2NlbGwnKTtcbiAgICAgICAgICAgIHZhciBjaGVja09iaiA9IGNoZWNrQm94O1xuICAgICAgICAgICAgdGhpcy5pc011bHRpQ3RybFJlcXVlc3QgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIHJJbmRleCA9IHBhcnNlSW50KHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wZXJzaXN0U2VsZWN0aW9uICYmIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtYWRkZWRyb3cnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgKytySW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJvd0NlbGxTZWxlY3Rpb25IYW5kbGVyKHJJbmRleCwgcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCkpO1xuICAgICAgICAgICAgdGhpcy5tb3ZlSW50b1VuY2hlY2tDb2xsZWN0aW9uKGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICcuZS1yb3cnKSk7XG4gICAgICAgICAgICB0aGlzLnNldENoZWNrQWxsU3RhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJDaGtDaGFuZ2VFdmVudChjaGVja0JveCwgY2hlY2tCb3guY2hlY2tlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUubW92ZUludG9VbmNoZWNrQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hrQWxsIHx8IHRoaXMuaXNVbkNoa0FsbCkge1xuICAgICAgICAgICAgICAgIHZhciByb3dPYmogPSB0aGlzLnBhcmVudC5nZXRSb3dPYmplY3RGcm9tVUlEKHJvdy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpO1xuICAgICAgICAgICAgICAgIHZhciBwS2V5ID0gcm93T2JqID8gcm93T2JqLmRhdGFbdGhpcy5wcmltYXJ5S2V5XSA6IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKCFwS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hrQWxsQ29sbGVjLmluZGV4T2YocEtleSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hrQWxsQ29sbGVjLnB1c2gocEtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoa0FsbENvbGxlYy5zcGxpY2UodGhpcy5jaGtBbGxDb2xsZWMuaW5kZXhPZihwS2V5KSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnRyaWdnZXJDaGtDaGFuZ2VFdmVudCA9IGZ1bmN0aW9uIChjaGVja0JveCwgY2hlY2tTdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuY2hlY2tCb3hDaGFuZ2UsIHtcbiAgICAgICAgICAgICAgICBjaGVja2VkOiBjaGVja1N0YXRlLCBzZWxlY3RlZFJvd0luZGV4ZXM6IHRoaXMucGFyZW50LmdldFNlbGVjdGVkUm93SW5kZXhlcygpLFxuICAgICAgICAgICAgICAgIHRhcmdldDogY2hlY2tCb3hcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRUYXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNldENoZWNrQWxsU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Noa1NlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBjaGVja2VkTGVuID0gT2JqZWN0LmtleXModGhpcy5zZWxlY3RlZFJvd1N0YXRlKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBlcnNpc3RTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZExlbiA9IHRoaXMuc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbFJlY29yZHNDb3VudCA9IHRoaXMucGFyZW50LmdldEN1cnJlbnRWaWV3UmVjb3JkcygpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrZWRMZW4gPT09IHRoaXMudG90YWxSZWNvcmRzQ291bnQgfHwgKHRoaXMucGVyc2lzdFNlbGVjdGlvbiAmJiB0aGlzLnBhcmVudC5hbGxvd1BhZ2luZ1xuICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLmlzQ2hrQWxsICYmIHRoaXMuY2hrQWxsQ29sbGVjLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGtBbGxPYmouZWoyX2luc3RhbmNlc1swXS5zZXRQcm9wZXJ0aWVzKHsgY2hlY2tlZDogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2tlZExlbiA9PT0gMCB8fCB0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGtBbGxPYmouZWoyX2luc3RhbmNlc1swXS5zZXRQcm9wZXJ0aWVzKHsgaW5kZXRlcm1pbmF0ZTogZmFsc2UsIGNoZWNrZWQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGtBbGxPYmouZWoyX2luc3RhbmNlc1swXS5zZXRQcm9wZXJ0aWVzKHsgaW5kZXRlcm1pbmF0ZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gZS5jdHJsS2V5IHx8IHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaDtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGUuc2hpZnRLZXk7XG4gICAgICAgICAgICB0aGlzLnBvcFVwQ2xpY2tIYW5kbGVyKGUpO1xuICAgICAgICAgICAgdmFyIGNoa1NlbGVjdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Rm9jdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGNoZWNrQm94O1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25SZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNoZWNrc2VsZWN0JykgfHwgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVja3NlbGVjdGFsbCcpKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tCb3ggPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgY2hrU2VsZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpICYmICF0aGlzLnBhcmVudC5zZWxlY3Rpb25TZXR0aW5ncy5jaGVja2JveE9ubHkpIHx8IGNoa1NlbGVjdCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hrU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNoZWNrQm94KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRUYXJnZXQgPSBjaGVja0JveDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrQm94LmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVja3NlbGVjdGFsbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2VsZWN0QWxsKGNoZWNrQm94KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tTZWxlY3QoY2hlY2tCb3gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBlajJfYmFzZV8zLmNsb3Nlc3QodGFyZ2V0LCAnLmUtcm93Y2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgckluZGV4ID0gcGFyc2VJbnQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdFNlbGVjdGlvbiAmJiB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFkZGVkcm93JykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgKytySW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dDZWxsU2VsZWN0aW9uSGFuZGxlcihySW5kZXgsIHBhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGtTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZUludG9VbmNoZWNrQ29sbGVjdGlvbihlajJfYmFzZV8zLmNsb3Nlc3QodGFyZ2V0LCAnLmUtcm93JykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja0FsbFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2hrU2VsZWN0aW9uICYmIGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSAmJiB0aGlzLnBhcmVudC5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnbXVsdGlwbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BvcHVwKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uUmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Rm9jdXMgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5wb3BVcENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpIHx8XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWRwb3B1cCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93c2VsZWN0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNwYW5jbGlja2VkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdlLXNwYW5jbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2Utc3BhbmNsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNob3dQb3B1cCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB1dGlsXzEuc2V0Q3NzSW5HcmlkUG9wVXAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKSwgZSwgJ2Utcm93c2VsZWN0IGUtaWNvbnMgZS1pY29uLXJvd3NlbGVjdCcgK1xuICAgICAgICAgICAgICAgICh0aGlzLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdtdWx0aXBsZScgJiZcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDEgfHwgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLmxlbmd0aCA+IDEpID8gJyBlLXNwYW5jbGlja2VkJyA6ICcnKSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucm93Q2VsbFNlbGVjdGlvbkhhbmRsZXIgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCAmJiAhdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyhyb3dJbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3NCeVJhbmdlKGVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Um93SW5kZXgpID8gcm93SW5kZXggOiB0aGlzLnByZXZSb3dJbmRleCwgcm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKGVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Q0lkeHMpID8geyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0gOiB0aGlzLnByZXZDSWR4cywgeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRSb3dzVG9TZWxlY3Rpb24oW3Jvd0luZGV4XSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDZWxsc1RvU2VsZWN0aW9uKFt7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5vbkNlbGxGb2N1c2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjbGVhciA9ICgoZS5jb250YWluZXIuaXNIZWFkZXIgJiYgZS5pc0p1bXApIHx8IChlLmNvbnRhaW5lci5pc0NvbnRlbnQgJiYgIWUuY29udGFpbmVyLmlzU2VsZWN0YWJsZSkpICYmXG4gICAgICAgICAgICAgICAgIShlLmJ5S2V5ICYmIGUua2V5QXJncy5hY3Rpb24gPT09ICdzcGFjZScpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckFjdGlvbiA9IGUuY29udGFpbmVyLmlzSGVhZGVyICYmICEoZS5ieUtleSAmJiBlLmtleUFyZ3MuYWN0aW9uID09PSAnc3BhY2UnKTtcbiAgICAgICAgICAgIGlmICghZS5ieUtleSB8fCBjbGVhcikge1xuICAgICAgICAgICAgICAgIGlmIChjbGVhcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYSA9IGUuY29udGFpbmVyLmlzQ29udGVudCA/IGUuY29udGFpbmVyLmluZGV4ZXMgOiBlLmluZGV4ZXMsIHJvd0luZGV4ID0gX2FbMF0sIGNlbGxJbmRleCA9IF9hWzFdO1xuICAgICAgICAgICAgdmFyIHByZXYgPSB0aGlzLmZvY3VzLmdldFByZXZJbmRleGVzKCk7XG4gICAgICAgICAgICBpZiAoaGVhZGVyQWN0aW9uIHx8IChbJ2N0cmxQbHVzQScsICdlc2NhcGUnXS5pbmRleE9mKGUua2V5QXJncy5hY3Rpb24pID09PSAtMSAmJiBlLmtleUFyZ3MuYWN0aW9uICE9PSAnc3BhY2UnICYmXG4gICAgICAgICAgICAgICAgcm93SW5kZXggPT09IHByZXYucm93SW5kZXggJiYgY2VsbEluZGV4ID09PSBwcmV2LmNlbGxJbmRleCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXZlbnRGb2N1cyA9IHRydWU7XG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5QXJncy5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdkb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3VwQXJyb3cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdEVudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseURvd25VcEtleShyb3dJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHRBcnJvdyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleShyb3dJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnREb3duJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdFVwJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdERvd25LZXkocm93SW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0TGVmdCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRSaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlTaGlmdExlZnRSaWdodEtleShyb3dJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaG9tZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUhvbWVFbmRLZXkocm93SW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxIb21lJzpcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsRW5kJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUN0cmxIb21lRW5kS2V5KHJvd0luZGV4LCBjZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlc2NhcGUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxQbHVzQSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3RybFBsdXNBKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NwYWNlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25SZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUuZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2tzZWxlY3RhbGwnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkVGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1NlbGVjdEFsbCh0aGlzLmNoZWNrZWRUYXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2tzZWxlY3QnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZFRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2VsZWN0KHRoaXMuY2hlY2tlZFRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25SZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Rm9jdXMgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jdHJsUGx1c0EgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSgwLCB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHsgcm93SW5kZXg6IDAsIGNlbGxJbmRleDogMCB9LCB7IHJvd0luZGV4OiB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoIC0gMSwgY2VsbEluZGV4OiB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseURvd25VcEtleSA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGtTZWxlY3Rpb24gJiYgdGhpcy5pc0Noa0FsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tTZWxlY3RBbGxBY3Rpb24oZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZFRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHJvd0luZGV4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VXBEb3duKGdPYmouc2VsZWN0ZWRSb3dJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5VXBEb3duID0gZnVuY3Rpb24gKHJvd0luZGV4KSB7XG4gICAgICAgICAgICBpZiAocm93SW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5wYXJlbnQuZ2V0Um93cygpWzBdLmNoaWxkcmVuW3RoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggfHwgMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY0luZGV4ID0gcGFyc2VJbnQodGhpcy50YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5jb250ZW50UmVuZGVyZXIuZ2V0Um93QnlJbmRleChyb3dJbmRleCkucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbCcpW2NJbmRleF07XG4gICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZSh0aGlzLnRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlSaWdodExlZnRLZXkgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5SG9tZUVuZEtleSA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy5wYXJlbnQuZ2V0Q2VsbEZyb21JbmRleChyb3dJbmRleCwgY2VsbEluZGV4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2hpZnREb3duS2V5ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZSb3dJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSh0aGlzLnByZXZSb3dJbmRleCwgcm93SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VXBEb3duKHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KDAsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsc0J5UmFuZ2UodGhpcy5wcmV2Q0lkeHMgfHwgeyByb3dJbmRleDogMCwgY2VsbEluZGV4OiAwIH0sIHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5U2hpZnRMZWZ0UmlnaHRLZXkgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdENlbGxzQnlSYW5nZSh0aGlzLnByZXZDSWR4cywgeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlDdHJsSG9tZUVuZEtleSA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHJvd0luZGV4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZSh0aGlzLnBhcmVudC5nZXRDZWxsRnJvbUluZGV4KHJvd0luZGV4LCBjZWxsSW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyA9IGZ1bmN0aW9uIChyb3csIGlzQWRkLCBjbGVhckFsbCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDNdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBbXS5zbGljZS5jYWxsKHJvdy5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJykpO1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2NvbGxhcHNlJykgfHwgcm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgIGlmIChjZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2goY2VsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHV0aWxfMS5hZGRSZW1vdmVBY3RpdmVDbGFzc2VzLmFwcGx5KHZvaWQgMCwgW2NlbGxzLCBpc0FkZF0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2V0UmVuZGVyZXIoKS5zZXRTZWxlY3Rpb24ocm93ID8gcm93LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSA6IG51bGwsIGlzQWRkLCBjbGVhckFsbCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNSb3dUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MubW9kZSA9PT0gJ3JvdycgfHwgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5tb2RlID09PSAnYm90aCc7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNDZWxsVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLm1vZGUgPT09ICdjZWxsJyB8fCB0aGlzLnNlbGVjdGlvblNldHRpbmdzLm1vZGUgPT09ICdib3RoJztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pc1NpbmdsZVNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdzaW5nbGUnO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldFJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb250ZW50UmVuZGVyZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIgPSB0aGlzLmZhY3RvcnkuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50UmVuZGVyZXI7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRSZWNvcmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9IFtdO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGlvblNldHRpbmdzLnBlcnNpc3RTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZERhdGEgPSB0aGlzLnBhcmVudC5nZXRSb3dzT2JqZWN0KCkuZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIHJvdy5pc1NlbGVjdGVkOyB9KVxuICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLmRhdGE7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWREYXRhID0gdGhpcy5wZXJzaXN0U2VsZWN0ZWREYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkRGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNlbGVjdGlvbjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2VsZWN0aW9uID0gU2VsZWN0aW9uO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc2VsZWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBldmVudHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2VhcmNoID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU2VhcmNoKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBTZWFyY2gucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2hTdHJpbmcpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMuc2VhcmNoLCBhcmcxOiBzZWFyY2hTdHJpbmcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VhcmNoU3RyaW5nID0gc2VhcmNoU3RyaW5nLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAoc2VhcmNoU3RyaW5nICE9PSBnT2JqLnNlYXJjaFNldHRpbmdzLmtleSkge1xuICAgICAgICAgICAgICAgIGdPYmouc2VhcmNoU2V0dGluZ3Mua2V5ID0gc2VhcmNoU3RyaW5nO1xuICAgICAgICAgICAgICAgIGdPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnNlYXJjaENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnNlYXJjaENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3kpO1xuICAgICAgICB9O1xuICAgICAgICBTZWFyY2gucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGUucHJvcGVydGllcy5rZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdzZWFyY2hpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIHNlYXJjaFN0cmluZzogdGhpcy5wYXJlbnQuc2VhcmNoU2V0dGluZ3Mua2V5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3NlYXJjaGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWFyY2gucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHtcbiAgICAgICAgICAgICAgICBzZWFyY2hTdHJpbmc6IHRoaXMucGFyZW50LnNlYXJjaFNldHRpbmdzLmtleSwgcmVxdWVzdFR5cGU6ICdzZWFyY2hpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdzZWFyY2gnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU2VhcmNoO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TZWFyY2ggPSBTZWFyY2g7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9zZWFyY2guanNcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTaG93SGlkZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNob3dIaWRlKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoY29sdW1uTmFtZSwgc2hvd0J5KSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IHRoaXMuZ2V0VG9nZ2xlRmllbGRzKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnMoa2V5cywgc2hvd0J5KTtcbiAgICAgICAgICAgIGNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKGNvbHVtbnMpO1xuICAgICAgICB9O1xuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBoaWRlQnkpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gdGhpcy5nZXRUb2dnbGVGaWVsZHMoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1ucyhrZXlzLCBoaWRlQnkpO1xuICAgICAgICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKGNvbHVtbnMpO1xuICAgICAgICB9O1xuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuZ2V0VG9nZ2xlRmllbGRzID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIGZpbmFsaXplZCA9IFtdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgZmluYWxpemVkID0gW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmaW5hbGl6ZWQgPSBrZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmluYWxpemVkO1xuICAgICAgICB9O1xuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuZ2V0Q29sdW1ucyA9IGZ1bmN0aW9uIChrZXlzLCBnZXRLZXlCeSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KGtleXMsIGZ1bmN0aW9uIChrZXksIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdChfdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bZ2V0S2V5QnldID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfSlbMF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgICAgICB9O1xuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICBjb2x1bW5zID0gZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW5zKSA/IHRoaXMucGFyZW50LmdldENvbHVtbnMoKSA6IGNvbHVtbnM7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCBjb2x1bW5zKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNob3dIaWRlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TaG93SGlkZSA9IFNob3dIaWRlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc2hvdy1oaWRlLmpzXG4vLyBtb2R1bGUgaWQgPSA0NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vc2VydmljZXMvd2lkdGgtY29udHJvbGxlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgY29uc3RhbnRfMSwgd2lkdGhfY29udHJvbGxlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTY3JvbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTY3JvbGwocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RTY3JvbGxUb3AgPSAwO1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlcyA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG4gICAgICAgICAgICB0aGlzLm9uZVRpbWVSZWFkeSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlID0gbmV3IHdpZHRoX2NvbnRyb2xsZXJfMS5Db2x1bW5XaWR0aFNlcnZpY2UocGFyZW50KTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnc2Nyb2xsJztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5zZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuc3R5bGUud2lkdGggPSBlajJfYmFzZV8zLmZvcm1hdFVuaXQodGhpcy5wYXJlbnQud2lkdGgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnRvb2xiYXJNb2R1bGUgJiYgdGhpcy5wYXJlbnQudG9vbGJhck1vZHVsZS50b29sYmFyICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudG9vbGJhck1vZHVsZS50b29sYmFyLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50b29sYmFyTW9kdWxlLnRvb2xiYXIucmVmcmVzaE92ZXJmbG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuc2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1IZHJIZWlnaHQgPSAwO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Sb3dzKSB7XG4gICAgICAgICAgICAgICAgbUhkckhlaWdodCA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmhlaWdodCA9IGVqMl9iYXNlXzMuZm9ybWF0VW5pdCh0aGlzLnBhcmVudC5oZWlnaHQgLSBtSGRySGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gZWoyX2Jhc2VfMy5mb3JtYXRVbml0KHRoaXMucGFyZW50LmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuc3VyZU92ZXJmbG93KGNvbnRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnNldFBhZGRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKTtcbiAgICAgICAgICAgIHZhciBzY3JvbGxXaWR0aCA9IFNjcm9sbC5nZXRTY3JvbGxCYXJXaWR0aCgpIC0gdGhpcy5nZXRUaHJlc2hvbGQoKTtcbiAgICAgICAgICAgIHZhciBjc3NQcm9wcyA9IHRoaXMuZ2V0Q3NzUHJvcGVydGllcygpO1xuICAgICAgICAgICAgY29udGVudC5maXJzdENoaWxkLnN0eWxlW2Nzc1Byb3BzLmJvcmRlcl0gPSBzY3JvbGxXaWR0aCA+IDAgPyAnMXB4JyA6ICcwcHgnO1xuICAgICAgICAgICAgY29udGVudC5zdHlsZVtjc3NQcm9wcy5wYWRkaW5nXSA9IHNjcm9sbFdpZHRoID4gMCA/IHNjcm9sbFdpZHRoICsgJ3B4JyA6ICcwcHgnO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnJlbW92ZVBhZGRpbmcgPSBmdW5jdGlvbiAocnRsKSB7XG4gICAgICAgICAgICB2YXIgY3NzUHJvcHMgPSB0aGlzLmdldENzc1Byb3BlcnRpZXMocnRsKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkLnN0eWxlW2Nzc1Byb3BzLmJvcmRlcl0gPSAnJztcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkLnBhcmVudEVsZW1lbnQuc3R5bGVbY3NzUHJvcHMucGFkZGluZ10gPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmhlaWdodCAhPT0gJzEwMCUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLndpZHRoU2VydmljZS5nZXRTaWJsaW5nc0hlaWdodChjb250ZW50KTtcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gJ2NhbGMoMTAwJSAtICcgKyBoZWlnaHQgKyAncHgpJztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5nZXRUaHJlc2hvbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXBwTmFtZSA9IGVqMl9iYXNlXzEuQnJvd3Nlci5pbmZvLm5hbWU7XG4gICAgICAgICAgICBpZiAoYXBwTmFtZSA9PT0gJ21vemlsbGEnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDAuNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmNvbnRlbnRSZWFkeSwgdGhpcy53aXJlRXZlbnRzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jb250ZW50UmVhZHksIHRoaXMud2lyZUV2ZW50cyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUub25Db250ZW50U2Nyb2xsID0gZnVuY3Rpb24gKHNjcm9sbFRhcmdldCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gc2Nyb2xsVGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGlzSGVhZGVyID0gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGVhZGVyY29udGVudCcpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbnRlbnQucXVlcnlTZWxlY3RvcigndGJvZHknKSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IHRhcmdldC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIHZhciBzTGltaXQgPSB0YXJnZXQuc2Nyb2xsV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIGlzRm9vdGVyID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zdW1tYXJ5Y29udGVudCcpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0ID09PSBsZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA9ICFpc0hlYWRlciA/IF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA6IHRhcmdldC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICBpZiAoaXNGb290ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGVhZGVyLnNjcm9sbExlZnQgPSBsZWZ0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQubm90aWZ5KGNvbnN0YW50XzEuc2Nyb2xsLCB7IGxlZnQ6IGxlZnQgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLm9uRnJlZXplQ29udGVudFNjcm9sbCA9IGZ1bmN0aW9uIChzY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNjcm9sbFRhcmdldDtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIHRvcCA9IHRhcmdldC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA9PT0gdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSB0b3A7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJldmlvdXNWYWx1ZXMudG9wID0gdG9wO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUub25XaGVlbFNjcm9sbCA9IGZ1bmN0aW9uIChzY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNjcm9sbFRhcmdldDtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdG9wID0gZWxlbWVudC5zY3JvbGxUb3AgKyBlLmRlbHRhWTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJldmlvdXNWYWx1ZXMudG9wID09PSB0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LmdldENvbnRlbnQoKS5xdWVyeVNlbGVjdG9yKCcuZS1mcm96ZW5jb250ZW50Jykuc2Nyb2xsVG9wID0gdG9wO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gdG9wO1xuICAgICAgICAgICAgICAgIF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA9IHRvcDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUub25Ub3VjaFNjcm9sbCA9IGZ1bmN0aW9uIChzY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNjcm9sbFRhcmdldDtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBwYWdlWSA9IF90aGlzLmdldFBvaW50WShlKTtcbiAgICAgICAgICAgICAgICB2YXIgdG9wID0gZWxlbWVudC5zY3JvbGxUb3AgKyAoX3RoaXMucGFnZVkgLSBwYWdlWSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA9PT0gdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5nZXRDb250ZW50KCkucXVlcnlTZWxlY3RvcignLmUtZnJvemVuY29udGVudCcpLnNjcm9sbFRvcCA9IHRvcDtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNjcm9sbFRvcCA9IHRvcDtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYWdlWSA9IHBhZ2VZO1xuICAgICAgICAgICAgICAgIF90aGlzLnByZXZpb3VzVmFsdWVzLnRvcCA9IHRvcDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuc2V0UGFnZVkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFnZVkgPSBfdGhpcy5nZXRQb2ludFkoZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmdldFBvaW50WSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS50b3VjaGVzWzBdLnBhZ2VZO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUucGFnZVk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uZVRpbWVSZWFkeSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudCA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgdmFyIG1Db250ID0gdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1vdmFibGVjb250ZW50Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGZDb250ID0gdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWZyb3plbmNvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgbUhkciA9IHRoaXMuaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLW1vdmFibGVoZWFkZXInKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQobUNvbnQsICdzY3JvbGwnLCB0aGlzLm9uQ29udGVudFNjcm9sbChtSGRyKSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChtQ29udCwgJ3Njcm9sbCcsIHRoaXMub25GcmVlemVDb250ZW50U2Nyb2xsKGZDb250KSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChmQ29udCwgJ3Njcm9sbCcsIHRoaXMub25GcmVlemVDb250ZW50U2Nyb2xsKG1Db250KSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChtSGRyLCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRlbnRTY3JvbGwobUNvbnQpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGZDb250LCAnd2hlZWwnLCB0aGlzLm9uV2hlZWxTY3JvbGwobUNvbnQpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGZDb250LCAndG91Y2hzdGFydCcsIHRoaXMuc2V0UGFnZVkoKSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChmQ29udCwgJ3RvdWNobW92ZScsIHRoaXMub25Ub3VjaFNjcm9sbChtQ29udCksIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuY29udGVudCwgJ3Njcm9sbCcsIHRoaXMub25Db250ZW50U2Nyb2xsKHRoaXMuaGVhZGVyKSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmhlYWRlciwgJ3Njcm9sbCcsIHRoaXMub25Db250ZW50U2Nyb2xsKHRoaXMuY29udGVudCksIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWdncmVnYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldEZvb3RlckNvbnRlbnQoKS5maXJzdENoaWxkLCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRlbnRTY3JvbGwodGhpcy5jb250ZW50KSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub25lVGltZVJlYWR5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIGlmICh0YWJsZS5zY3JvbGxIZWlnaHQgPCB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hZGRDbGFzcyh0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cjpsYXN0LWNoaWxkIHRkJyksICdlLWxhc3Ryb3djZWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVuYWJsZVZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnNjcm9sbExlZnQgPSB0aGlzLnByZXZpb3VzVmFsdWVzLmxlZnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnNjcm9sbFRvcCA9IHRoaXMucHJldmlvdXNWYWx1ZXMudG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxMZWZ0ID0gdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmdldENzc1Byb3BlcnRpZXMgPSBmdW5jdGlvbiAocnRsKSB7XG4gICAgICAgICAgICB2YXIgY3NzID0ge307XG4gICAgICAgICAgICB2YXIgZW5hYmxlUnRsID0gZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChydGwpID8gdGhpcy5wYXJlbnQuZW5hYmxlUnRsIDogcnRsO1xuICAgICAgICAgICAgY3NzLmJvcmRlciA9IGVuYWJsZVJ0bCA/ICdib3JkZXJMZWZ0V2lkdGgnIDogJ2JvcmRlclJpZ2h0V2lkdGgnO1xuICAgICAgICAgICAgY3NzLnBhZGRpbmcgPSBlbmFibGVSdGwgPyAncGFkZGluZ0xlZnQnIDogJ3BhZGRpbmdSaWdodCc7XG4gICAgICAgICAgICByZXR1cm4gY3NzO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmVuc3VyZU92ZXJmbG93ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZS1tb3ZhYmxlY29udGVudCcpLnN0eWxlLm92ZXJmbG93WSA9IHRoaXMucGFyZW50LmhlaWdodCA9PT0gJ2F1dG8nID8gJ2F1dG8nIDogJ3Njcm9sbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLm92ZXJmbG93WSA9IHRoaXMucGFyZW50LmhlaWdodCA9PT0gJ2F1dG8nID8gJ2F1dG8nIDogJ3Njcm9sbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0UGFkZGluZygpO1xuICAgICAgICAgICAgdGhpcy5vbmVUaW1lUmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmhlaWdodCA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQYWRkaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICB0aGlzLnNldFdpZHRoKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVQYWRkaW5nKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZF0sICdlLWhlYWRlcmNvbnRlbnQnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoW3RoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkXSwgJ2UtY29udGVudCcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQsICdzY3JvbGwnLCB0aGlzLm9uQ29udGVudFNjcm9sbCk7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5nZXRTY3JvbGxCYXJXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuZ2V0U2Nyb2xsQmFyV2lkdGgoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNjcm9sbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2Nyb2xsID0gU2Nyb2xsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc2Nyb2xsLmpzXG4vLyBtb2R1bGUgaWQgPSA0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQcmludCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFByaW50KHBhcmVudCwgc2Nyb2xsTW9kdWxlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuY29udGVudFJlYWR5LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUgPSBzY3JvbGxNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgUHJpbnQucHJvdG90eXBlLnByaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaXNQcmludGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBnT2JqLmVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5wcmludFdpbmRvdyA9IHdpbmRvdy5vcGVuKCcnLCAncHJpbnQnLCAnaGVpZ2h0PScgKyB3aW5kb3cub3V0ZXJIZWlnaHQgKyAnLHdpZHRoPScgKyB3aW5kb3cub3V0ZXJXaWR0aCArICcsdGFiYmFyPW5vJyk7XG4gICAgICAgICAgICB0aGlzLnByaW50V2luZG93Lm1vdmVUbygwLCAwKTtcbiAgICAgICAgICAgIHRoaXMucHJpbnRXaW5kb3cucmVzaXplVG8oc2NyZWVuLmF2YWlsV2lkdGgsIHNjcmVlbi5hdmFpbEhlaWdodCk7XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLnByaW50TW9kZSA9PT0gJ2N1cnJlbnRwYWdlJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBhZ2VyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVhZHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQYWdlckRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5hbGxvd1BhZ2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVhZHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUHJpbnQucHJvdG90eXBlLmNvbnRlbnRSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNQcmludGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzUGFnZXJEaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGdPYmouZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1BhZ2VyRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBnT2JqLmFsbG93UGFnaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmhlaWdodCAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNzc1Byb3BzID0gdGhpcy5zY3JvbGxNb2R1bGUuZ2V0Q3NzUHJvcGVydGllcygpO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50RGl2ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyRGl2ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRoZWFkZXInKTtcbiAgICAgICAgICAgICAgICBjb250ZW50RGl2LnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgICAgICAgICAgICBjb250ZW50RGl2LnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJztcbiAgICAgICAgICAgICAgICBoZWFkZXJEaXYuc3R5bGVbY3NzUHJvcHMucGFkZGluZ10gPSAnJztcbiAgICAgICAgICAgICAgICBoZWFkZXJEaXYuZmlyc3RFbGVtZW50Q2hpbGQuc3R5bGVbY3NzUHJvcHMuYm9yZGVyXSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGlmICghZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cGRyb3BhcmVhJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29sR3JvdXAoZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50LCAnLmUtZ3JvdXB0b3BsZWZ0Y2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnQsICcuZS1yZWNvcmRwbHVzY29sbGFwc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50LCAnLmUtaW5kZW50Y2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnQsICcuZS1yZWNvcmRwbHVzZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmoudG9vbGJhcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS10b29sYmFyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93RmlsdGVyaW5nICYmIGdPYmouZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2ZpbHRlcmJhcicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZmlsdGVyYmFyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtYWN0aXZlJyksICdlLWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3ModGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNlbGxzZWxlY3Rpb24xYmFja2dyb3VuZCcpLCAnZS1jZWxsc2VsZWN0aW9uMWJhY2tncm91bmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAncHJpbnQnLCBlbGVtZW50OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3dzOiBnT2JqLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyW2FyaWEtc2VsZWN0ZWQ9XCJ0cnVlXCJdJylcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZm9yZVByaW50LCBhcmdzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucHJpbnQodGhpcy5lbGVtZW50LCB0aGlzLnByaW50V2luZG93KTtcbiAgICAgICAgICAgIHRoaXMuaXNQcmludGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5wcmludENvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUHJpbnQucHJvdG90eXBlLnJlbW92ZUNvbEdyb3VwID0gZnVuY3Rpb24gKGRlcHRoKSB7XG4gICAgICAgICAgICB2YXIgZ3JvdXBDYXB0aW9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdyb3VwY2FwdGlvbicpO1xuICAgICAgICAgICAgdmFyIGNvbFNwYW4gPSBncm91cENhcHRpb25bZGVwdGggLSAxXS5nZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXBDYXB0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBDYXB0aW9uW2ldLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNvbFNwYW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbEdyb3VwcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdjb2xncm91cCcpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xHcm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRlcHRoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29sR3JvdXBzW2ldLmNoaWxkTm9kZXNbal0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBQcmludC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncHJpbnQnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUHJpbnQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlByaW50ID0gUHJpbnQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9wcmludC5qc1xuLy8gbW9kdWxlIGlkID0gNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlbnVtXzEsIGVqMl9iYXNlXzMsIHZhbHVlX2Zvcm1hdHRlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBZ2dyZWdhdGVDb2x1bW4gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWdncmVnYXRlQ29sdW1uLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBZ2dyZWdhdGVDb2x1bW4oKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnRlbXBsYXRlRm4gPSB7fTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLnNldEZvcm1hdHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZUZvcm1hdHRlciA9IG5ldyB2YWx1ZV9mb3JtYXR0ZXJfMS5WYWx1ZUZvcm1hdHRlcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZm9ybWF0ICYmICh0aGlzLmZvcm1hdC5za2VsZXRvbiB8fCB0aGlzLmZvcm1hdC5mb3JtYXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtYXRGbiA9IHZhbHVlRm9ybWF0dGVyLmdldEZvcm1hdEZ1bmN0aW9uKHRoaXMuZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZS5nZXRGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRGbjtcbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZS5zZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uIChoZWxwZXIpIHtcbiAgICAgICAgICAgIGlmIChoZWxwZXIgPT09IHZvaWQgMCkgeyBoZWxwZXIgPSB7fTsgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVGbltlajJfYmFzZV8yLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5TdW1tYXJ5KV0gPSB7IGZuOiBlajJfYmFzZV8xLmNvbXBpbGUodGhpcy5mb290ZXJUZW1wbGF0ZSwgaGVscGVyKSxcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6ICdmb290ZXJUZW1wbGF0ZScgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwRm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVGbltlajJfYmFzZV8yLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnkpXSA9IHsgZm46IGVqMl9iYXNlXzEuY29tcGlsZSh0aGlzLmdyb3VwRm9vdGVyVGVtcGxhdGUsIGhlbHBlciksXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiAnZ3JvdXBGb290ZXJUZW1wbGF0ZScgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm5bZWoyX2Jhc2VfMi5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnkpXSA9IHsgZm46IGVqMl9iYXNlXzEuY29tcGlsZSh0aGlzLmdyb3VwQ2FwdGlvblRlbXBsYXRlLCBoZWxwZXIpLFxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogJ2dyb3VwQ2FwdGlvblRlbXBsYXRlJyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLmdldFRlbXBsYXRlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlRm5bZWoyX2Jhc2VfMi5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCB0eXBlKV07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBZ2dyZWdhdGVDb2x1bW47XG4gICAgfShlajJfYmFzZV8zLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiZmllbGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJjb2x1bW5OYW1lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiZm9ybWF0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiZm9vdGVyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJncm91cEZvb3RlclRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiZ3JvdXBDYXB0aW9uVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJjdXN0b21BZ2dyZWdhdGVcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkFnZ3JlZ2F0ZUNvbHVtbiA9IEFnZ3JlZ2F0ZUNvbHVtbjtcbiAgICB2YXIgQWdncmVnYXRlUm93ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFnZ3JlZ2F0ZVJvdywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQWdncmVnYXRlUm93KCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBZ2dyZWdhdGVSb3c7XG4gICAgfShlajJfYmFzZV8zLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Db2xsZWN0aW9uKFtdLCBBZ2dyZWdhdGVDb2x1bW4pXG4gICAgXSwgQWdncmVnYXRlUm93LnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5BZ2dyZWdhdGVSb3cgPSBBZ2dyZWdhdGVSb3c7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvbW9kZWxzL2FnZ3JlZ2F0ZS5qc1xuLy8gbW9kdWxlIGlkID0gNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9kYXRhXzEsIGVqMl9iYXNlXzIsIGV2ZW50cywgZWoyX3BvcHVwc18xLCB1dGlsXzEsIGVqMl9idXR0b25zXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENvbHVtbkNob29zZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDb2x1bW5DaG9vc2VyKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbHVtbiA9IFtdO1xuICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uID0gW107XG4gICAgICAgICAgICB0aGlzLmlzRGxnT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kbGdoaWRlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxPcGVuRGxnID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VDb2x1bW5zID0gW107XG4gICAgICAgICAgICB0aGlzLmlzSW5pdGlhbE9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNDdXN0b21pemVPcGVuQ0MgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY0JveFRydWUgPSBlajJfYnV0dG9uc18xLmNyZWF0ZUNoZWNrQm94KHRydWUsIHsgY2hlY2tlZDogdHJ1ZSwgbGFiZWw6ICcgJyB9KTtcbiAgICAgICAgICAgIHRoaXMuY0JveEZhbHNlID0gZWoyX2J1dHRvbnNfMS5jcmVhdGVDaGVja0JveCh0cnVlLCB7IGNoZWNrZWQ6IGZhbHNlLCBsYWJlbDogJyAnIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMuY0JveFRydWUuaW5zZXJ0QmVmb3JlKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jaGstaGlkZGVuIGUtY2MgZS1jYy1jaGJveCcsIGF0dHJzOiB7IHR5cGU6ICdjaGVja2JveCcgfVxuICAgICAgICAgICAgfSksIHRoaXMuY0JveFRydWUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLmNCb3hGYWxzZS5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNoay1oaWRkZW4gZS1jYyBlLWNjLWNoYm94JywgYXR0cnM6IHsgJ3R5cGUnOiAnY2hlY2tib3gnIH1cbiAgICAgICAgICAgIH0pLCB0aGlzLmNCb3hGYWxzZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHRoaXMuY0JveEZhbHNlLnF1ZXJ5U2VsZWN0b3IoJy5lLWZyYW1lJykuY2xhc3NMaXN0LmFkZCgnZS11bmNoZWNrJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhbdGhpcy5jQm94VHJ1ZSwgdGhpcy5jQm94RmFsc2VdLCBbJ2UtcnRsJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kbGdPYmopICYmIHRoaXMuZGxnT2JqLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMuaGlkZURpYWxvZy5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckRsZ0NvbnRlbnQoKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0U2hvd0hpZGVTZXJ2aWNlID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdzaG93SGlkZVNlcnZpY2UnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDdXN0b21pemVPcGVuQ0MpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldEVsZW1lbnQsICcuZS1jYycpKSB8fCAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0RWxlbWVudCwgJy5lLWNjLXRvb2xiYXInKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNvbHVtbmNob29zZXItYnRuJykgfHwgdGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2MtdG9vbGJhcicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMuaW5pdGlhbE9wZW5EbGcgJiYgdGhpcy5kbGdPYmoudmlzaWJsZSkgfHwgIXRoaXMuaXNEbGdPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RsZ09wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1jYy1jYW5jZWwnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjc2VhcmNoJykudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uQ2hvb3NlclNlYXJjaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNhbmNlbEljb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGxnT2JqKSAmJiB0aGlzLmRsZ09iai52aXNpYmxlICYmICF0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS10b29sYmFyLWl0ZW1zJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNEbGdPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmhpZGVEaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kbGdPYmopICYmIHRoaXMuZGxnT2JqLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0RsZ09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyQ29sdW1uQ2hvb3NlciA9IGZ1bmN0aW9uICh4LCB5LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kbGdPYmoudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHZhciBwb3MgPSB7IFg6IG51bGwsIFk6IG51bGwgfTtcbiAgICAgICAgICAgICAgICB2YXIgYXJnczEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnYmVmb3JlT3BlbkNvbHVtbkNob29zZXInLCBlbGVtZW50OiB0aGlzLnBhcmVudC5lbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmJlZm9yZU9wZW5Db2x1bW5DaG9vc2VyLCBhcmdzMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2hlY2tib3hTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnNDMwcHgnO1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50VmlzaWJsZSA9IHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUuZGlzcGxheTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIHZhciBuZXdwb3MgPSBlajJfcG9wdXBzXzEuY2FsY3VsYXRlUmVsYXRpdmVCYXNlZFBvc2l0aW9uKGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS10b29sYmFyLWl0ZW0nKSwgdGhpcy5kbGdPYmouZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gZWxlbWVudFZpc2libGU7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS50b3AgPSBuZXdwb3MudG9wICsgZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWNjLXRvb2xiYXInKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIHZhciBkbGdXaWR0aCA9IDI1MDtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWJpZ2dlcicpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai53aWR0aCA9IDI1MztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai50YXJnZXQgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5wb3NpdGlvbiA9IHsgWDogJ2NlbnRlcicsIFk6ICdjZW50ZXInIH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnJlZnJlc2hQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5vcGVuID0gdGhpcy5tT3BlbkRsZy5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5sZWZ0ID0gdGFyZ2V0Lm9mZnNldExlZnQgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5sZWZ0ID0gKChuZXdwb3MubGVmdCAtIGRsZ1dpZHRoKSArIGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS1jYy10b29sYmFyJykuY2xpZW50V2lkdGgpICsgMiArICdweCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDYW5jZWxJY29uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRGlhbG9nKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRjYW5jZWxJY29uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLm9wZW5Db2x1bW5DaG9vc2VyID0gZnVuY3Rpb24gKFgsIFkpIHtcbiAgICAgICAgICAgIHRoaXMuaXNDdXN0b21pemVPcGVuQ0MgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGxnT2JqLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVEaWFsb2coKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNJbml0aWFsT3Blbikge1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmNvbnRlbnQgPSB0aGlzLnJlbmRlckNob29zZXJMaXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hDaGVja2JveFN0YXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgdGhpcy5kbGdPYmoucG9zaXRpb24gPSB7IFg6ICdjZW50ZXInLCBZOiAnY2VudGVyJyB9O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoWCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5wb3NpdGlvbiA9IHsgWDogJ2NlbnRlcicsIFk6ICdjZW50ZXInIH07XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoucmVmcmVzaFBvc2l0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLnRvcCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubGVmdCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUudG9wID0gWSArICdweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5sZWZ0ID0gWCArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5iZWZvcmVPcGVuID0gdGhpcy5jdXN0b21EaWFsb2dPcGVuLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5zaG93KCk7XG4gICAgICAgICAgICB0aGlzLmlzSW5pdGlhbE9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5kbGdPYmouYmVmb3JlQ2xvc2UgPSB0aGlzLmN1c3RvbURpYWxvZ0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmN1c3RvbURpYWxvZ09wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VhcmNoRWxlbWVudCA9IHRoaXMuZGxnT2JqLmNvbnRlbnQucXVlcnlTZWxlY3RvcignaW5wdXQuZS1jY3NlYXJjaCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHNlYXJjaEVsZW1lbnQsICdrZXl1cCcsIHRoaXMuY29sdW1uQ2hvb3Nlck1hbnVhbFNlYXJjaCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmN1c3RvbURpYWxvZ0Nsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlYXJjaEVsZW1lbnQgPSB0aGlzLmRsZ09iai5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LmUtY2NzZWFyY2gnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZShzZWFyY2hFbGVtZW50LCAna2V5dXAnLCB0aGlzLmNvbHVtbkNob29zZXJNYW51YWxTZWFyY2gpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW5kZXJEbGdDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHk7XG4gICAgICAgICAgICB0aGlzLmRsZ0RpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNjZGxnIGUtY2MnLCBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArICdfY2NkbGcnIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmRsZ0Rpdik7XG4gICAgICAgICAgICB2YXIgeHBvcyA9IHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggLSAyNTA7XG4gICAgICAgICAgICB2YXIgZGlhbG9Qb3MgPSB0aGlzLnBhcmVudC5lbmFibGVSdGwgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgICAgICAgICAgdmFyIHRhckVsZW1lbnQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjZGl2Jyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGFyRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB5ID0gdGFyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcG9zID0geyBYOiBudWxsLCBZOiBudWxsIH07XG4gICAgICAgICAgICB0aGlzLmRsZ09iaiA9IG5ldyBlajJfcG9wdXBzXzEuRGlhbG9nKHtcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2hvb3NlQ29sdW1ucycpLFxuICAgICAgICAgICAgICAgIHNob3dDbG9zZUljb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNsb3NlT25Fc2NhcGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5wYXJlbnQubG9jYWxlLFxuICAgICAgICAgICAgICAgIHZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgIHRhcmdldDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5wYXJlbnQuZWxlbWVudC5pZCksXG4gICAgICAgICAgICAgICAgYnV0dG9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmNvbmZpcm1EbGdCdG5DbGljay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ09LQnV0dG9uJyksIGlzUHJpbWFyeTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtY2MgZS1jY19va2J0bicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmNsZWFyQWN0aW9ucy5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgY3NzQ2xhc3M6ICdlLWZsYXQgZS1jYyBlLWNjLWNuYnRuJywgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdDYW5jZWxCdXR0b24nKSB9XG4gICAgICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucmVuZGVyQ2hvb3Nlckxpc3QoKSxcbiAgICAgICAgICAgICAgICB3aWR0aDogMjUwLFxuICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnZS1jYycsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uU2V0dGluZ3M6IHsgZWZmZWN0OiAnTm9uZScgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kbGdPYmouYXBwZW5kVG8odGhpcy5kbGdEaXYpO1xuICAgICAgICAgICAgdXRpbF8xLmNoYW5nZUJ1dHRvblR5cGUodGhpcy5kbGdPYmouZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyQ2hvb3Nlckxpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm1haW5EaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1tYWluLWRpdiBlLWNjJyB9KTtcbiAgICAgICAgICAgIHZhciBzZWFyY2hEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jYy1zZWFyY2hkaXYgZS1jYyBlLWlucHV0LWdyb3VwJyB9KTtcbiAgICAgICAgICAgIHZhciBjY3NlYXJjaGVsZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jY3NlYXJjaCBlLWNjIGUtaW5wdXQnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHBsYWNlaG9sZGVyOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1NlYXJjaCcpIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGNjc2VhcmNoaWNvbiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1jY3NlYXJjaC1pY29uIGUtaWNvbnMgZS1jYyBlLWlucHV0LWdyb3VwLWljb24nIH0pO1xuICAgICAgICAgICAgdmFyIGNvbkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNjLWNvbnRlbnRkaXYnIH0pO1xuICAgICAgICAgICAgdGhpcy5pbm5lckRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWlubmVyZGl2IGUtY2MnIH0pO1xuICAgICAgICAgICAgc2VhcmNoRGl2LmFwcGVuZENoaWxkKGNjc2VhcmNoZWxlKTtcbiAgICAgICAgICAgIHNlYXJjaERpdi5hcHBlbmRDaGlsZChjY3NlYXJjaGljb24pO1xuICAgICAgICAgICAgY2NzZWFyY2hlbGUuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLnNlYXJjaEZvY3VzLmJpbmQodGhpcywgY2NzZWFyY2hlbGUpKTtcbiAgICAgICAgICAgIGNjc2VhcmNoZWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLnNlYXJjaEJsdXIuYmluZCh0aGlzLCBjY3NlYXJjaGVsZSkpO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2Q29udGVudCA9IHRoaXMucmVmcmVzaENoZWNrYm94TGlzdCh0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkpO1xuICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5hcHBlbmRDaGlsZChpbm5lckRpdkNvbnRlbnQpO1xuICAgICAgICAgICAgY29uRGl2LmFwcGVuZENoaWxkKHRoaXMuaW5uZXJEaXYpO1xuICAgICAgICAgICAgdGhpcy5tYWluRGl2LmFwcGVuZENoaWxkKHNlYXJjaERpdik7XG4gICAgICAgICAgICB0aGlzLm1haW5EaXYuYXBwZW5kQ2hpbGQoY29uRGl2KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1haW5EaXY7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnNlYXJjaEZvY3VzID0gZnVuY3Rpb24gKHRhcmd0KSB7XG4gICAgICAgICAgICB0YXJndC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtaW5wdXQtZm9jdXMnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuc2VhcmNoQmx1ciA9IGZ1bmN0aW9uICh0YXJndCkge1xuICAgICAgICAgICAgdGFyZ3QucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWlucHV0LWZvY3VzJyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbmZpcm1EbGdCdG5DbGljayA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlkZUNvbHVtbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5TdGF0ZUNoYW5nZSh0aGlzLmhpZGVDb2x1bW4sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5TdGF0ZUNoYW5nZSh0aGlzLnNob3dDb2x1bW4sIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2NvbHVtbnN0YXRlJywgZWxlbWVudDogdGhpcy5wYXJlbnQuZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogdGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMsIGRpYWxvZ0luc3RhbmNlOiB0aGlzLmRsZ09ialxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTaG93SGlkZVNlcnZpY2Uuc2V0VmlzaWJsZSh0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckFjdGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY29sdW1uU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdGVDb2x1bW5zLCBzdGF0ZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHN0YXRlQ29sdW1ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sVWlkID0gc3RhdGVDb2x1bW5zW2luZGV4XTtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudENvbCA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKGNvbFVpZCk7XG4gICAgICAgICAgICAgICAgY3VycmVudENvbC52aXNpYmxlID0gc3RhdGU7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMucHVzaChjdXJyZW50Q29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY2xlYXJBY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uID0gW107XG4gICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICAgICAgdGhpcy5hZGRjYW5jZWxJY29uKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNoZWNrc3RhdGVjb2x1bW4gPSBmdW5jdGlvbiAoaXNDaGVja2VkLCBjb2x1aWQpIHtcbiAgICAgICAgICAgIGlmIChpc0NoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oaWRlQ29sdW1uLmluZGV4T2YoY29sdWlkKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uLnNwbGljZSh0aGlzLmhpZGVDb2x1bW4uaW5kZXhPZihjb2x1aWQpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKGNvbHVpZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NvbHVtbi5wdXNoKGNvbHVpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKGNvbHVpZCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NvbHVtbi5zcGxpY2UodGhpcy5zaG93Q29sdW1uLmluZGV4T2YoY29sdWlkKSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhpZGVDb2x1bW4uaW5kZXhPZihjb2x1aWQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW4ucHVzaChjb2x1aWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY29sdW1uQ2hvb3NlclNlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2hWYWwpIHtcbiAgICAgICAgICAgIHZhciBjbGVhclNlYXJjaCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGZsdHJDb2w7XG4gICAgICAgICAgICBpZiAoc2VhcmNoVmFsID09PSAnJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2FuY2VsSWNvbigpO1xuICAgICAgICAgICAgICAgIGZsdHJDb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICAgICAgY2xlYXJTZWFyY2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZmx0ckNvbCA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMucGFyZW50LmdldENvbHVtbnMoKSkuZXhlY3V0ZUxvY2FsKG5ldyBlajJfZGF0YV8xLlF1ZXJ5KClcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKCdoZWFkZXJUZXh0JywgJ3N0YXJ0c3dpdGgnLCBzZWFyY2hWYWwsIHRydWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmbHRyQ29sLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuaW5uZXJIVE1MID0gJyAnO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuY2xhc3NMaXN0LnJlbW92ZSgnZS1jY25tZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5hcHBlbmRDaGlsZCh0aGlzLnJlZnJlc2hDaGVja2JveExpc3QoZmx0ckNvbCwgc2VhcmNoVmFsKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjbGVhclNlYXJjaCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZGNhbmNlbEljb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbk1hdGNoZWxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLWNjIGUtbm1hdGNoJyB9KTtcbiAgICAgICAgICAgICAgICBuTWF0Y2hlbGUuaW5uZXJIVE1MID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdNYXRjaHMnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmlubmVySFRNTCA9ICcgJztcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmFwcGVuZENoaWxkKG5NYXRjaGVsZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5jbGFzc0xpc3QuYWRkKCdlLWNjbm1kaXYnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZGxnT2JqLmVsZW1lbnQsICdjbGljaycsIHRoaXMuY2hlY2tCb3hDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdmFyIHNlYXJjaEVsZW1lbnQgPSB0aGlzLmRsZ09iai5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LmUtY2NzZWFyY2gnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZChzZWFyY2hFbGVtZW50LCAna2V5dXAnLCB0aGlzLmNvbHVtbkNob29zZXJNYW51YWxTZWFyY2gsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS51bldpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kbGdPYmouZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmRsZ09iai5lbGVtZW50LCAnY2xpY2snLCB0aGlzLmNoZWNrQm94Q2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzZWFyY2hFbGVtZW50ID0gdGhpcy5kbGdPYmouY29udGVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dC5lLWNjc2VhcmNoJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUoc2VhcmNoRWxlbWVudCwgJ2tleXVwJywgdGhpcy5jb2x1bW5DaG9vc2VyTWFudWFsU2VhcmNoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY2hlY2tCb3hDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGNoZWNrc3RhdGU7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWNoZWNrYm94LXdyYXBwZXInKTtcbiAgICAgICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnRvb2dsZUNoZWNrYm94KGVsZW0ucGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgZWxlbS5xdWVyeVNlbGVjdG9yKCcuZS1jaGstaGlkZGVuJykuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbS5xdWVyeVNlbGVjdG9yKCcuZS1jaGVjaycpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrc3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5lLXVuY2hlY2snKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja3N0YXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5VaWQgPSB1dGlsXzEucGFyZW50c1VudGlsKGVsZW0sICdlLWNjaGVjaycpLmdldEF0dHJpYnV0ZSgndWlkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja3N0YXRlY29sdW1uKGNoZWNrc3RhdGUsIGNvbHVtblVpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlZnJlc2hDaGVja2JveExpc3QgPSBmdW5jdGlvbiAoZ2RDb2wsIHNlYXJjaFZhbCkge1xuICAgICAgICAgICAgdGhpcy51bEVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3VsJywgeyBjbGFzc05hbWU6ICdlLWNjdWwtZWxlIGUtY2MnIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZENvbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ2RDb2xbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDaGVja2JveChjb2x1bW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVsRWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVmcmVzaENoZWNrYm94U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjLmUtaW5wdXQnKS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5DaG9vc2VyU2VhcmNoKCcnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jYy1jaGJveCcpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNjLWNoYm94JylbaV07XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtblVJRCA9IHV0aWxfMS5wYXJlbnRzVW50aWwoZWxlbWVudCwgJ2UtY2NoZWNrJykuZ2V0QXR0cmlidXRlKCd1aWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQoY29sdW1uVUlEKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY3JlYXRlQ2hlY2tCb3ggPSBmdW5jdGlvbiAobGFiZWwsIGNoZWNrZWQsIHVpZCkge1xuICAgICAgICAgICAgdmFyIGNib3ggPSBjaGVja2VkID8gdGhpcy5jQm94VHJ1ZS5jbG9uZU5vZGUodHJ1ZSkgOiB0aGlzLmNCb3hGYWxzZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICBjYm94LnF1ZXJ5U2VsZWN0b3IoJy5lLWxhYmVsJykuaW5uZXJIVE1MID0gbGFiZWw7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLmNyZWF0ZUNib3hXaXRoV3JhcCh1aWQsIGNib3gsICdlLWNjaGVjaycpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW5kZXJDaGVja2JveCA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBjY2xpc3Q7XG4gICAgICAgICAgICB2YXIgaGlkZUNvbFN0YXRlO1xuICAgICAgICAgICAgdmFyIHNob3dDb2xTdGF0ZTtcbiAgICAgICAgICAgIHZhciBjaGVja0JveE9iajtcbiAgICAgICAgICAgIGlmIChjb2x1bW4uc2hvd0luQ29sdW1uQ2hvb3Nlcikge1xuICAgICAgICAgICAgICAgIGNjbGlzdCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnbGknLCB7IGNsYXNzTmFtZTogJ2UtY2NsaXN0IGUtY2MnLCBzdHlsZXM6ICdsaXN0LXN0eWxlOk5vbmUnLCBpZDogJ2UtY2NsaV8nICsgY29sdW1uLnVpZCB9KTtcbiAgICAgICAgICAgICAgICBoaWRlQ29sU3RhdGUgPSB0aGlzLmhpZGVDb2x1bW4uaW5kZXhPZihjb2x1bW4udWlkKSA9PT0gLTEgPyBmYWxzZSA6IHRydWU7XG4gICAgICAgICAgICAgICAgc2hvd0NvbFN0YXRlID0gdGhpcy5zaG93Q29sdW1uLmluZGV4T2YoY29sdW1uLnVpZCkgPT09IC0xID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBjY2NoZWNrYm94bGlzdCA9IHRoaXMuY3JlYXRlQ2hlY2tCb3goY29sdW1uLmhlYWRlclRleHQsIChjb2x1bW4udmlzaWJsZSAmJiAhaGlkZUNvbFN0YXRlKSB8fCBzaG93Q29sU3RhdGUsIGNvbHVtbi51aWQpO1xuICAgICAgICAgICAgICAgIGNjbGlzdC5hcHBlbmRDaGlsZChjY2NoZWNrYm94bGlzdCk7XG4gICAgICAgICAgICAgICAgdGhpcy51bEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2NsaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY29sdW1uQ2hvb3Nlck1hbnVhbFNlYXJjaCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmFkZGNhbmNlbEljb24oKTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoVmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIHZhciBwcm94eSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVyKGUpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5zdGFydFRpbWVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwcm94eSA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSAhcHJveHkuZmxhZyAmJiBlLmtleUNvZGUgIT09IDEzID8gNTAwIDogMDtcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBwcm94eS5jb2x1bW5DaG9vc2VyU2VhcmNoKHByb3h5LnNlYXJjaFZhbHVlKTsgfSwgaW50ZXJ2YWwpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5zdG9wVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuYWRkY2FuY2VsSWNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGxnRGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjLmUtY2NzZWFyY2gtaWNvbicpLmNsYXNzTGlzdC5hZGQoJ2UtY2MtY2FuY2VsJyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbW92ZUNhbmNlbEljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ0Rpdi5xdWVyeVNlbGVjdG9yKCcuZS1jYy5lLWNjc2VhcmNoLWljb24nKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWNjLWNhbmNlbCcpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5tT3BlbkRsZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjLXNlYXJjaGRpdicpLmNsYXNzTGlzdC5yZW1vdmUoJ2UtaW5wdXQtZm9jdXMnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNjLWNoYm94JylbMF0uZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnQ29sdW1uQ2hvb3Nlcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb2x1bW5DaG9vc2VyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW5DaG9vc2VyID0gQ29sdW1uQ2hvb3Nlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbHVtbi1jaG9vc2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA0OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENsaXBib2FyZCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENsaXBib2FyZChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29weUNvbnRlbnQgPSAnJztcbiAgICAgICAgICAgIHRoaXMuaXNTZWxlY3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgQ2xpcGJvYXJkLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleURvd25IYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2xpcGJvYXJkLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleURvd25IYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2xpcGJvYXJkLnByb3RvdHlwZS5pbml0aWFsRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICB0aGlzLmNsaXBCb2FyZFRleHRBcmVhID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNsaXBib2FyZCcsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiAnb3BhY2l0eTogMCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgcmVhZG9ubHk6ICd0cnVlJyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jbGlwQm9hcmRUZXh0QXJlYSk7XG4gICAgICAgIH07XG4gICAgICAgIENsaXBib2FyZC5wcm90b3R5cGUua2V5RG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUuYWN0aW9uID09PSAnY3RybFBsdXNDJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29weSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZS5hY3Rpb24gPT09ICdjdHJsU2hpZnRQbHVzSCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvcHkodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENsaXBib2FyZC5wcm90b3R5cGUuc2V0Q29weURhdGEgPSBmdW5jdGlvbiAod2l0aEhlYWRlcikge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpID09PSAnJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpcEJvYXJkVGV4dEFyZWEudmFsdWUgPSB0aGlzLmNvcHlDb250ZW50ID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnNlbGVjdGlvblNldHRpbmdzLm1vZGUgIT09ICdjZWxsJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldFJvd3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXhlcyA9IHRoaXMucGFyZW50LmdldFNlbGVjdGVkUm93SW5kZXhlcygpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgLSBiOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpdGhIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29weURhdGEoW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWhlYWRlcmNlbGwnKSksIGZhbHNlLCAnXFx0Jywgd2l0aEhlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlDb250ZW50ICs9ICdcXG4nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZWN0ZWRJbmRleGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlDb250ZW50ICs9ICdcXG4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDb3B5RGF0YShbXS5zbGljZS5jYWxsKHJvd3Nbc2VsZWN0ZWRJbmRleGVzW2ldXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJykpLCBmYWxzZSwgJ1xcdCcsIHdpdGhIZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldENvcHlEYXRhKFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpKSwgdHJ1ZSwgJ1xcbicsIHdpdGhIZWFkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5jb3B5Q29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmJlZm9yZUNvcHksIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2xpcEJvYXJkVGV4dEFyZWEudmFsdWUgPSB0aGlzLmNvcHlDb250ZW50ID0gYXJncy5kYXRhO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLnVzZXJBZ2VudC5tYXRjaCgvaXBhZHxpcG9kfGlwaG9uZS9pKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaXBCb2FyZFRleHRBcmVhLnNlbGVjdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGlwQm9hcmRUZXh0QXJlYS5zZXRTZWxlY3Rpb25SYW5nZSgwLCB0aGlzLmNsaXBCb2FyZFRleHRBcmVhLnZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaXNTZWxlY3QgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDbGlwYm9hcmQucHJvdG90eXBlLmdldENvcHlEYXRhID0gZnVuY3Rpb24gKGNlbGxzLCBpc0NlbGwsIHNwbGl0S2V5LCB3aXRoSGVhZGVyKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNlbGxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHdpdGhIZWFkZXIgJiYgaXNDZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29weUNvbnRlbnQgKz0gdGhpcy5wYXJlbnQuZ2V0VmlzaWJsZUNvbHVtbnMoKVtwYXJzZUludChjZWxsc1tqXS5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApXS5oZWFkZXJUZXh0ICsgJ1xcbic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY29weUNvbnRlbnQgKz0gY2VsbHNbal0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGogPCBjZWxscy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29weUNvbnRlbnQgKz0gc3BsaXRLZXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDbGlwYm9hcmQucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiAod2l0aEhlYWRlcikge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZCgnY29weScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb3B5RGF0YSh3aXRoSGVhZGVyKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpcEJvYXJkVGV4dEFyZWEuYmx1cigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNTZWxlY3QpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1NlbGVjdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDbGlwYm9hcmQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2NsaXBib2FyZCc7XG4gICAgICAgIH07XG4gICAgICAgIENsaXBib2FyZC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGhpcy5jbGlwQm9hcmRUZXh0QXJlYSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDbGlwYm9hcmQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNsaXBib2FyZCA9IENsaXBib2FyZDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2NsaXBib2FyZC5qc1xuLy8gbW9kdWxlIGlkID0gNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9hY3Rpb25zL2RhdGFcIiwgXCIuL2FjdGlvbnMvc29ydFwiLCBcIi4vYWN0aW9ucy9wYWdlXCIsIFwiLi9hY3Rpb25zL3NlbGVjdGlvblwiLCBcIi4vYWN0aW9ucy9maWx0ZXJcIiwgXCIuL2FjdGlvbnMvc2VhcmNoXCIsIFwiLi9hY3Rpb25zL3Njcm9sbFwiLCBcIi4vYWN0aW9ucy9yZXNpemVcIiwgXCIuL2FjdGlvbnMvcmVvcmRlclwiLCBcIi4vYWN0aW9ucy9yb3ctcmVvcmRlclwiLCBcIi4vYWN0aW9ucy9ncm91cFwiLCBcIi4vYWN0aW9ucy9wcmludFwiLCBcIi4vYWN0aW9ucy9kZXRhaWwtcm93XCIsIFwiLi9hY3Rpb25zL3Rvb2xiYXJcIiwgXCIuL2FjdGlvbnMvYWdncmVnYXRlXCIsIFwiLi9hY3Rpb25zL3ZpcnR1YWwtc2Nyb2xsXCIsIFwiLi9hY3Rpb25zL2VkaXRcIiwgXCIuL2FjdGlvbnMvYmF0Y2gtZWRpdFwiLCBcIi4vYWN0aW9ucy9pbmxpbmUtZWRpdFwiLCBcIi4vYWN0aW9ucy9ub3JtYWwtZWRpdFwiLCBcIi4vYWN0aW9ucy9kaWFsb2ctZWRpdFwiLCBcIi4vYWN0aW9ucy9jb2x1bW4tY2hvb3NlclwiLCBcIi4vYWN0aW9ucy9leGNlbC1leHBvcnRcIiwgXCIuL2FjdGlvbnMvcGRmLWV4cG9ydFwiLCBcIi4vYWN0aW9ucy9leHBvcnQtaGVscGVyXCIsIFwiLi9hY3Rpb25zL2NsaXBib2FyZFwiLCBcIi4vYWN0aW9ucy9jb21tYW5kLWNvbHVtblwiLCBcIi4vYWN0aW9ucy9jaGVja2JveC1maWx0ZXJcIiwgXCIuL2FjdGlvbnMvY29udGV4dC1tZW51XCIsIFwiLi9hY3Rpb25zL2ZyZWV6ZVwiLCBcIi4vYWN0aW9ucy9jb2x1bW4tbWVudVwiLCBcIi4vYWN0aW9ucy9leGNlbC1maWx0ZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBkYXRhXzEsIHNvcnRfMSwgcGFnZV8xLCBzZWxlY3Rpb25fMSwgZmlsdGVyXzEsIHNlYXJjaF8xLCBzY3JvbGxfMSwgcmVzaXplXzEsIHJlb3JkZXJfMSwgcm93X3Jlb3JkZXJfMSwgZ3JvdXBfMSwgcHJpbnRfMSwgZGV0YWlsX3Jvd18xLCB0b29sYmFyXzEsIGFnZ3JlZ2F0ZV8xLCB2aXJ0dWFsX3Njcm9sbF8xLCBlZGl0XzEsIGJhdGNoX2VkaXRfMSwgaW5saW5lX2VkaXRfMSwgbm9ybWFsX2VkaXRfMSwgZGlhbG9nX2VkaXRfMSwgY29sdW1uX2Nob29zZXJfMSwgZXhjZWxfZXhwb3J0XzEsIHBkZl9leHBvcnRfMSwgZXhwb3J0X2hlbHBlcl8xLCBjbGlwYm9hcmRfMSwgY29tbWFuZF9jb2x1bW5fMSwgY2hlY2tib3hfZmlsdGVyXzEsIGNvbnRleHRfbWVudV8xLCBmcmVlemVfMSwgY29sdW1uX21lbnVfMSwgZXhjZWxfZmlsdGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGRhdGFfMSk7XG4gICAgX19leHBvcnQoc29ydF8xKTtcbiAgICBfX2V4cG9ydChwYWdlXzEpO1xuICAgIF9fZXhwb3J0KHNlbGVjdGlvbl8xKTtcbiAgICBfX2V4cG9ydChmaWx0ZXJfMSk7XG4gICAgX19leHBvcnQoc2VhcmNoXzEpO1xuICAgIF9fZXhwb3J0KHNjcm9sbF8xKTtcbiAgICBfX2V4cG9ydChyZXNpemVfMSk7XG4gICAgX19leHBvcnQocmVvcmRlcl8xKTtcbiAgICBfX2V4cG9ydChyb3dfcmVvcmRlcl8xKTtcbiAgICBfX2V4cG9ydChncm91cF8xKTtcbiAgICBfX2V4cG9ydChwcmludF8xKTtcbiAgICBfX2V4cG9ydChkZXRhaWxfcm93XzEpO1xuICAgIF9fZXhwb3J0KHRvb2xiYXJfMSk7XG4gICAgX19leHBvcnQoYWdncmVnYXRlXzEpO1xuICAgIF9fZXhwb3J0KHZpcnR1YWxfc2Nyb2xsXzEpO1xuICAgIF9fZXhwb3J0KGVkaXRfMSk7XG4gICAgX19leHBvcnQoYmF0Y2hfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChpbmxpbmVfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChub3JtYWxfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChkaWFsb2dfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChjb2x1bW5fY2hvb3Nlcl8xKTtcbiAgICBfX2V4cG9ydChleGNlbF9leHBvcnRfMSk7XG4gICAgX19leHBvcnQocGRmX2V4cG9ydF8xKTtcbiAgICBfX2V4cG9ydChleHBvcnRfaGVscGVyXzEpO1xuICAgIF9fZXhwb3J0KGNsaXBib2FyZF8xKTtcbiAgICBfX2V4cG9ydChjb21tYW5kX2NvbHVtbl8xKTtcbiAgICBfX2V4cG9ydChjaGVja2JveF9maWx0ZXJfMSk7XG4gICAgX19leHBvcnQoY29udGV4dF9tZW51XzEpO1xuICAgIF9fZXhwb3J0KGZyZWV6ZV8xKTtcbiAgICBfX2V4cG9ydChjb2x1bW5fbWVudV8xKTtcbiAgICBfX2V4cG9ydChleGNlbF9maWx0ZXJfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy5qc1xuLy8gbW9kdWxlIGlkID0gNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL3JlbmRlcmVyL3ZpcnR1YWwtY29udGVudC1yZW5kZXJlclwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCB1dGlsXzEsIGNvbnN0YW50XzEsIGVudW1fMSwgdmlydHVhbF9jb250ZW50X3JlbmRlcmVyXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVmlydHVhbFNjcm9sbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFZpcnR1YWxTY3JvbGwocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICd2aXJ0dWFsc2Nyb2xsJztcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUuaW5zdGFudGlhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLmFkZFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkhlYWRlciwgbmV3IHZpcnR1YWxfY29udGVudF9yZW5kZXJlcl8xLlZpcnR1YWxIZWFkZXJSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW5kZXJlci5hZGRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50LCBuZXcgdmlydHVhbF9jb250ZW50X3JlbmRlcmVyXzEuVmlydHVhbENvbnRlbnRSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICB0aGlzLmVuc3VyZVBhZ2VTaXplKCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLmVuc3VyZVBhZ2VTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJvd0hlaWdodCA9IHV0aWxfMS5nZXRSb3dIZWlnaHQodGhpcy5wYXJlbnQuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IH5+KHRoaXMucGFyZW50LmhlaWdodCAvIHJvd0hlaWdodCk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5ibG9ja1NpemUgKiAyO1xuICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MucGFnZVNpemU7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRQcm9wZXJ0aWVzKHsgcGFnZVNldHRpbmdzOiB7IHBhZ2VTaXplOiBzaXplIDwgaGVpZ2h0ID8gaGVpZ2h0IDogc2l6ZSB9IH0sIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5pbml0aWFsTG9hZCwgdGhpcy5pbnN0YW50aWF0ZVJlbmRlcmVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5XaWR0aENoYW5nZWQsIHRoaXMucmVmcmVzaFZpcnR1YWxFbGVtZW50LCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmluaXRpYWxMb2FkLCB0aGlzLmluc3RhbnRpYXRlUmVuZGVyZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5XaWR0aENoYW5nZWQsIHRoaXMucmVmcmVzaFZpcnR1YWxFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUucmVmcmVzaFZpcnR1YWxFbGVtZW50ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBhcmdzLm1vZHVsZSA9PT0gJ3Jlc2l6ZScpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCkucmVmcmVzaFZpcnR1YWxFbGVtZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZpcnR1YWxTY3JvbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxTY3JvbGwgPSBWaXJ0dWFsU2Nyb2xsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvdmlydHVhbC1zY3JvbGwuanNcbi8vIG1vZHVsZSBpZCA9IDUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi9jb250ZW50LXJlbmRlcmVyXCIsIFwiLi9oZWFkZXItcmVuZGVyZXJcIiwgXCIuLi9zZXJ2aWNlcy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXJcIiwgXCIuLi9zZXJ2aWNlcy92aXJ0dWFsLXJvdy1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfZGF0YV8xLCB1dGlsXzEsIGNvbnN0YW50XzEsIGVudW1fMSwgY29udGVudF9yZW5kZXJlcl8xLCBoZWFkZXJfcmVuZGVyZXJfMSwgaW50ZXJzZWN0aW9uX29ic2VydmVyXzEsIHZpcnR1YWxfcm93X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBWaXJ0dWFsQ29udGVudFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFZpcnR1YWxDb250ZW50UmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFZpcnR1YWxDb250ZW50UmVuZGVyZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQsIGxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5wcmV2SGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIF90aGlzLnByZXZlbnRFdmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuYWN0aW9ucyA9IFsnZmlsdGVyaW5nJywgJ3NlYXJjaGluZycsICdncm91cGluZycsICd1bmdyb3VwaW5nJ107XG4gICAgICAgICAgICBfdGhpcy5vZmZzZXRzID0ge307XG4gICAgICAgICAgICBfdGhpcy50bXBPZmZzZXRzID0ge307XG4gICAgICAgICAgICBfdGhpcy52aXJ0dWFsRWxlID0gbmV3IFZpcnR1YWxFbGVtZW50SGFuZGxlcigpO1xuICAgICAgICAgICAgX3RoaXMub2Zmc2V0S2V5cyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5sb2NhdG9yID0gbG9jYXRvcjtcbiAgICAgICAgICAgIF90aGlzLmV2ZW50TGlzdGVuZXIoJ29uJyk7XG4gICAgICAgICAgICBfdGhpcy52Z2VuZXJhdG9yID0gX3RoaXMuZ2VuZXJhdG9yO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5JykuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVuZGVyVGFibGUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS50YWJsZSA9IHRoaXMuZ2V0VGFibGUoKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5jb250ZW50ID0gdGhpcy5jb250ZW50ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUucmVuZGVyV3JhcHBlcigpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnJlbmRlclBsYWNlSG9sZGVyKCk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUud3JhcHBlci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICB2YXIgZGVib3VuY2VFdmVudCA9ICh0aGlzLnBhcmVudC5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlciAmJiAhdGhpcy5wYXJlbnQuZGF0YVNvdXJjZS5kYXRhU291cmNlLm9mZmxpbmUpO1xuICAgICAgICAgICAgdmFyIG9wdCA9IHtcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuY29udGVudCwgcGFnZUhlaWdodDogdGhpcy5nZXRCbG9ja0hlaWdodCgpICogMiwgZGVib3VuY2VFdmVudDogZGVib3VuY2VFdmVudCxcbiAgICAgICAgICAgICAgICBheGVzOiB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/IFsnWCcsICdZJ10gOiBbJ1knXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgaW50ZXJzZWN0aW9uX29ic2VydmVyXzEuSW50ZXJTZWN0aW9uT2JzZXJ2ZXIodGhpcy52aXJ0dWFsRWxlLndyYXBwZXIsIG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckVtcHR5ID0gZnVuY3Rpb24gKHRib2R5KSB7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKDAsIDApO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5zY3JvbGxMaXN0ZW5lciA9IGZ1bmN0aW9uIChzY3JvbGxBcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2ZW50RXZlbnQgfHwgdGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZlbnRFdmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdGhpcy5jb250ZW50ID09PSBlajJfYmFzZV8xLmNsb3Nlc3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJy5lLWNvbnRlbnQnKSB8fCB0aGlzLmNvbnRlbnQgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IHNjcm9sbEFyZ3Muc2VudGluZWw7XG4gICAgICAgICAgICB2YXIgdmlld0luZm8gPSB0aGlzLmdldEluZm9Gcm9tVmlldyhzY3JvbGxBcmdzLmRpcmVjdGlvbiwgaW5mbywgc2Nyb2xsQXJncy5vZmZzZXQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldkluZm8gJiYgKChpbmZvLmF4aXMgPT09ICdZJyAmJiB0aGlzLnByZXZJbmZvLmJsb2NrSW5kZXhlcy50b1N0cmluZygpID09PSB2aWV3SW5mby5ibG9ja0luZGV4ZXMudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICB8fCAoaW5mby5heGlzID09PSAnWCcgJiYgdGhpcy5wcmV2SW5mby5jb2x1bW5JbmRleGVzLnRvU3RyaW5nKCkgPT09IHZpZXdJbmZvLmNvbHVtbkluZGV4ZXMudG9TdHJpbmcoKSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0Q29sdW1uSW5kZXhlc0luVmlldyh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/IHZpZXdJbmZvLmNvbHVtbkluZGV4ZXMgOiBbXSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSB2aWV3SW5mby5sb2FkTmV4dCAmJiAhdmlld0luZm8ubG9hZFNlbGYgPyB2aWV3SW5mby5uZXh0SW5mby5wYWdlIDogdmlld0luZm8ucGFnZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeSh2aWV3SW5mby5ldmVudCwgeyByZXF1ZXN0VHlwZTogJ3ZpcnR1YWxzY3JvbGwnLCB2aXJ0dWFsSW5mbzogdmlld0luZm8gfSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmJsb2NrID0gZnVuY3Rpb24gKGJsaykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmdlbmVyYXRvci5pc0Jsb2NrQXZhaWxhYmxlKGJsayk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldEluZm9Gcm9tVmlldyA9IGZ1bmN0aW9uIChkaXJlY3Rpb24sIGluZm8sIGUpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wQmxvY2tzID0gW107XG4gICAgICAgICAgICB2YXIgaW5mb1R5cGUgPSB7IGRpcmVjdGlvbjogZGlyZWN0aW9uLCBzZW50aW5lbEluZm86IGluZm8sIG9mZnNldHM6IGUgfTtcbiAgICAgICAgICAgIGluZm9UeXBlLnBhZ2UgPSB0aGlzLmdldFBhZ2VGcm9tVG9wKGUudG9wLCBpbmZvVHlwZSk7XG4gICAgICAgICAgICBpbmZvVHlwZS5ibG9ja0luZGV4ZXMgPSB0ZW1wQmxvY2tzID0gdGhpcy52Z2VuZXJhdG9yLmdldEJsb2NrSW5kZXhlcyhpbmZvVHlwZS5wYWdlKTtcbiAgICAgICAgICAgIGluZm9UeXBlLmxvYWRTZWxmID0gIXRoaXMudmdlbmVyYXRvci5pc0Jsb2NrQXZhaWxhYmxlKHRlbXBCbG9ja3NbaW5mb1R5cGUuYmxvY2tdKTtcbiAgICAgICAgICAgIHZhciBibG9ja3MgPSB0aGlzLmVuc3VyZUJsb2NrcyhpbmZvVHlwZSk7XG4gICAgICAgICAgICBpbmZvVHlwZS5ibG9ja0luZGV4ZXMgPSBibG9ja3M7XG4gICAgICAgICAgICBpbmZvVHlwZS5sb2FkTmV4dCA9ICFibG9ja3MuZmlsdGVyKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIHRlbXBCbG9ja3MuaW5kZXhPZih2YWwpID09PSAtMTsgfSlcbiAgICAgICAgICAgICAgICAuZXZlcnkodGhpcy5ibG9jay5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGluZm9UeXBlLmV2ZW50ID0gKGluZm9UeXBlLmxvYWROZXh0IHx8IGluZm9UeXBlLmxvYWRTZWxmKSA/IGNvbnN0YW50XzEubW9kZWxDaGFuZ2VkIDogY29uc3RhbnRfMS5yZWZyZXNoVmlydHVhbEJsb2NrO1xuICAgICAgICAgICAgaW5mb1R5cGUubmV4dEluZm8gPSBpbmZvVHlwZS5sb2FkTmV4dCA/IHsgcGFnZTogTWF0aC5tYXgoMSwgaW5mb1R5cGUucGFnZSArIChkaXJlY3Rpb24gPT09ICdkb3duJyA/IDEgOiAtMSkpIH0gOiB7fTtcbiAgICAgICAgICAgIGluZm9UeXBlLmNvbHVtbkluZGV4ZXMgPSBpbmZvLmF4aXMgPT09ICdYJyA/IHRoaXMudmdlbmVyYXRvci5nZXRDb2x1bW5JbmRleGVzKCkgOiB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5mby5heGlzID09PSAnWCcpIHtcbiAgICAgICAgICAgICAgICBpbmZvVHlwZS5ldmVudCA9IGNvbnN0YW50XzEucmVmcmVzaFZpcnR1YWxCbG9jaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmZvVHlwZTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZW5zdXJlQmxvY2tzID0gZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBpbmZvLmJsb2NrSW5kZXhlc1tpbmZvLmJsb2NrXTtcbiAgICAgICAgICAgIHZhciBtSWR4O1xuICAgICAgICAgICAgdmFyIG9sZCA9IGluZGV4O1xuICAgICAgICAgICAgdmFyIG1heCA9IE1hdGgubWF4O1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSBpbmZvLmRpcmVjdGlvbiA9PT0gJ2Rvd24nID8gW21heChpbmRleCwgMSksICsraW5kZXgsICsraW5kZXhdIDogW21heChpbmRleCAtIDEsIDEpLCBpbmRleCwgaW5kZXggKyAxXTtcbiAgICAgICAgICAgIGluZGV4ZXMgPSBpbmRleGVzLmZpbHRlcihmdW5jdGlvbiAodmFsLCBpbmQpIHsgcmV0dXJuIGluZGV4ZXMuaW5kZXhPZih2YWwpID09PSBpbmQ7IH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldkluZm8uYmxvY2tJbmRleGVzLnRvU3RyaW5nKCkgPT09IGluZGV4ZXMudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluZm8ubG9hZFNlbGYgfHwgKGluZm8uZGlyZWN0aW9uID09PSAnZG93bicgJiYgdGhpcy5pc0VuZEJsb2NrKG9sZCkpKSB7XG4gICAgICAgICAgICAgICAgaW5kZXhlcyA9IHRoaXMudmdlbmVyYXRvci5nZXRCbG9ja0luZGV4ZXMoaW5mby5wYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGV4ZXMuc29tZShmdW5jdGlvbiAodmFsLCBpbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdmFsID09PSBfdGhpcy5nZXRUb3RhbEJsb2NrcygpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbUlkeCA9IGluZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKG1JZHggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGluZGV4ZXMgPSBpbmRleGVzLnNsaWNlKDAsIG1JZHggKyAxKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5mby5ibG9jayA9PT0gMCAmJiBpbmRleGVzLmxlbmd0aCA9PT0gMSAmJiB0aGlzLnZnZW5lcmF0b3IuaXNCbG9ja0F2YWlsYWJsZShpbmRleGVzWzBdIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhlcyA9IFtpbmRleGVzWzBdIC0gMSwgaW5kZXhlc1swXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4ZXM7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmFwcGVuZENvbnRlbnQgPSBmdW5jdGlvbiAodGFyZ2V0LCBuZXdDaGlsZCwgZSkge1xuICAgICAgICAgICAgdmFyIGluZm8gPSBlLnZpcnR1YWxJbmZvO1xuICAgICAgICAgICAgdGhpcy5wcmV2SW5mbyA9IHRoaXMucHJldkluZm8gfHwgZS52aXJ0dWFsSW5mbztcbiAgICAgICAgICAgIHZhciBjQmxvY2sgPSAoaW5mby5jb2x1bW5JbmRleGVzWzBdKSAtIDE7XG4gICAgICAgICAgICB2YXIgY09mZnNldCA9IHRoaXMuZ2V0Q29sdW1uT2Zmc2V0KGNCbG9jayk7XG4gICAgICAgICAgICB2YXIgd2lkdGg7XG4gICAgICAgICAgICB2YXIgYmxvY2tzID0gaW5mby5ibG9ja0luZGV4ZXM7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE9mZnNldHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSB0aGlzLmdldFRyYW5zbGF0ZVkodGhpcy5jb250ZW50LnNjcm9sbFRvcCwgdGhpcy5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCwgaW5mbyk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuYWRqdXN0VGFibGUoY09mZnNldCwgdHJhbnNsYXRlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyLnZpcnR1YWxFbGUuYWRqdXN0VGFibGUoY09mZnNldCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgY0luZGV4ID0gaW5mby5jb2x1bW5JbmRleGVzO1xuICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy5nZXRDb2x1bW5PZmZzZXQoY0luZGV4W2NJbmRleC5sZW5ndGggLSAxXSkgLSB0aGlzLmdldENvbHVtbk9mZnNldChjSW5kZXhbMF0gLSAxKSArICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyLnZpcnR1YWxFbGUuc2V0V3JhcHBlcldpZHRoKHdpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5zZXRXcmFwcGVyV2lkdGgod2lkdGgsIHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uIHx8IGVqMl9iYXNlXzIuQnJvd3Nlci5pc0lFKTtcbiAgICAgICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChuZXdDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkuYXBwZW5kQ2hpbGQodGFyZ2V0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8uZGlyZWN0aW9uID09PSAndXAnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBibGsgPSB0aGlzLm9mZnNldHNbdGhpcy5nZXRUb3RhbEJsb2NrcygpXSAtIHRoaXMucHJldkhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RXZlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc1RvcCA9IHRoaXMuY29udGVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxUb3AgPSBzVG9wICsgYmxrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNldFZpcnR1YWxIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9ic2VydmVyLnNldFBhZ2VIZWlnaHQodGhpcy5nZXRPZmZzZXQoYmxvY2tzW2Jsb2Nrcy5sZW5ndGggLSAxXSkgLSB0aGlzLmdldE9mZnNldChibG9ja3NbMF0gLSAxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXZJbmZvID0gaW5mbztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5vbkRhdGFSZWFkeSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoZS5jb3VudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gZS5jb3VudDtcbiAgICAgICAgICAgICAgICB0aGlzLm1heFBhZ2UgPSBNYXRoLmNlaWwoZS5jb3VudCAvIHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hPZmZzZXRzKCk7XG4gICAgICAgICAgICB0aGlzLnNldFZpcnR1YWxIZWlnaHQoKTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTY3JvbGxQb3NpdGlvbihlLnJlcXVlc3RUeXBlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuc2V0VmlydHVhbEhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID9cbiAgICAgICAgICAgICAgICB0aGlzLmdldENvbHVtbk9mZnNldCh0aGlzLnBhcmVudC5jb2x1bW5zLmxlbmd0aCArIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggLSAxKSArICdweCcgOiAnMTAwJSc7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuc2V0VmlydHVhbEhlaWdodCh0aGlzLm9mZnNldHNbdGhpcy5nZXRUb3RhbEJsb2NrcygpXSwgd2lkdGgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXIudmlydHVhbEVsZS5zZXRWaXJ0dWFsSGVpZ2h0KDEsIHdpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0UGFnZUZyb21Ub3AgPSBmdW5jdGlvbiAoc1RvcCwgaW5mbykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IHRoaXMuZ2V0VG90YWxCbG9ja3MoKTtcbiAgICAgICAgICAgIHZhciBwYWdlID0gMDtcbiAgICAgICAgICAgIHZhciBleHRyYSA9IHRoaXMub2Zmc2V0c1t0b3RhbF0gLSB0aGlzLnByZXZIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLm9mZnNldEtleXMuc29tZShmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGlPZmZzZXQgPSBOdW1iZXIob2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB2YXIgYm9yZGVyID0gc1RvcCA8IF90aGlzLm9mZnNldHNbb2Zmc2V0XSB8fCAoaU9mZnNldCA9PT0gdG90YWwgJiYgc1RvcCA+IF90aGlzLm9mZnNldHNbb2Zmc2V0XSk7XG4gICAgICAgICAgICAgICAgaWYgKGJvcmRlcikge1xuICAgICAgICAgICAgICAgICAgICBpbmZvLmJsb2NrID0gaU9mZnNldCAlIDIgPT09IDAgPyAxIDogMDtcbiAgICAgICAgICAgICAgICAgICAgcGFnZSA9IE1hdGgubWF4KDEsIE1hdGgubWluKF90aGlzLnZnZW5lcmF0b3IuZ2V0UGFnZShpT2Zmc2V0KSwgX3RoaXMubWF4UGFnZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYm9yZGVyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcGFnZTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0VHJhbnNsYXRlWSA9IGZ1bmN0aW9uIChzVG9wLCBjSGVpZ2h0LCBpbmZvKSB7XG4gICAgICAgICAgICBpZiAoaW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaW5mbyA9IHsgcGFnZTogdGhpcy5nZXRQYWdlRnJvbVRvcChzVG9wLCB7fSkgfTtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2NrSW5kZXhlcyA9IHRoaXMudmdlbmVyYXRvci5nZXRCbG9ja0luZGV4ZXMoaW5mby5wYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBibG9jayA9IChpbmZvLmJsb2NrSW5kZXhlc1swXSB8fCAxKSAtIDE7XG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlID0gdGhpcy5nZXRPZmZzZXQoYmxvY2spO1xuICAgICAgICAgICAgdmFyIGVuZFRyYW5zbGF0ZSA9IHRoaXMuZ2V0T2Zmc2V0KGluZm8uYmxvY2tJbmRleGVzW2luZm8uYmxvY2tJbmRleGVzLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2xhdGUgPiBzVG9wID8gdGhpcy5nZXRPZmZzZXQoYmxvY2sgLSAxKSA6IGVuZFRyYW5zbGF0ZSA8IChzVG9wICsgY0hlaWdodCkgPyB0aGlzLmdldE9mZnNldChibG9jayArIDEpIDogdHJhbnNsYXRlO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRPZmZzZXQgPSBmdW5jdGlvbiAoYmxvY2spIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbih0aGlzLm9mZnNldHNbYmxvY2tdIHwgMCwgdGhpcy5vZmZzZXRzW3RoaXMubWF4QmxvY2tdKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUub25FbnRlcmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZWxlbWVudCwgY3VycmVudCwgZGlyZWN0aW9uLCBlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHhBeGlzID0gY3VycmVudC5heGlzID09PSAnWCc7XG4gICAgICAgICAgICAgICAgdmFyIHRvcCA9IF90aGlzLnByZXZJbmZvLm9mZnNldHMgPyBfdGhpcy5wcmV2SW5mby5vZmZzZXRzLnRvcCA6IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IF90aGlzLmNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHZhciB4ID0gX3RoaXMuZ2V0Q29sdW1uT2Zmc2V0KHhBeGlzID8gX3RoaXMudmdlbmVyYXRvci5nZXRDb2x1bW5JbmRleGVzKClbMF0gLSAxIDogX3RoaXMucHJldkluZm8uY29sdW1uSW5kZXhlc1swXSAtIDEpO1xuICAgICAgICAgICAgICAgIHZhciB5ID0gX3RoaXMuZ2V0VHJhbnNsYXRlWShlLnRvcCwgaGVpZ2h0LCB4QXhpcyAmJiB0b3AgPT09IGUudG9wID8gX3RoaXMucHJldkluZm8gOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIF90aGlzLnZpcnR1YWxFbGUuYWRqdXN0VGFibGUoeCwgTWF0aC5taW4oeSwgX3RoaXMub2Zmc2V0c1tfdGhpcy5tYXhCbG9ja10pKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmhlYWRlci52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKHgsIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRbYWN0aW9uXShjb25zdGFudF8xLmRhdGFSZWFkeSwgdGhpcy5vbkRhdGFSZWFkeSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudFthY3Rpb25dKGNvbnN0YW50XzEucmVmcmVzaFZpcnR1YWxCbG9jaywgdGhpcy5yZWZyZXNoQ29udGVudFJvd3MsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5hY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5wYXJlbnRbYWN0aW9uXShldmVudCArIFwiLWJlZ2luXCIsIF90aGlzLm9uQWN0aW9uQmVnaW4sIF90aGlzKTsgfSk7XG4gICAgICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub2JzZXJ2ZXIub2JzZXJ2ZShmdW5jdGlvbiAoc2Nyb2xsQXJncykgeyByZXR1cm4gX3RoaXMuc2Nyb2xsTGlzdGVuZXIoc2Nyb2xsQXJncyk7IH0sIF90aGlzLm9uRW50ZXJlZCgpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuY29udGVudFJlYWR5LCBmbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jb250ZW50UmVhZHksIGZuLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0QmxvY2tTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSA+PiAxO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRCbG9ja0hlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEJsb2NrU2l6ZSgpICogdXRpbF8xLmdldFJvd0hlaWdodCgpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5pc0VuZEJsb2NrID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgdG90YWxCbG9ja3MgPSB0aGlzLmdldFRvdGFsQmxvY2tzKCk7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXggPj0gdG90YWxCbG9ja3MgfHwgaW5kZXggPT09IHRvdGFsQmxvY2tzIC0gMTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0VG90YWxCbG9ja3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMuY291bnQgLyB0aGlzLmdldEJsb2NrU2l6ZSgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0Q29sdW1uT2Zmc2V0ID0gZnVuY3Rpb24gKGJsb2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52Z2VuZXJhdG9yLmNPZmZzZXRzW2Jsb2NrXSB8IDA7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldE1vZGVsR2VuZXJhdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB2aXJ0dWFsX3Jvd19tb2RlbF9nZW5lcmF0b3JfMS5WaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5yZXNldFNjcm9sbFBvc2l0aW9uID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aW9ucy5zb21lKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPT09IGFjdGlvbjsgfSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZlbnRFdmVudCA9IHRoaXMuY29udGVudC5zY3JvbGxUb3AgIT09IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnNjcm9sbFRvcCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLm9uQWN0aW9uQmVnaW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0UHJvcGVydGllcyh7IHBhZ2VTZXR0aW5nczogeyBjdXJyZW50UGFnZTogMSB9IH0sIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmdlbmVyYXRvci5nZXRSb3dzKCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFJvd0J5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBwcmV2ID0gdGhpcy5wcmV2SW5mby5ibG9ja0luZGV4ZXM7XG4gICAgICAgICAgICB2YXIgc3RhcnRJZHggPSAocHJldlswXSAtIDEpICogdGhpcy5nZXRCbG9ja1NpemUoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW2luZGV4IC0gc3RhcnRJZHhdO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoT2Zmc2V0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcm93ID0gMDtcbiAgICAgICAgICAgIHZhciBiU2l6ZSA9IHRoaXMuZ2V0QmxvY2tTaXplKCk7XG4gICAgICAgICAgICB2YXIgdG90YWwgPSB0aGlzLmdldFRvdGFsQmxvY2tzKCk7XG4gICAgICAgICAgICB0aGlzLnByZXZIZWlnaHQgPSB0aGlzLm9mZnNldHNbdG90YWxdO1xuICAgICAgICAgICAgdGhpcy5tYXhCbG9jayA9IHRvdGFsICUgMiA9PT0gMCA/IHRvdGFsIC0gMiA6IHRvdGFsIC0gMTtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0cyA9IHt9O1xuICAgICAgICAgICAgQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkodG90YWwpKS5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gKytyb3c7IH0pXG4gICAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRtcCA9IChfdGhpcy52Z2VuZXJhdG9yLmNhY2hlW2Jsb2NrXSB8fCBbXSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciByZW0gPSBfdGhpcy5jb3VudCAlIGJTaXplO1xuICAgICAgICAgICAgICAgIHZhciBzaXplID0gYmxvY2sgaW4gX3RoaXMudmdlbmVyYXRvci5jYWNoZSA/XG4gICAgICAgICAgICAgICAgICAgIHRtcCAqIHV0aWxfMS5nZXRSb3dIZWlnaHQoKSA6IHJlbSAmJiBibG9jayA9PT0gdG90YWwgPyByZW0gKiB1dGlsXzEuZ2V0Um93SGVpZ2h0KCkgOiBfdGhpcy5nZXRCbG9ja0hlaWdodCgpO1xuICAgICAgICAgICAgICAgIF90aGlzLm9mZnNldHNbYmxvY2tdID0gKF90aGlzLm9mZnNldHNbYmxvY2sgLSAxXSB8IDApICsgc2l6ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy50bXBPZmZzZXRzW2Jsb2NrXSA9IF90aGlzLm9mZnNldHNbYmxvY2sgLSAxXSB8IDA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0S2V5cyA9IE9iamVjdC5rZXlzKHRoaXMub2Zmc2V0cyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZnZW5lcmF0b3IucmVmcmVzaENvbE9mZnNldHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaFZpcnR1YWxFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy52Z2VuZXJhdG9yLnJlZnJlc2hDb2xPZmZzZXRzKCk7XG4gICAgICAgICAgICB0aGlzLnNldFZpcnR1YWxIZWlnaHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZpcnR1YWxDb250ZW50UmVuZGVyZXI7XG4gICAgfShjb250ZW50X3JlbmRlcmVyXzEuQ29udGVudFJlbmRlcikpO1xuICAgIGV4cG9ydHMuVmlydHVhbENvbnRlbnRSZW5kZXJlciA9IFZpcnR1YWxDb250ZW50UmVuZGVyZXI7XG4gICAgdmFyIFZpcnR1YWxIZWFkZXJSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhWaXJ0dWFsSGVhZGVyUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFZpcnR1YWxIZWFkZXJSZW5kZXJlcihwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgbG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnZpcnR1YWxFbGUgPSBuZXcgVmlydHVhbEVsZW1lbnRIYW5kbGVyKCk7XG4gICAgICAgICAgICBfdGhpcy5nZW4gPSBuZXcgdmlydHVhbF9yb3dfbW9kZWxfZ2VuZXJhdG9yXzEuVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yKF90aGlzLnBhcmVudCk7XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5yZWZyZXNoVmlydHVhbEJsb2NrLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS52aXJ0dWFsSW5mby5zZW50aW5lbEluZm8uYXhpcyA9PT0gJ1gnID8gX3RoaXMucmVmcmVzaFVJKCkgOiBudWxsOyB9LCBfdGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbEhlYWRlclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VuLnJlZnJlc2hDb2xPZmZzZXRzKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRDb2x1bW5JbmRleGVzSW5WaWV3KHRoaXMuZ2VuLmdldENvbHVtbkluZGV4ZXModGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQpKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVuZGVyVGFibGUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS50YWJsZSA9IHRoaXMuZ2V0VGFibGUoKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5jb250ZW50ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuY29udGVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUucmVuZGVyV3JhcHBlcigpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnJlbmRlclBsYWNlSG9sZGVyKCdhYnNvbHV0ZScpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsSGVhZGVyUmVuZGVyZXIucHJvdG90eXBlLmFwcGVuZENvbnRlbnQgPSBmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS53cmFwcGVyLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEhlYWRlclJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoVUkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmdlbi5yZWZyZXNoQ29sT2Zmc2V0cygpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0Q29sdW1uSW5kZXhlc0luVmlldyh0aGlzLmdlbi5nZXRDb2x1bW5JbmRleGVzKHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkKSk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlZnJlc2hVSS5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmlydHVhbEhlYWRlclJlbmRlcmVyO1xuICAgIH0oaGVhZGVyX3JlbmRlcmVyXzEuSGVhZGVyUmVuZGVyKSk7XG4gICAgZXhwb3J0cy5WaXJ0dWFsSGVhZGVyUmVuZGVyZXIgPSBWaXJ0dWFsSGVhZGVyUmVuZGVyZXI7XG4gICAgdmFyIFZpcnR1YWxFbGVtZW50SGFuZGxlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFZpcnR1YWxFbGVtZW50SGFuZGxlcigpIHtcbiAgICAgICAgfVxuICAgICAgICBWaXJ0dWFsRWxlbWVudEhhbmRsZXIucHJvdG90eXBlLnJlbmRlcldyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS12aXJ0dWFsdGFibGUnIH0pO1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMudGFibGUpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50LmFwcGVuZENoaWxkKHRoaXMud3JhcHBlcik7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxFbGVtZW50SGFuZGxlci5wcm90b3R5cGUucmVuZGVyUGxhY2VIb2xkZXIgPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gdm9pZCAwKSB7IHBvc2l0aW9uID0gJ3JlbGF0aXZlJzsgfVxuICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXZpcnR1YWx0cmFjaycsIHN0eWxlczogXCJwb3NpdGlvbjpcIiArIHBvc2l0aW9uIH0pO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50LmFwcGVuZENoaWxkKHRoaXMucGxhY2Vob2xkZXIpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsRWxlbWVudEhhbmRsZXIucHJvdG90eXBlLmFkanVzdFRhYmxlID0gZnVuY3Rpb24gKHhWYWx1ZSwgeVZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoXCIgKyB4VmFsdWUgKyBcInB4LCBcIiArIHlWYWx1ZSArIFwicHgpXCI7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxFbGVtZW50SGFuZGxlci5wcm90b3R5cGUuc2V0V3JhcHBlcldpZHRoID0gZnVuY3Rpb24gKHdpZHRoLCBmdWxsKSB7XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUud2lkdGggPSB3aWR0aCA/IHdpZHRoICsgXCJweFwiIDogZnVsbCA/ICcxMDAlJyA6ICcnO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsRWxlbWVudEhhbmRsZXIucHJvdG90eXBlLnNldFZpcnR1YWxIZWlnaHQgPSBmdW5jdGlvbiAoaGVpZ2h0LCB3aWR0aCkge1xuICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlci5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyLnN0eWxlLndpZHRoID0gd2lkdGg7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsRWxlbWVudEhhbmRsZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxFbGVtZW50SGFuZGxlciA9IFZpcnR1YWxFbGVtZW50SGFuZGxlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci92aXJ0dWFsLWNvbnRlbnQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDUyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBJbnRlclNlY3Rpb25PYnNlcnZlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEludGVyU2VjdGlvbk9ic2VydmVyKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmZyb21XaGVlbCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy50b3VjaE1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5zZW50aW5lbEluZm8gPSB7XG4gICAgICAgICAgICAgICAgJ3VwJzoge1xuICAgICAgICAgICAgICAgICAgICBjaGVjazogZnVuY3Rpb24gKHJlY3QsIGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSByZWN0LnRvcCAtIF90aGlzLmNvbnRhaW5lclJlY3QudG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5lbnRlcmVkID0gdG9wID49IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9wICsgKF90aGlzLm9wdGlvbnMucGFnZUhlaWdodCAvIDIpID49IDA7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGF4aXM6ICdZJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ2Rvd24nOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAocmVjdCwgaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNIZWlnaHQgPSBfdGhpcy5vcHRpb25zLmNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gcmVjdC5ib3R0b207XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmVudGVyZWQgPSByZWN0LmJvdHRvbSA8PSBfdGhpcy5jb250YWluZXJSZWN0LmJvdHRvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b3AgLSAoX3RoaXMub3B0aW9ucy5wYWdlSGVpZ2h0IC8gMikgPD0gX3RoaXMub3B0aW9ucy5wYWdlSGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgfSwgYXhpczogJ1knXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAncmlnaHQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAocmVjdCwgaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gcmVjdC5yaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uZW50ZXJlZCA9IHJpZ2h0IDwgX3RoaXMuY29udGFpbmVyUmVjdC5yaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByaWdodCAtIF90aGlzLmNvbnRhaW5lclJlY3Qud2lkdGggPD0gX3RoaXMuY29udGFpbmVyUmVjdC5yaWdodDtcbiAgICAgICAgICAgICAgICAgICAgfSwgYXhpczogJ1gnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnbGVmdCc6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChyZWN0LCBpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IHJlY3QubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uZW50ZXJlZCA9IGxlZnQgPiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxlZnQgKyBfdGhpcy5jb250YWluZXJSZWN0LndpZHRoID49IF90aGlzLmNvbnRhaW5lclJlY3QubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgfSwgYXhpczogJ1gnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIEludGVyU2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBvbkVudGVyQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lclJlY3QgPSB0aGlzLm9wdGlvbnMuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMub3B0aW9ucy5jb250YWluZXIsICd3aGVlbCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmZyb21XaGVlbCA9IHRydWU7IH0sIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMub3B0aW9ucy5jb250YWluZXIsICdzY3JvbGwnLCB0aGlzLnZpcnR1YWxTY3JvbGxIYW5kbGVyKGNhbGxiYWNrLCBvbkVudGVyQ2FsbGJhY2spLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJTZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgdmFyIGluZm8gPSB0aGlzLnNlbnRpbmVsSW5mb1tkaXJlY3Rpb25dO1xuICAgICAgICAgICAgcmV0dXJuIGluZm8uY2hlY2sodGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBpbmZvKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJTZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLnZpcnR1YWxTY3JvbGxIYW5kbGVyID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBvbkVudGVyQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcHJldlRvcCA9IDA7XG4gICAgICAgICAgICB2YXIgcHJldkxlZnQgPSAwO1xuICAgICAgICAgICAgdmFyIGRlYm91bmNlZDEwMCA9IGVqMl9iYXNlXzIuZGVib3VuY2UoY2FsbGJhY2ssIDEwMCk7XG4gICAgICAgICAgICB2YXIgZGVib3VuY2VkNTAgPSBlajJfYmFzZV8yLmRlYm91bmNlKGNhbGxiYWNrLCA1MCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9wID0gZS50YXJnZXQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gZS50YXJnZXQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gcHJldlRvcCA8IHRvcCA/ICdkb3duJyA6ICd1cCc7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gcHJldkxlZnQgPT09IGxlZnQgPyBkaXJlY3Rpb24gOiBwcmV2TGVmdCA8IGxlZnQgPyAncmlnaHQnIDogJ2xlZnQnO1xuICAgICAgICAgICAgICAgIHByZXZUb3AgPSB0b3A7XG4gICAgICAgICAgICAgICAgcHJldkxlZnQgPSBsZWZ0O1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gX3RoaXMuc2VudGluZWxJbmZvW2RpcmVjdGlvbl07XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuYXhlcy5pbmRleE9mKGN1cnJlbnQuYXhpcykgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrID0gX3RoaXMuY2hlY2soZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5lbnRlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uRW50ZXJDYWxsYmFjayhfdGhpcy5lbGVtZW50LCBjdXJyZW50LCBkaXJlY3Rpb24sIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjaGVjaykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm4gPSBfdGhpcy5mcm9tV2hlZWwgPyBfdGhpcy5vcHRpb25zLmRlYm91bmNlRXZlbnQgPyBkZWJvdW5jZWQxMDAgOiBjYWxsYmFjayA6IGRlYm91bmNlZDEwMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuYXhpcyA9PT0gJ1gnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbiA9IGRlYm91bmNlZDUwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZuKHsgZGlyZWN0aW9uOiBkaXJlY3Rpb24sIHNlbnRpbmVsOiBjdXJyZW50LCBvZmZzZXQ6IHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuZnJvbVdoZWVsID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBJbnRlclNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuc2V0UGFnZUhlaWdodCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnBhZ2VIZWlnaHQgPSB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEludGVyU2VjdGlvbk9ic2VydmVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5JbnRlclNlY3Rpb25PYnNlcnZlciA9IEludGVyU2VjdGlvbk9ic2VydmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL2ludGVyc2VjdGlvbi1vYnNlcnZlci5qc1xuLy8gbW9kdWxlIGlkID0gNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yXCIsIFwiLi4vc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xLCBncm91cF9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5jT2Zmc2V0cyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuICAgICAgICAgICAgdGhpcy5kYXRhID0ge307XG4gICAgICAgICAgICB0aGlzLmdyb3VwcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5yb3dNb2RlbEdlbmVyYXRvciA9IHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcgPyBuZXcgZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCkgOiBuZXcgcm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgfVxuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChkYXRhLCBub3RpZnlBcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGluZm8gPSBub3RpZnlBcmdzLnZpcnR1YWxJbmZvID0gbm90aWZ5QXJncy52aXJ0dWFsSW5mbyB8fCB0aGlzLmdldERhdGEoKTtcbiAgICAgICAgICAgIHZhciB4QXhpcyA9IGluZm8uc2VudGluZWxJbmZvICYmIGluZm8uc2VudGluZWxJbmZvLmF4aXMgPT09ICdYJztcbiAgICAgICAgICAgIHZhciBwYWdlID0gIXhBeGlzICYmIGluZm8ubG9hZE5leHQgJiYgIWluZm8ubG9hZFNlbGYgPyBpbmZvLm5leHRJbmZvLnBhZ2UgOiBpbmZvLnBhZ2U7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgICB2YXIgY2VudGVyID0gfn4odGhpcy5tb2RlbC5wYWdlU2l6ZSAvIDIpO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLmdldEJsb2NrSW5kZXhlcyhwYWdlKTtcbiAgICAgICAgICAgIHZhciBsb2FkZWRCbG9ja3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBbmRSZXNldENhY2hlKG5vdGlmeUFyZ3MucmVxdWVzdFR5cGUpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaW5mby5ibG9ja0luZGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzQmxvY2tBdmFpbGFibGUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYWNoZVt2YWx1ZV0gPSBfdGhpcy5yb3dNb2RlbEdlbmVyYXRvci5yZWZyZXNoUm93cyhfdGhpcy5jYWNoZVt2YWx1ZV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmZvLmJsb2NrSW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNCbG9ja0F2YWlsYWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd3MgPSBfdGhpcy5yb3dNb2RlbEdlbmVyYXRvci5nZW5lcmF0ZVJvd3MoZGF0YSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlydHVhbEluZm86IGluZm8sIHN0YXJ0SW5kZXg6IF90aGlzLmdldFN0YXJ0SW5kZXgodmFsdWUsIGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVkaWFuID0gfn5NYXRoLm1heChyb3dzLmxlbmd0aCwgX3RoaXMubW9kZWwucGFnZVNpemUpIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKGluZGV4ZXNbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYWNoZVtpbmRleGVzWzBdXSA9IHJvd3Muc2xpY2UoMCwgbWVkaWFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzQmxvY2tBdmFpbGFibGUoaW5kZXhlc1sxXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNhY2hlW2luZGV4ZXNbMV1dID0gcm93cy5zbGljZShtZWRpYW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCAmJiAheEF4aXMgJiYgX3RoaXMuY2FjaGVbdmFsdWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNhY2hlW3ZhbHVlXSA9IF90aGlzLnVwZGF0ZUdyb3VwUm93KF90aGlzLmNhY2hlW3ZhbHVlXSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaC5hcHBseShyZXN1bHQsIF90aGlzLmNhY2hlW3ZhbHVlXSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzQmxvY2tBdmFpbGFibGUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRlZEJsb2Nrcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGluZm8uYmxvY2tJbmRleGVzID0gbG9hZGVkQmxvY2tzO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRCbG9ja0luZGV4ZXMgPSBmdW5jdGlvbiAocGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuIFtwYWdlICsgKHBhZ2UgLSAxKSwgcGFnZSAqIDJdO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldFBhZ2UgPSBmdW5jdGlvbiAoYmxvY2spIHtcbiAgICAgICAgICAgIHJldHVybiBibG9jayAlIDIgPT09IDAgPyBibG9jayAvIDIgOiAoYmxvY2sgKyAxKSAvIDI7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuaXNCbG9ja0F2YWlsYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlIGluIHRoaXMuY2FjaGU7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcGFnZTogdGhpcy5tb2RlbC5jdXJyZW50UGFnZSxcbiAgICAgICAgICAgICAgICBibG9ja0luZGV4ZXM6IHRoaXMuZ2V0QmxvY2tJbmRleGVzKHRoaXMubW9kZWwuY3VycmVudFBhZ2UpLFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ2Rvd24nLFxuICAgICAgICAgICAgICAgIGNvbHVtbkluZGV4ZXM6IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRTdGFydEluZGV4ID0gZnVuY3Rpb24gKGJsaywgZGF0YSwgZnVsbCkge1xuICAgICAgICAgICAgaWYgKGZ1bGwgPT09IHZvaWQgMCkgeyBmdWxsID0gdHJ1ZTsgfVxuICAgICAgICAgICAgdmFyIHBhZ2UgPSB0aGlzLmdldFBhZ2UoYmxrKTtcbiAgICAgICAgICAgIHZhciBldmVuID0gYmxrICUgMiA9PT0gMDtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IChwYWdlIC0gMSkgKiB0aGlzLm1vZGVsLnBhZ2VTaXplO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bGwgfHwgIWV2ZW4gPyBpbmRleCA6IGluZGV4ICsgfn4odGhpcy5tb2RlbC5wYWdlU2l6ZSAvIDIpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldENvbHVtbkluZGV4ZXMgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChjb250ZW50ID09PSB2b2lkIDApIHsgY29udGVudCA9IHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkOyB9XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIHNMZWZ0ID0gY29udGVudC5zY3JvbGxMZWZ0IHwgMDtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5jT2Zmc2V0cyk7XG4gICAgICAgICAgICB2YXIgY1dpZHRoID0gY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgIHNMZWZ0ID0gTWF0aC5taW4odGhpcy5jT2Zmc2V0c1trZXlzLmxlbmd0aCAtIDFdIC0gY1dpZHRoLCBzTGVmdCk7XG4gICAgICAgICAgICB2YXIgY2FsV2lkdGggPSBlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgPyAyICogY1dpZHRoIDogY1dpZHRoIC8gMjtcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gc0xlZnQgKyBjV2lkdGggKyAoc0xlZnQgPT09IDAgPyBjYWxXaWR0aCA6IDApO1xuICAgICAgICAgICAga2V5cy5zb21lKGZ1bmN0aW9uIChvZmZzZXQsIGluZHgsIGlucHV0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGlPZmZzZXQgPSBOdW1iZXIob2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0VmFsID0gX3RoaXMuY09mZnNldHNbb2Zmc2V0XTtcbiAgICAgICAgICAgICAgICB2YXIgYm9yZGVyID0gc0xlZnQgLSBjYWxXaWR0aCA8PSBvZmZzZXRWYWwgJiYgbGVmdCArIGNhbFdpZHRoID49IG9mZnNldFZhbDtcbiAgICAgICAgICAgICAgICBpZiAoYm9yZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxlZnQgKyBjYWxXaWR0aCA8IG9mZnNldFZhbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4ZXM7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuY2hlY2tBbmRSZXNldENhY2hlID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgdmFyIGNsZWFyID0gWydwYWdpbmcnLCAncmVmcmVzaCcsICdzb3J0aW5nJywgJ2ZpbHRlcmluZycsICdzZWFyY2hpbmcnLCAnZ3JvdXBpbmcnLCAndW5ncm91cGluZyddXG4gICAgICAgICAgICAgICAgLnNvbWUoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBhY3Rpb24gPT09IHZhbHVlOyB9KTtcbiAgICAgICAgICAgIGlmIChjbGVhcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmdyb3VwcyA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNsZWFyO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLnJlZnJlc2hDb2xPZmZzZXRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb2wgPSAwO1xuICAgICAgICAgICAgdGhpcy5jT2Zmc2V0cyA9IHt9O1xuICAgICAgICAgICAgdmFyIGdMZW4gPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGNMZW4gPSBjb2xzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBpc1Zpc2libGUgPSBmdW5jdGlvbiAoY29sdW1uKSB7IHJldHVybiBjb2x1bW4udmlzaWJsZSAmJlxuICAgICAgICAgICAgICAgICghX3RoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3Muc2hvd0dyb3VwZWRDb2x1bW4gPyBfdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uLmZpZWxkKSA8IDAgOiBjb2x1bW4udmlzaWJsZSk7IH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoYywgbikgeyByZXR1cm4gX3RoaXMuY09mZnNldHNbbl0gPSAoX3RoaXMuY09mZnNldHNbbiAtIDFdIHwgMCkgKyAzMDsgfSk7XG4gICAgICAgICAgICBBcnJheS5hcHBseShudWxsLCBBcnJheShjTGVuKSkubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbCsrOyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChibG9jaywgaSkge1xuICAgICAgICAgICAgICAgIGJsb2NrID0gYmxvY2sgKyBnTGVuO1xuICAgICAgICAgICAgICAgIF90aGlzLmNPZmZzZXRzW2Jsb2NrXSA9IChfdGhpcy5jT2Zmc2V0c1tibG9jayAtIDFdIHwgMCkgKyAoaXNWaXNpYmxlKGNvbHNbaV0pID8gcGFyc2VJbnQoY29sc1tpXS53aWR0aCwgMTApIDogMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS51cGRhdGVHcm91cFJvdyA9IGZ1bmN0aW9uIChjdXJyZW50LCBibG9jaykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjdXJyZW50Rmlyc3QgPSBjdXJyZW50WzBdO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY2FjaGUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGlmIChOdW1iZXIoa2V5KSA8IGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3MgPSByb3dzLmNvbmNhdChfdGhpcy5jYWNoZVtrZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICgoY3VycmVudEZpcnN0ICYmIGN1cnJlbnRGaXJzdC5pc0RhdGFSb3cpIHx8IGJsb2NrICUgMiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0ZUdyb3VwKGN1cnJlbnQsIHJvd3MpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLml0ZXJhdGVHcm91cCA9IGZ1bmN0aW9uIChjdXJyZW50LCByb3dzKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudEZpcnN0ID0gY3VycmVudFswXTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRGaXJzdCAmJiBjdXJyZW50Rmlyc3QuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaXNQcmVzZW50ID0gY3VycmVudC5zb21lKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcm93cy5zb21lKGZ1bmN0aW9uIChvUm93LCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gb1JvdyAmJiBvUm93LmRhdGEuZmllbGQgIT09IHVuZGVmaW5lZCAmJiBvUm93LmRhdGEuZmllbGQgPT09IHJvdy5kYXRhLmZpZWxkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBvUm93LmRhdGEua2V5ID09PSByb3cuZGF0YS5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpc1ByZXNlbnQpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50LnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IHRoaXMuaXRlcmF0ZUdyb3VwKGN1cnJlbnQsIHJvd3Muc2xpY2Uob2Zmc2V0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmNhY2hlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHJvd3MgPSByb3dzLmNvbmNhdChfdGhpcy5jYWNoZVtrZXldKTsgfSk7XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yID0gVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3ZpcnR1YWwtcm93LW1vZGVsLWdlbmVyYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gNTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzLCBhcmlhX3NlcnZpY2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU29ydCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNvcnQocGFyZW50LCBzb3J0U2V0dGluZ3MsIHNvcnRlZENvbHVtbnMsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pc01vZGVsQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFyaWEgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MgPSBzb3J0U2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLnNvcnRlZENvbHVtbnMgPSBzb3J0ZWRDb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5mb2N1cyA9IGxvY2F0b3IuZ2V0U2VydmljZSgnZm9jdXMnKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNvcnRlZENvbHVtbiA9IHsgZmllbGQ6IHRoaXMuY29sdW1uTmFtZSwgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbiB9O1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgdmFyIGdDb2xzID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc011bHRpU29ydCkge1xuICAgICAgICAgICAgICAgIGlmICghZ0NvbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMgPSBbc29ydGVkQ29sdW1uXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ZWRDb2xzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnQ29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmdldFNvcnRlZENvbHNJbmRleEJ5RmllbGQoZ0NvbHNbaV0sIHNvcnRlZENvbHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uTmFtZSA9PT0gZ0NvbHNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWRDb2xzLnB1c2goc29ydGVkQ29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzQ29sID0gdGhpcy5nZXRTb3J0Q29sdW1uRnJvbUZpZWxkKGdDb2xzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWRDb2xzLnB1c2goeyBmaWVsZDogc0NvbC5maWVsZCwgZGlyZWN0aW9uOiBzQ29sLmRpcmVjdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZENvbHMucHVzaChzb3J0ZWRDb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMgPSBzb3J0ZWRDb2xzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5nZXRTb3J0ZWRDb2xzSW5kZXhCeUZpZWxkKHRoaXMuY29sdW1uTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1uc1tpbmRleF0gPSBzb3J0ZWRDb2x1bW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLnB1c2goc29ydGVkQ29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICAgICAgdGhpcy5sYXN0U29ydGVkQ29sID0gdGhpcy5jb2x1bW5OYW1lO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gIXRoaXMuaXNSZW1vdmUgPyB7XG4gICAgICAgICAgICAgICAgY29sdW1uTmFtZTogdGhpcy5jb2x1bW5OYW1lLCBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLCByZXF1ZXN0VHlwZTogJ3NvcnRpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0gOiB7IHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZSB9O1xuICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzIuZXh0ZW5kKGUsIGFyZ3MpKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuc29ydENvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBkaXJlY3Rpb24sIGlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoY29sdW1uTmFtZSkuYWxsb3dTb3J0aW5nID09PSBmYWxzZSB8fCB0aGlzLnBhcmVudC5pc0NvbnRleHRNZW51T3BlbigpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFnT2JqLmFsbG93TXVsdGlTb3J0aW5nKSB7XG4gICAgICAgICAgICAgICAgaXNNdWx0aVNvcnQgPSBnT2JqLmFsbG93TXVsdGlTb3J0aW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3Rpb25QcmV2ZW50KCkpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnNvcnRDb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIGFyZzE6IGNvbHVtbk5hbWUsIGFyZzI6IGRpcmVjdGlvbiwgYXJnMzogaXNNdWx0aVNvcnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbHVtbk5hbWUgPSBjb2x1bW5OYW1lO1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTb3J0ID0gaXNNdWx0aVNvcnQ7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU29ydGVkQ29scyhjb2x1bW5OYW1lLCBpc011bHRpU29ydCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnVwZGF0ZVNvcnRlZENvbHMgPSBmdW5jdGlvbiAoY29sdW1uTmFtZSwgaXNNdWx0aVNvcnQpIHtcbiAgICAgICAgICAgIGlmICghaXNNdWx0aVNvcnQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5zb3J0ZWRDb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YodGhpcy5zb3J0ZWRDb2x1bW5zW2ldKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRlZENvbHVtbnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbi0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zLnNwbGljZSgwLCB0aGlzLnNvcnRlZENvbHVtbnMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zb3J0ZWRDb2x1bW5zLmluZGV4T2YoY29sdW1uTmFtZSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zLnB1c2goY29sdW1uTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb250ZW50UmVmcmVzaCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPyB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IHRoaXMuY29sdW1uTmFtZSwgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbiwgcmVxdWVzdFR5cGU6ICdzb3J0aW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgfSA6IHsgcmVxdWVzdFR5cGU6ICdzb3J0aW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luIH07XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0SWNvbnMoKTtcbiAgICAgICAgICAgIHRoaXMuYWRkU29ydEljb25zKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmNsZWFyU29ydGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdXRpbF8xLmdldEFjdHVhbFByb3BGcm9tQ29sbCh0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aW9uUHJldmVudCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMuY2xlYXJTb3J0aW5nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0Q29sdW1uKGNvbHNbaV0uZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5pc0FjdGlvblByZXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLmlzQWN0aW9uUHJldmVudCh0aGlzLnBhcmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnJlbW92ZVNvcnRDb2x1bW4gPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FjdGlvblByZXZlbnQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnJlbW92ZVNvcnRDb2x1bW4sIGFyZzE6IGZpZWxkIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nICYmIGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zLnNwbGljZSh0aGlzLnNvcnRlZENvbHVtbnMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RlbENoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdzb3J0aW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFkZFNvcnRJY29ucygpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5nZXRTb3J0ZWRDb2xzSW5kZXhCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkLCBzb3J0ZWRDb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHNvcnRlZENvbHVtbnMgPyBzb3J0ZWRDb2x1bW5zIDogdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnc29ydCc7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmluaXRpYWxFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoICYmIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5pc011bHRpU29ydCA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID4gMTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5zb3J0U2V0dGluZ3MuY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc29ydGVkQ29sdW1ucy5pbmRleE9mKGNvbC5maWVsZCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0Q29sdW1uKGNvbC5maWVsZCwgY29sLmRpcmVjdGlvbiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5pc011bHRpU29ydCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5zb3J0Q29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVmcmVzaFNvcnRJY29ucywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc2VkLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuc29ydENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzZWQpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pc01vZGVsQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykucXVlcnlTZWxlY3RvckFsbCgnLmUtc29ydGRpcmVjdCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJTb3J0aW5nKCk7XG4gICAgICAgICAgICB0aGlzLmlzTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wb3BVcENsaWNrSGFuZGxlcihlKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZS50YXJnZXQsICcuZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JwdG9nZ2xlYnRuJykgJiZcbiAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXN0YWNrZWRoZWFkZXJjZWxsJykgJiZcbiAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXN0YWNrZWRoZWFkZXJjZWxsZGl2JykgJiZcbiAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJoYW5kbGVyJykgJiZcbiAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNvbHVtbm1lbnUnKSAmJlxuICAgICAgICAgICAgICAgICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZmlsdGVybWVudWRpdicpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgY29sT2JqID0gZ09iai5nZXRDb2x1bW5CeVVpZCh0YXJnZXQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAhdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFzY2VuZGluZycpLmxlbmd0aCA/ICdhc2NlbmRpbmcnIDpcbiAgICAgICAgICAgICAgICAgICAgJ2Rlc2NlbmRpbmcnO1xuICAgICAgICAgICAgICAgIGlmIChjb2xPYmoudHlwZSAhPT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYXRlU29ydCh0YXJnZXQsIGUsIGNvbE9iaik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BvcFVwKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5rZXlQcmVzc2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuaXNFZGl0ICYmIChlLmFjdGlvbiA9PT0gJ2VudGVyJyB8fCBlLmFjdGlvbiA9PT0gJ2N0cmxFbnRlcicgfHwgZS5hY3Rpb24gPT09ICdzaGlmdEVudGVyJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5mb2N1cy5nZXRGb2N1c2VkRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0IHx8ICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNlbGwnKSB8fCAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyB8fCB0aGlzLnBhcmVudC5mcm96ZW5Sb3dzKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZCh0YXJnZXQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhdGVTb3J0KHRhcmdldCwgZSwgY29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuaW5pdGlhdGVTb3J0ID0gZnVuY3Rpb24gKHRhcmdldCwgZSwgY29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGZpZWxkID0gY29sdW1uLmZpZWxkO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICF0YXJnZXQucXVlcnlTZWxlY3RvckFsbCgnLmUtYXNjZW5kaW5nJykubGVuZ3RoID8gJ2FzY2VuZGluZycgOlxuICAgICAgICAgICAgICAgICdkZXNjZW5kaW5nJztcbiAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5IHx8ICh0aGlzLnNvcnRTZXR0aW5ncy5hbGxvd1Vuc29ydCAmJiB0YXJnZXQucXVlcnlTZWxlY3RvckFsbCgnLmUtZGVzY2VuZGluZycpLmxlbmd0aClcbiAgICAgICAgICAgICAgICAmJiAhKGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoZmllbGQpID4gLTEpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0Q29sdW1uKGZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc29ydENvbHVtbihmaWVsZCwgZGlyZWN0aW9uLCBlLmN0cmxLZXkgfHwgdGhpcy5lbmFibGVTb3J0TXVsdGlUb3VjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnNob3dQb3BVcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGUudGFyZ2V0LCAnLmUtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldCkgfHwgdGhpcy5wYXJlbnQuaXNDb250ZXh0TWVudU9wZW4oKSkge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5zZXRDc3NJbkdyaWRQb3BVcCh0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLCBlLCAnZS1zb3J0ZGlyZWN0IGUtaWNvbnMgZS1pY29uLXNvcnRkaXJlY3QnICsgKHRoaXMuc29ydGVkQ29sdW1ucy5sZW5ndGggPiAxID8gJyBlLXNwYW5jbGlja2VkJyA6ICcnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnBvcFVwQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmNsb3Nlc3QodGFyZ2V0LCAnLmUtaGVhZGVyY2VsbCcpIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1yb3djZWxsJykgfHxcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsb3Nlc3QodGFyZ2V0LCAnLmUtZ3JpZHBvcHVwJykpIHtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zb3J0ZGlyZWN0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNwYW5jbGlja2VkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdlLXNwYW5jbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVNvcnRNdWx0aVRvdWNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdlLXNwYW5jbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVNvcnRNdWx0aVRvdWNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmFkZFNvcnRJY29ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaGVhZGVyO1xuICAgICAgICAgICAgdmFyIGZpbHRlckVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmllbGROYW1lcyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQ7IH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lcy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGVhZGVyID0gZ09iai5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGNvbHNbaV0uZmllbGQpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRTb3J0KGhlYWRlciwgY29sc1tpXS5kaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTXVsdGlTb3J0ICYmIGNvbHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmluc2VydEJlZm9yZShlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2Utc29ydG51bWJlcicsIGlubmVySFRNTDogKGkgKyAxKS50b1N0cmluZygpIH0pLCBoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtaGVhZGVydGV4dCcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlsdGVyRWxlbWVudCA9IGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1zb3J0ZmlsdGVyZGl2Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uZGlyZWN0aW9uID09PSAnYXNjZW5kaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChmaWx0ZXJFbGVtZW50LCBbJ2UtYXNjZW5kaW5nJywgJ2UtaWNvbi1hc2NlbmRpbmcnXSwgW10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoZmlsdGVyRWxlbWVudCwgWydlLWRlc2NlbmRpbmcnLCAnZS1pY29uLWRlc2NlbmRpbmcnXSwgW10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUucmVtb3ZlU29ydEljb25zID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBmaWVsZE5hbWVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZDsgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gcG9zaXRpb24gPyBwb3NpdGlvbiA6IDAsIGxlbiA9ICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHBvc2l0aW9uKSA/IHBvc2l0aW9uICsgMSA6IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nICYmIGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhlYWRlciA9IGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChjb2xzW2ldLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFyaWEuc2V0U29ydChoZWFkZXIsICdub25lJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNvcnRmaWx0ZXJkaXYnKSwgW10sIFsnZS1kZXNjZW5kaW5nJywgJ2UtaWNvbi1kZXNjZW5kaW5nJywgJ2UtYXNjZW5kaW5nJywgJ2UtaWNvbi1hc2NlbmRpbmcnXSk7XG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1zb3J0bnVtYmVyJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5yZW1vdmVDaGlsZChoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydG51bWJlcicpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmdldFNvcnRDb2x1bW5Gcm9tRmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnNbaV0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUudXBkYXRlQXJpYUF0dHIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmllbGROYW1lcyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQ7IH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuc29ydGVkQ29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzLmluZGV4T2YoY29sKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGNvbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldFNvcnQoaGVhZGVyLCB0aGlzLmdldFNvcnRDb2x1bW5Gcm9tRmllbGQoY29sKS5kaXJlY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5yZWZyZXNoU29ydEljb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0SWNvbnMoKTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNvcnQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0SWNvbnMoKTtcbiAgICAgICAgICAgIHRoaXMuYWRkU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTb3J0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFyaWFBdHRyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTb3J0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Tb3J0ID0gU29ydDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3NvcnQuanNcbi8vIG1vZHVsZSBpZCA9IDU1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi8uLi9wYWdlci9wYWdlclwiLCBcIi4uLy4uL3BhZ2VyL3BhZ2VyLWRyb3Bkb3duXCIsIFwiLi4vLi4vcGFnZXIvZXh0ZXJuYWwtbWVzc2FnZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBwYWdlcl8xLCBwYWdlcl9kcm9wZG93bl8xLCBleHRlcm5hbF9tZXNzYWdlXzEsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHBhZ2VyXzEuUGFnZXIuSW5qZWN0KGV4dGVybmFsX21lc3NhZ2VfMS5FeHRlcm5hbE1lc3NhZ2UsIHBhZ2VyX2Ryb3Bkb3duXzEuUGFnZXJEcm9wRG93bik7XG4gICAgdmFyIFBhZ2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQYWdlKHBhcmVudCwgcGFnZVNldHRpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMucGFnZVNldHRpbmdzID0gcGFnZVNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncGFnZXInO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucGFyZW50LnBhZ2VyVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlU2V0dGluZ3MudGVtcGxhdGUgPSB0aGlzLnBhcmVudC5wYWdlclRlbXBsYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZHBhZ2VyJyB9KTtcbiAgICAgICAgICAgIHBhZ2VyT2JqID0gdXRpbF8xLmV4dGVuZCh7fSwgZWoyX2Jhc2VfMS5leHRlbmQoe30sIHV0aWxfMS5nZXRBY3R1YWxQcm9wZXJ0aWVzKHRoaXMucGFnZVNldHRpbmdzKSksIHtcbiAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBkcm9wRG93bkNoYW5nZWQ6IHRoaXMub25TZWxlY3QuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IGdPYmouZW5hYmxlUnRsLCBsb2NhbGU6IGdPYmoubG9jYWxlLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IHRoaXMuYWRkQXJpYUF0dHIuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSwgWydwYXJlbnRPYmonLCAncHJvcE5hbWUnXSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqID0gbmV3IHBhZ2VyXzEuUGFnZXIocGFnZXJPYmopO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5vblNlbGVjdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSA9IGUucGFnZVNpemU7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA9IDE7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmFkZEFyaWFBdHRyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICghKHRoaXMucGFnZVNldHRpbmdzLnRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgIHZhciBudW1lcmljQ29udGFpbmVyID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW51bWVyaWNjb250YWluZXInKTtcbiAgICAgICAgICAgICAgICB2YXIgbGlua3MgPSBudW1lcmljQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlua3NbaV0uc2V0QXR0cmlidXRlKCdhcmlhLW93bnMnLCB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IFsnLmUtbWZpcnN0JywgJy5lLW1wcmV2JywgJy5lLWZpcnN0JywgJy5lLXByZXYnLCAnLmUtbmV4dCcsICcuZS1sYXN0JywgJy5lLW1uZXh0JywgJy5lLW1sYXN0J107XG4gICAgICAgICAgICAgICAgY2xhc3NMaXN0LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtb3ducycsIF90aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZGF0YVJlYWR5ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoZSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZ29Ub1BhZ2UgPSBmdW5jdGlvbiAocGFnZU5vKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmdvVG9QYWdlKHBhZ2VObyk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy50b3RhbFJlY29yZHNDb3VudCA9IGUuY291bnQ7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSwgcmVxdWVzdFR5cGU6ICdwYWdpbmcnLFxuICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5ld1Byb3AgPSBlLnByb3BlcnRpZXM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlck9ialtwcm9wXSA9IG5ld1Byb3BbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGb3JjZUNhbmNlbCB8fCB1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRm9yY2VDYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5nb1RvUGFnZSwgYXJnMTogZS5jdXJyZW50UGFnZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0ZvcmNlQ2FuY2VsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlck9iai5jdXJyZW50UGFnZSA9IGdPYmoucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRm9yY2VDYW5jZWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZS5jYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcmV2UGFnZSA9IHRoaXMucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgdGhpcy5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSBlLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3BhZ2luZycsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNQYWdlOiBwcmV2UGFnZSxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogZS5jdXJyZW50UGFnZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5rZXlQcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FuU2tpcEFjdGlvbihlLmFjdGlvbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5hY3Rpb24gaW4ga2V5QWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihrZXlBY3Rpb25zW2UuYWN0aW9uXSkuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuY2FuU2tpcEFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBwYWdlID0ge1xuICAgICAgICAgICAgICAgIHBhZ2VVcDogZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5zY3JvbGxUb3AgIT09IDA7IH0sXG4gICAgICAgICAgICAgICAgcGFnZURvd246IGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gIShlbC5zY3JvbGxUb3AgPj0gZWwuc2Nyb2xsSGVpZ2h0IC0gZWwuY2xpZW50SGVpZ2h0KTsgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIGlmIChhY3RpdmVFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1jb250ZW50JykgJiZcbiAgICAgICAgICAgICAgICBhY3RpdmVFbGVtZW50LmlzRXF1YWxOb2RlKHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdEVsZW1lbnRDaGlsZCkgJiYgWydwYWdlVXAnLCAncGFnZURvd24nXS5pbmRleE9mKGFjdGlvbikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhZ2VbYWN0aW9uXSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLnVwZGF0ZUV4dGVybmFsTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFnZXJPYmouZW5hYmxlRXh0ZXJuYWxNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlck9iai5lbmFibGVFeHRlcm5hbE1lc3NhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZXh0ZXJuYWxNZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuYXBwZW5kVG9FbGVtZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldEdyaWRQYWdlcih0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5wYWdlck9iai5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5lbmFibGVBZnRlclJlbmRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpICYmIGUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZFRvRWxlbWVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycyA9IHtcbiAgICAgICAgICAgICAgICBsb2FkOiB0aGlzLnJlbmRlcixcbiAgICAgICAgICAgICAgICBlbmQ6IHRoaXMuYXBwZW5kVG9FbGVtZW50LFxuICAgICAgICAgICAgICAgIHJlYWR5OiB0aGlzLmRhdGFSZWFkeSxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogdGhpcy5vbkFjdGlvbkNvbXBsZXRlLFxuICAgICAgICAgICAgICAgIHVwZGF0ZUxheW91dDogdGhpcy5lbmFibGVBZnRlclJlbmRlcixcbiAgICAgICAgICAgICAgICBpbmJvdW5kQ2hhbmdlOiB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLFxuICAgICAgICAgICAgICAgIGtleVByZXNzOiB0aGlzLmtleVByZXNzSGFuZGxlclxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsTG9hZCwgdGhpcy5oYW5kbGVycy5sb2FkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmhhbmRsZXJzLmVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmhhbmRsZXJzLnJlYWR5LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5wYWdlQ29tcGxldGUsIHRoaXMuaGFuZGxlcnMuY29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmhhbmRsZXJzLnVwZGF0ZUxheW91dCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5oYW5kbGVycy5pbmJvdW5kQ2hhbmdlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmhhbmRsZXJzLmtleVByZXNzLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbExvYWQsIHRoaXMuaGFuZGxlcnMubG9hZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaGFuZGxlcnMuZW5kKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmhhbmRsZXJzLnJlYWR5KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucGFnZUNvbXBsZXRlLCB0aGlzLmhhbmRsZXJzLmNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuaGFuZGxlcnMudXBkYXRlTGF5b3V0KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5oYW5kbGVycy5pbmJvdW5kQ2hhbmdlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5oYW5kbGVycy5rZXlQcmVzcyk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBhZ2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlBhZ2UgPSBQYWdlO1xuICAgIHZhciBrZXlBY3Rpb25zID0ge1xuICAgICAgICBwYWdlVXA6ICcuZS1wcmV2JyxcbiAgICAgICAgcGFnZURvd246ICcuZS1uZXh0JyxcbiAgICAgICAgY3RybEFsdFBhZ2VEb3duOiAnLmUtbGFzdCcsXG4gICAgICAgIGN0cmxBbHRQYWdlVXA6ICcuZS1maXJzdCcsXG4gICAgICAgIGFsdFBhZ2VVcDogJy5lLXBwJyxcbiAgICAgICAgYWx0UGFnZURvd246ICcuZS1ucCdcbiAgICB9O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcGFnZS5qc1xuLy8gbW9kdWxlIGlkID0gNTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vbnVtZXJpYy1jb250YWluZXJcIiwgXCIuL3BhZ2VyLW1lc3NhZ2VcIiwgXCIuLi9ncmlkL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIG51bWVyaWNfY29udGFpbmVyXzEsIHBhZ2VyX21lc3NhZ2VfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQYWdlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhQYWdlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUGFnZXIob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmRlZmF1bHRDb25zdGFudHMgPSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2VJbmZvOiAnezB9IG9mIHsxfSBwYWdlcycsXG4gICAgICAgICAgICAgICAgdG90YWxJdGVtc0luZm86ICcoezB9IGl0ZW1zKScsXG4gICAgICAgICAgICAgICAgZmlyc3RQYWdlVG9vbHRpcDogJ0dvIHRvIGZpcnN0IHBhZ2UnLFxuICAgICAgICAgICAgICAgIGxhc3RQYWdlVG9vbHRpcDogJ0dvIHRvIGxhc3QgcGFnZScsXG4gICAgICAgICAgICAgICAgbmV4dFBhZ2VUb29sdGlwOiAnR28gdG8gbmV4dCBwYWdlJyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2VUb29sdGlwOiAnR28gdG8gcHJldmlvdXMgcGFnZScsXG4gICAgICAgICAgICAgICAgbmV4dFBhZ2VyVG9vbHRpcDogJ0dvIHRvIG5leHQgcGFnZXInLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUGFnZXJUb29sdGlwOiAnR28gdG8gcHJldmlvdXMgcGFnZXInLFxuICAgICAgICAgICAgICAgIHBhZ2VyRHJvcERvd246ICdJdGVtcyBwZXIgcGFnZSdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5jb250YWluZXJNb2R1bGUgPSBuZXcgbnVtZXJpY19jb250YWluZXJfMS5OdW1lcmljQ29udGFpbmVyKF90aGlzKTtcbiAgICAgICAgICAgIF90aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZSA9IG5ldyBwYWdlcl9tZXNzYWdlXzEuUGFnZXJNZXNzYWdlKF90aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVxdWlyZWRNb2R1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUV4dGVybmFsTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ2V4dGVybmFsTWVzc2FnZScsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2twYWdlc2l6ZXMoKSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3BhZ2VyZHJvcGRvd24nLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVzO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyVGVtcGxhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdExvY2FsaXphdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUlRMKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbFJlY29yZHNDb3VudCA9IHRoaXMudG90YWxSZWNvcmRzQ291bnQgfHwgMDtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckZpcnN0UHJldkRpdkZvckRldmljZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVBhZ2VyTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJOZXh0TGFzdERpdkZvckRldmljZSgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrcGFnZXNpemVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlcmRyb3Bkb3duTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFyaWFMYWJlbCgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUV4dGVybmFsTWVzc2FnZSAmJiB0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjcmVhdGVkJywgeyAnY3VycmVudFBhZ2UnOiB0aGlzLmN1cnJlbnRQYWdlLCAndG90YWxSZWNvcmRzQ291bnQnOiB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5RW50aXR5ID0gWydjdXJyZW50UGFnZScsICdwYWdlU2l6ZSddO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KGtleUVudGl0eSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdwYWdlcic7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFnZUNvdW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlZnJlc2hOdW1lcmljTGlua3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjdXJyZW50UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0dvVG9QYWdlKG5ld1Byb3AuY3VycmVudFBhZ2UsIG9sZFByb3AuY3VycmVudFBhZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZUNoYW5nZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlU2l6ZSc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvdGFsUmVjb3Jkc0NvdW50JzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3VzdG9tVGV4dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlU2l6ZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2twYWdlc2l6ZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJkcm9wZG93bk1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlcmRyb3Bkb3duTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGVtcGxhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuID0gdGhpcy5jb21waWxlKHRoaXMudGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbG9jYWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdExvY2FsaXphdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlRXh0ZXJuYWxNZXNzYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUV4dGVybmFsTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4dGVybmFsTWVzc2FnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUlRMKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUGFnZXJNZXNzYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVBhZ2VyTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLnNob3dNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZS5oaWRlTWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ2V0TG9jYWxpemVkTGFiZWwgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVPYmouZ2V0Q29uc3RhbnQoa2V5KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmdvVG9QYWdlID0gZnVuY3Rpb24gKHBhZ2VObykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tHb1RvUGFnZShwYWdlTm8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2VObztcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5jaGVja3BhZ2VzaXplcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VTaXplcyA9PT0gdHJ1ZSB8fCB0aGlzLnBhZ2VTaXplcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmNoZWNrR29Ub1BhZ2UgPSBmdW5jdGlvbiAobmV3UGFnZU5vLCBvbGRQYWdlTm8pIHtcbiAgICAgICAgICAgIGlmIChuZXdQYWdlTm8gIT09IHRoaXMuY3VycmVudFBhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzUGFnZU5vID0gdGhpcy5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChvbGRQYWdlTm8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1BhZ2VObyA9IG9sZFBhZ2VObztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZpb3VzUGFnZU5vICE9PSBuZXdQYWdlTm8gJiYgKG5ld1BhZ2VObyA+PSAxICYmIG5ld1BhZ2VObyA8PSB0aGlzLnRvdGFsUGFnZXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5jdXJyZW50UGFnZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVRdWVyeVN0cmluZykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUXVlcnlTdHJpbmcodGhpcy5jdXJyZW50UGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHsgY3VycmVudFBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsIGNhbmNlbDogZmFsc2UgfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignY2xpY2snLCBhcmdzKTtcbiAgICAgICAgICAgIGlmICghYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnBhZ2VyVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtcGFnZXJ0ZW1wbGF0ZScpO1xuICAgICAgICAgICAgdGhpcy5jb21waWxlKHRoaXMudGVtcGxhdGUpO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLCBwYWdlQ291bnQ6IHRoaXMucGFnZUNvdW50LFxuICAgICAgICAgICAgICAgIHRvdGFsUmVjb3Jkc0NvdW50OiB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50LCB0b3RhbFBhZ2VzOiB0aGlzLnRvdGFsUGFnZXNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmdldFBhZ2VyVGVtcGxhdGUoKShkYXRhKTtcbiAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbih0aGlzLmVsZW1lbnQsIHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS51cGRhdGVUb3RhbFBhZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50b3RhbFBhZ2VzID0gKHRoaXMudG90YWxSZWNvcmRzQ291bnQgJSB0aGlzLnBhZ2VTaXplID09PSAwKSA/ICh0aGlzLnRvdGFsUmVjb3Jkc0NvdW50IC8gdGhpcy5wYWdlU2l6ZSkgOlxuICAgICAgICAgICAgICAgIChwYXJzZUludCgodGhpcy50b3RhbFJlY29yZHNDb3VudCAvIHRoaXMucGFnZVNpemUpLnRvU3RyaW5nKCksIDEwKSArIDEpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ2V0UGFnZXJUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlRm47XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5jb21waWxlID0gZnVuY3Rpb24gKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0ZW1wbGF0ZSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm4gPSBlajJfYmFzZV8yLmNvbXBpbGUoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZSkuaW5uZXJIVE1MLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuID0gZWoyX2Jhc2VfMi5jb21waWxlKHRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVG90YWxQYWdlcygpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUGFnZXJNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRXh0ZXJuYWxNZXNzYWdlICYmIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS51cGRhdGVSVEwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ydGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuaW5pdExvY2FsaXphdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxlT2JqID0gbmV3IGVqMl9iYXNlXzEuTDEwbih0aGlzLmdldE1vZHVsZU5hbWUoKSwgdGhpcy5kZWZhdWx0Q29uc3RhbnRzLCB0aGlzLmxvY2FsZSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS51cGRhdGVRdWVyeVN0cmluZyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHVwZGF0ZWRVcmwgPSB0aGlzLmdldFVwZGF0ZWRVUkwod2luZG93LmxvY2F0aW9uLmhyZWYsICdwYWdlJywgdmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoeyBwYXRoOiB1cGRhdGVkVXJsIH0sICcnLCB1cGRhdGVkVXJsKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmdldFVwZGF0ZWRVUkwgPSBmdW5jdGlvbiAodXJpLCBrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgcmVneCA9IG5ldyBSZWdFeHAoJyhbP3wmXSknICsga2V5ICsgJz0uKj8oJnwjfCQpJywgJ2knKTtcbiAgICAgICAgICAgIGlmICh1cmkubWF0Y2gocmVneCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJpLnJlcGxhY2UocmVneCwgJyQxJyArIGtleSArICc9JyArIHZhbHVlICsgJyQyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFzaCA9ICcnO1xuICAgICAgICAgICAgICAgIGlmICh1cmkuaW5kZXhPZignIycpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBoYXNoID0gdXJpLnJlcGxhY2UoLy4qIy8sICcjJyk7XG4gICAgICAgICAgICAgICAgICAgIHVyaSA9IHVyaS5yZXBsYWNlKC8jLiovLCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1cmkgKyAodXJpLmluZGV4T2YoJz8nKSAhPT0gLTEgPyAnJicgOiAnPycpICsga2V5ICsgJz0nICsgdmFsdWUgKyBoYXNoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVuZGVyRmlyc3RQcmV2RGl2Rm9yRGV2aWNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbWZpcnN0IGUtaWNvbnMgZS1pY29uLWZpcnN0JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0aXRsZTogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnZmlyc3RQYWdlVG9vbHRpcCcpLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1tcHJldiBlLWljb25zIGUtaWNvbi1wcmV2JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0aXRsZTogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgncHJldmlvdXNQYWdlVG9vbHRpcCcpLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5yZW5kZXJOZXh0TGFzdERpdkZvckRldmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW1uZXh0IGUtaWNvbnMgZS1pY29uLW5leHQnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmdldExvY2FsaXplZExhYmVsKCduZXh0UGFnZVRvb2x0aXAnKSwgdGFiaW5kZXg6ICctMScgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbWxhc3QgZS1pY29ucyBlLWljb24tbGFzdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGl0bGU6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ2xhc3RQYWdlVG9vbHRpcCcpLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5hZGRBcmlhTGFiZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IFsnLmUtbWZpcnN0JywgJy5lLW1wcmV2JywgJy5lLW1uZXh0JywgJy5lLW1sYXN0J107XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQucXVlcnlTZWxlY3Rvcih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUGFnZXI7XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJlbmFibGVRdWVyeVN0cmluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJlbmFibGVFeHRlcm5hbE1lc3NhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJlbmFibGVQYWdlck1lc3NhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgxMilcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwicGFnZVNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgxMClcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwicGFnZUNvdW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMSlcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiY3VycmVudFBhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcInRvdGFsUmVjb3Jkc0NvdW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJleHRlcm5hbE1lc3NhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwicGFnZVNpemVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCcnKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjdXN0b21UZXh0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjbGlja1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiZHJvcERvd25DaGFuZ2VkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgUGFnZXIgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBQYWdlcik7XG4gICAgZXhwb3J0cy5QYWdlciA9IFBhZ2VyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9wYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gNTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTnVtZXJpY0NvbnRhaW5lciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE51bWVyaWNDb250YWluZXIocGFnZXJNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUgPSBwYWdlck1vZHVsZTtcbiAgICAgICAgfVxuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudCA9IHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTnVtZXJpY0NvbnRhaW5lcigpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoTnVtZXJpY0xpbmtzKCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUudXBkYXRlVG90YWxQYWdlcygpO1xuICAgICAgICAgICAgaWYgKHRoaXMubGlua3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaW5rc0h0bWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlZnJlc2hOdW1lcmljTGlua3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbGluaztcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgZGl2ID0gcGFnZXJPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1udW1lcmljY29udGFpbmVyJyk7XG4gICAgICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHBhZ2VyT2JqLnBhZ2VDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGluayA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1saW5rIGUtbnVtZXJpY2l0ZW0gZS1zcGFjaW5nIGUtcGFnZXItZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHJvbGU6ICdsaW5rJywgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ0dvdG8gUGFnZSAnICsgaSB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlID09PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGxpbmssIFsnZS1jdXJyZW50aXRlbScsICdlLWFjdGl2ZSddLCBbJ2UtcGFnZXItZGVmYXVsdCddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgICAgICAgIHRoaXMubGlua3MgPSBbXS5zbGljZS5jYWxsKGRpdi5jaGlsZE5vZGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhZ2VyRWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYWdlckVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlck51bWVyaWNDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXBhZ2VyY29udGFpbmVyJywgYXR0cnM6IHsgJ3JvbGUnOiAnbmF2aWdhdGlvbicgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZpcnN0TlByZXYodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUHJldlBhZ2VyU2V0KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtbnVtZXJpY2NvbnRhaW5lcicgfSkpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJOZXh0UGFnZXJTZXQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTmV4dE5MYXN0KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyRmlyc3ROUHJldiA9IGZ1bmN0aW9uIChwYWdlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5maXJzdCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZmlyc3QgZS1pY29ucyBlLWljb24tZmlyc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdmaXJzdFBhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnZmlyc3RQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wcmV2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1wcmV2IGUtaWNvbnMgZS1pY29uLXByZXYnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgncHJldmlvdXNQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hcHBlbmQoW3RoaXMuZmlyc3QsIHRoaXMucHJldl0sIHBhZ2VyQ29udGFpbmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyUHJldlBhZ2VyU2V0ID0gZnVuY3Rpb24gKHBhZ2VyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLlBQID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdhJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbGluayBlLXBwIGUtc3BhY2luZycsIGlubmVySFRNTDogJy4uLicsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ3ByZXZpb3VzUGFnZXJUb29sdGlwJyksIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VyVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcGFnZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5QUCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlck5leHRQYWdlclNldCA9IGZ1bmN0aW9uIChwYWdlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5OUCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWxpbmsgZS1ucCBlLXNwYWNpbmcnLFxuICAgICAgICAgICAgICAgIGlubmVySFRNTDogJy4uLicsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCduZXh0UGFnZXJUb29sdGlwJyksIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCduZXh0UGFnZXJUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwYWdlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLk5QKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyTmV4dE5MYXN0ID0gZnVuY3Rpb24gKHBhZ2VyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLm5leHQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW5leHQgZS1pY29ucyBlLWljb24tbmV4dCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5sYXN0ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1sYXN0IGUtaWNvbnMgZS1pY29uLWxhc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdsYXN0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdsYXN0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXBwZW5kKFt0aGlzLm5leHQsIHRoaXMubGFzdF0sIHBhZ2VyQ29udGFpbmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBwYWdlck9iai5wcmV2aW91c1BhZ2VObyA9IHBhZ2VyT2JqLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRpc2FibGUnKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdpbmRleCcpKSkge1xuICAgICAgICAgICAgICAgIHBhZ2VyT2JqLmN1cnJlbnRQYWdlID0gcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnaW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgIHBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZUxpbmtzSHRtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgY3VycmVudFBhZ2VTZXQ7XG4gICAgICAgICAgICB2YXIgcGFnZU5vO1xuICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UgPSBwYWdlck9iai50b3RhbFBhZ2VzID09PSAxID8gMSA6IHBhZ2VyT2JqLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlID4gcGFnZXJPYmoudG90YWxQYWdlcyAmJiBwYWdlck9iai50b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UgPSBwYWdlck9iai50b3RhbFBhZ2VzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFBhZ2VTZXQgPSBwYXJzZUludCgocGFnZXJPYmouY3VycmVudFBhZ2UgLyBwYWdlck9iai5wYWdlQ291bnQpLnRvU3RyaW5nKCksIDEwKTtcbiAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSAlIHBhZ2VyT2JqLnBhZ2VDb3VudCA9PT0gMCAmJiBjdXJyZW50UGFnZVNldCA+IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZVNldCA9IGN1cnJlbnRQYWdlU2V0IC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFnZXJPYmoucGFnZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBwYWdlTm8gPSAoY3VycmVudFBhZ2VTZXQgKiBwYWdlck9iai5wYWdlQ291bnQpICsgMSArIGk7XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VObyA8PSBwYWdlck9iai50b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCBwYWdlTm8udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uaW5uZXJIVE1MID0gIXBhZ2VyT2JqLmN1c3RvbVRleHQgPyBwYWdlTm8udG9TdHJpbmcoKSA6IHBhZ2VyT2JqLmN1c3RvbVRleHQgKyBwYWdlTm87XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSAhPT0gcGFnZU5vKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLmNsYXNzTGlzdC5hZGQoJ2UtcGFnZXItZGVmYXVsdCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdlLXBhZ2VyLWRlZmF1bHQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxpbmtzW2ldLCBbXSwgWydlLWN1cnJlbnRpdGVtJywgJ2UtYWN0aXZlJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maXJzdC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgJzEnKTtcbiAgICAgICAgICAgIHRoaXMubGFzdC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgcGFnZXJPYmoudG90YWxQYWdlcy50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMucHJldi5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlIC0gMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLm5leHQuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYWdlck9iai5jdXJyZW50UGFnZSArIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbWZpcnN0Jykuc2V0QXR0cmlidXRlKCdpbmRleCcsICcxJyk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbGFzdCcpLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCBwYWdlck9iai50b3RhbFBhZ2VzLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbXByZXYnKS5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlIC0gMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbmV4dCcpLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAocGFnZXJPYmouY3VycmVudFBhZ2UgKyAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMuUFAuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYXJzZUludCh0aGlzLmxpbmtzWzBdLmdldEF0dHJpYnV0ZSgnaW5kZXgnKSwgMTApIC0gcGFnZXJPYmoucGFnZUNvdW50KS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMuTlAuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYXJzZUludCh0aGlzLmxpbmtzW3RoaXMubGlua3MubGVuZ3RoIC0gMV0uZ2V0QXR0cmlidXRlKCdpbmRleCcpLCAxMCkgKyAxKS50b1N0cmluZygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlU3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaXJzdE5QcmV2U3R5bGVzKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByZXZQYWdlclNldFN0eWxlcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVOZXh0UGFnZXJTZXRTdHlsZXMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTmV4dE5MYXN0U3R5bGVzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5saW5rcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxpbmtzWyh0aGlzLnBhZ2VyTW9kdWxlLmN1cnJlbnRQYWdlIC0gMSkgJSB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VDb3VudF0sIFsnZS1jdXJyZW50aXRlbScsICdlLWFjdGl2ZSddLCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZUZpcnN0TlByZXZTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3RQYWdlID0gWydlLWZpcnN0cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBmaXJzdFBhZ2VEaXNhYmxlZCA9IFsnZS1maXJzdHBhZ2VkaXNhYmxlZCcsICdlLWRpc2FibGUnXTtcbiAgICAgICAgICAgIHZhciBwcmV2UGFnZSA9IFsnZS1wcmV2cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBwcmV2UGFnZURpc2FibGVkID0gWydlLXByZXZwYWdlZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ107XG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlck1vZHVsZS5jdXJyZW50UGFnZSA+IDEpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnByZXYsIHByZXZQYWdlLCBwcmV2UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmZpcnN0LCBmaXJzdFBhZ2UsIGZpcnN0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tZmlyc3QnKSwgZmlyc3RQYWdlLCBmaXJzdFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbXByZXYnKSwgcHJldlBhZ2UsIHByZXZQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wcmV2LCBwcmV2UGFnZURpc2FibGVkLCBwcmV2UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5maXJzdCwgZmlyc3RQYWdlRGlzYWJsZWQsIGZpcnN0UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbXByZXYnKSwgcHJldlBhZ2VEaXNhYmxlZCwgcHJldlBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1maXJzdCcpLCBmaXJzdFBhZ2VEaXNhYmxlZCwgZmlyc3RQYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlUHJldlBhZ2VyU2V0U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXJNb2R1bGUuY3VycmVudFBhZ2UgPiB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VDb3VudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuUFAsIFsnZS1udW1lcmljaXRlbScsICdlLXBhZ2VyLWRlZmF1bHQnXSwgWydlLW5leHRwcmV2aXRlbWRpc2FibGVkJywgJ2UtZGlzYWJsZSddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuUFAsIFsnZS1uZXh0cHJldml0ZW1kaXNhYmxlZCcsICdlLWRpc2FibGUnXSwgWydlLW51bWVyaWNpdGVtJywgJ2UtcGFnZXItZGVmYXVsdCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlTmV4dFBhZ2VyU2V0U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHZhciBmaXJzdFBhZ2UgPSB0aGlzLmxpbmtzWzBdLmlubmVySFRNTC5yZXBsYWNlKHBhZ2VyT2JqLmN1c3RvbVRleHQsICcnKTtcbiAgICAgICAgICAgIGlmICghZmlyc3RQYWdlLmxlbmd0aCB8fCAhdGhpcy5saW5rcy5sZW5ndGggfHwgKHBhcnNlSW50KGZpcnN0UGFnZSwgMTApICsgcGFnZXJPYmoucGFnZUNvdW50ID4gcGFnZXJPYmoudG90YWxQYWdlcykpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLk5QLCBbJ2UtbmV4dHByZXZpdGVtZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ10sIFsnZS1udW1lcmljaXRlbScsICdlLXBhZ2VyLWRlZmF1bHQnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLk5QLCBbJ2UtbnVtZXJpY2l0ZW0nLCAnZS1wYWdlci1kZWZhdWx0J10sIFsnZS1uZXh0cHJldml0ZW1kaXNhYmxlZCcsICdlLWRpc2FibGUnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZU5leHROTGFzdFN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsYXN0UGFnZSA9IFsnZS1sYXN0cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBsYXN0UGFnZURpc2FibGVkID0gWydlLWxhc3RwYWdlZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ107XG4gICAgICAgICAgICB2YXIgbmV4dFBhZ2UgPSBbJ2UtbmV4dHBhZ2UnLCAnZS1wYWdlci1kZWZhdWx0J107XG4gICAgICAgICAgICB2YXIgbmV4dFBhZ2VEaXNhYmxlZCA9IFsnZS1uZXh0cGFnZWRpc2FibGVkJywgJ2UtZGlzYWJsZSddO1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSA9PT0gcGFnZXJPYmoudG90YWxQYWdlcyB8fCBwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubGFzdCwgbGFzdFBhZ2VEaXNhYmxlZCwgbGFzdFBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubmV4dCwgbmV4dFBhZ2VEaXNhYmxlZCwgbmV4dFBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1sYXN0JyksIGxhc3RQYWdlRGlzYWJsZWQsIGxhc3RQYWdlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbmV4dCcpLCBuZXh0UGFnZURpc2FibGVkLCBuZXh0UGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxhc3QsIGxhc3RQYWdlLCBsYXN0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLm5leHQsIG5leHRQYWdlLCBuZXh0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbGFzdCcpLCBsYXN0UGFnZSwgbGFzdFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbW5leHQnKSwgbmV4dFBhZ2UsIG5leHRQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTnVtZXJpY0NvbnRhaW5lcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuTnVtZXJpY0NvbnRhaW5lciA9IE51bWVyaWNDb250YWluZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhZ2VyL251bWVyaWMtY29udGFpbmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBhZ2VyTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFBhZ2VyTWVzc2FnZShwYWdlck1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZSA9IHBhZ2VyTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXBhcmVudG1zZ2JhcicsIGF0dHJzOiB7ICdhcmlhLWxhYmVsJzogJ1BhZ2VyIEluZm9ybWF0aW9uJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXBhZ2Vub21zZycsIHN0eWxlczogJ3RleHRhbGlnbjpyaWdodCcgfSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDb3VudE1zZ0VsZW0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtcGFnZWNvdW50bXNnJywgc3R5bGVzOiAndGV4dGFsaWduOnJpZ2h0JyB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuYXBwZW5kKFt0aGlzLnBhZ2VOb01zZ0VsZW0sIHRoaXMucGFnZUNvdW50TXNnRWxlbV0sIGRpdik7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXQocGFnZXJPYmouZ2V0TG9jYWxpemVkTGFiZWwoJ2N1cnJlbnRQYWdlSW5mbycpLCBbcGFnZXJPYmoudG90YWxSZWNvcmRzQ291bnQgPT09IDAgPyAwIDpcbiAgICAgICAgICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UsIHBhZ2VyT2JqLnRvdGFsUGFnZXMgfHwgMF0pICsgJyAnO1xuICAgICAgICAgICAgdGhpcy5wYWdlQ291bnRNc2dFbGVtLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXQocGFnZXJPYmouZ2V0TG9jYWxpemVkTGFiZWwoJ3RvdGFsSXRlbXNJbmZvJyksIFtwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCB8fCAwXSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VOb01zZ0VsZW0ucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0aGlzLnBhZ2VOb01zZ0VsZW0udGV4dENvbnRlbnQgKyB0aGlzLnBhZ2VDb3VudE1zZ0VsZW0udGV4dENvbnRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLmhpZGVNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZU5vTXNnRWxlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZU5vTXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFnZUNvdW50TXNnRWxlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZUNvdW50TXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLnNob3dNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhZ2VOb01zZ0VsZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIHRoaXMucGFnZUNvdW50TXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJNZXNzYWdlLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAoc3RyLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgcmVneDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlZ3ggPSBuZXcgUmVnRXhwKCdcXFxceycgKyAoaSkgKyAnXFxcXH0nLCAnZ20nKTtcbiAgICAgICAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShyZWd4LCBhcmdzW2ldLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBhZ2VyTWVzc2FnZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUGFnZXJNZXNzYWdlID0gUGFnZXJNZXNzYWdlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9wYWdlci1tZXNzYWdlLmpzXG4vLyBtb2R1bGUgaWQgPSA1OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfZHJvcGRvd25zXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBhZ2VyRHJvcERvd24gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQYWdlckRyb3BEb3duKHBhZ2VyTW9kdWxlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlID0gcGFnZXJNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgUGFnZXJEcm9wRG93bi5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncGFnZXJkcm9wZG93bic7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyRHJvcERvd24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRHJvcERvd25EaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlc2l6ZXMnIH0pO1xuICAgICAgICAgICAgdmFyIGRyb3BEb3duRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtcGFnZXJkcm9wZG93bicgfSk7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdFRleHREaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlcmNvbnN0YW50JyB9KTtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGF0dHJzOiB7IHR5cGU6ICd0ZXh0JywgdGFiaW5kZXg6ICcxJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5wYWdlckNvbnMgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtY29uc3RhbnQnLCBpbm5lckhUTUw6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ3BhZ2VyRHJvcERvd24nKSB9KTtcbiAgICAgICAgICAgIGRyb3BEb3duRGl2LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIGRlZmF1bHRUZXh0RGl2LmFwcGVuZENoaWxkKHRoaXMucGFnZXJDb25zKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJEcm9wRG93bkRpdi5hcHBlbmRDaGlsZChkcm9wRG93bkRpdik7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRHJvcERvd25EaXYuYXBwZW5kQ2hpbGQoZGVmYXVsdFRleHREaXYpO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMucGFnZXJEcm9wRG93bkRpdik7XG4gICAgICAgICAgICB2YXIgcGFnZVNpemVzTW9kdWxlID0gdGhpcy5wYWdlck1vZHVsZS5wYWdlU2l6ZXM7XG4gICAgICAgICAgICB2YXIgcGFnZVNpemVzQXJyYXkgPSAocGFnZVNpemVzTW9kdWxlLmxlbmd0aCA/IHBhZ2VTaXplc01vZHVsZSA6IFs1LCAxMCwgMTIsIDIwXSk7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdFZhbHVlID0gKHBhZ2VTaXplc0FycmF5KS5pbmRleE9mKHRoaXMucGFnZXJNb2R1bGUucGFnZVNpemUpID4gLTEgPyB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VTaXplIDogcGFnZVNpemVzQXJyYXlbMF07XG4gICAgICAgICAgICB0aGlzLmRyb3BEb3duTGlzdE9iamVjdCA9IG5ldyBlajJfZHJvcGRvd25zXzEuRHJvcERvd25MaXN0KHtcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiBwYWdlU2l6ZXNBcnJheSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZGVmYXVsdFZhbHVlLFxuICAgICAgICAgICAgICAgIGNoYW5nZTogdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZHJvcERvd25MaXN0T2JqZWN0LmFwcGVuZFRvKGlucHV0KTtcbiAgICAgICAgICAgIHBhZ2VyT2JqLnBhZ2VTaXplID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgcGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIHBhZ2VyT2JqLnRyaWdnZXIoJ2Ryb3BEb3duQ2hhbmdlZCcsIHsgcGFnZVNpemU6IGRlZmF1bHRWYWx1ZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJEcm9wRG93bi5wcm90b3R5cGUub25DaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5wYWdlU2l6ZSA9IHRoaXMuZHJvcERvd25MaXN0T2JqZWN0LnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5kYXRhQmluZCgpO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS50cmlnZ2VyKCdkcm9wRG93bkNoYW5nZWQnLCB7IHBhZ2VTaXplOiB0aGlzLmRyb3BEb3duTGlzdE9iamVjdC52YWx1ZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJEcm9wRG93bi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kcm9wRG93bkxpc3RPYmplY3QgJiYgIXRoaXMuZHJvcERvd25MaXN0T2JqZWN0LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wRG93bkxpc3RPYmplY3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMucGFnZXJEcm9wRG93bkRpdik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQYWdlckRyb3BEb3duO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5QYWdlckRyb3BEb3duID0gUGFnZXJEcm9wRG93bjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvcGFnZXItZHJvcGRvd24uanNcbi8vIG1vZHVsZSBpZCA9IDYwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82MV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiXG4vLyBtb2R1bGUgaWQgPSA2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEV4dGVybmFsTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEV4dGVybmFsTWVzc2FnZShwYWdlck1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZSA9IHBhZ2VyTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZXh0ZXJuYWxNZXNzYWdlJztcbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlcmV4dGVybmFsbXNnJywgYXR0cnM6IHsgJ2FyaWEtbGFiZWwnOiAnUGFnZXIgZXh0ZXJuYWwgbWVzc2FnZScgfSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VyTW9kdWxlLmV4dGVybmFsTWVzc2FnZSAmJiB0aGlzLnBhZ2VyTW9kdWxlLmV4dGVybmFsTWVzc2FnZS50b1N0cmluZygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5wYWdlck1vZHVsZS5leHRlcm5hbE1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVNZXNzYWdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuaGlkZU1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5zaG93TWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFeHRlcm5hbE1lc3NhZ2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkV4dGVybmFsTWVzc2FnZSA9IEV4dGVybmFsTWVzc2FnZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvZXh0ZXJuYWwtbWVzc2FnZS5qc1xuLy8gbW9kdWxlIGlkID0gNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL3JlbmRlcmVyL3Jvdy1yZW5kZXJlclwiLCBcIi4uL21vZGVscy9jZWxsXCIsIFwiLi4vbW9kZWxzL3Jvd1wiLCBcIi4uL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vcmVuZGVyZXIvZmlsdGVyLW1lbnUtcmVuZGVyZXJcIiwgXCIuLi9hY3Rpb25zL2NoZWNrYm94LWZpbHRlclwiLCBcIi4uL2FjdGlvbnMvZXhjZWwtZmlsdGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgdXRpbF8xLCBlajJfYmFzZV8yLCBlajJfZGF0YV8xLCBldmVudHMsIGVudW1fMSwgcm93X3JlbmRlcmVyXzEsIGNlbGxfMSwgcm93XzEsIGZpbHRlcl9jZWxsX3JlbmRlcmVyXzEsIHV0aWxfMiwgZmlsdGVyX21lbnVfcmVuZGVyZXJfMSwgY2hlY2tib3hfZmlsdGVyXzEsIGV4Y2VsX2ZpbHRlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBGaWx0ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBGaWx0ZXIocGFyZW50LCBmaWx0ZXJTZXR0aW5ncywgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucHJlZGljYXRlID0gJ2FuZCc7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzID0ge307XG4gICAgICAgICAgICB0aGlzLm5leHRGbE1lbnVPcGVuID0gJyc7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB7ICdtZW51JzogZmlsdGVyX21lbnVfcmVuZGVyZXJfMS5GaWx0ZXJNZW51UmVuZGVyZXIsICdjaGVja2JveCc6IGNoZWNrYm94X2ZpbHRlcl8xLkNoZWNrQm94RmlsdGVyLCAnZXhjZWwnOiBleGNlbF9maWx0ZXJfMS5FeGNlbEZpbHRlciB9O1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJPcGVyYXRvcnMgPSB7XG4gICAgICAgICAgICAgICAgY29udGFpbnM6ICdjb250YWlucycsIGVuZHNXaXRoOiAnZW5kc3dpdGgnLCBlcXVhbDogJ2VxdWFsJywgZ3JlYXRlclRoYW46ICdncmVhdGVydGhhbicsIGdyZWF0ZXJUaGFuT3JFcXVhbDogJ2dyZWF0ZXJ0aGFub3JlcXVhbCcsXG4gICAgICAgICAgICAgICAgbGVzc1RoYW46ICdsZXNzdGhhbicsIGxlc3NUaGFuT3JFcXVhbDogJ2xlc3N0aGFub3JlcXVhbCcsIG5vdEVxdWFsOiAnbm90ZXF1YWwnLCBzdGFydHNXaXRoOiAnc3RhcnRzd2l0aCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmZsdHJEbGdEZXRhaWxzID0geyBmaWVsZDogJycsIGlzT3BlbjogZmFsc2UgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncyA9IGZpbHRlclNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0TG9jYWxpemVkQ3VzdG9tT3BlcmF0b3JzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2ZpbHRlcmJhcicpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93UmVuZGVyZXIgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgZW51bV8xLkNlbGxUeXBlLkZpbHRlciwgZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxscmVuZGVyID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdjZWxsUmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5GaWx0ZXIsIG5ldyBmaWx0ZXJfY2VsbF9yZW5kZXJlcl8xLkZpbHRlckNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvcikpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlRm9ybWF0dGVyID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCd2YWx1ZUZvcm1hdHRlcicpO1xuICAgICAgICAgICAgICAgICAgICByb3dSZW5kZXJlci5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0cicsIHsgY2xhc3NOYW1lOiAnZS1maWx0ZXJiYXInIH0pO1xuICAgICAgICAgICAgICAgICAgICByb3cgPSB0aGlzLmdlbmVyYXRlUm93KCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5kYXRhID0gdGhpcy52YWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IHJvd1JlbmRlcmVyLnJlbmRlcihyb3csIGdPYmouZ2V0Q29sdW1ucygpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJ3RoZWFkJykuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1kZXRhaWxoZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXRhaWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbC5jbGFzc05hbWUgPSAnZS1maWx0ZXJiYXJjZWxsIGUtbWFzdGVyY2VsbCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGdDZWxscyA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdyb3VwdG9wbGVmdGNlbGwnKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnQ2VsbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnQ2VsbHNbZ0NlbGxzLmxlbmd0aCAtIDFdLmNsYXNzTGlzdC5hZGQoJ2UtbGFzdGdyb3VwdG9wbGVmdGNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlck1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdlbmVyYXRlUm93ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfMS5Sb3cob3B0aW9ucyk7XG4gICAgICAgICAgICByb3cuY2VsbHMgPSB0aGlzLmdlbmVyYXRlQ2VsbHMoKTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZ2VuZXJhdGVDZWxscyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjZWxscyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMCwgbGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgYyA8IGxlbjsgYysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5IZWFkZXJJbmRlbnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgfHwgdGhpcy5wYXJlbnQuY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgZW51bV8xLkNlbGxUeXBlLkRldGFpbEhlYWRlcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZHVtbXkgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbChkdW1teSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNlbGxzO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdlbmVyYXRlQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW4sIGNlbGxUeXBlKSB7XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogY29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAncm93SWQnOiAnJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogY29sdW1uLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6IGNlbGxUeXBlID8gY2VsbFR5cGUgOiBlbnVtXzEuQ2VsbFR5cGUuRmlsdGVyLFxuICAgICAgICAgICAgICAgICdhdHRyaWJ1dGVzJzogeyB0aXRsZTogdGhpcy5sMTBuLmdldENvbnN0YW50KCdGaWx0ZXJiYXJUaXRsZScpIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMuZmllbGROYW1lLCBvcGVyYXRvcjogdGhpcy5vcGVyYXRvciwgdmFsdWU6IHRoaXMudmFsdWUsIHByZWRpY2F0ZTogdGhpcy5wcmVkaWNhdGUsXG4gICAgICAgICAgICAgICAgbWF0Y2hDYXNlOiB0aGlzLm1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWU6IHt9LCBhY3R1YWxPcGVyYXRvcjoge31cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldEZpbHRlcmVkQ29sc0luZGV4QnlGaWVsZCh0aGlzLmZpZWxkTmFtZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1uc1tpbmRleF0gPSB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMucHVzaCh0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZXRGaWx0ZXJlZENvbHNJbmRleEJ5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSAhdGhpcy5pc1JlbW92ZSA/IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RmlsdGVyT2JqZWN0OiB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QsIGN1cnJlbnRGaWx0ZXJpbmdDb2x1bW46IHRoaXMuY29sdW1uLmZpZWxkLFxuICAgICAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucywgcmVxdWVzdFR5cGU6ICdmaWx0ZXJpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdmaWx0ZXJpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMS5leHRlbmQoZSwgYXJncykpO1xuICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLCAnbW91c2Vkb3duJywgdGhpcy51cGRhdGVTcGFuQ2xhc3MsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmVsZW1lbnQsICdmb2N1c2luJywgdGhpcy51cGRhdGVTcGFuQ2xhc3MsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKSwgJ2tleXVwJywgdGhpcy5rZXlVcEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVuV2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5lbGVtZW50LCAnZm9jdXNpbicsIHRoaXMudXBkYXRlU3BhbkNsYXNzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCksICdtb3VzZWRvd24nLCB0aGlzLnVwZGF0ZVNwYW5DbGFzcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLCAna2V5dXAnLCB0aGlzLmtleVVwSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggJiYgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyQnlDb2x1bW4oY29sLmZpZWxkLCBjb2wub3BlcmF0b3IsIGNvbC52YWx1ZSwgY29sLnByZWRpY2F0ZSwgY29sLm1hdGNoQ2FzZSwgY29sLmFjdHVhbEZpbHRlclZhbHVlLCBjb2wuYWN0dWFsT3BlcmF0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmZpbHRlckNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5VXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHRoaXMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZmlsdGVyTWVudUNsb3NlLCB0aGlzLmZpbHRlck1lbnVDbG9zZSwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5maWx0ZXJPcGVuLCB0aGlzLmNvbHVtbk1lbnVGaWx0ZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5maWx0ZXJDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5VXBIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5maWx0ZXJPcGVuLCB0aGlzLmNvbHVtbk1lbnVGaWx0ZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5maWx0ZXJNZW51Q2xvc2UsIHRoaXMuZmlsdGVyTWVudUNsb3NlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5maWx0ZXJNZW51Q2xvc2UgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5mbHRyRGxnRGV0YWlscy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5jb2x1bW5NZW51RmlsdGVyID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uID0gYXJncy5jb2w7XG4gICAgICAgICAgICB2YXIgZWxlID0gZWoyX2Jhc2VfMS5jbG9zZXN0KGFyZ3MudGFyZ2V0LCAnIycgKyBhcmdzLmlkKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmlzQ2xvc2UgJiYgIWVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyTW9kdWxlLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckRpYWxvZ09wZW4odGhpcy5jb2x1bW4sIGFyZ3MudGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5maWx0ZXJEaWFsb2dPcGVuID0gZnVuY3Rpb24gKGNvbCwgdGFyZ2V0LCBsZWZ0LCB0b3ApIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUgPSBuZXcgdGhpcy50eXBlW2NvbC5maWx0ZXIudHlwZSB8fCB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy50eXBlXSh0aGlzLnBhcmVudCwgZ09iai5maWx0ZXJTZXR0aW5ncywgdGhpcy5zZXJ2aWNlTG9jYXRvciwgdGhpcy5jdXN0b21PcGVyYXRvcnMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUub3BlbkRpYWxvZyh7XG4gICAgICAgICAgICAgICAgdHlwZTogY29sLnR5cGUsIGZpZWxkOiBjb2wuZmllbGQsIGRpc3BsYXlOYW1lOiBjb2wuaGVhZGVyVGV4dCxcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiBjb2wuZmlsdGVyLmRhdGFTb3VyY2UgfHwgZ09iai5kYXRhU291cmNlLCBmb3JtYXQ6IGNvbC5mb3JtYXQsXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRDb2x1bW5zOiBnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnMsIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICAgICAgICAgIHNvcnRlZENvbHVtbnM6IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMsIGZvcm1hdEZuOiBjb2wuZ2V0Rm9ybWF0dGVyKCksXG4gICAgICAgICAgICAgICAgcGFyc2VyRm46IGNvbC5nZXRQYXJzZXIoKSwgcXVlcnk6IGdPYmoucXVlcnksIHRlbXBsYXRlOiBjb2wuZ2V0RmlsdGVySXRlbVRlbXBsYXRlKCksXG4gICAgICAgICAgICAgICAgaGlkZVNlYXJjaGJveDogZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2wuZmlsdGVyLmhpZGVTZWFyY2hib3gpID8gZmFsc2UgOiBjb2wuZmlsdGVyLmhpZGVTZWFyY2hib3gsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5maWx0ZXJIYW5kbGVyLmJpbmQodGhpcyksIGxvY2FsaXplZFN0cmluZ3M6IHt9LFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7IFg6IGxlZnQsIFk6IHRvcCB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5maWx0ZXJCeUNvbHVtbiA9IGZ1bmN0aW9uIChmaWVsZE5hbWUsIGZpbHRlck9wZXJhdG9yLCBmaWx0ZXJWYWx1ZSwgcHJlZGljYXRlLCBtYXRjaENhc2UsIGFjdHVhbEZpbHRlclZhbHVlLCBhY3R1YWxPcGVyYXRvcikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJDZWxsO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoZmllbGROYW1lKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdmaWx0ZXJiYXInKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyQ2VsbCA9IGdPYmouZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5jb2x1bW4uZmllbGQgKyAnX2ZpbHRlckJhcmNlbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbHVtbi5hbGxvd0ZpbHRlcmluZykgJiYgIXRoaXMuY29sdW1uLmFsbG93RmlsdGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLmZpbHRlckJ5Q29sdW1uLCBhcmcxOiBmaWVsZE5hbWUsIGFyZzI6IGZpbHRlck9wZXJhdG9yLCBhcmczOiBmaWx0ZXJWYWx1ZSwgYXJnNDogcHJlZGljYXRlLFxuICAgICAgICAgICAgICAgICAgICBhcmc1OiBtYXRjaENhc2UsIGFyZzY6IGFjdHVhbEZpbHRlclZhbHVlLCBhcmc3OiBhY3R1YWxPcGVyYXRvclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMubWF0Y2hDYXNlID0gbWF0Y2hDYXNlIHx8IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5maWVsZE5hbWUgPSBmaWVsZE5hbWU7XG4gICAgICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZSB8fCAnYW5kJztcbiAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSBmaWx0ZXJPcGVyYXRvcjtcbiAgICAgICAgICAgIGZpbHRlclZhbHVlID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZmlsdGVyVmFsdWUpICYmIGZpbHRlclZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb2x1bW4udHlwZSA9PT0gJ251bWJlcicgfHwgdGhpcy5jb2x1bW4udHlwZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXRjaENhc2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWx1ZXNbdGhpcy5jb2x1bW4uZmllbGRdID0gZmlsdGVyVmFsdWU7XG4gICAgICAgICAgICBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoZmllbGROYW1lKS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZmlsdGVyZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgaWYgKGZpbHRlclZhbHVlLmxlbmd0aCA8IDEgfHwgdGhpcy5jaGVja0ZvclNraXBJbnB1dCh0aGlzLmNvbHVtbiwgZmlsdGVyVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSBmaWx0ZXJWYWx1ZS5sZW5ndGggPCAxID8gJycgOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnZmlsdGVyYmFyJyAmJiBmaWx0ZXJDZWxsLnZhbHVlICE9PSBmaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGZpbHRlckNlbGwudmFsdWUgPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrQWxyZWFkeUNvbEZpbHRlcmVkKHRoaXMuY29sdW1uLmZpZWxkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGUucHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbHVtbnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RmlsdGVyT2JqZWN0OiB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QsIGN1cnJlbnRGaWx0ZXJpbmdDb2x1bW46IHRoaXMuY29sdW1uID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uLmZpZWxkIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMsIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93RmlsdGVyQmFyU3RhdHVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnByb3BlcnRpZXNbcHJvcF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wYXJlbnQuYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC51cGRhdGVFeHRlcm5hbE1lc3NhZ2UoJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVmcmVzaEhlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNsZWFyRmlsdGVyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB1dGlsXzEuZ2V0QWN0dWFsUHJvcEZyb21Db2xsKHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudCh0aGlzLnBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5jbGVhckZpbHRlcmluZyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZChjb2xzW2ldLmZpZWxkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSAnJztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuY2hlY2tBbHJlYWR5Q29sRmlsdGVyZWQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfaSA8IGNvbHVtbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sdW1uc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLmZpZWxkID09PSBmaWVsZCAmJiBjb2wudmFsdWUgPT09IHRoaXMudmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgY29sLm9wZXJhdG9yID09PSB0aGlzLm9wZXJhdG9yICYmIGNvbC5wcmVkaWNhdGUgPT09IHRoaXMucHJlZGljYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkLCBpc0NsZWFyRmlsdGVyQmFyKSB7XG4gICAgICAgICAgICB2YXIgZkNlbGw7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KHRoaXMucGFyZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGFyZzE6IGZpZWxkLCBhcmcyOiBpc0NsZWFyRmlsdGVyQmFyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2ZpbHRlcmJhcicgJiYgIWlzQ2xlYXJGaWx0ZXJCYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZDZWxsID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJyMnICsgY29sc1tpXS5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWVzW2ZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb2xzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZsdHJFbGVtZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIGZsdHJFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1maWx0ZXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJTZXR0aW5ncy50eXBlICE9PSAnZmlsdGVyYmFyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmx0ckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaWNvbi1maWx0ZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWZpbHRlcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2ZpbHRlcmluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdmaWx0ZXInO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmtleVVwSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiBlajJfYmFzZV8yLm1hdGNoZXModGFyZ2V0LCAnLmUtZmlsdGVyYmFyIGlucHV0JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZCh0YXJnZXQuaWQuc3BsaXQoJ18nKVswXSk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Jvc3NJY29uKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLmZpbHRlclNldHRpbmdzLm1vZGUgPT09ICdpbW1lZGlhdGUnIHx8IGUua2V5Q29kZSA9PT0gMTMpICYmIGUua2V5Q29kZSAhPT0gOSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGFyZ2V0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzRmlsdGVyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS51cGRhdGVTcGFuQ2xhc3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlZG93bicgJiYgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1jYW5jZWwnKSkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRUZXh0ID0gdGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgdGFyZ2V0VGV4dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdlLWhpZGUnKTtcbiAgICAgICAgICAgICAgICB0YXJnZXRUZXh0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ2ZvY3VzaW4nICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZmlsdGVydGV4dCcpICYmICF0YXJnZXQuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXN0RmlsdGVyRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RGaWx0ZXJFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKCdlLWhpZGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDcm9zc0ljb24odGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RGaWx0ZXJFbGVtZW50ID0gdGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ2ZvY3VzaW4nICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWZpbHRlcnRleHQnKSAmJiB0aGlzLmxhc3RGaWx0ZXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0RmlsdGVyRWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudXBkYXRlQ3Jvc3NJY29uID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LnZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZUZpbHRlck1zZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlclNldHRpbmdzLnR5cGUgPT09ICdmaWx0ZXJiYXInKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgICAgICB2YXIgZm9ybWF0ZXIgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3ZhbHVlRm9ybWF0dGVyJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZpbHRlclNldHRpbmdzLnNob3dGaWx0ZXJCYXJTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29sdW1ucy5sZW5ndGggPiAwICYmIHRoaXMuZmlsdGVyU3RhdHVzTXNnICE9PSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGNvbHVtbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uc1tpbmRleF0uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgKz0gJyAmJiAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgKz0gY29sdW1uLmhlYWRlclRleHQgKyAnOiAnICsgdGhpcy52YWx1ZXNbY29sdW1uLmZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLnVwZGF0ZUV4dGVybmFsTWVzc2FnZSh0aGlzLmZpbHRlclN0YXR1c01zZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuY2hlY2tGb3JTa2lwSW5wdXQgPSBmdW5jdGlvbiAoY29sdW1uLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGlzU2tpcDtcbiAgICAgICAgICAgIHZhciBza2lwSW5wdXQ7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgc2tpcElucHV0ID0gWyc9JywgJyAnLCAnISddO1xuICAgICAgICAgICAgICAgIGlmIChlajJfZGF0YV8xLkRhdGFVdGlsLm9wZXJhdG9yU3ltYm9sc1t2YWx1ZV0gfHwgc2tpcElucHV0LmluZGV4T2YodmFsdWUpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNTa2lwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb2x1bW4udHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBza2lwSW5wdXQgPSBbJz4nLCAnPCcsICc9JywgJyEnXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZhbHVlXzEgPSB2YWx1ZTsgX2kgPCB2YWx1ZV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gdmFsdWVfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChza2lwSW5wdXQuaW5kZXhPZih2YWwpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2tpcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXNTa2lwO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnByb2Nlc3NGaWx0ZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lcihlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5zdGFydFRpbWVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgX3RoaXMub25UaW1lclRpY2soKTsgfSwgZS5rZXlDb2RlID09PSAxMyA/IDAgOiB0aGlzLmZpbHRlclNldHRpbmdzLmltbWVkaWF0ZU1vZGVEZWxheSk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuc3RvcFRpbWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUub25UaW1lclRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyRWxlbWVudCA9IHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKVxuICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuY29sdW1uLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJyk7XG4gICAgICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZpbHRlckVsZW1lbnQudmFsdWUpKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQodGhpcy5jb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVGaWx0ZXJWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQnlDb2x1bW4odGhpcy5jb2x1bW4uZmllbGQsIHRoaXMub3BlcmF0b3IsIHRoaXMudmFsdWUsIHRoaXMucHJlZGljYXRlLCB0aGlzLm1hdGNoQ2FzZSk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmNvbHVtbi5maWVsZF0gPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQudmFsdWUgPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudmFsaWRhdGVGaWx0ZXJWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBza2lwSW5wdXQ7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICB0aGlzLm1hdGNoQ2FzZSA9IHRydWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuY29sdW1uLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWw7XG4gICAgICAgICAgICAgICAgICAgIHNraXBJbnB1dCA9IFsnPicsICc8JywgJz0nLCAnISddO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tpcElucHV0LmluZGV4T2YodmFsdWVbaV0pID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPcGVyYXRvcih2YWx1ZS5zdWJzdHJpbmcoaW5kZXgpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gJycgJiYgdmFsdWUubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlRm9ybWF0dGVyLmZyb21WaWV3KHRoaXMudmFsdWUsIHRoaXMuY29sdW1uLmdldFBhcnNlcigpLCB0aGlzLmNvbHVtbi50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4odGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdJbnZhbGlkRmlsdGVyTWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLmVxdWFsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9wZXJhdG9yKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZUZvcm1hdHRlci5mcm9tVmlldyh0aGlzLnZhbHVlLCB0aGlzLmNvbHVtbi5nZXRQYXJzZXIoKSwgdGhpcy5jb2x1bW4udHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdJbnZhbGlkRmlsdGVyTWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hDYXNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5jaGFyQXQoMCkgPT09ICcqJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuc3RhcnRzV2l0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5jaGFyQXQodmFsdWUubGVuZ3RoIC0gMSkgPT09ICclJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc2xpY2UoMCwgLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLnN0YXJ0c1dpdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUuY2hhckF0KDApID09PSAnJScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLmVuZHNXaXRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLnN0YXJ0c1dpdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScgfHwgdmFsdWUgPT09ICcxJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJyB8fCB2YWx1ZSA9PT0gJzAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyA9IHRoaXMubDEwbi5nZXRDb25zdGFudCgnSW52YWxpZEZpbHRlck1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZXRPcGVyYXRvciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHNpbmdsZU9wID0gdmFsdWUuY2hhckF0KDApO1xuICAgICAgICAgICAgdmFyIG11bHRpcGxlT3AgPSB2YWx1ZS5zbGljZSgwLCAyKTtcbiAgICAgICAgICAgIHZhciBvcGVyYXRvcnMgPSBlajJfYmFzZV8xLmV4dGVuZCh7ICc9JzogdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWwsICchJzogdGhpcy5maWx0ZXJPcGVyYXRvcnMubm90RXF1YWwgfSwgZWoyX2RhdGFfMS5EYXRhVXRpbC5vcGVyYXRvclN5bWJvbHMpO1xuICAgICAgICAgICAgaWYgKG9wZXJhdG9ycy5oYXNPd25Qcm9wZXJ0eShzaW5nbGVPcCkgfHwgb3BlcmF0b3JzLmhhc093blByb3BlcnR5KG11bHRpcGxlT3ApKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yc1tzaW5nbGVPcF07XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3BlcmF0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yc1ttdWx0aXBsZU9wXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcGVyYXRvciA9PT0gdGhpcy5maWx0ZXJPcGVyYXRvcnMubGVzc1RoYW4gfHwgdGhpcy5vcGVyYXRvciA9PT0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZ3JlYXRlclRoYW4pIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZS5jaGFyQXQoMCkgPT09ICc9Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5vcGVyYXRvciArICdvcmVxdWFsJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGZpbHRlckNlbGxzID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtZmlsdGVyYmFyY2VsbCcpKTtcbiAgICAgICAgICAgIGZpbHRlckNlbGxzLnNwbGljZShlLnRvSW5kZXgsIDAsIGZpbHRlckNlbGxzLnNwbGljZShlLmZyb21JbmRleCwgMSlbMF0pO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBmaWx0ZXJDZWxsc18xID0gZmlsdGVyQ2VsbHM7IF9pIDwgZmlsdGVyQ2VsbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGZpbHRlckNlbGxzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZXRMb2NhbGl6ZWRDdXN0b21PcGVyYXRvcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbnVtT3B0ciA9IFtcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiAnZXF1YWwnLCB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0VxdWFsJykgfSxcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiAnZ3JlYXRlclRoYW4nLCB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0dyZWF0ZXJUaGFuJykgfSxcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiAnZ3JlYXRlclRoYW5PckVxdWFsJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdHcmVhdGVyVGhhbk9yRXF1YWwnKSB9LFxuICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdsZXNzVGhhbicsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnTGVzc1RoYW4nKSB9LFxuICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdsZXNzVGhhbk9yRXF1YWwnLCB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0xlc3NUaGFuT3JFcXVhbCcpIH0sXG4gICAgICAgICAgICAgICAgeyB2YWx1ZTogJ25vdEVxdWFsJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdOb3RFcXVhbCcpIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICB0aGlzLmN1c3RvbU9wZXJhdG9ycyA9IHtcbiAgICAgICAgICAgICAgICBzdHJpbmdPcGVyYXRvcjogW1xuICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAnc3RhcnRzV2l0aCcsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnU3RhcnRzV2l0aCcpIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdlbmRzV2l0aCcsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnRW5kc1dpdGgnKSB9LFxuICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAnY29udGFpbnMnLCB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NvbnRhaW5zJykgfSxcbiAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogJ2VxdWFsJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdFcXVhbCcpIH0sIHsgdmFsdWU6ICdub3RFcXVhbCcsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnTm90RXF1YWwnKSB9XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBudW1iZXJPcGVyYXRvcjogbnVtT3B0cixcbiAgICAgICAgICAgICAgICBkYXRlT3BlcmF0b3I6IG51bU9wdHIsXG4gICAgICAgICAgICAgICAgZGF0ZXRpbWVPcGVyYXRvcjogbnVtT3B0cixcbiAgICAgICAgICAgICAgICBib29sZWFuT3BlcmF0b3I6IFtcbiAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogJ2VxdWFsJywgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdFcXVhbCcpIH0sIHsgdmFsdWU6ICdub3RFcXVhbCcsIHRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnTm90RXF1YWwnKSB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ21lbnUnIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2NoZWNrYm94JyB8fCB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnZXhjZWwnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSB1dGlsXzIucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZmlsdGVyLXBvcHVwJyk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1maWx0ZXJtZW51ZGl2JykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IGdPYmouZ2V0Q29sdW1uQnlVaWQodXRpbF8yLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWhlYWRlcmNlbGwnKS5maXJzdEVsZW1lbnRDaGlsZC5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdDbGllbnQgPSBnT2JqLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmQ2xpZW50ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbiA9IGNvbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmx0ckRsZ0RldGFpbHMuZmllbGQgPT09IGNvbC5maWVsZCAmJiB0aGlzLmZsdHJEbGdEZXRhaWxzLmlzT3Blbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlck1vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsdHJEbGdEZXRhaWxzID0geyBmaWVsZDogY29sLmZpZWxkLCBpc09wZW46IHRydWUgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJEaWFsb2dPcGVuKHRoaXMuY29sdW1uLCB0YXJnZXQsIGZDbGllbnQucmlnaHQgLSBnQ2xpZW50LmxlZnQsIGZDbGllbnQuYm90dG9tIC0gZ0NsaWVudC50b3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGVwaWNrZXJFbGUgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRheScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJNb2R1bGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICghdXRpbF8yLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXBvcHVwLXdyYXBwZXInKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICghZWoyX2Jhc2VfMS5jbG9zZXN0KHRhcmdldCwgJy5lLWZpbHRlci1pdGVtLmUtbWVudS1pdGVtJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCF1dGlsXzIucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtcG9wdXAnKSkpICYmICFkYXRlcGlja2VyRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5jbG9zZURpYWxvZyh0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmZpbHRlckhhbmRsZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGZpbHRlckljb25FbGVtZW50O1xuICAgICAgICAgICAgdmFyIGRhdGFNYW5hZ2VyID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIodGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zKTtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkud2hlcmUoJ2ZpZWxkJywgdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWwsIGFyZ3MuZmllbGQpO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGRhdGFNYW5hZ2VyLmV4ZWN1dGVMb2NhbChxdWVyeSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbaV0uZmllbGQgPT09IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1uc1tqXS5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBqO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaWNvbkNsYXNzID0gdGhpcy5wYXJlbnQuc2hvd0NvbHVtbk1lbnUgPyAnLmUtY29sdW1ubWVudScgOiAnLmUtaWNvbi1maWx0ZXInO1xuICAgICAgICAgICAgZmlsdGVySWNvbkVsZW1lbnQgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGFyZ3MuZmllbGQpLnF1ZXJ5U2VsZWN0b3IoaWNvbkNsYXNzKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmFjdGlvbiA9PT0gJ2ZpbHRlcmluZycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMgPSB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMuY29uY2F0KGFyZ3MuZmlsdGVyQ29sbGVjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggJiYgZmlsdGVySWNvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVySWNvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1maWx0ZXJlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJJY29uRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJJY29uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWZpbHRlcmVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGaWx0ZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkZpbHRlciA9IEZpbHRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2ZpbHRlci5qc1xuLy8gbW9kdWxlIGlkID0gNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBGaWx0ZXJDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRmlsdGVyQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBGaWx0ZXJDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ1RIJywgeyBjbGFzc05hbWU6ICdlLWZpbHRlcmJhcmNlbGwnIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEZpbHRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0R3VpID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdmFyIGlubmVyRElWID0gdGhpcy5nZXRHdWkoKTtcbiAgICAgICAgICAgIHZhciBpbnB1dDtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjZWxsLmNvbHVtbjtcbiAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSAhPT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgIGlmICgoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uYWxsb3dGaWx0ZXJpbmcpIHx8IGNvbHVtbi5hbGxvd0ZpbHRlcmluZykgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpbHRlckJhclRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZmx0cnRlbXAnKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGlubmVyRElWLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAnZS1mbHRydGVtcGRpdidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZS5jcmVhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcsIGNsYXNzTmFtZTogJ2UtZmlsdGVyVWlfaW5wdXQgZS1maWx0ZXJ0ZXh0IGUtZmx0clRlbXAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHR5cGU6ICdzZWFyY2gnLCB0aXRsZTogY29sdW1uLmhlYWRlclRleHQgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHsgY29sdW1uOiBjb2x1bW4gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sdW1uLmZpbHRlckJhclRlbXBsYXRlLmNyZWF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSB0ZW1wKGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBkaXYuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyhpbm5lckRJViwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAnZS1maWx0ZXJVaV9pbnB1dCBlLWZpbHRlcnRleHQgZS1mbHRyVGVtcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGNvbHVtbi5oZWFkZXJUZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb2x1bW4uZmllbGQgKyAnX2ZpbHRlckJhcmNlbGwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyhpbm5lckRJViwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2UtZmlsdGVyZGl2IGUtZmx0cmlucHV0ZGl2J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcsIGNsYXNzTmFtZTogJ2UtZmlsdGVydGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWFyY2gnLCB0aXRsZTogY29sdW1uLmhlYWRlclRleHQgKyBjZWxsLmF0dHJpYnV0ZXMudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGFbY2VsbC5jb2x1bW4uZmllbGRdID8gZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0gOiAnJywgcm9sZTogJ3NlYXJjaCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJESVYuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jYW5jZWwgZS1oaWRlIGUtaWNvbnMgZS1pY29uLWhpZGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgJ2FyaWEtbGFiZWwnOiAnY2xlYXIgZmlsdGVyIGNlbGwnLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5hbGxvd0ZpbHRlcmluZyA9PT0gZmFsc2UgfHwgY29sdW1uLmZpZWxkID09PSAnJyB8fCBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWVsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoJ2UtZGlzYWJsZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWNvbHVtbi52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnZS1oaWRlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uYWxsb3dGaWx0ZXJpbmcpIHx8IGNvbHVtbi5hbGxvd0ZpbHRlcmluZykgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpbHRlckJhclRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVSZWFkID0gY29sdW1uLmZpbHRlckJhclRlbXBsYXRlLnJlYWQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZVdyaXRlID0gY29sdW1uLmZpbHRlckJhclRlbXBsYXRlLndyaXRlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHsgZWxlbWVudDogaW5wdXQsIGNvbHVtbjogY29sdW1uIH07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcGxhdGVSZWFkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWFkID0gYXJncy5jb2x1bW4gPSBlajJfYmFzZV8xLmdldFZhbHVlKHRlbXBsYXRlUmVhZCwgd2luZG93KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXBsYXRlV3JpdGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVdyaXRlID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wbGF0ZVdyaXRlLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlV3JpdGUuY2FsbCh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRIdG1sKG5vZGUsIGlubmVyRElWKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmFwcGVuZEh0bWwgPSBmdW5jdGlvbiAobm9kZSwgaW5uZXJIdG1sKSB7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGlubmVySHRtbCk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZpbHRlckNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkZpbHRlckNlbGxSZW5kZXJlciA9IEZpbHRlckNlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9maWx0ZXItY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCIuL2ZpbHRlci1tZW51LW9wZXJhdG9yXCIsIFwiLi9zdHJpbmctZmlsdGVyLXVpXCIsIFwiLi9udW1iZXItZmlsdGVyLXVpXCIsIFwiLi9ib29sZWFuLWZpbHRlci11aVwiLCBcIi4vZGF0ZS1maWx0ZXItdWlcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX3BvcHVwc18xLCBmaWx0ZXJfbWVudV9vcGVyYXRvcl8xLCBzdHJpbmdfZmlsdGVyX3VpXzEsIG51bWJlcl9maWx0ZXJfdWlfMSwgYm9vbGVhbl9maWx0ZXJfdWlfMSwgZGF0ZV9maWx0ZXJfdWlfMSwgdXRpbF8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZpbHRlck1lbnVSZW5kZXJlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZpbHRlck1lbnVSZW5kZXJlcihwYXJlbnQsIGZpbHRlclNldHRpbmdzLCBzZXJ2aWNlTG9jYXRvciwgY3VzdG9tRmx0ck9wZXJhdG9ycywgZmx0ck9iaikge1xuICAgICAgICAgICAgdGhpcy5jb2xUeXBlcyA9IHtcbiAgICAgICAgICAgICAgICAnc3RyaW5nJzogc3RyaW5nX2ZpbHRlcl91aV8xLlN0cmluZ0ZpbHRlclVJLCAnbnVtYmVyJzogbnVtYmVyX2ZpbHRlcl91aV8xLk51bWJlckZpbHRlclVJLCAnZGF0ZSc6IGRhdGVfZmlsdGVyX3VpXzEuRGF0ZUZpbHRlclVJLCAnYm9vbGVhbic6IGJvb2xlYW5fZmlsdGVyX3VpXzEuQm9vbGVhbkZpbHRlclVJLCAnZGF0ZXRpbWUnOiBkYXRlX2ZpbHRlcl91aV8xLkRhdGVGaWx0ZXJVSVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncyA9IGZpbHRlclNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21GaWx0ZXJPcGVyYXRvcnMgPSBjdXN0b21GbHRyT3BlcmF0b3JzO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJPYmogPSBmbHRyT2JqO1xuICAgICAgICAgICAgdGhpcy5mbE11aU9iaiA9IG5ldyBmaWx0ZXJfbWVudV9vcGVyYXRvcl8xLkZsTWVudU9wdHJVSSh0aGlzLnBhcmVudCwgdGhpcy5jdXN0b21GaWx0ZXJPcGVyYXRvcnMsIHRoaXMuc2VydmljZUxvY2F0b3IpO1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBGaWx0ZXJNZW51UmVuZGVyZXIucHJvdG90eXBlLm9wZW5EaWFsb2cgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5jb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGFyZ3MuZmllbGQpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb2wuZmlsdGVyKSB8fCAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbC5maWx0ZXIudHlwZSkgfHwgdGhpcy5jb2wuZmlsdGVyLnR5cGUgPT09ICdtZW51JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckRsZ0NvbnRlbnQoYXJncy50YXJnZXQsIHRoaXMuY29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyTWVudVJlbmRlcmVyLnByb3RvdHlwZS5jbG9zZURpYWxvZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kbGdPYmouZWxlbWVudC5pZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5kbGdPYmogJiYgIXRoaXMuZGxnT2JqLmlzRGVzdHJveWVkICYmIGVsZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmZpbHRlck1lbnVDbG9zZSwgeyBmaWVsZDogdGhpcy5jb2wuZmllbGQgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKGVsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJNZW51UmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckRsZ0NvbnRlbnQgPSBmdW5jdGlvbiAodGFyZ2V0LCBjb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBtYWluRGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZmxtZW51LW1haW5kaXYnLCBpZDogY29sdW1uLnVpZCArICctZmxtZW51JyB9KTtcbiAgICAgICAgICAgIHRoaXMuZGxnRGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZmxtZW51JywgaWQ6IGNvbHVtbi51aWQgKyAnLWZsbWRsZycgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZGxnRGl2KTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqID0gbmV3IGVqMl9wb3B1cHNfMS5EaWFsb2coe1xuICAgICAgICAgICAgICAgIHNob3dDbG9zZUljb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNsb3NlT25Fc2NhcGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5wYXJlbnQubG9jYWxlLFxuICAgICAgICAgICAgICAgIHZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IHRoaXMuZGlhbG9nQ3JlYXRlZC5iaW5kKHRoaXMsIHRhcmdldCwgY29sdW1uKSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV2aWNlJykgPyB7IFg6ICdjZW50ZXInLCBZOiAnY2VudGVyJyB9IDogeyBYOiAnJywgWTogJycgfSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldmljZScpID8gZG9jdW1lbnQuYm9keSA6IHRoaXMucGFyZW50LmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgYnV0dG9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmZpbHRlckJ0bkNsaWNrLmJpbmQodGhpcywgY29sdW1uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdGaWx0ZXJCdXR0b24nKSwgaXNQcmltYXJ5OiB0cnVlLCBjc3NDbGFzczogJ2UtZmxtZW51LW9rYnRuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jbGVhckJ0bkNsaWNrLmJpbmQodGhpcywgY29sdW1uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2xlYXJCdXR0b24nKSwgY3NzQ2xhc3M6ICdlLWZsbWVudS1jYW5jZWxidG4nIH1cbiAgICAgICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgY29udGVudDogbWFpbkRpdixcbiAgICAgICAgICAgICAgICB3aWR0aDogKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1iaWdnZXInKSkpIHx8IHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldmljZScpID8gMjYwIDogMjUwLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvblNldHRpbmdzOiB7IGVmZmVjdDogJ05vbmUnIH0sXG4gICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLWZpbHRlci1wb3B1cCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kbGdPYmouYXBwZW5kVG8odGhpcy5kbGdEaXYpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJNZW51UmVuZGVyZXIucHJvdG90eXBlLmRpYWxvZ0NyZWF0ZWQgPSBmdW5jdGlvbiAodGFyZ2V0LCBjb2x1bW4pIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLmdldEZpbHRlck1lbnVQb3N0aW9uKHRhcmdldCwgdGhpcy5kbGdPYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJGaWx0ZXJVSSh0YXJnZXQsIGNvbHVtbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmZpbHRlckRpYWxvZ0NyZWF0ZWQsIHt9KTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gJzM1MHB4JztcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLnNob3coKTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVNZXRob2QoY29sdW1uLCB0aGlzLmRsZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgY29sdW1uLnVpZCArICctZmxtZW51JykpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJNZW51UmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZpbHRlclVJID0gZnVuY3Rpb24gKHRhcmdldCwgY29sKSB7XG4gICAgICAgICAgICB2YXIgZGxnQ29uZXRudEVsZSA9IHRoaXMuZGxnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZmxtZW51LW1haW5kaXYnKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyT3BlcmF0b3JVSShkbGdDb25ldG50RWxlLCB0YXJnZXQsIGNvbCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZsVmFsdWVVSShkbGdDb25ldG50RWxlLCB0YXJnZXQsIGNvbCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlck1lbnVSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyT3BlcmF0b3JVSSA9IGZ1bmN0aW9uIChkbGdDb25ldG50RWxlLCB0YXJnZXQsIGNvbHVtbikge1xuICAgICAgICAgICAgdGhpcy5mbE11aU9iai5yZW5kZXJPcGVyYXRvclVJKGRsZ0NvbmV0bnRFbGUsIHRhcmdldCwgY29sdW1uLCB0aGlzLmRsZ09iaik7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlck1lbnVSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRmxWYWx1ZVVJID0gZnVuY3Rpb24gKGRsZ0NvbmV0bnRFbGUsIHRhcmdldCwgY29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVEaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1mbG1lbnUtdmFsdWVkaXYnIH0pO1xuICAgICAgICAgICAgZGxnQ29uZXRudEVsZS5hcHBlbmRDaGlsZCh2YWx1ZURpdik7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHsgdGFyZ2V0OiB2YWx1ZURpdiwgY29sdW1uOiBjb2x1bW4sIGdldE9wdHJJbnN0YW5jZTogdGhpcy5mbE11aU9iaiwgZGlhbG9nT2JqOiB0aGlzLmRsZ09iaiB9O1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlb2ZGaWx0ZXJVSSA9IG5ldyB0aGlzLmNvbFR5cGVzW2NvbHVtbi50eXBlXSh0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvciwgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWx0ZXIpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWx0ZXIudWkpXG4gICAgICAgICAgICAgICAgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpbHRlci51aS5jcmVhdGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjb2x1bW4uZmlsdGVyLnVpLmNyZWF0ZTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXAgPSBlajJfYmFzZV8xLmdldFZhbHVlKHRlbXAsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbHVtbi5maWx0ZXIudWkuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4sIHRhcmdldDogdmFsdWVEaXYsXG4gICAgICAgICAgICAgICAgICAgIGdldE9wdHJJbnN0YW5jZTogdGhpcy5mbE11aU9iaiwgZGlhbG9nT2JqOiB0aGlzLmRsZ09ialxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VvZkZpbHRlclVJLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLCB0YXJnZXQ6IHZhbHVlRGl2LFxuICAgICAgICAgICAgICAgICAgICBnZXRPcHRySW5zdGFuY2U6IHRoaXMuZmxNdWlPYmosIGxvY2FsaXplVGV4dDogdGhpcy5sMTBuLCBkaWFsb2dPYmo6IHRoaXMuZGxnT2JqXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlck1lbnVSZW5kZXJlci5wcm90b3R5cGUud3JpdGVNZXRob2QgPSBmdW5jdGlvbiAoY29sLCBkbGdDb250ZW50RWxlKSB7XG4gICAgICAgICAgICB2YXIgZmxWYWx1ZTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBkbGdDb250ZW50RWxlLnF1ZXJ5U2VsZWN0b3IoJy5lLWZsbWVudS12YWxpbnB1dCcpO1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlb2ZGaWx0ZXJVSSA9IG5ldyB0aGlzLmNvbFR5cGVzW2NvbC50eXBlXSh0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvciwgdGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3MpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHVtbnNfMSA9IGNvbHVtbnM7IF9pIDwgY29sdW1uc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wuZmllbGQgPT09IGNvbHVtbi5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICBmbFZhbHVlID0gY29sdW1uLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2wuZmlsdGVyKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2wuZmlsdGVyLnVpKVxuICAgICAgICAgICAgICAgICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbC5maWx0ZXIudWkud3JpdGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjb2wuZmlsdGVyLnVpLndyaXRlO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGVqMl9iYXNlXzEuZ2V0VmFsdWUodGVtcCwgd2luZG93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29sLmZpbHRlci51aS53cml0ZSh7IGNvbHVtbjogY29sLCB0YXJnZXQ6IHRhcmdldCwgcGFyZW50OiB0aGlzLnBhcmVudCwgZmlsdGVyZWRWYWx1ZTogZmxWYWx1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlb2ZGaWx0ZXJVSS53cml0ZSh7IGNvbHVtbjogY29sLCB0YXJnZXQ6IHRhcmdldCwgcGFyZW50OiB0aGlzLnBhcmVudCwgZmlsdGVyZWRWYWx1ZTogZmxWYWx1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyTWVudVJlbmRlcmVyLnByb3RvdHlwZS5maWx0ZXJCdG5DbGljayA9IGZ1bmN0aW9uIChjb2wpIHtcbiAgICAgICAgICAgIHZhciBmbFZhbHVlO1xuICAgICAgICAgICAgdmFyIGZsT3B0clZhbHVlO1xuICAgICAgICAgICAgdmFyIHRhcmcgPSB0aGlzLmRsZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWZsbWVudS12YWx1ZWRpdiBpbnB1dCcpO1xuICAgICAgICAgICAgZmxPcHRyVmFsdWUgPSB0aGlzLmZsTXVpT2JqLmdldEZsT3BlcmF0b3IoKTtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZW9mRmlsdGVyVUkgPSBuZXcgdGhpcy5jb2xUeXBlc1tjb2wudHlwZV0odGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IsIHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2wuZmlsdGVyKSAmJlxuICAgICAgICAgICAgICAgICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbC5maWx0ZXIudWkpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbC5maWx0ZXIudWkucmVhZCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGNvbC5maWx0ZXIudWkucmVhZDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXAgPSBlajJfYmFzZV8xLmdldFZhbHVlKHRlbXAsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZsVmFsdWUgPSBjb2wuZmlsdGVyLnVpLnJlYWQoeyBlbGVtZW50OiB0YXJnLCBjb2x1bW46IGNvbCwgb3BlcmF0b3I6IGZsT3B0clZhbHVlLCBmbHRyT2JqOiB0aGlzLmZpbHRlck9iaiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlb2ZGaWx0ZXJVSS5yZWFkKHRhcmcsIGNvbCwgZmxPcHRyVmFsdWUsIHRoaXMuZmlsdGVyT2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpY29uQ2xhc3MgPSB0aGlzLnBhcmVudC5zaG93Q29sdW1uTWVudSA/ICcuZS1jb2x1bW5tZW51JyA6ICcuZS1pY29uLWZpbHRlcic7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZS1tYXBwaW5ndWlkPVwiJyArIGNvbC51aWQgKyAnXCJdJykucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIHZhciBmbEljb24gPSBjb2x1bW4ucXVlcnlTZWxlY3RvcihpY29uQ2xhc3MpO1xuICAgICAgICAgICAgaWYgKGZsSWNvbikge1xuICAgICAgICAgICAgICAgIGZsSWNvbi5jbGFzc0xpc3QuYWRkKCdlLWZpbHRlcmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlck1lbnVSZW5kZXJlci5wcm90b3R5cGUuY2xlYXJCdG5DbGljayA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyT2JqLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQoY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIHZhciBpY29uQ2xhc3MgPSB0aGlzLnBhcmVudC5zaG93Q29sdW1uTWVudSA/ICcuZS1jb2x1bW5tZW51JyA6ICcuZS1pY29uLWZpbHRlcic7XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZS1tYXBwaW5ndWlkPVwiJyArIGNvbHVtbi51aWQgKyAnXCJdJykucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIHZhciBmbEljb24gPSBjb2wucXVlcnlTZWxlY3RvcihpY29uQ2xhc3MpO1xuICAgICAgICAgICAgaWYgKGZsSWNvbikge1xuICAgICAgICAgICAgICAgIGZsSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdlLWZpbHRlcmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlck1lbnVSZW5kZXJlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZpbHRlck1lbnVSZW5kZXJlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRmlsdGVyTWVudVJlbmRlcmVyID0gRmlsdGVyTWVudVJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2ZpbHRlci1tZW51LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9kcm9wZG93bnNfMSwgZWoyX2RhdGFfMSwgZWoyX2Jhc2VfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTdHJpbmdGaWx0ZXJVSSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFN0cmluZ0ZpbHRlclVJKHBhcmVudCwgc2VydmljZUxvY2F0b3IsIGZpbHRlclNldHRpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VyTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncyA9IGZpbHRlclNldHRpbmdzO1xuICAgICAgICB9XG4gICAgICAgIFN0cmluZ0ZpbHRlclVJLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkYXRhO1xuICAgICAgICAgICAgdmFyIGZsb3B0cjtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBjbGFzc05hbWU6ICdlLWZsbWVudS1pbnB1dCcsIGlkOiAnc3RydWktJyArIGFyZ3MuY29sdW1uLnVpZCB9KTtcbiAgICAgICAgICAgIGFyZ3MudGFyZ2V0LmFwcGVuZENoaWxkKHRoaXMuaW5zdGFuY2UpO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmogPSBhcmdzLmRpYWxvZ09iajtcbiAgICAgICAgICAgIHRoaXMuYWN0T2JqID0gbmV3IGVqMl9kcm9wZG93bnNfMS5BdXRvQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IHRoaXMucGFyZW50LmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyID9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YVNvdXJjZSA6IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMucGFyZW50LmRhdGFTb3VyY2UpLFxuICAgICAgICAgICAgICAgIGZpZWxkczogeyB2YWx1ZTogYXJncy5jb2x1bW4uZmllbGQgfSxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IHRoaXMucGFyZW50LmxvY2FsZSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXI6ICdBc2NlbmRpbmcnLFxuICAgICAgICAgICAgICAgIG9wZW46IHRoaXMub3BlblBvcHVwLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLXBvcHVwLWZsbWVudScsXG4gICAgICAgICAgICAgICAgZm9jdXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWN0T2JqLmZpbHRlclR5cGUgPSBhcmdzLmdldE9wdHJJbnN0YW5jZS5nZXRGbE9wZXJhdG9yKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhdXRvZmlsbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogYXJncy5sb2NhbGl6ZVRleHQuZ2V0Q29uc3RhbnQoJ0VudGVyVmFsdWUnKSxcbiAgICAgICAgICAgICAgICBhY3Rpb25Db21wbGV0ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5yZXN1bHQgPSBlLnJlc3VsdC5maWx0ZXIoZnVuY3Rpb24gKG9iaiwgaW5kZXgsIGFycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKG1hcE9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXBPYmpbX3RoaXMuYWN0T2JqLmZpZWxkcy52YWx1ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5pbmRleE9mKG9ialtfdGhpcy5hY3RPYmouZmllbGRzLnZhbHVlXSkgPT09IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYWN0T2JqLmFwcGVuZFRvKHRoaXMuaW5zdGFuY2UpO1xuICAgICAgICB9O1xuICAgICAgICBTdHJpbmdGaWx0ZXJVSS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICBpZiAoYXJncy5maWx0ZXJlZFZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHZhciBzdHJ1aU9iaiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdHJ1aS0nICsgYXJncy5jb2x1bW4udWlkKS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgICAgIHN0cnVpT2JqLnZhbHVlID0gYXJncy5maWx0ZXJlZFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTdHJpbmdGaWx0ZXJVSS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb2x1bW4sIGZpbHRlck9wdHIsIGZpbHRlck9iaikge1xuICAgICAgICAgICAgdmFyIGFjdHVpT2JqID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0cnVpLScgKyBjb2x1bW4udWlkKS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgdmFyIGZpbHRlclZhbHVlID0gYWN0dWlPYmoudmFsdWU7XG4gICAgICAgICAgICBmaWx0ZXJPYmouZmlsdGVyQnlDb2x1bW4oY29sdW1uLmZpZWxkLCBmaWx0ZXJPcHRyLCBmaWx0ZXJWYWx1ZSwgJ2FuZCcsIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgU3RyaW5nRmlsdGVyVUkucHJvdG90eXBlLm9wZW5Qb3B1cCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB1dGlsXzEuZ2V0WkluZGV4Q2FsY3VhbHRpb24oYXJncywgdGhpcy5kaWFsb2dPYmopO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU3RyaW5nRmlsdGVyVUk7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlN0cmluZ0ZpbHRlclVJID0gU3RyaW5nRmlsdGVyVUk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvc3RyaW5nLWZpbHRlci11aS5qc1xuLy8gbW9kdWxlIGlkID0gNjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9kcm9wZG93bnNfMSwgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2RhdGFfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRmxNZW51T3B0clVJID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRmxNZW51T3B0clVJKHBhcmVudCwgY3VzdG9tRmx0ck9wZXJhdG9ycywgc2VydmljZUxvY2F0b3IsIGZpbHRlclNldHRpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MgPSBmaWx0ZXJTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tRmlsdGVyT3BlcmF0b3JzID0gY3VzdG9tRmx0ck9wZXJhdG9ycztcbiAgICAgICAgfVxuICAgICAgICBGbE1lbnVPcHRyVUkucHJvdG90eXBlLnJlbmRlck9wZXJhdG9yVUkgPSBmdW5jdGlvbiAoZGxnQ29uZXRudEVsZSwgdGFyZ2V0LCBjb2x1bW4sIGRsZ09iaikge1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmogPSBkbGdPYmo7XG4gICAgICAgICAgICB2YXIgb3B0ciA9IGNvbHVtbi50eXBlICsgJ09wZXJhdG9yJztcbiAgICAgICAgICAgIHRoaXMub3B0ckRhdGEgPSB0aGlzLmN1c3RvbU9wdHIgPSAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnQuZmlsdGVyU2V0dGluZ3Mub3BlcmF0b3JzKSAmJlxuICAgICAgICAgICAgICAgICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucGFyZW50LmZpbHRlclNldHRpbmdzLm9wZXJhdG9yc1tvcHRyXSkpID9cbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5vcGVyYXRvcnNbb3B0cl0gOiB0aGlzLmN1c3RvbUZpbHRlck9wZXJhdG9yc1tvcHRyXTtcbiAgICAgICAgICAgIHZhciBkcm9wRGF0YXNvdXJjZSA9IHRoaXMuY3VzdG9tT3B0cjtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFZhbHVlID0gdGhpcy5kcm9wU2VsZWN0ZWRWYWwoY29sdW1uLCBvcHRyKTtcbiAgICAgICAgICAgIHZhciBvcHRyRGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZmxtX29wdHJkaXYnIH0pO1xuICAgICAgICAgICAgZGxnQ29uZXRudEVsZS5hcHBlbmRDaGlsZChvcHRyRGl2KTtcbiAgICAgICAgICAgIHZhciBvcHRySW5wdXQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBpZDogY29sdW1uLnVpZCArICctZmxvcHRyJyB9KTtcbiAgICAgICAgICAgIG9wdHJEaXYuYXBwZW5kQ2hpbGQob3B0cklucHV0KTtcbiAgICAgICAgICAgIHRoaXMuZHJvcE9wdHIgPSBuZXcgZWoyX2Ryb3Bkb3duc18xLkRyb3BEb3duTGlzdCh7XG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZTogZHJvcERhdGFzb3VyY2UsXG4gICAgICAgICAgICAgICAgZmllbGRzOiB7IHRleHQ6ICd0ZXh0JywgdmFsdWU6ICd2YWx1ZScgfSxcbiAgICAgICAgICAgICAgICBvcGVuOiB0aGlzLmRyb3BEb3duT3Blbi5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIHRleHQ6IHNlbGVjdGVkVmFsdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kcm9wT3B0ci5hcHBlbmRUbygnIycgKyBjb2x1bW4udWlkICsgJy1mbG9wdHInKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmxNZW51T3B0clVJLnByb3RvdHlwZS5kcm9wRG93bk9wZW4gPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgYXJncy5wb3B1cC5lbGVtZW50LnN0eWxlLnpJbmRleCA9ICh0aGlzLmRpYWxvZ09iai56SW5kZXggKyAxKS50b1N0cmluZygpO1xuICAgICAgICB9O1xuICAgICAgICBGbE1lbnVPcHRyVUkucHJvdG90eXBlLmRyb3BTZWxlY3RlZFZhbCA9IGZ1bmN0aW9uIChjb2wsIG9wdHIpIHtcbiAgICAgICAgICAgIHZhciBzZWxWYWx1ZSA9ICcnO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLnBhcmVudC5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfaSA8IGNvbHVtbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLmZpZWxkID09PSBjb2x1bW4uZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkRmllbGQgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih0aGlzLm9wdHJEYXRhKS5leGVjdXRlTG9jYWwobmV3IGVqMl9kYXRhXzEuUXVlcnkoKS53aGVyZSgndmFsdWUnLCAnZXF1YWwnLCBjb2x1bW4ub3BlcmF0b3IpKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsVmFsdWUgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChzZWxlY3RlZEZpZWxkWzBdKSA/IHNlbGVjdGVkRmllbGRbMF0udGV4dCA6ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxWYWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBzZWxWYWx1ZSA9IHRoaXMub3B0ckRhdGFbMF0udGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWxWYWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmxNZW51T3B0clVJLnByb3RvdHlwZS5nZXRGbE9wZXJhdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHJvcE9wdHIudmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGbE1lbnVPcHRyVUk7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkZsTWVudU9wdHJVSSA9IEZsTWVudU9wdHJVSTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9maWx0ZXItbWVudS1vcGVyYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gNjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2lucHV0c18xLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBOdW1iZXJGaWx0ZXJVSSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE51bWJlckZpbHRlclVJKHBhcmVudCwgc2VydmljZUxvY2F0b3IsIGZpbHRlclNldHRpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzID0gZmlsdGVyU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgfVxuICAgICAgICBOdW1iZXJGaWx0ZXJVSS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBjbGFzc05hbWU6ICdlLWZsbWVudS1pbnB1dCcsIGlkOiAnbnVtYmVydWktJyArIGFyZ3MuY29sdW1uLnVpZCB9KTtcbiAgICAgICAgICAgIGFyZ3MudGFyZ2V0LmFwcGVuZENoaWxkKHRoaXMuaW5zdGFuY2UpO1xuICAgICAgICAgICAgdGhpcy5udW1lcmljVHh0T2JqID0gbmV3IGVqMl9pbnB1dHNfMS5OdW1lcmljVGV4dEJveCh7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBhcmdzLmNvbHVtbi5mb3JtYXQsXG4gICAgICAgICAgICAgICAgbG9jYWxlOiB0aGlzLnBhcmVudC5sb2NhbGUsXG4gICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLXBvcHVwLWZsbWVudScsXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGFyZ3MubG9jYWxpemVUZXh0LmdldENvbnN0YW50KCdFbnRlclZhbHVlJyksXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMubnVtZXJpY1R4dE9iai5hcHBlbmRUbyh0aGlzLmluc3RhbmNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtYmVyRmlsdGVyVUkucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBudW1iZXJ1aU9iaiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNudW1iZXJ1aS0nICsgYXJncy5jb2x1bW4udWlkKS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgbnVtYmVydWlPYmoudmFsdWUgPSBhcmdzLmZpbHRlcmVkVmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIE51bWJlckZpbHRlclVJLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbHVtbiwgZmlsdGVyT3B0ciwgZmlsdGVyT2JqKSB7XG4gICAgICAgICAgICB2YXIgbnVtYmVydWlPYmogPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbnVtYmVydWktJyArIGNvbHVtbi51aWQpLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBudW1iZXJ1aU9iai52YWx1ZTtcbiAgICAgICAgICAgIGZpbHRlck9iai5maWx0ZXJCeUNvbHVtbihjb2x1bW4uZmllbGQsIGZpbHRlck9wdHIsIGZpbHRlclZhbHVlLCAnYW5kJywgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBOdW1iZXJGaWx0ZXJVSTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuTnVtYmVyRmlsdGVyVUkgPSBOdW1iZXJGaWx0ZXJVSTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9udW1iZXItZmlsdGVyLXVpLmpzXG4vLyBtb2R1bGUgaWQgPSA2OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHV0aWxfMSwgZWoyX2RhdGFfMSwgZWoyX2Ryb3Bkb3duc18xLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBCb29sZWFuRmlsdGVyVUkgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBCb29sZWFuRmlsdGVyVUkocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgZmlsdGVyU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncyA9IGZpbHRlclNldHRpbmdzO1xuICAgICAgICB9XG4gICAgICAgIEJvb2xlYW5GaWx0ZXJVSS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBkYXRhO1xuICAgICAgICAgICAgdGhpcy5lbGVtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgY2xhc3NOYW1lOiAnZS1mbG1lbnUtaW5wdXQnLCBpZDogJ2Jvb2wtdWktJyArIGFyZ3MuY29sdW1uLnVpZCB9KTtcbiAgICAgICAgICAgIGFyZ3MudGFyZ2V0LmFwcGVuZENoaWxkKHRoaXMuZWxlbSk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iaiA9IGFyZ3MuZGlhbG9nT2JqO1xuICAgICAgICAgICAgdGhpcy5kcm9wSW5zdGFuY2UgPSBuZXcgZWoyX2Ryb3Bkb3duc18xLkRyb3BEb3duTGlzdCh7XG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZTogdGhpcy5wYXJlbnQuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIgP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhU291cmNlIDogbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIodGhpcy5wYXJlbnQuZGF0YVNvdXJjZSksXG4gICAgICAgICAgICAgICAgcXVlcnk6IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkuc2VsZWN0KGFyZ3MuY29sdW1uLmZpZWxkKSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHsgdGV4dDogYXJncy5jb2x1bW4uZmllbGQsIHZhbHVlOiBhcmdzLmNvbHVtbi5maWVsZCB9LFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBhcmdzLmxvY2FsaXplVGV4dC5nZXRDb25zdGFudCgnU2VsZWN0VmFsdWUnKSxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtcG9wdXAtZmxtZW51JyxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IHRoaXMucGFyZW50LmxvY2FsZSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBvcGVuOiB0aGlzLm9wZW5Qb3B1cC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGFjdGlvbkNvbXBsZXRlOiB0aGlzLmRkQWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kcm9wSW5zdGFuY2UuYXBwZW5kVG8odGhpcy5lbGVtKTtcbiAgICAgICAgfTtcbiAgICAgICAgQm9vbGVhbkZpbHRlclVJLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZHJwdWlPYmogPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9vbC11aS0nICsgYXJncy5jb2x1bW4udWlkKS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgZHJwdWlPYmoudGV4dCA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MuZmlsdGVyZWRWYWx1ZSkgPyBhcmdzLmZpbHRlcmVkVmFsdWUgOiAnJztcbiAgICAgICAgfTtcbiAgICAgICAgQm9vbGVhbkZpbHRlclVJLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbHVtbiwgZmlsdGVyT3B0ciwgZmlsdGVyT2JqKSB7XG4gICAgICAgICAgICB2YXIgZHJwdWlPYmogPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9vbC11aS0nICsgY29sdW1uLnVpZCkuZWoyX2luc3RhbmNlc1swXTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJWYWx1ZSA9IGRycHVpT2JqLnZhbHVlO1xuICAgICAgICAgICAgZmlsdGVyT2JqLmZpbHRlckJ5Q29sdW1uKGNvbHVtbi5maWVsZCwgZmlsdGVyT3B0ciwgZmlsdGVyVmFsdWUsICdhbmQnLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5GaWx0ZXJVSS5wcm90b3R5cGUuZGRBY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnJlc3VsdCA9IHV0aWxfMS5kaXN0aW5jdFN0cmluZ1ZhbHVlcyhlLnJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5GaWx0ZXJVSS5wcm90b3R5cGUub3BlblBvcHVwID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHV0aWxfMS5nZXRaSW5kZXhDYWxjdWFsdGlvbihhcmdzLCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBCb29sZWFuRmlsdGVyVUk7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkJvb2xlYW5GaWx0ZXJVSSA9IEJvb2xlYW5GaWx0ZXJVSTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9ib29sZWFuLWZpbHRlci11aS5qc1xuLy8gbW9kdWxlIGlkID0gNjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWNhbGVuZGFyc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfY2FsZW5kYXJzXzEsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERhdGVGaWx0ZXJVSSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERhdGVGaWx0ZXJVSShwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCBmaWx0ZXJTZXR0aW5ncykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuZmx0clNldHRpbmdzID0gZmlsdGVyU2V0dGluZ3M7XG4gICAgICAgIH1cbiAgICAgICAgRGF0ZUZpbHRlclVJLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGludGwgPSBuZXcgZWoyX2Jhc2VfMi5JbnRlcm5hdGlvbmFsaXphdGlvbigpO1xuICAgICAgICAgICAgdmFyIGNvbEZvcm1hdCA9IGFyZ3MuY29sdW1uLmZvcm1hdDtcbiAgICAgICAgICAgIHZhciBmb3JtYXQgPSBpbnRsLmdldERhdGVQYXR0ZXJuKHsgdHlwZTogJ2RhdGUnLCBza2VsZXRvbjogY29sRm9ybWF0IH0sIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqID0gYXJncy5kaWFsb2dPYmo7XG4gICAgICAgICAgICB0aGlzLmlucHV0RWxlbSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGNsYXNzTmFtZTogJ2UtZmxtZW51LWlucHV0JywgaWQ6ICdkYXRldWktJyArIGFyZ3MuY29sdW1uLnVpZCB9KTtcbiAgICAgICAgICAgIGFyZ3MudGFyZ2V0LmFwcGVuZENoaWxkKHRoaXMuaW5wdXRFbGVtKTtcbiAgICAgICAgICAgIHRoaXMuZGF0ZVBpY2tlck9iaiA9IG5ldyBlajJfY2FsZW5kYXJzXzEuRGF0ZVBpY2tlcih7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXQsXG4gICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLXBvcHVwLWZsbWVudScsXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGFyZ3MubG9jYWxpemVUZXh0LmdldENvbnN0YW50KCdDaG9vc2VEYXRlJyksXG4gICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IHRoaXMucGFyZW50LmxvY2FsZSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBvcGVuOiB0aGlzLm9wZW5Qb3B1cC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRhdGVQaWNrZXJPYmouYXBwZW5kVG8odGhpcy5pbnB1dEVsZW0pO1xuICAgICAgICB9O1xuICAgICAgICBEYXRlRmlsdGVyVUkucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5mbHRyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBkYXRldWlPYmogPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZXVpLScgKyBhcmdzLmNvbHVtbi51aWQpLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICBkYXRldWlPYmoudmFsdWUgPSBhcmdzLmZpbHRlcmVkVmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIERhdGVGaWx0ZXJVSS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb2x1bW4sIGZpbHRlck9wdHIsIGZpbHRlck9iaikge1xuICAgICAgICAgICAgdmFyIGRhdGV1aU9iaiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRldWktJyArIGNvbHVtbi51aWQpLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICB2YXIgZmlsdGVyVmFsdWUgPSBkYXRldWlPYmoudmFsdWU7XG4gICAgICAgICAgICBmaWx0ZXJPYmouZmlsdGVyQnlDb2x1bW4oY29sdW1uLmZpZWxkLCBmaWx0ZXJPcHRyLCBmaWx0ZXJWYWx1ZSwgJ2FuZCcsIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRlRmlsdGVyVUkucHJvdG90eXBlLm9wZW5Qb3B1cCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBhcmdzLnBvcHVwRWxlbWVudC5lbGVtZW50LnN0eWxlLnpJbmRleCA9ICh0aGlzLmRpYWxvZ09iai56SW5kZXggKyAxKS50b1N0cmluZygpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGF0ZUZpbHRlclVJO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5EYXRlRmlsdGVyVUkgPSBEYXRlRmlsdGVyVUk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZGF0ZS1maWx0ZXItdWkuanNcbi8vIG1vZHVsZSBpZCA9IDcwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV83MV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWNhbGVuZGFyc1wiXG4vLyBtb2R1bGUgaWQgPSA3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIsIFwiLi4vYWN0aW9ucy9jaGVja2JveC1maWx0ZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB1dGlsXzEsIGVqMl9uYXZpZ2F0aW9uc18xLCBjaGVja2JveF9maWx0ZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRXhjZWxGaWx0ZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRXhjZWxGaWx0ZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEV4Y2VsRmlsdGVyKHBhcmVudCwgZmlsdGVyU2V0dGluZ3MsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQsIGZpbHRlclNldHRpbmdzLCBzZXJ2aWNlTG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmxvY2FsZUNvbnN0YW50cyA9IHtcbiAgICAgICAgICAgICAgICBDbGVhckZpbHRlcjogJ0NsZWFyIEZpbHRlcicsXG4gICAgICAgICAgICAgICAgTnVtYmVyRmlsdGVyOiAnTnVtYmVyIEZpbHRlcnMnLFxuICAgICAgICAgICAgICAgIFRleHRGaWx0ZXI6ICdUZXh0IEZpbHRlcnMnLFxuICAgICAgICAgICAgICAgIERhdGVGaWx0ZXI6ICdEYXRlIEZpbHRlcnMnLFxuICAgICAgICAgICAgICAgIE1hdGNoQ2FzZTogJ01hdGNoIENhc2UnLFxuICAgICAgICAgICAgICAgIEVxdWFsOiAnRXF1YWwnLFxuICAgICAgICAgICAgICAgIE5vdEVxdWFsOiAnTm90IEVxdWFsJyxcbiAgICAgICAgICAgICAgICBMZXNzVGhhbjogJ0xlc3MgVGhhbicsXG4gICAgICAgICAgICAgICAgTGVzc1RoYW5PckVxdWFsOiAnTGVzcyBUaGFuIE9yIEVxdWFsJyxcbiAgICAgICAgICAgICAgICBHcmVhdGVyVGhhbjogJ0dyZWF0ZXIgVGhhbicsXG4gICAgICAgICAgICAgICAgR3JlYXRlclRoYW5PckVxdWFsOiAnR3JlYXRlciBUaGFuIE9yIEVxdWFsJyxcbiAgICAgICAgICAgICAgICBCZXR3ZWVuOiAnQmV0d2VlbicsXG4gICAgICAgICAgICAgICAgQ3VzdG9tRmlsdGVyOiAnQ3VzdG9tIEZpbHRlcicsXG4gICAgICAgICAgICAgICAgU3RhcnRzV2l0aDogJ1N0YXJ0cyBXaXRoJyxcbiAgICAgICAgICAgICAgICBFbmRzV2l0aDogJ0VuZHMgV2l0aCcsXG4gICAgICAgICAgICAgICAgQ29udGFpbnM6ICdDb250YWlucycsXG4gICAgICAgICAgICAgICAgT0s6ICdPSycsXG4gICAgICAgICAgICAgICAgQ2FuY2VsOiAnQ2FuY2VsJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuZXh0ZW5kKF90aGlzLmRlZmF1bHRDb25zdGFudHMsIF90aGlzLmxvY2FsZUNvbnN0YW50cyk7XG4gICAgICAgICAgICBfdGhpcy5pc0V4Y2VsID0gdHJ1ZTtcbiAgICAgICAgICAgIF90aGlzLmluaXRMb2NhbGUoX3RoaXMuZGVmYXVsdENvbnN0YW50cyk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLmdldENNZW51RFMgPSBmdW5jdGlvbiAodHlwZSwgb3BlcmF0b3IpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIG51bWJlcjogWydFcXVhbCcsICdOb3RFcXVhbCcsICcnLCAnTGVzc1RoYW4nLCAnTGVzc1RoYW5PckVxdWFsJywgJ0dyZWF0ZXJUaGFuJyxcbiAgICAgICAgICAgICAgICAgICAgJ0dyZWF0ZXJUaGFuT3JFcXVhbCcsICdCZXR3ZWVuJywgJycsICdDdXN0b21GaWx0ZXInXSxcbiAgICAgICAgICAgICAgICBzdHJpbmc6IFsnRXF1YWwnLCAnTm90RXF1YWwnLCAnJywgJ1N0YXJ0c1dpdGgnLCAnRW5kc1dpdGgnLCAnJywgJ0NvbnRhaW5zJywgJycsICdDdXN0b21GaWx0ZXInXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvcHRpb25zLmRhdGUgPSBvcHRpb25zLm51bWJlcjtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0ZXRpbWUgPSBvcHRpb25zLm51bWJlcjtcbiAgICAgICAgICAgIHZhciBtb2RlbCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25zW3R5cGVdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNbdHlwZV1baV0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbChvcHRpb25zW3R5cGVdW2ldKSArICcuLi4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25Dc3M6ICdlLWljb25zIGUtaWNvbi1jaGVjayAnICsgKG9wZXJhdG9yID09PSBvcHRpb25zW3R5cGVdW2ldID8gJycgOiAnZS1lbXB0eWljb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmdldExvY2FsaXplZExhYmVsKG9wdGlvbnNbdHlwZV1baV0pICsgJy4uLidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbC5wdXNoKHsgc2VwYXJhdG9yOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2RlbDtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMuY21lbnUpO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUuY3JlYXRlTWVudSA9IGZ1bmN0aW9uICh0eXBlLCBpc0ZpbHRlcmVkKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHsgc3RyaW5nOiAnVGV4dEZpbHRlcicsIGRhdGU6ICdEYXRlRmlsdGVyJywgZGF0ZXRpbWU6ICdEYXRlRmlsdGVyJywgbnVtYmVyOiAnTnVtYmVyRmlsdGVyJyB9O1xuICAgICAgICAgICAgdGhpcy5tZW51ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtY29udGV4dG1lbnUtd3JhcHBlcicgfSk7XG4gICAgICAgICAgICB2YXIgdWwgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgICAgICB2YXIgaWNvbiA9IGlzRmlsdGVyZWQgPyAnZS1pY29uLWZpbHRlciBlLWZpbHRlcmVkJyA6ICdlLWljb24tZmlsdGVyJztcbiAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlTWVudUVsZW0odGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnQ2xlYXJGaWx0ZXInKSwgaXNGaWx0ZXJlZCA/ICcnIDogJ2UtZGlzYWJsZWQnLCBpY29uKSk7XG4gICAgICAgICAgICBpZiAodHlwZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVNZW51RWxlbSh0aGlzLmdldExvY2FsaXplZExhYmVsKG9wdGlvbnNbdHlwZV0pLCAnZS1zdWJtZW51JywgaXNGaWx0ZXJlZCA/ICdlLWljb24tY2hlY2snIDogaWNvbiArICcgZS1lbXB0eWljb24nLCB0cnVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1lbnUuYXBwZW5kQ2hpbGQodWwpO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUuY3JlYXRlTWVudUVsZW0gPSBmdW5jdGlvbiAodmFsLCBjbGFzc05hbWUsIGljb25OYW1lLCBpc1N1Yk1lbnUpIHtcbiAgICAgICAgICAgIHZhciBsaSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnbGknLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJyBlLW1lbnUtaXRlbScgfSk7XG4gICAgICAgICAgICBsaS5pbm5lckhUTUwgPSB2YWw7XG4gICAgICAgICAgICBsaS5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLW1lbnUtaWNvbiBlLWljb25zICcgKyBpY29uTmFtZSB9KSwgbGkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBpZiAoaXNTdWJNZW51KSB7XG4gICAgICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLWljb25zIGUtY2FyZXQnIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsaTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLndpcmVFeEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmRsZywgJ21vdXNlb3ZlcicsIHRoaXMuaG92ZXJIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmRsZywgJ2NsaWNrJywgdGhpcy5jbGlja0V4SGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5kbGcsICdtb3VzZW92ZXInLCB0aGlzLmhvdmVySGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5kbGcsICdjbGljaycsIHRoaXMuY2xpY2tFeEhhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUuY2xpY2tFeEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIG1lbnVJdGVtID0gdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtbWVudS1pdGVtJyk7XG4gICAgICAgICAgICBpZiAobWVudUl0ZW0gJiYgdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnQ2xlYXJGaWx0ZXInKSA9PT0gbWVudUl0ZW0uaW5uZXJUZXh0KSB7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRmlsdGVyLnByb3RvdHlwZS5kZXN0cm95Q01lbnUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tZW51T2JqICYmICF0aGlzLm1lbnVPYmouaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnVPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUuaG92ZXJIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCcuZS1jb250ZXh0bWVudScpO1xuICAgICAgICAgICAgdmFyIGxpID0gdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtbWVudS1pdGVtJyk7XG4gICAgICAgICAgICB2YXIgZm9jdXNlZCA9IHRoaXMubWVudS5xdWVyeVNlbGVjdG9yKCcuZS1mb2N1c2VkJyk7XG4gICAgICAgICAgICB2YXIgaXNTdWJNZW51O1xuICAgICAgICAgICAgaWYgKGZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICBmb2N1c2VkLmNsYXNzTGlzdC5yZW1vdmUoJ2UtZm9jdXNlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxpKSB7XG4gICAgICAgICAgICAgICAgbGkuY2xhc3NMaXN0LmFkZCgnZS1mb2N1c2VkJyk7XG4gICAgICAgICAgICAgICAgaXNTdWJNZW51ID0gbGkuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXN1Ym1lbnUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzU3ViTWVudSkge1xuICAgICAgICAgICAgICAgIHZhciBzdWJtZW51ID0gdGhpcy5tZW51LnF1ZXJ5U2VsZWN0b3IoJy5lLXN1Ym1lbnUnKTtcbiAgICAgICAgICAgICAgICBzdWJtZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2Utc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ01lbnVPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95Q01lbnUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NNZW51T3BlbiAmJiBpc1N1Yk1lbnUpIHtcbiAgICAgICAgICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKCdlLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NNZW51T3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIG1lbnVPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBpdGVtczogdGhpcy5nZXRDTWVudURTKHRoaXMub3B0aW9ucy50eXBlKSxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiB0aGlzLnNlbGVjdEhhbmRsZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogdGhpcy5kZXN0cm95Q01lbnUuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jbWVudSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51T2JqID0gbmV3IGVqMl9uYXZpZ2F0aW9uc18xLkNvbnRleHRNZW51KG1lbnVPcHRpb25zLCB0aGlzLmNtZW51KTtcbiAgICAgICAgICAgICAgICB2YXIgY2xpZW50ID0gdGhpcy5tZW51LnF1ZXJ5U2VsZWN0b3IoJy5lLXN1Ym1lbnUnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnVPYmoub3BlbihjbGllbnQudG9wLCB0aGlzLmRsZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUub3BlbkRpYWxvZyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGVsKG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5nZXRBbmRTZXRDaGtFbGVtKG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouaGVpZ2h0ID0gJzM0NXB4JztcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU1lbnUob3B0aW9ucy50eXBlLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmRsZy5pbnNlcnRCZWZvcmUodGhpcy5tZW51LCB0aGlzLmRsZy5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHRoaXMuZGxnLmNsYXNzTGlzdC5hZGQoJ2UtZXhjZWxmaWx0ZXInKTtcbiAgICAgICAgICAgIHRoaXMuY21lbnUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3VsJywgeyBjbGFzc05hbWU6ICdlLWV4Y2VsLW1lbnUnIH0pO1xuICAgICAgICAgICAgdGhpcy53aXJlRXhFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLmNsb3NlRGlhbG9nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jbG9zZURpYWxvZy5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxGaWx0ZXIucHJvdG90eXBlLnNlbGVjdEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEZpbHRlci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZXhjZWxGaWx0ZXInO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRXhjZWxGaWx0ZXI7XG4gICAgfShjaGVja2JveF9maWx0ZXJfMS5DaGVja0JveEZpbHRlcikpO1xuICAgIGV4cG9ydHMuRXhjZWxGaWx0ZXIgPSBFeGNlbEZpbHRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2V4Y2VsLWZpbHRlci5qc1xuLy8gbW9kdWxlIGlkID0gNzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzczX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIlxuLy8gbW9kdWxlIGlkID0gNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9zZXJ2aWNlcy93aWR0aC1jb250cm9sbGVyXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHdpZHRoX2NvbnRyb2xsZXJfMSwgZXZlbnRzLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QgPSB7XG4gICAgICAgIHJvb3Q6ICdlLXJoYW5kbGVyJyxcbiAgICAgICAgc3VwcHJlc3M6ICdlLXJzdXBwcmVzcycsXG4gICAgICAgIGljb246ICdlLXJpY29uJyxcbiAgICAgICAgaGVscGVyOiAnZS1yaGVscGVyJyxcbiAgICAgICAgaGVhZGVyOiAndGguZS1oZWFkZXJjZWxsJyxcbiAgICAgICAgY3Vyc29yOiAnZS1yY3Vyc29yJyxcbiAgICAgICAgbGluZXM6ICdlLXJsaW5lcydcbiAgICB9O1xuICAgIHZhciBSZXNpemUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSZXNpemUocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnRhcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0RibENsayA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlID0gbmV3IHdpZHRoX2NvbnRyb2xsZXJfMS5Db2x1bW5XaWR0aFNlcnZpY2UocGFyZW50KTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuYXV0b0ZpdENvbHVtbnMgPSBmdW5jdGlvbiAoZk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5OYW1lID0gKGZOYW1lID09PSB1bmRlZmluZWQgfHwgZk5hbWUgPT09IG51bGwgfHwgZk5hbWUubGVuZ3RoIDw9IDApID9cbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmZpZWxkOyB9KSA6ICh0eXBlb2YgZk5hbWUgPT09ICdzdHJpbmcnKSA/IFtmTmFtZV0gOiBmTmFtZTtcbiAgICAgICAgICAgIHRoaXMuZmluZENvbHVtbihjb2x1bW5OYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZXNpemVDb2x1bW4gPSBmdW5jdGlvbiAoZk5hbWUsIGluZGV4LCBpZCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciB0V2lkdGggPSAwO1xuICAgICAgICAgICAgdmFyIGhlYWRlclRhYmxlID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50VGFibGUgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJEaXZUYWcgPSAnZS1ncmlkaGVhZGVyJztcbiAgICAgICAgICAgIHZhciBjb250ZW50RGl2VGFnID0gJ2UtZ3JpZGNvbnRlbnQnO1xuICAgICAgICAgICAgdmFyIGluZGVudFdpZHRoQ2xvbmUgPSBnT2JqLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcigndHInKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncm91cHRvcGxlZnRjZWxsJyk7XG4gICAgICAgICAgICB2YXIgaW5kZW50V2lkdGggPSAwO1xuICAgICAgICAgICAgaWYgKGluZGVudFdpZHRoQ2xvbmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kZW50V2lkdGhDbG9uZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpbmRlbnRXaWR0aCArPSBpbmRlbnRXaWR0aENsb25lW2ldLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB1aWQgPSBpZCA/IGlkIDogdGhpcy5wYXJlbnQuZ2V0VWlkQnlDb2x1bW5GaWVsZChmTmFtZSk7XG4gICAgICAgICAgICB2YXIgY29sdW1uSW5kZXggPSB0aGlzLnBhcmVudC5nZXROb3JtYWxpemVkQ29sdW1uSW5kZXgodWlkKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJUZXh0Q2xvbmUgPSBoZWFkZXJUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpW2NvbHVtbkluZGV4XS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyVGV4dCA9IFtoZWFkZXJUZXh0Q2xvbmVdO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRUZXh0Q2xvbmUgPSBjb250ZW50VGFibGUucXVlcnlTZWxlY3RvckFsbChcInRkOm50aC1jaGlsZChcIiArIChjb2x1bW5JbmRleCArIDEpICsgXCIpXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRUZXh0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnRUZXh0Q2xvbmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb250ZW50VGV4dFtpXSA9IGNvbnRlbnRUZXh0Q2xvbmVbaV0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHdIZWFkZXIgPSB0aGlzLmNyZWF0ZVRhYmxlKGhlYWRlclRhYmxlLCBoZWFkZXJUZXh0LCBoZWFkZXJEaXZUYWcpO1xuICAgICAgICAgICAgdmFyIHdDb250ZW50ID0gdGhpcy5jcmVhdGVUYWJsZShjb250ZW50VGFibGUsIGNvbnRlbnRUZXh0LCBjb250ZW50RGl2VGFnKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5ieWluZGV4ID0gZ09iai5nZXRDb2x1bW5zKClbaW5kZXhdO1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9ICh3SGVhZGVyID4gd0NvbnRlbnQpID8gY29sdW1uYnlpbmRleC53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh3SGVhZGVyKSA6IGNvbHVtbmJ5aW5kZXgud2lkdGggPSBlajJfYmFzZV8xLmZvcm1hdFVuaXQod0NvbnRlbnQpO1xuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2Uuc2V0Q29sdW1uV2lkdGgoZ09iai5nZXRDb2x1bW5zKClbaW5kZXhdKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuYWxsb3dSZXNpemluZykge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGdPYmouZ2V0Q29sdW1ucygpLnNvbWUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgud2lkdGggPT09IG51bGwgfHwgeC53aWR0aCA9PT0gdW5kZWZpbmVkIHx8IHgud2lkdGgubGVuZ3RoIDw9IDA7IH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZ2V0Q29sdW1ucygpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0V2lkdGggPSB0V2lkdGggKyBwYXJzZUludChlbGVtZW50LndpZHRoLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGFibGVXaWR0aF8xID0gdFdpZHRoICsgaW5kZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgaWYgKHRXaWR0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyVGFibGUuc3R5bGUud2lkdGggPSBlajJfYmFzZV8xLmZvcm1hdFVuaXQodGFibGVXaWR0aF8xKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFRhYmxlLnN0eWxlLndpZHRoID0gZWoyX2Jhc2VfMS5mb3JtYXRVbml0KHRhYmxlV2lkdGhfMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRhYmxlV2lkdGggPSBoZWFkZXJUYWJsZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHZhciBjb250ZW50d2lkdGggPSAoZ09iai5nZXRDb250ZW50KCkuc2Nyb2xsV2lkdGgpO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnR3aWR0aCA+IHRhYmxlV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJUYWJsZS5jbGFzc0xpc3QuYWRkKCdlLXRhYmxlYm9yZGVyJyk7XG4gICAgICAgICAgICAgICAgY29udGVudFRhYmxlLmNsYXNzTGlzdC5hZGQoJ2UtdGFibGVib3JkZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhlYWRlclRhYmxlLmNsYXNzTGlzdC5yZW1vdmUoJ2UtdGFibGVib3JkZXInKTtcbiAgICAgICAgICAgICAgICBjb250ZW50VGFibGUuY2xhc3NMaXN0LnJlbW92ZSgnZS10YWJsZWJvcmRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncmVzaXplJztcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5maW5kQ29sdW1uID0gZnVuY3Rpb24gKGZOYW1lKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgZk5hbWUuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZE5hbWUgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5JbmRleCA9IF90aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleEJ5RmllbGQoZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmdldENvbHVtbnMoKVtjb2x1bW5JbmRleF0udmlzaWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZXNpemVDb2x1bW4oZmllbGROYW1lLCBjb2x1bW5JbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuY3JlYXRlVGFibGUgPSBmdW5jdGlvbiAodGFibGUsIHRleHQsIHRhZykge1xuICAgICAgICAgICAgdmFyIG15VGFibGVEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbXlUYWJsZURpdi5jbGFzc05hbWUgPSB0aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTmFtZTtcbiAgICAgICAgICAgIG15VGFibGVEaXYuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBpbmxpbmUtYmxvY2s7dmlzaWJpbGl0eTpoaWRkZW47cG9zaXRpb246YWJzb2x1dGUnO1xuICAgICAgICAgICAgdmFyIG15U3ViRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIG15U3ViRGl2LmNsYXNzTmFtZSA9IHRhZztcbiAgICAgICAgICAgIHZhciBteVRhYmxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgICAgICAgICAgbXlUYWJsZS5jbGFzc05hbWUgPSB0YWJsZS5jbGFzc05hbWU7XG4gICAgICAgICAgICBteVRhYmxlLnN0eWxlLmNzc1RleHQgPSAndGFibGUtbGF5b3V0OiBhdXRvO3dpZHRoOiBhdXRvJztcbiAgICAgICAgICAgIHZhciBteVRyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgdGV4dC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyID0gbXlUci5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgICAgICB0ci5jbGFzc05hbWUgPSB0YWJsZS5xdWVyeVNlbGVjdG9yKCd0cicpLmNsYXNzTmFtZTtcbiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBteVRhYmxlLmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbXlTdWJEaXYuYXBwZW5kQ2hpbGQobXlUYWJsZSk7XG4gICAgICAgICAgICBteVRhYmxlRGl2LmFwcGVuZENoaWxkKG15U3ViRGl2KTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobXlUYWJsZURpdik7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0V2lkdGhWYWx1ZSA9IG15VGFibGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG15VGFibGVEaXYpO1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbChvZmZzZXRXaWR0aFZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZnJlZXplUmVmcmVzaCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgaWYgKCEodGhpcy5wYXJlbnQuZ3JpZExpbmVzID09PSAndmVydGljYWwnIHx8IHRoaXMucGFyZW50LmdyaWRMaW5lcyA9PT0gJ2JvdGgnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmFkZChleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5saW5lcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEhhbmRsZXJIZWlnaHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVzaXplSGFuZGxlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBlbGUuc3R5bGUuaGVpZ2h0ID0gZWxlLnBhcmVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZWxlLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCBfdGhpcy5yZXNpemVTdGFydCwgX3RoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChlbGUsIGV2ZW50cy5kYmxjbGljaywgX3RoaXMuY2FsbEF1dG9GaXQsIF90aGlzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmdldFJlc2l6ZUhhbmRsZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZSwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgX3RoaXMucmVzaXplU3RhcnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShlbGUsIGV2ZW50cy5kYmxjbGljaywgX3RoaXMuY2FsbEF1dG9GaXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0UmVzaXplSGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucyA/XG4gICAgICAgICAgICAgICAgW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvckFsbCgnLicgKyBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5yb290KSlcbiAgICAgICAgICAgICAgICA6IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LnJvb3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5zZXRIYW5kbGVySGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3Quc3VwcHJlc3MpKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBlbGUuc3R5bGUuaGVpZ2h0ID0gZWxlLnBhcmVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmNhbGxBdXRvRml0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLmdldFRhcmdldENvbHVtbihlKTtcbiAgICAgICAgICAgIHRoaXMucmVzaXplQ29sdW1uKGNvbC5maWVsZCwgdGhpcy5wYXJlbnQuZ2V0Tm9ybWFsaXplZENvbHVtbkluZGV4KGNvbC51aWQpLCBjb2wudWlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZXNpemVTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGVscGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0U2Nyb2xsQmFyV2lkdGgoKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5yZWZyZXNoQ29sdW1uV2lkdGgoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZS5zZXRDb2x1bW5XaWR0aChjb2wpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldFdpZHRoVG9UYWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEhlbHBlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uID0gdGhpcy5nZXRUYXJnZXRDb2x1bW4oZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlWCA9IHRoaXMuZ2V0UG9pbnRYKGUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5taW5Nb3ZlID0gcGFyc2VJbnQodGhpcy5jb2x1bW4ud2lkdGgudG9TdHJpbmcoKSwgMTApXG4gICAgICAgICAgICAgICAgICAgICAgICAtICh0aGlzLmNvbHVtbi5taW5XaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSA6IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5taW5Nb3ZlID0gKHRoaXMuY29sdW1uLm1pbldpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWluV2lkdGgudG9TdHJpbmcoKSwgMTApIDogMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC0gcGFyc2VJbnQodGhpcy5jb2x1bW4ud2lkdGgudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm1pbk1vdmUgKz0gdGhpcy5wYWdlWDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgJiYgIXRoaXMuaGVscGVyLmNsYXNzTGlzdC5jb250YWlucyhleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5pY29uKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyLmNsYXNzTGlzdC5hZGQoZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaWNvbik7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnJlbW92ZUhlbHBlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuaGVscGVyLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnJlc2l6ZVN0YXJ0LCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBlOiBlLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IHRoaXMuY29sdW1uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5yZXNpemVTdGFydCwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVzaXplQWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5yZXNpemVFbmQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5lbGVtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMucmVzaXppbmcsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Vyc29yKCdhZGQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5jYW5jZWxSZXNpemVBY3Rpb24gPSBmdW5jdGlvbiAocmVtb3ZlRXZlbnRzKSB7XG4gICAgICAgICAgICBpZiAocmVtb3ZlRXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmVsZW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5yZXNpemluZyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5yZXNpemVFbmQpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Vyc29yKCdyZW1vdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVtb3ZlSGVscGVyKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5oZWxwZXIsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVzaXplU3RhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5kZXRhY2godGhpcy5oZWxwZXIpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAod2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCkge1xuICAgICAgICAgICAgaWYgKG1pbldpZHRoICYmIHdpZHRoIDwgbWluV2lkdGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWluV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgobWF4V2lkdGggJiYgd2lkdGggPiBtYXhXaWR0aCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF4V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVzaXppbmcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHBhZ2VYID0gdGhpcy5nZXRQb2ludFgoZSk7XG4gICAgICAgICAgICB2YXIgbW91c2Vtb3ZlID0gdGhpcy5wYXJlbnQuZW5hYmxlUnRsID8gLShwYWdlWCAtIHRoaXMucGFnZVgpIDogKHBhZ2VYIC0gdGhpcy5wYWdlWCk7XG4gICAgICAgICAgICB2YXIgY29sRGF0YSA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogcGFyc2VJbnQodGhpcy53aWR0aFNlcnZpY2UuZ2V0V2lkdGgodGhpcy5jb2x1bW4pLnRvU3RyaW5nKCksIDEwKSArIG1vdXNlbW92ZSxcbiAgICAgICAgICAgICAgICBtaW5XaWR0aDogdGhpcy5jb2x1bW4ubWluV2lkdGggPyBwYXJzZUludCh0aGlzLmNvbHVtbi5taW5XaWR0aC50b1N0cmluZygpLCAxMCkgOiBudWxsLFxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiB0aGlzLmNvbHVtbi5tYXhXaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1heFdpZHRoLnRvU3RyaW5nKCksIDEwKSA6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKGNvbERhdGEud2lkdGgsIGNvbERhdGEubWluV2lkdGgsIGNvbERhdGEubWF4V2lkdGgpO1xuICAgICAgICAgICAgaWYgKCghdGhpcy5wYXJlbnQuZW5hYmxlUnRsICYmIHRoaXMubWluTW92ZSA+PSBwYWdlWCkgfHwgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCAmJiB0aGlzLm1pbk1vdmUgPD0gcGFnZVgpKSB7XG4gICAgICAgICAgICAgICAgd2lkdGggPSB0aGlzLmNvbHVtbi5taW5XaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSA6IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlWCA9IHBhZ2VYID0gdGhpcy5taW5Nb3ZlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdpZHRoICE9PSBwYXJzZUludCh0aGlzLmNvbHVtbi53aWR0aC50b1N0cmluZygpLCAxMCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VYID0gcGFnZVg7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW4ud2lkdGggPSBlajJfYmFzZV8xLmZvcm1hdFVuaXQod2lkdGgpO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBlOiBlLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IHRoaXMuY29sdW1uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5vblJlc2l6ZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVzaXplQWN0aW9uKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldENvbHVtbldpZHRoKHRoaXMuY29sdW1uLCBudWxsLCAncmVzaXplJyk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVIZWxwZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNEYmxDbGsgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZXNpemVFbmQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhlbHBlciB8fCB0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5lbGVtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMucmVzaXppbmcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5yZXNpemVFbmQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJzb3IoJ3JlbW92ZScpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5kZXRhY2godGhpcy5oZWxwZXIpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgZTogZSxcbiAgICAgICAgICAgICAgICBjb2x1bW46IHRoaXMuY29sdW1uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMucmVzaXplU3RvcCwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIHRoaXMuZG91YmxlVGFwRXZlbnQoZSk7XG4gICAgICAgICAgICB0aGlzLmlzRGJsQ2xrID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRQb2ludFggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUudG91Y2hlcyAmJiBlLnRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLnBhZ2VYO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlZnJlc2hDb2x1bW5XaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IFtdLnNsaWNlLmFwcGx5KHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgndGguZS1oZWFkZXJjZWxsJykpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGUgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfYiA8IGNvbHVtbnNfMS5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNfMVtfYl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGUucXVlcnlTZWxlY3RvcignW2UtbWFwcGluZ3VpZF0nKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlLnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWRdJykuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSA9PT0gY29sdW1uLnVpZCAmJiBjb2x1bW4udmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLndpZHRoID0gZWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRUYXJnZXRDb2x1bW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGNlbGwgPSBlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmhlYWRlcik7XG4gICAgICAgICAgICB2YXIgdWlkID0gY2VsbC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZCh1aWQpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnVwZGF0ZUN1cnNvciA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvckFsbCgndGgnKSk7XG4gICAgICAgICAgICBoZWFkZXJSb3dzLnB1c2godGhpcy5wYXJlbnQuZWxlbWVudCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGhlYWRlclJvd3NfMSA9IGhlYWRlclJvd3M7IF9pIDwgaGVhZGVyUm93c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBoZWFkZXJSb3dzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3RbYWN0aW9uXShleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5jdXJzb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnBhZ2VYID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuYXBwZW5kSGVscGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmhlbHBlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuaGVscGVyKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkub2Zmc2V0SGVpZ2h0IC0gdGhpcy5nZXRTY3JvbGxCYXJXaWR0aCgpO1xuICAgICAgICAgICAgdmFyIHJlY3QgPSBlajJfYmFzZV8xLmNsb3Nlc3QodGhpcy5lbGVtZW50LCBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5oZWFkZXIpO1xuICAgICAgICAgICAgdmFyIHRyID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvckFsbCgndHInKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIGlmIChyZWN0LnBhcmVudEVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoICE9PSB0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyLnNwbGljZSgwLCB0ci5sZW5ndGggLyAyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyLnNwbGljZSh0ci5sZW5ndGggLyAyLCB0ci5sZW5ndGggLyAyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdHIuaW5kZXhPZihyZWN0LnBhcmVudEVsZW1lbnQpOyBpIDwgdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBoZWlnaHQgKz0gdHJbaV0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvcyA9IHRoaXMuY2FsY1BvcyhyZWN0KTtcbiAgICAgICAgICAgIHBvcy5sZWZ0ICs9ICh0aGlzLnBhcmVudC5lbmFibGVSdGwgPyAwIC0gMSA6IHJlY3Qub2Zmc2V0V2lkdGggLSAyKTtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyLnN0eWxlLmNzc1RleHQgPSAnaGVpZ2h0OiAnICsgaGVpZ2h0ICsgJ3B4OyB0b3A6ICcgKyBwb3MudG9wICsgJ3B4OyBsZWZ0OicgKyBNYXRoLmZsb29yKHBvcy5sZWZ0KSArICdweDsnO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24gKGhlaWdodCkge1xuICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMgPyB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkucXVlcnlTZWxlY3RvcignLmUtbW92YWJsZWNvbnRlbnQnKVxuICAgICAgICAgICAgICAgIDogdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICByZXR1cm4gKGVsZS5zY3JvbGxIZWlnaHQgPiBlbGUuY2xpZW50SGVpZ2h0ICYmIGhlaWdodCkgfHxcbiAgICAgICAgICAgICAgICBlbGUuc2Nyb2xsV2lkdGggPiBlbGUuY2xpZW50V2lkdGggPyB1dGlsXzEuZ2V0U2Nyb2xsQmFyV2lkdGgoKSA6IDA7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVtb3ZlSGVscGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjbHMgPSBlLnRhcmdldC5jbGFzc0xpc3Q7XG4gICAgICAgICAgICBpZiAoIShjbHMuY29udGFpbnMoZXhwb3J0cy5yZXNpemVDbGFzc0xpc3Qucm9vdCkgfHwgY2xzLmNvbnRhaW5zKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0Lmljb24pKSAmJiB0aGlzLmhlbHBlcikge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZW1vdmVIZWxwZXIpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmhlbHBlciwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZXNpemVTdGFydCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5kZXRhY2godGhpcy5oZWxwZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnVwZGF0ZUhlbHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZWN0ID0gZWoyX2Jhc2VfMS5jbG9zZXN0KHRoaXMuZWxlbWVudCwgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaGVhZGVyKTtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyLnN0eWxlLmxlZnQgPSBNYXRoLmZsb29yKHRoaXMuY2FsY1BvcyhyZWN0KS5sZWZ0ICsgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCA/IDAgLSAxIDogcmVjdC5vZmZzZXRXaWR0aCAtIDIpKSArICdweCc7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuY2FsY1BvcyA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50T2Zmc2V0ID0ge1xuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgZG9jID0gZWxlbS5vd25lckRvY3VtZW50O1xuICAgICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IGVsZW0ub2Zmc2V0UGFyZW50IHx8IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICB3aGlsZSAob2Zmc2V0UGFyZW50ICYmXG4gICAgICAgICAgICAgICAgKG9mZnNldFBhcmVudCA9PT0gZG9jLmJvZHkgfHwgb2Zmc2V0UGFyZW50ID09PSBkb2MuZG9jdW1lbnRFbGVtZW50KSAmJlxuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudC5zdHlsZS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvZmZzZXRQYXJlbnQgJiYgb2Zmc2V0UGFyZW50ICE9PSBlbGVtICYmIG9mZnNldFBhcmVudC5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHBhcmVudE9mZnNldCA9IG9mZnNldFBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9wOiBvZmZzZXQudG9wIC0gcGFyZW50T2Zmc2V0LnRvcCxcbiAgICAgICAgICAgICAgICBsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmRvdWJsZVRhcEV2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldFVzZXJBZ2VudCgpICYmIHRoaXMuaXNEYmxDbGspIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGFwcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFwcGVkID0gc2V0VGltZW91dCh0aGlzLnRpbWVvdXRIYW5kbGVyKCksIDMwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50YXBwZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxBdXRvRml0KGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcHBlZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldFVzZXJBZ2VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1c2VyQWdlbnQgPSBlajJfYmFzZV8xLkJyb3dzZXIudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gL2lwaG9uZXxpcG9kfGlwYWQvLnRlc3QodXNlckFnZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS50aW1lb3V0SGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudGFwcGVkID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJlc2l6ZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUmVzaXplID0gUmVzaXplO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcmVzaXplLmpzXG4vLyBtb2R1bGUgaWQgPSA3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSZW9yZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUmVvcmRlcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlckRyb3AsIHRoaXMuaGVhZGVyRHJvcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJlb3JkZXJDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5EcmFnLCB0aGlzLmRyYWcsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgdGhpcy5kcmFnU3RhcnQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWdTdG9wLCB0aGlzLmRyYWdTdG9wLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJEcm9wLCB0aGlzLmhlYWRlckRyb3AsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5jcmVhdGVSZW9yZGVyRWxlbWVudCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuY2hrRHJvcFBvc2l0aW9uID0gZnVuY3Rpb24gKHNyY0VsZW0sIGRlc3RFbGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gc3JjRWxlbS5wYXJlbnRFbGVtZW50LmlzRXF1YWxOb2RlKGRlc3RFbGVtLnBhcmVudEVsZW1lbnQpICYmIHRoaXMudGFyZ2V0UGFyZW50Q29udGFpbmVySW5kZXgoc3JjRWxlbSwgZGVzdEVsZW0pID4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmNoa0Ryb3BBbGxDb2xzID0gZnVuY3Rpb24gKHNyY0VsZW0sIGRlc3RFbGVtKSB7XG4gICAgICAgICAgICB2YXIgaXNGb3VuZDtcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtaGVhZGVyY2VsbCcpKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXI7XG4gICAgICAgICAgICB3aGlsZSAoIWlzRm91bmQgJiYgaGVhZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyID0gaGVhZGVycy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpc0ZvdW5kID0gc3JjRWxlbSAhPT0gaGVhZGVyICYmIHRoaXMudGFyZ2V0UGFyZW50Q29udGFpbmVySW5kZXgoc3JjRWxlbSwgZGVzdEVsZW0pID4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXNGb3VuZDtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZmluZENvbFBhcmVudCA9IGZ1bmN0aW9uIChjb2wsIGNvbHMsIHBhcmVudCkge1xuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sID09PSBjb2xzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2xzW2ldLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNudCA9IHBhcmVudC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5wdXNoKGNvbHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZmluZENvbFBhcmVudChjb2wsIGNvbHNbaV0uY29sdW1ucywgcGFyZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnNwbGljZShjbnQsIHBhcmVudC5sZW5ndGggLSBjbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmdldENvbHVtbnNNb2RlbCA9IGZ1bmN0aW9uIChjb2xzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uTW9kZWwgPSBbXTtcbiAgICAgICAgICAgIHZhciBzdWJDb2xzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbHVtbk1vZGVsLnB1c2goY29sc1tpXSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICBzdWJDb2xzID0gc3ViQ29scy5jb25jYXQoY29sc1tpXS5jb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3ViQ29scy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5Nb2RlbCA9IGNvbHVtbk1vZGVsLmNvbmNhdCh0aGlzLmdldENvbHVtbnNNb2RlbChzdWJDb2xzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uTW9kZWw7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmhlYWRlckRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5jbG9zZXN0KGUudGFyZ2V0LCAndGgnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZXN0RWxlbSA9IGVqMl9iYXNlXzIuY2xvc2VzdChlLnRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIGlmIChkZXN0RWxlbSAmJiAhKCF0aGlzLmNoa0Ryb3BQb3NpdGlvbih0aGlzLmVsZW1lbnQsIGRlc3RFbGVtKSB8fCAhdGhpcy5jaGtEcm9wQWxsQ29scyh0aGlzLmVsZW1lbnQsIGRlc3RFbGVtKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWhlYWRlcmNlbGwnKSk7XG4gICAgICAgICAgICAgICAgdmFyIG9sZElkeCA9IHV0aWxfMS5nZXRFbGVtZW50SW5kZXgodGhpcy5lbGVtZW50LCBoZWFkZXJzKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1uc01vZGVsKHRoaXMucGFyZW50LmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zW29sZElkeF07XG4gICAgICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gdGhpcy50YXJnZXRQYXJlbnRDb250YWluZXJJbmRleCh0aGlzLmVsZW1lbnQsIGRlc3RFbGVtKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDb2x1bW5zKG5ld0luZGV4LCBjb2x1bW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5pc0FjdGlvblByZXZlbnQgPSBmdW5jdGlvbiAoZ09iaikge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaik7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLm1vdmVDb2x1bW5zID0gZnVuY3Rpb24gKGRlc3RJbmRleCwgY29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5tb3ZlQ29sdW1ucywgYXJnMTogZGVzdEluZGV4LCBhcmcyOiBjb2x1bW4gfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0Q29sUGFyZW50KGNvbHVtbiwgdGhpcy5wYXJlbnQuY29sdW1ucyk7XG4gICAgICAgICAgICB2YXIgY29scyA9IHBhcmVudCA/IHBhcmVudC5jb2x1bW5zIDogdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBzcmNJZHggPSB1dGlsXzEuaW5BcnJheShjb2x1bW4sIGNvbHMpO1xuICAgICAgICAgICAgaWYgKCFnT2JqLmFsbG93UmVvcmRlcmluZyB8fCBzcmNJZHggPT09IGRlc3RJbmRleCB8fCBzcmNJZHggPT09IC0xIHx8IGRlc3RJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2xzLnNwbGljZShkZXN0SW5kZXgsIDAsIGNvbHMuc3BsaWNlKHNyY0lkeCwgMSlbMF0pO1xuICAgICAgICAgICAgZ09iai5nZXRDb2x1bW5zKHRydWUpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgeyBmcm9tSW5kZXg6IGRlc3RJbmRleCwgdG9JbmRleDogc3JjSWR4IH0pO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgcmVxdWVzdFR5cGU6ICdyZW9yZGVyJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnRhcmdldFBhcmVudENvbnRhaW5lckluZGV4ID0gZnVuY3Rpb24gKHNyY0VsZW0sIGRlc3RFbGVtKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWhlYWRlcmNlbGwnKSk7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmxhdENvbHVtbnMgPSB0aGlzLmdldENvbHVtbnNNb2RlbChjb2xzKTtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldENvbFBhcmVudChmbGF0Q29sdW1uc1t1dGlsXzEuZ2V0RWxlbWVudEluZGV4KHNyY0VsZW0sIGhlYWRlcnMpXSwgY29scyk7XG4gICAgICAgICAgICBjb2xzID0gcGFyZW50ID8gcGFyZW50LmNvbHVtbnMgOiBjb2xzO1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pbkFycmF5KGZsYXRDb2x1bW5zW3V0aWxfMS5nZXRFbGVtZW50SW5kZXgoZGVzdEVsZW0sIGhlYWRlcnMpXSwgY29scyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmdldENvbFBhcmVudCA9IGZ1bmN0aW9uIChjb2x1bW4sIGNvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRzID0gW107XG4gICAgICAgICAgICB0aGlzLmZpbmRDb2xQYXJlbnQoY29sdW1uLCBjb2x1bW5zLCBwYXJlbnRzKTtcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnRzW3BhcmVudHMubGVuZ3RoIC0gMV07XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnJlb3JkZXJDb2x1bW5zID0gZnVuY3Rpb24gKGZyb21GTmFtZSwgdG9GTmFtZSkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQodG9GTmFtZSk7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRDb2xQYXJlbnQoY29sdW1uLCB0aGlzLnBhcmVudC5jb2x1bW5zKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gcGFyZW50ID8gcGFyZW50LmNvbHVtbnMgOiB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGRlc3RJbmRleCA9IHV0aWxfMS5pbkFycmF5KGNvbHVtbiwgY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAoZGVzdEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDb2x1bW5zKGRlc3RJbmRleCwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChmcm9tRk5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUmVvcmRlckVsZW1lbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuY3JlYXRlUmVvcmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjb250ZW50Jyk7XG4gICAgICAgICAgICB0aGlzLnVwQXJyb3cgPSBoZWFkZXIuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgZS1pY29uLXJlb3JkZXJ1cGFycm93IGUtcmVvcmRlcnVwYXJyb3cnLCBhdHRyczogeyBzdHlsZTogJ2Rpc3BsYXk6bm9uZScgfSB9KSk7XG4gICAgICAgICAgICB0aGlzLmRvd25BcnJvdyA9IGhlYWRlci5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWljb24tcmVvcmRlcmRvd25hcnJvdyBlLXJlb3JkZXJkb3duYXJyb3cnLCBhdHRyczogeyBzdHlsZTogJ2Rpc3BsYXk6bm9uZScgfSB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHsgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMudXBBcnJvdyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmRvd25BcnJvdyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlckRyb3AsIHRoaXMuaGVhZGVyRHJvcCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucmVvcmRlckNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnLCB0aGlzLmRyYWcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMuZHJhZ1N0YXJ0KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJhZ1N0b3AsIHRoaXMuZHJhZ1N0b3ApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMuY3JlYXRlUmVvcmRlckVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5kcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgY2xvc2VzdCA9IGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS1oZWFkZXJjZWxsOm5vdCguZS1zdGFja2VkSGVhZGVyQ2VsbCknKTtcbiAgICAgICAgICAgIHZhciBjbG9uZUVsZW1lbnQgPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2xvbmVwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgICB2YXIgaXNMZWZ0ID0gdGhpcy54ID4gdXRpbF8xLmdldFBvc2l0aW9uKGUuZXZlbnQpLnggKyBnT2JqLmdldENvbnRlbnQoKS5maXJzdEVsZW1lbnRDaGlsZC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhnT2JqLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLmUtcmVvcmRlcmluZGljYXRlJyksIFsnZS1yZW9yZGVyaW5kaWNhdGUnXSk7XG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXkoJ25vbmUnKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1kZWZhdWx0Y3VyJ10sIFsnZS1ub3RhbGxvd2VkY3VyJ10pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxQb3N0aW9uKGUuZXZlbnQpO1xuICAgICAgICAgICAgaWYgKGNsb3Nlc3QgJiYgIWNsb3Nlc3QuaXNFcXVhbE5vZGUodGhpcy5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IGNsb3Nlc3Q7XG4gICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuY2hrRHJvcFBvc2l0aW9uKHRoaXMuZWxlbWVudCwgdGFyZ2V0KSB8fCAhdGhpcy5jaGtEcm9wQWxsQ29scyh0aGlzLmVsZW1lbnQsIHRhcmdldCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQXJyb3dQb3NpdGlvbih0YXJnZXQsIGlzTGVmdCk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KHRhcmdldCwgWydlLWFsbG93RHJvcCcsICdlLXJlb3JkZXJpbmRpY2F0ZSddLCBbXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCEoZ09iai5hbGxvd0dyb3VwaW5nICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyb3VwZHJvcGFyZWEnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2Utbm90YWxsb3dlZGN1ciddLCBbJ2UtZGVmYXVsdGN1ciddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmNvbHVtbkRyYWcsIHsgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdoZWFkZXJjZWxsJywgY29sdW1uOiBlLmNvbHVtbiB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUudXBkYXRlU2Nyb2xsUG9zdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHggPSB1dGlsXzEuZ2V0UG9zaXRpb24oZSkueDtcbiAgICAgICAgICAgIHZhciBjbGlSZWN0QmFzZSA9IHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsRWxlbSA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIGlmICh4ID4gY2xpUmVjdEJhc2UubGVmdCAmJiB4IDwgY2xpUmVjdEJhc2UubGVmdCArIDM1KSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IF90aGlzLnNldFNjcm9sbExlZnQoc2Nyb2xsRWxlbSwgdHJ1ZSk7IH0sIDUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHggPCBjbGlSZWN0QmFzZS5yaWdodCAmJiB4ID4gY2xpUmVjdEJhc2UucmlnaHQgLSAzNSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBfdGhpcy5zZXRTY3JvbGxMZWZ0KHNjcm9sbEVsZW0sIGZhbHNlKTsgfSwgNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5zZXRTY3JvbGxMZWZ0ID0gZnVuY3Rpb24gKHNjcm9sbEVsZW0sIGlzTGVmdCkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSBzY3JvbGxFbGVtLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBzY3JvbGxFbGVtLnNjcm9sbExlZnQgPSBzY3JvbGxFbGVtLnNjcm9sbExlZnQgKyAoaXNMZWZ0ID8gLTUgOiA1KTtcbiAgICAgICAgICAgIGlmIChzY3JvbGxMZWZ0ICE9PSBzY3JvbGxFbGVtLnNjcm9sbExlZnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldERpc3BsYXkoJ25vbmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuc3RvcFRpbWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnVwZGF0ZUFycm93UG9zaXRpb24gPSBmdW5jdGlvbiAodGFyZ2V0LCBpc0xlZnQpIHtcbiAgICAgICAgICAgIHZhciBjbGlSZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGNsaVJlY3RCYXNlID0gdGhpcy5wYXJlbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGlmICgoaXNMZWZ0ICYmIGNsaVJlY3QubGVmdCA8IGNsaVJlY3RCYXNlLmxlZnQpIHx8ICghaXNMZWZ0ICYmIGNsaVJlY3QucmlnaHQgPiBjbGlSZWN0QmFzZS5yaWdodCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwQXJyb3cuc3R5bGUudG9wID0gY2xpUmVjdC50b3AgKyBjbGlSZWN0LmhlaWdodCAtIGNsaVJlY3RCYXNlLnRvcCArICdweCc7XG4gICAgICAgICAgICB0aGlzLmRvd25BcnJvdy5zdHlsZS50b3AgPSBjbGlSZWN0LnRvcCAtIGNsaVJlY3RCYXNlLnRvcCAtIDQgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy51cEFycm93LnN0eWxlLmxlZnQgPSB0aGlzLmRvd25BcnJvdy5zdHlsZS5sZWZ0ID0gKGlzTGVmdCA/IGNsaVJlY3QubGVmdCA6IGNsaVJlY3QucmlnaHQpIC0gY2xpUmVjdEJhc2UubGVmdCAtIDQgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5zZXREaXNwbGF5KCcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNlbGwnKSA/IHRhcmdldCA6XG4gICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIHRoaXMueCA9IHV0aWxfMS5nZXRQb3NpdGlvbihlLmV2ZW50KS54ICsgZ09iai5nZXRDb250ZW50KCkuZmlyc3RFbGVtZW50Q2hpbGQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdoZWFkZXJjZWxsJywgY29sdW1uOiBlLmNvbHVtblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmRyYWdTdG9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXkoJ25vbmUnKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICBpZiAoIWUuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5jb2x1bW5Ecm9wLCB7IHRhcmdldDogZS50YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdoZWFkZXJjZWxsJywgY29sdW1uOiBlLmNvbHVtbiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoZ09iai5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJlb3JkZXJpbmRpY2F0ZScpLCBbJ2UtcmVvcmRlcmluZGljYXRlJ10pO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5zZXREaXNwbGF5ID0gZnVuY3Rpb24gKGRpc3BsYXkpIHtcbiAgICAgICAgICAgIHRoaXMudXBBcnJvdy5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICAgICAgICAgIHRoaXMuZG93bkFycm93LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdyZW9yZGVyJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJlb3JkZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJlb3JkZXIgPSBSZW9yZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcmVvcmRlci5qc1xuLy8gbW9kdWxlIGlkID0gNzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSb3dERCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJvd0REKHBhcmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZ3JpZGRyYWdhcmVhJykubGVuZ3RoIHx8XG4gICAgICAgICAgICAgICAgICAgICFlLnNlbmRlci50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNlbGVjdGlvbmJhY2tncm91bmQnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB2aXN1YWxFbGVtZW50ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2xvbmVwcm9wZXJ0aWVzIGUtZHJhZ2FuZGRyb3AgZS1ncmlkIGUtZHJhZ2Nsb25lJyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiAnaGVpZ2h0OlwiYXV0b1wiLCB6LWluZGV4OjIsIHdpZHRoOicgKyBnT2JqLmVsZW1lbnQub2Zmc2V0V2lkdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywgeyBzdHlsZXM6ICd3aWR0aDonICsgZ09iai5lbGVtZW50Lm9mZnNldFdpZHRoIH0pO1xuICAgICAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3dzID0gZ09iai5nZXRTZWxlY3RlZFJvd3MoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2VsZWN0ZWRSb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvdyA9IHNlbGVjdGVkUm93c1tpXS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHNlbGVjdGVkUm93LCAnLmUtaW5kZW50Y2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudChzZWxlY3RlZFJvdywgJy5lLWRldGFpbHJvd2NvbGxhcHNlJyk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHNlbGVjdGVkUm93LCAnLmUtZGV0YWlscm93ZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHNlbGVjdGVkUm93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5hcHBlbmRDaGlsZCh2aXN1YWxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmlzdWFsRWxlbWVudDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZ3JpZGRyYWdhcmVhJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5yb3dEcmFnU3RhcnQsIHtcbiAgICAgICAgICAgICAgICAgICAgcm93czogZ09iai5nZXRTZWxlY3RlZFJvd3MoKSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBlLnRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ3Jvd3MnLCBkYXRhOiBnT2JqLmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGRyb3BFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZ09iai5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQpO1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLnJvd0Ryb3BTZXR0aW5ncy50YXJnZXRJRCAmJiBkcm9wRWxlbSAmJiBkcm9wRWxlbS5lajJfaW5zdGFuY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3BFbGVtLmVqMl9pbnN0YW5jZXNbMF0uZ2V0Q29udGVudCgpLmNsYXNzTGlzdC5hZGQoJ2UtYWxsb3dSb3dEcm9wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLmlzRHJhZ1N0b3AgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBjbG9uZUVsZW1lbnQgPSBfdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jbG9uZXByb3BlcnRpZXMnKTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gX3RoaXMuZ2V0RWxlbWVudEZyb21Qb3NpdGlvbihjbG9uZUVsZW1lbnQsIGUuZXZlbnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLWRlZmF1bHRjdXInXSwgWydlLW5vdGFsbG93ZWRjdXInXSk7XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5yb3dEcmFnLCB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3M6IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKCksXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAncm93cycsIGRhdGE6IGdPYmouZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1yb3dkcmFnJyk7XG4gICAgICAgICAgICAgICAgaWYgKCF1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSB8fFxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGNsb25lRWxlbWVudC5wYXJlbnRFbGVtZW50LCAnZS1ncmlkJykuaWQgPT09IHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1ncmlkJykuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2Utbm90YWxsb3dlZGN1ciddLCBbJ2UtZGVmYXVsdGN1ciddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBfdGhpcy5nZXRFbGVtZW50RnJvbVBvc2l0aW9uKGUuaGVscGVyLCBlLmV2ZW50KTtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1yb3dkcmFnJyk7XG4gICAgICAgICAgICAgICAgdmFyIGRyb3BFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZ09iai5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQpO1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLnJvd0Ryb3BTZXR0aW5ncy50YXJnZXRJRCAmJiBkcm9wRWxlbSAmJiBkcm9wRWxlbS5lajJfaW5zdGFuY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3BFbGVtLmVqMl9pbnN0YW5jZXNbMF0uZ2V0Q29udGVudCgpLmNsYXNzTGlzdC5yZW1vdmUoJ2UtYWxsb3dSb3dEcm9wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMucm93RHJvcCwge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ3Jvd3MnLFxuICAgICAgICAgICAgICAgICAgICByb3dzOiBnT2JqLmdldFNlbGVjdGVkUm93cygpLCBkYXRhOiBnT2JqLmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZShlLmhlbHBlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsaXplRHJhZywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJvcCwgdGhpcy5jb2x1bW5Ecm9wLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5yb3dEcmFnQW5kRHJvcENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBSb3dERC5wcm90b3R5cGUuaW5pdGlhbGl6ZURyYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbjtcbiAgICAgICAgICAgIHZhciBkcmFnO1xuICAgICAgICAgICAgZHJhZyA9IG5ldyBlajJfYmFzZV8xLkRyYWdnYWJsZShnT2JqLmdldENvbnRlbnQoKSwge1xuICAgICAgICAgICAgICAgIGRyYWdUYXJnZXQ6ICcuZS1yb3djZWxsJyxcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogNSxcbiAgICAgICAgICAgICAgICBoZWxwZXI6IHRoaXMuaGVscGVyLFxuICAgICAgICAgICAgICAgIGRyYWdTdGFydDogdGhpcy5kcmFnU3RhcnQsXG4gICAgICAgICAgICAgICAgZHJhZzogdGhpcy5kcmFnLFxuICAgICAgICAgICAgICAgIGRyYWdTdG9wOiB0aGlzLmRyYWdTdG9wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmdldEVsZW1lbnRGcm9tUG9zaXRpb24gPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQ7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSB1dGlsXzEuZ2V0UG9zaXRpb24oZXZlbnQpO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgdGFyZ2V0ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzIuZXh0ZW5kKGUsIHsgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmdldFRhcmdldElkeCA9IGZ1bmN0aW9uICh0YXJnZXRSb3cpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRSb3cgPyBwYXJzZUludCh0YXJnZXRSb3cuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKSA6IDA7XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5jb2x1bW5Ecm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoZS5kcm9wcGVkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpICE9PSAnZ3JvdXBpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFJvdyA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJ3RyJyk7XG4gICAgICAgICAgICAgICAgdmFyIHNyY0NvbnRyb2wgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoZS5kcm9wcGVkRWxlbWVudC5wYXJlbnRFbGVtZW50LmlkICE9PSBnT2JqLmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3JjQ29udHJvbCA9IGUuZHJvcHBlZEVsZW1lbnQucGFyZW50RWxlbWVudC5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3JjQ29udHJvbC5lbGVtZW50LmlkICE9PSBnT2JqLmVsZW1lbnQuaWQgJiYgc3JjQ29udHJvbC5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQgIT09IGdPYmouZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByZWNvcmRzID0gc3JjQ29udHJvbC5nZXRTZWxlY3RlZFJlY29yZHMoKTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5kZXggPSBjdXJyZW50SW5kZXggPSB0aGlzLmdldFRhcmdldElkeCh0YXJnZXRSb3cpO1xuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHRhcmdldEluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRleCA9IGN1cnJlbnRJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEluZGV4ID0gdGFyZ2V0SW5kZXggKyAoZ09iai5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgKiBnT2JqLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSkgLSBnT2JqLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnJvd3NBZGRlZCwgeyB0b0luZGV4OiB0YXJnZXRJbmRleCwgcmVjb3JkczogcmVjb3JkcyB9KTtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgcmVxdWVzdFR5cGU6ICdyb3dkcmFnYW5kZHJvcCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3dzID0gc3JjQ29udHJvbC5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKTtcbiAgICAgICAgICAgICAgICB2YXIgc2tpcCA9IHNyY0NvbnRyb2wuYWxsb3dQYWdpbmcgP1xuICAgICAgICAgICAgICAgICAgICAoc3JjQ29udHJvbC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgKiBzcmNDb250cm9sLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSkgLSBzcmNDb250cm9sLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSA6IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmVjb3Jkcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cy5wdXNoKHNraXAgKyBzZWxlY3RlZFJvd3NbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzcmNDb250cm9sLm5vdGlmeShldmVudHMucm93c1JlbW92ZWQsIHsgaW5kZXhlczogdGhpcy5zZWxlY3RlZFJvd3MsIHJlY29yZHM6IHJlY29yZHMgfSk7XG4gICAgICAgICAgICAgICAgc3JjQ29udHJvbC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIHJlcXVlc3RUeXBlOiAncm93ZHJhZ2FuZGRyb3AnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5lbmFibGVBZnRlclJlbmRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpICYmIGUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplRHJhZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsaXplRHJhZyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyb3AsIHRoaXMuY29sdW1uRHJvcCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnJvd0RyYWdBbmREcm9wQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Jvd0RyYWdBbmREcm9wJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJvd0REO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Sb3dERCA9IFJvd0REO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcm93LXJlb3JkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDc2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9zZXJ2aWNlcy9hcmlhLXNlcnZpY2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cywgYXJpYV9zZXJ2aWNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEdyb3VwID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXAocGFyZW50LCBncm91cFNldHRpbmdzLCBzb3J0ZWRDb2x1bW5zLCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMudmlzdWFsRWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2xvbmVwcm9wZXJ0aWVzIGUtZHJhZ2Nsb25lIGUtZ2RjbG9uZScsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiAnbGluZS1oZWlnaHQ6MjNweCcsIGF0dHJzOiB7IGFjdGlvbjogJ2dyb3VwaW5nJyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS5zZW5kZXIudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1ncm91cGhlYWRlcmNlbGwnKSA/IHRhcmdldCA6XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1ncm91cGhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5jb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5nZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJykpO1xuICAgICAgICAgICAgICAgIF90aGlzLnZpc3VhbEVsZW1lbnQudGV4dENvbnRlbnQgPSBlbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgIF90aGlzLnZpc3VhbEVsZW1lbnQuc3R5bGUud2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoICsgMiArICdweCc7XG4gICAgICAgICAgICAgICAgX3RoaXMudmlzdWFsRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodCArIDIgKyAncHgnO1xuICAgICAgICAgICAgICAgIF90aGlzLnZpc3VhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnLCBfdGhpcy5jb2x1bW4udWlkKTtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuYXBwZW5kQ2hpbGQoX3RoaXMudmlzdWFsRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnZpc3VhbEVsZW1lbnQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS11bmdyb3VwZHJhZycpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHZhciBjbG9uZUVsZW1lbnQgPSBfdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jbG9uZXByb3BlcnRpZXMnKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuY29sdW1uRHJhZywgeyB0YXJnZXQ6IHRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ2hlYWRlcmNlbGwnLCBjb2x1bW46IF90aGlzLmNvbHVtbiB9KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1kZWZhdWx0Y3VyJ10sIFsnZS1ub3RhbGxvd2VkY3VyJ10pO1xuICAgICAgICAgICAgICAgIGlmICghKHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1ncmlkY29udGVudCcpIHx8IHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1oZWFkZXJjZWxsJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLW5vdGFsbG93ZWRjdXInXSwgWydlLWRlZmF1bHRjdXInXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0b3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtdW5ncm91cGRyYWcnKTtcbiAgICAgICAgICAgICAgICBpZiAoISh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkY29udGVudCcpIHx8IHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRoZWFkZXInKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZS5oZWxwZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlVaWQoZS5kcm9wcGVkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtaG92ZXInKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShlLmRyb3BwZWRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hcmlhLnNldERyb3BUYXJnZXQoX3RoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JvdXBkcm9wYXJlYScpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXJpYS5zZXRHcmFiYmVkKF90aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ1thcmlhLWdyYWJiZWQ9dHJ1ZV0nKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbikgfHwgY29sdW1uLmFsbG93R3JvdXBpbmcgPT09IGZhbHNlIHx8XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwoZ09iai5nZXRDb2x1bW5IZWFkZXJCeVVpZChjb2x1bW4udWlkKSwgJ2UtZ3JpZCcpLmdldEF0dHJpYnV0ZSgnaWQnKSAhPT1cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5ncm91cENvbHVtbihjb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hcmlhID0gbmV3IGFyaWFfc2VydmljZV8xLkFyaWFTZXJ2aWNlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBTZXR0aW5ncyA9IGdyb3VwU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnNvcnRlZENvbHVtbnMgPSBzb3J0ZWRDb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5mb2N1cyA9IHNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2ZvY3VzJyk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBHcm91cC5wcm90b3R5cGUuY29sdW1uRHJhZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNsb25lRWxlbWVudCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2xvbmVwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1kZWZhdWx0Y3VyJ10sIFsnZS1ub3RhbGxvd2VkY3VyJ10pO1xuICAgICAgICAgICAgaWYgKCF1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncm91cGRyb3BhcmVhJykgJiZcbiAgICAgICAgICAgICAgICAhKHRoaXMucGFyZW50LmFsbG93UmVvcmRlcmluZyAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1oZWFkZXJjZWxsJykpKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2Utbm90YWxsb3dlZGN1ciddLCBbJ2UtZGVmYXVsdGN1ciddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1ncm91cGRyb3BhcmVhJykgPyB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ob3ZlcicpIDogdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtaG92ZXInKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNvbHVtbkRyYWdTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXN0YWNrZWRoZWFkZXJjZWxsJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRyb3BBcmVhID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cGRyb3BhcmVhJyk7XG4gICAgICAgICAgICB0aGlzLmFyaWEuc2V0RHJvcFRhcmdldChkcm9wQXJlYSwgZS5jb2x1bW4uYWxsb3dHcm91cGluZyk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1oZWFkZXJjZWxsJykgPyBlLnRhcmdldCA6IHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRHcmFiYmVkKGVsZW1lbnQsIHRydWUsICFlLmNvbHVtbi5hbGxvd0dyb3VwaW5nKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNvbHVtbkRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChlLmRyb3BwZWRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYWN0aW9uJykgPT09ICdncm91cGluZycpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeVVpZChlLmRyb3BwZWRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbikgfHwgY29sdW1uLmFsbG93R3JvdXBpbmcgPT09IGZhbHNlIHx8XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwoZ09iai5nZXRDb2x1bW5IZWFkZXJCeVVpZChjb2x1bW4udWlkKSwgJ2UtZ3JpZCcpLmdldEF0dHJpYnV0ZSgnaWQnKSAhPT1cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVuZ3JvdXBDb2x1bW4oY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmdyb3VwQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudW5ncm91cENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJhZywgdGhpcy5jb2x1bW5EcmFnLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMuY29sdW1uRHJhZ1N0YXJ0LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5Ecm9wLCB0aGlzLmNvbHVtbkRyb3AsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZWZyZXNoU29ydEljb25zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5zb3J0Q29tcGxldGUsIHRoaXMucmVmcmVzaFNvcnRJY29ucywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyRHJvcCwgdGhpcy5oZWFkZXJEcm9wLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5ncm91cENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51bmdyb3VwQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnLCB0aGlzLmNvbHVtbkRyYWcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMuY29sdW1uRHJhZ1N0YXJ0KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJvcCwgdGhpcy5jb2x1bW5Ecm9wKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5zb3J0Q29tcGxldGUsIHRoaXMucmVmcmVzaFNvcnRJY29ucyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyRHJvcCwgdGhpcy5oZWFkZXJEcm9wKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmluaXRpYWxFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAmJiB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwQ29sdW1uKGNvbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdhbHREb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsdFVwQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBnT2JqLmFsbG93U2VsZWN0aW9uID8gZ09iai5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93cyA9IGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhUm93ID0gZ09iai5nZXREYXRhUm93cygpW3NlbGVjdGVkW3NlbGVjdGVkLmxlbmd0aCAtIDFdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncnBSb3cgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gZGF0YVJvdy5yb3dJbmRleDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvdycpICYmICFyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3cnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncnBSb3cgPSByb3dzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyhncnBSb3cucXVlcnlTZWxlY3RvcihlLmFjdGlvbiA9PT0gJ2FsdFVwQXJyb3cnID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLmUtcmVjb3JkcGx1c2V4cGFuZCcgOiAnLmUtcmVjb3JkcGx1c2NvbGxhcHNlJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxEb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFsbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsVXBBcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmZvY3VzLmdldEZvY3VzZWRFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignW2NsYXNzXj1cImUtcmVjb3JkXCJdJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyhyb3cpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyhlLnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLmFwcGx5U29ydEZyb21UYXJnZXQoZS50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy51bkdyb3VwRnJvbVRhcmdldChlLnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLnRvb2dsZUdyb3VwRnJvbUhlYWRlcihlLnRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51bkdyb3VwRnJvbVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXVuZ3JvdXBidXR0b24nKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbih0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudG9vZ2xlR3JvdXBGcm9tSGVhZGVyID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VG9nZ2xlQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JwdG9nZ2xlYnRuJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9nZ2xldW5ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZ3JvdXBDb2x1bW4odGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSkuZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cENvbHVtbih0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKS5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXRvZ2dsZXVuZ3JvdXAnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZWotbWFwcGluZ25hbWUnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5hcHBseVNvcnRGcm9tVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBnSGVhZGVyID0gZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWdyb3VwaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dTb3J0aW5nICYmIGdIZWFkZXIgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdW5ncm91cGJ1dHRvbicpICYmXG4gICAgICAgICAgICAgICAgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9nZ2xldW5ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gZ0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC5nZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJyk7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChmaWVsZCkucXVlcnlTZWxlY3RvckFsbCgnLmUtYXNjZW5kaW5nJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouc29ydENvbHVtbihmaWVsZCwgJ2Rlc2NlbmRpbmcnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouc29ydENvbHVtbihmaWVsZCwgJ2FzY2VuZGluZycsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmV4cGFuZENvbGxhcHNlUm93cyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciB0cmd0ID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJlY29yZHBsdXNleHBhbmQnKSB8fFxuICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1yZWNvcmRwbHVzY29sbGFwc2UnKTtcbiAgICAgICAgICAgIGlmICh0cmd0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxJZHggPSB0cmd0LmNlbGxJbmRleDtcbiAgICAgICAgICAgICAgICB2YXIgcm93SWR4ID0gdHJndC5wYXJlbnRFbGVtZW50LnJvd0luZGV4O1xuICAgICAgICAgICAgICAgIHZhciByb3dOb2RlcyA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKHJvd05vZGVzKS5zbGljZShyb3dJZHggKyAxLCByb3dOb2Rlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIHZhciBpc0hpZGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZEVsZW0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIHRvRXhwYW5kID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGluZGVudCA9IHRyZ3QucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1pbmRlbnRjZWxsJykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBleHBhbmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAodHJndC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hZGRDbGFzcyhbdHJndF0sICdlLXJlY29yZHBsdXNleHBhbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhbdHJndF0sICdlLXJlY29yZHBsdXNjb2xsYXBzZScpO1xuICAgICAgICAgICAgICAgICAgICB0cmd0LmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTmFtZSA9ICdlLWljb25zIGUtZ2RpYWdvbmFsZG93biBlLWljb24tZ2Rvd25hcnJvdyc7XG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpc0hpZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0cmd0XSwgJ2UtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFkZENsYXNzKFt0cmd0XSwgJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3QuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NOYW1lID0gJ2UtaWNvbnMgZS1nbmV4dGZvcndhcmQgZS1pY29uLWdyaWdodGFycm93JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldEV4cGFuZCh0cmd0LCBleHBhbmQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJylbY2VsbElkeF0gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0ucXVlcnlTZWxlY3RvckFsbCgndGQnKVtjZWxsSWR4XS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5kZW50Y2VsbCcpICYmIHJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0hpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1pbmRlbnRjZWxsJykubGVuZ3RoID09PSBpbmRlbnQgKyAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRFbGVtID0gcm93c1tpXS5xdWVyeVNlbGVjdG9yKCcuZS1yZWNvcmRwbHVzZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHBhbmRFbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0V4cGFuZC5wdXNoKGV4cGFuZEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3cnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaSAtIDFdLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWRldGFpbHJvd2NvbGxhcHNlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRvRXhwYW5kLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoW3RvRXhwYW5kW2ldXSwgJ2UtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmFkZENsYXNzKFt0b0V4cGFuZFtpXV0sICdlLXJlY29yZHBsdXNjb2xsYXBzZScpO1xuICAgICAgICAgICAgICAgICAgICB0b0V4cGFuZFtpXS5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc05hbWUgPSAnZS1pY29ucyBlLWduZXh0Zm9yd2FyZCBlLWljb24tZ3JpZ2h0YXJyb3cnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyh0b0V4cGFuZFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZXhwYW5kQ29sbGFwc2UgPSBmdW5jdGlvbiAoaXNFeHBhbmQpIHtcbiAgICAgICAgICAgIHZhciByb3dOb2RlcyA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW47XG4gICAgICAgICAgICB2YXIgcm93O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd05vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd05vZGVzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJlY29yZHBsdXNleHBhbmQsIC5lLXJlY29yZHBsdXNjb2xsYXBzZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByb3cgPSByb3dOb2Rlc1tpXS5xdWVyeVNlbGVjdG9yKGlzRXhwYW5kID8gJy5lLXJlY29yZHBsdXNjb2xsYXBzZScgOiAnLmUtcmVjb3JkcGx1c2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gaXNFeHBhbmQgPyAnZS1yZWNvcmRwbHVzZXhwYW5kJyA6ICdlLXJlY29yZHBsdXNjb2xsYXBzZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NOYW1lID0gaXNFeHBhbmQgPyAnZS1pY29ucyBlLWdkaWFnb25hbGRvd24gZS1pY29uLWdkb3duYXJyb3cnIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZS1pY29ucyBlLWduZXh0Zm9yd2FyZCBlLWljb24tZ3JpZ2h0YXJyb3cnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJvd05vZGVzW2ldLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucygnZS1yZWNvcmRwbHVzZXhwYW5kJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd05vZGVzW2ldLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucygnZS1yZWNvcmRwbHVzY29sbGFwc2UnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd05vZGVzW2ldLnN0eWxlLmRpc3BsYXkgPSBpc0V4cGFuZCA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByb3dOb2Rlc1tpXS5zdHlsZS5kaXNwbGF5ID0gaXNFeHBhbmQgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5leHBhbmRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckdyb3VwRHJvcEFyZWEoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdERyYWdBbmREcm9wKCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb2dnbGVCdG4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbmRlckdyb3VwRHJvcEFyZWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncm91cGRyb3BhcmVhJywgYXR0cnM6IHsgJ3RhYmluZGV4JzogJy0xJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cERyb3BBcmVhKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnQsIHRoaXMucGFyZW50LmVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVwZGF0ZUdyb3VwRHJvcEFyZWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cFNldHRpbmdzLnNob3dEcm9wQXJlYSAmJiAhdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyYWdMYWJlbCA9IHRoaXMubDEwbi5nZXRDb25zdGFudCgnR3JvdXBEcm9wQXJlYScpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBkcmFnTGFiZWw7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtZ3JvdXBlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPT09IHRoaXMubDEwbi5nZXRDb25zdGFudCgnR3JvdXBEcm9wQXJlYScpICYmIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWdyb3VwZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmluaXREcmFnQW5kRHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUdIZWFkZXJEcm9wKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVHSGVhZGVyRHJhZygpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuaW5pdGlhbGl6ZUdIZWFkZXJEcmFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRyYWcgPSBuZXcgZWoyX2Jhc2VfMS5EcmFnZ2FibGUodGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgZHJhZ1RhcmdldDogJy5lLWdyb3VwaGVhZGVyY2VsbCcsXG4gICAgICAgICAgICAgICAgZGlzdGFuY2U6IDUsXG4gICAgICAgICAgICAgICAgaGVscGVyOiB0aGlzLmhlbHBlcixcbiAgICAgICAgICAgICAgICBkcmFnU3RhcnQ6IHRoaXMuZHJhZ1N0YXJ0LFxuICAgICAgICAgICAgICAgIGRyYWc6IHRoaXMuZHJhZyxcbiAgICAgICAgICAgICAgICBkcmFnU3RvcDogdGhpcy5kcmFnU3RvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5oZWFkZXJEcm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghZS51aWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQoZS51aWQpO1xuICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKGNvbHVtbi5maWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5pbml0aWFsaXplR0hlYWRlckRyb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRyb3AgPSBuZXcgZWoyX2Jhc2VfMS5Ecm9wcGFibGUodGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgYWNjZXB0OiAnLmUtZHJhZ2Nsb25lJyxcbiAgICAgICAgICAgICAgICBkcm9wOiB0aGlzLmRyb3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZ3JvdXBDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uTmFtZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2x1bW4pIHx8IGNvbHVtbi5hbGxvd0dyb3VwaW5nID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgICAgICh0aGlzLmNvbnRlbnRSZWZyZXNoICYmIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uTmFtZSkgPiAtMSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMuZ3JvdXBDb2x1bW4sIGFyZzE6IGNvbHVtbk5hbWUgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1uLnZpc2libGUgPSBnT2JqLmdyb3VwU2V0dGluZ3Muc2hvd0dyb3VwZWRDb2x1bW47XG4gICAgICAgICAgICB0aGlzLmNvbE5hbWUgPSBjb2x1bW5OYW1lO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENvbFRvR3JvdXBEcm9wKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cERyb3BBcmVhKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51bmdyb3VwQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gP1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkID09PSBjb2x1bW5OYW1lOyB9KVswXSA6IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbikgfHwgY29sdW1uLmFsbG93R3JvdXBpbmcgPT09IGZhbHNlIHx8IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uTmFtZSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnVuZ3JvdXBDb2x1bW4sIGFyZzE6IGNvbHVtbk5hbWUgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1uLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jb2xOYW1lID0gY29sdW1uLmZpZWxkO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zKSk7XG4gICAgICAgICAgICBjb2x1bW5zLnNwbGljZShjb2x1bW5zLmluZGV4T2YodGhpcy5jb2xOYW1lKSwgMSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zb3J0ZWRDb2x1bW5zLmluZGV4T2YoY29sdW1uTmFtZSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHVtbk5hbWUgPT09IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnNbaV0uZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucyA9IGNvbHVtbnM7XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucykpO1xuICAgICAgICAgICAgY29sdW1ucy5wdXNoKHRoaXMuY29sTmFtZSk7XG4gICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucyA9IGNvbHVtbnM7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnNbaV0uZmllbGQgPT09IHRoaXMuY29sTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID09PSBpKSB7XG4gICAgICAgICAgICAgICAgZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5wdXNoKHsgZmllbGQ6IHRoaXMuY29sTmFtZSwgZGlyZWN0aW9uOiAnYXNjZW5kaW5nJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFnT2JqLmFsbG93U29ydGluZykge1xuICAgICAgICAgICAgICAgIGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnNbaV0uZGlyZWN0aW9uID0gJ2FzY2VuZGluZyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKGUucmVxdWVzdFR5cGUgPT09ICdncm91cGluZycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENvbFRvR3JvdXBEcm9wKHRoaXMuY29sTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbEZyb21Hcm91cERyb3AodGhpcy5jb2xOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0gdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZih0aGlzLmNvbE5hbWUpID4gLTEgPyB7XG4gICAgICAgICAgICAgICAgY29sdW1uTmFtZTogdGhpcy5jb2xOYW1lLCByZXF1ZXN0VHlwZTogJ2dyb3VwaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9IDogeyByZXF1ZXN0VHlwZTogJ3VuZ3JvdXBpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGUgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8zLmV4dGVuZChlLCBhcmdzKSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5hZGRDb2xUb0dyb3VwRHJvcCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAnYXNjZW5kaW5nJztcbiAgICAgICAgICAgIHZhciBncm91cGVkQ29sdW1uID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZC1pY29uIGUtZ3JvdXBoZWFkZXJjZWxsJyB9KTtcbiAgICAgICAgICAgIHZhciBjaGlsZERpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBhdHRyczogeyAnZWotbWFwcGluZ25hbWUnOiBmaWVsZCB9IH0pO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoZmllbGQpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckNlbGwgPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5VWlkKGNvbHVtbi51aWQpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5oZWFkZXJUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmhlYWRlclRlbXBsYXRlLmluZGV4T2YoJyMnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGREaXYuaW5uZXJIVE1MID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb2x1bW4uaGVhZGVyVGVtcGxhdGUpLmlubmVySFRNTC50cmltKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZERpdi5pbm5lckhUTUwgPSBjb2x1bW4uaGVhZGVyVGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoaWxkRGl2LmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5hZGQoJ2UtZ3JvdXB0ZXh0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaGlsZERpdi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZ3JvdXB0ZXh0JywgaW5uZXJIVE1MOiBjb2x1bW4uaGVhZGVyVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ3NvcnQgdGhlIGdyb3VwZWQgY29sdW1uJyB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VG9nZ2xlQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgY2hpbGREaXYuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXRvZ2dsZWdyb3VwYnV0dG9uIGUtaWNvbnMgZS1pY29uLXVuZ3JvdXAgZS10b2dnbGV1bmdyb3VwJywgaW5uZXJIVE1MOiAnJm5ic3A7JyxcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ3VuZ3JvdXAgYnV0dG9uJyB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhlYWRlckNlbGwucXVlcnlTZWxlY3RvckFsbCgnLmUtYXNjZW5kaW5nLC5lLWRlc2NlbmRpbmcnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBoZWFkZXJDZWxsLnF1ZXJ5U2VsZWN0b3IoJy5lLWFzY2VuZGluZycpID8gJ2FzY2VuZGluZycgOiAnZGVzY2VuZGluZyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGlsZERpdi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1ncm91cHNvcnQgZS1pY29ucyAnICsgKCdlLScgKyBkaXJlY3Rpb24gKyAnIGUtaWNvbi0nICsgZGlyZWN0aW9uKSwgaW5uZXJIVE1MOiAnJm5ic3A7JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAnc29ydCB0aGUgZ3JvdXBlZCBjb2x1bW4nIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNoaWxkRGl2LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXVuZ3JvdXBidXR0b24gZS1pY29ucyBlLWljb24taGlkZScsIGlubmVySFRNTDogJyZuYnNwOycsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGl0bGU6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnVW5Hcm91cCcpLCB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAndW5ncm91cCB0aGUgZ3JvdXBlZCBjb2x1bW4nIH0sXG4gICAgICAgICAgICAgICAgc3R5bGVzOiB0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd1VuZ3JvdXBCdXR0b24gPyAnJyA6ICdkaXNwbGF5Om5vbmUnXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBncm91cGVkQ29sdW1uLmFwcGVuZENoaWxkKGNoaWxkRGl2KTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChncm91cGVkQ29sdW1uKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlZnJlc2hUb2dnbGVCdG4gPSBmdW5jdGlvbiAoaXNSZW1vdmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd1RvZ2dsZUJ1dHRvbikge1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtaGVhZGVyY2VsbGRpdicpKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaGVhZGVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShoZWFkZXJzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1lbXB0eWNlbGwnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZChoZWFkZXJzW2ldLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5zaG93Q29sdW1uTWVudSB8fCAodGhpcy5wYXJlbnQuc2hvd0NvbHVtbk1lbnUgJiYgIWNvbHVtbi5zaG93Q29sdW1uTWVudSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyc1tpXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncnB0b2dnbGVidG4nKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoaGVhZGVyc1tpXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncnB0b2dnbGVidG4nKVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNSZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tpXS5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWdycHRvZ2dsZWJ0biBlLWljb25zICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHVtbi5maWVsZCkgPiAtMSA/ICdlLXRvZ2dsZXVuZ3JvdXAgZS1pY29uLXVuZ3JvdXAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2UtdG9nZ2xlZ3JvdXAgZS1pY29uLWdyb3VwJyksIGF0dHJzOiB7IHRhYmluZGV4OiAnLTEnLCAnYXJpYS1sYWJlbCc6ICdHcm91cCBidXR0b24nIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbW92ZUNvbEZyb21Hcm91cERyb3AgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZ2V0R0hlYWRlckNlbGwoZmllbGQpKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlR3JvdXBEcm9wQXJlYSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhlLnByb3BlcnRpZXMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjb2x1bW5zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKHRoaXMuY29sTmFtZSkgPiAtMSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uTmFtZTogdGhpcy5jb2xOYW1lLCByZXF1ZXN0VHlwZTogJ2dyb3VwaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHsgcmVxdWVzdFR5cGU6ICd1bmdyb3VwaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dEcm9wQXJlYSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUdyb3VwRHJvcEFyZWEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEgPyB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnIDogdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd0dyb3VwZWRDb2x1bW4nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cGVkQ29sdW1uKHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93R3JvdXBlZENvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgeyByZXF1ZXN0VHlwZTogJ3JlZnJlc2gnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dVbmdyb3VwQnV0dG9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQnV0dG9uVmlzaWJpbGl0eSh0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd1VuZ3JvdXBCdXR0b24sICdlLXVuZ3JvdXBidXR0b24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93VG9nZ2xlQnV0dG9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQnV0dG9uVmlzaWJpbGl0eSh0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd1RvZ2dsZUJ1dHRvbiwgJ2UtdG9nZ2xlZ3JvdXBidXR0b24gJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5yZWZyZXNoSGVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51cGRhdGVHcm91cGVkQ29sdW1uID0gZnVuY3Rpb24gKGlzVmlzaWJsZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQodGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnNbaV0pLnZpc2libGUgPSBpc1Zpc2libGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51cGRhdGVCdXR0b25WaXNpYmlsaXR5ID0gZnVuY3Rpb24gKGlzVmlzaWJsZSwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgZ0hlYWRlciA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgY2xhc3NOYW1lKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdIZWFkZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBnSGVhZGVyW2ldLnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmVuYWJsZUFmdGVyUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSA9PT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkgJiYgZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJHcm91cGluZygpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb2dnbGVCdG4odHJ1ZSk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY2xlYXJHcm91cGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucykpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuZ3JvdXBDb2x1bW4oY29sc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2dyb3VwJztcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlZnJlc2hTb3J0SWNvbnMgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBoZWFkZXI7XG4gICAgICAgICAgICB2YXIgY29scyA9IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZ0NvbHMgPSBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBmaWVsZE5hbWVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZDsgfSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb2dnbGVCdG4oKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhlYWRlciA9IGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChjb2xzW2ldLmZpZWxkKTtcbiAgICAgICAgICAgICAgICBpZiAoIWdPYmouYWxsb3dTb3J0aW5nICYmICh0aGlzLnNvcnRlZENvbHVtbnMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA+IC0xIHx8XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPiAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNvcnRmaWx0ZXJkaXYnKSwgWydlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10sIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2Utc29ydG51bWJlcicsIGlubmVySFRNTDogKGkgKyAxKS50b1N0cmluZygpIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmdldEdIZWFkZXJDZWxsKGNvbHNbaV0uZmllbGQpICYmIHRoaXMuZ2V0R0hlYWRlckNlbGwoY29sc1tpXS5maWVsZCkucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JvdXBzb3J0JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmRpcmVjdGlvbiA9PT0gJ2FzY2VuZGluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KHRoaXMuZ2V0R0hlYWRlckNlbGwoY29sc1tpXS5maWVsZCkucXVlcnlTZWxlY3RvcignLmUtZ3JvdXBzb3J0JyksIFsnZS1hc2NlbmRpbmcnLCAnZS1pY29uLWFzY2VuZGluZyddLCBbJ2UtZGVzY2VuZGluZycsICdlLWljb24tZGVzY2VuZGluZyddKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KHRoaXMuZ2V0R0hlYWRlckNlbGwoY29sc1tpXS5maWVsZCkucXVlcnlTZWxlY3RvcignLmUtZ3JvdXBzb3J0JyksIFsnZS1kZXNjZW5kaW5nJywgJ2UtaWNvbi1kZXNjZW5kaW5nJ10sIFsnZS1hc2NlbmRpbmcnLCAnZS1pY29uLWFzY2VuZGluZyddKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnQ29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzLmluZGV4T2YoZ0NvbHNbaV0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGdDb2xzW2ldKS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZ3JvdXBlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5nZXRHSGVhZGVyQ2VsbCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudCAmJiB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2VqLW1hcHBpbmduYW1lPScgKyBmaWVsZCArICddJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tlai1tYXBwaW5nbmFtZT0nICsgZmllbGQgKyAnXScpLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Hcm91cCA9IEdyb3VwO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZ3JvdXAuanNcbi8vIG1vZHVsZSBpZCA9IDc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9ncmlkXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiLCBcIi4uL21vZGVscy9yb3dcIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4uL2Jhc2UvZW51bVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGdyaWRfMSwgdXRpbF8xLCBldmVudHMsIGFyaWFfc2VydmljZV8xLCByb3dfMSwgY2VsbF8xLCBlbnVtXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERldGFpbFJvdyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERldGFpbFJvdyhwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuYXJpYSA9IG5ldyBhcmlhX3NlcnZpY2VfMS5BcmlhU2VydmljZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZvY3VzID0gbG9jYXRvci5nZXRTZXJ2aWNlKCdmb2N1cycpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy50b29nbGVFeHBhbmRjb2xsYXBzZShlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICd0ZCcpKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS50b29nbGVFeHBhbmRjb2xsYXBzZSA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gJ3BhcmVudERldGFpbHMnO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3djb2xsYXBzZScpIHx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93ZXhwYW5kJykpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHVpZF8xID0gdHIuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpO1xuICAgICAgICAgICAgICAgIHZhciBuZXh0Um93ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlblt0ci5yb3dJbmRleCArIDFdO1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2NvbGxhcHNlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9ICdyZWNvcmRzJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWaWV3RGF0YSA9IGdPYmouYWxsb3dHcm91cGluZyAmJiBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggP1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5jdXJyZW50Vmlld0RhdGFba2V5XSA6IGdPYmouY3VycmVudFZpZXdEYXRhO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGN1cnJlbnRWaWV3RGF0YVt0ci5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsUm93KG5leHRSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Um93LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChnT2JqLmdldERldGFpbFRlbXBsYXRlKCkgfHwgZ09iai5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWxSb3cgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJywgeyBjbGFzc05hbWU6ICdlLWRldGFpbHJvdycgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWlsQ2VsbCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7IGNsYXNzTmFtZTogJ2UtZGV0YWlsY2VsbCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxDZWxsLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIHRoaXMucGFyZW50LmdldFZpc2libGVDb2x1bW5zKCkubGVuZ3RoLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfMS5Sb3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YVJvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsczogW25ldyBjZWxsXzEuQ2VsbCh7IGNlbGxUeXBlOiBlbnVtXzEuQ2VsbFR5cGUuSW5kZW50IH0pLCBuZXcgY2VsbF8xLkNlbGwoeyBpc0RhdGFDZWxsOiB0cnVlLCB2aXNpYmxlOiB0cnVlIH0pXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxSb3cuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1pbmRlbnRjZWxsJyB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzLnVuc2hpZnQobmV3IGNlbGxfMS5DZWxsKHsgY2VsbFR5cGU6IGVudW1fMS5DZWxsVHlwZS5JbmRlbnQgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsUm93LmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7IGNsYXNzTmFtZTogJ2UtZGV0YWlsaW5kZW50Y2VsbCcgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsUm93LmFwcGVuZENoaWxkKGRldGFpbENlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZGV0YWlsUm93LCB0ci5uZXh0U2libGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ09iai5kZXRhaWxUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbihkZXRhaWxDZWxsLCBnT2JqLmdldERldGFpbFRlbXBsYXRlKCkoZGF0YSwgZ09iaiwgJ2RldGFpbFRlbXBsYXRlJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5jaGlsZEdyaWRbcGFyZW50XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SUQ6IGdPYmouZWxlbWVudC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50UHJpbWFyeUtleXM6IGdPYmouZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50S2V5RmllbGQ6IGdPYmouY2hpbGRHcmlkLnF1ZXJ5U3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRLZXlGaWVsZFZhbHVlOiBkYXRhW2dPYmouY2hpbGRHcmlkLnF1ZXJ5U3RyaW5nXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Um93RGF0YTogZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyaWQgPSBuZXcgZ3JpZF8xLkdyaWQoZ09iai5jaGlsZEdyaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb2R1bGVzID0gZ3JpZC5nZXRJbmplY3RlZE1vZHVsZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5qZWN0ZWRNb2R1ZXMgPSBnT2JqLmdldEluamVjdGVkTW9kdWxlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbW9kdWxlcyB8fCBtb2R1bGVzLmxlbmd0aCAhPT0gaW5qZWN0ZWRNb2R1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQuc2V0SW5qZWN0ZWRNb2R1bGVzKGluamVjdGVkTW9kdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyaWRFbGVtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnY2hpbGQnICsgdXRpbF8xLnBhcmVudHModHIsICdlLWdyaWQnKS5sZW5ndGggK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ19ncmlkJyArIHRyLnJvd0luZGV4ICsgdXRpbF8xLmdldFVpZCgnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxDZWxsLmFwcGVuZENoaWxkKGdyaWRFbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkLmFwcGVuZFRvKGdyaWRFbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbFJvdy5hcHBlbmRDaGlsZChkZXRhaWxDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRldGFpbFJvdywgdHIubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeF8xO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Um93c09iamVjdCgpLnNvbWUoZnVuY3Rpb24gKHIsIHJJbmRleCkgeyBpZHhfMSA9IHJJbmRleDsgcmV0dXJuIHIudWlkID09PSB1aWRfMTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldFJvd3MoKS5zcGxpY2UodHIucm93SW5kZXggKyAxLCAwLCBkZXRhaWxSb3cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Um93c09iamVjdCgpLnNwbGljZShpZHhfMSArIDEsIDAsIHJvdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmRldGFpbERhdGFCb3VuZCwgeyBkZXRhaWxFbGVtZW50OiBkZXRhaWxDZWxsLCBkYXRhOiBkYXRhIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmRldGFpbERhdGFCb3VuZCwgeyByb3dzOiB0aGlzLnBhcmVudC5nZXRSb3dzT2JqZWN0KCkgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LCBbJ2UtZGV0YWlscm93ZXhwYW5kJ10sIFsnZS1kZXRhaWxyb3djb2xsYXBzZSddKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLCBbJ2UtZHRkaWFnb25hbGRvd24nLCAnZS1pY29uLWdkb3duYXJyb3cnXSwgWydlLWR0ZGlhZ29uYWxyaWdodCcsICdlLWljb24tZ3JpZ2h0YXJyb3cnXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRFeHBhbmQodGFyZ2V0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsUm93KG5leHRSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Um93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LCBbJ2UtZGV0YWlscm93Y29sbGFwc2UnXSwgWydlLWRldGFpbHJvd2V4cGFuZCddKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLCBbJ2UtZHRkaWFnb25hbHJpZ2h0JywgJ2UtaWNvbi1ncmlnaHRhcnJvdyddLCBbJ2UtZHRkaWFnb25hbGRvd24nLCAnZS1pY29uLWdkb3duYXJyb3cnXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRFeHBhbmQodGFyZ2V0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmlzRGV0YWlsUm93ID0gZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgcmV0dXJuIHJvdyAmJiByb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvdycpO1xuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5nZXRURGZyb21JbmRleCA9IGZ1bmN0aW9uIChpbmRleCwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgdHIgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW2luZGV4XTtcbiAgICAgICAgICAgIGlmICh0ciAmJiB0ci5xdWVyeVNlbGVjdG9yKGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHIucXVlcnlTZWxlY3RvcihjbGFzc05hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuZXhwYW5kID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKCFpc05hTih0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5nZXRURGZyb21JbmRleCh0YXJnZXQsICcuZS1kZXRhaWxyb3djb2xsYXBzZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2NvbGxhcHNlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2dsZUV4cGFuZGNvbGxhcHNlKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuY29sbGFwc2UgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB0aGlzLmdldFREZnJvbUluZGV4KHRhcmdldCwgJy5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2V4cGFuZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b29nbGVFeHBhbmRjb2xsYXBzZSh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmV4cGFuZEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2UodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5leHBhbmRDb2xsYXBzZSA9IGZ1bmN0aW9uIChpc0V4cGFuZCkge1xuICAgICAgICAgICAgdmFyIHRkO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ZCA9IHJvd3NbaV0ucXVlcnlTZWxlY3RvcignLmUtZGV0YWlscm93Y29sbGFwc2UsIC5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgIGlzRXhwYW5kID8gdGhpcy5leHBhbmQodGQpIDogdGhpcy5jb2xsYXBzZSh0ZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybERvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxVcEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbHRVcEFycm93JzpcbiAgICAgICAgICAgICAgICBjYXNlICdhbHREb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBnT2JqLmFsbG93U2VsZWN0aW9uID8gZ09iai5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YVJvdyA9IGdPYmouZ2V0RGF0YVJvd3MoKVtzZWxlY3RlZFtzZWxlY3RlZC5sZW5ndGggLSAxXV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGQgPSBkYXRhUm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2NvbGxhcHNlLCAuZS1kZXRhaWxyb3dleHBhbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuYWN0aW9uID09PSAnYWx0RG93bkFycm93JyA/IHRoaXMuZXhwYW5kKHRkKSA6IHRoaXMuY29sbGFwc2UodGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5mb2N1cy5nZXRGb2N1c2VkRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2NvbGxhcHNlJykgJiYgIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2V4cGFuZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2dsZUV4cGFuZGNvbGxhcHNlKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdkZXRhaWxSb3cnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGV0YWlsUm93O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5EZXRhaWxSb3cgPSBEZXRhaWxSb3c7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9kZXRhaWwtcm93LmpzXG4vLyBtb2R1bGUgaWQgPSA3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9uYXZpZ2F0aW9uc18xLCBldmVudHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVG9vbGJhciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFRvb2xiYXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wcmVkZWZpbmVkSXRlbXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5ncmlkSUQgPSBwYXJlbnQuZWxlbWVudC5pZDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB2YXIgcHJlSXRlbXMgPSBbJ2FkZCcsICdlZGl0JywgJ3VwZGF0ZScsICdkZWxldGUnLCAnY2FuY2VsJywgJ3ByaW50JyxcbiAgICAgICAgICAgICAgICAncGRmZXhwb3J0JywgJ2V4Y2VsZXhwb3J0JywgJ3dvcmRleHBvcnQnLCAnY3N2ZXhwb3J0J107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHByZUl0ZW1zXzEgPSBwcmVJdGVtczsgX2kgPCBwcmVJdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gcHJlSXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGxvY2FsZU5hbWUgPSBpdGVtWzBdLnRvVXBwZXJDYXNlKCkgKyBpdGVtLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJlZGVmaW5lZEl0ZW1zW2l0ZW1dID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5ncmlkSUQgKyAnXycgKyBpdGVtLCBwcmVmaXhJY29uOiAnZS0nICsgaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KGxvY2FsZU5hbWUpLCB0b29sdGlwVGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KGxvY2FsZU5hbWUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJlZGVmaW5lZEl0ZW1zLnNlYXJjaCA9IHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5ncmlkSUQgKyAnX3NlYXJjaCcsIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImUtc2VhcmNoXCIgcm9sZT1cInNlYXJjaFwiID5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwiJyArIHRoaXMuZ3JpZElEICsgJ19zZWFyY2hidXR0b25cIiBjbGFzcz1cImUtc2VhcmNoZmluZCBlLWljb25zXCIgdGFiaW5kZXg9XCItMVwiXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICByb2xlPVwiYnV0dG9uXCIgYXJpYS1sYWJlbD0gXCJzZWFyY2hcIj48L3NwYW4+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCInICsgdGhpcy5ncmlkSUQgKyAnX3NlYXJjaGJhclwiIGFyaWEtbXVsdGlsaW5lPSBcImZhbHNlXCIgdHlwZT1cInNlYXJjaFwiXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nICsgdGhpcy5sMTBuLmdldENvbnN0YW50KCdTZWFyY2gnKSArICc+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICA8L2lucHV0PjwvZGl2PicsIHRvb2x0aXBUZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1NlYXJjaCcpLCBhbGlnbjogJ3JpZ2h0J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucHJlZGVmaW5lZEl0ZW1zLmNvbHVtbmNob29zZXIgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuZ3JpZElEICsgJ18nICsgJ2NvbHVtbmNob29zZXInLCBjc3NDbGFzczogJ2UtY2MgZS1jY2RpdiBlLWNjLXRvb2xiYXInLCBzdWZmaXhJY29uOiAnZS0nICsgJ2NvbHVtbmNob29zZXItYnRuJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiAnQ29sdW1ucycsIHRvb2x0aXBUZXh0OiAnY29sdW1ucycsIGFsaWduOiAncmlnaHQnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVG9vbGJhcigpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRUb29sYmFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9vbGJhci5lbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRvb2xiYXIuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sYmFyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jcmVhdGVUb29sYmFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5nZXRJdGVtcygpO1xuICAgICAgICAgICAgdGhpcy50b29sYmFyID0gbmV3IGVqMl9uYXZpZ2F0aW9uc18xLlRvb2xiYXIoe1xuICAgICAgICAgICAgICAgIGl0ZW1zOiBpdGVtcyxcbiAgICAgICAgICAgICAgICBjbGlja2VkOiB0aGlzLnRvb2xiYXJDbGlja0hhbmRsZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBlbmFibGVQZXJzaXN0ZW5jZTogdGhpcy5wYXJlbnQuZW5hYmxlUGVyc2lzdGVuY2UsXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHZpZXdTdHIgPSAndmlld0NvbnRhaW5lclJlZic7XG4gICAgICAgICAgICB2YXIgcmVnaXN0ZXJUZW1wID0gJ3JlZ2lzdGVyZWRUZW1wbGF0ZSc7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRbdmlld1N0cl0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXJbcmVnaXN0ZXJUZW1wXSA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhclt2aWV3U3RyXSA9IHRoaXMucGFyZW50W3ZpZXdTdHJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiB0aGlzLmdyaWRJRCArICdfdG9vbGJhckl0ZW1zJyB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC50b29sYmFyVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLnBhcmVudC50b29sYmFyVGVtcGxhdGUpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kVG8odGhpcy5wYXJlbnQudG9vbGJhclRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy50b29sYmFyLmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEuYXBwZW5kQ2hpbGRyZW4odGhpcy5lbGVtZW50LCB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLnBhcmVudC50b29sYmFyVGVtcGxhdGUpKHt9LCB0aGlzLnBhcmVudCwgJ3Rvb2xiYXJUZW1wbGF0ZScpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kVG8odGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCwgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpKTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuZ3JpZElEICsgJ19zZWFyY2hiYXInKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50KCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5zZWFyY2hTZXR0aW5ncykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VhcmNoQm94KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlZnJlc2hUb29sYmFySXRlbXMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBlbmFibGVJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGRpc2FibGVJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGVkaXQgPSBnT2JqLmVkaXRTZXR0aW5ncztcbiAgICAgICAgICAgIGVkaXQuYWxsb3dBZGRpbmcgPyBlbmFibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19hZGQnKSA6IGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19hZGQnKTtcbiAgICAgICAgICAgIGVkaXQuYWxsb3dFZGl0aW5nID8gZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfZWRpdCcpIDogZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2VkaXQnKTtcbiAgICAgICAgICAgIGVkaXQuYWxsb3dEZWxldGluZyA/IGVuYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2RlbGV0ZScpIDogZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2RlbGV0ZScpO1xuICAgICAgICAgICAgaWYgKGdPYmouZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXVwZGF0ZWR0ZCcpLmxlbmd0aCAmJiAoZWRpdC5hbGxvd0FkZGluZyB8fCBlZGl0LmFsbG93RWRpdGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfdXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2NhbmNlbCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX3VwZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfY2FuY2VsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0ICYmIChlZGl0LmFsbG93QWRkaW5nIHx8IGVkaXQuYWxsb3dFZGl0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVJdGVtcyA9IFt0aGlzLmdyaWRJRCArICdfdXBkYXRlJywgdGhpcy5ncmlkSUQgKyAnX2NhbmNlbCddO1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMgPSBbdGhpcy5ncmlkSUQgKyAnX2FkZCcsIHRoaXMuZ3JpZElEICsgJ19lZGl0JywgdGhpcy5ncmlkSUQgKyAnX2RlbGV0ZSddO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX3VwZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfY2FuY2VsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbmFibGVJdGVtcyhlbmFibGVJdGVtcywgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZUl0ZW1zKGRpc2FibGVJdGVtcywgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgICAgdmFyIHRvb2xiYXJJdGVtcyA9IHRoaXMucGFyZW50LnRvb2xiYXIgfHwgW107XG4gICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLnBhcmVudC50b29sYmFyKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHRvb2xiYXJJdGVtc18xID0gdG9vbGJhckl0ZW1zOyBfaSA8IHRvb2xiYXJJdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdG9vbGJhckl0ZW1zXzFbX2ldO1xuICAgICAgICAgICAgICAgIHR5cGVvZiAoaXRlbSkgPT09ICdzdHJpbmcnID8gaXRlbXMucHVzaCh0aGlzLmdldEl0ZW1PYmplY3QoaXRlbSkpIDogaXRlbXMucHVzaCh0aGlzLmdldEl0ZW0oaXRlbSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRJdGVtID0gZnVuY3Rpb24gKGl0ZW1PYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5wcmVkZWZpbmVkSXRlbXNbaXRlbU9iamVjdC50ZXh0XTtcbiAgICAgICAgICAgIHJldHVybiBpdGVtID8gZWoyX2Jhc2VfMS5leHRlbmQoaXRlbSwgaXRlbSwgaXRlbU9iamVjdCkgOiBpdGVtT2JqZWN0O1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRJdGVtT2JqZWN0ID0gZnVuY3Rpb24gKGl0ZW1OYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmVkZWZpbmVkSXRlbXNbaXRlbU5hbWVdIHx8IHsgdGV4dDogaXRlbU5hbWUsIGlkOiB0aGlzLmdyaWRJRCArICdfJyArIGl0ZW1OYW1lIH07XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmVuYWJsZUl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zLCBpc0VuYWJsZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBpdGVtc18xID0gaXRlbXM7IF9pIDwgaXRlbXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zXzFbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYmFyLmVuYWJsZUl0ZW1zKGVsZW1lbnQucGFyZW50RWxlbWVudCwgaXNFbmFibGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudG9vbGJhckNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGdJRCA9IHRoaXMuZ3JpZElEO1xuICAgICAgICAgICAgaWYgKCFhcmdzLml0ZW0pIHtcbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnRvb2xiYXJDbGljaywgYXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChhcmdzLml0ZW0uaWQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfcHJpbnQnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLnByaW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19lZGl0JzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5zdGFydEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX3VwZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfY2FuY2VsJzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX2FkZCc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmouYWRkUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19kZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLmRlbGV0ZVJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfc2VhcmNoJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3Mub3JpZ2luYWxFdmVudC50YXJnZXQuaWQgPT09IGdJRCArICdfc2VhcmNoYnV0dG9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfY29sdW1uY2hvb3Nlcic6XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJFbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jY2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldEVsZSA9IGFyZ3Mub3JpZ2luYWxFdmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIHkgPSB0YXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHRhckVsZW1lbnQub2Zmc2V0VG9wO1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmNyZWF0ZUNvbHVtbmNob29zZXIoeCwgeSwgdGFyZ2V0RWxlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy50b29sYmFyQ2xpY2ssIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5tb2RlbENoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSAnZWRpdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSB8fCAhdGhpcy5wYXJlbnQudG9vbGJhcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUua2V5VXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VhcmNoKHRoaXMuc2VhcmNoRWxlbWVudC52YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnVwZGF0ZVNlYXJjaEJveCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEVsZW1lbnQudmFsdWUgPSB0aGlzLnBhcmVudC5zZWFyY2hTZXR0aW5ncy5rZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLndpcmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5zZWFyY2hFbGVtZW50LCAna2V5dXAnLCB0aGlzLmtleVVwSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnVuV2lyZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnNlYXJjaEVsZW1lbnQsICdrZXl1cCcsIHRoaXMua2V5VXBIYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMudXBkYXRlU2VhcmNoQm94LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLm1vZGVsQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy50b29sYmFyUmVmcmVzaCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm1vZGVsQ2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YUJvdW5kLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy51cGRhdGVTZWFyY2hCb3gpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5tb2RlbENoYW5nZWQsIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm1vZGVsQ2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAndG9vbGJhcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUb29sYmFyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Ub29sYmFyID0gVG9vbGJhcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Rvb2xiYXIuanNcbi8vIG1vZHVsZSBpZCA9IDc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vcmVuZGVyZXIvZm9vdGVyLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvc3VtbWFyeS1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlbnVtXzEsIGNvbnN0YW50XzEsIGZvb3Rlcl9yZW5kZXJlcl8xLCBzdW1tYXJ5X2NlbGxfcmVuZGVyZXJfMSwgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQWdncmVnYXRlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQWdncmVnYXRlKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdhZ2dyZWdhdGUnO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmluaXRpYXRlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjZWxsRmFjID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBzdW1tYXJ5X2NlbGxfcmVuZGVyZXJfMS5TdW1tYXJ5Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpO1xuICAgICAgICAgICAgW2VudW1fMS5DZWxsVHlwZS5TdW1tYXJ5LCBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnksIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnldLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2VsbEZhYy5hZGRDZWxsUmVuZGVyZXIodHlwZSwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyID0gbmV3IGZvb3Rlcl9yZW5kZXJlcl8xLkZvb3RlclJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpO1xuICAgICAgICAgICAgdGhpcy5mb290ZXJSZW5kZXJlci5yZW5kZXJQYW5lbCgpO1xuICAgICAgICAgICAgdGhpcy5mb290ZXJSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5sb2NhdG9yLnJlZ2lzdGVyKCdmb290ZXJSZW5kZXJlcicsIHRoaXMuZm9vdGVyUmVuZGVyZXIpO1xuICAgICAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnByZXBhcmVTdW1tYXJ5SW5mbygpO1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5kYXRhUmVhZHksIGZuKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmRhdGFSZWFkeSwgZm4sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5kYXRhUmVhZHksIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVmcmVzaCwgdGhpcy5mb290ZXJSZW5kZXJlcik7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUucHJlcGFyZVN1bW1hcnlJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHN1bW1hcnlJdGVyYXRvcih0aGlzLnBhcmVudC5hZ2dyZWdhdGVzLCBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFDb2x1bW4gPSBfdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW4uZmllbGQpIHx8IHt9O1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZGF0YUNvbHVtbi50eXBlO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5mb3JtYXQgPSBfdGhpcy5nZXRGb3JtYXRGcm9tVHlwZShjb2x1bW4uZm9ybWF0LCB0eXBlKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uc2V0Rm9ybWF0dGVyKCk7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNvbHVtbk5hbWUgPSBjb2x1bW4uY29sdW1uTmFtZSB8fCBjb2x1bW4uZmllbGQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5nZXRGb3JtYXRGcm9tVHlwZSA9IGZ1bmN0aW9uIChmb3JtYXQsIHR5cGUpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHR5cGUpIHx8IHR5cGVvZiBmb3JtYXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvYmo7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgICAgICBvYmogPSB7IGZvcm1hdDogZm9ybWF0IH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgICAgICBvYmogPSB7IHR5cGU6IHR5cGUsIHNrZWxldG9uOiBmb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZXRpbWUnOlxuICAgICAgICAgICAgICAgICAgICBvYmogPSB7IHR5cGU6ICdkYXRlVGltZScsIHNrZWxldG9uOiBmb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmZvb3RlclJlbmRlcmVyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhdGVSZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJlcGFyZVN1bW1hcnlJbmZvKCk7XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyLnJlZnJlc2goKTtcbiAgICAgICAgICAgIHZhciBjTW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHZhciBnTW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICBpZiAoZ01vZGVsLmdldERhdGEoKS5sZW5ndGggIT09IDAgfHwgIWNNb2RlbC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoY29uc3RhbnRfMS5tb2RlbENoYW5nZWQsIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5pbml0aWFsRW5kLCB0aGlzLmluaXRpYXRlUmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhdGVSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuZGF0YVJlYWR5LCB0aGlzLmZvb3RlclJlbmRlcmVyLnJlZnJlc2gpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMucGFyZW50LmdldEZvb3RlckNvbnRlbnQoKSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBZ2dyZWdhdGU7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkFnZ3JlZ2F0ZSA9IEFnZ3JlZ2F0ZTtcbiAgICBmdW5jdGlvbiBzdW1tYXJ5SXRlcmF0b3IoYWdncmVnYXRlcywgY2FsbGJhY2spIHtcbiAgICAgICAgYWdncmVnYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgIHJvdy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGNvbHVtbiwgcm93KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZXhwb3J0cy5zdW1tYXJ5SXRlcmF0b3IgPSBzdW1tYXJ5SXRlcmF0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9hZ2dyZWdhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4vY29udGVudC1yZW5kZXJlclwiLCBcIi4vcm93LXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBjb25zdGFudF8xLCBjb250ZW50X3JlbmRlcmVyXzEsIHJvd19yZW5kZXJlcl8xLCBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBGb290ZXJSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGb290ZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRm9vdGVyUmVuZGVyZXIoZ3JpZE1vZHVsZSwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGdyaWRNb2R1bGUsIHNlcnZpY2VMb2NhdG9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuYWdncmVnYXRlcyA9IHt9O1xuICAgICAgICAgICAgX3RoaXMucGFyZW50ID0gZ3JpZE1vZHVsZTtcbiAgICAgICAgICAgIF90aGlzLmxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIF90aGlzLm1vZGVsR2VuZXJhdG9yID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuU3VtbWFyeU1vZGVsR2VuZXJhdG9yKF90aGlzLnBhcmVudCk7XG4gICAgICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclBhbmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyaWRmb290ZXInIH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2Utc3VtbWFyeWNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGlubmVyRGl2LnN0eWxlLm92ZXJmbG93WCA9ICdzY3JvbGwnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlubmVyRGl2KTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGFuZWwoZGl2KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRQYWdlcigpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50Lmluc2VydEJlZm9yZShkaXYsIHRoaXMucGFyZW50LmdldFBhZ2VyKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudERpdiA9IHRoaXMuZ2V0UGFuZWwoKTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IHRoaXMuY3JlYXRlQ29udGVudFRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSBpbm5lckRpdi5xdWVyeVNlbGVjdG9yKCcuZS10YWJsZScpO1xuICAgICAgICAgICAgdmFyIHRGb290ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0Zm9vdCcpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodEZvb3QpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJsZSh0YWJsZSk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJTdW1tYXJ5Q29udGVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLnBhcmVudC5kYXRhU291cmNlIGluc3RhbmNlb2YgQXJyYXkgPyB0aGlzLnBhcmVudC5kYXRhU291cmNlIDogdGhpcy5wYXJlbnQuY3VycmVudFZpZXdEYXRhO1xuICAgICAgICAgICAgdmFyIHN1bW1hcmllcyA9IHRoaXMubW9kZWxHZW5lcmF0b3IuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgdmFyIGR1bW1pZXMgPSB0aGlzLm1vZGVsR2VuZXJhdG9yLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5tb2RlbEdlbmVyYXRvci5nZW5lcmF0ZVJvd3MoaW5wdXQsIGUgfHwgdGhpcy5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIHZhciByb3dyZW5kZXJlciA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLmxvY2F0b3IsIG51bGwsIHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHJvd3JlbmRlcmVyLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1RSJywgeyBjbGFzc05hbWU6ICdlLXN1bW1hcnlyb3cnIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgc3JvdyA9IDAsIGxlbiA9IHN1bW1hcmllcy5sZW5ndGg7IHNyb3cgPCBsZW47IHNyb3crKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSByb3dzW3Nyb3ddO1xuICAgICAgICAgICAgICAgIGlmICghcm93KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdHIgPSByb3dyZW5kZXJlci5yZW5kZXIocm93LCBkdW1taWVzKTtcbiAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkudEZvb3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgICAgICAgdGhpcy5hZ2dyZWdhdGVzID0gZTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLnRGb290LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJTdW1tYXJ5Q29udGVudChlKTtcbiAgICAgICAgICAgIHRoaXMub25TY3JvbGwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hDb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQ29sID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkaGVhZGVyJykucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkucmVwbGFjZUNoaWxkKGhlYWRlckNvbCwgdGhpcy5nZXRDb2xHcm91cCgpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29sR3JvdXAoaGVhZGVyQ29sKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLm9uV2lkdGhDaGFuZ2UgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5nZXRDb2xHcm91cCgpLmNoaWxkcmVuW2FyZ3MuaW5kZXhdLnN0eWxlLndpZHRoID0gZWoyX2Jhc2VfMi5mb3JtYXRVbml0KGFyZ3Mud2lkdGgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93UmVzaXppbmcgJiYgYXJncy5tb2R1bGUgPT09ICdyZXNpemUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGb290ZXJUYWJsZVdpZHRoKHRoaXMuZ2V0VGFibGUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5vblNjcm9sbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZSA9PT0gdm9pZCAwKSB7IGUgPSB7IGxlZnQ6IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLnNjcm9sbExlZnQgfTsgfVxuICAgICAgICAgICAgdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQuc2Nyb2xsTGVmdCA9IGUubGVmdDtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jb2xHcm91cFJlZnJlc2gsIHRoaXMucmVmcmVzaENvbCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmNvbHVtbldpZHRoQ2hhbmdlZCwgdGhpcy5vbldpZHRoQ2hhbmdlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuc2Nyb2xsLCB0aGlzLm9uU2Nyb2xsLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmNvbEdyb3VwUmVmcmVzaCwgdGhpcy5yZWZyZXNoQ29sKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmNvbHVtbldpZHRoQ2hhbmdlZCwgdGhpcy5vbldpZHRoQ2hhbmdlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLnNjcm9sbCwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgdGhpcy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS51cGRhdGVGb290ZXJUYWJsZVdpZHRoID0gZnVuY3Rpb24gKHRGb290KSB7XG4gICAgICAgICAgICB2YXIgdEhlYWQgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpO1xuICAgICAgICAgICAgaWYgKHRIZWFkICYmIHRGb290KSB7XG4gICAgICAgICAgICAgICAgdEZvb3Quc3R5bGUud2lkdGggPSB0SGVhZC5zdHlsZS53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZvb3RlclJlbmRlcmVyO1xuICAgIH0oY29udGVudF9yZW5kZXJlcl8xLkNvbnRlbnRSZW5kZXIpKTtcbiAgICBleHBvcnRzLkZvb3RlclJlbmRlcmVyID0gRm9vdGVyUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZm9vdGVyLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3VtbWFyeUNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTdW1tYXJ5Q2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTdW1tYXJ5Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdURCcsIHsgY2xhc3NOYW1lOiAnZS1zdW1tYXJ5Y2VsbCcsIGF0dHJzOiB7IHJvbGU6ICdncmlkY2VsbCcsIHRhYmluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgU3VtbWFyeUNlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoZmllbGQsIGRhdGEsIGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIGtleTtcbiAgICAgICAgICAgIGtleSA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi50eXBlKSA/IGNvbHVtbi5maWVsZCArICcgLSAnICsgKGNvbHVtbi50eXBlKSA6IGNvbHVtbi5jb2x1bW5OYW1lO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGFbY29sdW1uLmNvbHVtbk5hbWVdID8gZGF0YVtjb2x1bW4uY29sdW1uTmFtZV1ba2V5XSA6ICcnO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChub2RlLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2VsbC5jb2x1bW47XG4gICAgICAgICAgICBpZiAoIShjb2x1bW4uZm9vdGVyVGVtcGxhdGUgfHwgY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgfHwgY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRlbXBPYmogPSBjb2x1bW4uZ2V0VGVtcGxhdGUoY2VsbC5jZWxsVHlwZSk7XG4gICAgICAgICAgICB1dGlsXzEuYXBwZW5kQ2hpbGRyZW4obm9kZSwgdGVtcE9iai5mbihkYXRhW2NvbHVtbi5jb2x1bW5OYW1lXSwgdGhpcy5wYXJlbnQsIHRlbXBPYmoucHJvcGVydHkpKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN1bW1hcnlDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5TdW1tYXJ5Q2VsbFJlbmRlcmVyID0gU3VtbWFyeUNlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9zdW1tYXJ5LWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL2VkaXQtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9ib29sZWFuLWVkaXQtY2VsbFwiLCBcIi4uL3JlbmRlcmVyL2Ryb3Bkb3duLWVkaXQtY2VsbFwiLCBcIi4uL3JlbmRlcmVyL251bWVyaWMtZWRpdC1jZWxsXCIsIFwiLi4vcmVuZGVyZXIvZGVmYXVsdC1lZGl0LWNlbGxcIiwgXCIuL2lubGluZS1lZGl0XCIsIFwiLi9iYXRjaC1lZGl0XCIsIFwiLi9kaWFsb2ctZWRpdFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIsIFwiLi4vcmVuZGVyZXIvZGF0ZXBpY2tlci1lZGl0LWNlbGxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBldmVudHMsIGVkaXRfcmVuZGVyZXJfMSwgYm9vbGVhbl9lZGl0X2NlbGxfMSwgZHJvcGRvd25fZWRpdF9jZWxsXzEsIG51bWVyaWNfZWRpdF9jZWxsXzEsIGRlZmF1bHRfZWRpdF9jZWxsXzEsIGlubGluZV9lZGl0XzEsIGJhdGNoX2VkaXRfMSwgZGlhbG9nX2VkaXRfMSwgZWoyX3BvcHVwc18xLCB1dGlsXzEsIGVqMl9pbnB1dHNfMSwgZGF0ZXBpY2tlcl9lZGl0X2NlbGxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRWRpdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbFR5cGUgPSB7XG4gICAgICAgICAgICAgICAgJ2Ryb3Bkb3duZWRpdCc6IGRyb3Bkb3duX2VkaXRfY2VsbF8xLkRyb3BEb3duRWRpdENlbGwsICdudW1lcmljZWRpdCc6IG51bWVyaWNfZWRpdF9jZWxsXzEuTnVtZXJpY0VkaXRDZWxsLFxuICAgICAgICAgICAgICAgICdkYXRlcGlja2VyZWRpdCc6IGRhdGVwaWNrZXJfZWRpdF9jZWxsXzEuRGF0ZVBpY2tlckVkaXRDZWxsLCAnYm9vbGVhbmVkaXQnOiBib29sZWFuX2VkaXRfY2VsbF8xLkJvb2xlYW5FZGl0Q2VsbCwgJ2RlZmF1bHRlZGl0JzogZGVmYXVsdF9lZGl0X2NlbGxfMS5EZWZhdWx0RWRpdENlbGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVkaXRUeXBlID0geyAnaW5saW5lJzogaW5saW5lX2VkaXRfMS5JbmxpbmVFZGl0LCAnbm9ybWFsJzogaW5saW5lX2VkaXRfMS5JbmxpbmVFZGl0LCAnYmF0Y2gnOiBiYXRjaF9lZGl0XzEuQmF0Y2hFZGl0LCAnZGlhbG9nJzogZGlhbG9nX2VkaXRfMS5EaWFsb2dFZGl0IH07XG4gICAgICAgICAgICB0aGlzLnRhcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVkaXRPYmooKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQWxlcnREbGcoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ29uZmlybURsZygpO1xuICAgICAgICB9XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnVwZGF0ZUNvbFR5cGVPYmogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wYXJlbnQuY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGNvbC5lZGl0ID0gZWoyX2Jhc2VfMi5leHRlbmQobmV3IHRoaXMuZWRpdENlbGxUeXBlW2NvbC5lZGl0VHlwZSAmJiB0aGlzLmVkaXRDZWxsVHlwZVtjb2wuZWRpdFR5cGVdID9cbiAgICAgICAgICAgICAgICAgICAgY29sLmVkaXRUeXBlIDogJ2RlZmF1bHRlZGl0J10odGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IpLCBjb2wuZWRpdCB8fCB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2VkaXQnO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBuZXdQcm9wID0gZS5wcm9wZXJ0aWVzO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGUucHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93QWRkaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dEZWxldGluZyc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93RWRpdGluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dBZGRpbmcgfHwgZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0aW5nIHx8IGdPYmouZWRpdFNldHRpbmdzLmFsbG93RGVsZXRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxFbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdtb2RlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRWRpdE9iaigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmoucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS51cGRhdGVFZGl0T2JqID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdE1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IGVkaXRfcmVuZGVyZXJfMS5FZGl0UmVuZGVyKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZSA9IG5ldyB0aGlzLmVkaXRUeXBlW3RoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlXSh0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvciwgdGhpcy5yZW5kZXJlcik7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmluaXRpYWxFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbFR5cGVPYmooKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICd0b3VjaHN0YXJ0JywgdGhpcy50YXBFdmVudCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICd0b3VjaHN0YXJ0JywgdGhpcy50YXBFdmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnRhcEV2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldFVzZXJBZ2VudCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRhcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcHBlZCA9IHNldFRpbWVvdXQodGhpcy50aW1lb3V0SGFuZGxlcigpLCAzMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGFwcGVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5kb3VibGVUYXAsIGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcHBlZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5nZXRVc2VyQWdlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdXNlckFnZW50ID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHJldHVybiAvaXBob25lfGlwb2R8aXBhZC8udGVzdCh1c2VyQWdlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS50aW1lb3V0SGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudGFwcGVkID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKHRyKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRpbmcgfHwgZ09iai5pc0VkaXQgfHwgZ09iai5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2JhdGNoJykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ09iai5nZXRTZWxlY3RlZFJvd3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygnRWRpdE9wZXJhdGlvbkFsZXJ0JywgdGhpcy5hbGVydERPYmopO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRyKSB7XG4gICAgICAgICAgICAgICAgdHIgPSBnT2JqLmdldFNlbGVjdGVkUm93cygpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5zdGFydEVkaXQodHIpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9vbGJhcigpO1xuICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoJ3N0YXJ0LWVkaXQnLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2JhdGNoJyAmJiB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3Muc2hvd0NvbmZpcm1EaWFsb2dcbiAgICAgICAgICAgICAgICAmJiB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXVwZGF0ZWR0ZCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygnQ2FuY2VsRWRpdCcsIHRoaXMuZGlhbG9nT2JqKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoJ2Nsb3NlLWVkaXQnLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnJlZnJlc2hUb29sYmFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MuYWxsb3dBZGRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuYWRkUmVjb3JkKGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9vbGJhcigpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KCdzdGFydC1hZGQnLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIWdPYmouZWRpdFNldHRpbmdzLmFsbG93RGVsZXRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfNC5pc051bGxPclVuZGVmaW5lZChnT2JqLnNlbGVjdGVkUm93SW5kZXgpIHx8IGdPYmouc2VsZWN0ZWRSb3dJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdEZWxldGVPcGVyYXRpb25BbGVydCcsIHRoaXMuYWxlcnRET2JqKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5lZGl0U2V0dGluZ3Muc2hvd0RlbGV0ZUNvbmZpcm1EaWFsb2cpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdDb25maXJtRGVsZXRlJywgdGhpcy5kaWFsb2dPYmopO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlbGV0ZVJlY29yZChmaWVsZG5hbWUsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kZWxldGVSb3cgPSBmdW5jdGlvbiAodHIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlUmVjb3JkKG51bGwsIHRoaXMucGFyZW50LmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3BhcnNlSW50KHRyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCldKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2JhdGNoJyAmJiB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3Muc2hvd0NvbmZpcm1EaWFsb2cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0JhdGNoU2F2ZUNvbmZpcm0nLCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbmRFZGl0aW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnVwZGF0ZUNlbGwgPSBmdW5jdGlvbiAocm93SW5kZXgsIGZpZWxkLCB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLnVwZGF0ZUNlbGwocm93SW5kZXgsIGZpZWxkLCB2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnVwZGF0ZVJvdyA9IGZ1bmN0aW9uIChpbmRleCwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLnVwZGF0ZVJvdyhpbmRleCwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmJhdGNoQ2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZUVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYmF0Y2hTYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbmRFZGl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmVkaXRDZWxsID0gZnVuY3Rpb24gKGluZGV4LCBmaWVsZCkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmVkaXRDZWxsKGluZGV4LCBmaWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmVkaXRGb3JtVmFsaWRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtT2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybU9iai52YWxpZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5nZXRCYXRjaENoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lZGl0TW9kdWxlLmdldEJhdGNoQ2hhbmdlcyA/IHRoaXMuZWRpdE1vZHVsZS5nZXRCYXRjaENoYW5nZXMoKSA6IHt9O1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5nZXRDdXJyZW50RWRpdENlbGxEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG9iaiA9IHRoaXMuZ2V0Q3VycmVudEVkaXRlZERhdGEodGhpcy5mb3JtT2JqLmVsZW1lbnQsIHt9KTtcbiAgICAgICAgICAgIHJldHVybiBvYmpbT2JqZWN0LmtleXMob2JqKVswXV07XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnNhdmVDZWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLnNhdmVDZWxsKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmVuZEVkaXRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9vbGJhcigpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5zaG93RGlhbG9nID0gZnVuY3Rpb24gKGNvbnRlbnQsIG9iaikge1xuICAgICAgICAgICAgb2JqLmNvbnRlbnQgPSAnPGRpdj4nICsgdGhpcy5sMTBuLmdldENvbnN0YW50KGNvbnRlbnQpICsgJzwvZGl2Pic7XG4gICAgICAgICAgICBvYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIG9iai5zaG93KCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldFZhbHVlRnJvbVR5cGUgPSBmdW5jdGlvbiAoY29sLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IHZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoIChjb2wudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9ICFpc05hTihwYXJzZUZsb2F0KHZhbHVlKSkgPyBwYXJzZUZsb2F0KHZhbHVlKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmVkaXRUeXBlICE9PSAnYm9vbGVhbmVkaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSB2YWx1ZSA9PT0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdUcnVlJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZWRpdFR5cGUgIT09ICdkYXRlcGlja2VyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gbmV3IERhdGUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVzdHJveVRvb2xUaXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdyaWRlcnJvcicpKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZWxlbWVudHNfMSA9IGVsZW1lbnRzOyBfaSA8IGVsZW1lbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBlbGVtZW50c18xW19pXTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZShlbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuY3JlYXRlQ29uZmlybURsZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqID0gdGhpcy5kbGdXaWRnZXQoW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuZGxnT2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdPS0J1dHRvbicpLCBjc3NDbGFzczogJ2UtcHJpbWFyeScsIGlzUHJpbWFyeTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmRsZ0NhbmNlbC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBidXR0b25Nb2RlbDogeyBjc3NDbGFzczogJ2UtZmxhdCcsIGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsQnV0dG9uJykgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sICdFZGl0Q29uZmlybScpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5jcmVhdGVBbGVydERsZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYWxlcnRET2JqID0gdGhpcy5kbGdXaWRnZXQoW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuYWxlcnRDbGljay5iaW5kKHRoaXMpLCBidXR0b25Nb2RlbDogeyBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ09LQnV0dG9uJyksIGNzc0NsYXNzOiAnZS1mbGF0JywgaXNQcmltYXJ5OiB0cnVlIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLCAnRWRpdEFsZXJ0Jyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmFsZXJ0Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFsZXJ0RE9iai5oaWRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRsZ1dpZGdldCA9IGZ1bmN0aW9uIChidG5PcHRpb25zLCBuYW1lKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgbmFtZSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHNob3dDbG9zZUljb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzTW9kYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2xvc2VPbkVzY2FwZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMucGFyZW50LmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICczMjBweCcsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uU2V0dGluZ3M6IHsgZWZmZWN0OiAnTm9uZScgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9wdGlvbnMuYnV0dG9ucyA9IGJ0bk9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgb2JqID0gbmV3IGVqMl9wb3B1cHNfMS5EaWFsb2cob3B0aW9ucyk7XG4gICAgICAgICAgICBvYmouYXBwZW5kVG8oZGl2KTtcbiAgICAgICAgICAgIHV0aWxfMS5jaGFuZ2VCdXR0b25UeXBlKG9iai5lbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRsZ0NhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqLmhpZGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGxnT2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmRpYWxvZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWRsZy1jb250ZW50JykuZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NvbmZpcm1EZWxldGUnKTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlbGV0ZVJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsRWRpdCcpOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5sMTBuLmdldENvbnN0YW50KCdCYXRjaFNhdmVDb25maXJtJyk6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kRWRpdGluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMubDEwbi5nZXRDb25zdGFudCgnQmF0Y2hTYXZlTG9zdENoYW5nZXMnKTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlQWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kbGdDYW5jZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmluaXRpYWxFbmQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5hdXRvQ29sLCB0aGlzLnVwZGF0ZUNvbFR5cGVPYmosIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB0aGlzLmRlc3Ryb3lUb29sVGlwLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHRoaXMucHJldmVudEJhdGNoLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95Rm9ybSwgdGhpcy5kZXN0cm95Rm9ybSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmFjdGlvbkJlZ2luRnVuY3Rpb24gPSB0aGlzLm9uQWN0aW9uQmVnaW4uYmluZCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uQ29tcGxldGVGdW5jdGlvbiA9IHRoaXMuYWN0aW9uQ29tcGxldGUuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCB0aGlzLmFjdGlvbkJlZ2luRnVuY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHRoaXMuYWN0aW9uQ29tcGxldGVGdW5jdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy53aXJlRXZlbnRzLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuYXV0b0NvbCwgdGhpcy51cGRhdGVDb2xUeXBlT2JqKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudG9vbHRpcERlc3Ryb3ksIHRoaXMuZGVzdHJveVRvb2xUaXApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHRoaXMucHJldmVudEJhdGNoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGVzdHJveUZvcm0sIHRoaXMuZGVzdHJveUZvcm0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHRoaXMuYWN0aW9uQ29tcGxldGVGdW5jdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25CZWdpbiwgdGhpcy5hY3Rpb25CZWdpbkZ1bmN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy51bndpcmVFdmVudHMpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5hY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgYWN0aW9ucyA9IFsnYWRkJywgJ2JlZ2luRWRpdCcsICdzYXZlJywgJ2RlbGV0ZScsICdjYW5jZWwnXTtcbiAgICAgICAgICAgIGlmIChhY3Rpb25zLmluZGV4T2YoZS5yZXF1ZXN0VHlwZSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldEN1cnJlbnRFZGl0ZWREYXRhID0gZnVuY3Rpb24gKGZvcm0sIGVkaXRlZERhdGEpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaW5wdXRzID0gW10uc2xpY2UuY2FsbChmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWZpZWxkJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGlucHV0cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBnT2JqLmdldENvbHVtbkJ5VWlkKGlucHV0c1tpXS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKGNvbCAmJiBjb2wuZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjb2wuZWRpdC5yZWFkO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gZWoyX2Jhc2VfMi5nZXRWYWx1ZSh0ZW1wLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wudHlwZSAhPT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBnT2JqLmVkaXRNb2R1bGUuZ2V0VmFsdWVGcm9tVHlwZShjb2wsIGNvbC5lZGl0LnJlYWQoaW5wdXRzW2ldKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGlucHV0c1tpXS5jaGVja2VkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0VmFsdWUoY29sLmZpZWxkLCB2YWx1ZSwgZWRpdGVkRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVkaXRlZERhdGE7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLm9uQWN0aW9uQmVnaW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmIGUucmVxdWVzdFR5cGUgIT09ICdzYXZlJyAmJiB0aGlzLmZvcm1PYmogJiYgIXRoaXMuZm9ybU9iai5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUZvcm0oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lXaWRnZXRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlc3Ryb3lXaWRnZXRzID0gZnVuY3Rpb24gKGNvbHMpIHtcbiAgICAgICAgICAgIGNvbHMgPSBjb2xzID8gY29scyA6IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHNfMSA9IGNvbHM7IF9pIDwgY29sc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2xzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wuZWRpdC5kZXN0cm95KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbC5lZGl0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlc3Ryb3lGb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95VG9vbFRpcCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZm9ybU9iaiAmJiAhdGhpcy5mb3JtT2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGVzdHJveVRvb2xUaXAoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUZvcm0oKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdmFyIGVsZW0gPSB0aGlzLmRpYWxvZ09iai5lbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUoZWxlbSk7XG4gICAgICAgICAgICBlbGVtID0gdGhpcy5hbGVydERPYmouZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMuYWxlcnRET2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKGVsZW0pO1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdpbnNlcnQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZVJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmMic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnLmUtdW5ib3VuZGNlbGxkaXYnKSAmJiB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2JhdGNoJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSAmJiAhZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtcG9wdXAtb3BlbicpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZXNjYXBlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnByZXZlbnRCYXRjaCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZlbnRPYmogPSBhcmdzO1xuICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdCYXRjaFNhdmVMb3N0Q2hhbmdlcycsIHRoaXMuZGlhbG9nT2JqKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZXhlY3V0ZUFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmVudE9iai5oYW5kbGVyLmNhbGwodGhpcy5wcmV2ZW50T2JqLmluc3RhbmNlLCB0aGlzLnByZXZlbnRPYmouYXJnMSwgdGhpcy5wcmV2ZW50T2JqLmFyZzIsIHRoaXMucHJldmVudE9iai5hcmczLCB0aGlzLnByZXZlbnRPYmouYXJnNCwgdGhpcy5wcmV2ZW50T2JqLmFyZzUsIHRoaXMucHJldmVudE9iai5hcmc2LCB0aGlzLnByZXZlbnRPYmouYXJnNyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmFwcGx5Rm9ybVZhbGlkYXRpb24gPSBmdW5jdGlvbiAoY29scykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZm9ybSA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkZm9ybScpO1xuICAgICAgICAgICAgdmFyIHJ1bGVzID0ge307XG4gICAgICAgICAgICBjb2xzID0gY29scyA/IGNvbHMgOiBnT2JqLmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHNfMiA9IGNvbHM7IF9pIDwgY29sc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2xzXzJbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wudmFsaWRhdGlvblJ1bGVzICYmIGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnIycgKyBnT2JqLmVsZW1lbnQuaWQgKyBjb2wuZmllbGQpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBydWxlc1tjb2wuZmllbGRdID0gY29sLnZhbGlkYXRpb25SdWxlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lZGl0TW9kdWxlLmZvcm1PYmogPSBuZXcgZWoyX2lucHV0c18xLkZvcm1WYWxpZGF0b3IoZm9ybSwge1xuICAgICAgICAgICAgICAgIHJ1bGVzOiBydWxlcyxcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uQ29tcGxldGU6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnZhbGlkYXRpb25Db21wbGV0ZShhcmdzKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGN1c3RvbVBsYWNlbWVudDogZnVuY3Rpb24gKGlucHV0RWxlbWVudCwgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudmFsRXJyb3JQbGFjZW1lbnQoaW5wdXRFbGVtZW50LCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnZhbEVycm9yUGxhY2VtZW50ID0gZnVuY3Rpb24gKGlucHV0RWxlbWVudCwgZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBlcnJvci5nZXRBdHRyaWJ1dGUoJ2ZvcicpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRFbGVtID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnID8gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArICdfZGlhbG9nRWRpdF93cmFwcGVyJyk7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBwYXJlbnRFbGVtLnF1ZXJ5U2VsZWN0b3IoJyMnICsgaWQgKyAnX0Vycm9yJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVG9vbHRpcChpbnB1dEVsZW1lbnQsIGVycm9yLCBpZCwgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5xdWVyeVNlbGVjdG9yKCcuZS10aXAtY29udGVudCcpLmlubmVySFRNTCA9IGVycm9yLmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnZhbGlkYXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudEVsZW0gPSB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2RpYWxvZycgPyB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKSA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgJ19kaWFsb2dFZGl0X3dyYXBwZXInKTtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IHBhcmVudEVsZW0ucXVlcnlTZWxlY3RvcignIycgKyBhcmdzLmlucHV0TmFtZSArICdfRXJyb3InKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5zdGF0dXMgPT09ICdmYWlsdXJlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmNyZWF0ZVRvb2x0aXAgPSBmdW5jdGlvbiAoZWxlbWVudCwgZXJyb3IsIG5hbWUsIGRpc3BsYXkpIHtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJyA/IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpIDpcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArICdfZGlhbG9nRWRpdF93cmFwcGVyJykucXVlcnlTZWxlY3RvcignLmUtZGxnLWNvbnRlbnQnKTtcbiAgICAgICAgICAgIHZhciBjbGllbnQgPSB0YWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBpbnB1dENsaWVudCA9IHV0aWxfMS5wYXJlbnRzVW50aWwoZWxlbWVudCwgJ2Utcm93Y2VsbCcpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtdG9vbHRpcC13cmFwIGUtcG9wdXAgZS1ncmlkZXJyb3InLFxuICAgICAgICAgICAgICAgIGlkOiBuYW1lICsgJ19FcnJvcicsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiAnZGlzcGxheTonICsgZGlzcGxheSArICc7dG9wOicgK1xuICAgICAgICAgICAgICAgICAgICAoaW5wdXRDbGllbnQuYm90dG9tIC0gY2xpZW50LnRvcCArIHRhYmxlLnNjcm9sbFRvcCArIDkpICsgJ3B4O2xlZnQ6JyArXG4gICAgICAgICAgICAgICAgICAgIChpbnB1dENsaWVudC5sZWZ0IC0gY2xpZW50LmxlZnQgKyB0YWJsZS5zY3JvbGxMZWZ0ICsgaW5wdXRDbGllbnQud2lkdGggLyAyKSArICdweDsnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtdGlwLWNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlcnJvcik7XG4gICAgICAgICAgICB2YXIgYXJyb3cgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1hcnJvdy10aXAgZS10aXAtdG9wJyB9KTtcbiAgICAgICAgICAgIGFycm93LmFwcGVuZENoaWxkKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWFycm93LXRpcC1vdXRlciBlLXRpcC10b3AnIH0pKTtcbiAgICAgICAgICAgIGFycm93LmFwcGVuZENoaWxkKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWFycm93LXRpcC1pbm5lciBlLXRpcC10b3AnIH0pKTtcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChhcnJvdyk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgZGl2LnN0eWxlLmxlZnQgPSAocGFyc2VJbnQoZGl2LnN0eWxlLmxlZnQsIDEwKSAtIGRpdi5vZmZzZXRXaWR0aCAvIDIpICsgJ3B4JztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEVkaXQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkVkaXQgPSBFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZWRpdC5qc1xuLy8gbW9kdWxlIGlkID0gODNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfaW5wdXRzXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTnVtZXJpY0VkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTnVtZXJpY0VkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgTnVtZXJpY0VkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maWVsZCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgYXJncy5jb2x1bW4uZmllbGQsIG5hbWU6IGFyZ3MuY29sdW1uLmZpZWxkLCAnZS1tYXBwaW5ndWlkJzogYXJncy5jb2x1bW4udWlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNFZGl0Q2VsbC5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5lajJfaW5zdGFuY2VzWzBdLnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpc0lubGluZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJztcbiAgICAgICAgICAgIHRoaXMub2JqID0gbmV3IGVqMl9pbnB1dHNfMS5OdW1lcmljVGV4dEJveChlajJfYmFzZV8xLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHBhcnNlRmxvYXQoYXJncy5yb3dEYXRhW2NvbC5maWVsZF0pLCBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaXNJbmxpbmUgPyAnJyA6IGFyZ3MuY29sdW1uLmhlYWRlclRleHQsXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCksXG4gICAgICAgICAgICAgICAgZmxvYXRMYWJlbFR5cGU6IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJyA/ICdOZXZlcicgOiAnQWx3YXlzJyxcbiAgICAgICAgICAgIH0sIGNvbC5lZGl0LnBhcmFtcykpO1xuICAgICAgICAgICAgdGhpcy5vYmouYXBwZW5kVG8oYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBjb2wuZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljRWRpdENlbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vYmogJiYgIXRoaXMub2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTnVtZXJpY0VkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5OdW1lcmljRWRpdENlbGwgPSBOdW1lcmljRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvbnVtZXJpYy1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDg0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9pbmxpbmUtZWRpdC1yZW5kZXJlclwiLCBcIi4vYmF0Y2gtZWRpdC1yZW5kZXJlclwiLCBcIi4vZGlhbG9nLWVkaXQtcmVuZGVyZXJcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLCBiYXRjaF9lZGl0X3JlbmRlcmVyXzEsIGRpYWxvZ19lZGl0X3JlbmRlcmVyXzEsIGVqMl9iYXNlXzIsIGVudW1fMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFZGl0UmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRWRpdFJlbmRlcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRUeXBlID0ge1xuICAgICAgICAgICAgICAgICdpbmxpbmUnOiBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLklubGluZUVkaXRSZW5kZXIsXG4gICAgICAgICAgICAgICAgJ25vcm1hbCc6IGlubGluZV9lZGl0X3JlbmRlcmVyXzEuSW5saW5lRWRpdFJlbmRlciwgJ2JhdGNoJzogYmF0Y2hfZWRpdF9yZW5kZXJlcl8xLkJhdGNoRWRpdFJlbmRlciwgJ2RpYWxvZyc6IGRpYWxvZ19lZGl0X3JlbmRlcmVyXzEuRGlhbG9nRWRpdFJlbmRlclxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyB0aGlzLmVkaXRUeXBlW3RoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlXShwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXMgPSBzZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdmb2N1cycpO1xuICAgICAgICB9XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLmFkZE5ldyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZE5ldyh0aGlzLmdldEVkaXRFbGVtZW50cyhhcmdzKSwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLmNvbnZlcnRXaWRnZXQoYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZSh0aGlzLmdldEVkaXRFbGVtZW50cyhhcmdzKSwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLmNvbnZlcnRXaWRnZXQoYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLmNvbnZlcnRXaWRnZXQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpc0ZvY3VzZWQ7XG4gICAgICAgICAgICB2YXIgY2VsbDtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRmb3JtJyk7XG4gICAgICAgICAgICB2YXIgY29scyA9IGdPYmouZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgPyBnT2JqLmNvbHVtbnMgOiBbZ09iai5nZXRDb2x1bW5CeUZpZWxkKGFyZ3MuY29sdW1uTmFtZSldO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2xzXzEgPSBjb2xzOyBfaSA8IGNvbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbC52aXNpYmxlIHx8IGNvbC5jb21tYW5kcykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBjb2wudmFsdWVBY2Nlc3Nvcihjb2wuZmllbGQsIGFyZ3Mucm93RGF0YSwgY29sKTtcbiAgICAgICAgICAgICAgICBjZWxsID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdbZS1tYXBwaW5ndWlkPScgKyBjb2wudWlkICsgJ10nKTtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGNvbC5lZGl0LndyaXRlO1xuICAgICAgICAgICAgICAgIGNvbC5lZGl0LndyaXRlKHtcbiAgICAgICAgICAgICAgICAgICAgcm93RGF0YTogYXJncy5yb3dEYXRhLCBlbGVtZW50OiBjZWxsLCBjb2x1bW46IGNvbCwgcmVxdWVzdFR5cGU6IGFyZ3MucmVxdWVzdFR5cGUsIHJvdzogYXJncy5yb3dcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzRm9jdXNlZCAmJiAhY2VsbC5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c0VsZW1lbnQoY2VsbCwgYXJncy50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLmZvY3VzRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtLCB0eXBlKSB7XG4gICAgICAgICAgICB2YXIgY2hrQm94ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1lZGl0LWNoZWNrc2VsZWN0Jyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY2hrQm94KSkge1xuICAgICAgICAgICAgICAgIGNoa0JveC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgnZS1mb2N1cycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cy5vbkNsaWNrKHsgdGFyZ2V0OiBlajJfYmFzZV8xLmNsb3Nlc3QoZWxlbSwgJ3RkJykgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGVmYXVsdGNlbGwnKSkge1xuICAgICAgICAgICAgICAgIGVsZW0uc2V0U2VsZWN0aW9uUmFuZ2UoZWxlbS52YWx1ZS5sZW5ndGgsIGVsZW0udmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdFJlbmRlci5wcm90b3R5cGUuZ2V0RWRpdEVsZW1lbnRzID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSB7fTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gZ09iai5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2JhdGNoJyA/IGdPYmouY29sdW1ucyA6IFtnT2JqLmdldENvbHVtbkJ5RmllbGQoYXJncy5jb2x1bW5OYW1lKV07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2xzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb2wuY29tbWFuZHMgfHwgY29sLmNvbW1hbmRzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGxSZW5kZXJlckZhY3QgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gbmV3IHJvd19tb2RlbF9nZW5lcmF0b3JfMS5Sb3dNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsUmVuZGVyZXIgPSBjZWxsUmVuZGVyZXJGYWN0LmdldENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuQ29tbWFuZENvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxscyA9IG1vZGVsLmdlbmVyYXRlUm93cyhhcmdzLnJvd0RhdGEpWzBdLmNlbGxzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGQgPSBjZWxsUmVuZGVyZXIucmVuZGVyKGNlbGxzW2ldLCBhcmdzLnJvd0RhdGEsIHsgJ2luZGV4JzogYXJncy5yb3cgPyBhcmdzLnJvdy5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSA6IDAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXYgPSB0ZC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgndGV4dEFsaWduJywgdGQuZ2V0QXR0cmlidXRlKCd0ZXh0QWxpZ24nKSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2NvbC51aWRdID0gZGl2O1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY29sLnZhbHVlQWNjZXNzb3IoY29sLmZpZWxkLCBhcmdzLnJvd0RhdGEsIGNvbCk7XG4gICAgICAgICAgICAgICAgdmFyIHRBcmdzID0geyBjb2x1bW46IGNvbCwgdmFsdWU6IHZhbHVlLCB0eXBlOiBhcmdzLnJlcXVlc3RUeXBlLCBkYXRhOiBhcmdzLnJvd0RhdGEgfTtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGNvbC5lZGl0LmNyZWF0ZTtcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaW5wdXQgPSBjb2wuZWRpdC5jcmVhdGUodEFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gZGl2LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpc0lucHV0ID0gaW5wdXQudGFnTmFtZSAhPT0gJ2lucHV0JyAmJiBpbnB1dC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaXNJbnB1dCA/IGlucHV0LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykgOiBpbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBjb2wuZmllbGQsICdlLW1hcHBpbmd1aWQnOiBjb2wudWlkLFxuICAgICAgICAgICAgICAgICAgICBpZDogZ09iai5lbGVtZW50LmlkICsgY29sLmZpZWxkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGlucHV0LCBbJ2UtaW5wdXQnLCAnZS1maWVsZCddLCBbXSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbC50ZXh0QWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnZS1yYWxpZ24nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChjb2wuaXNQcmltYXJ5S2V5IHx8IGNvbC5pc0lkZW50aXR5KSAmJiBhcmdzLnJlcXVlc3RUeXBlID09PSAnYmVnaW5FZGl0Jykge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbY29sLnVpZF0gPSBpbnB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50cztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEVkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkVkaXRSZW5kZXIgPSBFZGl0UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2VkaXQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDg1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSW5saW5lRWRpdFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIElubGluZUVkaXRSZW5kZXIocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBJbmxpbmVFZGl0UmVuZGVyLnByb3RvdHlwZS5hZGROZXcgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICBhcmdzLnJvdyA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2Utcm93IGUtYWRkZWRyb3cnIH0pO1xuICAgICAgICAgICAgdGJvZHkuaW5zZXJ0QmVmb3JlKGFyZ3Mucm93LCB0Ym9keS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIGFyZ3Mucm93LmFwcGVuZENoaWxkKHRoaXMuZ2V0RWRpdEVsZW1lbnQoZWxlbWVudHMsIGZhbHNlKSk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXRSZW5kZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdmFyIHRkRWxlbWVudCA9IFtdLnNsaWNlLmNhbGwoYXJncy5yb3cucXVlcnlTZWxlY3RvckFsbCgndGQuZS1yb3djZWxsJykpO1xuICAgICAgICAgICAgYXJncy5yb3cuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBhcmdzLnJvdy5hcHBlbmRDaGlsZCh0aGlzLmdldEVkaXRFbGVtZW50KGVsZW1lbnRzLCB0cnVlLCB0ZEVsZW1lbnQpKTtcbiAgICAgICAgICAgIGFyZ3Mucm93LmNsYXNzTGlzdC5hZGQoJ2UtZWRpdGVkcm93Jyk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXRSZW5kZXIucHJvdG90eXBlLmdldEVkaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBpc0VkaXQsIHRkRWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBnTGVuID0gMDtcbiAgICAgICAgICAgIHZhciBpc0RldGFpbCA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGdPYmouZGV0YWlsVGVtcGxhdGUpIHx8ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGdPYmouY2hpbGRHcmlkKSA/IDEgOiAwO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGdMZW4gPSBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZWRpdGNlbGwgZS1ub3JtYWxlZGl0JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyBjb2xzcGFuOiAoZ09iai5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aCArIGdMZW4gKyBpc0RldGFpbCkudG9TdHJpbmcoKSB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdmb3JtJywgeyBpZDogZ09iai5lbGVtZW50LmlkICsgJ0VkaXRGb3JtJywgY2xhc3NOYW1lOiAnZS1ncmlkZm9ybScgfSk7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywgeyBjbGFzc05hbWU6ICdlLXRhYmxlIGUtaW5saW5lLWVkaXQnLCBhdHRyczogeyBjZWxsc3BhY2luZzogJzAuMjUnIH0gfSk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChnT2JqLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgIHZhciB0ciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGlmIChpc0RldGFpbCkge1xuICAgICAgICAgICAgICAgIHRyLmluc2VydEJlZm9yZShlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWRldGFpbHJvd2NvbGxhcHNlJyB9KSwgdHIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoaSA8IGdMZW4pIHtcbiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWluZGVudGNlbGwnIH0pKTtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbSA9IDA7XG4gICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgIHdoaWxlICgoaXNFZGl0ICYmIG0gPCB0ZEVsZW1lbnQubGVuZ3RoICYmIGkgPCBnT2JqLmNvbHVtbnMubGVuZ3RoKSB8fCBpIDwgZ09iai5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBzcGFuID0gaXNFZGl0ID8gdGRFbGVtZW50W21dLmdldEF0dHJpYnV0ZSgnY29sc3BhbicpIDogbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gZ09iai5jb2x1bW5zW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGRfMSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXJvd2NlbGwnLCBhdHRyczogeyBzdHlsZTogJ3RleHQtYWxpZ246JyArIChjb2wudGV4dEFsaWduID8gY29sLnRleHRBbGlnbiA6ICcnKSwgJ2NvbHNwYW4nOiBzcGFuID8gc3BhbiA6ICcnIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRkXzEuYXBwZW5kQ2hpbGQoZWxlbWVudHNbY29sLnVpZF0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmVkaXRUeXBlID09PSAnYm9vbGVhbmVkaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZF8xLmNsYXNzTGlzdC5hZGQoJ2UtYm9vbGNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2wuY29tbWFuZHMgfHwgY29sLmNvbW1hbmRzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW3RkXzFdLCAnZS11bmJvdW5kY2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkXzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpID0gc3BhbiA/IGkgKyBwYXJzZUludChzcGFuLCAxMCkgOiBpICsgMTtcbiAgICAgICAgICAgICAgICBtKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgICAgIHRkLmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgICAgICAgcmV0dXJuIHRkO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSW5saW5lRWRpdFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuSW5saW5lRWRpdFJlbmRlciA9IElubGluZUVkaXRSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvaW5saW5lLWVkaXQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDg2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQmF0Y2hFZGl0UmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQmF0Y2hFZGl0UmVuZGVyKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgQmF0Y2hFZGl0UmVuZGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MpIHtcbiAgICAgICAgICAgIGFyZ3MuY2VsbC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGFyZ3MuY2VsbC5hcHBlbmRDaGlsZCh0aGlzLmdldEVkaXRFbGVtZW50KGVsZW1lbnRzLCBhcmdzKSk7XG4gICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LmFkZCgnZS1lZGl0ZWRiYXRjaGNlbGwnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xhc3NMaXN0KGFyZ3Mucm93LCBbJ2UtZWRpdGVkcm93JywgJ2UtYmF0Y2hyb3cnXSwgW10pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXRSZW5kZXIucHJvdG90eXBlLmdldEVkaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nLCB7IGlkOiBnT2JqLmVsZW1lbnQuaWQgKyAnRWRpdEZvcm0nLCBjbGFzc05hbWU6ICdlLWdyaWRmb3JtJyB9KTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZWxlbWVudHNbYXJncy5jb2x1bW5PYmplY3QudWlkXSk7XG4gICAgICAgICAgICBpZiAoYXJncy5jb2x1bW5PYmplY3QuZWRpdFR5cGUgPT09ICdib29sZWFuZWRpdCcpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LmFkZCgnZS1ib29sY2VsbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFhcmdzLmNvbHVtbk9iamVjdC5lZGl0VHlwZSkge1xuICAgICAgICAgICAgICAgIGFyZ3MuY2VsbC5jbGFzc0xpc3QuYWRkKCdlLWlucHV0Ym94Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZm9ybTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEJhdGNoRWRpdFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQmF0Y2hFZGl0UmVuZGVyID0gQmF0Y2hFZGl0UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2JhdGNoLWVkaXQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDg3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfcG9wdXBzXzEsIGVqMl9iYXNlXzEsIGV2ZW50cywgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEaWFsb2dFZGl0UmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRGlhbG9nRWRpdFJlbmRlcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kaWFsb2dEZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUuc2V0TG9jYWxlT2JqID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUuYWRkTmV3ID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVEaWFsb2coZWxlbWVudHMsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0UmVuZGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRGlhbG9nKGVsZW1lbnRzLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUuY3JlYXRlRGlhbG9nID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5kaWFsb2cgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IGdPYmouZWxlbWVudC5pZCArICdfZGlhbG9nRWRpdF93cmFwcGVyJyB9KTtcbiAgICAgICAgICAgIGdPYmouZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmRpYWxvZyk7XG4gICAgICAgICAgICB0aGlzLnNldExvY2FsZU9iaigpO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmogPSBuZXcgZWoyX3BvcHVwc18xLkRpYWxvZyh7XG4gICAgICAgICAgICAgICAgaGVhZGVyOiB0aGlzLmlzRWRpdCA/IHRoaXMubDEwbi5nZXRDb25zdGFudCgnRWRpdEZvcm1UaXRsZScpICsgYXJncy5wcmltYXJ5S2V5VmFsdWVbMF0gOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0FkZEZvcm1UaXRsZScpLCBpc01vZGFsOiB0cnVlLCB2aXNpYmxlOiB0cnVlLCBjc3NDbGFzczogJ2UtZWRpdC1kaWFsb2cnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuZ2V0RWRpdEVsZW1lbnQoZWxlbWVudHMpLCBzaG93Q2xvc2VJY29uOiB0cnVlLCBhbGxvd0RyYWdnaW5nOiB0cnVlLCBjbG9zZTogdGhpcy5kZXN0cm95LmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgY2xvc2VPbkVzY2FwZTogdHJ1ZSwgd2lkdGg6ICczMzBweCcsIHRhcmdldDogZ09iai5lbGVtZW50LCBhbmltYXRpb25TZXR0aW5nczogeyBlZmZlY3Q6ICdOb25lJyB9LFxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5idG5DbGljay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdTYXZlQnV0dG9uJyksIGNzc0NsYXNzOiAnZS1wcmltYXJ5JywgaXNQcmltYXJ5OiB0cnVlIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGljazogdGhpcy5idG5DbGljay5iaW5kKHRoaXMpLCBidXR0b25Nb2RlbDogeyBjc3NDbGFzczogJ2UtZmxhdCcsIGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsQnV0dG9uJykgfSB9XVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5hcHBlbmRUbyh0aGlzLmRpYWxvZyk7XG4gICAgICAgICAgICB1dGlsXzEuY2hhbmdlQnV0dG9uVHlwZSh0aGlzLmRpYWxvZ09iai5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUuYnRuQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsQnV0dG9uJykudG9Mb3dlckNhc2UoKSA9PT0gZS50YXJnZXQuaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVuZEVkaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmRlc3Ryb3lGb3JtLCB7fSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRpYWxvZyAmJiAhdGhpcy5kaWFsb2dPYmouaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGhpcy5kaWFsb2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0UmVuZGVyLnByb3RvdHlwZS5nZXRFZGl0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiB0aGlzLmlzRWRpdCA/ICdlLWVkaXRlZHJvdycgOiAnZS1pbnNlcnRlZHJvdycgfSk7XG4gICAgICAgICAgICB2YXIgZm9ybSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZm9ybScsIHsgaWQ6IGdPYmouZWxlbWVudC5pZCArICdFZGl0Rm9ybScsIGNsYXNzTmFtZTogJ2UtZ3JpZGZvcm0nIH0pO1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHsgY2xhc3NOYW1lOiAnZS10YWJsZScsIGF0dHJzOiB7IGNlbGxzcGFjaW5nOiAnNnB4JyB9IH0pO1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBnT2JqLmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbHNbaV0udmlzaWJsZSB8fCBjb2xzW2ldLmNvbW1hbmRzIHx8IGNvbHNbaV0uY29tbWFuZHNUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhQ2VsbCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7IGNsYXNzTmFtZTogJ2Utcm93Y2VsbCcsIGF0dHJzOiB7IHN0eWxlOiAndGV4dC1hbGlnbjpsZWZ0O3dpZHRoOjE5MHB4JyB9IH0pO1xuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnbGFiZWwnLCB7IGlubmVySFRNTDogY29sc1tpXS5maWVsZCB9KTtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1tjb2xzW2ldLnVpZF0uY2xhc3NMaXN0LnJlbW92ZSgnZS1pbnB1dCcpO1xuICAgICAgICAgICAgICAgIGRhdGFDZWxsLmFwcGVuZENoaWxkKGVsZW1lbnRzW2NvbHNbaV0udWlkXSk7XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQoZGF0YUNlbGwpO1xuICAgICAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgICAgICAgcmV0dXJuIGRpdjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERpYWxvZ0VkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRpYWxvZ0VkaXRSZW5kZXIgPSBEaWFsb2dFZGl0UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RpYWxvZy1lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA4OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYnV0dG9uc18xLCBlajJfYmFzZV8yLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJvb2xlYW5FZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEJvb2xlYW5FZGl0Q2VsbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlQ2xhc3NlcyA9IFsnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJywgJ2UtYWN0aXZlJ107XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBCb29sZWFuRWRpdENlbGwucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgY29sID0gYXJncy5jb2x1bW47XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lcyA9ICdlLWZpZWxkIGUtYm9vbGNlbGwnO1xuICAgICAgICAgICAgaWYgKGNvbC50eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lcyA9ICdlLWZpZWxkIGUtYm9vbGNlbGwgZS1lZGl0LWNoZWNrc2VsZWN0JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywgdmFsdWU6IGFyZ3MudmFsdWUsICdlLW1hcHBpbmd1aWQnOiBjb2wudWlkLFxuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIGNvbC5maWVsZCwgbmFtZTogY29sLmZpZWxkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5FZGl0Q2VsbC5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jaGVja2VkO1xuICAgICAgICB9O1xuICAgICAgICBCb29sZWFuRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RDaGtCb3g7XG4gICAgICAgICAgICB2YXIgY2hrU3RhdGU7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy5yb3cpKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0Q2hrQm94ID0gYXJncy5yb3cucXVlcnlTZWxlY3RvcignLmUtZWRpdC1jaGVja3NlbGVjdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Mucm93RGF0YVthcmdzLmNvbHVtbi5maWVsZF0pIHtcbiAgICAgICAgICAgICAgICBjaGtTdGF0ZSA9IEpTT04ucGFyc2UoYXJncy5yb3dEYXRhW2FyZ3MuY29sdW1uLmZpZWxkXS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHNlbGVjdENoa0JveCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRUeXBlID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGU7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0Um93ID0gYXJncy5yb3c7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MucmVxdWVzdFR5cGUgIT09ICdhZGQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSB0aGlzLnBhcmVudC5nZXRSb3dPYmplY3RGcm9tVUlEKGFyZ3Mucm93LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICAgICAgICAgIGNoa1N0YXRlID0gcm93ID8gcm93LmlzU2VsZWN0ZWQgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXRpbF8xLmFkZFJlbW92ZUFjdGl2ZUNsYXNzZXMuYXBwbHkodm9pZCAwLCBbW10uc2xpY2UuY2FsbChhcmdzLnJvdy5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJykpLCBjaGtTdGF0ZV0uY29uY2F0KHRoaXMuYWN0aXZlQ2xhc3NlcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vYmogPSBuZXcgZWoyX2J1dHRvbnNfMS5DaGVja0JveChlajJfYmFzZV8yLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJyA/ICcnIDogYXJncy5jb2x1bW4uaGVhZGVyVGV4dCxcbiAgICAgICAgICAgICAgICBjaGVja2VkOiBjaGtTdGF0ZSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogIXV0aWxfMS5pc0VkaXRhYmxlKGFyZ3MuY29sdW1uLCBhcmdzLnJlcXVlc3RUeXBlLCBhcmdzLmVsZW1lbnQpLCBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBjaGFuZ2U6IHRoaXMuY2hlY2tCb3hDaGFuZ2UuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSwgYXJncy5jb2x1bW4uZWRpdC5wYXJhbXMpKTtcbiAgICAgICAgICAgIHRoaXMub2JqLmFwcGVuZFRvKGFyZ3MuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5FZGl0Q2VsbC5wcm90b3R5cGUuY2hlY2tCb3hDaGFuZ2UgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFJvdyAmJiB0aGlzLmVkaXRUeXBlICE9PSAnZGlhbG9nJykge1xuICAgICAgICAgICAgICAgIHZhciBhZGQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoIWFyZ3MuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRSb3cucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhZGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRSb3cuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgYWRkLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1dGlsXzEuYWRkUmVtb3ZlQWN0aXZlQ2xhc3Nlcy5hcHBseSh2b2lkIDAsIFtbXS5zbGljZS5jYWxsKHRoaXMuZWRpdFJvdy5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJykpLCBhZGRdLmNvbmNhdCh0aGlzLmFjdGl2ZUNsYXNzZXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQm9vbGVhbkVkaXRDZWxsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub2JqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQm9vbGVhbkVkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Cb29sZWFuRWRpdENlbGwgPSBCb29sZWFuRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvYm9vbGVhbi1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDg5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfZHJvcGRvd25zXzEsIGVqMl9kYXRhXzEsIHV0aWxfMSwgdXRpbF8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEcm9wRG93bkVkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRHJvcERvd25FZGl0Q2VsbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIERyb3BEb3duRWRpdENlbGwucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWZpZWxkJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyBhcmdzLmNvbHVtbi5maWVsZCwgbmFtZTogYXJncy5jb2x1bW4uZmllbGQsIHR5cGU6ICd0ZXh0JywgJ2UtbWFwcGluZ3VpZCc6IGFyZ3MuY29sdW1uLnVpZCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlzSW5saW5lID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnO1xuICAgICAgICAgICAgdGhpcy5vYmogPSBuZXcgZWoyX2Ryb3Bkb3duc18xLkRyb3BEb3duTGlzdChlajJfYmFzZV8xLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZTogdGhpcy5wYXJlbnQuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIgP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhU291cmNlIDogbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIodGhpcy5wYXJlbnQuZGF0YVNvdXJjZSksXG4gICAgICAgICAgICAgICAgcXVlcnk6IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkuc2VsZWN0KGFyZ3MuY29sdW1uLmZpZWxkKSwgZW5hYmxlZDogdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCksXG4gICAgICAgICAgICAgICAgZmllbGRzOiB7IHZhbHVlOiBhcmdzLmNvbHVtbi5maWVsZCB9LCB2YWx1ZTogYXJncy5yb3dEYXRhW2FyZ3MuY29sdW1uLmZpZWxkXSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCwgYWN0aW9uQ29tcGxldGU6IHRoaXMuZGRBY3Rpb25Db21wbGV0ZSxcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaXNJbmxpbmUgPyAnJyA6IGFyZ3MuY29sdW1uLmhlYWRlclRleHQsIHBvcHVwSGVpZ2h0OiAnMjAwcHgnLFxuICAgICAgICAgICAgICAgIGZsb2F0TGFiZWxUeXBlOiBpc0lubGluZSA/ICdOZXZlcicgOiAnQWx3YXlzJywgb3BlbjogdGhpcy5kcm9wRG93bk9wZW4uYmluZCh0aGlzKSxcbiAgICAgICAgICAgIH0sIGFyZ3MuY29sdW1uLmVkaXQucGFyYW1zKSk7XG4gICAgICAgICAgICB0aGlzLm9iai5hcHBlbmRUbyhhcmdzLmVsZW1lbnQpO1xuICAgICAgICAgICAgYXJncy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnbmFtZScsIGFyZ3MuY29sdW1uLmZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5lajJfaW5zdGFuY2VzWzBdLnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS5kZEFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucmVzdWx0ID0gZS5yZXN1bHQuZmlsdGVyKGZ1bmN0aW9uICh2YWwsIGksIHZhbHVlcykgeyByZXR1cm4gdmFsdWVzLmluZGV4T2YodmFsKSA9PT0gaTsgfSk7XG4gICAgICAgICAgICBlLnJlc3VsdC5zb3J0KCk7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BEb3duRWRpdENlbGwucHJvdG90eXBlLmRyb3BEb3duT3BlbiA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZGxnRWxlbWVudCA9IHV0aWxfMi5wYXJlbnRzVW50aWwodGhpcy5vYmouZWxlbWVudCwgJ2UtZGlhbG9nJyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZGxnRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGxnT2JqID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGRsZ0VsZW1lbnQuaWQpLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICAgICAgYXJncy5wb3B1cC5lbGVtZW50LnN0eWxlLnpJbmRleCA9IChkbGdPYmouekluZGV4ICsgMSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9iaikge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERyb3BEb3duRWRpdENlbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRyb3BEb3duRWRpdENlbGwgPSBEcm9wRG93bkVkaXRDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2Ryb3Bkb3duLWVkaXQtY2VsbC5qc1xuLy8gbW9kdWxlIGlkID0gOTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2lucHV0c18xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERlZmF1bHRFZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERlZmF1bHRFZGl0Q2VsbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIERlZmF1bHRFZGl0Q2VsbC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maWVsZCBlLWlucHV0IGUtZGVmYXVsdGNlbGwnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsIHZhbHVlOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLnZhbHVlKSA/IGFyZ3MudmFsdWUgOiAnJywgJ2UtbWFwcGluZ3VpZCc6IGNvbC51aWQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgY29sLmZpZWxkLCBuYW1lOiBjb2wuZmllbGQsIHN0eWxlOiAndGV4dC1hbGlnbjonICsgY29sLnRleHRBbGlnbixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgRGVmYXVsdEVkaXRDZWxsLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBEZWZhdWx0RWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpc0lubGluZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJztcbiAgICAgICAgICAgIGVqMl9pbnB1dHNfMS5JbnB1dC5jcmVhdGVJbnB1dCh7XG4gICAgICAgICAgICAgICAgZWxlbWVudDogYXJncy5lbGVtZW50LCBmbG9hdExhYmVsVHlwZTogdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnID8gJ05ldmVyJyA6ICdBbHdheXMnLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsIGVuYWJsZWQ6IHV0aWxfMS5pc0VkaXRhYmxlKGFyZ3MuY29sdW1uLCBhcmdzLnJlcXVlc3RUeXBlLCBhcmdzLmVsZW1lbnQpLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaXNJbmxpbmUgPyAnJyA6IGFyZ3MuY29sdW1uLmhlYWRlclRleHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERlZmF1bHRFZGl0Q2VsbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGVmYXVsdEVkaXRDZWxsID0gRGVmYXVsdEVkaXRDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RlZmF1bHQtZWRpdC1jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA5MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vbm9ybWFsLWVkaXRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBub3JtYWxfZWRpdF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBJbmxpbmVFZGl0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKElubGluZUVkaXQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIElubGluZUVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBfdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNsb3NlRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hZGRSZWNvcmQuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW5saW5lRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZW5kRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlbGV0ZVJlY29yZC5jYWxsKHRoaXMsIGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5zdGFydEVkaXQuY2FsbCh0aGlzLCB0cik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbmxpbmVFZGl0O1xuICAgIH0obm9ybWFsX2VkaXRfMS5Ob3JtYWxFZGl0KSk7XG4gICAgZXhwb3J0cy5JbmxpbmVFZGl0ID0gSW5saW5lRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2lubGluZS1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA5MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL3Jvdy1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgZXZlbnRzLCByb3dfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTm9ybWFsRWRpdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE5vcm1hbEVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWRjb250ZW50JykgJiYgIXV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS11bmJvdW5kY2VsbGRpdicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dJbmRleCA9IHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1yb3djZWxsJykgPyBwYXJzZUludCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApIDogLTE7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5kYmxDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXJvd2NlbGwnKSAmJiB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0T25EYmxDbGljaykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuc3RhcnRFZGl0KHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXJvdycpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRpdENvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgc3dpdGNoIChlLnJlcXVlc3RUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2F2ZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2tib3hzZWxlY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgIXRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXBlcnNpc3RzZWxlY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0Um93KDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3NhdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0Um93KHRoaXMuZWRpdFJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnZGVsZXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAodHIpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcHJpbWFyeUtleXMgPSBnT2JqLmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCk7XG4gICAgICAgICAgICB2YXIgcHJpbWFyeUtleVZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yb3dJbmRleCA9IHRoaXMuZWRpdFJvd0luZGV4ID0gcGFyc2VJbnQodHIuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKTtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNEYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLnJvd0luZGV4XTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJpbWFyeUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwcmltYXJ5S2V5VmFsdWVzLnB1c2godGhpcy5wcmV2aW91c0RhdGFbcHJpbWFyeUtleXNbaV1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJvdzogdHIsIHByaW1hcnlLZXk6IHByaW1hcnlLZXlzLCBwcmltYXJ5S2V5VmFsdWU6IHByaW1hcnlLZXlWYWx1ZXMsIHJlcXVlc3RUeXBlOiAnYmVnaW5FZGl0JyxcbiAgICAgICAgICAgICAgICByb3dEYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgcm93SW5kZXg6IHRoaXMucm93SW5kZXgsIHR5cGU6ICdlZGl0JywgY2FuY2VsOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVnaW5FZGl0LCBhcmdzKTtcbiAgICAgICAgICAgIGFyZ3MudHlwZSA9ICdhY3Rpb25CZWdpbic7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCBhcmdzKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5tb2RlID09PSAnZGlhbG9nJykge1xuICAgICAgICAgICAgICAgIGFyZ3Mucm93LmNsYXNzTGlzdC5hZGQoJ2UtZGxnZWRpdHJvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGUoYXJncyk7XG4gICAgICAgICAgICB0aGlzLnVpZCA9IHRyLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5hcHBseUZvcm1WYWxpZGF0aW9uKCk7XG4gICAgICAgICAgICBhcmdzLnR5cGUgPSAnYWN0aW9uQ29tcGxldGUnO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5pc0VkaXQgfHwgIWdPYmouZWRpdE1vZHVsZS5mb3JtT2JqLnZhbGlkYXRlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWRpdGVkRGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB0aGlzLnByZXZpb3VzRGF0YSk7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3NhdmUnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIGRhdGE6IGVkaXRlZERhdGEsIGNhbmNlbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNEYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgc2VsZWN0ZWRSb3c6IGdPYmouc2VsZWN0ZWRSb3dJbmRleCwgZm9yZWlnbktleURhdGE6IHt9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZWRpdGVkRGF0YSA9IGdPYmouZWRpdE1vZHVsZS5nZXRDdXJyZW50RWRpdGVkRGF0YShnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGZvcm0nKSwgZWRpdGVkRGF0YSk7XG4gICAgICAgICAgICBpZiAoZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWVkaXRlZHJvdycpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGFyZ3MuYWN0aW9uID0gJ2VkaXQnO1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmouc2hvd1NwaW5uZXIoKTtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMudXBkYXRlRGF0YSwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcmdzLmFjdGlvbiA9ICdhZGQnO1xuICAgICAgICAgICAgICAgIGFyZ3Muc2VsZWN0ZWRSb3cgPSAwO1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmRlc3Ryb3lXaWRnZXRzKCk7XG4gICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZGVzdHJveUZvcm0oKTtcbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5kaWFsb2dEZXN0cm95LCB7fSk7XG4gICAgICAgICAgICB0aGlzLnN0b3BFZGl0U3RhdHVzKCk7XG4gICAgICAgICAgICBpZiAoZ09iai5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2RpYWxvZycgJiYgYXJncy5hY3Rpb24gIT09ICdhZGQnKSB7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWRsZ2VkaXRyb3cnKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWRsZ2VkaXRyb3cnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRpdEhhbmRsZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChhcmdzLnByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBhcmdzLnByb21pc2UudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZWRTdWNjKGUsIGFyZ3MpOyB9KS5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZWRGYWlsKGUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdFN1Y2Nlc3Moe30sIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5lZFN1Y2MgPSBmdW5jdGlvbiAoZSwgYXJncykge1xuICAgICAgICAgICAgdGhpcy5lZGl0U3VjY2VzcyhlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRGYWlsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdEZhaWx1cmUoZSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkaXRTdWNjZXNzID0gZnVuY3Rpb24gKGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChlLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmJlZm9yZURhdGFCb3VuZCwgZSk7XG4gICAgICAgICAgICAgICAgYXJncy5kYXRhID0gZS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5iZWZvcmVEYXRhQm91bmQsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJncy50eXBlID0gZXZlbnRzLmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hSb3coYXJncy5kYXRhKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2hlY2tib3hzZWxlY3Rpb24nKVxuICAgICAgICAgICAgICAgIHx8ICF0aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1wZXJzaXN0c2VsZWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RSb3codGhpcy5yb3dJbmRleCA+IC0xID8gdGhpcy5yb3dJbmRleCA6IHRoaXMuZWRpdFJvd0luZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmhpZGVTcGlubmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkaXRGYWlsdXJlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkZhaWx1cmUsIGUpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5yZWZyZXNoUm93ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgbnVsbCwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdmFyIHJvd09iaiA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQodGhpcy51aWQpO1xuICAgICAgICAgICAgaWYgKHJvd09iaikge1xuICAgICAgICAgICAgICAgIHJvd09iai5jaGFuZ2VzID0gZGF0YTtcbiAgICAgICAgICAgICAgICByb3cucmVmcmVzaChyb3dPYmosIHRoaXMucGFyZW50LmNvbHVtbnMsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2NhbmNlbCcsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgZGF0YTogdGhpcy5wcmV2aW91c0RhdGEsIHNlbGVjdGVkUm93OiBnT2JqLnNlbGVjdGVkUm93SW5kZXhcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCBhcmdzKTtcbiAgICAgICAgICAgIGdPYmouaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnN0b3BFZGl0U3RhdHVzKCk7XG4gICAgICAgICAgICBhcmdzLnR5cGUgPSBldmVudHMuYWN0aW9uQ29tcGxldGU7XG4gICAgICAgICAgICBpZiAoZ09iai5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2RpYWxvZycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hSb3coYXJncy5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouc2VsZWN0Um93KHRoaXMucm93SW5kZXgpO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc2F2ZScsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgZGF0YTogZGF0YSwgc2VsZWN0ZWRSb3c6IDAsIGFjdGlvbjogJ2FkZCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzRGF0YSA9IHt9O1xuICAgICAgICAgICAgdGhpcy51aWQgPSAnJztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBnT2JqLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzRGF0YVtjb2wuZmllbGRdID0gZGF0YSAmJiBkYXRhW2NvbC5maWVsZF0gPyBkYXRhW2NvbC5maWVsZF0gOiBjb2wuZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZSwgZm9yZWlnbktleURhdGE6IHt9LFxuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnYWRkJywgZGF0YTogdGhpcy5wcmV2aW91c0RhdGEsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5pc0VkaXQgPSB0cnVlO1xuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGROZXcoeyByb3dEYXRhOiBhcmdzLmRhdGEsIHJlcXVlc3RUeXBlOiAnYWRkJyB9KTtcbiAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5hcHBseUZvcm1WYWxpZGF0aW9uKCk7XG4gICAgICAgICAgICBhcmdzLnR5cGUgPSBldmVudHMuYWN0aW9uQ29tcGxldGU7XG4gICAgICAgICAgICBhcmdzLnJvdyA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1hZGRlZHJvdycpO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdFJvd0luZGV4ID0gdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleDtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdkZWxldGUnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIGZvcmVpZ25LZXlEYXRhOiB7fSxcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhID8gW2RhdGFdIDogdGhpcy5wYXJlbnQuZ2V0U2VsZWN0ZWRSZWNvcmRzKCksIHRyOiB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJvd3MoKSwgY2FuY2VsOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLnN0b3BFZGl0U3RhdHVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBlbGVtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWFkZGVkcm93Jyk7XG4gICAgICAgICAgICBpZiAoZWxlbSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGVsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxlbSA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1lZGl0ZWRyb3cnKTtcbiAgICAgICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdlLWVkaXRlZHJvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNydWRBY3Rpb24sIHRoaXMuZWRpdEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRvdWJsZVRhcCwgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGJsY2xpY2ssIHRoaXMuZGJsQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZWxldGVDb21wbGV0ZSwgdGhpcy5lZGl0Q29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnNhdmVDb21wbGV0ZSwgdGhpcy5lZGl0Q29tcGxldGUsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jcnVkQWN0aW9uLCB0aGlzLmVkaXRIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZG91YmxlVGFwLCB0aGlzLmRibENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRibGNsaWNrLCB0aGlzLmRibENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRlbGV0ZUNvbXBsZXRlLCB0aGlzLmVkaXRDb21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnNhdmVDb21wbGV0ZSwgdGhpcy5lZGl0Q29tcGxldGUpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBOb3JtYWxFZGl0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Ob3JtYWxFZGl0ID0gTm9ybWFsRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL25vcm1hbC1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA5M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvY2VsbC1yZW5kZXJlclwiLCBcIi4uL21vZGVscy9jZWxsXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVudW1fMSwgdXRpbF8xLCBldmVudHMsIHJvd19yZW5kZXJlcl8xLCBjZWxsX3JlbmRlcmVyXzEsIGNlbGxfMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBCYXRjaEVkaXQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBCYXRjaEVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgdGhpcy5mb2N1cyA9IHNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2ZvY3VzJyk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYmxjbGljaywgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmJlZm9yZUNlbGxGb2N1c2VkLCB0aGlzLm9uQmVmb3JlQ2VsbEZvY3VzZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNlbGxGb2N1c2VkLCB0aGlzLm9uQ2VsbEZvY3VzZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5kYXRhQm91bmRGdW5jdGlvbiA9IHRoaXMuZGF0YUJvdW5kLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMuZGF0YUJvdW5kRnVuY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRvdWJsZVRhcCwgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRibGNsaWNrLCB0aGlzLmRibENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmJlZm9yZUNlbGxGb2N1c2VkLCB0aGlzLm9uQmVmb3JlQ2VsbEZvY3VzZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNlbGxGb2N1c2VkLCB0aGlzLm9uQ2VsbEZvY3VzZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLmRhdGFCb3VuZEZ1bmN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZG91YmxlVGFwLCB0aGlzLmRibENsaWNrSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZGF0YUJvdW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCF1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgJ19hZGQnLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUNlbGwoKTtcbiAgICAgICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Y2VsbCcpICYmICF0aGlzLnBhcmVudC5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDZWxsSWR4KGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZGJsQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3djZWxsJyk7XG4gICAgICAgICAgICB2YXIgdHIgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3cnKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgdHIgJiYgIWlzTmFOKHBhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdENlbGwocGFyc2VJbnQodHIuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKSwgdGhpcy5wYXJlbnQuY29sdW1uc1twYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKV0uZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLm9uQmVmb3JlQ2VsbEZvY3VzZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCAmJiB0aGlzLnZhbGlkYXRlRm9ybU9iaigpICYmXG4gICAgICAgICAgICAgICAgKGUuYnlDbGljayB8fCAoWyd0YWInLCAnc2hpZnRUYWInLCAnZW50ZXInLCAnc2hpZnRFbnRlciddLmluZGV4T2YoZS5rZXlBcmdzLmFjdGlvbikgPiAtMSkpKSB7XG4gICAgICAgICAgICAgICAgZS5jYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChlLmJ5Q2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgZS5jbGlja0FyZ3MucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGUua2V5QXJncy5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5vbkNlbGxGb2N1c2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjbGVhciA9ICFlLmNvbnRhaW5lci5pc0NvbnRlbnQgfHwgIWUuY29udGFpbmVyLmlzRGF0YUNlbGw7XG4gICAgICAgICAgICBpZiAoIWUuYnlLZXkgfHwgY2xlYXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2EgPSBlLmNvbnRhaW5lci5pbmRleGVzLCByb3dJbmRleCA9IF9hWzBdLCBjZWxsSW5kZXggPSBfYVsxXTtcbiAgICAgICAgICAgIHZhciBpc0VkaXQgPSB0aGlzLnBhcmVudC5pc0VkaXQ7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXBvcHVwLW9wZW4nKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpc0VkaXQgPSBpc0VkaXQgJiYgIXRoaXMudmFsaWRhdGVGb3JtT2JqKCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChlLmtleUFyZ3MuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RhYic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0VGFiJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsRnJvbUluZGV4KHJvd0luZGV4LCBjZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRFbnRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBlLmtleUFyZ3MucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsKHJvd0luZGV4LCB0aGlzLmNlbGxEZXRhaWxzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZjInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbEZyb21JbmRleChyb3dJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5pc0FkZFJvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXhdLmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmVkaXRDZWxsRnJvbUluZGV4ID0gZnVuY3Rpb24gKHJvd0lkeCwgY2VsbElkeCkge1xuICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCA9IHJvd0lkeDtcbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID0gY2VsbElkeDtcbiAgICAgICAgICAgIHRoaXMuZWRpdENlbGwocm93SWR4LCB0aGlzLnBhcmVudC5jb2x1bW5zW2NlbGxJZHhdLmZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXRSb3dzT2JqZWN0KCk7XG4gICAgICAgICAgICB2YXIgcm93UmVuZGVyZXIgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgbnVsbCwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdmFyIHRyO1xuICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmlzRGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHIgPSBnT2JqLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVpZD0nICsgcm93c1tpXS51aWQgKyAnXScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ci5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5zZXJ0ZWRyb3cnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVJvd09iamVjdEZyb21VSUQocm93c1tpXS51aWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByb3dzW2ldLmNoYW5nZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5pc0RpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodHIsIFtdLCBbJ2UtaGlkZGVucm93JywgJ2UtdXBkYXRlZHRkJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1JlbmRlcmVyLnJlZnJlc2gocm93c1tpXSwgZ09iai5jb2x1bW5zLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLnNlbGVjdFJvdyh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvd0lkeCgpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgdGhpcy5idWxrRGVsZXRlKGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYWRkUmVjb3JkID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuYnVsa0FkZFJvdyhkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0VkaXQgJiYgdGhpcy52YWxpZGF0ZUZvcm1PYmooKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYmF0Y2hTYXZlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUudmFsaWRhdGVGb3JtT2JqID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZm9ybU9iaiAmJiAhdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5mb3JtT2JqLnZhbGlkYXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYmF0Y2hTYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2F2ZUNlbGwoKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaGFuZ2VzID0gdGhpcy5nZXRCYXRjaENoYW5nZXMoKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0geyBiYXRjaENoYW5nZXM6IGNoYW5nZXMsIGNhbmNlbDogZmFsc2UgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlQmF0Y2hTYXZlLCBhcmdzKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouc2hvd1NwaW5uZXIoKTtcbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5idWxrU2F2ZSwgeyBjaGFuZ2VzOiBjaGFuZ2VzIH0pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmdldEJhdGNoQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjaGFuZ2VzID0ge1xuICAgICAgICAgICAgICAgIGFkZGVkUmVjb3JkczogW10sXG4gICAgICAgICAgICAgICAgZGVsZXRlZFJlY29yZHM6IFtdLFxuICAgICAgICAgICAgICAgIGNoYW5nZWRSZWNvcmRzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuZ2V0Um93c09iamVjdCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCByb3dzXzEgPSByb3dzOyBfaSA8IHJvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gcm93c18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAocm93LmlzRGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyb3cuZWRpdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWRkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLmFkZGVkUmVjb3Jkcy5wdXNoKHJvdy5jaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcy5kZWxldGVkUmVjb3Jkcy5wdXNoKHJvdy5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcy5jaGFuZ2VkUmVjb3Jkcy5wdXNoKHJvdy5jaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjaGFuZ2VzO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnJlbW92ZVJvd09iamVjdEZyb21VSUQgPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldFJvd3NPYmplY3QoKTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93c1tpXS51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dzLnNwbGljZShpLCAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5hZGRSb3dPYmplY3QgPSBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRSb3dzT2JqZWN0KCkudW5zaGlmdChyb3cpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmJ1bGtEZWxldGUgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gZGF0YSA/IHRoaXMuZ2V0SW5kZXhGcm9tRGF0YShkYXRhKSA6IGdPYmouc2VsZWN0ZWRSb3dJbmRleDtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IHRoaXMucGFyZW50LmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCksXG4gICAgICAgICAgICAgICAgcm93SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIHJvd0RhdGE6IGRhdGEgPyBkYXRhIDogZ09iai5nZXRTZWxlY3RlZFJlY29yZHMoKVswXSxcbiAgICAgICAgICAgICAgICByb3c6IGRhdGEgPyBnT2JqLmdldFJvd3MoKVtpbmRleF0gOiBnT2JqLmdldFNlbGVjdGVkUm93cygpWzBdLCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFhcmdzLnJvdykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlQmF0Y2hEZWxldGUsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdmFyIHVpZCA9IGFyZ3Mucm93LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgIGlmIChhcmdzLnJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5zZXJ0ZWRyb3cnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUm93T2JqZWN0RnJvbVVJRCh1aWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGFyZ3Mucm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByb3dPYmogPSBnT2JqLmdldFJvd09iamVjdEZyb21VSUQodWlkKTtcbiAgICAgICAgICAgICAgICByb3dPYmouaXNEaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcm93T2JqLmVkaXQgPSAnZGVsZXRlJztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChhcmdzLnJvdywgWydlLWhpZGRlbnJvdycsICdlLXVwZGF0ZWR0ZCddLCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hSb3dJZHgoKTtcbiAgICAgICAgICAgIGdPYmouc2VsZWN0Um93KGluZGV4KTtcbiAgICAgICAgICAgIGRlbGV0ZSBhcmdzLnJvdztcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmF0Y2hEZWxldGUsIGFyZ3MpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmJhdGNoRGVsZXRlLCB7IHJvd3M6IHRoaXMucGFyZW50LmdldFJvd3NPYmplY3QoKSB9KTtcbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnJlZnJlc2hSb3dJZHggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbik7XG4gICAgICAgICAgICB2YXIgZGF0YVJvd3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1yb3cnKSAmJiAhcm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGlkZGVucm93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnLCBqLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXRJbmRleEZyb21EYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaW5BcnJheShkYXRhLCB0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYnVsa0FkZFJvdyA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUNlbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0YSA9IGRhdGEgPyBkYXRhIDogdGhpcy5nZXREZWZhdWx0RGF0YSgpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdERhdGE6IGRlZmF1bHREYXRhLFxuICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IGdPYmouZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKSxcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVCYXRjaEFkZCwgYXJncyk7XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIG51bGwsIHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHZhciBtb2RlbCA9IG5ldyByb3dfbW9kZWxfZ2VuZXJhdG9yXzEuUm93TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdmFyIG1vZGVsRGF0YSA9IG1vZGVsLmdlbmVyYXRlUm93cyhbYXJncy5kZWZhdWx0RGF0YV0pO1xuICAgICAgICAgICAgdmFyIHRyID0gcm93LnJlbmRlcihtb2RlbERhdGFbMF0sIGdPYmouZ2V0Q29sdW1ucygpKTtcbiAgICAgICAgICAgIHZhciBjb2w7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRyLmluc2VydEJlZm9yZShlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWluZGVudGNlbGwnIH0pLCB0ci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICBtb2RlbERhdGFbMF0uY2VsbHMudW5zaGlmdChuZXcgY2VsbF8xLkNlbGwoeyBjZWxsVHlwZTogZW51bV8xLkNlbGxUeXBlLkluZGVudCB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSBnT2JqLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB0ci5jbGFzc0xpc3QuYWRkKCdlLWluc2VydGVkcm93Jyk7XG4gICAgICAgICAgICB0Ym9keS5pbnNlcnRCZWZvcmUodHIsIHRib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyh0ci5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJyksIFsnZS11cGRhdGVkdGQnXSk7XG4gICAgICAgICAgICBtb2RlbERhdGFbMF0uaXNEaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICBtb2RlbERhdGFbMF0uY2hhbmdlcyA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBtb2RlbERhdGFbMF0uZGF0YSk7XG4gICAgICAgICAgICBtb2RlbERhdGFbMF0uZWRpdCA9ICdhZGQnO1xuICAgICAgICAgICAgdGhpcy5hZGRSb3dPYmplY3QobW9kZWxEYXRhWzBdKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvd0lkeCgpO1xuICAgICAgICAgICAgdGhpcy5mb2N1cy5mb3JnZXRQcmV2aW91cygpO1xuICAgICAgICAgICAgZ09iai5zZWxlY3RSb3coMCk7XG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZmluZE5leHRFZGl0YWJsZUNlbGwoMCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29sID0gZ09iai5jb2x1bW5zW2luZGV4XTtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsKDAsIGNvbC5maWVsZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJnczEgPSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdERhdGE6IGFyZ3MuZGVmYXVsdERhdGEsIHJvdzogdHIsXG4gICAgICAgICAgICAgICAgY29sdW1uT2JqZWN0OiBjb2wsIGNvbHVtbkluZGV4OiBpbmRleCwgcHJpbWFyeUtleTogYXJncy5wcmltYXJ5S2V5LCBjZWxsOiB0ci5jZWxsc1tpbmRleF1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJhdGNoQWRkLCBhcmdzMSk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuYmF0Y2hBZGQsIHsgcm93czogdGhpcy5wYXJlbnQuZ2V0Um93c09iamVjdCgpIH0pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmZpbmROZXh0RWRpdGFibGVDZWxsID0gZnVuY3Rpb24gKGNvbHVtbkluZGV4LCBpc0FkZCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGVuZEluZGV4ID0gY29scy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gY29sdW1uSW5kZXg7IGkgPCBlbmRJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FkZCAmJiB0aGlzLmNoZWNrTlBDZWxsKGNvbHNbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FkZCAmJiAhY29sc1tpXS50ZW1wbGF0ZSAmJiBjb2xzW2ldLnZpc2libGUgJiYgY29sc1tpXS5hbGxvd0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmNoZWNrTlBDZWxsID0gZnVuY3Rpb24gKGNvbCkge1xuICAgICAgICAgICAgcmV0dXJuICFjb2wudGVtcGxhdGUgJiYgY29sLnZpc2libGUgJiYgIWNvbC5pc1ByaW1hcnlLZXkgJiYgIWNvbC5pc0lkZW50aXR5ICYmIGNvbC5hbGxvd0VkaXRpbmc7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0RGVmYXVsdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgIHZhciBkVmFsdWVzID0geyAnbnVtYmVyJzogMCwgJ3N0cmluZyc6IG51bGwsICdib29sZWFuJzogZmFsc2UsICdkYXRlJzogbnVsbCwgJ2RhdGV0aW1lJzogbnVsbCB9O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGRhdGFbY29sLmZpZWxkXSA9IGNvbC5kZWZhdWx0VmFsdWUgPyBjb2wuZGVmYXVsdFZhbHVlIDogZFZhbHVlc1tjb2wudHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5zZXRDZWxsSWR4ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGdMZW4gPSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBnTGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID0gdGFyZ2V0LmNlbGxJbmRleCAtIGdMZW47XG4gICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ID0gcGFyc2VJbnQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5lZGl0Q2VsbCA9IGZ1bmN0aW9uIChpbmRleCwgZmllbGQsIGlzQWRkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbCA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICB2YXIga2V5cyA9IGdPYmouZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRpbmcgJiYgY29sLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCAmJiAhKHRoaXMuY2VsbERldGFpbHMuY29sdW1uLmZpZWxkID09PSBmaWVsZCAmJiB0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ID09PSBpbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gZ09iai5nZXREYXRhUm93cygpW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoKGtleXNbMF0gPT09IGNvbC5maWVsZCAmJiAhcm93LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpKSB8fCBjb2wudGVtcGxhdGUgfHwgY29sLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcm93RGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB0aGlzLmdldERhdGFCeUluZGV4KGluZGV4KSk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW10uc2xpY2UuYXBwbHkocm93LmNlbGxzKTtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbDogY2VsbHNbdGhpcy5nZXRDb2xJbmRleChjZWxscywgdGhpcy5nZXRDZWxsSWR4KGNvbC51aWQpKV0sIHJvdzogcm93LFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiBjb2wuZmllbGQsIGNvbHVtbk9iamVjdDogY29sLCBpc0ZvcmVpZ25LZXk6ICFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbC5mb3JlaWduS2V5VmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICBwcmltYXJ5S2V5OiBrZXlzLCByb3dEYXRhOiByb3dEYXRhLFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uUnVsZXM6IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBjb2wudmFsaWRhdGlvblJ1bGVzID8gY29sLnZhbGlkYXRpb25SdWxlcyA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvd0RhdGFbY29sLmZpZWxkXSwgdHlwZTogIWlzQWRkID8gJ2VkaXQnIDogJ2FkZCcsIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICghYXJncy5jZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5jZWxsRWRpdCwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcm93RGF0YTogcm93RGF0YSwgY29sdW1uOiBjb2wsIHZhbHVlOiBhcmdzLnZhbHVlLCBpc0ZvcmVpZ25LZXk6IGFyZ3MuaXNGb3JlaWduS2V5LCByb3dJbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleDogcGFyc2VJbnQoYXJncy5jZWxsLmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXVwZGF0ZWR0ZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb2xvcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2UtdXBkYXRlZHRkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmouaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFnT2JqLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNoZWNrYm94c2VsZWN0aW9uJykgfHwgIWdPYmouZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcGVyc2lzdHNlbGVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouc2VsZWN0Um93KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZShhcmdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm0gPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBnT2JqLmVsZW1lbnQuaWQgKyAnRWRpdEZvcm0nKTtcbiAgICAgICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuYXBwbHlGb3JtVmFsaWRhdGlvbihbY29sXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnVwZGF0ZUNlbGwgPSBmdW5jdGlvbiAocm93SW5kZXgsIGZpZWxkLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoZmllbGQpO1xuICAgICAgICAgICAgaWYgKGNvbCAmJiAhY29sLmlzUHJpbWFyeUtleSkge1xuICAgICAgICAgICAgICAgIHZhciB0ZCA9IHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbcm93SW5kZXhdLmNlbGxzW3RoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlGaWVsZChmaWVsZCldO1xuICAgICAgICAgICAgICAgIHZhciByb3dPYmogPSB0aGlzLnBhcmVudC5nZXRSb3dPYmplY3RGcm9tVUlEKHRkLnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hURCh0ZCwgY29sLCByb3dPYmosIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5xdWVyeUNlbGxJbmZvLCB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGw6IHRkLCBjb2x1bW46IGNvbCwgZGF0YTogcm93T2JqLmNoYW5nZXNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5zZXRDaGFuZ2VzID0gZnVuY3Rpb24gKHJvd09iaiwgZmllbGQsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIXJvd09iai5jaGFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgcm93T2JqLmNoYW5nZXMgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgcm93T2JqLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm93T2JqLmNoYW5nZXNbZmllbGRdID0gdmFsdWU7XG4gICAgICAgICAgICByb3dPYmouaXNEaXJ0eSA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUudXBkYXRlUm93ID0gZnVuY3Rpb24gKGluZGV4LCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBrZXlzXzEgPSBrZXlzOyBfaSA8IGtleXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0ga2V5c18xW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGwoaW5kZXgsIGNvbCwgZGF0YVtjb2xdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXRDZWxsSWR4ID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgdmFyIGNJZHggPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleEJ5VWlkKHVpZCkgKyB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlKSB8fCAhZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBhcmVudC5jaGlsZEdyaWQpKSB7XG4gICAgICAgICAgICAgICAgY0lkeCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNJZHg7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUucmVmcmVzaFREID0gZnVuY3Rpb24gKHRkLCBjb2x1bW4sIHJvd09iaiwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBjZWxsID0gbmV3IGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IpO1xuICAgICAgICAgICAgdGhpcy5zZXRDaGFuZ2VzKHJvd09iaiwgY29sdW1uLmZpZWxkLCB2YWx1ZSk7XG4gICAgICAgICAgICBjZWxsLnJlZnJlc2hURCh0ZCwgcm93T2JqLmNlbGxzW3RoaXMuZ2V0Q2VsbElkeChjb2x1bW4udWlkKV0sIHJvd09iai5jaGFuZ2VzKTtcbiAgICAgICAgICAgIHRkLmNsYXNzTGlzdC5hZGQoJ2UtdXBkYXRlZHRkJyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0Q29sSW5kZXggPSBmdW5jdGlvbiAoY2VsbHMsIGluZGV4KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IGNlbGxzLmxlbmd0aDsgbSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbEluZGV4ID0gcGFyc2VJbnQoY2VsbHNbbV0uZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sSW5kZXggPT09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5zYXZlQ2VsbCA9IGZ1bmN0aW9uIChpc0ZvcmNlU2F2ZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghaXNGb3JjZVNhdmUgJiYgKCFnT2JqLmlzRWRpdCB8fCB0aGlzLnZhbGlkYXRlRm9ybU9iaigpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ciA9IHV0aWxfMS5wYXJlbnRzVW50aWwodGhpcy5mb3JtLCAnZS1yb3cnKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLmNlbGxEZXRhaWxzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBlZGl0ZWREYXRhID0gZ09iai5lZGl0TW9kdWxlLmdldEN1cnJlbnRFZGl0ZWREYXRhKHRoaXMuZm9ybSwge30pO1xuICAgICAgICAgICAgZWRpdGVkRGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHRoaXMuY2VsbERldGFpbHMucm93RGF0YSwgZWRpdGVkRGF0YSk7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiBjb2x1bW4uZmllbGQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGVkaXRlZERhdGFbY29sdW1uLmZpZWxkXSxcbiAgICAgICAgICAgICAgICByb3dEYXRhOiB0aGlzLmNlbGxEZXRhaWxzLnJvd0RhdGEsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZTogdGhpcy5jZWxsRGV0YWlscy52YWx1ZSxcbiAgICAgICAgICAgICAgICBjb2x1bW5PYmplY3Q6IGNvbHVtbixcbiAgICAgICAgICAgICAgICBjZWxsOiB0aGlzLmZvcm0ucGFyZW50RWxlbWVudCxcbiAgICAgICAgICAgICAgICBpc0ZvcmVpZ25LZXk6IHRoaXMuY2VsbERldGFpbHMuaXNGb3JlaWduS2V5LCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFpc0ZvcmNlU2F2ZSkge1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY2VsbFNhdmUsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmRlc3Ryb3lGb3JtKCk7XG4gICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZGVzdHJveVdpZGdldHMoW2NvbHVtbl0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sdGlwRGVzdHJveSwge30pO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVEQoYXJncy5jZWxsLCBjb2x1bW4sIGdPYmouZ2V0Um93T2JqZWN0RnJvbVVJRCh0ci5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpLCBhcmdzLnZhbHVlKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3MoW3RyXSwgWydlLWVkaXRlZHJvdycsICdlLWJhdGNocm93J10pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyhbYXJncy5jZWxsXSwgWydlLWVkaXRlZGJhdGNoY2VsbCcsICdlLWJvb2xjZWxsJ10pO1xuICAgICAgICAgICAgZ09iai5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChhcmdzLnZhbHVlKSAmJiBhcmdzLnZhbHVlLnRvU3RyaW5nKCkgPT09XG4gICAgICAgICAgICAgICAgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2VsbERldGFpbHMudmFsdWUpID8gdGhpcy5jZWxsRGV0YWlscy52YWx1ZSA6ICcnKS50b1N0cmluZygpICYmICF0aGlzLmlzQ29sb3JlZCkge1xuICAgICAgICAgICAgICAgIGFyZ3MuY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdlLXVwZGF0ZWR0ZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgICAgICB0aGlzLmlzQ29sb3JlZCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmdldERhdGFCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgcm93ID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRCh0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW2luZGV4XS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpO1xuICAgICAgICAgICAgcmV0dXJuIHJvdy5jaGFuZ2VzID8gcm93LmNoYW5nZXMgOiByb3cuZGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEJhdGNoRWRpdDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQmF0Y2hFZGl0ID0gQmF0Y2hFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvYmF0Y2gtZWRpdC5qc1xuLy8gbW9kdWxlIGlkID0gOTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL25vcm1hbC1lZGl0XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgbm9ybWFsX2VkaXRfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGlhbG9nRWRpdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhEaWFsb2dFZGl0LCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBEaWFsb2dFZGl0KHBhcmVudCwgc2VydmljZUxvY2F0b3IsIHJlbmRlcmVyKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgX3RoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIF90aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRGlhbG9nRWRpdC5wcm90b3R5cGUuY2xvc2VFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jbG9zZUVkaXQuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdC5wcm90b3R5cGUuYWRkUmVjb3JkID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuYWRkUmVjb3JkLmNhbGwodGhpcywgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmVuZEVkaXQuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZWxldGVSZWNvcmQuY2FsbCh0aGlzLCBmaWVsZG5hbWUsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAodHIpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuc3RhcnRFZGl0LmNhbGwodGhpcywgdHIpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGlhbG9nRWRpdDtcbiAgICB9KG5vcm1hbF9lZGl0XzEuTm9ybWFsRWRpdCkpO1xuICAgIGV4cG9ydHMuRGlhbG9nRWRpdCA9IERpYWxvZ0VkaXQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9kaWFsb2ctZWRpdC5qc1xuLy8gbW9kdWxlIGlkID0gOTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1jYWxlbmRhcnNcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfY2FsZW5kYXJzXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGF0ZVBpY2tlckVkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRGF0ZVBpY2tlckVkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRGF0ZVBpY2tlckVkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maWVsZCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgYXJncy5jb2x1bW4uZmllbGQsIG5hbWU6IGFyZ3MuY29sdW1uLmZpZWxkLCB0eXBlOiAndGV4dCcsICdlLW1hcHBpbmd1aWQnOiBhcmdzLmNvbHVtbi51aWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZVBpY2tlckVkaXRDZWxsLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmVqMl9pbnN0YW5jZXNbMF0udmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIERhdGVQaWNrZXJFZGl0Q2VsbC5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGlzSW5saW5lID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnO1xuICAgICAgICAgICAgdGhpcy5vYmogPSBuZXcgZWoyX2NhbGVuZGFyc18xLkRhdGVQaWNrZXIoZWoyX2Jhc2VfMS5leHRlbmQoe1xuICAgICAgICAgICAgICAgIGZsb2F0TGFiZWxUeXBlOiBpc0lubGluZSA/ICdOZXZlcicgOiAnQWx3YXlzJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoYXJncy5yb3dEYXRhW2FyZ3MuY29sdW1uLmZpZWxkXSksIHBsYWNlaG9sZGVyOiBpc0lubGluZSA/XG4gICAgICAgICAgICAgICAgICAgICcnIDogYXJncy5jb2x1bW4uaGVhZGVyVGV4dCwgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MudHlwZSwgYXJncy5lbGVtZW50KSxcbiAgICAgICAgICAgIH0sIGFyZ3MuY29sdW1uLmVkaXQucGFyYW1zKSk7XG4gICAgICAgICAgICB0aGlzLm9iai5hcHBlbmRUbyhhcmdzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRlUGlja2VyRWRpdENlbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vYmopIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEYXRlUGlja2VyRWRpdENlbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRhdGVQaWNrZXJFZGl0Q2VsbCA9IERhdGVQaWNrZXJFZGl0Q2VsbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9kYXRlcGlja2VyLWVkaXQtY2VsbC5qc1xuLy8gbW9kdWxlIGlkID0gOTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2FjdGlvbnMvZGF0YVwiLCBcIi4vZXhwb3J0LWhlbHBlclwiLCBcIi4uL3NlcnZpY2VzL3N1bW1hcnktbW9kZWwtZ2VuZXJhdG9yXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBldmVudHMsIGVqMl9leGNlbF9leHBvcnRfMSwgZWoyX2Jhc2VfMSwgZGF0YV8xLCBleHBvcnRfaGVscGVyXzEsIHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEsIGVudW1fMSwgZWoyX2RhdGFfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRXhjZWxFeHBvcnQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBFeGNlbEV4cG9ydChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuYm9vayA9IHt9O1xuICAgICAgICAgICAgdGhpcy53b3JrU2hlZXQgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gW107XG4gICAgICAgICAgICB0aGlzLnN0eWxlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggPSAxO1xuICAgICAgICAgICAgdGhpcy5leHBUeXBlID0gJ2FwcGVuZHRvc2hlZXQnO1xuICAgICAgICAgICAgdGhpcy5pbmNsdWRlSGlkZGVuQ29sdW1uID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzQ3N2RXhwb3J0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzRWxlbWVudElkQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0V4Y2VsRXhwb3J0JztcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZ09iaikge1xuICAgICAgICAgICAgaWYgKGdPYmouZWxlbWVudCAhPT0gbnVsbCAmJiBnT2JqLmVsZW1lbnQuaWQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmlkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNFbGVtZW50SWRDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gZ09iajtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNFeHBvcnRpbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmJvb2sgPSB7fTtcbiAgICAgICAgICAgIHRoaXMud29ya1NoZWV0ID0gW107XG4gICAgICAgICAgICB0aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoID0gMTtcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5leHBUeXBlID0gJ2FwcGVuZHRvc2hlZXQnO1xuICAgICAgICAgICAgdGhpcy5pbmNsdWRlSGlkZGVuQ29sdW1uID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyID0gbmV3IGV4cG9ydF9oZWxwZXJfMS5FeHBvcnRWYWx1ZUZvcm1hdHRlcigpO1xuICAgICAgICAgICAgdGhpcy50aGVtZSA9ICdtYXRlcmlhbCc7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5NYXAgPSBmdW5jdGlvbiAoZ3JpZCwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIGlzQ3N2KSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IGdyaWQ7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgZGF0YV8xLkRhdGEoZ09iaik7XG4gICAgICAgICAgICB0aGlzLmlzRXhwb3J0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChpc0Nzdikge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDc3ZFeHBvcnQgPSBpc0NzdjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDc3ZFeHBvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlRXhjZWxFeHBvcnQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc1JlY29yZHMoZ3JpZCwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2spO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc1JlY29yZHMgPSBmdW5jdGlvbiAoZ09iaiwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YU1hbmFnZXIgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih7IHVybDogZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlLmRhdGFTb3VyY2UudXJsLCBhZGFwdG9yOiBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UuYWRhcHRvciB9KS5leGVjdXRlUXVlcnkobmV3IGVqMl9kYXRhXzEuUXVlcnkoKSk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXQoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzSW5uZXJSZWNvcmRzKGdPYmosIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rLCByKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMuYm9vayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IF90aGlzLmRhdGEuZ2V0RGF0YSh7fSwgX3RoaXMuZGF0YS5nZW5lcmF0ZVF1ZXJ5KHRydWUpLnJlcXVpcmVzQ291bnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXQoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzSW5uZXJSZWNvcmRzKGdPYmosIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rLCByKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMuYm9vayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0lubmVyUmVjb3JkcyA9IGZ1bmN0aW9uIChnT2JqLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaywgcikge1xuICAgICAgICAgICAgdmFyIGJsYW5rUm93cyA9IDU7XG4gICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMubXVsdGlwbGVFeHBvcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwVHlwZSA9IChleHBvcnRQcm9wZXJ0aWVzLm11bHRpcGxlRXhwb3J0LnR5cGUgIT09IHVuZGVmaW5lZCA/IGV4cG9ydFByb3BlcnRpZXMubXVsdGlwbGVFeHBvcnQudHlwZSA6ICdhcHBlbmR0b3NoZWV0Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMubXVsdGlwbGVFeHBvcnQuYmxhbmtSb3dzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxhbmtSb3dzID0gZXhwb3J0UHJvcGVydGllcy5tdWx0aXBsZUV4cG9ydC5ibGFua1Jvd3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdvcmtib29rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtTaGVldCA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmV4cFR5cGUgPT09ICduZXdzaGVldCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtTaGVldCA9IHdvcmtib29rLndvcmtzaGVldHM7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSB3b3JrYm9vay5zdHlsZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtTaGVldCA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IHdvcmtib29rLndvcmtzaGVldHNbMF0ucm93cztcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSB3b3JrYm9vay53b3Jrc2hlZXRzWzBdLmNvbHVtbnM7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSB3b3JrYm9vay5zdHlsZXM7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggPSAodGhpcy5yb3dzW3RoaXMucm93cy5sZW5ndGggLSAxXS5pbmRleCArIGJsYW5rUm93cyk7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNNdWx0aXBsZUV4cG9ydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzLmhlYWRlciAhPT0gdW5kZWZpbmVkICYmIChpc011bHRpcGxlRXhwb3J0IHx8IHRoaXMuZXhwVHlwZSA9PT0gJ25ld3NoZWV0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0V4Y2VsSGVhZGVyKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5oZWFkZXIpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMuZm9vdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4cFR5cGUgPT09ICdhcHBlbmR0b3NoZWV0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvb3RlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5mb290ZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvb3RlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5mb290ZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMuaGVhZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0V4Y2VsSGVhZGVyKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5oZWFkZXIpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMuZm9vdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShleHBvcnRQcm9wZXJ0aWVzLmZvb3RlcikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlSGlkZGVuQ29sdW1uID0gKGV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCA/IGV4cG9ydFByb3BlcnRpZXMuaW5jbHVkZUhpZGRlbkNvbHVtbiA6IGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3cgPSBuZXcgZXhwb3J0X2hlbHBlcl8xLkV4cG9ydEhlbHBlcihnT2JqKS5nZXRIZWFkZXJzKGdPYmouY29sdW1ucywgdGhpcy5pbmNsdWRlSGlkZGVuQ29sdW1uKTtcbiAgICAgICAgICAgIHZhciBncm91cEluZGVudCA9IDA7XG4gICAgICAgICAgICBpZiAoKHIucmVzdWx0KS5sZXZlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBJbmRlbnQgKz0gKHIucmVzdWx0KS5sZXZlbDtcbiAgICAgICAgICAgICAgICBncm91cEluZGVudCArPSAoci5yZXN1bHQpLmNoaWxkTGV2ZWxzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzSGVhZGVyQ29udGVudChnT2JqLCBoZWFkZXJSb3csIGV4cG9ydFByb3BlcnRpZXMsIGdyb3VwSW5kZW50KTtcbiAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlICE9PSB1bmRlZmluZWQgJiYgIShleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZENvbnRlbnQoZ09iaiwgciwgaGVhZGVyUm93LCBpc011bHRpcGxlRXhwb3J0LCBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMuZXhwb3J0VHlwZSA9PT0gJ2N1cnJlbnR2aWV3Jykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZENvbnRlbnQoZ09iaiwgciwgaGVhZGVyUm93LCBpc011bHRpcGxlRXhwb3J0LCBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZENvbnRlbnQoZ09iaiwgciwgaGVhZGVyUm93LCBpc011bHRpcGxlRXhwb3J0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNFeHBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuZXhjZWxFeHBvcnRDb21wbGV0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzUmVjb3JkQ29udGVudCA9IGZ1bmN0aW9uIChnT2JqLCByZXR1cm5UeXBlLCBoZWFkZXJSb3csIGlzTXVsdGlwbGVFeHBvcnQsIGN1cnJlbnRWaWV3UmVjb3Jkcykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouY29sdW1ucztcbiAgICAgICAgICAgIHZhciByZWNvcmQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoY3VycmVudFZpZXdSZWNvcmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZWNvcmQgPSBjdXJyZW50Vmlld1JlY29yZHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNvcmQgPSByZXR1cm5UeXBlLnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZWNvcmQubGV2ZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0dyb3VwZWRSb3dzKGdPYmosIHJlY29yZCwgaGVhZGVyUm93LCByZWNvcmQubGV2ZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkUm93cyhnT2JqLCByZWNvcmQsIGhlYWRlclJvdywgMCk7XG4gICAgICAgICAgICAgICAgaWYgKHJldHVyblR5cGUuYWdncmVnYXRlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Vmlld1JlY29yZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhnT2JqLCByZXR1cm5UeXBlLnJlc3VsdCwgY3VycmVudFZpZXdSZWNvcmRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoZ09iaiwgcmV0dXJuVHlwZS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZm9vdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMuZXhwVHlwZSA9PT0gJ2FwcGVuZHRvc2hlZXQnICYmICFpc011bHRpcGxlRXhwb3J0KSB8fCAodGhpcy5leHBUeXBlID09PSAnbmV3c2hlZXQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NFeGNlbEZvb3Rlcih0aGlzLmZvb3Rlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNoZWV0ID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzaGVldC5jb2x1bW5zID0gdGhpcy5jb2x1bW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXQucm93cyA9IHRoaXMucm93cztcbiAgICAgICAgICAgIHRoaXMud29ya1NoZWV0LnB1c2goc2hlZXQpO1xuICAgICAgICAgICAgdGhpcy5ib29rLndvcmtzaGVldHMgPSB0aGlzLndvcmtTaGVldDtcbiAgICAgICAgICAgIHRoaXMuYm9vay5zdHlsZXMgPSB0aGlzLnN0eWxlcztcbiAgICAgICAgICAgIGlmICghaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ3N2RXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib29rID0gbmV3IGVqMl9leGNlbF9leHBvcnRfMS5Xb3JrYm9vayh0aGlzLmJvb2ssICdjc3YnKTtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zYXZlKCdFeHBvcnQuY3N2Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYm9vayA9IG5ldyBlajJfZXhjZWxfZXhwb3J0XzEuV29ya2Jvb2sodGhpcy5ib29rLCAneGxzeCcpO1xuICAgICAgICAgICAgICAgICAgICBib29rLnNhdmUoJ0V4cG9ydC54bHN4Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRWxlbWVudElkQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuaWQgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzR3JvdXBlZFJvd3MgPSBmdW5jdGlvbiAoZ09iaiwgZGF0YVNvdXJjZSwgaGVhZGVyUm93LCBsZXZlbCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBkYXRhU291cmNlXzEgPSBkYXRhU291cmNlOyBfaSA8IGRhdGFTb3VyY2VfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRhdGFTb3VyY2VfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgIGNlbGwuaW5kZXggPSBpbmRleCArIGxldmVsO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5rZXksXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogZ09iai5nZXRDb2x1bW5CeUZpZWxkKGl0ZW0uZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gaXRlbS5maWVsZCArICc6ICcgKyB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyLmZvcm1hdENlbGxWYWx1ZShhcmdzKSArICcgLSAnO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNvdW50ID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlICs9IGl0ZW0uY291bnQgKyAnIGl0ZW1zJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgKz0gaXRlbS5jb3VudCArICcgaXRlbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgIHZhciBjYXB0aW9uTW9kZWxHZW4gPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgIHZhciBncm91cENhcHRpb25TdW1tYXJ5Um93cyA9IGNhcHRpb25Nb2RlbEdlbi5nZW5lcmF0ZVJvd3MoaXRlbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsQWdncmVnYXRlcyhnT2JqLCBncm91cENhcHRpb25TdW1tYXJ5Um93cywgZGF0YVNvdXJjZS5sZXZlbCArIGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMsIHRoaXMucm93TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBjZWxscy5wdXNoKGNlbGwpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd3NbdGhpcy5yb3dMZW5ndGggLSAxXS5jZWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsSW5kZXggPSBkYXRhU291cmNlLmxldmVsICsgZGF0YVNvdXJjZS5jaGlsZExldmVscyArIGdyb3VwQ2FwdGlvblN1bW1hcnlSb3dzWzBdLmNlbGxzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSB0aGlzLnJvd3NbdGhpcy5yb3dMZW5ndGggLSAxXS5jZWxsczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0Q2VsbCA9IF9iW19hXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Q2VsbC5pbmRleCA8IGxJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxJbmRleCA9IHRDZWxsLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRDZWxsLmluZGV4ID4gaEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaEluZGV4ID0gdENlbGwuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0Q2VsbC5zdHlsZSA9IHRoaXMuZ2V0Q2FwdGlvblRoZW1lU3R5bGUodGhpcy50aGVtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKGxJbmRleCAtIGNlbGwuaW5kZXgpID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2xTcGFuID0gbEluZGV4IC0gY2VsbC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaEluZGV4IDwgKGhlYWRlclJvdy5jb2x1bW5zLmxlbmd0aCArIGluZGV4ICsgbGV2ZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc0NlbGwgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhU291cmNlLmNoaWxkTGV2ZWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc0NlbGwuaW5kZXggPSAoaEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNDZWxsLmluZGV4ID0gKGhJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc0NlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaChzQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoSW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW4gPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYyA9IDAsIF9kID0gaGVhZGVyUm93LmNvbHVtbnM7IF9jIDwgX2QubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2RbX2NdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY29sU3BhbiA9IChkYXRhU291cmNlLmNoaWxkTGV2ZWxzICsgc3Bhbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93c1t0aGlzLnJvd0xlbmd0aCAtIDFdLmNlbGxzID0gY2VsbHM7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5jaGlsZExldmVscyAhPT0gdW5kZWZpbmVkICYmIGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0dyb3VwZWRSb3dzKGdPYmosIGl0ZW0uaXRlbXMsIGhlYWRlclJvdywgaXRlbS5pdGVtcy5sZXZlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmRSb3dzKGdPYmosIGl0ZW0uaXRlbXMsIGhlYWRlclJvdywgKGxldmVsKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoZ09iaiwgaXRlbSwgdW5kZWZpbmVkLCAobGV2ZWwpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzUmVjb3JkUm93cyA9IGZ1bmN0aW9uIChnT2JqLCByZWNvcmQsIGhlYWRlclJvdywgbGV2ZWwpIHtcbiAgICAgICAgICAgIHZhciByTGVuID0gT2JqZWN0LmtleXMocmVjb3JkKS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAxO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IHJMZW47IHIrKykge1xuICAgICAgICAgICAgICAgIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgaW5kZXggPSAxO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBsZW4gPSBoZWFkZXJSb3cuY29sdW1ucy5sZW5ndGg7IGMgPCBsZW47IGMrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSByZWNvcmRbcl1baGVhZGVyUm93LmNvbHVtbnNbY10uZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhjZWxDZWxsQXJncyA9IHsgZGF0YTogcmVjb3JkW3JdLCBjb2x1bW46IGhlYWRlclJvdy5jb2x1bW5zW2NdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmV4Y2VsUXVlcnlDZWxsSW5mbywgZWoyX2Jhc2VfMS5leHRlbmQoZXhjZWxDZWxsQXJncywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogaGVhZGVyUm93LmNvbHVtbnNbY10sIGRhdGE6IHJlY29yZFtyXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsIHN0eWxlOiB1bmRlZmluZWQsIGNvbFNwYW46IDFcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmluZGV4ID0gaW5kZXggKyBsZXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSBleGNlbENlbGxBcmdzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2VsQ2VsbEFyZ3MuY29sU3BhbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNvbFNwYW4gPSBleGNlbENlbGxBcmdzLmNvbFNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhjZWxDZWxsQXJncy5zdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlSW5kZXggPSB0aGlzLmdldENvbHVtblN0eWxlKGdPYmosIGluZGV4ICsgbGV2ZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB0aGlzLm1lcmdlT3B0aW9ucyh0aGlzLnN0eWxlc1tzdHlsZUluZGV4XSwgZXhjZWxDZWxsQXJncy5zdHlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlID0geyBuYW1lOiBnT2JqLmVsZW1lbnQuaWQgKyAnY29sdW1uJyArIChpbmRleCArIGxldmVsKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaChjZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaCh7IGluZGV4OiB0aGlzLnJvd0xlbmd0aCsrLCBjZWxsczogY2VsbHMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzQWdncmVnYXRlcyA9IGZ1bmN0aW9uIChnT2JqLCByZWMsIGN1cnJlbnRWaWV3UmVjb3JkcywgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgc3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoY3VycmVudFZpZXdSZWNvcmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gY3VycmVudFZpZXdSZWNvcmRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHJlYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGluZGVudCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBncm91cFN1bW1hcnlNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgIHZhciBncm91cFN1bW1hcnlSb3dzID0gZ3JvdXBTdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGEsIHsgbGV2ZWw6IGRhdGEubGV2ZWwgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwU3VtbWFyeVJvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGxBZ2dyZWdhdGVzKGdPYmosIGdyb3VwU3VtbWFyeVJvd3MsIGluZGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNSb3dzID0gc3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhLCByZWMuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICBpZiAoc1Jvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsbEFnZ3JlZ2F0ZXMoZ09iaiwgc1Jvd3MsIGluZGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5maWxsQWdncmVnYXRlcyA9IGZ1bmN0aW9uIChnT2JqLCBjZWxscywgaW5kZW50LCBjdXN0b21JbmRleCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjZWxsc18xID0gY2VsbHM7IF9pIDwgY2VsbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gY2VsbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzXzIgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSByb3cuY2VsbHM7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gX2JbX2FdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZUNlbGwgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjZWxsLnZpc2libGUgfHwgdGhpcy5pbmNsdWRlSGlkZGVuQ29sdW1uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLmlzRGF0YUNlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC5pbmRleCA9IGluZGV4ICsgaW5kZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUZuID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuY29sdW1uLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5TdW1tYXJ5KV0gPSBlajJfYmFzZV8xLmNvbXBpbGUoY2VsbC5jb2x1bW4uZm9vdGVyVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHh0ID0gKHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBjZWxsLmNlbGxUeXBlKV0ocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gdHh0WzBdLndob2xlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2VsbC5jb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBTdW1tYXJ5KV0gPSBlajJfYmFzZV8xLmNvbXBpbGUoY2VsbC5jb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eHQgPSAodGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGNlbGwuY2VsbFR5cGUpXShyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSB0eHRbMF0ud2hvbGVUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjZWxsLmNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjZWxsLmNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eHQgPSAodGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGNlbGwuY2VsbFR5cGUpXShyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSB0eHRbMF0ud2hvbGVUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSAwLCBfZCA9IE9iamVjdC5rZXlzKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSk7IF9jIDwgX2QubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2RbX2NdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gY2VsbC5jb2x1bW4udHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uc3VtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uc3VtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uYXZlcmFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmF2ZXJhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5tYXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5tYXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5taW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5taW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5jb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0udHJ1ZWNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0udHJ1ZWNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uZmFsc2Vjb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmZhbHNlY291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5jdXN0b20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5jdXN0b207XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnN0eWxlID0gdGhpcy5nZXRDYXB0aW9uVGhlbWVTdHlsZSh0aGlzLnRoZW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsc18yLnB1c2goZUNlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbUluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwuaW5kZXggPSBpbmRleCArIGluZGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsc18yLnB1c2goZUNlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaCh7IGluZGV4OiBjdXN0b21JbmRleCwgY2VsbHM6IGNlbGxzXzIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaCh7IGluZGV4OiB0aGlzLnJvd0xlbmd0aCsrLCBjZWxsczogY2VsbHNfMiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5tZXJnZU9wdGlvbnMgPSBmdW5jdGlvbiAoSlNPTjEsIEpTT04yKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgICAgICB2YXIgYXR0cm5hbWUgPSBPYmplY3Qua2V5cyhKU09OMSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgYXR0cm5hbWUubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJuYW1lW2luZGV4XSAhPT0gJ25hbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFthdHRybmFtZVtpbmRleF1dID0gSlNPTjFbYXR0cm5hbWVbaW5kZXhdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRybmFtZSA9IE9iamVjdC5rZXlzKEpTT04yKTtcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBhdHRybmFtZS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cm5hbWVbaW5kZXhdICE9PSAnbmFtZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2F0dHJuYW1lW2luZGV4XV0gPSBKU09OMlthdHRybmFtZVtpbmRleF1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRDb2x1bW5TdHlsZSA9IGZ1bmN0aW9uIChnT2JqLCBjb2x1bW5JbmRleCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnN0eWxlczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlLm5hbWUgPT09IGdPYmouZWxlbWVudC5pZCArICdjb2x1bW4nICsgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NIZWFkZXJDb250ZW50ID0gZnVuY3Rpb24gKGdPYmosIGhlYWRlclJvdywgZXhwb3J0UHJvcGVydGllcywgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gMTtcbiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IGhlYWRlclJvdztcbiAgICAgICAgICAgIHZhciBncmlkUm93cyA9IHJldHVyblZhbHVlLnJvd3M7XG4gICAgICAgICAgICB2YXIgZ3JpZENvbHVtbnMgPSByZXR1cm5WYWx1ZS5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIHNwYW5uZWRDZWxscyA9IFtdO1xuICAgICAgICAgICAgaWYgKGluZGVudCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpbmRleCAhPT0gaW5kZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsgaW5kZXg6IGluZGV4ICsgMSwgd2lkdGg6IDMwIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IGdyaWRSb3dzLmxlbmd0aDsgcm93KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudENlbGxJbmRleCA9IDEgKyBpbmRlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY29sdW1uXzEgPSAwOyBjb2x1bW5fMSA8IGdyaWRSb3dzW3Jvd10uY2VsbHMubGVuZ3RoOyBjb2x1bW5fMSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZENlbGwgPSBncmlkUm93c1tyb3ddLmNlbGxzW2NvbHVtbl8xXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHsgY29udGFpbnM6IHRydWUsIGluZGV4OiAxIH07XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZXN1bHQuY29udGFpbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuZ2V0SW5kZXgoc3Bhbm5lZENlbGxzLCByb3dJbmRleCwgY3VycmVudENlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbEluZGV4ID0gcmVzdWx0LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuY29udGFpbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmluZGV4ID0gcmVzdWx0LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChncmlkQ2VsbC5yb3dTcGFuICE9PSB1bmRlZmluZWQgJiYgZ3JpZENlbGwucm93U3BhbiAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5yb3dTcGFuID0gZ3JpZENlbGwucm93U3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSByb3dJbmRleDsgaSA8IGdyaWRDZWxsLnJvd1NwYW4gKyByb3dJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW5uZWRDZWxsID0geyByb3dJbmRleDogMCwgY29sdW1uSW5kZXg6IDAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFubmVkQ2VsbC5yb3dJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbm5lZENlbGwuY29sdW1uSW5kZXggPSBjdXJyZW50Q2VsbEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5uZWRDZWxscy5wdXNoKHNwYW5uZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JpZENlbGwuY29sU3BhbiAhPT0gdW5kZWZpbmVkICYmIGdyaWRDZWxsLmNvbFNwYW4gIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY29sU3BhbiA9IGdyaWRDZWxsLmNvbFNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbEluZGV4ID0gY3VycmVudENlbGxJbmRleCArIGNlbGwuY29sU3BhbiAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9IGdyaWRDZWxsLmNvbHVtbi5oZWFkZXJUZXh0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMudGhlbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aGVtZSA9IGV4cG9ydFByb3BlcnRpZXMudGhlbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZSA9IHRoaXMuZ2V0SGVhZGVyVGhlbWVTdHlsZSh0aGlzLnRoZW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdyaWRDZWxsLmNvbHVtbi50ZXh0QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUuaEFsaWduID0gZ3JpZENlbGwuY29sdW1uLnRleHRBbGlnbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JpZENlbGwuY29sdW1uLmhlYWRlclRleHRBbGlnbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS5oQWxpZ24gPSBncmlkQ2VsbC5jb2x1bW4uaGVhZGVyVGV4dEFsaWduO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSBzdHlsZTtcbiAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaChjZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudENlbGxJbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaCh7IGluZGV4OiB0aGlzLnJvd0xlbmd0aCsrLCBjZWxsczogY2VsbHMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBncmlkQ29sdW1ucy5sZW5ndGg7IGNvbCsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZVN0eWxlcyhnT2JqLCBncmlkQ29sdW1uc1tjb2xdLCB0aGlzLmdldFJlY29yZFRoZW1lU3R5bGUodGhpcy50aGVtZSksIGluZGVudCArIGNvbCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0SGVhZGVyVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICh0aGVtZSkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgICAgICBzd2l0Y2ggKHRoZW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmFicmljJzpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udENvbG9yID0gJyM2NjY2NjYnO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250TmFtZSA9ICdTZWdvZSBVSSc7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTQ7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvcmRlcnMgPSB7IGNvbG9yOiAnI0VBRUFFQScgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vdHN0cmFwJzpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udENvbG9yID0gJyMzMzMzMEYnO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDE0O1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib2xkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjMzMzMzBGJyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDEyO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib3JkZXJzID0geyBjb2xvcjogJyNFMEUwRTAnIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0Q2FwdGlvblRoZW1lU3R5bGUgPSBmdW5jdGlvbiAodGhlbWUpIHtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IHt9O1xuICAgICAgICAgICAgc3dpdGNoICh0aGVtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZhYnJpYyc6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRDb2xvciA9ICcjMzMzMzBGJztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udE5hbWUgPSAnU2Vnb2UgVUknO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDE0O1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5iYWNrQ29sb3IgPSAnI0Y2RjZGNic7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvcmRlcnMgPSB7IGNvbG9yOiAnI0VBRUFFQScgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vdHN0cmFwJzpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udENvbG9yID0gJyMzMzMzMEYnO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDE0O1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib2xkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRUFFQUVBJyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDEzO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5iYWNrQ29sb3IgPSAnI0Y2RjZGNic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0UmVjb3JkVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICh0aGVtZSkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgICAgICBzd2l0Y2ggKHRoZW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmFicmljJzpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udENvbG9yID0gJyMzMzMzMzMnO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250TmFtZSA9ICdTZWdvZSBVSSc7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTM7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvcmRlcnMgPSB7IGNvbG9yOiAnI0VBRUFFQScgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vdHN0cmFwJzpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udENvbG9yID0gJyMzMzMzMEYnO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDE0O1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib3JkZXJzID0geyBjb2xvcjogJyNEREREREQnIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTM7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvcmRlcnMgPSB7IGNvbG9yOiAnI0UwRTBFMCcgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzRXhjZWxIZWFkZXIgPSBmdW5jdGlvbiAoaGVhZGVyKSB7XG4gICAgICAgICAgICBpZiAoaGVhZGVyLnJvd3MgIT09IHVuZGVmaW5lZCAmJiAodGhpcy5leHBUeXBlID09PSAnbmV3c2hlZXQnIHx8IHRoaXMucm93TGVuZ3RoID09PSAxKSkge1xuICAgICAgICAgICAgICAgIHZhciBub1Jvd3MgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlci5oZWFkZXJSb3dzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggPSBoZWFkZXIucm93cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCA9IGhlYWRlci5oZWFkZXJSb3dzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yb3dMZW5ndGggPCBoZWFkZXIucm93cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9Sb3dzID0gdGhpcy5yb3dMZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub1Jvd3MgPSBoZWFkZXIucm93cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgbm9Sb3dzOyByb3crKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IGhlYWRlci5yb3dzW3Jvd107XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGpzb24uaW5kZXggIT09IG51bGwgJiYganNvbi5pbmRleCAhPT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pbmRleCA9IChyb3cgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZWRDZWxsSW5kZXgoanNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUudXBkYXRlZENlbGxJbmRleCA9IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgICAgICB2YXIgY2VsbHNMZW5ndGggPSBqc29uLmNlbGxzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGNlbGxJZCA9IDA7IGNlbGxJZCA8IGNlbGxzTGVuZ3RoOyBjZWxsSWQrKykge1xuICAgICAgICAgICAgICAgIHZhciBqc29uQ2VsbCA9IGpzb24uY2VsbHNbY2VsbElkXTtcbiAgICAgICAgICAgICAgICBpZiAoIShqc29uQ2VsbC5pbmRleCAhPT0gbnVsbCAmJiBqc29uQ2VsbC5pbmRleCAhPT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgICAgICAgICBqc29uQ2VsbC5pbmRleCA9IChjZWxsSWQgKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJvd3MucHVzaChqc29uKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NFeGNlbEZvb3RlciA9IGZ1bmN0aW9uIChmb290ZXIpIHtcbiAgICAgICAgICAgIGlmIChmb290ZXIucm93cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vUm93cyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoZm9vdGVyLmZvb3RlclJvd3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCArPSBmb290ZXIucm93cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9vdGVyLmZvb3RlclJvd3MgPiBmb290ZXIucm93cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoICs9IChmb290ZXIuZm9vdGVyUm93cyAtIGZvb3Rlci5yb3dzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub1Jvd3MgPSBmb290ZXIucm93cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub1Jvd3MgPSBmb290ZXIuZm9vdGVyUm93cztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBub1Jvd3M7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gZm9vdGVyLnJvd3Nbcm93XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24uaW5kZXggPT09IG51bGwgfHwganNvbi5pbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmluZGV4ID0gdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uaW5kZXggKz0gdGhpcy5yb3dMZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVkQ2VsbEluZGV4KGpzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmdldEluZGV4ID0gZnVuY3Rpb24gKHNwYW5uZWRDZWxscywgcm93SW5kZXgsIGNvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHNwYW5uZWRDZWxsc18xID0gc3Bhbm5lZENlbGxzOyBfaSA8IHNwYW5uZWRDZWxsc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBzcGFubmVkQ2VsbCA9IHNwYW5uZWRDZWxsc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoKHNwYW5uZWRDZWxsLnJvd0luZGV4ID09PSByb3dJbmRleCkgJiYgKHNwYW5uZWRDZWxsLmNvbHVtbkluZGV4ID09PSBjb2x1bW5JbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uSW5kZXggPSBjb2x1bW5JbmRleCArIDE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGNvbnRhaW5zOiB0cnVlLCBpbmRleDogY29sdW1uSW5kZXggfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBjb250YWluczogZmFsc2UsIGluZGV4OiBjb2x1bW5JbmRleCB9O1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucGFyc2VTdHlsZXMgPSBmdW5jdGlvbiAoZ09iaiwgY29sLCBzdHlsZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChjb2wuZm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sLmZvcm1hdC5za2VsZXRvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLm51bWJlckZvcm1hdCA9IGNvbC5mb3JtYXQuc2tlbGV0b247XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZm9ybWF0LnR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUudHlwZSA9IGNvbC5mb3JtYXQudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUubnVtYmVyRm9ybWF0ID0gY29sLmZvcm1hdDtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUudHlwZSA9IGNvbC50eXBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2wudGV4dEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5oQWxpZ24gPSBjb2wudGV4dEFsaWduO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHN0eWxlKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUubmFtZSA9IGdPYmouZWxlbWVudC5pZCArICdjb2x1bW4nICsgaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXMucHVzaChzdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sLndpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMucHVzaCh7IGluZGV4OiBpbmRleCwgd2lkdGg6IGNvbC53aWR0aCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFeGNlbEV4cG9ydDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRXhjZWxFeHBvcnQgPSBFeGNlbEV4cG9ydDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2V4Y2VsLWV4cG9ydC5qc1xuLy8gbW9kdWxlIGlkID0gOTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzk4X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItZXhjZWwtZXhwb3J0XCJcbi8vIG1vZHVsZSBpZCA9IDk4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vLi4vbW9kZWxzL3Jvd1wiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLy4uL3NlcnZpY2VzL3ZhbHVlLWZvcm1hdHRlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHJvd18xLCBlbnVtXzEsIGVqMl9iYXNlXzEsIGNlbGxfMSwgdmFsdWVfZm9ybWF0dGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEV4cG9ydEhlbHBlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEV4cG9ydEhlbHBlcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUuZ2V0SGVhZGVycyA9IGZ1bmN0aW9uIChjb2x1bW4sIGlzSGlkZUNvbHVtbkluY2x1ZGUpIHtcbiAgICAgICAgICAgIGlmIChpc0hpZGVDb2x1bW5JbmNsdWRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29scyA9IGNvbHVtbjtcbiAgICAgICAgICAgIHRoaXMuY29sRGVwdGggPSB0aGlzLm1lYXN1cmVDb2x1bW5EZXB0aChjb2xzKTtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB2YXIgYWN0dWFsQ29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbERlcHRoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByb3dzW2ldID0gbmV3IHJvd18xLlJvdyh7fSk7XG4gICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm93cyA9IHRoaXMucHJvY2Vzc0NvbHVtbnMocm93cyk7XG4gICAgICAgICAgICByb3dzID0gdGhpcy5wcm9jZXNzSGVhZGVyQ2VsbHMocm93cyk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd3NfMSA9IHJvd3M7IF9pIDwgcm93c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSByb3dzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm93LmNlbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93LmNlbGxzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC52aXNpYmxlID09PSB1bmRlZmluZWQgJiYgY2VsbC5jZWxsVHlwZSAhPT0gOSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzID0gdGhpcy5yZW1vdmVDZWxsRnJvbVJvdyhyb3cuY2VsbHMsIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGkgLSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgoIWlzSGlkZUNvbHVtbkluY2x1ZGUpICYmIGNlbGwudmlzaWJsZSAhPT0gdW5kZWZpbmVkICYmICghY2VsbC52aXNpYmxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzID0gdGhpcy5yZW1vdmVDZWxsRnJvbVJvdyhyb3cuY2VsbHMsIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGkgLSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUFjdHVhbENvbHVtbnMoY29sc1tpXSwgYWN0dWFsQ29sdW1ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyByb3dzOiByb3dzLCBjb2x1bW5zOiBhY3R1YWxDb2x1bW5zIH07XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUuZ2VuZXJhdGVBY3R1YWxDb2x1bW5zID0gZnVuY3Rpb24gKGNvbHVtbiwgYWN0dWFsQ29sdW1ucykge1xuICAgICAgICAgICAgaWYgKCFjb2x1bW4uY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSB8fCB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbENvbHVtbnMucHVzaChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSB8fCB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xTcGFuID0gdGhpcy5nZXRDZWxsQ291bnQoY29sdW1uLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbFNwYW4gIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sdW1uLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQWN0dWFsQ29sdW1ucyhjb2x1bW4uY29sdW1uc1tpXSwgYWN0dWFsQ29sdW1ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUucmVtb3ZlQ2VsbEZyb21Sb3cgPSBmdW5jdGlvbiAoY2VsbHMsIGNlbGxJbmRleCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdENlbGxzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNlbGxJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Q2VsbHMucHVzaChjZWxsc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gKGNlbGxJbmRleCArIDEpOyBpIDwgY2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHRDZWxscy5wdXNoKGNlbGxzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRDZWxscztcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5wcm9jZXNzSGVhZGVyQ2VsbHMgPSBmdW5jdGlvbiAocm93cykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/IHRoaXMucGFyZW50LmdldENvbHVtbnMoKSA6IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByb3dzID0gdGhpcy5hcHBlbmRHcmlkQ2VsbHMoY29sdW1uc1tpXSwgcm93cywgMCwgaSA9PT0gMCwgZmFsc2UsIGkgPT09IChjb2x1bW5zLmxlbmd0aCAtIDEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLmFwcGVuZEdyaWRDZWxscyA9IGZ1bmN0aW9uIChjb2xzLCBncmlkUm93cywgaW5kZXgsIGlzRmlyc3RPYmosIGlzRmlyc3RDb2x1bW4sIGlzTGFzdENvbHVtbikge1xuICAgICAgICAgICAgdmFyIGxhc3RDb2wgPSBpc0xhc3RDb2x1bW4gPyAnZS1sYXN0Y2VsbCcgOiAnJztcbiAgICAgICAgICAgIGlmICghY29scy5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgZ3JpZFJvd3NbaW5kZXhdLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoY29scywgZW51bV8xLkNlbGxUeXBlLkhlYWRlciwgdGhpcy5jb2xEZXB0aCAtIGluZGV4LCAoaXNGaXJzdE9iaiA/ICcnIDogKGlzRmlyc3RDb2x1bW4gPyAnZS1maXJzdGNlbGwnIDogJycpKSArIGxhc3RDb2wsIGluZGV4LCB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleEJ5VWlkKGNvbHMudWlkKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbFNwYW4gPSB0aGlzLmdldENlbGxDb3VudChjb2xzLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sU3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBncmlkUm93c1tpbmRleF0uY2VsbHMucHVzaChuZXcgY2VsbF8xLkNlbGwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbFR5cGU6IGVudW1fMS5DZWxsVHlwZS5TdGFja2VkSGVhZGVyLCBjb2x1bW46IGNvbHMsIGNvbFNwYW46IGNvbFNwYW5cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaXNGaXJzdENlbGwgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGlzSWdub3JlRmlyc3RDZWxsID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaXNGaXJzdENlbGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHMuY29sdW1uc1tpXS52aXNpYmxlICYmICFpc0lnbm9yZUZpcnN0Q2VsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNGaXJzdENlbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNJZ25vcmVGaXJzdENlbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGdyaWRSb3dzID0gdGhpcy5hcHBlbmRHcmlkQ2VsbHMoY29scy5jb2x1bW5zW2ldLCBncmlkUm93cywgaW5kZXggKyAxLCBpc0ZpcnN0T2JqLCBpID09PSAwLCBpID09PSAobGVuIC0gMSkgJiYgaXNMYXN0Q29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ3JpZFJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUuZ2VuZXJhdGVDZWxsID0gZnVuY3Rpb24gKGdyaWRDb2x1bW4sIGNlbGxUeXBlLCByb3dTcGFuLCBjbGFzc05hbWUsIHJvd0luZGV4LCBjb2x1bW5JbmRleCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGdyaWRDb2x1bW4udmlzaWJsZSxcbiAgICAgICAgICAgICAgICAnaXNEYXRhQ2VsbCc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICdpc1RlbXBsYXRlJzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZ3JpZENvbHVtbi5oZWFkZXJUZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgJ3Jvd0lEJzogJycsXG4gICAgICAgICAgICAgICAgJ2NvbHVtbic6IGdyaWRDb2x1bW4sXG4gICAgICAgICAgICAgICAgJ2NlbGxUeXBlJzogY2VsbFR5cGUsXG4gICAgICAgICAgICAgICAgJ3Jvd1NwYW4nOiByb3dTcGFuLFxuICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOiBjbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgJ2luZGV4Jzogcm93SW5kZXgsXG4gICAgICAgICAgICAgICAgJ2NvbEluZGV4JzogY29sdW1uSW5kZXhcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIW9wdGlvbi5yb3dTcGFuIHx8IG9wdGlvbi5yb3dTcGFuIDwgMikge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb24ucm93U3BhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgY2VsbF8xLkNlbGwob3B0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5wcm9jZXNzQ29sdW1ucyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgZ3JpZE9iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbkluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChncmlkT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxlbl8xID0gZ3JpZE9iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBqIDwgbGVuXzE7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGNvbHVtbkluZGV4ZXMuaW5kZXhPZihqKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgZW51bV8xLkNlbGxUeXBlLkhlYWRlckluZGVudCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChncmlkT2JqLmRldGFpbFRlbXBsYXRlIHx8IGdyaWRPYmouY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgZW51bV8xLkNlbGxUeXBlLkRldGFpbEhlYWRlcikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLmdldENlbGxDb3VudCA9IGZ1bmN0aW9uIChjb2x1bW4sIGNvdW50KSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHVtbi5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ID0gdGhpcy5nZXRDZWxsQ291bnQoY29sdW1uLmNvbHVtbnNbaV0sIGNvdW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUgfHwgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb3VudDtcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5tZWFzdXJlQ29sdW1uRGVwdGggPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgbWF4ID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sdW1uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlcHRoID0gdGhpcy5jaGVja0RlcHRoKGNvbHVtbltpXSwgMCk7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA8IGRlcHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGRlcHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXggKyAxO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLmNoZWNrRGVwdGggPSBmdW5jdGlvbiAoY29sLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGNvbC5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbC5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5jaGVja0RlcHRoKGNvbC5jb2x1bW5zW2ldLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIHJldHVybiBFeHBvcnRIZWxwZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkV4cG9ydEhlbHBlciA9IEV4cG9ydEhlbHBlcjtcbiAgICB2YXIgRXhwb3J0VmFsdWVGb3JtYXR0ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBFeHBvcnRWYWx1ZUZvcm1hdHRlcigpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVGb3JtYXR0ZXIgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYXRpb25hbGl6YXRpb24gPSBuZXcgZWoyX2Jhc2VfMS5JbnRlcm5hdGlvbmFsaXphdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIEV4cG9ydFZhbHVlRm9ybWF0dGVyLnByb3RvdHlwZS5mb3JtYXRDZWxsVmFsdWUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uLnR5cGUgPT09ICdudW1iZXInICYmIGFyZ3MuY29sdW1uLmZvcm1hdCAhPT0gdW5kZWZpbmVkICYmIGFyZ3MuY29sdW1uLmZvcm1hdCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hdGlvbmFsaXphdGlvbi5nZXROdW1iZXJGb3JtYXQoeyBmb3JtYXQ6IGFyZ3MuY29sdW1uLmZvcm1hdCB9KShhcmdzLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFyZ3MuY29sdW1uLnR5cGUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcmdzLnZhbHVlID8gJ3RydWUnIDogJ2ZhbHNlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChhcmdzLmNvbHVtbi50eXBlID09PSAnZGF0ZScgfHwgYXJncy5jb2x1bW4udHlwZSA9PT0gJ2RhdGV0aW1lJyB8fCBhcmdzLmNvbHVtbi50eXBlID09PSAndGltZScpICYmIGFyZ3MuY29sdW1uLmZvcm1hdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzLmNvbHVtbi5mb3JtYXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3JtYXQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IHsgdHlwZTogJ2RhdGUnLCBza2VsZXRvbjogYXJncy5jb2x1bW4uZm9ybWF0IH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ3RpbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSB7IHR5cGU6ICd0aW1lJywgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdCB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0geyB0eXBlOiAnZGF0ZVRpbWUnLCBza2VsZXRvbjogYXJncy5jb2x1bW4uZm9ybWF0IH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVGb3JtYXR0ZXIuZ2V0Rm9ybWF0RnVuY3Rpb24oZm9ybWF0KShhcmdzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLmNvbHVtbi5mb3JtYXQgaW5zdGFuY2VvZiBPYmplY3QgJiYgYXJncy5jb2x1bW4uZm9ybWF0LnR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhcmdzLnZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1c3RvbUZvcm1hdCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21Gb3JtYXQgPSB7IHR5cGU6IGFyZ3MuY29sdW1uLmZvcm1hdC50eXBlLCBmb3JtYXQ6IGFyZ3MuY29sdW1uLmZvcm1hdC5mb3JtYXQsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQuc2tlbGV0b24gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZ3MuY29sdW1uLnR5cGUgPT09ICd0aW1lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUZvcm1hdCA9IHsgdHlwZTogJ3RpbWUnLCBmb3JtYXQ6IGFyZ3MuY29sdW1uLmZvcm1hdC5mb3JtYXQsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQuc2tlbGV0b24gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUZvcm1hdCA9IHsgdHlwZTogJ2RhdGVUaW1lJywgZm9ybWF0OiBhcmdzLmNvbHVtbi5mb3JtYXQuZm9ybWF0LCBza2VsZXRvbjogYXJncy5jb2x1bW4uZm9ybWF0LnNrZWxldG9uIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUZvcm1hdHRlci5nZXRGb3JtYXRGdW5jdGlvbihjdXN0b21Gb3JtYXQpKGFyZ3MudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uLnR5cGUgPT09IHVuZGVmaW5lZCB8fCBhcmdzLmNvbHVtbi50eXBlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoYXJncy52YWx1ZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFeHBvcnRWYWx1ZUZvcm1hdHRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRXhwb3J0VmFsdWVGb3JtYXR0ZXIgPSBFeHBvcnRWYWx1ZUZvcm1hdHRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2V4cG9ydC1oZWxwZXIuanNcbi8vIG1vZHVsZSBpZCA9IDk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIiwgXCIuL2V4cG9ydC1oZWxwZXJcIiwgXCIuLi9hY3Rpb25zL2RhdGFcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBldmVudHMsIGVqMl9wZGZfZXhwb3J0XzEsIGVqMl9wZGZfZXhwb3J0XzIsIGVqMl9wZGZfZXhwb3J0XzMsIGVqMl9wZGZfZXhwb3J0XzQsIGVqMl9wZGZfZXhwb3J0XzUsIGVqMl9wZGZfZXhwb3J0XzYsIGV4cG9ydF9oZWxwZXJfMSwgZGF0YV8xLCBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLCBlajJfYmFzZV8xLCBlbnVtXzEsIGVqMl9kYXRhXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBkZkV4cG9ydCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFBkZkV4cG9ydChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZ3JpZFRoZW1lID0gJ21hdGVyaWFsJztcbiAgICAgICAgICAgIHRoaXMuaXNHcm91cGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgZGF0YV8xLkRhdGEocGFyZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1BkZkV4cG9ydCc7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwb3J0VmFsdWVGb3JtYXR0ZXIgPSBuZXcgZXhwb3J0X2hlbHBlcl8xLkV4cG9ydFZhbHVlRm9ybWF0dGVyKCk7XG4gICAgICAgICAgICB0aGlzLnBkZkRvY3VtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdmFyIGdPYmogPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmdyaWRUaGVtZSA9ICdtYXRlcmlhbCc7XG4gICAgICAgICAgICB0aGlzLmlzR3JvdXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNFeHBvcnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVQZGZFeHBvcnQpO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLk1hcCA9IGZ1bmN0aW9uIChwYXJlbnQsIHBkZkV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHBkZkRvYykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBkYXRhXzEuRGF0YSh0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoeyB1cmw6IHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZS5kYXRhU291cmNlLnVybCwgYWRhcHRvcjogcGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlLmFkYXB0b3IgfSkuZXhlY3V0ZVF1ZXJ5KG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkpLnRoZW4oZnVuY3Rpb24gKHJldHVyblR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXQocGFyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZGZEb2MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBkZkRvY3VtZW50ID0gcGRmRG9jO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGRmRG9jdW1lbnQgPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZEb2N1bWVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvY2Vzc0V4cG9ydChwYXJlbnQsIHJldHVyblR5cGUsIHBkZkV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNFeHBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC50cmlnZ2VyKGV2ZW50cy5wZGZFeHBvcnRDb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF90aGlzLnBkZkRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFNYW5hZ2VyID0gX3RoaXMuZGF0YS5nZXREYXRhKHt9LCBfdGhpcy5kYXRhLmdlbmVyYXRlUXVlcnkodHJ1ZSkucmVxdWlyZXNDb3VudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAocmV0dXJuVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdChwYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBkZkRvYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGRmRG9jdW1lbnQgPSBwZGZEb2M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZGZEb2N1bWVudCA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZkRvY3VtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzRXhwb3J0KHBhcmVudCwgcmV0dXJuVHlwZSwgcGRmRXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc0V4cG9ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnRyaWdnZXIoZXZlbnRzLnBkZkV4cG9ydENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMucGRmRG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzRXhwb3J0ID0gZnVuY3Rpb24gKGdPYmosIHJldHVyblR5cGUsIHBkZkV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGRhdGFTb3VyY2UgPSByZXR1cm5UeXBlLnJlc3VsdDtcbiAgICAgICAgICAgIHZhciBzZWN0aW9uID0gdGhpcy5wZGZEb2N1bWVudC5zZWN0aW9ucy5hZGQoKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnByb2Nlc3NFeHBvcnRQcm9wZXJ0aWVzKHBkZkV4cG9ydFByb3BlcnRpZXMsIGRhdGFTb3VyY2UsIHNlY3Rpb24pO1xuICAgICAgICAgICAgZGF0YVNvdXJjZSA9IHJlc3VsdC5kYXRhU291cmNlO1xuICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2UuR3JvdXBHdWlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzR3JvdXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VjdGlvbiA9IHJlc3VsdC5zZWN0aW9uO1xuICAgICAgICAgICAgdmFyIHBkZlBhZ2UgPSBzZWN0aW9uLnBhZ2VzLmFkZCgpO1xuICAgICAgICAgICAgdmFyIHBkZkdyaWQgPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZHcmlkKCk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyVGhlbWVTdHlsZSA9IHRoaXMuZ2V0SGVhZGVyVGhlbWVTdHlsZSgpO1xuICAgICAgICAgICAgdmFyIGJvcmRlciA9IGhlYWRlclRoZW1lU3R5bGUuYm9yZGVyO1xuICAgICAgICAgICAgdmFyIGhlYWRlckZvbnQgPSBoZWFkZXJUaGVtZVN0eWxlLmZvbnQ7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQnJ1c2ggPSBoZWFkZXJUaGVtZVN0eWxlLmJydXNoO1xuICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlID0gKG5ldyBleHBvcnRfaGVscGVyXzEuRXhwb3J0SGVscGVyKHRoaXMucGFyZW50KSkuZ2V0SGVhZGVycyhjb2x1bW5zLCB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlKTtcbiAgICAgICAgICAgIHZhciByb3dzID0gcmV0dXJuVmFsdWUucm93cztcbiAgICAgICAgICAgIHZhciBncmlkQ29sdW1ucyA9IHJldHVyblZhbHVlLmNvbHVtbnM7XG4gICAgICAgICAgICBwZGZHcmlkID0gdGhpcy5wcm9jZXNzR3JpZEhlYWRlcnMoZGF0YVNvdXJjZS5jaGlsZExldmVscywgcGRmR3JpZCwgcm93cywgZ3JpZENvbHVtbnMsIGJvcmRlciwgaGVhZGVyRm9udCwgaGVhZGVyQnJ1c2gpO1xuICAgICAgICAgICAgdGhpcy5zZXRDb2x1bW5Qcm9wZXJ0aWVzKGdyaWRDb2x1bW5zLCBwZGZHcmlkKTtcbiAgICAgICAgICAgIHZhciBjYXB0aW9uVGhlbWVTdHlsZSA9IHRoaXMuZ2V0U3VtbWFyeUNhcHRpb25UaGVtZVN0eWxlKCk7XG4gICAgICAgICAgICBpZiAoZGF0YVNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIGRhdGFTb3VyY2UgIT09IG51bGwgJiYgZGF0YVNvdXJjZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNHcm91cGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NHcm91cGVkUmVjb3JkcyhwZGZHcmlkLCBkYXRhU291cmNlLCBncmlkQ29sdW1ucywgZ09iaiwgYm9yZGVyLCAwLCBjYXB0aW9uVGhlbWVTdHlsZS5mb250LCBjYXB0aW9uVGhlbWVTdHlsZS5icnVzaCwgY2FwdGlvblRoZW1lU3R5bGUuYmFja2dyb3VuZEJydXNoLCByZXR1cm5UeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZChib3JkZXIsIGdyaWRDb2x1bW5zLCBnT2JqLCBkYXRhU291cmNlLCBwZGZHcmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJldHVyblR5cGUuYWdncmVnYXRlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdW1tYXJ5TW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzUm93cyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tRGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBzdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2UsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jdXJyZW50Vmlld0RhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNSb3dzID0gc3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyh0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKSwgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzR3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNSb3dzID0gc3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhU291cmNlLnJlY29yZHMsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzUm93cyA9IHN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MocmV0dXJuVHlwZS5yZXN1bHQsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBjYXB0aW9uVGhlbWVTdHlsZS5mb250LCBjYXB0aW9uVGhlbWVTdHlsZS5icnVzaCwgY2FwdGlvblRoZW1lU3R5bGUuYmFja2dyb3VuZEJydXNoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHBkZkdyaWQucm93cy5hZGRSb3coKTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0Qm9yZGVyKGJvcmRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZGZHcmlkLmRyYXcocGRmUGFnZSwgMjAsIDIwKTtcbiAgICAgICAgICAgIGlmICghaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGRmRG9jdW1lbnQuc2F2ZSgnRXhwb3J0LnBkZicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFN1bW1hcnlDYXB0aW9uVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5ncmlkVGhlbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdib290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBmb250OiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl9leHBvcnRfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgMTAuNSksIGJydXNoOiBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDUxLCA1MSwgNTEpKSwgYmFja2dyb3VuZEJydXNoOiBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDI1NSwgMjU1LCAyNTUpKSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZhYnJpYyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGZvbnQ6IG5ldyBlajJfcGRmX2V4cG9ydF8yLlBkZlN0YW5kYXJkRm9udChlajJfcGRmX2V4cG9ydF8yLlBkZkZvbnRGYW1pbHkuSGVsdmV0aWNhLCAxMC41KSwgYnJ1c2g6IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoNTEsIDUxLCA1MSkpLCBiYWNrZ3JvdW5kQnJ1c2g6IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMjQ2LCAyNDYsIDI0NikpIH07XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZm9udDogbmV3IGVqMl9wZGZfZXhwb3J0XzIuUGRmU3RhbmRhcmRGb250KGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udEZhbWlseS5IZWx2ZXRpY2EsIDkuNzUpLCBicnVzaDogbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigwLCAwLCAwKSksIGJhY2tncm91bmRCcnVzaDogbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigyNDYsIDI0NiwgMjQ2KSkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRIZWFkZXJUaGVtZVN0eWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGJvcmRlciA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZkJvcmRlcnMoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5ncmlkVGhlbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdib290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICBib3JkZXIuYWxsID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmUGVuKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDIyMSwgMjIxLCAyMjEpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYm9yZGVyOiBib3JkZXIsIGZvbnQ6IG5ldyBlajJfcGRmX2V4cG9ydF8yLlBkZlN0YW5kYXJkRm9udChlajJfcGRmX2V4cG9ydF8yLlBkZkZvbnRGYW1pbHkuSGVsdmV0aWNhLCAxMC41KSwgYnJ1c2g6IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoNTEsIDUxLCA1MSkpIH07XG4gICAgICAgICAgICAgICAgY2FzZSAnZmFicmljJzpcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLmFsbCA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigyMjQsIDIyNCwgMjI0KSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGJvcmRlcjogYm9yZGVyLCBmb250OiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl9leHBvcnRfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgOSksIGJydXNoOiBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDAsIDAsIDAuNTQpKSB9O1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci5hbGwgPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZQZW4obmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMjM0LCAyMzQsIDIzNCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBib3JkZXI6IGJvcmRlciwgZm9udDogbmV3IGVqMl9wZGZfZXhwb3J0XzIuUGRmU3RhbmRhcmRGb250KGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udEZhbWlseS5IZWx2ZXRpY2EsIDEwLjUpLCBicnVzaDogbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigxMDIsIDEwMiwgMTAyKSkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzR3JvdXBlZFJlY29yZHMgPSBmdW5jdGlvbiAocGRmR3JpZCwgZGF0YVNvdXJjZSwgZ3JpZENvbHVtbnMsIGdPYmosIGJvcmRlciwgbGV2ZWwsIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIHJldHVyblR5cGUpIHtcbiAgICAgICAgICAgIHZhciBncm91cEluZGV4ID0gbGV2ZWw7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRhdGFTb3VyY2VfMSA9IGRhdGFTb3VyY2U7IF9pIDwgZGF0YVNvdXJjZV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhU291cmNlSXRlbXMgPSBkYXRhU291cmNlXzFbX2ldO1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBwZGZHcmlkLnJvd3MuYWRkUm93KCk7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhU291cmNlSXRlbXMua2V5LFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChkYXRhU291cmNlSXRlbXMuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBkYXRhU291cmNlSXRlbXMuZmllbGQgKyAnOiAnICsgdGhpcy5leHBvcnRWYWx1ZUZvcm1hdHRlci5mb3JtYXRDZWxsVmFsdWUoYXJncykgKyAnIC0gJyArIGRhdGFTb3VyY2VJdGVtcy5jb3VudCArIChkYXRhU291cmNlLmNvdW50ID4gMSA/ICcgaXRlbXMnIDogJyBpdGVtJyk7XG4gICAgICAgICAgICAgICAgcm93LmNlbGxzLmdldENlbGwoZ3JvdXBJbmRleCkudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByb3cuY2VsbHMuZ2V0Q2VsbChncm91cEluZGV4ICsgMSkuc3R5bGUuc3RyaW5nRm9ybWF0ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU3RyaW5nRm9ybWF0KGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5MZWZ0KTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0Qm9yZGVyKGJvcmRlcik7XG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldEZvbnQoZm9udCk7XG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldFRleHRCcnVzaChicnVzaCk7XG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldEJhY2tncm91bmRCcnVzaChiYWNrZ3JvdW5kQnJ1c2gpO1xuICAgICAgICAgICAgICAgIHZhciBzUm93cyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgY2FwdGlvblN1bW1hcnlNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkNhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2VJdGVtcy5pdGVtcy5yZWNvcmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBjYXB0aW9uU3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhU291cmNlSXRlbXMuaXRlbXMucmVjb3JkcywgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNSb3dzID0gY2FwdGlvblN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc1Jvd3MgIT09IHVuZGVmaW5lZCAmJiBzUm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzLmdldENlbGwoZ3JvdXBJbmRleCArIDEpLmNvbHVtblNwYW4gPSBwZGZHcmlkLmNvbHVtbnMuY291bnQgLSAoZ3JvdXBJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5jaGlsZExldmVscyAhPT0gdW5kZWZpbmVkICYmIGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoc1Jvd3MsIHBkZkdyaWQsIGJvcmRlciwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgdHJ1ZSwgcm93LCBncm91cEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzR3JvdXBlZFJlY29yZHMocGRmR3JpZCwgZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLCBncmlkQ29sdW1ucywgZ09iaiwgYm9yZGVyLCAoZ3JvdXBJbmRleCArIDEpLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCByZXR1cm5UeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwU3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHNSb3dzID0gZ3JvdXBTdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2VJdGVtcy5pdGVtcy5yZWNvcmRzLCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NBZ2dyZWdhdGVzKHNSb3dzLCBwZGZHcmlkLCBib3JkZXIsIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoc1Jvd3MsIHBkZkdyaWQsIGJvcmRlciwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgdHJ1ZSwgcm93LCBncm91cEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkKGJvcmRlciwgZ3JpZENvbHVtbnMsIGdPYmosIGRhdGFTb3VyY2VJdGVtcy5pdGVtcywgcGRmR3JpZCwgKGdyb3VwSW5kZXggKyAxKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBncm91cFN1bW1hcnlNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgICAgICBzUm93cyA9IGdyb3VwU3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhU291cmNlSXRlbXMuaXRlbXMsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoc1Jvd3MsIHBkZkdyaWQsIGJvcmRlciwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzR3JpZEhlYWRlcnMgPSBmdW5jdGlvbiAoY2hpbGRMZXZlbHMsIHBkZkdyaWQsIHJvd3MsIGdyaWRDb2x1bW5zLCBib3JkZXIsIGhlYWRlckZvbnQsIGhlYWRlckJydXNoKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uQ291bnQgPSBncmlkQ29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uQ291bnQgKz0gKGNoaWxkTGV2ZWxzICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZGZHcmlkLmNvbHVtbnMuYWRkKGNvbHVtbkNvdW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzR3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IChjaGlsZExldmVscyArIDEpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5jb2x1bW5zLmdldENvbHVtbihpKS53aWR0aCA9IDIwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBkZkdyaWQuaGVhZGVycy5hZGQocm93cy5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdyaWRIZWFkZXIgPSBwZGZHcmlkLmhlYWRlcnMuZ2V0SGVhZGVyKGkpO1xuICAgICAgICAgICAgICAgIGdyaWRIZWFkZXIuc3R5bGUuc2V0Qm9yZGVyKGJvcmRlcik7XG4gICAgICAgICAgICAgICAgZ3JpZEhlYWRlci5zdHlsZS5zZXRGb250KGhlYWRlckZvbnQpO1xuICAgICAgICAgICAgICAgIGdyaWRIZWFkZXIuc3R5bGUuc2V0VGV4dEJydXNoKGhlYWRlckJydXNoKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbEluZGV4ID0gdGhpcy5pc0dyb3VwaW5nID8gKGNoaWxkTGV2ZWxzICsgMSkgOiAwO1xuICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNlbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGdyaWRIZWFkZXIuY2VsbHMuY291bnQ7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBncmlkSGVhZGVyLmNlbGxzLmdldENlbGwoaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2VsbEluZGV4OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gZ3JpZEhlYWRlci5jZWxscy5nZXRDZWxsKGopO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcm93c1tpXS5jZWxscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBncmlkSGVhZGVyLmNlbGxzLmdldENlbGwoY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9IHJvd3NbaV0uY2VsbHNbal0uY29sdW1uLmhlYWRlclRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2VsbHNbal0uY29sdW1uLmhlYWRlclRleHRBbGlnbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuc3RyaW5nRm9ybWF0ID0gdGhpcy5nZXRIb3Jpem9udGFsQWxpZ25tZW50KHJvd3NbaV0uY2VsbHNbal0uY29sdW1uLmhlYWRlclRleHRBbGlnbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNlbGxzW2pdLnJvd1NwYW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnJvd1NwYW4gPSByb3dzW2ldLmNlbGxzW2pdLnJvd1NwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuc3RyaW5nRm9ybWF0ID0gdGhpcy5nZXRWZXJ0aWNhbEFsaWdubWVudCgnYm90dG9tJywgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQsIHJvd3NbaV0uY2VsbHNbal0uY29sdW1uLnRleHRBbGlnbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAxOyBrIDwgcm93c1tpXS5jZWxsc1tqXS5yb3dTcGFuOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBkZkdyaWQuaGVhZGVycy5nZXRIZWFkZXIoaSArIGspLmNlbGxzLmdldENlbGwoY2VsbEluZGV4KS52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2VsbHNbal0uY29sU3BhbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY29sdW1uU3BhbiA9IHJvd3NbaV0uY2VsbHNbal0uY29sU3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ICs9IGNlbGwuY29sdW1uU3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXggKz0gY2VsbC5jb2x1bW5TcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogPSBqIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwZGZHcmlkLmNvbHVtbnMuY291bnQgPj0gNikge1xuICAgICAgICAgICAgICAgIHBkZkdyaWQuc3R5bGUuYWxsb3dIb3Jpem9udGFsT3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBkZkdyaWQ7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0V4cG9ydFByb3BlcnRpZXMgPSBmdW5jdGlvbiAocGRmRXhwb3J0UHJvcGVydGllcywgZGF0YVNvdXJjZSwgc2VjdGlvbikge1xuICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLnRoZW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncmlkVGhlbWUgPSBwZGZFeHBvcnRQcm9wZXJ0aWVzLnRoZW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5wYWdlT3JpZW50YXRpb24gIT09IHVuZGVmaW5lZCB8fCBwZGZFeHBvcnRQcm9wZXJ0aWVzLnBhZ2VTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBkZlBhZ2VTZXR0aW5ncyA9IG5ldyBlajJfcGRmX2V4cG9ydF82LlBkZlBhZ2VTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICBwZGZQYWdlU2V0dGluZ3Mub3JpZW50YXRpb24gPSAocGRmRXhwb3J0UHJvcGVydGllcy5wYWdlT3JpZW50YXRpb24gPT09ICdMYW5kc2NhcGUnKSA/IGVqMl9wZGZfZXhwb3J0XzYuUGRmUGFnZU9yaWVudGF0aW9uLkxhbmRzY2FwZSA6IGVqMl9wZGZfZXhwb3J0XzYuUGRmUGFnZU9yaWVudGF0aW9uLlBvcnRyYWl0O1xuICAgICAgICAgICAgICAgICAgICBwZGZQYWdlU2V0dGluZ3Muc2l6ZSA9IHRoaXMuZ2V0UGFnZVNpemUocGRmRXhwb3J0UHJvcGVydGllcy5wYWdlU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24uc2V0UGFnZVNldHRpbmdzKHBkZlBhZ2VTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjbGllbnRTaXplID0gdGhpcy5wZGZEb2N1bWVudC5wYWdlU2V0dGluZ3Muc2l6ZTtcbiAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5oZWFkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVyID0gcGRmRXhwb3J0UHJvcGVydGllcy5oZWFkZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBvaW50RigwLCBoZWFkZXIuZnJvbVRvcCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoKGNsaWVudFNpemUud2lkdGggLSA4MCksIChoZWFkZXIuaGVpZ2h0ICogMC43NSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gbmV3IGVqMl9wZGZfZXhwb3J0XzQuUmVjdGFuZ2xlRihwb3NpdGlvbiwgc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGRmRG9jdW1lbnQudGVtcGxhdGUudG9wID0gdGhpcy5kcmF3UGFnZVRlbXBsYXRlKG5ldyBlajJfcGRmX2V4cG9ydF80LlBkZlBhZ2VUZW1wbGF0ZUVsZW1lbnQoYm91bmRzKSwgaGVhZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMuZm9vdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvb3RlciA9IHBkZkV4cG9ydFByb3BlcnRpZXMuZm9vdGVyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBuZXcgZWoyX3BkZl9leHBvcnRfNS5Qb2ludEYoMCwgKChjbGllbnRTaXplLndpZHRoIC0gODApIC0gKGZvb3Rlci5mcm9tQm90dG9tICogMC43NSkpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNpemUgPSBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigoY2xpZW50U2l6ZS53aWR0aCAtIDgwKSwgKGZvb3Rlci5oZWlnaHQgKiAwLjc1KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgZWoyX3BkZl9leHBvcnRfNC5SZWN0YW5nbGVGKHBvc2l0aW9uLCBzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZGZEb2N1bWVudC50ZW1wbGF0ZS5ib3R0b20gPSB0aGlzLmRyYXdQYWdlVGVtcGxhdGUobmV3IGVqMl9wZGZfZXhwb3J0XzQuUGRmUGFnZVRlbXBsYXRlRWxlbWVudChib3VuZHMpLCBmb290ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5pbmNsdWRlSGlkZGVuQ29sdW1uICE9PSB1bmRlZmluZWQgJiYgIXRoaXMuaXNHcm91cGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlID0gcGRmRXhwb3J0UHJvcGVydGllcy5pbmNsdWRlSGlkZGVuQ29sdW1uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2UgPSBwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21EYXRhU291cmNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5leHBvcnRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMuZXhwb3J0VHlwZSA9PT0gJ2N1cnJlbnR2aWV3Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZSA9IHRoaXMucGFyZW50LmdldEN1cnJlbnRWaWV3UmVjb3JkcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21EYXRhU291cmNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21EYXRhU291cmNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tRGF0YVNvdXJjZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21EYXRhU291cmNlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBkYXRhU291cmNlOiBkYXRhU291cmNlLCBzZWN0aW9uOiBzZWN0aW9uIH07XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZHJhd1BhZ2VUZW1wbGF0ZSA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgZWxlbWVudCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGVsZW1lbnQuY29udGVudHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQ29udGVudFZhbGlkYXRpb24oY29udGVudCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChjb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC52YWx1ZSA9PT0gJycgfHwgY29udGVudC52YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQudmFsdWUgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQudmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdGhlIHZhbGlkIGlucHV0IHZhbHVlIGluIHRleHQgY29udGVudC4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3VGV4dCh0ZW1wbGF0ZSwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFnZU51bWJlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdQYWdlTnVtYmVyKHRlbXBsYXRlLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdpbWFnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5zcmMgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnNyYyA9PT0gbnVsbCB8fCBjb250ZW50LnNyYyA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB0aGUgdmFsaWQgYmFzZTY0IHN0cmluZyBpbiBpbWFnZSBjb250ZW50Li4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdJbWFnZSh0ZW1wbGF0ZSwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGluZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdMaW5lKHRlbXBsYXRlLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2Ugc2V0IHZhbGlkIGNvbnRlbnQgdHlwZS4uLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzQ29udGVudFZhbGlkYXRpb24gPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJycgfHwgY29udGVudC50eXBlID09PSB1bmRlZmluZWQgfHwgY29udGVudC50eXBlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2Ugc2V0IHZhbGlkIGNvbnRlbnQgdHlwZS4uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ2xpbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvaW50cyA9PT0gJycgfHwgY29udGVudC5wb2ludHMgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBvaW50cyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdmFsaWQgcG9pbnRzIGluICcgKyBjb250ZW50LnR5cGUgKyAnIGNvbnRlbnQuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvaW50cy54MSA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9pbnRzLngxID09PSBudWxsIHx8IHR5cGVvZiBjb250ZW50LnBvaW50cy54MSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCB4MSBjby1vcmRpbmF0ZSBpbiAnICsgY29udGVudC50eXBlICsgJyBwb2ludHMuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvaW50cy55MSA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9pbnRzLnkxID09PSBudWxsIHx8IHR5cGVvZiBjb250ZW50LnBvaW50cy55MSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCB5MSBjby1vcmRpbmF0ZSBpbiAnICsgY29udGVudC50eXBlICsgJyBwb2ludHMuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvaW50cy54MiA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9pbnRzLngyID09PSBudWxsIHx8IHR5cGVvZiBjb250ZW50LnBvaW50cy54MiAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCB4MiBjby1vcmRpbmF0ZSBpbiAnICsgY29udGVudC50eXBlICsgJyBwb2ludHMuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvaW50cy55MiA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9pbnRzLnkyID09PSBudWxsIHx8IHR5cGVvZiBjb250ZW50LnBvaW50cy55MiAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCB5MiBjby1vcmRpbmF0ZSBpbiAnICsgY29udGVudC50eXBlICsgJyBwb2ludHMuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9zaXRpb24gPT09ICcnIHx8IGNvbnRlbnQucG9zaXRpb24gPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBvc2l0aW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCBwb3NpdGlvbiBpbiAnICsgY29udGVudC50eXBlICsgJyBjb250ZW50Li4uJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb3NpdGlvbi54ID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb3NpdGlvbi54ID09PSBudWxsIHx8IHR5cGVvZiBjb250ZW50LnBvc2l0aW9uLnggIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdmFsaWQgeCBjby1vcmRpbmF0ZSBpbiAnICsgY29udGVudC50eXBlICsgJyBwb3NpdGlvbi4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9zaXRpb24ueSA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9zaXRpb24ueSA9PT0gbnVsbCB8fCB0eXBlb2YgY29udGVudC5wb3NpdGlvbi55ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHkgY28tb3JkaW5hdGUgaW4gJyArIGNvbnRlbnQudHlwZSArICcgcG9zaXRpb24uLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5kcmF3VGV4dCA9IGZ1bmN0aW9uIChwYWdlVGVtcGxhdGUsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBmb250ID0gdGhpcy5nZXRGb250KGNvbnRlbnQpO1xuICAgICAgICAgICAgdmFyIGJydXNoID0gdGhpcy5nZXRCcnVzaEZyb21Db250ZW50KGNvbnRlbnQpO1xuICAgICAgICAgICAgdmFyIHBlbiA9IG51bGw7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS50ZXh0UGVuQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciBwZW5Db2xvciA9IHRoaXMuaGV4VG9SZ2IoY29udGVudC5zdHlsZS50ZXh0UGVuQ29sb3IpO1xuICAgICAgICAgICAgICAgIHBlbiA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihwZW5Db2xvci5yLCBwZW5Db2xvci5nLCBwZW5Db2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYnJ1c2ggPT0gbnVsbCAmJiBwZW4gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGJydXNoID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigwLCAwLCAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBjb250ZW50LnZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB2YXIgeCA9IGNvbnRlbnQucG9zaXRpb24ueCAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeSA9IGNvbnRlbnQucG9zaXRpb24ueSAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgZm9ybWF0O1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuc2V0Q29udGVudEZvcm1hdChjb250ZW50LCBmb3JtYXQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCAmJiByZXN1bHQuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgcmVzdWx0LnNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhZ2VUZW1wbGF0ZS5ncmFwaGljcy5kcmF3U3RyaW5nKHZhbHVlLCBmb250LCBwZW4sIGJydXNoLCB4LCB5LCByZXN1bHQuc2l6ZS53aWR0aCwgcmVzdWx0LnNpemUuaGVpZ2h0LCByZXN1bHQuZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhZ2VUZW1wbGF0ZS5ncmFwaGljcy5kcmF3U3RyaW5nKHZhbHVlLCBmb250LCBwZW4sIGJydXNoLCB4LCB5LCBmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdQYWdlTnVtYmVyID0gZnVuY3Rpb24gKGRvY3VtZW50SGVhZGVyLCBjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgZm9udCA9IHRoaXMuZ2V0Rm9udChjb250ZW50KTtcbiAgICAgICAgICAgIHZhciBicnVzaCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS50ZXh0QnJ1c2hDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJydXNoQ29sb3IgPSB0aGlzLmhleFRvUmdiKGNvbnRlbnQuc3R5bGUudGV4dEJydXNoQ29sb3IpO1xuICAgICAgICAgICAgICAgIGJydXNoID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihicnVzaENvbG9yLnIsIGJydXNoQ29sb3IuZywgYnJ1c2hDb2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBicnVzaCA9IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMCwgMCwgMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhZ2VOdW1iZXIgPSBuZXcgZWoyX3BkZl9leHBvcnRfNS5QZGZQYWdlTnVtYmVyRmllbGQoZm9udCwgYnJ1c2gpO1xuICAgICAgICAgICAgcGFnZU51bWJlci5udW1iZXJTdHlsZSA9IHRoaXMuZ2V0UGFnZU51bWJlclN0eWxlKGNvbnRlbnQucGFnZU51bWJlclR5cGUpO1xuICAgICAgICAgICAgdmFyIGNvbXBvc2l0ZUZpZWxkO1xuICAgICAgICAgICAgdmFyIGZvcm1hdDtcbiAgICAgICAgICAgIGlmIChjb250ZW50LmZvcm1hdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyR0b3RhbCcpICE9PSAtMSAmJiBjb250ZW50LmZvcm1hdC5pbmRleE9mKCckY3VycmVudCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFnZUNvdW50ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzYuUGRmUGFnZUNvdW50RmllbGQoZm9udCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LmZvcm1hdC5pbmRleE9mKCckdG90YWwnKSA+IGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyRjdXJyZW50JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IGNvbnRlbnQuZm9ybWF0LnJlcGxhY2UoJyRjdXJyZW50JywgJzAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKCckdG90YWwnLCAnMScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gY29udGVudC5mb3JtYXQucmVwbGFjZSgnJGN1cnJlbnQnLCAnMScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoJyR0b3RhbCcsICcwJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29tcG9zaXRlRmllbGQgPSBuZXcgZWoyX3BkZl9leHBvcnRfNS5QZGZDb21wb3NpdGVGaWVsZChmb250LCBicnVzaCwgZm9ybWF0LCBwYWdlTnVtYmVyLCBwYWdlQ291bnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250ZW50LmZvcm1hdC5pbmRleE9mKCckY3VycmVudCcpICE9PSAtMSAmJiBjb250ZW50LmZvcm1hdC5pbmRleE9mKCckdG90YWwnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gY29udGVudC5mb3JtYXQucmVwbGFjZSgnJGN1cnJlbnQnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZCA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBkZkNvbXBvc2l0ZUZpZWxkKGZvbnQsIGJydXNoLCBmb3JtYXQsIHBhZ2VOdW1iZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhZ2VDb3VudCA9IG5ldyBlajJfcGRmX2V4cG9ydF82LlBkZlBhZ2VDb3VudEZpZWxkKGZvbnQpO1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBjb250ZW50LmZvcm1hdC5yZXBsYWNlKCckdG90YWwnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZCA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBkZkNvbXBvc2l0ZUZpZWxkKGZvbnQsIGJydXNoLCBmb3JtYXQsIHBhZ2VDb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gJ3swfSc7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlRmllbGQgPSBuZXcgZWoyX3BkZl9leHBvcnRfNS5QZGZDb21wb3NpdGVGaWVsZChmb250LCBicnVzaCwgZm9ybWF0LCBwYWdlTnVtYmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB4ID0gY29udGVudC5wb3NpdGlvbi54ICogMC43NTtcbiAgICAgICAgICAgIHZhciB5ID0gY29udGVudC5wb3NpdGlvbi55ICogMC43NTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnNldENvbnRlbnRGb3JtYXQoY29udGVudCwgY29tcG9zaXRlRmllbGQuc3RyaW5nRm9ybWF0KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IG51bGwgJiYgcmVzdWx0LmZvcm1hdCAhPT0gdW5kZWZpbmVkICYmIHJlc3VsdC5zaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZC5zdHJpbmdGb3JtYXQgPSByZXN1bHQuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkLmJvdW5kcyA9IG5ldyBlajJfcGRmX2V4cG9ydF80LlJlY3RhbmdsZUYoeCwgeSwgcmVzdWx0LnNpemUud2lkdGgsIHJlc3VsdC5zaXplLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wb3NpdGVGaWVsZC5kcmF3KGRvY3VtZW50SGVhZGVyLmdyYXBoaWNzLCB4LCB5KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5kcmF3SW1hZ2UgPSBmdW5jdGlvbiAoZG9jdW1lbnRIZWFkZXIsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciB4ID0gY29udGVudC5wb3NpdGlvbi54ICogMC43NTtcbiAgICAgICAgICAgIHZhciB5ID0gY29udGVudC5wb3NpdGlvbi55ICogMC43NTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IChjb250ZW50LnNpemUgIT09IHVuZGVmaW5lZCkgPyAoY29udGVudC5zaXplLndpZHRoICogMC43NSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gKGNvbnRlbnQuc2l6ZSAhPT0gdW5kZWZpbmVkKSA/IChjb250ZW50LnNpemUuaGVpZ2h0ICogMC43NSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZCaXRtYXAoY29udGVudC5zcmMpO1xuICAgICAgICAgICAgaWYgKHdpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudEhlYWRlci5ncmFwaGljcy5kcmF3SW1hZ2UoaW1hZ2UsIHgsIHksIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRIZWFkZXIuZ3JhcGhpY3MuZHJhd0ltYWdlKGltYWdlLCB4LCB5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5kcmF3TGluZSA9IGZ1bmN0aW9uIChkb2N1bWVudEhlYWRlciwgY29udGVudCkge1xuICAgICAgICAgICAgdmFyIHgxID0gY29udGVudC5wb2ludHMueDEgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHkxID0gY29udGVudC5wb2ludHMueTEgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHgyID0gY29udGVudC5wb2ludHMueDIgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHkyID0gY29udGVudC5wb2ludHMueTIgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHBlbiA9IHRoaXMuZ2V0UGVuRnJvbUNvbnRlbnQoY29udGVudCk7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZSAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS5wZW5TaXplICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZS5wZW5TaXplICE9PSBudWxsICYmIHR5cGVvZiBjb250ZW50LnN0eWxlLnBlblNpemUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlbi53aWR0aCA9IGNvbnRlbnQuc3R5bGUucGVuU2l6ZSAqIDAuNzU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBlbi5kYXNoU3R5bGUgPSB0aGlzLmdldERhc2hTdHlsZShjb250ZW50LnN0eWxlLmRhc2hTdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb2N1bWVudEhlYWRlci5ncmFwaGljcy5kcmF3TGluZShwZW4sIHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzQWdncmVnYXRlcyA9IGZ1bmN0aW9uIChzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCBpc0NhcHRpb24sIGNhcHRpb25Sb3csIGdyb3VwSW5kZXgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgc1Jvd3NfMSA9IHNSb3dzOyBfaSA8IHNSb3dzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHNSb3dzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID0gLTE7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgaXNFbXB0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZGZHcmlkLmNvbHVtbnMuY291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvdy5jZWxsc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGNlbGwudmlzaWJsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhcHRpb25Sb3cgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FwdGlvblJvdy5jZWxscy5nZXRDZWxsKGkpLnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2goJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaChjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2goJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCA9IHJvdy5jZWxsc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2VsbC52aXNpYmxlICE9PSB1bmRlZmluZWQgJiYgIWNlbGwudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwgPSByb3cuY2VsbHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLmlzRGF0YUNlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUZuID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC5jb2x1bW4uZm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZCB8fCBjZWxsLmNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkIHx8IGNlbGwuY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmdldFRlbXBsYXRlRnVuY3Rpb24odGVtcGxhdGVGbiwgaSwgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4LCBjZWxsLmNvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVGbiA9IHJlc3VsdC50ZW1wbGF0ZUZ1bmN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCA9IHJlc3VsdC5sZWFzdENhcHRpb25TdW1tYXJ5SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dCA9ICh0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgY2VsbC5jZWxsVHlwZSldKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2godHh0WzBdLndob2xlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZ2V0U3VtbWFyeVdpdGhvdXRUZW1wbGF0ZShyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRW1wdHkgJiYgdmFsdWVbaV0gIT09ICcnICYmIHZhbHVlW2ldICE9PSB1bmRlZmluZWQgJiYgdmFsdWVbaV0gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRW1wdHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbmRleCArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0NhcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmlkUm93ID0gcGRmR3JpZC5yb3dzLmFkZFJvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRCb3JkZXIoYm9yZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRSb3cuc3R5bGUuc2V0Rm9udChmb250KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRSb3cuc3R5bGUuc2V0VGV4dEJydXNoKGJydXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRSb3cuc3R5bGUuc2V0QmFja2dyb3VuZEJydXNoKGJhY2tncm91bmRCcnVzaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBkZkdyaWQuY29sdW1ucy5jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5jZWxscy5nZXRDZWxsKGkpLnZhbHVlID0gdmFsdWVbaV0udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGRmR3JpZC5jb2x1bW5zLmNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkudmFsdWUgPSB2YWx1ZVtpXS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAoZ3JvdXBJbmRleCArIDEpICYmIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGlvblJvdy5jZWxscy5nZXRDZWxsKGkpLmNvbHVtblNwYW4gPSBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXggLSAoZ3JvdXBJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpID09PSAoZ3JvdXBJbmRleCArIDEpICYmIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGlvblJvdy5jZWxscy5nZXRDZWxsKGkpLmNvbHVtblNwYW4gPSBwZGZHcmlkLmNvbHVtbnMuY291bnQgLSAoZ3JvdXBJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRUZW1wbGF0ZUZ1bmN0aW9uID0gZnVuY3Rpb24gKHRlbXBsYXRlRm4sIGluZGV4LCBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXgsIGNvbHVtbikge1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5mb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5TdW1tYXJ5KV0gPSBlajJfYmFzZV8xLmNvbXBpbGUoY29sdW1uLmZvb3RlclRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjb2x1bW4uZ3JvdXBDYXB0aW9uVGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyB0ZW1wbGF0ZUZ1bmN0aW9uOiB0ZW1wbGF0ZUZuLCBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXg6IGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCB9O1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFN1bW1hcnlXaXRob3V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEuc3VtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5zdW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLmF2ZXJhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmF2ZXJhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubWF4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5taW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLm1pbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuY291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS50cnVlY291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLnRydWVjb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuZmFsc2Vjb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZmFsc2Vjb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuY3VzdG9tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5jdXN0b207XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuc2V0Q29sdW1uUHJvcGVydGllcyA9IGZ1bmN0aW9uIChncmlkQ29sdW1ucywgcGRmR3JpZCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLmlzR3JvdXBpbmcgPyAocGRmR3JpZC5jb2x1bW5zLmNvdW50IC0gZ3JpZENvbHVtbnMubGVuZ3RoKSA6IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyaWRDb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyaWRDb2x1bW5zW2ldLnRleHRBbGlnbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHBkZkdyaWQuY29sdW1ucy5nZXRDb2x1bW4oaSArIHN0YXJ0SW5kZXgpLmZvcm1hdCA9IHRoaXMuZ2V0SG9yaXpvbnRhbEFsaWdubWVudChncmlkQ29sdW1uc1tpXS50ZXh0QWxpZ24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGRmR3JpZC5zdHlsZS5hbGxvd0hvcml6b250YWxPdmVyZmxvdyAmJiBncmlkQ29sdW1uc1tpXS53aWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHBkZkdyaWQuY29sdW1ucy5nZXRDb2x1bW4oaSArIHN0YXJ0SW5kZXgpLndpZHRoID0gKGdyaWRDb2x1bW5zW2ldLndpZHRoICogMC43NSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnNldFJlY29yZFRoZW1lU3R5bGUgPSBmdW5jdGlvbiAocm93LCBib3JkZXIpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5ncmlkVGhlbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdib290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0VGV4dEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoNTEsIDUxLCA1MSkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmFicmljJzpcbiAgICAgICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldFRleHRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDUxLCA1MSwgNTEpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRUZXh0QnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigwLCAwLCAwKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm93LnN0eWxlLnNldEJvcmRlcihib3JkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzUmVjb3JkID0gZnVuY3Rpb24gKGJvcmRlciwgY29sdW1ucywgZ09iaiwgZGF0YVNvdXJjZSwgcGRmR3JpZCwgZ3JvdXBJbmRleCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLmlzR3JvdXBpbmcgPyBncm91cEluZGV4IDogMDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBkYXRhU291cmNlOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgZ3JpZFJvdyA9IHRoaXMuc2V0UmVjb3JkVGhlbWVTdHlsZShwZGZHcmlkLnJvd3MuYWRkUm93KCksIGJvcmRlcik7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjb2x1bW5zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zW2NvbHVtbnNbal0uZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtbnNbal0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sU3BhbjogMVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnBkZlF1ZXJ5Q2VsbEluZm8sIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGdyaWRSb3cuY2VsbHMuZ2V0Q2VsbChqICsgc3RhcnRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyLmZvcm1hdENlbGxWYWx1ZShhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQ2VsbFN0eWxlKGNlbGwsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLmNvbFNwYW4gPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGogKyBzdGFydEluZGV4ICsgMSArIGFyZ3MuY29sU3BhbikgPiBncmlkUm93LmNlbGxzLmNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5jb2xTcGFuID0gZ3JpZFJvdy5jZWxscy5jb3VudCAtIChqICsgc3RhcnRJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2x1bW5TcGFuID0gYXJncy5jb2xTcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBjZWxsLmNvbHVtblNwYW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFuQ2VsbCA9IGdyaWRSb3cuY2VsbHMuZ2V0Q2VsbChqICsgc3RhcnRJbmRleCArIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5DZWxsLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBqICs9IChhcmdzLmNvbFNwYW4gLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzQ2VsbFN0eWxlID0gZnVuY3Rpb24gKGNlbGwsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLmJhY2tncm91bmRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJhY2tDb2xvciA9IHRoaXMuaGV4VG9SZ2IoYXJncy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZEJydXNoID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihiYWNrQ29sb3IuciwgYmFja0NvbG9yLmcsIGJhY2tDb2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS50ZXh0QWxpZ25tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLnN0cmluZ0Zvcm1hdCA9IHRoaXMuZ2V0SG9yaXpvbnRhbEFsaWdubWVudChhcmdzLnN0eWxlLnRleHRBbGlnbm1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUudmVydGljYWxBbGlnbm1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuc3RyaW5nRm9ybWF0ID0gdGhpcy5nZXRWZXJ0aWNhbEFsaWdubWVudChhcmdzLnN0eWxlLnZlcnRpY2FsQWxpZ25tZW50LCBjZWxsLnN0eWxlLnN0cmluZ0Zvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS50ZXh0QnJ1c2hDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleHRCcnVzaENvbG9yID0gdGhpcy5oZXhUb1JnYihhcmdzLnN0eWxlLnRleHRCcnVzaENvbG9yKTtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLnRleHRCcnVzaCA9IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IodGV4dEJydXNoQ29sb3IuciwgdGV4dEJydXNoQ29sb3IuZywgdGV4dEJydXNoQ29sb3IuYikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUudGV4dFBlbkNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLnRleHRQZW4gPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZQZW4obmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoYXJncy5zdHlsZS50ZXh0UGVuQ29sb3IuciwgYXJncy5zdHlsZS50ZXh0UGVuQ29sb3IuZywgYXJncy5zdHlsZS50ZXh0UGVuQ29sb3IuYikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUuZm9udEZhbWlseSAhPT0gdW5kZWZpbmVkIHx8IGFyZ3Muc3R5bGUuZm9udFNpemUgIT09IHVuZGVmaW5lZCB8fCBhcmdzLnN0eWxlLmJvbGQgIT09IHVuZGVmaW5lZCB8fCBhcmdzLnN0eWxlLml0YWxpYyAhPT0gdW5kZWZpbmVkIHx8IGFyZ3Muc3R5bGUudW5kZXJsaW5lICE9PSB1bmRlZmluZWQgfHwgYXJncy5zdHlsZS5zdHJpa2VvdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuZm9udCA9IHRoaXMuZ2V0Rm9udChhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLmJvcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlciA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZkJvcmRlcnMoKTtcbiAgICAgICAgICAgICAgICB2YXIgYm9yZGVyV2lkdGggPSBhcmdzLnN0eWxlLmJvcmRlci53aWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSAoYm9yZGVyV2lkdGggIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgYm9yZGVyV2lkdGggPT09ICdudW1iZXInKSA/IChib3JkZXJXaWR0aCAqIDAuNzUpIDogKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMTk2LCAxOTYsIDE5Nik7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUuYm9yZGVyLmNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvcmRlckNvbG9yID0gdGhpcy5oZXhUb1JnYihhcmdzLnN0eWxlLmJvcmRlci5jb2xvcik7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoYm9yZGVyQ29sb3IuciwgYm9yZGVyQ29sb3IuZywgYm9yZGVyQ29sb3IuYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwZW4gPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZQZW4oY29sb3IsIHdpZHRoKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5zdHlsZS5ib3JkZXIuZGFzaFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuLmRhc2hTdHlsZSA9IHRoaXMuZ2V0RGFzaFN0eWxlKGFyZ3Muc3R5bGUuYm9yZGVyLmRhc2hTdHlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJvcmRlci5hbGwgPSBwZW47XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5ib3JkZXJzID0gYm9yZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldEhvcml6b250YWxBbGlnbm1lbnQgPSBmdW5jdGlvbiAodGV4dEFsaWduLCBmb3JtYXQpIHtcbiAgICAgICAgICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGZvcm1hdCA9IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlN0cmluZ0Zvcm1hdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoICh0ZXh0QWxpZ24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmX2V4cG9ydF8zLlBkZlRleHRBbGlnbm1lbnQuUmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmX2V4cG9ydF8zLlBkZlRleHRBbGlnbm1lbnQuQ2VudGVyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdqdXN0aWZ5JzpcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5KdXN0aWZ5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5MZWZ0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0VmVydGljYWxBbGlnbm1lbnQgPSBmdW5jdGlvbiAodmVydGljYWxBbGlnbiwgZm9ybWF0LCB0ZXh0QWxpZ24pIHtcbiAgICAgICAgICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGZvcm1hdCA9IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlN0cmluZ0Zvcm1hdCgpO1xuICAgICAgICAgICAgICAgIGZvcm1hdCA9IHRoaXMuZ2V0SG9yaXpvbnRhbEFsaWdubWVudCh0ZXh0QWxpZ24sIGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKHZlcnRpY2FsQWxpZ24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQubGluZUFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzQuUGRmVmVydGljYWxBbGlnbm1lbnQuQm90dG9tO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtaWRkbGUnOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQubGluZUFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzQuUGRmVmVydGljYWxBbGlnbm1lbnQuTWlkZGxlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQubGluZUFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzQuUGRmVmVydGljYWxBbGlnbm1lbnQuVG9wO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0Rm9udEZhbWlseSA9IGZ1bmN0aW9uIChmb250RmFtaWx5KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGZvbnRGYW1pbHkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdUaW1lc1JvbWFuJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICAgICAgY2FzZSAnQ291cmllcic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1N5bWJvbCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1phcGZEaW5nYmF0cyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA0O1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldEZvbnQgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIGZvbnRTaXplID0gKGNvbnRlbnQuc3R5bGUuZm9udFNpemUgIT09IHVuZGVmaW5lZCkgPyAoY29udGVudC5zdHlsZS5mb250U2l6ZSAqIDAuNzUpIDogOS43NTtcbiAgICAgICAgICAgIHZhciBmb250RmFtaWx5ID0gKGNvbnRlbnQuc3R5bGUuZm9udEZhbWlseSAhPT0gdW5kZWZpbmVkKSA/ICh0aGlzLmdldEZvbnRGYW1pbHkoY29udGVudC5zdHlsZS5mb250RmFtaWx5KSkgOiBlajJfcGRmX2V4cG9ydF8yLlBkZkZvbnRGYW1pbHkuSGVsdmV0aWNhO1xuICAgICAgICAgICAgdmFyIGZvbnRTdHlsZSA9IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udFN0eWxlLlJlZ3VsYXI7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS5ib2xkICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZS5ib2xkKSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udFN0eWxlLkJvbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS5pdGFsaWMgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLml0YWxpYykge1xuICAgICAgICAgICAgICAgIGZvbnRTdHlsZSB8PSBlajJfcGRmX2V4cG9ydF8yLlBkZkZvbnRTdHlsZS5JdGFsaWM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS51bmRlcmxpbmUgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLnVuZGVybGluZSkge1xuICAgICAgICAgICAgICAgIGZvbnRTdHlsZSB8PSBlajJfcGRmX2V4cG9ydF8yLlBkZkZvbnRTdHlsZS5VbmRlcmxpbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS5zdHJpa2VvdXQgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLnN0cmlrZW91dCkge1xuICAgICAgICAgICAgICAgIGZvbnRTdHlsZSB8PSBlajJfcGRmX2V4cG9ydF8yLlBkZkZvbnRTdHlsZS5TdHJpa2VvdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzIuUGRmU3RhbmRhcmRGb250KGZvbnRGYW1pbHksIGZvbnRTaXplLCBmb250U3R5bGUpO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFBhZ2VOdW1iZXJTdHlsZSA9IGZ1bmN0aW9uIChwYWdlTnVtYmVyVHlwZSkge1xuICAgICAgICAgICAgc3dpdGNoIChwYWdlTnVtYmVyVHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0xvd2VyTGF0aW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgICAgICBjYXNlICdMb3dlclJvbWFuJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgICAgICAgICAgY2FzZSAnVXBwZXJMYXRpbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA0O1xuICAgICAgICAgICAgICAgIGNhc2UgJ1VwcGVyUm9tYW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5zZXRDb250ZW50Rm9ybWF0ID0gZnVuY3Rpb24gKGNvbnRlbnQsIGZvcm1hdCkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQuc2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gY29udGVudC5zaXplLndpZHRoICogMC43NTtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gY29udGVudC5zaXplLmhlaWdodCAqIDAuNzU7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU3RyaW5nRm9ybWF0KGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5MZWZ0LCBlajJfcGRmX2V4cG9ydF80LlBkZlZlcnRpY2FsQWxpZ25tZW50Lk1pZGRsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3R5bGUuaEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb250ZW50LnN0eWxlLmhBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmX2V4cG9ydF8zLlBkZlRleHRBbGlnbm1lbnQuUmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmX2V4cG9ydF8zLlBkZlRleHRBbGlnbm1lbnQuQ2VudGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnanVzdGlmeSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5KdXN0aWZ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50LkxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3R5bGUudkFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gdGhpcy5nZXRWZXJ0aWNhbEFsaWdubWVudChjb250ZW50LnN0eWxlLnZBbGlnbiwgZm9ybWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZm9ybWF0OiBmb3JtYXQsIHNpemU6IG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKHdpZHRoLCBoZWlnaHQpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRQYWdlU2l6ZSA9IGZ1bmN0aW9uIChwYWdlU2l6ZSkge1xuICAgICAgICAgICAgc3dpdGNoIChwYWdlU2l6ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0xldHRlcic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig2MTIsIDc5Mik7XG4gICAgICAgICAgICAgICAgY2FzZSAnTm90ZSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig1NDAsIDcyMCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnTGVnYWwnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoNjEyLCAxMDA4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBMCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyMzgwLCAzMzY4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBMSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxNjg0LCAyMzgwKTtcbiAgICAgICAgICAgICAgICBjYXNlICdBMic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxMTkwLCAxNjg0KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBMyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig4NDIsIDExOTApO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0E1JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDQyMSwgNTk1KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBNic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyOTcsIDQyMSk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQTcnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoMjEwLCAyOTcpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0E4JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDE0OCwgMjEwKTtcbiAgICAgICAgICAgICAgICBjYXNlICdBOSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxMDUsIDE0OCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQjAnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoMjgzNiwgNDAwOCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQjEnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoMjAwNCwgMjgzNik7XG4gICAgICAgICAgICAgICAgY2FzZSAnQjInOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoMTQxOCwgMjAwNCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQjMnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoMTAwMiwgMTQxOCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQjQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoNzA5LCAxMDAyKTtcbiAgICAgICAgICAgICAgICBjYXNlICdCNSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig1MDEsIDcwOSk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJjaEEnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoNjQ4LCA4NjQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0FyY2hCJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDg2NCwgMTI5Nik7XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJjaEMnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoMTI5NiwgMTcyOCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJjaEQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoMTcyOCwgMjU5Mik7XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJjaEUnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoMjU5MiwgMzQ1Nik7XG4gICAgICAgICAgICAgICAgY2FzZSAnRmxzYSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig2MTIsIDkzNik7XG4gICAgICAgICAgICAgICAgY2FzZSAnSGFsZkxldHRlcic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigzOTYsIDYxMik7XG4gICAgICAgICAgICAgICAgY2FzZSAnTGV0dGVyMTF4MTcnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoNzkyLCAxMjI0KTtcbiAgICAgICAgICAgICAgICBjYXNlICdMZWRnZXInOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoMTIyNCwgNzkyKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoNTk1LCA4NDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldERhc2hTdHlsZSA9IGZ1bmN0aW9uIChkYXNoU3R5bGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZGFzaFN0eWxlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnRGFzaCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0RvdCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0Rhc2hEb3QnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMztcbiAgICAgICAgICAgICAgICBjYXNlICdEYXNoRG90RG90JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0UGVuRnJvbUNvbnRlbnQgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIHBlbiA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigwLCAwLCAwKSk7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZSAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUgIT09IG51bGwgJiYgY29udGVudC5zdHlsZS5wZW5Db2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBlbkNvbG9yID0gdGhpcy5oZXhUb1JnYihjb250ZW50LnN0eWxlLnBlbkNvbG9yKTtcbiAgICAgICAgICAgICAgICBwZW4gPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZQZW4obmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IocGVuQ29sb3IuciwgcGVuQ29sb3IuZywgcGVuQ29sb3IuYikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBlbjtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRCcnVzaEZyb21Db250ZW50ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBicnVzaCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS50ZXh0QnJ1c2hDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJydXNoQ29sb3IgPSB0aGlzLmhleFRvUmdiKGNvbnRlbnQuc3R5bGUudGV4dEJydXNoQ29sb3IpO1xuICAgICAgICAgICAgICAgIGJydXNoID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihicnVzaENvbG9yLnIsIGJydXNoQ29sb3IuZywgYnJ1c2hDb2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYnJ1c2g7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuaGV4VG9SZ2IgPSBmdW5jdGlvbiAoaGV4KSB7XG4gICAgICAgICAgICBpZiAoaGV4ID09PSBudWxsIHx8IGhleCA9PT0gJycgfHwgaGV4Lmxlbmd0aCAhPT0gNykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIHNldCB2YWxpZCBoZXggdmFsdWUgZm9yIGNvbG9yLi4uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZXggPSBoZXguc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgdmFyIGJpZ2ludCA9IHBhcnNlSW50KGhleCwgMTYpO1xuICAgICAgICAgICAgdmFyIHIgPSAoYmlnaW50ID4+IDE2KSAmIDI1NTtcbiAgICAgICAgICAgIHZhciBnID0gKGJpZ2ludCA+PiA4KSAmIDI1NTtcbiAgICAgICAgICAgIHZhciBiID0gYmlnaW50ICYgMjU1O1xuICAgICAgICAgICAgcmV0dXJuIHsgcjogciwgZzogZywgYjogYiB9O1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQZGZFeHBvcnQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlBkZkV4cG9ydCA9IFBkZkV4cG9ydDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3BkZi1leHBvcnQuanNcbi8vIG1vZHVsZSBpZCA9IDEwMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMTAxX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiXG4vLyBtb2R1bGUgaWQgPSAxMDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vcmVuZGVyZXIvY29tbWFuZC1jb2x1bW4tcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBjb25zdGFudF8xLCBlbnVtXzEsIGNvbW1hbmRfY29sdW1uX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENvbW1hbmRDb2x1bW4gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDb21tYW5kQ29sdW1uKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgQ29tbWFuZENvbHVtbi5wcm90b3R5cGUuaW5pdGlhdGVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2VsbEZhYyA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdjZWxsUmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICBjZWxsRmFjLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuQ29tbWFuZENvbHVtbiwgbmV3IGNvbW1hbmRfY29sdW1uX3JlbmRlcmVyXzEuQ29tbWFuZENvbHVtblJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29tbWFuZENvbHVtbi5wcm90b3R5cGUuY29tbWFuZENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGdJRCA9IHRoaXMucGFyZW50LmVsZW1lbnQuaWQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWoyX2Jhc2VfMS5jbG9zZXN0KGUudGFyZ2V0LCAnYnV0dG9uJyk7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCB8fCAhZ09iai5lZGl0TW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoICh0YXJnZXQuaWQuc3BsaXQoJ18nKVswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ2VkaXQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lZGl0TW9kdWxlLmVuZEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLnN0YXJ0RWRpdChlajJfYmFzZV8xLmNsb3Nlc3QodGFyZ2V0LCAndHInKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ2NhbmNlbCc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnc2F2ZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lZGl0TW9kdWxlLmVuZEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmRlbGV0ZVJvdyhlajJfYmFzZV8xLmNsb3Nlc3QodGFyZ2V0LCAndHInKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb21tYW5kQ29sdW1uLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdjb21tYW5kQ29sdW1uJztcbiAgICAgICAgfTtcbiAgICAgICAgQ29tbWFuZENvbHVtbi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBDb21tYW5kQ29sdW1uLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuY2xpY2ssIHRoaXMuY29tbWFuZENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5pbml0aWFsRW5kLCB0aGlzLmluaXRpYXRlUmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29tbWFuZENvbHVtbi5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuY2xpY2ssIHRoaXMuY29tbWFuZENsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhdGVSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbW1hbmRDb2x1bW4ucHJvdG90eXBlLmtleVByZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5hY3Rpb24gPT09ICdlbnRlcicgJiYgZWoyX2Jhc2VfMS5jbG9zZXN0KGUudGFyZ2V0LCAnYnV0dG9uJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRDbGlja0hhbmRsZXIoZSk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29tbWFuZENvbHVtbjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29tbWFuZENvbHVtbiA9IENvbW1hbmRDb2x1bW47XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9jb21tYW5kLWNvbHVtbi5qc1xuLy8gbW9kdWxlIGlkID0gMTAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiLCBcIi4vY2VsbC1yZW5kZXJlclwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9idXR0b25zXzEsIGNlbGxfcmVuZGVyZXJfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb21tYW5kQ29sdW1uUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQ29tbWFuZENvbHVtblJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBDb21tYW5kQ29sdW1uUmVuZGVyZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQsIGxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5idXR0b25FbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7fSk7XG4gICAgICAgICAgICBfdGhpcy51bmJvdW5EaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS11bmJvdW5kY2VsbGRpdicsIHN0eWxlczogJ2Rpc3BsYXk6IGlubGluZS1ibG9jaycgfSk7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdURCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXJvd2NlbGwgZS11bmJvdW5kY2VsbCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdncmlkY2VsbCcsIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQ29tbWFuZENvbHVtblJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMudW5ib3VuRGl2LmNsb25lTm9kZSgpKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ2lzIENvbW1hbmQgY29sdW1uIGNvbHVtbiBoZWFkZXIgJyArIGNlbGwuY29sdW1uLmhlYWRlclRleHQpO1xuICAgICAgICAgICAgaWYgKGNlbGwuY29sdW1uLmNvbW1hbmRzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuYXBwZW5kQ2hpbGRyZW4obm9kZS5maXJzdEVsZW1lbnRDaGlsZCwgY2VsbC5jb2x1bW4uZ2V0Q29sdW1uVGVtcGxhdGUoKShkYXRhKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gY2VsbC5jb21tYW5kczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1hbmQgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSB0aGlzLnJlbmRlckJ1dHRvbihub2RlLCBjb21tYW5kLCBhdHRyaWJ1dGVzLmluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZXMobm9kZSwgY2VsbCwgYXR0cmlidXRlcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWVkaXQtZGVsZXRlJyksICdlLWhpZGUnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnLmUtc2F2ZS1jYW5jZWwnKSwgJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyhub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXNhdmUtY2FuY2VsJyksICdlLWhpZGUnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnLmUtZWRpdC1kZWxldGUnKSwgJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIENvbW1hbmRDb2x1bW5SZW5kZXJlci5wcm90b3R5cGUucmVuZGVyQnV0dG9uID0gZnVuY3Rpb24gKG5vZGUsIGJ1dHRvbk9wdGlvbiwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBidXR0b24gPSB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmF0dHJpYnV0ZXMoYnV0dG9uLCB7ICdpZCc6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAoYnV0dG9uT3B0aW9uLnR5cGUgfHwgJycpICsgJ18nICsgaW5kZXgsICd0eXBlJzogJ2J1dHRvbicgfSk7XG4gICAgICAgICAgICBidXR0b24ub25jbGljayA9IGJ1dHRvbk9wdGlvbi5idXR0b25PcHRpb24uY2xpY2s7XG4gICAgICAgICAgICBub2RlLmZpcnN0RWxlbWVudENoaWxkLmFwcGVuZENoaWxkKG5ldyBlajJfYnV0dG9uc18xLkJ1dHRvbihidXR0b25PcHRpb24uYnV0dG9uT3B0aW9uLCBidXR0b24pLmVsZW1lbnQpO1xuICAgICAgICAgICAgc3dpdGNoIChidXR0b25PcHRpb24udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VkaXQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW2J1dHRvbl0sIFsnZS1lZGl0LWRlbGV0ZScsICdlLScgKyBidXR0b25PcHRpb24udHlwZSArICdidXR0b24nXSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NhbmNlbCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2F2ZSc6XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuYWRkQ2xhc3MoW2J1dHRvbl0sIFsnZS1zYXZlLWNhbmNlbCcsICdlLScgKyBidXR0b25PcHRpb24udHlwZSArICdidXR0b24nXSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb21tYW5kQ29sdW1uUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5Db21tYW5kQ29sdW1uUmVuZGVyZXIgPSBDb21tYW5kQ29sdW1uUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvY29tbWFuZC1jb2x1bW4tcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEwM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2FjdGlvbnMvcmVzaXplXCIsIFwiLi4vYWN0aW9ucy9wYWdlXCIsIFwiLi4vYWN0aW9ucy9ncm91cFwiLCBcIi4uL2FjdGlvbnMvc29ydFwiLCBcIi4uL2FjdGlvbnMvcGRmLWV4cG9ydFwiLCBcIi4uL2FjdGlvbnMvZXhjZWwtZXhwb3J0XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX25hdmlnYXRpb25zXzEsIGV2ZW50cywgcmVzaXplXzEsIHBhZ2VfMSwgZ3JvdXBfMSwgc29ydF8xLCBwZGZfZXhwb3J0XzEsIGV4Y2VsX2V4cG9ydF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGV4cG9ydHMubWVudUNsYXNzID0ge1xuICAgICAgICBoZWFkZXI6ICcuZS1ncmlkaGVhZGVyJyxcbiAgICAgICAgY29udGVudDogJy5lLWdyaWRjb250ZW50JyxcbiAgICAgICAgZWRpdDogJy5lLWlubGluZS1lZGl0JyxcbiAgICAgICAgZWRpdEljb246ICdlLWVkaXQnLFxuICAgICAgICBwYWdlcjogJy5lLWdyaWRwYWdlcicsXG4gICAgICAgIGRlbGV0ZTogJ2UtZGVsZXRlJyxcbiAgICAgICAgc2F2ZTogJ2Utc2F2ZScsXG4gICAgICAgIGNhbmNlbDogJ2UtY2FuY2VsJyxcbiAgICAgICAgY29weTogJ2UtY29weScsXG4gICAgICAgIHBkZjogJ2UtcGRmZXhwb3J0JyxcbiAgICAgICAgZ3JvdXA6ICdlLWljb24tZ3JvdXAnLFxuICAgICAgICB1bmdyb3VwOiAnZS1pY29uLXVuZ3JvdXAnLFxuICAgICAgICBjc3Y6ICdlLWNzdmV4cG9ydCcsXG4gICAgICAgIGV4Y2VsOiAnZS1leGNlbGV4cG9ydCcsXG4gICAgICAgIGZQYWdlOiAnZS1pY29uLWZpcnN0JyxcbiAgICAgICAgblBhZ2U6ICdlLWljb24tbmV4dCcsXG4gICAgICAgIGxQYWdlOiAnZS1pY29uLWxhc3QnLFxuICAgICAgICBwUGFnZTogJ2UtaWNvbi1wcmV2JyxcbiAgICAgICAgYXNjZW5kaW5nOiAnZS1pY29uLWFzY2VuZGluZycsXG4gICAgICAgIGRlc2NlbmRpbmc6ICdlLWljb24tZGVzY2VuZGluZycsXG4gICAgICAgIGdyb3VwSGVhZGVyOiAnZS1ncm91cGRyb3BhcmVhJyxcbiAgICAgICAgdG91Y2hQb3A6ICdlLWdyaWRwb3B1cCdcbiAgICB9O1xuICAgIHZhciBDb250ZXh0TWVudSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbnRleHRNZW51KHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEl0ZW1zID0ge307XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5oaWRkZW5JdGVtcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5sb2NhbGVUZXh0ID0gdGhpcy5zZXRMb2NhbGVLZXkoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5ncmlkSUQgPSBwYXJlbnQuZWxlbWVudC5pZDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxMb2FkLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsTG9hZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndWwnLCB7IGlkOiB0aGlzLmdyaWRJRCArICdfY21lbnUnIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9ICcjJyArIHRoaXMuZ3JpZElEO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0TWVudSA9IG5ldyBlajJfbmF2aWdhdGlvbnNfMS5Db250ZXh0TWVudSh7XG4gICAgICAgICAgICAgICAgaXRlbXM6IHRoaXMuZ2V0TWVudUl0ZW1zKCksXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgZW5hYmxlUGVyc2lzdGVuY2U6IHRoaXMucGFyZW50LmVuYWJsZVBlcnNpc3RlbmNlLFxuICAgICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5wYXJlbnQubG9jYWxlLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICAgICAgICAgIHNlbGVjdDogdGhpcy5jb250ZXh0TWVudUl0ZW1DbGljay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IHRoaXMuY29udGV4dE1lbnVCZWZvcmVPcGVuLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgb25PcGVuOiB0aGlzLmNvbnRleHRNZW51T3Blbi5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIG9uQ2xvc2U6IHRoaXMuY29udGV4dE1lbnVPbkNsb3NlLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLWdyaWQtbWVudSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0TWVudS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0TWVudUl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1lbnVJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGV4cG9ydEl0ZW1zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wYXJlbnQuY29udGV4dE1lbnVJdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICYmIHRoaXMuZ2V0RGVmYXVsdEl0ZW1zKCkuaW5kZXhPZihpdGVtKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKCdleHBvcnQnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydEl0ZW1zLnB1c2godGhpcy5idWlsZERlZmF1bHRJdGVtcyhpdGVtKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51SXRlbXMucHVzaCh0aGlzLmJ1aWxkRGVmYXVsdEl0ZW1zKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4cG9ydEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZXhwb3J0R3JvdXAgPSB0aGlzLmJ1aWxkRGVmYXVsdEl0ZW1zKCdleHBvcnQnKTtcbiAgICAgICAgICAgICAgICBleHBvcnRHcm91cC5pdGVtcyA9IGV4cG9ydEl0ZW1zO1xuICAgICAgICAgICAgICAgIG1lbnVJdGVtcy5wdXNoKGV4cG9ydEdyb3VwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZW51SXRlbXM7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXRMYXN0UGFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0b3RhbHBhZ2UgPSBNYXRoLmZsb29yKHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy50b3RhbFJlY29yZHNDb3VudCAvIHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnRvdGFsUmVjb3Jkc0NvdW50ICUgdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnBhZ2VTaXplKSB7XG4gICAgICAgICAgICAgICAgdG90YWxwYWdlICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdG90YWxwYWdlO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY29udGV4dE1lbnVPcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY29udGV4dE1lbnVJdGVtQ2xpY2sgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmdldEtleUZyb21JZChhcmdzLml0ZW0uaWQpO1xuICAgICAgICAgICAgc3dpdGNoIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0b0ZpdEFsbCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmF1dG9GaXRDb2x1bW5zKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0b0ZpdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmF1dG9GaXRDb2x1bW5zKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ3JvdXAnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ncm91cENvbHVtbih0aGlzLnRhcmdldENvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VuZ3JvdXAnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC51bmdyb3VwQ29sdW1uKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZWRpdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyh0aGlzLmV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuc3RhcnRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyh0aGlzLmV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZGVsZXRlUm93KHRoaXMucGFyZW50LmdldFJvd0J5SW5kZXgodGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NhbmNlbCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvcHknOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5jb3B5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BkZkV4cG9ydCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnBkZkV4cG9ydCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdleGNlbEV4cG9ydCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmV4Y2VsRXhwb3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NzdkV4cG9ydCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmNzdkV4cG9ydCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0QXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc29ydENvbHVtbih0aGlzLnRhcmdldENvbHVtbi5maWVsZCwgJ2FzY2VuZGluZycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0RGVzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNvcnRDb2x1bW4odGhpcy50YXJnZXRDb2x1bW4uZmllbGQsICdkZXNjZW5kaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpcnN0UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdvVG9QYWdlKDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdwcmV2UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdvVG9QYWdlKHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAtIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsYXN0UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdvVG9QYWdlKHRoaXMuZ2V0TGFzdFBhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ25leHRQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ29Ub1BhZ2UodGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuY29udGV4dE1lbnVDbGljaywgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5jb250ZXh0TWVudU9uQ2xvc2UgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9ICdwYXJlbnRPYmonO1xuICAgICAgICAgICAgaWYgKGFyZ3MuaXRlbXMubGVuZ3RoID4gMCAmJiBhcmdzLml0ZW1zWzBdW3BhcmVudF0gaW5zdGFuY2VvZiBlajJfbmF2aWdhdGlvbnNfMS5Db250ZXh0TWVudSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSXRlbVN0YXR1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZ2V0TG9jYWxlVGV4dCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sMTBuLmdldENvbnN0YW50KHRoaXMubG9jYWxlVGV4dFtpdGVtXSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS51cGRhdGVJdGVtU3RhdHVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0TWVudS5zaG93SXRlbXModGhpcy5oaWRkZW5JdGVtcyk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LmVuYWJsZUl0ZW1zKHRoaXMuZGlzYWJsZUl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZGVuSXRlbXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZUl0ZW1zID0gW107XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuY29udGV4dE1lbnVCZWZvcmVPcGVuID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q29sdW1uID0gdGhpcy5nZXRDb2x1bW4oYXJncy5ldmVudCk7XG4gICAgICAgICAgICBpZiAoYXJncy5ldmVudCAmJiAoZWoyX2Jhc2VfMS5jbG9zZXN0KGFyZ3MuZXZlbnQudGFyZ2V0LCAnLicgKyBleHBvcnRzLm1lbnVDbGFzcy5ncm91cEhlYWRlcilcbiAgICAgICAgICAgICAgICB8fCBlajJfYmFzZV8xLmNsb3Nlc3QoYXJncy5ldmVudC50YXJnZXQsICcuJyArIGV4cG9ydHMubWVudUNsYXNzLnRvdWNoUG9wKSkpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGFyZ3MuaXRlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5RnJvbUlkKGl0ZW0uaWQpO1xuICAgICAgICAgICAgICAgIHZhciBkSXRlbSA9IHRoaXMuZGVmYXVsdEl0ZW1zW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0RGVmYXVsdEl0ZW1zKCkuaW5kZXhPZihrZXkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbnN1cmVEaXNhYmxlZFN0YXR1cyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVJdGVtcy5wdXNoKGl0ZW0udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuZXZlbnQgJiYgZWoyX2Jhc2VfMS5jbG9zZXN0KGFyZ3MuZXZlbnQudGFyZ2V0LCBleHBvcnRzLm1lbnVDbGFzcy5lZGl0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSAhPT0gJ3NhdmUnICYmIGtleSAhPT0gJ2NhbmNlbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbkl0ZW1zLnB1c2goaXRlbS50ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MucGFyZW50SXRlbSkgJiYgYXJncy5ldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgIWVqMl9iYXNlXzEuY2xvc2VzdChhcmdzLmV2ZW50LnRhcmdldCwgZEl0ZW0udGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRkZW5JdGVtcy5wdXNoKGl0ZW0udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LmVuYWJsZUl0ZW1zKHRoaXMuZGlzYWJsZUl0ZW1zLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LmhpZGVJdGVtcyh0aGlzLmhpZGRlbkl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRBcmdzID0gYXJncy5ldmVudDtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmNvbnRleHRNZW51T3BlbiwgYXJncyk7XG4gICAgICAgICAgICBpZiAodGhpcy5oaWRkZW5JdGVtcy5pbmRleE9mKCdFeHBvcnQnKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlkZGVuSXRlbXMubGVuZ3RoID09PSB0aGlzLnBhcmVudC5jb250ZXh0TWVudUl0ZW1zLmxlbmd0aCAtIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJdGVtU3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MuY2FuY2VsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oaWRkZW5JdGVtcy5sZW5ndGggPT09IHRoaXMucGFyZW50LmNvbnRleHRNZW51SXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSXRlbVN0YXR1cygpO1xuICAgICAgICAgICAgICAgICAgICBhcmdzLmNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuZW5zdXJlRGlzYWJsZWRTdGF0dXMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgICAgIHN3aXRjaCAoaXRlbSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG9GaXRBbGwnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG9GaXQnOlxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAhdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQocmVzaXplXzEuUmVzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ3JvdXAnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcgfHwgKHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKGdyb3VwXzEuR3JvdXApICYmIHRoaXMudGFyZ2V0Q29sdW1uXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZih0aGlzLnRhcmdldENvbHVtbi5maWVsZCkgPj0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndW5ncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQoZ3JvdXBfMS5Hcm91cCkgfHwgKHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKGdyb3VwXzEuR3JvdXApICYmIHRoaXMudGFyZ2V0Q29sdW1uXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZih0aGlzLnRhcmdldENvbHVtbi5maWVsZCkgPCAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlZGl0JzpcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NhdmUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2NhbmNlbCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZWRpdE1vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjb3B5JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldFNlbGVjdGVkUm93SW5kZXhlcygpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdleHBvcnQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHBkZl9leHBvcnRfMS5QZGZFeHBvcnQpICYmICF0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChleGNlbF9leHBvcnRfMS5FeGNlbEV4cG9ydCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncGRmRXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChwZGZfZXhwb3J0XzEuUGRmRXhwb3J0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdleGNlbEV4cG9ydCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnY3N2RXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChleGNlbF9leHBvcnRfMS5FeGNlbEV4cG9ydCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydEFzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydERlc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHNvcnRfMS5Tb3J0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChzb3J0XzEuU29ydCkgJiYgdGhpcy5wYXJlbnQuc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID4gMCAmJiB0aGlzLnRhcmdldENvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc29ydFNldHRpbmdzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmZpZWxkID09PSBfdGhpcy50YXJnZXRDb2x1bW4uZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgZWxlbWVudC5kaXJlY3Rpb24gPT09IGl0ZW0ucmVwbGFjZSgnc29ydCcsICcnKS50b0xvY2FsZUxvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmlyc3RQYWdlJzpcbiAgICAgICAgICAgICAgICBjYXNlICdwcmV2UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQocGFnZV8xLlBhZ2UpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQocGFnZV8xLlBhZ2UpICYmIHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA9PT0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGFzdFBhZ2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ25leHRQYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChwYWdlXzEuUGFnZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChwYWdlXzEuUGFnZSkgJiYgdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID09PSB0aGlzLmdldExhc3RQYWdlKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldENvbnRleHRNZW51ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2NvbnRleHRNZW51JztcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdlbmVyYXRlSUQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZElEICsgJ19jbWVudV8nICsgaXRlbTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldEtleUZyb21JZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuIGlkLnJlcGxhY2UodGhpcy5ncmlkSUQgKyAnX2NtZW51XycsICcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmJ1aWxkRGVmYXVsdEl0ZW1zID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBtZW51SXRlbTtcbiAgICAgICAgICAgIHN3aXRjaCAoaXRlbSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG9GaXRBbGwnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG9GaXQnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5oZWFkZXIgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ3JvdXAnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5oZWFkZXIsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmdyb3VwIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VuZ3JvdXAnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5oZWFkZXIsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLnVuZ3JvdXAgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZWRpdCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmNvbnRlbnQsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmVkaXRJY29uIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmNvbnRlbnQsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmRlbGV0ZSB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MuZWRpdCwgaWNvbkNzczogZXhwb3J0cy5tZW51Q2xhc3Muc2F2ZSB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjYW5jZWwnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5lZGl0LCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5jYW5jZWwgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY29weSc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmNvbnRlbnQsIGljb25Dc3M6IGV4cG9ydHMubWVudUNsYXNzLmNvcHkgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZXhwb3J0JzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MuY29udGVudCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdwZGZFeHBvcnQnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5jb250ZW50LCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5wZGYgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZXhjZWxFeHBvcnQnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5jb250ZW50LCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5leGNlbCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjc3ZFeHBvcnQnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgdGFyZ2V0OiBleHBvcnRzLm1lbnVDbGFzcy5jb250ZW50LCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5jc3YgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydEFzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLmhlYWRlciwgaWNvbkNzczogZXhwb3J0cy5tZW51Q2xhc3MuYXNjZW5kaW5nIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnREZXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IHRhcmdldDogZXhwb3J0cy5tZW51Q2xhc3MuaGVhZGVyLCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5kZXNjZW5kaW5nIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpcnN0UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLnBhZ2VyLCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5mUGFnZSB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdwcmV2UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLnBhZ2VyLCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5wUGFnZSB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsYXN0UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLnBhZ2VyLCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5sUGFnZSB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICduZXh0UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyB0YXJnZXQ6IGV4cG9ydHMubWVudUNsYXNzLnBhZ2VyLCBpY29uQ3NzOiBleHBvcnRzLm1lbnVDbGFzcy5uUGFnZSB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEl0ZW1zW2l0ZW1dID0ge1xuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0TG9jYWxlVGV4dChpdGVtKSwgaWQ6IHRoaXMuZ2VuZXJhdGVJRChpdGVtKSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IG1lbnVJdGVtLnRhcmdldCwgaWNvbkNzczogbWVudUl0ZW0uaWNvbkNzcyA/ICdlLWljb25zICcgKyBtZW51SXRlbS5pY29uQ3NzIDogJydcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0SXRlbXNbaXRlbV07XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5nZXREZWZhdWx0SXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gWydhdXRvRml0QWxsJywgJ2F1dG9GaXQnLFxuICAgICAgICAgICAgICAgICdncm91cCcsICd1bmdyb3VwJywgJ2VkaXQnLCAnZGVsZXRlJywgJ3NhdmUnLCAnY2FuY2VsJywgJ2NvcHknLCAnZXhwb3J0JyxcbiAgICAgICAgICAgICAgICAncGRmRXhwb3J0JywgJ2V4Y2VsRXhwb3J0JywgJ2NzdkV4cG9ydCcsICdzb3J0QXNjZW5kaW5nJywgJ3NvcnREZXNjZW5kaW5nJyxcbiAgICAgICAgICAgICAgICAnZmlyc3RQYWdlJywgJ3ByZXZQYWdlJywgJ2xhc3RQYWdlJywgJ25leHRQYWdlJ107XG4gICAgICAgIH07XG4gICAgICAgIENvbnRleHRNZW51LnByb3RvdHlwZS5zZXRMb2NhbGVLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICdhdXRvRml0QWxsJzogJ2F1dG9GaXRBbGwnLFxuICAgICAgICAgICAgICAgICdhdXRvRml0JzogJ2F1dG9GaXQnLFxuICAgICAgICAgICAgICAgICdjb3B5JzogJ0NvcHknLFxuICAgICAgICAgICAgICAgICdncm91cCc6ICdHcm91cCcsXG4gICAgICAgICAgICAgICAgJ3VuZ3JvdXAnOiAnVW5ncm91cCcsXG4gICAgICAgICAgICAgICAgJ2VkaXQnOiAnRWRpdFJlY29yZCcsXG4gICAgICAgICAgICAgICAgJ2RlbGV0ZSc6ICdEZWxldGVSZWNvcmQnLFxuICAgICAgICAgICAgICAgICdzYXZlJzogJ1NhdmUnLFxuICAgICAgICAgICAgICAgICdjYW5jZWwnOiAnQ2FuY2VsQnV0dG9uJyxcbiAgICAgICAgICAgICAgICAncGRmRXhwb3J0JzogJ1BkZmV4cG9ydCcsXG4gICAgICAgICAgICAgICAgJ2V4Y2VsRXhwb3J0JzogJ0V4Y2VsZXhwb3J0JyxcbiAgICAgICAgICAgICAgICAnY3N2RXhwb3J0JzogJ0NzdmV4cG9ydCcsXG4gICAgICAgICAgICAgICAgJ2V4cG9ydCc6ICdFeHBvcnQnLFxuICAgICAgICAgICAgICAgICdzb3J0QXNjZW5kaW5nJzogJ1NvcnRBc2NlbmRpbmcnLFxuICAgICAgICAgICAgICAgICdzb3J0RGVzY2VuZGluZyc6ICdTb3J0RGVzY2VuZGluZycsXG4gICAgICAgICAgICAgICAgJ2ZpcnN0UGFnZSc6ICdGaXJzdFBhZ2UnLFxuICAgICAgICAgICAgICAgICdsYXN0UGFnZSc6ICdMYXN0UGFnZScsXG4gICAgICAgICAgICAgICAgJ3ByZXZQYWdlJzogJ1ByZXZpb3VzUGFnZScsXG4gICAgICAgICAgICAgICAgJ25leHRQYWdlJzogJ05leHRQYWdlJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGV4dE1lbnUucHJvdG90eXBlLmdldENvbHVtbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2VsbCA9IGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJ3RoLmUtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKGNlbGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgdWlkID0gY2VsbC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodWlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZXh0TWVudS5wcm90b3R5cGUuc2VsZWN0Um93ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciByb3cgPSBlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICd0ci5lLXJvdycpO1xuICAgICAgICAgICAgaWYgKHJvdykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdFJvdyh0aGlzLnBhcmVudC5nZXREYXRhUm93cygpLmluZGV4T2Yocm93KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb250ZXh0TWVudTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29udGV4dE1lbnUgPSBDb250ZXh0TWVudTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbnRleHQtbWVudS5qc1xuLy8gbW9kdWxlIGlkID0gMTA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9yZW5kZXJlci9mcmVlemUtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBldmVudHMsIGVudW1fMSwgZnJlZXplX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZyZWV6ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZyZWV6ZShwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIEZyZWV6ZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZnJlZXplJztcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxMb2FkLCB0aGlzLmluc3RhbnRpYXRlUmVuZGVyZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemUucHJvdG90eXBlLmluc3RhbnRpYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLmFkZFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkhlYWRlciwgbmV3IGZyZWV6ZV9yZW5kZXJlcl8xLkZyZWV6ZVJlbmRlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCwgbmV3IGZyZWV6ZV9yZW5kZXJlcl8xLkZyZWV6ZUNvbnRlbnRSZW5kZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plblJvd3MgJiYgIXRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5hZGRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50LCBuZXcgZnJlZXplX3JlbmRlcmVyXzEuRnJlZXplQ29udGVudFJlbmRlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbExvYWQsIHRoaXMuaW5zdGFudGlhdGVSZW5kZXJlcik7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRnJlZXplO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5GcmVlemUgPSBGcmVlemU7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9mcmVlemUuanNcbi8vIG1vZHVsZSBpZCA9IDEwNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9oZWFkZXItcmVuZGVyZXJcIiwgXCIuL2NvbnRlbnQtcmVuZGVyZXJcIiwgXCIuLi9zZXJ2aWNlcy9mcmVlemUtcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBoZWFkZXJfcmVuZGVyZXJfMSwgY29udGVudF9yZW5kZXJlcl8xLCBmcmVlemVfcm93X21vZGVsX2dlbmVyYXRvcl8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZyZWV6ZUNvbnRlbnRSZW5kZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRnJlZXplQ29udGVudFJlbmRlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRnJlZXplQ29udGVudFJlbmRlcihwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQsIGxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRnJlZXplQ29udGVudFJlbmRlci5wcm90b3R5cGUucmVuZGVyUGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlclBhbmVsLmNhbGwodGhpcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIHZhciBmRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZnJvemVuY29udGVudCcgfSk7XG4gICAgICAgICAgICAgICAgdmFyIG1EaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1tb3ZhYmxlY29udGVudCcgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQuYXBwZW5kQ2hpbGQoZkRpdik7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQuYXBwZW5kQ2hpbGQobURpdik7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGcm96ZW5Db250ZW50KGZEaXYpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0TW92YWJsZUNvbnRlbnQobURpdik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZUNvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlbmRlckVtcHR5ID0gZnVuY3Rpb24gKHRib2R5KSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlckVtcHR5LmNhbGwodGhpcywgdGJvZHkpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldE1vdmFibGVDb250ZW50KCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmdldE1vdmFibGVDb250ZW50KCkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuUm93cykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvcignLmUtZnJvemVuaGVhZGVyJykucXVlcnlTZWxlY3RvcigndGJvZHknKS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJy5lLW1vdmFibGVoZWFkZXInKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucGFyZW50LmZyb3plblJvd3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0RnJvemVuQ29udGVudCA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvemVuQ29udGVudCA9IGVsZTtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0TW92YWJsZUNvbnRlbnQgPSBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICB0aGlzLm1vdmFibGVDb250ZW50ID0gZWxlO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRGcm96ZW5Db250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvemVuQ29udGVudDtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0TW92YWJsZUNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb3ZhYmxlQ29udGVudDtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0TW9kZWxHZW5lcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGZyZWV6ZV9yb3dfbW9kZWxfZ2VuZXJhdG9yXzEuRnJlZXplUm93TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVDb250ZW50UmVuZGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVuZGVyVGFibGUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRGcm96ZW5Db250ZW50KCkuYXBwZW5kQ2hpbGQodGhpcy5nZXRUYWJsZSgpKTtcbiAgICAgICAgICAgICAgICB2YXIgbVRibCA9IHRoaXMuZ2V0VGFibGUoKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRNb3ZhYmxlQ29udGVudCgpLmFwcGVuZENoaWxkKG1UYmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmZyb3plblJvd3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZC5jbGFzc0xpc3QuYWRkKCdlLWZyb3plbmhkcmNvbnQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2xhc3NMaXN0LnJlbW92ZSgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGcmVlemVDb250ZW50UmVuZGVyO1xuICAgIH0oY29udGVudF9yZW5kZXJlcl8xLkNvbnRlbnRSZW5kZXIpKTtcbiAgICBleHBvcnRzLkZyZWV6ZUNvbnRlbnRSZW5kZXIgPSBGcmVlemVDb250ZW50UmVuZGVyO1xuICAgIHZhciBGcmVlemVSZW5kZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRnJlZXplUmVuZGVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBGcmVlemVSZW5kZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBsb2NhdG9yKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlclRhYmxlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnJmc2hNb3ZhYmxlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUucmVuZGVyUGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlclBhbmVsLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB2YXIgZkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWZyb3plbmhlYWRlcicgfSk7XG4gICAgICAgICAgICB2YXIgbURpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLW1vdmFibGVoZWFkZXInIH0pO1xuICAgICAgICAgICAgdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQuYXBwZW5kQ2hpbGQoZkRpdik7XG4gICAgICAgICAgICB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChtRGl2KTtcbiAgICAgICAgICAgIHRoaXMuc2V0RnJvemVuSGVhZGVyKGZEaXYpO1xuICAgICAgICAgICAgdGhpcy5zZXRNb3ZhYmxlSGVhZGVyKG1EaXYpO1xuICAgICAgICB9O1xuICAgICAgICBGcmVlemVSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hVSSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0TW92YWJsZUhlYWRlcigpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZWZyZXNoVUkuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucmZzaE1vdmFibGUoKTtcbiAgICAgICAgICAgIHZhciBtVGFibGUgPSB0aGlzLmdldE1vdmFibGVIZWFkZXIoKS5xdWVyeVNlbGVjdG9yKCd0YWJsZScpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGhpcy5nZXRNb3ZhYmxlSGVhZGVyKCkucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKSk7XG4gICAgICAgICAgICBtVGFibGUuaW5zZXJ0QmVmb3JlKHRoaXMucmVuZGVyTW92YWJsZSh0aGlzLmdldEZyb3plbkhlYWRlcigpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykpLCBtVGFibGUucXVlcnlTZWxlY3RvcigndGhlYWQnKSk7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUucmZzaE1vdmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyUm93O1xuICAgICAgICAgICAgdGhpcy5nZXRGcm96ZW5IZWFkZXIoKS5hcHBlbmRDaGlsZCh0aGlzLmdldFRhYmxlKCkpO1xuICAgICAgICAgICAgdGhpcy5nZXRNb3ZhYmxlSGVhZGVyKCkuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUYWJsZSgpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5mcm96ZW5Sb3dzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRGcm96ZW5IZWFkZXIoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNsYXNzTGlzdC5yZW1vdmUoJ2UtaGlkZScpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TW92YWJsZUhlYWRlcigpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2xhc3NMaXN0LnJlbW92ZSgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaWx0ZXJSb3cgPSB0aGlzLmdldFRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZmlsdGVyYmFyJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dGaWx0ZXJpbmcgJiYgZmlsdGVyUm93KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRNb3ZhYmxlSGVhZGVyKCkucXVlcnlTZWxlY3RvcigndGhlYWQnKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJNb3ZhYmxlKGZpbHRlclJvdykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5mcmVlemVSZWZyZXNoLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUuc2V0RnJvemVuSGVhZGVyID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgdGhpcy5mcm96ZW5IZWFkZXIgPSBlbGU7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUuc2V0TW92YWJsZUhlYWRlciA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgIHRoaXMubW92YWJsZUhlYWRlciA9IGVsZTtcbiAgICAgICAgfTtcbiAgICAgICAgRnJlZXplUmVuZGVyLnByb3RvdHlwZS5nZXRGcm96ZW5IZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mcm96ZW5IZWFkZXI7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUuZ2V0TW92YWJsZUhlYWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vdmFibGVIZWFkZXI7XG4gICAgICAgIH07XG4gICAgICAgIEZyZWV6ZVJlbmRlci5wcm90b3R5cGUucmVuZGVyTW92YWJsZSA9IGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgIHZhciBtRWxlID0gZWxlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJlbnQuZnJvemVuQ29sdW1uczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbUVsZS5yZW1vdmVDaGlsZChtRWxlLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLnBhcmVudC5mcm96ZW5Db2x1bW5zLCBsZW4gPSBlbGUuY2hpbGRFbGVtZW50Q291bnQ7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGVsZS5yZW1vdmVDaGlsZChlbGUuY2hpbGRyZW5bZWxlLmNoaWxkRWxlbWVudENvdW50IC0gMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1FbGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGcmVlemVSZW5kZXI7XG4gICAgfShoZWFkZXJfcmVuZGVyZXJfMS5IZWFkZXJSZW5kZXIpKTtcbiAgICBleHBvcnRzLkZyZWV6ZVJlbmRlciA9IEZyZWV6ZVJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9mcmVlemUtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEwNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcm93X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBGcmVlemVSb3dNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZyZWV6ZVJvd01vZGVsR2VuZXJhdG9yKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5pc0ZyekxvYWQgPSAxO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnJvd01vZGVsR2VuZXJhdG9yID0gbmV3IHJvd19tb2RlbF9nZW5lcmF0b3JfMS5Sb3dNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgRnJlZXplUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChkYXRhLCBub3RpZnlBcmdzKSB7XG4gICAgICAgICAgICB2YXIgcm93ID0gdGhpcy5yb3dNb2RlbEdlbmVyYXRvci5nZW5lcmF0ZVJvd3MoZGF0YSwgbm90aWZ5QXJncyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZnJvemVuQ29sdW1ucykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3cubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNGcnpMb2FkICUgMiA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93W2ldLmNlbGxzID0gcm93W2ldLmNlbGxzLnNsaWNlKHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMsIHJvd1tpXS5jZWxscy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93W2ldLmNlbGxzID0gcm93W2ldLmNlbGxzLnNsaWNlKDAsIHRoaXMucGFyZW50LmZyb3plbkNvbHVtbnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0ZyekxvYWQrKztcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGcmVlemVSb3dNb2RlbEdlbmVyYXRvcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRnJlZXplUm93TW9kZWxHZW5lcmF0b3IgPSBGcmVlemVSb3dNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9mcmVlemUtcm93LW1vZGVsLWdlbmVyYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMTA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIsIFwiLi4vYWN0aW9ucy9ncm91cFwiLCBcIi4uL2FjdGlvbnMvc29ydFwiLCBcIi4uL2FjdGlvbnMvZmlsdGVyXCIsIFwiLi4vYWN0aW9ucy9yZXNpemVcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfbmF2aWdhdGlvbnNfMSwgdXRpbF8xLCBldmVudHMsIGVqMl9wb3B1cHNfMSwgZWoyX2J1dHRvbnNfMSwgZ3JvdXBfMSwgc29ydF8xLCBmaWx0ZXJfMSwgcmVzaXplXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENvbHVtbk1lbnUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDb2x1bW5NZW51KHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEl0ZW1zID0ge307XG4gICAgICAgICAgICB0aGlzLmxvY2FsZVRleHQgPSB0aGlzLnNldExvY2FsZUtleSgpO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlSXRlbXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLkdST1VQID0gJ2UtaWNvbi1ncm91cCc7XG4gICAgICAgICAgICB0aGlzLlVOR1JPVVAgPSAnZS1pY29uLXVuZ3JvdXAnO1xuICAgICAgICAgICAgdGhpcy5BU0NFTkRJTkcgPSAnZS1pY29uLWFzY2VuZGluZyc7XG4gICAgICAgICAgICB0aGlzLkRFU0NFTkRJTkcgPSAnZS1pY29uLWRlc2NlbmRpbmcnO1xuICAgICAgICAgICAgdGhpcy5ST09UID0gJ2UtY29sdW1ubWVudSc7XG4gICAgICAgICAgICB0aGlzLkZJTFRFUiA9ICdlLWljb24tZmlsdGVyJztcbiAgICAgICAgICAgIHRoaXMuUE9QID0gJ2UtZmlsdGVyLXBvcHVwJztcbiAgICAgICAgICAgIHRoaXMuV1JBUCA9ICdlLWNvbC1tZW51JztcbiAgICAgICAgICAgIHRoaXMuQ0hPT1NFUiA9ICdfY2hvb3Nlcl8nO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmdyaWRJRCA9IHBhcmVudC5lbGVtZW50LmlkO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmdldENvbHVtbk1lbnVIYW5kbGVycygpLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChlbGUsICdtb3VzZWRvd24nLCBfdGhpcy5jb2x1bW5NZW51SGFuZGxlckRvd24sIF90aGlzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5nZXRDb2x1bW5NZW51SGFuZGxlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZWxlLCAnbW91c2Vkb3duJywgX3RoaXMuY29sdW1uTWVudUhhbmRsZXJEb3duKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5NZW51LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy51bndpcmVGaWx0ZXJFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5jb2x1bW5NZW51SGFuZGxlckNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY29sdW1ubWVudScpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Db2x1bW5NZW51KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzT3BlbiAmJiB0aGlzLmhlYWRlckNlbGwgIT09IHRoaXMuZ2V0SGVhZGVyQ2VsbChlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1lbnUuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuQ29sdW1uTWVudShlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUub3BlbkNvbHVtbk1lbnUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHBvcyA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OmJsb2NrO3Zpc2liaWxpdHk6aGlkZGVuJztcbiAgICAgICAgICAgIHZhciBlbGVQb3MgPSB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5Om5vbmU7dmlzaWJpbGl0eTp2aXNpYmxlJztcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyQ2VsbCA9IHRoaXMuZ2V0SGVhZGVyQ2VsbChlKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBwb3MudG9wID0gKCh3aW5kb3cuaW5uZXJIZWlnaHQgLyAyKSAtIChlbGVQb3MuaGVpZ2h0IC8gMikpO1xuICAgICAgICAgICAgICAgIHBvcy5sZWZ0ID0gKCh3aW5kb3cuaW5uZXJXaWR0aCAvIDIpIC0gKGVsZVBvcy53aWR0aCAvIDIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gZWoyX3BvcHVwc18xLmNhbGN1bGF0ZVBvc2l0aW9uKHRoaXMuaGVhZGVyQ2VsbCwgJ2xlZnQnLCAnYm90dG9tJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwb3MgPSBlajJfcG9wdXBzXzEuY2FsY3VsYXRlUG9zaXRpb24odGhpcy5oZWFkZXJDZWxsLCAncmlnaHQnLCAnYm90dG9tJyk7XG4gICAgICAgICAgICAgICAgICAgIHBvcy5sZWZ0IC09IGVsZVBvcy53aWR0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbHVtbk1lbnUub3Blbihwb3MudG9wLCBwb3MubGVmdCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmNvbHVtbk1lbnVIYW5kbGVyRG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9ICEodGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyB8fCB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gJycpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5nZXRDb2x1bW5NZW51SGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgdGhpcy5ST09UKSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLndpcmVFdmVudHMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5maWx0ZXJEaWFsb2dDcmVhdGVkLCB0aGlzLmZpbHRlclBvc2l0aW9uLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5jb2x1bW5NZW51SGFuZGxlckNsaWNrLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnVud2lyZUV2ZW50cyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZmlsdGVyRGlhbG9nQ3JlYXRlZCwgdGhpcy5maWx0ZXJQb3NpdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNvbHVtbk1lbnVIYW5kbGVyQ2xpY2spO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd1bCcsIHsgaWQ6IHRoaXMuZ3JpZElEICsgJ19jb2x1bW5tZW51JywgY2xhc3NOYW1lOiAnZS1jb2xtZW51JyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudSA9IG5ldyBlajJfbmF2aWdhdGlvbnNfMS5Db250ZXh0TWVudSh7XG4gICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLWdyaWQtbWVudScsXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsXG4gICAgICAgICAgICAgICAgZW5hYmxlUGVyc2lzdGVuY2U6IHRoaXMucGFyZW50LmVuYWJsZVBlcnNpc3RlbmNlLFxuICAgICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5wYXJlbnQubG9jYWxlLFxuICAgICAgICAgICAgICAgIGl0ZW1zOiB0aGlzLmdldEl0ZW1zKCksXG4gICAgICAgICAgICAgICAgc2VsZWN0OiB0aGlzLmNvbHVtbk1lbnVJdGVtQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBiZWZvcmVPcGVuOiB0aGlzLmNvbHVtbk1lbnVCZWZvcmVPcGVuLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgb25DbG9zZTogdGhpcy5jb2x1bW5NZW51T25DbG9zZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGJlZm9yZUl0ZW1SZW5kZXI6IHRoaXMuYmVmb3JlTWVudUl0ZW1SZW5kZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBiZWZvcmVDbG9zZTogdGhpcy5jb2x1bW5NZW51QmVmb3JlQ2xvc2UuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbk1lbnUuYXBwZW5kVG8odGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMud2lyZUZpbHRlckV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS53aXJlRmlsdGVyRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnbW91c2VvdmVyJywgdGhpcy5hcHBlbmRGaWx0ZXIsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS51bndpcmVGaWx0ZXJFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdtb3VzZW92ZXInLCB0aGlzLmFwcGVuZEZpbHRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmJlZm9yZU1lbnVJdGVtUmVuZGVyID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hvb3Nlckl0ZW0oYXJncy5pdGVtKSkge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZ2V0S2V5RnJvbUlkKGFyZ3MuaXRlbS5pZCwgdGhpcy5DSE9PU0VSKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrID0gZWoyX2J1dHRvbnNfMS5jcmVhdGVDaGVja0JveChmYWxzZSwge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogYXJncy5pdGVtLnRleHQsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGNvbHVtbi52aXNpYmxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgICAgICBjaGVjay5jbGFzc0xpc3QuYWRkKCdlLXJ0bCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhcmdzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LmFwcGVuZENoaWxkKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZ2V0S2V5RnJvbUlkKGFyZ3MuaXRlbS5pZCkgPT09ICdmaWx0ZXInKSB7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWNhcmV0JyB9KSk7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LmNsYXNzTmFtZSArPSAnZS1maWx0ZXItaXRlbSBlLW1lbnUtY2FyZXQtaWNvbic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmNvbHVtbk1lbnVCZWZvcmVDbG9zZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYXJncy5wYXJlbnRJdGVtKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0S2V5RnJvbUlkKGFyZ3MucGFyZW50SXRlbS5pZCkgPT09ICdjb2x1bW5DaG9vc2VyJyAmJlxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xvc2VzdChhcmdzLmV2ZW50LnRhcmdldCwgJy5lLW1lbnUtcGFyZW50JykpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhcmdzLmV2ZW50ICYmIChlajJfYmFzZV8xLmNsb3Nlc3QoYXJncy5ldmVudC50YXJnZXQsICcuJyArIHRoaXMuUE9QKVxuICAgICAgICAgICAgICAgIHx8ICh1dGlsXzEucGFyZW50c1VudGlsKGFyZ3MuZXZlbnQudGFyZ2V0LCAnZS1wb3B1cCcpKSkpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmlzQ2hvb3Nlckl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0S2V5RnJvbUlkKGl0ZW0uaWQsIHRoaXMuQ0hPT1NFUikuaW5kZXhPZih0aGlzLmdyaWRJRCkgPT09IC0xO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5jb2x1bW5NZW51QmVmb3JlT3BlbiA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBhcmdzLmNvbHVtbiA9IHRoaXMudGFyZ2V0Q29sdW1uID0gdGhpcy5nZXRDb2x1bW4oKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmNvbHVtbk1lbnVPcGVuLCBhcmdzKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBhcmdzLml0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmdldEtleUZyb21JZChpdGVtLmlkKTtcbiAgICAgICAgICAgICAgICB2YXIgZEl0ZW0gPSB0aGlzLmRlZmF1bHRJdGVtc1trZXldO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldERlZmF1bHRJdGVtcygpLmluZGV4T2Yoa2V5KSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5zdXJlRGlzYWJsZWRTdGF0dXMoa2V5KSAmJiAhZEl0ZW0uaGlkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlSXRlbXMucHVzaChpdGVtLnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb2x1bW5NZW51LmVuYWJsZUl0ZW1zKHRoaXMuZGlzYWJsZUl0ZW1zLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmVuc3VyZURpc2FibGVkU3RhdHVzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc3RhdHVzID0gZmFsc2U7XG4gICAgICAgICAgICBzd2l0Y2ggKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZyB8fCAodGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQoZ3JvdXBfMS5Hcm91cCkgJiYgdGhpcy50YXJnZXRDb2x1bW5cbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkKSA+PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvRml0QWxsJzpcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvRml0JzpcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHJlc2l6ZV8xLlJlc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VuZ3JvdXAnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKGdyb3VwXzEuR3JvdXApIHx8ICh0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChncm91cF8xLkdyb3VwKSAmJiB0aGlzLnRhcmdldENvbHVtblxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YodGhpcy50YXJnZXRDb2x1bW4uZmllbGQpIDwgMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydERlc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnRBc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5zdXJlTW9kdWxlSW5qZWN0ZWQoc29ydF8xLlNvcnQpICYmIHRoaXMucGFyZW50LnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA+IDAgJiYgdGhpcy50YXJnZXRDb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNvcnRTZXR0aW5ncy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGUuZmllbGQgPT09IF90aGlzLnRhcmdldENvbHVtbi5maWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBlbGUuZGlyZWN0aW9uID09PSBpdGVtLnJlcGxhY2UoJ3NvcnQnLCAnJykudG9Mb2NhbGVMb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChzb3J0XzEuU29ydCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RhdHVzO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5jb2x1bW5NZW51SXRlbUNsaWNrID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5pc0Nob29zZXJJdGVtKGFyZ3MuaXRlbSkgPyAnY29sdW1uQ2hvb3NlcicgOiB0aGlzLmdldEtleUZyb21JZChhcmdzLml0ZW0uaWQpO1xuICAgICAgICAgICAgc3dpdGNoIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0b0ZpdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmF1dG9GaXRDb2x1bW5zKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0b0ZpdEFsbCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmF1dG9GaXRDb2x1bW5zKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndW5ncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnVuZ3JvdXBDb2x1bW4odGhpcy50YXJnZXRDb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lmdyb3VwQ29sdW1uKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydEFzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNvcnRDb2x1bW4odGhpcy50YXJnZXRDb2x1bW4uZmllbGQsICdhc2NlbmRpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29ydERlc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zb3J0Q29sdW1uKHRoaXMudGFyZ2V0Q29sdW1uLmZpZWxkLCAnZGVzY2VuZGluZycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjb2x1bW5DaG9vc2VyJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5RnJvbUlkKGFyZ3MuaXRlbS5pZCwgdGhpcy5DSE9PU0VSKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94ID0gYXJncy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNoZWNrYm94LXdyYXBwZXIgLmUtZnJhbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrYm94ICYmIGNoZWNrYm94LmNsYXNzTGlzdC5jb250YWlucygnZS1jaGVjaycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5jbGFzc0xpc3QucmVtb3ZlKCdlLWNoZWNrJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5oaWRlQ29sdW1uKGtleSwgJ2ZpZWxkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2tib3gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNob3dDb2x1bW4oa2V5LCAnZmllbGQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmNsYXNzTGlzdC5hZGQoJ2UtY2hlY2snKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmaWx0ZXInOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEZpbHRlcihhcmdzLmVsZW1lbnQsIGFyZ3MuaXRlbS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuY29sdW1uTWVudUNsaWNrLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuY29sdW1uTWVudU9uQ2xvc2UgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9ICdwYXJlbnRPYmonO1xuICAgICAgICAgICAgaWYgKGFyZ3MuaXRlbXMubGVuZ3RoID4gMCAmJiBhcmdzLml0ZW1zWzBdW3BhcmVudF0gaW5zdGFuY2VvZiBlajJfbmF2aWdhdGlvbnNfMS5Db250ZXh0TWVudSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTWVudS5lbmFibGVJdGVtcyh0aGlzLmRpc2FibGVJdGVtcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlSXRlbXMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0RGVmYXVsdEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFsnYXV0b0ZpdEFsbCcsICdhdXRvRml0JywgJ3NvcnRBc2NlbmRpbmcnLCAnc29ydERlc2NlbmRpbmcnLCAnZ3JvdXAnLCAndW5ncm91cCcsICdjb2x1bW5DaG9vc2VyJywgJ2ZpbHRlciddO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5nZXRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGRlZnVsdEl0ZW1zID0gdGhpcy5wYXJlbnQuY29sdW1uTWVudUl0ZW1zID8gdGhpcy5wYXJlbnQuY29sdW1uTWVudUl0ZW1zIDogdGhpcy5nZXREZWZhdWx0KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRlZnVsdEl0ZW1zXzEgPSBkZWZ1bHRJdGVtczsgX2kgPCBkZWZ1bHRJdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZGVmdWx0SXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PT0gJ2NvbHVtbkNob29zZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gdGhpcy5nZXREZWZhdWx0SXRlbShpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5pdGVtcyA9IHRoaXMuY3JlYXRlQ2hvb3Nlckl0ZW1zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKGNvbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHRoaXMuZ2V0RGVmYXVsdEl0ZW0oaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0RGVmYXVsdEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIG1lbnVJdGVtID0ge307XG4gICAgICAgICAgICBzd2l0Y2ggKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0QXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IGljb25Dc3M6IHRoaXMuQVNDRU5ESU5HIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnREZXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0gPSB7IGljb25Dc3M6IHRoaXMuREVTQ0VORElORyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdncm91cCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyBpY29uQ3NzOiB0aGlzLkdST1VQIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VuZ3JvdXAnOlxuICAgICAgICAgICAgICAgICAgICBtZW51SXRlbSA9IHsgaWNvbkNzczogdGhpcy5VTkdST1VQIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbHRlcic6XG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtID0geyBpY29uQ3NzOiB0aGlzLkZJTFRFUiB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEl0ZW1zW2l0ZW1dID0ge1xuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0TG9jYWxlVGV4dChpdGVtKSwgaWQ6IHRoaXMuZ2VuZXJhdGVJRChpdGVtKSxcbiAgICAgICAgICAgICAgICBpY29uQ3NzOiBtZW51SXRlbS5pY29uQ3NzID8gJ2UtaWNvbnMgJyArIG1lbnVJdGVtLmljb25Dc3MgOiAnJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRJdGVtc1tpdGVtXTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0TG9jYWxlVGV4dCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sMTBuLmdldENvbnN0YW50KHRoaXMubG9jYWxlVGV4dFtpdGVtXSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdlbmVyYXRlSUQgPSBmdW5jdGlvbiAoaXRlbSwgYXBwZW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ncmlkSUQgKyAnX2NvbG1lbnVfJyArIChhcHBlbmQgPyBhcHBlbmQgKyBpdGVtIDogaXRlbSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldEtleUZyb21JZCA9IGZ1bmN0aW9uIChpZCwgYXBwZW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gaWQucmVwbGFjZSh0aGlzLmdyaWRJRCArICdfY29sbWVudV8nICsgKGFwcGVuZCA/IGFwcGVuZCA6ICcnKSwgJycpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5nZXRDb2x1bW5NZW51ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnY29sdW1uTWVudSc7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLnNldExvY2FsZUtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ2F1dG9GaXRBbGwnOiAnYXV0b0ZpdEFsbCcsXG4gICAgICAgICAgICAgICAgJ2F1dG9GaXQnOiAnYXV0b0ZpdCcsXG4gICAgICAgICAgICAgICAgJ2dyb3VwJzogJ0dyb3VwJyxcbiAgICAgICAgICAgICAgICAndW5ncm91cCc6ICdVbmdyb3VwJyxcbiAgICAgICAgICAgICAgICAnc29ydEFzY2VuZGluZyc6ICdTb3J0QXNjZW5kaW5nJyxcbiAgICAgICAgICAgICAgICAnc29ydERlc2NlbmRpbmcnOiAnU29ydERlc2NlbmRpbmcnLFxuICAgICAgICAgICAgICAgICdjb2x1bW5DaG9vc2VyJzogJ0NvbHVtbmNob29zZXInLFxuICAgICAgICAgICAgICAgICdmaWx0ZXInOiAnRmlsdGVyTWVudSdcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldEhlYWRlckNlbGwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJ3RoLmUtaGVhZGVyY2VsbCcpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5nZXRDb2x1bW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5oZWFkZXJDZWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVpZCA9IHRoaXMuaGVhZGVyQ2VsbC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodWlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5jcmVhdGVDaG9vc2VySXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnNob3dJbkNvbHVtbkNob29zZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7IGlkOiB0aGlzLmdlbmVyYXRlSUQoY29sLmZpZWxkLCB0aGlzLkNIT09TRVIpLCB0ZXh0OiBjb2wuaGVhZGVyVGV4dCA/IGNvbC5oZWFkZXJUZXh0IDogY29sLmZpZWxkIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuYXBwZW5kRmlsdGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSAnZmlsdGVyJztcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmRlZmF1bHRJdGVtc1tmaWx0ZXJdLmlkO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJyMnICsga2V5KSAmJiAhdGhpcy5pc0ZpbHRlclBvcHVwT3BlbigpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRGaWx0ZXIoZS50YXJnZXQsIGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghZWoyX2Jhc2VfMS5jbG9zZXN0KGUudGFyZ2V0LCAnIycgKyBrZXkpICYmIHRoaXMuaXNGaWx0ZXJQb3B1cE9wZW4oKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmlsdGVyKGUudGFyZ2V0LCBrZXksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5nZXRGaWx0ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBpZCwgaXNDbG9zZSkge1xuICAgICAgICAgICAgdmFyIGZpbHRlclBvcHVwID0gdGhpcy5nZXRGaWx0ZXJQb3VwKCk7XG4gICAgICAgICAgICBpZiAoZmlsdGVyUG9wdXApIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJQb3B1cC5zdHlsZS5kaXNwbGF5ID0gaXNDbG9zZSA/ICdub25lJyA6ICdibG9jayc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmZpbHRlck9wZW4sIHtcbiAgICAgICAgICAgICAgICAgICAgY29sOiB0aGlzLnRhcmdldENvbHVtbiwgdGFyZ2V0OiB0YXJnZXQsIGlzQ2xvc2U6IGlzQ2xvc2UsIGlkOiBpZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChsaSwgdWwpIHtcbiAgICAgICAgICAgIHZhciBncmlkUG9zID0gdGhpcy5wYXJlbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBsaVBvcyA9IGxpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGxlZnQgPSBsaVBvcy5sZWZ0IC0gZ3JpZFBvcy5sZWZ0O1xuICAgICAgICAgICAgdmFyIHRvcCA9IGxpUG9zLnRvcCAtIGdyaWRQb3MudG9wO1xuICAgICAgICAgICAgaWYgKGdyaWRQb3MuaGVpZ2h0IDwgdG9wKSB7XG4gICAgICAgICAgICAgICAgdG9wID0gdG9wIC0gdWwub2Zmc2V0SGVpZ2h0ICsgbGlQb3MuaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZ3JpZFBvcy5oZWlnaHQgPCB0b3AgKyB1bC5vZmZzZXRIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0b3AgPSBncmlkUG9zLmhlaWdodCAtIHVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCB1bC5vZmZzZXRIZWlnaHQgKyB0b3AgKyBncmlkUG9zLnRvcCkge1xuICAgICAgICAgICAgICAgIHRvcCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIHVsLm9mZnNldEhlaWdodCAtIGdyaWRQb3MudG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGVmdCArPSAodGhpcy5wYXJlbnQuZW5hYmxlUnRsID8gLXVsLm9mZnNldFdpZHRoIDogbGlQb3Mud2lkdGgpO1xuICAgICAgICAgICAgaWYgKGdyaWRQb3Mud2lkdGggPD0gbGVmdCArIHVsLm9mZnNldFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgbGVmdCAtPSBsaVBvcy53aWR0aCArIHVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGVmdCA8IDApIHtcbiAgICAgICAgICAgICAgICBsZWZ0ICs9IHVsLm9mZnNldFdpZHRoICsgbGlQb3Mud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1bC5zdHlsZS50b3AgPSB0b3AgKyAncHgnO1xuICAgICAgICAgICAgdWwuc3R5bGUubGVmdCA9IGxlZnQgKyAncHgnO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5NZW51LnByb3RvdHlwZS5maWx0ZXJQb3NpdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyUG9wdXAgPSB0aGlzLmdldEZpbHRlclBvdXAoKTtcbiAgICAgICAgICAgIGZpbHRlclBvcHVwLmNsYXNzTGlzdC5hZGQodGhpcy5XUkFQKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3AgPSBmaWx0ZXJQb3B1cC5zdHlsZS5kaXNwbGF5O1xuICAgICAgICAgICAgICAgIGZpbHRlclBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIGZpbHRlclBvcHVwLmNsYXNzTGlzdC5hZGQodGhpcy5XUkFQKTtcbiAgICAgICAgICAgICAgICB2YXIgbGkgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyB0aGlzLkZJTFRFUik7XG4gICAgICAgICAgICAgICAgaWYgKGxpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb24obGkucGFyZW50RWxlbWVudCwgZmlsdGVyUG9wdXApO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJQb3B1cC5zdHlsZS5kaXNwbGF5ID0gZGlzcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChyZXNpemVfMS5SZXNpemUpKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaCgnYXV0b0ZpdEFsbCcpO1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goJ2F1dG9GaXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbnN1cmVNb2R1bGVJbmplY3RlZChncm91cF8xLkdyb3VwKSkge1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goJ2dyb3VwJyk7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaCgndW5ncm91cCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKHNvcnRfMS5Tb3J0KSkge1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goJ3NvcnRBc2NlbmRpbmcnKTtcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKCdzb3J0RGVzY2VuZGluZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaCgnY29sdW1uQ2hvb3NlcicpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuc3VyZU1vZHVsZUluamVjdGVkKGZpbHRlcl8xLkZpbHRlcikpIHtcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKCdmaWx0ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uTWVudS5wcm90b3R5cGUuaXNGaWx0ZXJQb3B1cE9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyUG9wdXAgPSB0aGlzLmdldEZpbHRlclBvdXAoKTtcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJQb3B1cCAmJiBmaWx0ZXJQb3B1cC5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbk1lbnUucHJvdG90eXBlLmdldEZpbHRlclBvdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyB0aGlzLlBPUCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb2x1bW5NZW51O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW5NZW51ID0gQ29sdW1uTWVudTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbHVtbi1tZW51LmpzXG4vLyBtb2R1bGUgaWQgPSAxMDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9tb2RlbHMvY29sdW1uXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY29sdW1uXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGNvbHVtbl8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9tb2RlbHMuanNcbi8vIG1vZHVsZSBpZCA9IDEwOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3JlbmRlcmVyL2hlYWRlci1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvY29udGVudC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL3N0YWNrZWQtY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvcmVuZGVyXCIsIFwiLi9yZW5kZXJlci9maWx0ZXItY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvaW5kZW50LWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2NhcHRpb24tY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvYmF0Y2gtZWRpdC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvZGlhbG9nLWVkaXQtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2lubGluZS1lZGl0LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9lZGl0LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9ib29sZWFuLWVkaXQtY2VsbFwiLCBcIi4vcmVuZGVyZXIvZGVmYXVsdC1lZGl0LWNlbGxcIiwgXCIuL3JlbmRlcmVyL2Ryb3Bkb3duLWVkaXQtY2VsbFwiLCBcIi4vcmVuZGVyZXIvbnVtZXJpYy1lZGl0LWNlbGxcIiwgXCIuL3JlbmRlcmVyL2RhdGVwaWNrZXItZWRpdC1jZWxsXCIsIFwiLi9yZW5kZXJlci9jb21tYW5kLWNvbHVtbi1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvZnJlZXplLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVhZGVyX3JlbmRlcmVyXzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgcm93X3JlbmRlcmVyXzEsIGNlbGxfcmVuZGVyZXJfMSwgaGVhZGVyX2NlbGxfcmVuZGVyZXJfMSwgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSwgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEsIHJlbmRlcl8xLCBmaWx0ZXJfY2VsbF9yZW5kZXJlcl8yLCBpbmRlbnRfY2VsbF9yZW5kZXJlcl8xLCBjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMSwgYmF0Y2hfZWRpdF9yZW5kZXJlcl8xLCBkaWFsb2dfZWRpdF9yZW5kZXJlcl8xLCBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLCBlZGl0X3JlbmRlcmVyXzEsIGJvb2xlYW5fZWRpdF9jZWxsXzEsIGRlZmF1bHRfZWRpdF9jZWxsXzEsIGRyb3Bkb3duX2VkaXRfY2VsbF8xLCBudW1lcmljX2VkaXRfY2VsbF8xLCBkYXRlcGlja2VyX2VkaXRfY2VsbF8xLCBjb21tYW5kX2NvbHVtbl9yZW5kZXJlcl8xLCBmcmVlemVfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoaGVhZGVyX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGNvbnRlbnRfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQocm93X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGNlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoaGVhZGVyX2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KHJlbmRlcl8xKTtcbiAgICBfX2V4cG9ydChmaWx0ZXJfY2VsbF9yZW5kZXJlcl8yKTtcbiAgICBfX2V4cG9ydChpbmRlbnRfY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoYmF0Y2hfZWRpdF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChkaWFsb2dfZWRpdF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChpbmxpbmVfZWRpdF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChlZGl0X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGJvb2xlYW5fZWRpdF9jZWxsXzEpO1xuICAgIF9fZXhwb3J0KGRlZmF1bHRfZWRpdF9jZWxsXzEpO1xuICAgIF9fZXhwb3J0KGRyb3Bkb3duX2VkaXRfY2VsbF8xKTtcbiAgICBfX2V4cG9ydChudW1lcmljX2VkaXRfY2VsbF8xKTtcbiAgICBfX2V4cG9ydChkYXRlcGlja2VyX2VkaXRfY2VsbF8xKTtcbiAgICBfX2V4cG9ydChjb21tYW5kX2NvbHVtbl9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChmcmVlemVfcmVuZGVyZXJfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDExMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnlcIiwgXCIuL3NlcnZpY2VzL3NlcnZpY2UtbG9jYXRvclwiLCBcIi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4vc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yXCIsIFwiLi9zZXJ2aWNlcy9mcmVlemUtcm93LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGNlbGxfcmVuZGVyX2ZhY3RvcnlfMSwgc2VydmljZV9sb2NhdG9yXzEsIHJvd19tb2RlbF9nZW5lcmF0b3JfMSwgZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEsIGZyZWV6ZV9yb3dfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGNlbGxfcmVuZGVyX2ZhY3RvcnlfMSk7XG4gICAgX19leHBvcnQoc2VydmljZV9sb2NhdG9yXzEpO1xuICAgIF9fZXhwb3J0KHJvd19tb2RlbF9nZW5lcmF0b3JfMSk7XG4gICAgX19leHBvcnQoZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEpO1xuICAgIF9fZXhwb3J0KGZyZWV6ZV9yb3dfbW9kZWxfZ2VuZXJhdG9yXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9wYWdlclwiLCBcIi4vZXh0ZXJuYWwtbWVzc2FnZVwiLCBcIi4vbnVtZXJpYy1jb250YWluZXJcIiwgXCIuL3BhZ2VyLW1lc3NhZ2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBwYWdlcl8xLCBleHRlcm5hbF9tZXNzYWdlXzEsIG51bWVyaWNfY29udGFpbmVyXzEsIHBhZ2VyX21lc3NhZ2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQocGFnZXJfMSk7XG4gICAgX19leHBvcnQoZXh0ZXJuYWxfbWVzc2FnZV8xKTtcbiAgICBfX2V4cG9ydChudW1lcmljX2NvbnRhaW5lcl8xKTtcbiAgICBfX2V4cG9ydChwYWdlcl9tZXNzYWdlXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0="]}