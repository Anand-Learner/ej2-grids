/*!
*  filename: ej2-grids.umd.min.js.map
*  version : 1.0.21
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-grids.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_7__","__WEBPACK_EXTERNAL_MODULE_43__","__WEBPACK_EXTERNAL_MODULE_44__","__WEBPACK_EXTERNAL_MODULE_53__","__WEBPACK_EXTERNAL_MODULE_62__","__WEBPACK_EXTERNAL_MODULE_72__","__WEBPACK_EXTERNAL_MODULE_85__","__WEBPACK_EXTERNAL_MODULE_88__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","__export","hasOwnProperty","Object","defineProperty","value","apply","common_1","actions_1","models_1","renderer_1","services_1","grid_1","enum_1","util_1","constant_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","ej2_base_3","ej2_base_4","ej2_base_5","events","render_1","cell_render_factory_1","service_locator_1","value_formatter_1","renderer_factory_1","width_controller_1","aria_service_1","page_settings_1","selection_1","search_1","show_hide_1","scroll_1","print_1","aggregate_1","column_chooser_1","SortDescriptor","_super","ChildProperty","Property","SortSettings","Collection","Predicate","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","Grid","options","element","_this","isInitial","sortedColumns","inViewIndexes","mediaCol","isMediaQuery","isInitialLoad","filterOperators","contains","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Print","Pdfexport","Excelexport","Wordexport","Csvexport","Search","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDown","shiftUp","shiftRight","shiftLeft","home","end","escape","ctrlHome","ctrlEnd","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusA","ctrlPlusP","insert","delete","f2","enter","tab","shiftTab","getPersistData","keyEntity","addOnPersist","requiredModules","allowFiltering","push","member","args","filterSettings","serviceLocator","allowExcelExport","allowPdfExport","allowSorting","sortSettings","allowPaging","pageSettings","allowSelection","selectionSettings","allowReordering","allowRowDragAndDrop","allowGrouping","groupSettings","aggregates","isDetail","toolbar","toolbarTemplate","enableVirtualization","enableColumnVirtualization","editSettings","allowAdding","allowDeleting","allowEditing","preRender","ServiceLocator","initializeServices","render","ariaService","setOptions","role","renderModule","Render","getMediaColumns","searchModule","scrollModule","Scroll","showColumnChooser","columnChooserModule","ColumnChooser","notify","initialLoad","trigger","load","prepareColumns","columns","getColumns","processModel","gridRender","wireEvents","addListener","updateDefaultCursor","initialEnd","gcol","getShowHideService","getService","isNullOrUndefined","index","hideAtMedia","media","window","matchMedia","mediaQueryUpdate","bind","columnIndex","e","col","visible","matches","showHider","show","headerText","hide","refreshMediaCol","refresh","eventInitializer","destroy","unwireEvents","removeListener","destroyDependentModules","innerHTML","classList","keyboardModule","getModuleName","onPropertyChanged","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","requestType","isDestroyed","_i","_a","keys","prop","uiUpdate","enable","inBoundModelChanged","properties","currentPage","totalRecordsCount","localeObj","setLocale","locale","valueFormatterService","setCulture","width","height","rowTemplateFn","templateCompiler","rowTemplate","detailTemplateFn","detailTemplate","headerModule","refreshUI","showDropArea","updateColumnObject","extendedPropertyChange","modelChanged","updateRTL","querySelector","ej2_instances","enableRtl","dataBind","removePadding","setPadding","toolbarModule","getToolbar","updateGridLines","searchSettings","allowTextWrap","applyTextWrap","removeTextWrap","dataSourceModified","enableHover","addClass","removeClass","headerRows","slice","querySelectorAll","headerRows_1","row","remove","add","updateColumnModel","len","columnModel","inview","map","v","filter","vLen","getColumnIndexesInView","setColumnIndexesInView","indexes","getVisibleColumns","cols","getHeaderContent","getPanel","setGridHeaderContent","setPanel","getContentTable","contentModule","getTable","setGridContentTable","setTable","getContent","setGridContent","getHeaderTable","setGridHeaderTable","getFooterContent","footerElement","getElementsByClassName","getFooterContentTable","firstChild","getPager","gridPager","setGridPager","getRowByIndex","getRows","getRowElements","getDataRows","rows","children","dataRows","getCellFromIndex","rowIndex","getColumnHeaderByIndex","getRowObjectFromUID","uid","getColumnHeaderByField","field","getColumnHeaderByUid","getColumnByField","parentElement","iterateArrayOrObject","item","getColumnIndexByField","getColumnByUid","getColumnIndexByUid","getUidByColumnField","getNormalizedColumnIndex","getColumnFieldNames","column","columnNames","getRowTemplate","getDetailTemplate","getPrimaryKeyFieldNames","cLen","isPrimaryKey","refreshHeader","getSelectedRows","selectionModule","selectedRecords","getSelectedRowIndexes","selectedRowIndexes","getSelectedRowCellIndexes","selectedRowCellIndexes","getSelectedRecords","isSelected","data","getDataModule","showColumns","showBy","hideColumns","hideBy","goToPage","pageNo","pagerModule","updateExternalMessage","message","sortColumn","columnName","direction","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","fieldName","filterOperator","filterValue","predicate","matchCase","actualFilterValue","actualOperator","filterModule","clearFiltering","removeFilteredColsByField","isClearFilterBar","selectRow","selectRows","rowIndexes","clearSelection","selectCell","cellIndex","search","searchString","print","printModule","deleteRecord","fieldname","editModule","startEdit","endEdit","closeEdit","addRecord","deleteRow","tr","recalcIndentWidth","getAttribute","indentWidth","offsetWidth","headerCol","childNodes","contentCol","perPixel","style","columnWidthChanged","setAttribute","reorderColumns","fromFName","toFName","reorderModule","autoFitColumns","fieldNames","resizeModule","createColumnchooser","x","y","renderColumnChooser","register","widthService","ColumnWidthService","CellRendererFactory","RendererFactory","L10n","ValueFormatter","ShowHide","AriaService","flag","j","gCols","sCols","this_1","sLen","showGroupedColumn","parentDetails","parentKeyFieldValue","query","where","queryString","Browser","isDevice","rendererFactory","getRenderer","RenderType","Header","Content","createGridPopUpElement","setWidthToColumns","dataReady","setWidth","setHeight","popup","createElement","className","styles","content","attrs","tabIndex","append","appendChild","gridLines","textWrapSettings","wrapMode","wrap","EventHandler","mouseClickHandler","focusOutHandler","dblClickHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","on","contentReady","headerRefreshed","addEventListener","dataBound","off","removeEventListener","getCurrentViewRecords","currentViewData","records","isChildGrid","parentsUntil","touches","checkEdit","preventDefault","click","mode","isEdit","dblclick","display","filterClear","gridElement","childGrid","action","keyPressed","setInjectedModules","injectedModules","autoCol","refreshColumns","excelExport","exportProperties","isMultipleExport","workbook","excelExportModule","Map","csvExport","pdfExport","pdfDoc","pdfExportModule","Component","Complex","PageSettings","AggregateRow","Event","NotifyPropertyChanges","Inject","Selection","cultureName","intl","Internationalization","culture","getFormatFunction","format","type","getDateFormat","getNumberFormat","getParserFunction","getDateParser","getNumberParser","fromView","toView","result","ej2_data_1","column_1","doesImplementInterface","checkFor","valueAccessor","getValue","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","collection","pred","template","document","compile","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","extend","setStyleAttribute","attributes","copied","first","second","exclude","moved","forEach","indexOf","autoWidth","Column","setCssInGridPopUp","popUp","isBottomTail","popUpSpan","position","getBoundingClientRect","targetPosition","clientY","changedTouches","offsetHeight","top","left","getPopupLeftPosition","getPosition","right","getActualProperties","obj","elem","selector","isID","parent","getElementIndex","elements","isEqualNode","inArray","getActualPropFromColl","coll","removeElement","clientX","getUid","prefix","appendChildren","parents","calculateAggregate","context","customAggregate","DataUtil","getScrollBarWidth","scrollWidth","divNode","cssText","body","clientWidth","removeChild","getRowHeight","rowHeight","table","rect","Math","ceil","isEditable","isOldRow","isIdentity","isActionPrevent","inst","dlg","allowResizing","showInColumnChooser","merge","valueFormatter","skeleton","setFormatter","setParser","templateFn","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getDomSetter","disableHtmlEncode","created","destroyed","rowDataBound","queryCellInfo","actionBegin","actionComplete","actionFailure","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDragStart","columnDrag","columnDrop","rowDragStart","rowDrag","rowDrop","beforePrint","printComplete","detailDataBound","toolbarClick","batchAdd","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beginEdit","cellEdit","cellSave","endAdd","endDelete","recordDoubleClick","recordClick","beforeDataBound","beforeOpenColumnChooser","resizeStart","onResize","resizeStop","colGroupRefresh","pageBegin","pageComplete","sortBegin","sortComplete","filterBegin","filterComplete","searchBegin","searchComplete","reorderBegin","reorderComplete","rowDragAndDropBegin","rowDragAndDropComplete","groupBegin","groupComplete","ungroupBegin","ungroupComplete","rowSelectionBegin","rowSelectionComplete","columnSelectionBegin","columnSelectionComplete","cellSelectionBegin","cellSelectionComplete","columnVisibilityChanged","scroll","columnPositionChanged","rowDragAndDrop","rowsAdded","rowsRemoved","columnDragStop","headerDrop","refreshComplete","refreshVirtualBlock","toolbarRefresh","bulkSave","tooltipDestroy","updateData","editBegin","editComplete","addBegin","addComplete","saveComplete","deleteBegin","deleteComplete","preventBatch","dialogDestroy","crudAction","addDeleteAction","destroyForm","doubleTap","beforeExcelExport","excelExportComplete","excelQueryCellInfo","beforePdfExport","pdfExportComplete","pdfQueryCellInfo","data_1","content_renderer_1","header_renderer_1","cell_renderer_1","header_cell_renderer_1","stacked_cell_renderer_1","indent_cell_renderer_1","caption_cell_renderer_1","expand_cell_renderer_1","header_indent_renderer_1","detail_header_indent_renderer_1","detail_expand_cell_renderer_1","locator","Data","l10n","renderer","gObj","headerRenderer","contentRenderer","renderPanel","renderTable","emptyRow","refreshDataManager","cancel","ready","dataManager","setBusy","getData","generateQuery","requiresCount","disablePageWiseAggregates","then","validateGroupRecords","dataManagerSuccess","catch","dataManagerFailure","sendBulkRequest","promise","saveChanges","changes","dataSource","offline","dmSuccess","dmFailure","renderEmptyRow","isTrigger","tbody","getConstant","colspan","toString","renderEmpty","updateColumnType","record","items","fmtr","isColTypeDef","getDay","getHours","getMinutes","getSeconds","getMilliseconds","count","pageSize","updatesOnInitialRender","refreshContentRows","alert","setRowElements","toLowerCase","busy","invalid","error","buildColumns","instantiateRenderer","addRenderer","HeaderRender","ContentRender","cellrender","addCellRenderer","CellType","HeaderCellRenderer","CellRenderer","StackedHeader","StackedHeaderCellRenderer","Indent","IndentCellRenderer","GroupCaption","GroupCaptionCellRenderer","GroupCaptionEmpty","GroupCaptionEmptyCellRenderer","Expand","ExpandCellRenderer","HeaderIndent","HeaderIndentCellRenderer","DetailHeader","DetailHeaderIndentCellRenderer","DetailExpand","DetailExpandCellRenderer","Promise","resolve","group0","groupN","addWhere","input","group","and","getPredicate","or","Query","curDm","DataManager","curFilter","executeLocal","newQuery","rPredicate","isRemote","deferred","Deferred","updateGroupInfo","operator","Date","getDatePredicate","current","untouched","dm","array","uGroup","itemGroup","uGroupItem","GroupGuid","level","row_renderer_1","cell_1","row_1","helper","visualElement","sender","headercelldiv","textContent","lineHeight","dragStart","event","drag","closest","cloneElement","dragStop","drop","droppedElement","setVisible","div","innerDiv","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","headerPanel","panel","headerTable","getColGroup","colgroup","setColGroup","colGroup","tHead","createTable","bodyCell","cellspacing","findHeaderRow","createHeaderContent","thead","rowBody","len_1","cells","updateColGroup","colcount","colHeader","rowRenderer","RowRenderer","headerRow","colDepth","getObjDepth","generateRow","ensureColumns","getHeaderCells","len_2","generateCell","appendCells","isFirstObj","isFirstCol","isLastCol","lastCol","colSpan","getCellCnt","Cell","cellType","Row","rowSpan","colIndex","opt","isDataCell","isTemplate","headerTemplate","rowID","idx","displayVal","clen","insertBefore","appendContent","max","depth","checkDepth","cnt","Draggable","dragTarget","distance","abort","Droppable","accept","refreshRow","isChanged","cells_1","cell","cloneNode","rowArgs","cellArgs","attrCopy","isDataRow","buildAttributeFromRow","cellRendererFact","cellRenderer","getCellRenderer","td","cssClass","attr","rowindex","dataUID","ariaSelected","classes","isAltRow","class","initDataManager","addRows","removeRows","crudActions","skipPage","clone","columns_1","sType","sSettings","fields","ignoreCase","aggregate","sortGrp","sortBy","page","getKey","foreignKeyData","executeQuery","update","url","filterObject","prevDate","nextDate","prevObj","nextObj","setDate","getDate","predicateSt","predicateEnd","json","splice","toIndex","row_model_generator_1","group_model_generator_1","rafCallback","generator","getModelGenerator","contentDiv","createContentTable","multiselectable","initializeContentDrop","frag","createDocumentFragment","rowElements","modelData","generateRows","isTR","nodeName","contentPanel","contentTable","testRow","some","canSkip","GroupModelGenerator","RowModelGenerator","setSelection","set","clearAll","startIndex","indent","enableAltRow","concat","generateCells","dummies","tmp","dummy","rowId","oIndex","refreshRows","summary_model_generator_1","summaryModelGen","GroupSummaryModelGenerator","captionModelGen","CaptionSummaryModelGenerator","getGroupedRecords","raw","generateDataRows","generateCaptionRow","getCaptionRowCells","visibles","groupedLen","generateIndentCell","isEmpty","captionCells","wFlag","tmpFlag","unshift","cRow","SummaryModelGenerator","footerTemplate","groupFooterTemplate","groupCaptionTemplate","columnSelector","buildSummaryData","getGeneratedRow","summaryRow","indents","getIndentByLevel","indentLength","getGeneratedCell","getCellType","sColumn","scolumn","textAlign","summaryRows","single","setTemplate","types","disp","val","Summary","indx","GroupSummary","initVal","reduce","prev","cur","CaptionSummary","tabindex","localizer","formatter","getGui","evaluate","innerText","invokeFormatter","refreshCell","refreshTD","elements_1","innerHtml","isNull","displayAsCheckBox","localeStr","fromFormatter","appendHtml","setAttributes","property","buildAttributeFromCell","colindex","hTxtEle","sortEle","gui","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","sort","grabbed","handler","headerTextAlign","alignment","setStateAndProperties","attribute","removeAttribute","name","config","setExpand","expand","setSort","isBusy","setGrabbed","isGrabbed","setDropTarget","isTarget","dropeffect","selected","haspopup","toolTip","aria-expanded","cellRenderMap","getEnumValue","services","rendererMap","rName","setColumnWidth","cWidth","getWidth","setWidthToTable","header","fWidth","formatUnit","edit","getSiblingsHeight","getHeightFromDirection","sibling","parseInt","minWidth","maxWidth","getTableWidth","tWidth","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","initializeSelection","mouseDownHandler","onActionBegin","onActionComplete","hidePopUp","isEditing","selectedRow","selectData","isRowType","isRowSelected","hasAttribute","isToogle","prevRowIndex","isCtrlPressed","isShiftPressed","previousRow","previousRowIndex","clearRow","updateRowSelection","selectedRowIndex","updateRowProps","selectRowsByRange","endIndex","getCollectionFromIndexes","selectedData","isSingleSel","prevRow","rowIndexes_1","addRowsToSelection","rowIndexes_2","isUnSelected","rowDeselect","addRemoveClassesForRow","reverse","clearRowSelection","span","clearCellSelection","isCellType","selectedCell","currentIndex","isCellSelected","isUpdate","isUndefined","prevCIdxs","currentCell","previousRowCellIndex","prevECIdxs","previousRowCell","clearCell","updateCellSelection","updateCellProps","selectedRowCellIndex","selectCellsByRange","min","cellIndexes","stIndex","edIndex","temp","cellSelectionMode","addAttribute","selectCells","rowCellIndexes","cellLen","addRowCellIndex","addCellsToSelection","cellIndexes_1","selectedCellIdx","cellDeselect","focus","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","elementFromPoint","offsetLeft","ctrlKey","shiftKey","mouseUpHandler","postion","clearSelAfterRefresh","clickHandler","keyPressHandler","popUpClickHandler","rowCellSelectionHandler","showPopup","checkScroll","downArrowKey","upArrowKey","rightArrowKey","leftArrowKey","homeKey","endKey","ctrlHomeKey","ctrlEndKey","shiftDownKey","shiftUpKey","shiftRightKey","shiftLeftKey","scrollElem","firstElementChild","scrollTop","checkVisible","st","scrollY","innerHeight","applyDownUpKey","cond1","cond2","applyUpDown","cIndex","preSelectedCellIndex","applyRightLeftKey","key1","key2","cond","isCellHide","cellIndex_1","rowElement","applyHomeEndKey","applyShiftLeftRightKey","applyCtrlHomeEndKey","isAdd","instance","arg1","getToggleFields","getKeyBy","lastScrollTop","previousValues","oneTimeReady","refreshOverflow","ensureOverflow","getThreshold","cssProps","getCssProperties","border","padding","rtl","info","onContentScroll","scrollTarget","isHeader","scrollLeft","isFooter","scrollHeight","clientHeight","css","overflowY","isPrinting","printWindow","open","outerHeight","outerWidth","moveTo","resizeTo","screen","availWidth","availHeight","printMode","isPagerDisabled","removeColGroup","selectedRows","groupCaption","colGroups","AggregateColumn","getTemplate","ej2_buttons_1","ej2_popups_1","showColumn","hideColumn","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","unWireEvents","hideDialog","renderDlgContent","targetElement","dlgObj","columnChooserSearch","removeCancelIcon","addcancelIcon","args1","refreshCheckboxState","maxHeight","elementVisible","newpos","calculateRelativeBasedPosition","X","Y","refreshPosition","mOpenDlg","openColumnChooser","renderChooserList","dlgDiv","tarElement","Dialog","showCloseIcon","closeOnEscape","getElementById","buttons","confirmDlgBtnClick","buttonModel","isPrimary","clearActions","animationSettings","effect","appendTo","mainDiv","searchDiv","ccsearchele","placeholder","ccsearchicon","conDiv","innerDivContent","refreshCheckboxList","columnStateChange","params","dialogInstance","stateColumns","state","colUid","replace","currentCol","checkstatecolumn","targetEle","uncheckColumn","checked","searchVal","fltrCol","clearSearch","nMatchele","stopTimer","searchElement","columnChooserManualSearch","gdCol","ulElement","renderCheckbox","cclist","hideColState","showColState","checkBoxObj","cclabe","cccheckboxlist","CheckBox","label","change","searchValue","startTimer","proxy","interval","keyCode","timer","setInterval","clearInterval","sort_1","page_1","filter_1","resize_1","reorder_1","row_reorder_1","group_1","detail_row_1","toolbar_1","virtual_scroll_1","edit_1","batch_edit_1","inline_edit_1","normal_edit_1","dialog_edit_1","excel_export_1","pdf_export_1","export_helper_1","DetailRow","aria","toogleExpandcollapse","nextRow","isDetailRow","detailRow","detailCell","parentID","parentPrimaryKeys","parentKeyField","parentRowData","grid","getInjectedModules","injectedModues","gridElem","parentNode","nextSibling","detailElement","getTDfromIndex","isNaN","collapse","expandAll","expandCollapse","collapseAll","isExpand","dataRow","Sort","contentRefresh","isModelChanged","updateModel","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","lastSortedCol","isRemove","arg2","arg3","removeSortIcons","updateSortedCols","addSortIcons","refreshSortIcons","enableSortMultiTouch","showPopUp","filterElement","updateAriaAttr","pager_1","pager_dropdown_1","external_message_1","Pager","ExternalMessage","PagerDropDown","Page","pagerObj","dropDownChanged","onSelect","addAriaAttr","numericContainer","links","isForceCancel","prevPage","previousPage","canSkipAction","keyActions","el","activeElement","enableExternalMessage","externalMessage","appendToElement","enableAfterRender","handlers","complete","updateLayout","inboundChange","keyPress","numeric_container_1","pager_message_1","defaultConstants","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","containerModule","NumericContainer","pagerMessageModule","PagerMessage","checkpagesizes","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","refreshNumericLinks","checkGoToPage","currentPageChanged","showMessage","hideMessage","getLocalizedLabel","pageSizes","newPageNo","oldPageNo","previousPageNo","totalPages","enableQueryString","updateQueryString","updatedUrl","getUpdatedURL","location","href","history","pushState","path","uri","regx","RegExp","match","hash","title","pagerElement","renderNumericContainer","updateLinksHtml","updateStyles","link","pageCount","aria-label","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","PP","NP","next","last","currentPageSet","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","pageNoMsgElem","pageCountMsgElem","str","ej2_dropdowns_1","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","defaultValue","dropDownListObject","DropDownList","onChange","filter_cell_renderer_1","Filter","values","FilterCellRenderer","detail","updateFilterMsg","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","updateSpanClass","keyUpHandler","filterCell","arg4","arg5","arg6","arg7","checkForSkipInput","filterStatusMsg","checkAlreadyColFiltered","split","updateCrossIcon","processFilter","targetText","previousElementSibling","disabled","lastFilterElement","nextElementSibling","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","onTimerTick","immediateModeDelay","JSON","parse","stringify","validateFilterValue","getOperator","substring","charAt","singleOp","multipleOp","operators","=","!","filterCells","fromIndex","filterCells_1","filterBarTemplate","templateRead","read","templateWrite","write","resizeClassList","suppress","icon","cursor","lines","Resize","tapped","isDblClk","fName","findColumn","resizeColumn","indentWidthClone","headerTextClone","contentTextClone","contentText","wHeader","wContent","columnbyindex","tableWidth_1","tableWidth","text","tag","myTableDiv","mySubDiv","myTable","myTr","offsetWidthValue","setHandlerHeight","getResizeHandlers","ele","touchStartEvent","callAutoFit","getTargetColumn","appendHelper","pageX","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","detach","mousemove","colData","updateHelper","doubleTapEvent","pos","calcPos","floor","cls","parentOffset","offset","doc","ownerDocument","offsetParent","documentElement","nodeType","getUserAgent","clearTimeout","setTimeout","timeoutHandler","test","userAgent","Reorder","createReorderElement","chkDropPosition","srcElem","destElem","targetParentContainerIndex","chkDropAllCols","isFound","headers","pop","findColParent","getColumnsModel","subCols","oldIdx","newIndex","moveColumns","destIndex","getColParent","srcIdx","flatColumns","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","draggableType","cliRectBase","setScrollLeft","cliRect","RowDD","dropElem","rowDropSettings","targetID","isDragStop","getElementFromPosition","initializeDrag","getTargetIdx","targetRow","srcControl","targetIndex","skip","Group","groupColumn","dropArea","ungroupColumn","grpRow","expandCollapseRows","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","cellIdx","rowIdx","rowNodes","isHide","expandElem","toExpand","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","addColToGroupDrop","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","clearGrouping","ej2_navigations_1","Toolbar","predefinedItems","gridID","preItems","preItems_1","localeName","toUpperCase","prefixIcon","tooltipText","align","columnchooser","suffixIcon","createToolbar","unWireEvent","getItems","clicked","toolbarClickHandler","enablePersistence","wireEvent","refreshToolbarItems","updateSearchBox","enableItems","disableItems","toolbarItems","toolbarItems_1","getItemObject","getItem","itemObject","itemName","isEnable","items_1","gID","originalEvent","offsetTop","footer_renderer_1","summary_cell_renderer_1","summaryIterator","callback","Aggregate","initiateRender","cellFac","SummaryCellRenderer","footerRenderer","FooterRenderer","fn","prepareSummaryInfo","dataColumn","getFormatFromType","cModel","gridModule","modelGenerator","overflowX","tFoot","renderSummaryContent","summaries","fragment","rowrenderer","srow","onScroll","refreshCol","replaceChild","onWidthChange","updateFooterTableWidth","virtual_content_renderer_1","VirtualScroll","VirtualHeaderRenderer","VirtualContentRenderer","ensurePageSize","blockSize","size","setProperties","refreshVirtualElement","intersection_observer_1","virtual_row_model_generator_1","prevHeight","preventEvent","actions","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","isFocused","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","container","pageHeight","getBlockHeight","axes","observer","InterSectionObserver","adjustTable","scrollListener","scrollArgs","sentinel","viewInfo","getInfoFromView","prevInfo","axis","blockIndexes","columnIndexes","loadNext","loadSelf","nextInfo","virtualInfo","block","blk","isBlockAvailable","tempBlocks","infoType","sentinelInfo","getPageFromTop","getBlockIndexes","blocks","ensureBlocks","every","getColumnIndexes","mIdx","old","ind","isEndBlock","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","isIE","sTop","setVirtualHeight","setPageHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","iOffset","Number","getPage","cHeight","endTranslate","maxBlock","onEntered","xAxis","observe","getBlockSize","totalBlocks","cOffsets","VirtualRowModelGenerator","startIdx","bSize","cache","rem","refreshColOffsets","gen","xValue","yValue","transform","full","fromWheel","touchMove","up","check","containerRect","entered","down","bottom","onEnterCallback","virtualScrollHandler","prevTop","prevLeft","debounced100","debounce","debounced50","groups","model","rowModelGenerator","notifyArgs","loadedBlocks","checkAndResetCache","getStartIndex","median","updateGroupRow","even","sLeft","calWidth","offsetVal","clear","gLen","n","currentFirst","iterateGroup","oRow","res","shift","edit_renderer_1","boolean_edit_cell_1","dropdown_edit_cell_1","numeric_edit_cell_1","default_edit_cell_1","ej2_popups_2","ej2_inputs_1","editCellType","dropdownedit","DropDownEditCell","numericedit","NumericEditCell","booleanedit","BooleanEditCell","default","DefaultEditCell","editType","inline","InlineEdit","normal","batch","BatchEdit","dialog","DialogEdit","updateEditObj","updateColTypeObj","EditRender","createAlertDlg","createConfirmDlg","tapEvent","navigator","showDialog","alertDObj","refreshToolbar","showConfirmDialog","dialogObj","showDeleteConfirmDialog","endEditing","updateCell","updateRow","batchCancel","batchSave","editCell","editFormValidate","formObj","validate","getBatchChanges","getCurrentEditCellData","getCurrentEditedData","saveCell","getValueFromType","parseFloat","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","isModal","executeAction","form","editedData","inputs","setValue","destroyWidgets","cols_1","preventObj","applyFormValidation","rules","cols_2","validationRules","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","tooltip","Tooltip","opensOn","animation","close","inputName","tObj","status","isInline","NumericTextBox","rowData","enabled","floatLabelType","inline_edit_renderer_1","batch_edit_renderer_1","dialog_edit_renderer_1","InlineEditRender","BatchEditRender","DialogEditRender","addNew","getEditElements","convertWidget","focusElement","setSelectionRange","tArgs","isInput","tagName","getEditElement","td_1","columnObject","setLocaleObj","createDialog","primaryKeyValue","allowDragging","btnClick","dataCell","lbl","for","select","ddActionComplete","popupHeight","Input","createInput","NormalEdit","allowEditOnDblClick","editRowIndex","primaryKeys","primaryKeyValues","previousData","primaryKey","stopEditStatus","editHandler","edSucc","edFail","editSuccess","editFailure","rowObj","cellDetails","setCellIdx","validateFormObj","editNextCell","editPrevCell","editCellFromIndex","reFocusOnError","isAddRow","findNextEditableCell","findPrevEditableCell","isDirty","removeRowObjectFromUID","refreshRowIdx","bulkDelete","bulkAddRow","batchChanges","addedRecords","deletedRecords","changedRecords","rows_1","addRowObject","getIndexFromData","defaultData","getDefaultData","checkNPCell","dValues","number","string","boolean","date","datetime","getDataByIndex","getCellIdx","isForeignKey","foreignKeyValue","isColored","setChanges","keys_1","cIdx","isForceSave","previousValue","valComplete","ej2_excel_export_1","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","init","isExporting","footer","exportValueFormatter","ExportValueFormatter","theme","isCsv","processRecords","reject","adaptor","processInnerRecords","blankRows","multipleExport","worksheets","processExcelHeader","ExportHelper","getHeaders","groupIndent","childLevels","processHeaderContent","exportType","processRecordContent","returnType","currentViewRecords","processGroupedRows","processRecordRows","processAggregates","processExcelFooter","sheet","Workbook","save","dataSource_1","formatCellValue","getCaptionThemeStyle","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","_b","tCell","sCell","_c","_d","rLen","styleIndex","getColumnStyle","mergeOptions","rec","summaryModel","groupSummaryModel","groupSummaryRows","sRows","customIndex","cells_2","eCell","txt","wholeText","sum","average","truecount","falsecount","custom","JSON1","JSON2","attrname","returnValue","gridRows","gridColumns","spannedCells","currentCellIndex","gridCell","getIndex","spannedCell","getHeaderThemeStyle","hAlign","parseStyles","getRecordThemeStyle","fontColor","fontName","fontSize","borders","color","bold","backColor","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","numberFormat","hideColumnInclude","isHideColumnInclude","measureColumnDepth","actualColumns","processColumns","processHeaderCells","removeCellFromRow","generateActualColumns","getCellCount","resultCells","appendGridCells","isFirstColumn","isLastColumn","isIgnoreFirstCell","gridColumn","option","gridObj","internationalization","customFormat","ej2_pdf_1","ej2_pdf_2","ej2_pdf_3","ej2_pdf_4","ej2_pdf_5","ej2_pdf_6","PdfExport","customDataSource","gridTheme","isGrouping","pdfDocument","pdfExportProperties","PdfDocument","processExport","section","sections","processExportProperties","pdfPage","pages","pdfGrid","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","setBorder","draw","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfColor","PdfBorders","all","PdfPen","groupIndex","dataSourceItems","getCell","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","columnCount","getColumn","gridHeader","getHeader","stringFormat","getHorizontalAlignment","getVerticalAlignment","k","allowHorizontalOverflow","pageOrientation","pdfPageSettings","PdfPageSettings","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","clientSize","PointF","fromTop","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromBottom","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","hexToRgb","g","setContentFormat","graphics","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfPageCountField","PdfCompositeField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","sRows_1","leastCaptionSummaryIndex","getTemplateFunction","templateFunction","getSummaryWithoutTemplate","gridRow","setRecordThemeStyle","processCellStyle","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","fontFamily","italic","underline","strikeout","borderWidth","borderColor","PdfStringFormat","PdfTextAlignment","Right","Center","Justify","Left","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","getFontFamily","fontStyle","PdfFontStyle","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","filter_cell_renderer_2"],"mappings":"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ve,EAAKhD,UAAW,kBAAe,IAClCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,qBAAkB,IACrCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,oBAAiB,IACpCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,oBAAiB,IACpCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,mBAAgB,IACnCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,sBAAmB,IACtCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,qBAAkB,IACrCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,sBAAmB,IACtCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,iBAAc,IACjCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,iBAAc,IACjCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,oBAAiB,IACpCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,kBAAe,IAClCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,uBAAoB,IACvCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,yBAAsB,IACzCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,sBAAmB,IACtCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,mBAAgB,IACnCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,cAAW,IAC9BE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,cAAW,IAC9BE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,mBAAgB,IACnCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,8BAA2B,IAC9CE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,eAAY,IAC/BE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,kBAAe,IAClCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,qBAAkB,IACrCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,wBAAqB,IACxCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,sBAAmB,IACtCE,GACIc,EAAWugB,SACZve,EAAKhD,UAAW,gBAAa,IAChCE,GACIc,EA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","file":"ej2-grids.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-dropdowns\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-excel-export\"), require(\"@syncfusion/ej2-pdf\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-data\", \"@syncfusion/ej2-buttons\", \"@syncfusion/ej2-popups\", \"@syncfusion/ej2-dropdowns\", \"@syncfusion/ej2-navigations\", \"@syncfusion/ej2-inputs\", \"@syncfusion/ej2-excel-export\", \"@syncfusion/ej2-pdf\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-dropdowns\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-excel-export\"), require(\"@syncfusion/ej2-pdf\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-data\"], root[\"@syncfusion/ej2-buttons\"], root[\"@syncfusion/ej2-popups\"], root[\"@syncfusion/ej2-dropdowns\"], root[\"@syncfusion/ej2-navigations\"], root[\"@syncfusion/ej2-inputs\"], root[\"@syncfusion/ej2-excel-export\"], root[\"@syncfusion/ej2-pdf\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_43__, __WEBPACK_EXTERNAL_MODULE_44__, __WEBPACK_EXTERNAL_MODULE_53__, __WEBPACK_EXTERNAL_MODULE_62__, __WEBPACK_EXTERNAL_MODULE_72__, __WEBPACK_EXTERNAL_MODULE_85__, __WEBPACK_EXTERNAL_MODULE_88__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(92)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(45), __webpack_require__(89), __webpack_require__(90), __webpack_require__(91)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, common_1, actions_1, models_1, renderer_1, services_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(common_1);\n\t    __export(actions_1);\n\t    __export(models_1);\n\t    __export(renderer_1);\n\t    __export(services_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(13), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, grid_1, enum_1, util_1, constant_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(grid_1);\n\t    __export(enum_1);\n\t    __export(util_1);\n\t    __export(constant_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(10), __webpack_require__(13), __webpack_require__(31), __webpack_require__(32), __webpack_require__(4), __webpack_require__(33), __webpack_require__(34), __webpack_require__(23), __webpack_require__(35), __webpack_require__(36), __webpack_require__(37), __webpack_require__(38), __webpack_require__(39), __webpack_require__(40), __webpack_require__(41), __webpack_require__(42)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, util_1, events, render_1, enum_1, cell_render_factory_1, service_locator_1, value_formatter_1, renderer_factory_1, width_controller_1, aria_service_1, page_settings_1, selection_1, search_1, show_hide_1, scroll_1, print_1, aggregate_1, column_chooser_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SortDescriptor = (function (_super) {\n\t        __extends(SortDescriptor, _super);\n\t        function SortDescriptor() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SortDescriptor;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], SortDescriptor.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], SortDescriptor.prototype, \"direction\", void 0);\n\t    exports.SortDescriptor = SortDescriptor;\n\t    var SortSettings = (function (_super) {\n\t        __extends(SortSettings, _super);\n\t        function SortSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SortSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Collection([], SortDescriptor)\n\t    ], SortSettings.prototype, \"columns\", void 0);\n\t    exports.SortSettings = SortSettings;\n\t    var Predicate = (function (_super) {\n\t        __extends(Predicate, _super);\n\t        function Predicate() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Predicate;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"operator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"value\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"matchCase\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"predicate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({})\n\t    ], Predicate.prototype, \"actualFilterValue\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({})\n\t    ], Predicate.prototype, \"actualOperator\", void 0);\n\t    exports.Predicate = Predicate;\n\t    var FilterSettings = (function (_super) {\n\t        __extends(FilterSettings, _super);\n\t        function FilterSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return FilterSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Collection([], Predicate)\n\t    ], FilterSettings.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('filterbar')\n\t    ], FilterSettings.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], FilterSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1500)\n\t    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n\t    exports.FilterSettings = FilterSettings;\n\t    var SelectionSettings = (function (_super) {\n\t        __extends(SelectionSettings, _super);\n\t        function SelectionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SelectionSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property('row')\n\t    ], SelectionSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('flow')\n\t    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('single')\n\t    ], SelectionSettings.prototype, \"type\", void 0);\n\t    exports.SelectionSettings = SelectionSettings;\n\t    var SearchSettings = (function (_super) {\n\t        __extends(SearchSettings, _super);\n\t        function SearchSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SearchSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], SearchSettings.prototype, \"fields\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('')\n\t    ], SearchSettings.prototype, \"key\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('contains')\n\t    ], SearchSettings.prototype, \"operator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n\t    exports.SearchSettings = SearchSettings;\n\t    var RowDropSettings = (function (_super) {\n\t        __extends(RowDropSettings, _super);\n\t        function RowDropSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return RowDropSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], RowDropSettings.prototype, \"targetID\", void 0);\n\t    exports.RowDropSettings = RowDropSettings;\n\t    var TextWrapSettings = (function (_super) {\n\t        __extends(TextWrapSettings, _super);\n\t        function TextWrapSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TextWrapSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property('both')\n\t    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n\t    exports.TextWrapSettings = TextWrapSettings;\n\t    var GroupSettings = (function (_super) {\n\t        __extends(GroupSettings, _super);\n\t        function GroupSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return GroupSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], GroupSettings.prototype, \"showDropArea\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], GroupSettings.prototype, \"columns\", void 0);\n\t    exports.GroupSettings = GroupSettings;\n\t    var EditSettings = (function (_super) {\n\t        __extends(EditSettings, _super);\n\t        function EditSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return EditSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowAdding\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowEditing\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowDeleting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('normal')\n\t    ], EditSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n\t    exports.EditSettings = EditSettings;\n\t    var Grid = (function (_super) {\n\t        __extends(Grid, _super);\n\t        function Grid(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.isInitial = true;\n\t            _this.sortedColumns = [];\n\t            _this.inViewIndexes = [];\n\t            _this.mediaCol = [];\n\t            _this.isMediaQuery = false;\n\t            _this.isInitialLoad = false;\n\t            _this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            _this.defaultLocale = {\n\t                EmptyRecord: 'No records to display',\n\t                True: 'true',\n\t                False: 'false',\n\t                InvalidFilterMessage: 'Invalid Filter Data',\n\t                GroupDropArea: 'Drag a column header here to group its column',\n\t                UnGroup: 'Click here to ungroup',\n\t                GroupDisable: 'Grouping is disabled for this column',\n\t                FilterbarTitle: '\\'s filter bar cell',\n\t                EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n\t                Add: 'Add',\n\t                Edit: 'Edit',\n\t                Cancel: 'Cancel',\n\t                Update: 'Update',\n\t                Delete: 'Delete',\n\t                Print: 'Print',\n\t                Pdfexport: 'PDF Export',\n\t                Excelexport: 'Excel Export',\n\t                Wordexport: 'Word Export',\n\t                Csvexport: 'CSV Export',\n\t                Search: 'Search',\n\t                Item: 'item',\n\t                Items: 'items',\n\t                EditOperationAlert: 'No records selected for edit operation',\n\t                DeleteOperationAlert: 'No records selected for delete operation',\n\t                SaveButton: 'Save',\n\t                OKButton: 'OK',\n\t                CancelButton: 'Cancel',\n\t                EditFormTitle: 'Details of ',\n\t                AddFormTitle: 'Add New Record',\n\t                BatchSaveConfirm: 'Are you sure you want to save changes?',\n\t                BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n\t                ConfirmDelete: 'Are you sure you want to Delete Record?',\n\t                CancelEdit: 'Are you sure you want to Cancel the changes?',\n\t                ChooseColumns: 'Choose Column',\n\t                SearchColumns: 'search columns',\n\t                Matchs: 'No Matches Found'\n\t            };\n\t            _this.keyConfigs = {\n\t                downArrow: 'downarrow',\n\t                upArrow: 'uparrow',\n\t                rightArrow: 'rightarrow',\n\t                leftArrow: 'leftarrow',\n\t                shiftDown: 'shift+downarrow',\n\t                shiftUp: 'shift+uparrow',\n\t                shiftRight: 'shift+rightarrow',\n\t                shiftLeft: 'shift+leftarrow',\n\t                home: 'home',\n\t                end: 'end',\n\t                escape: 'escape',\n\t                ctrlHome: 'ctrl+home',\n\t                ctrlEnd: 'ctrl+end',\n\t                pageUp: 'pageup',\n\t                pageDown: 'pagedown',\n\t                ctrlAltPageUp: 'ctrl+alt+pageup',\n\t                ctrlAltPageDown: 'ctrl+alt+pagedown',\n\t                altPageUp: 'alt+pageup',\n\t                altPageDown: 'alt+pagedown',\n\t                altDownArrow: 'alt+downarrow',\n\t                altUpArrow: 'alt+uparrow',\n\t                ctrlDownArrow: 'ctrl+downarrow',\n\t                ctrlUpArrow: 'ctrl+uparrow',\n\t                ctrlPlusA: 'ctrl+A',\n\t                ctrlPlusP: 'ctrl+P',\n\t                insert: 'insert',\n\t                delete: 'delete',\n\t                f2: 'f2',\n\t                enter: 'enter',\n\t                tab: 'tab',\n\t                shiftTab: 'shift+tab'\n\t            };\n\t            return _this;\n\t        }\n\t        Grid.prototype.getPersistData = function () {\n\t            var keyEntity = ['allowPaging', 'pageSettings', 'allowSorting', 'sortSettings', 'allowSelection',\n\t                'selectionSettings', 'allowFiltering', 'filterSettings', 'gridLines',\n\t                'created', 'destroyed', 'load', 'actionBegin', 'actionComplete', 'actionFailure', 'rowSelecting', 'rowSelected',\n\t                'columnSelecting', 'columnSelected', 'cellSelecting', 'cellSelected', 'dataBound', 'groupSettings', 'columns', 'allowKeyboard',\n\t                'enableAltRow', 'enableHover', 'allowTextWrap', 'textWrapSettings', 'searchSettings', 'selectedRowIndex', 'allowReordering',\n\t                'allowRowDragAndDrop', 'rowDropSettings', 'allowGrouping', 'height', 'width', 'rowTemplate', 'printMode',\n\t                'rowDataBound', 'queryCellInfo', 'rowDeselecting', 'rowDeselected', 'cellDeselecting', 'cellDeselected',\n\t                'columnDragStart', 'columnDrag', 'columnDrop', 'printComplete', 'beforePrint', 'detailDataBound', 'detailTemplate',\n\t                'childGrid', 'queryString', 'toolbar', 'toolbarClick', 'editSettings',\n\t                'batchAdd', 'batchDelete', 'beforeBatchAdd', 'beforeBatchDelete',\n\t                'beforeBatchSave', 'beginEdit', 'cellEdit', 'cellSave', 'endAdd', 'endDelete', 'endEdit', 'beforeDataBound',\n\t                'beforeOpenColumnChooser', 'allowResizing', 'ExcelExport', 'PdfExport',\n\t                'allowExcelExport', 'allowPdfExport',\n\t                'pdfQueryCellInfo', 'excelQueryCellInfo'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Grid.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.allowFiltering) {\n\t                modules.push({\n\t                    member: 'filter',\n\t                    args: [this, this.filterSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.allowExcelExport) {\n\t                modules.push({\n\t                    member: 'ExcelExport',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowPdfExport) {\n\t                modules.push({\n\t                    member: 'PdfExport',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowSorting) {\n\t                modules.push({\n\t                    member: 'sort',\n\t                    args: [this, this.sortSettings, this.sortedColumns]\n\t                });\n\t            }\n\t            if (this.allowPaging) {\n\t                modules.push({\n\t                    member: 'pager',\n\t                    args: [this, this.pageSettings]\n\t                });\n\t            }\n\t            if (this.allowSelection) {\n\t                modules.push({\n\t                    member: 'selection',\n\t                    args: [this, this.selectionSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            modules.push({\n\t                member: 'resize',\n\t                args: [this]\n\t            });\n\t            if (this.allowReordering) {\n\t                modules.push({\n\t                    member: 'reorder',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowRowDragAndDrop) {\n\t                modules.push({\n\t                    member: 'rowDragAndDrop',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowGrouping) {\n\t                modules.push({\n\t                    member: 'group',\n\t                    args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.aggregates.length) {\n\t                modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n\t            }\n\t            if (this.isDetail()) {\n\t                modules.push({\n\t                    member: 'detailRow',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.toolbar || this.toolbarTemplate) {\n\t                modules.push({\n\t                    member: 'toolbar',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.enableVirtualization || this.enableColumnVirtualization) {\n\t                modules.push({\n\t                    member: 'virtualscroll',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n\t                modules.push({\n\t                    member: 'edit',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Grid.prototype.preRender = function () {\n\t            this.serviceLocator = new service_locator_1.ServiceLocator;\n\t            this.initializeServices();\n\t        };\n\t        Grid.prototype.render = function () {\n\t            this.ariaService.setOptions(this.element, { role: 'grid' });\n\t            this.renderModule = new render_1.Render(this, this.serviceLocator);\n\t            this.getMediaColumns();\n\t            this.searchModule = new search_1.Search(this);\n\t            this.scrollModule = new scroll_1.Scroll(this);\n\t            if (this.showColumnChooser) {\n\t                this.columnChooserModule = new column_chooser_1.ColumnChooser(this, this.serviceLocator);\n\t            }\n\t            this.notify(events.initialLoad, {});\n\t            this.trigger(events.load);\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            this.getColumns();\n\t            this.processModel();\n\t            this.gridRender();\n\t            this.wireEvents();\n\t            this.addListener();\n\t            this.updateDefaultCursor();\n\t            this.notify(events.initialEnd, {});\n\t        };\n\t        Grid.prototype.getMediaColumns = function () {\n\t            if (!this.enableColumnVirtualization) {\n\t                var gcol = this.getColumns();\n\t                this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t                if (!ej2_base_2.isNullOrUndefined(gcol)) {\n\t                    for (var index = 0; index < gcol.length; index++) {\n\t                        if (!ej2_base_2.isNullOrUndefined(gcol[index].hideAtMedia)) {\n\t                            this.mediaCol.push(gcol[index]);\n\t                            var media = window.matchMedia(gcol[index].hideAtMedia);\n\t                            this.mediaQueryUpdate(index, media);\n\t                            media.addListener(this.mediaQueryUpdate.bind(this, index));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n\t            this.isMediaQuery = true;\n\t            var col = this.getColumns()[columnIndex];\n\t            col.visible = e.matches;\n\t            if (this.isInitialLoad) {\n\t                if (col.visible) {\n\t                    this.showHider.show(col.headerText, 'headerText');\n\t                }\n\t                else {\n\t                    this.showHider.hide(col.headerText, 'headerText');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.refreshMediaCol = function () {\n\t            if (this.isMediaQuery) {\n\t                this.refresh();\n\t                this.isMediaQuery = false;\n\t            }\n\t            this.isInitialLoad = true;\n\t        };\n\t        Grid.prototype.eventInitializer = function () {\n\t        };\n\t        Grid.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t            this.removeListener();\n\t            this.notify(events.destroy, {});\n\t            this.destroyDependentModules();\n\t            _super.prototype.destroy.call(this);\n\t            this.element.innerHTML = '';\n\t            ej2_base_3.classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device']);\n\t        };\n\t        Grid.prototype.destroyDependentModules = function () {\n\t            this.scrollModule.destroy();\n\t            this.keyboardModule.destroy();\n\t        };\n\t        Grid.prototype.getModuleName = function () {\n\t            return 'grid';\n\t        };\n\t        Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var requireRefresh = false;\n\t            var requireGridRefresh = false;\n\t            var checkCursor;\n\t            var args = { requestType: 'refresh' };\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowPaging':\n\t                        this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'pageSettings':\n\t                        this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n\t                        if (ej2_base_2.isNullOrUndefined(newProp.pageSettings.currentPage) && ej2_base_2.isNullOrUndefined(newProp.pageSettings.totalRecordsCount)) {\n\t                            requireRefresh = true;\n\t                        }\n\t                        break;\n\t                    case 'locale':\n\t                        this.localeObj.setLocale(newProp.locale);\n\t                        this.valueFormatterService.setCulture(newProp.locale);\n\t                        requireRefresh = true;\n\t                        if (this.toolbar) {\n\t                            this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        }\n\t                        break;\n\t                    case 'allowSorting':\n\t                        this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowFiltering':\n\t                        this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'height':\n\t                    case 'width':\n\t                        this.notify(events.uiUpdate, {\n\t                            module: 'scroll',\n\t                            properties: { width: newProp.width, height: newProp.height }\n\t                        });\n\t                        break;\n\t                    case 'allowReordering':\n\t                        this.notify(events.uiUpdate, { module: 'reorder', enable: this.allowReordering });\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowRowDragAndDrop':\n\t                        this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n\t                        break;\n\t                    case 'rowTemplate':\n\t                        this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'detailTemplate':\n\t                        this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'allowGrouping':\n\t                        this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n\t                        this.headerModule.refreshUI();\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'childGrid':\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'toolbar':\n\t                        this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        break;\n\t                    case 'groupSettings':\n\t                        if (!(ej2_base_2.isNullOrUndefined(newProp.groupSettings.showDropArea))) {\n\t                            this.headerModule.refreshUI();\n\t                            requireRefresh = true;\n\t                            checkCursor = true;\n\t                        }\n\t                        this.notify(events.inBoundModelChanged, { module: 'group', properties: newProp.groupSettings });\n\t                        break;\n\t                    case 'aggregates':\n\t                        this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n\t                        break;\n\t                    case 'columns':\n\t                        this.updateColumnObject();\n\t                        requireGridRefresh = true;\n\t                        break;\n\t                    default:\n\t                        this.extendedPropertyChange(prop, newProp);\n\t                }\n\t            }\n\t            if (checkCursor) {\n\t                this.updateDefaultCursor();\n\t            }\n\t            if (requireGridRefresh) {\n\t                this.refresh();\n\t            }\n\t            else if (requireRefresh) {\n\t                this.notify(events.modelChanged, args);\n\t                requireRefresh = false;\n\t            }\n\t        };\n\t        Grid.prototype.extendedPropertyChange = function (prop, newProp) {\n\t            switch (prop) {\n\t                case 'enableRtl':\n\t                    this.updateRTL();\n\t                    if (this.allowPaging) {\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.height !== 'auto') {\n\t                        this.scrollModule.removePadding(!newProp.enableRtl);\n\t                        this.scrollModule.setPadding();\n\t                    }\n\t                    if (this.toolbar) {\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n\t                    }\n\t                    break;\n\t                case 'enableAltRow':\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'allowResizing':\n\t                    this.headerModule.refreshUI();\n\t                    break;\n\t                case 'gridLines':\n\t                    this.updateGridLines();\n\t                    break;\n\t                case 'filterSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n\t                    break;\n\t                case 'searchSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n\t                    break;\n\t                case 'sortSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'sort' });\n\t                    break;\n\t                case 'selectionSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n\t                    break;\n\t                case 'editSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n\t                    break;\n\t                case 'allowTextWrap':\n\t                case 'textWrapSettings':\n\t                    if (this.allowTextWrap) {\n\t                        this.applyTextWrap();\n\t                    }\n\t                    else {\n\t                        this.removeTextWrap();\n\t                    }\n\t                    break;\n\t                case 'dataSource':\n\t                    this.notify(events.dataSourceModified, {});\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'enableHover':\n\t                    var action = newProp.enableHover ? ej2_base_3.addClass : ej2_base_3.removeClass;\n\t                    action([this.element], 'e-gridhover');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.updateDefaultCursor = function () {\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                if (this.allowSorting || this.allowGrouping || this.allowReordering) {\n\t                    row.classList.remove('e-defaultcursor');\n\t                }\n\t                else {\n\t                    row.classList.add('e-defaultcursor');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.updateColumnModel = function (columns) {\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                if (columns[i].columns) {\n\t                    this.updateColumnModel(columns[i].columns);\n\t                }\n\t                else {\n\t                    this.columnModel.push(columns[i]);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.getColumns = function () {\n\t            var _this = this;\n\t            var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n\t            var vLen = inview.length;\n\t            if (!this.enableColumnVirtualization || ej2_base_2.isNullOrUndefined(this.columnModel) || this.columnModel.length === 0) {\n\t                this.columnModel = [];\n\t                this.updateColumnModel(this.columns);\n\t            }\n\t            var columns = vLen === 0 ? this.columnModel :\n\t                this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n\t            return columns;\n\t        };\n\t        Grid.prototype.getColumnIndexesInView = function () {\n\t            return this.inViewIndexes;\n\t        };\n\t        Grid.prototype.setColumnIndexesInView = function (indexes) {\n\t            this.inViewIndexes = indexes;\n\t        };\n\t        Grid.prototype.getVisibleColumns = function () {\n\t            var cols = [];\n\t            for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.visible) {\n\t                    cols.push(col);\n\t                }\n\t            }\n\t            return cols;\n\t        };\n\t        Grid.prototype.getHeaderContent = function () {\n\t            return this.headerModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridHeaderContent = function (element) {\n\t            this.headerModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getContentTable = function () {\n\t            return this.contentModule.getTable();\n\t        };\n\t        Grid.prototype.setGridContentTable = function (element) {\n\t            this.contentModule.setTable(element);\n\t        };\n\t        Grid.prototype.getContent = function () {\n\t            return this.contentModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridContent = function (element) {\n\t            this.contentModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getHeaderTable = function () {\n\t            return this.headerModule.getTable();\n\t        };\n\t        Grid.prototype.setGridHeaderTable = function (element) {\n\t            this.headerModule.setTable(element);\n\t        };\n\t        Grid.prototype.getFooterContent = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement;\n\t        };\n\t        Grid.prototype.getFooterContentTable = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement.firstChild.firstChild;\n\t        };\n\t        Grid.prototype.getPager = function () {\n\t            return this.gridPager;\n\t        };\n\t        Grid.prototype.setGridPager = function (element) {\n\t            this.gridPager = element;\n\t        };\n\t        Grid.prototype.getRowByIndex = function (index) {\n\t            return this.contentModule.getRowByIndex(index);\n\t        };\n\t        Grid.prototype.getRows = function () {\n\t            return this.contentModule.getRowElements();\n\t        };\n\t        Grid.prototype.getDataRows = function () {\n\t            var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    dataRows.push(rows[i]);\n\t                }\n\t            }\n\t            return dataRows;\n\t        };\n\t        Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n\t            return this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n\t        };\n\t        Grid.prototype.getColumnHeaderByIndex = function (index) {\n\t            return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n\t        };\n\t        Grid.prototype.getRowObjectFromUID = function (uid) {\n\t            for (var _i = 0, _a = this.contentModule.getRows(); _i < _a.length; _i++) {\n\t                var row = _a[_i];\n\t                if (row.uid === uid) {\n\t                    return row;\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        Grid.prototype.getColumnHeaderByField = function (field) {\n\t            return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n\t        };\n\t        Grid.prototype.getColumnHeaderByUid = function (uid) {\n\t            return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n\t        };\n\t        Grid.prototype.getColumnByField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByField = function (field) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getColumnByUid = function (uid) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByUid = function (uid) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getUidByColumnField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item.uid;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getNormalizedColumnIndex = function (uid) {\n\t            var index = this.getColumnIndexByUid(uid);\n\t            if (this.allowGrouping) {\n\t                index += this.groupSettings.columns.length;\n\t            }\n\t            if (this.isDetail()) {\n\t                index++;\n\t            }\n\t            return index;\n\t        };\n\t        Grid.prototype.getColumnFieldNames = function () {\n\t            var columnNames = [];\n\t            var column;\n\t            for (var i = 0, len = this.getColumns().length; i < len; i++) {\n\t                column = this.getColumns()[i];\n\t                if (column.visible) {\n\t                    columnNames.push(column.field);\n\t                }\n\t            }\n\t            return columnNames;\n\t        };\n\t        Grid.prototype.getRowTemplate = function () {\n\t            return this.rowTemplateFn;\n\t        };\n\t        Grid.prototype.getDetailTemplate = function () {\n\t            return this.detailTemplateFn;\n\t        };\n\t        Grid.prototype.getPrimaryKeyFieldNames = function () {\n\t            var keys = [];\n\t            for (var key = 0, col = this.columns, cLen = col.length; key < cLen; key++) {\n\t                if (col[key].isPrimaryKey) {\n\t                    keys.push(col[key].field);\n\t                }\n\t            }\n\t            return keys;\n\t        };\n\t        Grid.prototype.refresh = function () {\n\t            this.headerModule.refreshUI();\n\t            this.renderModule.refresh();\n\t        };\n\t        Grid.prototype.refreshHeader = function () {\n\t            this.headerModule.refreshUI();\n\t        };\n\t        Grid.prototype.getSelectedRows = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRecords : [];\n\t        };\n\t        Grid.prototype.getSelectedRowIndexes = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n\t        };\n\t        Grid.prototype.getSelectedRowCellIndexes = function () {\n\t            return this.selectionModule.selectedRowCellIndexes;\n\t        };\n\t        Grid.prototype.getSelectedRecords = function () {\n\t            return this.contentModule.getRows().filter(function (row) { return row.isSelected; })\n\t                .map(function (m) { return m.data; });\n\t        };\n\t        Grid.prototype.getDataModule = function () {\n\t            return this.renderModule.data;\n\t        };\n\t        Grid.prototype.showColumns = function (keys, showBy) {\n\t            showBy = showBy ? showBy : 'headerText';\n\t            this.showHider.show(keys, showBy);\n\t        };\n\t        Grid.prototype.hideColumns = function (keys, hideBy) {\n\t            hideBy = hideBy ? hideBy : 'headerText';\n\t            this.showHider.hide(keys, hideBy);\n\t        };\n\t        Grid.prototype.goToPage = function (pageNo) {\n\t            this.pagerModule.goToPage(pageNo);\n\t        };\n\t        Grid.prototype.updateExternalMessage = function (message) {\n\t            this.pagerModule.updateExternalMessage(message);\n\t        };\n\t        Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            this.sortModule.sortColumn(columnName, direction, isMultiSort);\n\t        };\n\t        Grid.prototype.clearSorting = function () {\n\t            this.sortModule.clearSorting();\n\t        };\n\t        Grid.prototype.removeSortColumn = function (field) {\n\t            this.sortModule.removeSortColumn(field);\n\t        };\n\t        Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator);\n\t        };\n\t        Grid.prototype.clearFiltering = function () {\n\t            this.filterModule.clearFiltering();\n\t        };\n\t        Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n\t        };\n\t        Grid.prototype.selectRow = function (index) {\n\t            this.selectionModule.selectRow(index);\n\t        };\n\t        Grid.prototype.selectRows = function (rowIndexes) {\n\t            this.selectionModule.selectRows(rowIndexes);\n\t        };\n\t        Grid.prototype.clearSelection = function () {\n\t            this.selectionModule.clearSelection();\n\t        };\n\t        Grid.prototype.selectCell = function (cellIndex) {\n\t            this.selectionModule.selectCell(cellIndex);\n\t        };\n\t        Grid.prototype.search = function (searchString) {\n\t            this.searchModule.search(searchString);\n\t        };\n\t        Grid.prototype.print = function () {\n\t            this.printModule.print();\n\t        };\n\t        Grid.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Grid.prototype.startEdit = function () {\n\t            this.editModule.startEdit();\n\t        };\n\t        Grid.prototype.endEdit = function () {\n\t            this.editModule.endEdit();\n\t        };\n\t        Grid.prototype.closeEdit = function () {\n\t            this.editModule.closeEdit();\n\t        };\n\t        Grid.prototype.addRecord = function (data) {\n\t            this.editModule.addRecord(data);\n\t        };\n\t        Grid.prototype.deleteRow = function (tr) {\n\t            this.editModule.deleteRow(tr);\n\t        };\n\t        Grid.prototype.recalcIndentWidth = function () {\n\t            if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n\t                return;\n\t            }\n\t            if ((!this.groupSettings.columns.length && !this.isDetail()) ||\n\t                this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n\t                !this.getContentTable()) {\n\t                return;\n\t            }\n\t            var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n\t            var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n\t            var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n\t            var perPixel = indentWidth / 30;\n\t            var i = 0;\n\t            if (perPixel >= 1) {\n\t                indentWidth = (30 / perPixel);\n\t            }\n\t            if (this.enableColumnVirtualization) {\n\t                indentWidth = 30;\n\t            }\n\t            while (i < this.groupSettings.columns.length) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t                i++;\n\t            }\n\t            if (this.isDetail()) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t            }\n\t            this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n\t        };\n\t        Grid.prototype.reorderColumns = function (fromFName, toFName) {\n\t            this.reorderModule.reorderColumns(fromFName, toFName);\n\t        };\n\t        Grid.prototype.autoFitColumns = function (fieldNames) {\n\t            this.resizeModule.autoFitColumns(fieldNames);\n\t        };\n\t        Grid.prototype.createColumnchooser = function (x, y, target) {\n\t            this.columnChooserModule.renderColumnChooser(x, y, target);\n\t        };\n\t        Grid.prototype.initializeServices = function () {\n\t            this.serviceLocator.register('widthService', this.widthService = new width_controller_1.ColumnWidthService(this));\n\t            this.serviceLocator.register('cellRendererFactory', new cell_render_factory_1.CellRendererFactory);\n\t            this.serviceLocator.register('rendererFactory', new renderer_factory_1.RendererFactory);\n\t            this.serviceLocator.register('localization', this.localeObj = new ej2_base_4.L10n(this.getModuleName(), this.defaultLocale, this.locale));\n\t            this.serviceLocator.register('valueFormatter', this.valueFormatterService = new value_formatter_1.ValueFormatter(this.locale));\n\t            this.serviceLocator.register('showHideService', this.showHider = new show_hide_1.ShowHide(this));\n\t            this.serviceLocator.register('ariaService', this.ariaService = new aria_service_1.AriaService());\n\t        };\n\t        Grid.prototype.processModel = function () {\n\t            var gCols = this.groupSettings.columns;\n\t            var sCols = this.sortSettings.columns;\n\t            var flag;\n\t            var j;\n\t            if (this.allowGrouping) {\n\t                var _loop_1 = function (i, len) {\n\t                    j = 0;\n\t                    for (var sLen = sCols.length; j < sLen; j++) {\n\t                        if (sCols[j].field === gCols[i]) {\n\t                            flag = true;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sCols.push({ field: gCols[i], direction: 'ascending' });\n\t                    }\n\t                    else {\n\t                        if (this_1.allowSorting) {\n\t                            this_1.sortedColumns.push(sCols[j].field);\n\t                        }\n\t                        else {\n\t                            sCols[j].direction = 'ascending';\n\t                        }\n\t                    }\n\t                    if (!this_1.groupSettings.showGroupedColumn) {\n\t                        var column = this_1.enableColumnVirtualization ?\n\t                            this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n\t                        column.visible = false;\n\t                    }\n\t                };\n\t                var this_1 = this;\n\t                for (var i = 0, len = gCols.length; i < len; i++) {\n\t                    _loop_1(i, len);\n\t                }\n\t            }\n\t            this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t            this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t            if (!ej2_base_2.isNullOrUndefined(this.parentDetails)) {\n\t                var value = ej2_base_2.isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n\t                    this.parentDetails.parentKeyFieldValue;\n\t                this.query.where(this.queryString, 'equal', value, true);\n\t            }\n\t        };\n\t        Grid.prototype.gridRender = function () {\n\t            this.updateRTL();\n\t            if (this.enableHover) {\n\t                this.element.classList.add('e-gridhover');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                this.element.classList.add('e-device');\n\t            }\n\t            ej2_base_3.classList(this.element, ['e-responsive', 'e-default'], []);\n\t            var rendererFactory = this.serviceLocator.getService('rendererFactory');\n\t            this.headerModule = rendererFactory.getRenderer(enum_1.RenderType.Header);\n\t            this.contentModule = rendererFactory.getRenderer(enum_1.RenderType.Content);\n\t            this.printModule = new print_1.Print(this, this.scrollModule);\n\t            this.renderModule.render();\n\t            this.eventInitializer();\n\t            this.createGridPopUpElement();\n\t            this.widthService.setWidthToColumns();\n\t            this.updateGridLines();\n\t            this.applyTextWrap();\n\t        };\n\t        Grid.prototype.dataReady = function () {\n\t            this.scrollModule.setWidth();\n\t            this.scrollModule.setHeight();\n\t            if (this.height !== 'auto') {\n\t                this.scrollModule.setPadding();\n\t            }\n\t        };\n\t        Grid.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Grid.prototype.createGridPopUpElement = function () {\n\t            var popup = ej2_base_3.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n\t            var content = ej2_base_3.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-uptail e-tail' })], popup);\n\t            content.appendChild(ej2_base_3.createElement('span'));\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-downtail e-tail' })], popup);\n\t            this.element.appendChild(popup);\n\t        };\n\t        Grid.prototype.updateGridLines = function () {\n\t            ej2_base_3.classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n\t            switch (this.gridLines) {\n\t                case 'horizontal':\n\t                    this.element.classList.add('e-horizontallines');\n\t                    break;\n\t                case 'vertical':\n\t                    this.element.classList.add('e-verticallines');\n\t                    break;\n\t                case 'none':\n\t                    this.element.classList.add('e-hidelines');\n\t                    break;\n\t                case 'both':\n\t                    this.element.classList.add('e-bothlines');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.applyTextWrap = function () {\n\t            if (this.allowTextWrap) {\n\t                var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t                switch (this.textWrapSettings.wrapMode) {\n\t                    case 'header':\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, true);\n\t                        break;\n\t                    case 'content':\n\t                        util_1.wrap(this.getContent(), true);\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(headerRows, false);\n\t                        break;\n\t                    default:\n\t                        util_1.wrap(this.element, true);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, false);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.removeTextWrap = function () {\n\t            util_1.wrap(this.element, false);\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            util_1.wrap(headerRows, false);\n\t            util_1.wrap(this.getContent(), false);\n\t        };\n\t        Grid.prototype.wireEvents = function () {\n\t            ej2_base_5.EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n\t            ej2_base_5.EventHandler.add(this.getContent(), 'dblclick', this.dblClickHandler, this);\n\t            if (this.allowKeyboard) {\n\t                this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n\t            }\n\t            this.keyboardModule = new ej2_base_5.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs,\n\t                eventName: 'keydown'\n\t            });\n\t        };\n\t        Grid.prototype.unwireEvents = function () {\n\t            ej2_base_5.EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n\t        };\n\t        Grid.prototype.addListener = function () {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.on(events.dataReady, this.dataReady, this);\n\t            this.on(events.contentReady, this.recalcIndentWidth, this);\n\t            this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n\t            this.addEventListener(events.dataBound, this.refreshMediaCol.bind(this));\n\t        };\n\t        Grid.prototype.removeListener = function () {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.off(events.dataReady, this.dataReady);\n\t            this.off(events.contentReady, this.recalcIndentWidth);\n\t            this.off(events.headerRefreshed, this.recalcIndentWidth);\n\t            this.removeEventListener(events.dataBound, this.refreshMediaCol);\n\t        };\n\t        Grid.prototype.getCurrentViewRecords = function () {\n\t            return (this.allowGrouping && this.groupSettings.columns.length) ?\n\t                this.currentViewData.records : this.currentViewData;\n\t        };\n\t        Grid.prototype.mouseClickHandler = function (e) {\n\t            if (this.isChildGrid(e) || (util_1.parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n\t                this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n\t                return;\n\t            }\n\t            if (((!this.allowRowDragAndDrop && util_1.parentsUntil(e.target, 'e-gridcontent')) ||\n\t                (!(this.allowGrouping || this.allowReordering) && util_1.parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n\t                return;\n\t            }\n\t            if (util_1.parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n\t                e.preventDefault();\n\t            }\n\t            this.notify(events.click, e);\n\t        };\n\t        Grid.prototype.checkEdit = function (e) {\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            var isEdit = this.editSettings.mode !== 'batch' &&\n\t                this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n\t            return isEdit || (util_1.parentsUntil(e.target, 'e-rowcell') &&\n\t                util_1.parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell'));\n\t        };\n\t        Grid.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-grid').id !== this.element.id) {\n\t                return;\n\t            }\n\t            this.notify(events.dblclick, e);\n\t        };\n\t        Grid.prototype.focusOutHandler = function (e) {\n\t            if (this.isChildGrid(e)) {\n\t                return;\n\t            }\n\t            if (!util_1.parentsUntil(e.target, 'e-grid')) {\n\t                this.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n\t            if (filterClear) {\n\t                filterClear.classList.add('e-hide');\n\t            }\n\t        };\n\t        Grid.prototype.isChildGrid = function (e) {\n\t            var gridElement = util_1.parentsUntil(e.target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.element.id) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Grid.prototype.isDetail = function () {\n\t            return !ej2_base_2.isNullOrUndefined(this.detailTemplate) || !ej2_base_2.isNullOrUndefined(this.childGrid);\n\t        };\n\t        Grid.prototype.keyActionHandler = function (e) {\n\t            if (this.isChildGrid(e) ||\n\t                (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'tab' && e.action !== 'shiftTab')) {\n\t                return;\n\t            }\n\t            if (this.allowKeyboard) {\n\t                if (e.action === 'ctrlPlusP') {\n\t                    e.preventDefault();\n\t                    this.print();\n\t                }\n\t                this.notify(events.keyPressed, e);\n\t            }\n\t        };\n\t        Grid.prototype.setInjectedModules = function (modules) {\n\t            this.injectedModules = modules;\n\t        };\n\t        Grid.prototype.updateColumnObject = function () {\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            if (this.editSettings.allowEditing || this.editSettings.allowAdding || this.editSettings.allowDeleting) {\n\t                this.notify(events.autoCol, {});\n\t            }\n\t        };\n\t        Grid.prototype.refreshColumns = function () {\n\t            this.updateColumnObject();\n\t            this.refresh();\n\t        };\n\t        Grid.prototype.excelExport = function (exportProperties, isMultipleExport, workbook) {\n\t            return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, false);\n\t        };\n\t        Grid.prototype.csvExport = function (exportProperties, isMultipleExport, workbook) {\n\t            return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, true);\n\t        };\n\t        Grid.prototype.pdfExport = function (exportProperties, isMultipleExport, pdfDoc) {\n\t            return this.pdfExportModule.Map(this, exportProperties, isMultipleExport, pdfDoc);\n\t        };\n\t        return Grid;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], Grid.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"enableAltRow\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"enableHover\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowKeyboard\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowTextWrap\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, TextWrapSettings)\n\t    ], Grid.prototype, \"textWrapSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowPaging\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, page_settings_1.PageSettings)\n\t    ], Grid.prototype, \"pageSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"enableVirtualization\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SearchSettings)\n\t    ], Grid.prototype, \"searchSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowSorting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowExcelExport\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowPdfExport\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SortSettings)\n\t    ], Grid.prototype, \"sortSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowSelection\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(-1)\n\t    ], Grid.prototype, \"selectedRowIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SelectionSettings)\n\t    ], Grid.prototype, \"selectionSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowFiltering\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowReordering\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowResizing\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, RowDropSettings)\n\t    ], Grid.prototype, \"rowDropSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, FilterSettings)\n\t    ], Grid.prototype, \"filterSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowGrouping\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, GroupSettings)\n\t    ], Grid.prototype, \"groupSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, EditSettings)\n\t    ], Grid.prototype, \"editSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Collection([], aggregate_1.AggregateRow)\n\t    ], Grid.prototype, \"aggregates\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"showColumnChooser\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Grid.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Grid.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('default')\n\t    ], Grid.prototype, \"gridLines\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"rowTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"detailTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"childGrid\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"queryString\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('allpages')\n\t    ], Grid.prototype, \"printMode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], Grid.prototype, \"dataSource\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"query\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"toolbar\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"toolbarTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"load\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"queryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionBegin\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionFailure\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"dataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowSelecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDeselecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDeselected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSelecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellDeselecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellDeselected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDrag\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"printComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforePrint\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"detailDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDrag\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"toolbarClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"batchAdd\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"batchDelete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchSave\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beginEdit\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellEdit\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSave\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"resizeStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"onResize\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"resizeStop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeDataBound\", void 0);\n\t    Grid = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Grid);\n\t    exports.Grid = Grid;\n\t    Grid.Inject(selection_1.Selection);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ValueFormatter = (function () {\n\t        function ValueFormatter(cultureName) {\n\t            this.intl = new ej2_base_2.Internationalization();\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                this.intl.culture = cultureName;\n\t            }\n\t        }\n\t        ValueFormatter.prototype.getFormatFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateFormat(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberFormat(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.getParserFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateParser(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberParser(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.fromView = function (value, format, type) {\n\t            if (type === 'date' || type === 'datetime' || type === 'number') {\n\t                return format(value);\n\t            }\n\t            else {\n\t                return value;\n\t            }\n\t        };\n\t        ValueFormatter.prototype.toView = function (value, format) {\n\t            var result = value;\n\t            if (!ej2_base_1.isNullOrUndefined(format) && !ej2_base_1.isNullOrUndefined(value)) {\n\t                result = format(value);\n\t            }\n\t            return result;\n\t        };\n\t        ValueFormatter.prototype.setCulture = function (cultureName) {\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                ej2_base_2.setCulture(cultureName);\n\t            }\n\t        };\n\t        return ValueFormatter;\n\t    }());\n\t    exports.ValueFormatter = ValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, column_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    function doesImplementInterface(target, checkFor) {\n\t        return target.prototype && checkFor in target.prototype;\n\t    }\n\t    exports.doesImplementInterface = doesImplementInterface;\n\t    function valueAccessor(field, data, column) {\n\t        field = ej2_base_2.isNullOrUndefined(field) ? '' : field;\n\t        return ej2_base_2.getValue(field, data);\n\t    }\n\t    exports.valueAccessor = valueAccessor;\n\t    function getUpdateUsingRaf(updateFunction, callBack) {\n\t        requestAnimationFrame(function () {\n\t            try {\n\t                callBack(null, updateFunction());\n\t            }\n\t            catch (e) {\n\t                callBack(e);\n\t            }\n\t        });\n\t    }\n\t    exports.getUpdateUsingRaf = getUpdateUsingRaf;\n\t    function iterateArrayOrObject(collection, predicate) {\n\t        var result = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            var pred = predicate(collection[i], i);\n\t            if (!ej2_base_2.isNullOrUndefined(pred)) {\n\t                result.push(pred);\n\t            }\n\t        }\n\t        return result;\n\t    }\n\t    exports.iterateArrayOrObject = iterateArrayOrObject;\n\t    function templateCompiler(template) {\n\t        if (template) {\n\t            var e = void 0;\n\t            try {\n\t                if (document.querySelectorAll(template).length) {\n\t                    return ej2_base_1.compile(document.querySelector(template).innerHTML.trim());\n\t                }\n\t            }\n\t            catch (e) {\n\t                return ej2_base_1.compile(template);\n\t            }\n\t        }\n\t        return undefined;\n\t    }\n\t    exports.templateCompiler = templateCompiler;\n\t    function setStyleAndAttributes(node, customAttributes) {\n\t        var copyAttr = {};\n\t        var literals = ['style', 'class'];\n\t        ej2_base_2.extend(copyAttr, customAttributes, {});\n\t        if ('style' in copyAttr) {\n\t            ej2_base_3.setStyleAttribute(node, copyAttr[literals[0]]);\n\t            delete copyAttr[literals[0]];\n\t        }\n\t        if ('class' in copyAttr) {\n\t            ej2_base_3.addClass([node], copyAttr[literals[1]]);\n\t            delete copyAttr[literals[1]];\n\t        }\n\t        ej2_base_3.attributes(node, copyAttr);\n\t    }\n\t    exports.setStyleAndAttributes = setStyleAndAttributes;\n\t    function extend(copied, first, second, exclude) {\n\t        var moved = ej2_base_2.extend(copied, first, second);\n\t        Object.keys(moved).forEach(function (value, index) {\n\t            if (exclude.indexOf(value) !== -1) {\n\t                delete moved[value];\n\t            }\n\t        });\n\t        return moved;\n\t    }\n\t    exports.extend = extend;\n\t    function prepareColumns(columns, autoWidth) {\n\t        for (var c = 0, len = columns.length; c < len; c++) {\n\t            var column = void 0;\n\t            if (typeof columns[c] === 'string') {\n\t                column = new column_1.Column({ field: columns[c] });\n\t            }\n\t            else if (!(columns[c] instanceof column_1.Column)) {\n\t                if (!columns[c].columns) {\n\t                    column = new column_1.Column(columns[c]);\n\t                }\n\t                else {\n\t                    column = new column_1.Column(columns[c]);\n\t                    columns[c].columns = prepareColumns(columns[c].columns);\n\t                }\n\t            }\n\t            else {\n\t                column = columns[c];\n\t            }\n\t            column.headerText = ej2_base_2.isNullOrUndefined(column.headerText) ? column.field || '' : column.headerText;\n\t            column.valueAccessor = column.valueAccessor || valueAccessor;\n\t            column.width = autoWidth && ej2_base_2.isNullOrUndefined(column.width) ? 200 : column.width;\n\t            if (ej2_base_2.isNullOrUndefined(column.visible)) {\n\t                column.visible = true;\n\t            }\n\t            columns[c] = column;\n\t        }\n\t        return columns;\n\t    }\n\t    exports.prepareColumns = prepareColumns;\n\t    function setCssInGridPopUp(popUp, e, className) {\n\t        var popUpSpan = popUp.querySelector('span');\n\t        var position = popUp.parentElement.getBoundingClientRect();\n\t        var targetPosition = e.target.getBoundingClientRect();\n\t        var isBottomTail;\n\t        popUpSpan.className = className;\n\t        popUp.style.display = '';\n\t        isBottomTail = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY) > popUp.offsetHeight + 10;\n\t        popUp.style.top = targetPosition.top - position.top +\n\t            (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px';\n\t        popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n\t        if (isBottomTail) {\n\t            popUp.querySelector('.e-downtail').style.display = '';\n\t            popUp.querySelector('.e-uptail').style.display = 'none';\n\t        }\n\t        else {\n\t            popUp.querySelector('.e-downtail').style.display = 'none';\n\t            popUp.querySelector('.e-uptail').style.display = '';\n\t        }\n\t    }\n\t    exports.setCssInGridPopUp = setCssInGridPopUp;\n\t    function getPopupLeftPosition(popup, e, targetPosition, left) {\n\t        var width = popup.offsetWidth / 2;\n\t        var x = getPosition(e).x;\n\t        if (x - targetPosition.left < width) {\n\t            return targetPosition.left - left;\n\t        }\n\t        else if (targetPosition.right - x < width) {\n\t            return targetPosition.right - left - width * 2;\n\t        }\n\t        else {\n\t            return x - left - width;\n\t        }\n\t    }\n\t    function getActualProperties(obj) {\n\t        if (obj instanceof ej2_base_1.ChildProperty) {\n\t            return ej2_base_2.getValue('properties', obj);\n\t        }\n\t        else {\n\t            return obj;\n\t        }\n\t    }\n\t    exports.getActualProperties = getActualProperties;\n\t    function parentsUntil(elem, selector, isID) {\n\t        var parent = elem;\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                break;\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parent;\n\t    }\n\t    exports.parentsUntil = parentsUntil;\n\t    function getElementIndex(element, elements) {\n\t        var index = -1;\n\t        for (var i = 0, len = elements.length; i < len; i++) {\n\t            if (elements[i].isEqualNode(element)) {\n\t                index = i;\n\t                break;\n\t            }\n\t        }\n\t        return index;\n\t    }\n\t    exports.getElementIndex = getElementIndex;\n\t    function inArray(value, collection) {\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i] === value) {\n\t                return i;\n\t            }\n\t        }\n\t        return -1;\n\t    }\n\t    exports.inArray = inArray;\n\t    function getActualPropFromColl(collection) {\n\t        var coll = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i].hasOwnProperty('properties')) {\n\t                coll.push(collection[i].properties);\n\t            }\n\t            else {\n\t                coll.push(collection[i]);\n\t            }\n\t        }\n\t        return coll;\n\t    }\n\t    exports.getActualPropFromColl = getActualPropFromColl;\n\t    function removeElement(target, selector) {\n\t        var elements = [].slice.call(target.querySelectorAll(selector));\n\t        for (var i = 0; i < elements.length; i++) {\n\t            ej2_base_3.remove(elements[i]);\n\t        }\n\t    }\n\t    exports.removeElement = removeElement;\n\t    function getPosition(e) {\n\t        var position = {};\n\t        position.x = (ej2_base_2.isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n\t            e.clientX);\n\t        position.y = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY);\n\t        return position;\n\t    }\n\t    exports.getPosition = getPosition;\n\t    var uid = 0;\n\t    function getUid(prefix) {\n\t        return prefix + uid++;\n\t    }\n\t    exports.getUid = getUid;\n\t    function appendChildren(elem, children) {\n\t        for (var i = 0, len = children.length; i < len; i++) {\n\t            if (len === children.length) {\n\t                elem.appendChild(children[i]);\n\t            }\n\t            else {\n\t                elem.appendChild(children[0]);\n\t            }\n\t        }\n\t        return elem;\n\t    }\n\t    exports.appendChildren = appendChildren;\n\t    function parents(elem, selector, isID) {\n\t        var parent = elem;\n\t        var parents = [];\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                parents.push(parent);\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parents;\n\t    }\n\t    exports.parents = parents;\n\t    function calculateAggregate(type, data, column, context) {\n\t        if (type === 'custom') {\n\t            return column.customAggregate ? column.customAggregate.call(context, data, column) : '';\n\t        }\n\t        return ej2_data_1.DataUtil.aggregates[type](data, column.field);\n\t    }\n\t    exports.calculateAggregate = calculateAggregate;\n\t    var scrollWidth = null;\n\t    function getScrollBarWidth() {\n\t        if (scrollWidth !== null) {\n\t            return scrollWidth;\n\t        }\n\t        var divNode = document.createElement('div');\n\t        var value = 0;\n\t        divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n\t        document.body.appendChild(divNode);\n\t        value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n\t        document.body.removeChild(divNode);\n\t        return scrollWidth = value;\n\t    }\n\t    exports.getScrollBarWidth = getScrollBarWidth;\n\t    var rowHeight;\n\t    function getRowHeight(element) {\n\t        if (rowHeight !== undefined) {\n\t            return rowHeight;\n\t        }\n\t        var table = ej2_base_3.createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n\t        table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n\t        element.appendChild(table);\n\t        var rect = table.querySelector('td').getBoundingClientRect();\n\t        element.removeChild(table);\n\t        rowHeight = Math.ceil(rect.height);\n\t        return rowHeight;\n\t    }\n\t    exports.getRowHeight = getRowHeight;\n\t    function isEditable(col, type, elem) {\n\t        var row = parentsUntil(elem, 'e-row');\n\t        var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n\t        if (type === 'beginEdit' && isOldRow) {\n\t            if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t        else {\n\t            if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t    }\n\t    exports.isEditable = isEditable;\n\t    function isActionPrevent(inst) {\n\t        var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n\t        return inst.editSettings.mode === 'batch' &&\n\t            (inst.element.querySelectorAll('.e-updatedtd').length) &&\n\t            (dlg ? dlg.classList.contains('e-popup-close') : true);\n\t    }\n\t    exports.isActionPrevent = isActionPrevent;\n\t    function wrap(elem, action) {\n\t        var clName = 'e-wrap';\n\t        elem = elem instanceof Array ? elem : [elem];\n\t        for (var i = 0; i < elem.length; i++) {\n\t            action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n\t        }\n\t    }\n\t    exports.wrap = wrap;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(4), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, value_formatter_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Column = (function () {\n\t        function Column(options) {\n\t            this.allowSorting = true;\n\t            this.allowResizing = true;\n\t            this.allowFiltering = true;\n\t            this.allowGrouping = true;\n\t            this.allowEditing = true;\n\t            this.showInColumnChooser = true;\n\t            ej2_base_1.merge(this, options);\n\t            this.uid = util_1.getUid('grid-column');\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (options.format && (options.format.skeleton || options.format.format)) {\n\t                this.setFormatter(valueFormatter.getFormatFunction(options.format));\n\t                this.setParser(valueFormatter.getParserFunction(options.format));\n\t            }\n\t            if (!this.field) {\n\t                this.allowFiltering = false;\n\t                this.allowGrouping = false;\n\t                this.allowSorting = false;\n\t            }\n\t            if (this.template) {\n\t                this.templateFn = util_1.templateCompiler(this.template);\n\t            }\n\t        }\n\t        Column.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        Column.prototype.setFormatter = function (value) {\n\t            this.formatFn = value;\n\t        };\n\t        Column.prototype.getParser = function () {\n\t            return this.parserFn;\n\t        };\n\t        Column.prototype.setParser = function (value) {\n\t            this.parserFn = value;\n\t        };\n\t        Column.prototype.getColumnTemplate = function () {\n\t            return this.templateFn;\n\t        };\n\t        Column.prototype.getDomSetter = function () {\n\t            return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n\t        };\n\t        return Column;\n\t    }());\n\t    exports.Column = Column;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.created = 'create';\n\t    exports.destroyed = 'destroy';\n\t    exports.load = 'load';\n\t    exports.rowDataBound = 'rowDataBound';\n\t    exports.queryCellInfo = 'queryCellInfo';\n\t    exports.actionBegin = 'actionBegin';\n\t    exports.actionComplete = 'actionComplete';\n\t    exports.actionFailure = 'actionFailure';\n\t    exports.dataBound = 'dataBound';\n\t    exports.rowSelecting = 'rowSelecting';\n\t    exports.rowSelected = 'rowSelected';\n\t    exports.rowDeselecting = 'rowDeselecting';\n\t    exports.rowDeselected = 'rowDeselected';\n\t    exports.cellSelecting = 'cellSelecting';\n\t    exports.cellSelected = 'cellSelected';\n\t    exports.cellDeselecting = 'cellDeselecting';\n\t    exports.cellDeselected = 'cellDeselected';\n\t    exports.columnDragStart = 'columnDragStart';\n\t    exports.columnDrag = 'columnDrag';\n\t    exports.columnDrop = 'columnDrop';\n\t    exports.rowDragStart = 'rowDragStart';\n\t    exports.rowDrag = 'rowDrag';\n\t    exports.rowDrop = 'rowDrop';\n\t    exports.beforePrint = 'beforePrint';\n\t    exports.printComplete = 'printComplete';\n\t    exports.detailDataBound = 'detailDataBound';\n\t    exports.toolbarClick = 'toolbarClick';\n\t    exports.batchAdd = 'batchAdd';\n\t    exports.batchDelete = 'batchDelete';\n\t    exports.beforeBatchAdd = 'beforeBatchAdd';\n\t    exports.beforeBatchDelete = 'beforeBatchDelete';\n\t    exports.beforeBatchSave = 'beforeBatchSave';\n\t    exports.beginEdit = 'beginEdit';\n\t    exports.cellEdit = 'cellEdit';\n\t    exports.cellSave = 'cellSave';\n\t    exports.endAdd = 'endAdd';\n\t    exports.endDelete = 'endDelete';\n\t    exports.endEdit = 'endEdit';\n\t    exports.recordDoubleClick = 'recordDoubleClick';\n\t    exports.recordClick = 'recordClick';\n\t    exports.beforeDataBound = 'beforeDataBound';\n\t    exports.beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n\t    exports.resizeStart = 'resizeStart';\n\t    exports.onResize = 'onResize';\n\t    exports.resizeStop = 'resizeStop';\n\t    exports.initialLoad = 'initial-load';\n\t    exports.initialEnd = 'initial-end';\n\t    exports.dataReady = 'data-ready';\n\t    exports.contentReady = 'content-ready';\n\t    exports.uiUpdate = 'ui-update';\n\t    exports.inBoundModelChanged = 'inbound-model-changed';\n\t    exports.modelChanged = 'model-changed';\n\t    exports.colGroupRefresh = 'colgroup-refresh';\n\t    exports.headerRefreshed = 'header-refreshed';\n\t    exports.pageBegin = 'paging-begin';\n\t    exports.pageComplete = 'paging-complete';\n\t    exports.sortBegin = 'sorting-begin';\n\t    exports.sortComplete = 'sorting-complete';\n\t    exports.filterBegin = 'filtering-begin';\n\t    exports.filterComplete = 'filtering-complete';\n\t    exports.searchBegin = 'searching-begin';\n\t    exports.searchComplete = 'searching-complete';\n\t    exports.reorderBegin = 'reorder-begin';\n\t    exports.reorderComplete = 'reorder-complete';\n\t    exports.rowDragAndDropBegin = 'rowdraganddrop-begin';\n\t    exports.rowDragAndDropComplete = 'rowdraganddrop-complete';\n\t    exports.groupBegin = 'grouping-begin';\n\t    exports.groupComplete = 'grouping-complete';\n\t    exports.ungroupBegin = 'ungrouping-begin';\n\t    exports.ungroupComplete = 'ungrouping-complete';\n\t    exports.rowSelectionBegin = 'rowselecting';\n\t    exports.rowSelectionComplete = 'rowselected';\n\t    exports.columnSelectionBegin = 'columnselecting';\n\t    exports.columnSelectionComplete = 'columnselected';\n\t    exports.cellSelectionBegin = 'cellselecting';\n\t    exports.cellSelectionComplete = 'cellselected';\n\t    exports.keyPressed = 'key-pressed';\n\t    exports.click = 'click';\n\t    exports.destroy = 'destroy';\n\t    exports.columnVisibilityChanged = 'column-visible-changed';\n\t    exports.scroll = 'scroll';\n\t    exports.columnWidthChanged = 'column-width-changed';\n\t    exports.columnPositionChanged = 'column-position-changed';\n\t    exports.rowDragAndDrop = 'row-drag-and-drop';\n\t    exports.rowsAdded = 'rows-added';\n\t    exports.rowsRemoved = 'rows-removed';\n\t    exports.columnDragStop = 'column-drag-stop';\n\t    exports.headerDrop = 'header-drop';\n\t    exports.dataSourceModified = 'datasource-modified';\n\t    exports.refreshComplete = 'refresh-complete';\n\t    exports.refreshVirtualBlock = 'refresh-virtual-block';\n\t    exports.dblclick = 'dblclick';\n\t    exports.toolbarRefresh = 'toolbar-refresh';\n\t    exports.bulkSave = 'bulk-save';\n\t    exports.autoCol = 'auto-col';\n\t    exports.tooltipDestroy = 'tooltip-destroy';\n\t    exports.updateData = 'update-data';\n\t    exports.editBegin = 'edit-begin';\n\t    exports.editComplete = 'edit-complete';\n\t    exports.addBegin = 'add-begin';\n\t    exports.addComplete = 'add-complete';\n\t    exports.saveComplete = 'save-complete';\n\t    exports.deleteBegin = 'delete-begin';\n\t    exports.deleteComplete = 'delete-complete';\n\t    exports.preventBatch = 'prevent-batch';\n\t    exports.dialogDestroy = 'dialog-destroy';\n\t    exports.crudAction = 'crud-Action';\n\t    exports.addDeleteAction = 'add-delete-Action';\n\t    exports.destroyForm = 'destroy-form';\n\t    exports.doubleTap = 'double-tap';\n\t    exports.beforeExcelExport = 'beforeExcelExport';\n\t    exports.excelExportComplete = 'excelExportComplete';\n\t    exports.excelQueryCellInfo = 'excelQueryCellInfo';\n\t    exports.beforePdfExport = 'beforePdfExport';\n\t    exports.pdfExportComplete = 'pdfExportComplete';\n\t    exports.pdfQueryCellInfo = 'pdfQueryCellInfo';\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(13), __webpack_require__(16), __webpack_require__(9), __webpack_require__(6), __webpack_require__(17), __webpack_require__(11), __webpack_require__(21), __webpack_require__(22), __webpack_require__(24), __webpack_require__(25), __webpack_require__(26), __webpack_require__(27), __webpack_require__(28), __webpack_require__(29), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_data_1, enum_1, data_1, events, util_1, content_renderer_1, header_renderer_1, cell_renderer_1, header_cell_renderer_1, stacked_cell_renderer_1, indent_cell_renderer_1, caption_cell_renderer_1, expand_cell_renderer_1, header_indent_renderer_1, detail_header_indent_renderer_1, detail_expand_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Render = (function () {\n\t        function Render(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.data = new data_1.Data(parent);\n\t            this.l10n = locator.getService('localization');\n\t            this.ariaService = this.locator.getService('ariaService');\n\t            this.renderer = this.locator.getService('rendererFactory');\n\t            this.addEventListener();\n\t        }\n\t        Render.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            this.headerRenderer = this.renderer.getRenderer(enum_1.RenderType.Header);\n\t            this.contentRenderer = this.renderer.getRenderer(enum_1.RenderType.Content);\n\t            this.headerRenderer.renderPanel();\n\t            this.contentRenderer.renderPanel();\n\t            if (gObj.getColumns().length) {\n\t                this.headerRenderer.renderTable();\n\t                this.contentRenderer.renderTable();\n\t                this.emptyRow(false);\n\t            }\n\t            this.refreshDataManager();\n\t        };\n\t        Render.prototype.refresh = function (e) {\n\t            if (e === void 0) { e = { requestType: 'refresh' }; }\n\t            this.parent.notify(e.requestType + \"-begin\", e);\n\t            this.parent.trigger(events.actionBegin, e);\n\t            if (e.cancel) {\n\t                return;\n\t            }\n\t            this.refreshDataManager(e);\n\t        };\n\t        Render.prototype.refreshComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, e);\n\t        };\n\t        Render.prototype.refreshDataManager = function (args) {\n\t            var _this = this;\n\t            var ready = this.data.dataManager.ready;\n\t            this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n\t            var dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n\t            if (!ready) {\n\t                if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n\t                    dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n\t                }\n\t                dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dataManagerFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.sendBulkRequest = function (args) {\n\t            var _this = this;\n\t            var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0]);\n\t            if (this.data.dataManager.dataSource.offline) {\n\t                this.refreshDataManager({ requestType: 'batchsave' });\n\t                return;\n\t            }\n\t            else {\n\t                promise.then(function (e) { return _this.dmSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dmFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.dmSuccess = function (e, args) {\n\t            this.dataManagerSuccess(e, args);\n\t        };\n\t        Render.prototype.dmFailure = function (e) {\n\t            this.dataManagerFailure(e);\n\t        };\n\t        Render.prototype.renderEmptyRow = function () {\n\t            this.emptyRow(true);\n\t        };\n\t        Render.prototype.emptyRow = function (isTrigger) {\n\t            var gObj = this.parent;\n\t            var tbody = this.contentRenderer.getTable().querySelector('tbody');\n\t            var tr;\n\t            ej2_base_1.remove(tbody);\n\t            tbody = ej2_base_1.createElement('tbody');\n\t            tr = ej2_base_1.createElement('tr', { className: 'e-emptyrow' });\n\t            tr.appendChild(ej2_base_1.createElement('td', {\n\t                innerHTML: this.l10n.getConstant('EmptyRecord'),\n\t                attrs: { colspan: gObj.getColumns().length.toString() }\n\t            }));\n\t            tbody.appendChild(tr);\n\t            this.contentRenderer.renderEmpty(tbody);\n\t            if (isTrigger) {\n\t                this.parent.trigger(events.dataBound, {});\n\t            }\n\t        };\n\t        Render.prototype.updateColumnType = function (record) {\n\t            var columns = this.parent.getColumns();\n\t            var value;\n\t            var data = record && record.items ? record.items[0] : record;\n\t            var fmtr = this.locator.getService('valueFormatter');\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                value = ej2_base_2.getValue(columns[i].field || '', data);\n\t                if (!ej2_base_2.isNullOrUndefined(value)) {\n\t                    this.isColTypeDef = true;\n\t                    if (!columns[i].type) {\n\t                        columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n\t                            value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n\t                    }\n\t                    if (typeof (columns[i].format) === 'string') {\n\t                        switch (columns[i].type) {\n\t                            case 'date':\n\t                                columns[i].setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: columns[i].format }));\n\t                                columns[i].setParser(fmtr.getParserFunction({ type: 'date', skeleton: columns[i].format }));\n\t                                break;\n\t                            case 'datetime':\n\t                                columns[i].setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: columns[i].format }));\n\t                                columns[i].setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: columns[i].format }));\n\t                                break;\n\t                            case 'number':\n\t                                columns[i].setFormatter(fmtr.getFormatFunction({ format: columns[i].format }));\n\t                                columns[i].setParser(fmtr.getParserFunction({ format: columns[i].format }));\n\t                                break;\n\t                        }\n\t                    }\n\t                    else if (!columns[i].format && columns[i].type === 'number') {\n\t                        columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n\t                    }\n\t                }\n\t                else {\n\t                    columns[i].type = columns[i].type || null;\n\t                }\n\t            }\n\t        };\n\t        Render.prototype.dataManagerSuccess = function (e, args) {\n\t            var gObj = this.parent;\n\t            gObj.trigger(events.beforeDataBound, e);\n\t            var len = Object.keys(e.result).length;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            gObj.currentViewData = e.result;\n\t            if (!len && e.count && gObj.allowPaging) {\n\t                gObj.pageSettings.currentPage = Math.ceil(e.count / gObj.pageSettings.pageSize);\n\t                gObj.dataBind();\n\t                return;\n\t            }\n\t            if (!gObj.getColumns().length && len) {\n\t                this.updatesOnInitialRender(e);\n\t            }\n\t            if (!this.isColTypeDef) {\n\t                this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n\t            }\n\t            this.parent.notify(events.dataReady, ej2_base_2.extend({ count: e.count, result: e.result, aggregates: e.aggregates }, args));\n\t            if (gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping')) {\n\t                this.headerRenderer.refreshUI();\n\t            }\n\t            if (len) {\n\t                this.contentRenderer.refreshContentRows(args);\n\t            }\n\t            else {\n\t                if (!gObj.getColumns().length) {\n\t                    gObj.element.innerHTML = '';\n\t                    alert(this.l10n.getConstant('EmptyDataSourceError'));\n\t                    return;\n\t                }\n\t                this.contentRenderer.setRowElements([]);\n\t                this.renderEmptyRow();\n\t                if (args) {\n\t                    var action = (args.requestType || '').toLowerCase() + '-complete';\n\t                    this.parent.notify(action, args);\n\t                }\n\t            }\n\t        };\n\t        Render.prototype.dataManagerFailure = function (e) {\n\t            this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n\t            this.parent.trigger(events.actionFailure, { error: e });\n\t            this.parent.currentViewData = [];\n\t            this.renderEmptyRow();\n\t        };\n\t        Render.prototype.updatesOnInitialRender = function (e) {\n\t            this.buildColumns(e.result[0]);\n\t            util_1.prepareColumns(this.parent.columns);\n\t            this.headerRenderer.renderTable();\n\t            this.contentRenderer.renderTable();\n\t            this.parent.notify(events.autoCol, {});\n\t        };\n\t        Render.prototype.buildColumns = function (record) {\n\t            var columns = Object.keys(record);\n\t            var cols = [];\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                cols[i] = { 'field': columns[i] };\n\t                if (this.parent.enableColumnVirtualization) {\n\t                    cols[i].width = !ej2_base_2.isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n\t                }\n\t            }\n\t            this.parent.columns = cols;\n\t        };\n\t        Render.prototype.instantiateRenderer = function () {\n\t            this.renderer.addRenderer(enum_1.RenderType.Header, new header_renderer_1.HeaderRender(this.parent, this.locator));\n\t            this.renderer.addRenderer(enum_1.RenderType.Content, new content_renderer_1.ContentRender(this.parent, this.locator));\n\t            var cellrender = this.locator.getService('cellRendererFactory');\n\t            cellrender.addCellRenderer(enum_1.CellType.Header, new header_cell_renderer_1.HeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Data, new cell_renderer_1.CellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Indent, new indent_cell_renderer_1.IndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaption, new caption_cell_renderer_1.GroupCaptionCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaptionEmpty, new caption_cell_renderer_1.GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Expand, new expand_cell_renderer_1.ExpandCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.HeaderIndent, new header_indent_renderer_1.HeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailHeader, new detail_header_indent_renderer_1.DetailHeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailExpand, new detail_expand_cell_renderer_1.DetailExpandCellRenderer(this.parent, this.locator));\n\t        };\n\t        Render.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.modelChanged, this.refresh, this);\n\t            this.parent.on(events.refreshComplete, this.refreshComplete, this);\n\t            this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n\t        };\n\t        Render.prototype.validateGroupRecords = function (e) {\n\t            var _this = this;\n\t            var index = e.result.length - 1;\n\t            if (index < 0) {\n\t                return Promise.resolve(e);\n\t            }\n\t            var group0 = e.result[0];\n\t            var groupN = e.result[index];\n\t            var predicate = [];\n\t            var addWhere = function (input) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return predicate.push(new ej2_data_1.Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n\t                });\n\t                input.where(ej2_data_1.Predicate.or(predicate));\n\t            };\n\t            var query = new ej2_data_1.Query();\n\t            addWhere(query);\n\t            var curDm = new ej2_data_1.DataManager(e.result);\n\t            var curFilter = curDm.executeLocal(query);\n\t            var newQuery = this.data.generateQuery(true);\n\t            var rPredicate = [];\n\t            if (this.data.isRemote()) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n\t                });\n\t                newQuery.where(ej2_data_1.Predicate.or(rPredicate));\n\t            }\n\t            else {\n\t                addWhere(newQuery);\n\t            }\n\t            var deferred = new ej2_data_1.Deferred();\n\t            this.data.getData({}, newQuery).then(function (r) {\n\t                _this.updateGroupInfo(curFilter, r.result);\n\t                deferred.resolve(e);\n\t            });\n\t            return deferred.promise;\n\t        };\n\t        Render.prototype.getPredicate = function (key, operator, value) {\n\t            if (value instanceof Date) {\n\t                return this.data.getDatePredicate({ field: key, operator: operator, value: value });\n\t            }\n\t            return new ej2_data_1.Predicate(key, operator, value);\n\t        };\n\t        Render.prototype.updateGroupInfo = function (current, untouched) {\n\t            var _this = this;\n\t            var dm = new ej2_data_1.DataManager(untouched);\n\t            current.forEach(function (element, index, array) {\n\t                var uGroup = dm.executeLocal(new ej2_data_1.Query()\n\t                    .where(new ej2_data_1.Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n\t                element.count = uGroup.count;\n\t                var itemGroup = element.items;\n\t                var uGroupItem = uGroup.items;\n\t                if (itemGroup.GroupGuid) {\n\t                    element.items = _this.updateGroupInfo(element.items, uGroup.items);\n\t                }\n\t                _this.parent.aggregates.forEach(function (row) {\n\t                    return row.columns.forEach(function (column) {\n\t                        var types = column.type instanceof Array ? column.type : [column.type];\n\t                        types.forEach(function (type) {\n\t                            var key = column.field + ' - ' + type;\n\t                            element.aggregates[key] = util_1.calculateAggregate(type, itemGroup.level ? uGroupItem.records : uGroup.items, column);\n\t                        });\n\t                    });\n\t                });\n\t            });\n\t            return current;\n\t        };\n\t        return Render;\n\t    }());\n\t    exports.Render = Render;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(13), __webpack_require__(12), __webpack_require__(14), __webpack_require__(15), __webpack_require__(9), __webpack_require__(5), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, enum_1, row_renderer_1, cell_1, row_1, events, ej2_base_4, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderRender = (function () {\n\t        function HeaderRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (!(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_2.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-headercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-headercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                var height = element.offsetHeight;\n\t                var headercelldiv = element.querySelector('.e-headercelldiv');\n\t                visualElement.textContent = headercelldiv ?\n\t                    gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid')).headerText : element.innerHTML;\n\t                visualElement.style.width = element.offsetWidth + 'px';\n\t                visualElement.style.height = element.offsetHeight + 'px';\n\t                visualElement.style.lineHeight = (height - 6).toString() + 'px';\n\t                if (element.querySelector('.e-headercelldiv')) {\n\t                    _this.column = gObj.getColumnByUid(element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                    visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                }\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.target;\n\t                if (target) {\n\t                    var closest = ej2_base_2.closest(target, '.e-grid');\n\t                    var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                    if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n\t                        ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                        if (gObj.allowReordering) {\n\t                            gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n\t                            gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n\t                        }\n\t                        return;\n\t                    }\n\t                    gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                var cancel;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                if ((!util_1.parentsUntil(e.target, 'e-headercell') && !util_1.parentsUntil(e.target, 'e-groupdroparea')) ||\n\t                    (!gObj.allowReordering && util_1.parentsUntil(e.target, 'e-headercell')) ||\n\t                    (!e.helper.getAttribute('e-mappinguid') && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    cancel = true;\n\t                }\n\t                gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var uid = e.droppedElement.getAttribute('e-mappinguid');\n\t                var closest = ej2_base_2.closest(e.target, '.e-grid');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n\t                    !(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return;\n\t                }\n\t                gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.widthService = this.serviceLocator.getService('widthService');\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.columnPositionChanged, this.refreshUI, this);\n\t        }\n\t        HeaderRender.prototype.renderPanel = function () {\n\t            var div = ej2_base_2.createElement('div', { className: 'e-gridheader' });\n\t            var innerDiv = ej2_base_2.createElement('div', { className: 'e-headercontent' });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            this.parent.element.appendChild(div);\n\t        };\n\t        HeaderRender.prototype.renderTable = function () {\n\t            var headerDiv = this.getPanel();\n\t            headerDiv.appendChild(this.createHeaderTable());\n\t            this.setTable(headerDiv.querySelector('.e-table'));\n\t            this.initializeHeaderDrag();\n\t            this.initializeHeaderDrop();\n\t            this.parent.notify(events.headerRefreshed, {});\n\t        };\n\t        HeaderRender.prototype.getPanel = function () {\n\t            return this.headerPanel;\n\t        };\n\t        HeaderRender.prototype.setPanel = function (panel) {\n\t            this.headerPanel = panel;\n\t        };\n\t        HeaderRender.prototype.getTable = function () {\n\t            return this.headerTable;\n\t        };\n\t        HeaderRender.prototype.setTable = function (table) {\n\t            this.headerTable = table;\n\t        };\n\t        HeaderRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        HeaderRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        HeaderRender.prototype.getRows = function () {\n\t            var table = this.getTable();\n\t            return table.tHead.rows;\n\t        };\n\t        HeaderRender.prototype.createHeaderTable = function () {\n\t            var table = this.createTable();\n\t            var innerDiv = this.getPanel().firstChild;\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        HeaderRender.prototype.createTable = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var table = ej2_base_2.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var findHeaderRow = this.createHeaderContent();\n\t            var thead = findHeaderRow.thead;\n\t            var tbody = ej2_base_2.createElement('tbody', { className: 'e-hide' });\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var rowBody = ej2_base_2.createElement('tr');\n\t            var bodyCell;\n\t            var rows = findHeaderRow.rows;\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n\t                    var cell = rows[i].cells[j];\n\t                    bodyCell = ej2_base_2.createElement('td');\n\t                    rowBody.appendChild(bodyCell);\n\t                }\n\t            }\n\t            if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n\t                table.classList.add('e-sortfilter');\n\t            }\n\t            this.updateColGroup(colGroup);\n\t            tbody.appendChild(rowBody);\n\t            table.appendChild(this.setColGroup(colGroup));\n\t            table.appendChild(thead);\n\t            table.appendChild(tbody);\n\t            this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n\t            return table;\n\t        };\n\t        HeaderRender.prototype.createHeaderContent = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var thead = ej2_base_2.createElement('thead');\n\t            var colHeader = ej2_base_2.createElement('tr', { className: 'e-columnheader' });\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Header);\n\t            rowRenderer.element = colHeader;\n\t            var rows = [];\n\t            var headerRow;\n\t            this.colDepth = this.getObjDepth();\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                rows[i] = this.generateRow(i);\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.ensureColumns(rows);\n\t            rows = this.getHeaderCells(rows);\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                headerRow = rowRenderer.render(rows[i], columns);\n\t                thead.appendChild(headerRow);\n\t            }\n\t            var findHeaderRow = {\n\t                thead: thead,\n\t                rows: rows\n\t            };\n\t            return findHeaderRow;\n\t        };\n\t        HeaderRender.prototype.updateColGroup = function (colGroup) {\n\t            var cols = this.parent.getColumns();\n\t            var col;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.allowGrouping) {\n\t                for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        continue;\n\t                    }\n\t                    col = ej2_base_2.createElement('col');\n\t                    colGroup.appendChild(col);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                col = ej2_base_2.createElement('col');\n\t                colGroup.appendChild(col);\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                col = ej2_base_2.createElement('col');\n\t                if (cols[i].visible === false) {\n\t                    ej2_base_2.setStyleAttribute(col, { 'display': 'none' });\n\t                }\n\t                colGroup.appendChild(col);\n\t            }\n\t            return colGroup;\n\t        };\n\t        HeaderRender.prototype.ensureColumns = function (rows) {\n\t            var gObj = this.parent;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gObj.allowGrouping) {\n\t                    for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n\t                        if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gObj.detailTemplate || gObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.getHeaderCells = function (rows) {\n\t            var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol) {\n\t            var lastCol = isLastCol ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                rows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCnt(cols, 0);\n\t                if (colSpan) {\n\t                    rows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol);\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.generateRow = function (index) {\n\t            return new row_1.Row({});\n\t        };\n\t        HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.headerTemplate),\n\t                'rowID': '',\n\t                'column': column,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': colIndex\n\t            };\n\t            if (!opt.rowSpan || opt.rowSpan < 2) {\n\t                delete opt.rowSpan;\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        HeaderRender.prototype.setVisible = function (columns) {\n\t            var rows = [].slice.call(this.getRows());\n\t            var displayVal = '';\n\t            var idx;\n\t            var className;\n\t            var element;\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (column.visible === false) {\n\t                    displayVal = 'none';\n\t                }\n\t                ej2_base_2.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t                this.refreshUI();\n\t            }\n\t        };\n\t        HeaderRender.prototype.refreshUI = function () {\n\t            var headerDiv = this.getPanel();\n\t            var table = this.getTable();\n\t            ej2_base_2.remove(this.getTable());\n\t            table.removeChild(table.firstChild);\n\t            table.removeChild(table.childNodes[0]);\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var findHeaderRow = this.createHeaderContent();\n\t            table.insertBefore(findHeaderRow.thead, table.firstChild);\n\t            this.updateColGroup(colGroup);\n\t            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n\t            this.setTable(table);\n\t            this.appendContent(table);\n\t            this.parent.notify(events.colGroupRefresh, {});\n\t            this.widthService.setWidthToColumns();\n\t            this.initializeHeaderDrag();\n\t            this.parent.notify(events.headerRefreshed, {});\n\t            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n\t            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'header') {\n\t                util_1.wrap(rows, true);\n\t            }\n\t        };\n\t        HeaderRender.prototype.appendContent = function (table) {\n\t            this.getPanel().firstChild.appendChild(table);\n\t        };\n\t        HeaderRender.prototype.getObjDepth = function () {\n\t            var max = 0;\n\t            var cols = this.parent.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                var depth = this.checkDepth(cols[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        HeaderRender.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        HeaderRender.prototype.getCellCnt = function (col, cnt) {\n\t            if (col.columns) {\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    cnt = this.getCellCnt(col.columns[i], cnt);\n\t                }\n\t            }\n\t            else {\n\t                if (col.visible) {\n\t                    cnt++;\n\t                }\n\t            }\n\t            return cnt;\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrag = function () {\n\t            var gObj = this.parent;\n\t            if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n\t                return;\n\t            }\n\t            var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n\t            for (var i = 0, len = headerRows.length; i < len; i++) {\n\t                var drag = new ej2_base_4.Draggable(headerRows[i], {\n\t                    dragTarget: '.e-headercell',\n\t                    distance: 5,\n\t                    helper: this.helper,\n\t                    dragStart: this.dragStart,\n\t                    drag: this.drag,\n\t                    dragStop: this.dragStop,\n\t                    abort: '.e-rhandler'\n\t                });\n\t            }\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_4.Droppable(gObj.getHeaderContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        return HeaderRender;\n\t    }());\n\t    exports.HeaderRender = HeaderRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(9), __webpack_require__(6), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, util_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowRenderer = (function () {\n\t        function RowRenderer(serviceLocator, cellType, parent) {\n\t            this.element = ej2_base_2.createElement('tr', { attrs: { role: 'row' } });\n\t            this.cellType = cellType;\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent = parent;\n\t        }\n\t        RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate) {\n\t            return this.refreshRow(row, columns, attributes, rowTemplate);\n\t        };\n\t        RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n\t            if (isChanged) {\n\t                row.data = ej2_base_1.extend({}, row.changes);\n\t            }\n\t            var node = this.parent.getContent().querySelector('[data-uid=' + row.uid + ']');\n\t            var tr = this.refreshRow(row, columns, attributes, rowTemplate);\n\t            var cells = [].slice.call(tr.cells);\n\t            node.innerHTML = '';\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var cell = cells_1[_i];\n\t                node.appendChild(cell);\n\t            }\n\t        };\n\t        RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate) {\n\t            var tr = this.element.cloneNode();\n\t            var rowArgs = { data: row.data };\n\t            var cellArgs = { data: row.data };\n\t            var attrCopy = ej2_base_1.extend({}, attributes, {});\n\t            if (row.isDataRow) {\n\t                row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1;\n\t            }\n\t            this.buildAttributeFromRow(tr, row);\n\t            ej2_base_2.attributes(tr, attrCopy);\n\t            util_1.setStyleAndAttributes(tr, row.attributes);\n\t            var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t            for (var i = 0, len = row.cells.length; i < len; i++) {\n\t                var cell = row.cells[i];\n\t                cell.isSelected = row.isSelected;\n\t                var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || enum_1.CellType.Data);\n\t                var td = cellRenderer.render(row.cells[i], row.data, { 'index': !ej2_base_1.isNullOrUndefined(row.index) ? row.index.toString() : '' });\n\t                tr.appendChild(td);\n\t                if (row.cells[i].cellType === enum_1.CellType.Data) {\n\t                    this.parent.trigger(constant_1.queryCellInfo, ej2_base_1.extend(cellArgs, { cell: td, column: cell.column }));\n\t                }\n\t            }\n\t            if (row.isDataRow) {\n\t                this.parent.trigger(constant_1.rowDataBound, ej2_base_1.extend(rowArgs, { row: tr }));\n\t            }\n\t            if (row.cssClass) {\n\t                tr.classList.add(row.cssClass);\n\t            }\n\t            return tr;\n\t        };\n\t        RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n\t            var attr = {};\n\t            var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n\t            var classes = [];\n\t            if (row.isDataRow) {\n\t                classes.push('e-row');\n\t            }\n\t            if (row.isAltRow) {\n\t                classes.push('e-altrow');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(row.index)) {\n\t                attr[prop.rowindex] = row.index;\n\t            }\n\t            if (row.rowSpan) {\n\t                attr.rowSpan = row.rowSpan;\n\t            }\n\t            if (row.uid) {\n\t                attr[prop.dataUID] = row.uid;\n\t            }\n\t            if (row.isSelected) {\n\t                attr[prop.ariaSelected] = true;\n\t            }\n\t            if (row.visible === false) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(tr, attr);\n\t        };\n\t        return RowRenderer;\n\t    }());\n\t    exports.RowRenderer = RowRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellType;\n\t    (function (CellType) {\n\t        CellType[CellType[\"Data\"] = 0] = \"Data\";\n\t        CellType[CellType[\"Header\"] = 1] = \"Header\";\n\t        CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n\t        CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n\t        CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n\t        CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n\t        CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n\t        CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n\t        CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n\t        CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n\t        CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n\t        CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n\t        CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n\t        CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n\t    })(CellType = exports.CellType || (exports.CellType = {}));\n\t    var RenderType;\n\t    (function (RenderType) {\n\t        RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n\t        RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n\t        RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n\t    })(RenderType = exports.RenderType || (exports.RenderType = {}));\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Cell = (function () {\n\t        function Cell(options) {\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Cell;\n\t    }());\n\t    exports.Cell = Cell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Row = (function () {\n\t        function Row(options) {\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Row;\n\t    }());\n\t    exports.Row = Row;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Data = (function () {\n\t        function Data(parent) {\n\t            this.parent = parent;\n\t            this.initDataManager();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.rowsAdded, this.addRows, this);\n\t            this.parent.on(events.rowsRemoved, this.removeRows, this);\n\t            this.parent.on(events.dataSourceModified, this.initDataManager, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.updateData, this.crudActions, this);\n\t            this.parent.on(events.addDeleteAction, this.getData, this);\n\t        }\n\t        Data.prototype.initDataManager = function () {\n\t            var gObj = this.parent;\n\t            this.dataManager = gObj.dataSource instanceof ej2_data_1.DataManager ? gObj.dataSource :\n\t                (ej2_base_1.isNullOrUndefined(gObj.dataSource) ? new ej2_data_1.DataManager() : new ej2_data_1.DataManager(gObj.dataSource));\n\t            gObj.query = gObj.query instanceof ej2_data_1.Query ? gObj.query : new ej2_data_1.Query();\n\t        };\n\t        Data.prototype.generateQuery = function (skipPage) {\n\t            var gObj = this.parent;\n\t            var query = gObj.query.clone();\n\t            if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n\t                var columns = gObj.filterSettings.columns;\n\t                for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                    var col = columns_1[_i];\n\t                    var sType = gObj.getColumnByField(col.field).type;\n\t                    if (sType !== 'date' && sType !== 'datetime') {\n\t                        query.where(col.field, col.operator, col.value, !col.matchCase);\n\t                    }\n\t                    else {\n\t                        query.where(this.getDatePredicate(col));\n\t                    }\n\t                }\n\t            }\n\t            if (gObj.searchSettings.key.length) {\n\t                var sSettings = gObj.searchSettings;\n\t                sSettings.fields = sSettings.fields.length ? sSettings.fields : gObj.getColumnFieldNames();\n\t                query.search(sSettings.key, sSettings.fields, sSettings.operator, sSettings.ignoreCase);\n\t            }\n\t            gObj.aggregates.forEach(function (row) {\n\t                row.columns.forEach(function (column) {\n\t                    var types = column.type instanceof Array ? column.type : [column.type];\n\t                    types.forEach(function (type) { return query.aggregate(type, column.field); });\n\t                });\n\t            });\n\t            if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n\t                var columns = gObj.sortSettings.columns;\n\t                var sortGrp = [];\n\t                for (var i = columns.length - 1; i > -1; i--) {\n\t                    if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n\t                        query.sortBy(columns[i].field, columns[i].direction);\n\t                    }\n\t                    else {\n\t                        sortGrp.push(columns[i]);\n\t                    }\n\t                }\n\t                for (var i = 0, len = sortGrp.length; i < len; i++) {\n\t                    query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n\t                }\n\t            }\n\t            if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n\t                query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n\t            }\n\t            if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n\t                var columns = gObj.groupSettings.columns;\n\t                for (var i = 0, len = columns.length; i < len; i++) {\n\t                    query.group(columns[i]);\n\t                }\n\t            }\n\t            return query;\n\t        };\n\t        Data.prototype.getData = function (args, query) {\n\t            var _this = this;\n\t            if (args === void 0) { args = { requestType: '' }; }\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ?\n\t                args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'delete':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.remove(key, args.data[0], null, query);\n\t                    break;\n\t                case 'save':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.insert(args.data, null, query, 0);\n\t                    break;\n\t            }\n\t            if (this.dataManager.ready) {\n\t                var ready = this.dataManager.ready;\n\t                ready.then(function (e) {\n\t                    _this.dataManager = new ej2_data_1.DataManager(e.result);\n\t                    _this.parent.refresh();\n\t                }).catch(function (e) {\n\t                    _this.parent.trigger(events.actionFailure, { error: e });\n\t                });\n\t            }\n\t            return this.dataManager.executeQuery(query);\n\t        };\n\t        Data.prototype.crudActions = function (args) {\n\t            this.generateQuery();\n\t            var promise = null;\n\t            var pr = 'promise';\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n\t                this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'save':\n\t                    promise = this.dataManager.update(key, args.data, null, this.generateQuery());\n\t                    break;\n\t            }\n\t            args[pr] = promise;\n\t            this.parent.notify(events.crudAction, args);\n\t        };\n\t        Data.prototype.saveChanges = function (changes, key) {\n\t            var promise = this.dataManager.saveChanges(changes, key, null, this.generateQuery().requiresCount());\n\t            return promise;\n\t        };\n\t        Data.prototype.getKey = function (keys) {\n\t            if (keys && keys.length) {\n\t                return keys[0];\n\t            }\n\t            return undefined;\n\t        };\n\t        Data.prototype.isRemote = function () {\n\t            return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined;\n\t        };\n\t        Data.prototype.getDatePredicate = function (filterObject) {\n\t            var prevDate;\n\t            var nextDate;\n\t            var prevObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var nextObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var value = new Date(filterObject.value);\n\t            prevDate = new Date(value.setDate(value.getDate() - 1));\n\t            nextDate = new Date(value.setDate(value.getDate() + 2));\n\t            prevObj.value = prevDate;\n\t            nextObj.value = nextDate;\n\t            if (filterObject.operator === 'equal') {\n\t                prevObj.operator = 'greaterthan';\n\t                nextObj.operator = 'lessthan';\n\t            }\n\t            else {\n\t                prevObj.operator = 'lessthanorequal';\n\t                nextObj.operator = 'greaterthanorequal';\n\t            }\n\t            var predicateSt = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t            var predicateEnd = new ej2_data_1.Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n\t            return filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n\t        };\n\t        Data.prototype.addRows = function (e) {\n\t            for (var i = e.records.length; i > 0; i--) {\n\t                this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n\t            }\n\t        };\n\t        Data.prototype.removeRows = function (e) {\n\t            var json = this.dataManager.dataSource.json;\n\t            this.dataManager.dataSource.json = json.filter(function (value, index) { return e.indexes.indexOf(index) === -1; });\n\t        };\n\t        Data.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.rowsAdded, this.addRows);\n\t            this.parent.off(events.rowsRemoved, this.removeRows);\n\t            this.parent.off(events.dataSourceModified, this.initDataManager);\n\t            this.parent.off(events.dataSourceModified, this.destroy);\n\t            this.parent.off(events.updateData, this.crudActions);\n\t            this.parent.off(events.addDeleteAction, this.getData);\n\t        };\n\t        return Data;\n\t    }());\n\t    exports.Data = Data;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(12), __webpack_require__(18), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, row_renderer_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ContentRender = (function () {\n\t        function ContentRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.rows = [];\n\t            this.drop = function (e) {\n\t                _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n\t                ej2_base_3.remove(e.droppedElement);\n\t            };\n\t            this.rafCallback = function () {\n\t                _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n\t                if (_this.parent.isDestroyed) {\n\t                    return;\n\t                }\n\t                _this.parent.notify(events.contentReady, {});\n\t                _this.parent.trigger(events.dataBound, {});\n\t                if (_this.args) {\n\t                    var action = (_this.args.requestType || '').toLowerCase() + '-complete';\n\t                    _this.parent.notify(action, _this.args);\n\t                }\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.generator = this.getModelGenerator();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n\t        }\n\t        ContentRender.prototype.renderPanel = function () {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_3.createElement('div', { className: 'e-gridcontent' });\n\t            var innerDiv = ej2_base_3.createElement('div', {\n\t                className: 'e-content'\n\t            });\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                innerDiv.setAttribute('tabindex', '0');\n\t            }\n\t            this.ariaService.setOptions(innerDiv, { busy: false });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            gObj.element.appendChild(div);\n\t        };\n\t        ContentRender.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            contentDiv.appendChild(this.createContentTable());\n\t            this.setTable(contentDiv.querySelector('.e-table'));\n\t            this.ariaService.setOptions(this.getTable(), {\n\t                multiselectable: this.parent.selectionSettings.type === 'multiple'\n\t            });\n\t            this.initializeContentDrop();\n\t        };\n\t        ContentRender.prototype.createContentTable = function () {\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var table = ej2_base_3.createElement('table', {\n\t                className: 'e-table', attrs: {\n\t                    cellspacing: '0.25px', role: 'grid',\n\t                    id: this.parent.element.id + '_content_table'\n\t                }\n\t            });\n\t            this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n\t            table.appendChild(this.getColGroup());\n\t            table.appendChild(ej2_base_3.createElement('tbody'));\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        ContentRender.prototype.refreshContentRows = function (args) {\n\t            var _this = this;\n\t            if (args === void 0) { args = {}; }\n\t            var gObj = this.parent;\n\t            var dataSource = gObj.currentViewData;\n\t            var frag = document.createDocumentFragment();\n\t            var columns = gObj.getColumns();\n\t            var tr;\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            this.rowElements = [];\n\t            var modelData = this.generator.generateRows(dataSource, args);\n\t            var tbody = this.getTable().querySelector('tbody');\n\t            for (var i = 0, len = modelData.length; i < len; i++) {\n\t                if (!gObj.rowTemplate) {\n\t                    tr = row.render(modelData[i], columns);\n\t                }\n\t                else {\n\t                    var elements = gObj.getRowTemplate()(ej2_base_2.extend({ index: i }, dataSource[i]));\n\t                    for (var j = 0; j < elements.length; j++) {\n\t                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n\t                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n\t                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n\t                        }\n\t                    }\n\t                }\n\t                frag.appendChild(tr);\n\t                this.rows.push(modelData[i]);\n\t                if (modelData[i].isDataRow) {\n\t                    var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n\t                    if (td) {\n\t                        td.classList.add('e-detailrowvisible');\n\t                    }\n\t                    this.rowElements.push(tr);\n\t                }\n\t                this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n\t            }\n\t            this.args = args;\n\t            util_1.getUpdateUsingRaf(function () {\n\t                ej2_base_3.remove(tbody);\n\t                tbody = ej2_base_3.createElement('tbody');\n\t                _this.appendContent(tbody, frag, args);\n\t            }, this.rafCallback);\n\t        };\n\t        ContentRender.prototype.appendContent = function (tbody, frag, args) {\n\t            tbody.appendChild(frag);\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.getPanel = function () {\n\t            return this.contentPanel;\n\t        };\n\t        ContentRender.prototype.setPanel = function (panel) {\n\t            this.contentPanel = panel;\n\t        };\n\t        ContentRender.prototype.getTable = function () {\n\t            return this.contentTable;\n\t        };\n\t        ContentRender.prototype.setTable = function (table) {\n\t            this.contentTable = table;\n\t        };\n\t        ContentRender.prototype.getRows = function () {\n\t            return this.rows;\n\t        };\n\t        ContentRender.prototype.getRowElements = function () {\n\t            return this.rowElements;\n\t        };\n\t        ContentRender.prototype.setRowElements = function (elements) {\n\t            this.rowElements = elements;\n\t        };\n\t        ContentRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        ContentRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        ContentRender.prototype.setVisible = function (columns) {\n\t            var rows = this.getRows();\n\t            var element;\n\t            var testRow;\n\t            rows.some(function (r) { if (r.isDataRow) {\n\t                testRow = r;\n\t            } return r.isDataRow; });\n\t            var tasks = [];\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                var idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (this.canSkip(column, testRow, idx)) {\n\t                    continue;\n\t                }\n\t                var displayVal = column.visible === true ? '' : 'none';\n\t                ej2_base_3.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t            }\n\t            this.refreshContentRows({ requestType: 'refresh' });\n\t        };\n\t        ContentRender.prototype.colGroupRefresh = function () {\n\t            if (this.getColGroup()) {\n\t                var colGroup = this.getColGroup();\n\t                colGroup.innerHTML = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').innerHTML;\n\t                this.setColGroup(colGroup);\n\t            }\n\t        };\n\t        ContentRender.prototype.initializeContentDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(gObj.getContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        ContentRender.prototype.canSkip = function (column, row, index) {\n\t            return ej2_base_2.isNullOrUndefined(row) ||\n\t                ej2_base_2.isNullOrUndefined(column.visible) ||\n\t                row.cells[index].visible === column.visible;\n\t        };\n\t        ContentRender.prototype.getModelGenerator = function () {\n\t            return this.generator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        };\n\t        ContentRender.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n\t            this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n\t                .forEach(function (row) { return row.isSelected = set; });\n\t        };\n\t        ContentRender.prototype.getRowByIndex = function (index) {\n\t            return this.parent.getDataRows()[index];\n\t        };\n\t        return ContentRender;\n\t    }());\n\t    exports.ContentRender = ContentRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(15), __webpack_require__(13), __webpack_require__(14), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_1, enum_1, cell_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowModelGenerator = (function () {\n\t        function RowModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        RowModelGenerator.prototype.generateRows = function (data, args) {\n\t            var rows = [];\n\t            var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n\t            for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n\t                rows[i] = this.generateRow(data[i], startIndex);\n\t            }\n\t            return rows;\n\t        };\n\t        RowModelGenerator.prototype.ensureColumns = function () {\n\t            var cols = [];\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cols.push(this.generateCell({}, null, enum_1.CellType.DetailExpand));\n\t            }\n\t            return cols;\n\t        };\n\t        RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            options.uid = util_1.getUid('grid-row');\n\t            options.data = data;\n\t            options.index = index;\n\t            options.indent = indent;\n\t            options.isDataRow = true;\n\t            options.cssClass = cssClass;\n\t            options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n\t            options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n\t            var cells = this.ensureColumns();\n\t            var row = new row_1.Row(options);\n\t            row.cells = cells.concat(this.generateCells(options));\n\t            return row;\n\t        };\n\t        RowModelGenerator.prototype.generateCells = function (options) {\n\t            var _this = this;\n\t            var dummies = this.parent.getColumns();\n\t            var tmp = [];\n\t            dummies.forEach(function (dummy, index) {\n\t                return tmp.push(_this.generateCell(dummy, options.uid, undefined, null, index));\n\t            });\n\t            return tmp;\n\t        };\n\t        RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(column.field || column.template),\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.template),\n\t                'rowID': rowId,\n\t                'column': column,\n\t                'cellType': !ej2_base_1.isNullOrUndefined(cellType) ? cellType : enum_1.CellType.Data,\n\t                'colSpan': colSpan\n\t            };\n\t            if (opt.isDataCell) {\n\t                opt.index = this.parent.getColumnIndexByField(column.field);\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        RowModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            input.forEach(function (row) { return row.cells = _this.generateCells(row); });\n\t            return input;\n\t        };\n\t        return RowModelGenerator;\n\t    }());\n\t    exports.RowModelGenerator = RowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(15), __webpack_require__(5), __webpack_require__(13), __webpack_require__(18), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, ej2_base_1, enum_1, row_model_generator_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupModelGenerator = (function (_super) {\n\t        __extends(GroupModelGenerator, _super);\n\t        function GroupModelGenerator(parent) {\n\t            var _this = _super.call(this, parent) || this;\n\t            _this.rows = [];\n\t            _this.index = 0;\n\t            _this.parent = parent;\n\t            _this.summaryModelGen = new summary_model_generator_1.GroupSummaryModelGenerator(parent);\n\t            _this.captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(parent);\n\t            return _this;\n\t        }\n\t        GroupModelGenerator.prototype.generateRows = function (data, args) {\n\t            if (this.parent.groupSettings.columns.length === 0) {\n\t                return _super.prototype.generateRows.call(this, data, args);\n\t            }\n\t            this.rows = [];\n\t            this.index = this.parent.enableVirtualization ? (this.parent.pageSettings.currentPage - 1) * data.records.length : 0;\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                this.getGroupedRecords(0, data[i], data.level);\n\t            }\n\t            this.index = 0;\n\t            return this.rows;\n\t        };\n\t        GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw) {\n\t            var level = raw;\n\t            if (ej2_base_1.isNullOrUndefined(data.items)) {\n\t                if (ej2_base_1.isNullOrUndefined(data.GroupGuid)) {\n\t                    this.rows = this.rows.concat(this.generateDataRows(data, index));\n\t                }\n\t                else {\n\t                    for (var j = 0, len = data.length; j < len; j++) {\n\t                        this.getGroupedRecords(index, data[j], data.level);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.rows = this.rows.concat(this.generateCaptionRow(data, index));\n\t                if (data.items && data.items.length) {\n\t                    this.getGroupedRecords(index + 1, data.items, data.items.level);\n\t                }\n\t                if (this.parent.aggregates.length) {\n\t                    (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n\t                }\n\t            }\n\t            var _a;\n\t        };\n\t        GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n\t            var _this = this;\n\t            var cells = [];\n\t            var visibles = [];\n\t            var column = this.parent.getColumnByField(field);\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization) {\n\t                column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n\t            }\n\t            var groupedLen = this.parent.groupSettings.columns.length;\n\t            var gObj = this.parent;\n\t            if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n\t                for (var i = 0; i < indent; i++) {\n\t                    cells.push(this.generateIndentCell());\n\t                }\n\t                cells.push(this.generateCell({}, null, enum_1.CellType.Expand));\n\t            }\n\t            indent = this.parent.enableColumnVirtualization ? 1 :\n\t                (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n\t                    indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n\t            if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n\t                var captionCells = this.captionModelGen.generateRows(data)[0];\n\t                ej2_base_1.extend(data, captionCells.data);\n\t                visibles = captionCells.cells.filter(function (cell) { return cell.visible; });\n\t                visibles = visibles.slice(groupedLen + 1, visibles.length);\n\t                indent = indent - visibles.length;\n\t            }\n\t            var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n\t            var wFlag = true;\n\t            cols.forEach(function (col, index) {\n\t                var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n\t                if (tmpFlag) {\n\t                    wFlag = false;\n\t                }\n\t                var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n\t                    enum_1.CellType.GroupCaption : enum_1.CellType.GroupCaptionEmpty;\n\t                indent = _this.parent.enableColumnVirtualization && cellType === enum_1.CellType.GroupCaption ? indent + groupedLen : indent;\n\t                cells.push(_this.generateCell(column, null, cellType, indent));\n\t            });\n\t            cells.push.apply(cells, visibles);\n\t            return cells;\n\t        };\n\t        GroupModelGenerator.prototype.generateCaptionRow = function (data, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            var col = this.parent.getColumnByField(data.field);\n\t            options.data = ej2_base_1.extend({}, data);\n\t            if (col) {\n\t                options.data.field = data.field;\n\t            }\n\t            options.isDataRow = false;\n\t            var row = new row_1.Row(options);\n\t            row.indent = indent;\n\t            row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n\t            return row;\n\t        };\n\t        GroupModelGenerator.prototype.generateDataRows = function (data, indent) {\n\t            var rows = [];\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent);\n\t                for (var j = 0; j < indent; j++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n\t                        continue;\n\t                    }\n\t                    rows[i].cells.unshift(this.generateIndentCell());\n\t                }\n\t                this.index++;\n\t            }\n\t            return rows;\n\t        };\n\t        GroupModelGenerator.prototype.generateIndentCell = function () {\n\t            return this.generateCell({}, null, enum_1.CellType.Indent);\n\t        };\n\t        GroupModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            input.forEach(function (row) {\n\t                if (row.isDataRow) {\n\t                    row.cells = _this.generateCells(row);\n\t                    for (var j = 0; j < row.indent; j++) {\n\t                        if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n\t                            continue;\n\t                        }\n\t                        row.cells.unshift(_this.generateIndentCell());\n\t                    }\n\t                }\n\t                else {\n\t                    var cRow = _this.generateCaptionRow(row.data, row.indent);\n\t                    row.cells = cRow.cells;\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        return GroupModelGenerator;\n\t    }(row_model_generator_1.RowModelGenerator));\n\t    exports.GroupModelGenerator = GroupModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(15), __webpack_require__(8), __webpack_require__(5), __webpack_require__(6), __webpack_require__(13), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, column_1, ej2_base_1, util_1, enum_1, cell_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryModelGenerator = (function () {\n\t        function SummaryModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        SummaryModelGenerator.prototype.getData = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            this.parent.aggregates.slice().forEach(function (row) {\n\t                var columns = row.columns.filter(function (column) {\n\t                    return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n\t                        || _this.columnSelector(column);\n\t                });\n\t                if (columns.length) {\n\t                    rows.push({ columns: columns });\n\t                }\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.footerTemplate !== undefined;\n\t        };\n\t        SummaryModelGenerator.prototype.getColumns = function () {\n\t            var columns = [];\n\t            if (this.parent.allowGrouping) {\n\t                this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new column_1.Column({})); });\n\t            }\n\t            if (this.parent.detailTemplate) {\n\t                columns.push(new column_1.Column({}));\n\t            }\n\t            columns.push.apply(columns, this.parent.getColumns());\n\t            return columns;\n\t        };\n\t        SummaryModelGenerator.prototype.generateRows = function (input, args) {\n\t            var _this = this;\n\t            if (this.parent.currentViewData.length === 0) {\n\t                return [];\n\t            }\n\t            var data = this.buildSummaryData(input, args);\n\t            var rows = [];\n\t            this.getData().forEach(function (row, index) {\n\t                rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined));\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw) {\n\t            var _this = this;\n\t            var tmp = [];\n\t            var indents = this.getIndentByLevel(raw);\n\t            var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ? 1 : 0);\n\t            this.getColumns().forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() : enum_1.CellType.Indent, indents[index])); });\n\t            var row = new row_1.Row({ data: data, attributes: { class: 'e-summaryrow' } });\n\t            row.cells = tmp;\n\t            row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n\t            return row;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent) {\n\t            var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n\t            var attrs = { 'style': { 'textAlign': column.textAlign } };\n\t            if (indent) {\n\t                attrs.class = indent;\n\t            }\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(sColumn),\n\t                'isTemplate': sColumn && !ej2_base_1.isNullOrUndefined(sColumn.footerTemplate\n\t                    || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n\t                'column': sColumn || {},\n\t                'attributes': attrs,\n\t                'cellType': cellType\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n\t            var _this = this;\n\t            var dummy = [];\n\t            var summaryRows = this.getData();\n\t            var single = {};\n\t            var key = '';\n\t            summaryRows.forEach(function (row) {\n\t                single = {};\n\t                row.columns.forEach(function (column) {\n\t                    single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n\t                });\n\t                dummy.push(single);\n\t            });\n\t            return dummy;\n\t        };\n\t        SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n\t            return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n\t        };\n\t        SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n\t            var _this = this;\n\t            var types = column.type;\n\t            var helper = {};\n\t            var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n\t            var group = data;\n\t            if (!(types instanceof Array)) {\n\t                types = [column.type];\n\t            }\n\t            types.forEach(function (type) {\n\t                var key = column.field + ' - ' + type;\n\t                var disp = column.columnName;\n\t                var val = group.aggregates && group.aggregates[key] ? group.aggregates[key] :\n\t                    util_1.calculateAggregate(type, group.aggregates ? group.result : data, column, _this.parent);\n\t                single[disp] = single[disp] || {};\n\t                single[disp][key] = val;\n\t                single[disp][type] = formatFn(val);\n\t                if (group.field) {\n\t                    single[disp].field = group.field;\n\t                    single[disp].key = group.key;\n\t                }\n\t            });\n\t            helper.format = column.getFormatter();\n\t            column.setTemplate(helper);\n\t            return single;\n\t        };\n\t        SummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.Summary;\n\t        };\n\t        return SummaryModelGenerator;\n\t    }());\n\t    exports.SummaryModelGenerator = SummaryModelGenerator;\n\t    var GroupSummaryModelGenerator = (function (_super) {\n\t        __extends(GroupSummaryModelGenerator, _super);\n\t        function GroupSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupFooterTemplate !== undefined;\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n\t            if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n\t            return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.GroupSummary;\n\t        };\n\t        return GroupSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.GroupSummaryModelGenerator = GroupSummaryModelGenerator;\n\t    var CaptionSummaryModelGenerator = (function (_super) {\n\t        __extends(CaptionSummaryModelGenerator, _super);\n\t        function CaptionSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupCaptionTemplate !== undefined;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getData = function () {\n\t            var initVal = { columns: [] };\n\t            return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n\t                    prev.columns = prev.columns.concat(cur.columns);\n\t                    return prev;\n\t                }, initVal)];\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n\t            return (this.getData()[0].columns || []).length === 0;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.CaptionSummary;\n\t        };\n\t        return CaptionSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.CaptionSummaryModelGenerator = CaptionSummaryModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRenderer = (function () {\n\t        function CellRenderer(parent, locator) {\n\t            this.element = ej2_base_2.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            this.localizer = locator.getService('localization');\n\t            this.formatter = locator.getService('valueFormatter');\n\t            this.parent = parent;\n\t        }\n\t        CellRenderer.prototype.getGui = function () {\n\t            return '';\n\t        };\n\t        CellRenderer.prototype.format = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.format)) {\n\t                value = this.formatter.toView(value, column.getFormatter());\n\t            }\n\t            return ej2_base_1.isNullOrUndefined(value) ? '' : value.toString();\n\t        };\n\t        CellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var result;\n\t            if (cell.column.template) {\n\t                var literals = ['index'];\n\t                result = cell.column.getColumnTemplate()(ej2_base_1.extend({ 'index': attributes[literals[0]] }, data));\n\t                util_1.appendChildren(node, result);\n\t                node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n\t                    cell.column.headerText);\n\t                return false;\n\t            }\n\t            return true;\n\t        };\n\t        CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.formatter)) {\n\t                if (util_1.doesImplementInterface(column.formatter, 'getValue')) {\n\t                    var formatter = column.formatter;\n\t                    value = new formatter().getValue(column, data);\n\t                }\n\t                else if (typeof column.formatter === 'function') {\n\t                    value = column.formatter(column, data);\n\t                }\n\t                else {\n\t                    value = column.formatter.getValue(column, data);\n\t                }\n\t            }\n\t            return value;\n\t        };\n\t        CellRenderer.prototype.render = function (cell, data, attributes) {\n\t            return this.refreshCell(cell, data, attributes);\n\t        };\n\t        CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n\t            var node = this.refreshCell(cell, data, attributes);\n\t            td.innerHTML = '';\n\t            var elements = [].slice.call(node.childNodes);\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                td.appendChild(elem);\n\t            }\n\t        };\n\t        CellRenderer.prototype.refreshCell = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var column = cell.column;\n\t            var innerHtml = this.getGui();\n\t            var value = this.getValue(column.field, data, column);\n\t            if (column.type === 'date') {\n\t                value = new Date(value);\n\t            }\n\t            value = this.format(column, value, data);\n\t            innerHtml = value.toString();\n\t            if (column.type === 'boolean') {\n\t                var isNull = (value !== 'true' && value !== 'false');\n\t                if (column.displayAsCheckBox) {\n\t                    node.classList.add('e-checkbox');\n\t                    innerHtml = isNull ? null : '<input type=\"checkbox\" disabled ' + (value === 'true' ? 'checked' : '') + '/>';\n\t                }\n\t                else {\n\t                    var localeStr = isNull ? null : value === 'true' ? 'True' : 'False';\n\t                    innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n\t                }\n\t            }\n\t            var fromFormatter = this.invokeFormatter(column, value, data);\n\t            innerHtml = !ej2_base_1.isNullOrUndefined(column.formatter) ? ej2_base_1.isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n\t            node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n\t            if (this.evaluate(node, cell, data, attributes)) {\n\t                this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n\t            }\n\t            this.setAttributes(node, cell, attributes);\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n\t            if (property === void 0) { property = 'innerHTML'; }\n\t            node[property] = innerHtml;\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n\t            var column = cell.column;\n\t            this.buildAttributeFromCell(node, cell);\n\t            util_1.setStyleAndAttributes(node, attributes);\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.textAlign) {\n\t                node.style.textAlign = column.textAlign;\n\t            }\n\t        };\n\t        CellRenderer.prototype.buildAttributeFromCell = function (node, cell) {\n\t            var attr = {};\n\t            var prop = { 'colindex': 'aria-colindex' };\n\t            var classes = [];\n\t            if (cell.colSpan) {\n\t                attr.colSpan = cell.colSpan;\n\t            }\n\t            if (cell.rowSpan) {\n\t                attr.rowSpan = cell.rowSpan;\n\t            }\n\t            if (cell.isTemplate) {\n\t                classes.push('e-templatecell');\n\t            }\n\t            if (cell.isSelected) {\n\t                classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(cell.index)) {\n\t                attr[prop.colindex] = cell.index;\n\t            }\n\t            if (!cell.visible) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(node, attr);\n\t        };\n\t        CellRenderer.prototype.getValue = function (field, data, column) {\n\t            return column.valueAccessor(column.field, data, column);\n\t        };\n\t        return CellRenderer;\n\t    }());\n\t    exports.CellRenderer = CellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(21), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderCellRenderer = (function (_super) {\n\t        __extends(HeaderCellRenderer, _super);\n\t        function HeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n\t            _this.ariaService = new aria_service_1.AriaService();\n\t            _this.hTxtEle = ej2_base_2.createElement('span', { className: 'e-headertext' });\n\t            _this.sortEle = ej2_base_2.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n\t            _this.gui = ej2_base_2.createElement('div');\n\t            return _this;\n\t        }\n\t        HeaderCellRenderer.prototype.getGui = function () {\n\t            return this.gui.cloneNode();\n\t        };\n\t        HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            return this.prepareHeader(cell, node);\n\t        };\n\t        HeaderCellRenderer.prototype.refresh = function (cell, node) {\n\t            this.clean(node);\n\t            return this.prepareHeader(cell, node);\n\t        };\n\t        HeaderCellRenderer.prototype.clean = function (node) {\n\t            node.innerHTML = '';\n\t        };\n\t        HeaderCellRenderer.prototype.prepareHeader = function (cell, node) {\n\t            var column = cell.column;\n\t            var ariaAttr = {};\n\t            var innerDIV = this.getGui();\n\t            var value = column.headerText;\n\t            var headerText = this.hTxtEle.cloneNode();\n\t            headerText[column.getDomSetter()] = value;\n\t            innerDIV.appendChild(headerText);\n\t            ej2_base_2.attributes(innerDIV, {\n\t                'e-mappinguid': column.uid,\n\t                'class': 'e-headercelldiv'\n\t            });\n\t            this.buildAttributeFromCell(node, cell);\n\t            this.appendHtml(node, innerDIV);\n\t            node.appendChild(this.sortEle.cloneNode());\n\t            if (cell.className) {\n\t                node.classList.add(cell.className);\n\t            }\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.allowSorting) {\n\t                ariaAttr.sort = 'none';\n\t            }\n\t            if (column.allowGrouping) {\n\t                ariaAttr.grabbed = false;\n\t            }\n\t            if (this.parent.allowResizing) {\n\t                var handler = ej2_base_2.createElement('div');\n\t                handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n\t                node.appendChild(handler);\n\t            }\n\t            this.ariaService.setOptions(node, ariaAttr);\n\t            if (!ej2_base_1.isNullOrUndefined(column.headerTextAlign) || !ej2_base_1.isNullOrUndefined(column.textAlign)) {\n\t                var alignment = column.headerTextAlign || column.textAlign;\n\t                innerDIV.style.textAlign = alignment;\n\t                if (alignment === 'right' || alignment === 'left') {\n\t                    node.classList.add(alignment === 'right' ? 'e-rightalign' : 'e-leftalign');\n\t                }\n\t            }\n\t            node.setAttribute('aria-rowspan', (!ej2_base_1.isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n\t            node.setAttribute('aria-colspan', '1');\n\t            return node;\n\t        };\n\t        HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return HeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderCellRenderer = HeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AriaService = (function () {\n\t        function AriaService() {\n\t        }\n\t        AriaService.prototype.setOptions = function (target, options) {\n\t            var props = Object.keys(options);\n\t            props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n\t        };\n\t        AriaService.prototype.setExpand = function (target, expand) {\n\t            setStateAndProperties(target, config.expand, expand);\n\t        };\n\t        AriaService.prototype.setSort = function (target, direction) {\n\t            setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n\t        };\n\t        AriaService.prototype.setBusy = function (target, isBusy) {\n\t            setStateAndProperties(target, config.busy, isBusy);\n\t            setStateAndProperties(target, config.invalid, null, true);\n\t        };\n\t        AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n\t            setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n\t        };\n\t        AriaService.prototype.setDropTarget = function (target, isTarget) {\n\t            setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n\t        };\n\t        return AriaService;\n\t    }());\n\t    exports.AriaService = AriaService;\n\t    function setStateAndProperties(target, attribute, value, remove) {\n\t        if (remove) {\n\t            target.removeAttribute(attribute);\n\t            return;\n\t        }\n\t        if (target) {\n\t            target.setAttribute(attribute, value);\n\t        }\n\t    }\n\t    var config = {\n\t        expand: 'aria-expanded',\n\t        role: 'role',\n\t        selected: 'aria-selected',\n\t        multiselectable: 'aria-multiselectable',\n\t        sort: 'aria-sort',\n\t        busy: 'aria-busy',\n\t        invalid: 'aria-invalid',\n\t        grabbed: 'aria-grabbed',\n\t        dropeffect: 'aria-dropeffect',\n\t        haspopup: 'aria-haspopup',\n\t        level: 'aria-level',\n\t        colcount: 'aria-colcount'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StackedHeaderCellRenderer = (function (_super) {\n\t        __extends(StackedHeaderCellRenderer, _super);\n\t        function StackedHeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', {\n\t                className: 'e-headercell e-stackedheadercell', attrs: {\n\t                    role: 'columnheader',\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            return _this;\n\t        }\n\t        StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var div = ej2_base_1.createElement('div', { className: 'e-stackedheadercelldiv' });\n\t            node.appendChild(div);\n\t            div.innerHTML = cell.column.headerText;\n\t            if (cell.column.toolTip) {\n\t                node.setAttribute('title', cell.column.toolTip);\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(cell.column.textAlign)) {\n\t                div.style.textAlign = cell.column.textAlign;\n\t            }\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-rowspan', '1');\n\t            return node;\n\t        };\n\t        return StackedHeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.StackedHeaderCellRenderer = StackedHeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(6), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var IndentCellRenderer = (function (_super) {\n\t        __extends(IndentCellRenderer, _super);\n\t        function IndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-indentcell' });\n\t            return _this;\n\t        }\n\t        IndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            return node;\n\t        };\n\t        return IndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.IndentCellRenderer = IndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupCaptionCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionCellRenderer, _super);\n\t        function GroupCaptionCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var value = this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n\t            node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n\t                (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n\t            return node;\n\t        };\n\t        return GroupCaptionCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionCellRenderer = GroupCaptionCellRenderer;\n\t    var GroupCaptionEmptyCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionEmptyCellRenderer, _super);\n\t        function GroupCaptionEmptyCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption' });\n\t            return _this;\n\t        }\n\t        GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.innerHTML = '&nbsp;';\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            return node;\n\t        };\n\t        return GroupCaptionEmptyCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionEmptyCellRenderer = GroupCaptionEmptyCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(25)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, indent_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExpandCellRenderer = (function (_super) {\n\t        __extends(ExpandCellRenderer, _super);\n\t        function ExpandCellRenderer() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        ExpandCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.className = 'e-recordplusexpand';\n\t            node.setAttribute('ej-mappingname', data.field);\n\t            node.setAttribute('ej-mappingvalue', data.key);\n\t            node.setAttribute('aria-expanded', 'true');\n\t            node.setAttribute('tabindex', '-1');\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-gdiagonaldown e-icon-gdownarrow' }));\n\t            return node;\n\t        };\n\t        return ExpandCellRenderer;\n\t    }(indent_cell_renderer_1.IndentCellRenderer));\n\t    exports.ExpandCellRenderer = ExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderIndentCellRenderer = (function (_super) {\n\t        __extends(HeaderIndentCellRenderer, _super);\n\t        function HeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-grouptopleftcell' });\n\t            return _this;\n\t        }\n\t        HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '&nbsp;' }));\n\t            return node;\n\t        };\n\t        return HeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderIndentCellRenderer = HeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailHeaderIndentCellRenderer = (function (_super) {\n\t        __extends(DetailHeaderIndentCellRenderer, _super);\n\t        function DetailHeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-detailheadercell' });\n\t            return _this;\n\t        }\n\t        DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-emptycell' }));\n\t            return node;\n\t        };\n\t        return DetailHeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailHeaderIndentCellRenderer = DetailHeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailExpandCellRenderer = (function (_super) {\n\t        __extends(DetailExpandCellRenderer, _super);\n\t        function DetailExpandCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', {\n\t                className: 'e-detailrowcollapse',\n\t                attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n\t            });\n\t            return _this;\n\t        }\n\t        DetailExpandCellRenderer.prototype.render = function () {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n\t            return node;\n\t        };\n\t        return DetailExpandCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailExpandCellRenderer = DetailExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRendererFactory = (function () {\n\t        function CellRendererFactory() {\n\t            this.cellRenderMap = {};\n\t        }\n\t        CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                this.cellRenderMap[name] = type;\n\t            }\n\t        };\n\t        CellRendererFactory.prototype.getCellRenderer = function (name) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                throw \"The cellRenderer \" + name + \" is not found\";\n\t            }\n\t            else {\n\t                return this.cellRenderMap[name];\n\t            }\n\t        };\n\t        return CellRendererFactory;\n\t    }());\n\t    exports.CellRendererFactory = CellRendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ServiceLocator = (function () {\n\t        function ServiceLocator() {\n\t            this.services = {};\n\t        }\n\t        ServiceLocator.prototype.register = function (name, type) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                this.services[name] = type;\n\t            }\n\t        };\n\t        ServiceLocator.prototype.getService = function (name) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                throw \"The service \" + name + \" is not registered\";\n\t            }\n\t            return this.services[name];\n\t        };\n\t        return ServiceLocator;\n\t    }());\n\t    exports.ServiceLocator = ServiceLocator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RendererFactory = (function () {\n\t        function RendererFactory() {\n\t            this.rendererMap = {};\n\t        }\n\t        RendererFactory.prototype.addRenderer = function (name, type) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                this.rendererMap[rName] = type;\n\t            }\n\t        };\n\t        RendererFactory.prototype.getRenderer = function (name) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                throw \"The renderer \" + rName + \" is not found\";\n\t            }\n\t            else {\n\t                return this.rendererMap[rName];\n\t            }\n\t        };\n\t        return RendererFactory;\n\t    }());\n\t    exports.RendererFactory = RendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(9), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, column_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnWidthService = (function () {\n\t        function ColumnWidthService(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ColumnWidthService.prototype.setWidthToColumns = function () {\n\t            var _this = this;\n\t            var i = 0;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            var wFlag = true;\n\t            if (this.parent.allowGrouping) {\n\t                for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        wFlag = false;\n\t                        continue;\n\t                    }\n\t                    this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t            }\n\t            this.parent.getColumns().forEach(function (column, index) {\n\t                _this.setColumnWidth(column, wFlag ? undefined : index);\n\t            });\n\t        };\n\t        ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n\t            var columnIndex = ej2_base_1.isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n\t            var cWidth = this.getWidth(column);\n\t            if (cWidth !== null) {\n\t                this.setWidth(cWidth, columnIndex);\n\t                if (this.parent.allowResizing) {\n\t                    this.setWidthToTable();\n\t                }\n\t                this.parent.notify(constant_1.columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.setWidth = function (width, index) {\n\t            var header = this.parent.getHeaderTable();\n\t            var content = this.parent.getContentTable();\n\t            var fWidth = ej2_base_2.formatUnit(width);\n\t            var headerCol = header.querySelector('colgroup').children[index];\n\t            if (headerCol) {\n\t                headerCol.style.width = fWidth;\n\t                content.querySelector('colgroup').children[index].style.width = fWidth;\n\t            }\n\t            var edit = content.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.querySelector('colgroup').children[index].style.width = fWidth;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n\t            var previous = this.getHeightFromDirection(element, 'previous');\n\t            var next = this.getHeightFromDirection(element, 'next');\n\t            return previous + next;\n\t        };\n\t        ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n\t            var sibling = element[direction + 'ElementSibling'];\n\t            var result = 0;\n\t            while (sibling) {\n\t                result += sibling.offsetHeight;\n\t                sibling = sibling[direction + 'ElementSibling'];\n\t            }\n\t            return result;\n\t        };\n\t        ColumnWidthService.prototype.getWidth = function (column) {\n\t            if (ej2_base_1.isNullOrUndefined(column.width) && this.parent.allowResizing) {\n\t                column.width = 200;\n\t            }\n\t            if (!column.width) {\n\t                return null;\n\t            }\n\t            var width = parseInt(column.width.toString(), 10);\n\t            if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n\t                return column.minWidth;\n\t            }\n\t            else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n\t                return column.maxWidth;\n\t            }\n\t            else {\n\t                return column.width;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getTableWidth = function (columns) {\n\t            var tWidth = 0;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                var cWidth = this.getWidth(column);\n\t                if (column.visible !== false && cWidth !== null) {\n\t                    tWidth += parseInt(cWidth.toString(), 10);\n\t                }\n\t            }\n\t            return tWidth;\n\t        };\n\t        ColumnWidthService.prototype.setWidthToTable = function () {\n\t            var tWidth = ej2_base_2.formatUnit(this.getTableWidth(this.parent.getColumns()));\n\t            this.parent.getHeaderTable().style.width = tWidth;\n\t            this.parent.getContentTable().style.width = tWidth;\n\t            var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.style.width = tWidth;\n\t            }\n\t        };\n\t        return ColumnWidthService;\n\t    }());\n\t    exports.ColumnWidthService = ColumnWidthService;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PageSettings = (function (_super) {\n\t        __extends(PageSettings, _super);\n\t        function PageSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return PageSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(12)\n\t    ], PageSettings.prototype, \"pageSize\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(8)\n\t    ], PageSettings.prototype, \"pageCount\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], PageSettings.prototype, \"currentPage\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], PageSettings.prototype, \"enableQueryString\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], PageSettings.prototype, \"pageSizes\", void 0);\n\t    exports.PageSettings = PageSettings;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Selection = (function () {\n\t        function Selection(parent, selectionSettings, locator) {\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRowCellIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.isMultiShiftRequest = false;\n\t            this.isMultiCtrlRequest = false;\n\t            this.enableSelectMultiTouch = false;\n\t            this.parent = parent;\n\t            this.selectionSettings = selectionSettings;\n\t            this.factory = locator.getService('rendererFactory');\n\t            this.addEventListener();\n\t        }\n\t        Selection.prototype.initializeSelection = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n\t        };\n\t        Selection.prototype.onActionBegin = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.onActionComplete = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.getModuleName = function () {\n\t            return 'selection';\n\t        };\n\t        Selection.prototype.destroy = function () {\n\t            this.hidePopUp();\n\t            this.clearSelection();\n\t            this.removeEventListener();\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n\t        };\n\t        Selection.prototype.isEditing = function () {\n\t            return this.parent.editSettings.mode !== 'batch' && this.parent.isEdit;\n\t        };\n\t        Selection.prototype.selectRow = function (index) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(index);\n\t            var selectData = gObj.getCurrentViewRecords()[index];\n\t            if (!this.isRowType() || !selectedRow || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isRowSelected = selectedRow.hasAttribute('aria-selected');\n\t            var isToogle = index === this.prevRowIndex && isRowSelected;\n\t            if (!isToogle) {\n\t                this.onActionBegin({\n\t                    data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    isShiftPressed: this.isMultiShiftRequest, row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelecting);\n\t            }\n\t            this.clearRow();\n\t            if (!isToogle) {\n\t                this.updateRowSelection(selectedRow, index);\n\t                this.parent.selectedRowIndex = index;\n\t            }\n\t            this.updateRowProps(index);\n\t            if (!isToogle) {\n\t                this.onActionComplete({\n\t                    data: selectData, rowIndex: index,\n\t                    row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n\t            this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n\t            this.parent.selectedRowIndex = endIndex;\n\t        };\n\t        Selection.prototype.selectRows = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            var selectedData = gObj.getCurrentViewRecords()[rowIndexes[0]];\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n\t                data: selectedData\n\t            }, events.rowSelecting);\n\t            this.clearRow();\n\t            for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n\t                var rowIndex = rowIndexes_1[_i];\n\t                this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n\t            }\n\t            this.updateRowProps(rowIndexes[0]);\n\t            this.onActionComplete({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                data: selectedData\n\t            }, events.rowSelected);\n\t        };\n\t        Selection.prototype.addRowsToSelection = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n\t                var rowIndex = rowIndexes_2[_i];\n\t                var data = gObj.getCurrentViewRecords()[rowIndex];\n\t                var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n\t                gObj.selectedRowIndex = rowIndex;\n\t                if (isUnSelected) {\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                    this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n\t                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n\t                    selectedRow.removeAttribute('aria-selected');\n\t                    this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                }\n\t                else {\n\t                    this.onActionBegin({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                        isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n\t                    }, events.rowSelecting);\n\t                    this.updateRowSelection(selectedRow, rowIndex);\n\t                }\n\t                this.updateRowProps(rowIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex\n\t                    }, events.rowSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n\t            var indexes = [];\n\t            var _a = (startIndex < endIndex) ?\n\t                { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n\t            for (; i <= max; i++) {\n\t                indexes.push(i);\n\t            }\n\t            if (startIndex > endIndex) {\n\t                indexes.reverse();\n\t            }\n\t            return indexes;\n\t        };\n\t        Selection.prototype.clearRow = function () {\n\t            this.clearRowSelection();\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.parent.selectedRowIndex = -1;\n\t        };\n\t        Selection.prototype.updateRowProps = function (startIndex) {\n\t            this.prevRowIndex = startIndex;\n\t            this.isRowSelected = this.selectedRowIndexes.length && true;\n\t        };\n\t        Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n\t            if (!selectedRow) {\n\t                return;\n\t            }\n\t            this.selectedRowIndexes.push(startIndex);\n\t            this.selectedRecords.push(selectedRow);\n\t            selectedRow.setAttribute('aria-selected', 'true');\n\t            this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n\t        };\n\t        Selection.prototype.clearSelection = function () {\n\t            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n\t            if (span.classList.contains('e-rowselect')) {\n\t                span.classList.remove('e-spanclicked');\n\t            }\n\t            this.clearRowSelection();\n\t            this.clearCellSelection();\n\t            this.enableSelectMultiTouch = false;\n\t        };\n\t        Selection.prototype.clearRowSelection = function () {\n\t            if (this.isRowSelected) {\n\t                var rows = this.parent.getDataRows();\n\t                var data = [];\n\t                var row = [];\n\t                var rowIndex = [];\n\t                var currentViewData = this.parent.getCurrentViewRecords();\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    data.push(currentViewData[this.selectedRowIndexes[i]]);\n\t                    row.push(this.parent.getRows()[this.selectedRowIndexes[i]]);\n\t                    rowIndex.push(this.selectedRowIndexes[i]);\n\t                }\n\t                this.rowDeselect(events.rowDeselecting, rowIndex, data, row);\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    var row_1 = this.parent.getRowByIndex(this.selectedRowIndexes[i]);\n\t                    if (row_1) {\n\t                        row_1.removeAttribute('aria-selected');\n\t                    }\n\t                    this.addRemoveClassesForRow(row_1, false, true, 'e-selectionbackground', 'e-active');\n\t                }\n\t                this.selectedRowIndexes = [];\n\t                this.selectedRecords = [];\n\t                this.isRowSelected = false;\n\t                this.parent.selectedRowIndex = undefined;\n\t                this.rowDeselect(events.rowDeselected, rowIndex, data, row);\n\t            }\n\t        };\n\t        Selection.prototype.rowDeselect = function (type, rowIndex, data, row) {\n\t            this.parent.trigger(type, {\n\t                rowIndex: rowIndex, data: data, row: row\n\t            });\n\t        };\n\t        Selection.prototype.selectCell = function (cellIndex) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, cellIndex.cellIndex);\n\t            this.currentIndex = cellIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (!this.isCellType() || !selectedCell || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n\t            var isUpdate = !(!ej2_base_2.isUndefined(this.prevCIdxs) &&\n\t                cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n\t                isCellSelected);\n\t            if (isUpdate) {\n\t                this.onActionBegin({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelecting);\n\t            }\n\t            this.clearCell();\n\t            if (isUpdate) {\n\t                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t            }\n\t            this.updateCellProps(cellIndex, cellIndex);\n\t            if (isUpdate) {\n\t                this.onActionComplete({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n\t            var min;\n\t            var max;\n\t            var stIndex = startIndex;\n\t            var edIndex = endIndex = endIndex ? endIndex : startIndex;\n\t            var cellIndexes;\n\t            this.currentIndex = startIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            this.clearCell();\n\t            if (startIndex.rowIndex > endIndex.rowIndex) {\n\t                var temp = startIndex;\n\t                startIndex = endIndex;\n\t                endIndex = temp;\n\t            }\n\t            for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n\t                if (this.selectionSettings.cellSelectionMode !== 'box') {\n\t                    min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n\t                    max = i === endIndex.rowIndex ? (endIndex.cellIndex) : gObj.getColumns().length - 1;\n\t                }\n\t                else {\n\t                    min = startIndex.cellIndex;\n\t                    max = endIndex.cellIndex;\n\t                }\n\t                cellIndexes = [];\n\t                for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(i, j);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    cellIndexes.push(j);\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                }\n\t                this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n\t            }\n\t            this.updateCellProps(stIndex, edIndex);\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.selectCells = function (rowCellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n\t            this.currentIndex = rowCellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n\t                for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                    this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n\t                }\n\t            }\n\t            this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.addCellsToSelection = function (cellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndexes[0].rowIndex, cellIndexes[0].cellIndex);\n\t            var index;\n\t            this.currentIndex = cellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n\t                var cellIndex = cellIndexes_1[_i];\n\t                for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                    if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n\t                        index = i;\n\t                        break;\n\t                    }\n\t                }\n\t                var args = {\n\t                    data: selectedData, cellIndex: cellIndexes[0],\n\t                    isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                };\n\t                var isUnSelected = index > -1;\n\t                if (isUnSelected) {\n\t                    var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n\t                    if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n\t                        this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                        selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n\t                        selectedCell.classList.remove('e-cellselectionbackground');\n\t                        selectedCell.removeAttribute('aria-selected');\n\t                        this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                    }\n\t                    else {\n\t                        isUnSelected = false;\n\t                        this.onActionBegin(args, events.cellSelecting);\n\t                        this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n\t                        this.updateCellSelection(selectedCell);\n\t                        this.addAttribute(selectedCell);\n\t                    }\n\t                }\n\t                else {\n\t                    this.onActionBegin(args, events.cellSelecting);\n\t                    this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t                }\n\t                this.updateCellProps(cellIndex, cellIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n\t                        previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n\t                            undefined, previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes\n\t                    }, events.cellSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.clearCell = function () {\n\t            this.clearCellSelection();\n\t        };\n\t        Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells) {\n\t            this.parent.trigger(type, {\n\t                cells: cells, data: data, cellIndexes: cellIndexes\n\t            });\n\t        };\n\t        Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n\t            if (!ej2_base_2.isNullOrUndefined(rowIndex)) {\n\t                this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            selectedCell.classList.add('e-cellselectionbackground');\n\t            this.addAttribute(selectedCell);\n\t        };\n\t        Selection.prototype.addAttribute = function (cell) {\n\t            this.target = cell;\n\t            cell.setAttribute('aria-selected', 'true');\n\t            cell.focus();\n\t        };\n\t        Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n\t            this.prevCIdxs = startIndex;\n\t            this.prevECIdxs = endIndex;\n\t            this.isCellSelected = this.selectedRowCellIndexes.length && true;\n\t        };\n\t        Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n\t            var isRowAvail;\n\t            var index;\n\t            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n\t                    isRowAvail = true;\n\t                    index = i;\n\t                    break;\n\t                }\n\t            }\n\t            if (isRowAvail) {\n\t                if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n\t                    this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n\t                }\n\t            }\n\t            else {\n\t                this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n\t            }\n\t        };\n\t        Selection.prototype.clearCellSelection = function () {\n\t            if (this.isCellSelected) {\n\t                var gObj = this.parent;\n\t                var selectedCells = this.getSelectedCellsElement();\n\t                var rowCell = this.selectedRowCellIndexes;\n\t                var data = [];\n\t                var cells = [];\n\t                var currentViewData = gObj.getCurrentViewRecords();\n\t                for (var i = 0, len = rowCell.length; i < len; i++) {\n\t                    data.push(currentViewData[rowCell[i].rowIndex]);\n\t                    for (var j = 0, cLen = rowCell.length; j < cLen; j++) {\n\t                        cells.push(this.parent.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n\t                    }\n\t                }\n\t                this.cellDeselect(events.cellDeselecting, rowCell, data, cells);\n\t                for (var i = 0, len = selectedCells.length; i < len; i++) {\n\t                    selectedCells[i].classList.remove('e-cellselectionbackground');\n\t                    selectedCells[i].removeAttribute('aria-selected');\n\t                }\n\t                this.selectedRowCellIndexes = [];\n\t                this.isCellSelected = false;\n\t                this.cellDeselect(events.cellDeselected, rowCell, data, cells);\n\t            }\n\t        };\n\t        Selection.prototype.getSelectedCellsElement = function () {\n\t            var rows = this.parent.getDataRows();\n\t            var cells = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n\t            }\n\t            return cells;\n\t        };\n\t        Selection.prototype.mouseMoveHandler = function (e) {\n\t            e.preventDefault();\n\t            var gBRect = this.parent.element.getBoundingClientRect();\n\t            var x1 = this.x;\n\t            var y1 = this.y;\n\t            var position = util_1.getPosition(e);\n\t            var x2 = position.x - gBRect.left;\n\t            var y2 = position.y - gBRect.top;\n\t            var tmp;\n\t            var target = ej2_base_3.closest(e.target, 'tr');\n\t            this.isDragged = true;\n\t            if (!target) {\n\t                target = ej2_base_3.closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n\t            }\n\t            if (x1 > x2) {\n\t                tmp = x2;\n\t                x2 = x1;\n\t                x1 = tmp;\n\t            }\n\t            if (y1 > y2) {\n\t                tmp = y2;\n\t                y2 = y1;\n\t                y1 = tmp;\n\t            }\n\t            this.element.style.left = x1 + 'px';\n\t            this.element.style.top = y1 + 'px';\n\t            this.element.style.width = x2 - x1 + 'px';\n\t            this.element.style.height = y2 - y1 + 'px';\n\t            if (target && !e.ctrlKey && !e.shiftKey) {\n\t                var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n\t                this.selectRowsByRange(this.startIndex, rowIndex);\n\t            }\n\t        };\n\t        Selection.prototype.mouseUpHandler = function (e) {\n\t            document.body.classList.remove('e-disableuserselect');\n\t            ej2_base_3.remove(this.element);\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n\t            ej2_base_1.EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.mouseDownHandler = function (e) {\n\t            var target = e.target;\n\t            var gridElement = util_1.parentsUntil(target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.parent.element.id) {\n\t                return;\n\t            }\n\t            if (e.shiftKey || e.ctrlKey) {\n\t                e.preventDefault();\n\t            }\n\t            if (this.parent.allowRowDragAndDrop && target.classList.contains('e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n\t                if (!this.isRowType() || this.isSingleSel() || ej2_base_3.closest(target, 'td').classList.contains('e-selectionbackground')) {\n\t                    this.isDragged = false;\n\t                    return;\n\t                }\n\t                document.body.classList.add('e-disableuserselect');\n\t                var tr = ej2_base_3.closest(e.target, 'tr');\n\t                var gBRect = this.parent.element.getBoundingClientRect();\n\t                var postion = util_1.getPosition(e);\n\t                this.startIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t                this.x = postion.x - gBRect.left;\n\t                this.y = postion.y - gBRect.top;\n\t                this.element = ej2_base_3.createElement('div', { className: 'e-griddragarea' });\n\t                this.parent.getContent().appendChild(this.element);\n\t                ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousemove', this.mouseMoveHandler, this);\n\t                ej2_base_1.EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n\t            }\n\t        };\n\t        Selection.prototype.clearSelAfterRefresh = function (e) {\n\t            if (e.requestType !== 'virtualscroll') {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        Selection.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeSelection, this);\n\t            this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.dataReady, this.dataReady, this);\n\t            this.parent.on(events.dataReady, this.clearSelAfterRefresh, this);\n\t            this.parent.on(events.columnPositionChanged, this.clearSelection, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t        };\n\t        Selection.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeSelection);\n\t            this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.dataReady, this.dataReady);\n\t            this.parent.off(events.dataReady, this.clearSelAfterRefresh);\n\t            this.parent.off(events.columnPositionChanged, this.clearSelection);\n\t        };\n\t        Selection.prototype.dataReady = function (e) {\n\t            if (e.requestType !== 'virtualscroll') {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        ;\n\t        Selection.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'single') {\n\t                if (this.selectedRowCellIndexes.length > 1) {\n\t                    this.clearCellSelection();\n\t                }\n\t                if (this.selectedRowIndexes.length > 1) {\n\t                    this.clearRowSelection();\n\t                }\n\t                this.enableSelectMultiTouch = false;\n\t                this.hidePopUp();\n\t            }\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.mode) ||\n\t                !ej2_base_2.isNullOrUndefined(e.properties.cellSelectionMode)) {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        Selection.prototype.hidePopUp = function () {\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            this.selectRow(this.parent.selectedRowIndex);\n\t        };\n\t        Selection.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch;\n\t            this.isMultiShiftRequest = e.shiftKey;\n\t            this.popUpClickHandler(e);\n\t            if (target.classList.contains('e-rowcell')) {\n\t                this.target = target;\n\t                this.rowCellSelectionHandler(parseInt(target.parentElement.getAttribute('aria-rowindex'), 10), parseInt(target.getAttribute('aria-colindex'), 10));\n\t                if (ej2_base_1.Browser.isDevice && this.parent.selectionSettings.type === 'multiple') {\n\t                    this.showPopup(e);\n\t                }\n\t            }\n\t            this.isMultiCtrlRequest = false;\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-rowselect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSelectMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSelectMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.showPopup = function (e) {\n\t            util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n\t                (this.selectionSettings.type === 'multiple' &&\n\t                    (this.selectedRecords.length > 1 || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n\t        };\n\t        Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n\t            if (!this.isMultiCtrlRequest && !this.isMultiShiftRequest) {\n\t                if (!this.isDragged) {\n\t                    this.selectRow(rowIndex);\n\t                }\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            else if (this.isMultiShiftRequest) {\n\t                this.selectRowsByRange(ej2_base_2.isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n\t                this.selectCellsByRange(ej2_base_2.isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            else {\n\t                this.addRowsToSelection([rowIndex]);\n\t                this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n\t            }\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.keyPressHandler = function (e) {\n\t            var checkScroll;\n\t            var preventDefault;\n\t            switch (e.action) {\n\t                case 'downArrow':\n\t                    checkScroll = true;\n\t                    this.downArrowKey();\n\t                    break;\n\t                case 'upArrow':\n\t                    checkScroll = true;\n\t                    this.upArrowKey();\n\t                    break;\n\t                case 'rightArrow':\n\t                    preventDefault = true;\n\t                    this.rightArrowKey();\n\t                    break;\n\t                case 'leftArrow':\n\t                    preventDefault = true;\n\t                    this.leftArrowKey();\n\t                    break;\n\t                case 'home':\n\t                    preventDefault = true;\n\t                    this.homeKey();\n\t                    break;\n\t                case 'end':\n\t                    preventDefault = true;\n\t                    this.endKey();\n\t                    break;\n\t                case 'ctrlHome':\n\t                    preventDefault = true;\n\t                    this.ctrlHomeKey();\n\t                    break;\n\t                case 'ctrlEnd':\n\t                    preventDefault = true;\n\t                    this.ctrlEndKey();\n\t                    break;\n\t                case 'shiftDown':\n\t                    this.shiftDownKey();\n\t                    break;\n\t                case 'shiftUp':\n\t                    this.shiftUpKey();\n\t                    break;\n\t                case 'shiftRight':\n\t                    this.shiftRightKey();\n\t                    break;\n\t                case 'shiftLeft':\n\t                    this.shiftLeftKey();\n\t                    break;\n\t                case 'escape':\n\t                    preventDefault = true;\n\t                    this.clearSelection();\n\t                    break;\n\t                case 'ctrlPlusA':\n\t                    preventDefault = true;\n\t                    this.ctrlPlusA();\n\t                    break;\n\t            }\n\t            if (checkScroll) {\n\t                var scrollElem = this.parent.getContent().firstElementChild;\n\t                if (this.selectedRecords.length || this.selectedRowCellIndexes.length) {\n\t                    var row = this.selectedRecords.length ? this.selectedRecords[0] :\n\t                        this.parent.getRowByIndex(this.selectedRowCellIndexes[0].rowIndex);\n\t                    var height = row.offsetHeight;\n\t                    var rowIndex = row.rowIndex;\n\t                    scrollElem.scrollTop = scrollElem.scrollTop + (e.action === 'downArrow' ? height : height * -1);\n\t                    if (this.checkVisible(row) &&\n\t                        rowIndex !== 0 && this.parent.getContentTable().querySelector('tbody').children.length !== rowIndex + 1) {\n\t                        e.preventDefault();\n\t                    }\n\t                }\n\t            }\n\t            if (preventDefault) {\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        Selection.prototype.checkVisible = function (element) {\n\t            var st = window.scrollY;\n\t            var y = element.getBoundingClientRect().top + st;\n\t            return y + 36 < (window.innerHeight + st) - this.getRowHeight(element) && y > (st - element.offsetHeight) +\n\t                this.getRowHeight(element);\n\t        };\n\t        Selection.prototype.getRowHeight = function (element) {\n\t            return element.getBoundingClientRect().height;\n\t        };\n\t        Selection.prototype.ctrlPlusA = function () {\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                this.selectRowsByRange(0, this.parent.getRows().length - 1);\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n\t            }\n\t        };\n\t        Selection.prototype.downArrowKey = function () {\n\t            this.applyDownUpKey(1, !ej2_base_2.isUndefined(this.parent.selectedRowIndex) && this.parent.selectedRowIndex + 1 < this.parent.getRows().length, !ej2_base_2.isUndefined(this.prevECIdxs) &&\n\t                this.prevECIdxs.rowIndex + 1 < this.parent.getRows().length);\n\t        };\n\t        Selection.prototype.upArrowKey = function () {\n\t            this.applyDownUpKey(-1, !ej2_base_2.isUndefined(this.parent.selectedRowIndex) && this.parent.selectedRowIndex - 1 > -1, !ej2_base_2.isUndefined(this.prevECIdxs) && this.prevECIdxs.rowIndex - 1 > -1);\n\t        };\n\t        Selection.prototype.applyDownUpKey = function (key, cond1, cond2) {\n\t            var gObj = this.parent;\n\t            if (this.isRowType() && cond1) {\n\t                this.selectRow(gObj.selectedRowIndex + key);\n\t                this.applyUpDown(gObj.selectedRowIndex);\n\t            }\n\t            if (this.isCellType() && cond2) {\n\t                this.selectCell({ rowIndex: this.prevECIdxs.rowIndex + key, cellIndex: this.prevECIdxs.cellIndex });\n\t            }\n\t        };\n\t        Selection.prototype.applyUpDown = function (rowIndex) {\n\t            var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n\t            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n\t            this.addAttribute(this.target);\n\t        };\n\t        Selection.prototype.rightArrowKey = function () {\n\t            this.preSelectedCellIndex = this.prevECIdxs;\n\t            this.applyRightLeftKey(1, 0, !ej2_base_2.isUndefined(this.prevECIdxs) && this.prevECIdxs.cellIndex + 1 < this.parent.getColumns().length);\n\t        };\n\t        Selection.prototype.leftArrowKey = function () {\n\t            this.preSelectedCellIndex = this.prevECIdxs;\n\t            this.applyRightLeftKey(-1, this.parent.getColumns().length - 1, !ej2_base_2.isUndefined(this.prevECIdxs) && this.prevECIdxs.cellIndex - 1 > -1);\n\t        };\n\t        Selection.prototype.applyRightLeftKey = function (key1, key2, cond) {\n\t            var gObj = this.parent;\n\t            var cellIndex;\n\t            var rowIndex;\n\t            if (!ej2_base_2.isNullOrUndefined(this.prevECIdxs)) {\n\t                cellIndex = this.prevECIdxs.cellIndex;\n\t                rowIndex = this.prevECIdxs.rowIndex;\n\t            }\n\t            if (this.isCellType()) {\n\t                if (cond && this.prevECIdxs.cellIndex + key1 > -1 &&\n\t                    this.prevECIdxs.cellIndex + key1 < this.parent.getColumns().length) {\n\t                    cellIndex = this.prevECIdxs.cellIndex + key1;\n\t                    rowIndex = this.prevECIdxs.rowIndex;\n\t                    this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t                }\n\t                else if (this.prevECIdxs.rowIndex + key1 > -1 &&\n\t                    this.prevECIdxs.rowIndex + key1 < this.parent.getRows().length) {\n\t                    cellIndex = key2;\n\t                    rowIndex = this.prevECIdxs.rowIndex + key1;\n\t                    this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t                }\n\t                if (this.isCellHide({ rowIndex: rowIndex, cellIndex: cellIndex })) {\n\t                    if (!((cellIndex === 0 && rowIndex === 0) ||\n\t                        (cellIndex === gObj.getColumns().length - 1 && rowIndex === gObj.getRows().length - 1))) {\n\t                        this.applyRightLeftKey(key1, key2, cond);\n\t                    }\n\t                    else {\n\t                        this.selectCell(this.preSelectedCellIndex);\n\t                    }\n\t                }\n\t            }\n\t            else if (this.isRowType()) {\n\t                var cellIndex_1 = parseInt(this.target.getAttribute('aria-colindex'), 10);\n\t                var rowElement = ej2_base_3.closest(this.target, 'tr');\n\t                if (cellIndex_1 + key1 > -1 && cellIndex_1 + key1 < this.parent.getColumns().length) {\n\t                    var cell = rowElement.querySelectorAll('.e-rowcell')[cellIndex_1 + key1];\n\t                    if (cell) {\n\t                        if (!cell.classList.contains('e-hide')) {\n\t                            this.addAttribute(cell);\n\t                        }\n\t                        else {\n\t                            key1 += key1;\n\t                            this.applyRightLeftKey(key1, key2, cond);\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    this.addAttribute(this.target);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.homeKey = function () {\n\t            this.applyHomeEndKey({ rowIndex: this.currentIndex || 0, cellIndex: 0 });\n\t        };\n\t        Selection.prototype.endKey = function () {\n\t            this.applyHomeEndKey({ rowIndex: this.currentIndex || 0, cellIndex: this.parent.getColumns().length - 1 });\n\t        };\n\t        Selection.prototype.applyHomeEndKey = function (key) {\n\t            if (this.isCellType()) {\n\t                this.selectCell(key);\n\t                if (this.isCellHide(key)) {\n\t                    if (key.cellIndex > 0) {\n\t                        this.applyRightLeftKey(-1, this.parent.getColumns().length - 1, true);\n\t                    }\n\t                    else {\n\t                        this.applyRightLeftKey(1, 0, true);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.addAttribute(this.parent.getCellFromIndex(key.rowIndex, key.cellIndex));\n\t            }\n\t        };\n\t        Selection.prototype.shiftDownKey = function () {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                if (!ej2_base_2.isUndefined(this.prevRowIndex)) {\n\t                    var endIndex = ej2_base_2.isUndefined(gObj.selectedRowIndex) ? this.prevRowIndex + 1 :\n\t                        (gObj.selectedRowIndex + 1 < this.parent.getRows().length ?\n\t                            gObj.selectedRowIndex + 1 : gObj.selectedRowIndex);\n\t                    if (endIndex < this.parent.getRows().length) {\n\t                        this.selectRowsByRange(this.prevRowIndex, endIndex);\n\t                        this.applyUpDown(endIndex);\n\t                    }\n\t                }\n\t                else {\n\t                    this.selectRow(0);\n\t                }\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                if (!ej2_base_2.isUndefined(this.prevCIdxs)) {\n\t                    if (this.prevECIdxs.rowIndex + 1 < this.parent.getRows().length) {\n\t                        this.selectCellsByRange(this.prevCIdxs, { rowIndex: this.prevECIdxs.rowIndex + 1, cellIndex: this.prevECIdxs.cellIndex });\n\t                    }\n\t                }\n\t                else {\n\t                    this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: 1, cellIndex: 0 });\n\t                }\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.shiftUpKey = function () {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isRowType() && !ej2_base_2.isUndefined(this.prevRowIndex) && !this.isSingleSel()) {\n\t                var endIndex = ej2_base_2.isUndefined(gObj.selectedRowIndex) ? (this.prevRowIndex - 1 > -1 ? (this.prevRowIndex - 1) : 0) :\n\t                    ((gObj.selectedRowIndex - 1) > -1 ? gObj.selectedRowIndex - 1 : gObj.selectedRowIndex);\n\t                this.selectRowsByRange(this.prevRowIndex, endIndex);\n\t                this.applyUpDown(endIndex);\n\t            }\n\t            if (this.isCellType() && !ej2_base_2.isUndefined(this.prevECIdxs) && (this.prevECIdxs.rowIndex - 1) > -1 && !this.isSingleSel()) {\n\t                this.selectCellsByRange(this.prevCIdxs, { rowIndex: this.prevECIdxs.rowIndex - 1, cellIndex: this.prevECIdxs.cellIndex });\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.shiftLeftKey = function () {\n\t            this.applyShiftLeftRightKey(-1, !ej2_base_2.isUndefined(this.prevCIdxs) && this.prevECIdxs.cellIndex - 1 > -1);\n\t        };\n\t        Selection.prototype.shiftRightKey = function () {\n\t            this.applyShiftLeftRightKey(1, !ej2_base_2.isUndefined(this.prevCIdxs) && this.prevECIdxs.cellIndex + 1 < this.parent.getColumns().length);\n\t        };\n\t        Selection.prototype.applyShiftLeftRightKey = function (key, cond) {\n\t            var gObj = this.parent;\n\t            var cellIndex;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                if (cond) {\n\t                    cellIndex = { rowIndex: this.prevECIdxs.rowIndex, cellIndex: this.prevECIdxs.cellIndex + key };\n\t                    this.selectCellsByRange(this.prevCIdxs, {\n\t                        rowIndex: this.prevECIdxs.rowIndex, cellIndex: this.prevECIdxs.cellIndex + key\n\t                    });\n\t                }\n\t                else if (!this.isSingleSel()) {\n\t                    if (this.selectionSettings.cellSelectionMode === 'flow' &&\n\t                        (key > 0 ? this.prevECIdxs.rowIndex + 1 < this.parent.pageSettings.pageSize : this.prevECIdxs.rowIndex - 1 > -1)) {\n\t                        cellIndex = { rowIndex: this.prevECIdxs.rowIndex + key, cellIndex: key > 0 ? 0 : gObj.getColumns().length - 1 };\n\t                        this.selectCellsByRange(this.prevCIdxs, {\n\t                            rowIndex: this.prevECIdxs.rowIndex + key, cellIndex: key > 0 ? 0 : gObj.getColumns().length - 1\n\t                        });\n\t                    }\n\t                }\n\t                if (!ej2_base_2.isNullOrUndefined(cellIndex) && this.isCellHide(cellIndex) && !((cellIndex.rowIndex === 0 && cellIndex.cellIndex === 0) ||\n\t                    (cellIndex.rowIndex === gObj.getRows().length - 1 && cellIndex.cellIndex === gObj.getColumns().length))) {\n\t                    this.applyShiftLeftRightKey(key, cellIndex.cellIndex > 0);\n\t                }\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.ctrlHomeKey = function () {\n\t            this.applyCtrlHomeEndKey(0, 0);\n\t        };\n\t        Selection.prototype.ctrlEndKey = function () {\n\t            this.applyCtrlHomeEndKey(this.parent.getRows().length - 1, this.parent.getColumns().length - 1);\n\t        };\n\t        Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, colIndex) {\n\t            if (this.isRowType()) {\n\t                this.selectRow(rowIndex);\n\t                this.addAttribute(this.parent.getCellFromIndex(rowIndex, colIndex));\n\t            }\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: colIndex });\n\t                if (this.isCellHide({ rowIndex: rowIndex, cellIndex: colIndex })) {\n\t                    if (colIndex > 0) {\n\t                        this.applyRightLeftKey(-1, this.parent.getColumns().length - 1, true);\n\t                    }\n\t                    else {\n\t                        this.applyRightLeftKey(1, 0, true);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n\t            var args = [];\n\t            for (var _i = 3; _i < arguments.length; _i++) {\n\t                args[_i - 3] = arguments[_i];\n\t            }\n\t            if (row) {\n\t                var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n\t                var cell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n\t                if (cell) {\n\t                    cells.push(cell);\n\t                }\n\t                for (var i = 0, len = cells.length; i < len; i++) {\n\t                    if (isAdd) {\n\t                        ej2_base_3.classList(cells[i], args.slice(), []);\n\t                        cells[i].setAttribute('aria-selected', 'true');\n\t                    }\n\t                    else {\n\t                        ej2_base_3.classList(cells[i], [], args.slice());\n\t                        cells[i].removeAttribute('aria-selected');\n\t                    }\n\t                }\n\t            }\n\t            this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n\t        };\n\t        Selection.prototype.isRowType = function () {\n\t            return this.selectionSettings.mode === 'row' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isCellType = function () {\n\t            return this.selectionSettings.mode === 'cell' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isSingleSel = function () {\n\t            return this.selectionSettings.type === 'single';\n\t        };\n\t        Selection.prototype.isCellHide = function (cellIndex) {\n\t            return !this.parent.getColumns()[cellIndex.cellIndex].visible;\n\t        };\n\t        Selection.prototype.getRenderer = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.contentRenderer)) {\n\t                this.contentRenderer = this.factory.getRenderer(enum_1.RenderType.Content);\n\t            }\n\t            return this.contentRenderer;\n\t        };\n\t        return Selection;\n\t    }());\n\t    exports.Selection = Selection;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(9), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Search = (function () {\n\t        function Search(parent) {\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        Search.prototype.search = function (searchString) {\n\t            var gObj = this.parent;\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n\t                return;\n\t            }\n\t            searchString = searchString.toLowerCase();\n\t            if (searchString !== gObj.searchSettings.key) {\n\t                gObj.searchSettings.key = searchString;\n\t                gObj.dataBind();\n\t            }\n\t        };\n\t        Search.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.searchComplete, this.onActionComplete, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        };\n\t        Search.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.searchComplete, this.onActionComplete);\n\t            this.parent.off(events.destroy, this.destroy);\n\t        };\n\t        Search.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        Search.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(e.properties.key)) {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n\t                });\n\t            }\n\t            else {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin\n\t                });\n\t            }\n\t        };\n\t        Search.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n\t            }));\n\t        };\n\t        Search.prototype.getModuleName = function () {\n\t            return 'search';\n\t        };\n\t        return Search;\n\t    }());\n\t    exports.Search = Search;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ShowHide = (function () {\n\t        function ShowHide(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ShowHide.prototype.show = function (columnName, showBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, showBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = true;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.hide = function (columnName, hideBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, hideBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = false;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.getToggleFields = function (key) {\n\t            var finalized = [];\n\t            if (typeof key === 'string') {\n\t                finalized = [key];\n\t            }\n\t            else {\n\t                finalized = key;\n\t            }\n\t            return finalized;\n\t        };\n\t        ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n\t            var _this = this;\n\t            var columns = util_1.iterateArrayOrObject(keys, function (key, index) {\n\t                return util_1.iterateArrayOrObject(_this.parent.getColumns(), function (item, index) {\n\t                    if (item[getKeyBy] === key) {\n\t                        return item;\n\t                    }\n\t                    return undefined;\n\t                })[0];\n\t            });\n\t            return columns;\n\t        };\n\t        ShowHide.prototype.setVisible = function (columns) {\n\t            columns = ej2_base_1.isNullOrUndefined(columns) ? this.parent.getColumns() : columns;\n\t            this.parent.notify(events.columnVisibilityChanged, columns);\n\t        };\n\t        return ShowHide;\n\t    }());\n\t    exports.ShowHide = ShowHide;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(34)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, constant_1, width_controller_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Scroll = (function () {\n\t        function Scroll(parent) {\n\t            this.lastScrollTop = 0;\n\t            this.previousValues = { top: 0, left: 0 };\n\t            this.oneTimeReady = true;\n\t            this.parent = parent;\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Scroll.prototype.getModuleName = function () {\n\t            return 'scroll';\n\t        };\n\t        Scroll.prototype.setWidth = function () {\n\t            this.parent.element.style.width = ej2_base_3.formatUnit(this.parent.width);\n\t            if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar.element) {\n\t                this.parent.toolbarModule.toolbar.refreshOverflow();\n\t            }\n\t        };\n\t        Scroll.prototype.setHeight = function () {\n\t            var content = this.parent.getContent().firstChild;\n\t            content.style.height = ej2_base_3.formatUnit(this.parent.height);\n\t            this.ensureOverflow(content);\n\t        };\n\t        Scroll.prototype.setPadding = function () {\n\t            var content = this.parent.getHeaderContent();\n\t            var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n\t            var cssProps = this.getCssProperties();\n\t            content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n\t            content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n\t        };\n\t        Scroll.prototype.removePadding = function (rtl) {\n\t            var cssProps = this.getCssProperties(rtl);\n\t            this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n\t            this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n\t        };\n\t        Scroll.prototype.refresh = function () {\n\t            if (this.parent.height !== '100%') {\n\t                return;\n\t            }\n\t            var content = this.parent.getContent();\n\t            this.parent.element.style.height = '100%';\n\t            var height = this.widthService.getSiblingsHeight(content);\n\t            content.style.height = 'calc(100% - ' + height + 'px)';\n\t        };\n\t        Scroll.prototype.getThreshold = function () {\n\t            var appName = ej2_base_1.Browser.info.name;\n\t            if (appName === 'mozilla') {\n\t                return 0.5;\n\t            }\n\t            return 1;\n\t        };\n\t        Scroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.contentReady, this.wireEvents, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Scroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.contentReady, this.wireEvents);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Scroll.prototype.onContentScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            var isHeader = element.classList.contains('e-headercontent');\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var target = e.target;\n\t                var left = target.scrollLeft;\n\t                var sLimit = target.scrollWidth;\n\t                var isFooter = target.classList.contains('e-summarycontent');\n\t                if (_this.previousValues.left === left) {\n\t                    _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n\t                    return;\n\t                }\n\t                element.scrollLeft = left;\n\t                if (isFooter) {\n\t                    _this.header.scrollLeft = left;\n\t                }\n\t                _this.previousValues.left = left;\n\t                _this.parent.notify(constant_1.scroll, { left: left });\n\t            };\n\t        };\n\t        Scroll.prototype.wireEvents = function () {\n\t            if (this.oneTimeReady) {\n\t                this.content = this.parent.getContent().firstChild;\n\t                this.header = this.parent.getHeaderContent().firstChild;\n\t                ej2_base_1.EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n\t                ej2_base_1.EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n\t                if (this.parent.aggregates.length) {\n\t                    ej2_base_1.EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n\t                }\n\t                this.refresh();\n\t                this.oneTimeReady = false;\n\t            }\n\t            var table = this.parent.getContentTable();\n\t            if (table.scrollHeight < this.parent.getContent().clientHeight) {\n\t                ej2_base_2.addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n\t            }\n\t            if (!this.parent.enableVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t                this.content.scrollTop = this.previousValues.top;\n\t            }\n\t            if (!this.parent.enableColumnVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t            }\n\t        };\n\t        Scroll.prototype.getCssProperties = function (rtl) {\n\t            var css = {};\n\t            var enableRtl = ej2_base_3.isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n\t            css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n\t            css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n\t            return css;\n\t        };\n\t        Scroll.prototype.ensureOverflow = function (content) {\n\t            content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n\t        };\n\t        Scroll.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            this.setPadding();\n\t            this.oneTimeReady = true;\n\t            if (this.parent.height === 'auto') {\n\t                this.removePadding();\n\t            }\n\t            this.wireEvents();\n\t            this.setHeight();\n\t            this.setWidth();\n\t        };\n\t        Scroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.removePadding();\n\t            ej2_base_2.removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n\t            ej2_base_2.removeClass([this.parent.getContent().firstChild], 'e-content');\n\t            this.parent.getContent().firstChild.style.height = '';\n\t            this.parent.element.style.width = '';\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n\t        };\n\t        Scroll.getScrollBarWidth = function () {\n\t            return util_1.getScrollBarWidth();\n\t        };\n\t        return Scroll;\n\t    }());\n\t    exports.Scroll = Scroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Print = (function () {\n\t        function Print(parent, scrollModule) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.contentReady.bind(this));\n\t            this.scrollModule = scrollModule;\n\t        }\n\t        Print.prototype.print = function () {\n\t            var gObj = this.parent;\n\t            this.isPrinting = true;\n\t            this.element = gObj.element.cloneNode(true);\n\t            this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n\t            this.printWindow.moveTo(0, 0);\n\t            this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n\t            if (gObj.allowPaging) {\n\t                if (gObj.printMode === 'currentpage') {\n\t                    this.element.querySelector('.e-gridpager').style.display = 'none';\n\t                    this.contentReady();\n\t                }\n\t                else {\n\t                    this.isPagerDisabled = true;\n\t                    gObj.allowPaging = false;\n\t                    gObj.dataBind();\n\t                }\n\t            }\n\t            else {\n\t                this.contentReady();\n\t            }\n\t        };\n\t        Print.prototype.contentReady = function () {\n\t            var gObj = this.parent;\n\t            if (!this.isPrinting) {\n\t                return;\n\t            }\n\t            if (this.isPagerDisabled) {\n\t                this.element = gObj.element.cloneNode(true);\n\t                this.isPagerDisabled = false;\n\t                gObj.allowPaging = true;\n\t            }\n\t            if (gObj.height !== 'auto') {\n\t                var cssProps = this.scrollModule.getCssProperties();\n\t                var contentDiv = this.element.querySelector('.e-content');\n\t                var headerDiv = this.element.querySelector('.e-gridheader');\n\t                contentDiv.style.height = 'auto';\n\t                contentDiv.style.overflowY = 'auto';\n\t                headerDiv.style[cssProps.padding] = '';\n\t                headerDiv.firstElementChild.style[cssProps.border] = '';\n\t            }\n\t            if (gObj.allowGrouping) {\n\t                if (!gObj.groupSettings.columns.length) {\n\t                    this.element.querySelector('.e-groupdroparea').style.display = 'none';\n\t                }\n\t                else {\n\t                    this.removeColGroup(gObj.groupSettings.columns.length);\n\t                    util_1.removeElement(this.element, '.e-grouptopleftcell');\n\t                    util_1.removeElement(this.element, '.e-recordpluscollapse');\n\t                    util_1.removeElement(this.element, '.e-indentcell');\n\t                    util_1.removeElement(this.element, '.e-recordplusexpand');\n\t                }\n\t            }\n\t            if (gObj.toolbar) {\n\t                this.element.querySelector('.e-toolbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowFiltering && gObj.filterSettings.type === 'filterbar') {\n\t                this.element.querySelector('.e-filterbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowSelection) {\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-active'), 'e-active');\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-cellselection1background'), 'e-cellselection1background');\n\t            }\n\t            var args = {\n\t                requestType: 'print', element: this.element,\n\t                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]')\n\t            };\n\t            gObj.trigger(events.beforePrint, args);\n\t            ej2_base_2.print(this.element, this.printWindow);\n\t            this.isPrinting = false;\n\t            gObj.trigger(events.printComplete, args);\n\t        };\n\t        Print.prototype.removeColGroup = function (depth) {\n\t            var groupCaption = this.element.querySelectorAll('.e-groupcaption');\n\t            var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n\t            for (var i = 0; i < groupCaption.length; i++) {\n\t                groupCaption[i].setAttribute('colspan', colSpan);\n\t            }\n\t            var colGroups = this.element.querySelectorAll('colgroup');\n\t            for (var i = 0; i < colGroups.length; i++) {\n\t                for (var j = 0; j < depth; j++) {\n\t                    colGroups[i].childNodes[j].style.display = 'none';\n\t                }\n\t            }\n\t        };\n\t        Print.prototype.destroy = function () {\n\t        };\n\t        Print.prototype.getModuleName = function () {\n\t            return 'print';\n\t        };\n\t        return Print;\n\t    }());\n\t    exports.Print = Print;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(13), __webpack_require__(5), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, ej2_base_3, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AggregateColumn = (function (_super) {\n\t        __extends(AggregateColumn, _super);\n\t        function AggregateColumn() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.templateFn = {};\n\t            return _this;\n\t        }\n\t        AggregateColumn.prototype.setFormatter = function () {\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (this.format && (this.format.skeleton || this.format.format)) {\n\t                this.formatFn = valueFormatter.getFormatFunction(this.format);\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        AggregateColumn.prototype.setTemplate = function (helper) {\n\t            if (helper === void 0) { helper = {}; }\n\t            if (this.footerTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(this.footerTemplate, helper);\n\t            }\n\t            if (this.groupFooterTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(this.groupFooterTemplate, helper);\n\t            }\n\t            if (this.groupCaptionTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(this.groupCaptionTemplate, helper);\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getTemplate = function (type) {\n\t            return this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, type)];\n\t        };\n\t        return AggregateColumn;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"columnName\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"format\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n\t    exports.AggregateColumn = AggregateColumn;\n\t    var AggregateRow = (function (_super) {\n\t        __extends(AggregateRow, _super);\n\t        function AggregateRow() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AggregateRow;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Collection([], AggregateColumn)\n\t    ], AggregateRow.prototype, \"columns\", void 0);\n\t    exports.AggregateRow = AggregateRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(5), __webpack_require__(43), __webpack_require__(9), __webpack_require__(44)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, ej2_base_2, ej2_buttons_1, events, ej2_popups_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnChooser = (function () {\n\t        function ColumnChooser(parent, serviceLocator) {\n\t            this.showColumn = [];\n\t            this.hideColumn = [];\n\t            this.isDlgOpen = false;\n\t            this.dlghide = false;\n\t            this.initialOpenDlg = true;\n\t            this.stateChangeColumns = [];\n\t            this.isInitialOpen = false;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        ColumnChooser.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t        };\n\t        ColumnChooser.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n\t        };\n\t        ColumnChooser.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.initialEnd, this.render);\n\t        };\n\t        ColumnChooser.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderDlgContent();\n\t            this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t        };\n\t        ColumnChooser.prototype.clickHandler = function (e) {\n\t            var targetElement = e.target;\n\t            if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc')) || !ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc-toolbar'))) {\n\t                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n\t                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n\t                        this.isDlgOpen = true;\n\t                        return;\n\t                    }\n\t                }\n\t                else if (targetElement.classList.contains('e-cc-cancel')) {\n\t                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n\t                    this.columnChooserSearch('');\n\t                    this.removeCancelIcon();\n\t                }\n\t            }\n\t            else {\n\t                if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n\t                    this.dlgObj.hide();\n\t                    this.isDlgOpen = false;\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.hideDialog = function () {\n\t            if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n\t                this.dlgObj.hide();\n\t                this.isDlgOpen = false;\n\t            }\n\t        };\n\t        ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n\t            if (!this.dlgObj.visible) {\n\t                var pos = { X: null, Y: null };\n\t                var args1 = {\n\t                    requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n\t                    columns: this.parent.getColumns()\n\t                };\n\t                this.parent.trigger(events.beforeOpenColumnChooser, args1);\n\t                this.refreshCheckboxState();\n\t                this.dlgObj.dataBind();\n\t                this.dlgObj.element.style.maxHeight = '430px';\n\t                var elementVisible = this.dlgObj.element.style.display;\n\t                this.dlgObj.element.style.display = 'block';\n\t                var newpos = ej2_popups_1.calculateRelativeBasedPosition(target.closest('.e-toolbar-item'), this.dlgObj.element);\n\t                this.dlgObj.element.style.display = elementVisible;\n\t                this.dlgObj.element.style.top = newpos.top + target.closest('.e-cc-toolbar').getBoundingClientRect().height + 'px';\n\t                var dlgWidth = 250;\n\t                if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(target, '.e-bigger'))) {\n\t                    this.dlgObj.width = 253;\n\t                }\n\t                if (this.parent.element.classList.contains('e-device')) {\n\t                    this.dlgObj.target = document.body;\n\t                    this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                    this.dlgObj.refreshPosition();\n\t                    this.dlgObj.open = this.mOpenDlg.bind(this);\n\t                }\n\t                else {\n\t                    if (this.parent.enableRtl) {\n\t                        this.dlgObj.element.style.left = target.offsetLeft + 'px';\n\t                    }\n\t                    else {\n\t                        this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + target.closest('.e-cc-toolbar').clientWidth) + 2 + 'px';\n\t                    }\n\t                }\n\t                this.removeCancelIcon();\n\t                this.dlgObj.show();\n\t                this.wireEvents();\n\t            }\n\t            else {\n\t                this.unWireEvents();\n\t                this.hideDialog();\n\t                this.addcancelIcon();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n\t            if (this.dlgObj.visible) {\n\t                this.hideDialog();\n\t                return;\n\t            }\n\t            if (!this.isInitialOpen) {\n\t                this.dlgObj.content = this.renderChooserList();\n\t            }\n\t            else {\n\t                this.refreshCheckboxState();\n\t            }\n\t            this.dlgObj.dataBind();\n\t            this.dlgObj.position = { X: 'center', Y: 'center' };\n\t            if (ej2_base_1.isNullOrUndefined(X)) {\n\t                this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                this.dlgObj.refreshPosition();\n\t            }\n\t            else {\n\t                this.dlgObj.element.style.top = '';\n\t                this.dlgObj.element.style.left = '';\n\t                this.dlgObj.element.style.top = Y + 'px';\n\t                this.dlgObj.element.style.left = X + 'px';\n\t            }\n\t            this.dlgObj.show();\n\t            this.isInitialOpen = true;\n\t            this.wireEvents();\n\t        };\n\t        ColumnChooser.prototype.renderDlgContent = function () {\n\t            var y;\n\t            this.dlgDiv = ej2_base_1.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n\t            this.parent.element.appendChild(this.dlgDiv);\n\t            var xpos = this.parent.element.getBoundingClientRect().width - 250;\n\t            var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n\t            var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t            if (!ej2_base_1.isNullOrUndefined(tarElement)) {\n\t                y = tarElement.getBoundingClientRect().top;\n\t            }\n\t            var pos = { X: null, Y: null };\n\t            this.dlgObj = new ej2_popups_1.Dialog({\n\t                header: this.l10n.getConstant('ChooseColumns'),\n\t                showCloseIcon: false,\n\t                closeOnEscape: false,\n\t                locale: this.parent.locale,\n\t                visible: false,\n\t                enableRtl: this.parent.enableRtl,\n\t                target: document.getElementById(this.parent.element.id),\n\t                buttons: [{\n\t                        click: this.confirmDlgBtnClick.bind(this),\n\t                        buttonModel: {\n\t                            content: this.l10n.getConstant('OKButton'), isPrimary: true,\n\t                            cssClass: 'e-cc e-cc_okbtn',\n\t                        }\n\t                    },\n\t                    {\n\t                        click: this.clearActions.bind(this),\n\t                        buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n\t                    }],\n\t                content: this.renderChooserList(),\n\t                width: 250,\n\t                cssClass: 'e-cc',\n\t                animationSettings: { effect: 'None' },\n\t            });\n\t            this.dlgObj.appendTo(this.dlgDiv);\n\t        };\n\t        ColumnChooser.prototype.renderChooserList = function () {\n\t            this.mainDiv = ej2_base_1.createElement('div', { className: 'e-main-div e-cc' });\n\t            var searchDiv = ej2_base_1.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n\t            var ccsearchele = ej2_base_1.createElement('input', {\n\t                className: 'e-ccsearch e-cc e-input',\n\t                attrs: { placeholder: this.l10n.getConstant('Search') }\n\t            });\n\t            var ccsearchicon = ej2_base_1.createElement('span', { className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon' });\n\t            var conDiv = ej2_base_1.createElement('div', { className: 'e-cc-contentdiv' });\n\t            this.innerDiv = ej2_base_1.createElement('div', { className: 'e-innerdiv e-cc' });\n\t            searchDiv.appendChild(ccsearchele);\n\t            searchDiv.appendChild(ccsearchicon);\n\t            ccsearchele.addEventListener('focus', function () {\n\t                ccsearchele.parentElement.classList.add('e-input-focus');\n\t            });\n\t            ccsearchele.addEventListener('blur', function () {\n\t                ccsearchele.parentElement.classList.remove('e-input-focus');\n\t            });\n\t            var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n\t            this.innerDiv.appendChild(innerDivContent);\n\t            conDiv.appendChild(this.innerDiv);\n\t            this.mainDiv.appendChild(searchDiv);\n\t            this.mainDiv.appendChild(conDiv);\n\t            return this.mainDiv;\n\t        };\n\t        ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n\t            this.stateChangeColumns = [];\n\t            if (!ej2_base_1.isNullOrUndefined(args)) {\n\t                if (this.hideColumn.length) {\n\t                    this.columnStateChange(this.hideColumn, false);\n\t                }\n\t                if (this.showColumn.length) {\n\t                    this.columnStateChange(this.showColumn, true);\n\t                }\n\t                var params = {\n\t                    requestType: 'columnstate', element: this.parent.element,\n\t                    columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n\t                };\n\t                this.parent.trigger(events.actionComplete, params);\n\t                this.getShowHideService.setVisible(this.stateChangeColumns);\n\t                this.clearActions();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n\t            for (var index = 0; index < stateColumns.length; index++) {\n\t                var colUid = stateColumns[index].replace('e-cc', '');\n\t                var currentCol = this.parent.getColumnByUid(colUid);\n\t                currentCol.visible = state;\n\t                this.stateChangeColumns.push(currentCol);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.clearActions = function () {\n\t            this.hideColumn = [];\n\t            this.showColumn = [];\n\t            this.unWireEvents();\n\t            this.hideDialog();\n\t            this.addcancelIcon();\n\t        };\n\t        ColumnChooser.prototype.checkstatecolumn = function (e) {\n\t            var targetEle = e.event.target;\n\t            var uncheckColumn = targetEle.id;\n\t            if (e.checked) {\n\t                if (this.hideColumn.indexOf(uncheckColumn) !== -1) {\n\t                    this.hideColumn.splice(this.hideColumn.indexOf(uncheckColumn), 1);\n\t                }\n\t                if (this.showColumn.indexOf(uncheckColumn) === -1) {\n\t                    this.showColumn.push(uncheckColumn);\n\t                }\n\t            }\n\t            else {\n\t                if (this.showColumn.indexOf(uncheckColumn) !== -1) {\n\t                    this.showColumn.splice(this.showColumn.indexOf(uncheckColumn), 1);\n\t                }\n\t                if (this.hideColumn.indexOf(uncheckColumn) === -1) {\n\t                    this.hideColumn.push(uncheckColumn);\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n\t            var clearSearch = false;\n\t            var fltrCol;\n\t            if (searchVal === '') {\n\t                this.removeCancelIcon();\n\t                fltrCol = this.parent.getColumns();\n\t                clearSearch = true;\n\t            }\n\t            else {\n\t                fltrCol = new ej2_data_1.DataManager(this.parent.getColumns()).executeLocal(new ej2_data_1.Query()\n\t                    .where('headerText', 'startswith', searchVal, true));\n\t            }\n\t            if (fltrCol.length) {\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.classList.remove('e-ccnmdiv');\n\t                this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n\t                if (!clearSearch) {\n\t                    this.addcancelIcon();\n\t                }\n\t            }\n\t            else {\n\t                var nMatchele = ej2_base_1.createElement('span', { className: 'e-cc e-nmatch' });\n\t                nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.appendChild(nMatchele);\n\t                this.innerDiv.classList.add('e-ccnmdiv');\n\t            }\n\t            this.flag = true;\n\t            this.stopTimer();\n\t        };\n\t        ColumnChooser.prototype.wireEvents = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n\t        };\n\t        ColumnChooser.prototype.unWireEvents = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n\t            this.ulElement = ej2_base_1.createElement('ul', { className: 'e-ccul-ele e-cc' });\n\t            for (var i = 0; i < gdCol.length; i++) {\n\t                var columns = gdCol[i];\n\t                this.renderCheckbox(columns);\n\t            }\n\t            return this.ulElement;\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxState = function () {\n\t            this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n\t            this.columnChooserSearch('');\n\t            for (var i = 0; i < this.parent.element.querySelectorAll('.e-cc-chbox').length; i++) {\n\t                var element = this.parent.element.querySelectorAll('.e-cc-chbox')[i];\n\t                var column = this.parent.getColumnByUid(element.id.replace('e-cc', ''));\n\t                if (column.visible) {\n\t                    element.checked = true;\n\t                }\n\t                else {\n\t                    element.checked = false;\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.renderCheckbox = function (column) {\n\t            var cclist;\n\t            var hideColState;\n\t            var showColState;\n\t            var checkBoxObj;\n\t            if (column.showInColumnChooser) {\n\t                cclist = ej2_base_1.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n\t                var cclabe = ej2_base_1.createElement('label', { className: 'e-cc' });\n\t                var cccheckboxlist = ej2_base_1.createElement('input', {\n\t                    className: 'e-cc e-cc-chbox ',\n\t                    id: 'e-cc' + column.uid, attrs: { type: 'checkbox' }\n\t                });\n\t                cclabe.appendChild(cccheckboxlist);\n\t                hideColState = this.hideColumn.indexOf('e-cc' + column.uid) === -1 ? false : true;\n\t                showColState = this.showColumn.indexOf('e-cc' + column.uid) === -1 ? false : true;\n\t                checkBoxObj = new ej2_buttons_1.CheckBox({ label: column.headerText, checked: true, change: this.checkstatecolumn.bind(this) });\n\t                if ((column.visible && !hideColState) || showColState) {\n\t                    checkBoxObj.checked = true;\n\t                }\n\t                else {\n\t                    checkBoxObj.checked = false;\n\t                }\n\t                checkBoxObj.appendTo(cccheckboxlist);\n\t                cclist.appendChild(cclabe);\n\t                this.ulElement.appendChild(cclist);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n\t            this.addcancelIcon();\n\t            this.searchValue = e.target.value;\n\t            var proxy = this;\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        ColumnChooser.prototype.startTimer = function (e) {\n\t            var proxy = this;\n\t            var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n\t            this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n\t        };\n\t        ColumnChooser.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        ColumnChooser.prototype.addcancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.removeCancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.mOpenDlg = function () {\n\t            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n\t            var chele = this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0];\n\t            chele.focus();\n\t        };\n\t        ColumnChooser.prototype.getModuleName = function () {\n\t            return 'ColumnChooser';\n\t        };\n\t        return ColumnChooser;\n\t    }());\n\t    exports.ColumnChooser = ColumnChooser;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_43__;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_44__;\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(16), __webpack_require__(47), __webpack_require__(48), __webpack_require__(36), __webpack_require__(55), __webpack_require__(37), __webpack_require__(39), __webpack_require__(57), __webpack_require__(58), __webpack_require__(59), __webpack_require__(60), __webpack_require__(40), __webpack_require__(46), __webpack_require__(61), __webpack_require__(63), __webpack_require__(66), __webpack_require__(70), __webpack_require__(82), __webpack_require__(80), __webpack_require__(81), __webpack_require__(83), __webpack_require__(42), __webpack_require__(84), __webpack_require__(87), __webpack_require__(86)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, data_1, sort_1, page_1, selection_1, filter_1, search_1, scroll_1, resize_1, reorder_1, row_reorder_1, group_1, print_1, detail_row_1, toolbar_1, aggregate_1, virtual_scroll_1, edit_1, batch_edit_1, inline_edit_1, normal_edit_1, dialog_edit_1, column_chooser_1, excel_export_1, pdf_export_1, export_helper_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(data_1);\n\t    __export(sort_1);\n\t    __export(page_1);\n\t    __export(selection_1);\n\t    __export(filter_1);\n\t    __export(search_1);\n\t    __export(scroll_1);\n\t    __export(resize_1);\n\t    __export(reorder_1);\n\t    __export(row_reorder_1);\n\t    __export(group_1);\n\t    __export(print_1);\n\t    __export(detail_row_1);\n\t    __export(toolbar_1);\n\t    __export(aggregate_1);\n\t    __export(virtual_scroll_1);\n\t    __export(edit_1);\n\t    __export(batch_edit_1);\n\t    __export(inline_edit_1);\n\t    __export(normal_edit_1);\n\t    __export(dialog_edit_1);\n\t    __export(column_chooser_1);\n\t    __export(excel_export_1);\n\t    __export(pdf_export_1);\n\t    __export(export_helper_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(3), __webpack_require__(6), __webpack_require__(9), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, grid_1, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailRow = (function () {\n\t        function DetailRow(parent) {\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t        }\n\t        DetailRow.prototype.clickHandler = function (e) {\n\t            this.toogleExpandcollapse(ej2_base_1.closest(e.target, 'td'));\n\t        };\n\t        DetailRow.prototype.toogleExpandcollapse = function (target) {\n\t            var gObj = this.parent;\n\t            var parent = 'parentDetails';\n\t            if (target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) {\n\t                var tr = target.parentElement;\n\t                var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n\t                if (target.classList.contains('e-detailrowcollapse')) {\n\t                    var key = 'records';\n\t                    var currentViewData = gObj.allowGrouping && gObj.groupSettings.columns.length ?\n\t                        gObj.currentViewData[key] : gObj.currentViewData;\n\t                    var data = currentViewData[tr.getAttribute('aria-rowindex')];\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = '';\n\t                    }\n\t                    else if (gObj.getDetailTemplate() || gObj.childGrid) {\n\t                        var detailRow = ej2_base_1.createElement('tr', { className: 'e-detailrow' });\n\t                        var detailCell = ej2_base_1.createElement('td', { className: 'e-detailcell' });\n\t                        detailCell.setAttribute('colspan', this.parent.getVisibleColumns().length.toString());\n\t                        for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n\t                            detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                        }\n\t                        detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-detailindentcell' }));\n\t                        if (gObj.detailTemplate) {\n\t                            util_1.appendChildren(detailCell, gObj.getDetailTemplate()(data));\n\t                        }\n\t                        else {\n\t                            gObj.childGrid[parent] = {\n\t                                parentID: gObj.element.id,\n\t                                parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n\t                                parentKeyField: gObj.childGrid.queryString,\n\t                                parentKeyFieldValue: data[gObj.childGrid.queryString],\n\t                                parentRowData: data\n\t                            };\n\t                            var grid = new grid_1.Grid(gObj.childGrid);\n\t                            var modules = grid.getInjectedModules();\n\t                            var injectedModues = gObj.getInjectedModules();\n\t                            if (!modules || modules.length !== injectedModues.length) {\n\t                                grid.setInjectedModules(injectedModues);\n\t                            }\n\t                            var gridElem = ej2_base_1.createElement('div', {\n\t                                id: 'child' + util_1.parents(tr, 'e-grid').length +\n\t                                    '_grid' + tr.rowIndex + util_1.getUid('')\n\t                            });\n\t                            grid.appendTo(gridElem);\n\t                            detailCell.appendChild(gridElem);\n\t                        }\n\t                        detailRow.appendChild(detailCell);\n\t                        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n\t                        gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n\t                        gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data });\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n\t                    this.aria.setExpand(target, true);\n\t                }\n\t                else {\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = 'none';\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n\t                    this.aria.setExpand(target, false);\n\t                }\n\t            }\n\t        };\n\t        DetailRow.prototype.isDetailRow = function (row) {\n\t            return row && row.classList.contains('e-detailrow');\n\t        };\n\t        DetailRow.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.destroy, this.destroy);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t        };\n\t        DetailRow.prototype.getTDfromIndex = function (index, className) {\n\t            var tr = this.parent.getDataRows()[index];\n\t            if (tr && tr.querySelector(className)) {\n\t                return tr.querySelector(className);\n\t            }\n\t            return null;\n\t        };\n\t        DetailRow.prototype.expand = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowcollapse')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.collapse = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowexpand');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowexpand')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        DetailRow.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        DetailRow.prototype.expandCollapse = function (isExpand) {\n\t            var td;\n\t            var rows = this.parent.getDataRows();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                isExpand ? this.expand(td) : this.collapse(td);\n\t            }\n\t        };\n\t        DetailRow.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            switch (e.action) {\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t                case 'altUpArrow':\n\t                case 'altDownArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                        e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        DetailRow.prototype.getModuleName = function () {\n\t            return 'detailRow';\n\t        };\n\t        return DetailRow;\n\t    }());\n\t    exports.DetailRow = DetailRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Sort = (function () {\n\t        function Sort(parent, sortSettings, sortedColumns) {\n\t            this.contentRefresh = true;\n\t            this.isModelChanged = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.sortSettings = sortSettings;\n\t            this.sortedColumns = sortedColumns;\n\t            this.addEventListener();\n\t        }\n\t        Sort.prototype.updateModel = function () {\n\t            var sortedColumn = { field: this.columnName, direction: this.direction };\n\t            var index;\n\t            var gCols = this.parent.groupSettings.columns;\n\t            var flag = false;\n\t            if (!this.isMultiSort) {\n\t                if (!gCols.length) {\n\t                    this.sortSettings.columns = [sortedColumn];\n\t                }\n\t                else {\n\t                    var sortedCols = [];\n\t                    for (var i = 0, len = gCols.length; i < len; i++) {\n\t                        index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n\t                        if (this.columnName === gCols[i]) {\n\t                            flag = true;\n\t                            sortedCols.push(sortedColumn);\n\t                        }\n\t                        else {\n\t                            var sCol = this.getSortColumnFromField(gCols[i]);\n\t                            sortedCols.push({ field: sCol.field, direction: sCol.direction });\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sortedCols.push(sortedColumn);\n\t                    }\n\t                    this.sortSettings.columns = sortedCols;\n\t                }\n\t            }\n\t            else {\n\t                index = this.getSortedColsIndexByField(this.columnName);\n\t                if (index > -1) {\n\t                    this.sortSettings.columns[index] = sortedColumn;\n\t                }\n\t                else {\n\t                    this.sortSettings.columns.push(sortedColumn);\n\t                }\n\t                this.sortSettings.columns = this.sortSettings.columns;\n\t            }\n\t            this.parent.dataBind();\n\t            this.lastSortedCol = this.columnName;\n\t        };\n\t        Sort.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n\t            } : { requestType: 'sorting', type: events.actionComplete };\n\t            this.isRemove = false;\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, args));\n\t        };\n\t        Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            if (this.parent.getColumnByField(columnName).allowSorting === false) {\n\t                return;\n\t            }\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, {\n\t                    instance: this, handler: this.sortColumn,\n\t                    arg1: columnName, arg2: direction, arg3: isMultiSort\n\t                });\n\t                return;\n\t            }\n\t            this.columnName = columnName;\n\t            this.direction = direction;\n\t            this.isMultiSort = isMultiSort;\n\t            this.removeSortIcons();\n\t            var column = this.parent.getColumnHeaderByField(columnName);\n\t            this.updateSortedCols(columnName, isMultiSort);\n\t            this.updateModel();\n\t        };\n\t        Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n\t            if (!isMultiSort) {\n\t                if (this.parent.allowGrouping) {\n\t                    for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n\t                        if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n\t                            this.sortedColumns.splice(i, 1);\n\t                            len--;\n\t                            i--;\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    this.sortedColumns.splice(0, this.sortedColumns.length);\n\t                }\n\t            }\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                this.sortedColumns.push(columnName);\n\t            }\n\t        };\n\t        Sort.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (this.contentRefresh) {\n\t                var args = this.sortSettings.columns.length ? {\n\t                    columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionBegin\n\t                } : { requestType: 'sorting', type: events.actionBegin };\n\t                this.parent.notify(events.modelChanged, args);\n\t            }\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.clearSorting = function () {\n\t            var cols = util_1.getActualPropFromColl(this.sortSettings.columns);\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeSortColumn(cols[i].field);\n\t            }\n\t        };\n\t        Sort.prototype.isActionPrevent = function () {\n\t            return util_1.isActionPrevent(this.parent);\n\t        };\n\t        Sort.prototype.removeSortColumn = function (field) {\n\t            var gObj = this.parent;\n\t            var cols = this.sortSettings.columns;\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n\t                return;\n\t            }\n\t            this.removeSortIcons();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                        continue;\n\t                    }\n\t                    this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n\t                    cols.splice(i, 1);\n\t                    this.isRemove = true;\n\t                    if (this.isModelChanged) {\n\t                        this.parent.notify(events.modelChanged, {\n\t                            requestType: 'sorting', type: events.actionBegin\n\t                        });\n\t                    }\n\t                    break;\n\t                }\n\t            }\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n\t            var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Sort.prototype.getModuleName = function () {\n\t            return 'sort';\n\t        };\n\t        Sort.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                this.isMultiSort = this.sortSettings.columns.length > 1;\n\t                for (var _i = 0, _a = gObj.sortSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    if (this.sortedColumns.indexOf(col.field) > -1) {\n\t                        this.sortColumn(col.field, col.direction, true);\n\t                    }\n\t                }\n\t                this.isMultiSort = false;\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Sort.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.sortComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t        };\n\t        Sort.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.sortComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t        };\n\t        Sort.prototype.destroy = function () {\n\t            this.isModelChanged = false;\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            this.clearSorting();\n\t            this.isModelChanged = true;\n\t            this.removeEventListener();\n\t        };\n\t        Sort.prototype.clickHandler = function (e) {\n\t            this.popUpClickHandler(e);\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (target && !e.target.classList.contains('e-grptogglebtn') &&\n\t                !e.target.classList.contains('e-stackedheadercell') &&\n\t                !e.target.classList.contains('e-stackedheadercelldiv') &&\n\t                !e.target.classList.contains('e-rhandler')) {\n\t                var gObj = this.parent;\n\t                var field = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid')).field;\n\t                var direction = !target.querySelectorAll('.e-ascending').length ? 'ascending' :\n\t                    'descending';\n\t                if (!e.shiftKey) {\n\t                    this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n\t                }\n\t                else {\n\t                    this.removeSortColumn(field);\n\t                }\n\t                if (ej2_base_1.Browser.isDevice) {\n\t                    this.showPopUp(e);\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.showPopUp = function (e) {\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (!ej2_base_2.isNullOrUndefined(target)) {\n\t                util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n\t            }\n\t        };\n\t        Sort.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-sortdirect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSortMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSortMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Sort.prototype.addSortIcons = function () {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var filterElement;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, cols[i].direction);\n\t                if (this.isMultiSort && cols.length > 1) {\n\t                    header.querySelector('.e-headercelldiv').insertBefore(ej2_base_3.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n\t                }\n\t                filterElement = header.querySelector('.e-sortfilterdiv');\n\t                if (cols[i].direction === 'ascending') {\n\t                    ej2_base_3.classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n\t                }\n\t                else {\n\t                    ej2_base_3.classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.removeSortIcons = function (position) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = position ? position : 0, len = !ej2_base_2.isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n\t                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                    continue;\n\t                }\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, 'none');\n\t                ej2_base_3.classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n\t                if (header.querySelector('.e-sortnumber')) {\n\t                    header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.getSortColumnFromField = function (field) {\n\t            for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n\t                if (this.sortSettings.columns[i].field === field) {\n\t                    return this.sortSettings.columns[i];\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Sort.prototype.updateAriaAttr = function () {\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (fieldNames.indexOf(col) === -1) {\n\t                    continue;\n\t                }\n\t                var header = this.parent.getColumnHeaderByField(col);\n\t                this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n\t            }\n\t        };\n\t        Sort.prototype.refreshSortIcons = function () {\n\t            this.removeSortIcons();\n\t            this.isMultiSort = true;\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t            this.isMultiSort = false;\n\t            this.updateAriaAttr();\n\t        };\n\t        return Sort;\n\t    }());\n\t    exports.Sort = Sort;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(49), __webpack_require__(52), __webpack_require__(54), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, pager_1, pager_dropdown_1, external_message_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    pager_1.Pager.Inject(external_message_1.ExternalMessage, pager_dropdown_1.PagerDropDown);\n\t    var Page = (function () {\n\t        function Page(parent, pageSettings) {\n\t            this.parent = parent;\n\t            this.pageSettings = pageSettings;\n\t            this.addEventListener();\n\t        }\n\t        Page.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Page.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            var pagerObj;\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-gridpager' });\n\t            pagerObj = util_1.extend({}, ej2_base_1.extend({}, util_1.getActualProperties(this.pageSettings)), {\n\t                click: this.clickHandler.bind(this),\n\t                dropDownChanged: this.onSelect.bind(this),\n\t                enableRtl: gObj.enableRtl, locale: gObj.locale,\n\t                created: this.addAriaAttr.bind(this)\n\t            }, ['parentObj', 'propName']);\n\t            this.pagerObj = new pager_1.Pager(pagerObj);\n\t        };\n\t        Page.prototype.onSelect = function (e) {\n\t            this.pageSettings.pageSize = e.pageSize;\n\t            this.pageSettings.currentPage = 1;\n\t        };\n\t        Page.prototype.addAriaAttr = function () {\n\t            var _this = this;\n\t            var numericContainer = this.element.querySelector('.e-numericcontainer');\n\t            var links = numericContainer.querySelectorAll('a');\n\t            for (var i = 0; i < links.length; i++) {\n\t                if (this.parent.getContentTable()) {\n\t                    links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n\t                }\n\t            }\n\t            var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n\t            classList.forEach(function (value) {\n\t                var element = _this.element.querySelector(value);\n\t                if (_this.parent.getContentTable()) {\n\t                    element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n\t                }\n\t            });\n\t        };\n\t        Page.prototype.dataReady = function (e) {\n\t            this.updateModel(e);\n\t        };\n\t        Page.prototype.refresh = function () {\n\t            this.pagerObj.refresh();\n\t        };\n\t        Page.prototype.goToPage = function (pageNo) {\n\t            this.pagerObj.goToPage(pageNo);\n\t        };\n\t        Page.prototype.updateModel = function (e) {\n\t            this.parent.pageSettings.totalRecordsCount = e.count;\n\t            this.parent.dataBind();\n\t        };\n\t        Page.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n\t                type: events.actionComplete\n\t            }));\n\t        };\n\t        Page.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                this.pagerObj[prop] = newProp[prop];\n\t            }\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.clickHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (this.isForceCancel || util_1.isActionPrevent(gObj)) {\n\t                if (!this.isForceCancel) {\n\t                    gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n\t                    this.pagerObj.currentPage = gObj.pageSettings.currentPage;\n\t                    this.isForceCancel = true;\n\t                }\n\t                else {\n\t                    this.isForceCancel = false;\n\t                }\n\t                e.cancel = true;\n\t                return;\n\t            }\n\t            var prevPage = this.pageSettings.currentPage;\n\t            this.pageSettings.currentPage = e.currentPage;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'paging',\n\t                previousPage: prevPage,\n\t                currentPage: e.currentPage,\n\t                type: events.actionBegin\n\t            });\n\t        };\n\t        Page.prototype.keyPressHandler = function (e) {\n\t            if (this.canSkipAction(e.action)) {\n\t                return;\n\t            }\n\t            if (e.action in keyActions) {\n\t                e.preventDefault();\n\t                this.element.querySelector(keyActions[e.action]).click();\n\t            }\n\t        };\n\t        Page.prototype.canSkipAction = function (action) {\n\t            var page = {\n\t                pageUp: function (el) { return el.scrollTop !== 0; },\n\t                pageDown: function (el) { return !(el.scrollTop >= el.scrollHeight - el.clientHeight); }\n\t            };\n\t            var activeElement = document.activeElement;\n\t            if (activeElement.classList.contains('e-content') &&\n\t                activeElement.isEqualNode(this.parent.getContent().firstElementChild) && ['pageUp', 'pageDown'].indexOf(action) !== -1) {\n\t                return page[action](this.parent.getContent().firstChild);\n\t            }\n\t            return false;\n\t        };\n\t        Page.prototype.updateExternalMessage = function (message) {\n\t            if (!this.pagerObj.enableExternalMessage) {\n\t                this.pagerObj.enableExternalMessage = true;\n\t                this.pagerObj.dataBind();\n\t            }\n\t            this.pagerObj.externalMessage = message;\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.appendToElement = function (e) {\n\t            this.parent.element.appendChild(this.element);\n\t            this.parent.setGridPager(this.element);\n\t            this.pagerObj.appendTo(this.element);\n\t        };\n\t        Page.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t                this.appendToElement();\n\t            }\n\t        };\n\t        Page.prototype.addEventListener = function () {\n\t            this.handlers = {\n\t                load: this.render,\n\t                end: this.appendToElement,\n\t                ready: this.dataReady,\n\t                complete: this.onActionComplete,\n\t                updateLayout: this.enableAfterRender,\n\t                inboundChange: this.onPropertyChanged,\n\t                keyPress: this.keyPressHandler\n\t            };\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.handlers.load, this);\n\t            this.parent.on(events.initialEnd, this.handlers.end, this);\n\t            this.parent.on(events.dataReady, this.handlers.ready, this);\n\t            this.parent.on(events.pageComplete, this.handlers.complete, this);\n\t            this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n\t            this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n\t            this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n\t        };\n\t        Page.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.handlers.load);\n\t            this.parent.off(events.initialEnd, this.handlers.end);\n\t            this.parent.off(events.dataReady, this.handlers.ready);\n\t            this.parent.off(events.pageComplete, this.handlers.complete);\n\t            this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n\t            this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n\t            this.parent.off(events.keyPressed, this.handlers.keyPress);\n\t        };\n\t        Page.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.pagerObj.destroy();\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        return Page;\n\t    }());\n\t    exports.Page = Page;\n\t    var keyActions = {\n\t        pageUp: '.e-prev',\n\t        pageDown: '.e-next',\n\t        ctrlAltPageDown: '.e-last',\n\t        ctrlAltPageUp: '.e-first',\n\t        altPageUp: '.e-pp',\n\t        altPageDown: '.e-np'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(50), __webpack_require__(51)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, numeric_container_1, pager_message_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Pager = (function (_super) {\n\t        __extends(Pager, _super);\n\t        function Pager(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.defaultConstants = {\n\t                currentPageInfo: '{0} of {1} pages',\n\t                totalItemsInfo: '({0} items)',\n\t                firstPageTooltip: 'Go to first page',\n\t                lastPageTooltip: 'Go to last page',\n\t                nextPageTooltip: 'Go to next page',\n\t                previousPageTooltip: 'Go to previous page',\n\t                nextPagerTooltip: 'Go to next pager',\n\t                previousPagerTooltip: 'Go to previous pager',\n\t                pagerDropDown: 'Items per page'\n\t            };\n\t            _this.containerModule = new numeric_container_1.NumericContainer(_this);\n\t            _this.pagerMessageModule = new pager_message_1.PagerMessage(_this);\n\t            return _this;\n\t        }\n\t        Pager.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.enableExternalMessage) {\n\t                modules.push({\n\t                    member: 'externalMessage',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.checkpagesizes()) {\n\t                modules.push({\n\t                    member: 'pagerdropdown',\n\t                    args: [this]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Pager.prototype.preRender = function () {\n\t        };\n\t        Pager.prototype.render = function () {\n\t            this.initLocalization();\n\t            this.updateRTL();\n\t            this.totalRecordsCount = this.totalRecordsCount || 0;\n\t            this.renderFirstPrevDivForDevice();\n\t            this.containerModule.render();\n\t            if (this.enablePagerMessage) {\n\t                this.pagerMessageModule.render();\n\t            }\n\t            this.renderNextLastDivForDevice();\n\t            if (this.checkpagesizes()) {\n\t                this.pagerdropdownModule.render();\n\t            }\n\t            this.addAriaLabel();\n\t            if (this.enableExternalMessage && this.externalMessageModule) {\n\t                this.externalMessageModule.render();\n\t            }\n\t            this.refresh();\n\t            this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n\t        };\n\t        Pager.prototype.getPersistData = function () {\n\t            var keyEntity = ['enableExternalMessage', 'enablePagerMessage', 'currentPage', 'enableQueryString', 'pageSizes',\n\t                'pageSize', 'pageCount', 'totalRecordsCount', 'externalMessage', 'customText', 'click', 'created', 'dropDownChanged'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Pager.prototype.destroy = function () {\n\t            _super.prototype.destroy.call(this);\n\t            this.containerModule.destroy();\n\t            this.pagerMessageModule.destroy();\n\t            this.element.innerHTML = '';\n\t        };\n\t        Pager.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'pageCount':\n\t                        this.containerModule.refreshNumericLinks();\n\t                        this.containerModule.refresh();\n\t                        break;\n\t                    case 'currentPage':\n\t                        if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n\t                            this.currentPageChanged();\n\t                        }\n\t                        break;\n\t                    case 'pageSize':\n\t                    case 'totalRecordsCount':\n\t                    case 'customText':\n\t                        this.refresh();\n\t                        break;\n\t                    case 'pageSizes':\n\t                        if (this.checkpagesizes()) {\n\t                            this.pagerdropdownModule.destroy();\n\t                            this.pagerdropdownModule.render();\n\t                        }\n\t                        this.refresh();\n\t                        break;\n\t                    case 'locale':\n\t                        this.initLocalization();\n\t                        this.refresh();\n\t                        break;\n\t                    case 'enableExternalMessage':\n\t                        if (this.enableExternalMessage) {\n\t                            this.externalMessageModule.render();\n\t                        }\n\t                        break;\n\t                    case 'externalMessage':\n\t                        if (this.externalMessageModule) {\n\t                            this.externalMessageModule.refresh();\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.updateRTL();\n\t                        break;\n\t                    case 'enablePagerMessage':\n\t                        if (this.enablePagerMessage) {\n\t                            this.pagerMessageModule.showMessage();\n\t                        }\n\t                        else {\n\t                            this.pagerMessageModule.hideMessage();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Pager.prototype.getLocalizedLabel = function (key) {\n\t            return this.localeObj.getConstant(key);\n\t        };\n\t        Pager.prototype.goToPage = function (pageNo) {\n\t            if (this.checkGoToPage(pageNo)) {\n\t                this.currentPage = pageNo;\n\t                this.dataBind();\n\t            }\n\t        };\n\t        Pager.prototype.checkpagesizes = function () {\n\t            if (this.pageSizes === true || this.pageSizes.length) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n\t            if (newPageNo !== this.currentPage) {\n\t                this.previousPageNo = this.currentPage;\n\t            }\n\t            if (!ej2_base_3.isNullOrUndefined(oldPageNo)) {\n\t                this.previousPageNo = oldPageNo;\n\t            }\n\t            if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.currentPageChanged = function () {\n\t            if (this.enableQueryString) {\n\t                this.updateQueryString(this.currentPage);\n\t            }\n\t            var args = { currentPage: this.currentPage, cancel: false };\n\t            this.trigger('click', args);\n\t            if (!args.cancel) {\n\t                this.refresh();\n\t            }\n\t        };\n\t        Pager.prototype.refresh = function () {\n\t            this.updateRTL();\n\t            this.containerModule.refresh();\n\t            if (this.enablePagerMessage) {\n\t                this.pagerMessageModule.refresh();\n\t            }\n\t            if (this.enableExternalMessage && this.externalMessageModule) {\n\t                this.externalMessageModule.refresh();\n\t            }\n\t        };\n\t        Pager.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Pager.prototype.initLocalization = function () {\n\t            this.localeObj = new ej2_base_1.L10n(this.getModuleName(), this.defaultConstants, this.locale);\n\t        };\n\t        Pager.prototype.updateQueryString = function (value) {\n\t            var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n\t            window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n\t        };\n\t        Pager.prototype.getUpdatedURL = function (uri, key, value) {\n\t            var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n\t            if (uri.match(regx)) {\n\t                return uri.replace(regx, '$1' + key + '=' + value + '$2');\n\t            }\n\t            else {\n\t                var hash = '';\n\t                if (uri.indexOf('#') !== -1) {\n\t                    hash = uri.replace(/.*#/, '#');\n\t                    uri = uri.replace(/#.*/, '');\n\t                }\n\t                return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n\t            }\n\t        };\n\t        Pager.prototype.renderFirstPrevDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mfirst e-icons e-icon-first',\n\t                attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mprev e-icons e-icon-prev',\n\t                attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.renderNextLastDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mnext e-icons e-icon-next',\n\t                attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mlast e-icons e-icon-last',\n\t                attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.addAriaLabel = function () {\n\t            var _this = this;\n\t            var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                classList.forEach(function (value) {\n\t                    var element = _this.element.querySelector(value);\n\t                    element.setAttribute('aria-label', element.getAttribute('title'));\n\t                });\n\t            }\n\t        };\n\t        return Pager;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"enableQueryString\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"enableExternalMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Pager.prototype, \"enablePagerMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(12)\n\t    ], Pager.prototype, \"pageSize\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(10)\n\t    ], Pager.prototype, \"pageCount\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1)\n\t    ], Pager.prototype, \"currentPage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"totalRecordsCount\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"externalMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"pageSizes\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('')\n\t    ], Pager.prototype, \"customText\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"click\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"dropDownChanged\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"created\", void 0);\n\t    Pager = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Pager);\n\t    exports.Pager = Pager;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericContainer = (function () {\n\t        function NumericContainer(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        NumericContainer.prototype.render = function () {\n\t            this.pagerElement = this.pagerModule.element;\n\t            this.renderNumericContainer();\n\t            this.refreshNumericLinks();\n\t            this.wireEvents();\n\t        };\n\t        NumericContainer.prototype.refresh = function () {\n\t            var pagerObj = this.pagerModule;\n\t            pagerObj.totalPages = (pagerObj.totalRecordsCount % pagerObj.pageSize === 0) ? (pagerObj.totalRecordsCount / pagerObj.pageSize) :\n\t                (parseInt((pagerObj.totalRecordsCount / pagerObj.pageSize).toString(), 10) + 1);\n\t            if (this.links.length) {\n\t                this.updateLinksHtml();\n\t            }\n\t            this.updateStyles();\n\t        };\n\t        NumericContainer.prototype.refreshNumericLinks = function () {\n\t            var link;\n\t            var pagerObj = this.pagerModule;\n\t            var div = pagerObj.element.querySelector('.e-numericcontainer');\n\t            var frag = document.createDocumentFragment();\n\t            div.innerHTML = '';\n\t            for (var i = 1; i <= pagerObj.pageCount; i++) {\n\t                link = ej2_base_3.createElement('a', {\n\t                    className: 'e-link e-numericitem e-spacing e-pager-default',\n\t                    attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i }\n\t                });\n\t                if (pagerObj.currentPage === i) {\n\t                    ej2_base_3.classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n\t                }\n\t                frag.appendChild(link);\n\t            }\n\t            div.appendChild(frag);\n\t            this.links = [].slice.call(div.childNodes);\n\t        };\n\t        NumericContainer.prototype.wireEvents = function () {\n\t            ej2_base_2.EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n\t        };\n\t        NumericContainer.prototype.unwireEvents = function () {\n\t            ej2_base_2.EventHandler.remove(this.pagerElement, 'click', this.clickHandler);\n\t        };\n\t        NumericContainer.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t        };\n\t        NumericContainer.prototype.renderNumericContainer = function () {\n\t            this.element = ej2_base_3.createElement('div', {\n\t                className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n\t            });\n\t            this.renderFirstNPrev(this.element);\n\t            this.renderPrevPagerSet(this.element);\n\t            this.element.appendChild(ej2_base_3.createElement('div', { className: 'e-numericcontainer' }));\n\t            this.renderNextPagerSet(this.element);\n\t            this.renderNextNLast(this.element);\n\t            this.pagerModule.element.appendChild(this.element);\n\t        };\n\t        NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n\t            this.first = ej2_base_3.createElement('div', {\n\t                className: 'e-first e-icons e-icon-first',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.prev = ej2_base_3.createElement('div', {\n\t                className: 'e-prev e-icons e-icon-prev',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.first, this.prev], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n\t            this.PP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-pp e-spacing', innerHTML: '...',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.PP);\n\t        };\n\t        NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n\t            this.NP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-np e-spacing',\n\t                innerHTML: '...', attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.NP);\n\t        };\n\t        NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n\t            this.next = ej2_base_3.createElement('div', {\n\t                className: 'e-next e-icons e-icon-next',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.last = ej2_base_3.createElement('div', {\n\t                className: 'e-last e-icons e-icon-last',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.next, this.last], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.clickHandler = function (e) {\n\t            var pagerObj = this.pagerModule;\n\t            var target = e.target;\n\t            pagerObj.previousPageNo = pagerObj.currentPage;\n\t            if (!target.classList.contains('e-disable') && !ej2_base_1.isNullOrUndefined(target.getAttribute('index'))) {\n\t                pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n\t                pagerObj.dataBind();\n\t            }\n\t            return false;\n\t        };\n\t        NumericContainer.prototype.updateLinksHtml = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var currentPageSet;\n\t            var pageNo;\n\t            pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n\t            if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n\t                pagerObj.currentPage = pagerObj.totalPages;\n\t            }\n\t            currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n\t            if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n\t                currentPageSet = currentPageSet - 1;\n\t            }\n\t            for (var i = 0; i < pagerObj.pageCount; i++) {\n\t                pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n\t                if (pageNo <= pagerObj.totalPages) {\n\t                    this.links[i].style.display = '';\n\t                    this.links[i].setAttribute('index', pageNo.toString());\n\t                    this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n\t                    if (pagerObj.currentPage !== pageNo) {\n\t                        this.links[i].classList.add('e-pager-default');\n\t                    }\n\t                    else {\n\t                        this.links[i].classList.remove('e-pager-default');\n\t                    }\n\t                }\n\t                else {\n\t                    this.links[i].style.display = 'none';\n\t                }\n\t                ej2_base_3.classList(this.links[i], [], ['e-currentitem', 'e-active']);\n\t            }\n\t            this.first.setAttribute('index', '1');\n\t            this.last.setAttribute('index', pagerObj.totalPages.toString());\n\t            this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n\t            this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n\t            this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n\t            this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n\t        };\n\t        NumericContainer.prototype.updateStyles = function () {\n\t            this.updateFirstNPrevStyles();\n\t            this.updatePrevPagerSetStyles();\n\t            this.updateNextPagerSetStyles();\n\t            this.updateNextNLastStyles();\n\t            if (this.links.length) {\n\t                ej2_base_3.classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateFirstNPrevStyles = function () {\n\t            var firstPage = ['e-firstpage', 'e-pager-default'];\n\t            var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n\t            var prevPage = ['e-prevpage', 'e-pager-default'];\n\t            var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n\t            if (this.pagerModule.currentPage > 1) {\n\t                ej2_base_3.classList(this.prev, prevPage, prevPageDisabled);\n\t                ej2_base_3.classList(this.first, firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.prev, prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.first, firstPageDisabled, firstPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n\t            if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n\t                ej2_base_3.classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextPagerSetStyles = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n\t            if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n\t                ej2_base_3.classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextNLastStyles = function () {\n\t            var lastPage = ['e-lastpage', 'e-pager-default'];\n\t            var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n\t            var nextPage = ['e-nextpage', 'e-pager-default'];\n\t            var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n\t            var pagerObj = this.pagerModule;\n\t            if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n\t                ej2_base_3.classList(this.last, lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.next, nextPageDisabled, nextPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.last, lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.next, nextPage, nextPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n\t            }\n\t        };\n\t        return NumericContainer;\n\t    }());\n\t    exports.NumericContainer = NumericContainer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerMessage = (function () {\n\t        function PagerMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerMessage.prototype.render = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n\t            this.pageNoMsgElem = ej2_base_1.createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n\t            this.pageCountMsgElem = ej2_base_1.createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n\t            ej2_base_1.append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n\t            this.pagerModule.element.appendChild(div);\n\t            this.refresh();\n\t        };\n\t        PagerMessage.prototype.refresh = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n\t                    pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n\t            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n\t            this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n\t        };\n\t        PagerMessage.prototype.hideMessage = function () {\n\t            if (this.pageNoMsgElem) {\n\t                this.pageNoMsgElem.style.display = 'none';\n\t            }\n\t            if (this.pageCountMsgElem) {\n\t                this.pageCountMsgElem.style.display = 'none';\n\t            }\n\t        };\n\t        PagerMessage.prototype.showMessage = function () {\n\t            if (!this.pageNoMsgElem) {\n\t                this.render();\n\t            }\n\t            this.pageNoMsgElem.style.display = '';\n\t            this.pageCountMsgElem.style.display = '';\n\t        };\n\t        PagerMessage.prototype.destroy = function () {\n\t        };\n\t        PagerMessage.prototype.format = function (str, args) {\n\t            var regx;\n\t            for (var i = 0; i < args.length; i++) {\n\t                regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n\t                str = str.replace(regx, args[i].toString());\n\t            }\n\t            return str;\n\t        };\n\t        return PagerMessage;\n\t    }());\n\t    exports.PagerMessage = PagerMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(53)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_dropdowns_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerDropDown = (function () {\n\t        function PagerDropDown(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerDropDown.prototype.getModuleName = function () {\n\t            return 'pagerdropdown';\n\t        };\n\t        PagerDropDown.prototype.render = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pagerDropDownDiv = ej2_base_1.createElement('div', { className: 'e-pagesizes' });\n\t            var dropDownDiv = ej2_base_1.createElement('div', { className: 'e-pagerdropdown' });\n\t            var defaultTextDiv = ej2_base_1.createElement('div', { className: 'e-pagerconstant' });\n\t            var input = ej2_base_1.createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n\t            this.pagerCons = ej2_base_1.createElement('span', { className: 'e-constant', innerHTML: this.pagerModule.getLocalizedLabel('pagerDropDown') });\n\t            dropDownDiv.appendChild(input);\n\t            defaultTextDiv.appendChild(this.pagerCons);\n\t            this.pagerDropDownDiv.appendChild(dropDownDiv);\n\t            this.pagerDropDownDiv.appendChild(defaultTextDiv);\n\t            this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n\t            var pageSizesModule = this.pagerModule.pageSizes;\n\t            var pageSizesArray = (pageSizesModule.length ? pageSizesModule : [5, 10, 12, 20]);\n\t            var defaultValue = (pageSizesArray).indexOf(this.pagerModule.pageSize) > -1 ? this.pagerModule.pageSize : pageSizesArray[0];\n\t            this.dropDownListObject = new ej2_dropdowns_1.DropDownList({\n\t                dataSource: pageSizesArray,\n\t                value: defaultValue,\n\t                change: this.onChange.bind(this)\n\t            });\n\t            this.dropDownListObject.appendTo(input);\n\t            pagerObj.pageSize = defaultValue;\n\t            pagerObj.dataBind();\n\t            pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n\t        };\n\t        PagerDropDown.prototype.onChange = function (e) {\n\t            this.pagerModule.pageSize = this.dropDownListObject.value;\n\t            this.pagerModule.dataBind();\n\t            this.pagerModule.trigger('dropDownChanged', { pageSize: this.dropDownListObject.value });\n\t        };\n\t        PagerDropDown.prototype.destroy = function (args) {\n\t            if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n\t                this.dropDownListObject.destroy();\n\t                ej2_base_1.remove(this.pagerDropDownDiv);\n\t            }\n\t        };\n\t        return PagerDropDown;\n\t    }());\n\t    exports.PagerDropDown = PagerDropDown;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_53__;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExternalMessage = (function () {\n\t        function ExternalMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        ExternalMessage.prototype.getModuleName = function () {\n\t            return 'externalMessage';\n\t        };\n\t        ExternalMessage.prototype.render = function () {\n\t            this.element = ej2_base_1.createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n\t            this.pagerModule.element.appendChild(this.element);\n\t            this.refresh();\n\t        };\n\t        ExternalMessage.prototype.refresh = function () {\n\t            if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n\t                this.showMessage();\n\t                this.element.innerHTML = this.pagerModule.externalMessage;\n\t            }\n\t            else {\n\t                this.hideMessage();\n\t            }\n\t        };\n\t        ExternalMessage.prototype.hideMessage = function () {\n\t            this.element.style.display = 'none';\n\t        };\n\t        ExternalMessage.prototype.showMessage = function () {\n\t            this.element.style.display = '';\n\t        };\n\t        ExternalMessage.prototype.destroy = function () {\n\t            ej2_base_1.remove(this.element);\n\t        };\n\t        return ExternalMessage;\n\t    }());\n\t    exports.ExternalMessage = ExternalMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(5), __webpack_require__(7), __webpack_require__(9), __webpack_require__(13), __webpack_require__(12), __webpack_require__(14), __webpack_require__(15), __webpack_require__(56)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, ej2_base_3, ej2_data_1, events, enum_1, row_renderer_1, cell_1, row_1, filter_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Filter = (function () {\n\t        function Filter(parent, filterSettings, serviceLocator) {\n\t            this.predicate = 'and';\n\t            this.contentRefresh = true;\n\t            this.values = {};\n\t            this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            this.parent = parent;\n\t            this.filterSettings = filterSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Filter.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            if (gObj.columns.length) {\n\t                var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Filter);\n\t                var row = void 0;\n\t                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n\t                cellrender.addCellRenderer(enum_1.CellType.Filter, new filter_cell_renderer_1.FilterCellRenderer(this.parent, this.serviceLocator));\n\t                this.l10n = this.serviceLocator.getService('localization');\n\t                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n\t                rowRenderer.element = ej2_base_3.createElement('tr', { className: 'e-filterbar' });\n\t                row = this.generateRow();\n\t                row.data = this.values;\n\t                this.element = rowRenderer.render(row, gObj.getColumns());\n\t                this.parent.getHeaderContent().querySelector('thead').appendChild(this.element);\n\t                var detail = this.element.querySelector('.e-detailheadercell');\n\t                if (detail) {\n\t                    detail.className = 'e-filterbarcell e-mastercell';\n\t                }\n\t                this.wireEvents();\n\t            }\n\t        };\n\t        Filter.prototype.destroy = function () {\n\t            this.filterSettings.columns = [];\n\t            this.updateFilterMsg();\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t            ej2_base_3.remove(this.element);\n\t        };\n\t        Filter.prototype.generateRow = function (index) {\n\t            var options = {};\n\t            var row = new row_1.Row(options);\n\t            row.cells = this.generateCells();\n\t            return row;\n\t        };\n\t        Filter.prototype.generateCells = function () {\n\t            var cells = [];\n\t            if (this.parent.allowGrouping) {\n\t                for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n\t                    cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t            }\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var dummy = _a[_i];\n\t                cells.push(this.generateCell(dummy));\n\t            }\n\t            return cells;\n\t        };\n\t        Filter.prototype.generateCell = function (column, cellType) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'rowId': '',\n\t                'column': column,\n\t                'cellType': cellType ? cellType : enum_1.CellType.Filter,\n\t                'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        Filter.prototype.updateModel = function () {\n\t            this.currentFilterObject = {\n\t                field: this.fieldName, operator: this.operator, value: this.value, predicate: this.predicate,\n\t                matchCase: this.matchCase, actualFilterValue: {}, actualOperator: {}\n\t            };\n\t            var index = this.getFilteredColsIndexByField(this.fieldName);\n\t            if (index > -1) {\n\t                this.filterSettings.columns[index] = this.currentFilterObject;\n\t            }\n\t            else {\n\t                this.filterSettings.columns.push(this.currentFilterObject);\n\t            }\n\t            this.filterSettings.columns = this.filterSettings.columns;\n\t            this.parent.dataBind();\n\t        };\n\t        Filter.prototype.getFilteredColsIndexByField = function (field) {\n\t            var cols = this.filterSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Filter.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column.field,\n\t                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n\t            } : {\n\t                requestType: 'filtering', type: events.actionComplete\n\t            };\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, args));\n\t            this.isRemove = false;\n\t        };\n\t        Filter.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'focusin', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n\t        };\n\t        Filter.prototype.unWireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'focusin', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n\t        };\n\t        Filter.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Filter.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.actualFilterValue, col.actualOperator);\n\t                }\n\t                this.updateFilterMsg();\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Filter.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.filterComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.keyPressed, this.keyUpHandler, this);\n\t            this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n\t            this.parent.on(events.headerRefreshed, this.render, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t        };\n\t        Filter.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.filterComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.keyPressed, this.keyUpHandler);\n\t            this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t        };\n\t        Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            var gObj = this.parent;\n\t            var filterCell;\n\t            this.column = gObj.getColumnByField(fieldName);\n\t            filterCell = this.element.querySelector('#' + this.column.field + '_filterBarcell');\n\t            if (!ej2_base_2.isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, {\n\t                    instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n\t                    arg5: matchCase, arg6: actualFilterValue, arg7: actualOperator\n\t                });\n\t                return;\n\t            }\n\t            this.value = filterValue;\n\t            this.matchCase = matchCase || false;\n\t            this.fieldName = fieldName;\n\t            this.predicate = predicate || 'and';\n\t            this.operator = filterOperator;\n\t            filterValue = filterValue.toString();\n\t            this.values[this.column.field] = filterValue;\n\t            gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n\t            if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n\t                this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n\t                this.updateFilterMsg();\n\t                return;\n\t            }\n\t            if (filterCell.value !== filterValue) {\n\t                filterCell.value = filterValue;\n\t            }\n\t            if (this.checkAlreadyColFiltered(this.column.field)) {\n\t                return;\n\t            }\n\t            this.updateModel();\n\t        };\n\t        Filter.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            this.parent.notify(events.modelChanged, {\n\t                                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n\t                                    this.column.field : undefined,\n\t                                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n\t                            });\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        break;\n\t                    case 'showFilterBarStatus':\n\t                        if (e.properties[prop]) {\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        else if (this.parent.allowPaging) {\n\t                            this.parent.updateExternalMessage('');\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.clearFiltering = function () {\n\t            var cols = util_1.getActualPropFromColl(this.filterSettings.columns);\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeFilteredColsByField(cols[i].field, true);\n\t            }\n\t            this.isRemove = true;\n\t            this.filterStatusMsg = '';\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.checkAlreadyColFiltered = function (field) {\n\t            var columns = this.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var col = columns_1[_i];\n\t                if (col.field === field && col.value === this.value &&\n\t                    col.operator === this.operator && col.predicate === this.predicate) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            var cols = this.filterSettings.columns;\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, {\n\t                    instance: this, handler: this.removeFilteredColsByField,\n\t                    arg1: field, arg2: isClearFilterBar\n\t                });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (!(isClearFilterBar === false)) {\n\t                        this.element.querySelector('#' + cols[i].field + '_filterBarcell').value = '';\n\t                        delete this.values[field];\n\t                    }\n\t                    cols.splice(i, 1);\n\t                    this.parent.getColumnHeaderByField(field).removeAttribute('aria-filtered');\n\t                    this.isRemove = true;\n\t                    this.parent.notify(events.modelChanged, {\n\t                        requestType: 'filtering', type: events.actionBegin\n\t                    });\n\t                    break;\n\t                }\n\t            }\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.getModuleName = function () {\n\t            return 'filter';\n\t        };\n\t        Filter.prototype.keyUpHandler = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            if (ej2_base_3.matches(target, '.e-filterbar input')) {\n\t                this.column = gObj.getColumnByField(target.id.split('_')[0]);\n\t                if (!this.column) {\n\t                    return;\n\t                }\n\t                this.updateCrossIcon(target);\n\t                if ((this.filterSettings.mode === 'immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n\t                    this.value = target.value.trim();\n\t                    this.processFilter(e);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.updateSpanClass = function (e) {\n\t            var target = e.target;\n\t            if (e.type === 'mousedown' && target.classList.contains('e-cancel')) {\n\t                var targetText = target.previousElementSibling;\n\t                targetText.value = '';\n\t                target.classList.add('e-hide');\n\t                targetText.focus();\n\t                e.preventDefault();\n\t            }\n\t            if (e.type === 'focusin' && target.classList.contains('e-filtertext') && !target.disabled) {\n\t                if (this.lastFilterElement) {\n\t                    this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t                }\n\t                this.updateCrossIcon(target);\n\t                this.lastFilterElement = target;\n\t            }\n\t            if (e.type === 'focusin' && !target.classList.contains('e-filtertext') && this.lastFilterElement) {\n\t                this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.updateCrossIcon = function (element) {\n\t            if (element.value.length) {\n\t                element.nextElementSibling.classList.remove('e-hide');\n\t            }\n\t        };\n\t        Filter.prototype.updateFilterMsg = function () {\n\t            var gObj = this.parent;\n\t            var columns = this.filterSettings.columns;\n\t            var column;\n\t            if (!this.filterSettings.showFilterBarStatus) {\n\t                return;\n\t            }\n\t            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n\t                this.filterStatusMsg = '';\n\t                for (var index = 0; index < columns.length; index++) {\n\t                    column = gObj.getColumnByField(columns[index].field);\n\t                    if (index) {\n\t                        this.filterStatusMsg += ' && ';\n\t                    }\n\t                    this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n\t                }\n\t            }\n\t            if (gObj.allowPaging) {\n\t                gObj.updateExternalMessage(this.filterStatusMsg);\n\t            }\n\t            this.filterStatusMsg = '';\n\t        };\n\t        Filter.prototype.checkForSkipInput = function (column, value) {\n\t            var isSkip;\n\t            var skipInput;\n\t            if (column.type === 'number') {\n\t                skipInput = ['=', ' ', '!'];\n\t                if (ej2_data_1.DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n\t                    isSkip = true;\n\t                }\n\t            }\n\t            else if (column.type === 'string') {\n\t                skipInput = ['>', '<', '=', '!'];\n\t                for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n\t                    var val = value_1[_i];\n\t                    if (skipInput.indexOf(val) > -1) {\n\t                        isSkip = true;\n\t                    }\n\t                }\n\t            }\n\t            return isSkip;\n\t        };\n\t        Filter.prototype.processFilter = function (e) {\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        Filter.prototype.startTimer = function (e) {\n\t            var _this = this;\n\t            this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n\t        };\n\t        Filter.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Filter.prototype.onTimerTick = function () {\n\t            var filterElement = this.element.querySelector('#' + this.column.field + '_filterBarcell');\n\t            var filterValue = JSON.parse(JSON.stringify(filterElement.value));\n\t            this.stopTimer();\n\t            if (this.value === '') {\n\t                this.removeFilteredColsByField(this.column.field);\n\t                return;\n\t            }\n\t            this.validateFilterValue(this.value);\n\t            this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase);\n\t            this.values[this.column.field] = filterValue;\n\t            filterElement.value = filterValue;\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.validateFilterValue = function (value) {\n\t            var gObj = this.parent;\n\t            var skipInput;\n\t            var index;\n\t            this.matchCase = true;\n\t            switch (this.column.type) {\n\t                case 'number':\n\t                    this.operator = this.filterOperators.equal;\n\t                    skipInput = ['>', '<', '=', '!'];\n\t                    for (var i = 0; i < value.length; i++) {\n\t                        if (skipInput.indexOf(value[i]) > -1) {\n\t                            index = i;\n\t                            break;\n\t                        }\n\t                    }\n\t                    this.getOperator(value.substring(index));\n\t                    if (index !== 0) {\n\t                        this.value = value.substring(0, index);\n\t                    }\n\t                    if (this.value !== '' && value.length >= 1) {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                    }\n\t                    if (isNaN(this.value)) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                case 'datetime':\n\t                    this.operator = this.filterOperators.equal;\n\t                    this.getOperator(value);\n\t                    if (this.value !== '') {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                        if (ej2_base_2.isNullOrUndefined(this.value)) {\n\t                            this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'string':\n\t                    this.matchCase = false;\n\t                    if (value.charAt(0) === '*') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(value.length - 1) === '%') {\n\t                        this.value = this.value.slice(0, -1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(0) === '%') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.endsWith;\n\t                    }\n\t                    else {\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    break;\n\t                case 'boolean':\n\t                    if (value.toLowerCase() === 'true' || value === '1') {\n\t                        this.value = true;\n\t                    }\n\t                    else if (value.toLowerCase() === 'false' || value === '0') {\n\t                        this.value = false;\n\t                    }\n\t                    else if (value.length) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    this.operator = this.filterOperators.equal;\n\t                    break;\n\t                default:\n\t                    this.operator = this.filterOperators.equal;\n\t            }\n\t        };\n\t        Filter.prototype.getOperator = function (value) {\n\t            var singleOp = value.charAt(0);\n\t            var multipleOp = value.slice(0, 2);\n\t            var operators = ej2_base_2.extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, ej2_data_1.DataUtil.operatorSymbols);\n\t            if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n\t                this.operator = operators[singleOp];\n\t                this.value = value.substring(1);\n\t                if (!this.operator) {\n\t                    this.operator = operators[multipleOp];\n\t                    this.value = value.substring(2);\n\t                }\n\t            }\n\t            if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n\t                if (this.value.charAt(0) === '=') {\n\t                    this.operator = this.operator + 'orequal';\n\t                    this.value = this.value.substring(1);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.columnPositionChanged = function (e) {\n\t            var filterCells = [].slice.call(this.element.querySelectorAll('.e-filterbarcell'));\n\t            filterCells.splice(e.toIndex, 0, filterCells.splice(e.fromIndex, 1)[0]);\n\t            this.element.innerHTML = '';\n\t            for (var _i = 0, filterCells_1 = filterCells; _i < filterCells_1.length; _i++) {\n\t                var cell = filterCells_1[_i];\n\t                this.element.appendChild(cell);\n\t            }\n\t        };\n\t        return Filter;\n\t    }());\n\t    exports.Filter = Filter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FilterCellRenderer = (function (_super) {\n\t        __extends(FilterCellRenderer, _super);\n\t        function FilterCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-filterbarcell' });\n\t            return _this;\n\t        }\n\t        FilterCellRenderer.prototype.getGui = function () {\n\t            return ej2_base_2.createElement('div');\n\t        };\n\t        FilterCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var innerDIV = this.getGui();\n\t            var input;\n\t            var column = cell.column;\n\t            if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                node.classList.add('e-fltrtemp');\n\t                ej2_base_2.attributes(innerDIV, {\n\t                    'class': 'e-fltrtempdiv'\n\t                });\n\t                if (ej2_base_1.isNullOrUndefined(column.filterBarTemplate.create)) {\n\t                    input = ej2_base_2.createElement('input', {\n\t                        id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                        attrs: { type: 'search', title: column.headerText }\n\t                    });\n\t                    innerDIV.appendChild(input);\n\t                }\n\t                else {\n\t                    var args = { column: column };\n\t                    var temp = column.filterBarTemplate.create;\n\t                    if (typeof temp === 'string') {\n\t                        temp = ej2_base_1.getValue(temp, window);\n\t                    }\n\t                    input = temp(args);\n\t                    if (typeof input === 'string') {\n\t                        var div = ej2_base_2.createElement('div');\n\t                        div.innerHTML = input;\n\t                        input = div.firstChild;\n\t                    }\n\t                    ej2_base_2.attributes(innerDIV, {\n\t                        class: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                        title: column.headerText,\n\t                        id: column.field + '_filterBarcell',\n\t                    });\n\t                    innerDIV.appendChild(input);\n\t                }\n\t            }\n\t            else {\n\t                ej2_base_2.attributes(innerDIV, {\n\t                    'class': 'e-filterdiv e-fltrinputdiv'\n\t                });\n\t                input = ej2_base_2.createElement('input', {\n\t                    id: column.field + '_filterBarcell', className: 'e-filtertext',\n\t                    attrs: {\n\t                        type: 'search', title: column.headerText + cell.attributes.title,\n\t                        value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n\t                    }\n\t                });\n\t                innerDIV.appendChild(input);\n\t                innerDIV.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-cancel e-hide e-icons e-icon-hide',\n\t                    attrs: { 'aria-label': 'clear filter cell', tabindex: '-1' }\n\t                }));\n\t            }\n\t            if (column.allowFiltering === false || column.field === '' || ej2_base_1.isNullOrUndefined(column.field)) {\n\t                input.setAttribute('disabled', 'true');\n\t                input.classList.add('e-disable');\n\t            }\n\t            if (!column.visible) {\n\t                node.classList.add('e-hide');\n\t            }\n\t            if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                var templateRead = column.filterBarTemplate.read;\n\t                var templateWrite = column.filterBarTemplate.write;\n\t                var args = { element: input, column: column };\n\t                if (typeof templateRead === 'string') {\n\t                    templateRead = args.column = ej2_base_1.getValue(templateRead, window);\n\t                }\n\t                if (typeof templateWrite === 'string') {\n\t                    templateWrite = ej2_base_1.getValue(templateWrite, window);\n\t                }\n\t                templateWrite.call(this, args);\n\t            }\n\t            this.appendHtml(node, innerDIV);\n\t            return node;\n\t        };\n\t        FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return FilterCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.FilterCellRenderer = FilterCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(34), __webpack_require__(9), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, width_controller_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.resizeClassList = {\n\t        root: 'e-rhandler',\n\t        suppress: 'e-rsuppress',\n\t        icon: 'e-ricon',\n\t        helper: 'e-rhelper',\n\t        header: 'th.e-headercell',\n\t        cursor: 'e-rcursor',\n\t        lines: 'e-rlines'\n\t    };\n\t    var Resize = (function () {\n\t        function Resize(parent) {\n\t            this.tapped = false;\n\t            this.isDblClk = true;\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Resize.prototype.autoFitColumns = function (fName) {\n\t            var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n\t                this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n\t            this.findColumn(columnName);\n\t        };\n\t        Resize.prototype.resizeColumn = function (fName, index, id) {\n\t            var gObj = this.parent;\n\t            var tWidth = 0;\n\t            var headerTable = this.parent.getHeaderTable();\n\t            var contentTable = this.parent.getContentTable();\n\t            var headerDivTag = 'e-gridheader';\n\t            var contentDivTag = 'e-gridcontent';\n\t            var indentWidthClone = gObj.getHeaderTable().querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n\t            var indentWidth = 0;\n\t            if (indentWidthClone.length > 0) {\n\t                for (var i = 0; i < indentWidthClone.length; i++) {\n\t                    indentWidth += indentWidthClone[i].offsetWidth;\n\t                }\n\t            }\n\t            var uid = id ? id : this.parent.getUidByColumnField(fName);\n\t            var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n\t            var headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n\t            var headerText = [headerTextClone];\n\t            var contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n\t            var contentText = [];\n\t            for (var i = 0; i < contentTextClone.length; i++) {\n\t                contentText[i] = contentTextClone[i].cloneNode(true);\n\t            }\n\t            var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n\t            var wContent = this.createTable(contentTable, contentText, contentDivTag);\n\t            var columnbyindex = gObj.getColumns()[index];\n\t            var result;\n\t            var width = (wHeader > wContent) ? columnbyindex.width = ej2_base_1.formatUnit(wHeader) : columnbyindex.width = ej2_base_1.formatUnit(wContent);\n\t            this.widthService.setColumnWidth(gObj.getColumns()[index]);\n\t            if (!this.parent.allowResizing) {\n\t                result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n\t                if (result === false) {\n\t                    gObj.getColumns().forEach(function (element) {\n\t                        if (element.visible) {\n\t                            tWidth = tWidth + parseInt(element.width, 10);\n\t                        }\n\t                    });\n\t                }\n\t                var tableWidth_1 = tWidth + indentWidth;\n\t                if (tWidth > 0) {\n\t                    headerTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                    contentTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                }\n\t            }\n\t            var tableWidth = headerTable.offsetWidth;\n\t            var contentwidth = (gObj.getContent().scrollWidth);\n\t            if (contentwidth > tableWidth) {\n\t                headerTable.classList.add('e-tableborder');\n\t                contentTable.classList.add('e-tableborder');\n\t            }\n\t            else {\n\t                headerTable.classList.remove('e-tableborder');\n\t                contentTable.classList.remove('e-tableborder');\n\t            }\n\t        };\n\t        Resize.prototype.destroy = function () {\n\t            this.widthService = null;\n\t            this.unwireEvents();\n\t            this.removeEventListener();\n\t        };\n\t        Resize.prototype.getModuleName = function () {\n\t            return 'resize';\n\t        };\n\t        Resize.prototype.findColumn = function (fName) {\n\t            var _this = this;\n\t            fName.forEach(function (element) {\n\t                var fieldName = element;\n\t                var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n\t                if (_this.parent.getColumns()[columnIndex].visible === true) {\n\t                    _this.resizeColumn(fieldName, columnIndex);\n\t                }\n\t            });\n\t        };\n\t        Resize.prototype.createTable = function (table, text, tag) {\n\t            var myTableDiv = ej2_base_1.createElement('div');\n\t            myTableDiv.className = this.parent.element.className;\n\t            myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n\t            var mySubDiv = ej2_base_1.createElement('div');\n\t            mySubDiv.className = tag;\n\t            var myTable = ej2_base_1.createElement('table');\n\t            myTable.className = table.className;\n\t            myTable.style.cssText = 'table-layout: auto;width: auto';\n\t            var myTr = ej2_base_1.createElement('tr');\n\t            text.forEach(function (element) {\n\t                var tr = myTr.cloneNode();\n\t                tr.className = table.querySelector('tr').className;\n\t                tr.appendChild(element);\n\t                myTable.appendChild(tr);\n\t            });\n\t            mySubDiv.appendChild(myTable);\n\t            myTableDiv.appendChild(mySubDiv);\n\t            document.body.appendChild(myTableDiv);\n\t            var offsetWidthValue = myTable.getBoundingClientRect().width;\n\t            document.body.removeChild(myTableDiv);\n\t            return Math.ceil(offsetWidthValue);\n\t        };\n\t        Resize.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerRefreshed, this.render, this);\n\t        };\n\t        Resize.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t        };\n\t        Resize.prototype.render = function () {\n\t            this.wireEvents();\n\t            if (!(this.parent.gridLines === 'vertical' || this.parent.gridLines === 'both')) {\n\t                this.parent.element.classList.add(exports.resizeClassList.lines);\n\t            }\n\t            this.setHandlerHeight();\n\t        };\n\t        Resize.prototype.wireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t                ej2_base_1.EventHandler.add(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart, _this);\n\t                ej2_base_1.EventHandler.add(ele, events.dblclick, _this.callAutoFit, _this);\n\t            });\n\t        };\n\t        Resize.prototype.unwireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.remove(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart);\n\t                ej2_base_1.EventHandler.remove(ele, events.dblclick, _this.callAutoFit);\n\t            });\n\t        };\n\t        Resize.prototype.getResizeHandlers = function () {\n\t            return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.root));\n\t        };\n\t        Resize.prototype.setHandlerHeight = function () {\n\t            [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.suppress)).forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t            });\n\t        };\n\t        Resize.prototype.callAutoFit = function (e) {\n\t            var col = this.getTargetColumn(e);\n\t            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n\t        };\n\t        Resize.prototype.resizeStart = function (e) {\n\t            if (!this.helper) {\n\t                this.element = e.target;\n\t                this.appendHelper();\n\t                this.column = this.getTargetColumn(e);\n\t                this.pageX = this.getPointX(e);\n\t                if (this.parent.enableRtl) {\n\t                    this.minMove = parseInt(this.column.width.toString(), 10)\n\t                        - (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0);\n\t                }\n\t                else {\n\t                    this.minMove = (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0)\n\t                        - parseInt(this.column.width.toString(), 10);\n\t                }\n\t                this.minMove += this.pageX;\n\t            }\n\t            if (ej2_base_1.Browser.isDevice && !this.helper.classList.contains(exports.resizeClassList.icon)) {\n\t                this.helper.classList.add(exports.resizeClassList.icon);\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper, this);\n\t                ej2_base_1.EventHandler.add(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart, this);\n\t            }\n\t            else {\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.resizeStart, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction();\n\t                    return;\n\t                }\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd, this);\n\t                ej2_base_1.EventHandler.add(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing, this);\n\t                this.updateCursor('add');\n\t            }\n\t        };\n\t        Resize.prototype.cancelResizeAction = function (removeEvents) {\n\t            if (removeEvents) {\n\t                ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t                this.updateCursor('remove');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t            }\n\t            ej2_base_1.detach(this.helper);\n\t            this.refresh();\n\t        };\n\t        Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n\t            if (minWidth && width < minWidth) {\n\t                return minWidth;\n\t            }\n\t            else if ((maxWidth && width > maxWidth)) {\n\t                return maxWidth;\n\t            }\n\t            else {\n\t                return width;\n\t            }\n\t        };\n\t        Resize.prototype.resizing = function (e) {\n\t            var pageX = this.getPointX(e);\n\t            var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n\t            var colData = {\n\t                width: parseInt(this.widthService.getWidth(this.column).toString(), 10) + mousemove,\n\t                minWidth: this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : null,\n\t                maxWidth: this.column.maxWidth ? parseInt(this.column.maxWidth.toString(), 10) : null\n\t            };\n\t            var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n\t            if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n\t                width = this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0;\n\t                this.pageX = pageX = this.minMove;\n\t            }\n\t            if (width !== parseInt(this.column.width.toString(), 10)) {\n\t                this.pageX = pageX;\n\t                this.column.width = ej2_base_1.formatUnit(width);\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.onResize, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction(true);\n\t                    return;\n\t                }\n\t                this.updateColGroup(this.column);\n\t                this.widthService.setColumnWidth(this.column, null, 'resize');\n\t                this.updateHelper();\n\t            }\n\t            this.isDblClk = false;\n\t        };\n\t        Resize.prototype.resizeEnd = function (e) {\n\t            if (!this.helper) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t            ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t            this.updateCursor('remove');\n\t            ej2_base_1.detach(this.helper);\n\t            var args = {\n\t                e: e,\n\t                column: this.column\n\t            };\n\t            this.parent.trigger(events.resizeStop, args);\n\t            this.refresh();\n\t            this.doubleTapEvent(e);\n\t            this.isDblClk = true;\n\t        };\n\t        Resize.prototype.getPointX = function (e) {\n\t            if (e.touches && e.touches.length) {\n\t                return e.touches[0].pageX;\n\t            }\n\t            else {\n\t                return e.pageX;\n\t            }\n\t        };\n\t        Resize.prototype.updateColGroup = function (column) {\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.uid === column.uid) {\n\t                    col.width = column.width;\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        Resize.prototype.getTargetColumn = function (e) {\n\t            var cell = ej2_base_1.closest(e.target, exports.resizeClassList.header);\n\t            var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t            return this.parent.getColumnByUid(uid);\n\t        };\n\t        Resize.prototype.updateCursor = function (action) {\n\t            var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n\t            headerRows.push(this.parent.element);\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                row.classList[action](exports.resizeClassList.cursor);\n\t            }\n\t        };\n\t        Resize.prototype.refresh = function () {\n\t            this.column = null;\n\t            this.pageX = null;\n\t            this.element = null;\n\t            this.helper = null;\n\t        };\n\t        Resize.prototype.appendHelper = function () {\n\t            this.helper = ej2_base_1.createElement('div', {\n\t                className: exports.resizeClassList.helper\n\t            });\n\t            this.parent.element.appendChild(this.helper);\n\t            var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            var tr = [].slice.call(this.parent.getHeaderTable().querySelectorAll('tr'));\n\t            for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n\t                height += tr[i].offsetHeight;\n\t            }\n\t            var pos = this.calcPos(rect);\n\t            pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n\t            this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n\t        };\n\t        Resize.prototype.getScrollBarWidth = function () {\n\t            var ele = this.parent.getContent().firstChild;\n\t            return ele.scrollWidth > ele.clientWidth ? util_1.getScrollBarWidth() : 0;\n\t        };\n\t        Resize.prototype.removeHelper = function (e) {\n\t            var cls = e.target.classList;\n\t            if (!(cls.contains(exports.resizeClassList.root) || cls.contains(exports.resizeClassList.icon)) && this.helper) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t                ej2_base_1.detach(this.helper);\n\t                this.refresh();\n\t            }\n\t        };\n\t        Resize.prototype.updateHelper = function () {\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            this.helper.style.left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2)) + 'px';\n\t        };\n\t        Resize.prototype.calcPos = function (elem) {\n\t            var parentOffset = {\n\t                top: 0,\n\t                left: 0\n\t            };\n\t            var offset = elem.getBoundingClientRect();\n\t            var doc = elem.ownerDocument;\n\t            var offsetParent = elem.offsetParent || doc.documentElement;\n\t            while (offsetParent &&\n\t                (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n\t                offsetParent.style.position === 'static') {\n\t                offsetParent = offsetParent.parentNode;\n\t            }\n\t            if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n\t                parentOffset = offsetParent.getBoundingClientRect();\n\t            }\n\t            return {\n\t                top: offset.top - parentOffset.top,\n\t                left: offset.left - parentOffset.left\n\t            };\n\t        };\n\t        Resize.prototype.doubleTapEvent = function (e) {\n\t            if (this.getUserAgent() && this.isDblClk) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.callAutoFit(e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Resize.prototype.getUserAgent = function () {\n\t            var userAgent = ej2_base_1.Browser.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Resize.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        return Resize;\n\t    }());\n\t    exports.Resize = Resize;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Reorder = (function () {\n\t        function Reorder(parent) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.reorderComplete, this.onActionComplete, this);\n\t            this.parent.on(events.columnDrag, this.drag, this);\n\t            this.parent.on(events.columnDragStart, this.dragStart, this);\n\t            this.parent.on(events.columnDragStop, this.dragStop, this);\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n\t        }\n\t        Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n\t            return srcElem.parentElement.isEqualNode(destElem.parentElement) && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t        };\n\t        Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n\t            var isFound;\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var header;\n\t            while (!isFound && headers.length > 0) {\n\t                header = headers.pop();\n\t                isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t            }\n\t            return isFound;\n\t        };\n\t        Reorder.prototype.findColParent = function (col, cols, parent) {\n\t            parent = parent;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (col === cols[i]) {\n\t                    return true;\n\t                }\n\t                else if (cols[i].columns) {\n\t                    var cnt = parent.length;\n\t                    parent.push(cols[i]);\n\t                    if (!this.findColParent(col, cols[i].columns, parent)) {\n\t                        parent.splice(cnt, parent.length - cnt);\n\t                    }\n\t                    else {\n\t                        return true;\n\t                    }\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Reorder.prototype.getColumnsModel = function (cols) {\n\t            var columnModel = [];\n\t            var subCols = [];\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                columnModel.push(cols[i]);\n\t                if (cols[i].columns) {\n\t                    subCols = subCols.concat(cols[i].columns);\n\t                }\n\t            }\n\t            if (subCols.length) {\n\t                columnModel = columnModel.concat(this.getColumnsModel(subCols));\n\t            }\n\t            return columnModel;\n\t        };\n\t        Reorder.prototype.headerDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.closest(e.target, 'th')) {\n\t                return;\n\t            }\n\t            var destElem = ej2_base_2.closest(e.target, '.e-headercell');\n\t            if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t                var oldIdx = util_1.getElementIndex(this.element, headers);\n\t                var columns = this.getColumnsModel(this.parent.columns);\n\t                var column = columns[oldIdx];\n\t                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n\t                this.moveColumns(newIndex, column);\n\t            }\n\t        };\n\t        Reorder.prototype.isActionPrevent = function (gObj) {\n\t            return util_1.isActionPrevent(gObj);\n\t        };\n\t        Reorder.prototype.moveColumns = function (destIndex, column) {\n\t            var gObj = this.parent;\n\t            if (this.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n\t                return;\n\t            }\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var cols = parent ? parent.columns : this.parent.columns;\n\t            var srcIdx = util_1.inArray(column, cols);\n\t            if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n\t                return;\n\t            }\n\t            cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n\t            gObj.getColumns(true);\n\t            gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n\t            gObj.notify(events.modelChanged, {\n\t                type: events.actionBegin, requestType: 'reorder'\n\t            });\n\t        };\n\t        Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var cols = this.parent.columns;\n\t            var flatColumns = this.getColumnsModel(cols);\n\t            var parent = this.getColParent(flatColumns[util_1.getElementIndex(srcElem, headers)], cols);\n\t            cols = parent ? parent.columns : cols;\n\t            return util_1.inArray(flatColumns[util_1.getElementIndex(destElem, headers)], cols);\n\t        };\n\t        Reorder.prototype.getColParent = function (column, columns) {\n\t            var parents = [];\n\t            this.findColParent(column, columns, parents);\n\t            return parents[parents.length - 1];\n\t        };\n\t        Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n\t            var column = this.parent.getColumnByField(toFName);\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var columns = parent ? parent.columns : this.parent.columns;\n\t            var destIndex = util_1.inArray(column, columns);\n\t            if (destIndex > -1) {\n\t                this.moveColumns(destIndex, this.parent.getColumnByField(fromFName));\n\t            }\n\t        };\n\t        Reorder.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.createReorderElement();\n\t            }\n\t        };\n\t        Reorder.prototype.createReorderElement = function () {\n\t            var header = this.parent.element.querySelector('.e-headercontent');\n\t            this.upArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n\t            this.downArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n\t        };\n\t        Reorder.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, { type: events.actionComplete }));\n\t        };\n\t        Reorder.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_2.remove(this.upArrow);\n\t            ej2_base_2.remove(this.downArrow);\n\t            this.parent.off(events.headerDrop, this.headerDrop);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.reorderComplete, this.onActionComplete);\n\t            this.parent.off(events.columnDrag, this.drag);\n\t            this.parent.off(events.columnDragStart, this.dragStart);\n\t            this.parent.off(events.columnDragStop, this.dragStop);\n\t            this.parent.off(events.headerRefreshed, this.createReorderElement);\n\t        };\n\t        Reorder.prototype.drag = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            var closest = ej2_base_2.closest(target, '.e-headercell:not(.e-stackedHeaderCell)');\n\t            var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n\t            var isLeft = this.x > util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            this.updateScrollPostion(e.event);\n\t            if (closest && !closest.isEqualNode(this.element)) {\n\t                target = closest;\n\t                if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n\t                    this.updateArrowPosition(target, isLeft);\n\t                    ej2_base_2.classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n\t                }\n\t                else if (!(gObj.allowGrouping && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            }\n\t            gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n\t        };\n\t        Reorder.prototype.updateScrollPostion = function (e) {\n\t            var _this = this;\n\t            var x = util_1.getPosition(e).x;\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            var scrollElem = this.parent.getContent().firstElementChild;\n\t            if (x > cliRectBase.left && x < cliRectBase.left + 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n\t            }\n\t            else if (x < cliRectBase.right && x > cliRectBase.right - 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n\t            }\n\t        };\n\t        Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n\t            var scrollLeft = scrollElem.scrollLeft;\n\t            scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n\t            if (scrollLeft !== scrollElem.scrollLeft) {\n\t                this.setDisplay('none');\n\t            }\n\t        };\n\t        Reorder.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n\t            var cliRect = target.getBoundingClientRect();\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n\t                return;\n\t            }\n\t            this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n\t            this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n\t            this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n\t            this.setDisplay('');\n\t        };\n\t        Reorder.prototype.dragStart = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            this.element = target.classList.contains('e-headercell') ? target :\n\t                util_1.parentsUntil(target, 'e-headercell');\n\t            this.x = util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            gObj.trigger(events.columnDragStart, {\n\t                target: target, draggableType: 'headercell', column: e.column\n\t            });\n\t        };\n\t        Reorder.prototype.dragStop = function (e) {\n\t            var gObj = this.parent;\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            if (!e.cancel) {\n\t                gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n\t            }\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t        };\n\t        Reorder.prototype.setDisplay = function (display) {\n\t            this.upArrow.style.display = display;\n\t            this.downArrow.style.display = display;\n\t        };\n\t        Reorder.prototype.getModuleName = function () {\n\t            return 'reorder';\n\t        };\n\t        return Reorder;\n\t    }());\n\t    exports.Reorder = Reorder;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowDD = (function () {\n\t        function RowDD(parent) {\n\t            var _this = this;\n\t            this.selectedRows = [];\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length ||\n\t                    !e.sender.target.classList.contains('e-selectionbackground')) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_3.createElement('div', {\n\t                    className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n\t                    styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n\t                });\n\t                var table = ej2_base_3.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n\t                var tbody = ej2_base_3.createElement('tbody');\n\t                var selectedRows = gObj.getSelectedRows();\n\t                for (var i = 0, len = selectedRows.length; i < len; i++) {\n\t                    var selectedRow = selectedRows[i].cloneNode(true);\n\t                    util_1.removeElement(selectedRow, '.e-indentcell');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowcollapse');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowexpand');\n\t                    tbody.appendChild(selectedRow);\n\t                }\n\t                table.appendChild(tbody);\n\t                visualElement.appendChild(table);\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length) {\n\t                    return;\n\t                }\n\t                gObj.trigger(events.rowDragStart, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: e.target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n\t                }\n\t                _this.isDragStop = false;\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                var target = _this.getElementFromPosition(cloneElement, e.event);\n\t                ej2_base_3.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                gObj.trigger(events.rowDrag, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                gObj.element.classList.add('e-rowdrag');\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent') ||\n\t                    util_1.parentsUntil(cloneElement.parentElement, 'e-grid').id === util_1.parentsUntil(target, 'e-grid').id) {\n\t                    ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = _this.getElementFromPosition(e.helper, e.event);\n\t                gObj.element.classList.remove('e-rowdrag');\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n\t                }\n\t                gObj.trigger(events.rowDrop, {\n\t                    target: target, draggableType: 'rows',\n\t                    rows: gObj.getSelectedRows(), data: gObj.getSelectedRecords()\n\t                });\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent')) {\n\t                    ej2_base_3.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeDrag, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.rowDragAndDropComplete, this.onActionComplete, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t        }\n\t        RowDD.prototype.initializeDrag = function () {\n\t            var gObj = this.parent;\n\t            var column;\n\t            var drag;\n\t            drag = new ej2_base_1.Draggable(gObj.getContent(), {\n\t                dragTarget: '.e-rowcell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        RowDD.prototype.getElementFromPosition = function (element, event) {\n\t            var target;\n\t            var position = util_1.getPosition(event);\n\t            element.style.display = 'none';\n\t            target = document.elementFromPoint(position.x, position.y);\n\t            element.style.display = '';\n\t            return target;\n\t        };\n\t        RowDD.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, { type: events.actionComplete }));\n\t        };\n\t        RowDD.prototype.getTargetIdx = function (targetRow) {\n\t            return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n\t        };\n\t        RowDD.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') !== 'grouping') {\n\t                var targetRow = ej2_base_3.closest(e.target, 'tr');\n\t                var srcControl = void 0;\n\t                var currentIndex = void 0;\n\t                if (e.droppedElement.parentElement.id !== gObj.element.id) {\n\t                    srcControl = e.droppedElement.parentElement.ej2_instances[0];\n\t                }\n\t                else {\n\t                    return;\n\t                }\n\t                if (srcControl.element.id !== gObj.element.id && srcControl.rowDropSettings.targetID !== gObj.element.id) {\n\t                    return;\n\t                }\n\t                var records = srcControl.getSelectedRecords();\n\t                var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n\t                var count = 0;\n\t                if (isNaN(targetIndex)) {\n\t                    targetIndex = currentIndex = 0;\n\t                }\n\t                if (gObj.allowPaging) {\n\t                    targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n\t                }\n\t                gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n\t                gObj.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t                var selectedRows = srcControl.getSelectedRowIndexes();\n\t                var skip = srcControl.allowPaging ?\n\t                    (srcControl.pageSettings.currentPage * srcControl.pageSettings.pageSize) - srcControl.pageSettings.pageSize : 0;\n\t                this.selectedRows = [];\n\t                for (var i = 0, len = records.length; i < len; i++) {\n\t                    this.selectedRows.push(skip + selectedRows[i]);\n\t                }\n\t                srcControl.notify(events.rowsRemoved, { indexes: this.selectedRows });\n\t                srcControl.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t            }\n\t        };\n\t        RowDD.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.initializeDrag();\n\t            }\n\t        };\n\t        RowDD.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeDrag);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.rowDragAndDropComplete, this.onActionComplete);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t        };\n\t        RowDD.prototype.getModuleName = function () {\n\t            return 'rowDragAndDrop';\n\t        };\n\t        return RowDD;\n\t    }());\n\t    exports.RowDD = RowDD;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Group = (function () {\n\t        function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n\t            var _this = this;\n\t            this.visualElement = ej2_base_2.createElement('div', {\n\t                className: 'e-cloneproperties e-dragclone e-gdclone',\n\t                styles: 'line-height:23px', attrs: { action: 'grouping' }\n\t            });\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-groupheadercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-groupheadercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n\t                _this.visualElement.textContent = element.textContent;\n\t                _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n\t                _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n\t                _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                gObj.element.appendChild(_this.visualElement);\n\t                return _this.visualElement;\n\t            };\n\t            this.dragStart = function () {\n\t                _this.parent.element.classList.add('e-ungroupdrag');\n\t            };\n\t            this.drag = function (e) {\n\t                var target = e.target;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n\t                ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                if (!(util_1.parentsUntil(target, 'e-gridcontent') || util_1.parentsUntil(target, 'e-headercell'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                _this.parent.element.classList.remove('e-ungroupdrag');\n\t                if (!(util_1.parentsUntil(e.target, 'e-gridcontent') || util_1.parentsUntil(e.target, 'e-gridheader'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                _this.element.classList.remove('e-hover');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n\t                _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                _this.groupColumn(column.field);\n\t            };\n\t            this.contentRefresh = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.groupSettings = groupSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.sortedColumns = sortedColumns;\n\t            this.addEventListener();\n\t        }\n\t        Group.prototype.columnDrag = function (e) {\n\t            var gObj = this.parent;\n\t            var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            if (!util_1.parentsUntil(e.target, 'e-groupdroparea') &&\n\t                !(this.parent.allowReordering && util_1.parentsUntil(e.target, 'e-headercell'))) {\n\t                ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t            }\n\t            e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n\t        };\n\t        Group.prototype.columnDragStart = function (e) {\n\t            if (e.target.classList.contains('e-stackedheadercell')) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n\t            this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n\t            var element = e.target.classList.contains('e-headercell') ? e.target : util_1.parentsUntil(e.target, 'e-headercell');\n\t            this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n\t        };\n\t        Group.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') === 'grouping') {\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                this.ungroupColumn(column.field);\n\t            }\n\t        };\n\t        Group.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.groupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.columnDrag, this.columnDrag, this);\n\t            this.parent.on(events.columnDragStart, this.columnDragStart, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t            this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t        };\n\t        Group.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.groupComplete, this.onActionComplete);\n\t            this.parent.off(events.ungroupComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.columnDrag, this.columnDrag);\n\t            this.parent.off(events.columnDragStart, this.columnDragStart);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t            this.parent.off(events.sortComplete, this.refreshSortIcons);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.headerDrop, this.headerDrop);\n\t        };\n\t        Group.prototype.initialEnd = function () {\n\t            var gObj = this.parent;\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.groupColumn(col);\n\t                }\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Group.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (!this.groupSettings.columns.length) {\n\t                return;\n\t            }\n\t            e.preventDefault();\n\t            switch (e.action) {\n\t                case 'altDownArrow':\n\t                case 'altUpArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var rows = gObj.getContentTable().querySelector('tbody').children;\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var grpRow = void 0;\n\t                        for (var i = dataRow.rowIndex; i >= 0; i--) {\n\t                            if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n\t                                grpRow = rows[i];\n\t                                break;\n\t                            }\n\t                        }\n\t                        this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n\t                            '.e-recordplusexpand' : '.e-recordpluscollapse'));\n\t                    }\n\t                    break;\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t            }\n\t        };\n\t        Group.prototype.clickHandler = function (e) {\n\t            this.expandCollapseRows(e.target);\n\t            this.applySortFromTarget(e.target);\n\t            this.unGroupFromTarget(e.target);\n\t            this.toogleGroupFromHeader(e.target);\n\t        };\n\t        Group.prototype.unGroupFromTarget = function (target) {\n\t            if (target.classList.contains('e-ungroupbutton')) {\n\t                this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t            }\n\t        };\n\t        Group.prototype.toogleGroupFromHeader = function (target) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                if (target.classList.contains('e-grptogglebtn')) {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                    else {\n\t                        this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                }\n\t                else {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.applySortFromTarget = function (target) {\n\t            var gObj = this.parent;\n\t            var gHeader = ej2_base_2.closest(target, '.e-groupheadercell');\n\t            if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n\t                !target.classList.contains('e-toggleungroup')) {\n\t                var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n\t                if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n\t                    gObj.sortColumn(field, 'descending', true);\n\t                }\n\t                else {\n\t                    gObj.sortColumn(field, 'ascending', true);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapseRows = function (target) {\n\t            var trgt = util_1.parentsUntil(target, 'e-recordplusexpand') ||\n\t                util_1.parentsUntil(target, 'e-recordpluscollapse');\n\t            if (trgt) {\n\t                var cellIdx = trgt.cellIndex;\n\t                var rowIdx = trgt.parentElement.rowIndex;\n\t                var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t                var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n\t                var isHide = void 0;\n\t                var expandElem = void 0;\n\t                var toExpand = [];\n\t                var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n\t                var expand = false;\n\t                if (trgt.classList.contains('e-recordpluscollapse')) {\n\t                    trgt.className = 'e-recordplusexpand';\n\t                    trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n\t                    expand = true;\n\t                }\n\t                else {\n\t                    isHide = true;\n\t                    trgt.className = 'e-recordpluscollapse';\n\t                    trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                }\n\t                this.aria.setExpand(trgt, expand);\n\t                for (var i = 0, len = rows.length; i < len; i++) {\n\t                    if (rows[i].querySelectorAll('td')[cellIdx] &&\n\t                        rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n\t                        if (isHide) {\n\t                            rows[i].style.display = 'none';\n\t                        }\n\t                        else {\n\t                            if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n\t                                rows[i].style.display = '';\n\t                                expandElem = rows[i].querySelector('.e-recordplusexpand');\n\t                                if (expandElem) {\n\t                                    toExpand.push(expandElem);\n\t                                }\n\t                                if (rows[i].classList.contains('e-detailrow')) {\n\t                                    if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n\t                                        rows[i].style.display = 'none';\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        break;\n\t                    }\n\t                }\n\t                for (var i = 0, len = toExpand.length; i < len; i++) {\n\t                    toExpand[i].className = 'e-recordpluscollapse';\n\t                    toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                    this.expandCollapseRows(toExpand[i]);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapse = function (isExpand) {\n\t            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t            var row;\n\t            for (var i = 0, len = rowNodes.length; i < len; i++) {\n\t                if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n\t                    row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n\t                    if (row) {\n\t                        row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n\t                        row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n\t                            'e-icons e-gnextforward e-icon-grightarrow';\n\t                    }\n\t                    if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n\t                        rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n\t                        rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                    }\n\t                }\n\t                else {\n\t                    rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        Group.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        Group.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderGroupDropArea();\n\t            this.initDragAndDrop();\n\t            this.refreshToggleBtn();\n\t        };\n\t        Group.prototype.renderGroupDropArea = function () {\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n\t            this.updateGroupDropArea();\n\t            this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n\t            if (!this.groupSettings.showDropArea) {\n\t                this.element.style.display = 'none';\n\t            }\n\t        };\n\t        Group.prototype.updateGroupDropArea = function () {\n\t            if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n\t                var dragLabel = this.l10n.getConstant('GroupDropArea');\n\t                this.element.innerHTML = dragLabel;\n\t                this.element.classList.remove('e-grouped');\n\t            }\n\t            else {\n\t                if (this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && this.groupSettings.columns.length === 1) {\n\t                    this.element.innerHTML = '';\n\t                }\n\t                this.element.classList.add('e-grouped');\n\t            }\n\t        };\n\t        Group.prototype.initDragAndDrop = function () {\n\t            this.initializeGHeaderDrop();\n\t            this.initializeGHeaderDrag();\n\t        };\n\t        Group.prototype.initializeGHeaderDrag = function () {\n\t            var drag = new ej2_base_1.Draggable(this.element, {\n\t                dragTarget: '.e-groupheadercell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        Group.prototype.headerDrop = function (e) {\n\t            if (!e.uid) {\n\t                return;\n\t            }\n\t            var column = this.parent.getColumnByUid(e.uid);\n\t            this.ungroupColumn(column.field);\n\t        };\n\t        Group.prototype.initializeGHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(this.element, {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        Group.prototype.groupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = gObj.groupSettings.showGroupedColumn;\n\t            this.colName = columnName;\n\t            if (this.contentRefresh) {\n\t                this.updateModel();\n\t            }\n\t            else {\n\t                this.addColToGroupDrop(columnName);\n\t            }\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.ungroupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = this.parent.enableColumnVirtualization ?\n\t                this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = true;\n\t            this.colName = column.field;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.splice(columns.indexOf(this.colName), 1);\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n\t                    if (columnName === gObj.sortSettings.columns[i].field) {\n\t                        gObj.sortSettings.columns.splice(i, 1);\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            this.groupSettings.columns = columns;\n\t            if (gObj.allowGrouping) {\n\t                this.parent.dataBind();\n\t            }\n\t        };\n\t        Group.prototype.updateModel = function () {\n\t            var gObj = this.parent;\n\t            var i = 0;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.push(this.colName);\n\t            this.groupSettings.columns = columns;\n\t            while (i < gObj.sortSettings.columns.length) {\n\t                if (gObj.sortSettings.columns[i].field === this.colName) {\n\t                    break;\n\t                }\n\t                i++;\n\t            }\n\t            if (gObj.sortSettings.columns.length === i) {\n\t                gObj.sortSettings.columns.push({ field: this.colName, direction: 'ascending' });\n\t            }\n\t            else if (!gObj.allowSorting) {\n\t                gObj.sortSettings.columns[i].direction = 'ascending';\n\t            }\n\t            this.parent.dataBind();\n\t        };\n\t        Group.prototype.onActionComplete = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.requestType === 'grouping') {\n\t                this.addColToGroupDrop(this.colName);\n\t            }\n\t            else {\n\t                this.removeColFromGroupDrop(this.colName);\n\t            }\n\t            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n\t            } : { requestType: 'ungrouping', type: events.actionComplete };\n\t            this.parent.trigger(events.actionComplete, ej2_base_3.extend(e, args));\n\t        };\n\t        Group.prototype.addColToGroupDrop = function (field) {\n\t            var gObj = this.parent;\n\t            var direction = 'ascending';\n\t            var groupedColumn = ej2_base_2.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n\t            var childDiv = ej2_base_2.createElement('div', { attrs: { 'ej-mappingname': field } });\n\t            var column = this.parent.getColumnByField(field);\n\t            var headerCell = gObj.getColumnHeaderByUid(column.uid);\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-grouptext', innerHTML: column.headerText,\n\t                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t            }));\n\t            if (this.groupSettings.showToggleButton) {\n\t                childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n\t                    attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n\t                }));\n\t            }\n\t            if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n\t                direction = headerCell.querySelector('.e-ascending') ? 'ascending' : 'descending';\n\t            }\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-groupsort e-icons ' + ('e-' + direction + ' e-icon-' + direction), innerHTML: '&nbsp;',\n\t                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t            }));\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n\t                attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n\t                styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n\t            }));\n\t            groupedColumn.appendChild(childDiv);\n\t            this.element.appendChild(groupedColumn);\n\t        };\n\t        Group.prototype.refreshToggleBtn = function (isRemove) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n\t                for (var i = 0, len = headers.length; i < len; i++) {\n\t                    if (!(headers[i].classList.contains('e-emptycell'))) {\n\t                        var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n\t                        if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n\t                            ej2_base_2.remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n\t                        }\n\t                        if (!isRemove) {\n\t                            headers[i].appendChild(ej2_base_2.createElement('span', {\n\t                                className: 'e-grptogglebtn e-icons ' +\n\t                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n\t                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n\t                            }));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.removeColFromGroupDrop = function (field) {\n\t            ej2_base_2.remove(this.getGHeaderCell(field));\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                                columnName: this.colName, requestType: 'grouping', type: events.actionBegin\n\t                            } : { requestType: 'ungrouping', type: events.actionBegin };\n\t                            this.parent.notify(events.modelChanged, args);\n\t                        }\n\t                        break;\n\t                    case 'showDropArea':\n\t                        this.updateGroupDropArea();\n\t                        this.groupSettings.showDropArea ? this.element.style.display = '' : this.element.style.display = 'none';\n\t                        break;\n\t                    case 'showGroupedColumn':\n\t                        this.updateGroupedColumn(this.groupSettings.showGroupedColumn);\n\t                        this.parent.notify(events.modelChanged, { requestType: 'refresh' });\n\t                        break;\n\t                    case 'showUngroupButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showUngroupButton, 'e-ungroupbutton');\n\t                        break;\n\t                    case 'showToggleButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n\t                        this.parent.refreshHeader();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.updateGroupedColumn = function (isVisible) {\n\t            for (var i = 0; i < this.groupSettings.columns.length; i++) {\n\t                this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n\t            }\n\t        };\n\t        Group.prototype.updateButtonVisibility = function (isVisible, className) {\n\t            var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n\t            for (var i = 0; i < gHeader.length; i++) {\n\t                gHeader[i].style.display = isVisible ? '' : 'none';\n\t            }\n\t        };\n\t        Group.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Group.prototype.destroy = function () {\n\t            this.clearGrouping();\n\t            this.removeEventListener();\n\t            this.refreshToggleBtn(true);\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        Group.prototype.clearGrouping = function () {\n\t            var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            this.contentRefresh = false;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.ungroupColumn(cols[i]);\n\t            }\n\t            this.contentRefresh = true;\n\t        };\n\t        Group.prototype.getModuleName = function () {\n\t            return 'group';\n\t        };\n\t        Group.prototype.refreshSortIcons = function (e) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = gObj.sortSettings.columns;\n\t            var gCols = gObj.groupSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            this.refreshToggleBtn();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n\t                    this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n\t                    ej2_base_2.classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n\t                    if (cols.length > 1) {\n\t                        header.querySelector('.e-headercelldiv').appendChild(ej2_base_2.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n\t                    }\n\t                }\n\t                else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n\t                    if (cols[i].direction === 'ascending') {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n\t                    }\n\t                    else {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0, len = gCols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(gCols[i]) === -1) {\n\t                    continue;\n\t                }\n\t                gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n\t            }\n\t        };\n\t        Group.prototype.getGHeaderCell = function (field) {\n\t            if (this.element && this.element.querySelector('[ej-mappingname=' + field + ']')) {\n\t                return this.element.querySelector('[ej-mappingname=' + field + ']').parentElement;\n\t            }\n\t            return null;\n\t        };\n\t        return Group;\n\t    }());\n\t    exports.Group = Group;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(62), __webpack_require__(9), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Toolbar = (function () {\n\t        function Toolbar(parent, serviceLocator) {\n\t            this.predefinedItems = {};\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Toolbar.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            var preItems = ['add', 'edit', 'update', 'delete', 'cancel', 'print',\n\t                'pdfexport', 'excelexport', 'wordexport', 'csvexport'];\n\t            for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n\t                var item = preItems_1[_i];\n\t                var localeName = item[0].toUpperCase() + item.slice(1);\n\t                this.predefinedItems[item] = {\n\t                    id: this.gridID + '_' + item, prefixIcon: 'e-' + item,\n\t                    text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n\t                };\n\t            }\n\t            this.predefinedItems.search = {\n\t                id: this.gridID + '_search', template: '<div class=\"e-search\" role=\"search\" >\\\n\t                         <span id=\"' + this.gridID + '_searchbutton\" class=\"e-searchfind e-icons\" tabindex=\"-1\"\\\n\t                         role=\"button\" aria-label= \"search\"></span>\\\n\t                         <input id=\"' + this.gridID + '_searchbar\" aria-multiline= \"false\" type=\"search\"\\\n\t                         placeholder=' + this.l10n.getConstant('Search') + '>\\\n\t                         </input></div>', tooltipText: this.l10n.getConstant('Search'), align: 'right'\n\t            };\n\t            this.predefinedItems.columnchooser = {\n\t                id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n\t                text: 'Columns', tooltipText: 'columns', align: 'right',\n\t            };\n\t            this.createToolbar();\n\t        };\n\t        Toolbar.prototype.getToolbar = function () {\n\t            return this.toolbar.element;\n\t        };\n\t        Toolbar.prototype.destroy = function () {\n\t            if (!this.toolbar.isDestroyed) {\n\t                this.unWireEvent();\n\t                this.toolbar.destroy();\n\t                this.removeEventListener();\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t        };\n\t        Toolbar.prototype.createToolbar = function () {\n\t            var items = this.getItems();\n\t            this.toolbar = new ej2_navigations_1.Toolbar({\n\t                items: items,\n\t                clicked: this.toolbarClickHandler.bind(this),\n\t                enablePersistence: this.parent.enablePersistence,\n\t                enableRtl: this.parent.enableRtl\n\t            });\n\t            this.element = ej2_base_2.createElement('div', { id: this.gridID + '_toolbarItems' });\n\t            if (this.parent.toolbarTemplate) {\n\t                if (typeof (this.parent.toolbarTemplate) === 'string') {\n\t                    this.toolbar.appendTo(this.parent.toolbarTemplate);\n\t                    this.element = this.toolbar.element;\n\t                }\n\t                else {\n\t                    this.element = util_1.templateCompiler(this.parent.toolbarTemplate)()[1];\n\t                }\n\t            }\n\t            else {\n\t                this.toolbar.appendTo(this.element);\n\t            }\n\t            this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n\t            this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n\t            this.wireEvent();\n\t            this.refreshToolbarItems();\n\t            if (this.parent.searchSettings) {\n\t                this.updateSearchBox();\n\t            }\n\t        };\n\t        Toolbar.prototype.refreshToolbarItems = function (args) {\n\t            var gObj = this.parent;\n\t            var enableItems = [];\n\t            var disableItems = [];\n\t            var edit = gObj.editSettings;\n\t            edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n\t            edit.allowEditing ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n\t            edit.allowDeleting ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n\t            if (gObj.editSettings.mode === 'batch') {\n\t                if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems.push(this.gridID + '_update');\n\t                    enableItems.push(this.gridID + '_cancel');\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            else {\n\t                if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n\t                    disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            this.enableItems(enableItems, true);\n\t            this.enableItems(disableItems, false);\n\t        };\n\t        Toolbar.prototype.getItems = function () {\n\t            var items = [];\n\t            var toolbarItems = this.parent.toolbar || [];\n\t            if (typeof (this.parent.toolbar) === 'string') {\n\t                return [];\n\t            }\n\t            for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n\t                var item = toolbarItems_1[_i];\n\t                typeof (item) === 'string' ? items.push(this.getItemObject(item)) : items.push(this.getItem(item));\n\t            }\n\t            return items;\n\t        };\n\t        Toolbar.prototype.getItem = function (itemObject) {\n\t            var item = this.predefinedItems[itemObject.text];\n\t            if (item) {\n\t                ej2_base_1.extend(item, item, itemObject);\n\t            }\n\t            else {\n\t                item = itemObject;\n\t            }\n\t            return item;\n\t        };\n\t        Toolbar.prototype.getItemObject = function (itemName) {\n\t            return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n\t        };\n\t        Toolbar.prototype.enableItems = function (items, isEnable) {\n\t            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n\t                var item = items_1[_i];\n\t                var element = this.element.querySelector('#' + item);\n\t                if (element) {\n\t                    this.toolbar.enableItems(element.parentElement, isEnable);\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.toolbarClickHandler = function (args) {\n\t            var gObj = this.parent;\n\t            var gID = this.gridID;\n\t            if (!args.item) {\n\t                gObj.trigger(events.toolbarClick, args);\n\t                return;\n\t            }\n\t            switch (args.item.id) {\n\t                case gID + '_print':\n\t                    gObj.print();\n\t                    break;\n\t                case gID + '_edit':\n\t                    gObj.startEdit();\n\t                    break;\n\t                case gID + '_update':\n\t                    gObj.endEdit();\n\t                    break;\n\t                case gID + '_cancel':\n\t                    gObj.closeEdit();\n\t                    break;\n\t                case gID + '_add':\n\t                    gObj.addRecord();\n\t                    break;\n\t                case gID + '_delete':\n\t                    gObj.deleteRecord();\n\t                    break;\n\t                case gID + '_search':\n\t                    if (args.originalEvent.target.id === gID + '_searchbutton') {\n\t                        this.search();\n\t                    }\n\t                    break;\n\t                case gID + '_columnchooser':\n\t                    var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t                    var y = tarElement.getBoundingClientRect().top;\n\t                    var x = tarElement.getBoundingClientRect().left;\n\t                    var targetEle = args.originalEvent.target;\n\t                    y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n\t                    gObj.createColumnchooser(x, y, targetEle);\n\t                    break;\n\t                default:\n\t                    gObj.trigger(events.toolbarClick, args);\n\t            }\n\t        };\n\t        Toolbar.prototype.modelChanged = function (e) {\n\t            if (e.module === 'edit') {\n\t                this.refreshToolbarItems();\n\t            }\n\t        };\n\t        Toolbar.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n\t                return;\n\t            }\n\t            if (this.element) {\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t            this.render();\n\t        };\n\t        Toolbar.prototype.keyUpHandler = function (e) {\n\t            if (e.keyCode === 13) {\n\t                this.search();\n\t            }\n\t        };\n\t        Toolbar.prototype.search = function () {\n\t            this.parent.search(this.searchElement.value);\n\t        };\n\t        Toolbar.prototype.updateSearchBox = function () {\n\t            if (this.searchElement) {\n\t                this.searchElement.value = this.parent.searchSettings.key;\n\t            }\n\t        };\n\t        Toolbar.prototype.wireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n\t            }\n\t        };\n\t        Toolbar.prototype.unWireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n\t            }\n\t        };\n\t        Toolbar.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n\t            this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n\t            this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n\t            this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n\t            this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n\t            this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n\t        };\n\t        Toolbar.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.onPropertyChanged);\n\t            this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n\t            this.parent.off(events.modelChanged, this.refreshToolbarItems);\n\t            this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n\t            this.parent.off(events.inBoundModelChanged, this.modelChanged);\n\t            this.parent.off(events.dataBound, this.refreshToolbarItems);\n\t        };\n\t        Toolbar.prototype.getModuleName = function () {\n\t            return 'toolbar';\n\t        };\n\t        return Toolbar;\n\t    }());\n\t    exports.Toolbar = Toolbar;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_62__;\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(13), __webpack_require__(9), __webpack_require__(64), __webpack_require__(65), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, constant_1, footer_renderer_1, summary_cell_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Aggregate = (function () {\n\t        function Aggregate(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        Aggregate.prototype.getModuleName = function () {\n\t            return 'aggregate';\n\t        };\n\t        Aggregate.prototype.initiateRender = function () {\n\t            var _this = this;\n\t            var cellFac = this.locator.getService('cellRendererFactory');\n\t            var instance = new summary_cell_renderer_1.SummaryCellRenderer(this.parent, this.locator);\n\t            [enum_1.CellType.Summary, enum_1.CellType.CaptionSummary, enum_1.CellType.GroupSummary].forEach(function (type) {\n\t                return cellFac.addCellRenderer(type, instance);\n\t            });\n\t            this.footerRenderer = new footer_renderer_1.FooterRenderer(this.parent, this.locator);\n\t            this.footerRenderer.renderPanel();\n\t            this.footerRenderer.renderTable();\n\t            this.locator.register('footerRenderer', this.footerRenderer);\n\t            var fn = function () {\n\t                _this.prepareSummaryInfo();\n\t                _this.parent.off(constant_1.dataReady, fn);\n\t            };\n\t            this.parent.on(constant_1.dataReady, fn, this);\n\t            this.parent.on(constant_1.dataReady, this.footerRenderer.refresh, this.footerRenderer);\n\t        };\n\t        Aggregate.prototype.prepareSummaryInfo = function () {\n\t            var _this = this;\n\t            summaryIterator(this.parent.aggregates, function (column) {\n\t                var dataColumn = _this.parent.getColumnByField(column.field) || {};\n\t                var type = dataColumn.type;\n\t                column.format = _this.getFormatFromType(column.format, type);\n\t                column.setFormatter();\n\t                column.columnName = column.columnName || column.field;\n\t            });\n\t        };\n\t        Aggregate.prototype.getFormatFromType = function (format, type) {\n\t            if (ej2_base_2.isNullOrUndefined(type) || typeof format !== 'string') {\n\t                return format;\n\t            }\n\t            var obj;\n\t            switch (type) {\n\t                case 'number':\n\t                    obj = { format: format };\n\t                    break;\n\t                case 'date':\n\t                    obj = { type: type, skeleton: format };\n\t                    break;\n\t                case 'datetime':\n\t                    obj = { type: 'dateTime', skeleton: format };\n\t                    break;\n\t            }\n\t            return obj;\n\t        };\n\t        Aggregate.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(this.footerRenderer)) {\n\t                this.initiateRender();\n\t            }\n\t            this.prepareSummaryInfo();\n\t            this.footerRenderer.refresh();\n\t            var cModel = new summary_model_generator_1.CaptionSummaryModelGenerator(this.parent);\n\t            var gModel = new summary_model_generator_1.GroupSummaryModelGenerator(this.parent);\n\t            if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n\t                this.parent.notify(constant_1.modelChanged, {});\n\t            }\n\t        };\n\t        Aggregate.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialEnd, this.initiateRender, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Aggregate.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.footerRenderer.removeEventListener();\n\t            this.parent.off(constant_1.initialEnd, this.initiateRender);\n\t            this.parent.off(constant_1.dataReady, this.footerRenderer.refresh);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Aggregate.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            ej2_base_1.remove(this.parent.getFooterContent());\n\t        };\n\t        return Aggregate;\n\t    }());\n\t    exports.Aggregate = Aggregate;\n\t    function summaryIterator(aggregates, callback) {\n\t        aggregates.forEach(function (row) {\n\t            row.columns.forEach(function (column) {\n\t                callback(column, row);\n\t            });\n\t        });\n\t    }\n\t    exports.summaryIterator = summaryIterator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(9), __webpack_require__(17), __webpack_require__(12), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, constant_1, content_renderer_1, row_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FooterRenderer = (function (_super) {\n\t        __extends(FooterRenderer, _super);\n\t        function FooterRenderer(gridModule, serviceLocator) {\n\t            var _this = _super.call(this, gridModule, serviceLocator) || this;\n\t            _this.aggregates = {};\n\t            _this.parent = gridModule;\n\t            _this.locator = serviceLocator;\n\t            _this.modelGenerator = new summary_model_generator_1.SummaryModelGenerator(_this.parent);\n\t            _this.addEventListener();\n\t            return _this;\n\t        }\n\t        FooterRenderer.prototype.renderPanel = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-gridfooter' });\n\t            var innerDiv = ej2_base_1.createElement('div', { className: 'e-summarycontent' });\n\t            if (ej2_base_3.Browser.isDevice) {\n\t                innerDiv.style.overflowX = 'scroll';\n\t            }\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            if (this.parent.getPager() != null) {\n\t                this.parent.element.insertBefore(div, this.parent.getPager());\n\t            }\n\t            else {\n\t                this.parent.element.appendChild(div);\n\t            }\n\t        };\n\t        FooterRenderer.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            var innerDiv = this.createContentTable();\n\t            var table = innerDiv.querySelector('.e-table');\n\t            var tFoot = ej2_base_1.createElement('tfoot');\n\t            table.appendChild(tFoot);\n\t            this.setTable(table);\n\t        };\n\t        FooterRenderer.prototype.renderSummaryContent = function (e) {\n\t            var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n\t            var summaries = this.modelGenerator.getData();\n\t            var dummies = this.modelGenerator.getColumns();\n\t            var rows = this.modelGenerator.generateRows(input, e || this.aggregates);\n\t            var fragment = document.createDocumentFragment();\n\t            var rowrenderer = new row_renderer_1.RowRenderer(this.locator);\n\t            rowrenderer.element = ej2_base_1.createElement('TR', { className: 'e-summaryrow' });\n\t            for (var srow = 0, len = summaries.length; srow < len; srow++) {\n\t                var row = rows[srow];\n\t                if (!row) {\n\t                    continue;\n\t                }\n\t                var tr = rowrenderer.render(row, dummies);\n\t                fragment.appendChild(tr);\n\t            }\n\t            this.getTable().tFoot.appendChild(fragment);\n\t            this.aggregates = e;\n\t        };\n\t        FooterRenderer.prototype.refresh = function (e) {\n\t            this.getTable().tFoot.innerHTML = '';\n\t            this.renderSummaryContent(e);\n\t            this.onScroll();\n\t        };\n\t        FooterRenderer.prototype.refreshCol = function () {\n\t            var headerCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n\t            this.getTable().replaceChild(headerCol, this.getColGroup());\n\t            this.setColGroup(headerCol);\n\t        };\n\t        FooterRenderer.prototype.onWidthChange = function (args) {\n\t            this.getColGroup().children[args.index].style.width = ej2_base_2.formatUnit(args.width);\n\t            if (this.parent.allowResizing) {\n\t                this.updateFooterTableWidth(this.getTable());\n\t            }\n\t        };\n\t        FooterRenderer.prototype.onScroll = function (e) {\n\t            if (e === void 0) { e = { left: this.parent.getContent().firstChild.scrollLeft }; }\n\t            this.getPanel().firstChild.scrollLeft = e.left;\n\t        };\n\t        FooterRenderer.prototype.columnVisibilityChanged = function () {\n\t            this.refresh();\n\t        };\n\t        FooterRenderer.prototype.addEventListener = function () {\n\t            this.parent.on(constant_1.colGroupRefresh, this.refreshCol, this);\n\t            this.parent.on(constant_1.columnWidthChanged, this.onWidthChange, this);\n\t            this.parent.on(constant_1.scroll, this.onScroll, this);\n\t            this.parent.on(constant_1.columnVisibilityChanged, this.columnVisibilityChanged, this);\n\t        };\n\t        FooterRenderer.prototype.removeEventListener = function () {\n\t            this.parent.off(constant_1.colGroupRefresh, this.refreshCol);\n\t            this.parent.off(constant_1.columnWidthChanged, this.onWidthChange);\n\t            this.parent.off(constant_1.scroll, this.onScroll);\n\t            this.parent.off(constant_1.columnVisibilityChanged, this.columnVisibilityChanged);\n\t        };\n\t        FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n\t            var tHead = this.parent.getHeaderTable();\n\t            if (tHead && tFoot) {\n\t                tFoot.style.width = tHead.style.width;\n\t            }\n\t        };\n\t        return FooterRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.FooterRenderer = FooterRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryCellRenderer = (function (_super) {\n\t        __extends(SummaryCellRenderer, _super);\n\t        function SummaryCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n\t            var key;\n\t            key = !ej2_base_1.isNullOrUndefined(column.type) ? column.field + ' - ' + (column.type) : column.columnName;\n\t            return data[column.columnName] ? data[column.columnName][key] : '';\n\t        };\n\t        SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var column = cell.column;\n\t            if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n\t                return true;\n\t            }\n\t            var fn = column.getTemplate(cell.cellType);\n\t            util_1.appendChildren(node, fn(data[column.columnName]));\n\t            return false;\n\t        };\n\t        return SummaryCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.SummaryCellRenderer = SummaryCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(6), __webpack_require__(9), __webpack_require__(13), __webpack_require__(67), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, constant_1, enum_1, virtual_content_renderer_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualScroll = (function () {\n\t        function VirtualScroll(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        VirtualScroll.prototype.getModuleName = function () {\n\t            return 'virtualscroll';\n\t        };\n\t        VirtualScroll.prototype.instantiateRenderer = function () {\n\t            var renderer = this.locator.getService('rendererFactory');\n\t            if (this.parent.enableColumnVirtualization) {\n\t                renderer.addRenderer(enum_1.RenderType.Header, new virtual_content_renderer_1.VirtualHeaderRenderer(this.parent, this.locator));\n\t            }\n\t            renderer.addRenderer(enum_1.RenderType.Content, new virtual_content_renderer_1.VirtualContentRenderer(this.parent, this.locator));\n\t            this.ensurePageSize();\n\t        };\n\t        VirtualScroll.prototype.ensurePageSize = function () {\n\t            var rowHeight = util_1.getRowHeight(this.parent.element);\n\t            this.blockSize = ~~(this.parent.height / rowHeight);\n\t            var height = this.blockSize * 2;\n\t            var size = this.parent.pageSettings.pageSize;\n\t            this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n\t        };\n\t        VirtualScroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n\t        };\n\t        VirtualScroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.initialLoad, this.instantiateRenderer);\n\t            this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n\t        };\n\t        VirtualScroll.prototype.refreshVirtualElement = function (args) {\n\t            if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n\t                var renderer = this.locator.getService('rendererFactory');\n\t                renderer.getRenderer(enum_1.RenderType.Content).refreshVirtualElement();\n\t            }\n\t        };\n\t        VirtualScroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return VirtualScroll;\n\t    }());\n\t    exports.VirtualScroll = VirtualScroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(6), __webpack_require__(9), __webpack_require__(13), __webpack_require__(17), __webpack_require__(11), __webpack_require__(68), __webpack_require__(69)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, util_1, constant_1, enum_1, content_renderer_1, header_renderer_1, intersection_observer_1, virtual_row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualContentRenderer = (function (_super) {\n\t        __extends(VirtualContentRenderer, _super);\n\t        function VirtualContentRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.prevHeight = 0;\n\t            _this.preventEvent = false;\n\t            _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n\t            _this.offsets = {};\n\t            _this.tmpOffsets = {};\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.offsetKeys = [];\n\t            _this.isFocused = false;\n\t            _this.locator = locator;\n\t            _this.eventListener('on');\n\t            _this.vgenerator = _this.generator;\n\t            return _this;\n\t        }\n\t        VirtualContentRenderer.prototype.renderTable = function () {\n\t            this.header = this.locator.getService('rendererFactory').getRenderer(enum_1.RenderType.Header);\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.content = this.getPanel().firstChild;\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder();\n\t            this.virtualEle.wrapper.style.position = 'absolute';\n\t            var debounceEvent = (this.parent.dataSource instanceof ej2_data_1.DataManager && !this.parent.dataSource.dataSource.offline);\n\t            var opt = {\n\t                container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n\t                axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n\t            };\n\t            this.observer = new intersection_observer_1.InterSectionObserver(this.virtualEle.wrapper, opt);\n\t        };\n\t        VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t            this.virtualEle.adjustTable(0, 0);\n\t        };\n\t        VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n\t            if (this.preventEvent || this.parent.isDestroyed) {\n\t                this.preventEvent = false;\n\t                return;\n\t            }\n\t            this.isFocused = this.content === ej2_base_1.closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n\t            var info = scrollArgs.sentinel;\n\t            var viewInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n\t            if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n\t                || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n\t                return;\n\t            }\n\t            this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n\t            this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n\t            this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo });\n\t        };\n\t        VirtualContentRenderer.prototype.block = function (blk) {\n\t            return this.vgenerator.isBlockAvailable(blk);\n\t        };\n\t        VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n\t            var tempBlocks = [];\n\t            var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n\t            infoType.page = this.getPageFromTop(e.top, infoType);\n\t            infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n\t            infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n\t            var blocks = this.ensureBlocks(infoType);\n\t            infoType.blockIndexes = blocks;\n\t            infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n\t                .every(this.block.bind(this));\n\t            infoType.event = (infoType.loadNext || infoType.loadSelf) ? constant_1.modelChanged : constant_1.refreshVirtualBlock;\n\t            infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n\t            infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n\t                infoType.event = constant_1.refreshVirtualBlock;\n\t            }\n\t            return infoType;\n\t        };\n\t        VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n\t            var _this = this;\n\t            var index = info.blockIndexes[info.block];\n\t            var mIdx;\n\t            var old = index;\n\t            var max = Math.max;\n\t            var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n\t            indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n\t            if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n\t                return indexes;\n\t            }\n\t            if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n\t                indexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            indexes.some(function (val, ind) {\n\t                var result = val === _this.getTotalBlocks();\n\t                if (result) {\n\t                    mIdx = ind;\n\t                }\n\t                return result;\n\t            });\n\t            if (mIdx !== undefined) {\n\t                indexes = indexes.slice(0, mIdx + 1);\n\t                if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n\t                    indexes = [indexes[0] - 1, indexes[0]];\n\t                }\n\t            }\n\t            return indexes;\n\t        };\n\t        VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n\t            var info = e.virtualInfo;\n\t            this.prevInfo = this.prevInfo || e.virtualInfo;\n\t            var cBlock = (info.columnIndexes[0]) - 1;\n\t            var cOffset = this.getColumnOffset(cBlock);\n\t            var width;\n\t            var blocks = info.blockIndexes;\n\t            if (this.parent.groupSettings.columns.length) {\n\t                this.refreshOffsets();\n\t            }\n\t            var translate = this.getTranslateY(this.content.scrollTop, this.content.getBoundingClientRect().height, info);\n\t            this.virtualEle.adjustTable(cOffset, translate);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.adjustTable(cOffset, 0);\n\t            }\n\t            if (this.parent.enableColumnVirtualization) {\n\t                var cIndex = info.columnIndexes;\n\t                width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n\t                this.header.virtualEle.setWrapperWidth(width);\n\t            }\n\t            this.virtualEle.setWrapperWidth(width, this.parent.enableColumnVirtualization || ej2_base_2.Browser.isIE);\n\t            target.appendChild(newChild);\n\t            this.getTable().appendChild(target);\n\t            if (this.parent.groupSettings.columns.length) {\n\t                if (info.direction === 'up') {\n\t                    var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n\t                    this.preventEvent = true;\n\t                    var sTop = this.content.scrollTop;\n\t                    this.content.scrollTop = sTop + blk;\n\t                }\n\t                this.setVirtualHeight();\n\t                this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n\t            }\n\t            this.prevInfo = info;\n\t            if (this.isFocused) {\n\t                this.content.focus();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onDataReady = function (e) {\n\t            if (!ej2_base_3.isNullOrUndefined(e.count)) {\n\t                this.count = e.count;\n\t                this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n\t            }\n\t            this.refreshOffsets();\n\t            this.setVirtualHeight();\n\t            this.resetScrollPosition(e.requestType);\n\t        };\n\t        VirtualContentRenderer.prototype.setVirtualHeight = function () {\n\t            var width = this.parent.enableColumnVirtualization ?\n\t                this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n\t            this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()], width);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.setVirtualHeight(1, width);\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n\t            var _this = this;\n\t            var total = this.getTotalBlocks();\n\t            var page = 0;\n\t            var extra = this.offsets[total] - this.prevHeight;\n\t            this.offsetKeys.some(function (offset) {\n\t                var iOffset = Number(offset);\n\t                var border = sTop < _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n\t                if (border) {\n\t                    info.block = iOffset % 2 === 0 ? 1 : 0;\n\t                    page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n\t                }\n\t                return border;\n\t            });\n\t            return page;\n\t        };\n\t        VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info) {\n\t            if (info === undefined) {\n\t                info = { page: this.getPageFromTop(sTop, {}) };\n\t                info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            var block = (info.blockIndexes[0] || 1) - 1;\n\t            var translate = this.getOffset(block);\n\t            var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n\t            return translate > sTop ? this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n\t        };\n\t        VirtualContentRenderer.prototype.getOffset = function (block) {\n\t            return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock]);\n\t        };\n\t        VirtualContentRenderer.prototype.onEntered = function () {\n\t            var _this = this;\n\t            return function (element, current, direction, e) {\n\t                var xAxis = current.axis === 'X';\n\t                var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n\t                var height = _this.content.getBoundingClientRect().height;\n\t                var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n\t                var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined);\n\t                _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n\t                if (_this.parent.enableColumnVirtualization) {\n\t                    _this.header.virtualEle.adjustTable(x, 0);\n\t                }\n\t            };\n\t        };\n\t        VirtualContentRenderer.prototype.eventListener = function (action) {\n\t            var _this = this;\n\t            this.parent[action](constant_1.dataReady, this.onDataReady, this);\n\t            this.parent[action](constant_1.refreshVirtualBlock, this.refreshContentRows, this);\n\t            this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n\t            var fn = function () {\n\t                _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n\t                _this.parent.off(constant_1.contentReady, fn);\n\t            };\n\t            this.parent.on(constant_1.contentReady, fn, this);\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockSize = function () {\n\t            return this.parent.pageSettings.pageSize >> 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockHeight = function () {\n\t            return this.getBlockSize() * util_1.getRowHeight();\n\t        };\n\t        VirtualContentRenderer.prototype.isEndBlock = function (index) {\n\t            var totalBlocks = this.getTotalBlocks();\n\t            return index >= totalBlocks || index === totalBlocks - 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getTotalBlocks = function () {\n\t            return Math.ceil(this.count / this.getBlockSize());\n\t        };\n\t        VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n\t            return this.vgenerator.cOffsets[block] | 0;\n\t        };\n\t        VirtualContentRenderer.prototype.getModelGenerator = function () {\n\t            return new virtual_row_model_generator_1.VirtualRowModelGenerator(this.parent);\n\t        };\n\t        VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n\t            if (this.actions.some(function (value) { return value === action; })) {\n\t                this.preventEvent = this.content.scrollTop !== 0;\n\t                this.content.scrollTop = 0;\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onActionBegin = function (e) {\n\t            this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n\t        };\n\t        VirtualContentRenderer.prototype.getRows = function () {\n\t            return this.vgenerator.getRows();\n\t        };\n\t        VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n\t            var prev = this.prevInfo.blockIndexes;\n\t            var startIdx = (prev[0] - 1) * this.getBlockSize();\n\t            return this.parent.getDataRows()[index - startIdx];\n\t        };\n\t        VirtualContentRenderer.prototype.refreshOffsets = function () {\n\t            var _this = this;\n\t            var row = 0;\n\t            var bSize = this.getBlockSize();\n\t            var total = this.getTotalBlocks();\n\t            this.prevHeight = this.offsets[total];\n\t            this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n\t            this.offsets = {};\n\t            Array.apply(null, Array(total)).map(function () { return ++row; })\n\t                .forEach(function (block) {\n\t                var tmp = (_this.vgenerator.cache[block] || []).length;\n\t                var rem = _this.count % bSize;\n\t                var size = block in _this.vgenerator.cache ?\n\t                    tmp * util_1.getRowHeight() : rem && block === total ? rem * util_1.getRowHeight() : _this.getBlockHeight();\n\t                _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n\t                _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n\t            });\n\t            this.offsetKeys = Object.keys(this.offsets);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.vgenerator.refreshColOffsets();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n\t            this.vgenerator.refreshColOffsets();\n\t            this.setVirtualHeight();\n\t        };\n\t        return VirtualContentRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.VirtualContentRenderer = VirtualContentRenderer;\n\t    var VirtualHeaderRenderer = (function (_super) {\n\t        __extends(VirtualHeaderRenderer, _super);\n\t        function VirtualHeaderRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.gen = new virtual_row_model_generator_1.VirtualRowModelGenerator(_this.parent);\n\t            _this.parent.on(constant_1.refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n\t            return _this;\n\t        }\n\t        VirtualHeaderRenderer.prototype.renderTable = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.getPanel().firstChild;\n\t            this.virtualEle.content.style.position = 'relative';\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder('absolute');\n\t        };\n\t        VirtualHeaderRenderer.prototype.appendContent = function (table) {\n\t            this.virtualEle.wrapper.appendChild(table);\n\t        };\n\t        VirtualHeaderRenderer.prototype.refreshUI = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.refreshUI.call(this);\n\t        };\n\t        return VirtualHeaderRenderer;\n\t    }(header_renderer_1.HeaderRender));\n\t    exports.VirtualHeaderRenderer = VirtualHeaderRenderer;\n\t    var VirtualElementHandler = (function () {\n\t        function VirtualElementHandler() {\n\t        }\n\t        VirtualElementHandler.prototype.renderWrapper = function () {\n\t            this.wrapper = ej2_base_1.createElement('div', { className: 'e-virtualtable' });\n\t            this.wrapper.appendChild(this.table);\n\t            this.content.appendChild(this.wrapper);\n\t        };\n\t        VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n\t            if (position === void 0) { position = 'relative'; }\n\t            this.placeholder = ej2_base_1.createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n\t            this.content.appendChild(this.placeholder);\n\t        };\n\t        VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n\t            this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n\t        };\n\t        VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n\t            this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n\t        };\n\t        VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n\t            this.placeholder.style.height = height + \"px\";\n\t            this.placeholder.style.width = width;\n\t        };\n\t        return VirtualElementHandler;\n\t    }());\n\t    exports.VirtualElementHandler = VirtualElementHandler;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InterSectionObserver = (function () {\n\t        function InterSectionObserver(element, options) {\n\t            var _this = this;\n\t            this.fromWheel = false;\n\t            this.touchMove = false;\n\t            this.options = {};\n\t            this.sentinelInfo = {\n\t                'up': {\n\t                    check: function (rect, info) {\n\t                        var top = rect.top - _this.containerRect.top;\n\t                        info.entered = top >= 0;\n\t                        return top + (_this.options.pageHeight / 2) >= 0;\n\t                    },\n\t                    axis: 'Y'\n\t                },\n\t                'down': {\n\t                    check: function (rect, info) {\n\t                        var cHeight = _this.options.container.clientHeight;\n\t                        var top = rect.bottom;\n\t                        info.entered = rect.bottom <= _this.containerRect.bottom;\n\t                        return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n\t                    }, axis: 'Y'\n\t                },\n\t                'right': {\n\t                    check: function (rect, info) {\n\t                        var right = rect.right;\n\t                        info.entered = right < _this.containerRect.right;\n\t                        return right - _this.containerRect.width <= _this.containerRect.right;\n\t                    }, axis: 'X'\n\t                },\n\t                'left': {\n\t                    check: function (rect, info) {\n\t                        var left = rect.left;\n\t                        info.entered = left > 0;\n\t                        return left + _this.containerRect.width >= _this.containerRect.left;\n\t                    }, axis: 'X'\n\t                }\n\t            };\n\t            this.element = element;\n\t            this.options = options;\n\t        }\n\t        InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            this.containerRect = this.options.container.getBoundingClientRect();\n\t            ej2_base_1.EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n\t            ej2_base_1.EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n\t        };\n\t        InterSectionObserver.prototype.check = function (direction) {\n\t            var info = this.sentinelInfo[direction];\n\t            return info.check(this.element.getBoundingClientRect(), info);\n\t        };\n\t        InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            var prevTop = 0;\n\t            var prevLeft = 0;\n\t            var debounced100 = ej2_base_2.debounce(callback, 100);\n\t            var debounced50 = ej2_base_2.debounce(callback, 50);\n\t            return function (e) {\n\t                var top = e.target.scrollTop;\n\t                var left = e.target.scrollLeft;\n\t                var direction = prevTop < top ? 'down' : 'up';\n\t                direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n\t                prevTop = top;\n\t                prevLeft = left;\n\t                var current = _this.sentinelInfo[direction];\n\t                if (_this.options.axes.indexOf(current.axis) === -1) {\n\t                    return;\n\t                }\n\t                var check = _this.check(direction);\n\t                if (current.entered) {\n\t                    onEnterCallback(_this.element, current, direction, { top: top, left: left });\n\t                }\n\t                if (check) {\n\t                    var fn = _this.fromWheel ? _this.options.debounceEvent ? debounced100 : callback : debounced100;\n\t                    if (current.axis === 'X') {\n\t                        fn = debounced50;\n\t                    }\n\t                    fn({ direction: direction, sentinel: current, offset: { top: top, left: left } });\n\t                }\n\t                _this.fromWheel = false;\n\t            };\n\t        };\n\t        InterSectionObserver.prototype.setPageHeight = function (value) {\n\t            this.options.pageHeight = value;\n\t        };\n\t        return InterSectionObserver;\n\t    }());\n\t    exports.InterSectionObserver = InterSectionObserver;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(18), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualRowModelGenerator = (function () {\n\t        function VirtualRowModelGenerator(parent) {\n\t            this.cOffsets = {};\n\t            this.cache = {};\n\t            this.data = {};\n\t            this.groups = {};\n\t            this.parent = parent;\n\t            this.model = this.parent.pageSettings;\n\t            this.rowModelGenerator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        }\n\t        VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n\t            var _this = this;\n\t            var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n\t            var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n\t            var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n\t            var result = [];\n\t            var center = ~~(this.model.pageSize / 2);\n\t            var indexes = this.getBlockIndexes(page);\n\t            var loadedBlocks = [];\n\t            this.checkAndResetCache(notifyArgs.requestType);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                info.blockIndexes.forEach(function (value) {\n\t                    if (_this.isBlockAvailable(value)) {\n\t                        _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n\t                    }\n\t                });\n\t            }\n\t            info.blockIndexes.forEach(function (value) {\n\t                if (!_this.isBlockAvailable(value)) {\n\t                    var rows = _this.rowModelGenerator.generateRows(data, {\n\t                        virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n\t                    });\n\t                    var median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n\t                    if (!_this.isBlockAvailable(indexes[0])) {\n\t                        _this.cache[indexes[0]] = rows.slice(0, median);\n\t                    }\n\t                    if (!_this.isBlockAvailable(indexes[1])) {\n\t                        _this.cache[indexes[1]] = rows.slice(median);\n\t                    }\n\t                }\n\t                if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n\t                    _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n\t                }\n\t                result.push.apply(result, _this.cache[value]);\n\t                if (_this.isBlockAvailable(value)) {\n\t                    loadedBlocks.push(value);\n\t                }\n\t            });\n\t            info.blockIndexes = loadedBlocks;\n\t            return result;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n\t            return [page + (page - 1), page * 2];\n\t        };\n\t        VirtualRowModelGenerator.prototype.getPage = function (block) {\n\t            return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n\t        };\n\t        VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n\t            return value in this.cache;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getData = function () {\n\t            return {\n\t                page: this.model.currentPage,\n\t                blockIndexes: this.getBlockIndexes(this.model.currentPage),\n\t                direction: 'down',\n\t                columnIndexes: this.parent.getColumnIndexesInView()\n\t            };\n\t        };\n\t        VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n\t            if (full === void 0) { full = true; }\n\t            var page = this.getPage(blk);\n\t            var even = blk % 2 === 0;\n\t            var index = (page - 1) * this.model.pageSize;\n\t            return full || !even ? index : index + ~~(this.model.pageSize / 2);\n\t        };\n\t        VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n\t            var _this = this;\n\t            if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n\t            var indexes = [];\n\t            var sLeft = content.scrollLeft | 0;\n\t            var keys = Object.keys(this.cOffsets);\n\t            var cWidth = content.getBoundingClientRect().width;\n\t            sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n\t            var calWidth = ej2_base_1.Browser.isDevice ? 2 * cWidth : cWidth / 2;\n\t            var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n\t            keys.some(function (offset, indx, input) {\n\t                var iOffset = Number(offset);\n\t                var offsetVal = _this.cOffsets[offset];\n\t                var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n\t                if (border) {\n\t                    indexes.push(iOffset);\n\t                }\n\t                return left + calWidth < offsetVal;\n\t            });\n\t            return indexes;\n\t        };\n\t        VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n\t            var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping']\n\t                .some(function (value) { return action === value; });\n\t            if (clear) {\n\t                this.cache = {};\n\t                this.data = {};\n\t                this.groups = {};\n\t            }\n\t            return clear;\n\t        };\n\t        VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n\t            var _this = this;\n\t            var col = 0;\n\t            this.cOffsets = {};\n\t            var gLen = this.parent.groupSettings.columns.length;\n\t            var cols = this.parent.columns;\n\t            var cLen = cols.length;\n\t            var isVisible = function (column) { return column.visible &&\n\t                (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n\t            this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n\t            Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n\t                block = block + gLen;\n\t                _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n\t            });\n\t        };\n\t        VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n\t            var _this = this;\n\t            var currentFirst = current[0];\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) {\n\t                if (Number(key) < block) {\n\t                    rows = rows.concat(_this.cache[key]);\n\t                }\n\t            });\n\t            if (currentFirst.isDataRow || block % 2 === 0) {\n\t                return current;\n\t            }\n\t            return this.iterateGroup(current, rows);\n\t        };\n\t        VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n\t            var currentFirst = current[0];\n\t            var offset = 0;\n\t            if (currentFirst.isDataRow) {\n\t                return current;\n\t            }\n\t            var isPresent = current.some(function (row) {\n\t                return rows.some(function (oRow, index) {\n\t                    var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n\t                        oRow.data.key === row.data.key;\n\t                    if (res) {\n\t                        offset = index;\n\t                    }\n\t                    return res;\n\t                });\n\t            });\n\t            if (isPresent) {\n\t                current.shift();\n\t                current = this.iterateGroup(current, rows.slice(offset));\n\t            }\n\t            return current;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getRows = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n\t            return rows;\n\t        };\n\t        return VirtualRowModelGenerator;\n\t    }());\n\t    exports.VirtualRowModelGenerator = VirtualRowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(9), __webpack_require__(73), __webpack_require__(77), __webpack_require__(78), __webpack_require__(71), __webpack_require__(79), __webpack_require__(80), __webpack_require__(82), __webpack_require__(83), __webpack_require__(44), __webpack_require__(6), __webpack_require__(44), __webpack_require__(72)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, events, edit_renderer_1, boolean_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1, default_edit_cell_1, inline_edit_1, batch_edit_1, dialog_edit_1, ej2_popups_1, util_1, ej2_popups_2, ej2_inputs_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Edit = (function () {\n\t        function Edit(parent, serviceLocator) {\n\t            this.editCellType = {\n\t                'dropdownedit': dropdown_edit_cell_1.DropDownEditCell,\n\t                'numericedit': numeric_edit_cell_1.NumericEditCell, 'booleanedit': boolean_edit_cell_1.BooleanEditCell, 'default': default_edit_cell_1.DefaultEditCell\n\t            };\n\t            this.editType = { 'inline': inline_edit_1.InlineEdit, 'normal': inline_edit_1.InlineEdit, 'batch': batch_edit_1.BatchEdit, 'dialog': dialog_edit_1.DialogEdit };\n\t            this.tapped = false;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t            this.updateEditObj();\n\t        }\n\t        Edit.prototype.updateColTypeObj = function () {\n\t            for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                col.edit = ej2_base_2.extend(new this.editCellType[col.editType && this.editCellType[col.editType] ?\n\t                    col.editType : 'default'](this.parent, this.serviceLocator), col.edit || {});\n\t            }\n\t        };\n\t        Edit.prototype.getModuleName = function () {\n\t            return 'edit';\n\t        };\n\t        Edit.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowAdding':\n\t                    case 'allowDeleting':\n\t                    case 'allowEditing':\n\t                        if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n\t                            this.initialEnd();\n\t                        }\n\t                        break;\n\t                    case 'mode':\n\t                        this.updateEditObj();\n\t                        gObj.isEdit = false;\n\t                        gObj.refresh();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.updateEditObj = function () {\n\t            if (this.editModule) {\n\t                this.editModule.destroy();\n\t            }\n\t            this.renderer = new edit_renderer_1.EditRender(this.parent, this.serviceLocator);\n\t            this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n\t        };\n\t        Edit.prototype.initialEnd = function () {\n\t            this.updateColTypeObj();\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.createAlertDlg();\n\t            this.createConfirmDlg();\n\t        };\n\t        Edit.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n\t        };\n\t        Edit.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n\t        };\n\t        Edit.prototype.tapEvent = function (e) {\n\t            if (this.getUserAgent()) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.parent.notify(events.doubleTap, e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.getUserAgent = function () {\n\t            var userAgent = window.navigator.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Edit.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        Edit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'batch') {\n\t                return;\n\t            }\n\t            if (!gObj.getSelectedRows().length) {\n\t                if (!tr) {\n\t                    this.showDialog('EditOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t            }\n\t            else if (!tr) {\n\t                tr = gObj.getSelectedRows()[0];\n\t            }\n\t            if (tr.style.display === 'none') {\n\t                return;\n\t            }\n\t            this.editModule.startEdit(tr);\n\t            this.refreshToolbar();\n\t            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t        };\n\t        Edit.prototype.closeEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog\n\t                && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n\t                this.showDialog('CancelEdit', this.dialogObj);\n\t                return;\n\t            }\n\t            this.editModule.closeEdit();\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.refreshToolbar = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        Edit.prototype.addRecord = function (data) {\n\t            if (!this.parent.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            this.editModule.addRecord(data);\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.deleteRecord = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowDeleting) {\n\t                return;\n\t            }\n\t            if (!data) {\n\t                if (ej2_base_4.isNullOrUndefined(gObj.selectedRowIndex) || gObj.selectedRowIndex === -1) {\n\t                    this.showDialog('DeleteOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t                if (gObj.editSettings.showDeleteConfirmDialog) {\n\t                    this.showDialog('ConfirmDelete', this.dialogObj);\n\t                    return;\n\t                }\n\t            }\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Edit.prototype.deleteRow = function (tr) {\n\t            this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n\t        };\n\t        Edit.prototype.endEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog) {\n\t                this.showDialog('BatchSaveConfirm', this.dialogObj);\n\t                return;\n\t            }\n\t            this.endEditing();\n\t        };\n\t        Edit.prototype.updateCell = function (rowIndex, field, value) {\n\t            this.editModule.updateCell(rowIndex, field, value);\n\t        };\n\t        Edit.prototype.updateRow = function (index, data) {\n\t            this.editModule.updateRow(index, data);\n\t        };\n\t        Edit.prototype.batchCancel = function () {\n\t            this.closeEdit();\n\t        };\n\t        Edit.prototype.batchSave = function () {\n\t            this.endEdit();\n\t        };\n\t        Edit.prototype.editCell = function (index, field) {\n\t            this.editModule.editCell(index, field);\n\t        };\n\t        Edit.prototype.editFormValidate = function () {\n\t            if (this.formObj) {\n\t                return this.formObj.validate();\n\t            }\n\t            return false;\n\t        };\n\t        Edit.prototype.getBatchChanges = function () {\n\t            return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n\t        };\n\t        Edit.prototype.getCurrentEditCellData = function () {\n\t            var obj = this.getCurrentEditedData(this.formObj.element, {});\n\t            return obj[Object.keys(obj)[0]];\n\t        };\n\t        Edit.prototype.saveCell = function () {\n\t            this.editModule.saveCell();\n\t        };\n\t        Edit.prototype.endEditing = function () {\n\t            this.editModule.endEdit();\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.showDialog = function (content, obj) {\n\t            obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n\t            obj.show();\n\t        };\n\t        Edit.prototype.getValueFromType = function (col, value) {\n\t            var val = value;\n\t            switch (col.type) {\n\t                case 'number':\n\t                    val = !ej2_base_4.isNullOrUndefined(parseFloat(value)) ? parseFloat(value) : null;\n\t                    break;\n\t                case 'boolean':\n\t                    if (col.editType !== 'booleanedit') {\n\t                        val = value === this.l10n.getConstant('True') ? true : false;\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                    if (col.editType !== 'datepicker') {\n\t                        val = new Date(value);\n\t                    }\n\t                    break;\n\t            }\n\t            return val;\n\t        };\n\t        Edit.prototype.destroyToolTip = function () {\n\t            var elements = [].slice.call(this.parent.element.getElementsByClassName('e-tooltip'));\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                elem.ej2_instances[0].destroy();\n\t            }\n\t        };\n\t        Edit.prototype.createConfirmDlg = function () {\n\t            this.dialogObj = this.dlgWidget([\n\t                {\n\t                    click: this.dlgOk.bind(this),\n\t                    buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n\t                },\n\t                {\n\t                    click: this.dlgCancel.bind(this),\n\t                    buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n\t                }\n\t            ], 'EditConfirm');\n\t        };\n\t        Edit.prototype.createAlertDlg = function () {\n\t            this.alertDObj = this.dlgWidget([\n\t                {\n\t                    click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n\t                }\n\t            ], 'EditAlert');\n\t        };\n\t        Edit.prototype.alertClick = function () {\n\t            this.alertDObj.hide();\n\t        };\n\t        Edit.prototype.dlgWidget = function (btnOptions, name) {\n\t            var div = ej2_base_3.createElement('div', { id: this.parent.element.id + name });\n\t            this.parent.element.appendChild(div);\n\t            var options = {\n\t                showCloseIcon: false,\n\t                isModal: true,\n\t                visible: false,\n\t                closeOnEscape: true,\n\t                target: this.parent.element,\n\t                width: '320px',\n\t                animationSettings: { effect: 'None' }\n\t            };\n\t            options.buttons = btnOptions;\n\t            var obj = new ej2_popups_1.Dialog(options);\n\t            obj.appendTo(div);\n\t            return obj;\n\t        };\n\t        Edit.prototype.dlgCancel = function () {\n\t            this.dialogObj.hide();\n\t        };\n\t        Edit.prototype.dlgOk = function (e) {\n\t            switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n\t                case this.l10n.getConstant('ConfirmDelete'):\n\t                    this.editModule.deleteRecord();\n\t                    break;\n\t                case this.l10n.getConstant('CancelEdit'):\n\t                    this.editModule.closeEdit();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveConfirm'):\n\t                    this.endEditing();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveLostChanges'):\n\t                    this.executeAction();\n\t                    break;\n\t            }\n\t            this.dlgCancel();\n\t        };\n\t        Edit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.initialEnd, this.initialEnd, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.autoCol, this.updateColTypeObj, this);\n\t            this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n\t            this.parent.on(events.preventBatch, this.preventBatch, this);\n\t            this.parent.on(events.destroyForm, this.destroyForm, this);\n\t            this.parent.addEventListener(events.actionBegin, this.onActionBegin.bind(this));\n\t            this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n\t            this.parent.on(events.initialEnd, this.wireEvents, this);\n\t        };\n\t        Edit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.initialEnd, this.initialEnd);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.autoCol, this.updateColTypeObj);\n\t            this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n\t            this.parent.off(events.preventBatch, this.preventBatch);\n\t            this.parent.off(events.destroyForm, this.destroyForm);\n\t            this.parent.removeEventListener(events.actionComplete, this.actionComplete);\n\t            this.parent.removeEventListener(events.actionBegin, this.onActionBegin);\n\t            this.parent.off(events.initialEnd, this.unwireEvents);\n\t        };\n\t        Edit.prototype.actionComplete = function (e) {\n\t            if (e.requestType !== 'add' && e.requestType !== 'beginEdit' && e.requestType !== 'delete') {\n\t                this.parent.isEdit = false;\n\t            }\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.getCurrentEditedData = function (form, editedData) {\n\t            var gObj = this.parent;\n\t            var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n\t            for (var i = 0, len = inputs.length; i < len; i++) {\n\t                var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n\t                var value = void 0;\n\t                if (col) {\n\t                    var temp = col.edit.read;\n\t                    if (typeof temp === 'string') {\n\t                        temp = ej2_base_2.getValue(temp, window);\n\t                    }\n\t                    value = gObj.editModule.getValueFromType(col, col.edit.read(inputs[i]));\n\t                    ej2_base_4.setValue(col.field, value, editedData);\n\t                }\n\t            }\n\t            return editedData;\n\t        };\n\t        Edit.prototype.onActionBegin = function (e) {\n\t            if (this.parent.editSettings.mode !== 'batch' && this.formObj && !this.formObj.isDestroyed && !e.cancel) {\n\t                this.destroyForm();\n\t                this.destroyWidgets();\n\t            }\n\t        };\n\t        Edit.prototype.destroyWidgets = function (cols) {\n\t            cols = cols ? cols : this.parent.columns;\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (col.edit.destroy) {\n\t                    col.edit.destroy();\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.destroyForm = function () {\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            if (this.formObj && !this.formObj.isDestroyed) {\n\t                this.formObj.destroy();\n\t            }\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t        };\n\t        Edit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.dialogObj.destroy();\n\t            this.alertDObj.destroy();\n\t            this.unwireEvents();\n\t        };\n\t        Edit.prototype.keyPressHandler = function (e) {\n\t            switch (e.action) {\n\t                case 'insert':\n\t                    this.addRecord();\n\t                    break;\n\t                case 'delete':\n\t                    this.deleteRecord();\n\t                    break;\n\t                case 'f2':\n\t                    this.startEdit();\n\t                    break;\n\t                case 'enter':\n\t                    if (this.parent.editSettings.mode !== 'batch' &&\n\t                        util_1.parentsUntil(e.target, 'e-gridcontent') && !document.querySelectorAll('.e-popup-open').length) {\n\t                        e.preventDefault();\n\t                        this.endEdit();\n\t                    }\n\t                    break;\n\t                case 'escape':\n\t                    this.closeEdit();\n\t                    break;\n\t            }\n\t        };\n\t        Edit.prototype.preventBatch = function (args) {\n\t            this.preventObj = args;\n\t            this.showDialog('BatchSaveLostChanges', this.dialogObj);\n\t        };\n\t        Edit.prototype.executeAction = function () {\n\t            this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7);\n\t        };\n\t        Edit.prototype.applyFormValidation = function (cols) {\n\t            var _this = this;\n\t            var gObj = this.parent;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var rules = {};\n\t            cols = cols ? cols : gObj.columns;\n\t            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n\t                var col = cols_2[_i];\n\t                if (col.validationRules && form.querySelectorAll('#' + gObj.element.id + col.field).length) {\n\t                    rules[col.field] = col.validationRules;\n\t                }\n\t            }\n\t            this.parent.editModule.formObj = new ej2_inputs_1.FormValidator(form, {\n\t                rules: rules,\n\t                validationComplete: function (args) {\n\t                    _this.validationComplete(args);\n\t                },\n\t                customPlacement: function (inputElement, error) {\n\t                    _this.valErrorPlacement(inputElement, error);\n\t                }\n\t            });\n\t        };\n\t        Edit.prototype.valErrorPlacement = function (inputElement, error) {\n\t            if (this.parent.isEdit) {\n\t                var td = util_1.parentsUntil(inputElement, 'e-rowcell');\n\t                if (!td.ej2_instances || !td.ej2_instances.length) {\n\t                    var tooltip = new ej2_popups_2.Tooltip({\n\t                        opensOn: 'custom', content: error, position: 'bottom center', cssClass: 'e-griderror',\n\t                        animation: { open: { effect: 'None' }, close: { effect: 'None' } }\n\t                    });\n\t                    tooltip.appendTo(td);\n\t                    tooltip.open(td);\n\t                }\n\t                else {\n\t                    td.ej2_instances[0].content = error;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.validationComplete = function (args) {\n\t            if (this.parent.isEdit) {\n\t                var elem = util_1.parentsUntil(document.getElementById(this.parent.element.id + args.inputName), 'e-rowcell');\n\t                if (elem && elem.ej2_instances && elem.ej2_instances.length) {\n\t                    var tObj = elem.ej2_instances[0];\n\t                    if (args.status === 'failure') {\n\t                        tObj.open(util_1.parentsUntil(args.element, 'e-rowcell'));\n\t                    }\n\t                    else {\n\t                        tObj.close();\n\t                    }\n\t                    tObj.refresh();\n\t                }\n\t            }\n\t        };\n\t        return Edit;\n\t    }());\n\t    exports.Edit = Edit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(72), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericEditCell = (function () {\n\t        function NumericEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        NumericEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, 'e-mappinguid': args.column.uid\n\t                }\n\t            });\n\t        };\n\t        NumericEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        NumericEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_inputs_1.NumericTextBox(ej2_base_1.extend({\n\t                value: parseFloat(args.rowData[col.field]), enableRtl: this.parent.enableRtl,\n\t                placeholder: isInline ? '' : args.column.headerText,\n\t                enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t            }, col.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', col.field);\n\t        };\n\t        NumericEditCell.prototype.destroy = function () {\n\t            if (this.obj && !this.obj.isDestroyed) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return NumericEditCell;\n\t    }());\n\t    exports.NumericEditCell = NumericEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_72__;\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(74), __webpack_require__(75), __webpack_require__(76), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, inline_edit_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var EditRender = (function () {\n\t        function EditRender(parent, serviceLocator) {\n\t            this.editType = {\n\t                'inline': inline_edit_renderer_1.InlineEditRender,\n\t                'normal': inline_edit_renderer_1.InlineEditRender, 'batch': batch_edit_renderer_1.BatchEditRender, 'dialog': dialog_edit_renderer_1.DialogEditRender\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n\t        }\n\t        EditRender.prototype.addNew = function (args) {\n\t            this.renderer.addNew(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.update = function (args) {\n\t            this.renderer.update(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.convertWidget = function (args) {\n\t            var gObj = this.parent;\n\t            var isFocused;\n\t            var cell;\n\t            var value;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.columns : [gObj.getColumnByField(args.columnName)];\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                value = col.valueAccessor(col.field, args.rowData, col);\n\t                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n\t                var temp = col.edit.write;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                col.edit.write({ rowData: args.rowData, element: cell, column: col, requestType: args.requestType });\n\t                if (!isFocused && !cell.getAttribute('disabled')) {\n\t                    this.focusElement(cell);\n\t                    isFocused = true;\n\t                }\n\t            }\n\t        };\n\t        EditRender.prototype.focusElement = function (elem) {\n\t            elem.focus();\n\t            if (elem.classList.contains('e-defaultcell')) {\n\t                elem.setSelectionRange(elem.value.length, elem.value.length);\n\t            }\n\t        };\n\t        EditRender.prototype.getEditElements = function (args) {\n\t            var gObj = this.parent;\n\t            var elements = {};\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.columns : [gObj.getColumnByField(args.columnName)];\n\t            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n\t                var col = cols_2[_i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                var value = col.valueAccessor(col.field, args.rowData, col);\n\t                var tArgs = { column: col, value: value, type: args.requestType };\n\t                var temp = col.edit.create;\n\t                var input = void 0;\n\t                input = col.edit.create(tArgs);\n\t                if (typeof input === 'string') {\n\t                    var div = ej2_base_2.createElement('div');\n\t                    div.innerHTML = input;\n\t                    input = div.firstChild;\n\t                }\n\t                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n\t                ej2_base_2.attributes(isInput ? input.querySelector('input') : input, {\n\t                    name: col.field, 'e-mappinguid': col.uid,\n\t                    id: gObj.element.id + col.field,\n\t                });\n\t                ej2_base_2.classList(input, ['e-input', 'e-field'], []);\n\t                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit') {\n\t                    input.setAttribute('disabled', 'true');\n\t                }\n\t                elements[col.uid] = input;\n\t            }\n\t            return elements;\n\t        };\n\t        return EditRender;\n\t    }());\n\t    exports.EditRender = EditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEditRender = (function () {\n\t        function InlineEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        InlineEditRender.prototype.addNew = function (elements, args) {\n\t            var tbody = this.parent.getContentTable().querySelector('tbody');\n\t            args.row = ej2_base_1.createElement('tr', { className: 'e-row e-addedrow' });\n\t            tbody.insertBefore(args.row, tbody.firstChild);\n\t            args.row.appendChild(this.getEditElement(elements, false));\n\t        };\n\t        InlineEditRender.prototype.update = function (elements, args) {\n\t            args.row.innerHTML = '';\n\t            args.row.appendChild(this.getEditElement(elements, true));\n\t            args.row.classList.add('e-editedrow');\n\t        };\n\t        InlineEditRender.prototype.getEditElement = function (elements, isEdit) {\n\t            var gObj = this.parent;\n\t            var gLen = 0;\n\t            var isDetail = !ej2_base_1.isNullOrUndefined(gObj.detailTemplate) || !ej2_base_1.isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n\t            if (gObj.allowGrouping) {\n\t                gLen = gObj.groupSettings.columns.length;\n\t            }\n\t            var td = ej2_base_1.createElement('td', {\n\t                className: 'e-editcell e-normaledit',\n\t                attrs: { colspan: (gObj.getVisibleColumns().length + gLen + isDetail).toString() }\n\t            });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n\t            table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var tr = ej2_base_1.createElement('tr');\n\t            var i = 0;\n\t            if (isDetail) {\n\t                tr.insertBefore(ej2_base_1.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n\t            }\n\t            while (i < gLen) {\n\t                tr.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                i++;\n\t            }\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                var td_1 = ej2_base_1.createElement('td', {\n\t                    className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : '') }\n\t                });\n\t                td_1.appendChild(elements[col.uid]);\n\t                if (col.editType === 'booleanedit') {\n\t                    td_1.classList.add('e-boolcell');\n\t                }\n\t                tr.appendChild(td_1);\n\t            }\n\t            tbody.appendChild(tr);\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            td.appendChild(form);\n\t            return td;\n\t        };\n\t        return InlineEditRender;\n\t    }());\n\t    exports.InlineEditRender = InlineEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEditRender = (function () {\n\t        function BatchEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        BatchEditRender.prototype.update = function (elements, args) {\n\t            args.cell.innerHTML = '';\n\t            args.cell.appendChild(this.getEditElement(elements, args));\n\t            args.cell.classList.add('e-editedbatchcell');\n\t            ej2_base_1.classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n\t        };\n\t        BatchEditRender.prototype.getEditElement = function (elements, args) {\n\t            var gObj = this.parent;\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            form.appendChild(elements[args.columnObject.uid]);\n\t            if (args.columnObject.editType === 'booleanedit') {\n\t                args.cell.classList.add('e-boolcell');\n\t            }\n\t            if (!args.columnObject.editType) {\n\t                args.cell.classList.add('e-inputbox');\n\t            }\n\t            return form;\n\t        };\n\t        return BatchEditRender;\n\t    }());\n\t    exports.BatchEditRender = BatchEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(44), __webpack_require__(5), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_popups_1, ej2_base_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEditRender = (function () {\n\t        function DialogEditRender(parent, serviceLocator) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent.on(events.dialogDestroy, this.destroy, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        }\n\t        DialogEditRender.prototype.setLocaleObj = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t        };\n\t        DialogEditRender.prototype.addNew = function (elements, args) {\n\t            this.isEdit = false;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.update = function (elements, args) {\n\t            this.isEdit = true;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.createDialog = function (elements, args) {\n\t            var gObj = this.parent;\n\t            this.dialog = ej2_base_1.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper' });\n\t            gObj.element.appendChild(this.dialog);\n\t            this.setLocaleObj();\n\t            this.dialogObj = new ej2_popups_1.Dialog({\n\t                header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n\t                    this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true,\n\t                content: this.getEditElement(elements), showCloseIcon: true, allowDragging: true, close: this.destroy.bind(this),\n\t                closeOnEscape: true, width: '330px', target: gObj.element, animationSettings: { effect: 'None' },\n\t                buttons: [{\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n\t                    },\n\t                    { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n\t            });\n\t            this.dialogObj.appendTo(this.dialog);\n\t        };\n\t        DialogEditRender.prototype.btnClick = function (e) {\n\t            if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.toLowerCase()) {\n\t                this.parent.closeEdit();\n\t                this.destroy();\n\t            }\n\t            else {\n\t                this.parent.endEdit();\n\t            }\n\t        };\n\t        DialogEditRender.prototype.destroy = function (args) {\n\t            this.parent.notify(events.destroyForm, {});\n\t            this.parent.isEdit = false;\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t            if (this.dialog && !this.dialogObj.isDestroyed) {\n\t                this.dialogObj.destroy();\n\t                ej2_base_1.remove(this.dialog);\n\t            }\n\t        };\n\t        DialogEditRender.prototype.getEditElement = function (elements) {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_1.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var cols = gObj.columns;\n\t            for (var i = 0; i < cols.length; i++) {\n\t                if (!cols[i].visible) {\n\t                    continue;\n\t                }\n\t                var tr = ej2_base_1.createElement('tr');\n\t                var dataCell = ej2_base_1.createElement('td', { className: 'e-rowcell', attrs: { style: 'text-align:left;width:190px' } });\n\t                var label = ej2_base_1.createElement('label', { innerHTML: cols[i].field });\n\t                elements[cols[i].uid].classList.remove('e-input');\n\t                if (cols[i].editType === 'booleanedit') {\n\t                    var elem = dataCell.appendChild(elements[cols[i].uid]);\n\t                    var lbl = ej2_base_1.createElement('label', { className: 'e-noselect', attrs: { for: elem.id, style: ej2_base_1.Browser.isDevice ? '' : 'vertical-align: top;' } });\n\t                    lbl.innerHTML = cols[i].headerText;\n\t                    dataCell.appendChild(elem);\n\t                    dataCell.appendChild(lbl);\n\t                }\n\t                else {\n\t                    dataCell.appendChild(elements[cols[i].uid]);\n\t                }\n\t                tr.appendChild(dataCell);\n\t                tbody.appendChild(tr);\n\t            }\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            div.appendChild(form);\n\t            return div;\n\t        };\n\t        return DialogEditRender;\n\t    }());\n\t    exports.DialogEditRender = DialogEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BooleanEditCell = (function () {\n\t        function BooleanEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        BooleanEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var input = ej2_base_1.createElement('input', {\n\t                className: 'e-field e-boolcell', attrs: {\n\t                    type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field\n\t                }\n\t            });\n\t            if (!util_1.isEditable(args.column, args.requestType, args.element)) {\n\t                input.setAttribute('disabled', 'true');\n\t            }\n\t            if (args.value) {\n\t                input.checked = true;\n\t            }\n\t            return input;\n\t        };\n\t        BooleanEditCell.prototype.read = function (element) {\n\t            return element.checked;\n\t        };\n\t        BooleanEditCell.prototype.write = function (args) {\n\t            args.element.style.width = 'auto';\n\t        };\n\t        BooleanEditCell.prototype.destroy = function () {\n\t        };\n\t        return BooleanEditCell;\n\t    }());\n\t    exports.BooleanEditCell = BooleanEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(53), __webpack_require__(7), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_dropdowns_1, ej2_data_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DropDownEditCell = (function () {\n\t        function DropDownEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DropDownEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, type: 'text', 'e-mappinguid': args.column.uid,\n\t                }\n\t            });\n\t        };\n\t        DropDownEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_dropdowns_1.DropDownList(ej2_base_1.extend({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                query: new ej2_data_1.Query().select(args.column.field), enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                fields: { value: args.column.field }, value: args.rowData[args.column.field],\n\t                enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete,\n\t                placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n\t                floatLabelType: isInline ? 'Never' : 'Always',\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', args.column.field);\n\t        };\n\t        DropDownEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        DropDownEditCell.prototype.ddActionComplete = function (e) {\n\t            e.result = e.result.filter(function (val, i, values) { return values.indexOf(val) === i; });\n\t            e.result.sort();\n\t        };\n\t        DropDownEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return DropDownEditCell;\n\t    }());\n\t    exports.DropDownEditCell = DropDownEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(72), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DefaultEditCell = (function () {\n\t        function DefaultEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DefaultEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var input = ej2_base_1.createElement('input', {\n\t                className: 'e-field e-input e-defaultcell', attrs: {\n\t                    type: 'text', value: !ej2_base_1.isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field, style: 'text-align:' + col.textAlign,\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        DefaultEditCell.prototype.read = function (element) {\n\t            return element.value;\n\t        };\n\t        DefaultEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            ej2_inputs_1.Input.createInput({\n\t                element: args.element, floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t                properties: {\n\t                    enableRtl: this.parent.enableRtl, enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                    placeholder: isInline ? '' : args.column.headerText\n\t                }\n\t            });\n\t        };\n\t        return DefaultEditCell;\n\t    }());\n\t    exports.DefaultEditCell = DefaultEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(81)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEdit = (function (_super) {\n\t        __extends(InlineEdit, _super);\n\t        function InlineEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        InlineEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        InlineEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        InlineEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return InlineEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.InlineEdit = InlineEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(12)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events, row_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NormalEdit = (function () {\n\t        function NormalEdit(parent, serviceLocator, renderer) {\n\t            this.parent = parent;\n\t            this.renderer = renderer;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        NormalEdit.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            var gObj = this.parent;\n\t            if (util_1.parentsUntil(target, 'e-gridcontent')) {\n\t                this.rowIndex = util_1.parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n\t                if (gObj.isEdit) {\n\t                    gObj.editModule.endEdit();\n\t                }\n\t            }\n\t        };\n\t        NormalEdit.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n\t                this.parent.editModule.startEdit(util_1.parentsUntil(e.target, 'e-row'));\n\t            }\n\t        };\n\t        NormalEdit.prototype.editComplete = function (e) {\n\t            switch (e.requestType) {\n\t                case 'save':\n\t                    this.parent.selectRow(0);\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'save',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t                case 'delete':\n\t                    this.parent.selectRow(this.editRowIndex);\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'delete',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t            }\n\t            this.parent.element.focus();\n\t        };\n\t        NormalEdit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            var primaryKeys = gObj.getPrimaryKeyFieldNames();\n\t            var primaryKeyValues = [];\n\t            this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t            this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n\t            for (var i = 0; i < primaryKeys.length; i++) {\n\t                primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n\t            }\n\t            var args = {\n\t                row: tr, primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n\t                rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false\n\t            };\n\t            gObj.trigger(events.beginEdit, args);\n\t            args.type = 'actionBegin';\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            gObj.isEdit = true;\n\t            this.renderer.update(args);\n\t            this.uid = tr.getAttribute('data-uid');\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = 'actionComplete';\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.endEdit = function () {\n\t            var gObj = this.parent;\n\t            if (!this.parent.isEdit || !gObj.editModule.formObj.validate()) {\n\t                return;\n\t            }\n\t            var editedData = ej2_base_1.extend({}, this.previousData);\n\t            var args = {\n\t                requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n\t                previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n\t            };\n\t            editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-gridform'), editedData);\n\t            if (gObj.element.querySelectorAll('.e-editedrow').length) {\n\t                args.action = 'edit';\n\t                gObj.trigger(events.actionBegin, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                gObj.notify(events.updateData, args);\n\t            }\n\t            else {\n\t                args.action = 'add';\n\t                args.selectedRow = 0;\n\t                gObj.notify(events.modelChanged, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            this.parent.notify(events.dialogDestroy, {});\n\t            this.stopEditStatus();\n\t        };\n\t        NormalEdit.prototype.editHandler = function (args) {\n\t            var _this = this;\n\t            if (args.promise) {\n\t                args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n\t            }\n\t            else {\n\t                this.editSuccess({}, args);\n\t            }\n\t        };\n\t        NormalEdit.prototype.edSucc = function (e, args) {\n\t            this.editSuccess(e, args);\n\t        };\n\t        NormalEdit.prototype.edFail = function (e) {\n\t            this.editFailure(e);\n\t        };\n\t        NormalEdit.prototype.editSuccess = function (e, args) {\n\t            if (e.result) {\n\t                this.parent.trigger(events.beforeDataBound, e);\n\t                args.data = e.result;\n\t            }\n\t            else {\n\t                this.parent.trigger(events.beforeDataBound, args);\n\t            }\n\t            args.type = events.actionComplete;\n\t            this.refreshRow(args.data);\n\t            this.parent.trigger(events.actionComplete, args);\n\t            this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n\t            this.parent.element.focus();\n\t        };\n\t        NormalEdit.prototype.editFailure = function (e) {\n\t            this.parent.trigger(events.actionFailure, e);\n\t        };\n\t        NormalEdit.prototype.refreshRow = function (data) {\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var rowObj = this.parent.getRowObjectFromUID(this.uid);\n\t            if (rowObj) {\n\t                rowObj.changes = data;\n\t                row.refresh(rowObj, this.parent.columns, true);\n\t            }\n\t        };\n\t        NormalEdit.prototype.closeEdit = function () {\n\t            var gObj = this.parent;\n\t            var args = {\n\t                requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            this.stopEditStatus();\n\t            args.type = events.actionComplete;\n\t            if (gObj.editSettings.mode !== 'dialog') {\n\t                this.refreshRow(args.data);\n\t            }\n\t            gObj.selectRow(this.rowIndex);\n\t            gObj.element.focus();\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.addRecord = function (data) {\n\t            var gObj = this.parent;\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            if (data) {\n\t                gObj.notify(events.modelChanged, {\n\t                    requestType: 'add', type: events.actionBegin, data: data\n\t                });\n\t                return;\n\t            }\n\t            this.previousData = {};\n\t            this.uid = '';\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                this.previousData[col.field] = data && data[col.field] ? data[col.field] : col.defaultValue;\n\t            }\n\t            var args = {\n\t                cancel: false, foreignKeyData: {},\n\t                requestType: 'add', data: this.previousData, type: events.actionBegin\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            gObj.isEdit = true;\n\t            this.renderer.addNew({ rowData: args.data, requestType: 'add' });\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = events.actionComplete;\n\t            args.row = gObj.element.querySelector('.e-addedrow');\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editRowIndex = this.parent.selectedRowIndex;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n\t                data: data ? [data] : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n\t            });\n\t        };\n\t        NormalEdit.prototype.stopEditStatus = function () {\n\t            var gObj = this.parent;\n\t            gObj.isEdit = false;\n\t            var elem = gObj.element.querySelector('.e-addedrow');\n\t            if (elem) {\n\t                ej2_base_2.remove(elem);\n\t            }\n\t            elem = gObj.element.querySelector('.e-editedrow');\n\t            if (elem) {\n\t                elem.classList.remove('e-editedrow');\n\t            }\n\t        };\n\t        NormalEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.crudAction, this.editHandler, this);\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.deleteComplete, this.editComplete, this);\n\t            this.parent.on(events.saveComplete, this.editComplete, this);\n\t        };\n\t        NormalEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.crudAction, this.editHandler);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.deleteComplete, this.editComplete);\n\t            this.parent.off(events.saveComplete, this.editComplete);\n\t        };\n\t        NormalEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return NormalEdit;\n\t    }());\n\t    exports.NormalEdit = NormalEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(9), __webpack_require__(12), __webpack_require__(21), __webpack_require__(18)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, row_renderer_1, cell_renderer_1, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEdit = (function () {\n\t        function BatchEdit(parent, serviceLocator, renderer) {\n\t            this.cellDetails = {};\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = renderer;\n\t            this.addEventListener();\n\t        }\n\t        BatchEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.addEventListener(events.dataBound, this.dataBound.bind(this));\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t        };\n\t        BatchEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.removeEventListener(events.dataBound, this.dataBound);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t        };\n\t        BatchEdit.prototype.dataBound = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        BatchEdit.prototype.clickHandler = function (e) {\n\t            if (!util_1.parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n\t                this.saveCell();\n\t                if (util_1.parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n\t                    this.setCellIdx(e.target);\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.dblClickHandler = function (e) {\n\t            var target = e.target;\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            if ((util_1.parentsUntil(target, 'e-rowcell')) && tr) {\n\t                this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.columns[parseInt(util_1.parentsUntil(target, 'e-rowcell').getAttribute('aria-colindex'), 10)].field);\n\t            }\n\t        };\n\t        BatchEdit.prototype.keyPressHandler = function (e) {\n\t            var isEdit = this.parent.isEdit;\n\t            if (!document.querySelectorAll('.e-popup-open').length) {\n\t                this.saveCell();\n\t                isEdit = isEdit && !this.validateFormObj();\n\t                switch (e.action) {\n\t                    case 'tab':\n\t                        if (isEdit) {\n\t                            this.editNextCell();\n\t                        }\n\t                        break;\n\t                    case 'shiftTab':\n\t                        if (isEdit) {\n\t                            this.editPrevCell();\n\t                        }\n\t                        break;\n\t                    case 'enter':\n\t                        e.preventDefault();\n\t                        if (isEdit && this.cellDetails.rowIndex + 1 < this.parent.getDataRows().length) {\n\t                            this.editCell(this.cellDetails.rowIndex + 1, this.cellDetails.column.field);\n\t                        }\n\t                        break;\n\t                    case 'f2':\n\t                        this.editCellFromIndex(this.cellDetails.rowIndex, this.cellDetails.cellIndex);\n\t                        break;\n\t                }\n\t                if (this.parent.isEdit || !(this.cellDetails.cellIndex === 0 && this.cellDetails.rowIndex === 0) ||\n\t                    !(this.cellDetails.rowIndex === this.parent.getDataRows().length &&\n\t                        this.cellDetails.cellIndex === this.parent.columns.length - 1)) {\n\t                    e.preventDefault();\n\t                }\n\t            }\n\t            this.reFocusOnError(e);\n\t        };\n\t        BatchEdit.prototype.reFocusOnError = function (e) {\n\t            if (this.validateFormObj() && (e.action === 'tab' || e.action === 'shiftTab')) {\n\t                e.target.focus();\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        BatchEdit.prototype.isAddRow = function (index) {\n\t            return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n\t        };\n\t        BatchEdit.prototype.editNextCell = function () {\n\t            var oldIdx = this.cellDetails.cellIndex;\n\t            var cellIdx = this.findNextEditableCell(this.cellDetails.cellIndex + 1, this.isAddRow(this.cellDetails.rowIndex));\n\t            if (cellIdx > -1) {\n\t                this.cellDetails.cellIndex = cellIdx;\n\t            }\n\t            else if (this.cellDetails.rowIndex + 1 < this.parent.getDataRows().length) {\n\t                this.cellDetails.rowIndex++;\n\t                this.cellDetails.cellIndex = this.findNextEditableCell(0, this.isAddRow(this.cellDetails.rowIndex));\n\t            }\n\t            if (oldIdx !== this.cellDetails.cellIndex) {\n\t                this.editCellFromIndex(this.cellDetails.rowIndex, this.cellDetails.cellIndex);\n\t            }\n\t        };\n\t        BatchEdit.prototype.editPrevCell = function () {\n\t            var oldIdx = this.cellDetails.cellIndex;\n\t            var cellIdx = this.findPrevEditableCell(this.cellDetails.cellIndex - 1, this.isAddRow(this.cellDetails.rowIndex));\n\t            if (cellIdx > -1) {\n\t                this.cellDetails.cellIndex = cellIdx;\n\t            }\n\t            else if (this.cellDetails.rowIndex - 1 > -1) {\n\t                this.cellDetails.rowIndex--;\n\t                this.cellDetails.cellIndex = this.findPrevEditableCell(this.parent.columns.length - 1, this.isAddRow(this.cellDetails.rowIndex));\n\t            }\n\t            if (oldIdx !== this.cellDetails.cellIndex) {\n\t                this.editCellFromIndex(this.cellDetails.rowIndex, this.cellDetails.cellIndex);\n\t            }\n\t        };\n\t        BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n\t            this.cellDetails.rowIndex = rowIdx;\n\t            this.cellDetails.cellIndex = cellIdx;\n\t            this.editCell(rowIdx, this.parent.columns[cellIdx].field);\n\t        };\n\t        BatchEdit.prototype.closeEdit = function () {\n\t            var gObj = this.parent;\n\t            var rows = gObj.contentModule.getRows();\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var tr;\n\t            if (gObj.isEdit) {\n\t                this.saveCell(true);\n\t            }\n\t            gObj.clearSelection();\n\t            for (var i = 0; i < rows.length; i++) {\n\t                if (rows[i].isDirty) {\n\t                    tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n\t                    if (tr) {\n\t                        if (tr.classList.contains('e-insertedrow')) {\n\t                            ej2_base_2.remove(tr);\n\t                            this.removeRowObjectFromUID(rows[i].uid);\n\t                            i--;\n\t                        }\n\t                        else {\n\t                            delete rows[i].changes;\n\t                            rows[i].isDirty = false;\n\t                            ej2_base_2.classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n\t                            rowRenderer.refresh(rows[i], gObj.columns, false);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            gObj.selectRow(this.cellDetails.rowIndex);\n\t            this.refreshRowIdx();\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t        };\n\t        BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.saveCell();\n\t            this.bulkDelete(fieldname, data);\n\t        };\n\t        BatchEdit.prototype.addRecord = function (data) {\n\t            this.bulkAddRow(data);\n\t        };\n\t        BatchEdit.prototype.endEdit = function (data) {\n\t            if (this.parent.isEdit && this.validateFormObj()) {\n\t                return;\n\t            }\n\t            this.batchSave();\n\t        };\n\t        BatchEdit.prototype.validateFormObj = function () {\n\t            return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n\t        };\n\t        BatchEdit.prototype.batchSave = function () {\n\t            var gObj = this.parent;\n\t            this.saveCell();\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var changes = this.getBatchChanges();\n\t            var args = { batchChanges: changes, cancel: false };\n\t            gObj.trigger(events.beforeBatchSave, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.notify(events.bulkSave, { changes: changes });\n\t        };\n\t        BatchEdit.prototype.getBatchChanges = function () {\n\t            var changes = {\n\t                addedRecords: [],\n\t                deletedRecords: [],\n\t                changedRecords: []\n\t            };\n\t            var rows = this.parent.contentModule.getRows();\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                if (row.isDirty) {\n\t                    switch (row.edit) {\n\t                        case 'add':\n\t                            changes.addedRecords.push(row.changes);\n\t                            break;\n\t                        case 'delete':\n\t                            changes.deletedRecords.push(row.data);\n\t                            break;\n\t                        default:\n\t                            changes.changedRecords.push(row.changes);\n\t                    }\n\t                }\n\t            }\n\t            return changes;\n\t        };\n\t        BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n\t            var rows = this.parent.contentModule.getRows();\n\t            var i = 0;\n\t            for (var len = rows.length; i < len; i++) {\n\t                if (rows[i].uid === uid) {\n\t                    break;\n\t                }\n\t            }\n\t            rows.splice(i, 1);\n\t        };\n\t        BatchEdit.prototype.addRowObject = function (row) {\n\t            this.parent.contentModule.getRows().unshift(row);\n\t        };\n\t        BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            var index = data ? this.getIndexFromData(data) : gObj.selectedRowIndex;\n\t            var args = {\n\t                primaryKey: this.parent.getPrimaryKeyFieldNames(),\n\t                rowIndex: index,\n\t                rowData: data ? data : gObj.getSelectedRecords()[0],\n\t                row: data ? gObj.getRows()[index] : gObj.getSelectedRows()[0], cancel: false\n\t            };\n\t            if (!args.row) {\n\t                return;\n\t            }\n\t            gObj.trigger(events.beforeBatchDelete, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var uid = args.row.getAttribute('data-uid');\n\t            if (args.row.classList.contains('e-insertedrow')) {\n\t                this.removeRowObjectFromUID(uid);\n\t                ej2_base_2.remove(args.row);\n\t            }\n\t            else {\n\t                var rowObj = gObj.getRowObjectFromUID(uid);\n\t                rowObj.isDirty = true;\n\t                rowObj.edit = 'delete';\n\t                ej2_base_2.classList(args.row, ['e-hiddenrow', 'e-updatedtd'], []);\n\t            }\n\t            this.refreshRowIdx();\n\t            gObj.selectRow(index);\n\t            delete args.row;\n\t            gObj.trigger(events.batchDelete, args);\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            gObj.element.focus();\n\t        };\n\t        BatchEdit.prototype.refreshRowIdx = function () {\n\t            var rows = [].slice.call(this.parent.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    rows[i].setAttribute('aria-rowindex', j.toString());\n\t                    j++;\n\t                }\n\t                else {\n\t                    rows[i].removeAttribute('aria-rowindex');\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.getIndexFromData = function (data) {\n\t            return util_1.inArray(data, this.parent.getCurrentViewRecords());\n\t        };\n\t        BatchEdit.prototype.bulkAddRow = function (data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            if (gObj.isEdit) {\n\t                this.saveCell();\n\t            }\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var defaultData = data ? data : this.getDefaultData();\n\t            var args = {\n\t                defaultData: defaultData,\n\t                primaryKey: gObj.getPrimaryKeyFieldNames(),\n\t                cancel: false\n\t            };\n\t            gObj.trigger(events.beforeBatchAdd, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var model = new row_model_generator_1.RowModelGenerator(this.parent);\n\t            var modelData = model.generateRows([args.defaultData]);\n\t            var tr = row.render(modelData[0], gObj.getColumns());\n\t            var col;\n\t            var index;\n\t            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n\t                tr.insertBefore(ej2_base_2.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n\t            }\n\t            var tbody = gObj.getContentTable().querySelector('tbody');\n\t            tr.classList.add('e-insertedrow');\n\t            tbody.insertBefore(tr, tbody.firstChild);\n\t            ej2_base_1.addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n\t            modelData[0].isDirty = true;\n\t            modelData[0].changes = ej2_base_1.extend({}, modelData[0].data);\n\t            modelData[0].edit = 'add';\n\t            this.addRowObject(modelData[0]);\n\t            this.refreshRowIdx();\n\t            gObj.selectRow(0);\n\t            if (!data) {\n\t                index = this.findNextEditableCell(0, true);\n\t                col = gObj.columns[index];\n\t                this.editCell(0, col.field, true);\n\t            }\n\t            var args1 = {\n\t                defaultData: args.defaultData, row: tr,\n\t                columnObject: col, columnIndex: index, primaryKey: args.primaryKey, cell: tr.cells[index]\n\t            };\n\t            gObj.trigger(events.batchAdd, args1);\n\t        };\n\t        BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd) {\n\t            var cols = this.parent.columns;\n\t            var endIndex = cols.length;\n\t            for (var i = columnIndex; i < endIndex; i++) {\n\t                if (!isAdd && this.checkNPCell(cols[i])) {\n\t                    return i;\n\t                }\n\t                else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.findPrevEditableCell = function (columnIndex, isAdd) {\n\t            var cols = this.parent.columns;\n\t            for (var i = columnIndex; i > -1; i--) {\n\t                if (!isAdd && this.checkNPCell(cols[i])) {\n\t                    return i;\n\t                }\n\t                else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.checkNPCell = function (col) {\n\t            return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n\t        };\n\t        BatchEdit.prototype.getDefaultData = function () {\n\t            var gObj = this.parent;\n\t            var data = {};\n\t            var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                data[col.field] = col.defaultValue ? col.defaultValue : dValues[col.type];\n\t            }\n\t            return data;\n\t        };\n\t        BatchEdit.prototype.setCellIdx = function (target) {\n\t            var gLen = 0;\n\t            if (this.parent.allowGrouping) {\n\t                gLen = this.parent.groupSettings.columns.length;\n\t            }\n\t            this.cellDetails.cellIndex = target.cellIndex - gLen;\n\t            this.cellDetails.rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t        };\n\t        BatchEdit.prototype.editCell = function (index, field, isAdd) {\n\t            var gObj = this.parent;\n\t            var col = gObj.getColumnByField(field);\n\t            var keys = gObj.getPrimaryKeyFieldNames();\n\t            if (gObj.editSettings.allowEditing && col.allowEditing) {\n\t                if (gObj.isEdit && !(this.cellDetails.column.field === field && this.cellDetails.rowIndex === index)) {\n\t                    this.saveCell();\n\t                }\n\t                if (gObj.isEdit) {\n\t                    return;\n\t                }\n\t                var row = gObj.getDataRows()[index];\n\t                if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.template || col.columns) {\n\t                    return;\n\t                }\n\t                var rowData = ej2_base_1.extend({}, this.getDataByIndex(index));\n\t                var args = {\n\t                    cell: row.cells[this.getCellIdx(col.uid)], row: row,\n\t                    columnName: col.field, columnObject: col, isForeignKey: !ej2_base_3.isNullOrUndefined(col.foreignKeyValue),\n\t                    primaryKey: keys, rowData: rowData,\n\t                    validationRules: ej2_base_1.extend({}, col.validationRules ? col.validationRules : {}),\n\t                    value: rowData[col.field], type: !isAdd ? 'edit' : 'add', cancel: false\n\t                };\n\t                gObj.trigger(events.cellEdit, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                this.cellDetails = {\n\t                    rowData: rowData, column: col, value: args.value, isForeignKey: args.isForeignKey,\n\t                };\n\t                this.setCellIdx(args.cell);\n\t                if (args.cell.classList.contains('e-updatedtd')) {\n\t                    this.isColored = true;\n\t                    args.cell.classList.remove('e-updatedtd');\n\t                }\n\t                gObj.clearSelection();\n\t                gObj.selectRow(this.cellDetails.rowIndex);\n\t                gObj.isEdit = true;\n\t                this.renderer.update(args);\n\t                this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n\t                gObj.editModule.applyFormValidation([col]);\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n\t            var col = this.parent.getColumnByField(field);\n\t            if (col && !col.isPrimaryKey) {\n\t                var td = this.parent.getDataRows()[rowIndex].cells[this.parent.getColumnIndexByField(field)];\n\t                var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n\t                this.refreshTD(td, col, rowObj, value);\n\t                this.parent.trigger(events.queryCellInfo, {\n\t                    cell: td, column: col, data: rowObj.changes\n\t                });\n\t            }\n\t        };\n\t        BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n\t            if (!rowObj.changes) {\n\t                rowObj.changes = ej2_base_1.extend({}, rowObj.data);\n\t            }\n\t            rowObj.changes[field] = value;\n\t            rowObj.isDirty = true;\n\t        };\n\t        BatchEdit.prototype.updateRow = function (index, data) {\n\t            var keys = Object.keys(data);\n\t            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                var col = keys_1[_i];\n\t                this.updateCell(index, col, data[col]);\n\t            }\n\t        };\n\t        BatchEdit.prototype.getCellIdx = function (uid) {\n\t            var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n\t            if (!ej2_base_3.isNullOrUndefined(this.parent.detailTemplate) || !ej2_base_3.isNullOrUndefined(this.parent.childGrid)) {\n\t                cIdx++;\n\t            }\n\t            return cIdx;\n\t        };\n\t        BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n\t            var cell = new cell_renderer_1.CellRenderer(this.parent, this.serviceLocator);\n\t            this.setChanges(rowObj, column.field, value);\n\t            cell.refreshTD(td, rowObj.cells[this.getCellIdx(column.uid)], rowObj.changes);\n\t            td.classList.add('e-updatedtd');\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.saveCell = function (isForceSave) {\n\t            var gObj = this.parent;\n\t            if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n\t                return;\n\t            }\n\t            var tr = util_1.parentsUntil(this.form, 'e-row');\n\t            var column = this.cellDetails.column;\n\t            var editedData = gObj.editModule.getCurrentEditedData(this.form, {});\n\t            editedData = ej2_base_1.extend(this.cellDetails.rowData, editedData);\n\t            var args = {\n\t                columnName: column.field,\n\t                value: editedData[column.field],\n\t                rowData: this.cellDetails.rowData,\n\t                previousValue: this.cellDetails.value,\n\t                columnObject: column,\n\t                cell: this.form.parentElement,\n\t                isForeignKey: this.cellDetails.isForeignKey, cancel: false\n\t            };\n\t            if (!isForceSave) {\n\t                gObj.trigger(events.cellSave, args);\n\t            }\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.editModule.destroyForm();\n\t            gObj.editModule.destroyWidgets([column]);\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            this.refreshTD(args.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), args.value);\n\t            ej2_base_2.classList(tr, [], ['e-editedrow', 'e-batchrow']);\n\t            args.cell.classList.remove('e-editedbatchcell');\n\t            gObj.isEdit = false;\n\t            if (!ej2_base_3.isNullOrUndefined(args.value) && args.value.toString() ===\n\t                (!ej2_base_3.isNullOrUndefined(this.cellDetails.value) ? this.cellDetails.value : '').toString() && !this.isColored) {\n\t                args.cell.classList.remove('e-updatedtd');\n\t            }\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.isColored = false;\n\t        };\n\t        BatchEdit.prototype.getDataByIndex = function (index) {\n\t            var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n\t            return row.changes ? row.changes : row.data;\n\t        };\n\t        BatchEdit.prototype.valComplete = function (args) {\n\t            var edit = this.parent.editModule;\n\t            edit.validationComplete(args);\n\t        };\n\t        BatchEdit.prototype.customPlacement = function (inputElement, error) {\n\t            var edit = this.parent.editModule;\n\t            edit.valErrorPlacement(inputElement, error);\n\t        };\n\t        return BatchEdit;\n\t    }());\n\t    exports.BatchEdit = BatchEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(81)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEdit = (function (_super) {\n\t        __extends(DialogEdit, _super);\n\t        function DialogEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        DialogEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        DialogEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        DialogEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return DialogEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.DialogEdit = DialogEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9), __webpack_require__(85), __webpack_require__(5), __webpack_require__(16), __webpack_require__(86), __webpack_require__(20), __webpack_require__(13), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, ej2_excel_export_1, ej2_base_1, data_1, export_helper_1, summary_model_generator_1, enum_1, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExcelExport = (function () {\n\t        function ExcelExport(parent) {\n\t            this.book = {};\n\t            this.workSheet = [];\n\t            this.rows = [];\n\t            this.columns = [];\n\t            this.styles = [];\n\t            this.rowLength = 1;\n\t            this.expType = 'appendtosheet';\n\t            this.includeHiddenColumn = false;\n\t            this.isCsvExport = false;\n\t            this.init(parent);\n\t        }\n\t        ExcelExport.prototype.getModuleName = function () {\n\t            return 'ExcelExport';\n\t        };\n\t        ExcelExport.prototype.init = function (gObj) {\n\t            this.parent = gObj;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.isExporting = undefined;\n\t            this.book = {};\n\t            this.workSheet = [];\n\t            this.rows = [];\n\t            this.columns = [];\n\t            this.styles = [];\n\t            this.data = new data_1.Data(this.parent);\n\t            this.rowLength = 1;\n\t            this.footer = undefined;\n\t            this.expType = 'appendtosheet';\n\t            this.includeHiddenColumn = false;\n\t            this.exportValueFormatter = new export_helper_1.ExportValueFormatter();\n\t            this.theme = 'material';\n\t        };\n\t        ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv) {\n\t            var gObj = grid;\n\t            this.isExporting = true;\n\t            if (isCsv) {\n\t                this.isCsvExport = isCsv;\n\t            }\n\t            else {\n\t                this.isCsvExport = false;\n\t            }\n\t            gObj.trigger(events.beforeExcelExport);\n\t            return this.processRecords(grid, exportProperties, isMultipleExport, workbook);\n\t        };\n\t        ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n\t            var _this = this;\n\t            if (exportProperties !== undefined && exportProperties.dataSource !== undefined &&\n\t                exportProperties.dataSource instanceof ej2_data_1.DataManager) {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = new ej2_data_1.DataManager({ url: exportProperties.dataSource.dataSource.url, adaptor: exportProperties.dataSource.adaptor }).executeQuery(new ej2_data_1.Query());\n\t                    dataManager.then(function (r) {\n\t                        _this.init(gObj);\n\t                        _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n\t                        resolve(_this.book);\n\t                    });\n\t                });\n\t            }\n\t            else {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = _this.data.getData({}, _this.data.generateQuery(true).requiresCount());\n\t                    dataManager.then(function (r) {\n\t                        _this.init(gObj);\n\t                        _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n\t                        resolve(_this.book);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t        ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, isMultipleExport, workbook, r) {\n\t            var blankRows = 5;\n\t            if (exportProperties !== undefined && exportProperties.multipleExport !== undefined) {\n\t                this.expType = (exportProperties.multipleExport.type !== undefined ? exportProperties.multipleExport.type : 'appendtosheet');\n\t                if (exportProperties.multipleExport.blankRows !== undefined) {\n\t                    blankRows = exportProperties.multipleExport.blankRows;\n\t                }\n\t            }\n\t            if (workbook === undefined) {\n\t                this.workSheet = [];\n\t                this.rows = [];\n\t                this.columns = [];\n\t                this.styles = [];\n\t            }\n\t            else if (this.expType === 'newsheet') {\n\t                this.workSheet = workbook.worksheets;\n\t                this.rows = [];\n\t                this.columns = [];\n\t                this.styles = workbook.styles;\n\t            }\n\t            else {\n\t                this.workSheet = [];\n\t                this.rows = workbook.worksheets[0].rows;\n\t                this.columns = workbook.worksheets[0].columns;\n\t                this.styles = workbook.styles;\n\t                this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n\t                this.rowLength++;\n\t            }\n\t            if (exportProperties !== undefined) {\n\t                if (isMultipleExport !== undefined) {\n\t                    if (exportProperties.header !== undefined && (isMultipleExport || this.expType === 'newsheet')) {\n\t                        this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n\t                    }\n\t                    if (exportProperties.footer !== undefined) {\n\t                        if (this.expType === 'appendtosheet') {\n\t                            if (!isMultipleExport) {\n\t                                this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                            }\n\t                        }\n\t                        else {\n\t                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (exportProperties.header !== undefined) {\n\t                        this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n\t                    }\n\t                    if (exportProperties.footer !== undefined) {\n\t                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                    }\n\t                }\n\t            }\n\t            this.includeHiddenColumn = (exportProperties !== undefined ? exportProperties.includeHiddenColumn : false);\n\t            var headerRow = new export_helper_1.ExportHelper(gObj).getHeaders(gObj.columns, this.includeHiddenColumn);\n\t            var groupIndent = 0;\n\t            if ((r.result).level !== undefined) {\n\t                groupIndent += (r.result).level;\n\t                groupIndent += (r.result).childLevels;\n\t            }\n\t            this.processHeaderContent(gObj, headerRow, exportProperties, groupIndent);\n\t            if (exportProperties !== undefined && exportProperties.dataSource !== undefined && !(exportProperties.dataSource instanceof ej2_data_1.DataManager)) {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties.dataSource);\n\t            }\n\t            else if (exportProperties !== undefined && exportProperties.exportType === 'currentview') {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport, gObj.getCurrentViewRecords());\n\t            }\n\t            else {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport);\n\t            }\n\t            this.isExporting = false;\n\t            gObj.trigger(events.excelExportComplete);\n\t        };\n\t        ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, isMultipleExport, currentViewRecords) {\n\t            var column = gObj.columns;\n\t            var record = undefined;\n\t            if (currentViewRecords !== undefined) {\n\t                record = currentViewRecords;\n\t            }\n\t            else {\n\t                record = returnType.result;\n\t            }\n\t            if (record.level !== undefined) {\n\t                this.processGroupedRows(gObj, record, headerRow, record.level);\n\t            }\n\t            else {\n\t                this.processRecordRows(gObj, record, headerRow, 0);\n\t                if (returnType.aggregates !== undefined) {\n\t                    if (currentViewRecords !== undefined) {\n\t                        this.processAggregates(gObj, returnType.result, currentViewRecords);\n\t                    }\n\t                    else {\n\t                        this.processAggregates(gObj, returnType.result);\n\t                    }\n\t                }\n\t            }\n\t            if (this.footer !== undefined) {\n\t                if ((this.expType === 'appendtosheet' && !isMultipleExport) || (this.expType === 'newsheet')) {\n\t                    this.processExcelFooter(this.footer);\n\t                }\n\t            }\n\t            var sheet = {};\n\t            if (this.columns.length > 0) {\n\t                sheet.columns = this.columns;\n\t            }\n\t            sheet.rows = this.rows;\n\t            this.workSheet.push(sheet);\n\t            this.book.worksheets = this.workSheet;\n\t            this.book.styles = this.styles;\n\t            if (!isMultipleExport) {\n\t                if (this.isCsvExport) {\n\t                    var book = new ej2_excel_export_1.Workbook(this.book, 'csv');\n\t                    book.save('Export.csv');\n\t                }\n\t                else {\n\t                    var book = new ej2_excel_export_1.Workbook(this.book, 'xlsx');\n\t                    book.save('Export.xlsx');\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level) {\n\t            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n\t                var item = dataSource_1[_i];\n\t                var cells = [];\n\t                var index = 1;\n\t                var cell = {};\n\t                cell.index = index + level;\n\t                var args = {\n\t                    value: item.key,\n\t                    column: gObj.getColumnByField(item.field),\n\t                    style: undefined\n\t                };\n\t                cell.value = item.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ';\n\t                if (item.count > 1) {\n\t                    cell.value += item.count + ' items';\n\t                }\n\t                else {\n\t                    cell.value += item.count + ' item';\n\t                }\n\t                cell.style = this.getCaptionThemeStyle(this.theme);\n\t                var captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(gObj);\n\t                var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n\t                this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, this.rowLength);\n\t                cells.push(cell);\n\t                if (this.rows[this.rowLength - 1].cells.length > 0) {\n\t                    var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n\t                    var hIndex = 0;\n\t                    for (var _a = 0, _b = this.rows[this.rowLength - 1].cells; _a < _b.length; _a++) {\n\t                        var tCell = _b[_a];\n\t                        if (tCell.index < lIndex) {\n\t                            lIndex = tCell.index;\n\t                        }\n\t                        if (tCell.index > hIndex) {\n\t                            hIndex = tCell.index;\n\t                        }\n\t                        tCell.style = this.getCaptionThemeStyle(this.theme);\n\t                        cells.push(tCell);\n\t                    }\n\t                    if ((lIndex - cell.index) > 1) {\n\t                        cell.colSpan = lIndex - cell.index;\n\t                    }\n\t                    while (hIndex < (headerRow.columns.length + index + level)) {\n\t                        var sCell = {};\n\t                        if (dataSource.childLevels === 0) {\n\t                            sCell.index = (hIndex);\n\t                        }\n\t                        else {\n\t                            sCell.index = (hIndex + 1);\n\t                        }\n\t                        sCell.style = this.getCaptionThemeStyle(this.theme);\n\t                        cells.push(sCell);\n\t                        hIndex++;\n\t                    }\n\t                }\n\t                else {\n\t                    var span = 0;\n\t                    for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n\t                        var col = _d[_c];\n\t                        if (col.visible) {\n\t                            span++;\n\t                        }\n\t                    }\n\t                    cell.colSpan = (dataSource.childLevels + span);\n\t                }\n\t                this.rows[this.rowLength - 1].cells = cells;\n\t                this.rowLength++;\n\t                if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n\t                    this.processGroupedRows(gObj, item.items, headerRow, item.items.level);\n\t                }\n\t                else {\n\t                    this.processRecordRows(gObj, item.items, headerRow, (level));\n\t                    this.processAggregates(gObj, item, undefined, (level));\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level) {\n\t            var rLen = Object.keys(record).length;\n\t            var index = 1;\n\t            var cells = [];\n\t            for (var r = 0; r < rLen; r++) {\n\t                cells = [];\n\t                index = 1;\n\t                for (var c = 0, len = headerRow.columns.length; c < len; c++) {\n\t                    var value = record[r][headerRow.columns[c].field];\n\t                    if (!ej2_base_1.isNullOrUndefined(value)) {\n\t                        var args = {\n\t                            column: headerRow.columns[c], value: value, style: undefined\n\t                        };\n\t                        gObj.trigger(events.excelQueryCellInfo, args);\n\t                        var cell = {};\n\t                        cell.index = index + level;\n\t                        cell.value = args.value;\n\t                        if (args.style !== undefined) {\n\t                            var styleIndex = this.getColumnStyle(gObj, index + level);\n\t                            cell.style = this.mergeOptions(this.styles[styleIndex], args.style);\n\t                        }\n\t                        else {\n\t                            cell.style = { name: gObj.element.id + 'column' + (index + level) };\n\t                        }\n\t                        cells.push(cell);\n\t                    }\n\t                    index++;\n\t                }\n\t                this.rows.push({ index: this.rowLength++, cells: cells });\n\t            }\n\t        };\n\t        ExcelExport.prototype.processAggregates = function (gObj, rec, currentViewRecords, indent) {\n\t            var summaryModel = new summary_model_generator_1.SummaryModelGenerator(gObj);\n\t            var data = undefined;\n\t            if (currentViewRecords !== undefined) {\n\t                data = currentViewRecords;\n\t            }\n\t            else {\n\t                data = rec;\n\t            }\n\t            if (indent === undefined) {\n\t                indent = 0;\n\t            }\n\t            if (gObj.groupSettings.columns.length > 0) {\n\t                var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n\t                if (groupSummaryRows.length > 0) {\n\t                    this.fillAggregates(gObj, groupSummaryRows, indent);\n\t                }\n\t            }\n\t            var sRows = summaryModel.generateRows(data, rec.aggregates);\n\t            if (sRows.length > 0) {\n\t                this.fillAggregates(gObj, sRows, indent);\n\t            }\n\t        };\n\t        ExcelExport.prototype.fillAggregates = function (gObj, cells, indent, customIndex) {\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var row = cells_1[_i];\n\t                var cells_2 = [];\n\t                var index = 0;\n\t                for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n\t                    var cell = _b[_a];\n\t                    var eCell = {};\n\t                    if ((cell.visible || this.includeHiddenColumn)) {\n\t                        index++;\n\t                        if (cell.isDataCell) {\n\t                            eCell.index = index + indent;\n\t                            var templateFn = {};\n\t                            if (cell.column.footerTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(cell.column.footerTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else if (cell.column.groupFooterTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(cell.column.groupFooterTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else if (cell.column.groupCaptionTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(cell.column.groupCaptionTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else {\n\t                                for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n\t                                    var key = _d[_c];\n\t                                    if (key === cell.column.type) {\n\t                                        if (row.data[cell.column.field].sum !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].sum;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].average !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].average;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].max !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].max;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].min !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].min;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].count !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].count;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].truecount !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].truecount;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].falsecount !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].falsecount;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].custom !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].custom;\n\t                                        }\n\t                                    }\n\t                                }\n\t                            }\n\t                            eCell.style = this.getCaptionThemeStyle(this.theme);\n\t                            cells_2.push(eCell);\n\t                        }\n\t                        else {\n\t                            if (customIndex === undefined) {\n\t                                eCell.index = index + indent;\n\t                                eCell.style = this.getCaptionThemeStyle(this.theme);\n\t                                cells_2.push(eCell);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                if (customIndex !== undefined) {\n\t                    this.rows.push({ index: customIndex, cells: cells_2 });\n\t                }\n\t                else {\n\t                    this.rows.push({ index: this.rowLength++, cells: cells_2 });\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n\t            var result = {};\n\t            var attrname = Object.keys(JSON1);\n\t            for (var index = 0; index < attrname.length; index++) {\n\t                if (attrname[index] !== 'name') {\n\t                    result[attrname[index]] = JSON1[attrname[index]];\n\t                }\n\t            }\n\t            attrname = Object.keys(JSON2);\n\t            for (var index = 0; index < attrname.length; index++) {\n\t                if (attrname[index] !== 'name') {\n\t                    result[attrname[index]] = JSON2[attrname[index]];\n\t                }\n\t            }\n\t            return result;\n\t        };\n\t        ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n\t            var index = 0;\n\t            for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n\t                var style = _a[_i];\n\t                if (style.name === gObj.element.id + 'column' + columnIndex) {\n\t                    return index;\n\t                }\n\t                index++;\n\t            }\n\t            return undefined;\n\t        };\n\t        ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, exportProperties, indent) {\n\t            var column = gObj.columns;\n\t            var rowIndex = 1;\n\t            var returnValue = headerRow;\n\t            var gridRows = returnValue.rows;\n\t            var gridColumns = returnValue.columns;\n\t            var spannedCells = [];\n\t            if (indent > 0) {\n\t                var index = 0;\n\t                while (index !== indent) {\n\t                    this.columns.push({ index: index + 1, width: 30 });\n\t                    index++;\n\t                }\n\t            }\n\t            for (var row = 0; row < gridRows.length; row++) {\n\t                var currentCellIndex = 1 + indent;\n\t                var cells = [];\n\t                for (var column_1 = 0; column_1 < gridRows[row].cells.length; column_1++) {\n\t                    var style = {};\n\t                    var cell = {};\n\t                    var gridCell = gridRows[row].cells[column_1];\n\t                    var result = { contains: true, index: 1 };\n\t                    while (result.contains) {\n\t                        result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n\t                        currentCellIndex = result.index;\n\t                        if (!result.contains) {\n\t                            cell.index = result.index;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (gridCell.rowSpan !== undefined && gridCell.rowSpan !== 1) {\n\t                        cell.rowSpan = gridCell.rowSpan;\n\t                        for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n\t                            var spannedCell = { rowIndex: 0, columnIndex: 0 };\n\t                            spannedCell.rowIndex = i;\n\t                            spannedCell.columnIndex = currentCellIndex;\n\t                            spannedCells.push(spannedCell);\n\t                        }\n\t                    }\n\t                    if (gridCell.colSpan !== undefined && gridCell.colSpan !== 1) {\n\t                        cell.colSpan = gridCell.colSpan;\n\t                        currentCellIndex = currentCellIndex + cell.colSpan - 1;\n\t                    }\n\t                    cell.value = gridCell.column.headerText;\n\t                    if (exportProperties !== undefined && exportProperties.theme !== undefined) {\n\t                        this.theme = exportProperties.theme;\n\t                    }\n\t                    cell.style = this.getHeaderThemeStyle(this.theme);\n\t                    if (gridCell.column.textAlign !== undefined) {\n\t                        style.hAlign = gridCell.column.textAlign;\n\t                    }\n\t                    if (gridCell.column.headerTextAlign !== undefined) {\n\t                        style.hAlign = gridCell.column.headerTextAlign;\n\t                    }\n\t                    cell.style = style;\n\t                    cells.push(cell);\n\t                    currentCellIndex++;\n\t                }\n\t                this.rows.push({ index: this.rowLength++, cells: cells });\n\t            }\n\t            for (var col = 0; col < gridColumns.length; col++) {\n\t                this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n\t            }\n\t        };\n\t        ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n\t            var style = {};\n\t            switch (theme) {\n\t                case 'fabric':\n\t                    style.fontColor = '#666666';\n\t                    style.fontName = 'Segoe UI';\n\t                    style.fontSize = 14;\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                case 'bootstrap':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontSize = 14;\n\t                    style.bold = true;\n\t                    style.borders = { color: '#33330F' };\n\t                    break;\n\t                default:\n\t                    style.fontSize = 12;\n\t                    style.borders = { color: '#E0E0E0' };\n\t                    break;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n\t            var style = {};\n\t            switch (theme) {\n\t                case 'fabric':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontName = 'Segoe UI';\n\t                    style.fontSize = 14;\n\t                    style.backColor = '#F6F6F6';\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                case 'bootstrap':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontSize = 14;\n\t                    style.bold = true;\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                default:\n\t                    style.fontSize = 13;\n\t                    style.backColor = '#F6F6F6';\n\t                    break;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n\t            var style = {};\n\t            switch (theme) {\n\t                case 'fabric':\n\t                    style.fontColor = '#333333';\n\t                    style.fontName = 'Segoe UI';\n\t                    style.fontSize = 13;\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                case 'bootstrap':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontSize = 14;\n\t                    style.borders = { color: '#DDDDDD' };\n\t                    break;\n\t                default:\n\t                    style.fontSize = 13;\n\t                    style.borders = { color: '#E0E0E0' };\n\t                    break;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.processExcelHeader = function (header) {\n\t            if (header.rows !== undefined && (this.expType === 'newsheet' || this.rowLength === 1)) {\n\t                var noRows = void 0;\n\t                if (header.headerRows === undefined) {\n\t                    this.rowLength = header.rows.length;\n\t                }\n\t                else {\n\t                    this.rowLength = header.headerRows;\n\t                }\n\t                if (this.rowLength < header.rows.length) {\n\t                    noRows = this.rowLength;\n\t                }\n\t                else {\n\t                    noRows = header.rows.length;\n\t                }\n\t                this.rowLength++;\n\t                for (var row = 0; row < noRows; row++) {\n\t                    var json = header.rows[row];\n\t                    if (!(json.index !== null && json.index !== undefined)) {\n\t                        json.index = (row + 1);\n\t                    }\n\t                    this.updatedCellIndex(json);\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.updatedCellIndex = function (json) {\n\t            var cellsLength = json.cells.length;\n\t            for (var cellId = 0; cellId < cellsLength; cellId++) {\n\t                var jsonCell = json.cells[cellId];\n\t                if (!(jsonCell.index !== null && jsonCell.index !== undefined)) {\n\t                    jsonCell.index = (cellId + 1);\n\t                }\n\t            }\n\t            this.rows.push(json);\n\t        };\n\t        ExcelExport.prototype.processExcelFooter = function (footer) {\n\t            if (footer.rows !== undefined) {\n\t                var noRows = void 0;\n\t                if (footer.footerRows === undefined) {\n\t                    this.rowLength += footer.rows.length;\n\t                }\n\t                else {\n\t                    if (footer.footerRows > footer.rows.length) {\n\t                        this.rowLength += (footer.footerRows - footer.rows.length);\n\t                        noRows = footer.rows.length;\n\t                    }\n\t                    else {\n\t                        noRows = footer.footerRows;\n\t                    }\n\t                }\n\t                for (var row = 0; row < noRows; row++) {\n\t                    var json = footer.rows[row];\n\t                    if (json.index === null || json.index === undefined) {\n\t                        json.index = this.rowLength++;\n\t                    }\n\t                    else {\n\t                        json.index += this.rowLength;\n\t                    }\n\t                    this.updatedCellIndex(json);\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n\t            for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n\t                var spannedCell = spannedCells_1[_i];\n\t                if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n\t                    columnIndex = columnIndex + 1;\n\t                    return { contains: true, index: columnIndex };\n\t                }\n\t            }\n\t            return { contains: false, index: columnIndex };\n\t        };\n\t        ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n\t            if (col.format !== undefined) {\n\t                if (col.format.skeleton !== undefined) {\n\t                    style.numberFormat = col.format.skeleton;\n\t                    if (col.format.type !== undefined) {\n\t                        style.type = col.format.type;\n\t                    }\n\t                }\n\t                else {\n\t                    style.numberFormat = col.format;\n\t                    style.type = col.type;\n\t                }\n\t            }\n\t            if (col.textAlign !== undefined) {\n\t                style.hAlign = col.textAlign;\n\t            }\n\t            if (Object.keys(style).length > 0) {\n\t                style.name = gObj.element.id + 'column' + index;\n\t                this.styles.push(style);\n\t            }\n\t            if (col.width !== undefined) {\n\t                this.columns.push({ index: index, width: col.width });\n\t            }\n\t        };\n\t        ExcelExport.prototype.destroy = function () {\n\t        };\n\t        return ExcelExport;\n\t    }());\n\t    exports.ExcelExport = ExcelExport;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_85__;\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(15), __webpack_require__(13), __webpack_require__(5), __webpack_require__(14), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, enum_1, ej2_base_1, cell_1, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExportHelper = (function () {\n\t        function ExportHelper(parent) {\n\t            this.hideColumnInclude = false;\n\t            this.parent = parent;\n\t        }\n\t        ExportHelper.prototype.getHeaders = function (column, isHideColumnInclude) {\n\t            if (isHideColumnInclude) {\n\t                this.hideColumnInclude = true;\n\t            }\n\t            else {\n\t                this.hideColumnInclude = false;\n\t            }\n\t            var cols = column;\n\t            this.colDepth = this.measureColumnDepth(cols);\n\t            var rows = [];\n\t            var actualColumns = [];\n\t            for (var i = 0; i < this.colDepth; i++) {\n\t                rows[i] = new row_1.Row({});\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.processColumns(rows);\n\t            rows = this.processHeaderCells(rows);\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                for (var i = 0; i < row.cells.length; i++) {\n\t                    var cell = row.cells[i];\n\t                    if (cell.visible === undefined && cell.cellType !== 9) {\n\t                        row.cells = this.removeCellFromRow(row.cells, i);\n\t                        i = i - 1;\n\t                    }\n\t                    if ((!isHideColumnInclude) && cell.visible !== undefined && (!cell.visible)) {\n\t                        row.cells = this.removeCellFromRow(row.cells, i);\n\t                        i = i - 1;\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0; i < cols.length; i++) {\n\t                this.generateActualColumns(cols[i], actualColumns);\n\t            }\n\t            return { rows: rows, columns: actualColumns };\n\t        };\n\t        ExportHelper.prototype.generateActualColumns = function (column, actualColumns) {\n\t            if (!column.columns) {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    actualColumns.push(column);\n\t                }\n\t            }\n\t            else {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    var colSpan = this.getCellCount(column, 0);\n\t                    if (colSpan !== 0) {\n\t                        for (var i = 0; i < column.columns.length; i++) {\n\t                            this.generateActualColumns(column.columns[i], actualColumns);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ExportHelper.prototype.removeCellFromRow = function (cells, cellIndex) {\n\t            var resultCells = [];\n\t            for (var i = 0; i < cellIndex; i++) {\n\t                resultCells.push(cells[i]);\n\t            }\n\t            for (var i = (cellIndex + 1); i < cells.length; i++) {\n\t                resultCells.push(cells[i]);\n\t            }\n\t            return resultCells;\n\t        };\n\t        ExportHelper.prototype.processHeaderCells = function (rows) {\n\t            var columns = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n\t            for (var i = 0; i < columns.length; i++) {\n\t                rows = this.appendGridCells(columns[i], rows, 0, i === 0, false, i === (columns.length - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        ExportHelper.prototype.appendGridCells = function (cols, gridRows, index, isFirstObj, isFirstColumn, isLastColumn) {\n\t            var lastCol = isLastColumn ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                gridRows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstColumn ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCount(cols, 0);\n\t                if (colSpan) {\n\t                    gridRows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                var isFirstCell = void 0;\n\t                var isIgnoreFirstCell = void 0;\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    isFirstCell = false;\n\t                    if (cols.columns[i].visible && !isIgnoreFirstCell) {\n\t                        isFirstCell = true;\n\t                        isIgnoreFirstCell = true;\n\t                    }\n\t                    gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastColumn);\n\t                }\n\t            }\n\t            return gridRows;\n\t        };\n\t        ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, className, rowIndex, columnIndex) {\n\t            var option = {\n\t                'visible': gridColumn.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(gridColumn.headerTemplate),\n\t                'rowID': '',\n\t                'column': gridColumn,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': columnIndex\n\t            };\n\t            if (!option.rowSpan || option.rowSpan < 2) {\n\t                delete option.rowSpan;\n\t            }\n\t            return new cell_1.Cell(option);\n\t        };\n\t        ExportHelper.prototype.processColumns = function (rows) {\n\t            var gridObj = this.parent;\n\t            var columnIndexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gridObj.allowGrouping) {\n\t                    for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n\t                        if (this.parent.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gridObj.detailTemplate || gridObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        ExportHelper.prototype.getCellCount = function (column, count) {\n\t            if (column.columns) {\n\t                for (var i = 0; i < column.columns.length; i++) {\n\t                    count = this.getCellCount(column.columns[i], count);\n\t                }\n\t            }\n\t            else {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    count++;\n\t                }\n\t            }\n\t            return count;\n\t        };\n\t        ExportHelper.prototype.measureColumnDepth = function (column) {\n\t            var max = 0;\n\t            for (var i = 0; i < column.length; i++) {\n\t                var depth = this.checkDepth(column[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        ExportHelper.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0; i < col.columns.length; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        ;\n\t        return ExportHelper;\n\t    }());\n\t    exports.ExportHelper = ExportHelper;\n\t    var ExportValueFormatter = (function () {\n\t        function ExportValueFormatter() {\n\t            this.valueFormatter = new value_formatter_1.ValueFormatter();\n\t            this.internationalization = new ej2_base_1.Internationalization();\n\t        }\n\t        ExportValueFormatter.prototype.formatCellValue = function (args) {\n\t            if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n\t                return this.internationalization.getNumberFormat({ format: args.column.format })(args.value);\n\t            }\n\t            else if (args.column.type === 'boolean') {\n\t                return args.value ? 'true' : 'false';\n\t            }\n\t            else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n\t                if (typeof args.column.format === 'string') {\n\t                    var format = void 0;\n\t                    if (args.column.type === 'date') {\n\t                        format = { type: 'date', skeleton: args.column.format };\n\t                    }\n\t                    else if (args.column.type === 'time') {\n\t                        format = { type: 'time', skeleton: args.column.format };\n\t                    }\n\t                    else {\n\t                        format = { type: 'dateTime', skeleton: args.column.format };\n\t                    }\n\t                    return this.valueFormatter.getFormatFunction(format)(args.value);\n\t                }\n\t                else {\n\t                    if (args.column.format instanceof Object && args.column.format.type === undefined) {\n\t                        return (args.value.toString());\n\t                    }\n\t                    else {\n\t                        var customFormat = void 0;\n\t                        if (args.column.type === 'date') {\n\t                            customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        else if (args.column.type === 'time') {\n\t                            customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        else {\n\t                            customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                if (args.column.type === undefined || args.column.type === null) {\n\t                    return '';\n\t                }\n\t                else {\n\t                    return (args.value).toString();\n\t                }\n\t            }\n\t        };\n\t        return ExportValueFormatter;\n\t    }());\n\t    exports.ExportValueFormatter = ExportValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9), __webpack_require__(88), __webpack_require__(88), __webpack_require__(88), __webpack_require__(88), __webpack_require__(88), __webpack_require__(88), __webpack_require__(86), __webpack_require__(16), __webpack_require__(20), __webpack_require__(5), __webpack_require__(13), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, ej2_pdf_1, ej2_pdf_2, ej2_pdf_3, ej2_pdf_4, ej2_pdf_5, ej2_pdf_6, export_helper_1, data_1, summary_model_generator_1, ej2_base_1, enum_1, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PdfExport = (function () {\n\t        function PdfExport(parent) {\n\t            this.hideColumnInclude = false;\n\t            this.currentViewData = false;\n\t            this.customDataSource = false;\n\t            this.gridTheme = 'material';\n\t            this.isGrouping = false;\n\t            this.parent = parent;\n\t            this.data = new data_1.Data(parent);\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t        }\n\t        PdfExport.prototype.getModuleName = function () {\n\t            return 'PdfExport';\n\t        };\n\t        PdfExport.prototype.init = function (parent) {\n\t            this.exportValueFormatter = new export_helper_1.ExportValueFormatter();\n\t            this.pdfDocument = undefined;\n\t            this.hideColumnInclude = false;\n\t            this.currentViewData = false;\n\t            this.parent = parent;\n\t            var gObj = parent;\n\t            this.gridTheme = 'material';\n\t            this.isGrouping = false;\n\t            this.isExporting = true;\n\t            gObj.trigger(events.beforePdfExport);\n\t        };\n\t        PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc) {\n\t            var _this = this;\n\t            this.data = new data_1.Data(this.parent);\n\t            if (pdfExportProperties !== undefined && pdfExportProperties.dataSource !== undefined && pdfExportProperties.dataSource instanceof ej2_data_1.DataManager) {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    new ej2_data_1.DataManager({ url: pdfExportProperties.dataSource.dataSource.url, adaptor: pdfExportProperties.dataSource.adaptor }).executeQuery(new ej2_data_1.Query()).then(function (returnType) {\n\t                        _this.init(parent);\n\t                        if (pdfDoc !== undefined) {\n\t                            _this.pdfDocument = pdfDoc;\n\t                        }\n\t                        else {\n\t                            _this.pdfDocument = new ej2_pdf_1.PdfDocument();\n\t                        }\n\t                        _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n\t                        _this.isExporting = false;\n\t                        parent.trigger(events.pdfExportComplete);\n\t                        resolve(_this.pdfDocument);\n\t                    });\n\t                });\n\t            }\n\t            else {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = _this.data.getData({}, _this.data.generateQuery(true).requiresCount());\n\t                    dataManager.then(function (returnType) {\n\t                        _this.init(parent);\n\t                        if (pdfDoc !== undefined) {\n\t                            _this.pdfDocument = pdfDoc;\n\t                        }\n\t                        else {\n\t                            _this.pdfDocument = new ej2_pdf_1.PdfDocument();\n\t                        }\n\t                        _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n\t                        _this.isExporting = false;\n\t                        parent.trigger(events.pdfExportComplete);\n\t                        resolve(_this.pdfDocument);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t        PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n\t            var columns = gObj.columns;\n\t            var dataSource = returnType.result;\n\t            var section = this.pdfDocument.sections.add();\n\t            var result = this.processExportProperties(pdfExportProperties, dataSource, section);\n\t            dataSource = result.dataSource;\n\t            if (dataSource.GroupGuid !== undefined) {\n\t                this.isGrouping = true;\n\t            }\n\t            section = result.section;\n\t            var pdfPage = section.pages.add();\n\t            var pdfGrid = new ej2_pdf_1.PdfGrid();\n\t            var headerThemeStyle = this.getHeaderThemeStyle();\n\t            var border = headerThemeStyle.border;\n\t            var headerFont = headerThemeStyle.font;\n\t            var headerBrush = headerThemeStyle.brush;\n\t            var returnValue = (new export_helper_1.ExportHelper(this.parent)).getHeaders(columns, this.hideColumnInclude);\n\t            var rows = returnValue.rows;\n\t            var gridColumns = returnValue.columns;\n\t            pdfGrid = this.processGridHeaders(dataSource.childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush);\n\t            this.setColumnProperties(gridColumns, pdfGrid);\n\t            var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n\t            if (dataSource !== undefined && dataSource !== null && dataSource.length > 0) {\n\t                if (this.isGrouping) {\n\t                    this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, returnType);\n\t                }\n\t                else {\n\t                    this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid);\n\t                }\n\t                if (returnType.aggregates !== undefined) {\n\t                    var summaryModel = new summary_model_generator_1.SummaryModelGenerator(gObj);\n\t                    var sRows = void 0;\n\t                    if (this.customDataSource) {\n\t                        sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n\t                    }\n\t                    else if (this.currentViewData) {\n\t                        sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n\t                    }\n\t                    else if (this.isGrouping) {\n\t                        sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n\t                    }\n\t                    else {\n\t                        sRows = summaryModel.generateRows(returnType.result, returnType.aggregates);\n\t                    }\n\t                    this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n\t                }\n\t            }\n\t            else {\n\t                var row = pdfGrid.rows.addRow();\n\t                row.style.setBorder(border);\n\t            }\n\t            pdfGrid.draw(pdfPage, 20, 20);\n\t            if (!isMultipleExport) {\n\t                this.pdfDocument.save('Export.pdf');\n\t            }\n\t        };\n\t        PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n\t            switch (this.gridTheme) {\n\t                case 'bootstrap':\n\t                    return { font: new ej2_pdf_2.PdfStandardFont(ej2_pdf_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(51, 51, 51)), backgroundBrush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(255, 255, 255)) };\n\t                case 'fabric':\n\t                    return { font: new ej2_pdf_2.PdfStandardFont(ej2_pdf_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(51, 51, 51)), backgroundBrush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(246, 246, 246)) };\n\t                default:\n\t                    return { font: new ej2_pdf_2.PdfStandardFont(ej2_pdf_2.PdfFontFamily.Helvetica, 9.75), brush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(0, 0, 0)), backgroundBrush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(246, 246, 246)) };\n\t            }\n\t        };\n\t        PdfExport.prototype.getHeaderThemeStyle = function () {\n\t            var border = new ej2_pdf_1.PdfBorders();\n\t            switch (this.gridTheme) {\n\t                case 'bootstrap':\n\t                    border.all = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(221, 221, 221));\n\t                    return { border: border, font: new ej2_pdf_2.PdfStandardFont(ej2_pdf_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(51, 51, 51)) };\n\t                case 'fabric':\n\t                    border.all = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(224, 224, 224));\n\t                    return { border: border, font: new ej2_pdf_2.PdfStandardFont(ej2_pdf_2.PdfFontFamily.Helvetica, 9), brush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(0, 0, 0.54)) };\n\t                default:\n\t                    border.all = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(234, 234, 234));\n\t                    return { border: border, font: new ej2_pdf_2.PdfStandardFont(ej2_pdf_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(102, 102, 102)) };\n\t            }\n\t        };\n\t        PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType) {\n\t            var groupIndex = level;\n\t            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n\t                var dataSourceItems = dataSource_1[_i];\n\t                var row = pdfGrid.rows.addRow();\n\t                var args = {\n\t                    value: dataSourceItems.key,\n\t                    column: gObj.getColumnByField(dataSourceItems.field),\n\t                    style: undefined\n\t                };\n\t                var value = dataSourceItems.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n\t                row.cells.getCell(groupIndex).value = value;\n\t                row.style.setBorder(border);\n\t                row.style.setFont(font);\n\t                row.style.setTextBrush(brush);\n\t                row.style.setBackgroundBrush(backgroundBrush);\n\t                var sRows = void 0;\n\t                var captionSummaryModel = new summary_model_generator_1.CaptionSummaryModelGenerator(gObj);\n\t                if (dataSourceItems.items.records !== undefined) {\n\t                    sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n\t                }\n\t                else {\n\t                    sRows = captionSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n\t                }\n\t                if (sRows !== undefined && sRows.length === 0) {\n\t                    row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n\t                }\n\t                if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\t                    this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType);\n\t                    var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                    sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n\t                }\n\t                else {\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\t                    this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1));\n\t                    var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                    sRows = groupSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush) {\n\t            var columnCount = gridColumns.length;\n\t            if (this.isGrouping) {\n\t                columnCount += (childLevels + 1);\n\t            }\n\t            pdfGrid.columns.add(columnCount);\n\t            if (this.isGrouping) {\n\t                for (var i = 0; i < (childLevels + 1); i++) {\n\t                    pdfGrid.columns.getColumn(i).width = 20;\n\t                }\n\t            }\n\t            pdfGrid.headers.add(rows.length);\n\t            for (var i = 0; i < rows.length; i++) {\n\t                var gridHeader = pdfGrid.headers.getHeader(i);\n\t                gridHeader.style.setBorder(border);\n\t                gridHeader.style.setFont(headerFont);\n\t                gridHeader.style.setTextBrush(headerBrush);\n\t                var cellIndex = this.isGrouping ? (childLevels + 1) : 0;\n\t                if (rows[i].cells.length === 0) {\n\t                    for (var j = 0; j < gridHeader.cells.count; j++) {\n\t                        var cell = gridHeader.cells.getCell(j);\n\t                        cell.value = '';\n\t                    }\n\t                }\n\t                else {\n\t                    for (var j = 0; j < cellIndex; j++) {\n\t                        var cell = gridHeader.cells.getCell(j);\n\t                        cell.value = '';\n\t                    }\n\t                    for (var j = 0; j < rows[i].cells.length; j++) {\n\t                        var cell = gridHeader.cells.getCell(cellIndex);\n\t                        if (cell.value !== null) {\n\t                            cell.value = rows[i].cells[j].column.headerText;\n\t                            if (rows[i].cells[j].column.headerTextAlign !== undefined) {\n\t                                cell.style.stringFormat = this.getHorizontalAlignment(rows[i].cells[j].column.headerTextAlign);\n\t                            }\n\t                            if (rows[i].cells[j].rowSpan !== undefined) {\n\t                                cell.rowSpan = rows[i].cells[j].rowSpan;\n\t                                cell.style.stringFormat = this.getVerticalAlignment('bottom', cell.style.stringFormat, rows[i].cells[j].column.textAlign);\n\t                                for (var k = 1; k < rows[i].cells[j].rowSpan; k++) {\n\t                                    pdfGrid.headers.getHeader(i + k).cells.getCell(cellIndex).value = null;\n\t                                }\n\t                            }\n\t                            if (rows[i].cells[j].colSpan !== undefined) {\n\t                                cell.columnSpan = rows[i].cells[j].colSpan;\n\t                            }\n\t                            cellIndex += cell.columnSpan;\n\t                        }\n\t                        else {\n\t                            cell.value = '';\n\t                            cellIndex += cell.columnSpan;\n\t                            j = j - 1;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (pdfGrid.columns.count >= 6) {\n\t                pdfGrid.style.allowHorizontalOverflow = true;\n\t            }\n\t            return pdfGrid;\n\t        };\n\t        PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource, section) {\n\t            if (pdfExportProperties !== undefined) {\n\t                if (pdfExportProperties.theme !== undefined) {\n\t                    this.gridTheme = pdfExportProperties.theme;\n\t                }\n\t                if (pdfExportProperties.pageOrientation !== undefined || pdfExportProperties.pageSize !== undefined) {\n\t                    var pdfPageSettings = new ej2_pdf_6.PdfPageSettings();\n\t                    pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ? ej2_pdf_6.PdfPageOrientation.Landscape : ej2_pdf_6.PdfPageOrientation.Portrait;\n\t                    pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n\t                    section.setPageSettings(pdfPageSettings);\n\t                }\n\t                var clientSize = this.pdfDocument.pageSettings.size;\n\t                if (pdfExportProperties.header !== undefined) {\n\t                    var header = pdfExportProperties.header;\n\t                    var position = new ej2_pdf_5.PointF(0, header.fromTop);\n\t                    var size = new ej2_pdf_6.SizeF((clientSize.width - 80), (header.height * 0.75));\n\t                    var bounds = new ej2_pdf_4.RectangleF(position, size);\n\t                    this.pdfDocument.template.top = this.drawPageTemplate(new ej2_pdf_4.PdfPageTemplateElement(bounds), header);\n\t                }\n\t                if (pdfExportProperties.footer !== undefined) {\n\t                    var footer = pdfExportProperties.footer;\n\t                    var position = new ej2_pdf_5.PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n\t                    var size = new ej2_pdf_6.SizeF((clientSize.width - 80), (footer.height * 0.75));\n\t                    var bounds = new ej2_pdf_4.RectangleF(position, size);\n\t                    this.pdfDocument.template.bottom = this.drawPageTemplate(new ej2_pdf_4.PdfPageTemplateElement(bounds), footer);\n\t                }\n\t                if (pdfExportProperties.includeHiddenColumn !== undefined && !this.isGrouping) {\n\t                    this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n\t                }\n\t                if (pdfExportProperties.dataSource !== undefined) {\n\t                    if (!(pdfExportProperties.dataSource instanceof ej2_data_1.DataManager)) {\n\t                        dataSource = pdfExportProperties.dataSource;\n\t                    }\n\t                    this.customDataSource = true;\n\t                    this.currentViewData = false;\n\t                }\n\t                else if (pdfExportProperties.exportType !== undefined) {\n\t                    if (pdfExportProperties.exportType === 'currentview') {\n\t                        dataSource = this.parent.getCurrentViewRecords();\n\t                        this.currentViewData = true;\n\t                        this.customDataSource = false;\n\t                    }\n\t                    else {\n\t                        this.currentViewData = false;\n\t                        this.customDataSource = false;\n\t                    }\n\t                }\n\t                else {\n\t                    this.currentViewData = false;\n\t                    this.customDataSource = false;\n\t                }\n\t            }\n\t            else {\n\t                this.currentViewData = false;\n\t                this.customDataSource = false;\n\t            }\n\t            return { dataSource: dataSource, section: section };\n\t        };\n\t        PdfExport.prototype.drawPageTemplate = function (template, element) {\n\t            for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n\t                var content = _a[_i];\n\t                this.processContentValidation(content);\n\t                switch (content.type) {\n\t                    case 'text':\n\t                        if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n\t                            throw new Error('please enter the valid input value in text content...');\n\t                        }\n\t                        this.drawText(template, content);\n\t                        break;\n\t                    case 'pageNumber':\n\t                        this.drawPageNumber(template, content);\n\t                        break;\n\t                    case 'image':\n\t                        if (content.src === undefined || content.src === null || content.src === '') {\n\t                            throw new Error('please enter the valid base64 string in image content...');\n\t                        }\n\t                        this.drawImage(template, content);\n\t                        break;\n\t                    case 'line':\n\t                        this.drawLine(template, content);\n\t                        break;\n\t                    default:\n\t                        throw new Error('Please set valid content type...');\n\t                }\n\t            }\n\t            return template;\n\t        };\n\t        PdfExport.prototype.processContentValidation = function (content) {\n\t            if (content.type === '' || content.type === undefined || content.type === null) {\n\t                throw new Error('please set valid content type...');\n\t            }\n\t            else {\n\t                if (content.type === 'line') {\n\t                    if (content.points === '' || content.points === undefined || content.points === null) {\n\t                        throw new Error('please enter valid points in ' + content.type + ' content...');\n\t                    }\n\t                    else {\n\t                        if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n\t                            throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n\t                            throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n\t                            throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n\t                            throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (content.position === '' || content.position === undefined || content.position === null) {\n\t                        throw new Error('please enter valid position in ' + content.type + ' content...');\n\t                    }\n\t                    else {\n\t                        if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n\t                            throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n\t                        }\n\t                        if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n\t                            throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.drawText = function (pageTemplate, content) {\n\t            var font = this.getFont(content);\n\t            var brush = this.getBrushFromContent(content);\n\t            var pen = null;\n\t            if (content.style.textPenColor !== undefined) {\n\t                var penColor = this.hexToRgb(content.style.textPenColor);\n\t                pen = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(penColor.r, penColor.g, penColor.b));\n\t            }\n\t            if (brush == null && pen == null) {\n\t                brush = new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(0, 0, 0));\n\t            }\n\t            var value = content.value.toString();\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var format;\n\t            var result = this.setContentFormat(content, format);\n\t            if (result !== null && result.format !== undefined && result.size !== undefined) {\n\t                pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n\t            }\n\t            else {\n\t                pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n\t            }\n\t        };\n\t        PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n\t            var font = this.getFont(content);\n\t            var brush = null;\n\t            if (content.style.textBrushColor !== undefined) {\n\t                var brushColor = this.hexToRgb(content.style.textBrushColor);\n\t                brush = new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(brushColor.r, brushColor.g, brushColor.b));\n\t            }\n\t            else {\n\t                brush = new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(0, 0, 0));\n\t            }\n\t            var pageNumber = new ej2_pdf_5.PdfPageNumberField(font, brush);\n\t            pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n\t            var compositeField;\n\t            var format;\n\t            if (content.format !== undefined) {\n\t                if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n\t                    var pageCount = new ej2_pdf_6.PdfPageCountField(font);\n\t                    if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n\t                        format = content.format.replace('$current', '0');\n\t                        format = format.replace('$total', '1');\n\t                    }\n\t                    else {\n\t                        format = content.format.replace('$current', '1');\n\t                        format = format.replace('$total', '0');\n\t                    }\n\t                    compositeField = new ej2_pdf_5.PdfCompositeField(font, brush, format, pageNumber, pageCount);\n\t                }\n\t                else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n\t                    format = content.format.replace('$current', '0');\n\t                    compositeField = new ej2_pdf_5.PdfCompositeField(font, brush, format, pageNumber);\n\t                }\n\t                else {\n\t                    var pageCount = new ej2_pdf_6.PdfPageCountField(font);\n\t                    format = content.format.replace('$total', '0');\n\t                    compositeField = new ej2_pdf_5.PdfCompositeField(font, brush, format, pageCount);\n\t                }\n\t            }\n\t            else {\n\t                format = '{0}';\n\t                compositeField = new ej2_pdf_5.PdfCompositeField(font, brush, format, pageNumber);\n\t            }\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var result = this.setContentFormat(content, compositeField.stringFormat);\n\t            if (result !== null && result.format !== undefined && result.size !== undefined) {\n\t                compositeField.stringFormat = result.format;\n\t                compositeField.bounds = new ej2_pdf_4.RectangleF(x, y, result.size.width, result.size.height);\n\t            }\n\t            compositeField.draw(documentHeader.graphics, x, y);\n\t        };\n\t        PdfExport.prototype.drawImage = function (documentHeader, content) {\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var width = (content.size !== undefined) ? (content.size.width * 0.75) : undefined;\n\t            var height = (content.size !== undefined) ? (content.size.height * 0.75) : undefined;\n\t            var image = new ej2_pdf_2.PdfBitmap(content.src);\n\t            if (width !== undefined) {\n\t                documentHeader.graphics.drawImage(image, x, y, width, height);\n\t            }\n\t            else {\n\t                documentHeader.graphics.drawImage(image, x, y);\n\t            }\n\t        };\n\t        PdfExport.prototype.drawLine = function (documentHeader, content) {\n\t            var x1 = content.points.x1 * 0.75;\n\t            var y1 = content.points.y1 * 0.75;\n\t            var x2 = content.points.x2 * 0.75;\n\t            var y2 = content.points.y2 * 0.75;\n\t            var pen = this.getPenFromContent(content);\n\t            if (content.style !== undefined && content.style !== null) {\n\t                if (content.style.penSize !== undefined && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n\t                    pen.width = content.style.penSize * 0.75;\n\t                }\n\t                pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n\t            }\n\t            documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n\t        };\n\t        PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex) {\n\t            for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n\t                var row = sRows_1[_i];\n\t                var startIndex = 0;\n\t                var leastCaptionSummaryIndex = -1;\n\t                var index = 0;\n\t                var isEmpty = true;\n\t                var value = [];\n\t                for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                    var cell = row.cells[index];\n\t                    if (!this.hideColumnInclude) {\n\t                        while (cell.visible === undefined) {\n\t                            if (captionRow !== undefined) {\n\t                                if (captionRow.cells.getCell(i).value !== undefined) {\n\t                                    value.push('');\n\t                                    value.push(captionRow.cells.getCell(i).value);\n\t                                    isEmpty = false;\n\t                                    i += 1;\n\t                                }\n\t                                else {\n\t                                    value.push('');\n\t                                }\n\t                            }\n\t                            else {\n\t                                value.push('');\n\t                            }\n\t                            i += 1;\n\t                            index = index + 1;\n\t                            cell = row.cells[index];\n\t                        }\n\t                        while (cell.visible !== undefined && !cell.visible) {\n\t                            index = index + 1;\n\t                            cell = row.cells[index];\n\t                        }\n\t                    }\n\t                    if (cell.isDataCell) {\n\t                        var templateFn = {};\n\t                        if (cell.column.footerTemplate !== undefined || cell.column.groupCaptionTemplate !== undefined || cell.column.groupFooterTemplate !== undefined) {\n\t                            var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell.column);\n\t                            templateFn = result.templateFunction;\n\t                            leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n\t                            var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                            value.push(txt[0].wholeText);\n\t                            isEmpty = false;\n\t                        }\n\t                        else {\n\t                            var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n\t                            if (result !== undefined) {\n\t                                value.push(result);\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        value.push('');\n\t                    }\n\t                    if (isEmpty && value[i] !== '' && value[i] !== undefined && value[i] !== null) {\n\t                        isEmpty = false;\n\t                    }\n\t                    index += 1;\n\t                }\n\t                if (!isEmpty) {\n\t                    if (!isCaption) {\n\t                        var gridRow = pdfGrid.rows.addRow();\n\t                        gridRow.style.setBorder(border);\n\t                        gridRow.style.setFont(font);\n\t                        gridRow.style.setTextBrush(brush);\n\t                        gridRow.style.setBackgroundBrush(backgroundBrush);\n\t                        for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                            gridRow.cells.getCell(i).value = value[i].toString();\n\t                        }\n\t                    }\n\t                    else {\n\t                        for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                            captionRow.cells.getCell(i).value = value[i].toString();\n\t                            if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1) {\n\t                                captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n\t                            }\n\t                            else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n\t                                captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, column) {\n\t            if (column.footerTemplate !== undefined) {\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(column.footerTemplate);\n\t            }\n\t            else if (column.groupCaptionTemplate !== undefined) {\n\t                if (leastCaptionSummaryIndex === -1) {\n\t                    leastCaptionSummaryIndex = index;\n\t                }\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(column.groupCaptionTemplate);\n\t            }\n\t            else {\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(column.groupFooterTemplate);\n\t            }\n\t            return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n\t        };\n\t        PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n\t            if (data.sum !== undefined) {\n\t                return data.sum;\n\t            }\n\t            else if (data.average !== undefined) {\n\t                return data.average;\n\t            }\n\t            else if (data.max !== undefined) {\n\t                return data.max;\n\t            }\n\t            else if (data.min !== undefined) {\n\t                return data.min;\n\t            }\n\t            else if (data.count !== undefined) {\n\t                return data.count;\n\t            }\n\t            else if (data.truecount !== undefined) {\n\t                return data.truecount;\n\t            }\n\t            else if (data.falsecount !== undefined) {\n\t                return data.falsecount;\n\t            }\n\t            else if (data.custom !== undefined) {\n\t                return data.custom;\n\t            }\n\t        };\n\t        PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid) {\n\t            var startIndex = this.isGrouping ? (pdfGrid.columns.count - gridColumns.length) : 0;\n\t            for (var i = 0; i < gridColumns.length; i++) {\n\t                if (gridColumns[i].textAlign !== undefined) {\n\t                    pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n\t                }\n\t                if (pdfGrid.style.allowHorizontalOverflow && gridColumns[i].width !== undefined) {\n\t                    pdfGrid.columns.getColumn(i + startIndex).width = (gridColumns[i].width * 0.75);\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n\t            switch (this.gridTheme) {\n\t                case 'bootstrap':\n\t                    row.style.setTextBrush(new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(51, 51, 51)));\n\t                    break;\n\t                case 'fabric':\n\t                    row.style.setTextBrush(new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(51, 51, 51)));\n\t                    break;\n\t                default:\n\t                    row.style.setTextBrush(new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(0, 0, 0)));\n\t            }\n\t            row.style.setBorder(border);\n\t            return row;\n\t        };\n\t        PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, groupIndex) {\n\t            var startIndex = this.isGrouping ? groupIndex : 0;\n\t            for (var _i = 0, _a = dataSource; _i < _a.length; _i++) {\n\t                var items = _a[_i];\n\t                var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n\t                for (var j = 0; j < columns.length; j++) {\n\t                    var value = items[columns[j].field];\n\t                    var args = {\n\t                        value: value,\n\t                        column: columns[j],\n\t                        style: undefined\n\t                    };\n\t                    gObj.trigger(events.pdfQueryCellInfo, args);\n\t                    var cell = gridRow.cells.getCell(j + startIndex);\n\t                    cell.value = this.exportValueFormatter.formatCellValue(args);\n\t                    if (args.style !== undefined) {\n\t                        this.processCellStyle(cell, args);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.processCellStyle = function (cell, args) {\n\t            if (args.style.backgroundColor !== undefined) {\n\t                var backColor = this.hexToRgb(args.style.backgroundColor);\n\t                cell.style.backgroundBrush = new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(backColor.r, backColor.g, backColor.b));\n\t            }\n\t            if (args.style.textAlignment !== undefined) {\n\t                cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n\t            }\n\t            if (args.style.verticalAlignment !== undefined) {\n\t                cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n\t            }\n\t            if (args.style.textBrushColor !== undefined) {\n\t                var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n\t                cell.style.textBrush = new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n\t            }\n\t            if (args.style.textPenColor !== undefined) {\n\t                cell.style.textPen = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(args.style.textPenColor.r, args.style.textPenColor.g, args.style.textPenColor.b));\n\t            }\n\t            if (args.style.fontFamily !== undefined || args.style.fontSize !== undefined || args.style.bold !== undefined || args.style.italic !== undefined || args.style.underline !== undefined || args.style.strikeout !== undefined) {\n\t                cell.style.font = this.getFont(args);\n\t            }\n\t            if (args.style.border !== undefined) {\n\t                var border = new ej2_pdf_1.PdfBorders();\n\t                var borderWidth = args.style.border.width;\n\t                var width = (borderWidth !== undefined && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n\t                var color = new ej2_pdf_3.PdfColor(196, 196, 196);\n\t                if (args.style.border.color !== undefined) {\n\t                    var borderColor = this.hexToRgb(args.style.border.color);\n\t                    color = new ej2_pdf_3.PdfColor(borderColor.r, borderColor.g, borderColor.b);\n\t                }\n\t                var pen = new ej2_pdf_1.PdfPen(color, width);\n\t                if (args.style.border.dashStyle !== undefined) {\n\t                    pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n\t                }\n\t                border.all = pen;\n\t                cell.style.borders = border;\n\t            }\n\t        };\n\t        PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n\t            if (format === undefined) {\n\t                format = new ej2_pdf_3.PdfStringFormat();\n\t            }\n\t            switch (textAlign) {\n\t                case 'right':\n\t                    format.alignment = ej2_pdf_3.PdfTextAlignment.Right;\n\t                    break;\n\t                case 'center':\n\t                    format.alignment = ej2_pdf_3.PdfTextAlignment.Center;\n\t                    break;\n\t                case 'justify':\n\t                    format.alignment = ej2_pdf_3.PdfTextAlignment.Justify;\n\t                    break;\n\t                case 'left':\n\t                    format.alignment = ej2_pdf_3.PdfTextAlignment.Left;\n\t                    break;\n\t            }\n\t            return format;\n\t        };\n\t        PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n\t            if (format === undefined) {\n\t                format = new ej2_pdf_3.PdfStringFormat();\n\t                format = this.getHorizontalAlignment(textAlign, format);\n\t            }\n\t            switch (verticalAlign) {\n\t                case 'bottom':\n\t                    format.lineAlignment = ej2_pdf_4.PdfVerticalAlignment.Bottom;\n\t                    break;\n\t                case 'middle':\n\t                    format.lineAlignment = ej2_pdf_4.PdfVerticalAlignment.Middle;\n\t                    break;\n\t                case 'top':\n\t                    format.lineAlignment = ej2_pdf_4.PdfVerticalAlignment.Top;\n\t                    break;\n\t            }\n\t            return format;\n\t        };\n\t        PdfExport.prototype.getFontFamily = function (fontFamily) {\n\t            switch (fontFamily) {\n\t                case 'TimesRoman':\n\t                    return 2;\n\t                case 'Courier':\n\t                    return 1;\n\t                case 'Symbol':\n\t                    return 3;\n\t                case 'ZapfDingbats':\n\t                    return 4;\n\t                default:\n\t                    return 0;\n\t            }\n\t        };\n\t        PdfExport.prototype.getFont = function (content) {\n\t            var fontSize = (content.style.fontSize !== undefined) ? (content.style.fontSize * 0.75) : 9.75;\n\t            var fontFamily = (content.style.fontFamily !== undefined) ? (this.getFontFamily(content.style.fontFamily)) : ej2_pdf_2.PdfFontFamily.Helvetica;\n\t            var fontStyle = ej2_pdf_2.PdfFontStyle.Regular;\n\t            if (content.style.bold !== undefined && content.style.bold) {\n\t                fontStyle |= ej2_pdf_2.PdfFontStyle.Bold;\n\t            }\n\t            if (content.style.italic !== undefined && content.style.italic) {\n\t                fontStyle |= ej2_pdf_2.PdfFontStyle.Italic;\n\t            }\n\t            if (content.style.underline !== undefined && content.style.underline) {\n\t                fontStyle |= ej2_pdf_2.PdfFontStyle.Underline;\n\t            }\n\t            if (content.style.strikeout !== undefined && content.style.strikeout) {\n\t                fontStyle |= ej2_pdf_2.PdfFontStyle.Strikeout;\n\t            }\n\t            return new ej2_pdf_2.PdfStandardFont(fontFamily, fontSize, fontStyle);\n\t        };\n\t        PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n\t            switch (pageNumberType) {\n\t                case 'LowerLatin':\n\t                    return 2;\n\t                case 'LowerRoman':\n\t                    return 3;\n\t                case 'UpperLatin':\n\t                    return 4;\n\t                case 'UpperRoman':\n\t                    return 5;\n\t                default:\n\t                    return 1;\n\t            }\n\t        };\n\t        PdfExport.prototype.setContentFormat = function (content, format) {\n\t            if (content.size !== undefined) {\n\t                var width = content.size.width * 0.75;\n\t                var height = content.size.height * 0.75;\n\t                format = new ej2_pdf_3.PdfStringFormat(ej2_pdf_3.PdfTextAlignment.Left, ej2_pdf_4.PdfVerticalAlignment.Middle);\n\t                if (content.style.hAlign !== undefined) {\n\t                    switch (content.style.hAlign) {\n\t                        case 'right':\n\t                            format.alignment = ej2_pdf_3.PdfTextAlignment.Right;\n\t                            break;\n\t                        case 'center':\n\t                            format.alignment = ej2_pdf_3.PdfTextAlignment.Center;\n\t                            break;\n\t                        case 'justify':\n\t                            format.alignment = ej2_pdf_3.PdfTextAlignment.Justify;\n\t                            break;\n\t                        default:\n\t                            format.alignment = ej2_pdf_3.PdfTextAlignment.Left;\n\t                    }\n\t                }\n\t                if (content.style.vAlign !== undefined) {\n\t                    format = this.getVerticalAlignment(content.style.vAlign, format);\n\t                }\n\t                return { format: format, size: new ej2_pdf_6.SizeF(width, height) };\n\t            }\n\t            return null;\n\t        };\n\t        PdfExport.prototype.getPageSize = function (pageSize) {\n\t            switch (pageSize) {\n\t                case 'Letter':\n\t                    return new ej2_pdf_6.SizeF(612, 792);\n\t                case 'Note':\n\t                    return new ej2_pdf_6.SizeF(540, 720);\n\t                case 'Legal':\n\t                    return new ej2_pdf_6.SizeF(612, 1008);\n\t                case 'A0':\n\t                    return new ej2_pdf_6.SizeF(2380, 3368);\n\t                case 'A1':\n\t                    return new ej2_pdf_6.SizeF(1684, 2380);\n\t                case 'A2':\n\t                    return new ej2_pdf_6.SizeF(1190, 1684);\n\t                case 'A3':\n\t                    return new ej2_pdf_6.SizeF(842, 1190);\n\t                case 'A5':\n\t                    return new ej2_pdf_6.SizeF(421, 595);\n\t                case 'A6':\n\t                    return new ej2_pdf_6.SizeF(297, 421);\n\t                case 'A7':\n\t                    return new ej2_pdf_6.SizeF(210, 297);\n\t                case 'A8':\n\t                    return new ej2_pdf_6.SizeF(148, 210);\n\t                case 'A9':\n\t                    return new ej2_pdf_6.SizeF(105, 148);\n\t                case 'B0':\n\t                    return new ej2_pdf_6.SizeF(2836, 4008);\n\t                case 'B1':\n\t                    return new ej2_pdf_6.SizeF(2004, 2836);\n\t                case 'B2':\n\t                    return new ej2_pdf_6.SizeF(1418, 2004);\n\t                case 'B3':\n\t                    return new ej2_pdf_6.SizeF(1002, 1418);\n\t                case 'B4':\n\t                    return new ej2_pdf_6.SizeF(709, 1002);\n\t                case 'B5':\n\t                    return new ej2_pdf_6.SizeF(501, 709);\n\t                case 'ArchA':\n\t                    return new ej2_pdf_6.SizeF(648, 864);\n\t                case 'ArchB':\n\t                    return new ej2_pdf_6.SizeF(864, 1296);\n\t                case 'ArchC':\n\t                    return new ej2_pdf_6.SizeF(1296, 1728);\n\t                case 'ArchD':\n\t                    return new ej2_pdf_6.SizeF(1728, 2592);\n\t                case 'ArchE':\n\t                    return new ej2_pdf_6.SizeF(2592, 3456);\n\t                case 'Flsa':\n\t                    return new ej2_pdf_6.SizeF(612, 936);\n\t                case 'HalfLetter':\n\t                    return new ej2_pdf_6.SizeF(396, 612);\n\t                case 'Letter11x17':\n\t                    return new ej2_pdf_6.SizeF(792, 1224);\n\t                case 'Ledger':\n\t                    return new ej2_pdf_6.SizeF(1224, 792);\n\t                default:\n\t                    return new ej2_pdf_6.SizeF(595, 842);\n\t            }\n\t        };\n\t        PdfExport.prototype.getDashStyle = function (dashStyle) {\n\t            switch (dashStyle) {\n\t                case 'Dash':\n\t                    return 1;\n\t                case 'Dot':\n\t                    return 2;\n\t                case 'DashDot':\n\t                    return 3;\n\t                case 'DashDotDot':\n\t                    return 4;\n\t                default:\n\t                    return 0;\n\t            }\n\t        };\n\t        PdfExport.prototype.getPenFromContent = function (content) {\n\t            var pen = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(0, 0, 0));\n\t            if (content.style !== undefined && content.style !== null && content.style.penColor !== undefined) {\n\t                var penColor = this.hexToRgb(content.style.penColor);\n\t                pen = new ej2_pdf_1.PdfPen(new ej2_pdf_3.PdfColor(penColor.r, penColor.g, penColor.b));\n\t            }\n\t            return pen;\n\t        };\n\t        PdfExport.prototype.getBrushFromContent = function (content) {\n\t            var brush = null;\n\t            if (content.style.textBrushColor !== undefined) {\n\t                var brushColor = this.hexToRgb(content.style.textBrushColor);\n\t                brush = new ej2_pdf_3.PdfSolidBrush(new ej2_pdf_3.PdfColor(brushColor.r, brushColor.g, brushColor.b));\n\t            }\n\t            return brush;\n\t        };\n\t        PdfExport.prototype.hexToRgb = function (hex) {\n\t            if (hex === null || hex === '' || hex.length !== 7) {\n\t                throw new Error('please set valid hex value for color...');\n\t            }\n\t            hex = hex.substring(1);\n\t            var bigint = parseInt(hex, 16);\n\t            var r = (bigint >> 16) & 255;\n\t            var g = (bigint >> 8) & 255;\n\t            var b = bigint & 255;\n\t            return { r: r, g: g, b: b };\n\t        };\n\t        PdfExport.prototype.destroy = function () {\n\t        };\n\t        return PdfExport;\n\t    }());\n\t    exports.PdfExport = PdfExport;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_88__;\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, column_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(column_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(11), __webpack_require__(17), __webpack_require__(12), __webpack_require__(21), __webpack_require__(22), __webpack_require__(56), __webpack_require__(24), __webpack_require__(10), __webpack_require__(56), __webpack_require__(25), __webpack_require__(26), __webpack_require__(75), __webpack_require__(76), __webpack_require__(74), __webpack_require__(73), __webpack_require__(77), __webpack_require__(79), __webpack_require__(78), __webpack_require__(71)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, header_renderer_1, content_renderer_1, row_renderer_1, cell_renderer_1, header_cell_renderer_1, filter_cell_renderer_1, stacked_cell_renderer_1, render_1, filter_cell_renderer_2, indent_cell_renderer_1, caption_cell_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, inline_edit_renderer_1, edit_renderer_1, boolean_edit_cell_1, default_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(header_renderer_1);\n\t    __export(content_renderer_1);\n\t    __export(row_renderer_1);\n\t    __export(cell_renderer_1);\n\t    __export(header_cell_renderer_1);\n\t    __export(filter_cell_renderer_1);\n\t    __export(stacked_cell_renderer_1);\n\t    __export(render_1);\n\t    __export(filter_cell_renderer_2);\n\t    __export(indent_cell_renderer_1);\n\t    __export(caption_cell_renderer_1);\n\t    __export(batch_edit_renderer_1);\n\t    __export(dialog_edit_renderer_1);\n\t    __export(inline_edit_renderer_1);\n\t    __export(edit_renderer_1);\n\t    __export(boolean_edit_cell_1);\n\t    __export(default_edit_cell_1);\n\t    __export(dropdown_edit_cell_1);\n\t    __export(numeric_edit_cell_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(31), __webpack_require__(32), __webpack_require__(18), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, cell_render_factory_1, service_locator_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(cell_render_factory_1);\n\t    __export(service_locator_1);\n\t    __export(row_model_generator_1);\n\t    __export(group_model_generator_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(49), __webpack_require__(54), __webpack_require__(50), __webpack_require__(51)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, pager_1, external_message_1, numeric_container_1, pager_message_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(pager_1);\n\t    __export(external_message_1);\n\t    __export(numeric_container_1);\n\t    __export(pager_message_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBmMThhYmQwY2E4MDdjZDBiY2MyOSIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvY29tbW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2Jhc2UvZ3JpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9iYXNlL3V0aWwuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2RlbHMvY29sdW1uLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2Jhc2UvY29uc3RhbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvcmVuZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9yb3ctcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYmFzZS9lbnVtLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL21vZGVscy9jZWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL21vZGVscy9yb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9kYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2NvbnRlbnQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9ncm91cC1tb2RlbC1nZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9hcmlhLXNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvc3RhY2tlZC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2NhcHRpb24tY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9leHBhbmQtY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1leHBhbmQtY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9jZWxsLXJlbmRlci1mYWN0b3J5LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3NlcnZpY2UtbG9jYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yZW5kZXJlci1mYWN0b3J5LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL3BhZ2Utc2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zZWxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zaG93LWhpZGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zY3JvbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9wcmludC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2RlbHMvYWdncmVnYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvY29sdW1uLWNob29zZXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2RldGFpbC1yb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zb3J0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvcGFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvcGFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL251bWVyaWMtY29udGFpbmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9wYWdlci1tZXNzYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9wYWdlci1kcm9wZG93bi5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL2V4dGVybmFsLW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yZXNpemUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yZW9yZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvcm93LXJlb3JkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9ncm91cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3Rvb2xiYXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9hZ2dyZWdhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZm9vdGVyLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3N1bW1hcnktY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3ZpcnR1YWwtc2Nyb2xsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3ZpcnR1YWwtY29udGVudC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvdmlydHVhbC1yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9udW1lcmljLWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9pbmxpbmUtZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9iYXRjaC1lZGl0LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RpYWxvZy1lZGl0LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2Jvb2xlYW4tZWRpdC1jZWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2Ryb3Bkb3duLWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kZWZhdWx0LWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2lubGluZS1lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvbm9ybWFsLWVkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9iYXRjaC1lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZGlhbG9nLWVkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9leGNlbC1leHBvcnQuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZXhwb3J0LWhlbHBlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3BkZi1leHBvcnQuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLXBkZlwiIiwid2VicGFjazovLy8uL3NyYy9ncmlkL21vZGVscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELE87QUNWQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBZTtBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7O2lFQ3RDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDUkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ1hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7QUNWRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHdCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUE4QjtBQUM5QjtBQUNBO0FBQ0EsK0JBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBLCtCQUE4Qix5REFBeUQ7QUFDdkY7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDaCtDRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUNqREQsZ0Q7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFnRCxTQUFTO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxTQUFTO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0Esd0RBQXVELDBCQUEwQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELDBCQUEwQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQiwrQkFBK0IsSUFBSSwrQkFBK0I7QUFDbkYsbUJBQWtCLFVBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQThDLFNBQVM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFnRSw4QkFBOEI7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFpQywyQ0FBMkM7QUFDNUU7QUFDQTtBQUNBO0FBQ0EsbUZBQWtGLDJDQUEyQyxvQkFBb0IsMkNBQTJDO0FBQzVMO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQywyQ0FBMkM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUF5Qyw0QkFBNEIsR0FBRyw2RkFBNkY7QUFDcks7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBaUMsaUZBQWlGO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyxhQUFhO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ3hGRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXFDLCtFQUErRTtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxnQkFBZ0I7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBc0MsbUJBQW1CO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF3QjtBQUN4QixjQUFhO0FBQ2I7QUFDQTtBQUNBLHlCQUF3QjtBQUN4QixjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBd0I7QUFDeEIsY0FBYTtBQUNiO0FBQ0E7QUFDQSx5QkFBd0I7QUFDeEIsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUN6U0Q7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLHlCQUF5QjtBQUNwRDtBQUNBO0FBQ0EsNkJBQTRCO0FBQzVCLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RDtBQUN2RCxjQUFhO0FBQ2I7QUFDQTtBQUNBLHVFQUFzRSxrQ0FBa0M7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQix3QkFBd0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFtQyx3QkFBd0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFpRCxxQkFBcUI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUF5RCxxQkFBcUIsRUFBRTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUMsa0JBQWtCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUEyRCxnQkFBZ0I7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBaUUsZ0JBQWdCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0QsUUFBUTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELFNBQVM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXNELFNBQVM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELFNBQVM7QUFDM0Q7QUFDQTtB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LDRCQUE0QjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUFzRDtBQUN0RDtBQUNBO0FBQ0EsOENBQTZDLHFCQUFxQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUM1UEQsaUQ7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBd0U7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBbUQsd0JBQXdCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBa0M7QUFDbEMsa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxtQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXFFO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELG9DQUFvQztBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQzVPRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLGlCQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsRUFBRTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMscUJBQXFCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQiwyQkFBMkI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBdUMsMkJBQTJCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXVDLDJCQUEyQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLHdCQUF3QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsZ0JBQWdCO0FBQzdEO0FBQ0E7QUFDQSxnQ0FBK0Isb0JBQW9CO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUM3NEJELGlEOzs7Ozs7aUVDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0EsRUFBQzs7Ozs7OztpRUNQRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ3pCRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ1ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUMiLCJmaWxlIjoiZWoyLWdyaWRzLnVtZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcGRmXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBmYWN0b3J5KHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1uYXZpZ2F0aW9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZXhjZWwtZXhwb3J0XCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLXBkZlwiKSkgOiBmYWN0b3J5KHJvb3RbXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1uYXZpZ2F0aW9uc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItZXhjZWwtZXhwb3J0XCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLXBkZlwiXSk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzVfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV83X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNDNfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80NF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzUzX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNjJfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV83Ml9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzg1X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfODhfXykge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBmMThhYmQwY2E4MDdjZDBiY2MyOSIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vZ3JpZC9pbmRleFwiLCBcIi4vcGFnZXIvaW5kZXhcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbmRleF8xLCBpbmRleF8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChpbmRleF8xKTtcbiAgICBfX2V4cG9ydChpbmRleF8yKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9jb21tb25cIiwgXCIuL2FjdGlvbnNcIiwgXCIuL21vZGVsc1wiLCBcIi4vcmVuZGVyZXJcIiwgXCIuL3NlcnZpY2VzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY29tbW9uXzEsIGFjdGlvbnNfMSwgbW9kZWxzXzEsIHJlbmRlcmVyXzEsIHNlcnZpY2VzXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGNvbW1vbl8xKTtcbiAgICBfX2V4cG9ydChhY3Rpb25zXzEpO1xuICAgIF9fZXhwb3J0KG1vZGVsc18xKTtcbiAgICBfX2V4cG9ydChyZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChzZXJ2aWNlc18xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2Jhc2UvZ3JpZFwiLCBcIi4vYmFzZS9lbnVtXCIsIFwiLi9iYXNlL3V0aWxcIiwgXCIuL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBncmlkXzEsIGVudW1fMSwgdXRpbF8xLCBjb25zdGFudF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChncmlkXzEpO1xuICAgIF9fZXhwb3J0KGVudW1fMSk7XG4gICAgX19leHBvcnQodXRpbF8xKTtcbiAgICBfX2V4cG9ydChjb25zdGFudF8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9jb21tb24uanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL3JlbmRlclwiLCBcIi4vZW51bVwiLCBcIi4uL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnlcIiwgXCIuLi9zZXJ2aWNlcy9zZXJ2aWNlLWxvY2F0b3JcIiwgXCIuLi9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXJcIiwgXCIuLi9zZXJ2aWNlcy9yZW5kZXJlci1mYWN0b3J5XCIsIFwiLi4vc2VydmljZXMvd2lkdGgtY29udHJvbGxlclwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiLCBcIi4uL21vZGVscy9wYWdlLXNldHRpbmdzXCIsIFwiLi4vYWN0aW9ucy9zZWxlY3Rpb25cIiwgXCIuLi9hY3Rpb25zL3NlYXJjaFwiLCBcIi4uL2FjdGlvbnMvc2hvdy1oaWRlXCIsIFwiLi4vYWN0aW9ucy9zY3JvbGxcIiwgXCIuLi9hY3Rpb25zL3ByaW50XCIsIFwiLi4vbW9kZWxzL2FnZ3JlZ2F0ZVwiLCBcIi4uL2FjdGlvbnMvY29sdW1uLWNob29zZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBlajJfYmFzZV81LCB1dGlsXzEsIGV2ZW50cywgcmVuZGVyXzEsIGVudW1fMSwgY2VsbF9yZW5kZXJfZmFjdG9yeV8xLCBzZXJ2aWNlX2xvY2F0b3JfMSwgdmFsdWVfZm9ybWF0dGVyXzEsIHJlbmRlcmVyX2ZhY3RvcnlfMSwgd2lkdGhfY29udHJvbGxlcl8xLCBhcmlhX3NlcnZpY2VfMSwgcGFnZV9zZXR0aW5nc18xLCBzZWxlY3Rpb25fMSwgc2VhcmNoXzEsIHNob3dfaGlkZV8xLCBzY3JvbGxfMSwgcHJpbnRfMSwgYWdncmVnYXRlXzEsIGNvbHVtbl9jaG9vc2VyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNvcnREZXNjcmlwdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFNvcnREZXNjcmlwdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTb3J0RGVzY3JpcHRvcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU29ydERlc2NyaXB0b3I7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgU29ydERlc2NyaXB0b3IucHJvdG90eXBlLCBcImZpZWxkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFNvcnREZXNjcmlwdG9yLnByb3RvdHlwZSwgXCJkaXJlY3Rpb25cIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlNvcnREZXNjcmlwdG9yID0gU29ydERlc2NyaXB0b3I7XG4gICAgdmFyIFNvcnRTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTb3J0U2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFNvcnRTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU29ydFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29sbGVjdGlvbihbXSwgU29ydERlc2NyaXB0b3IpXG4gICAgXSwgU29ydFNldHRpbmdzLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5Tb3J0U2V0dGluZ3MgPSBTb3J0U2V0dGluZ3M7XG4gICAgdmFyIFByZWRpY2F0ZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhQcmVkaWNhdGUsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFByZWRpY2F0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJlZGljYXRlO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwiZmllbGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJvcGVyYXRvclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwibWF0Y2hDYXNlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwicHJlZGljYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoe30pXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJhY3R1YWxGaWx0ZXJWYWx1ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHt9KVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwiYWN0dWFsT3BlcmF0b3JcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlByZWRpY2F0ZSA9IFByZWRpY2F0ZTtcbiAgICB2YXIgRmlsdGVyU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRmlsdGVyU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEZpbHRlclNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBGaWx0ZXJTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbGxlY3Rpb24oW10sIFByZWRpY2F0ZSlcbiAgICBdLCBGaWx0ZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdmaWx0ZXJiYXInKVxuICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJtb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBGaWx0ZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd0ZpbHRlckJhclN0YXR1c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KDE1MDApXG4gICAgXSwgRmlsdGVyU2V0dGluZ3MucHJvdG90eXBlLCBcImltbWVkaWF0ZU1vZGVEZWxheVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuRmlsdGVyU2V0dGluZ3MgPSBGaWx0ZXJTZXR0aW5ncztcbiAgICB2YXIgU2VsZWN0aW9uU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU2VsZWN0aW9uU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFNlbGVjdGlvblNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTZWxlY3Rpb25TZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdyb3cnKVxuICAgIF0sIFNlbGVjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJtb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2Zsb3cnKVxuICAgIF0sIFNlbGVjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJjZWxsU2VsZWN0aW9uTW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdzaW5nbGUnKVxuICAgIF0sIFNlbGVjdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5TZWxlY3Rpb25TZXR0aW5ncyA9IFNlbGVjdGlvblNldHRpbmdzO1xuICAgIHZhciBTZWFyY2hTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTZWFyY2hTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU2VhcmNoU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNlYXJjaFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoW10pXG4gICAgXSwgU2VhcmNoU2V0dGluZ3MucHJvdG90eXBlLCBcImZpZWxkc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCcnKVxuICAgIF0sIFNlYXJjaFNldHRpbmdzLnByb3RvdHlwZSwgXCJrZXlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnY29udGFpbnMnKVxuICAgIF0sIFNlYXJjaFNldHRpbmdzLnByb3RvdHlwZSwgXCJvcGVyYXRvclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgU2VhcmNoU2V0dGluZ3MucHJvdG90eXBlLCBcImlnbm9yZUNhc2VcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlNlYXJjaFNldHRpbmdzID0gU2VhcmNoU2V0dGluZ3M7XG4gICAgdmFyIFJvd0Ryb3BTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhSb3dEcm9wU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFJvd0Ryb3BTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUm93RHJvcFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFJvd0Ryb3BTZXR0aW5ncy5wcm90b3R5cGUsIFwidGFyZ2V0SURcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlJvd0Ryb3BTZXR0aW5ncyA9IFJvd0Ryb3BTZXR0aW5ncztcbiAgICB2YXIgVGV4dFdyYXBTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhUZXh0V3JhcFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBUZXh0V3JhcFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBUZXh0V3JhcFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2JvdGgnKVxuICAgIF0sIFRleHRXcmFwU2V0dGluZ3MucHJvdG90eXBlLCBcIndyYXBNb2RlXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5UZXh0V3JhcFNldHRpbmdzID0gVGV4dFdyYXBTZXR0aW5ncztcbiAgICB2YXIgR3JvdXBTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcm91cFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBHcm91cFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBHcm91cFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93RHJvcEFyZWFcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93VG9nZ2xlQnV0dG9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd0dyb3VwZWRDb2x1bW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dVbmdyb3VwQnV0dG9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwiZGlzYWJsZVBhZ2VXaXNlQWdncmVnYXRlc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KFtdKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcImNvbHVtbnNcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkdyb3VwU2V0dGluZ3MgPSBHcm91cFNldHRpbmdzO1xuICAgIHZhciBFZGl0U2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRWRpdFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBFZGl0U2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVkaXRTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwiYWxsb3dBZGRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcImFsbG93RWRpdGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwiYWxsb3dEZWxldGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdub3JtYWwnKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwibW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJhbGxvd0VkaXRPbkRibENsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dDb25maXJtRGlhbG9nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93RGVsZXRlQ29uZmlybURpYWxvZ1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuRWRpdFNldHRpbmdzID0gRWRpdFNldHRpbmdzO1xuICAgIHZhciBHcmlkID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyaWQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyaWQob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmlzSW5pdGlhbCA9IHRydWU7XG4gICAgICAgICAgICBfdGhpcy5zb3J0ZWRDb2x1bW5zID0gW107XG4gICAgICAgICAgICBfdGhpcy5pblZpZXdJbmRleGVzID0gW107XG4gICAgICAgICAgICBfdGhpcy5tZWRpYUNvbCA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuaXNNZWRpYVF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5pc0luaXRpYWxMb2FkID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5maWx0ZXJPcGVyYXRvcnMgPSB7XG4gICAgICAgICAgICAgICAgY29udGFpbnM6ICdjb250YWlucycsIGVuZHNXaXRoOiAnZW5kc3dpdGgnLCBlcXVhbDogJ2VxdWFsJywgZ3JlYXRlclRoYW46ICdncmVhdGVydGhhbicsIGdyZWF0ZXJUaGFuT3JFcXVhbDogJ2dyZWF0ZXJ0aGFub3JlcXVhbCcsXG4gICAgICAgICAgICAgICAgbGVzc1RoYW46ICdsZXNzdGhhbicsIGxlc3NUaGFuT3JFcXVhbDogJ2xlc3N0aGFub3JlcXVhbCcsIG5vdEVxdWFsOiAnbm90ZXF1YWwnLCBzdGFydHNXaXRoOiAnc3RhcnRzd2l0aCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5kZWZhdWx0TG9jYWxlID0ge1xuICAgICAgICAgICAgICAgIEVtcHR5UmVjb3JkOiAnTm8gcmVjb3JkcyB0byBkaXNwbGF5JyxcbiAgICAgICAgICAgICAgICBUcnVlOiAndHJ1ZScsXG4gICAgICAgICAgICAgICAgRmFsc2U6ICdmYWxzZScsXG4gICAgICAgICAgICAgICAgSW52YWxpZEZpbHRlck1lc3NhZ2U6ICdJbnZhbGlkIEZpbHRlciBEYXRhJyxcbiAgICAgICAgICAgICAgICBHcm91cERyb3BBcmVhOiAnRHJhZyBhIGNvbHVtbiBoZWFkZXIgaGVyZSB0byBncm91cCBpdHMgY29sdW1uJyxcbiAgICAgICAgICAgICAgICBVbkdyb3VwOiAnQ2xpY2sgaGVyZSB0byB1bmdyb3VwJyxcbiAgICAgICAgICAgICAgICBHcm91cERpc2FibGU6ICdHcm91cGluZyBpcyBkaXNhYmxlZCBmb3IgdGhpcyBjb2x1bW4nLFxuICAgICAgICAgICAgICAgIEZpbHRlcmJhclRpdGxlOiAnXFwncyBmaWx0ZXIgYmFyIGNlbGwnLFxuICAgICAgICAgICAgICAgIEVtcHR5RGF0YVNvdXJjZUVycm9yOiAnRGF0YVNvdXJjZSBtdXN0IG5vdCBiZSBlbXB0eSBhdCBpbml0aWFsIGxvYWQgc2luY2UgY29sdW1ucyBhcmUgZ2VuZXJhdGVkIGZyb20gZGF0YVNvdXJjZSBpbiBBdXRvR2VuZXJhdGUgQ29sdW1uIEdyaWQnLFxuICAgICAgICAgICAgICAgIEFkZDogJ0FkZCcsXG4gICAgICAgICAgICAgICAgRWRpdDogJ0VkaXQnLFxuICAgICAgICAgICAgICAgIENhbmNlbDogJ0NhbmNlbCcsXG4gICAgICAgICAgICAgICAgVXBkYXRlOiAnVXBkYXRlJyxcbiAgICAgICAgICAgICAgICBEZWxldGU6ICdEZWxldGUnLFxuICAgICAgICAgICAgICAgIFByaW50OiAnUHJpbnQnLFxuICAgICAgICAgICAgICAgIFBkZmV4cG9ydDogJ1BERiBFeHBvcnQnLFxuICAgICAgICAgICAgICAgIEV4Y2VsZXhwb3J0OiAnRXhjZWwgRXhwb3J0JyxcbiAgICAgICAgICAgICAgICBXb3JkZXhwb3J0OiAnV29yZCBFeHBvcnQnLFxuICAgICAgICAgICAgICAgIENzdmV4cG9ydDogJ0NTViBFeHBvcnQnLFxuICAgICAgICAgICAgICAgIFNlYXJjaDogJ1NlYXJjaCcsXG4gICAgICAgICAgICAgICAgSXRlbTogJ2l0ZW0nLFxuICAgICAgICAgICAgICAgIEl0ZW1zOiAnaXRlbXMnLFxuICAgICAgICAgICAgICAgIEVkaXRPcGVyYXRpb25BbGVydDogJ05vIHJlY29yZHMgc2VsZWN0ZWQgZm9yIGVkaXQgb3BlcmF0aW9uJyxcbiAgICAgICAgICAgICAgICBEZWxldGVPcGVyYXRpb25BbGVydDogJ05vIHJlY29yZHMgc2VsZWN0ZWQgZm9yIGRlbGV0ZSBvcGVyYXRpb24nLFxuICAgICAgICAgICAgICAgIFNhdmVCdXR0b246ICdTYXZlJyxcbiAgICAgICAgICAgICAgICBPS0J1dHRvbjogJ09LJyxcbiAgICAgICAgICAgICAgICBDYW5jZWxCdXR0b246ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgIEVkaXRGb3JtVGl0bGU6ICdEZXRhaWxzIG9mICcsXG4gICAgICAgICAgICAgICAgQWRkRm9ybVRpdGxlOiAnQWRkIE5ldyBSZWNvcmQnLFxuICAgICAgICAgICAgICAgIEJhdGNoU2F2ZUNvbmZpcm06ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gc2F2ZSBjaGFuZ2VzPycsXG4gICAgICAgICAgICAgICAgQmF0Y2hTYXZlTG9zdENoYW5nZXM6ICdVbnNhdmVkIGNoYW5nZXMgd2lsbCBiZSBsb3N0LiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY29udGludWU/JyxcbiAgICAgICAgICAgICAgICBDb25maXJtRGVsZXRlOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIERlbGV0ZSBSZWNvcmQ/JyxcbiAgICAgICAgICAgICAgICBDYW5jZWxFZGl0OiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIENhbmNlbCB0aGUgY2hhbmdlcz8nLFxuICAgICAgICAgICAgICAgIENob29zZUNvbHVtbnM6ICdDaG9vc2UgQ29sdW1uJyxcbiAgICAgICAgICAgICAgICBTZWFyY2hDb2x1bW5zOiAnc2VhcmNoIGNvbHVtbnMnLFxuICAgICAgICAgICAgICAgIE1hdGNoczogJ05vIE1hdGNoZXMgRm91bmQnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX3RoaXMua2V5Q29uZmlncyA9IHtcbiAgICAgICAgICAgICAgICBkb3duQXJyb3c6ICdkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIHVwQXJyb3c6ICd1cGFycm93JyxcbiAgICAgICAgICAgICAgICByaWdodEFycm93OiAncmlnaHRhcnJvdycsXG4gICAgICAgICAgICAgICAgbGVmdEFycm93OiAnbGVmdGFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdERvd246ICdzaGlmdCtkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIHNoaWZ0VXA6ICdzaGlmdCt1cGFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdFJpZ2h0OiAnc2hpZnQrcmlnaHRhcnJvdycsXG4gICAgICAgICAgICAgICAgc2hpZnRMZWZ0OiAnc2hpZnQrbGVmdGFycm93JyxcbiAgICAgICAgICAgICAgICBob21lOiAnaG9tZScsXG4gICAgICAgICAgICAgICAgZW5kOiAnZW5kJyxcbiAgICAgICAgICAgICAgICBlc2NhcGU6ICdlc2NhcGUnLFxuICAgICAgICAgICAgICAgIGN0cmxIb21lOiAnY3RybCtob21lJyxcbiAgICAgICAgICAgICAgICBjdHJsRW5kOiAnY3RybCtlbmQnLFxuICAgICAgICAgICAgICAgIHBhZ2VVcDogJ3BhZ2V1cCcsXG4gICAgICAgICAgICAgICAgcGFnZURvd246ICdwYWdlZG93bicsXG4gICAgICAgICAgICAgICAgY3RybEFsdFBhZ2VVcDogJ2N0cmwrYWx0K3BhZ2V1cCcsXG4gICAgICAgICAgICAgICAgY3RybEFsdFBhZ2VEb3duOiAnY3RybCthbHQrcGFnZWRvd24nLFxuICAgICAgICAgICAgICAgIGFsdFBhZ2VVcDogJ2FsdCtwYWdldXAnLFxuICAgICAgICAgICAgICAgIGFsdFBhZ2VEb3duOiAnYWx0K3BhZ2Vkb3duJyxcbiAgICAgICAgICAgICAgICBhbHREb3duQXJyb3c6ICdhbHQrZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBhbHRVcEFycm93OiAnYWx0K3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIGN0cmxEb3duQXJyb3c6ICdjdHJsK2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgY3RybFVwQXJyb3c6ICdjdHJsK3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIGN0cmxQbHVzQTogJ2N0cmwrQScsXG4gICAgICAgICAgICAgICAgY3RybFBsdXNQOiAnY3RybCtQJyxcbiAgICAgICAgICAgICAgICBpbnNlcnQ6ICdpbnNlcnQnLFxuICAgICAgICAgICAgICAgIGRlbGV0ZTogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgZjI6ICdmMicsXG4gICAgICAgICAgICAgICAgZW50ZXI6ICdlbnRlcicsXG4gICAgICAgICAgICAgICAgdGFiOiAndGFiJyxcbiAgICAgICAgICAgICAgICBzaGlmdFRhYjogJ3NoaWZ0K3RhYidcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5RW50aXR5ID0gWydhbGxvd1BhZ2luZycsICdwYWdlU2V0dGluZ3MnLCAnYWxsb3dTb3J0aW5nJywgJ3NvcnRTZXR0aW5ncycsICdhbGxvd1NlbGVjdGlvbicsXG4gICAgICAgICAgICAgICAgJ3NlbGVjdGlvblNldHRpbmdzJywgJ2FsbG93RmlsdGVyaW5nJywgJ2ZpbHRlclNldHRpbmdzJywgJ2dyaWRMaW5lcycsXG4gICAgICAgICAgICAgICAgJ2NyZWF0ZWQnLCAnZGVzdHJveWVkJywgJ2xvYWQnLCAnYWN0aW9uQmVnaW4nLCAnYWN0aW9uQ29tcGxldGUnLCAnYWN0aW9uRmFpbHVyZScsICdyb3dTZWxlY3RpbmcnLCAncm93U2VsZWN0ZWQnLFxuICAgICAgICAgICAgICAgICdjb2x1bW5TZWxlY3RpbmcnLCAnY29sdW1uU2VsZWN0ZWQnLCAnY2VsbFNlbGVjdGluZycsICdjZWxsU2VsZWN0ZWQnLCAnZGF0YUJvdW5kJywgJ2dyb3VwU2V0dGluZ3MnLCAnY29sdW1ucycsICdhbGxvd0tleWJvYXJkJyxcbiAgICAgICAgICAgICAgICAnZW5hYmxlQWx0Um93JywgJ2VuYWJsZUhvdmVyJywgJ2FsbG93VGV4dFdyYXAnLCAndGV4dFdyYXBTZXR0aW5ncycsICdzZWFyY2hTZXR0aW5ncycsICdzZWxlY3RlZFJvd0luZGV4JywgJ2FsbG93UmVvcmRlcmluZycsXG4gICAgICAgICAgICAgICAgJ2FsbG93Um93RHJhZ0FuZERyb3AnLCAncm93RHJvcFNldHRpbmdzJywgJ2FsbG93R3JvdXBpbmcnLCAnaGVpZ2h0JywgJ3dpZHRoJywgJ3Jvd1RlbXBsYXRlJywgJ3ByaW50TW9kZScsXG4gICAgICAgICAgICAgICAgJ3Jvd0RhdGFCb3VuZCcsICdxdWVyeUNlbGxJbmZvJywgJ3Jvd0Rlc2VsZWN0aW5nJywgJ3Jvd0Rlc2VsZWN0ZWQnLCAnY2VsbERlc2VsZWN0aW5nJywgJ2NlbGxEZXNlbGVjdGVkJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uRHJhZ1N0YXJ0JywgJ2NvbHVtbkRyYWcnLCAnY29sdW1uRHJvcCcsICdwcmludENvbXBsZXRlJywgJ2JlZm9yZVByaW50JywgJ2RldGFpbERhdGFCb3VuZCcsICdkZXRhaWxUZW1wbGF0ZScsXG4gICAgICAgICAgICAgICAgJ2NoaWxkR3JpZCcsICdxdWVyeVN0cmluZycsICd0b29sYmFyJywgJ3Rvb2xiYXJDbGljaycsICdlZGl0U2V0dGluZ3MnLFxuICAgICAgICAgICAgICAgICdiYXRjaEFkZCcsICdiYXRjaERlbGV0ZScsICdiZWZvcmVCYXRjaEFkZCcsICdiZWZvcmVCYXRjaERlbGV0ZScsXG4gICAgICAgICAgICAgICAgJ2JlZm9yZUJhdGNoU2F2ZScsICdiZWdpbkVkaXQnLCAnY2VsbEVkaXQnLCAnY2VsbFNhdmUnLCAnZW5kQWRkJywgJ2VuZERlbGV0ZScsICdlbmRFZGl0JywgJ2JlZm9yZURhdGFCb3VuZCcsXG4gICAgICAgICAgICAgICAgJ2JlZm9yZU9wZW5Db2x1bW5DaG9vc2VyJywgJ2FsbG93UmVzaXppbmcnLCAnRXhjZWxFeHBvcnQnLCAnUGRmRXhwb3J0JyxcbiAgICAgICAgICAgICAgICAnYWxsb3dFeGNlbEV4cG9ydCcsICdhbGxvd1BkZkV4cG9ydCcsXG4gICAgICAgICAgICAgICAgJ3BkZlF1ZXJ5Q2VsbEluZm8nLCAnZXhjZWxRdWVyeUNlbGxJbmZvJ107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3Qoa2V5RW50aXR5KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVxdWlyZWRNb2R1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93RmlsdGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZmlsdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuZmlsdGVyU2V0dGluZ3MsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0V4Y2VsRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnRXhjZWxFeHBvcnQnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93UGRmRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnUGRmRXhwb3J0JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1NvcnRpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdzb3J0JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc29ydFNldHRpbmdzLCB0aGlzLnNvcnRlZENvbHVtbnNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3BhZ2VyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMucGFnZVNldHRpbmdzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdzZWxlY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWVtYmVyOiAncmVzaXplJyxcbiAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dSZW9yZGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAncmVvcmRlcicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3Jvd0RyYWdBbmREcm9wJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZ3JvdXAnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5ncm91cFNldHRpbmdzLCB0aGlzLnNvcnRlZENvbHVtbnMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hZ2dyZWdhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7IG1lbWJlcjogJ2FnZ3JlZ2F0ZScsIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdkZXRhaWxSb3cnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnRvb2xiYXIgfHwgdGhpcy50b29sYmFyVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICd0b29sYmFyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVWaXJ0dWFsaXphdGlvbiB8fCB0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAndmlydHVhbHNjcm9sbCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFNldHRpbmdzLmFsbG93QWRkaW5nIHx8IHRoaXMuZWRpdFNldHRpbmdzLmFsbG93RGVsZXRpbmcgfHwgdGhpcy5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZWRpdCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBuZXcgc2VydmljZV9sb2NhdG9yXzEuU2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTZXJ2aWNlcygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnModGhpcy5lbGVtZW50LCB7IHJvbGU6ICdncmlkJyB9KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlID0gbmV3IHJlbmRlcl8xLlJlbmRlcih0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0TWVkaWFDb2x1bW5zKCk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaE1vZHVsZSA9IG5ldyBzZWFyY2hfMS5TZWFyY2godGhpcyk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZSA9IG5ldyBzY3JvbGxfMS5TY3JvbGwodGhpcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Q29sdW1uQ2hvb3Nlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uQ2hvb3Nlck1vZHVsZSA9IG5ldyBjb2x1bW5fY2hvb3Nlcl8xLkNvbHVtbkNob29zZXIodGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5pdGlhbExvYWQsIHt9KTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihldmVudHMubG9hZCk7XG4gICAgICAgICAgICB1dGlsXzEucHJlcGFyZUNvbHVtbnModGhpcy5jb2x1bW5zLCB0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzTW9kZWwoKTtcbiAgICAgICAgICAgIHRoaXMuZ3JpZFJlbmRlcigpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURlZmF1bHRDdXJzb3IoKTtcbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbml0aWFsRW5kLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldE1lZGlhQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBnY29sID0gdGhpcy5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTaG93SGlkZVNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3Nob3dIaWRlU2VydmljZScpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChnY29sKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgZ2NvbC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChnY29sW2luZGV4XS5oaWRlQXRNZWRpYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lZGlhQ29sLnB1c2goZ2NvbFtpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhKGdjb2xbaW5kZXhdLmhpZGVBdE1lZGlhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lZGlhUXVlcnlVcGRhdGUoaW5kZXgsIG1lZGlhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5hZGRMaXN0ZW5lcih0aGlzLm1lZGlhUXVlcnlVcGRhdGUuYmluZCh0aGlzLCBpbmRleCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5tZWRpYVF1ZXJ5VXBkYXRlID0gZnVuY3Rpb24gKGNvbHVtbkluZGV4LCBlKSB7XG4gICAgICAgICAgICB0aGlzLmlzTWVkaWFRdWVyeSA9IHRydWU7XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5nZXRDb2x1bW5zKClbY29sdW1uSW5kZXhdO1xuICAgICAgICAgICAgY29sLnZpc2libGUgPSBlLm1hdGNoZXM7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxMb2FkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVyLnNob3coY29sLmhlYWRlclRleHQsICdoZWFkZXJUZXh0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dIaWRlci5oaWRlKGNvbC5oZWFkZXJUZXh0LCAnaGVhZGVyVGV4dCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVmcmVzaE1lZGlhQ29sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNZWRpYVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc01lZGlhUXVlcnkgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsTG9hZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmV2ZW50SW5pdGlhbGl6ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmRlc3Ryb3ksIHt9KTtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveURlcGVuZGVudE1vZHVsZXMoKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5lbGVtZW50LCBbXSwgWydlLXJ0bCcsICdlLWdyaWRob3ZlcicsICdlLXJlc3BvbnNpdmUnLCAnZS1kZWZhdWx0JywgJ2UtZGV2aWNlJ10pO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kZXN0cm95RGVwZW5kZW50TW9kdWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdncmlkJztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICAgICAgdmFyIHJlcXVpcmVSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgcmVxdWlyZUdyaWRSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgY2hlY2tDdXJzb3I7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHsgcmVxdWVzdFR5cGU6ICdyZWZyZXNoJyB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93UGFnaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdwYWdlcicsIGVuYWJsZTogdGhpcy5hbGxvd1BhZ2luZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAncGFnZXInLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLnBhZ2VTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKG5ld1Byb3AucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlKSAmJiBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKG5ld1Byb3AucGFnZVNldHRpbmdzLnRvdGFsUmVjb3Jkc0NvdW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsb2NhbGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbGVPYmouc2V0TG9jYWxlKG5ld1Byb3AubG9jYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVGb3JtYXR0ZXJTZXJ2aWNlLnNldEN1bHR1cmUobmV3UHJvcC5sb2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbGJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICd0b29sYmFyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1NvcnRpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3NvcnQnLCBlbmFibGU6IHRoaXMuYWxsb3dTb3J0aW5nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93RmlsdGVyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdmaWx0ZXInLCBlbmFibGU6IHRoaXMuYWxsb3dGaWx0ZXJpbmcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnd2lkdGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlOiAnc2Nyb2xsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IHdpZHRoOiBuZXdQcm9wLndpZHRoLCBoZWlnaHQ6IG5ld1Byb3AuaGVpZ2h0IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93UmVvcmRlcmluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAncmVvcmRlcicsIGVuYWJsZTogdGhpcy5hbGxvd1Jlb3JkZXJpbmcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0N1cnNvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dSb3dEcmFnQW5kRHJvcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAncm93RHJhZ0FuZERyb3AnLCBlbmFibGU6IHRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdyb3dUZW1wbGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd1RlbXBsYXRlRm4gPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLnJvd1RlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdkZXRhaWxUZW1wbGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGFpbFRlbXBsYXRlRm4gPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLmRldGFpbFRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0dyb3VwaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdncm91cCcsIGVuYWJsZTogdGhpcy5hbGxvd0dyb3VwaW5nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUucmVmcmVzaFVJKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0N1cnNvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2hpbGRHcmlkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0b29sYmFyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICd0b29sYmFyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdncm91cFNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQobmV3UHJvcC5ncm91cFNldHRpbmdzLnNob3dEcm9wQXJlYSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUucmVmcmVzaFVJKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ2dyb3VwJywgcHJvcGVydGllczogbmV3UHJvcC5ncm91cFNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FnZ3JlZ2F0ZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ2FnZ3JlZ2F0ZScsIHByb3BlcnRpZXM6IG5ld1Byb3AgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29sdW1ucyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbk9iamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZUdyaWRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRlZFByb3BlcnR5Q2hhbmdlKHByb3AsIG5ld1Byb3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGVja0N1cnNvcikge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGVmYXVsdEN1cnNvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVpcmVHcmlkUmVmcmVzaCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVxdWlyZVJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCBhcmdzKTtcbiAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5leHRlbmRlZFByb3BlcnR5Q2hhbmdlID0gZnVuY3Rpb24gKHByb3AsIG5ld1Byb3ApIHtcbiAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZVJ0bCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUlRMKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBhZ2VyJykuZWoyX2luc3RhbmNlc1swXS5lbmFibGVSdGwgPSBuZXdQcm9wLmVuYWJsZVJ0bDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcGFnZXInKS5lajJfaW5zdGFuY2VzWzBdLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVpZ2h0ICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLnJlbW92ZVBhZGRpbmcoIW5ld1Byb3AuZW5hYmxlUnRsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLnNldFBhZGRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sYmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXJNb2R1bGUuZ2V0VG9vbGJhcigpLmVqMl9pbnN0YW5jZXNbMF0uZW5hYmxlUnRsID0gbmV3UHJvcC5lbmFibGVSdGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXJNb2R1bGUuZ2V0VG9vbGJhcigpLmVqMl9pbnN0YW5jZXNbMF0uZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVBbHRSb3cnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93UmVzaXppbmcnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5yZWZyZXNoVUkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ3JpZExpbmVzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVHcmlkTGluZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmlsdGVyU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdmaWx0ZXInLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLmZpbHRlclNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzZWFyY2hTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ3NlYXJjaCcsIHByb3BlcnRpZXM6IG5ld1Byb3Auc2VhcmNoU2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NvcnRTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ3NvcnQnIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzZWxlY3Rpb25TZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ3NlbGVjdGlvbicsIHByb3BlcnRpZXM6IG5ld1Byb3Auc2VsZWN0aW9uU2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VkaXRTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ2VkaXQnLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLmVkaXRTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dUZXh0V3JhcCc6XG4gICAgICAgICAgICAgICAgY2FzZSAndGV4dFdyYXBTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93VGV4dFdyYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlUZXh0V3JhcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUZXh0V3JhcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGFTb3VyY2UnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuZGF0YVNvdXJjZU1vZGlmaWVkLCB7fSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlSG92ZXInOlxuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gbmV3UHJvcC5lbmFibGVIb3ZlciA/IGVqMl9iYXNlXzMuYWRkQ2xhc3MgOiBlajJfYmFzZV8zLnJlbW92ZUNsYXNzO1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb24oW3RoaXMuZWxlbWVudF0sICdlLWdyaWRob3ZlcicpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlRGVmYXVsdEN1cnNvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY29sdW1uaGVhZGVyJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBoZWFkZXJSb3dzXzEgPSBoZWFkZXJSb3dzOyBfaSA8IGhlYWRlclJvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gaGVhZGVyUm93c18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd1NvcnRpbmcgfHwgdGhpcy5hbGxvd0dyb3VwaW5nIHx8IHRoaXMuYWxsb3dSZW9yZGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3QucmVtb3ZlKCdlLWRlZmF1bHRjdXJzb3InKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdlLWRlZmF1bHRjdXJzb3InKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUNvbHVtbk1vZGVsID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbnNbaV0uY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbk1vZGVsKGNvbHVtbnNbaV0uY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1vZGVsLnB1c2goY29sdW1uc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbnZpZXcgPSB0aGlzLmluVmlld0luZGV4ZXMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2IC0gX3RoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgfSkuZmlsdGVyKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2ID4gLTE7IH0pO1xuICAgICAgICAgICAgdmFyIHZMZW4gPSBpbnZpZXcubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uIHx8IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb2x1bW5Nb2RlbCkgfHwgdGhpcy5jb2x1bW5Nb2RlbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk1vZGVsID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5Nb2RlbCh0aGlzLmNvbHVtbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB2TGVuID09PSAwID8gdGhpcy5jb2x1bW5Nb2RlbCA6XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5Nb2RlbC5zbGljZShpbnZpZXdbMF0sIGludmlld1t2TGVuIC0gMV0gKyAxKTtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleGVzSW5WaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5WaWV3SW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0Q29sdW1uSW5kZXhlc0luVmlldyA9IGZ1bmN0aW9uIChpbmRleGVzKSB7XG4gICAgICAgICAgICB0aGlzLmluVmlld0luZGV4ZXMgPSBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRWaXNpYmxlQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5jb2x1bW5Nb2RlbDsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb2xzLnB1c2goY29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29scztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0SGVhZGVyQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlck1vZHVsZS5nZXRQYW5lbCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkSGVhZGVyQ29udGVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5zZXRQYW5lbChlbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29udGVudFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1vZHVsZS5nZXRUYWJsZSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkQ29udGVudFRhYmxlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudE1vZHVsZS5zZXRUYWJsZShlbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0UGFuZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0R3JpZENvbnRlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50TW9kdWxlLnNldFBhbmVsKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRIZWFkZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlck1vZHVsZS5nZXRUYWJsZSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRHcmlkSGVhZGVyVGFibGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUuc2V0VGFibGUoZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldEZvb3RlckNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmZvb3RlckVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb290ZXJFbGVtZW50ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZ3JpZGZvb3RlcicpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9vdGVyRWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Rm9vdGVyQ29udGVudFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5mb290ZXJFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyRWxlbWVudCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWdyaWRmb290ZXInKVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvb3RlckVsZW1lbnQuZmlyc3RDaGlsZC5maXJzdENoaWxkO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRQYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdyaWRQYWdlcjtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0R3JpZFBhZ2VyID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZ3JpZFBhZ2VyID0gZWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93QnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1vZHVsZS5nZXRSb3dCeUluZGV4KGluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0Um93RWxlbWVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0RGF0YVJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIHZhciBkYXRhUm93cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93JykgJiYgIXJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhpZGRlbnJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFSb3dzLnB1c2gocm93c1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGFSb3dzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDZWxsRnJvbUluZGV4ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjb2x1bW5JbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF0YVJvd3MoKVtyb3dJbmRleF0ucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbCcpW2NvbHVtbkluZGV4XTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uSGVhZGVyQnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1oZWFkZXJjZWxsJylbaW5kZXhdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRSb3dPYmplY3RGcm9tVUlEID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuY29udGVudE1vZHVsZS5nZXRSb3dzKCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAocm93LnVpZCA9PT0gdWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkhlYWRlckJ5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENvbHVtbkhlYWRlckJ5VWlkKHRoaXMuZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCkudWlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uSGVhZGVyQnlVaWQgPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvcignW2UtbWFwcGluZ3VpZD0nICsgdWlkICsgJ10nKS5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5CeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KVswXTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uSW5kZXhCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB1dGlsXzEuaXRlcmF0ZUFycmF5T3JPYmplY3QodGhpcy5nZXRDb2x1bW5zKCksIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgIHJldHVybiAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChpbmRleCkgPyBpbmRleCA6IC0xO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5CeVVpZCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaXRlcmF0ZUFycmF5T3JPYmplY3QodGhpcy5nZXRDb2x1bW5zKCksIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnVpZCA9PT0gdWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkluZGV4QnlVaWQgPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB1dGlsXzEuaXRlcmF0ZUFycmF5T3JPYmplY3QodGhpcy5nZXRDb2x1bW5zKCksIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnVpZCA9PT0gdWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgICAgcmV0dXJuICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGluZGV4KSA/IGluZGV4IDogLTE7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFVpZEJ5Q29sdW1uRmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaXRlcmF0ZUFycmF5T3JPYmplY3QodGhpcy5nZXRDb2x1bW5zKCksIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS51aWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KVswXTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Tm9ybWFsaXplZENvbHVtbkluZGV4ID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRDb2x1bW5JbmRleEJ5VWlkKHVpZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggKz0gdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXRhaWwoKSkge1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkZpZWxkTmFtZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uTmFtZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBjb2x1bW47XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5nZXRDb2x1bW5zKCkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSB0aGlzLmdldENvbHVtbnMoKVtpXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uTmFtZXMucHVzaChjb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5OYW1lcztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93VGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3dUZW1wbGF0ZUZuO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXREZXRhaWxUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRldGFpbFRlbXBsYXRlRm47XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFByaW1hcnlLZXlGaWVsZE5hbWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSA9IDAsIGNvbCA9IHRoaXMuY29sdW1ucywgY0xlbiA9IGNvbC5sZW5ndGg7IGtleSA8IGNMZW47IGtleSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbFtrZXldLmlzUHJpbWFyeUtleSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goY29sW2tleV0uZmllbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUucmVmcmVzaFVJKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlZnJlc2hIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZS5yZWZyZXNoVUkoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uTW9kdWxlID8gdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0ZWRSZWNvcmRzIDogW107XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFNlbGVjdGVkUm93SW5kZXhlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZHVsZSA/IHRoaXMuc2VsZWN0aW9uTW9kdWxlLnNlbGVjdGVkUm93SW5kZXhlcyA6IFtdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRTZWxlY3RlZFJvd0NlbGxJbmRleGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uTW9kdWxlLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFNlbGVjdGVkUmVjb3JkcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0Um93cygpLmZpbHRlcihmdW5jdGlvbiAocm93KSB7IHJldHVybiByb3cuaXNTZWxlY3RlZDsgfSlcbiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLmRhdGE7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXREYXRhTW9kdWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTW9kdWxlLmRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNob3dDb2x1bW5zID0gZnVuY3Rpb24gKGtleXMsIHNob3dCeSkge1xuICAgICAgICAgICAgc2hvd0J5ID0gc2hvd0J5ID8gc2hvd0J5IDogJ2hlYWRlclRleHQnO1xuICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuc2hvdyhrZXlzLCBzaG93QnkpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5oaWRlQ29sdW1ucyA9IGZ1bmN0aW9uIChrZXlzLCBoaWRlQnkpIHtcbiAgICAgICAgICAgIGhpZGVCeSA9IGhpZGVCeSA/IGhpZGVCeSA6ICdoZWFkZXJUZXh0JztcbiAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVyLmhpZGUoa2V5cywgaGlkZUJ5KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ29Ub1BhZ2UgPSBmdW5jdGlvbiAocGFnZU5vKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmdvVG9QYWdlKHBhZ2VObyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUV4dGVybmFsTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLnVwZGF0ZUV4dGVybmFsTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc29ydENvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBkaXJlY3Rpb24sIGlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRNb2R1bGUuc29ydENvbHVtbihjb2x1bW5OYW1lLCBkaXJlY3Rpb24sIGlzTXVsdGlTb3J0KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY2xlYXJTb3J0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zb3J0TW9kdWxlLmNsZWFyU29ydGluZygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW1vdmVTb3J0Q29sdW1uID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRNb2R1bGUucmVtb3ZlU29ydENvbHVtbihmaWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmZpbHRlckJ5Q29sdW1uID0gZnVuY3Rpb24gKGZpZWxkTmFtZSwgZmlsdGVyT3BlcmF0b3IsIGZpbHRlclZhbHVlLCBwcmVkaWNhdGUsIG1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWUsIGFjdHVhbE9wZXJhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlck1vZHVsZS5maWx0ZXJCeUNvbHVtbihmaWVsZE5hbWUsIGZpbHRlck9wZXJhdG9yLCBmaWx0ZXJWYWx1ZSwgcHJlZGljYXRlLCBtYXRjaENhc2UsIGFjdHVhbEZpbHRlclZhbHVlLCBhY3R1YWxPcGVyYXRvcik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNsZWFyRmlsdGVyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUuY2xlYXJGaWx0ZXJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCwgaXNDbGVhckZpbHRlckJhcikge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZChmaWVsZCwgaXNDbGVhckZpbHRlckJhcik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNlbGVjdFJvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0Um93KGluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2VsZWN0Um93cyA9IGZ1bmN0aW9uIChyb3dJbmRleGVzKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RSb3dzKHJvd0luZGV4ZXMpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kdWxlLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNlbGVjdENlbGwgPSBmdW5jdGlvbiAoY2VsbEluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RDZWxsKGNlbGxJbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2hTdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoTW9kdWxlLnNlYXJjaChzZWFyY2hTdHJpbmcpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5wcmludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJpbnRNb2R1bGUucHJpbnQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlbGV0ZVJlY29yZChmaWVsZG5hbWUsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zdGFydEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuc3RhcnRFZGl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuY2xvc2VFZGl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuYWRkUmVjb3JkKGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kZWxldGVSb3cgPSBmdW5jdGlvbiAodHIpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5kZWxldGVSb3codHIpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWNhbGNJbmRlbnRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWVtcHR5Y2VsbCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCghdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoICYmICF0aGlzLmlzRGV0YWlsKCkpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWVtcHR5Y2VsbCcpLmdldEF0dHJpYnV0ZSgnaW5kZW50UmVmcmVzaGVkJykgfHxcbiAgICAgICAgICAgICAgICAhdGhpcy5nZXRDb250ZW50VGFibGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbmRlbnRXaWR0aCA9IHRoaXMuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yKCcuZS1lbXB0eWNlbGwnKS5wYXJlbnRFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgdmFyIGhlYWRlckNvbCA9IFtdLnNsaWNlLmNhbGwodGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICB2YXIgY29udGVudENvbCA9IFtdLnNsaWNlLmNhbGwodGhpcy5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNoaWxkTm9kZXMpO1xuICAgICAgICAgICAgdmFyIHBlclBpeGVsID0gaW5kZW50V2lkdGggLyAzMDtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGlmIChwZXJQaXhlbCA+PSAxKSB7XG4gICAgICAgICAgICAgICAgaW5kZW50V2lkdGggPSAoMzAgLyBwZXJQaXhlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIGluZGVudFdpZHRoID0gMzA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoaSA8IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGhlYWRlckNvbFtpXS5zdHlsZS53aWR0aCA9IGluZGVudFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICBjb250ZW50Q29sW2ldLnN0eWxlLndpZHRoID0gaW5kZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5jb2x1bW5XaWR0aENoYW5nZWQsIHsgaW5kZXg6IGksIHdpZHRoOiBpbmRlbnRXaWR0aCB9KTtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0RldGFpbCgpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29sW2ldLnN0eWxlLndpZHRoID0gaW5kZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRDb2xbaV0uc3R5bGUud2lkdGggPSBpbmRlbnRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmNvbHVtbldpZHRoQ2hhbmdlZCwgeyBpbmRleDogaSwgd2lkdGg6IGluZGVudFdpZHRoIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWVtcHR5Y2VsbCcpLnNldEF0dHJpYnV0ZSgnaW5kZW50UmVmcmVzaGVkJywgJ3RydWUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVvcmRlckNvbHVtbnMgPSBmdW5jdGlvbiAoZnJvbUZOYW1lLCB0b0ZOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLnJlb3JkZXJNb2R1bGUucmVvcmRlckNvbHVtbnMoZnJvbUZOYW1lLCB0b0ZOYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYXV0b0ZpdENvbHVtbnMgPSBmdW5jdGlvbiAoZmllbGROYW1lcykge1xuICAgICAgICAgICAgdGhpcy5yZXNpemVNb2R1bGUuYXV0b0ZpdENvbHVtbnMoZmllbGROYW1lcyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNyZWF0ZUNvbHVtbmNob29zZXIgPSBmdW5jdGlvbiAoeCwgeSwgdGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbkNob29zZXJNb2R1bGUucmVuZGVyQ29sdW1uQ2hvb3Nlcih4LCB5LCB0YXJnZXQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5pbml0aWFsaXplU2VydmljZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCd3aWR0aFNlcnZpY2UnLCB0aGlzLndpZHRoU2VydmljZSA9IG5ldyB3aWR0aF9jb250cm9sbGVyXzEuQ29sdW1uV2lkdGhTZXJ2aWNlKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ2NlbGxSZW5kZXJlckZhY3RvcnknLCBuZXcgY2VsbF9yZW5kZXJfZmFjdG9yeV8xLkNlbGxSZW5kZXJlckZhY3RvcnkpO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvci5yZWdpc3RlcigncmVuZGVyZXJGYWN0b3J5JywgbmV3IHJlbmRlcmVyX2ZhY3RvcnlfMS5SZW5kZXJlckZhY3RvcnkpO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvci5yZWdpc3RlcignbG9jYWxpemF0aW9uJywgdGhpcy5sb2NhbGVPYmogPSBuZXcgZWoyX2Jhc2VfNC5MMTBuKHRoaXMuZ2V0TW9kdWxlTmFtZSgpLCB0aGlzLmRlZmF1bHRMb2NhbGUsIHRoaXMubG9jYWxlKSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCd2YWx1ZUZvcm1hdHRlcicsIHRoaXMudmFsdWVGb3JtYXR0ZXJTZXJ2aWNlID0gbmV3IHZhbHVlX2Zvcm1hdHRlcl8xLlZhbHVlRm9ybWF0dGVyKHRoaXMubG9jYWxlKSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdzaG93SGlkZVNlcnZpY2UnLCB0aGlzLnNob3dIaWRlciA9IG5ldyBzaG93X2hpZGVfMS5TaG93SGlkZSh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdhcmlhU2VydmljZScsIHRoaXMuYXJpYVNlcnZpY2UgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnByb2Nlc3NNb2RlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnQ29scyA9IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIHNDb2xzID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBmbGFnO1xuICAgICAgICAgICAgdmFyIGo7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSwgbGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGogPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzTGVuID0gc0NvbHMubGVuZ3RoOyBqIDwgc0xlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc0NvbHNbal0uZmllbGQgPT09IGdDb2xzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzQ29scy5wdXNoKHsgZmllbGQ6IGdDb2xzW2ldLCBkaXJlY3Rpb246ICdhc2NlbmRpbmcnIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNfMS5hbGxvd1NvcnRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEuc29ydGVkQ29sdW1ucy5wdXNoKHNDb2xzW2pdLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNDb2xzW2pdLmRpcmVjdGlvbiA9ICdhc2NlbmRpbmcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpc18xLmdyb3VwU2V0dGluZ3Muc2hvd0dyb3VwZWRDb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzXzEuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMS5jb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZCA9PT0gZ0NvbHNbaV07IH0pWzBdIDogdGhpc18xLmdldENvbHVtbkJ5RmllbGQoZ0NvbHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIHRoaXNfMSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdDb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIF9sb29wXzEoaSwgbGVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJvd1RlbXBsYXRlRm4gPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLnJvd1RlbXBsYXRlKTtcbiAgICAgICAgICAgIHRoaXMuZGV0YWlsVGVtcGxhdGVGbiA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMuZGV0YWlsVGVtcGxhdGUpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucGFyZW50RGV0YWlscykpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucGFyZW50RGV0YWlscy5wYXJlbnRLZXlGaWVsZFZhbHVlKSA/ICd1bmRlZmluZWQnIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnREZXRhaWxzLnBhcmVudEtleUZpZWxkVmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWVyeS53aGVyZSh0aGlzLnF1ZXJ5U3RyaW5nLCAnZXF1YWwnLCB2YWx1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdyaWRSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJUTCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlSG92ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ncmlkaG92ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1kZXZpY2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuZWxlbWVudCwgWydlLXJlc3BvbnNpdmUnLCAnZS1kZWZhdWx0J10sIFtdKTtcbiAgICAgICAgICAgIHZhciByZW5kZXJlckZhY3RvcnkgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUgPSByZW5kZXJlckZhY3RvcnkuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudE1vZHVsZSA9IHJlbmRlcmVyRmFjdG9yeS5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50KTtcbiAgICAgICAgICAgIHRoaXMucHJpbnRNb2R1bGUgPSBuZXcgcHJpbnRfMS5QcmludCh0aGlzLCB0aGlzLnNjcm9sbE1vZHVsZSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck1vZHVsZS5yZW5kZXIoKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRJbml0aWFsaXplcigpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVHcmlkUG9wVXBFbGVtZW50KCk7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZS5zZXRXaWR0aFRvQ29sdW1ucygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVHcmlkTGluZXMoKTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUZXh0V3JhcCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kYXRhUmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5zZXRXaWR0aCgpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUuc2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5oZWlnaHQgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLnNldFBhZGRpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUudXBkYXRlUlRMID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtcnRsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1ydGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY3JlYXRlR3JpZFBvcFVwRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwb3B1cCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyaWRwb3B1cCcsIHN0eWxlczogJ2Rpc3BsYXk6bm9uZTsnIH0pO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jb250ZW50JywgYXR0cnM6IHsgdGFiSW5kZXg6ICctMScgfSB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXBwZW5kKFtjb250ZW50LCBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS11cHRhaWwgZS10YWlsJyB9KV0sIHBvcHVwKTtcbiAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdzcGFuJykpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hcHBlbmQoW2NvbnRlbnQsIGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWRvd250YWlsIGUtdGFpbCcgfSldLCBwb3B1cCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQocG9wdXApO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51cGRhdGVHcmlkTGluZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmVsZW1lbnQsIFtdLCBbJ2UtdmVydGljYWxsaW5lcycsICdlLWhvcml6b250YWxsaW5lcycsICdlLWhpZGVsaW5lcycsICdlLWJvdGhsaW5lcyddKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5ncmlkTGluZXMpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdob3Jpem9udGFsJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtaG9yaXpvbnRhbGxpbmVzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3ZlcnRpY2FsJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtdmVydGljYWxsaW5lcycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtaGlkZWxpbmVzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdGgnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ib3RobGluZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmFwcGx5VGV4dFdyYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1RleHRXcmFwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlclJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jb2x1bW5oZWFkZXInKSk7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnRleHRXcmFwU2V0dGluZ3Mud3JhcE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVhZGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZWxlbWVudCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5nZXRDb250ZW50KCksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKGhlYWRlclJvd3MsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbnRlbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5nZXRDb250ZW50KCksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5lbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcChoZWFkZXJSb3dzLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAoaGVhZGVyUm93cywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVtb3ZlVGV4dFdyYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY29sdW1uaGVhZGVyJykpO1xuICAgICAgICAgICAgdXRpbF8xLndyYXAoaGVhZGVyUm93cywgZmFsc2UpO1xuICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5nZXRDb250ZW50KCksIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMubW91c2VDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ3RvdWNoZW5kJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnZm9jdXNvdXQnLCB0aGlzLmZvY3VzT3V0SGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5nZXRDb250ZW50KCksICdkYmxjbGljaycsIHRoaXMuZGJsQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93S2V5Ym9hcmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudGFiSW5kZXggPSB0aGlzLmVsZW1lbnQudGFiSW5kZXggPT09IC0xID8gMCA6IHRoaXMuZWxlbWVudC50YWJJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRNb2R1bGUgPSBuZXcgZWoyX2Jhc2VfNS5LZXlib2FyZEV2ZW50cyh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBrZXlBY3Rpb246IHRoaXMua2V5QWN0aW9uSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGtleUNvbmZpZ3M6IHRoaXMua2V5Q29uZmlncyxcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdrZXlkb3duJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMubW91c2VDbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ3RvdWNoZW5kJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnZm9jdXNvdXQnLCB0aGlzLmZvY3VzT3V0SGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuZGF0YVJlYWR5LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5yZWNhbGNJbmRlbnRXaWR0aCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVjYWxjSW5kZW50V2lkdGgsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMucmVmcmVzaE1lZGlhQ29sLmJpbmQodGhpcykpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vZmYoZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5kYXRhUmVhZHkpO1xuICAgICAgICAgICAgdGhpcy5vZmYoZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5yZWNhbGNJbmRlbnRXaWR0aCk7XG4gICAgICAgICAgICB0aGlzLm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlY2FsY0luZGVudFdpZHRoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLnJlZnJlc2hNZWRpYUNvbCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldEN1cnJlbnRWaWV3UmVjb3JkcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5hbGxvd0dyb3VwaW5nICYmIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkgP1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhLnJlY29yZHMgOiB0aGlzLmN1cnJlbnRWaWV3RGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUubW91c2VDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGlsZEdyaWQoZSkgfHwgKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRwb3B1cCcpICYmIGUudG91Y2hlcykgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY2xvbmVwcm9wZXJ0aWVzJykubGVuZ3RoIHx8IHRoaXMuY2hlY2tFZGl0KGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCgoIXRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkY29udGVudCcpKSB8fFxuICAgICAgICAgICAgICAgICghKHRoaXMuYWxsb3dHcm91cGluZyB8fCB0aGlzLmFsbG93UmVvcmRlcmluZykgJiYgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGhlYWRlcicpKSkgJiYgZS50b3VjaGVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRoZWFkZXInKSAmJiB0aGlzLmFsbG93Um93RHJhZ0FuZERyb3ApIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuY2xpY2ssIGUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jaGVja0VkaXQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRyID0gdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Jyk7XG4gICAgICAgICAgICB2YXIgaXNFZGl0ID0gdGhpcy5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2JhdGNoJyAmJlxuICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0ICYmIHRyICYmICh0ci5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZWRpdGVkcm93JykgfHwgdHIuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWFkZGVkcm93JykpO1xuICAgICAgICAgICAgcmV0dXJuIGlzRWRpdCB8fCAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Y2VsbCcpICYmXG4gICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Y2VsbCcpLmNsYXNzTGlzdC5jb250YWlucygnZS1lZGl0ZWRiYXRjaGNlbGwnKSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRibENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZCcpLmlkICE9PSB0aGlzLmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuZGJsY2xpY2ssIGUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5mb2N1c091dEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGlsZEdyaWQoZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZpbHRlckNsZWFyID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNhbmNlbDpub3QoLmUtaGlkZSknKTtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJDbGVhcikge1xuICAgICAgICAgICAgICAgIGZpbHRlckNsZWFyLmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5pc0NoaWxkR3JpZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ3JpZEVsZW1lbnQgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkJyk7XG4gICAgICAgICAgICBpZiAoZ3JpZEVsZW1lbnQgJiYgZ3JpZEVsZW1lbnQuaWQgIT09IHRoaXMuZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5pc0RldGFpbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmRldGFpbFRlbXBsYXRlKSB8fCAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNoaWxkR3JpZCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmtleUFjdGlvbkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGlsZEdyaWQoZSkgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5pc0VkaXQgJiYgZS5hY3Rpb24gIT09ICdlc2NhcGUnICYmIGUuYWN0aW9uICE9PSAnZW50ZXInICYmIGUuYWN0aW9uICE9PSAndGFiJyAmJiBlLmFjdGlvbiAhPT0gJ3NoaWZ0VGFiJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0tleWJvYXJkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuYWN0aW9uID09PSAnY3RybFBsdXNQJykge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpbnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmtleVByZXNzZWQsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZXRJbmplY3RlZE1vZHVsZXMgPSBmdW5jdGlvbiAobW9kdWxlcykge1xuICAgICAgICAgICAgdGhpcy5pbmplY3RlZE1vZHVsZXMgPSBtb2R1bGVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51cGRhdGVDb2x1bW5PYmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB1dGlsXzEucHJlcGFyZUNvbHVtbnModGhpcy5jb2x1bW5zLCB0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRpbmcgfHwgdGhpcy5lZGl0U2V0dGluZ3MuYWxsb3dBZGRpbmcgfHwgdGhpcy5lZGl0U2V0dGluZ3MuYWxsb3dEZWxldGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5hdXRvQ29sLCB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlZnJlc2hDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5PYmplY3QoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5leGNlbEV4cG9ydCA9IGZ1bmN0aW9uIChleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhjZWxFeHBvcnRNb2R1bGUuTWFwKHRoaXMsIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNzdkV4cG9ydCA9IGZ1bmN0aW9uIChleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhjZWxFeHBvcnRNb2R1bGUuTWFwKHRoaXMsIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucGRmRXhwb3J0ID0gZnVuY3Rpb24gKGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHBkZkRvYykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGRmRXhwb3J0TW9kdWxlLk1hcCh0aGlzLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCBwZGZEb2MpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JpZDtcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoW10pXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZW5hYmxlQWx0Um93XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVIb3ZlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dLZXlib2FyZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93VGV4dFdyYXBcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBUZXh0V3JhcFNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInRleHRXcmFwU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1BhZ2luZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIHBhZ2Vfc2V0dGluZ3NfMS5QYWdlU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicGFnZVNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZW5hYmxlVmlydHVhbGl6YXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIFNlYXJjaFNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNlYXJjaFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dTb3J0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dFeGNlbEV4cG9ydFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93UGRmRXhwb3J0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgU29ydFNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNvcnRTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dTZWxlY3Rpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgtMSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJzZWxlY3RlZFJvd0luZGV4XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgU2VsZWN0aW9uU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic2VsZWN0aW9uU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd0ZpbHRlcmluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93UmVvcmRlcmluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93UmVzaXppbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1Jvd0RyYWdBbmREcm9wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgUm93RHJvcFNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd0Ryb3BTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIEZpbHRlclNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImZpbHRlclNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dHcm91cGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIEdyb3VwU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZ3JvdXBTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIEVkaXRTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlZGl0U2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBhZ2dyZWdhdGVfMS5BZ2dyZWdhdGVSb3cpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWdncmVnYXRlc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNob3dDb2x1bW5DaG9vc2VyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdkZWZhdWx0JylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJncmlkTGluZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93VGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZGV0YWlsVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2hpbGRHcmlkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInF1ZXJ5U3RyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2FsbHBhZ2VzJylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJwcmludE1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShbXSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkYXRhU291cmNlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInF1ZXJ5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInRvb2xiYXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidG9vbGJhclRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNyZWF0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZGVzdHJveWVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImxvYWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RGF0YUJvdW5kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInF1ZXJ5Q2VsbEluZm9cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWN0aW9uQmVnaW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWN0aW9uQ29tcGxldGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWN0aW9uRmFpbHVyZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkYXRhQm91bmRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93U2VsZWN0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd1NlbGVjdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd0Rlc2VsZWN0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd0Rlc2VsZWN0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2VsbFNlbGVjdGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsU2VsZWN0ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2VsbERlc2VsZWN0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxEZXNlbGVjdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbHVtbkRyYWdTdGFydFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb2x1bW5EcmFnXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNvbHVtbkRyb3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicHJpbnRDb21wbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVQcmludFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJwZGZRdWVyeUNlbGxJbmZvXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImV4Y2VsUXVlcnlDZWxsSW5mb1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkZXRhaWxEYXRhQm91bmRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RHJhZ1N0YXJ0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd0RyYWdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RHJvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJ0b29sYmFyQ2xpY2tcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVmb3JlT3BlbkNvbHVtbkNob29zZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmF0Y2hBZGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmF0Y2hEZWxldGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVmb3JlQmF0Y2hBZGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVmb3JlQmF0Y2hEZWxldGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVmb3JlQmF0Y2hTYXZlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZ2luRWRpdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsRWRpdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsU2F2ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyZXNpemVTdGFydFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJvblJlc2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyZXNpemVTdG9wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZURhdGFCb3VuZFwiLCB2b2lkIDApO1xuICAgIEdyaWQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBHcmlkKTtcbiAgICBleHBvcnRzLkdyaWQgPSBHcmlkO1xuICAgIEdyaWQuSW5qZWN0KHNlbGVjdGlvbl8xLlNlbGVjdGlvbik7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYmFzZS9ncmlkLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBWYWx1ZUZvcm1hdHRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFZhbHVlRm9ybWF0dGVyKGN1bHR1cmVOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmludGwgPSBuZXcgZWoyX2Jhc2VfMi5JbnRlcm5hdGlvbmFsaXphdGlvbigpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGN1bHR1cmVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW50bC5jdWx0dXJlID0gY3VsdHVyZU5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgVmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLmdldEZvcm1hdEZ1bmN0aW9uID0gZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgICAgICAgICAgaWYgKGZvcm1hdC50eXBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50bC5nZXREYXRlRm9ybWF0KGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRsLmdldE51bWJlckZvcm1hdChmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuZ2V0UGFyc2VyRnVuY3Rpb24gPSBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAoZm9ybWF0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRsLmdldERhdGVQYXJzZXIoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGwuZ2V0TnVtYmVyUGFyc2VyKGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZhbHVlRm9ybWF0dGVyLnByb3RvdHlwZS5mcm9tVmlldyA9IGZ1bmN0aW9uICh2YWx1ZSwgZm9ybWF0LCB0eXBlKSB7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2RhdGUnIHx8IHR5cGUgPT09ICdkYXRldGltZScgfHwgdHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLnRvVmlldyA9IGZ1bmN0aW9uICh2YWx1ZSwgZm9ybWF0KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZm9ybWF0KSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmb3JtYXQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgVmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLnNldEN1bHR1cmUgPSBmdW5jdGlvbiAoY3VsdHVyZU5hbWUpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjdWx0dXJlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnNldEN1bHR1cmUoY3VsdHVyZU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmFsdWVGb3JtYXR0ZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlZhbHVlRm9ybWF0dGVyID0gVmFsdWVGb3JtYXR0ZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vbW9kZWxzL2NvbHVtblwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9kYXRhXzEsIGNvbHVtbl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIGZ1bmN0aW9uIGRvZXNJbXBsZW1lbnRJbnRlcmZhY2UodGFyZ2V0LCBjaGVja0Zvcikge1xuICAgICAgICByZXR1cm4gdGFyZ2V0LnByb3RvdHlwZSAmJiBjaGVja0ZvciBpbiB0YXJnZXQucHJvdG90eXBlO1xuICAgIH1cbiAgICBleHBvcnRzLmRvZXNJbXBsZW1lbnRJbnRlcmZhY2UgPSBkb2VzSW1wbGVtZW50SW50ZXJmYWNlO1xuICAgIGZ1bmN0aW9uIHZhbHVlQWNjZXNzb3IoZmllbGQsIGRhdGEsIGNvbHVtbikge1xuICAgICAgICBmaWVsZCA9IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZmllbGQpID8gJycgOiBmaWVsZDtcbiAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuZ2V0VmFsdWUoZmllbGQsIGRhdGEpO1xuICAgIH1cbiAgICBleHBvcnRzLnZhbHVlQWNjZXNzb3IgPSB2YWx1ZUFjY2Vzc29yO1xuICAgIGZ1bmN0aW9uIGdldFVwZGF0ZVVzaW5nUmFmKHVwZGF0ZUZ1bmN0aW9uLCBjYWxsQmFjaykge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjYWxsQmFjayhudWxsLCB1cGRhdGVGdW5jdGlvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY2FsbEJhY2soZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFVwZGF0ZVVzaW5nUmFmID0gZ2V0VXBkYXRlVXNpbmdSYWY7XG4gICAgZnVuY3Rpb24gaXRlcmF0ZUFycmF5T3JPYmplY3QoY29sbGVjdGlvbiwgcHJlZGljYXRlKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbGxlY3Rpb24ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwcmVkID0gcHJlZGljYXRlKGNvbGxlY3Rpb25baV0sIGkpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHByZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocHJlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZXhwb3J0cy5pdGVyYXRlQXJyYXlPck9iamVjdCA9IGl0ZXJhdGVBcnJheU9yT2JqZWN0O1xuICAgIGZ1bmN0aW9uIHRlbXBsYXRlQ29tcGlsZXIodGVtcGxhdGUpIHtcbiAgICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGVtcGxhdGUpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMS5jb21waWxlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGVtcGxhdGUpLmlubmVySFRNTC50cmltKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuY29tcGlsZSh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZXhwb3J0cy50ZW1wbGF0ZUNvbXBpbGVyID0gdGVtcGxhdGVDb21waWxlcjtcbiAgICBmdW5jdGlvbiBzZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY3VzdG9tQXR0cmlidXRlcykge1xuICAgICAgICB2YXIgY29weUF0dHIgPSB7fTtcbiAgICAgICAgdmFyIGxpdGVyYWxzID0gWydzdHlsZScsICdjbGFzcyddO1xuICAgICAgICBlajJfYmFzZV8yLmV4dGVuZChjb3B5QXR0ciwgY3VzdG9tQXR0cmlidXRlcywge30pO1xuICAgICAgICBpZiAoJ3N0eWxlJyBpbiBjb3B5QXR0cikge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5zZXRTdHlsZUF0dHJpYnV0ZShub2RlLCBjb3B5QXR0cltsaXRlcmFsc1swXV0pO1xuICAgICAgICAgICAgZGVsZXRlIGNvcHlBdHRyW2xpdGVyYWxzWzBdXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ2NsYXNzJyBpbiBjb3B5QXR0cikge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hZGRDbGFzcyhbbm9kZV0sIGNvcHlBdHRyW2xpdGVyYWxzWzFdXSk7XG4gICAgICAgICAgICBkZWxldGUgY29weUF0dHJbbGl0ZXJhbHNbMV1dO1xuICAgICAgICB9XG4gICAgICAgIGVqMl9iYXNlXzMuYXR0cmlidXRlcyhub2RlLCBjb3B5QXR0cik7XG4gICAgfVxuICAgIGV4cG9ydHMuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzID0gc2V0U3R5bGVBbmRBdHRyaWJ1dGVzO1xuICAgIGZ1bmN0aW9uIGV4dGVuZChjb3BpZWQsIGZpcnN0LCBzZWNvbmQsIGV4Y2x1ZGUpIHtcbiAgICAgICAgdmFyIG1vdmVkID0gZWoyX2Jhc2VfMi5leHRlbmQoY29waWVkLCBmaXJzdCwgc2Vjb25kKTtcbiAgICAgICAgT2JqZWN0LmtleXMobW92ZWQpLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGV4Y2x1ZGUuaW5kZXhPZih2YWx1ZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG1vdmVkW3ZhbHVlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtb3ZlZDtcbiAgICB9XG4gICAgZXhwb3J0cy5leHRlbmQgPSBleHRlbmQ7XG4gICAgZnVuY3Rpb24gcHJlcGFyZUNvbHVtbnMoY29sdW1ucywgYXV0b1dpZHRoKSB7XG4gICAgICAgIGZvciAodmFyIGMgPSAwLCBsZW4gPSBjb2x1bW5zLmxlbmd0aDsgYyA8IGxlbjsgYysrKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdm9pZCAwO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb2x1bW5zW2NdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGNvbHVtbiA9IG5ldyBjb2x1bW5fMS5Db2x1bW4oeyBmaWVsZDogY29sdW1uc1tjXSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCEoY29sdW1uc1tjXSBpbnN0YW5jZW9mIGNvbHVtbl8xLkNvbHVtbikpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbHVtbnNbY10uY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBuZXcgY29sdW1uXzEuQ29sdW1uKGNvbHVtbnNbY10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gbmV3IGNvbHVtbl8xLkNvbHVtbihjb2x1bW5zW2NdKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tjXS5jb2x1bW5zID0gcHJlcGFyZUNvbHVtbnMoY29sdW1uc1tjXS5jb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBjb2x1bW5zW2NdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sdW1uLmhlYWRlclRleHQgPSBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5oZWFkZXJUZXh0KSA/IGNvbHVtbi5maWVsZCB8fCAnJyA6IGNvbHVtbi5oZWFkZXJUZXh0O1xuICAgICAgICAgICAgY29sdW1uLnZhbHVlQWNjZXNzb3IgPSBjb2x1bW4udmFsdWVBY2Nlc3NvciB8fCB2YWx1ZUFjY2Vzc29yO1xuICAgICAgICAgICAgY29sdW1uLndpZHRoID0gYXV0b1dpZHRoICYmIGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLndpZHRoKSA/IDIwMCA6IGNvbHVtbi53aWR0aDtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi52aXNpYmxlKSkge1xuICAgICAgICAgICAgICAgIGNvbHVtbi52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHVtbnNbY10gPSBjb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbHVtbnM7XG4gICAgfVxuICAgIGV4cG9ydHMucHJlcGFyZUNvbHVtbnMgPSBwcmVwYXJlQ29sdW1ucztcbiAgICBmdW5jdGlvbiBzZXRDc3NJbkdyaWRQb3BVcChwb3BVcCwgZSwgY2xhc3NOYW1lKSB7XG4gICAgICAgIHZhciBwb3BVcFNwYW4gPSBwb3BVcC5xdWVyeVNlbGVjdG9yKCdzcGFuJyk7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHBvcFVwLnBhcmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciB0YXJnZXRQb3NpdGlvbiA9IGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgaXNCb3R0b21UYWlsO1xuICAgICAgICBwb3BVcFNwYW4uY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgICAgICBwb3BVcC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIGlzQm90dG9tVGFpbCA9IChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUuY2xpZW50WSkgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkgOlxuICAgICAgICAgICAgZS5jbGllbnRZKSA+IHBvcFVwLm9mZnNldEhlaWdodCArIDEwO1xuICAgICAgICBwb3BVcC5zdHlsZS50b3AgPSB0YXJnZXRQb3NpdGlvbi50b3AgLSBwb3NpdGlvbi50b3AgK1xuICAgICAgICAgICAgKGlzQm90dG9tVGFpbCA/IC0ocG9wVXAub2Zmc2V0SGVpZ2h0ICsgMTApIDogcG9wVXAub2Zmc2V0SGVpZ2h0ICsgMTApICsgJ3B4JztcbiAgICAgICAgcG9wVXAuc3R5bGUubGVmdCA9IGdldFBvcHVwTGVmdFBvc2l0aW9uKHBvcFVwLCBlLCB0YXJnZXRQb3NpdGlvbiwgcG9zaXRpb24ubGVmdCkgKyAncHgnO1xuICAgICAgICBpZiAoaXNCb3R0b21UYWlsKSB7XG4gICAgICAgICAgICBwb3BVcC5xdWVyeVNlbGVjdG9yKCcuZS1kb3dudGFpbCcpLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIHBvcFVwLnF1ZXJ5U2VsZWN0b3IoJy5lLXVwdGFpbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwb3BVcC5xdWVyeVNlbGVjdG9yKCcuZS1kb3dudGFpbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBwb3BVcC5xdWVyeVNlbGVjdG9yKCcuZS11cHRhaWwnKS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5zZXRDc3NJbkdyaWRQb3BVcCA9IHNldENzc0luR3JpZFBvcFVwO1xuICAgIGZ1bmN0aW9uIGdldFBvcHVwTGVmdFBvc2l0aW9uKHBvcHVwLCBlLCB0YXJnZXRQb3NpdGlvbiwgbGVmdCkge1xuICAgICAgICB2YXIgd2lkdGggPSBwb3B1cC5vZmZzZXRXaWR0aCAvIDI7XG4gICAgICAgIHZhciB4ID0gZ2V0UG9zaXRpb24oZSkueDtcbiAgICAgICAgaWYgKHggLSB0YXJnZXRQb3NpdGlvbi5sZWZ0IDwgd2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRQb3NpdGlvbi5sZWZ0IC0gbGVmdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0YXJnZXRQb3NpdGlvbi5yaWdodCAtIHggPCB3aWR0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFBvc2l0aW9uLnJpZ2h0IC0gbGVmdCAtIHdpZHRoICogMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB4IC0gbGVmdCAtIHdpZHRoO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEFjdHVhbFByb3BlcnRpZXMob2JqKSB7XG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmdldFZhbHVlKCdwcm9wZXJ0aWVzJywgb2JqKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5nZXRBY3R1YWxQcm9wZXJ0aWVzID0gZ2V0QWN0dWFsUHJvcGVydGllcztcbiAgICBmdW5jdGlvbiBwYXJlbnRzVW50aWwoZWxlbSwgc2VsZWN0b3IsIGlzSUQpIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IGVsZW07XG4gICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICAgIGlmIChpc0lEID8gcGFyZW50LmlkID09PSBzZWxlY3RvciA6IHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgIH1cbiAgICBleHBvcnRzLnBhcmVudHNVbnRpbCA9IHBhcmVudHNVbnRpbDtcbiAgICBmdW5jdGlvbiBnZXRFbGVtZW50SW5kZXgoZWxlbWVudCwgZWxlbWVudHMpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRzW2ldLmlzRXF1YWxOb2RlKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRFbGVtZW50SW5kZXggPSBnZXRFbGVtZW50SW5kZXg7XG4gICAgZnVuY3Rpb24gaW5BcnJheSh2YWx1ZSwgY29sbGVjdGlvbikge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sbGVjdGlvbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb25baV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBleHBvcnRzLmluQXJyYXkgPSBpbkFycmF5O1xuICAgIGZ1bmN0aW9uIGdldEFjdHVhbFByb3BGcm9tQ29sbChjb2xsZWN0aW9uKSB7XG4gICAgICAgIHZhciBjb2xsID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbltpXS5oYXNPd25Qcm9wZXJ0eSgncHJvcGVydGllcycpKSB7XG4gICAgICAgICAgICAgICAgY29sbC5wdXNoKGNvbGxlY3Rpb25baV0ucHJvcGVydGllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2xsLnB1c2goY29sbGVjdGlvbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbGw7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0QWN0dWFsUHJvcEZyb21Db2xsID0gZ2V0QWN0dWFsUHJvcEZyb21Db2xsO1xuICAgIGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQodGFyZ2V0LCBzZWxlY3Rvcikge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBbXS5zbGljZS5jYWxsKHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKGVsZW1lbnRzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLnJlbW92ZUVsZW1lbnQgPSByZW1vdmVFbGVtZW50O1xuICAgIGZ1bmN0aW9uIGdldFBvc2l0aW9uKGUpIHtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0ge307XG4gICAgICAgIHBvc2l0aW9uLnggPSAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLmNsaWVudFgpID8gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYIDpcbiAgICAgICAgICAgIGUuY2xpZW50WCk7XG4gICAgICAgIHBvc2l0aW9uLnkgPSAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLmNsaWVudFkpID8gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZIDpcbiAgICAgICAgICAgIGUuY2xpZW50WSk7XG4gICAgICAgIHJldHVybiBwb3NpdGlvbjtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRQb3NpdGlvbiA9IGdldFBvc2l0aW9uO1xuICAgIHZhciB1aWQgPSAwO1xuICAgIGZ1bmN0aW9uIGdldFVpZChwcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIHByZWZpeCArIHVpZCsrO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFVpZCA9IGdldFVpZDtcbiAgICBmdW5jdGlvbiBhcHBlbmRDaGlsZHJlbihlbGVtLCBjaGlsZHJlbikge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChsZW4gPT09IGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGVsZW0uYXBwZW5kQ2hpbGQoY2hpbGRyZW5baV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChjaGlsZHJlblswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgfVxuICAgIGV4cG9ydHMuYXBwZW5kQ2hpbGRyZW4gPSBhcHBlbmRDaGlsZHJlbjtcbiAgICBmdW5jdGlvbiBwYXJlbnRzKGVsZW0sIHNlbGVjdG9yLCBpc0lEKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBlbGVtO1xuICAgICAgICB2YXIgcGFyZW50cyA9IFtdO1xuICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgICBpZiAoaXNJRCA/IHBhcmVudC5pZCA9PT0gc2VsZWN0b3IgOiBwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudHM7XG4gICAgfVxuICAgIGV4cG9ydHMucGFyZW50cyA9IHBhcmVudHM7XG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlQWdncmVnYXRlKHR5cGUsIGRhdGEsIGNvbHVtbiwgY29udGV4dCkge1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2N1c3RvbScpIHtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW4uY3VzdG9tQWdncmVnYXRlID8gY29sdW1uLmN1c3RvbUFnZ3JlZ2F0ZS5jYWxsKGNvbnRleHQsIGRhdGEsIGNvbHVtbikgOiAnJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWoyX2RhdGFfMS5EYXRhVXRpbC5hZ2dyZWdhdGVzW3R5cGVdKGRhdGEsIGNvbHVtbi5maWVsZCk7XG4gICAgfVxuICAgIGV4cG9ydHMuY2FsY3VsYXRlQWdncmVnYXRlID0gY2FsY3VsYXRlQWdncmVnYXRlO1xuICAgIHZhciBzY3JvbGxXaWR0aCA9IG51bGw7XG4gICAgZnVuY3Rpb24gZ2V0U2Nyb2xsQmFyV2lkdGgoKSB7XG4gICAgICAgIGlmIChzY3JvbGxXaWR0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkaXZOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHZhciB2YWx1ZSA9IDA7XG4gICAgICAgIGRpdk5vZGUuc3R5bGUuY3NzVGV4dCA9ICd3aWR0aDoxMDBweDtoZWlnaHQ6IDEwMHB4O292ZXJmbG93OiBzY3JvbGw7cG9zaXRpb246IGFic29sdXRlO3RvcDogLTk5OTlweDsnO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdk5vZGUpO1xuICAgICAgICB2YWx1ZSA9IChkaXZOb2RlLm9mZnNldFdpZHRoIC0gZGl2Tm9kZS5jbGllbnRXaWR0aCkgfCAwO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdk5vZGUpO1xuICAgICAgICByZXR1cm4gc2Nyb2xsV2lkdGggPSB2YWx1ZTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRTY3JvbGxCYXJXaWR0aCA9IGdldFNjcm9sbEJhcldpZHRoO1xuICAgIHZhciByb3dIZWlnaHQ7XG4gICAgZnVuY3Rpb24gZ2V0Um93SGVpZ2h0KGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHJvd0hlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gcm93SGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7IGNsYXNzTmFtZTogJ2UtdGFibGUnLCBzdHlsZXM6ICd2aXNpYmlsaXR5OiBoaWRkZW4nIH0pO1xuICAgICAgICB0YWJsZS5pbm5lckhUTUwgPSAnPHRyPjx0ZCBjbGFzcz1cImUtcm93Y2VsbFwiPkE8dGQ+PC90cj4nO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgdmFyIHJlY3QgPSB0YWJsZS5xdWVyeVNlbGVjdG9yKCd0ZCcpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKHRhYmxlKTtcbiAgICAgICAgcm93SGVpZ2h0ID0gTWF0aC5jZWlsKHJlY3QuaGVpZ2h0KTtcbiAgICAgICAgcmV0dXJuIHJvd0hlaWdodDtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRSb3dIZWlnaHQgPSBnZXRSb3dIZWlnaHQ7XG4gICAgZnVuY3Rpb24gaXNFZGl0YWJsZShjb2wsIHR5cGUsIGVsZW0pIHtcbiAgICAgICAgdmFyIHJvdyA9IHBhcmVudHNVbnRpbChlbGVtLCAnZS1yb3cnKTtcbiAgICAgICAgdmFyIGlzT2xkUm93ID0gIXJvdyA/IHRydWUgOiByb3cgJiYgIXJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5zZXJ0ZWRyb3cnKTtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdiZWdpbkVkaXQnICYmIGlzT2xkUm93KSB7XG4gICAgICAgICAgICBpZiAoY29sLmlzSWRlbnRpdHkgfHwgY29sLmlzUHJpbWFyeUtleSB8fCAhY29sLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGlzT2xkUm93ICYmICFjb2wuYWxsb3dFZGl0aW5nICYmICFjb2wuaXNJZGVudGl0eSAmJiAhY29sLmlzUHJpbWFyeUtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuaXNFZGl0YWJsZSA9IGlzRWRpdGFibGU7XG4gICAgZnVuY3Rpb24gaXNBY3Rpb25QcmV2ZW50KGluc3QpIHtcbiAgICAgICAgdmFyIGRsZyA9IGluc3QuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGluc3QuZWxlbWVudC5pZCArICdFZGl0Q29uZmlybScpO1xuICAgICAgICByZXR1cm4gaW5zdC5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2JhdGNoJyAmJlxuICAgICAgICAgICAgKGluc3QuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS11cGRhdGVkdGQnKS5sZW5ndGgpICYmXG4gICAgICAgICAgICAoZGxnID8gZGxnLmNsYXNzTGlzdC5jb250YWlucygnZS1wb3B1cC1jbG9zZScpIDogdHJ1ZSk7XG4gICAgfVxuICAgIGV4cG9ydHMuaXNBY3Rpb25QcmV2ZW50ID0gaXNBY3Rpb25QcmV2ZW50O1xuICAgIGZ1bmN0aW9uIHdyYXAoZWxlbSwgYWN0aW9uKSB7XG4gICAgICAgIHZhciBjbE5hbWUgPSAnZS13cmFwJztcbiAgICAgICAgZWxlbSA9IGVsZW0gaW5zdGFuY2VvZiBBcnJheSA/IGVsZW0gOiBbZWxlbV07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYWN0aW9uID8gZWxlbVtpXS5jbGFzc0xpc3QuYWRkKGNsTmFtZSkgOiBlbGVtW2ldLmNsYXNzTGlzdC5yZW1vdmUoY2xOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLndyYXAgPSB3cmFwO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2Jhc2UvdXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfN19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIlxuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL3NlcnZpY2VzL3ZhbHVlLWZvcm1hdHRlclwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHZhbHVlX2Zvcm1hdHRlcl8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENvbHVtbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbHVtbihvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmFsbG93U29ydGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFsbG93UmVzaXppbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hbGxvd0ZpbHRlcmluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFsbG93R3JvdXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hbGxvd0VkaXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zaG93SW5Db2x1bW5DaG9vc2VyID0gdHJ1ZTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEubWVyZ2UodGhpcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnVpZCA9IHV0aWxfMS5nZXRVaWQoJ2dyaWQtY29sdW1uJyk7XG4gICAgICAgICAgICB2YXIgdmFsdWVGb3JtYXR0ZXIgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZvcm1hdCAmJiAob3B0aW9ucy5mb3JtYXQuc2tlbGV0b24gfHwgb3B0aW9ucy5mb3JtYXQuZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9ybWF0dGVyKHZhbHVlRm9ybWF0dGVyLmdldEZvcm1hdEZ1bmN0aW9uKG9wdGlvbnMuZm9ybWF0KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQYXJzZXIodmFsdWVGb3JtYXR0ZXIuZ2V0UGFyc2VyRnVuY3Rpb24ob3B0aW9ucy5mb3JtYXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5maWVsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dGaWx0ZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93R3JvdXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93U29ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm4gPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLnRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmdldEZvcm1hdHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdEZuO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLnNldEZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5mb3JtYXRGbiA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmdldFBhcnNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlckZuO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLnNldFBhcnNlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJzZXJGbiA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmdldENvbHVtblRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVGbjtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uLnByb3RvdHlwZS5nZXREb21TZXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlSHRtbEVuY29kZSA/ICd0ZXh0Q29udGVudCcgOiAnaW5uZXJIVE1MJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbHVtbjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29sdW1uID0gQ29sdW1uO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9jb2x1bW4uanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBleHBvcnRzLmNyZWF0ZWQgPSAnY3JlYXRlJztcbiAgICBleHBvcnRzLmRlc3Ryb3llZCA9ICdkZXN0cm95JztcbiAgICBleHBvcnRzLmxvYWQgPSAnbG9hZCc7XG4gICAgZXhwb3J0cy5yb3dEYXRhQm91bmQgPSAncm93RGF0YUJvdW5kJztcbiAgICBleHBvcnRzLnF1ZXJ5Q2VsbEluZm8gPSAncXVlcnlDZWxsSW5mbyc7XG4gICAgZXhwb3J0cy5hY3Rpb25CZWdpbiA9ICdhY3Rpb25CZWdpbic7XG4gICAgZXhwb3J0cy5hY3Rpb25Db21wbGV0ZSA9ICdhY3Rpb25Db21wbGV0ZSc7XG4gICAgZXhwb3J0cy5hY3Rpb25GYWlsdXJlID0gJ2FjdGlvbkZhaWx1cmUnO1xuICAgIGV4cG9ydHMuZGF0YUJvdW5kID0gJ2RhdGFCb3VuZCc7XG4gICAgZXhwb3J0cy5yb3dTZWxlY3RpbmcgPSAncm93U2VsZWN0aW5nJztcbiAgICBleHBvcnRzLnJvd1NlbGVjdGVkID0gJ3Jvd1NlbGVjdGVkJztcbiAgICBleHBvcnRzLnJvd0Rlc2VsZWN0aW5nID0gJ3Jvd0Rlc2VsZWN0aW5nJztcbiAgICBleHBvcnRzLnJvd0Rlc2VsZWN0ZWQgPSAncm93RGVzZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5jZWxsU2VsZWN0aW5nID0gJ2NlbGxTZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY2VsbFNlbGVjdGVkID0gJ2NlbGxTZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5jZWxsRGVzZWxlY3RpbmcgPSAnY2VsbERlc2VsZWN0aW5nJztcbiAgICBleHBvcnRzLmNlbGxEZXNlbGVjdGVkID0gJ2NlbGxEZXNlbGVjdGVkJztcbiAgICBleHBvcnRzLmNvbHVtbkRyYWdTdGFydCA9ICdjb2x1bW5EcmFnU3RhcnQnO1xuICAgIGV4cG9ydHMuY29sdW1uRHJhZyA9ICdjb2x1bW5EcmFnJztcbiAgICBleHBvcnRzLmNvbHVtbkRyb3AgPSAnY29sdW1uRHJvcCc7XG4gICAgZXhwb3J0cy5yb3dEcmFnU3RhcnQgPSAncm93RHJhZ1N0YXJ0JztcbiAgICBleHBvcnRzLnJvd0RyYWcgPSAncm93RHJhZyc7XG4gICAgZXhwb3J0cy5yb3dEcm9wID0gJ3Jvd0Ryb3AnO1xuICAgIGV4cG9ydHMuYmVmb3JlUHJpbnQgPSAnYmVmb3JlUHJpbnQnO1xuICAgIGV4cG9ydHMucHJpbnRDb21wbGV0ZSA9ICdwcmludENvbXBsZXRlJztcbiAgICBleHBvcnRzLmRldGFpbERhdGFCb3VuZCA9ICdkZXRhaWxEYXRhQm91bmQnO1xuICAgIGV4cG9ydHMudG9vbGJhckNsaWNrID0gJ3Rvb2xiYXJDbGljayc7XG4gICAgZXhwb3J0cy5iYXRjaEFkZCA9ICdiYXRjaEFkZCc7XG4gICAgZXhwb3J0cy5iYXRjaERlbGV0ZSA9ICdiYXRjaERlbGV0ZSc7XG4gICAgZXhwb3J0cy5iZWZvcmVCYXRjaEFkZCA9ICdiZWZvcmVCYXRjaEFkZCc7XG4gICAgZXhwb3J0cy5iZWZvcmVCYXRjaERlbGV0ZSA9ICdiZWZvcmVCYXRjaERlbGV0ZSc7XG4gICAgZXhwb3J0cy5iZWZvcmVCYXRjaFNhdmUgPSAnYmVmb3JlQmF0Y2hTYXZlJztcbiAgICBleHBvcnRzLmJlZ2luRWRpdCA9ICdiZWdpbkVkaXQnO1xuICAgIGV4cG9ydHMuY2VsbEVkaXQgPSAnY2VsbEVkaXQnO1xuICAgIGV4cG9ydHMuY2VsbFNhdmUgPSAnY2VsbFNhdmUnO1xuICAgIGV4cG9ydHMuZW5kQWRkID0gJ2VuZEFkZCc7XG4gICAgZXhwb3J0cy5lbmREZWxldGUgPSAnZW5kRGVsZXRlJztcbiAgICBleHBvcnRzLmVuZEVkaXQgPSAnZW5kRWRpdCc7XG4gICAgZXhwb3J0cy5yZWNvcmREb3VibGVDbGljayA9ICdyZWNvcmREb3VibGVDbGljayc7XG4gICAgZXhwb3J0cy5yZWNvcmRDbGljayA9ICdyZWNvcmRDbGljayc7XG4gICAgZXhwb3J0cy5iZWZvcmVEYXRhQm91bmQgPSAnYmVmb3JlRGF0YUJvdW5kJztcbiAgICBleHBvcnRzLmJlZm9yZU9wZW5Db2x1bW5DaG9vc2VyID0gJ2JlZm9yZU9wZW5Db2x1bW5DaG9vc2VyJztcbiAgICBleHBvcnRzLnJlc2l6ZVN0YXJ0ID0gJ3Jlc2l6ZVN0YXJ0JztcbiAgICBleHBvcnRzLm9uUmVzaXplID0gJ29uUmVzaXplJztcbiAgICBleHBvcnRzLnJlc2l6ZVN0b3AgPSAncmVzaXplU3RvcCc7XG4gICAgZXhwb3J0cy5pbml0aWFsTG9hZCA9ICdpbml0aWFsLWxvYWQnO1xuICAgIGV4cG9ydHMuaW5pdGlhbEVuZCA9ICdpbml0aWFsLWVuZCc7XG4gICAgZXhwb3J0cy5kYXRhUmVhZHkgPSAnZGF0YS1yZWFkeSc7XG4gICAgZXhwb3J0cy5jb250ZW50UmVhZHkgPSAnY29udGVudC1yZWFkeSc7XG4gICAgZXhwb3J0cy51aVVwZGF0ZSA9ICd1aS11cGRhdGUnO1xuICAgIGV4cG9ydHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCA9ICdpbmJvdW5kLW1vZGVsLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMubW9kZWxDaGFuZ2VkID0gJ21vZGVsLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMuY29sR3JvdXBSZWZyZXNoID0gJ2NvbGdyb3VwLXJlZnJlc2gnO1xuICAgIGV4cG9ydHMuaGVhZGVyUmVmcmVzaGVkID0gJ2hlYWRlci1yZWZyZXNoZWQnO1xuICAgIGV4cG9ydHMucGFnZUJlZ2luID0gJ3BhZ2luZy1iZWdpbic7XG4gICAgZXhwb3J0cy5wYWdlQ29tcGxldGUgPSAncGFnaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnNvcnRCZWdpbiA9ICdzb3J0aW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnNvcnRDb21wbGV0ZSA9ICdzb3J0aW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLmZpbHRlckJlZ2luID0gJ2ZpbHRlcmluZy1iZWdpbic7XG4gICAgZXhwb3J0cy5maWx0ZXJDb21wbGV0ZSA9ICdmaWx0ZXJpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMuc2VhcmNoQmVnaW4gPSAnc2VhcmNoaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnNlYXJjaENvbXBsZXRlID0gJ3NlYXJjaGluZy1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5yZW9yZGVyQmVnaW4gPSAncmVvcmRlci1iZWdpbic7XG4gICAgZXhwb3J0cy5yZW9yZGVyQ29tcGxldGUgPSAncmVvcmRlci1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5yb3dEcmFnQW5kRHJvcEJlZ2luID0gJ3Jvd2RyYWdhbmRkcm9wLWJlZ2luJztcbiAgICBleHBvcnRzLnJvd0RyYWdBbmREcm9wQ29tcGxldGUgPSAncm93ZHJhZ2FuZGRyb3AtY29tcGxldGUnO1xuICAgIGV4cG9ydHMuZ3JvdXBCZWdpbiA9ICdncm91cGluZy1iZWdpbic7XG4gICAgZXhwb3J0cy5ncm91cENvbXBsZXRlID0gJ2dyb3VwaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnVuZ3JvdXBCZWdpbiA9ICd1bmdyb3VwaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnVuZ3JvdXBDb21wbGV0ZSA9ICd1bmdyb3VwaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnJvd1NlbGVjdGlvbkJlZ2luID0gJ3Jvd3NlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5yb3dTZWxlY3Rpb25Db21wbGV0ZSA9ICdyb3dzZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5jb2x1bW5TZWxlY3Rpb25CZWdpbiA9ICdjb2x1bW5zZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY29sdW1uU2VsZWN0aW9uQ29tcGxldGUgPSAnY29sdW1uc2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMuY2VsbFNlbGVjdGlvbkJlZ2luID0gJ2NlbGxzZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY2VsbFNlbGVjdGlvbkNvbXBsZXRlID0gJ2NlbGxzZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5rZXlQcmVzc2VkID0gJ2tleS1wcmVzc2VkJztcbiAgICBleHBvcnRzLmNsaWNrID0gJ2NsaWNrJztcbiAgICBleHBvcnRzLmRlc3Ryb3kgPSAnZGVzdHJveSc7XG4gICAgZXhwb3J0cy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCA9ICdjb2x1bW4tdmlzaWJsZS1jaGFuZ2VkJztcbiAgICBleHBvcnRzLnNjcm9sbCA9ICdzY3JvbGwnO1xuICAgIGV4cG9ydHMuY29sdW1uV2lkdGhDaGFuZ2VkID0gJ2NvbHVtbi13aWR0aC1jaGFuZ2VkJztcbiAgICBleHBvcnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCA9ICdjb2x1bW4tcG9zaXRpb24tY2hhbmdlZCc7XG4gICAgZXhwb3J0cy5yb3dEcmFnQW5kRHJvcCA9ICdyb3ctZHJhZy1hbmQtZHJvcCc7XG4gICAgZXhwb3J0cy5yb3dzQWRkZWQgPSAncm93cy1hZGRlZCc7XG4gICAgZXhwb3J0cy5yb3dzUmVtb3ZlZCA9ICdyb3dzLXJlbW92ZWQnO1xuICAgIGV4cG9ydHMuY29sdW1uRHJhZ1N0b3AgPSAnY29sdW1uLWRyYWctc3RvcCc7XG4gICAgZXhwb3J0cy5oZWFkZXJEcm9wID0gJ2hlYWRlci1kcm9wJztcbiAgICBleHBvcnRzLmRhdGFTb3VyY2VNb2RpZmllZCA9ICdkYXRhc291cmNlLW1vZGlmaWVkJztcbiAgICBleHBvcnRzLnJlZnJlc2hDb21wbGV0ZSA9ICdyZWZyZXNoLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnJlZnJlc2hWaXJ0dWFsQmxvY2sgPSAncmVmcmVzaC12aXJ0dWFsLWJsb2NrJztcbiAgICBleHBvcnRzLmRibGNsaWNrID0gJ2RibGNsaWNrJztcbiAgICBleHBvcnRzLnRvb2xiYXJSZWZyZXNoID0gJ3Rvb2xiYXItcmVmcmVzaCc7XG4gICAgZXhwb3J0cy5idWxrU2F2ZSA9ICdidWxrLXNhdmUnO1xuICAgIGV4cG9ydHMuYXV0b0NvbCA9ICdhdXRvLWNvbCc7XG4gICAgZXhwb3J0cy50b29sdGlwRGVzdHJveSA9ICd0b29sdGlwLWRlc3Ryb3knO1xuICAgIGV4cG9ydHMudXBkYXRlRGF0YSA9ICd1cGRhdGUtZGF0YSc7XG4gICAgZXhwb3J0cy5lZGl0QmVnaW4gPSAnZWRpdC1iZWdpbic7XG4gICAgZXhwb3J0cy5lZGl0Q29tcGxldGUgPSAnZWRpdC1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5hZGRCZWdpbiA9ICdhZGQtYmVnaW4nO1xuICAgIGV4cG9ydHMuYWRkQ29tcGxldGUgPSAnYWRkLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnNhdmVDb21wbGV0ZSA9ICdzYXZlLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLmRlbGV0ZUJlZ2luID0gJ2RlbGV0ZS1iZWdpbic7XG4gICAgZXhwb3J0cy5kZWxldGVDb21wbGV0ZSA9ICdkZWxldGUtY29tcGxldGUnO1xuICAgIGV4cG9ydHMucHJldmVudEJhdGNoID0gJ3ByZXZlbnQtYmF0Y2gnO1xuICAgIGV4cG9ydHMuZGlhbG9nRGVzdHJveSA9ICdkaWFsb2ctZGVzdHJveSc7XG4gICAgZXhwb3J0cy5jcnVkQWN0aW9uID0gJ2NydWQtQWN0aW9uJztcbiAgICBleHBvcnRzLmFkZERlbGV0ZUFjdGlvbiA9ICdhZGQtZGVsZXRlLUFjdGlvbic7XG4gICAgZXhwb3J0cy5kZXN0cm95Rm9ybSA9ICdkZXN0cm95LWZvcm0nO1xuICAgIGV4cG9ydHMuZG91YmxlVGFwID0gJ2RvdWJsZS10YXAnO1xuICAgIGV4cG9ydHMuYmVmb3JlRXhjZWxFeHBvcnQgPSAnYmVmb3JlRXhjZWxFeHBvcnQnO1xuICAgIGV4cG9ydHMuZXhjZWxFeHBvcnRDb21wbGV0ZSA9ICdleGNlbEV4cG9ydENvbXBsZXRlJztcbiAgICBleHBvcnRzLmV4Y2VsUXVlcnlDZWxsSW5mbyA9ICdleGNlbFF1ZXJ5Q2VsbEluZm8nO1xuICAgIGV4cG9ydHMuYmVmb3JlUGRmRXhwb3J0ID0gJ2JlZm9yZVBkZkV4cG9ydCc7XG4gICAgZXhwb3J0cy5wZGZFeHBvcnRDb21wbGV0ZSA9ICdwZGZFeHBvcnRDb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5wZGZRdWVyeUNlbGxJbmZvID0gJ3BkZlF1ZXJ5Q2VsbEluZm8nO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2Jhc2UvY29uc3RhbnQuanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vYWN0aW9ucy9kYXRhXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL3JlbmRlcmVyL2NvbnRlbnQtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9oZWFkZXItcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvaGVhZGVyLWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9zdGFja2VkLWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9pbmRlbnQtY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2NhcHRpb24tY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2V4cGFuZC1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvaGVhZGVyLWluZGVudC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2RldGFpbC1oZWFkZXItaW5kZW50LXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvZGV0YWlsLWV4cGFuZC1jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2RhdGFfMSwgZW51bV8xLCBkYXRhXzEsIGV2ZW50cywgdXRpbF8xLCBjb250ZW50X3JlbmRlcmVyXzEsIGhlYWRlcl9yZW5kZXJlcl8xLCBjZWxsX3JlbmRlcmVyXzEsIGhlYWRlcl9jZWxsX3JlbmRlcmVyXzEsIHN0YWNrZWRfY2VsbF9yZW5kZXJlcl8xLCBpbmRlbnRfY2VsbF9yZW5kZXJlcl8xLCBjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMSwgZXhwYW5kX2NlbGxfcmVuZGVyZXJfMSwgaGVhZGVyX2luZGVudF9yZW5kZXJlcl8xLCBkZXRhaWxfaGVhZGVyX2luZGVudF9yZW5kZXJlcl8xLCBkZXRhaWxfZXhwYW5kX2NlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUmVuZGVyKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3IGRhdGFfMS5EYXRhKHBhcmVudCk7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSBsb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZSA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdhcmlhU2VydmljZScpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyLmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkhlYWRlcik7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlciA9IHRoaXMucmVuZGVyZXIuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlclJlbmRlcmVyLnJlbmRlclBhbmVsKCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5yZW5kZXJQYW5lbCgpO1xuICAgICAgICAgICAgaWYgKGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIucmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1wdHlSb3coZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGF0YU1hbmFnZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlID09PSB2b2lkIDApIHsgZSA9IHsgcmVxdWVzdFR5cGU6ICdyZWZyZXNoJyB9OyB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZS5yZXF1ZXN0VHlwZSArIFwiLWJlZ2luXCIsIGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGUpO1xuICAgICAgICAgICAgaWYgKGUuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGF0YU1hbmFnZXIoZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUucmVmcmVzaENvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoRGF0YU1hbmFnZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciByZWFkeSA9IHRoaXMuZGF0YS5kYXRhTWFuYWdlci5yZWFkeTtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0QnVzeSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZCwgdHJ1ZSk7XG4gICAgICAgICAgICB2YXIgZGF0YU1hbmFnZXIgPSB0aGlzLmRhdGEuZ2V0RGF0YShhcmdzLCB0aGlzLmRhdGEuZ2VuZXJhdGVRdWVyeSgpLnJlcXVpcmVzQ291bnQoKSk7XG4gICAgICAgICAgICBpZiAoIXJlYWR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuZGlzYWJsZVBhZ2VXaXNlQWdncmVnYXRlcyAmJiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFNYW5hZ2VyID0gZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMudmFsaWRhdGVHcm91cFJlY29yZHMoZSk7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkYXRhTWFuYWdlci50aGVuKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5kYXRhTWFuYWdlclN1Y2Nlc3MoZSwgYXJncyk7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZGF0YU1hbmFnZXJGYWlsdXJlKGUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5zZW5kQnVsa1JlcXVlc3QgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5kYXRhLnNhdmVDaGFuZ2VzKGFyZ3MuY2hhbmdlcywgdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKVswXSk7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2Uub2ZmbGluZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaERhdGFNYW5hZ2VyKHsgcmVxdWVzdFR5cGU6ICdiYXRjaHNhdmUnIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZG1TdWNjZXNzKGUsIGFyZ3MpOyB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmRtRmFpbHVyZShlKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZG1TdWNjZXNzID0gZnVuY3Rpb24gKGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXJTdWNjZXNzKGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmRtRmFpbHVyZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyRmFpbHVyZShlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5yZW5kZXJFbXB0eVJvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZW1wdHlSb3codHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZW1wdHlSb3cgPSBmdW5jdGlvbiAoaXNUcmlnZ2VyKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gdGhpcy5jb250ZW50UmVuZGVyZXIuZ2V0VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuICAgICAgICAgICAgdmFyIHRyO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGJvZHkpO1xuICAgICAgICAgICAgdGJvZHkgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB0ciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtZW1wdHlyb3cnIH0pO1xuICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICBpbm5lckhUTUw6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnRW1wdHlSZWNvcmQnKSxcbiAgICAgICAgICAgICAgICBhdHRyczogeyBjb2xzcGFuOiBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5yZW5kZXJFbXB0eSh0Ym9keSk7XG4gICAgICAgICAgICBpZiAoaXNUcmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuZGF0YUJvdW5kLCB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUudXBkYXRlQ29sdW1uVHlwZSA9IGZ1bmN0aW9uIChyZWNvcmQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSByZWNvcmQgJiYgcmVjb3JkLml0ZW1zID8gcmVjb3JkLml0ZW1zWzBdIDogcmVjb3JkO1xuICAgICAgICAgICAgdmFyIGZtdHIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgndmFsdWVGb3JtYXR0ZXInKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBlajJfYmFzZV8yLmdldFZhbHVlKGNvbHVtbnNbaV0uZmllbGQgfHwgJycsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NvbFR5cGVEZWYgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbHVtbnNbaV0udHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS50eXBlID0gdmFsdWUuZ2V0RGF5ID8gKHZhbHVlLmdldEhvdXJzKCkgPiAwIHx8IHZhbHVlLmdldE1pbnV0ZXMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5nZXRTZWNvbmRzKCkgPiAwIHx8IHZhbHVlLmdldE1pbGxpc2Vjb25kcygpID4gMCA/ICdkYXRldGltZScgOiAnZGF0ZScpIDogdHlwZW9mICh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAoY29sdW1uc1tpXS5mb3JtYXQpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb2x1bW5zW2ldLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRGb3JtYXR0ZXIoZm10ci5nZXRGb3JtYXRGdW5jdGlvbih7IHR5cGU6ICdkYXRlJywgc2tlbGV0b246IGNvbHVtbnNbaV0uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRQYXJzZXIoZm10ci5nZXRQYXJzZXJGdW5jdGlvbih7IHR5cGU6ICdkYXRlJywgc2tlbGV0b246IGNvbHVtbnNbaV0uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF0ZXRpbWUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnNldEZvcm1hdHRlcihmbXRyLmdldEZvcm1hdEZ1bmN0aW9uKHsgdHlwZTogJ2RhdGVUaW1lJywgc2tlbGV0b246IGNvbHVtbnNbaV0uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRQYXJzZXIoZm10ci5nZXRQYXJzZXJGdW5jdGlvbih7IHR5cGU6ICdkYXRlVGltZScsIHNrZWxldG9uOiBjb2x1bW5zW2ldLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0uc2V0Rm9ybWF0dGVyKGZtdHIuZ2V0Rm9ybWF0RnVuY3Rpb24oeyBmb3JtYXQ6IGNvbHVtbnNbaV0uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRQYXJzZXIoZm10ci5nZXRQYXJzZXJGdW5jdGlvbih7IGZvcm1hdDogY29sdW1uc1tpXS5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghY29sdW1uc1tpXS5mb3JtYXQgJiYgY29sdW1uc1tpXS50eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRQYXJzZXIoZm10ci5nZXRQYXJzZXJGdW5jdGlvbih7IGZvcm1hdDogJ24yJyB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0udHlwZSA9IGNvbHVtbnNbaV0udHlwZSB8fCBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5kYXRhTWFuYWdlclN1Y2Nlc3MgPSBmdW5jdGlvbiAoZSwgYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlRGF0YUJvdW5kLCBlKTtcbiAgICAgICAgICAgIHZhciBsZW4gPSBPYmplY3Qua2V5cyhlLnJlc3VsdCkubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sdGlwRGVzdHJveSwge30pO1xuICAgICAgICAgICAgZ09iai5jdXJyZW50Vmlld0RhdGEgPSBlLnJlc3VsdDtcbiAgICAgICAgICAgIGlmICghbGVuICYmIGUuY291bnQgJiYgZ09iai5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgIGdPYmoucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gTWF0aC5jZWlsKGUuY291bnQgLyBnT2JqLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSk7XG4gICAgICAgICAgICAgICAgZ09iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoICYmIGxlbikge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlc09uSW5pdGlhbFJlbmRlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NvbFR5cGVEZWYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtblR5cGUoZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmRhdGFSZWFkeSwgZWoyX2Jhc2VfMi5leHRlbmQoeyBjb3VudDogZS5jb3VudCwgcmVzdWx0OiBlLnJlc3VsdCwgYWdncmVnYXRlczogZS5hZ2dyZWdhdGVzIH0sIGFyZ3MpKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggfHwgKGFyZ3MgJiYgYXJncy5yZXF1ZXN0VHlwZSA9PT0gJ3VuZ3JvdXBpbmcnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIucmVmcmVzaFVJKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIucmVmcmVzaENvbnRlbnRSb3dzKGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBhbGVydCh0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0VtcHR5RGF0YVNvdXJjZUVycm9yJykpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnNldFJvd0VsZW1lbnRzKFtdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckVtcHR5Um93KCk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IChhcmdzLnJlcXVlc3RUeXBlIHx8ICcnKS50b0xvd2VyQ2FzZSgpICsgJy1jb21wbGV0ZSc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShhY3Rpb24sIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5kYXRhTWFuYWdlckZhaWx1cmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLCB7IGJ1c3k6IGZhbHNlLCBpbnZhbGlkOiB0cnVlIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uRmFpbHVyZSwgeyBlcnJvcjogZSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmN1cnJlbnRWaWV3RGF0YSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJFbXB0eVJvdygpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnVwZGF0ZXNPbkluaXRpYWxSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5idWlsZENvbHVtbnMoZS5yZXN1bHRbMF0pO1xuICAgICAgICAgICAgdXRpbF8xLnByZXBhcmVDb2x1bW5zKHRoaXMucGFyZW50LmNvbHVtbnMpO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlci5yZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIucmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuYXV0b0NvbCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmJ1aWxkQ29sdW1ucyA9IGZ1bmN0aW9uIChyZWNvcmQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gT2JqZWN0LmtleXMocmVjb3JkKTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbHNbaV0gPSB7ICdmaWVsZCc6IGNvbHVtbnNbaV0gfTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29sc1tpXS53aWR0aCA9ICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHNbaV0ud2lkdGgpID8gY29sc1tpXS53aWR0aCA6IDIwMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5jb2x1bW5zID0gY29scztcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5pbnN0YW50aWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5IZWFkZXIsIG5ldyBoZWFkZXJfcmVuZGVyZXJfMS5IZWFkZXJSZW5kZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50LCBuZXcgY29udGVudF9yZW5kZXJlcl8xLkNvbnRlbnRSZW5kZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgdmFyIGNlbGxyZW5kZXIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgnY2VsbFJlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkhlYWRlciwgbmV3IGhlYWRlcl9jZWxsX3JlbmRlcmVyXzEuSGVhZGVyQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5EYXRhLCBuZXcgY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuU3RhY2tlZEhlYWRlciwgbmV3IHN0YWNrZWRfY2VsbF9yZW5kZXJlcl8xLlN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkluZGVudCwgbmV3IGluZGVudF9jZWxsX3JlbmRlcmVyXzEuSW5kZW50Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb24sIG5ldyBjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMS5Hcm91cENhcHRpb25DZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkdyb3VwQ2FwdGlvbkVtcHR5LCBuZXcgY2FwdGlvbl9jZWxsX3JlbmRlcmVyXzEuR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkV4cGFuZCwgbmV3IGV4cGFuZF9jZWxsX3JlbmRlcmVyXzEuRXhwYW5kQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5IZWFkZXJJbmRlbnQsIG5ldyBoZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEuSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5TdGFja2VkSGVhZGVyLCBuZXcgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEuU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRGV0YWlsSGVhZGVyLCBuZXcgZGV0YWlsX2hlYWRlcl9pbmRlbnRfcmVuZGVyZXJfMS5EZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkRldGFpbEV4cGFuZCwgbmV3IGRldGFpbF9leHBhbmRfY2VsbF9yZW5kZXJlcl8xLkRldGFpbEV4cGFuZENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsTG9hZCwgdGhpcy5pbnN0YW50aWF0ZVJlbmRlcmVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5tb2RlbENoYW5nZWQsIHRoaXMucmVmcmVzaCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucmVmcmVzaENvbXBsZXRlLCB0aGlzLnJlZnJlc2hDb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuYnVsa1NhdmUsIHRoaXMuc2VuZEJ1bGtSZXF1ZXN0LCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS52YWxpZGF0ZUdyb3VwUmVjb3JkcyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gZS5yZXN1bHQubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdyb3VwMCA9IGUucmVzdWx0WzBdO1xuICAgICAgICAgICAgdmFyIGdyb3VwTiA9IGUucmVzdWx0W2luZGV4XTtcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGUgPSBbXTtcbiAgICAgICAgICAgIHZhciBhZGRXaGVyZSA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgICAgIFtncm91cDAsIGdyb3VwTl0uZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZWRpY2F0ZS5wdXNoKG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZSgnZmllbGQnLCAnPT0nLCBncm91cC5maWVsZCkuYW5kKF90aGlzLmdldFByZWRpY2F0ZSgna2V5JywgJ2VxdWFsJywgZ3JvdXAua2V5KSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlucHV0LndoZXJlKGVqMl9kYXRhXzEuUHJlZGljYXRlLm9yKHByZWRpY2F0ZSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCk7XG4gICAgICAgICAgICBhZGRXaGVyZShxdWVyeSk7XG4gICAgICAgICAgICB2YXIgY3VyRG0gPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcihlLnJlc3VsdCk7XG4gICAgICAgICAgICB2YXIgY3VyRmlsdGVyID0gY3VyRG0uZXhlY3V0ZUxvY2FsKHF1ZXJ5KTtcbiAgICAgICAgICAgIHZhciBuZXdRdWVyeSA9IHRoaXMuZGF0YS5nZW5lcmF0ZVF1ZXJ5KHRydWUpO1xuICAgICAgICAgICAgdmFyIHJQcmVkaWNhdGUgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuaXNSZW1vdGUoKSkge1xuICAgICAgICAgICAgICAgIFtncm91cDAsIGdyb3VwTl0uZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJQcmVkaWNhdGUucHVzaChfdGhpcy5nZXRQcmVkaWNhdGUoZ3JvdXAuZmllbGQsICdlcXVhbCcsIGdyb3VwLmtleSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG5ld1F1ZXJ5LndoZXJlKGVqMl9kYXRhXzEuUHJlZGljYXRlLm9yKHJQcmVkaWNhdGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFkZFdoZXJlKG5ld1F1ZXJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9IG5ldyBlajJfZGF0YV8xLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGlzLmRhdGEuZ2V0RGF0YSh7fSwgbmV3UXVlcnkpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVHcm91cEluZm8oY3VyRmlsdGVyLCByLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZ2V0UHJlZGljYXRlID0gZnVuY3Rpb24gKGtleSwgb3BlcmF0b3IsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5nZXREYXRlUHJlZGljYXRlKHsgZmllbGQ6IGtleSwgb3BlcmF0b3I6IG9wZXJhdG9yLCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKGtleSwgb3BlcmF0b3IsIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS51cGRhdGVHcm91cEluZm8gPSBmdW5jdGlvbiAoY3VycmVudCwgdW50b3VjaGVkKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGRtID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIodW50b3VjaGVkKTtcbiAgICAgICAgICAgIGN1cnJlbnQuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHVHcm91cCA9IGRtLmV4ZWN1dGVMb2NhbChuZXcgZWoyX2RhdGFfMS5RdWVyeSgpXG4gICAgICAgICAgICAgICAgICAgIC53aGVyZShuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUoJ2ZpZWxkJywgJz09JywgZWxlbWVudC5maWVsZCkuYW5kKF90aGlzLmdldFByZWRpY2F0ZSgna2V5JywgJ2VxdWFsJywgZWxlbWVudC5rZXkpKSkpWzBdO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY291bnQgPSB1R3JvdXAuY291bnQ7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1Hcm91cCA9IGVsZW1lbnQuaXRlbXM7XG4gICAgICAgICAgICAgICAgdmFyIHVHcm91cEl0ZW0gPSB1R3JvdXAuaXRlbXM7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1Hcm91cC5Hcm91cEd1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pdGVtcyA9IF90aGlzLnVwZGF0ZUdyb3VwSW5mbyhlbGVtZW50Lml0ZW1zLCB1R3JvdXAuaXRlbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQuYWdncmVnYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGVzID0gY29sdW1uLnR5cGUgaW5zdGFuY2VvZiBBcnJheSA/IGNvbHVtbi50eXBlIDogW2NvbHVtbi50eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gY29sdW1uLmZpZWxkICsgJyAtICcgKyB0eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWdncmVnYXRlc1trZXldID0gdXRpbF8xLmNhbGN1bGF0ZUFnZ3JlZ2F0ZSh0eXBlLCBpdGVtR3JvdXAubGV2ZWwgPyB1R3JvdXBJdGVtLnJlY29yZHMgOiB1R3JvdXAuaXRlbXMsIGNvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5SZW5kZXIgPSBSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvcmVuZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuL3Jvdy1yZW5kZXJlclwiLCBcIi4uL21vZGVscy9jZWxsXCIsIFwiLi4vbW9kZWxzL3Jvd1wiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVudW1fMSwgcm93X3JlbmRlcmVyXzEsIGNlbGxfMSwgcm93XzEsIGV2ZW50cywgZWoyX2Jhc2VfNCwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBIZWFkZXJSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBIZWFkZXJSZW5kZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICBpZiAoIShnT2JqLmFsbG93UmVvcmRlcmluZyB8fCBnT2JqLmFsbG93R3JvdXBpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZpc3VhbEVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jbG9uZXByb3BlcnRpZXMgZS1kcmFnY2xvbmUgZS1oZWFkZXJjbG9uZScgfSk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUuc2VuZGVyLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGVhZGVyY2VsbCcpID8gdGFyZ2V0IDpcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlcmNlbGxkaXYgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKTtcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnRleHRDb250ZW50ID0gaGVhZGVyY2VsbGRpdiA/XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZ2V0Q29sdW1uQnlVaWQoaGVhZGVyY2VsbGRpdi5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKS5oZWFkZXJUZXh0IDogZWxlbWVudC5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5zdHlsZS53aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQuc3R5bGUubGluZUhlaWdodCA9IChoZWlnaHQgLSA2KS50b1N0cmluZygpICsgJ3B4JztcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeVVpZChlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcsIF90aGlzLmNvbHVtbi51aWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuYXBwZW5kQ2hpbGQodmlzdWFsRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZpc3VhbEVsZW1lbnQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHsgdGFyZ2V0OiBlLnRhcmdldCwgY29sdW1uOiBfdGhpcy5jb2x1bW4sIGV2ZW50OiBlLmV2ZW50IH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsb3Nlc3QgPSBlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0LCAnLmUtZ3JpZCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvbmVFbGVtZW50ID0gX3RoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2xvbmVwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2xvc2VzdCB8fCBjbG9zZXN0LmdldEF0dHJpYnV0ZSgnaWQnKSAhPT0gZ09iai5lbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2Utbm90YWxsb3dlZGN1ciddLCBbJ2UtZGVmYXVsdGN1ciddKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmFsbG93UmVvcmRlcmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1yZW9yZGVydXBhcnJvdycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLXJlb3JkZXJkb3duYXJyb3cnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5jb2x1bW5EcmFnLCB7IHRhcmdldDogZS50YXJnZXQsIGNvbHVtbjogX3RoaXMuY29sdW1uLCBldmVudDogZS5ldmVudCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNhbmNlbDtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBpZiAoKCF1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1oZWFkZXJjZWxsJykgJiYgIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyb3VwZHJvcGFyZWEnKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKCFnT2JqLmFsbG93UmVvcmRlcmluZyAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1oZWFkZXJjZWxsJykpIHx8XG4gICAgICAgICAgICAgICAgICAgICghZS5oZWxwZXIuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncm91cGRyb3BhcmVhJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGUuaGVscGVyKTtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmNvbHVtbkRyYWdTdG9wLCB7IHRhcmdldDogZS50YXJnZXQsIGV2ZW50OiBlLmV2ZW50LCBjb2x1bW46IF90aGlzLmNvbHVtbiwgY2FuY2VsOiBjYW5jZWwgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgdWlkID0gZS5kcm9wcGVkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpO1xuICAgICAgICAgICAgICAgIHZhciBjbG9zZXN0ID0gZWoyX2Jhc2VfMi5jbG9zZXN0KGUudGFyZ2V0LCAnLmUtZ3JpZCcpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGUuZHJvcHBlZEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChjbG9zZXN0ICYmIGNsb3Nlc3QuZ2V0QXR0cmlidXRlKCdpZCcpICE9PSBnT2JqLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpIHx8XG4gICAgICAgICAgICAgICAgICAgICEoZ09iai5hbGxvd1Jlb3JkZXJpbmcgfHwgZ09iai5hbGxvd0dyb3VwaW5nKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5oZWFkZXJEcm9wLCB7IHRhcmdldDogZS50YXJnZXQsIHVpZDogdWlkIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnYXJpYVNlcnZpY2UnKTtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCd3aWR0aFNlcnZpY2UnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgdGhpcy5zZXRWaXNpYmxlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHRoaXMucmVmcmVzaFVJLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnJlbmRlclBhbmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyaWRoZWFkZXInIH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaGVhZGVyY29udGVudCcgfSk7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXYpO1xuICAgICAgICAgICAgdGhpcy5zZXRQYW5lbChkaXYpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnJlbmRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlckRpdiA9IHRoaXMuZ2V0UGFuZWwoKTtcbiAgICAgICAgICAgIGhlYWRlckRpdi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUhlYWRlclRhYmxlKCkpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJsZShoZWFkZXJEaXYucXVlcnlTZWxlY3RvcignLmUtdGFibGUnKSk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVIZWFkZXJEcmFnKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVIZWFkZXJEcm9wKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldFBhbmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyUGFuZWw7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuc2V0UGFuZWwgPSBmdW5jdGlvbiAocGFuZWwpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUGFuZWwgPSBwYW5lbDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlclRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnNldFRhYmxlID0gZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlclRhYmxlID0gdGFibGU7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0Q29sR3JvdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2xncm91cDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5zZXRDb2xHcm91cCA9IGZ1bmN0aW9uIChjb2xHcm91cCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sZ3JvdXAgPSBjb2xHcm91cDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5nZXRUYWJsZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRhYmxlLnRIZWFkLnJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuY3JlYXRlSGVhZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB0aGlzLmNyZWF0ZVRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGlubmVyRGl2LmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgICAgIHJldHVybiBpbm5lckRpdjtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5jcmVhdGVUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdPYmouZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHsgY2xhc3NOYW1lOiAnZS10YWJsZScsIGF0dHJzOiB7IGNlbGxzcGFjaW5nOiAnMC4yNXB4Jywgcm9sZTogJ2dyaWQnIH0gfSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIHZhciBmaW5kSGVhZGVyUm93ID0gdGhpcy5jcmVhdGVIZWFkZXJDb250ZW50KCk7XG4gICAgICAgICAgICB2YXIgdGhlYWQgPSBmaW5kSGVhZGVyUm93LnRoZWFkO1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0Ym9keScsIHsgY2xhc3NOYW1lOiAnZS1oaWRlJyB9KTtcbiAgICAgICAgICAgIHZhciBjb2xHcm91cCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnY29sZ3JvdXAnKTtcbiAgICAgICAgICAgIHZhciByb3dCb2R5ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgdmFyIGJvZHlDZWxsO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBmaW5kSGVhZGVyUm93LnJvd3M7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsZW5fMSA9IHJvd3NbaV0uY2VsbHMubGVuZ3RoOyBqIDwgbGVuXzE7IGorKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvd3NbaV0uY2VsbHNbal07XG4gICAgICAgICAgICAgICAgICAgIGJvZHlDZWxsID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgICAgICByb3dCb2R5LmFwcGVuZENoaWxkKGJvZHlDZWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0ZpbHRlcmluZyB8fCBnT2JqLmFsbG93U29ydGluZyB8fCBnT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICB0YWJsZS5jbGFzc0xpc3QuYWRkKCdlLXNvcnRmaWx0ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sR3JvdXAoY29sR3JvdXApO1xuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQocm93Qm9keSk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0aGlzLnNldENvbEdyb3VwKGNvbEdyb3VwKSk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0aGVhZCk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnModGFibGUsIHsgY29sY291bnQ6IGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aC50b1N0cmluZygpIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmNyZWF0ZUhlYWRlckNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB0aGVhZCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGhlYWQnKTtcbiAgICAgICAgICAgIHZhciBjb2xIZWFkZXIgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RyJywgeyBjbGFzc05hbWU6ICdlLWNvbHVtbmhlYWRlcicgfSk7XG4gICAgICAgICAgICB2YXIgcm93UmVuZGVyZXIgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgZW51bV8xLkNlbGxUeXBlLkhlYWRlcik7XG4gICAgICAgICAgICByb3dSZW5kZXJlci5lbGVtZW50ID0gY29sSGVhZGVyO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3c7XG4gICAgICAgICAgICB0aGlzLmNvbERlcHRoID0gdGhpcy5nZXRPYmpEZXB0aCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuY29sRGVwdGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3NbaV0gPSB0aGlzLmdlbmVyYXRlUm93KGkpO1xuICAgICAgICAgICAgICAgIHJvd3NbaV0uY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvd3MgPSB0aGlzLmVuc3VyZUNvbHVtbnMocm93cyk7XG4gICAgICAgICAgICByb3dzID0gdGhpcy5nZXRIZWFkZXJDZWxscyhyb3dzKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmNvbERlcHRoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJSb3cgPSByb3dSZW5kZXJlci5yZW5kZXIocm93c1tpXSwgY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgdGhlYWQuYXBwZW5kQ2hpbGQoaGVhZGVyUm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmaW5kSGVhZGVyUm93ID0ge1xuICAgICAgICAgICAgICAgIHRoZWFkOiB0aGVhZCxcbiAgICAgICAgICAgICAgICByb3dzOiByb3dzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGZpbmRIZWFkZXJSb3c7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUudXBkYXRlQ29sR3JvdXAgPSBmdW5jdGlvbiAoY29sR3JvdXApIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIGNvbDtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2YoaSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb2wgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbCcpO1xuICAgICAgICAgICAgICAgICAgICBjb2xHcm91cC5hcHBlbmRDaGlsZChjb2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSB8fCB0aGlzLnBhcmVudC5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICBjb2wgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbCcpO1xuICAgICAgICAgICAgICAgIGNvbEdyb3VwLmFwcGVuZENoaWxkKGNvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnY29sJyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0udmlzaWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZXRTdHlsZUF0dHJpYnV0ZShjb2wsIHsgJ2Rpc3BsYXknOiAnbm9uZScgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbEdyb3VwLmFwcGVuZENoaWxkKGNvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sR3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZW5zdXJlQ29sdW1ucyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDAsIGxlbl8yID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBjIDwgbGVuXzI7IGMrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZGV4ZXMuaW5kZXhPZihjKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgZW51bV8xLkNlbGxUeXBlLkhlYWRlckluZGVudCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmRldGFpbFRlbXBsYXRlIHx8IGdPYmouY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgZW51bV8xLkNlbGxUeXBlLkRldGFpbEhlYWRlcikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldEhlYWRlckNlbGxzID0gZnVuY3Rpb24gKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkgOiB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICByb3dzID0gdGhpcy5hcHBlbmRDZWxscyhjb2xzW2ldLCByb3dzLCAwLCBpID09PSAwLCBmYWxzZSwgaSA9PT0gKGxlbiAtIDEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmFwcGVuZENlbGxzID0gZnVuY3Rpb24gKGNvbHMsIHJvd3MsIGluZGV4LCBpc0ZpcnN0T2JqLCBpc0ZpcnN0Q29sLCBpc0xhc3RDb2wpIHtcbiAgICAgICAgICAgIHZhciBsYXN0Q29sID0gaXNMYXN0Q29sID8gJ2UtbGFzdGNlbGwnIDogJyc7XG4gICAgICAgICAgICBpZiAoIWNvbHMuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIHJvd3NbaW5kZXhdLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoY29scywgZW51bV8xLkNlbGxUeXBlLkhlYWRlciwgdGhpcy5jb2xEZXB0aCAtIGluZGV4LCAoaXNGaXJzdE9iaiA/ICcnIDogKGlzRmlyc3RDb2wgPyAnZS1maXJzdGNlbGwnIDogJycpKSArIGxhc3RDb2wsIGluZGV4LCB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleEJ5VWlkKGNvbHMudWlkKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbFNwYW4gPSB0aGlzLmdldENlbGxDbnQoY29scywgMCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcm93c1tpbmRleF0uY2VsbHMucHVzaChuZXcgY2VsbF8xLkNlbGwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbFR5cGU6IGVudW1fMS5DZWxsVHlwZS5TdGFja2VkSGVhZGVyLCBjb2x1bW46IGNvbHMsIGNvbFNwYW46IGNvbFNwYW5cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3MgPSB0aGlzLmFwcGVuZENlbGxzKGNvbHMuY29sdW1uc1tpXSwgcm93cywgaW5kZXggKyAxLCBpc0ZpcnN0T2JqLCBpID09PSAwLCBpID09PSAobGVuIC0gMSkgJiYgaXNMYXN0Q29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZW5lcmF0ZVJvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyByb3dfMS5Sb3coe30pO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdlbmVyYXRlQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW4sIGNlbGxUeXBlLCByb3dTcGFuLCBjbGFzc05hbWUsIHJvd0luZGV4LCBjb2xJbmRleCkge1xuICAgICAgICAgICAgdmFyIG9wdCA9IHtcbiAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGNvbHVtbi52aXNpYmxlLFxuICAgICAgICAgICAgICAgICdpc0RhdGFDZWxsJzogZmFsc2UsXG4gICAgICAgICAgICAgICAgJ2lzVGVtcGxhdGUnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uaGVhZGVyVGVtcGxhdGUpLFxuICAgICAgICAgICAgICAgICdyb3dJRCc6ICcnLFxuICAgICAgICAgICAgICAgICdjb2x1bW4nOiBjb2x1bW4sXG4gICAgICAgICAgICAgICAgJ2NlbGxUeXBlJzogY2VsbFR5cGUsXG4gICAgICAgICAgICAgICAgJ3Jvd1NwYW4nOiByb3dTcGFuLFxuICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOiBjbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgJ2luZGV4Jzogcm93SW5kZXgsXG4gICAgICAgICAgICAgICAgJ2NvbEluZGV4JzogY29sSW5kZXhcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIW9wdC5yb3dTcGFuIHx8IG9wdC5yb3dTcGFuIDwgMikge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHQucm93U3BhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgY2VsbF8xLkNlbGwob3B0KTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5zZXRWaXNpYmxlID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldFJvd3MoKSk7XG4gICAgICAgICAgICB2YXIgZGlzcGxheVZhbCA9ICcnO1xuICAgICAgICAgICAgdmFyIGlkeDtcbiAgICAgICAgICAgIHZhciBjbGFzc05hbWU7XG4gICAgICAgICAgICB2YXIgZWxlbWVudDtcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBjbGVuID0gY29sdW1ucy5sZW5ndGg7IGMgPCBjbGVuOyBjKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc1tjXTtcbiAgICAgICAgICAgICAgICBpZHggPSB0aGlzLnBhcmVudC5nZXROb3JtYWxpemVkQ29sdW1uSW5kZXgoY29sdW1uLnVpZCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VmFsID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZ2V0Q29sR3JvdXAoKS5jaGlsZE5vZGVzW2lkeF0sIHsgJ2Rpc3BsYXknOiBkaXNwbGF5VmFsIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFVJKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUucmVmcmVzaFVJID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlckRpdiA9IHRoaXMuZ2V0UGFuZWwoKTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IHRoaXMuZ2V0VGFibGUoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZ2V0VGFibGUoKSk7XG4gICAgICAgICAgICB0YWJsZS5yZW1vdmVDaGlsZCh0YWJsZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHRhYmxlLnJlbW92ZUNoaWxkKHRhYmxlLmNoaWxkTm9kZXNbMF0pO1xuICAgICAgICAgICAgdmFyIGNvbEdyb3VwID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdjb2xncm91cCcpO1xuICAgICAgICAgICAgdmFyIGZpbmRIZWFkZXJSb3cgPSB0aGlzLmNyZWF0ZUhlYWRlckNvbnRlbnQoKTtcbiAgICAgICAgICAgIHRhYmxlLmluc2VydEJlZm9yZShmaW5kSGVhZGVyUm93LnRoZWFkLCB0YWJsZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sR3JvdXAoY29sR3JvdXApO1xuICAgICAgICAgICAgdGFibGUuaW5zZXJ0QmVmb3JlKHRoaXMuc2V0Q29sR3JvdXAoY29sR3JvdXApLCB0YWJsZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VGFibGUodGFibGUpO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRDb250ZW50KHRhYmxlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuY29sR3JvdXBSZWZyZXNoLCB7fSk7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZS5zZXRXaWR0aFRvQ29sdW1ucygpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplSGVhZGVyRHJhZygpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHt9KTtcbiAgICAgICAgICAgIHZhciByb3dzID0gW10uc2xpY2UuY2FsbChoZWFkZXJEaXYucXVlcnlTZWxlY3RvckFsbCgndHIuZS1jb2x1bW5oZWFkZXInKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dUZXh0V3JhcCAmJiB0aGlzLnBhcmVudC50ZXh0V3JhcFNldHRpbmdzLndyYXBNb2RlID09PSAnaGVhZGVyJykge1xuICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHJvd3MsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmFwcGVuZENvbnRlbnQgPSBmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRPYmpEZXB0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtYXggPSAwO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVwdGggPSB0aGlzLmNoZWNrRGVwdGgoY29sc1tpXSwgMCk7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA8IGRlcHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGRlcHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXggKyAxO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmNoZWNrRGVwdGggPSBmdW5jdGlvbiAoY29sLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGNvbC5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmNoZWNrRGVwdGgoY29sLmNvbHVtbnNbaV0sIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0Q2VsbENudCA9IGZ1bmN0aW9uIChjb2wsIGNudCkge1xuICAgICAgICAgICAgaWYgKGNvbC5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbC5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNudCA9IHRoaXMuZ2V0Q2VsbENudChjb2wuY29sdW1uc1tpXSwgY250KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY250Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNudDtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5pbml0aWFsaXplSGVhZGVyRHJhZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoISh0aGlzLnBhcmVudC5hbGxvd1Jlb3JkZXJpbmcgfHwgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcgJiYgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoZWFkZXJSb3dzID0gW10uc2xpY2UuY2FsbChnT2JqLmdldEhlYWRlckNvbnRlbnQoKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jb2x1bW5oZWFkZXInKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaGVhZGVyUm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkcmFnID0gbmV3IGVqMl9iYXNlXzQuRHJhZ2dhYmxlKGhlYWRlclJvd3NbaV0sIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1RhcmdldDogJy5lLWhlYWRlcmNlbGwnLFxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZTogNSxcbiAgICAgICAgICAgICAgICAgICAgaGVscGVyOiB0aGlzLmhlbHBlcixcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1N0YXJ0OiB0aGlzLmRyYWdTdGFydCxcbiAgICAgICAgICAgICAgICAgICAgZHJhZzogdGhpcy5kcmFnLFxuICAgICAgICAgICAgICAgICAgICBkcmFnU3RvcDogdGhpcy5kcmFnU3RvcCxcbiAgICAgICAgICAgICAgICAgICAgYWJvcnQ6ICcuZS1yaGFuZGxlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5pbml0aWFsaXplSGVhZGVyRHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZHJvcCA9IG5ldyBlajJfYmFzZV80LkRyb3BwYWJsZShnT2JqLmdldEhlYWRlckNvbnRlbnQoKSwge1xuICAgICAgICAgICAgICAgIGFjY2VwdDogJy5lLWRyYWdjbG9uZScsXG4gICAgICAgICAgICAgICAgZHJvcDogdGhpcy5kcm9wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEhlYWRlclJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuSGVhZGVyUmVuZGVyID0gSGVhZGVyUmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2VudW1cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBjb25zdGFudF8xLCB1dGlsXzEsIGVudW1fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUm93UmVuZGVyZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSb3dSZW5kZXJlcihzZXJ2aWNlTG9jYXRvciwgY2VsbFR5cGUsIHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0cicsIHsgYXR0cnM6IHsgcm9sZTogJ3JvdycgfSB9KTtcbiAgICAgICAgICAgIHRoaXMuY2VsbFR5cGUgPSBjZWxsVHlwZTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIFJvd1JlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAocm93LCBjb2x1bW5zLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmcmVzaFJvdyhyb3csIGNvbHVtbnMsIGF0dHJpYnV0ZXMsIHJvd1RlbXBsYXRlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUm93UmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAocm93LCBjb2x1bW5zLCBpc0NoYW5nZWQsIGF0dHJpYnV0ZXMsIHJvd1RlbXBsYXRlKSB7XG4gICAgICAgICAgICBpZiAoaXNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgcm93LmRhdGEgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgcm93LmNoYW5nZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkucXVlcnlTZWxlY3RvcignW2RhdGEtdWlkPScgKyByb3cudWlkICsgJ10nKTtcbiAgICAgICAgICAgIHZhciB0ciA9IHRoaXMucmVmcmVzaFJvdyhyb3csIGNvbHVtbnMsIGF0dHJpYnV0ZXMsIHJvd1RlbXBsYXRlKTtcbiAgICAgICAgICAgIHZhciBjZWxscyA9IFtdLnNsaWNlLmNhbGwodHIuY2VsbHMpO1xuICAgICAgICAgICAgbm9kZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY2VsbHNfMSA9IGNlbGxzOyBfaSA8IGNlbGxzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBjZWxsc18xW19pXTtcbiAgICAgICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGNlbGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSb3dSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaFJvdyA9IGZ1bmN0aW9uIChyb3csIGNvbHVtbnMsIGF0dHJpYnV0ZXMsIHJvd1RlbXBsYXRlKSB7XG4gICAgICAgICAgICB2YXIgdHIgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB2YXIgcm93QXJncyA9IHsgZGF0YTogcm93LmRhdGEgfTtcbiAgICAgICAgICAgIHZhciBjZWxsQXJncyA9IHsgZGF0YTogcm93LmRhdGEgfTtcbiAgICAgICAgICAgIHZhciBhdHRyQ29weSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBhdHRyaWJ1dGVzLCB7fSk7XG4gICAgICAgICAgICBpZiAocm93LmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgIHJvdy5pc1NlbGVjdGVkID0gdGhpcy5wYXJlbnQuZ2V0U2VsZWN0ZWRSb3dJbmRleGVzKCkuaW5kZXhPZihyb3cuaW5kZXgpID4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJ1aWxkQXR0cmlidXRlRnJvbVJvdyh0ciwgcm93KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyh0ciwgYXR0ckNvcHkpO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyh0ciwgcm93LmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgdmFyIGNlbGxSZW5kZXJlckZhY3QgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3cuY2VsbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvdy5jZWxsc1tpXTtcbiAgICAgICAgICAgICAgICBjZWxsLmlzU2VsZWN0ZWQgPSByb3cuaXNTZWxlY3RlZDtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbFJlbmRlcmVyID0gY2VsbFJlbmRlcmVyRmFjdC5nZXRDZWxsUmVuZGVyZXIocm93LmNlbGxzW2ldLmNlbGxUeXBlIHx8IGVudW1fMS5DZWxsVHlwZS5EYXRhKTtcbiAgICAgICAgICAgICAgICB2YXIgdGQgPSBjZWxsUmVuZGVyZXIucmVuZGVyKHJvdy5jZWxsc1tpXSwgcm93LmRhdGEsIHsgJ2luZGV4JzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQocm93LmluZGV4KSA/IHJvdy5pbmRleC50b1N0cmluZygpIDogJycgfSk7XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGQpO1xuICAgICAgICAgICAgICAgIGlmIChyb3cuY2VsbHNbaV0uY2VsbFR5cGUgPT09IGVudW1fMS5DZWxsVHlwZS5EYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoY29uc3RhbnRfMS5xdWVyeUNlbGxJbmZvLCBlajJfYmFzZV8xLmV4dGVuZChjZWxsQXJncywgeyBjZWxsOiB0ZCwgY29sdW1uOiBjZWxsLmNvbHVtbiB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGNvbnN0YW50XzEucm93RGF0YUJvdW5kLCBlajJfYmFzZV8xLmV4dGVuZChyb3dBcmdzLCB7IHJvdzogdHIgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5jc3NDbGFzcykge1xuICAgICAgICAgICAgICAgIHRyLmNsYXNzTGlzdC5hZGQocm93LmNzc0NsYXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cjtcbiAgICAgICAgfTtcbiAgICAgICAgUm93UmVuZGVyZXIucHJvdG90eXBlLmJ1aWxkQXR0cmlidXRlRnJvbVJvdyA9IGZ1bmN0aW9uICh0ciwgcm93KSB7XG4gICAgICAgICAgICB2YXIgYXR0ciA9IHt9O1xuICAgICAgICAgICAgdmFyIHByb3AgPSB7ICdyb3dpbmRleCc6ICdhcmlhLXJvd2luZGV4JywgJ2RhdGFVSUQnOiAnZGF0YS11aWQnLCAnYXJpYVNlbGVjdGVkJzogJ2FyaWEtc2VsZWN0ZWQnIH07XG4gICAgICAgICAgICB2YXIgY2xhc3NlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHJvdy5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goJ2Utcm93Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LmlzQWx0Um93KSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdlLWFsdHJvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHJvdy5pbmRleCkpIHtcbiAgICAgICAgICAgICAgICBhdHRyW3Byb3Aucm93aW5kZXhdID0gcm93LmluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5yb3dTcGFuKSB7XG4gICAgICAgICAgICAgICAgYXR0ci5yb3dTcGFuID0gcm93LnJvd1NwYW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LnVpZCkge1xuICAgICAgICAgICAgICAgIGF0dHJbcHJvcC5kYXRhVUlEXSA9IHJvdy51aWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LmlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBhdHRyW3Byb3AuYXJpYVNlbGVjdGVkXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93LnZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHIuY2xhc3MgPSBjbGFzc2VzO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyh0ciwgYXR0cik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSb3dSZW5kZXJlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUm93UmVuZGVyZXIgPSBSb3dSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9yb3ctcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENlbGxUeXBlO1xuICAgIChmdW5jdGlvbiAoQ2VsbFR5cGUpIHtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJEYXRhXCJdID0gMF0gPSBcIkRhdGFcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJIZWFkZXJcIl0gPSAxXSA9IFwiSGVhZGVyXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiU3VtbWFyeVwiXSA9IDJdID0gXCJTdW1tYXJ5XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiR3JvdXBTdW1tYXJ5XCJdID0gM10gPSBcIkdyb3VwU3VtbWFyeVwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkNhcHRpb25TdW1tYXJ5XCJdID0gNF0gPSBcIkNhcHRpb25TdW1tYXJ5XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRmlsdGVyXCJdID0gNV0gPSBcIkZpbHRlclwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkluZGVudFwiXSA9IDZdID0gXCJJbmRlbnRcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJHcm91cENhcHRpb25cIl0gPSA3XSA9IFwiR3JvdXBDYXB0aW9uXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiR3JvdXBDYXB0aW9uRW1wdHlcIl0gPSA4XSA9IFwiR3JvdXBDYXB0aW9uRW1wdHlcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJFeHBhbmRcIl0gPSA5XSA9IFwiRXhwYW5kXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiSGVhZGVySW5kZW50XCJdID0gMTBdID0gXCJIZWFkZXJJbmRlbnRcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJTdGFja2VkSGVhZGVyXCJdID0gMTFdID0gXCJTdGFja2VkSGVhZGVyXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRGV0YWlsSGVhZGVyXCJdID0gMTJdID0gXCJEZXRhaWxIZWFkZXJcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJEZXRhaWxFeHBhbmRcIl0gPSAxM10gPSBcIkRldGFpbEV4cGFuZFwiO1xuICAgIH0pKENlbGxUeXBlID0gZXhwb3J0cy5DZWxsVHlwZSB8fCAoZXhwb3J0cy5DZWxsVHlwZSA9IHt9KSk7XG4gICAgdmFyIFJlbmRlclR5cGU7XG4gICAgKGZ1bmN0aW9uIChSZW5kZXJUeXBlKSB7XG4gICAgICAgIFJlbmRlclR5cGVbUmVuZGVyVHlwZVtcIkhlYWRlclwiXSA9IDBdID0gXCJIZWFkZXJcIjtcbiAgICAgICAgUmVuZGVyVHlwZVtSZW5kZXJUeXBlW1wiQ29udGVudFwiXSA9IDFdID0gXCJDb250ZW50XCI7XG4gICAgICAgIFJlbmRlclR5cGVbUmVuZGVyVHlwZVtcIlN1bW1hcnlcIl0gPSAyXSA9IFwiU3VtbWFyeVwiO1xuICAgIH0pKFJlbmRlclR5cGUgPSBleHBvcnRzLlJlbmRlclR5cGUgfHwgKGV4cG9ydHMuUmVuZGVyVHlwZSA9IHt9KSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYmFzZS9lbnVtLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENlbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDZWxsKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEubWVyZ2UodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENlbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNlbGwgPSBDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJvdyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJvdyhvcHRpb25zKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLm1lcmdlKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSb3c7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJvdyA9IFJvdztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9tb2RlbHMvcm93LmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9kYXRhXzEsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEYXRhID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRGF0YShwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5pbml0RGF0YU1hbmFnZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5yb3dzQWRkZWQsIHRoaXMuYWRkUm93cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucm93c1JlbW92ZWQsIHRoaXMucmVtb3ZlUm93cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YVNvdXJjZU1vZGlmaWVkLCB0aGlzLmluaXREYXRhTWFuYWdlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51cGRhdGVEYXRhLCB0aGlzLmNydWRBY3Rpb25zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5hZGREZWxldGVBY3Rpb24sIHRoaXMuZ2V0RGF0YSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgRGF0YS5wcm90b3R5cGUuaW5pdERhdGFNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXIgPSBnT2JqLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyID8gZ09iai5kYXRhU291cmNlIDpcbiAgICAgICAgICAgICAgICAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChnT2JqLmRhdGFTb3VyY2UpID8gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoKSA6IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKGdPYmouZGF0YVNvdXJjZSkpO1xuICAgICAgICAgICAgZ09iai5xdWVyeSA9IGdPYmoucXVlcnkgaW5zdGFuY2VvZiBlajJfZGF0YV8xLlF1ZXJ5ID8gZ09iai5xdWVyeSA6IG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdlbmVyYXRlUXVlcnkgPSBmdW5jdGlvbiAoc2tpcFBhZ2UpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBnT2JqLnF1ZXJ5LmNsb25lKCk7XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0ZpbHRlcmluZyAmJiBnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfaSA8IGNvbHVtbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IGNvbHVtbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBzVHlwZSA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChjb2wuZmllbGQpLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzVHlwZSAhPT0gJ2RhdGUnICYmIHNUeXBlICE9PSAnZGF0ZXRpbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeS53aGVyZShjb2wuZmllbGQsIGNvbC5vcGVyYXRvciwgY29sLnZhbHVlLCAhY29sLm1hdGNoQ2FzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeS53aGVyZSh0aGlzLmdldERhdGVQcmVkaWNhdGUoY29sKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5zZWFyY2hTZXR0aW5ncy5rZXkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNTZXR0aW5ncyA9IGdPYmouc2VhcmNoU2V0dGluZ3M7XG4gICAgICAgICAgICAgICAgc1NldHRpbmdzLmZpZWxkcyA9IHNTZXR0aW5ncy5maWVsZHMubGVuZ3RoID8gc1NldHRpbmdzLmZpZWxkcyA6IGdPYmouZ2V0Q29sdW1uRmllbGROYW1lcygpO1xuICAgICAgICAgICAgICAgIHF1ZXJ5LnNlYXJjaChzU2V0dGluZ3Mua2V5LCBzU2V0dGluZ3MuZmllbGRzLCBzU2V0dGluZ3Mub3BlcmF0b3IsIHNTZXR0aW5ncy5pZ25vcmVDYXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouYWdncmVnYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICByb3cuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGVzID0gY29sdW1uLnR5cGUgaW5zdGFuY2VvZiBBcnJheSA/IGNvbHVtbi50eXBlIDogW2NvbHVtbi50eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgdHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gcXVlcnkuYWdncmVnYXRlKHR5cGUsIGNvbHVtbi5maWVsZCk7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoKGdPYmouYWxsb3dTb3J0aW5nIHx8IGdPYmouYWxsb3dHcm91cGluZykgJiYgZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICAgICAgdmFyIHNvcnRHcnAgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gY29sdW1ucy5sZW5ndGggLSAxOyBpID4gLTE7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2x1bW5zW2ldLmZpZWxkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LnNvcnRCeShjb2x1bW5zW2ldLmZpZWxkLCBjb2x1bW5zW2ldLmRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0R3JwLnB1c2goY29sdW1uc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNvcnRHcnAubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkuc29ydEJ5KHNvcnRHcnBbaV0uZmllbGQsIHNvcnRHcnBbaV0uZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGdPYmouYWxsb3dQYWdpbmcgfHwgZ09iai5lbmFibGVWaXJ0dWFsaXphdGlvbikgJiYgc2tpcFBhZ2UgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS5wYWdlKGdPYmoucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlLCBnT2JqLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nICYmIGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkuZ3JvdXAoY29sdW1uc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5O1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKGFyZ3MsIHF1ZXJ5KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGFyZ3MgPT09IHZvaWQgMCkgeyBhcmdzID0geyByZXF1ZXN0VHlwZTogJycgfTsgfVxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5KGFyZ3MuZm9yZWlnbktleURhdGEgJiZcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhhcmdzLmZvcmVpZ25LZXlEYXRhKS5sZW5ndGggP1xuICAgICAgICAgICAgICAgIGFyZ3MuZm9yZWlnbktleURhdGEgOiB0aGlzLnBhcmVudC5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpKTtcbiAgICAgICAgICAgIHN3aXRjaCAoYXJncy5yZXF1ZXN0VHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkgPyBxdWVyeSA6IHRoaXMuZ2VuZXJhdGVRdWVyeSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyLnJlbW92ZShrZXksIGFyZ3MuZGF0YVswXSwgbnVsbCwgcXVlcnkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeSA/IHF1ZXJ5IDogdGhpcy5nZW5lcmF0ZVF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXIuaW5zZXJ0KGFyZ3MuZGF0YSwgbnVsbCwgcXVlcnksIDApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFNYW5hZ2VyLnJlYWR5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlYWR5ID0gdGhpcy5kYXRhTWFuYWdlci5yZWFkeTtcbiAgICAgICAgICAgICAgICByZWFkeS50aGVuKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGFNYW5hZ2VyID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoZS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25GYWlsdXJlLCB7IGVycm9yOiBlIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YU1hbmFnZXIuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuY3J1ZEFjdGlvbnMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVF1ZXJ5KCk7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG51bGw7XG4gICAgICAgICAgICB2YXIgcHIgPSAncHJvbWlzZSc7XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoYXJncy5mb3JlaWduS2V5RGF0YSAmJlxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGFyZ3MuZm9yZWlnbktleURhdGEpLmxlbmd0aCA/IGFyZ3MuZm9yZWlnbktleURhdGEgOlxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCkpO1xuICAgICAgICAgICAgc3dpdGNoIChhcmdzLnJlcXVlc3RUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2F2ZSc6XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UgPSB0aGlzLmRhdGFNYW5hZ2VyLnVwZGF0ZShrZXksIGFyZ3MuZGF0YSwgbnVsbCwgdGhpcy5nZW5lcmF0ZVF1ZXJ5KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFyZ3NbcHJdID0gcHJvbWlzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuY3J1ZEFjdGlvbiwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKGNoYW5nZXMsIGtleSkge1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDaGFuZ2VzKGNoYW5nZXMsIGtleSwgbnVsbCwgdGhpcy5nZW5lcmF0ZVF1ZXJ5KCkucmVxdWlyZXNDb3VudCgpKTtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZXRLZXkgPSBmdW5jdGlvbiAoa2V5cykge1xuICAgICAgICAgICAgaWYgKGtleXMgJiYga2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5c1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmlzUmVtb3RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS5vZmZsaW5lICE9PSB0cnVlICYmIHRoaXMuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS51cmwgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuZ2V0RGF0ZVByZWRpY2F0ZSA9IGZ1bmN0aW9uIChmaWx0ZXJPYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBwcmV2RGF0ZTtcbiAgICAgICAgICAgIHZhciBuZXh0RGF0ZTtcbiAgICAgICAgICAgIHZhciBwcmV2T2JqID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHV0aWxfMS5nZXRBY3R1YWxQcm9wZXJ0aWVzKGZpbHRlck9iamVjdCkpO1xuICAgICAgICAgICAgdmFyIG5leHRPYmogPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgdXRpbF8xLmdldEFjdHVhbFByb3BlcnRpZXMoZmlsdGVyT2JqZWN0KSk7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBuZXcgRGF0ZShmaWx0ZXJPYmplY3QudmFsdWUpO1xuICAgICAgICAgICAgcHJldkRhdGUgPSBuZXcgRGF0ZSh2YWx1ZS5zZXREYXRlKHZhbHVlLmdldERhdGUoKSAtIDEpKTtcbiAgICAgICAgICAgIG5leHREYXRlID0gbmV3IERhdGUodmFsdWUuc2V0RGF0ZSh2YWx1ZS5nZXREYXRlKCkgKyAyKSk7XG4gICAgICAgICAgICBwcmV2T2JqLnZhbHVlID0gcHJldkRhdGU7XG4gICAgICAgICAgICBuZXh0T2JqLnZhbHVlID0gbmV4dERhdGU7XG4gICAgICAgICAgICBpZiAoZmlsdGVyT2JqZWN0Lm9wZXJhdG9yID09PSAnZXF1YWwnKSB7XG4gICAgICAgICAgICAgICAgcHJldk9iai5vcGVyYXRvciA9ICdncmVhdGVydGhhbic7XG4gICAgICAgICAgICAgICAgbmV4dE9iai5vcGVyYXRvciA9ICdsZXNzdGhhbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmV2T2JqLm9wZXJhdG9yID0gJ2xlc3N0aGFub3JlcXVhbCc7XG4gICAgICAgICAgICAgICAgbmV4dE9iai5vcGVyYXRvciA9ICdncmVhdGVydGhhbm9yZXF1YWwnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZVN0ID0gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKHByZXZPYmouZmllbGQsIHByZXZPYmoub3BlcmF0b3IsIHByZXZPYmoudmFsdWUsIGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGVFbmQgPSBuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUobmV4dE9iai5maWVsZCwgbmV4dE9iai5vcGVyYXRvciwgbmV4dE9iai52YWx1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGZpbHRlck9iamVjdC5vcGVyYXRvciA9PT0gJ2VxdWFsJyA/IHByZWRpY2F0ZVN0LmFuZChwcmVkaWNhdGVFbmQpIDogcHJlZGljYXRlU3Qub3IocHJlZGljYXRlRW5kKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuYWRkUm93cyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gZS5yZWNvcmRzLmxlbmd0aDsgaSA+IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS5qc29uLnNwbGljZShlLnRvSW5kZXgsIDAsIGUucmVjb3Jkc1tpIC0gMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5yZW1vdmVSb3dzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBqc29uID0gdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLmpzb247XG4gICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2UuanNvbiA9IGpzb24uZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsgcmV0dXJuIGUuaW5kZXhlcy5pbmRleE9mKGluZGV4KSA9PT0gLTE7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5yb3dzQWRkZWQsIHRoaXMuYWRkUm93cyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnJvd3NSZW1vdmVkLCB0aGlzLnJlbW92ZVJvd3MpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYXRhU291cmNlTW9kaWZpZWQsIHRoaXMuaW5pdERhdGFNYW5hZ2VyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YVNvdXJjZU1vZGlmaWVkLCB0aGlzLmRlc3Ryb3kpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51cGRhdGVEYXRhLCB0aGlzLmNydWRBY3Rpb25zKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuYWRkRGVsZXRlQWN0aW9uLCB0aGlzLmdldERhdGEpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGF0YTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGF0YSA9IERhdGE7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9kYXRhLmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi9yb3ctcmVuZGVyZXJcIiwgXCIuLi9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yXCIsIFwiLi4vc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgdXRpbF8xLCBldmVudHMsIHJvd19yZW5kZXJlcl8xLCByb3dfbW9kZWxfZ2VuZXJhdG9yXzEsIGdyb3VwX21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb250ZW50UmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29udGVudFJlbmRlcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNvbHVtbkRyb3AsIHsgdGFyZ2V0OiBlLnRhcmdldCwgZHJvcHBlZEVsZW1lbnQ6IGUuZHJvcHBlZEVsZW1lbnQgfSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUoZS5kcm9wcGVkRWxlbWVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5yYWZDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5hcmlhU2VydmljZS5zZXRCdXN5KF90aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jb250ZW50UmVhZHksIHt9KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuZGF0YUJvdW5kLCB7fSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IChfdGhpcy5hcmdzLnJlcXVlc3RUeXBlIHx8ICcnKS50b0xvd2VyQ2FzZSgpICsgJy1jb21wbGV0ZSc7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5ub3RpZnkoYWN0aW9uLCBfdGhpcy5hcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdhcmlhU2VydmljZScpO1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0b3IgPSB0aGlzLmdldE1vZGVsR2VuZXJhdG9yKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMuc2V0VmlzaWJsZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sR3JvdXBSZWZyZXNoLCB0aGlzLmNvbEdyb3VwUmVmcmVzaCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUucmVuZGVyUGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyaWRjb250ZW50JyB9KTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY29udGVudCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBpbm5lckRpdi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyhpbm5lckRpdiwgeyBidXN5OiBmYWxzZSB9KTtcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbm5lckRpdik7XG4gICAgICAgICAgICB0aGlzLnNldFBhbmVsKGRpdik7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudERpdiA9IHRoaXMuZ2V0UGFuZWwoKTtcbiAgICAgICAgICAgIGNvbnRlbnREaXYuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVDb250ZW50VGFibGUoKSk7XG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKGNvbnRlbnREaXYucXVlcnlTZWxlY3RvcignLmUtdGFibGUnKSk7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnModGhpcy5nZXRUYWJsZSgpLCB7XG4gICAgICAgICAgICAgICAgbXVsdGlzZWxlY3RhYmxlOiB0aGlzLnBhcmVudC5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnbXVsdGlwbGUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvbnRlbnREcm9wKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmNyZWF0ZUNvbnRlbnRUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXRhYmxlJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbHNwYWNpbmc6ICcwLjI1cHgnLCByb2xlOiAnZ3JpZCcsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgJ19jb250ZW50X3RhYmxlJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRDb2xHcm91cCh0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRoZWFkZXInKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0aGlzLmdldENvbEdyb3VwKCkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0Ym9keScpKTtcbiAgICAgICAgICAgIGlubmVyRGl2LmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgICAgIHJldHVybiBpbm5lckRpdjtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUucmVmcmVzaENvbnRlbnRSb3dzID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoYXJncyA9PT0gdm9pZCAwKSB7IGFyZ3MgPSB7fTsgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkYXRhU291cmNlID0gZ09iai5jdXJyZW50Vmlld0RhdGE7XG4gICAgICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgdHI7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIG51bGwsIHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHRoaXMucm93RWxlbWVudHMgPSBbXTtcbiAgICAgICAgICAgIHZhciBtb2RlbERhdGEgPSB0aGlzLmdlbmVyYXRvci5nZW5lcmF0ZVJvd3MoZGF0YVNvdXJjZSwgYXJncyk7XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSB0aGlzLmdldFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBtb2RlbERhdGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWdPYmoucm93VGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdHIgPSByb3cucmVuZGVyKG1vZGVsRGF0YVtpXSwgY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBnT2JqLmdldFJvd1RlbXBsYXRlKCkoZWoyX2Jhc2VfMi5leHRlbmQoeyBpbmRleDogaSB9LCBkYXRhU291cmNlW2ldKSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZWxlbWVudHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc1RSID0gZWxlbWVudHNbal0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RyJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1RSIHx8IChlbGVtZW50c1tqXS5xdWVyeVNlbGVjdG9yQWxsICYmIGVsZW1lbnRzW2pdLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJykubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyID0gaXNUUiA/IGVsZW1lbnRzW2pdIDogZWxlbWVudHNbal0ucXVlcnlTZWxlY3RvcigndHInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MucHVzaChtb2RlbERhdGFbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlbERhdGFbaV0uaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZCA9IHRyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGw6bm90KC5lLWhpZGUpJylbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGQuY2xhc3NMaXN0LmFkZCgnZS1kZXRhaWxyb3d2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dFbGVtZW50cy5wdXNoKHRyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRoaXMuZ2V0VGFibGUoKSwgeyBjb2xjb3VudDogZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoLnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuICAgICAgICAgICAgdXRpbF8xLmdldFVwZGF0ZVVzaW5nUmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZSh0Ym9keSk7XG4gICAgICAgICAgICAgICAgdGJvZHkgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXBwZW5kQ29udGVudCh0Ym9keSwgZnJhZywgYXJncyk7XG4gICAgICAgICAgICB9LCB0aGlzLnJhZkNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuYXBwZW5kQ29udGVudCA9IGZ1bmN0aW9uICh0Ym9keSwgZnJhZywgYXJncykge1xuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoZnJhZyk7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRQYW5lbDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0UGFuZWwgPSBmdW5jdGlvbiAocGFuZWwpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFBhbmVsID0gcGFuZWw7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudFRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRUYWJsZSA9IGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50VGFibGUgPSB0YWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldFJvd0VsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93RWxlbWVudHM7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldFJvd0VsZW1lbnRzID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICB0aGlzLnJvd0VsZW1lbnRzID0gZWxlbWVudHM7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldENvbEdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sZ3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldENvbEdyb3VwID0gZnVuY3Rpb24gKGNvbEdyb3VwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2xncm91cCA9IGNvbEdyb3VwO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRWaXNpYmxlID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5nZXRSb3dzKCk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudDtcbiAgICAgICAgICAgIHZhciB0ZXN0Um93O1xuICAgICAgICAgICAgcm93cy5zb21lKGZ1bmN0aW9uIChyKSB7IGlmIChyLmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgIHRlc3RSb3cgPSByO1xuICAgICAgICAgICAgfSByZXR1cm4gci5pc0RhdGFSb3c7IH0pO1xuICAgICAgICAgICAgdmFyIHRhc2tzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMCwgY2xlbiA9IGNvbHVtbnMubGVuZ3RoOyBjIDwgY2xlbjsgYysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNbY107XG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9IHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleChjb2x1bW4udWlkKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW5Ta2lwKGNvbHVtbiwgdGVzdFJvdywgaWR4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGRpc3BsYXlWYWwgPSBjb2x1bW4udmlzaWJsZSA9PT0gdHJ1ZSA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5nZXRDb2xHcm91cCgpLmNoaWxkTm9kZXNbaWR4XSwgeyAnZGlzcGxheSc6IGRpc3BsYXlWYWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hDb250ZW50Um93cyh7IHJlcXVlc3RUeXBlOiAncmVmcmVzaCcgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmNvbEdyb3VwUmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldENvbEdyb3VwKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sR3JvdXAgPSB0aGlzLmdldENvbEdyb3VwKCk7XG4gICAgICAgICAgICAgICAgY29sR3JvdXAuaW5uZXJIVE1MID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkaGVhZGVyJykucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb2xHcm91cChjb2xHcm91cCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmluaXRpYWxpemVDb250ZW50RHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZHJvcCA9IG5ldyBlajJfYmFzZV8xLkRyb3BwYWJsZShnT2JqLmdldENvbnRlbnQoKSwge1xuICAgICAgICAgICAgICAgIGFjY2VwdDogJy5lLWRyYWdjbG9uZScsXG4gICAgICAgICAgICAgICAgZHJvcDogdGhpcy5kcm9wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuY2FuU2tpcCA9IGZ1bmN0aW9uIChjb2x1bW4sIHJvdywgaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHJvdykgfHxcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi52aXNpYmxlKSB8fFxuICAgICAgICAgICAgICAgIHJvdy5jZWxsc1tpbmRleF0udmlzaWJsZSA9PT0gY29sdW1uLnZpc2libGU7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldE1vZGVsR2VuZXJhdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdG9yID0gdGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZyA/IG5ldyBncm91cF9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cE1vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KSA6IG5ldyByb3dfbW9kZWxfZ2VuZXJhdG9yXzEuUm93TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5yZW5kZXJFbXB0eSA9IGZ1bmN0aW9uICh0Ym9keSkge1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0U2VsZWN0aW9uID0gZnVuY3Rpb24gKHVpZCwgc2V0LCBjbGVhckFsbCkge1xuICAgICAgICAgICAgdGhpcy5nZXRSb3dzKCkuZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIGNsZWFyQWxsIHx8IHVpZCA9PT0gcm93LnVpZDsgfSlcbiAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7IHJldHVybiByb3cuaXNTZWxlY3RlZCA9IHNldDsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldFJvd0J5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW2luZGV4XTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbnRlbnRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNvbnRlbnRSZW5kZXIgPSBDb250ZW50UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2NvbnRlbnQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vbW9kZWxzL3Jvd1wiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL21vZGVscy9jZWxsXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgcm93XzEsIGVudW1fMSwgY2VsbF8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJvd01vZGVsR2VuZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUm93TW9kZWxHZW5lcmF0b3IocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzID0gZnVuY3Rpb24gKGRhdGEsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IHRoaXMucGFyZW50LmVuYWJsZVZpcnR1YWxpemF0aW9uID8gYXJncy5zdGFydEluZGV4IDogMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGg7IGkgPCBsZW47IGkrKywgc3RhcnRJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgcm93c1tpXSA9IHRoaXMuZ2VuZXJhdGVSb3coZGF0YVtpXSwgc3RhcnRJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmVuc3VyZUNvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlIHx8IHRoaXMucGFyZW50LmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgIGNvbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgbnVsbCwgZW51bV8xLkNlbGxUeXBlLkRldGFpbEV4cGFuZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbHM7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvdyA9IGZ1bmN0aW9uIChkYXRhLCBpbmRleCwgY3NzQ2xhc3MsIGluZGVudCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgIG9wdGlvbnMudWlkID0gdXRpbF8xLmdldFVpZCgnZ3JpZC1yb3cnKTtcbiAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICBvcHRpb25zLmluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICBvcHRpb25zLmluZGVudCA9IGluZGVudDtcbiAgICAgICAgICAgIG9wdGlvbnMuaXNEYXRhUm93ID0gdHJ1ZTtcbiAgICAgICAgICAgIG9wdGlvbnMuY3NzQ2xhc3MgPSBjc3NDbGFzcztcbiAgICAgICAgICAgIG9wdGlvbnMuaXNBbHRSb3cgPSB0aGlzLnBhcmVudC5lbmFibGVBbHRSb3cgPyBpbmRleCAlIDIgIT09IDAgOiBmYWxzZTtcbiAgICAgICAgICAgIG9wdGlvbnMuaXNTZWxlY3RlZCA9IHRoaXMucGFyZW50LmdldFNlbGVjdGVkUm93SW5kZXhlcygpLmluZGV4T2YoaW5kZXgpID4gLTE7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSB0aGlzLmVuc3VyZUNvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93XzEuUm93KG9wdGlvbnMpO1xuICAgICAgICAgICAgcm93LmNlbGxzID0gY2VsbHMuY29uY2F0KHRoaXMuZ2VuZXJhdGVDZWxscyhvcHRpb25zKSk7XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9O1xuICAgICAgICBSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVDZWxscyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGR1bW1pZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgdG1wID0gW107XG4gICAgICAgICAgICBkdW1taWVzLmZvckVhY2goZnVuY3Rpb24gKGR1bW15LCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0bXAucHVzaChfdGhpcy5nZW5lcmF0ZUNlbGwoZHVtbXksIG9wdGlvbnMudWlkLCB1bmRlZmluZWQsIG51bGwsIGluZGV4KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0bXA7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGwgPSBmdW5jdGlvbiAoY29sdW1uLCByb3dJZCwgY2VsbFR5cGUsIGNvbFNwYW4sIG9JbmRleCkge1xuICAgICAgICAgICAgdmFyIG9wdCA9IHtcbiAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGNvbHVtbi52aXNpYmxlLFxuICAgICAgICAgICAgICAgICdpc0RhdGFDZWxsJzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpZWxkIHx8IGNvbHVtbi50ZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgJ2lzVGVtcGxhdGUnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udGVtcGxhdGUpLFxuICAgICAgICAgICAgICAgICdyb3dJRCc6IHJvd0lkLFxuICAgICAgICAgICAgICAgICdjb2x1bW4nOiBjb2x1bW4sXG4gICAgICAgICAgICAgICAgJ2NlbGxUeXBlJzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY2VsbFR5cGUpID8gY2VsbFR5cGUgOiBlbnVtXzEuQ2VsbFR5cGUuRGF0YSxcbiAgICAgICAgICAgICAgICAnY29sU3Bhbic6IGNvbFNwYW5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAob3B0LmlzRGF0YUNlbGwpIHtcbiAgICAgICAgICAgICAgICBvcHQuaW5kZXggPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleEJ5RmllbGQoY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgY2VsbF8xLkNlbGwob3B0KTtcbiAgICAgICAgfTtcbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLnJlZnJlc2hSb3dzID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaW5wdXQuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7IHJldHVybiByb3cuY2VsbHMgPSBfdGhpcy5nZW5lcmF0ZUNlbGxzKHJvdyk7IH0pO1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUm93TW9kZWxHZW5lcmF0b3I7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJvd01vZGVsR2VuZXJhdG9yID0gUm93TW9kZWxHZW5lcmF0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yXCIsIFwiLi4vc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCByb3dfMSwgZWoyX2Jhc2VfMSwgZW51bV8xLCByb3dfbW9kZWxfZ2VuZXJhdG9yXzEsIHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEdyb3VwTW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JvdXBNb2RlbEdlbmVyYXRvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXBNb2RlbEdlbmVyYXRvcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmluZGV4ID0gMDtcbiAgICAgICAgICAgIF90aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIF90aGlzLnN1bW1hcnlNb2RlbEdlbiA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKHBhcmVudCk7XG4gICAgICAgICAgICBfdGhpcy5jYXB0aW9uTW9kZWxHZW4gPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKHBhcmVudCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzID0gZnVuY3Rpb24gKGRhdGEsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzLmNhbGwodGhpcywgZGF0YSwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLnBhcmVudC5lbmFibGVWaXJ0dWFsaXphdGlvbiA/ICh0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgLSAxKSAqIGRhdGEucmVjb3Jkcy5sZW5ndGggOiAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldEdyb3VwZWRSZWNvcmRzKDAsIGRhdGFbaV0sIGRhdGEubGV2ZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3dzO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRHcm91cGVkUmVjb3JkcyA9IGZ1bmN0aW9uIChpbmRleCwgZGF0YSwgcmF3KSB7XG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSByYXc7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChkYXRhLml0ZW1zKSkge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGRhdGEuR3JvdXBHdWlkKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd3MgPSB0aGlzLnJvd3MuY29uY2F0KHRoaXMuZ2VuZXJhdGVEYXRhUm93cyhkYXRhLCBpbmRleCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0R3JvdXBlZFJlY29yZHMoaW5kZXgsIGRhdGFbal0sIGRhdGEubGV2ZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gdGhpcy5yb3dzLmNvbmNhdCh0aGlzLmdlbmVyYXRlQ2FwdGlvblJvdyhkYXRhLCBpbmRleCkpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLml0ZW1zICYmIGRhdGEuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0R3JvdXBlZFJlY29yZHMoaW5kZXggKyAxLCBkYXRhLml0ZW1zLCBkYXRhLml0ZW1zLmxldmVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHRoaXMucm93cykucHVzaC5hcHBseShfYSwgdGhpcy5zdW1tYXJ5TW9kZWxHZW4uZ2VuZXJhdGVSb3dzKGRhdGEsIHsgbGV2ZWw6IGxldmVsIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldENhcHRpb25Sb3dDZWxscyA9IGZ1bmN0aW9uIChmaWVsZCwgaW5kZW50LCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICB2YXIgdmlzaWJsZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gdGhpcy5wYXJlbnQuY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQgPT09IGZpZWxkOyB9KVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBncm91cGVkTGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uIHx8IGluZGV4ZXMuaW5kZXhPZihpbmRlbnQpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kZW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlSW5kZW50Q2VsbCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgbnVsbCwgZW51bV8xLkNlbGxUeXBlLkV4cGFuZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5kZW50ID0gdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyAxIDpcbiAgICAgICAgICAgICAgICAodGhpcy5wYXJlbnQuZ2V0VmlzaWJsZUNvbHVtbnMoKS5sZW5ndGggKyBncm91cGVkTGVuICsgKGdPYmouZGV0YWlsVGVtcGxhdGUgfHwgZ09iai5jaGlsZEdyaWQgPyAxIDogMCkgLVxuICAgICAgICAgICAgICAgICAgICBpbmRlbnQgKyAodGhpcy5wYXJlbnQuZ2V0VmlzaWJsZUNvbHVtbnMoKS5sZW5ndGggPyAtMSA6IDApKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hZ2dyZWdhdGVzLmxlbmd0aCAmJiAhdGhpcy5jYXB0aW9uTW9kZWxHZW4uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhcHRpb25DZWxscyA9IHRoaXMuY2FwdGlvbk1vZGVsR2VuLmdlbmVyYXRlUm93cyhkYXRhKVswXTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmV4dGVuZChkYXRhLCBjYXB0aW9uQ2VsbHMuZGF0YSk7XG4gICAgICAgICAgICAgICAgdmlzaWJsZXMgPSBjYXB0aW9uQ2VsbHMuY2VsbHMuZmlsdGVyKGZ1bmN0aW9uIChjZWxsKSB7IHJldHVybiBjZWxsLnZpc2libGU7IH0pO1xuICAgICAgICAgICAgICAgIHZpc2libGVzID0gdmlzaWJsZXMuc2xpY2UoZ3JvdXBlZExlbiArIDEsIHZpc2libGVzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgaW5kZW50ID0gaW5kZW50IC0gdmlzaWJsZXMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbHMgPSAoIXRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gW2NvbHVtbl0gOiB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkpO1xuICAgICAgICAgICAgdmFyIHdGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbHMuZm9yRWFjaChmdW5jdGlvbiAoY29sLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciB0bXBGbGFnID0gd0ZsYWcgJiYgaW5kZXhlcy5pbmRleE9mKGluZGVudCkgIT09IC0xO1xuICAgICAgICAgICAgICAgIGlmICh0bXBGbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIHdGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjZWxsVHlwZSA9ICFfdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gfHwgdG1wRmxhZyA/XG4gICAgICAgICAgICAgICAgICAgIGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb24gOiBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBDYXB0aW9uRW1wdHk7XG4gICAgICAgICAgICAgICAgaW5kZW50ID0gX3RoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGNlbGxUeXBlID09PSBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBDYXB0aW9uID8gaW5kZW50ICsgZ3JvdXBlZExlbiA6IGluZGVudDtcbiAgICAgICAgICAgICAgICBjZWxscy5wdXNoKF90aGlzLmdlbmVyYXRlQ2VsbChjb2x1bW4sIG51bGwsIGNlbGxUeXBlLCBpbmRlbnQpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2VsbHMucHVzaC5hcHBseShjZWxscywgdmlzaWJsZXMpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGxzO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZUNhcHRpb25Sb3cgPSBmdW5jdGlvbiAoZGF0YSwgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoZGF0YS5maWVsZCk7XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgZGF0YSk7XG4gICAgICAgICAgICBpZiAoY29sKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmZpZWxkID0gZGF0YS5maWVsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbnMuaXNEYXRhUm93ID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd18xLlJvdyhvcHRpb25zKTtcbiAgICAgICAgICAgIHJvdy5pbmRlbnQgPSBpbmRlbnQ7XG4gICAgICAgICAgICByb3cuY2VsbHMgPSB0aGlzLmdldENhcHRpb25Sb3dDZWxscyhkYXRhLmZpZWxkLCBpbmRlbnQsIHJvdy5kYXRhKTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlRGF0YVJvd3MgPSBmdW5jdGlvbiAoZGF0YSwgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZGF0YS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3NbaV0gPSB0aGlzLmdlbmVyYXRlUm93KGRhdGFbaV0sIHRoaXMuaW5kZXgsIGkgPyB1bmRlZmluZWQgOiAnZS1maXJzdGNoaWxkcm93JywgaW5kZW50KTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGluZGVudDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2YoaW5kZW50KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uY2VsbHMudW5zaGlmdCh0aGlzLmdlbmVyYXRlSW5kZW50Q2VsbCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlSW5kZW50Q2VsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgbnVsbCwgZW51bV8xLkNlbGxUeXBlLkluZGVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLnJlZnJlc2hSb3dzID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICBpbnB1dC5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICBpZiAocm93LmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMgPSBfdGhpcy5nZW5lcmF0ZUNlbGxzKHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcm93LmluZGVudDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZGV4ZXMuaW5kZXhPZihyb3cuaW5kZW50KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscy51bnNoaWZ0KF90aGlzLmdlbmVyYXRlSW5kZW50Q2VsbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNSb3cgPSBfdGhpcy5nZW5lcmF0ZUNhcHRpb25Sb3cocm93LmRhdGEsIHJvdy5pbmRlbnQpO1xuICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMgPSBjUm93LmNlbGxzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JvdXBNb2RlbEdlbmVyYXRvcjtcbiAgICB9KHJvd19tb2RlbF9nZW5lcmF0b3JfMS5Sb3dNb2RlbEdlbmVyYXRvcikpO1xuICAgIGV4cG9ydHMuR3JvdXBNb2RlbEdlbmVyYXRvciA9IEdyb3VwTW9kZWxHZW5lcmF0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL21vZGVscy9yb3dcIiwgXCIuLi9tb2RlbHMvY29sdW1uXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9tb2RlbHMvY2VsbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHJvd18xLCBjb2x1bW5fMSwgZWoyX2Jhc2VfMSwgdXRpbF8xLCBlbnVtXzEsIGNlbGxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU3VtbWFyeU1vZGVsR2VuZXJhdG9yKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZ2dyZWdhdGVzLnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSByb3cuY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShjb2x1bW4uZm9vdGVyVGVtcGxhdGUgfHwgY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgfHwgY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgX3RoaXMuY29sdW1uU2VsZWN0b3IoY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93cy5wdXNoKHsgY29sdW1uczogY29sdW1ucyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmNvbHVtblNlbGVjdG9yID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5mb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldENvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIGNvbHVtbnMucHVzaChuZXcgY29sdW1uXzEuQ29sdW1uKHt9KSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgY29sdW1ucy5wdXNoKG5ldyBjb2x1bW5fMS5Db2x1bW4oe30pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHVtbnMucHVzaC5hcHBseShjb2x1bW5zLCB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbnM7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzID0gZnVuY3Rpb24gKGlucHV0LCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmN1cnJlbnRWaWV3RGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuYnVpbGRTdW1tYXJ5RGF0YShpbnB1dCwgYXJncyk7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5nZXREYXRhKCkuZm9yRWFjaChmdW5jdGlvbiAocm93LCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHJvd3MucHVzaChfdGhpcy5nZXRHZW5lcmF0ZWRSb3cocm93LCBkYXRhW2luZGV4XSwgYXJncyA/IGFyZ3MubGV2ZWwgOiB1bmRlZmluZWQpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0R2VuZXJhdGVkUm93ID0gZnVuY3Rpb24gKHN1bW1hcnlSb3csIGRhdGEsIHJhdykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgIHZhciBpbmRlbnRzID0gdGhpcy5nZXRJbmRlbnRCeUxldmVsKHJhdyk7XG4gICAgICAgICAgICB2YXIgaW5kZW50TGVuZ3RoID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCArICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSA/IDEgOiAwKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29sdW1ucygpLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgeyByZXR1cm4gdG1wLnB1c2goX3RoaXMuZ2V0R2VuZXJhdGVkQ2VsbCh2YWx1ZSwgc3VtbWFyeVJvdywgaW5kZXggPj0gaW5kZW50TGVuZ3RoID8gX3RoaXMuZ2V0Q2VsbFR5cGUoKSA6IGVudW1fMS5DZWxsVHlwZS5JbmRlbnQsIGluZGVudHNbaW5kZXhdKSk7IH0pO1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfMS5Sb3coeyBkYXRhOiBkYXRhLCBhdHRyaWJ1dGVzOiB7IGNsYXNzOiAnZS1zdW1tYXJ5cm93JyB9IH0pO1xuICAgICAgICAgICAgcm93LmNlbGxzID0gdG1wO1xuICAgICAgICAgICAgcm93LnZpc2libGUgPSB0bXAuc29tZShmdW5jdGlvbiAoY2VsbCkgeyByZXR1cm4gY2VsbC5pc0RhdGFDZWxsICYmIGNlbGwudmlzaWJsZTsgfSk7XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldEdlbmVyYXRlZENlbGwgPSBmdW5jdGlvbiAoY29sdW1uLCBzdW1tYXJ5Um93LCBjZWxsVHlwZSwgaW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgc0NvbHVtbiA9IHN1bW1hcnlSb3cuY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKHNjb2x1bW4pIHsgcmV0dXJuIHNjb2x1bW4uY29sdW1uTmFtZSA9PT0gY29sdW1uLmZpZWxkOyB9KVswXTtcbiAgICAgICAgICAgIHZhciBhdHRycyA9IHsgJ3N0eWxlJzogeyAndGV4dEFsaWduJzogY29sdW1uLnRleHRBbGlnbiB9IH07XG4gICAgICAgICAgICBpZiAoaW5kZW50KSB7XG4gICAgICAgICAgICAgICAgYXR0cnMuY2xhc3MgPSBpbmRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogY29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChzQ29sdW1uKSxcbiAgICAgICAgICAgICAgICAnaXNUZW1wbGF0ZSc6IHNDb2x1bW4gJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoc0NvbHVtbi5mb290ZXJUZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICB8fCBzQ29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgfHwgc0NvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgJ2NvbHVtbic6IHNDb2x1bW4gfHwge30sXG4gICAgICAgICAgICAgICAgJ2F0dHJpYnV0ZXMnOiBhdHRycyxcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiBjZWxsVHlwZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgY2VsbF8xLkNlbGwob3B0KTtcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5idWlsZFN1bW1hcnlEYXRhID0gZnVuY3Rpb24gKGRhdGEsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZHVtbXkgPSBbXTtcbiAgICAgICAgICAgIHZhciBzdW1tYXJ5Um93cyA9IHRoaXMuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgdmFyIHNpbmdsZSA9IHt9O1xuICAgICAgICAgICAgdmFyIGtleSA9ICcnO1xuICAgICAgICAgICAgc3VtbWFyeVJvd3MuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgc2luZ2xlID0ge307XG4gICAgICAgICAgICAgICAgcm93LmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbmdsZSA9IF90aGlzLnNldFRlbXBsYXRlKGNvbHVtbiwgKGFyZ3MgJiYgYXJncy5hZ2dyZWdhdGVzKSA/IGFyZ3MgOiBkYXRhLCBzaW5nbGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGR1bW15LnB1c2goc2luZ2xlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGR1bW15O1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldEluZGVudEJ5TGV2ZWwgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gJ2UtaW5kZW50Y2VsbHRvcCc7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLnNldFRlbXBsYXRlID0gZnVuY3Rpb24gKGNvbHVtbiwgZGF0YSwgc2luZ2xlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHR5cGVzID0gY29sdW1uLnR5cGU7XG4gICAgICAgICAgICB2YXIgaGVscGVyID0ge307XG4gICAgICAgICAgICB2YXIgZm9ybWF0Rm4gPSBjb2x1bW4uZ2V0Rm9ybWF0dGVyKCkgfHwgKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmN0aW9uIChhKSB7IHJldHVybiBhOyB9OyB9KSgpO1xuICAgICAgICAgICAgdmFyIGdyb3VwID0gZGF0YTtcbiAgICAgICAgICAgIGlmICghKHR5cGVzIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgdHlwZXMgPSBbY29sdW1uLnR5cGVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBjb2x1bW4uZmllbGQgKyAnIC0gJyArIHR5cGU7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3AgPSBjb2x1bW4uY29sdW1uTmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gZ3JvdXAuYWdncmVnYXRlcyAmJiBncm91cC5hZ2dyZWdhdGVzW2tleV0gPyBncm91cC5hZ2dyZWdhdGVzW2tleV0gOlxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEuY2FsY3VsYXRlQWdncmVnYXRlKHR5cGUsIGdyb3VwLmFnZ3JlZ2F0ZXMgPyBncm91cC5yZXN1bHQgOiBkYXRhLCBjb2x1bW4sIF90aGlzLnBhcmVudCk7XG4gICAgICAgICAgICAgICAgc2luZ2xlW2Rpc3BdID0gc2luZ2xlW2Rpc3BdIHx8IHt9O1xuICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXVtrZXldID0gdmFsO1xuICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXVt0eXBlXSA9IGZvcm1hdEZuKHZhbCk7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXS5maWVsZCA9IGdyb3VwLmZpZWxkO1xuICAgICAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF0ua2V5ID0gZ3JvdXAua2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGVscGVyLmZvcm1hdCA9IGNvbHVtbi5nZXRGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIGNvbHVtbi5zZXRUZW1wbGF0ZShoZWxwZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHNpbmdsZTtcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDZWxsVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnVtXzEuQ2VsbFR5cGUuU3VtbWFyeTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIHZhciBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmNvbHVtblNlbGVjdG9yID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRJbmRlbnRCeUxldmVsID0gZnVuY3Rpb24gKGxldmVsKSB7XG4gICAgICAgICAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubWFwKGZ1bmN0aW9uICh2LCBpbmR4KSB7IHJldHVybiBpbmR4IDw9IGxldmVsIC0gMSA/ICcnIDogJ2UtaW5kZW50Y2VsbHRvcCc7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q2VsbFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIH0oU3VtbWFyeU1vZGVsR2VuZXJhdG9yKSk7XG4gICAgZXhwb3J0cy5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIHZhciBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuY29sdW1uU2VsZWN0b3IgPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5pdFZhbCA9IHsgY29sdW1uczogW10gfTtcbiAgICAgICAgICAgIHJldHVybiBbX3N1cGVyLnByb3RvdHlwZS5nZXREYXRhLmNhbGwodGhpcykucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBjdXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldi5jb2x1bW5zID0gcHJldi5jb2x1bW5zLmNvbmNhdChjdXIuY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgIH0sIGluaXRWYWwpXTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5nZXREYXRhKClbMF0uY29sdW1ucyB8fCBbXSkubGVuZ3RoID09PSAwO1xuICAgICAgICB9O1xuICAgICAgICBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDZWxsVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnVtXzEuQ2VsbFR5cGUuQ2FwdGlvblN1bW1hcnk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yO1xuICAgIH0oU3VtbWFyeU1vZGVsR2VuZXJhdG9yKSk7XG4gICAgZXhwb3J0cy5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yID0gQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ2VsbFJlbmRlcmVyKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdURCcsIHsgY2xhc3NOYW1lOiAnZS1yb3djZWxsJywgYXR0cnM6IHsgcm9sZTogJ2dyaWRjZWxsJywgdGFiaW5kZXg6ICctMScgfSB9KTtcbiAgICAgICAgICAgIHRoaXMubG9jYWxpemVyID0gbG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0dGVyID0gbG9jYXRvci5nZXRTZXJ2aWNlKCd2YWx1ZUZvcm1hdHRlcicpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5nZXRHdWkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKGNvbHVtbiwgdmFsdWUsIGRhdGEpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5mb3JtYXR0ZXIudG9WaWV3KHZhbHVlLCBjb2x1bW4uZ2V0Rm9ybWF0dGVyKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpID8gJycgOiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKG5vZGUsIGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICBpZiAoY2VsbC5jb2x1bW4udGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGl0ZXJhbHMgPSBbJ2luZGV4J107XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gY2VsbC5jb2x1bW4uZ2V0Q29sdW1uVGVtcGxhdGUoKShlajJfYmFzZV8xLmV4dGVuZCh7ICdpbmRleCc6IGF0dHJpYnV0ZXNbbGl0ZXJhbHNbMF1dIH0sIGRhdGEpKTtcbiAgICAgICAgICAgICAgICB1dGlsXzEuYXBwZW5kQ2hpbGRyZW4obm9kZSwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIG5vZGUuaW5uZXJUZXh0ICsgJyBpcyB0ZW1wbGF0ZSBjZWxsJyArICcgY29sdW1uIGhlYWRlciAnICtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2x1bW4uaGVhZGVyVGV4dCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuaW52b2tlRm9ybWF0dGVyID0gZnVuY3Rpb24gKGNvbHVtbiwgdmFsdWUsIGRhdGEpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZm9ybWF0dGVyKSkge1xuICAgICAgICAgICAgICAgIGlmICh1dGlsXzEuZG9lc0ltcGxlbWVudEludGVyZmFjZShjb2x1bW4uZm9ybWF0dGVyLCAnZ2V0VmFsdWUnKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybWF0dGVyID0gY29sdW1uLmZvcm1hdHRlcjtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBuZXcgZm9ybWF0dGVyKCkuZ2V0VmFsdWUoY29sdW1uLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGNvbHVtbi5mb3JtYXR0ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjb2x1bW4uZm9ybWF0dGVyKGNvbHVtbiwgZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbHVtbi5mb3JtYXR0ZXIuZ2V0VmFsdWUoY29sdW1uLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZnJlc2hDZWxsKGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hURCA9IGZ1bmN0aW9uICh0ZCwgY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnJlZnJlc2hDZWxsKGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgdGQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBbXS5zbGljZS5jYWxsKG5vZGUuY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVsZW1lbnRzXzEgPSBlbGVtZW50czsgX2kgPCBlbGVtZW50c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gZWxlbWVudHNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGQuYXBwZW5kQ2hpbGQoZWxlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaENlbGwgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2VsbC5jb2x1bW47XG4gICAgICAgICAgICB2YXIgaW5uZXJIdG1sID0gdGhpcy5nZXRHdWkoKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoY29sdW1uLmZpZWxkLCBkYXRhLCBjb2x1bW4pO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi50eXBlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5mb3JtYXQoY29sdW1uLCB2YWx1ZSwgZGF0YSk7XG4gICAgICAgICAgICBpbm5lckh0bWwgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi50eXBlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNOdWxsID0gKHZhbHVlICE9PSAndHJ1ZScgJiYgdmFsdWUgIT09ICdmYWxzZScpO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uZGlzcGxheUFzQ2hlY2tCb3gpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWNoZWNrYm94Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlubmVySHRtbCA9IGlzTnVsbCA/IG51bGwgOiAnPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGRpc2FibGVkICcgKyAodmFsdWUgPT09ICd0cnVlJyA/ICdjaGVja2VkJyA6ICcnKSArICcvPic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYWxlU3RyID0gaXNOdWxsID8gbnVsbCA6IHZhbHVlID09PSAndHJ1ZScgPyAnVHJ1ZScgOiAnRmFsc2UnO1xuICAgICAgICAgICAgICAgICAgICBpbm5lckh0bWwgPSBsb2NhbGVTdHIgPyB0aGlzLmxvY2FsaXplci5nZXRDb25zdGFudChsb2NhbGVTdHIpIDogaW5uZXJIdG1sO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmcm9tRm9ybWF0dGVyID0gdGhpcy5pbnZva2VGb3JtYXR0ZXIoY29sdW1uLCB2YWx1ZSwgZGF0YSk7XG4gICAgICAgICAgICBpbm5lckh0bWwgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZm9ybWF0dGVyKSA/IGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZnJvbUZvcm1hdHRlcikgPyAnJyA6IGZyb21Gb3JtYXR0ZXIudG9TdHJpbmcoKSA6IGlubmVySHRtbDtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgaW5uZXJIdG1sICsgJyBjb2x1bW4gaGVhZGVyICcgKyBjZWxsLmNvbHVtbi5oZWFkZXJUZXh0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmV2YWx1YXRlKG5vZGUsIGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRIdG1sKG5vZGUsIGlubmVySHRtbCwgY29sdW1uLmdldERvbVNldHRlciA/IGNvbHVtbi5nZXREb21TZXR0ZXIoKSA6ICdpbm5lckhUTUwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyhub2RlLCBjZWxsLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmFwcGVuZEh0bWwgPSBmdW5jdGlvbiAobm9kZSwgaW5uZXJIdG1sLCBwcm9wZXJ0eSkge1xuICAgICAgICAgICAgaWYgKHByb3BlcnR5ID09PSB2b2lkIDApIHsgcHJvcGVydHkgPSAnaW5uZXJIVE1MJzsgfVxuICAgICAgICAgICAgbm9kZVtwcm9wZXJ0eV0gPSBpbm5lckh0bWw7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKG5vZGUsIGNlbGwsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjZWxsLmNvbHVtbjtcbiAgICAgICAgICAgIHRoaXMuYnVpbGRBdHRyaWJ1dGVGcm9tQ2VsbChub2RlLCBjZWxsKTtcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGNlbGwuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICBpZiAoY29sdW1uLmN1c3RvbUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGNvbHVtbi5jdXN0b21BdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2x1bW4udGV4dEFsaWduKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5zdHlsZS50ZXh0QWxpZ24gPSBjb2x1bW4udGV4dEFsaWduO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmJ1aWxkQXR0cmlidXRlRnJvbUNlbGwgPSBmdW5jdGlvbiAobm9kZSwgY2VsbCkge1xuICAgICAgICAgICAgdmFyIGF0dHIgPSB7fTtcbiAgICAgICAgICAgIHZhciBwcm9wID0geyAnY29saW5kZXgnOiAnYXJpYS1jb2xpbmRleCcgfTtcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0gW107XG4gICAgICAgICAgICBpZiAoY2VsbC5jb2xTcGFuKSB7XG4gICAgICAgICAgICAgICAgYXR0ci5jb2xTcGFuID0gY2VsbC5jb2xTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNlbGwucm93U3Bhbikge1xuICAgICAgICAgICAgICAgIGF0dHIucm93U3BhbiA9IGNlbGwucm93U3BhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjZWxsLmlzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goJ2UtdGVtcGxhdGVjZWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2VsbC5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoLmFwcGx5KGNsYXNzZXMsIFsnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJywgJ2UtYWN0aXZlJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGwuaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgYXR0cltwcm9wLmNvbGluZGV4XSA9IGNlbGwuaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNlbGwudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRyLmNsYXNzID0gY2xhc3NlcztcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgYXR0cik7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoZmllbGQsIGRhdGEsIGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi52YWx1ZUFjY2Vzc29yKGNvbHVtbi5maWVsZCwgZGF0YSwgY29sdW1uKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENlbGxSZW5kZXJlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ2VsbFJlbmRlcmVyID0gQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2NlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4vY2VsbC1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgY2VsbF9yZW5kZXJlcl8xLCBhcmlhX3NlcnZpY2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSGVhZGVyQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEhlYWRlckNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSGVhZGVyQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdUSCcsIHsgY2xhc3NOYW1lOiAnZS1oZWFkZXJjZWxsJywgYXR0cnM6IHsgcm9sZTogJ2NvbHVtbmhlYWRlcicsIHRhYmluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICBfdGhpcy5hcmlhU2VydmljZSA9IG5ldyBhcmlhX3NlcnZpY2VfMS5BcmlhU2VydmljZSgpO1xuICAgICAgICAgICAgX3RoaXMuaFR4dEVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1oZWFkZXJ0ZXh0JyB9KTtcbiAgICAgICAgICAgIF90aGlzLnNvcnRFbGUgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1zb3J0ZmlsdGVyZGl2IGUtaWNvbnMnIH0pO1xuICAgICAgICAgICAgX3RoaXMuZ3VpID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmdldEd1aSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmd1aS5jbG9uZU5vZGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmVwYXJlSGVhZGVyKGNlbGwsIG5vZGUpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoY2VsbCwgbm9kZSkge1xuICAgICAgICAgICAgdGhpcy5jbGVhbihub2RlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXBhcmVIZWFkZXIoY2VsbCwgbm9kZSk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuY2xlYW4gPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgbm9kZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlSGVhZGVyID0gZnVuY3Rpb24gKGNlbGwsIG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjZWxsLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBhcmlhQXR0ciA9IHt9O1xuICAgICAgICAgICAgdmFyIGlubmVyRElWID0gdGhpcy5nZXRHdWkoKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbHVtbi5oZWFkZXJUZXh0O1xuICAgICAgICAgICAgdmFyIGhlYWRlclRleHQgPSB0aGlzLmhUeHRFbGUuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBoZWFkZXJUZXh0W2NvbHVtbi5nZXREb21TZXR0ZXIoKV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGhlYWRlclRleHQpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGlubmVyRElWLCB7XG4gICAgICAgICAgICAgICAgJ2UtbWFwcGluZ3VpZCc6IGNvbHVtbi51aWQsXG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2UtaGVhZGVyY2VsbGRpdidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5idWlsZEF0dHJpYnV0ZUZyb21DZWxsKG5vZGUsIGNlbGwpO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRIdG1sKG5vZGUsIGlubmVyRElWKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5zb3J0RWxlLmNsb25lTm9kZSgpKTtcbiAgICAgICAgICAgIGlmIChjZWxsLmNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChjZWxsLmNsYXNzTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLmN1c3RvbUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGNvbHVtbi5jdXN0b21BdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2x1bW4uYWxsb3dTb3J0aW5nKSB7XG4gICAgICAgICAgICAgICAgYXJpYUF0dHIuc29ydCA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2x1bW4uYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGFyaWFBdHRyLmdyYWJiZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGhhbmRsZXIuY2xhc3NOYW1lID0gY29sdW1uLmFsbG93UmVzaXppbmcgPyAnZS1yaGFuZGxlciBlLXJjdXJzb3InIDogJ2UtcnN1cHByZXNzJztcbiAgICAgICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKG5vZGUsIGFyaWFBdHRyKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uaGVhZGVyVGV4dEFsaWduKSB8fCAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udGV4dEFsaWduKSkge1xuICAgICAgICAgICAgICAgIHZhciBhbGlnbm1lbnQgPSBjb2x1bW4uaGVhZGVyVGV4dEFsaWduIHx8IGNvbHVtbi50ZXh0QWxpZ247XG4gICAgICAgICAgICAgICAgaW5uZXJESVYuc3R5bGUudGV4dEFsaWduID0gYWxpZ25tZW50O1xuICAgICAgICAgICAgICAgIGlmIChhbGlnbm1lbnQgPT09ICdyaWdodCcgfHwgYWxpZ25tZW50ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKGFsaWdubWVudCA9PT0gJ3JpZ2h0JyA/ICdlLXJpZ2h0YWxpZ24nIDogJ2UtbGVmdGFsaWduJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtcm93c3BhbicsICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjZWxsLnJvd1NwYW4pID8gY2VsbC5yb3dTcGFuIDogMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1jb2xzcGFuJywgJzEnKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmFwcGVuZEh0bWwgPSBmdW5jdGlvbiAobm9kZSwgaW5uZXJIdG1sKSB7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGlubmVySHRtbCk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEhlYWRlckNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkhlYWRlckNlbGxSZW5kZXJlciA9IEhlYWRlckNlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQXJpYVNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBBcmlhU2VydmljZSgpIHtcbiAgICAgICAgfVxuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uICh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBwcm9wcyA9IE9iamVjdC5rZXlzKG9wdGlvbnMpO1xuICAgICAgICAgICAgcHJvcHMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnW25hbWVdLCBvcHRpb25zW25hbWVdKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEFyaWFTZXJ2aWNlLnByb3RvdHlwZS5zZXRFeHBhbmQgPSBmdW5jdGlvbiAodGFyZ2V0LCBleHBhbmQpIHtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5leHBhbmQsIGV4cGFuZCk7XG4gICAgICAgIH07XG4gICAgICAgIEFyaWFTZXJ2aWNlLnByb3RvdHlwZS5zZXRTb3J0ID0gZnVuY3Rpb24gKHRhcmdldCwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuc29ydCwgZGlyZWN0aW9uLCB0eXBlb2YgZGlyZWN0aW9uID09PSAnYm9vbGVhbicpO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0QnVzeSA9IGZ1bmN0aW9uICh0YXJnZXQsIGlzQnVzeSkge1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLmJ1c3ksIGlzQnVzeSk7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuaW52YWxpZCwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEFyaWFTZXJ2aWNlLnByb3RvdHlwZS5zZXRHcmFiYmVkID0gZnVuY3Rpb24gKHRhcmdldCwgaXNHcmFiYmVkLCByZW1vdmUpIHtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5ncmFiYmVkLCBpc0dyYWJiZWQsIHJlbW92ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEFyaWFTZXJ2aWNlLnByb3RvdHlwZS5zZXREcm9wVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCwgaXNUYXJnZXQpIHtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5kcm9wZWZmZWN0LCAnY29weScsICFpc1RhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBcmlhU2VydmljZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQXJpYVNlcnZpY2UgPSBBcmlhU2VydmljZTtcbiAgICBmdW5jdGlvbiBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBhdHRyaWJ1dGUsIHZhbHVlLCByZW1vdmUpIHtcbiAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgICAgZXhwYW5kOiAnYXJpYS1leHBhbmRlZCcsXG4gICAgICAgIHJvbGU6ICdyb2xlJyxcbiAgICAgICAgc2VsZWN0ZWQ6ICdhcmlhLXNlbGVjdGVkJyxcbiAgICAgICAgbXVsdGlzZWxlY3RhYmxlOiAnYXJpYS1tdWx0aXNlbGVjdGFibGUnLFxuICAgICAgICBzb3J0OiAnYXJpYS1zb3J0JyxcbiAgICAgICAgYnVzeTogJ2FyaWEtYnVzeScsXG4gICAgICAgIGludmFsaWQ6ICdhcmlhLWludmFsaWQnLFxuICAgICAgICBncmFiYmVkOiAnYXJpYS1ncmFiYmVkJyxcbiAgICAgICAgZHJvcGVmZmVjdDogJ2FyaWEtZHJvcGVmZmVjdCcsXG4gICAgICAgIGhhc3BvcHVwOiAnYXJpYS1oYXNwb3B1cCcsXG4gICAgICAgIGxldmVsOiAnYXJpYS1sZXZlbCcsXG4gICAgICAgIGNvbGNvdW50OiAnYXJpYS1jb2xjb3VudCdcbiAgICB9O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL2FyaWEtc2VydmljZS5qc1xuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1RIJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtaGVhZGVyY2VsbCBlLXN0YWNrZWRoZWFkZXJjZWxsJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ2NvbHVtbmhlYWRlcicsXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXN0YWNrZWRoZWFkZXJjZWxsZGl2JyB9KTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBjZWxsLmNvbHVtbi5oZWFkZXJUZXh0O1xuICAgICAgICAgICAgaWYgKGNlbGwuY29sdW1uLnRvb2xUaXApIHtcbiAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBjZWxsLmNvbHVtbi50b29sVGlwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGwuY29sdW1uLnRleHRBbGlnbikpIHtcbiAgICAgICAgICAgICAgICBkaXYuc3R5bGUudGV4dEFsaWduID0gY2VsbC5jb2x1bW4udGV4dEFsaWduO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjZWxsLmNvbFNwYW4udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1jb2xzcGFuJywgY2VsbC5jb2xTcGFuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtcm93c3BhbicsICcxJyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5TdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyID0gU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9zdGFja2VkLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuL2NlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB1dGlsXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSW5kZW50Q2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEluZGVudENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSW5kZW50Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdURCcsIHsgY2xhc3NOYW1lOiAnZS1pbmRlbnRjZWxsJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBJbmRlbnRDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY2VsbC5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSW5kZW50Q2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuSW5kZW50Q2VsbFJlbmRlcmVyID0gSW5kZW50Q2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBHcm91cENhcHRpb25DZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBHcm91cENhcHRpb25DZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1REJywgeyBjbGFzc05hbWU6ICdlLWdyb3VwY2FwdGlvbicsIGF0dHJzOiB7IHJvbGU6ICdncmlkY2VsbCcsIHRhYmluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmZvcm1hdChjZWxsLmNvbHVtbiwgY2VsbC5jb2x1bW4udmFsdWVBY2Nlc3Nvcigna2V5JywgZGF0YSwgY2VsbC5jb2x1bW4pKTtcbiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gY2VsbC5jb2x1bW4uaGVhZGVyVGV4dCArICc6ICcgKyB2YWx1ZSArICcgLSAnICsgZGF0YS5jb3VudCArICcgJyArXG4gICAgICAgICAgICAgICAgKGRhdGEuY291bnQgPCAyID8gdGhpcy5sb2NhbGl6ZXIuZ2V0Q29uc3RhbnQoJ0l0ZW0nKSA6IHRoaXMubG9jYWxpemVyLmdldENvbnN0YW50KCdJdGVtcycpKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY2VsbC5jb2xTcGFuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBub2RlLmlubmVySFRNTCArICcgaXMgZ3JvdXBjYXB0aW9uIGNlbGwnKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyID0gR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyO1xuICAgIHZhciBHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1REJywgeyBjbGFzc05hbWU6ICdlLWdyb3VwY2FwdGlvbicgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gJyZuYnNwOyc7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNlbGwuY29sU3Bhbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5Hcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlciA9IEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2NhcHRpb24tY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vaW5kZW50LWNlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBpbmRlbnRfY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFeHBhbmRDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRXhwYW5kQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBFeHBhbmRDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRXhwYW5kQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmNsYXNzTmFtZSA9ICdlLXJlY29yZHBsdXNleHBhbmQnO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJywgZGF0YS5maWVsZCk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZWotbWFwcGluZ3ZhbHVlJywgZGF0YS5rZXkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWljb25zIGUtZ2RpYWdvbmFsZG93biBlLWljb24tZ2Rvd25hcnJvdycgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFeHBhbmRDZWxsUmVuZGVyZXI7XG4gICAgfShpbmRlbnRfY2VsbF9yZW5kZXJlcl8xLkluZGVudENlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuRXhwYW5kQ2VsbFJlbmRlcmVyID0gRXhwYW5kQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2V4cGFuZC1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1RIJywgeyBjbGFzc05hbWU6ICdlLWdyb3VwdG9wbGVmdGNlbGwnIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEhlYWRlckluZGVudENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1oZWFkZXJjZWxsZGl2IGUtZW1wdHljZWxsJywgaW5uZXJIVE1MOiAnJm5ic3A7JyB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEhlYWRlckluZGVudENlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkhlYWRlckluZGVudENlbGxSZW5kZXJlciA9IEhlYWRlckluZGVudENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1RIJywgeyBjbGFzc05hbWU6ICdlLWRldGFpbGhlYWRlcmNlbGwnIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1lbXB0eWNlbGwnIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyID0gRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RldGFpbC1oZWFkZXItaW5kZW50LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1REJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZGV0YWlscm93Y29sbGFwc2UnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7ICdhcmlhLWV4cGFuZGVkJzogJ2ZhbHNlJywgcm9sZTogJ2dyaWRjZWxsJywgdGFiaW5kZXg6ICctMScgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgZS1kdGRpYWdvbmFscmlnaHQgZS1pY29uLWdyaWdodGFycm93JyB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERldGFpbEV4cGFuZENlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkRldGFpbEV4cGFuZENlbGxSZW5kZXJlciA9IERldGFpbEV4cGFuZENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9kZXRhaWwtZXhwYW5kLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZW51bV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDZWxsUmVuZGVyZXJGYWN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ2VsbFJlbmRlcmVyRmFjdG9yeSgpIHtcbiAgICAgICAgICAgIHRoaXMuY2VsbFJlbmRlck1hcCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIENlbGxSZW5kZXJlckZhY3RvcnkucHJvdG90eXBlLmFkZENlbGxSZW5kZXJlciA9IGZ1bmN0aW9uIChuYW1lLCB0eXBlKSB7XG4gICAgICAgICAgICBuYW1lID0gdHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnID8gbmFtZSA6IGVqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgbmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNlbGxSZW5kZXJNYXBbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsUmVuZGVyTWFwW25hbWVdID0gdHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyRmFjdG9yeS5wcm90b3R5cGUuZ2V0Q2VsbFJlbmRlcmVyID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIG5hbWUgPSB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgPyBuYW1lIDogZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBuYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2VsbFJlbmRlck1hcFtuYW1lXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlRoZSBjZWxsUmVuZGVyZXIgXCIgKyBuYW1lICsgXCIgaXMgbm90IGZvdW5kXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jZWxsUmVuZGVyTWFwW25hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2VsbFJlbmRlcmVyRmFjdG9yeTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ2VsbFJlbmRlcmVyRmFjdG9yeSA9IENlbGxSZW5kZXJlckZhY3Rvcnk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvY2VsbC1yZW5kZXItZmFjdG9yeS5qc1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTZXJ2aWNlTG9jYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNlcnZpY2VMb2NhdG9yKCkge1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlcyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIFNlcnZpY2VMb2NhdG9yLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChuYW1lLCB0eXBlKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnNlcnZpY2VzW25hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZXNbbmFtZV0gPSB0eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZXJ2aWNlTG9jYXRvci5wcm90b3R5cGUuZ2V0U2VydmljZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnNlcnZpY2VzW25hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IFwiVGhlIHNlcnZpY2UgXCIgKyBuYW1lICsgXCIgaXMgbm90IHJlZ2lzdGVyZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlcnZpY2VzW25hbWVdO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU2VydmljZUxvY2F0b3I7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNlcnZpY2VMb2NhdG9yID0gU2VydmljZUxvY2F0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvc2VydmljZS1sb2NhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVudW1fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUmVuZGVyZXJGYWN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUmVuZGVyZXJGYWN0b3J5KCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlck1hcCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIFJlbmRlcmVyRmFjdG9yeS5wcm90b3R5cGUuYWRkUmVuZGVyZXIgPSBmdW5jdGlvbiAobmFtZSwgdHlwZSkge1xuICAgICAgICAgICAgdmFyIHJOYW1lID0gZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLlJlbmRlclR5cGUsIG5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5yZW5kZXJlck1hcFtyTmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlck1hcFtyTmFtZV0gPSB0eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW5kZXJlckZhY3RvcnkucHJvdG90eXBlLmdldFJlbmRlcmVyID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciByTmFtZSA9IGVqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5SZW5kZXJUeXBlLCBuYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucmVuZGVyZXJNYXBbck5hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IFwiVGhlIHJlbmRlcmVyIFwiICsgck5hbWUgKyBcIiBpcyBub3QgZm91bmRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyTWFwW3JOYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJlbmRlcmVyRmFjdG9yeTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUmVuZGVyZXJGYWN0b3J5ID0gUmVuZGVyZXJGYWN0b3J5O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3JlbmRlcmVyLWZhY3RvcnkuanNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vbW9kZWxzL2NvbHVtblwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGNvbnN0YW50XzEsIGNvbHVtbl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb2x1bW5XaWR0aFNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDb2x1bW5XaWR0aFNlcnZpY2UocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLnNldFdpZHRoVG9Db2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgdmFyIHdGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2YoaSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3RmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb2x1bW5XaWR0aChuZXcgY29sdW1uXzEuQ29sdW1uKHsgd2lkdGg6ICczMHB4JyB9KSwgaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmRldGFpbFRlbXBsYXRlIHx8IHRoaXMucGFyZW50LmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29sdW1uV2lkdGgobmV3IGNvbHVtbl8xLkNvbHVtbih7IHdpZHRoOiAnMzBweCcgfSksIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbiwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRDb2x1bW5XaWR0aChjb2x1bW4sIHdGbGFnID8gdW5kZWZpbmVkIDogaW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuc2V0Q29sdW1uV2lkdGggPSBmdW5jdGlvbiAoY29sdW1uLCBpbmRleCwgbW9kdWxlKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uSW5kZXggPSBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGluZGV4KSA/IHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleChjb2x1bW4udWlkKSA6IGluZGV4O1xuICAgICAgICAgICAgdmFyIGNXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoY29sdW1uKTtcbiAgICAgICAgICAgIGlmIChjV2lkdGggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFdpZHRoKGNXaWR0aCwgY29sdW1uSW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0V2lkdGhUb1RhYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShjb25zdGFudF8xLmNvbHVtbldpZHRoQ2hhbmdlZCwgeyBpbmRleDogY29sdW1uSW5kZXgsIHdpZHRoOiBjV2lkdGgsIGNvbHVtbjogY29sdW1uLCBtb2R1bGU6IG1vZHVsZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5zZXRXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIHZhciBmV2lkdGggPSBlajJfYmFzZV8yLmZvcm1hdFVuaXQod2lkdGgpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckNvbCA9IGhlYWRlci5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNoaWxkcmVuW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChoZWFkZXJDb2wpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJDb2wuc3R5bGUud2lkdGggPSBmV2lkdGg7XG4gICAgICAgICAgICAgICAgY29udGVudC5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNoaWxkcmVuW2luZGV4XS5zdHlsZS53aWR0aCA9IGZXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlZGl0ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZS10YWJsZS5lLWlubGluZS1lZGl0Jyk7XG4gICAgICAgICAgICBpZiAoZWRpdCkge1xuICAgICAgICAgICAgICAgIGVkaXQucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZHJlbltpbmRleF0uc3R5bGUud2lkdGggPSBmV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuZ2V0U2libGluZ3NIZWlnaHQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzID0gdGhpcy5nZXRIZWlnaHRGcm9tRGlyZWN0aW9uKGVsZW1lbnQsICdwcmV2aW91cycpO1xuICAgICAgICAgICAgdmFyIG5leHQgPSB0aGlzLmdldEhlaWdodEZyb21EaXJlY3Rpb24oZWxlbWVudCwgJ25leHQnKTtcbiAgICAgICAgICAgIHJldHVybiBwcmV2aW91cyArIG5leHQ7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuZ2V0SGVpZ2h0RnJvbURpcmVjdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBzaWJsaW5nID0gZWxlbWVudFtkaXJlY3Rpb24gKyAnRWxlbWVudFNpYmxpbmcnXTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKHNpYmxpbmcpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gc2libGluZy5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgc2libGluZyA9IHNpYmxpbmdbZGlyZWN0aW9uICsgJ0VsZW1lbnRTaWJsaW5nJ107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLndpZHRoKSAmJiB0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uLndpZHRoID0gMjAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjb2x1bW4ud2lkdGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHBhcnNlSW50KGNvbHVtbi53aWR0aC50b1N0cmluZygpLCAxMCk7XG4gICAgICAgICAgICBpZiAoY29sdW1uLm1pbldpZHRoICYmIHdpZHRoIDwgcGFyc2VJbnQoY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW4ubWluV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgoY29sdW1uLm1heFdpZHRoICYmIHdpZHRoID4gcGFyc2VJbnQoY29sdW1uLm1heFdpZHRoLnRvU3RyaW5nKCksIDEwKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uLm1heFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5nZXRUYWJsZVdpZHRoID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciB0V2lkdGggPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfaSA8IGNvbHVtbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc18xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgY1dpZHRoID0gdGhpcy5nZXRXaWR0aChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSAhPT0gZmFsc2UgJiYgY1dpZHRoICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRXaWR0aCArPSBwYXJzZUludChjV2lkdGgudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0V2lkdGg7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuc2V0V2lkdGhUb1RhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRXaWR0aCA9IGVqMl9iYXNlXzIuZm9ybWF0VW5pdCh0aGlzLmdldFRhYmxlV2lkdGgodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkuc3R5bGUud2lkdGggPSB0V2lkdGg7XG4gICAgICAgICAgICB2YXIgZWRpdCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtdGFibGUuZS1pbmxpbmUtZWRpdCcpO1xuICAgICAgICAgICAgaWYgKGVkaXQpIHtcbiAgICAgICAgICAgICAgICBlZGl0LnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29sdW1uV2lkdGhTZXJ2aWNlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW5XaWR0aFNlcnZpY2UgPSBDb2x1bW5XaWR0aFNlcnZpY2U7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvd2lkdGgtY29udHJvbGxlci5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBhZ2VTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhQYWdlU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFBhZ2VTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGFnZVNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMTIpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJwYWdlU2l6ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDgpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJwYWdlQ291bnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwiY3VycmVudFBhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJ0b3RhbFJlY29yZHNDb3VudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwiZW5hYmxlUXVlcnlTdHJpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBQYWdlU2V0dGluZ3MucHJvdG90eXBlLCBcInBhZ2VTaXplc1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuUGFnZVNldHRpbmdzID0gUGFnZVNldHRpbmdzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9wYWdlLXNldHRpbmdzLmpzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS9lbnVtXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgdXRpbF8xLCBldmVudHMsIGVudW1fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2VsZWN0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU2VsZWN0aW9uKHBhcmVudCwgc2VsZWN0aW9uU2V0dGluZ3MsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzID0gW107XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncyA9IHNlbGVjdGlvblNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5mYWN0b3J5ID0gbG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaW5pdGlhbGl6ZVNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICdtb3VzZWRvd24nLCB0aGlzLm1vdXNlRG93bkhhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm9uQWN0aW9uQmVnaW4gPSBmdW5jdGlvbiAoYXJncywgdHlwZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGFyZ3MsIHR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIodHlwZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnc2VsZWN0aW9uJztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlUG9wVXAoKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmdldENvbnRlbnQoKSwgJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNFZGl0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmIHRoaXMucGFyZW50LmlzRWRpdDtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RSb3cgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3cgPSBnT2JqLmdldFJvd0J5SW5kZXgoaW5kZXgpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW2luZGV4XTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Jvd1R5cGUoKSB8fCAhc2VsZWN0ZWRSb3cgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpc1Jvd1NlbGVjdGVkID0gc2VsZWN0ZWRSb3cuaGFzQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICB2YXIgaXNUb29nbGUgPSBpbmRleCA9PT0gdGhpcy5wcmV2Um93SW5kZXggJiYgaXNSb3dTZWxlY3RlZDtcbiAgICAgICAgICAgIGlmICghaXNUb29nbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3REYXRhLCByb3dJbmRleDogaW5kZXgsIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCByb3c6IHNlbGVjdGVkUm93LCBwcmV2aW91c1JvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCwgdGFyZ2V0OiB0aGlzLnRhcmdldFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhclJvdygpO1xuICAgICAgICAgICAgaWYgKCFpc1Rvb2dsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUm93U2VsZWN0aW9uKHNlbGVjdGVkUm93LCBpbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dQcm9wcyhpbmRleCk7XG4gICAgICAgICAgICBpZiAoIWlzVG9vZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0RGF0YSwgcm93SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByb3c6IHNlbGVjdGVkUm93LCBwcmV2aW91c1JvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCwgdGFyZ2V0OiB0aGlzLnRhcmdldFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Um93c0J5UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93cyh0aGlzLmdldENvbGxlY3Rpb25Gcm9tSW5kZXhlcyhzdGFydEluZGV4LCBlbmRJbmRleCkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IGVuZEluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdFJvd3MgPSBmdW5jdGlvbiAocm93SW5kZXhlcykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvdyA9IGdPYmouZ2V0Um93QnlJbmRleChyb3dJbmRleGVzWzBdKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3Jvd0luZGV4ZXNbMF1dO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWwoKSB8fCAhdGhpcy5pc1Jvd1R5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICByb3dJbmRleGVzOiByb3dJbmRleGVzLCByb3c6IHNlbGVjdGVkUm93LCByb3dJbmRleDogcm93SW5kZXhlc1swXSwgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICBwcmV2Um93OiBnT2JqLmdldFJvd3MoKVt0aGlzLnByZXZSb3dJbmRleF0sIHByZXZpb3VzUm93SW5kZXg6IHRoaXMucHJldlJvd0luZGV4LFxuICAgICAgICAgICAgICAgIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LCBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YVxuICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGluZyk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyUm93KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd0luZGV4ZXNfMSA9IHJvd0luZGV4ZXM7IF9pIDwgcm93SW5kZXhlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IHJvd0luZGV4ZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dTZWxlY3Rpb24oZ09iai5nZXRSb3dCeUluZGV4KHJvd0luZGV4KSwgcm93SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dQcm9wcyhyb3dJbmRleGVzWzBdKTtcbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgcm93SW5kZXhlczogcm93SW5kZXhlcywgcm93OiBzZWxlY3RlZFJvdywgcm93SW5kZXg6IHJvd0luZGV4ZXNbMF0sIHRhcmdldDogdGhpcy50YXJnZXQsXG4gICAgICAgICAgICAgICAgcHJldlJvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLCBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCxcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGFcbiAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkUm93c1RvU2VsZWN0aW9uID0gZnVuY3Rpb24gKHJvd0luZGV4ZXMpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3cgPSBnT2JqLmdldFJvd0J5SW5kZXgocm93SW5kZXhlc1swXSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzUm93VHlwZSgpIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd0luZGV4ZXNfMiA9IHJvd0luZGV4ZXM7IF9pIDwgcm93SW5kZXhlc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IHJvd0luZGV4ZXNfMltfaV07XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3Jvd0luZGV4XTtcbiAgICAgICAgICAgICAgICB2YXIgaXNVblNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMuaW5kZXhPZihyb3dJbmRleCkgPiAtMTtcbiAgICAgICAgICAgICAgICBnT2JqLnNlbGVjdGVkUm93SW5kZXggPSByb3dJbmRleDtcbiAgICAgICAgICAgICAgICBpZiAoaXNVblNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93RGVzZWxlY3QoZXZlbnRzLnJvd0Rlc2VsZWN0aW5nLCBbcm93SW5kZXhdLCBkYXRhLCBbc2VsZWN0ZWRSb3ddKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMuc3BsaWNlKHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmluZGV4T2Yocm93SW5kZXgpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHMuc3BsaWNlKHRoaXMuc2VsZWN0ZWRSZWNvcmRzLmluZGV4T2Yoc2VsZWN0ZWRSb3cpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3cucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyhzZWxlY3RlZFJvdywgZmFsc2UsIG51bGwsICdlLXNlbGVjdGlvbmJhY2tncm91bmQnLCAnZS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dEZXNlbGVjdChldmVudHMucm93RGVzZWxlY3RpbmcsIFtyb3dJbmRleF0sIGRhdGEsIFtzZWxlY3RlZFJvd10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsIHJvd0luZGV4OiByb3dJbmRleCwgcm93OiBzZWxlY3RlZFJvdywgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSwgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCwgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAgICB9LCBldmVudHMucm93U2VsZWN0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dTZWxlY3Rpb24oc2VsZWN0ZWRSb3csIHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dQcm9wcyhyb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1VuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsIHJvd0luZGV4OiByb3dJbmRleCwgcm93OiBzZWxlY3RlZFJvdywgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSwgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXhcbiAgICAgICAgICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0Q29sbGVjdGlvbkZyb21JbmRleGVzID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIF9hID0gKHN0YXJ0SW5kZXggPCBlbmRJbmRleCkgP1xuICAgICAgICAgICAgICAgIHsgaTogc3RhcnRJbmRleCwgbWF4OiBlbmRJbmRleCB9IDogeyBpOiBlbmRJbmRleCwgbWF4OiBzdGFydEluZGV4IH0sIGkgPSBfYS5pLCBtYXggPSBfYS5tYXg7XG4gICAgICAgICAgICBmb3IgKDsgaSA8PSBtYXg7IGkrKykge1xuICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGFydEluZGV4ID4gZW5kSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpbmRleGVzLnJldmVyc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyUm93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclJvd1NlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzID0gW107XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4ID0gLTE7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlUm93UHJvcHMgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2Um93SW5kZXggPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgdGhpcy5pc1Jvd1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMubGVuZ3RoICYmIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlUm93U2VsZWN0aW9uID0gZnVuY3Rpb24gKHNlbGVjdGVkUm93LCBzdGFydEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkUm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMucHVzaChzdGFydEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzLnB1c2goc2VsZWN0ZWRSb3cpO1xuICAgICAgICAgICAgc2VsZWN0ZWRSb3cuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIHRoaXMuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyhzZWxlY3RlZFJvdywgdHJ1ZSwgbnVsbCwgJ2Utc2VsZWN0aW9uYmFja2dyb3VuZCcsICdlLWFjdGl2ZScpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTtcbiAgICAgICAgICAgIGlmIChzcGFuLmNsYXNzTGlzdC5jb250YWlucygnZS1yb3dzZWxlY3QnKSkge1xuICAgICAgICAgICAgICAgIHNwYW4uY2xhc3NMaXN0LnJlbW92ZSgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhclJvd1NlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyUm93U2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFZpZXdEYXRhID0gdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChjdXJyZW50Vmlld0RhdGFbdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LnB1c2godGhpcy5wYXJlbnQuZ2V0Um93cygpW3RoaXMuc2VsZWN0ZWRSb3dJbmRleGVzW2ldXSk7XG4gICAgICAgICAgICAgICAgICAgIHJvd0luZGV4LnB1c2godGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd0Rlc2VsZWN0KGV2ZW50cy5yb3dEZXNlbGVjdGluZywgcm93SW5kZXgsIGRhdGEsIHJvdyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dfMSA9IHRoaXMucGFyZW50LmdldFJvd0J5SW5kZXgodGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93XzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd18xLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyhyb3dfMSwgZmFsc2UsIHRydWUsICdlLXNlbGVjdGlvbmJhY2tncm91bmQnLCAnZS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmVjb3JkcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNSb3dTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dEZXNlbGVjdChldmVudHMucm93RGVzZWxlY3RlZCwgcm93SW5kZXgsIGRhdGEsIHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucm93RGVzZWxlY3QgPSBmdW5jdGlvbiAodHlwZSwgcm93SW5kZXgsIGRhdGEsIHJvdykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCB7XG4gICAgICAgICAgICAgICAgcm93SW5kZXg6IHJvd0luZGV4LCBkYXRhOiBkYXRhLCByb3c6IHJvd1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Q2VsbCA9IGZ1bmN0aW9uIChjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleC5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBjZWxsSW5kZXgucm93SW5kZXg7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDZWxsVHlwZSgpIHx8ICFzZWxlY3RlZENlbGwgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpc0NlbGxTZWxlY3RlZCA9IHNlbGVjdGVkQ2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKTtcbiAgICAgICAgICAgIHZhciBpc1VwZGF0ZSA9ICEoIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Q0lkeHMpICYmXG4gICAgICAgICAgICAgICAgY2VsbEluZGV4LnJvd0luZGV4ID09PSB0aGlzLnByZXZDSWR4cy5yb3dJbmRleCAmJiBjZWxsSW5kZXguY2VsbEluZGV4ID09PSB0aGlzLnByZXZDSWR4cy5jZWxsSW5kZXggJiZcbiAgICAgICAgICAgICAgICBpc0NlbGxTZWxlY3RlZCk7XG4gICAgICAgICAgICBpZiAoaXNVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogY2VsbEluZGV4LCBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgICAgICBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCwgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCwgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cyxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbCgpO1xuICAgICAgICAgICAgaWYgKGlzVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCwgY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXguY2VsbEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFByb3BzKGNlbGxJbmRleCwgY2VsbEluZGV4KTtcbiAgICAgICAgICAgIGlmIChpc1VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBjZWxsSW5kZXgsIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsIHNlbGVjdGVkUm93Q2VsbEluZGV4OiB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Q2VsbHNCeVJhbmdlID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZENlbGwgPSBnT2JqLmdldENlbGxGcm9tSW5kZXgoc3RhcnRJbmRleC5yb3dJbmRleCwgc3RhcnRJbmRleC5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgdmFyIG1pbjtcbiAgICAgICAgICAgIHZhciBtYXg7XG4gICAgICAgICAgICB2YXIgc3RJbmRleCA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICB2YXIgZWRJbmRleCA9IGVuZEluZGV4ID0gZW5kSW5kZXggPyBlbmRJbmRleCA6IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICB2YXIgY2VsbEluZGV4ZXM7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IHN0YXJ0SW5kZXgucm93SW5kZXg7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzQ2VsbFR5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogc3RhcnRJbmRleCwgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCwgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCwgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/IGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGluZyk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbCgpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXgucm93SW5kZXggPiBlbmRJbmRleC5yb3dJbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgICAgICBzdGFydEluZGV4ID0gZW5kSW5kZXg7XG4gICAgICAgICAgICAgICAgZW5kSW5kZXggPSB0ZW1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXgucm93SW5kZXg7IGkgPD0gZW5kSW5kZXgucm93SW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvblNldHRpbmdzLmNlbGxTZWxlY3Rpb25Nb2RlICE9PSAnYm94Jykge1xuICAgICAgICAgICAgICAgICAgICBtaW4gPSBpID09PSBzdGFydEluZGV4LnJvd0luZGV4ID8gKHN0YXJ0SW5kZXguY2VsbEluZGV4KSA6IDA7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGkgPT09IGVuZEluZGV4LnJvd0luZGV4ID8gKGVuZEluZGV4LmNlbGxJbmRleCkgOiBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWluID0gc3RhcnRJbmRleC5jZWxsSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGVuZEluZGV4LmNlbGxJbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2VsbEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gbWluIDwgbWF4ID8gbWluIDogbWF4LCBsZW4gPSBtaW4gPiBtYXggPyBtaW4gOiBtYXg7IGogPD0gbGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsID0gZ09iai5nZXRDZWxsRnJvbUluZGV4KGksIGopO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkQ2VsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ZXMucHVzaChqKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5wdXNoKHsgcm93SW5kZXg6IGksIGNlbGxJbmRleGVzOiBjZWxsSW5kZXhlcyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFByb3BzKHN0SW5kZXgsIGVkSW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogc3RhcnRJbmRleCwgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLCBzZWxlY3RlZFJvd0NlbGxJbmRleDogdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0ZWQpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdENlbGxzID0gZnVuY3Rpb24gKHJvd0NlbGxJbmRleGVzKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZENlbGwgPSBnT2JqLmdldENlbGxGcm9tSW5kZXgocm93Q2VsbEluZGV4ZXNbMF0ucm93SW5kZXgsIHJvd0NlbGxJbmRleGVzWzBdLmNlbGxJbmRleGVzWzBdKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gcm93Q2VsbEluZGV4ZXNbMF0ucm93SW5kZXg7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzQ2VsbFR5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0sXG4gICAgICAgICAgICAgICAgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCwgaXNDdHJsUHJlc3NlZDogdGhpcy5pc011bHRpQ3RybFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCwgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/IGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGluZyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93Q2VsbEluZGV4ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgY2VsbExlbiA9IHJvd0NlbGxJbmRleGVzW2ldLmNlbGxJbmRleGVzLmxlbmd0aDsgaiA8IGNlbGxMZW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGwgPSBnT2JqLmdldENlbGxGcm9tSW5kZXgocm93Q2VsbEluZGV4ZXNbaV0ucm93SW5kZXgsIHJvd0NlbGxJbmRleGVzW2ldLmNlbGxJbmRleGVzW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZENlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFNlbGVjdGlvbihzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZShzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFJvd0NlbGxJbmRleCh7IHJvd0luZGV4OiByb3dDZWxsSW5kZXhlc1tpXS5yb3dJbmRleCwgY2VsbEluZGV4OiByb3dDZWxsSW5kZXhlc1tpXS5jZWxsSW5kZXhlc1tqXSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxQcm9wcyh7IHJvd0luZGV4OiByb3dDZWxsSW5kZXhlc1swXS5yb3dJbmRleCwgY2VsbEluZGV4OiByb3dDZWxsSW5kZXhlc1swXS5jZWxsSW5kZXhlc1swXSB9LCB7IHJvd0luZGV4OiByb3dDZWxsSW5kZXhlc1swXS5yb3dJbmRleCwgY2VsbEluZGV4OiByb3dDZWxsSW5kZXhlc1swXS5jZWxsSW5kZXhlc1swXSB9KTtcbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLmNlbGxJbmRleGVzWzBdLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cywgc2VsZWN0ZWRSb3dDZWxsSW5kZXg6IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/IGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGVkKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRDZWxsc1RvU2VsZWN0aW9uID0gZnVuY3Rpb24gKGNlbGxJbmRleGVzKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZENlbGwgPSBnT2JqLmdldENlbGxGcm9tSW5kZXgoY2VsbEluZGV4ZXNbMF0ucm93SW5kZXgsIGNlbGxJbmRleGVzWzBdLmNlbGxJbmRleCk7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGNlbGxJbmRleGVzWzBdLnJvd0luZGV4O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbdGhpcy5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWwoKSB8fCAhdGhpcy5pc0NlbGxUeXBlKCkgfHwgdGhpcy5pc0VkaXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY2VsbEluZGV4ZXNfMSA9IGNlbGxJbmRleGVzOyBfaSA8IGNlbGxJbmRleGVzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxJbmRleCA9IGNlbGxJbmRleGVzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1tpXS5yb3dJbmRleCA9PT0gY2VsbEluZGV4LnJvd0luZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IGNlbGxJbmRleGVzWzBdLFxuICAgICAgICAgICAgICAgICAgICBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLCBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBpc1VuU2VsZWN0ZWQgPSBpbmRleCA+IC0xO1xuICAgICAgICAgICAgICAgIGlmIChpc1VuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbElkeCA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1tpbmRleF0uY2VsbEluZGV4ZXM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZENlbGxJZHguaW5kZXhPZihjZWxsSW5kZXguY2VsbEluZGV4KSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXNlbGVjdChldmVudHMuY2VsbERlc2VsZWN0aW5nLCBbeyByb3dJbmRleDogY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXhlczogW2NlbGxJbmRleC5jZWxsSW5kZXhdIH1dLCBzZWxlY3RlZERhdGEsIFtzZWxlY3RlZENlbGxdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbElkeC5zcGxpY2Uoc2VsZWN0ZWRDZWxsSWR4LmluZGV4T2YoY2VsbEluZGV4LmNlbGxJbmRleCksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2UtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2VsbERlc2VsZWN0KGV2ZW50cy5jZWxsRGVzZWxlY3RlZCwgW3sgcm93SW5kZXg6IGNlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4ZXM6IFtjZWxsSW5kZXguY2VsbEluZGV4XSB9XSwgc2VsZWN0ZWREYXRhLCBbc2VsZWN0ZWRDZWxsXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1VuU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbihhcmdzLCBldmVudHMuY2VsbFNlbGVjdGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFJvd0NlbGxJbmRleCh7IHJvd0luZGV4OiBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4LmNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFNlbGVjdGlvbihzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKGFyZ3MsIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCwgY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXguY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsUHJvcHMoY2VsbEluZGV4LCBjZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICghaXNVblNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogY2VsbEluZGV4ZXNbMF0sIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/IGdPYmouZ2V0Q2VsbEZyb21JbmRleCh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXgpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsIHNlbGVjdGVkUm93Q2VsbEluZGV4OiB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNcbiAgICAgICAgICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyQ2VsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsU2VsZWN0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2VsbERlc2VsZWN0ID0gZnVuY3Rpb24gKHR5cGUsIGNlbGxJbmRleGVzLCBkYXRhLCBjZWxscykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCB7XG4gICAgICAgICAgICAgICAgY2VsbHM6IGNlbGxzLCBkYXRhOiBkYXRhLCBjZWxsSW5kZXhlczogY2VsbEluZGV4ZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUNlbGxTZWxlY3Rpb24gPSBmdW5jdGlvbiAoc2VsZWN0ZWRDZWxsLCByb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocm93SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRSb3dDZWxsSW5kZXgoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZWN0ZWRDZWxsLmNsYXNzTGlzdC5hZGQoJ2UtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKTtcbiAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkQXR0cmlidXRlID0gZnVuY3Rpb24gKGNlbGwpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gY2VsbDtcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIGNlbGwuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVDZWxsUHJvcHMgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMucHJldkNJZHhzID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgIHRoaXMucHJldkVDSWR4cyA9IGVuZEluZGV4O1xuICAgICAgICAgICAgdGhpcy5pc0NlbGxTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGggJiYgdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRSb3dDZWxsSW5kZXggPSBmdW5jdGlvbiAocm93Q2VsbEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaXNSb3dBdmFpbDtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2ldLnJvd0luZGV4ID09PSByb3dDZWxsSW5kZXgucm93SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNSb3dBdmFpbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUm93QXZhaWwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2luZGV4XS5jZWxsSW5kZXhlcy5pbmRleE9mKHJvd0NlbGxJbmRleC5jZWxsSW5kZXgpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbaW5kZXhdLmNlbGxJbmRleGVzLnB1c2gocm93Q2VsbEluZGV4LmNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLnB1c2goeyByb3dJbmRleDogcm93Q2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXhlczogW3Jvd0NlbGxJbmRleC5jZWxsSW5kZXhdIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyQ2VsbFNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxscyA9IHRoaXMuZ2V0U2VsZWN0ZWRDZWxsc0VsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICB2YXIgcm93Q2VsbCA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcztcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjZWxscyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Vmlld0RhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dDZWxsLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChjdXJyZW50Vmlld0RhdGFbcm93Q2VsbFtpXS5yb3dJbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgY0xlbiA9IHJvd0NlbGwubGVuZ3RoOyBqIDwgY0xlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRoaXMucGFyZW50LmdldENlbGxGcm9tSW5kZXgocm93Q2VsbFtpXS5yb3dJbmRleCwgcm93Q2VsbFtpXS5jZWxsSW5kZXhlc1tqXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERlc2VsZWN0KGV2ZW50cy5jZWxsRGVzZWxlY3RpbmcsIHJvd0NlbGwsIGRhdGEsIGNlbGxzKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2VsZWN0ZWRDZWxscy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGxzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2UtY2VsbHNlbGVjdGlvbmJhY2tncm91bmQnKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsc1tpXS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NlbGxTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERlc2VsZWN0KGV2ZW50cy5jZWxsRGVzZWxlY3RlZCwgcm93Q2VsbCwgZGF0YSwgY2VsbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldFNlbGVjdGVkQ2VsbHNFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNlbGxzID0gY2VsbHMuY29uY2F0KFtdLnNsaWNlLmNhbGwocm93c1tpXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2VsbHM7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUubW91c2VNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgZ0JSZWN0ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciB4MSA9IHRoaXMueDtcbiAgICAgICAgICAgIHZhciB5MSA9IHRoaXMueTtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHV0aWxfMS5nZXRQb3NpdGlvbihlKTtcbiAgICAgICAgICAgIHZhciB4MiA9IHBvc2l0aW9uLnggLSBnQlJlY3QubGVmdDtcbiAgICAgICAgICAgIHZhciB5MiA9IHBvc2l0aW9uLnkgLSBnQlJlY3QudG9wO1xuICAgICAgICAgICAgdmFyIHRtcDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZS50YXJnZXQsICd0cicpO1xuICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0aGlzLnBhcmVudC5lbGVtZW50Lm9mZnNldExlZnQgKyAyLCBlLmNsaWVudFkpLCAndHInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh4MSA+IHgyKSB7XG4gICAgICAgICAgICAgICAgdG1wID0geDI7XG4gICAgICAgICAgICAgICAgeDIgPSB4MTtcbiAgICAgICAgICAgICAgICB4MSA9IHRtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh5MSA+IHkyKSB7XG4gICAgICAgICAgICAgICAgdG1wID0geTI7XG4gICAgICAgICAgICAgICAgeTIgPSB5MTtcbiAgICAgICAgICAgICAgICB5MSA9IHRtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0geDEgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9IHkxICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IHgyIC0geDEgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodCA9IHkyIC0geTEgKyAncHgnO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiAhZS5jdHJsS2V5ICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSh0aGlzLnN0YXJ0SW5kZXgsIHJvd0luZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5tb3VzZVVwSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2UtZGlzYWJsZXVzZXJzZWxlY3QnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLCAnbW91c2Vtb3ZlJywgdGhpcy5tb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudC5ib2R5LCAnbW91c2V1cCcsIHRoaXMubW91c2VVcEhhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5tb3VzZURvd25IYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBncmlkRWxlbWVudCA9IHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1ncmlkJyk7XG4gICAgICAgICAgICBpZiAoZ3JpZEVsZW1lbnQgJiYgZ3JpZEVsZW1lbnQuaWQgIT09IHRoaXMucGFyZW50LmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5zaGlmdEtleSB8fCBlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dSb3dEcmFnQW5kRHJvcCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSAmJiAhZS5zaGlmdEtleSAmJiAhZS5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUm93VHlwZSgpIHx8IHRoaXMuaXNTaW5nbGVTZWwoKSB8fCBlajJfYmFzZV8zLmNsb3Nlc3QodGFyZ2V0LCAndGQnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc2VsZWN0aW9uYmFja2dyb3VuZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNEcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdlLWRpc2FibGV1c2Vyc2VsZWN0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHRyID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGUudGFyZ2V0LCAndHInKTtcbiAgICAgICAgICAgICAgICB2YXIgZ0JSZWN0ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICB2YXIgcG9zdGlvbiA9IHV0aWxfMS5nZXRQb3NpdGlvbihlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0SW5kZXggPSBwYXJzZUludCh0ci5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgIHRoaXMueCA9IHBvc3Rpb24ueCAtIGdCUmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgIHRoaXMueSA9IHBvc3Rpb24ueSAtIGdCUmVjdC50b3A7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZGRyYWdhcmVhJyB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLCAnbW91c2Vtb3ZlJywgdGhpcy5tb3VzZU1vdmVIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQuYm9keSwgJ21vdXNldXAnLCB0aGlzLm1vdXNlVXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhclNlbEFmdGVyUmVmcmVzaCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5yZXF1ZXN0VHlwZSAhPT0gJ3ZpcnR1YWxzY3JvbGwnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsaXplU2VsZWN0aW9uLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5yb3dTZWxlY3Rpb25Db21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jZWxsU2VsZWN0aW9uQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmRhdGFSZWFkeSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmNsZWFyU2VsQWZ0ZXJSZWZyZXNoLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHRoaXMuY2xlYXJTZWxlY3Rpb24sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmluaXRpYWxpemVTZWxlY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5yb3dTZWxlY3Rpb25Db21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2VsbFNlbGVjdGlvbkNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuZGF0YVJlYWR5KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmNsZWFyU2VsQWZ0ZXJSZWZyZXNoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLmNsZWFyU2VsZWN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5kYXRhUmVhZHkgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUucmVxdWVzdFR5cGUgIT09ICd2aXJ0dWFsc2Nyb2xsJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUucHJvcGVydGllcy50eXBlKSAmJiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdzaW5nbGUnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93SW5kZXhlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJSb3dTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTZWxlY3RNdWx0aVRvdWNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlUG9wVXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLnByb3BlcnRpZXMubW9kZSkgfHxcbiAgICAgICAgICAgICAgICAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLnByb3BlcnRpZXMuY2VsbFNlbGVjdGlvbk1vZGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmhpZGVQb3BVcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd3NlbGVjdCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pbml0aWFsRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyh0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5pc011bHRpQ3RybFJlcXVlc3QgPSBlLmN0cmxLZXkgfHwgdGhpcy5lbmFibGVTZWxlY3RNdWx0aVRvdWNoO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gZS5zaGlmdEtleTtcbiAgICAgICAgICAgIHRoaXMucG9wVXBDbGlja0hhbmRsZXIoZSk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1yb3djZWxsJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0NlbGxTZWxlY3Rpb25IYW5kbGVyKHBhcnNlSW50KHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCksIHBhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlICYmIHRoaXMucGFyZW50LnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdtdWx0aXBsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93UG9wdXAoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc011bHRpQ3RybFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnBvcFVwQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmNsb3Nlc3QodGFyZ2V0LCAnLmUtaGVhZGVyY2VsbCcpIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1yb3djZWxsJykgfHxcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsb3Nlc3QodGFyZ2V0LCAnLmUtZ3JpZHBvcHVwJykpIHtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1yb3dzZWxlY3QnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3BhbmNsaWNrZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2Utc3BhbmNsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTZWxlY3RNdWx0aVRvdWNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2hvd1BvcHVwID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHV0aWxfMS5zZXRDc3NJbkdyaWRQb3BVcCh0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLCBlLCAnZS1yb3dzZWxlY3QgZS1pY29ucyBlLWljb24tcm93c2VsZWN0JyArXG4gICAgICAgICAgICAgICAgKHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9PT0gJ211bHRpcGxlJyAmJlxuICAgICAgICAgICAgICAgICAgICAodGhpcy5zZWxlY3RlZFJlY29yZHMubGVuZ3RoID4gMSB8fCB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMubGVuZ3RoID4gMSkgPyAnIGUtc3BhbmNsaWNrZWQnIDogJycpKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5yb3dDZWxsU2VsZWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0ICYmICF0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsKHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93c0J5UmFuZ2UoZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZSb3dJbmRleCkgPyByb3dJbmRleCA6IHRoaXMucHJldlJvd0luZGV4LCByb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsc0J5UmFuZ2UoZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZDSWR4cykgPyB7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSA6IHRoaXMucHJldkNJZHhzLCB7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFJvd3NUb1NlbGVjdGlvbihbcm93SW5kZXhdKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENlbGxzVG9TZWxlY3Rpb24oW3sgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmtleVByZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2hlY2tTY3JvbGw7XG4gICAgICAgICAgICB2YXIgcHJldmVudERlZmF1bHQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZG93bkFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvd25BcnJvd0tleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1cEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwQXJyb3dLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHRBcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yaWdodEFycm93S2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnRBcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0QXJyb3dLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaG9tZSc6XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob21lS2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybEhvbWUnOlxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3RybEhvbWVLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybEVuZCc6XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHJsRW5kS2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0RG93bic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnREb3duS2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0VXAnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0VXBLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRSaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRSaWdodEtleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdExlZnQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0TGVmdEtleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlc2NhcGUnOlxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybFBsdXNBJzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0cmxQbHVzQSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGVja1Njcm9sbCkge1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxFbGVtID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggfHwgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93ID0gdGhpcy5zZWxlY3RlZFJlY29yZHMubGVuZ3RoID8gdGhpcy5zZWxlY3RlZFJlY29yZHNbMF0gOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Um93QnlJbmRleCh0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbMF0ucm93SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gcm93Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gcm93LnJvd0luZGV4O1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxFbGVtLnNjcm9sbFRvcCA9IHNjcm9sbEVsZW0uc2Nyb2xsVG9wICsgKGUuYWN0aW9uID09PSAnZG93bkFycm93JyA/IGhlaWdodCA6IGhlaWdodCAqIC0xKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tWaXNpYmxlKHJvdykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4ICE9PSAwICYmIHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW4ubGVuZ3RoICE9PSByb3dJbmRleCArIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jaGVja1Zpc2libGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHN0ID0gd2luZG93LnNjcm9sbFk7XG4gICAgICAgICAgICB2YXIgeSA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgc3Q7XG4gICAgICAgICAgICByZXR1cm4geSArIDM2IDwgKHdpbmRvdy5pbm5lckhlaWdodCArIHN0KSAtIHRoaXMuZ2V0Um93SGVpZ2h0KGVsZW1lbnQpICYmIHkgPiAoc3QgLSBlbGVtZW50Lm9mZnNldEhlaWdodCkgK1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Um93SGVpZ2h0KGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldFJvd0hlaWdodCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY3RybFBsdXNBID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93c0J5UmFuZ2UoMCwgdGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpICYmICF0aGlzLmlzU2luZ2xlU2VsKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGxzQnlSYW5nZSh7IHJvd0luZGV4OiAwLCBjZWxsSW5kZXg6IDAgfSwgeyByb3dJbmRleDogdGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCAtIDEsIGNlbGxJbmRleDogdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDEgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZG93bkFycm93S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseURvd25VcEtleSgxLCAhZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4KSAmJiB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4ICsgMSA8IHRoaXMucGFyZW50LmdldFJvd3MoKS5sZW5ndGgsICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkVDSWR4cykgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyAxIDwgdGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudXBBcnJvd0tleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlEb3duVXBLZXkoLTEsICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXgpICYmIHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXggLSAxID4gLTEsICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkVDSWR4cykgJiYgdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4IC0gMSA+IC0xKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseURvd25VcEtleSA9IGZ1bmN0aW9uIChrZXksIGNvbmQxLCBjb25kMikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUm93VHlwZSgpICYmIGNvbmQxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3coZ09iai5zZWxlY3RlZFJvd0luZGV4ICsga2V5KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VXBEb3duKGdPYmouc2VsZWN0ZWRSb3dJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkgJiYgY29uZDIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsga2V5LCBjZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlVcERvd24gPSBmdW5jdGlvbiAocm93SW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBjSW5kZXggPSBwYXJzZUludCh0aGlzLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLmNvbnRlbnRSZW5kZXJlci5nZXRSb3dCeUluZGV4KHJvd0luZGV4KS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJylbY0luZGV4XTtcbiAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHRoaXMudGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5yaWdodEFycm93S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wcmVTZWxlY3RlZENlbGxJbmRleCA9IHRoaXMucHJldkVDSWR4cztcbiAgICAgICAgICAgIHRoaXMuYXBwbHlSaWdodExlZnRLZXkoMSwgMCwgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2RUNJZHhzKSAmJiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4ICsgMSA8IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGgpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmxlZnRBcnJvd0tleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJlU2VsZWN0ZWRDZWxsSW5kZXggPSB0aGlzLnByZXZFQ0lkeHM7XG4gICAgICAgICAgICB0aGlzLmFwcGx5UmlnaHRMZWZ0S2V5KC0xLCB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSwgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2RUNJZHhzKSAmJiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4IC0gMSA+IC0xKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseVJpZ2h0TGVmdEtleSA9IGZ1bmN0aW9uIChrZXkxLCBrZXkyLCBjb25kKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNlbGxJbmRleDtcbiAgICAgICAgICAgIHZhciByb3dJbmRleDtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0aGlzLnByZXZFQ0lkeHMpKSB7XG4gICAgICAgICAgICAgICAgY2VsbEluZGV4ID0gdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleDtcbiAgICAgICAgICAgICAgICByb3dJbmRleCA9IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIGlmIChjb25kICYmIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggKyBrZXkxID4gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCArIGtleTEgPCB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleCA9IHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggKyBrZXkxO1xuICAgICAgICAgICAgICAgICAgICByb3dJbmRleCA9IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsKHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsga2V5MSA+IC0xICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCArIGtleTEgPCB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleCA9IGtleTI7XG4gICAgICAgICAgICAgICAgICAgIHJvd0luZGV4ID0gdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsga2V5MTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsKHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsSGlkZSh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoKGNlbGxJbmRleCA9PT0gMCAmJiByb3dJbmRleCA9PT0gMCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChjZWxsSW5kZXggPT09IGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDEgJiYgcm93SW5kZXggPT09IGdPYmouZ2V0Um93cygpLmxlbmd0aCAtIDEpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleShrZXkxLCBrZXkyLCBjb25kKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh0aGlzLnByZVNlbGVjdGVkQ2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNSb3dUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbEluZGV4XzEgPSBwYXJzZUludCh0aGlzLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgIHZhciByb3dFbGVtZW50ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KHRoaXMudGFyZ2V0LCAndHInKTtcbiAgICAgICAgICAgICAgICBpZiAoY2VsbEluZGV4XzEgKyBrZXkxID4gLTEgJiYgY2VsbEluZGV4XzEgKyBrZXkxIDwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvd0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbCcpW2NlbGxJbmRleF8xICsga2V5MV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhpZGUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKGNlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5MSArPSBrZXkxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlSaWdodExlZnRLZXkoa2V5MSwga2V5MiwgY29uZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHRoaXMudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaG9tZUtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlIb21lRW5kS2V5KHsgcm93SW5kZXg6IHRoaXMuY3VycmVudEluZGV4IHx8IDAsIGNlbGxJbmRleDogMCB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5lbmRLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5SG9tZUVuZEtleSh7IHJvd0luZGV4OiB0aGlzLmN1cnJlbnRJbmRleCB8fCAwLCBjZWxsSW5kZXg6IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggLSAxIH0pO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5SG9tZUVuZEtleSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbChrZXkpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbEhpZGUoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LmNlbGxJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlSaWdodExlZnRLZXkoLTEsIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggLSAxLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlSaWdodExlZnRLZXkoMSwgMCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZSh0aGlzLnBhcmVudC5nZXRDZWxsRnJvbUluZGV4KGtleS5yb3dJbmRleCwga2V5LmNlbGxJbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNoaWZ0RG93bktleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZSb3dJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZEluZGV4ID0gZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZChnT2JqLnNlbGVjdGVkUm93SW5kZXgpID8gdGhpcy5wcmV2Um93SW5kZXggKyAxIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIChnT2JqLnNlbGVjdGVkUm93SW5kZXggKyAxIDwgdGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5zZWxlY3RlZFJvd0luZGV4ICsgMSA6IGdPYmouc2VsZWN0ZWRSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmRJbmRleCA8IHRoaXMucGFyZW50LmdldFJvd3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93c0J5UmFuZ2UodGhpcy5wcmV2Um93SW5kZXgsIGVuZEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlVcERvd24oZW5kSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdygwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZDSWR4cykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCArIDEgPCB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGxzQnlSYW5nZSh0aGlzLnByZXZDSWR4cywgeyByb3dJbmRleDogdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsgMSwgY2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGxzQnlSYW5nZSh7IHJvd0luZGV4OiAwLCBjZWxsSW5kZXg6IDAgfSwgeyByb3dJbmRleDogMSwgY2VsbEluZGV4OiAwIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNoaWZ0VXBLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUm93VHlwZSgpICYmICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldlJvd0luZGV4KSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVuZEluZGV4ID0gZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZChnT2JqLnNlbGVjdGVkUm93SW5kZXgpID8gKHRoaXMucHJldlJvd0luZGV4IC0gMSA+IC0xID8gKHRoaXMucHJldlJvd0luZGV4IC0gMSkgOiAwKSA6XG4gICAgICAgICAgICAgICAgICAgICgoZ09iai5zZWxlY3RlZFJvd0luZGV4IC0gMSkgPiAtMSA/IGdPYmouc2VsZWN0ZWRSb3dJbmRleCAtIDEgOiBnT2JqLnNlbGVjdGVkUm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93c0J5UmFuZ2UodGhpcy5wcmV2Um93SW5kZXgsIGVuZEluZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VXBEb3duKGVuZEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSAmJiAhZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZFQ0lkeHMpICYmICh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggLSAxKSA+IC0xICYmICF0aGlzLmlzU2luZ2xlU2VsKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGxzQnlSYW5nZSh0aGlzLnByZXZDSWR4cywgeyByb3dJbmRleDogdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4IC0gMSwgY2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2hpZnRMZWZ0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseVNoaWZ0TGVmdFJpZ2h0S2V5KC0xLCAhZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZDSWR4cykgJiYgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCAtIDEgPiAtMSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2hpZnRSaWdodEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTaGlmdExlZnRSaWdodEtleSgxLCAhZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZDSWR4cykgJiYgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCArIDEgPCB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseVNoaWZ0TGVmdFJpZ2h0S2V5ID0gZnVuY3Rpb24gKGtleSwgY29uZCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjZWxsSW5kZXg7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpICYmICF0aGlzLmlzU2luZ2xlU2VsKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29uZCkge1xuICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXggPSB7IHJvd0luZGV4OiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXgsIGNlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCArIGtleSB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGxzQnlSYW5nZSh0aGlzLnByZXZDSWR4cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kZXg6IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgY2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4ICsga2V5XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvblNldHRpbmdzLmNlbGxTZWxlY3Rpb25Nb2RlID09PSAnZmxvdycgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChrZXkgPiAwID8gdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsgMSA8IHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSA6IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCAtIDEgPiAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleCA9IHsgcm93SW5kZXg6IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCArIGtleSwgY2VsbEluZGV4OiBrZXkgPiAwID8gMCA6IGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDEgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHRoaXMucHJldkNJZHhzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kZXg6IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCArIGtleSwgY2VsbEluZGV4OiBrZXkgPiAwID8gMCA6IGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjZWxsSW5kZXgpICYmIHRoaXMuaXNDZWxsSGlkZShjZWxsSW5kZXgpICYmICEoKGNlbGxJbmRleC5yb3dJbmRleCA9PT0gMCAmJiBjZWxsSW5kZXguY2VsbEluZGV4ID09PSAwKSB8fFxuICAgICAgICAgICAgICAgICAgICAoY2VsbEluZGV4LnJvd0luZGV4ID09PSBnT2JqLmdldFJvd3MoKS5sZW5ndGggLSAxICYmIGNlbGxJbmRleC5jZWxsSW5kZXggPT09IGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlTaGlmdExlZnRSaWdodEtleShrZXksIGNlbGxJbmRleC5jZWxsSW5kZXggPiAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jdHJsSG9tZUtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlDdHJsSG9tZUVuZEtleSgwLCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jdHJsRW5kS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseUN0cmxIb21lRW5kS2V5KHRoaXMucGFyZW50LmdldFJvd3MoKS5sZW5ndGggLSAxLCB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlDdHJsSG9tZUVuZEtleSA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY29sSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUm93VHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3cocm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHRoaXMucGFyZW50LmdldENlbGxGcm9tSW5kZXgocm93SW5kZXgsIGNvbEluZGV4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY29sSW5kZXggfSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsSGlkZSh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjb2xJbmRleCB9KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sSW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5UmlnaHRMZWZ0S2V5KC0xLCB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5UmlnaHRMZWZ0S2V5KDEsIDAsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZFJlbW92ZUNsYXNzZXNGb3JSb3cgPSBmdW5jdGlvbiAocm93LCBpc0FkZCwgY2xlYXJBbGwpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAzXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW10uc2xpY2UuY2FsbChyb3cucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93Y2VsbCcpKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvdy5xdWVyeVNlbGVjdG9yKCcuZS1kZXRhaWxyb3djb2xsYXBzZScpIHx8IHJvdy5xdWVyeVNlbGVjdG9yKCcuZS1kZXRhaWxyb3dleHBhbmQnKTtcbiAgICAgICAgICAgICAgICBpZiAoY2VsbCkge1xuICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKGNlbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY2VsbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChjZWxsc1tpXSwgYXJncy5zbGljZSgpLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsc1tpXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoY2VsbHNbaV0sIFtdLCBhcmdzLnNsaWNlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldFJlbmRlcmVyKCkuc2V0U2VsZWN0aW9uKHJvdyA/IHJvdy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykgOiBudWxsLCBpc0FkZCwgY2xlYXJBbGwpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmlzUm93VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLm1vZGUgPT09ICdyb3cnIHx8IHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MubW9kZSA9PT0gJ2JvdGgnO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmlzQ2VsbFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5tb2RlID09PSAnY2VsbCcgfHwgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5tb2RlID09PSAnYm90aCc7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNTaW5nbGVTZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnc2luZ2xlJztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pc0NlbGxIaWRlID0gZnVuY3Rpb24gKGNlbGxJbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuICF0aGlzLnBhcmVudC5nZXRDb2x1bW5zKClbY2VsbEluZGV4LmNlbGxJbmRleF0udmlzaWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29udGVudFJlbmRlcmVyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyID0gdGhpcy5mYWN0b3J5LmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudFJlbmRlcmVyO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU2VsZWN0aW9uO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TZWxlY3Rpb24gPSBTZWxlY3Rpb247XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9zZWxlY3Rpb24uanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGV2ZW50cywgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTZWFyY2ggPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTZWFyY2gocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaFN0cmluZykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5zZWFyY2gsIGFyZzE6IHNlYXJjaFN0cmluZyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWFyY2hTdHJpbmcgPSBzZWFyY2hTdHJpbmcudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChzZWFyY2hTdHJpbmcgIT09IGdPYmouc2VhcmNoU2V0dGluZ3Mua2V5KSB7XG4gICAgICAgICAgICAgICAgZ09iai5zZWFyY2hTZXR0aW5ncy5rZXkgPSBzZWFyY2hTdHJpbmc7XG4gICAgICAgICAgICAgICAgZ09iai5kYXRhQmluZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWFyY2gucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuc2VhcmNoQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuc2VhcmNoQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBTZWFyY2gucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZS5wcm9wZXJ0aWVzLmtleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3NlYXJjaGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgc2VhcmNoU3RyaW5nOiB0aGlzLnBhcmVudC5zZWFyY2hTZXR0aW5ncy5rZXlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc2VhcmNoaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMS5leHRlbmQoZSwge1xuICAgICAgICAgICAgICAgIHNlYXJjaFN0cmluZzogdGhpcy5wYXJlbnQuc2VhcmNoU2V0dGluZ3Mua2V5LCByZXF1ZXN0VHlwZTogJ3NlYXJjaGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBTZWFyY2gucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3NlYXJjaCc7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTZWFyY2g7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNlYXJjaCA9IFNlYXJjaDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3NlYXJjaC5qc1xuLy8gbW9kdWxlIGlkID0gMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgdXRpbF8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNob3dIaWRlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU2hvd0hpZGUocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBTaG93SGlkZS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBzaG93QnkpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gdGhpcy5nZXRUb2dnbGVGaWVsZHMoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1ucyhrZXlzLCBzaG93QnkpO1xuICAgICAgICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGUoY29sdW1ucyk7XG4gICAgICAgIH07XG4gICAgICAgIFNob3dIaWRlLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIGhpZGVCeSkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSB0aGlzLmdldFRvZ2dsZUZpZWxkcyhjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zKGtleXMsIGhpZGVCeSk7XG4gICAgICAgICAgICBjb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGUoY29sdW1ucyk7XG4gICAgICAgIH07XG4gICAgICAgIFNob3dIaWRlLnByb3RvdHlwZS5nZXRUb2dnbGVGaWVsZHMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgZmluYWxpemVkID0gW107XG4gICAgICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBmaW5hbGl6ZWQgPSBba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpbmFsaXplZCA9IGtleTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmaW5hbGl6ZWQ7XG4gICAgICAgIH07XG4gICAgICAgIFNob3dIaWRlLnByb3RvdHlwZS5nZXRDb2x1bW5zID0gZnVuY3Rpb24gKGtleXMsIGdldEtleUJ5KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB1dGlsXzEuaXRlcmF0ZUFycmF5T3JPYmplY3Qoa2V5cywgZnVuY3Rpb24gKGtleSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KF90aGlzLnBhcmVudC5nZXRDb2x1bW5zKCksIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVtnZXRLZXlCeV0gPT09IGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbnM7XG4gICAgICAgIH07XG4gICAgICAgIFNob3dIaWRlLnByb3RvdHlwZS5zZXRWaXNpYmxlID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgICAgICAgICAgIGNvbHVtbnMgPSBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbnMpID8gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpIDogY29sdW1ucztcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIGNvbHVtbnMpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU2hvd0hpZGU7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNob3dIaWRlID0gU2hvd0hpZGU7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9zaG93LWhpZGUuanNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9zZXJ2aWNlcy93aWR0aC1jb250cm9sbGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgdXRpbF8xLCBjb25zdGFudF8xLCB3aWR0aF9jb250cm9sbGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNjcm9sbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNjcm9sbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFNjcm9sbFRvcCA9IDA7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzVmFsdWVzID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcbiAgICAgICAgICAgIHRoaXMub25lVGltZVJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2UgPSBuZXcgd2lkdGhfY29udHJvbGxlcl8xLkNvbHVtbldpZHRoU2VydmljZShwYXJlbnQpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdzY3JvbGwnO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnNldFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5zdHlsZS53aWR0aCA9IGVqMl9iYXNlXzMuZm9ybWF0VW5pdCh0aGlzLnBhcmVudC53aWR0aCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQudG9vbGJhck1vZHVsZSAmJiB0aGlzLnBhcmVudC50b29sYmFyTW9kdWxlLnRvb2xiYXIuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRvb2xiYXJNb2R1bGUudG9vbGJhci5yZWZyZXNoT3ZlcmZsb3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5zZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgY29udGVudC5zdHlsZS5oZWlnaHQgPSBlajJfYmFzZV8zLmZvcm1hdFVuaXQodGhpcy5wYXJlbnQuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuZW5zdXJlT3ZlcmZsb3coY29udGVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuc2V0UGFkZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpO1xuICAgICAgICAgICAgdmFyIHNjcm9sbFdpZHRoID0gU2Nyb2xsLmdldFNjcm9sbEJhcldpZHRoKCkgLSB0aGlzLmdldFRocmVzaG9sZCgpO1xuICAgICAgICAgICAgdmFyIGNzc1Byb3BzID0gdGhpcy5nZXRDc3NQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgICBjb250ZW50LmZpcnN0Q2hpbGQuc3R5bGVbY3NzUHJvcHMuYm9yZGVyXSA9IHNjcm9sbFdpZHRoID4gMCA/ICcxcHgnIDogJzBweCc7XG4gICAgICAgICAgICBjb250ZW50LnN0eWxlW2Nzc1Byb3BzLnBhZGRpbmddID0gc2Nyb2xsV2lkdGggPiAwID8gc2Nyb2xsV2lkdGggKyAncHgnIDogJzBweCc7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUucmVtb3ZlUGFkZGluZyA9IGZ1bmN0aW9uIChydGwpIHtcbiAgICAgICAgICAgIHZhciBjc3NQcm9wcyA9IHRoaXMuZ2V0Q3NzUHJvcGVydGllcyhydGwpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmZpcnN0Q2hpbGQuc3R5bGVbY3NzUHJvcHMuYm9yZGVyXSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmZpcnN0Q2hpbGQucGFyZW50RWxlbWVudC5zdHlsZVtjc3NQcm9wcy5wYWRkaW5nXSA9ICcnO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaGVpZ2h0ICE9PSAnMTAwJScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMud2lkdGhTZXJ2aWNlLmdldFNpYmxpbmdzSGVpZ2h0KGNvbnRlbnQpO1xuICAgICAgICAgICAgY29udGVudC5zdHlsZS5oZWlnaHQgPSAnY2FsYygxMDAlIC0gJyArIGhlaWdodCArICdweCknO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmdldFRocmVzaG9sZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcHBOYW1lID0gZWoyX2Jhc2VfMS5Ccm93c2VyLmluZm8ubmFtZTtcbiAgICAgICAgICAgIGlmIChhcHBOYW1lID09PSAnbW96aWxsYScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMC41O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuY29udGVudFJlYWR5LCB0aGlzLndpcmVFdmVudHMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmNvbnRlbnRSZWFkeSwgdGhpcy53aXJlRXZlbnRzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLnVpVXBkYXRlLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5vbkNvbnRlbnRTY3JvbGwgPSBmdW5jdGlvbiAoc2Nyb2xsVGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzY3JvbGxUYXJnZXQ7XG4gICAgICAgICAgICB2YXIgaXNIZWFkZXIgPSBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1oZWFkZXJjb250ZW50Jyk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29udGVudC5xdWVyeVNlbGVjdG9yKCd0Ym9keScpID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gdGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgdmFyIHNMaW1pdCA9IHRhcmdldC5zY3JvbGxXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgaXNGb290ZXIgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXN1bW1hcnljb250ZW50Jyk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnByZXZpb3VzVmFsdWVzLmxlZnQgPT09IGxlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJldmlvdXNWYWx1ZXMudG9wID0gIWlzSGVhZGVyID8gX3RoaXMucHJldmlvdXNWYWx1ZXMudG9wIDogdGFyZ2V0LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbGVtZW50LnNjcm9sbExlZnQgPSBsZWZ0O1xuICAgICAgICAgICAgICAgIGlmIChpc0Zvb3Rlcikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5oZWFkZXIuc2Nyb2xsTGVmdCA9IGxlZnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLnByZXZpb3VzVmFsdWVzLmxlZnQgPSBsZWZ0O1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5ub3RpZnkoY29uc3RhbnRfMS5zY3JvbGwsIHsgbGVmdDogbGVmdCB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uZVRpbWVSZWFkeSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudCA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuY29udGVudCwgJ3Njcm9sbCcsIHRoaXMub25Db250ZW50U2Nyb2xsKHRoaXMuaGVhZGVyKSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuaGVhZGVyLCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRlbnRTY3JvbGwodGhpcy5jb250ZW50KSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRGb290ZXJDb250ZW50KCkuZmlyc3RDaGlsZCwgJ3Njcm9sbCcsIHRoaXMub25Db250ZW50U2Nyb2xsKHRoaXMuY29udGVudCksIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uZVRpbWVSZWFkeSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCk7XG4gICAgICAgICAgICBpZiAodGFibGUuc2Nyb2xsSGVpZ2h0IDwgdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmNsaWVudEhlaWdodCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYWRkQ2xhc3ModGFibGUucXVlcnlTZWxlY3RvckFsbCgndHI6bGFzdC1jaGlsZCB0ZCcpLCAnZS1sYXN0cm93Y2VsbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbmFibGVWaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxMZWZ0ID0gdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0O1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxUb3AgPSB0aGlzLnByZXZpb3VzVmFsdWVzLnRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuc2Nyb2xsTGVmdCA9IHRoaXMucHJldmlvdXNWYWx1ZXMubGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5nZXRDc3NQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHJ0bCkge1xuICAgICAgICAgICAgdmFyIGNzcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGVuYWJsZVJ0bCA9IGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQocnRsKSA/IHRoaXMucGFyZW50LmVuYWJsZVJ0bCA6IHJ0bDtcbiAgICAgICAgICAgIGNzcy5ib3JkZXIgPSBlbmFibGVSdGwgPyAnYm9yZGVyTGVmdFdpZHRoJyA6ICdib3JkZXJSaWdodFdpZHRoJztcbiAgICAgICAgICAgIGNzcy5wYWRkaW5nID0gZW5hYmxlUnRsID8gJ3BhZGRpbmdMZWZ0JyA6ICdwYWRkaW5nUmlnaHQnO1xuICAgICAgICAgICAgcmV0dXJuIGNzcztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5lbnN1cmVPdmVyZmxvdyA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICBjb250ZW50LnN0eWxlLm92ZXJmbG93WSA9IHRoaXMucGFyZW50LmhlaWdodCA9PT0gJ2F1dG8nID8gJ2F1dG8nIDogJ3Njcm9sbCc7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0UGFkZGluZygpO1xuICAgICAgICAgICAgdGhpcy5vbmVUaW1lUmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmhlaWdodCA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQYWRkaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICB0aGlzLnNldFdpZHRoKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVQYWRkaW5nKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKFt0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZF0sICdlLWhlYWRlcmNvbnRlbnQnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoW3RoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkXSwgJ2UtY29udGVudCcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQsICdzY3JvbGwnLCB0aGlzLm9uQ29udGVudFNjcm9sbCk7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5nZXRTY3JvbGxCYXJXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuZ2V0U2Nyb2xsQmFyV2lkdGgoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNjcm9sbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2Nyb2xsID0gU2Nyb2xsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc2Nyb2xsLmpzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQcmludCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFByaW50KHBhcmVudCwgc2Nyb2xsTW9kdWxlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuY29udGVudFJlYWR5LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUgPSBzY3JvbGxNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgUHJpbnQucHJvdG90eXBlLnByaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaXNQcmludGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBnT2JqLmVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5wcmludFdpbmRvdyA9IHdpbmRvdy5vcGVuKCcnLCAncHJpbnQnLCAnaGVpZ2h0PScgKyB3aW5kb3cub3V0ZXJIZWlnaHQgKyAnLHdpZHRoPScgKyB3aW5kb3cub3V0ZXJXaWR0aCArICcsdGFiYmFyPW5vJyk7XG4gICAgICAgICAgICB0aGlzLnByaW50V2luZG93Lm1vdmVUbygwLCAwKTtcbiAgICAgICAgICAgIHRoaXMucHJpbnRXaW5kb3cucmVzaXplVG8oc2NyZWVuLmF2YWlsV2lkdGgsIHNjcmVlbi5hdmFpbEhlaWdodCk7XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLnByaW50TW9kZSA9PT0gJ2N1cnJlbnRwYWdlJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBhZ2VyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVhZHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQYWdlckRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5hbGxvd1BhZ2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVhZHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUHJpbnQucHJvdG90eXBlLmNvbnRlbnRSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNQcmludGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzUGFnZXJEaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGdPYmouZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1BhZ2VyRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBnT2JqLmFsbG93UGFnaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmhlaWdodCAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNzc1Byb3BzID0gdGhpcy5zY3JvbGxNb2R1bGUuZ2V0Q3NzUHJvcGVydGllcygpO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50RGl2ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyRGl2ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRoZWFkZXInKTtcbiAgICAgICAgICAgICAgICBjb250ZW50RGl2LnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgICAgICAgICAgICBjb250ZW50RGl2LnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJztcbiAgICAgICAgICAgICAgICBoZWFkZXJEaXYuc3R5bGVbY3NzUHJvcHMucGFkZGluZ10gPSAnJztcbiAgICAgICAgICAgICAgICBoZWFkZXJEaXYuZmlyc3RFbGVtZW50Q2hpbGQuc3R5bGVbY3NzUHJvcHMuYm9yZGVyXSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGlmICghZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cGRyb3BhcmVhJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29sR3JvdXAoZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50LCAnLmUtZ3JvdXB0b3BsZWZ0Y2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnQsICcuZS1yZWNvcmRwbHVzY29sbGFwc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50LCAnLmUtaW5kZW50Y2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnQsICcuZS1yZWNvcmRwbHVzZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmoudG9vbGJhcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS10b29sYmFyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93RmlsdGVyaW5nICYmIGdPYmouZmlsdGVyU2V0dGluZ3MudHlwZSA9PT0gJ2ZpbHRlcmJhcicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZmlsdGVyYmFyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtYWN0aXZlJyksICdlLWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlQ2xhc3ModGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNlbGxzZWxlY3Rpb24xYmFja2dyb3VuZCcpLCAnZS1jZWxsc2VsZWN0aW9uMWJhY2tncm91bmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAncHJpbnQnLCBlbGVtZW50OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3dzOiBnT2JqLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyW2FyaWEtc2VsZWN0ZWQ9XCJ0cnVlXCJdJylcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZm9yZVByaW50LCBhcmdzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucHJpbnQodGhpcy5lbGVtZW50LCB0aGlzLnByaW50V2luZG93KTtcbiAgICAgICAgICAgIHRoaXMuaXNQcmludGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5wcmludENvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUHJpbnQucHJvdG90eXBlLnJlbW92ZUNvbEdyb3VwID0gZnVuY3Rpb24gKGRlcHRoKSB7XG4gICAgICAgICAgICB2YXIgZ3JvdXBDYXB0aW9uID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdyb3VwY2FwdGlvbicpO1xuICAgICAgICAgICAgdmFyIGNvbFNwYW4gPSBncm91cENhcHRpb25bZGVwdGggLSAxXS5nZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXBDYXB0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBDYXB0aW9uW2ldLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNvbFNwYW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbEdyb3VwcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdjb2xncm91cCcpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xHcm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRlcHRoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29sR3JvdXBzW2ldLmNoaWxkTm9kZXNbal0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBQcmludC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncHJpbnQnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUHJpbnQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlByaW50ID0gUHJpbnQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9wcmludC5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlbnVtXzEsIGVqMl9iYXNlXzMsIHZhbHVlX2Zvcm1hdHRlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBZ2dyZWdhdGVDb2x1bW4gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWdncmVnYXRlQ29sdW1uLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBZ2dyZWdhdGVDb2x1bW4oKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnRlbXBsYXRlRm4gPSB7fTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLnNldEZvcm1hdHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZUZvcm1hdHRlciA9IG5ldyB2YWx1ZV9mb3JtYXR0ZXJfMS5WYWx1ZUZvcm1hdHRlcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZm9ybWF0ICYmICh0aGlzLmZvcm1hdC5za2VsZXRvbiB8fCB0aGlzLmZvcm1hdC5mb3JtYXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtYXRGbiA9IHZhbHVlRm9ybWF0dGVyLmdldEZvcm1hdEZ1bmN0aW9uKHRoaXMuZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZS5nZXRGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRGbjtcbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZS5zZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uIChoZWxwZXIpIHtcbiAgICAgICAgICAgIGlmIChoZWxwZXIgPT09IHZvaWQgMCkgeyBoZWxwZXIgPSB7fTsgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVGbltlajJfYmFzZV8yLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5TdW1tYXJ5KV0gPSBlajJfYmFzZV8xLmNvbXBpbGUodGhpcy5mb290ZXJUZW1wbGF0ZSwgaGVscGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwRm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVGbltlajJfYmFzZV8yLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZSh0aGlzLmdyb3VwRm9vdGVyVGVtcGxhdGUsIGhlbHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuW2VqMl9iYXNlXzIuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLkNhcHRpb25TdW1tYXJ5KV0gPSBlajJfYmFzZV8xLmNvbXBpbGUodGhpcy5ncm91cENhcHRpb25UZW1wbGF0ZSwgaGVscGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZS5nZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZUZuW2VqMl9iYXNlXzIuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgdHlwZSldO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQWdncmVnYXRlQ29sdW1uO1xuICAgIH0oZWoyX2Jhc2VfMy5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImZpZWxkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiY29sdW1uTmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImZvcm1hdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImZvb3RlclRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiZ3JvdXBGb290ZXJUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImdyb3VwQ2FwdGlvblRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuUHJvcGVydHkoKVxuICAgIF0sIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUsIFwiY3VzdG9tQWdncmVnYXRlXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5BZ2dyZWdhdGVDb2x1bW4gPSBBZ2dyZWdhdGVDb2x1bW47XG4gICAgdmFyIEFnZ3JlZ2F0ZVJvdyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBZ2dyZWdhdGVSb3csIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFnZ3JlZ2F0ZVJvdygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQWdncmVnYXRlUm93O1xuICAgIH0oZWoyX2Jhc2VfMy5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzMuQ29sbGVjdGlvbihbXSwgQWdncmVnYXRlQ29sdW1uKVxuICAgIF0sIEFnZ3JlZ2F0ZVJvdy5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQWdncmVnYXRlUm93ID0gQWdncmVnYXRlUm93O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy9hZ2dyZWdhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfZGF0YV8xLCBlajJfYmFzZV8yLCBlajJfYnV0dG9uc18xLCBldmVudHMsIGVqMl9wb3B1cHNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29sdW1uQ2hvb3NlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbHVtbkNob29zZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5zaG93Q29sdW1uID0gW107XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW4gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNEbGdPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRsZ2hpZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbE9wZW5EbGcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLmhpZGVEaWFsb2cuYmluZCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRGxnQ29udGVudCgpO1xuICAgICAgICAgICAgdGhpcy5nZXRTaG93SGlkZVNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3Nob3dIaWRlU2VydmljZScpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0RWxlbWVudCwgJy5lLWNjJykpIHx8ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXRFbGVtZW50LCAnLmUtY2MtdG9vbGJhcicpKSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1jb2x1bW5jaG9vc2VyLWJ0bicpIHx8IHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNjLXRvb2xiYXInKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMuaW5pdGlhbE9wZW5EbGcgJiYgdGhpcy5kbGdPYmoudmlzaWJsZSkgfHwgIXRoaXMuaXNEbGdPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRGxnT3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2MtY2FuY2VsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjc2VhcmNoJykudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5DaG9vc2VyU2VhcmNoKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDYW5jZWxJY29uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGxnT2JqKSAmJiB0aGlzLmRsZ09iai52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RsZ09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmhpZGVEaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kbGdPYmopICYmIHRoaXMuZGxnT2JqLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0RsZ09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyQ29sdW1uQ2hvb3NlciA9IGZ1bmN0aW9uICh4LCB5LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kbGdPYmoudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHZhciBwb3MgPSB7IFg6IG51bGwsIFk6IG51bGwgfTtcbiAgICAgICAgICAgICAgICB2YXIgYXJnczEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnYmVmb3JlT3BlbkNvbHVtbkNob29zZXInLCBlbGVtZW50OiB0aGlzLnBhcmVudC5lbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmJlZm9yZU9wZW5Db2x1bW5DaG9vc2VyLCBhcmdzMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2hlY2tib3hTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnNDMwcHgnO1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50VmlzaWJsZSA9IHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUuZGlzcGxheTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIHZhciBuZXdwb3MgPSBlajJfcG9wdXBzXzEuY2FsY3VsYXRlUmVsYXRpdmVCYXNlZFBvc2l0aW9uKHRhcmdldC5jbG9zZXN0KCcuZS10b29sYmFyLWl0ZW0nKSwgdGhpcy5kbGdPYmouZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gZWxlbWVudFZpc2libGU7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS50b3AgPSBuZXdwb3MudG9wICsgdGFyZ2V0LmNsb3Nlc3QoJy5lLWNjLXRvb2xiYXInKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIHZhciBkbGdXaWR0aCA9IDI1MDtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWJpZ2dlcicpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai53aWR0aCA9IDI1MztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldmljZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnRhcmdldCA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnBvc2l0aW9uID0geyBYOiAnY2VudGVyJywgWTogJ2NlbnRlcicgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoucmVmcmVzaFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLm9wZW4gPSB0aGlzLm1PcGVuRGxnLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSB0YXJnZXQub2Zmc2V0TGVmdCArICdweCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSAoKG5ld3Bvcy5sZWZ0IC0gZGxnV2lkdGgpICsgdGFyZ2V0LmNsb3Nlc3QoJy5lLWNjLXRvb2xiYXInKS5jbGllbnRXaWR0aCkgKyAyICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNhbmNlbEljb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5zaG93KCk7XG4gICAgICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkY2FuY2VsSWNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5vcGVuQ29sdW1uQ2hvb3NlciA9IGZ1bmN0aW9uIChYLCBZKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kbGdPYmoudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0luaXRpYWxPcGVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouY29udGVudCA9IHRoaXMucmVuZGVyQ2hvb3Nlckxpc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaENoZWNrYm94U3RhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5wb3NpdGlvbiA9IHsgWDogJ2NlbnRlcicsIFk6ICdjZW50ZXInIH07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChYKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnBvc2l0aW9uID0geyBYOiAnY2VudGVyJywgWTogJ2NlbnRlcicgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5yZWZyZXNoUG9zaXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUudG9wID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5sZWZ0ID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS50b3AgPSBZICsgJ3B4JztcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSBYICsgJ3B4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLnNob3coKTtcbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsT3BlbiA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyRGxnQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB5O1xuICAgICAgICAgICAgdGhpcy5kbGdEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jY2RsZyBlLWNjJywgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2NjZGxnJyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5kbGdEaXYpO1xuICAgICAgICAgICAgdmFyIHhwb3MgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gMjUwO1xuICAgICAgICAgICAgdmFyIGRpYWxvUG9zID0gdGhpcy5wYXJlbnQuZW5hYmxlUnRsID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICAgICAgICAgIHZhciB0YXJFbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jY2RpdicpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRhckVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgeSA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvcyA9IHsgWDogbnVsbCwgWTogbnVsbCB9O1xuICAgICAgICAgICAgdGhpcy5kbGdPYmogPSBuZXcgZWoyX3BvcHVwc18xLkRpYWxvZyh7XG4gICAgICAgICAgICAgICAgaGVhZGVyOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0Nob29zZUNvbHVtbnMnKSxcbiAgICAgICAgICAgICAgICBzaG93Q2xvc2VJY29uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uRXNjYXBlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IHRoaXMucGFyZW50LmxvY2FsZSxcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucGFyZW50LmVsZW1lbnQuaWQpLFxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jb25maXJtRGxnQnRuQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdPS0J1dHRvbicpLCBpc1ByaW1hcnk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLWNjIGUtY2Nfb2tidG4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jbGVhckFjdGlvbnMuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNzc0NsYXNzOiAnZS1mbGF0IGUtY2MgZS1jYy1jbmJ0bicsIGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsQnV0dG9uJykgfVxuICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnJlbmRlckNob29zZXJMaXN0KCksXG4gICAgICAgICAgICAgICAgd2lkdGg6IDI1MCxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtY2MnLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvblNldHRpbmdzOiB7IGVmZmVjdDogJ05vbmUnIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmFwcGVuZFRvKHRoaXMuZGxnRGl2KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyQ2hvb3Nlckxpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm1haW5EaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1tYWluLWRpdiBlLWNjJyB9KTtcbiAgICAgICAgICAgIHZhciBzZWFyY2hEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jYy1zZWFyY2hkaXYgZS1jYyBlLWlucHV0LWdyb3VwJyB9KTtcbiAgICAgICAgICAgIHZhciBjY3NlYXJjaGVsZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jY3NlYXJjaCBlLWNjIGUtaW5wdXQnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHBsYWNlaG9sZGVyOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1NlYXJjaCcpIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGNjc2VhcmNoaWNvbiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1jY3NlYXJjaC1pY29uIGUtaWNvbnMgZS1jYyBlLWlucHV0LWdyb3VwLWljb24nIH0pO1xuICAgICAgICAgICAgdmFyIGNvbkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNjLWNvbnRlbnRkaXYnIH0pO1xuICAgICAgICAgICAgdGhpcy5pbm5lckRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWlubmVyZGl2IGUtY2MnIH0pO1xuICAgICAgICAgICAgc2VhcmNoRGl2LmFwcGVuZENoaWxkKGNjc2VhcmNoZWxlKTtcbiAgICAgICAgICAgIHNlYXJjaERpdi5hcHBlbmRDaGlsZChjY3NlYXJjaGljb24pO1xuICAgICAgICAgICAgY2NzZWFyY2hlbGUuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2NzZWFyY2hlbGUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWlucHV0LWZvY3VzJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNjc2VhcmNoZWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2NzZWFyY2hlbGUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWlucHV0LWZvY3VzJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdkNvbnRlbnQgPSB0aGlzLnJlZnJlc2hDaGVja2JveExpc3QodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpKTtcbiAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXZDb250ZW50KTtcbiAgICAgICAgICAgIGNvbkRpdi5hcHBlbmRDaGlsZCh0aGlzLmlubmVyRGl2KTtcbiAgICAgICAgICAgIHRoaXMubWFpbkRpdi5hcHBlbmRDaGlsZChzZWFyY2hEaXYpO1xuICAgICAgICAgICAgdGhpcy5tYWluRGl2LmFwcGVuZENoaWxkKGNvbkRpdik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYWluRGl2O1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jb25maXJtRGxnQnRuQ2xpY2sgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhpZGVDb2x1bW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uU3RhdGVDaGFuZ2UodGhpcy5oaWRlQ29sdW1uLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDb2x1bW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uU3RhdGVDaGFuZ2UodGhpcy5zaG93Q29sdW1uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdjb2x1bW5zdGF0ZScsIGVsZW1lbnQ6IHRoaXMucGFyZW50LmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuc3RhdGVDaGFuZ2VDb2x1bW5zLCBkaWFsb2dJbnN0YW5jZTogdGhpcy5kbGdPYmpcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2hvd0hpZGVTZXJ2aWNlLnNldFZpc2libGUodGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJBY3Rpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbHVtblN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKHN0YXRlQ29sdW1ucywgc3RhdGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBzdGF0ZUNvbHVtbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbFVpZCA9IHN0YXRlQ29sdW1uc1tpbmRleF0ucmVwbGFjZSgnZS1jYycsICcnKTtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudENvbCA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKGNvbFVpZCk7XG4gICAgICAgICAgICAgICAgY3VycmVudENvbC52aXNpYmxlID0gc3RhdGU7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMucHVzaChjdXJyZW50Q29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY2xlYXJBY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uID0gW107XG4gICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4gPSBbXTtcbiAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmhpZGVEaWFsb2coKTtcbiAgICAgICAgICAgIHRoaXMuYWRkY2FuY2VsSWNvbigpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jaGVja3N0YXRlY29sdW1uID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRFbGUgPSBlLmV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgIHZhciB1bmNoZWNrQ29sdW1uID0gdGFyZ2V0RWxlLmlkO1xuICAgICAgICAgICAgaWYgKGUuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhpZGVDb2x1bW4uaW5kZXhPZih1bmNoZWNrQ29sdW1uKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uLnNwbGljZSh0aGlzLmhpZGVDb2x1bW4uaW5kZXhPZih1bmNoZWNrQ29sdW1uKSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDb2x1bW4uaW5kZXhPZih1bmNoZWNrQ29sdW1uKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q29sdW1uLnB1c2godW5jaGVja0NvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKHVuY2hlY2tDb2x1bW4pICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4uc3BsaWNlKHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKHVuY2hlY2tDb2x1bW4pLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlkZUNvbHVtbi5pbmRleE9mKHVuY2hlY2tDb2x1bW4pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW4ucHVzaCh1bmNoZWNrQ29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbHVtbkNob29zZXJTZWFyY2ggPSBmdW5jdGlvbiAoc2VhcmNoVmFsKSB7XG4gICAgICAgICAgICB2YXIgY2xlYXJTZWFyY2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBmbHRyQ29sO1xuICAgICAgICAgICAgaWYgKHNlYXJjaFZhbCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNhbmNlbEljb24oKTtcbiAgICAgICAgICAgICAgICBmbHRyQ29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgICAgIGNsZWFyU2VhcmNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZsdHJDb2wgPSBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkpLmV4ZWN1dGVMb2NhbChuZXcgZWoyX2RhdGFfMS5RdWVyeSgpXG4gICAgICAgICAgICAgICAgICAgIC53aGVyZSgnaGVhZGVyVGV4dCcsICdzdGFydHN3aXRoJywgc2VhcmNoVmFsLCB0cnVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmx0ckNvbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmlubmVySFRNTCA9ICcgJztcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2UtY2NubWRpdicpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuYXBwZW5kQ2hpbGQodGhpcy5yZWZyZXNoQ2hlY2tib3hMaXN0KGZsdHJDb2wsIHNlYXJjaFZhbCkpO1xuICAgICAgICAgICAgICAgIGlmICghY2xlYXJTZWFyY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRjYW5jZWxJY29uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG5NYXRjaGVsZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1jYyBlLW5tYXRjaCcgfSk7XG4gICAgICAgICAgICAgICAgbk1hdGNoZWxlLmlubmVySFRNTCA9IHRoaXMubDEwbi5nZXRDb25zdGFudCgnTWF0Y2hzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5pbm5lckhUTUwgPSAnICc7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5hcHBlbmRDaGlsZChuTWF0Y2hlbGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuY2xhc3NMaXN0LmFkZCgnZS1jY25tZGl2Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZWFyY2hFbGVtZW50ID0gdGhpcy5kbGdPYmouY29udGVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dC5lLWNjc2VhcmNoJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQoc2VhcmNoRWxlbWVudCwgJ2tleXVwJywgdGhpcy5jb2x1bW5DaG9vc2VyTWFudWFsU2VhcmNoLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlYXJjaEVsZW1lbnQgPSB0aGlzLmRsZ09iai5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LmUtY2NzZWFyY2gnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZShzZWFyY2hFbGVtZW50LCAna2V5dXAnLCB0aGlzLmNvbHVtbkNob29zZXJNYW51YWxTZWFyY2gpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZWZyZXNoQ2hlY2tib3hMaXN0ID0gZnVuY3Rpb24gKGdkQ29sLCBzZWFyY2hWYWwpIHtcbiAgICAgICAgICAgIHRoaXMudWxFbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd1bCcsIHsgY2xhc3NOYW1lOiAnZS1jY3VsLWVsZSBlLWNjJyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2RDb2wubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdkQ29sW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2hlY2tib3goY29sdW1ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51bEVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlZnJlc2hDaGVja2JveFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jYy5lLWlucHV0JykudmFsdWUgPSAnJztcbiAgICAgICAgICAgIHRoaXMuY29sdW1uQ2hvb3NlclNlYXJjaCgnJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY2MtY2hib3gnKS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jYy1jaGJveCcpW2ldO1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZChlbGVtZW50LmlkLnJlcGxhY2UoJ2UtY2MnLCAnJykpO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW5kZXJDaGVja2JveCA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBjY2xpc3Q7XG4gICAgICAgICAgICB2YXIgaGlkZUNvbFN0YXRlO1xuICAgICAgICAgICAgdmFyIHNob3dDb2xTdGF0ZTtcbiAgICAgICAgICAgIHZhciBjaGVja0JveE9iajtcbiAgICAgICAgICAgIGlmIChjb2x1bW4uc2hvd0luQ29sdW1uQ2hvb3Nlcikge1xuICAgICAgICAgICAgICAgIGNjbGlzdCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnbGknLCB7IGNsYXNzTmFtZTogJ2UtY2NsaXN0IGUtY2MnLCBzdHlsZXM6ICdsaXN0LXN0eWxlOk5vbmUnLCBpZDogJ2UtY2NsaV8nICsgY29sdW1uLnVpZCB9KTtcbiAgICAgICAgICAgICAgICB2YXIgY2NsYWJlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdsYWJlbCcsIHsgY2xhc3NOYW1lOiAnZS1jYycgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGNjY2hlY2tib3hsaXN0ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jYyBlLWNjLWNoYm94ICcsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAnZS1jYycgKyBjb2x1bW4udWlkLCBhdHRyczogeyB0eXBlOiAnY2hlY2tib3gnIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjY2xhYmUuYXBwZW5kQ2hpbGQoY2NjaGVja2JveGxpc3QpO1xuICAgICAgICAgICAgICAgIGhpZGVDb2xTdGF0ZSA9IHRoaXMuaGlkZUNvbHVtbi5pbmRleE9mKCdlLWNjJyArIGNvbHVtbi51aWQpID09PSAtMSA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICBzaG93Q29sU3RhdGUgPSB0aGlzLnNob3dDb2x1bW4uaW5kZXhPZignZS1jYycgKyBjb2x1bW4udWlkKSA9PT0gLTEgPyBmYWxzZSA6IHRydWU7XG4gICAgICAgICAgICAgICAgY2hlY2tCb3hPYmogPSBuZXcgZWoyX2J1dHRvbnNfMS5DaGVja0JveCh7IGxhYmVsOiBjb2x1bW4uaGVhZGVyVGV4dCwgY2hlY2tlZDogdHJ1ZSwgY2hhbmdlOiB0aGlzLmNoZWNrc3RhdGVjb2x1bW4uYmluZCh0aGlzKSB9KTtcbiAgICAgICAgICAgICAgICBpZiAoKGNvbHVtbi52aXNpYmxlICYmICFoaWRlQ29sU3RhdGUpIHx8IHNob3dDb2xTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja0JveE9iai5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrQm94T2JqLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hlY2tCb3hPYmouYXBwZW5kVG8oY2NjaGVja2JveGxpc3QpO1xuICAgICAgICAgICAgICAgIGNjbGlzdC5hcHBlbmRDaGlsZChjY2xhYmUpO1xuICAgICAgICAgICAgICAgIHRoaXMudWxFbGVtZW50LmFwcGVuZENoaWxkKGNjbGlzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbHVtbkNob29zZXJNYW51YWxTZWFyY2ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5hZGRjYW5jZWxJY29uKCk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaFZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICB2YXIgcHJveHkgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lcihlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuc3RhcnRUaW1lciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcHJveHkgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGludGVydmFsID0gIXByb3h5LmZsYWcgJiYgZS5rZXlDb2RlICE9PSAxMyA/IDUwMCA6IDA7XG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgcHJveHkuY29sdW1uQ2hvb3NlclNlYXJjaChwcm94eS5zZWFyY2hWYWx1ZSk7IH0sIGludGVydmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuc3RvcFRpbWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmFkZGNhbmNlbEljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ0Rpdi5xdWVyeVNlbGVjdG9yKCcuZS1jYy5lLWNjc2VhcmNoLWljb24nKS5jbGFzc0xpc3QuYWRkKCdlLWNjLWNhbmNlbCcpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW1vdmVDYW5jZWxJY29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kbGdEaXYucXVlcnlTZWxlY3RvcignLmUtY2MuZS1jY3NlYXJjaC1pY29uJykuY2xhc3NMaXN0LnJlbW92ZSgnZS1jYy1jYW5jZWwnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUubU9wZW5EbGcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjLXNlYXJjaGRpdicpLmNsYXNzTGlzdC5yZW1vdmUoJ2UtaW5wdXQtZm9jdXMnKTtcbiAgICAgICAgICAgIHZhciBjaGVsZSA9IHRoaXMuZGxnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY2MtY2hib3gnKVswXTtcbiAgICAgICAgICAgIGNoZWxlLmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0NvbHVtbkNob29zZXInO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29sdW1uQ2hvb3NlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29sdW1uQ2hvb3NlciA9IENvbHVtbkNob29zZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9jb2x1bW4tY2hvb3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gNDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzQzX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiXG4vLyBtb2R1bGUgaWQgPSA0M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNDRfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIlxuLy8gbW9kdWxlIGlkID0gNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9hY3Rpb25zL2RhdGFcIiwgXCIuL2FjdGlvbnMvc29ydFwiLCBcIi4vYWN0aW9ucy9wYWdlXCIsIFwiLi9hY3Rpb25zL3NlbGVjdGlvblwiLCBcIi4vYWN0aW9ucy9maWx0ZXJcIiwgXCIuL2FjdGlvbnMvc2VhcmNoXCIsIFwiLi9hY3Rpb25zL3Njcm9sbFwiLCBcIi4vYWN0aW9ucy9yZXNpemVcIiwgXCIuL2FjdGlvbnMvcmVvcmRlclwiLCBcIi4vYWN0aW9ucy9yb3ctcmVvcmRlclwiLCBcIi4vYWN0aW9ucy9ncm91cFwiLCBcIi4vYWN0aW9ucy9wcmludFwiLCBcIi4vYWN0aW9ucy9kZXRhaWwtcm93XCIsIFwiLi9hY3Rpb25zL3Rvb2xiYXJcIiwgXCIuL2FjdGlvbnMvYWdncmVnYXRlXCIsIFwiLi9hY3Rpb25zL3ZpcnR1YWwtc2Nyb2xsXCIsIFwiLi9hY3Rpb25zL2VkaXRcIiwgXCIuL2FjdGlvbnMvYmF0Y2gtZWRpdFwiLCBcIi4vYWN0aW9ucy9pbmxpbmUtZWRpdFwiLCBcIi4vYWN0aW9ucy9ub3JtYWwtZWRpdFwiLCBcIi4vYWN0aW9ucy9kaWFsb2ctZWRpdFwiLCBcIi4vYWN0aW9ucy9jb2x1bW4tY2hvb3NlclwiLCBcIi4vYWN0aW9ucy9leGNlbC1leHBvcnRcIiwgXCIuL2FjdGlvbnMvcGRmLWV4cG9ydFwiLCBcIi4vYWN0aW9ucy9leHBvcnQtaGVscGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZGF0YV8xLCBzb3J0XzEsIHBhZ2VfMSwgc2VsZWN0aW9uXzEsIGZpbHRlcl8xLCBzZWFyY2hfMSwgc2Nyb2xsXzEsIHJlc2l6ZV8xLCByZW9yZGVyXzEsIHJvd19yZW9yZGVyXzEsIGdyb3VwXzEsIHByaW50XzEsIGRldGFpbF9yb3dfMSwgdG9vbGJhcl8xLCBhZ2dyZWdhdGVfMSwgdmlydHVhbF9zY3JvbGxfMSwgZWRpdF8xLCBiYXRjaF9lZGl0XzEsIGlubGluZV9lZGl0XzEsIG5vcm1hbF9lZGl0XzEsIGRpYWxvZ19lZGl0XzEsIGNvbHVtbl9jaG9vc2VyXzEsIGV4Y2VsX2V4cG9ydF8xLCBwZGZfZXhwb3J0XzEsIGV4cG9ydF9oZWxwZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoZGF0YV8xKTtcbiAgICBfX2V4cG9ydChzb3J0XzEpO1xuICAgIF9fZXhwb3J0KHBhZ2VfMSk7XG4gICAgX19leHBvcnQoc2VsZWN0aW9uXzEpO1xuICAgIF9fZXhwb3J0KGZpbHRlcl8xKTtcbiAgICBfX2V4cG9ydChzZWFyY2hfMSk7XG4gICAgX19leHBvcnQoc2Nyb2xsXzEpO1xuICAgIF9fZXhwb3J0KHJlc2l6ZV8xKTtcbiAgICBfX2V4cG9ydChyZW9yZGVyXzEpO1xuICAgIF9fZXhwb3J0KHJvd19yZW9yZGVyXzEpO1xuICAgIF9fZXhwb3J0KGdyb3VwXzEpO1xuICAgIF9fZXhwb3J0KHByaW50XzEpO1xuICAgIF9fZXhwb3J0KGRldGFpbF9yb3dfMSk7XG4gICAgX19leHBvcnQodG9vbGJhcl8xKTtcbiAgICBfX2V4cG9ydChhZ2dyZWdhdGVfMSk7XG4gICAgX19leHBvcnQodmlydHVhbF9zY3JvbGxfMSk7XG4gICAgX19leHBvcnQoZWRpdF8xKTtcbiAgICBfX2V4cG9ydChiYXRjaF9lZGl0XzEpO1xuICAgIF9fZXhwb3J0KGlubGluZV9lZGl0XzEpO1xuICAgIF9fZXhwb3J0KG5vcm1hbF9lZGl0XzEpO1xuICAgIF9fZXhwb3J0KGRpYWxvZ19lZGl0XzEpO1xuICAgIF9fZXhwb3J0KGNvbHVtbl9jaG9vc2VyXzEpO1xuICAgIF9fZXhwb3J0KGV4Y2VsX2V4cG9ydF8xKTtcbiAgICBfX2V4cG9ydChwZGZfZXhwb3J0XzEpO1xuICAgIF9fZXhwb3J0KGV4cG9ydF9oZWxwZXJfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy5qc1xuLy8gbW9kdWxlIGlkID0gNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2dyaWRcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vc2VydmljZXMvYXJpYS1zZXJ2aWNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZ3JpZF8xLCB1dGlsXzEsIGV2ZW50cywgYXJpYV9zZXJ2aWNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERldGFpbFJvdyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERldGFpbFJvdyhwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuYXJpYSA9IG5ldyBhcmlhX3NlcnZpY2VfMS5BcmlhU2VydmljZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2dsZUV4cGFuZGNvbGxhcHNlKGVqMl9iYXNlXzEuY2xvc2VzdChlLnRhcmdldCwgJ3RkJykpO1xuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLnRvb2dsZUV4cGFuZGNvbGxhcHNlID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSAncGFyZW50RGV0YWlscyc7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2NvbGxhcHNlJykgfHwgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3dleHBhbmQnKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHIgPSB0YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dFJvdyA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW5bdHIucm93SW5kZXggKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3djb2xsYXBzZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAncmVjb3Jkcyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Vmlld0RhdGEgPSBnT2JqLmFsbG93R3JvdXBpbmcgJiYgZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouY3VycmVudFZpZXdEYXRhW2tleV0gOiBnT2JqLmN1cnJlbnRWaWV3RGF0YTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBjdXJyZW50Vmlld0RhdGFbdHIuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RldGFpbFJvdyhuZXh0Um93KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFJvdy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZ09iai5nZXREZXRhaWxUZW1wbGF0ZSgpIHx8IGdPYmouY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWlsUm93ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxyb3cnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbENlbGwgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWRldGFpbGNlbGwnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsQ2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCB0aGlzLnBhcmVudC5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbFJvdy5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWluZGVudGNlbGwnIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbFJvdy5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWRldGFpbGluZGVudGNlbGwnIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmRldGFpbFRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLmFwcGVuZENoaWxkcmVuKGRldGFpbENlbGwsIGdPYmouZ2V0RGV0YWlsVGVtcGxhdGUoKShkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmNoaWxkR3JpZFtwYXJlbnRdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJRDogZ09iai5lbGVtZW50LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRQcmltYXJ5S2V5czogZ09iai5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRLZXlGaWVsZDogZ09iai5jaGlsZEdyaWQucXVlcnlTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEtleUZpZWxkVmFsdWU6IGRhdGFbZ09iai5jaGlsZEdyaWQucXVlcnlTdHJpbmddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRSb3dEYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZCA9IG5ldyBncmlkXzEuR3JpZChnT2JqLmNoaWxkR3JpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBncmlkLmdldEluamVjdGVkTW9kdWxlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmplY3RlZE1vZHVlcyA9IGdPYmouZ2V0SW5qZWN0ZWRNb2R1bGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2R1bGVzIHx8IG1vZHVsZXMubGVuZ3RoICE9PSBpbmplY3RlZE1vZHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5zZXRJbmplY3RlZE1vZHVsZXMoaW5qZWN0ZWRNb2R1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZEVsZW0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdjaGlsZCcgKyB1dGlsXzEucGFyZW50cyh0ciwgJ2UtZ3JpZCcpLmxlbmd0aCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnX2dyaWQnICsgdHIucm93SW5kZXggKyB1dGlsXzEuZ2V0VWlkKCcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQuYXBwZW5kVG8oZ3JpZEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbENlbGwuYXBwZW5kQ2hpbGQoZ3JpZEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsUm93LmFwcGVuZENoaWxkKGRldGFpbENlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZGV0YWlsUm93LCB0ci5uZXh0U2libGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldFJvd3MoKS5zcGxpY2UodHIucm93SW5kZXggKyAxLCAwLCBkZXRhaWxSb3cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5kZXRhaWxEYXRhQm91bmQsIHsgZGV0YWlsRWxlbWVudDogZGV0YWlsQ2VsbCwgZGF0YTogZGF0YSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdCh0YXJnZXQsIFsnZS1kZXRhaWxyb3dleHBhbmQnXSwgWydlLWRldGFpbHJvd2NvbGxhcHNlJ10pO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdCh0YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQsIFsnZS1kdGRpYWdvbmFsZG93bicsICdlLWljb24tZ2Rvd25hcnJvdyddLCBbJ2UtZHRkaWFnb25hbHJpZ2h0JywgJ2UtaWNvbi1ncmlnaHRhcnJvdyddKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldEV4cGFuZCh0YXJnZXQsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXRhaWxSb3cobmV4dFJvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRSb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdCh0YXJnZXQsIFsnZS1kZXRhaWxyb3djb2xsYXBzZSddLCBbJ2UtZGV0YWlscm93ZXhwYW5kJ10pO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdCh0YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQsIFsnZS1kdGRpYWdvbmFscmlnaHQnLCAnZS1pY29uLWdyaWdodGFycm93J10sIFsnZS1kdGRpYWdvbmFsZG93bicsICdlLWljb24tZ2Rvd25hcnJvdyddKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldEV4cGFuZCh0YXJnZXQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuaXNEZXRhaWxSb3cgPSBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICByZXR1cm4gcm93ICYmIHJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93Jyk7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmdldFREZnJvbUluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIHZhciB0ciA9IHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKHRyICYmIHRyLnF1ZXJ5U2VsZWN0b3IoY2xhc3NOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0ci5xdWVyeVNlbGVjdG9yKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5leHBhbmQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB0aGlzLmdldFREZnJvbUluZGV4KHRhcmdldCwgJy5lLWRldGFpbHJvd2NvbGxhcHNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93Y29sbGFwc2UnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9vZ2xlRXhwYW5kY29sbGFwc2UodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5jb2xsYXBzZSA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICghaXNOYU4odGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRoaXMuZ2V0VERmcm9tSW5kZXgodGFyZ2V0LCAnLmUtZGV0YWlscm93ZXhwYW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93ZXhwYW5kJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2dsZUV4cGFuZGNvbGxhcHNlKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuZXhwYW5kQWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZSh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5jb2xsYXBzZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2UoZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmV4cGFuZENvbGxhcHNlID0gZnVuY3Rpb24gKGlzRXhwYW5kKSB7XG4gICAgICAgICAgICB2YXIgdGQ7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldERhdGFSb3dzKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRkID0gcm93c1tpXS5xdWVyeVNlbGVjdG9yKCcuZS1kZXRhaWxyb3djb2xsYXBzZSwgLmUtZGV0YWlscm93ZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgaXNFeHBhbmQgPyB0aGlzLmV4cGFuZCh0ZCkgOiB0aGlzLmNvbGxhcHNlKHRkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5rZXlQcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsRG93bkFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybFVwQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FsdFVwQXJyb3cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsdERvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGdPYmouYWxsb3dTZWxlY3Rpb24gPyBnT2JqLmdldFNlbGVjdGVkUm93SW5kZXhlcygpIDogW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhUm93ID0gZ09iai5nZXREYXRhUm93cygpW3NlbGVjdGVkW3NlbGVjdGVkLmxlbmd0aCAtIDFdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZCA9IGRhdGFSb3cucXVlcnlTZWxlY3RvcignLmUtZGV0YWlscm93Y29sbGFwc2UsIC5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5hY3Rpb24gPT09ICdhbHREb3duQXJyb3cnID8gdGhpcy5leHBhbmQodGQpIDogdGhpcy5jb2xsYXBzZSh0ZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZGV0YWlsUm93JztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERldGFpbFJvdztcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGV0YWlsUm93ID0gRGV0YWlsUm93O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZGV0YWlsLXJvdy5qc1xuLy8gbW9kdWxlIGlkID0gNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzLCBhcmlhX3NlcnZpY2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU29ydCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNvcnQocGFyZW50LCBzb3J0U2V0dGluZ3MsIHNvcnRlZENvbHVtbnMpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pc01vZGVsQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFyaWEgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MgPSBzb3J0U2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLnNvcnRlZENvbHVtbnMgPSBzb3J0ZWRDb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgU29ydC5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc29ydGVkQ29sdW1uID0geyBmaWVsZDogdGhpcy5jb2x1bW5OYW1lLCBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uIH07XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICB2YXIgZ0NvbHMgPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFnQ29scy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucyA9IFtzb3J0ZWRDb2x1bW5dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnRlZENvbHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGdDb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZ2V0U29ydGVkQ29sc0luZGV4QnlGaWVsZChnQ29sc1tpXSwgc29ydGVkQ29scyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5OYW1lID09PSBnQ29sc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZENvbHMucHVzaChzb3J0ZWRDb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNDb2wgPSB0aGlzLmdldFNvcnRDb2x1bW5Gcm9tRmllbGQoZ0NvbHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZENvbHMucHVzaCh7IGZpZWxkOiBzQ29sLmZpZWxkLCBkaXJlY3Rpb246IHNDb2wuZGlyZWN0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmxhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkQ29scy5wdXNoKHNvcnRlZENvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucyA9IHNvcnRlZENvbHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmdldFNvcnRlZENvbHNJbmRleEJ5RmllbGQodGhpcy5jb2x1bW5OYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2luZGV4XSA9IHNvcnRlZENvbHVtbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMucHVzaChzb3J0ZWRDb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RTb3J0ZWRDb2wgPSB0aGlzLmNvbHVtbk5hbWU7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSAhdGhpcy5pc1JlbW92ZSA/IHtcbiAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiB0aGlzLmNvbHVtbk5hbWUsIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sIHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgfSA6IHsgcmVxdWVzdFR5cGU6ICdzb3J0aW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlIH07XG4gICAgICAgICAgICB0aGlzLmlzUmVtb3ZlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMi5leHRlbmQoZSwgYXJncykpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5zb3J0Q29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIGRpcmVjdGlvbiwgaXNNdWx0aVNvcnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbk5hbWUpLmFsbG93U29ydGluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FjdGlvblByZXZlbnQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnNvcnRDb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgIGFyZzE6IGNvbHVtbk5hbWUsIGFyZzI6IGRpcmVjdGlvbiwgYXJnMzogaXNNdWx0aVNvcnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbHVtbk5hbWUgPSBjb2x1bW5OYW1lO1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTb3J0ID0gaXNNdWx0aVNvcnQ7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNvcnRlZENvbHMoY29sdW1uTmFtZSwgaXNNdWx0aVNvcnQpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS51cGRhdGVTb3J0ZWRDb2xzID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIGlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICBpZiAoIWlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc29ydGVkQ29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKHRoaXMuc29ydGVkQ29sdW1uc1tpXSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW4tLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5zcGxpY2UoMCwgdGhpcy5zb3J0ZWRDb2x1bW5zLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc29ydGVkQ29sdW1ucy5pbmRleE9mKGNvbHVtbk5hbWUpIDwgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5wdXNoKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID8ge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiB0aGlzLmNvbHVtbk5hbWUsIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sIHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgIH0gOiB7IHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmFkZFNvcnRJY29ucygpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5jbGVhclNvcnRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHV0aWxfMS5nZXRBY3R1YWxQcm9wRnJvbUNvbGwodGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FjdGlvblByZXZlbnQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLmNsZWFyU29ydGluZyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydENvbHVtbihjb2xzW2ldLmZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuaXNBY3Rpb25QcmV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pc0FjdGlvblByZXZlbnQodGhpcy5wYXJlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5yZW1vdmVTb3J0Q29sdW1uID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3Rpb25QcmV2ZW50KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5yZW1vdmVTb3J0Q29sdW1uLCBhcmcxOiBmaWVsZCB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZyAmJiBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5zcGxpY2UodGhpcy5zb3J0ZWRDb2x1bW5zLmluZGV4T2YoY29sc1tpXS5maWVsZCksIDEpO1xuICAgICAgICAgICAgICAgICAgICBjb2xzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kZWxDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGRTb3J0SWNvbnMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuZ2V0U29ydGVkQ29sc0luZGV4QnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCwgc29ydGVkQ29sdW1ucykge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBzb3J0ZWRDb2x1bW5zID8gc29ydGVkQ29sdW1ucyA6IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3NvcnQnO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5pbml0aWFsRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAmJiB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNvcnQgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA+IDE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvcnRlZENvbHVtbnMuaW5kZXhPZihjb2wuZmllbGQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydENvbHVtbihjb2wuZmllbGQsIGNvbC5kaXJlY3Rpb24sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuc29ydENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5zb3J0Q29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVmcmVzaFNvcnRJY29ucyk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmlzTW9kZWxDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1zb3J0ZGlyZWN0JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhclNvcnRpbmcoKTtcbiAgICAgICAgICAgIHRoaXMuaXNNb2RlbENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBvcFVwQ2xpY2tIYW5kbGVyKGUpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1ncnB0b2dnbGVidG4nKSAmJlxuICAgICAgICAgICAgICAgICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3RhY2tlZGhlYWRlcmNlbGwnKSAmJlxuICAgICAgICAgICAgICAgICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3RhY2tlZGhlYWRlcmNlbGxkaXYnKSAmJlxuICAgICAgICAgICAgICAgICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcmhhbmRsZXInKSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gZ09iai5nZXRDb2x1bW5CeVVpZCh0YXJnZXQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpLmZpZWxkO1xuICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAhdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFzY2VuZGluZycpLmxlbmd0aCA/ICdhc2NlbmRpbmcnIDpcbiAgICAgICAgICAgICAgICAgICAgJ2Rlc2NlbmRpbmcnO1xuICAgICAgICAgICAgICAgIGlmICghZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRDb2x1bW4oZmllbGQsIGRpcmVjdGlvbiwgZS5jdHJsS2V5IHx8IHRoaXMuZW5hYmxlU29ydE11bHRpVG91Y2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0Q29sdW1uKGZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQb3BVcChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnNob3dQb3BVcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGUudGFyZ2V0LCAnLmUtaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuc2V0Q3NzSW5HcmlkUG9wVXAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKSwgZSwgJ2Utc29ydGRpcmVjdCBlLWljb25zIGUtaWNvbi1zb3J0ZGlyZWN0JyArICh0aGlzLnNvcnRlZENvbHVtbnMubGVuZ3RoID4gMSA/ICcgZS1zcGFuY2xpY2tlZCcgOiAnJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5wb3BVcENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpIHx8XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWRwb3B1cCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc29ydGRpcmVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zcGFuY2xpY2tlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTb3J0TXVsdGlUb3VjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTb3J0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5hZGRTb3J0SWNvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGhlYWRlcjtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhlYWRlciA9IGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChjb2xzW2ldLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFyaWEuc2V0U29ydChoZWFkZXIsIGNvbHNbaV0uZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc011bHRpU29ydCAmJiBjb2xzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXNvcnRudW1iZXInLCBpbm5lckhUTUw6IChpICsgMSkudG9TdHJpbmcoKSB9KSwgaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcnRleHQnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydGZpbHRlcmRpdicpO1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmRpcmVjdGlvbiA9PT0gJ2FzY2VuZGluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoZmlsdGVyRWxlbWVudCwgWydlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10sIFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGZpbHRlckVsZW1lbnQsIFsnZS1kZXNjZW5kaW5nJywgJ2UtaWNvbi1kZXNjZW5kaW5nJ10sIFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnJlbW92ZVNvcnRJY29ucyA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBoZWFkZXI7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmllbGROYW1lcyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQ7IH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHBvc2l0aW9uID8gcG9zaXRpb24gOiAwLCBsZW4gPSAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChwb3NpdGlvbikgPyBwb3NpdGlvbiArIDEgOiBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZyAmJiBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoZWFkZXIgPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sc1tpXS5maWVsZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldFNvcnQoaGVhZGVyLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1zb3J0ZmlsdGVyZGl2JyksIFtdLCBbJ2UtZGVzY2VuZGluZycsICdlLWljb24tZGVzY2VuZGluZycsICdlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10pO1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydG51bWJlcicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykucmVtb3ZlQ2hpbGQoaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNvcnRudW1iZXInKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5nZXRTb3J0Q29sdW1uRnJvbUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2ldLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1uc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnVwZGF0ZUFyaWFBdHRyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnNvcnRlZENvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lcy5pbmRleE9mKGNvbCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChjb2wpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRTb3J0KGhlYWRlciwgdGhpcy5nZXRTb3J0Q29sdW1uRnJvbUZpZWxkKGNvbCkuZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUucmVmcmVzaFNvcnRJY29ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTb3J0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydEljb25zKCk7XG4gICAgICAgICAgICB0aGlzLmFkZFNvcnRJY29ucygpO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU29ydCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBcmlhQXR0cigpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU29ydDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU29ydCA9IFNvcnQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9zb3J0LmpzXG4vLyBtb2R1bGUgaWQgPSA0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vcGFnZXIvcGFnZXJcIiwgXCIuLi8uLi9wYWdlci9wYWdlci1kcm9wZG93blwiLCBcIi4uLy4uL3BhZ2VyL2V4dGVybmFsLW1lc3NhZ2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgcGFnZXJfMSwgcGFnZXJfZHJvcGRvd25fMSwgZXh0ZXJuYWxfbWVzc2FnZV8xLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBwYWdlcl8xLlBhZ2VyLkluamVjdChleHRlcm5hbF9tZXNzYWdlXzEuRXh0ZXJuYWxNZXNzYWdlLCBwYWdlcl9kcm9wZG93bl8xLlBhZ2VyRHJvcERvd24pO1xuICAgIHZhciBQYWdlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUGFnZShwYXJlbnQsIHBhZ2VTZXR0aW5ncykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTZXR0aW5ncyA9IHBhZ2VTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3BhZ2VyJztcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBwYWdlck9iajtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyaWRwYWdlcicgfSk7XG4gICAgICAgICAgICBwYWdlck9iaiA9IHV0aWxfMS5leHRlbmQoe30sIGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB1dGlsXzEuZ2V0QWN0dWFsUHJvcGVydGllcyh0aGlzLnBhZ2VTZXR0aW5ncykpLCB7XG4gICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgZHJvcERvd25DaGFuZ2VkOiB0aGlzLm9uU2VsZWN0LmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiBnT2JqLmVuYWJsZVJ0bCwgbG9jYWxlOiBnT2JqLmxvY2FsZSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkOiB0aGlzLmFkZEFyaWFBdHRyLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0sIFsncGFyZW50T2JqJywgJ3Byb3BOYW1lJ10pO1xuICAgICAgICAgICAgdGhpcy5wYWdlck9iaiA9IG5ldyBwYWdlcl8xLlBhZ2VyKHBhZ2VyT2JqKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUub25TZWxlY3QgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlU2V0dGluZ3MucGFnZVNpemUgPSBlLnBhZ2VTaXplO1xuICAgICAgICAgICAgdGhpcy5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSAxO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5hZGRBcmlhQXR0ciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgbnVtZXJpY0NvbnRhaW5lciA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1udW1lcmljY29udGFpbmVyJyk7XG4gICAgICAgICAgICB2YXIgbGlua3MgPSBudW1lcmljQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua3NbaV0uc2V0QXR0cmlidXRlKCdhcmlhLW93bnMnLCB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5pZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IFsnLmUtbWZpcnN0JywgJy5lLW1wcmV2JywgJy5lLWZpcnN0JywgJy5lLXByZXYnLCAnLmUtbmV4dCcsICcuZS1sYXN0JywgJy5lLW1uZXh0JywgJy5lLW1sYXN0J107XG4gICAgICAgICAgICBjbGFzc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQucXVlcnlTZWxlY3Rvcih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1vd25zJywgX3RoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZGF0YVJlYWR5ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoZSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZ29Ub1BhZ2UgPSBmdW5jdGlvbiAocGFnZU5vKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmdvVG9QYWdlKHBhZ2VObyk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy50b3RhbFJlY29yZHNDb3VudCA9IGUuY291bnQ7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSwgcmVxdWVzdFR5cGU6ICdwYWdpbmcnLFxuICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5ld1Byb3AgPSBlLnByb3BlcnRpZXM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlck9ialtwcm9wXSA9IG5ld1Byb3BbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGb3JjZUNhbmNlbCB8fCB1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRm9yY2VDYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5nb1RvUGFnZSwgYXJnMTogZS5jdXJyZW50UGFnZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlck9iai5jdXJyZW50UGFnZSA9IGdPYmoucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRm9yY2VDYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0ZvcmNlQ2FuY2VsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGUuY2FuY2VsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJldlBhZ2UgPSB0aGlzLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgIHRoaXMucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gZS5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdwYWdpbmcnLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUGFnZTogcHJldlBhZ2UsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IGUuY3VycmVudFBhZ2UsXG4gICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhblNraXBBY3Rpb24oZS5hY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUuYWN0aW9uIGluIGtleUFjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioa2V5QWN0aW9uc1tlLmFjdGlvbl0pLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmNhblNraXBBY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgcGFnZSA9IHtcbiAgICAgICAgICAgICAgICBwYWdlVXA6IGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwuc2Nyb2xsVG9wICE9PSAwOyB9LFxuICAgICAgICAgICAgICAgIHBhZ2VEb3duOiBmdW5jdGlvbiAoZWwpIHsgcmV0dXJuICEoZWwuc2Nyb2xsVG9wID49IGVsLnNjcm9sbEhlaWdodCAtIGVsLmNsaWVudEhlaWdodCk7IH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoYWN0aXZlRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY29udGVudCcpICYmXG4gICAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudC5pc0VxdWFsTm9kZSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RFbGVtZW50Q2hpbGQpICYmIFsncGFnZVVwJywgJ3BhZ2VEb3duJ10uaW5kZXhPZihhY3Rpb24pICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYWdlW2FjdGlvbl0odGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS51cGRhdGVFeHRlcm5hbE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhZ2VyT2JqLmVuYWJsZUV4dGVybmFsTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZW5hYmxlRXh0ZXJuYWxNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmV4dGVybmFsTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmFwcGVuZFRvRWxlbWVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRHcmlkUGFnZXIodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouYXBwZW5kVG8odGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRUb0VsZW1lbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMgPSB7XG4gICAgICAgICAgICAgICAgbG9hZDogdGhpcy5yZW5kZXIsXG4gICAgICAgICAgICAgICAgZW5kOiB0aGlzLmFwcGVuZFRvRWxlbWVudCxcbiAgICAgICAgICAgICAgICByZWFkeTogdGhpcy5kYXRhUmVhZHksXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IHRoaXMub25BY3Rpb25Db21wbGV0ZSxcbiAgICAgICAgICAgICAgICB1cGRhdGVMYXlvdXQ6IHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsXG4gICAgICAgICAgICAgICAgaW5ib3VuZENoYW5nZTogdGhpcy5vblByb3BlcnR5Q2hhbmdlZCxcbiAgICAgICAgICAgICAgICBrZXlQcmVzczogdGhpcy5rZXlQcmVzc0hhbmRsZXJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbExvYWQsIHRoaXMuaGFuZGxlcnMubG9hZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5oYW5kbGVycy5lbmQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5oYW5kbGVycy5yZWFkeSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucGFnZUNvbXBsZXRlLCB0aGlzLmhhbmRsZXJzLmNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5oYW5kbGVycy51cGRhdGVMYXlvdXQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMuaGFuZGxlcnMuaW5ib3VuZENoYW5nZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5oYW5kbGVycy5rZXlQcmVzcywgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxMb2FkLCB0aGlzLmhhbmRsZXJzLmxvYWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmhhbmRsZXJzLmVuZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5oYW5kbGVycy5yZWFkeSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnBhZ2VDb21wbGV0ZSwgdGhpcy5oYW5kbGVycy5jb21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmhhbmRsZXJzLnVwZGF0ZUxheW91dCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMuaGFuZGxlcnMuaW5ib3VuZENoYW5nZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMuaGFuZGxlcnMua2V5UHJlc3MpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQYWdlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5QYWdlID0gUGFnZTtcbiAgICB2YXIga2V5QWN0aW9ucyA9IHtcbiAgICAgICAgcGFnZVVwOiAnLmUtcHJldicsXG4gICAgICAgIHBhZ2VEb3duOiAnLmUtbmV4dCcsXG4gICAgICAgIGN0cmxBbHRQYWdlRG93bjogJy5lLWxhc3QnLFxuICAgICAgICBjdHJsQWx0UGFnZVVwOiAnLmUtZmlyc3QnLFxuICAgICAgICBhbHRQYWdlVXA6ICcuZS1wcCcsXG4gICAgICAgIGFsdFBhZ2VEb3duOiAnLmUtbnAnXG4gICAgfTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3BhZ2UuanNcbi8vIG1vZHVsZSBpZCA9IDQ4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL251bWVyaWMtY29udGFpbmVyXCIsIFwiLi9wYWdlci1tZXNzYWdlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2Jhc2VfNCwgbnVtZXJpY19jb250YWluZXJfMSwgcGFnZXJfbWVzc2FnZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQYWdlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhQYWdlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUGFnZXIob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmRlZmF1bHRDb25zdGFudHMgPSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2VJbmZvOiAnezB9IG9mIHsxfSBwYWdlcycsXG4gICAgICAgICAgICAgICAgdG90YWxJdGVtc0luZm86ICcoezB9IGl0ZW1zKScsXG4gICAgICAgICAgICAgICAgZmlyc3RQYWdlVG9vbHRpcDogJ0dvIHRvIGZpcnN0IHBhZ2UnLFxuICAgICAgICAgICAgICAgIGxhc3RQYWdlVG9vbHRpcDogJ0dvIHRvIGxhc3QgcGFnZScsXG4gICAgICAgICAgICAgICAgbmV4dFBhZ2VUb29sdGlwOiAnR28gdG8gbmV4dCBwYWdlJyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2VUb29sdGlwOiAnR28gdG8gcHJldmlvdXMgcGFnZScsXG4gICAgICAgICAgICAgICAgbmV4dFBhZ2VyVG9vbHRpcDogJ0dvIHRvIG5leHQgcGFnZXInLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUGFnZXJUb29sdGlwOiAnR28gdG8gcHJldmlvdXMgcGFnZXInLFxuICAgICAgICAgICAgICAgIHBhZ2VyRHJvcERvd246ICdJdGVtcyBwZXIgcGFnZSdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5jb250YWluZXJNb2R1bGUgPSBuZXcgbnVtZXJpY19jb250YWluZXJfMS5OdW1lcmljQ29udGFpbmVyKF90aGlzKTtcbiAgICAgICAgICAgIF90aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZSA9IG5ldyBwYWdlcl9tZXNzYWdlXzEuUGFnZXJNZXNzYWdlKF90aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVxdWlyZWRNb2R1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUV4dGVybmFsTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ2V4dGVybmFsTWVzc2FnZScsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2twYWdlc2l6ZXMoKSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3BhZ2VyZHJvcGRvd24nLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVzO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pbml0TG9jYWxpemF0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJUTCgpO1xuICAgICAgICAgICAgdGhpcy50b3RhbFJlY29yZHNDb3VudCA9IHRoaXMudG90YWxSZWNvcmRzQ291bnQgfHwgMDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmlyc3RQcmV2RGl2Rm9yRGV2aWNlKCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1vZHVsZS5yZW5kZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVBhZ2VyTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJOZXh0TGFzdERpdkZvckRldmljZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2twYWdlc2l6ZXMoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJkcm9wZG93bk1vZHVsZS5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWRkQXJpYUxhYmVsKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVFeHRlcm5hbE1lc3NhZ2UgJiYgdGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZS5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjcmVhdGVkJywgeyAnY3VycmVudFBhZ2UnOiB0aGlzLmN1cnJlbnRQYWdlLCAndG90YWxSZWNvcmRzQ291bnQnOiB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50IH0pO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5RW50aXR5ID0gWydlbmFibGVFeHRlcm5hbE1lc3NhZ2UnLCAnZW5hYmxlUGFnZXJNZXNzYWdlJywgJ2N1cnJlbnRQYWdlJywgJ2VuYWJsZVF1ZXJ5U3RyaW5nJywgJ3BhZ2VTaXplcycsXG4gICAgICAgICAgICAgICAgJ3BhZ2VTaXplJywgJ3BhZ2VDb3VudCcsICd0b3RhbFJlY29yZHNDb3VudCcsICdleHRlcm5hbE1lc3NhZ2UnLCAnY3VzdG9tVGV4dCcsICdjbGljaycsICdjcmVhdGVkJywgJ2Ryb3BEb3duQ2hhbmdlZCddO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KGtleUVudGl0eSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdwYWdlcic7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFnZUNvdW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlZnJlc2hOdW1lcmljTGlua3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjdXJyZW50UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0dvVG9QYWdlKG5ld1Byb3AuY3VycmVudFBhZ2UsIG9sZFByb3AuY3VycmVudFBhZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZUNoYW5nZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlU2l6ZSc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvdGFsUmVjb3Jkc0NvdW50JzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3VzdG9tVGV4dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlU2l6ZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2twYWdlc2l6ZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJkcm9wZG93bk1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlcmRyb3Bkb3duTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbG9jYWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdExvY2FsaXphdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlRXh0ZXJuYWxNZXNzYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUV4dGVybmFsTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4dGVybmFsTWVzc2FnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUlRMKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUGFnZXJNZXNzYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVBhZ2VyTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLnNob3dNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZS5oaWRlTWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ2V0TG9jYWxpemVkTGFiZWwgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVPYmouZ2V0Q29uc3RhbnQoa2V5KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmdvVG9QYWdlID0gZnVuY3Rpb24gKHBhZ2VObykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tHb1RvUGFnZShwYWdlTm8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2VObztcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5jaGVja3BhZ2VzaXplcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VTaXplcyA9PT0gdHJ1ZSB8fCB0aGlzLnBhZ2VTaXplcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmNoZWNrR29Ub1BhZ2UgPSBmdW5jdGlvbiAobmV3UGFnZU5vLCBvbGRQYWdlTm8pIHtcbiAgICAgICAgICAgIGlmIChuZXdQYWdlTm8gIT09IHRoaXMuY3VycmVudFBhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzUGFnZU5vID0gdGhpcy5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChvbGRQYWdlTm8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1BhZ2VObyA9IG9sZFBhZ2VObztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZpb3VzUGFnZU5vICE9PSBuZXdQYWdlTm8gJiYgKG5ld1BhZ2VObyA+PSAxICYmIG5ld1BhZ2VObyA8PSB0aGlzLnRvdGFsUGFnZXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5jdXJyZW50UGFnZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVRdWVyeVN0cmluZykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUXVlcnlTdHJpbmcodGhpcy5jdXJyZW50UGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHsgY3VycmVudFBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsIGNhbmNlbDogZmFsc2UgfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignY2xpY2snLCBhcmdzKTtcbiAgICAgICAgICAgIGlmICghYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJUTCgpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUGFnZXJNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlck1lc3NhZ2VNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRXh0ZXJuYWxNZXNzYWdlICYmIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUudXBkYXRlUlRMID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtcnRsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1ydGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmluaXRMb2NhbGl6YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsZU9iaiA9IG5ldyBlajJfYmFzZV8xLkwxMG4odGhpcy5nZXRNb2R1bGVOYW1lKCksIHRoaXMuZGVmYXVsdENvbnN0YW50cywgdGhpcy5sb2NhbGUpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUudXBkYXRlUXVlcnlTdHJpbmcgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciB1cGRhdGVkVXJsID0gdGhpcy5nZXRVcGRhdGVkVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmLCAncGFnZScsIHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHsgcGF0aDogdXBkYXRlZFVybCB9LCAnJywgdXBkYXRlZFVybCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRVcGRhdGVkVVJMID0gZnVuY3Rpb24gKHVyaSwga2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHJlZ3ggPSBuZXcgUmVnRXhwKCcoWz98Jl0pJyArIGtleSArICc9Lio/KCZ8I3wkKScsICdpJyk7XG4gICAgICAgICAgICBpZiAodXJpLm1hdGNoKHJlZ3gpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVyaS5yZXBsYWNlKHJlZ3gsICckMScgKyBrZXkgKyAnPScgKyB2YWx1ZSArICckMicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhc2ggPSAnJztcbiAgICAgICAgICAgICAgICBpZiAodXJpLmluZGV4T2YoJyMnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzaCA9IHVyaS5yZXBsYWNlKC8uKiMvLCAnIycpO1xuICAgICAgICAgICAgICAgICAgICB1cmkgPSB1cmkucmVwbGFjZSgvIy4qLywgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdXJpICsgKHVyaS5pbmRleE9mKCc/JykgIT09IC0xID8gJyYnIDogJz8nKSArIGtleSArICc9JyArIHZhbHVlICsgaGFzaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnJlbmRlckZpcnN0UHJldkRpdkZvckRldmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW1maXJzdCBlLWljb25zIGUtaWNvbi1maXJzdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGl0bGU6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ2ZpcnN0UGFnZVRvb2x0aXAnKSwgdGFiaW5kZXg6ICctMScgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbXByZXYgZS1pY29ucyBlLWljb24tcHJldicsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGl0bGU6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ3ByZXZpb3VzUGFnZVRvb2x0aXAnKSwgdGFiaW5kZXg6ICctMScgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVuZGVyTmV4dExhc3REaXZGb3JEZXZpY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1tbmV4dCBlLWljb25zIGUtaWNvbi1uZXh0JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0aXRsZTogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnbmV4dFBhZ2VUb29sdGlwJyksIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW1sYXN0IGUtaWNvbnMgZS1pY29uLWxhc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmdldExvY2FsaXplZExhYmVsKCdsYXN0UGFnZVRvb2x0aXAnKSwgdGFiaW5kZXg6ICctMScgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuYWRkQXJpYUxhYmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjbGFzc0xpc3QgPSBbJy5lLW1maXJzdCcsICcuZS1tcHJldicsICcuZS1tbmV4dCcsICcuZS1tbGFzdCddO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBjbGFzc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBhZ2VyO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiZW5hYmxlUXVlcnlTdHJpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiZW5hYmxlRXh0ZXJuYWxNZXNzYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiZW5hYmxlUGFnZXJNZXNzYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMTIpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcInBhZ2VTaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMTApXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcInBhZ2VDb3VudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KDEpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcImN1cnJlbnRQYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJ0b3RhbFJlY29yZHNDb3VudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiZXh0ZXJuYWxNZXNzYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcInBhZ2VTaXplc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCcnKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjdXN0b21UZXh0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjbGlja1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiZHJvcERvd25DaGFuZ2VkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgUGFnZXIgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBQYWdlcik7XG4gICAgZXhwb3J0cy5QYWdlciA9IFBhZ2VyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9wYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTnVtZXJpY0NvbnRhaW5lciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE51bWVyaWNDb250YWluZXIocGFnZXJNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUgPSBwYWdlck1vZHVsZTtcbiAgICAgICAgfVxuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudCA9IHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTnVtZXJpY0NvbnRhaW5lcigpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoTnVtZXJpY0xpbmtzKCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICBwYWdlck9iai50b3RhbFBhZ2VzID0gKHBhZ2VyT2JqLnRvdGFsUmVjb3Jkc0NvdW50ICUgcGFnZXJPYmoucGFnZVNpemUgPT09IDApID8gKHBhZ2VyT2JqLnRvdGFsUmVjb3Jkc0NvdW50IC8gcGFnZXJPYmoucGFnZVNpemUpIDpcbiAgICAgICAgICAgICAgICAocGFyc2VJbnQoKHBhZ2VyT2JqLnRvdGFsUmVjb3Jkc0NvdW50IC8gcGFnZXJPYmoucGFnZVNpemUpLnRvU3RyaW5nKCksIDEwKSArIDEpO1xuICAgICAgICAgICAgaWYgKHRoaXMubGlua3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaW5rc0h0bWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlZnJlc2hOdW1lcmljTGlua3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbGluaztcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgZGl2ID0gcGFnZXJPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1udW1lcmljY29udGFpbmVyJyk7XG4gICAgICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHBhZ2VyT2JqLnBhZ2VDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGluayA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1saW5rIGUtbnVtZXJpY2l0ZW0gZS1zcGFjaW5nIGUtcGFnZXItZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHJvbGU6ICdsaW5rJywgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ0dvdG8gUGFnZSAnICsgaSB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlID09PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGxpbmssIFsnZS1jdXJyZW50aXRlbScsICdlLWFjdGl2ZSddLCBbJ2UtcGFnZXItZGVmYXVsdCddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgICAgICAgIHRoaXMubGlua3MgPSBbXS5zbGljZS5jYWxsKGRpdi5jaGlsZE5vZGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhZ2VyRWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYWdlckVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlck51bWVyaWNDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXBhZ2VyY29udGFpbmVyJywgYXR0cnM6IHsgJ3JvbGUnOiAnbmF2aWdhdGlvbicgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZpcnN0TlByZXYodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUHJldlBhZ2VyU2V0KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtbnVtZXJpY2NvbnRhaW5lcicgfSkpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJOZXh0UGFnZXJTZXQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTmV4dE5MYXN0KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyRmlyc3ROUHJldiA9IGZ1bmN0aW9uIChwYWdlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5maXJzdCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZmlyc3QgZS1pY29ucyBlLWljb24tZmlyc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdmaXJzdFBhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnZmlyc3RQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wcmV2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1wcmV2IGUtaWNvbnMgZS1pY29uLXByZXYnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgncHJldmlvdXNQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hcHBlbmQoW3RoaXMuZmlyc3QsIHRoaXMucHJldl0sIHBhZ2VyQ29udGFpbmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyUHJldlBhZ2VyU2V0ID0gZnVuY3Rpb24gKHBhZ2VyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLlBQID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdhJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbGluayBlLXBwIGUtc3BhY2luZycsIGlubmVySFRNTDogJy4uLicsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ3ByZXZpb3VzUGFnZXJUb29sdGlwJyksIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VyVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcGFnZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5QUCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlck5leHRQYWdlclNldCA9IGZ1bmN0aW9uIChwYWdlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5OUCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWxpbmsgZS1ucCBlLXNwYWNpbmcnLFxuICAgICAgICAgICAgICAgIGlubmVySFRNTDogJy4uLicsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCduZXh0UGFnZXJUb29sdGlwJyksIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCduZXh0UGFnZXJUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwYWdlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLk5QKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyTmV4dE5MYXN0ID0gZnVuY3Rpb24gKHBhZ2VyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLm5leHQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW5leHQgZS1pY29ucyBlLWljb24tbmV4dCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5sYXN0ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1sYXN0IGUtaWNvbnMgZS1pY29uLWxhc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdsYXN0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdsYXN0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXBwZW5kKFt0aGlzLm5leHQsIHRoaXMubGFzdF0sIHBhZ2VyQ29udGFpbmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBwYWdlck9iai5wcmV2aW91c1BhZ2VObyA9IHBhZ2VyT2JqLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRpc2FibGUnKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdpbmRleCcpKSkge1xuICAgICAgICAgICAgICAgIHBhZ2VyT2JqLmN1cnJlbnRQYWdlID0gcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnaW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgIHBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZUxpbmtzSHRtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgY3VycmVudFBhZ2VTZXQ7XG4gICAgICAgICAgICB2YXIgcGFnZU5vO1xuICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UgPSBwYWdlck9iai50b3RhbFBhZ2VzID09PSAxID8gMSA6IHBhZ2VyT2JqLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlID4gcGFnZXJPYmoudG90YWxQYWdlcyAmJiBwYWdlck9iai50b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UgPSBwYWdlck9iai50b3RhbFBhZ2VzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFBhZ2VTZXQgPSBwYXJzZUludCgocGFnZXJPYmouY3VycmVudFBhZ2UgLyBwYWdlck9iai5wYWdlQ291bnQpLnRvU3RyaW5nKCksIDEwKTtcbiAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSAlIHBhZ2VyT2JqLnBhZ2VDb3VudCA9PT0gMCAmJiBjdXJyZW50UGFnZVNldCA+IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZVNldCA9IGN1cnJlbnRQYWdlU2V0IC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFnZXJPYmoucGFnZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBwYWdlTm8gPSAoY3VycmVudFBhZ2VTZXQgKiBwYWdlck9iai5wYWdlQ291bnQpICsgMSArIGk7XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VObyA8PSBwYWdlck9iai50b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCBwYWdlTm8udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uaW5uZXJIVE1MID0gIXBhZ2VyT2JqLmN1c3RvbVRleHQgPyBwYWdlTm8udG9TdHJpbmcoKSA6IHBhZ2VyT2JqLmN1c3RvbVRleHQgKyBwYWdlTm87XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSAhPT0gcGFnZU5vKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLmNsYXNzTGlzdC5hZGQoJ2UtcGFnZXItZGVmYXVsdCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdlLXBhZ2VyLWRlZmF1bHQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxpbmtzW2ldLCBbXSwgWydlLWN1cnJlbnRpdGVtJywgJ2UtYWN0aXZlJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maXJzdC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgJzEnKTtcbiAgICAgICAgICAgIHRoaXMubGFzdC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgcGFnZXJPYmoudG90YWxQYWdlcy50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMucHJldi5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlIC0gMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLm5leHQuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYWdlck9iai5jdXJyZW50UGFnZSArIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbWZpcnN0Jykuc2V0QXR0cmlidXRlKCdpbmRleCcsICcxJyk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbGFzdCcpLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCBwYWdlck9iai50b3RhbFBhZ2VzLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbXByZXYnKS5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlIC0gMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbmV4dCcpLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAocGFnZXJPYmouY3VycmVudFBhZ2UgKyAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMuUFAuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYXJzZUludCh0aGlzLmxpbmtzWzBdLmdldEF0dHJpYnV0ZSgnaW5kZXgnKSwgMTApIC0gcGFnZXJPYmoucGFnZUNvdW50KS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMuTlAuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYXJzZUludCh0aGlzLmxpbmtzW3RoaXMubGlua3MubGVuZ3RoIC0gMV0uZ2V0QXR0cmlidXRlKCdpbmRleCcpLCAxMCkgKyAxKS50b1N0cmluZygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlU3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaXJzdE5QcmV2U3R5bGVzKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByZXZQYWdlclNldFN0eWxlcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVOZXh0UGFnZXJTZXRTdHlsZXMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTmV4dE5MYXN0U3R5bGVzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5saW5rcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxpbmtzWyh0aGlzLnBhZ2VyTW9kdWxlLmN1cnJlbnRQYWdlIC0gMSkgJSB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VDb3VudF0sIFsnZS1jdXJyZW50aXRlbScsICdlLWFjdGl2ZSddLCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZUZpcnN0TlByZXZTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3RQYWdlID0gWydlLWZpcnN0cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBmaXJzdFBhZ2VEaXNhYmxlZCA9IFsnZS1maXJzdHBhZ2VkaXNhYmxlZCcsICdlLWRpc2FibGUnXTtcbiAgICAgICAgICAgIHZhciBwcmV2UGFnZSA9IFsnZS1wcmV2cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBwcmV2UGFnZURpc2FibGVkID0gWydlLXByZXZwYWdlZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ107XG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlck1vZHVsZS5jdXJyZW50UGFnZSA+IDEpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnByZXYsIHByZXZQYWdlLCBwcmV2UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmZpcnN0LCBmaXJzdFBhZ2UsIGZpcnN0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tZmlyc3QnKSwgZmlyc3RQYWdlLCBmaXJzdFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbXByZXYnKSwgcHJldlBhZ2UsIHByZXZQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wcmV2LCBwcmV2UGFnZURpc2FibGVkLCBwcmV2UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5maXJzdCwgZmlyc3RQYWdlRGlzYWJsZWQsIGZpcnN0UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbXByZXYnKSwgcHJldlBhZ2VEaXNhYmxlZCwgcHJldlBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1maXJzdCcpLCBmaXJzdFBhZ2VEaXNhYmxlZCwgZmlyc3RQYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlUHJldlBhZ2VyU2V0U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXJNb2R1bGUuY3VycmVudFBhZ2UgPiB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VDb3VudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuUFAsIFsnZS1udW1lcmljaXRlbScsICdlLXBhZ2VyLWRlZmF1bHQnXSwgWydlLW5leHRwcmV2aXRlbWRpc2FibGVkJywgJ2UtZGlzYWJsZSddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuUFAsIFsnZS1uZXh0cHJldml0ZW1kaXNhYmxlZCcsICdlLWRpc2FibGUnXSwgWydlLW51bWVyaWNpdGVtJywgJ2UtcGFnZXItZGVmYXVsdCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlTmV4dFBhZ2VyU2V0U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHZhciBmaXJzdFBhZ2UgPSB0aGlzLmxpbmtzWzBdLmlubmVySFRNTC5yZXBsYWNlKHBhZ2VyT2JqLmN1c3RvbVRleHQsICcnKTtcbiAgICAgICAgICAgIGlmICghZmlyc3RQYWdlLmxlbmd0aCB8fCAhdGhpcy5saW5rcy5sZW5ndGggfHwgKHBhcnNlSW50KGZpcnN0UGFnZSwgMTApICsgcGFnZXJPYmoucGFnZUNvdW50ID4gcGFnZXJPYmoudG90YWxQYWdlcykpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLk5QLCBbJ2UtbmV4dHByZXZpdGVtZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ10sIFsnZS1udW1lcmljaXRlbScsICdlLXBhZ2VyLWRlZmF1bHQnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLk5QLCBbJ2UtbnVtZXJpY2l0ZW0nLCAnZS1wYWdlci1kZWZhdWx0J10sIFsnZS1uZXh0cHJldml0ZW1kaXNhYmxlZCcsICdlLWRpc2FibGUnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZU5leHROTGFzdFN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsYXN0UGFnZSA9IFsnZS1sYXN0cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBsYXN0UGFnZURpc2FibGVkID0gWydlLWxhc3RwYWdlZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ107XG4gICAgICAgICAgICB2YXIgbmV4dFBhZ2UgPSBbJ2UtbmV4dHBhZ2UnLCAnZS1wYWdlci1kZWZhdWx0J107XG4gICAgICAgICAgICB2YXIgbmV4dFBhZ2VEaXNhYmxlZCA9IFsnZS1uZXh0cGFnZWRpc2FibGVkJywgJ2UtZGlzYWJsZSddO1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSA9PT0gcGFnZXJPYmoudG90YWxQYWdlcyB8fCBwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubGFzdCwgbGFzdFBhZ2VEaXNhYmxlZCwgbGFzdFBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubmV4dCwgbmV4dFBhZ2VEaXNhYmxlZCwgbmV4dFBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1sYXN0JyksIGxhc3RQYWdlRGlzYWJsZWQsIGxhc3RQYWdlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbmV4dCcpLCBuZXh0UGFnZURpc2FibGVkLCBuZXh0UGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxhc3QsIGxhc3RQYWdlLCBsYXN0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLm5leHQsIG5leHRQYWdlLCBuZXh0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbGFzdCcpLCBsYXN0UGFnZSwgbGFzdFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbW5leHQnKSwgbmV4dFBhZ2UsIG5leHRQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTnVtZXJpY0NvbnRhaW5lcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuTnVtZXJpY0NvbnRhaW5lciA9IE51bWVyaWNDb250YWluZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhZ2VyL251bWVyaWMtY29udGFpbmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBhZ2VyTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFBhZ2VyTWVzc2FnZShwYWdlck1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZSA9IHBhZ2VyTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXBhcmVudG1zZ2JhcicsIGF0dHJzOiB7ICdhcmlhLWxhYmVsJzogJ1BhZ2VyIEluZm9ybWF0aW9uJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXBhZ2Vub21zZycsIHN0eWxlczogJ3RleHRhbGlnbjpyaWdodCcgfSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDb3VudE1zZ0VsZW0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtcGFnZWNvdW50bXNnJywgc3R5bGVzOiAndGV4dGFsaWduOnJpZ2h0JyB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuYXBwZW5kKFt0aGlzLnBhZ2VOb01zZ0VsZW0sIHRoaXMucGFnZUNvdW50TXNnRWxlbV0sIGRpdik7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXQocGFnZXJPYmouZ2V0TG9jYWxpemVkTGFiZWwoJ2N1cnJlbnRQYWdlSW5mbycpLCBbcGFnZXJPYmoudG90YWxSZWNvcmRzQ291bnQgPT09IDAgPyAwIDpcbiAgICAgICAgICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UsIHBhZ2VyT2JqLnRvdGFsUGFnZXMgfHwgMF0pICsgJyAnO1xuICAgICAgICAgICAgdGhpcy5wYWdlQ291bnRNc2dFbGVtLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXQocGFnZXJPYmouZ2V0TG9jYWxpemVkTGFiZWwoJ3RvdGFsSXRlbXNJbmZvJyksIFtwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCB8fCAwXSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VOb01zZ0VsZW0ucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0aGlzLnBhZ2VOb01zZ0VsZW0udGV4dENvbnRlbnQgKyB0aGlzLnBhZ2VDb3VudE1zZ0VsZW0udGV4dENvbnRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLmhpZGVNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZU5vTXNnRWxlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZU5vTXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFnZUNvdW50TXNnRWxlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZUNvdW50TXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLnNob3dNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhZ2VOb01zZ0VsZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIHRoaXMucGFnZUNvdW50TXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJNZXNzYWdlLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAoc3RyLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgcmVneDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlZ3ggPSBuZXcgUmVnRXhwKCdcXFxceycgKyAoaSkgKyAnXFxcXH0nLCAnZ20nKTtcbiAgICAgICAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShyZWd4LCBhcmdzW2ldLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBhZ2VyTWVzc2FnZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUGFnZXJNZXNzYWdlID0gUGFnZXJNZXNzYWdlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9wYWdlci1tZXNzYWdlLmpzXG4vLyBtb2R1bGUgaWQgPSA1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfZHJvcGRvd25zXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBhZ2VyRHJvcERvd24gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQYWdlckRyb3BEb3duKHBhZ2VyTW9kdWxlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlID0gcGFnZXJNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgUGFnZXJEcm9wRG93bi5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncGFnZXJkcm9wZG93bic7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyRHJvcERvd24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRHJvcERvd25EaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlc2l6ZXMnIH0pO1xuICAgICAgICAgICAgdmFyIGRyb3BEb3duRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtcGFnZXJkcm9wZG93bicgfSk7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdFRleHREaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlcmNvbnN0YW50JyB9KTtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGF0dHJzOiB7IHR5cGU6ICd0ZXh0JywgdGFiaW5kZXg6ICcxJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5wYWdlckNvbnMgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtY29uc3RhbnQnLCBpbm5lckhUTUw6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ3BhZ2VyRHJvcERvd24nKSB9KTtcbiAgICAgICAgICAgIGRyb3BEb3duRGl2LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIGRlZmF1bHRUZXh0RGl2LmFwcGVuZENoaWxkKHRoaXMucGFnZXJDb25zKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJEcm9wRG93bkRpdi5hcHBlbmRDaGlsZChkcm9wRG93bkRpdik7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRHJvcERvd25EaXYuYXBwZW5kQ2hpbGQoZGVmYXVsdFRleHREaXYpO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMucGFnZXJEcm9wRG93bkRpdik7XG4gICAgICAgICAgICB2YXIgcGFnZVNpemVzTW9kdWxlID0gdGhpcy5wYWdlck1vZHVsZS5wYWdlU2l6ZXM7XG4gICAgICAgICAgICB2YXIgcGFnZVNpemVzQXJyYXkgPSAocGFnZVNpemVzTW9kdWxlLmxlbmd0aCA/IHBhZ2VTaXplc01vZHVsZSA6IFs1LCAxMCwgMTIsIDIwXSk7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdFZhbHVlID0gKHBhZ2VTaXplc0FycmF5KS5pbmRleE9mKHRoaXMucGFnZXJNb2R1bGUucGFnZVNpemUpID4gLTEgPyB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VTaXplIDogcGFnZVNpemVzQXJyYXlbMF07XG4gICAgICAgICAgICB0aGlzLmRyb3BEb3duTGlzdE9iamVjdCA9IG5ldyBlajJfZHJvcGRvd25zXzEuRHJvcERvd25MaXN0KHtcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiBwYWdlU2l6ZXNBcnJheSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZGVmYXVsdFZhbHVlLFxuICAgICAgICAgICAgICAgIGNoYW5nZTogdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZHJvcERvd25MaXN0T2JqZWN0LmFwcGVuZFRvKGlucHV0KTtcbiAgICAgICAgICAgIHBhZ2VyT2JqLnBhZ2VTaXplID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgcGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIHBhZ2VyT2JqLnRyaWdnZXIoJ2Ryb3BEb3duQ2hhbmdlZCcsIHsgcGFnZVNpemU6IGRlZmF1bHRWYWx1ZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJEcm9wRG93bi5wcm90b3R5cGUub25DaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5wYWdlU2l6ZSA9IHRoaXMuZHJvcERvd25MaXN0T2JqZWN0LnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5kYXRhQmluZCgpO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS50cmlnZ2VyKCdkcm9wRG93bkNoYW5nZWQnLCB7IHBhZ2VTaXplOiB0aGlzLmRyb3BEb3duTGlzdE9iamVjdC52YWx1ZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJEcm9wRG93bi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kcm9wRG93bkxpc3RPYmplY3QgJiYgIXRoaXMuZHJvcERvd25MaXN0T2JqZWN0LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wRG93bkxpc3RPYmplY3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMucGFnZXJEcm9wRG93bkRpdik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQYWdlckRyb3BEb3duO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5QYWdlckRyb3BEb3duID0gUGFnZXJEcm9wRG93bjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvcGFnZXItZHJvcGRvd24uanNcbi8vIG1vZHVsZSBpZCA9IDUyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81M19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiXG4vLyBtb2R1bGUgaWQgPSA1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEV4dGVybmFsTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEV4dGVybmFsTWVzc2FnZShwYWdlck1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZSA9IHBhZ2VyTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZXh0ZXJuYWxNZXNzYWdlJztcbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlcmV4dGVybmFsbXNnJywgYXR0cnM6IHsgJ2FyaWEtbGFiZWwnOiAnUGFnZXIgZXh0ZXJuYWwgbWVzc2FnZScgfSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VyTW9kdWxlLmV4dGVybmFsTWVzc2FnZSAmJiB0aGlzLnBhZ2VyTW9kdWxlLmV4dGVybmFsTWVzc2FnZS50b1N0cmluZygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5wYWdlck1vZHVsZS5leHRlcm5hbE1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVNZXNzYWdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuaGlkZU1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5zaG93TWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFeHRlcm5hbE1lc3NhZ2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkV4dGVybmFsTWVzc2FnZSA9IEV4dGVybmFsTWVzc2FnZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvZXh0ZXJuYWwtbWVzc2FnZS5qc1xuLy8gbW9kdWxlIGlkID0gNTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGVqMl9iYXNlXzMsIGVqMl9kYXRhXzEsIGV2ZW50cywgZW51bV8xLCByb3dfcmVuZGVyZXJfMSwgY2VsbF8xLCByb3dfMSwgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRmlsdGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRmlsdGVyKHBhcmVudCwgZmlsdGVyU2V0dGluZ3MsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnByZWRpY2F0ZSA9ICdhbmQnO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJPcGVyYXRvcnMgPSB7XG4gICAgICAgICAgICAgICAgY29udGFpbnM6ICdjb250YWlucycsIGVuZHNXaXRoOiAnZW5kc3dpdGgnLCBlcXVhbDogJ2VxdWFsJywgZ3JlYXRlclRoYW46ICdncmVhdGVydGhhbicsIGdyZWF0ZXJUaGFuT3JFcXVhbDogJ2dyZWF0ZXJ0aGFub3JlcXVhbCcsXG4gICAgICAgICAgICAgICAgbGVzc1RoYW46ICdsZXNzdGhhbicsIGxlc3NUaGFuT3JFcXVhbDogJ2xlc3N0aGFub3JlcXVhbCcsIG5vdEVxdWFsOiAnbm90ZXF1YWwnLCBzdGFydHNXaXRoOiAnc3RhcnRzd2l0aCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MgPSBmaWx0ZXJTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChnT2JqLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd1JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIGVudW1fMS5DZWxsVHlwZS5GaWx0ZXIpO1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxyZW5kZXIgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRmlsdGVyLCBuZXcgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMS5GaWx0ZXJDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVGb3JtYXR0ZXIgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3ZhbHVlRm9ybWF0dGVyJyk7XG4gICAgICAgICAgICAgICAgcm93UmVuZGVyZXIuZWxlbWVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtZmlsdGVyYmFyJyB9KTtcbiAgICAgICAgICAgICAgICByb3cgPSB0aGlzLmdlbmVyYXRlUm93KCk7XG4gICAgICAgICAgICAgICAgcm93LmRhdGEgPSB0aGlzLnZhbHVlcztcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSByb3dSZW5kZXJlci5yZW5kZXIocm93LCBnT2JqLmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJ3RoZWFkJykuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB2YXIgZGV0YWlsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbGhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWlsKSB7XG4gICAgICAgICAgICAgICAgICAgIGRldGFpbC5jbGFzc05hbWUgPSAnZS1maWx0ZXJiYXJjZWxsIGUtbWFzdGVyY2VsbCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdlbmVyYXRlUm93ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfMS5Sb3cob3B0aW9ucyk7XG4gICAgICAgICAgICByb3cuY2VsbHMgPSB0aGlzLmdlbmVyYXRlQ2VsbHMoKTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZ2VuZXJhdGVDZWxscyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjZWxscyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMCwgbGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgYyA8IGxlbjsgYysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5IZWFkZXJJbmRlbnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgfHwgdGhpcy5wYXJlbnQuY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgZW51bV8xLkNlbGxUeXBlLkRldGFpbEhlYWRlcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZHVtbXkgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbChkdW1teSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNlbGxzO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdlbmVyYXRlQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW4sIGNlbGxUeXBlKSB7XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogY29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAncm93SWQnOiAnJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogY29sdW1uLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6IGNlbGxUeXBlID8gY2VsbFR5cGUgOiBlbnVtXzEuQ2VsbFR5cGUuRmlsdGVyLFxuICAgICAgICAgICAgICAgICdhdHRyaWJ1dGVzJzogeyB0aXRsZTogdGhpcy5sMTBuLmdldENvbnN0YW50KCdGaWx0ZXJiYXJUaXRsZScpIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMuZmllbGROYW1lLCBvcGVyYXRvcjogdGhpcy5vcGVyYXRvciwgdmFsdWU6IHRoaXMudmFsdWUsIHByZWRpY2F0ZTogdGhpcy5wcmVkaWNhdGUsXG4gICAgICAgICAgICAgICAgbWF0Y2hDYXNlOiB0aGlzLm1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWU6IHt9LCBhY3R1YWxPcGVyYXRvcjoge31cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldEZpbHRlcmVkQ29sc0luZGV4QnlGaWVsZCh0aGlzLmZpZWxkTmFtZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1uc1tpbmRleF0gPSB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMucHVzaCh0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZXRGaWx0ZXJlZENvbHNJbmRleEJ5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSAhdGhpcy5pc1JlbW92ZSA/IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RmlsdGVyT2JqZWN0OiB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QsIGN1cnJlbnRGaWx0ZXJpbmdDb2x1bW46IHRoaXMuY29sdW1uLmZpZWxkLFxuICAgICAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucywgcmVxdWVzdFR5cGU6ICdmaWx0ZXJpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdmaWx0ZXJpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMi5leHRlbmQoZSwgYXJncykpO1xuICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLCAnbW91c2Vkb3duJywgdGhpcy51cGRhdGVTcGFuQ2xhc3MsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmVsZW1lbnQsICdmb2N1c2luJywgdGhpcy51cGRhdGVTcGFuQ2xhc3MsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKSwgJ2tleXVwJywgdGhpcy5rZXlVcEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVuV2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5lbGVtZW50LCAnZm9jdXNpbicsIHRoaXMudXBkYXRlU3BhbkNsYXNzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCksICdtb3VzZWRvd24nLCB0aGlzLnVwZGF0ZVNwYW5DbGFzcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLCAna2V5dXAnLCB0aGlzLmtleVVwSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggJiYgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyQnlDb2x1bW4oY29sLmZpZWxkLCBjb2wub3BlcmF0b3IsIGNvbC52YWx1ZSwgY29sLnByZWRpY2F0ZSwgY29sLm1hdGNoQ2FzZSwgY29sLmFjdHVhbEZpbHRlclZhbHVlLCBjb2wuYWN0dWFsT3BlcmF0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmZpbHRlckNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5VXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHRoaXMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5maWx0ZXJDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5VXBIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmZpbHRlckJ5Q29sdW1uID0gZnVuY3Rpb24gKGZpZWxkTmFtZSwgZmlsdGVyT3BlcmF0b3IsIGZpbHRlclZhbHVlLCBwcmVkaWNhdGUsIG1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWUsIGFjdHVhbE9wZXJhdG9yKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGZpbHRlckNlbGw7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChmaWVsZE5hbWUpO1xuICAgICAgICAgICAgZmlsdGVyQ2VsbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuY29sdW1uLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb2x1bW4uYWxsb3dGaWx0ZXJpbmcpICYmICF0aGlzLmNvbHVtbi5hbGxvd0ZpbHRlcmluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5maWx0ZXJCeUNvbHVtbiwgYXJnMTogZmllbGROYW1lLCBhcmcyOiBmaWx0ZXJPcGVyYXRvciwgYXJnMzogZmlsdGVyVmFsdWUsIGFyZzQ6IHByZWRpY2F0ZSxcbiAgICAgICAgICAgICAgICAgICAgYXJnNTogbWF0Y2hDYXNlLCBhcmc2OiBhY3R1YWxGaWx0ZXJWYWx1ZSwgYXJnNzogYWN0dWFsT3BlcmF0b3JcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gZmlsdGVyVmFsdWU7XG4gICAgICAgICAgICB0aGlzLm1hdGNoQ2FzZSA9IG1hdGNoQ2FzZSB8fCBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZmllbGROYW1lID0gZmllbGROYW1lO1xuICAgICAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGUgfHwgJ2FuZCc7XG4gICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gZmlsdGVyT3BlcmF0b3I7XG4gICAgICAgICAgICBmaWx0ZXJWYWx1ZSA9IGZpbHRlclZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmNvbHVtbi5maWVsZF0gPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChmaWVsZE5hbWUpLnNldEF0dHJpYnV0ZSgnYXJpYS1maWx0ZXJlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBpZiAoZmlsdGVyVmFsdWUubGVuZ3RoIDwgMSB8fCB0aGlzLmNoZWNrRm9yU2tpcElucHV0KHRoaXMuY29sdW1uLCBmaWx0ZXJWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyA9IGZpbHRlclZhbHVlLmxlbmd0aCA8IDEgPyAnJyA6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnSW52YWxpZEZpbHRlck1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaWx0ZXJDZWxsLnZhbHVlICE9PSBmaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGZpbHRlckNlbGwudmFsdWUgPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrQWxyZWFkeUNvbEZpbHRlcmVkKHRoaXMuY29sdW1uLmZpZWxkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGUucHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbHVtbnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RmlsdGVyT2JqZWN0OiB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QsIGN1cnJlbnRGaWx0ZXJpbmdDb2x1bW46IHRoaXMuY29sdW1uID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uLmZpZWxkIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMsIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93RmlsdGVyQmFyU3RhdHVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnByb3BlcnRpZXNbcHJvcF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wYXJlbnQuYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC51cGRhdGVFeHRlcm5hbE1lc3NhZ2UoJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNsZWFyRmlsdGVyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB1dGlsXzEuZ2V0QWN0dWFsUHJvcEZyb21Db2xsKHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudCh0aGlzLnBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5jbGVhckZpbHRlcmluZyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZChjb2xzW2ldLmZpZWxkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSAnJztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuY2hlY2tBbHJlYWR5Q29sRmlsdGVyZWQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfaSA8IGNvbHVtbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sdW1uc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLmZpZWxkID09PSBmaWVsZCAmJiBjb2wudmFsdWUgPT09IHRoaXMudmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgY29sLm9wZXJhdG9yID09PSB0aGlzLm9wZXJhdG9yICYmIGNvbC5wcmVkaWNhdGUgPT09IHRoaXMucHJlZGljYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkLCBpc0NsZWFyRmlsdGVyQmFyKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KHRoaXMucGFyZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGFyZzE6IGZpZWxkLCBhcmcyOiBpc0NsZWFyRmlsdGVyQmFyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNDbGVhckZpbHRlckJhciA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBjb2xzW2ldLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJykudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlc1tmaWVsZF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29scy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbHVtbkhlYWRlckJ5RmllbGQoZmllbGQpLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1maWx0ZXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2ZpbHRlcic7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUua2V5VXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5tYXRjaGVzKHRhcmdldCwgJy5lLWZpbHRlcmJhciBpbnB1dCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQodGFyZ2V0LmlkLnNwbGl0KCdfJylbMF0pO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNyb3NzSWNvbih0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGlmICgodGhpcy5maWx0ZXJTZXR0aW5ncy5tb2RlID09PSAnaW1tZWRpYXRlJyB8fCBlLmtleUNvZGUgPT09IDEzKSAmJiBlLmtleUNvZGUgIT09IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRhcmdldC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0ZpbHRlcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudXBkYXRlU3BhbkNsYXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2FuY2VsJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0VGV4dCA9IHRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIHRhcmdldFRleHQudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZS1oaWRlJyk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0VGV4dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdmb2N1c2luJyAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWZpbHRlcnRleHQnKSAmJiAhdGFyZ2V0LmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGFzdEZpbHRlckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0RmlsdGVyRWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgnZS1oaWRlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Jvc3NJY29uKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0RmlsdGVyRWxlbWVudCA9IHRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdmb2N1c2luJyAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1maWx0ZXJ0ZXh0JykgJiYgdGhpcy5sYXN0RmlsdGVyRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEZpbHRlckVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZUNyb3NzSWNvbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QucmVtb3ZlKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS51cGRhdGVGaWx0ZXJNc2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZpbHRlclNldHRpbmdzLnNob3dGaWx0ZXJCYXJTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1ucy5sZW5ndGggPiAwICYmIHRoaXMuZmlsdGVyU3RhdHVzTXNnICE9PSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyA9ICcnO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBjb2x1bW5zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uc1tpbmRleF0uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnICs9ICcgJiYgJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyArPSBjb2x1bW4uaGVhZGVyVGV4dCArICc6ICcgKyB0aGlzLnZhbHVlc1tjb2x1bW4uZmllbGRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgZ09iai51cGRhdGVFeHRlcm5hbE1lc3NhZ2UodGhpcy5maWx0ZXJTdGF0dXNNc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5jaGVja0ZvclNraXBJbnB1dCA9IGZ1bmN0aW9uIChjb2x1bW4sIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgaXNTa2lwO1xuICAgICAgICAgICAgdmFyIHNraXBJbnB1dDtcbiAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBza2lwSW5wdXQgPSBbJz0nLCAnICcsICchJ107XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9kYXRhXzEuRGF0YVV0aWwub3BlcmF0b3JTeW1ib2xzW3ZhbHVlXSB8fCBza2lwSW5wdXQuaW5kZXhPZih2YWx1ZSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpc1NraXAgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi50eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHNraXBJbnB1dCA9IFsnPicsICc8JywgJz0nLCAnISddO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdmFsdWVfMSA9IHZhbHVlOyBfaSA8IHZhbHVlXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSB2YWx1ZV8xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNraXBJbnB1dC5pbmRleE9mKHZhbCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNTa2lwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpc1NraXA7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUucHJvY2Vzc0ZpbHRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVyKGUpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnN0YXJ0VGltZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBfdGhpcy5vblRpbWVyVGljaygpOyB9LCBlLmtleUNvZGUgPT09IDEzID8gMCA6IHRoaXMuZmlsdGVyU2V0dGluZ3MuaW1tZWRpYXRlTW9kZURlbGF5KTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5zdG9wVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5vblRpbWVyVGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5jb2x1bW4uZmllbGQgKyAnX2ZpbHRlckJhcmNlbGwnKTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJWYWx1ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmlsdGVyRWxlbWVudC52YWx1ZSkpO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZCh0aGlzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUZpbHRlclZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJCeUNvbHVtbih0aGlzLmNvbHVtbi5maWVsZCwgdGhpcy5vcGVyYXRvciwgdGhpcy52YWx1ZSwgdGhpcy5wcmVkaWNhdGUsIHRoaXMubWF0Y2hDYXNlKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuY29sdW1uLmZpZWxkXSA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgZmlsdGVyRWxlbWVudC52YWx1ZSA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS52YWxpZGF0ZUZpbHRlclZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNraXBJbnB1dDtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHRoaXMubWF0Y2hDYXNlID0gdHJ1ZTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jb2x1bW4udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbDtcbiAgICAgICAgICAgICAgICAgICAgc2tpcElucHV0ID0gWyc+JywgJzwnLCAnPScsICchJ107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lwSW5wdXQuaW5kZXhPZih2YWx1ZVtpXSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9wZXJhdG9yKHZhbHVlLnN1YnN0cmluZyhpbmRleCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSAnJyAmJiB2YWx1ZS5sZW5ndGggPj0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWVGb3JtYXR0ZXIuZnJvbVZpZXcodGhpcy52YWx1ZSwgdGhpcy5jb2x1bW4uZ2V0UGFyc2VyKCksIHRoaXMuY29sdW1uLnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05hTih0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZXRpbWUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3BlcmF0b3IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlRm9ybWF0dGVyLmZyb21WaWV3KHRoaXMudmFsdWUsIHRoaXMuY29sdW1uLmdldFBhcnNlcigpLCB0aGlzLmNvbHVtbi50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaENhc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmNoYXJBdCgwKSA9PT0gJyonKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5zdGFydHNXaXRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlLmNoYXJBdCh2YWx1ZS5sZW5ndGggLSAxKSA9PT0gJyUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuc3RhcnRzV2l0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5jaGFyQXQoMCkgPT09ICclJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZW5kc1dpdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuc3RhcnRzV2l0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJyB8fCB2YWx1ZSA9PT0gJzEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAnZmFsc2UnIHx8IHZhbHVlID09PSAnMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdJbnZhbGlkRmlsdGVyTWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLmVxdWFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdldE9wZXJhdG9yID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgc2luZ2xlT3AgPSB2YWx1ZS5jaGFyQXQoMCk7XG4gICAgICAgICAgICB2YXIgbXVsdGlwbGVPcCA9IHZhbHVlLnNsaWNlKDAsIDIpO1xuICAgICAgICAgICAgdmFyIG9wZXJhdG9ycyA9IGVqMl9iYXNlXzIuZXh0ZW5kKHsgJz0nOiB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbCwgJyEnOiB0aGlzLmZpbHRlck9wZXJhdG9ycy5ub3RFcXVhbCB9LCBlajJfZGF0YV8xLkRhdGFVdGlsLm9wZXJhdG9yU3ltYm9scyk7XG4gICAgICAgICAgICBpZiAob3BlcmF0b3JzLmhhc093blByb3BlcnR5KHNpbmdsZU9wKSB8fCBvcGVyYXRvcnMuaGFzT3duUHJvcGVydHkobXVsdGlwbGVPcCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3JzW3NpbmdsZU9wXTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcGVyYXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3JzW211bHRpcGxlT3BdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wZXJhdG9yID09PSB0aGlzLmZpbHRlck9wZXJhdG9ycy5sZXNzVGhhbiB8fCB0aGlzLm9wZXJhdG9yID09PSB0aGlzLmZpbHRlck9wZXJhdG9ycy5ncmVhdGVyVGhhbikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlLmNoYXJBdCgwKSA9PT0gJz0nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLm9wZXJhdG9yICsgJ29yZXF1YWwnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyQ2VsbHMgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1maWx0ZXJiYXJjZWxsJykpO1xuICAgICAgICAgICAgZmlsdGVyQ2VsbHMuc3BsaWNlKGUudG9JbmRleCwgMCwgZmlsdGVyQ2VsbHMuc3BsaWNlKGUuZnJvbUluZGV4LCAxKVswXSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGZpbHRlckNlbGxzXzEgPSBmaWx0ZXJDZWxsczsgX2kgPCBmaWx0ZXJDZWxsc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gZmlsdGVyQ2VsbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGNlbGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRmlsdGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5GaWx0ZXIgPSBGaWx0ZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9maWx0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDU1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRmlsdGVyQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEZpbHRlckNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRmlsdGVyQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdUSCcsIHsgY2xhc3NOYW1lOiAnZS1maWx0ZXJiYXJjZWxsJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBGaWx0ZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmdldEd1aSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBpbm5lckRJViA9IHRoaXMuZ2V0R3VpKCk7XG4gICAgICAgICAgICB2YXIgaW5wdXQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2VsbC5jb2x1bW47XG4gICAgICAgICAgICBpZiAoKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmFsbG93RmlsdGVyaW5nKSB8fCBjb2x1bW4uYWxsb3dGaWx0ZXJpbmcpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZmx0cnRlbXAnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2UtZmx0cnRlbXBkaXYnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpbHRlckJhclRlbXBsYXRlLmNyZWF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcsIGNsYXNzTmFtZTogJ2UtZmlsdGVyVWlfaW5wdXQgZS1maWx0ZXJ0ZXh0IGUtZmx0clRlbXAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgdHlwZTogJ3NlYXJjaCcsIHRpdGxlOiBjb2x1bW4uaGVhZGVyVGV4dCB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHsgY29sdW1uOiBjb2x1bW4gfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUuY3JlYXRlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gdGVtcChhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBkaXYuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAnZS1maWx0ZXJVaV9pbnB1dCBlLWZpbHRlcnRleHQgZS1mbHRyVGVtcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogY29sdW1uLmhlYWRlclRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogY29sdW1uLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2UtZmlsdGVyZGl2IGUtZmx0cmlucHV0ZGl2J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlucHV0ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcsIGNsYXNzTmFtZTogJ2UtZmlsdGVydGV4dCcsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VhcmNoJywgdGl0bGU6IGNvbHVtbi5oZWFkZXJUZXh0ICsgY2VsbC5hdHRyaWJ1dGVzLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGFbY2VsbC5jb2x1bW4uZmllbGRdID8gZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0gOiAnJywgcm9sZTogJ3NlYXJjaCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2FuY2VsIGUtaGlkZSBlLWljb25zIGUtaWNvbi1oaWRlJyxcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgJ2FyaWEtbGFiZWwnOiAnY2xlYXIgZmlsdGVyIGNlbGwnLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi5hbGxvd0ZpbHRlcmluZyA9PT0gZmFsc2UgfHwgY29sdW1uLmZpZWxkID09PSAnJyB8fCBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWVsZCkpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdlLWRpc2FibGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY29sdW1uLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5hbGxvd0ZpbHRlcmluZykgfHwgY29sdW1uLmFsbG93RmlsdGVyaW5nKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlUmVhZCA9IGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZS5yZWFkO1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZVdyaXRlID0gY29sdW1uLmZpbHRlckJhclRlbXBsYXRlLndyaXRlO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0geyBlbGVtZW50OiBpbnB1dCwgY29sdW1uOiBjb2x1bW4gfTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXBsYXRlUmVhZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWFkID0gYXJncy5jb2x1bW4gPSBlajJfYmFzZV8xLmdldFZhbHVlKHRlbXBsYXRlUmVhZCwgd2luZG93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZVdyaXRlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVdyaXRlID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wbGF0ZVdyaXRlLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVdyaXRlLmNhbGwodGhpcywgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFwcGVuZEh0bWwobm9kZSwgaW5uZXJESVYpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kSHRtbCA9IGZ1bmN0aW9uIChub2RlLCBpbm5lckh0bWwpIHtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaW5uZXJIdG1sKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRmlsdGVyQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuRmlsdGVyQ2VsbFJlbmRlcmVyID0gRmlsdGVyQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXJcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgd2lkdGhfY29udHJvbGxlcl8xLCBldmVudHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdCA9IHtcbiAgICAgICAgcm9vdDogJ2UtcmhhbmRsZXInLFxuICAgICAgICBzdXBwcmVzczogJ2UtcnN1cHByZXNzJyxcbiAgICAgICAgaWNvbjogJ2Utcmljb24nLFxuICAgICAgICBoZWxwZXI6ICdlLXJoZWxwZXInLFxuICAgICAgICBoZWFkZXI6ICd0aC5lLWhlYWRlcmNlbGwnLFxuICAgICAgICBjdXJzb3I6ICdlLXJjdXJzb3InLFxuICAgICAgICBsaW5lczogJ2UtcmxpbmVzJ1xuICAgIH07XG4gICAgdmFyIFJlc2l6ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJlc2l6ZShwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMudGFwcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzRGJsQ2xrID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2UgPSBuZXcgd2lkdGhfY29udHJvbGxlcl8xLkNvbHVtbldpZHRoU2VydmljZShwYXJlbnQpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5hdXRvRml0Q29sdW1ucyA9IGZ1bmN0aW9uIChmTmFtZSkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbk5hbWUgPSAoZk5hbWUgPT09IHVuZGVmaW5lZCB8fCBmTmFtZSA9PT0gbnVsbCB8fCBmTmFtZS5sZW5ndGggPD0gMCkgP1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguZmllbGQ7IH0pIDogKHR5cGVvZiBmTmFtZSA9PT0gJ3N0cmluZycpID8gW2ZOYW1lXSA6IGZOYW1lO1xuICAgICAgICAgICAgdGhpcy5maW5kQ29sdW1uKGNvbHVtbk5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlc2l6ZUNvbHVtbiA9IGZ1bmN0aW9uIChmTmFtZSwgaW5kZXgsIGlkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRXaWR0aCA9IDA7XG4gICAgICAgICAgICB2YXIgaGVhZGVyVGFibGUgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRUYWJsZSA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckRpdlRhZyA9ICdlLWdyaWRoZWFkZXInO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnREaXZUYWcgPSAnZS1ncmlkY29udGVudCc7XG4gICAgICAgICAgICB2YXIgaW5kZW50V2lkdGhDbG9uZSA9IGdPYmouZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0cicpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdyb3VwdG9wbGVmdGNlbGwnKTtcbiAgICAgICAgICAgIHZhciBpbmRlbnRXaWR0aCA9IDA7XG4gICAgICAgICAgICBpZiAoaW5kZW50V2lkdGhDbG9uZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRlbnRXaWR0aENsb25lLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGVudFdpZHRoICs9IGluZGVudFdpZHRoQ2xvbmVbaV0ub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHVpZCA9IGlkID8gaWQgOiB0aGlzLnBhcmVudC5nZXRVaWRCeUNvbHVtbkZpZWxkKGZOYW1lKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5JbmRleCA9IHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleCh1aWQpO1xuICAgICAgICAgICAgdmFyIGhlYWRlclRleHRDbG9uZSA9IGhlYWRlclRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJylbY29sdW1uSW5kZXhdLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJUZXh0ID0gW2hlYWRlclRleHRDbG9uZV07XG4gICAgICAgICAgICB2YXIgY29udGVudFRleHRDbG9uZSA9IGNvbnRlbnRUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKFwidGQ6bnRoLWNoaWxkKFwiICsgKGNvbHVtbkluZGV4ICsgMSkgKyBcIilcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudFRleHQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudFRleHRDbG9uZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUZXh0W2ldID0gY29udGVudFRleHRDbG9uZVtpXS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgd0hlYWRlciA9IHRoaXMuY3JlYXRlVGFibGUoaGVhZGVyVGFibGUsIGhlYWRlclRleHQsIGhlYWRlckRpdlRhZyk7XG4gICAgICAgICAgICB2YXIgd0NvbnRlbnQgPSB0aGlzLmNyZWF0ZVRhYmxlKGNvbnRlbnRUYWJsZSwgY29udGVudFRleHQsIGNvbnRlbnREaXZUYWcpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbmJ5aW5kZXggPSBnT2JqLmdldENvbHVtbnMoKVtpbmRleF07XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gKHdIZWFkZXIgPiB3Q29udGVudCkgPyBjb2x1bW5ieWluZGV4LndpZHRoID0gZWoyX2Jhc2VfMS5mb3JtYXRVbml0KHdIZWFkZXIpIDogY29sdW1uYnlpbmRleC53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh3Q29udGVudCk7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZS5zZXRDb2x1bW5XaWR0aChnT2JqLmdldENvbHVtbnMoKVtpbmRleF0pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZ09iai5nZXRDb2x1bW5zKCkuc29tZShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC53aWR0aCA9PT0gbnVsbCB8fCB4LndpZHRoID09PSB1bmRlZmluZWQgfHwgeC53aWR0aC5sZW5ndGggPD0gMDsgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRDb2x1bW5zKCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRXaWR0aCA9IHRXaWR0aCArIHBhcnNlSW50KGVsZW1lbnQud2lkdGgsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0YWJsZVdpZHRoXzEgPSB0V2lkdGggKyBpbmRlbnRXaWR0aDtcbiAgICAgICAgICAgICAgICBpZiAodFdpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJUYWJsZS5zdHlsZS53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh0YWJsZVdpZHRoXzEpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50VGFibGUuc3R5bGUud2lkdGggPSBlajJfYmFzZV8xLmZvcm1hdFVuaXQodGFibGVXaWR0aF8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGFibGVXaWR0aCA9IGhlYWRlclRhYmxlLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnR3aWR0aCA9IChnT2JqLmdldENvbnRlbnQoKS5zY3JvbGxXaWR0aCk7XG4gICAgICAgICAgICBpZiAoY29udGVudHdpZHRoID4gdGFibGVXaWR0aCkge1xuICAgICAgICAgICAgICAgIGhlYWRlclRhYmxlLmNsYXNzTGlzdC5hZGQoJ2UtdGFibGVib3JkZXInKTtcbiAgICAgICAgICAgICAgICBjb250ZW50VGFibGUuY2xhc3NMaXN0LmFkZCgnZS10YWJsZWJvcmRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyVGFibGUuY2xhc3NMaXN0LnJlbW92ZSgnZS10YWJsZWJvcmRlcicpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUYWJsZS5jbGFzc0xpc3QucmVtb3ZlKCdlLXRhYmxlYm9yZGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdyZXNpemUnO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmZpbmRDb2x1bW4gPSBmdW5jdGlvbiAoZk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBmTmFtZS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbkluZGV4ID0gX3RoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlGaWVsZChmaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpW2NvbHVtbkluZGV4XS52aXNpYmxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlc2l6ZUNvbHVtbihmaWVsZE5hbWUsIGNvbHVtbkluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5jcmVhdGVUYWJsZSA9IGZ1bmN0aW9uICh0YWJsZSwgdGV4dCwgdGFnKSB7XG4gICAgICAgICAgICB2YXIgbXlUYWJsZURpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBteVRhYmxlRGl2LmNsYXNzTmFtZSA9IHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NOYW1lO1xuICAgICAgICAgICAgbXlUYWJsZURpdi5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IGlubGluZS1ibG9jazt2aXNpYmlsaXR5OmhpZGRlbjtwb3NpdGlvbjphYnNvbHV0ZSc7XG4gICAgICAgICAgICB2YXIgbXlTdWJEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbXlTdWJEaXYuY2xhc3NOYW1lID0gdGFnO1xuICAgICAgICAgICAgdmFyIG15VGFibGUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgICAgICAgICBteVRhYmxlLmNsYXNzTmFtZSA9IHRhYmxlLmNsYXNzTmFtZTtcbiAgICAgICAgICAgIG15VGFibGUuc3R5bGUuY3NzVGV4dCA9ICd0YWJsZS1sYXlvdXQ6IGF1dG87d2lkdGg6IGF1dG8nO1xuICAgICAgICAgICAgdmFyIG15VHIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICB0ZXh0LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHIgPSBteVRyLmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgICAgIHRyLmNsYXNzTmFtZSA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RyJykuY2xhc3NOYW1lO1xuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIG15VGFibGUuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBteVN1YkRpdi5hcHBlbmRDaGlsZChteVRhYmxlKTtcbiAgICAgICAgICAgIG15VGFibGVEaXYuYXBwZW5kQ2hpbGQobXlTdWJEaXYpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChteVRhYmxlRGl2KTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRXaWR0aFZhbHVlID0gbXlUYWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobXlUYWJsZURpdik7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG9mZnNldFdpZHRoVmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlbmRlcik7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBpZiAoISh0aGlzLnBhcmVudC5ncmlkTGluZXMgPT09ICd2ZXJ0aWNhbCcgfHwgdGhpcy5wYXJlbnQuZ3JpZExpbmVzID09PSAnYm90aCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuYWRkKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmxpbmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0SGFuZGxlckhlaWdodCgpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5nZXRSZXNpemVIYW5kbGVycygpLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgIGVsZS5zdHlsZS5oZWlnaHQgPSBlbGUucGFyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChlbGUsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIF90aGlzLnJlc2l6ZVN0YXJ0LCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGVsZSwgZXZlbnRzLmRibGNsaWNrLCBfdGhpcy5jYWxsQXV0b0ZpdCwgX3RoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVzaXplSGFuZGxlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZWxlLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCBfdGhpcy5yZXNpemVTdGFydCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZSwgZXZlbnRzLmRibGNsaWNrLCBfdGhpcy5jYWxsQXV0b0ZpdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRSZXNpemVIYW5kbGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLicgKyBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5yb290KSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuc2V0SGFuZGxlckhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LnN1cHByZXNzKSkuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgZWxlLnN0eWxlLmhlaWdodCA9IGVsZS5wYXJlbnRFbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5jYWxsQXV0b0ZpdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5nZXRUYXJnZXRDb2x1bW4oZSk7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUNvbHVtbihjb2wuZmllbGQsIHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleChjb2wudWlkKSwgY29sLnVpZCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVzaXplU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhlbHBlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kSGVscGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSB0aGlzLmdldFRhcmdldENvbHVtbihlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VYID0gdGhpcy5nZXRQb2ludFgoZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbk1vdmUgPSBwYXJzZUludCh0aGlzLmNvbHVtbi53aWR0aC50b1N0cmluZygpLCAxMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC0gKHRoaXMuY29sdW1uLm1pbldpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWluV2lkdGgudG9TdHJpbmcoKSwgMTApIDogMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbk1vdmUgPSAodGhpcy5jb2x1bW4ubWluV2lkdGggPyBwYXJzZUludCh0aGlzLmNvbHVtbi5taW5XaWR0aC50b1N0cmluZygpLCAxMCkgOiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLSBwYXJzZUludCh0aGlzLmNvbHVtbi53aWR0aC50b1N0cmluZygpLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubWluTW92ZSArPSB0aGlzLnBhZ2VYO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSAmJiAhdGhpcy5oZWxwZXIuY2xhc3NMaXN0LmNvbnRhaW5zKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0Lmljb24pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwZXIuY2xhc3NMaXN0LmFkZChleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5pY29uKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVtb3ZlSGVscGVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5oZWxwZXIsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVzaXplU3RhcnQsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGU6IGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLnJlc2l6ZVN0YXJ0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZXNpemVBY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLnJlc2l6ZUVuZCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmVsZW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5yZXNpemluZywgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJzb3IoJ2FkZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmNhbmNlbFJlc2l6ZUFjdGlvbiA9IGZ1bmN0aW9uIChyZW1vdmVFdmVudHMpIHtcbiAgICAgICAgICAgIGlmIChyZW1vdmVFdmVudHMpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZWxlbWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLnJlc2l6aW5nKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLnJlc2l6ZUVuZCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJzb3IoJ3JlbW92ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZW1vdmVIZWxwZXIpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmhlbHBlciwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZXNpemVTdGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8xLmRldGFjaCh0aGlzLmhlbHBlcik7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoKSB7XG4gICAgICAgICAgICBpZiAobWluV2lkdGggJiYgd2lkdGggPCBtaW5XaWR0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtaW5XaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChtYXhXaWR0aCAmJiB3aWR0aCA+IG1heFdpZHRoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXhXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB3aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZXNpemluZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcGFnZVggPSB0aGlzLmdldFBvaW50WChlKTtcbiAgICAgICAgICAgIHZhciBtb3VzZW1vdmUgPSB0aGlzLnBhcmVudC5lbmFibGVSdGwgPyAtKHBhZ2VYIC0gdGhpcy5wYWdlWCkgOiAocGFnZVggLSB0aGlzLnBhZ2VYKTtcbiAgICAgICAgICAgIHZhciBjb2xEYXRhID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBwYXJzZUludCh0aGlzLndpZHRoU2VydmljZS5nZXRXaWR0aCh0aGlzLmNvbHVtbikudG9TdHJpbmcoKSwgMTApICsgbW91c2Vtb3ZlLFxuICAgICAgICAgICAgICAgIG1pbldpZHRoOiB0aGlzLmNvbHVtbi5taW5XaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgbWF4V2lkdGg6IHRoaXMuY29sdW1uLm1heFdpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWF4V2lkdGgudG9TdHJpbmcoKSwgMTApIDogbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoY29sRGF0YS53aWR0aCwgY29sRGF0YS5taW5XaWR0aCwgY29sRGF0YS5tYXhXaWR0aCk7XG4gICAgICAgICAgICBpZiAoKCF0aGlzLnBhcmVudC5lbmFibGVSdGwgJiYgdGhpcy5taW5Nb3ZlID49IHBhZ2VYKSB8fCAodGhpcy5wYXJlbnQuZW5hYmxlUnRsICYmIHRoaXMubWluTW92ZSA8PSBwYWdlWCkpIHtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IHRoaXMuY29sdW1uLm1pbldpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWluV2lkdGgudG9TdHJpbmcoKSwgMTApIDogMDtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VYID0gcGFnZVggPSB0aGlzLm1pbk1vdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2lkdGggIT09IHBhcnNlSW50KHRoaXMuY29sdW1uLndpZHRoLnRvU3RyaW5nKCksIDEwKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZVggPSBwYWdlWDtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbi53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh3aWR0aCk7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGU6IGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLm9uUmVzaXplLCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZXNpemVBY3Rpb24odHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2xHcm91cCh0aGlzLmNvbHVtbik7XG4gICAgICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2Uuc2V0Q29sdW1uV2lkdGgodGhpcy5jb2x1bW4sIG51bGwsICdyZXNpemUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUhlbHBlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0RibENsayA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlc2l6ZUVuZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGVscGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMucGFyZW50LmVsZW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5yZXNpemluZyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLnJlc2l6ZUVuZCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnNvcigncmVtb3ZlJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmRldGFjaCh0aGlzLmhlbHBlcik7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICBlOiBlLFxuICAgICAgICAgICAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5yZXNpemVTdG9wLCBhcmdzKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgdGhpcy5kb3VibGVUYXBFdmVudChlKTtcbiAgICAgICAgICAgIHRoaXMuaXNEYmxDbGsgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldFBvaW50WCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUucGFnZVg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUudXBkYXRlQ29sR3JvdXAgPSBmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC51aWQgPT09IGNvbHVtbi51aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sLndpZHRoID0gY29sdW1uLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0VGFyZ2V0Q29sdW1uID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjZWxsID0gZWoyX2Jhc2VfMS5jbG9zZXN0KGUudGFyZ2V0LCBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5oZWFkZXIpO1xuICAgICAgICAgICAgdmFyIHVpZCA9IGNlbGwucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodWlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS51cGRhdGVDdXJzb3IgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJykpO1xuICAgICAgICAgICAgaGVhZGVyUm93cy5wdXNoKHRoaXMucGFyZW50LmVsZW1lbnQpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBoZWFkZXJSb3dzXzEgPSBoZWFkZXJSb3dzOyBfaSA8IGhlYWRlclJvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gaGVhZGVyUm93c18xW19pXTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NMaXN0W2FjdGlvbl0oZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuY3Vyc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wYWdlWCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmFwcGVuZEhlbHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5oZWxwZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmhlbHBlcik7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLm9mZnNldEhlaWdodCAtIHRoaXMuZ2V0U2Nyb2xsQmFyV2lkdGgoKTtcbiAgICAgICAgICAgIHZhciByZWN0ID0gZWoyX2Jhc2VfMS5jbG9zZXN0KHRoaXMuZWxlbWVudCwgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaGVhZGVyKTtcbiAgICAgICAgICAgIHZhciB0ciA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSB0ci5pbmRleE9mKHJlY3QucGFyZW50RWxlbWVudCk7IGkgPCB0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGhlaWdodCArPSB0cltpXS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcG9zID0gdGhpcy5jYWxjUG9zKHJlY3QpO1xuICAgICAgICAgICAgcG9zLmxlZnQgKz0gKHRoaXMucGFyZW50LmVuYWJsZVJ0bCA/IDAgLSAxIDogcmVjdC5vZmZzZXRXaWR0aCAtIDIpO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIuc3R5bGUuY3NzVGV4dCA9ICdoZWlnaHQ6ICcgKyBoZWlnaHQgKyAncHg7IHRvcDogJyArIHBvcy50b3AgKyAncHg7IGxlZnQ6JyArIE1hdGguZmxvb3IocG9zLmxlZnQpICsgJ3B4Oyc7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICByZXR1cm4gZWxlLnNjcm9sbFdpZHRoID4gZWxlLmNsaWVudFdpZHRoID8gdXRpbF8xLmdldFNjcm9sbEJhcldpZHRoKCkgOiAwO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlbW92ZUhlbHBlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2xzID0gZS50YXJnZXQuY2xhc3NMaXN0O1xuICAgICAgICAgICAgaWYgKCEoY2xzLmNvbnRhaW5zKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LnJvb3QpIHx8IGNscy5jb250YWlucyhleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5pY29uKSkgJiYgdGhpcy5oZWxwZXIpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVtb3ZlSGVscGVyKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5oZWxwZXIsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMucmVzaXplU3RhcnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuZGV0YWNoKHRoaXMuaGVscGVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS51cGRhdGVIZWxwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IGVqMl9iYXNlXzEuY2xvc2VzdCh0aGlzLmVsZW1lbnQsIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmhlYWRlcik7XG4gICAgICAgICAgICB0aGlzLmhlbHBlci5zdHlsZS5sZWZ0ID0gTWF0aC5mbG9vcih0aGlzLmNhbGNQb3MocmVjdCkubGVmdCArICh0aGlzLnBhcmVudC5lbmFibGVSdGwgPyAwIC0gMSA6IHJlY3Qub2Zmc2V0V2lkdGggLSAyKSkgKyAncHgnO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmNhbGNQb3MgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgdmFyIHBhcmVudE9mZnNldCA9IHtcbiAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGRvYyA9IGVsZW0ub3duZXJEb2N1bWVudDtcbiAgICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnQgPSBlbGVtLm9mZnNldFBhcmVudCB8fCBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICAgICAgd2hpbGUgKG9mZnNldFBhcmVudCAmJlxuICAgICAgICAgICAgICAgIChvZmZzZXRQYXJlbnQgPT09IGRvYy5ib2R5IHx8IG9mZnNldFBhcmVudCA9PT0gZG9jLmRvY3VtZW50RWxlbWVudCkgJiZcbiAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQuc3R5bGUucG9zaXRpb24gPT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50LnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2Zmc2V0UGFyZW50ICYmIG9mZnNldFBhcmVudCAhPT0gZWxlbSAmJiBvZmZzZXRQYXJlbnQubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRPZmZzZXQgPSBvZmZzZXRQYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvcDogb2Zmc2V0LnRvcCAtIHBhcmVudE9mZnNldC50b3AsXG4gICAgICAgICAgICAgICAgbGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5kb3VibGVUYXBFdmVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRVc2VyQWdlbnQoKSAmJiB0aGlzLmlzRGJsQ2xrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRhcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcHBlZCA9IHNldFRpbWVvdXQodGhpcy50aW1lb3V0SGFuZGxlcigpLCAzMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGFwcGVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsQXV0b0ZpdChlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRVc2VyQWdlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdXNlckFnZW50ID0gZWoyX2Jhc2VfMS5Ccm93c2VyLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgcmV0dXJuIC9pcGhvbmV8aXBvZHxpcGFkLy50ZXN0KHVzZXJBZ2VudCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUudGltZW91dEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRhcHBlZCA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSZXNpemU7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJlc2l6ZSA9IFJlc2l6ZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Jlc2l6ZS5qc1xuLy8gbW9kdWxlIGlkID0gNTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUmVvcmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJlb3JkZXIocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJEcm9wLCB0aGlzLmhlYWRlckRyb3AsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5yZW9yZGVyQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJhZywgdGhpcy5kcmFnLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMuZHJhZ1N0YXJ0LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5EcmFnU3RvcCwgdGhpcy5kcmFnU3RvcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyRHJvcCwgdGhpcy5oZWFkZXJEcm9wLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMuY3JlYXRlUmVvcmRlckVsZW1lbnQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmNoa0Ryb3BQb3NpdGlvbiA9IGZ1bmN0aW9uIChzcmNFbGVtLCBkZXN0RWxlbSkge1xuICAgICAgICAgICAgcmV0dXJuIHNyY0VsZW0ucGFyZW50RWxlbWVudC5pc0VxdWFsTm9kZShkZXN0RWxlbS5wYXJlbnRFbGVtZW50KSAmJiB0aGlzLnRhcmdldFBhcmVudENvbnRhaW5lckluZGV4KHNyY0VsZW0sIGRlc3RFbGVtKSA+IC0xO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5jaGtEcm9wQWxsQ29scyA9IGZ1bmN0aW9uIChzcmNFbGVtLCBkZXN0RWxlbSkge1xuICAgICAgICAgICAgdmFyIGlzRm91bmQ7XG4gICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWhlYWRlcmNlbGwnKSk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyO1xuICAgICAgICAgICAgd2hpbGUgKCFpc0ZvdW5kICYmIGhlYWRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGhlYWRlciA9IGhlYWRlcnMucG9wKCk7XG4gICAgICAgICAgICAgICAgaXNGb3VuZCA9IHNyY0VsZW0gIT09IGhlYWRlciAmJiB0aGlzLnRhcmdldFBhcmVudENvbnRhaW5lckluZGV4KHNyY0VsZW0sIGRlc3RFbGVtKSA+IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlzRm91bmQ7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmZpbmRDb2xQYXJlbnQgPSBmdW5jdGlvbiAoY29sLCBjb2xzLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbCA9PT0gY29sc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29sc1tpXS5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbnQgPSBwYXJlbnQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQucHVzaChjb2xzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZpbmRDb2xQYXJlbnQoY29sLCBjb2xzW2ldLmNvbHVtbnMsIHBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5zcGxpY2UoY250LCBwYXJlbnQubGVuZ3RoIC0gY250KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5nZXRDb2x1bW5zTW9kZWwgPSBmdW5jdGlvbiAoY29scykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbk1vZGVsID0gW107XG4gICAgICAgICAgICB2YXIgc3ViQ29scyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5Nb2RlbC5wdXNoKGNvbHNbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViQ29scyA9IHN1YkNvbHMuY29uY2F0KGNvbHNbaV0uY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN1YkNvbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uTW9kZWwgPSBjb2x1bW5Nb2RlbC5jb25jYXQodGhpcy5nZXRDb2x1bW5zTW9kZWwoc3ViQ29scykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbk1vZGVsO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5oZWFkZXJEcm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuY2xvc2VzdChlLnRhcmdldCwgJ3RoJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGVzdEVsZW0gPSBlajJfYmFzZV8yLmNsb3Nlc3QoZS50YXJnZXQsICcuZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICBpZiAoZGVzdEVsZW0gJiYgISghdGhpcy5jaGtEcm9wUG9zaXRpb24odGhpcy5lbGVtZW50LCBkZXN0RWxlbSkgfHwgIXRoaXMuY2hrRHJvcEFsbENvbHModGhpcy5lbGVtZW50LCBkZXN0RWxlbSkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1oZWFkZXJjZWxsJykpO1xuICAgICAgICAgICAgICAgIHZhciBvbGRJZHggPSB1dGlsXzEuZ2V0RWxlbWVudEluZGV4KHRoaXMuZWxlbWVudCwgaGVhZGVycyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnNNb2RlbCh0aGlzLnBhcmVudC5jb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc1tvbGRJZHhdO1xuICAgICAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IHRoaXMudGFyZ2V0UGFyZW50Q29udGFpbmVySW5kZXgodGhpcy5lbGVtZW50LCBkZXN0RWxlbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlQ29sdW1ucyhuZXdJbmRleCwgY29sdW1uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuaXNBY3Rpb25QcmV2ZW50ID0gZnVuY3Rpb24gKGdPYmopIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5tb3ZlQ29sdW1ucyA9IGZ1bmN0aW9uIChkZXN0SW5kZXgsIGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMubW92ZUNvbHVtbnMsIGFyZzE6IGRlc3RJbmRleCwgYXJnMjogY29sdW1uIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldENvbFBhcmVudChjb2x1bW4sIHRoaXMucGFyZW50LmNvbHVtbnMpO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBwYXJlbnQgPyBwYXJlbnQuY29sdW1ucyA6IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgc3JjSWR4ID0gdXRpbF8xLmluQXJyYXkoY29sdW1uLCBjb2xzKTtcbiAgICAgICAgICAgIGlmICghZ09iai5hbGxvd1Jlb3JkZXJpbmcgfHwgc3JjSWR4ID09PSBkZXN0SW5kZXggfHwgc3JjSWR4ID09PSAtMSB8fCBkZXN0SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29scy5zcGxpY2UoZGVzdEluZGV4LCAwLCBjb2xzLnNwbGljZShzcmNJZHgsIDEpWzBdKTtcbiAgICAgICAgICAgIGdPYmouZ2V0Q29sdW1ucyh0cnVlKTtcbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHsgZnJvbUluZGV4OiBkZXN0SW5kZXgsIHRvSW5kZXg6IHNyY0lkeCB9KTtcbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIHJlcXVlc3RUeXBlOiAncmVvcmRlcidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS50YXJnZXRQYXJlbnRDb250YWluZXJJbmRleCA9IGZ1bmN0aW9uIChzcmNFbGVtLCBkZXN0RWxlbSkge1xuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1oZWFkZXJjZWxsJykpO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZsYXRDb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zTW9kZWwoY29scyk7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRDb2xQYXJlbnQoZmxhdENvbHVtbnNbdXRpbF8xLmdldEVsZW1lbnRJbmRleChzcmNFbGVtLCBoZWFkZXJzKV0sIGNvbHMpO1xuICAgICAgICAgICAgY29scyA9IHBhcmVudCA/IHBhcmVudC5jb2x1bW5zIDogY29scztcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaW5BcnJheShmbGF0Q29sdW1uc1t1dGlsXzEuZ2V0RWxlbWVudEluZGV4KGRlc3RFbGVtLCBoZWFkZXJzKV0sIGNvbHMpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5nZXRDb2xQYXJlbnQgPSBmdW5jdGlvbiAoY29sdW1uLCBjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5maW5kQ29sUGFyZW50KGNvbHVtbiwgY29sdW1ucywgcGFyZW50cyk7XG4gICAgICAgICAgICByZXR1cm4gcGFyZW50c1twYXJlbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5yZW9yZGVyQ29sdW1ucyA9IGZ1bmN0aW9uIChmcm9tRk5hbWUsIHRvRk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKHRvRk5hbWUpO1xuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0Q29sUGFyZW50KGNvbHVtbiwgdGhpcy5wYXJlbnQuY29sdW1ucyk7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHBhcmVudCA/IHBhcmVudC5jb2x1bW5zIDogdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBkZXN0SW5kZXggPSB1dGlsXzEuaW5BcnJheShjb2x1bW4sIGNvbHVtbnMpO1xuICAgICAgICAgICAgaWYgKGRlc3RJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlQ29sdW1ucyhkZXN0SW5kZXgsIHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoZnJvbUZOYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmVuYWJsZUFmdGVyUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSA9PT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkgJiYgZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVJlb3JkZXJFbGVtZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmNyZWF0ZVJlb3JkZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY29udGVudCcpO1xuICAgICAgICAgICAgdGhpcy51cEFycm93ID0gaGVhZGVyLmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWljb25zIGUtaWNvbi1yZW9yZGVydXBhcnJvdyBlLXJlb3JkZXJ1cGFycm93JywgYXR0cnM6IHsgc3R5bGU6ICdkaXNwbGF5Om5vbmUnIH0gfSkpO1xuICAgICAgICAgICAgdGhpcy5kb3duQXJyb3cgPSBoZWFkZXIuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgZS1pY29uLXJlb3JkZXJkb3duYXJyb3cgZS1yZW9yZGVyZG93bmFycm93JywgYXR0cnM6IHsgc3R5bGU6ICdkaXNwbGF5Om5vbmUnIH0gfSkpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCB7IHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZSB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLnVwQXJyb3cpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5kb3duQXJyb3cpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJEcm9wLCB0aGlzLmhlYWRlckRyb3ApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5lbmFibGVBZnRlclJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnJlb3JkZXJDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJhZywgdGhpcy5kcmFnKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB0aGlzLmRyYWdTdGFydCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyYWdTdG9wLCB0aGlzLmRyYWdTdG9wKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLmNyZWF0ZVJlb3JkZXJFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZHJhZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGNsb3Nlc3QgPSBlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0LCAnLmUtaGVhZGVyY2VsbDpub3QoLmUtc3RhY2tlZEhlYWRlckNlbGwpJyk7XG4gICAgICAgICAgICB2YXIgY2xvbmVFbGVtZW50ID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNsb25lcHJvcGVydGllcycpO1xuICAgICAgICAgICAgdmFyIGlzTGVmdCA9IHRoaXMueCA+IHV0aWxfMS5nZXRQb3NpdGlvbihlLmV2ZW50KS54ICsgZ09iai5nZXRDb250ZW50KCkuZmlyc3RFbGVtZW50Q2hpbGQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoZ09iai5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJlb3JkZXJpbmRpY2F0ZScpLCBbJ2UtcmVvcmRlcmluZGljYXRlJ10pO1xuICAgICAgICAgICAgdGhpcy5zZXREaXNwbGF5KCdub25lJyk7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2UtZGVmYXVsdGN1ciddLCBbJ2Utbm90YWxsb3dlZGN1ciddKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2Nyb2xsUG9zdGlvbihlLmV2ZW50KTtcbiAgICAgICAgICAgIGlmIChjbG9zZXN0ICYmICFjbG9zZXN0LmlzRXF1YWxOb2RlKHRoaXMuZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBjbG9zZXN0O1xuICAgICAgICAgICAgICAgIGlmICghKCF0aGlzLmNoa0Ryb3BQb3NpdGlvbih0aGlzLmVsZW1lbnQsIHRhcmdldCkgfHwgIXRoaXMuY2hrRHJvcEFsbENvbHModGhpcy5lbGVtZW50LCB0YXJnZXQpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFycm93UG9zaXRpb24odGFyZ2V0LCBpc0xlZnQpO1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdCh0YXJnZXQsIFsnZS1hbGxvd0Ryb3AnLCAnZS1yZW9yZGVyaW5kaWNhdGUnXSwgW10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghKGdPYmouYWxsb3dHcm91cGluZyAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncm91cGRyb3BhcmVhJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLW5vdGFsbG93ZWRjdXInXSwgWydlLWRlZmF1bHRjdXInXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5jb2x1bW5EcmFnLCB7IHRhcmdldDogdGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAnaGVhZGVyY2VsbCcsIGNvbHVtbjogZS5jb2x1bW4gfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnVwZGF0ZVNjcm9sbFBvc3Rpb24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB4ID0gdXRpbF8xLmdldFBvc2l0aW9uKGUpLng7XG4gICAgICAgICAgICB2YXIgY2xpUmVjdEJhc2UgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIHNjcm9sbEVsZW0gPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoeCA+IGNsaVJlY3RCYXNlLmxlZnQgJiYgeCA8IGNsaVJlY3RCYXNlLmxlZnQgKyAzNSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBfdGhpcy5zZXRTY3JvbGxMZWZ0KHNjcm9sbEVsZW0sIHRydWUpOyB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh4IDwgY2xpUmVjdEJhc2UucmlnaHQgJiYgeCA+IGNsaVJlY3RCYXNlLnJpZ2h0IC0gMzUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgX3RoaXMuc2V0U2Nyb2xsTGVmdChzY3JvbGxFbGVtLCBmYWxzZSk7IH0sIDUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuc2V0U2Nyb2xsTGVmdCA9IGZ1bmN0aW9uIChzY3JvbGxFbGVtLCBpc0xlZnQpIHtcbiAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gc2Nyb2xsRWxlbS5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgc2Nyb2xsRWxlbS5zY3JvbGxMZWZ0ID0gc2Nyb2xsRWxlbS5zY3JvbGxMZWZ0ICsgKGlzTGVmdCA/IC01IDogNSk7XG4gICAgICAgICAgICBpZiAoc2Nyb2xsTGVmdCAhPT0gc2Nyb2xsRWxlbS5zY3JvbGxMZWZ0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXREaXNwbGF5KCdub25lJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnN0b3BUaW1lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMudGltZXIpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS51cGRhdGVBcnJvd1Bvc2l0aW9uID0gZnVuY3Rpb24gKHRhcmdldCwgaXNMZWZ0KSB7XG4gICAgICAgICAgICB2YXIgY2xpUmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBjbGlSZWN0QmFzZSA9IHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBpZiAoKGlzTGVmdCAmJiBjbGlSZWN0LmxlZnQgPCBjbGlSZWN0QmFzZS5sZWZ0KSB8fCAoIWlzTGVmdCAmJiBjbGlSZWN0LnJpZ2h0ID4gY2xpUmVjdEJhc2UucmlnaHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cEFycm93LnN0eWxlLnRvcCA9IGNsaVJlY3QudG9wICsgY2xpUmVjdC5oZWlnaHQgLSBjbGlSZWN0QmFzZS50b3AgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5kb3duQXJyb3cuc3R5bGUudG9wID0gY2xpUmVjdC50b3AgLSBjbGlSZWN0QmFzZS50b3AgLSA0ICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMudXBBcnJvdy5zdHlsZS5sZWZ0ID0gdGhpcy5kb3duQXJyb3cuc3R5bGUubGVmdCA9IChpc0xlZnQgPyBjbGlSZWN0LmxlZnQgOiBjbGlSZWN0LnJpZ2h0KSAtIGNsaVJlY3RCYXNlLmxlZnQgLSA0ICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheSgnJyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmRyYWdTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1oZWFkZXJjZWxsJykgPyB0YXJnZXQgOlxuICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICB0aGlzLnggPSB1dGlsXzEuZ2V0UG9zaXRpb24oZS5ldmVudCkueCArIGdPYmouZ2V0Q29udGVudCgpLmZpcnN0RWxlbWVudENoaWxkLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwge1xuICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAnaGVhZGVyY2VsbCcsIGNvbHVtbjogZS5jb2x1bW5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5kcmFnU3RvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXREaXNwbGF5KCdub25lJyk7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgaWYgKCFlLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY29sdW1uRHJvcCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAnaGVhZGVyY2VsbCcsIGNvbHVtbjogZS5jb2x1bW4gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZUNsYXNzKGdPYmouZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yZW9yZGVyaW5kaWNhdGUnKSwgWydlLXJlb3JkZXJpbmRpY2F0ZSddKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuc2V0RGlzcGxheSA9IGZ1bmN0aW9uIChkaXNwbGF5KSB7XG4gICAgICAgICAgICB0aGlzLnVwQXJyb3cuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG4gICAgICAgICAgICB0aGlzLmRvd25BcnJvdy5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncmVvcmRlcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBSZW9yZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5SZW9yZGVyID0gUmVvcmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Jlb3JkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUm93REQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSb3dERChwYXJlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWdyaWRkcmFnYXJlYScpLmxlbmd0aCB8fFxuICAgICAgICAgICAgICAgICAgICAhZS5zZW5kZXIudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdmlzdWFsRWxlbWVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNsb25lcHJvcGVydGllcyBlLWRyYWdhbmRkcm9wIGUtZ3JpZCBlLWRyYWdjbG9uZScsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczogJ2hlaWdodDpcImF1dG9cIiwgei1pbmRleDoyLCB3aWR0aDonICsgZ09iai5lbGVtZW50Lm9mZnNldFdpZHRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHsgc3R5bGVzOiAnd2lkdGg6JyArIGdPYmouZWxlbWVudC5vZmZzZXRXaWR0aCB9KTtcbiAgICAgICAgICAgICAgICB2YXIgdGJvZHkgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkUm93cyA9IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNlbGVjdGVkUm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3cgPSBzZWxlY3RlZFJvd3NbaV0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudChzZWxlY3RlZFJvdywgJy5lLWluZGVudGNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnJlbW92ZUVsZW1lbnQoc2VsZWN0ZWRSb3csICcuZS1kZXRhaWxyb3djb2xsYXBzZScpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudChzZWxlY3RlZFJvdywgJy5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChzZWxlY3RlZFJvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuYXBwZW5kQ2hpbGQodmlzdWFsRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZpc3VhbEVsZW1lbnQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWdyaWRkcmFnYXJlYScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMucm93RHJhZ1N0YXJ0LCB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3M6IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKCksXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogZS50YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdyb3dzJywgZGF0YTogZ09iai5nZXRTZWxlY3RlZFJlY29yZHMoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBkcm9wRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGdPYmoucm93RHJvcFNldHRpbmdzLnRhcmdldElEKTtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQgJiYgZHJvcEVsZW0gJiYgZHJvcEVsZW0uZWoyX2luc3RhbmNlcykge1xuICAgICAgICAgICAgICAgICAgICBkcm9wRWxlbS5lajJfaW5zdGFuY2VzWzBdLmdldENvbnRlbnQoKS5jbGFzc0xpc3QuYWRkKCdlLWFsbG93Um93RHJvcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5pc0RyYWdTdG9wID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmVFbGVtZW50ID0gX3RoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2xvbmVwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IF90aGlzLmdldEVsZW1lbnRGcm9tUG9zaXRpb24oY2xvbmVFbGVtZW50LCBlLmV2ZW50KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1kZWZhdWx0Y3VyJ10sIFsnZS1ub3RhbGxvd2VkY3VyJ10pO1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMucm93RHJhZywge1xuICAgICAgICAgICAgICAgICAgICByb3dzOiBnT2JqLmdldFNlbGVjdGVkUm93cygpLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ3Jvd3MnLCBkYXRhOiBnT2JqLmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Utcm93ZHJhZycpO1xuICAgICAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWRjb250ZW50JykgfHxcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChjbG9uZUVsZW1lbnQucGFyZW50RWxlbWVudCwgJ2UtZ3JpZCcpLmlkID09PSB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZCcpLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLW5vdGFsbG93ZWRjdXInXSwgWydlLWRlZmF1bHRjdXInXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0b3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBfdGhpcy5nZXRFbGVtZW50RnJvbVBvc2l0aW9uKGUuaGVscGVyLCBlLmV2ZW50KTtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1yb3dkcmFnJyk7XG4gICAgICAgICAgICAgICAgdmFyIGRyb3BFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZ09iai5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQpO1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLnJvd0Ryb3BTZXR0aW5ncy50YXJnZXRJRCAmJiBkcm9wRWxlbSAmJiBkcm9wRWxlbS5lajJfaW5zdGFuY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3BFbGVtLmVqMl9pbnN0YW5jZXNbMF0uZ2V0Q29udGVudCgpLmNsYXNzTGlzdC5yZW1vdmUoJ2UtYWxsb3dSb3dEcm9wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMucm93RHJvcCwge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ3Jvd3MnLFxuICAgICAgICAgICAgICAgICAgICByb3dzOiBnT2JqLmdldFNlbGVjdGVkUm93cygpLCBkYXRhOiBnT2JqLmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCF1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZShlLmhlbHBlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsaXplRHJhZywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJvcCwgdGhpcy5jb2x1bW5Ecm9wLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5yb3dEcmFnQW5kRHJvcENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBSb3dERC5wcm90b3R5cGUuaW5pdGlhbGl6ZURyYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbjtcbiAgICAgICAgICAgIHZhciBkcmFnO1xuICAgICAgICAgICAgZHJhZyA9IG5ldyBlajJfYmFzZV8xLkRyYWdnYWJsZShnT2JqLmdldENvbnRlbnQoKSwge1xuICAgICAgICAgICAgICAgIGRyYWdUYXJnZXQ6ICcuZS1yb3djZWxsJyxcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogNSxcbiAgICAgICAgICAgICAgICBoZWxwZXI6IHRoaXMuaGVscGVyLFxuICAgICAgICAgICAgICAgIGRyYWdTdGFydDogdGhpcy5kcmFnU3RhcnQsXG4gICAgICAgICAgICAgICAgZHJhZzogdGhpcy5kcmFnLFxuICAgICAgICAgICAgICAgIGRyYWdTdG9wOiB0aGlzLmRyYWdTdG9wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmdldEVsZW1lbnRGcm9tUG9zaXRpb24gPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQ7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSB1dGlsXzEuZ2V0UG9zaXRpb24oZXZlbnQpO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgdGFyZ2V0ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzIuZXh0ZW5kKGUsIHsgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmdldFRhcmdldElkeCA9IGZ1bmN0aW9uICh0YXJnZXRSb3cpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRSb3cgPyBwYXJzZUludCh0YXJnZXRSb3cuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKSA6IDA7XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5jb2x1bW5Ecm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoZS5kcm9wcGVkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpICE9PSAnZ3JvdXBpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFJvdyA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJ3RyJyk7XG4gICAgICAgICAgICAgICAgdmFyIHNyY0NvbnRyb2wgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoZS5kcm9wcGVkRWxlbWVudC5wYXJlbnRFbGVtZW50LmlkICE9PSBnT2JqLmVsZW1lbnQuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3JjQ29udHJvbCA9IGUuZHJvcHBlZEVsZW1lbnQucGFyZW50RWxlbWVudC5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3JjQ29udHJvbC5lbGVtZW50LmlkICE9PSBnT2JqLmVsZW1lbnQuaWQgJiYgc3JjQ29udHJvbC5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQgIT09IGdPYmouZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByZWNvcmRzID0gc3JjQ29udHJvbC5nZXRTZWxlY3RlZFJlY29yZHMoKTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5kZXggPSBjdXJyZW50SW5kZXggPSB0aGlzLmdldFRhcmdldElkeCh0YXJnZXRSb3cpO1xuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHRhcmdldEluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRleCA9IGN1cnJlbnRJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEluZGV4ID0gdGFyZ2V0SW5kZXggKyAoZ09iai5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgKiBnT2JqLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSkgLSBnT2JqLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnJvd3NBZGRlZCwgeyB0b0luZGV4OiB0YXJnZXRJbmRleCwgcmVjb3JkczogcmVjb3JkcyB9KTtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgcmVxdWVzdFR5cGU6ICdyb3dkcmFnYW5kZHJvcCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3dzID0gc3JjQ29udHJvbC5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKTtcbiAgICAgICAgICAgICAgICB2YXIgc2tpcCA9IHNyY0NvbnRyb2wuYWxsb3dQYWdpbmcgP1xuICAgICAgICAgICAgICAgICAgICAoc3JjQ29udHJvbC5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgKiBzcmNDb250cm9sLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSkgLSBzcmNDb250cm9sLnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZSA6IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmVjb3Jkcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cy5wdXNoKHNraXAgKyBzZWxlY3RlZFJvd3NbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzcmNDb250cm9sLm5vdGlmeShldmVudHMucm93c1JlbW92ZWQsIHsgaW5kZXhlczogdGhpcy5zZWxlY3RlZFJvd3MgfSk7XG4gICAgICAgICAgICAgICAgc3JjQ29udHJvbC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIHJlcXVlc3RUeXBlOiAncm93ZHJhZ2FuZGRyb3AnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5lbmFibGVBZnRlclJlbmRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpICYmIGUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplRHJhZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsaXplRHJhZyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyb3AsIHRoaXMuY29sdW1uRHJvcCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnJvd0RyYWdBbmREcm9wQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Jvd0RyYWdBbmREcm9wJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJvd0REO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Sb3dERCA9IFJvd0REO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcm93LXJlb3JkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9zZXJ2aWNlcy9hcmlhLXNlcnZpY2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cywgYXJpYV9zZXJ2aWNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEdyb3VwID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXAocGFyZW50LCBncm91cFNldHRpbmdzLCBzb3J0ZWRDb2x1bW5zLCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMudmlzdWFsRWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2xvbmVwcm9wZXJ0aWVzIGUtZHJhZ2Nsb25lIGUtZ2RjbG9uZScsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiAnbGluZS1oZWlnaHQ6MjNweCcsIGF0dHJzOiB7IGFjdGlvbjogJ2dyb3VwaW5nJyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS5zZW5kZXIudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1ncm91cGhlYWRlcmNlbGwnKSA/IHRhcmdldCA6XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1ncm91cGhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5jb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5nZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJykpO1xuICAgICAgICAgICAgICAgIF90aGlzLnZpc3VhbEVsZW1lbnQudGV4dENvbnRlbnQgPSBlbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgIF90aGlzLnZpc3VhbEVsZW1lbnQuc3R5bGUud2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoICsgMiArICdweCc7XG4gICAgICAgICAgICAgICAgX3RoaXMudmlzdWFsRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodCArIDIgKyAncHgnO1xuICAgICAgICAgICAgICAgIF90aGlzLnZpc3VhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnLCBfdGhpcy5jb2x1bW4udWlkKTtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuYXBwZW5kQ2hpbGQoX3RoaXMudmlzdWFsRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnZpc3VhbEVsZW1lbnQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS11bmdyb3VwZHJhZycpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHZhciBjbG9uZUVsZW1lbnQgPSBfdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jbG9uZXByb3BlcnRpZXMnKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuY29sdW1uRHJhZywgeyB0YXJnZXQ6IHRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ2hlYWRlcmNlbGwnLCBjb2x1bW46IF90aGlzLmNvbHVtbiB9KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1kZWZhdWx0Y3VyJ10sIFsnZS1ub3RhbGxvd2VkY3VyJ10pO1xuICAgICAgICAgICAgICAgIGlmICghKHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1ncmlkY29udGVudCcpIHx8IHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1oZWFkZXJjZWxsJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLW5vdGFsbG93ZWRjdXInXSwgWydlLWRlZmF1bHRjdXInXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0b3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtdW5ncm91cGRyYWcnKTtcbiAgICAgICAgICAgICAgICBpZiAoISh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkY29udGVudCcpIHx8IHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRoZWFkZXInKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZS5oZWxwZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlVaWQoZS5kcm9wcGVkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtaG92ZXInKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShlLmRyb3BwZWRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hcmlhLnNldERyb3BUYXJnZXQoX3RoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JvdXBkcm9wYXJlYScpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXJpYS5zZXRHcmFiYmVkKF90aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ1thcmlhLWdyYWJiZWQ9dHJ1ZV0nKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbikgfHwgY29sdW1uLmFsbG93R3JvdXBpbmcgPT09IGZhbHNlIHx8XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwoZ09iai5nZXRDb2x1bW5IZWFkZXJCeVVpZChjb2x1bW4udWlkKSwgJ2UtZ3JpZCcpLmdldEF0dHJpYnV0ZSgnaWQnKSAhPT1cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5ncm91cENvbHVtbihjb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hcmlhID0gbmV3IGFyaWFfc2VydmljZV8xLkFyaWFTZXJ2aWNlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBTZXR0aW5ncyA9IGdyb3VwU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnNvcnRlZENvbHVtbnMgPSBzb3J0ZWRDb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNvbHVtbkRyYWcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjbG9uZUVsZW1lbnQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNsb25lcHJvcGVydGllcycpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2UtZGVmYXVsdGN1ciddLCBbJ2Utbm90YWxsb3dlZGN1ciddKTtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JvdXBkcm9wYXJlYScpICYmXG4gICAgICAgICAgICAgICAgISh0aGlzLnBhcmVudC5hbGxvd1Jlb3JkZXJpbmcgJiYgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLW5vdGFsbG93ZWRjdXInXSwgWydlLWRlZmF1bHRjdXInXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JvdXBkcm9wYXJlYScpID8gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtaG92ZXInKSA6IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWhvdmVyJyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jb2x1bW5EcmFnU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zdGFja2VkaGVhZGVyY2VsbCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkcm9wQXJlYSA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JvdXBkcm9wYXJlYScpO1xuICAgICAgICAgICAgdGhpcy5hcmlhLnNldERyb3BUYXJnZXQoZHJvcEFyZWEsIGUuY29sdW1uLmFsbG93R3JvdXBpbmcpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGVhZGVyY2VsbCcpID8gZS50YXJnZXQgOiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICB0aGlzLmFyaWEuc2V0R3JhYmJlZChlbGVtZW50LCB0cnVlLCAhZS5jb2x1bW4uYWxsb3dHcm91cGluZyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jb2x1bW5Ecm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoZS5kcm9wcGVkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpID09PSAnZ3JvdXBpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlVaWQoZS5kcm9wcGVkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2x1bW4pIHx8IGNvbHVtbi5hbGxvd0dyb3VwaW5nID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlVaWQoY29sdW1uLnVpZCksICdlLWdyaWQnKS5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5ncm91cENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVuZ3JvdXBDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWcsIHRoaXMuY29sdW1uRHJhZywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB0aGlzLmNvbHVtbkRyYWdTdGFydCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJvcCwgdGhpcy5jb2x1bW5Ecm9wLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVmcmVzaFNvcnRJY29ucywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuc29ydENvbXBsZXRlLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlckRyb3AsIHRoaXMuaGVhZGVyRHJvcCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZ3JvdXBDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudW5ncm91cENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJhZywgdGhpcy5jb2x1bW5EcmFnKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB0aGlzLmNvbHVtbkRyYWdTdGFydCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbkRyb3AsIHRoaXMuY29sdW1uRHJvcCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZWZyZXNoU29ydEljb25zKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuc29ydENvbXBsZXRlLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlckRyb3AsIHRoaXMuaGVhZGVyRHJvcCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5pbml0aWFsRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggJiYgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cENvbHVtbihjb2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmtleVByZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYWx0RG93bkFycm93JzpcbiAgICAgICAgICAgICAgICBjYXNlICdhbHRVcEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gZ09iai5hbGxvd1NlbGVjdGlvbiA/IGdPYmouZ2V0U2VsZWN0ZWRSb3dJbmRleGVzKCkgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvd3MgPSBnT2JqLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YVJvdyA9IGdPYmouZ2V0RGF0YVJvd3MoKVtzZWxlY3RlZFtzZWxlY3RlZC5sZW5ndGggLSAxXV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JwUm93ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGRhdGFSb3cucm93SW5kZXg7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1yb3cnKSAmJiAhcm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JwUm93ID0gcm93c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZVJvd3MoZ3JwUm93LnF1ZXJ5U2VsZWN0b3IoZS5hY3Rpb24gPT09ICdhbHRVcEFycm93JyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5lLXJlY29yZHBsdXNleHBhbmQnIDogJy5lLXJlY29yZHBsdXNjb2xsYXBzZScpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsRG93bkFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybFVwQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VSb3dzKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTb3J0RnJvbVRhcmdldChlLnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLnVuR3JvdXBGcm9tVGFyZ2V0KGUudGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMudG9vZ2xlR3JvdXBGcm9tSGVhZGVyKGUudGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVuR3JvdXBGcm9tVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdW5ncm91cGJ1dHRvbicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZWotbWFwcGluZ25hbWUnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS50b29nbGVHcm91cEZyb21IZWFkZXIgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cFNldHRpbmdzLnNob3dUb2dnbGVCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1ncnB0b2dnbGVidG4nKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS10b2dnbGV1bmdyb3VwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbih0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKS5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwQ29sdW1uKHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9nZ2xldW5ncm91cCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZ3JvdXBDb2x1bW4odGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlai1tYXBwaW5nbmFtZScpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmFwcGx5U29ydEZyb21UYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGdIZWFkZXIgPSBlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0LCAnLmUtZ3JvdXBoZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd1NvcnRpbmcgJiYgZ0hlYWRlciAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS11bmdyb3VwYnV0dG9uJykgJiZcbiAgICAgICAgICAgICAgICAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS10b2dnbGV1bmdyb3VwJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBnSGVhZGVyLmZpcnN0RWxlbWVudENoaWxkLmdldEF0dHJpYnV0ZSgnZWotbWFwcGluZ25hbWUnKTtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGZpZWxkKS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1hc2NlbmRpbmcnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5zb3J0Q29sdW1uKGZpZWxkLCAnZGVzY2VuZGluZycsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5zb3J0Q29sdW1uKGZpZWxkLCAnYXNjZW5kaW5nJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZXhwYW5kQ29sbGFwc2VSb3dzID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIHRyZ3QgPSB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtcmVjb3JkcGx1c2V4cGFuZCcpIHx8XG4gICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJlY29yZHBsdXNjb2xsYXBzZScpO1xuICAgICAgICAgICAgaWYgKHRyZ3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbElkeCA9IHRyZ3QuY2VsbEluZGV4O1xuICAgICAgICAgICAgICAgIHZhciByb3dJZHggPSB0cmd0LnBhcmVudEVsZW1lbnQucm93SW5kZXg7XG4gICAgICAgICAgICAgICAgdmFyIHJvd05vZGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwocm93Tm9kZXMpLnNsaWNlKHJvd0lkeCArIDEsIHJvd05vZGVzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdmFyIGlzSGlkZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgZXhwYW5kRWxlbSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgdG9FeHBhbmQgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZW50ID0gdHJndC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWluZGVudGNlbGwnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0cmd0LmNsYXNzTGlzdC5jb250YWlucygnZS1yZWNvcmRwbHVzY29sbGFwc2UnKSkge1xuICAgICAgICAgICAgICAgICAgICB0cmd0LmNsYXNzTmFtZSA9ICdlLXJlY29yZHBsdXNleHBhbmQnO1xuICAgICAgICAgICAgICAgICAgICB0cmd0LmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTmFtZSA9ICdlLWljb25zIGUtZ2RpYWdvbmFsZG93biBlLWljb24tZ2Rvd25hcnJvdyc7XG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpc0hpZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0cmd0LmNsYXNzTmFtZSA9ICdlLXJlY29yZHBsdXNjb2xsYXBzZSc7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3QuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NOYW1lID0gJ2UtaWNvbnMgZS1nbmV4dGZvcndhcmQgZS1pY29uLWdyaWdodGFycm93JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldEV4cGFuZCh0cmd0LCBleHBhbmQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJylbY2VsbElkeF0gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0ucXVlcnlTZWxlY3RvckFsbCgndGQnKVtjZWxsSWR4XS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5kZW50Y2VsbCcpICYmIHJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0hpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1pbmRlbnRjZWxsJykubGVuZ3RoID09PSBpbmRlbnQgKyAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRFbGVtID0gcm93c1tpXS5xdWVyeVNlbGVjdG9yKCcuZS1yZWNvcmRwbHVzZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHBhbmRFbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0V4cGFuZC5wdXNoKGV4cGFuZEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3cnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaSAtIDFdLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWRldGFpbHJvd2NvbGxhcHNlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRvRXhwYW5kLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvRXhwYW5kW2ldLmNsYXNzTmFtZSA9ICdlLXJlY29yZHBsdXNjb2xsYXBzZSc7XG4gICAgICAgICAgICAgICAgICAgIHRvRXhwYW5kW2ldLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTmFtZSA9ICdlLWljb25zIGUtZ25leHRmb3J3YXJkIGUtaWNvbi1ncmlnaHRhcnJvdyc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VSb3dzKHRvRXhwYW5kW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5leHBhbmRDb2xsYXBzZSA9IGZ1bmN0aW9uIChpc0V4cGFuZCkge1xuICAgICAgICAgICAgdmFyIHJvd05vZGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbjtcbiAgICAgICAgICAgIHZhciByb3c7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93Tm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93Tm9kZXNbaV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtcmVjb3JkcGx1c2V4cGFuZCwgLmUtcmVjb3JkcGx1c2NvbGxhcHNlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IHJvd05vZGVzW2ldLnF1ZXJ5U2VsZWN0b3IoaXNFeHBhbmQgPyAnLmUtcmVjb3JkcGx1c2NvbGxhcHNlJyA6ICcuZS1yZWNvcmRwbHVzZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSBpc0V4cGFuZCA/ICdlLXJlY29yZHBsdXNleHBhbmQnIDogJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc05hbWUgPSBpc0V4cGFuZCA/ICdlLWljb25zIGUtZ2RpYWdvbmFsZG93biBlLWljb24tZ2Rvd25hcnJvdycgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlLWljb25zIGUtZ25leHRmb3J3YXJkIGUtaWNvbi1ncmlnaHRhcnJvdyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocm93Tm9kZXNbaV0uZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJlY29yZHBsdXNleHBhbmQnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgcm93Tm9kZXNbaV0uZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJlY29yZHBsdXNjb2xsYXBzZScpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93Tm9kZXNbaV0uc3R5bGUuZGlzcGxheSA9IGlzRXhwYW5kID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd05vZGVzW2ldLnN0eWxlLmRpc3BsYXkgPSBpc0V4cGFuZCA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmV4cGFuZEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2UodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jb2xsYXBzZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2UoZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyR3JvdXBEcm9wQXJlYSgpO1xuICAgICAgICAgICAgdGhpcy5pbml0RHJhZ0FuZERyb3AoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvZ2dsZUJ0bigpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVuZGVyR3JvdXBEcm9wQXJlYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyb3VwZHJvcGFyZWEnLCBhdHRyczogeyAndGFiaW5kZXgnOiAnLTEnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdyb3VwRHJvcEFyZWEoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCwgdGhpcy5wYXJlbnQuZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5ncm91cFNldHRpbmdzLnNob3dEcm9wQXJlYSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudXBkYXRlR3JvdXBEcm9wQXJlYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd0Ryb3BBcmVhICYmICF0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZHJhZ0xhYmVsID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdHcm91cERyb3BBcmVhJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGRyYWdMYWJlbDtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1ncm91cGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LmlubmVySFRNTCA9PT0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdHcm91cERyb3BBcmVhJykgJiYgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtZ3JvdXBlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuaW5pdERyYWdBbmREcm9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplR0hlYWRlckRyb3AoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUdIZWFkZXJEcmFnKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5pbml0aWFsaXplR0hlYWRlckRyYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZHJhZyA9IG5ldyBlajJfYmFzZV8xLkRyYWdnYWJsZSh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBkcmFnVGFyZ2V0OiAnLmUtZ3JvdXBoZWFkZXJjZWxsJyxcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogNSxcbiAgICAgICAgICAgICAgICBoZWxwZXI6IHRoaXMuaGVscGVyLFxuICAgICAgICAgICAgICAgIGRyYWdTdGFydDogdGhpcy5kcmFnU3RhcnQsXG4gICAgICAgICAgICAgICAgZHJhZzogdGhpcy5kcmFnLFxuICAgICAgICAgICAgICAgIGRyYWdTdG9wOiB0aGlzLmRyYWdTdG9wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmhlYWRlckRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCFlLnVpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZChlLnVpZCk7XG4gICAgICAgICAgICB0aGlzLnVuZ3JvdXBDb2x1bW4oY29sdW1uLmZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmluaXRpYWxpemVHSGVhZGVyRHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZHJvcCA9IG5ldyBlajJfYmFzZV8xLkRyb3BwYWJsZSh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBhY2NlcHQ6ICcuZS1kcmFnY2xvbmUnLFxuICAgICAgICAgICAgICAgIGRyb3A6IHRoaXMuZHJvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5ncm91cENvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbikgfHwgY29sdW1uLmFsbG93R3JvdXBpbmcgPT09IGZhbHNlIHx8XG4gICAgICAgICAgICAgICAgKHRoaXMuY29udGVudFJlZnJlc2ggJiYgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2x1bW5OYW1lKSA+IC0xKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5ncm91cENvbHVtbiwgYXJnMTogY29sdW1uTmFtZSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2x1bW4udmlzaWJsZSA9IGdPYmouZ3JvdXBTZXR0aW5ncy5zaG93R3JvdXBlZENvbHVtbjtcbiAgICAgICAgICAgIHRoaXMuY29sTmFtZSA9IGNvbHVtbk5hbWU7XG4gICAgICAgICAgICBpZiAodGhpcy5jb250ZW50UmVmcmVzaCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ29sVG9Hcm91cERyb3AoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdyb3VwRHJvcEFyZWEoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnVuZ3JvdXBDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uTmFtZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQgPT09IGNvbHVtbk5hbWU7IH0pWzBdIDogZ09iai5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uKSB8fCBjb2x1bW4uYWxsb3dHcm91cGluZyA9PT0gZmFsc2UgfHwgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2x1bW5OYW1lKSA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudChnT2JqKSkge1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMudW5ncm91cENvbHVtbiwgYXJnMTogY29sdW1uTmFtZSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2x1bW4udmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNvbE5hbWUgPSBjb2x1bW4uZmllbGQ7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMpKTtcbiAgICAgICAgICAgIGNvbHVtbnMuc3BsaWNlKGNvbHVtbnMuaW5kZXhPZih0aGlzLmNvbE5hbWUpLCAxKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNvcnRlZENvbHVtbnMuaW5kZXhPZihjb2x1bW5OYW1lKSA8IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1uTmFtZSA9PT0gZ09iai5zb3J0U2V0dGluZ3MuY29sdW1uc1tpXS5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zID0gY29sdW1ucztcbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zKSk7XG4gICAgICAgICAgICBjb2x1bW5zLnB1c2godGhpcy5jb2xOYW1lKTtcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zID0gY29sdW1ucztcbiAgICAgICAgICAgIHdoaWxlIChpIDwgZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5zb3J0U2V0dGluZ3MuY29sdW1uc1tpXS5maWVsZCA9PT0gdGhpcy5jb2xOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPT09IGkpIHtcbiAgICAgICAgICAgICAgICBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLnB1c2goeyBmaWVsZDogdGhpcy5jb2xOYW1lLCBkaXJlY3Rpb246ICdhc2NlbmRpbmcnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWdPYmouYWxsb3dTb3J0aW5nKSB7XG4gICAgICAgICAgICAgICAgZ09iai5zb3J0U2V0dGluZ3MuY29sdW1uc1tpXS5kaXJlY3Rpb24gPSAnYXNjZW5kaW5nJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoZS5yZXF1ZXN0VHlwZSA9PT0gJ2dyb3VwaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ29sVG9Hcm91cERyb3AodGhpcy5jb2xOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29sRnJvbUdyb3VwRHJvcCh0aGlzLmNvbE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKHRoaXMuY29sTmFtZSkgPiAtMSA/IHtcbiAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiB0aGlzLmNvbE5hbWUsIHJlcXVlc3RUeXBlOiAnZ3JvdXBpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0gOiB7IHJlcXVlc3RUeXBlOiAndW5ncm91cGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZSB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzMuZXh0ZW5kKGUsIGFyZ3MpKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmFkZENvbFRvR3JvdXBEcm9wID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICdhc2NlbmRpbmcnO1xuICAgICAgICAgICAgdmFyIGdyb3VwZWRDb2x1bW4gPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkLWljb24gZS1ncm91cGhlYWRlcmNlbGwnIH0pO1xuICAgICAgICAgICAgdmFyIGNoaWxkRGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGF0dHJzOiB7ICdlai1tYXBwaW5nbmFtZSc6IGZpZWxkIH0gfSk7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQ2VsbCA9IGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlVaWQoY29sdW1uLnVpZCk7XG4gICAgICAgICAgICBjaGlsZERpdi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1ncm91cHRleHQnLCBpbm5lckhUTUw6IGNvbHVtbi5oZWFkZXJUZXh0LFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRhYmluZGV4OiAnLTEnLCAnYXJpYS1sYWJlbCc6ICdzb3J0IHRoZSBncm91cGVkIGNvbHVtbicgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VG9nZ2xlQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgY2hpbGREaXYuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXRvZ2dsZWdyb3VwYnV0dG9uIGUtaWNvbnMgZS1pY29uLXVuZ3JvdXAgZS10b2dnbGV1bmdyb3VwJywgaW5uZXJIVE1MOiAnJm5ic3A7JyxcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ3VuZ3JvdXAgYnV0dG9uJyB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhlYWRlckNlbGwucXVlcnlTZWxlY3RvckFsbCgnLmUtYXNjZW5kaW5nLC5lLWRlc2NlbmRpbmcnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBoZWFkZXJDZWxsLnF1ZXJ5U2VsZWN0b3IoJy5lLWFzY2VuZGluZycpID8gJ2FzY2VuZGluZycgOiAnZGVzY2VuZGluZyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGlsZERpdi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1ncm91cHNvcnQgZS1pY29ucyAnICsgKCdlLScgKyBkaXJlY3Rpb24gKyAnIGUtaWNvbi0nICsgZGlyZWN0aW9uKSwgaW5uZXJIVE1MOiAnJm5ic3A7JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAnc29ydCB0aGUgZ3JvdXBlZCBjb2x1bW4nIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNoaWxkRGl2LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXVuZ3JvdXBidXR0b24gZS1pY29ucyBlLWljb24taGlkZScsIGlubmVySFRNTDogJyZuYnNwOycsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGl0bGU6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnVW5Hcm91cCcpLCB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAndW5ncm91cCB0aGUgZ3JvdXBlZCBjb2x1bW4nIH0sXG4gICAgICAgICAgICAgICAgc3R5bGVzOiB0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd1VuZ3JvdXBCdXR0b24gPyAnJyA6ICdkaXNwbGF5Om5vbmUnXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBncm91cGVkQ29sdW1uLmFwcGVuZENoaWxkKGNoaWxkRGl2KTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChncm91cGVkQ29sdW1uKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlZnJlc2hUb2dnbGVCdG4gPSBmdW5jdGlvbiAoaXNSZW1vdmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd1RvZ2dsZUJ1dHRvbikge1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtaGVhZGVyY2VsbGRpdicpKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaGVhZGVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShoZWFkZXJzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1lbXB0eWNlbGwnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeVVpZChoZWFkZXJzW2ldLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlcnNbaV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JwdG9nZ2xlYnRuJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoaGVhZGVyc1tpXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncnB0b2dnbGVidG4nKVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tpXS5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZ3JwdG9nZ2xlYnRuIGUtaWNvbnMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2x1bW4uZmllbGQpID4gLTEgPyAnZS10b2dnbGV1bmdyb3VwIGUtaWNvbi11bmdyb3VwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2UtdG9nZ2xlZ3JvdXAgZS1pY29uLWdyb3VwJyksIGF0dHJzOiB7IHRhYmluZGV4OiAnLTEnLCAnYXJpYS1sYWJlbCc6ICdHcm91cCBidXR0b24nIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5yZW1vdmVDb2xGcm9tR3JvdXBEcm9wID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmdldEdIZWFkZXJDZWxsKGZpZWxkKSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdyb3VwRHJvcEFyZWEoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMoZS5wcm9wZXJ0aWVzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29sdW1ucyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250ZW50UmVmcmVzaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZih0aGlzLmNvbE5hbWUpID4gLTEgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IHRoaXMuY29sTmFtZSwgcmVxdWVzdFR5cGU6ICdncm91cGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB7IHJlcXVlc3RUeXBlOiAndW5ncm91cGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93RHJvcEFyZWEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cERyb3BBcmVhKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd0Ryb3BBcmVhID8gdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJyA6IHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dHcm91cGVkQ29sdW1uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlR3JvdXBlZENvbHVtbih0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd0dyb3VwZWRDb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHsgcmVxdWVzdFR5cGU6ICdyZWZyZXNoJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93VW5ncm91cEJ1dHRvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1dHRvblZpc2liaWxpdHkodGhpcy5ncm91cFNldHRpbmdzLnNob3dVbmdyb3VwQnV0dG9uLCAnZS11bmdyb3VwYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd1RvZ2dsZUJ1dHRvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1dHRvblZpc2liaWxpdHkodGhpcy5ncm91cFNldHRpbmdzLnNob3dUb2dnbGVCdXR0b24sICdlLXRvZ2dsZWdyb3VwYnV0dG9uICcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVmcmVzaEhlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudXBkYXRlR3JvdXBlZENvbHVtbiA9IGZ1bmN0aW9uIChpc1Zpc2libGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zW2ldKS52aXNpYmxlID0gaXNWaXNpYmxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudXBkYXRlQnV0dG9uVmlzaWJpbGl0eSA9IGZ1bmN0aW9uIChpc1Zpc2libGUsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgdmFyIGdIZWFkZXIgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGNsYXNzTmFtZSkpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnSGVhZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZ0hlYWRlcltpXS5zdHlsZS5kaXNwbGF5ID0gaXNWaXNpYmxlID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5lbmFibGVBZnRlclJlbmRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpICYmIGUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyR3JvdXBpbmcoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9nZ2xlQnRuKHRydWUpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNsZWFyR3JvdXBpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMpKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKGNvbHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdncm91cCc7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5yZWZyZXNoU29ydEljb25zID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaGVhZGVyO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGdDb2xzID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmllbGROYW1lcyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuZmllbGQ7IH0pO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9nZ2xlQnRuKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoZWFkZXIgPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sc1tpXS5maWVsZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFnT2JqLmFsbG93U29ydGluZyAmJiAodGhpcy5zb3J0ZWRDb2x1bW5zLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPiAtMSB8fFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID4gLTEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1zb3J0ZmlsdGVyZGl2JyksIFsnZS1hc2NlbmRpbmcnLCAnZS1pY29uLWFzY2VuZGluZyddLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXNvcnRudW1iZXInLCBpbm5lckhUTUw6IChpICsgMSkudG9TdHJpbmcoKSB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5nZXRHSGVhZGVyQ2VsbChjb2xzW2ldLmZpZWxkKSAmJiB0aGlzLmdldEdIZWFkZXJDZWxsKGNvbHNbaV0uZmllbGQpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdyb3Vwc29ydCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5kaXJlY3Rpb24gPT09ICdhc2NlbmRpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdCh0aGlzLmdldEdIZWFkZXJDZWxsKGNvbHNbaV0uZmllbGQpLnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3Vwc29ydCcpLCBbJ2UtYXNjZW5kaW5nJywgJ2UtaWNvbi1hc2NlbmRpbmcnXSwgWydlLWRlc2NlbmRpbmcnLCAnZS1pY29uLWRlc2NlbmRpbmcnXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdCh0aGlzLmdldEdIZWFkZXJDZWxsKGNvbHNbaV0uZmllbGQpLnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3Vwc29ydCcpLCBbJ2UtZGVzY2VuZGluZycsICdlLWljb24tZGVzY2VuZGluZyddLCBbJ2UtYXNjZW5kaW5nJywgJ2UtaWNvbi1hc2NlbmRpbmcnXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ0NvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lcy5pbmRleE9mKGdDb2xzW2ldKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChnQ29sc1tpXSkuc2V0QXR0cmlidXRlKCdhcmlhLWdyb3VwZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZ2V0R0hlYWRlckNlbGwgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQgJiYgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tlai1tYXBwaW5nbmFtZT0nICsgZmllbGQgKyAnXScpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZWotbWFwcGluZ25hbWU9JyArIGZpZWxkICsgJ10nKS5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcm91cDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuR3JvdXAgPSBHcm91cDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2dyb3VwLmpzXG4vLyBtb2R1bGUgaWQgPSA2MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9uYXZpZ2F0aW9uc18xLCBldmVudHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVG9vbGJhciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFRvb2xiYXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wcmVkZWZpbmVkSXRlbXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5ncmlkSUQgPSBwYXJlbnQuZWxlbWVudC5pZDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB2YXIgcHJlSXRlbXMgPSBbJ2FkZCcsICdlZGl0JywgJ3VwZGF0ZScsICdkZWxldGUnLCAnY2FuY2VsJywgJ3ByaW50JyxcbiAgICAgICAgICAgICAgICAncGRmZXhwb3J0JywgJ2V4Y2VsZXhwb3J0JywgJ3dvcmRleHBvcnQnLCAnY3N2ZXhwb3J0J107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHByZUl0ZW1zXzEgPSBwcmVJdGVtczsgX2kgPCBwcmVJdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gcHJlSXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGxvY2FsZU5hbWUgPSBpdGVtWzBdLnRvVXBwZXJDYXNlKCkgKyBpdGVtLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJlZGVmaW5lZEl0ZW1zW2l0ZW1dID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5ncmlkSUQgKyAnXycgKyBpdGVtLCBwcmVmaXhJY29uOiAnZS0nICsgaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KGxvY2FsZU5hbWUpLCB0b29sdGlwVGV4dDogdGhpcy5sMTBuLmdldENvbnN0YW50KGxvY2FsZU5hbWUpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJlZGVmaW5lZEl0ZW1zLnNlYXJjaCA9IHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5ncmlkSUQgKyAnX3NlYXJjaCcsIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImUtc2VhcmNoXCIgcm9sZT1cInNlYXJjaFwiID5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwiJyArIHRoaXMuZ3JpZElEICsgJ19zZWFyY2hidXR0b25cIiBjbGFzcz1cImUtc2VhcmNoZmluZCBlLWljb25zXCIgdGFiaW5kZXg9XCItMVwiXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICByb2xlPVwiYnV0dG9uXCIgYXJpYS1sYWJlbD0gXCJzZWFyY2hcIj48L3NwYW4+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCInICsgdGhpcy5ncmlkSUQgKyAnX3NlYXJjaGJhclwiIGFyaWEtbXVsdGlsaW5lPSBcImZhbHNlXCIgdHlwZT1cInNlYXJjaFwiXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nICsgdGhpcy5sMTBuLmdldENvbnN0YW50KCdTZWFyY2gnKSArICc+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICA8L2lucHV0PjwvZGl2PicsIHRvb2x0aXBUZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1NlYXJjaCcpLCBhbGlnbjogJ3JpZ2h0J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucHJlZGVmaW5lZEl0ZW1zLmNvbHVtbmNob29zZXIgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuZ3JpZElEICsgJ18nICsgJ2NvbHVtbmNob29zZXInLCBjc3NDbGFzczogJ2UtY2MgZS1jY2RpdiBlLWNjLXRvb2xiYXInLCBzdWZmaXhJY29uOiAnZS0nICsgJ2NvbHVtbmNob29zZXItYnRuJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiAnQ29sdW1ucycsIHRvb2x0aXBUZXh0OiAnY29sdW1ucycsIGFsaWduOiAncmlnaHQnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVG9vbGJhcigpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRUb29sYmFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9vbGJhci5lbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRvb2xiYXIuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sYmFyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5jcmVhdGVUb29sYmFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5nZXRJdGVtcygpO1xuICAgICAgICAgICAgdGhpcy50b29sYmFyID0gbmV3IGVqMl9uYXZpZ2F0aW9uc18xLlRvb2xiYXIoe1xuICAgICAgICAgICAgICAgIGl0ZW1zOiBpdGVtcyxcbiAgICAgICAgICAgICAgICBjbGlja2VkOiB0aGlzLnRvb2xiYXJDbGlja0hhbmRsZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBlbmFibGVQZXJzaXN0ZW5jZTogdGhpcy5wYXJlbnQuZW5hYmxlUGVyc2lzdGVuY2UsXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiB0aGlzLmdyaWRJRCArICdfdG9vbGJhckl0ZW1zJyB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC50b29sYmFyVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLnBhcmVudC50b29sYmFyVGVtcGxhdGUpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kVG8odGhpcy5wYXJlbnQudG9vbGJhclRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy50b29sYmFyLmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB1dGlsXzEudGVtcGxhdGVDb21waWxlcih0aGlzLnBhcmVudC50b29sYmFyVGVtcGxhdGUpKClbMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sYmFyLmFwcGVuZFRvKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnQsIHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKSk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB0aGlzLmdyaWRJRCArICdfc2VhcmNoYmFyJyk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudCgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuc2VhcmNoU2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlYXJjaEJveCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5yZWZyZXNoVG9vbGJhckl0ZW1zID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZW5hYmxlSXRlbXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBkaXNhYmxlSXRlbXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBlZGl0ID0gZ09iai5lZGl0U2V0dGluZ3M7XG4gICAgICAgICAgICBlZGl0LmFsbG93QWRkaW5nID8gZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfYWRkJykgOiBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfYWRkJyk7XG4gICAgICAgICAgICBlZGl0LmFsbG93RWRpdGluZyA/IGVuYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2VkaXQnKSA6IGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19lZGl0Jyk7XG4gICAgICAgICAgICBlZGl0LmFsbG93RGVsZXRpbmcgPyBlbmFibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19kZWxldGUnKSA6IGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19kZWxldGUnKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS11cGRhdGVkdGQnKS5sZW5ndGggJiYgKGVkaXQuYWxsb3dBZGRpbmcgfHwgZWRpdC5hbGxvd0VkaXRpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX3VwZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19jYW5jZWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ191cGRhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2NhbmNlbCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCAmJiAoZWRpdC5hbGxvd0FkZGluZyB8fCBlZGl0LmFsbG93RWRpdGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlSXRlbXMgPSBbdGhpcy5ncmlkSUQgKyAnX3VwZGF0ZScsIHRoaXMuZ3JpZElEICsgJ19jYW5jZWwnXTtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUl0ZW1zID0gW3RoaXMuZ3JpZElEICsgJ19hZGQnLCB0aGlzLmdyaWRJRCArICdfZWRpdCcsIHRoaXMuZ3JpZElEICsgJ19kZWxldGUnXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ191cGRhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2NhbmNlbCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW5hYmxlSXRlbXMoZW5hYmxlSXRlbXMsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVJdGVtcyhkaXNhYmxlSXRlbXMsIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZ2V0SXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICAgICAgICAgIHZhciB0b29sYmFySXRlbXMgPSB0aGlzLnBhcmVudC50b29sYmFyIHx8IFtdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5wYXJlbnQudG9vbGJhcikgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB0b29sYmFySXRlbXNfMSA9IHRvb2xiYXJJdGVtczsgX2kgPCB0b29sYmFySXRlbXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRvb2xiYXJJdGVtc18xW19pXTtcbiAgICAgICAgICAgICAgICB0eXBlb2YgKGl0ZW0pID09PSAnc3RyaW5nJyA/IGl0ZW1zLnB1c2godGhpcy5nZXRJdGVtT2JqZWN0KGl0ZW0pKSA6IGl0ZW1zLnB1c2godGhpcy5nZXRJdGVtKGl0ZW0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZ2V0SXRlbSA9IGZ1bmN0aW9uIChpdGVtT2JqZWN0KSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMucHJlZGVmaW5lZEl0ZW1zW2l0ZW1PYmplY3QudGV4dF07XG4gICAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuZXh0ZW5kKGl0ZW0sIGl0ZW0sIGl0ZW1PYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW1PYmplY3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZ2V0SXRlbU9iamVjdCA9IGZ1bmN0aW9uIChpdGVtTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJlZGVmaW5lZEl0ZW1zW2l0ZW1OYW1lXSB8fCB7IHRleHQ6IGl0ZW1OYW1lLCBpZDogdGhpcy5ncmlkSUQgKyAnXycgKyBpdGVtTmFtZSB9O1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5lbmFibGVJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcywgaXNFbmFibGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgaXRlbXNfMSA9IGl0ZW1zOyBfaSA8IGl0ZW1zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc18xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGl0ZW0pO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhci5lbmFibGVJdGVtcyhlbGVtZW50LnBhcmVudEVsZW1lbnQsIGlzRW5hYmxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnRvb2xiYXJDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBnSUQgPSB0aGlzLmdyaWRJRDtcbiAgICAgICAgICAgIGlmICghYXJncy5pdGVtKSB7XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy50b29sYmFyQ2xpY2ssIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoYXJncy5pdGVtLmlkKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX3ByaW50JzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5wcmludCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfZWRpdCc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmouc3RhcnRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ191cGRhdGUnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLmVuZEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX2NhbmNlbCc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmouY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19hZGQnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLmFkZFJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5kZWxldGVSZWNvcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX3NlYXJjaCc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLm9yaWdpbmFsRXZlbnQudGFyZ2V0LmlkID09PSBnSUQgKyAnX3NlYXJjaGJ1dHRvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX2NvbHVtbmNob29zZXInOlxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyRWxlbWVudCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2NkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSB0YXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSB0YXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRFbGUgPSBhcmdzLm9yaWdpbmFsRXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICB5ID0gdGFyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB0YXJFbGVtZW50Lm9mZnNldFRvcDtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5jcmVhdGVDb2x1bW5jaG9vc2VyKHgsIHksIHRhcmdldEVsZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMudG9vbGJhckNsaWNrLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUubW9kZWxDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSA9PT0gJ2VkaXQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkgfHwgIXRoaXMucGFyZW50LnRvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmtleVVwSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNlYXJjaCh0aGlzLnNlYXJjaEVsZW1lbnQudmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS51cGRhdGVTZWFyY2hCb3ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hFbGVtZW50LnZhbHVlID0gdGhpcy5wYXJlbnQuc2VhcmNoU2V0dGluZ3Mua2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS53aXJlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuc2VhcmNoRWxlbWVudCwgJ2tleXVwJywgdGhpcy5rZXlVcEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS51bldpcmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5zZWFyY2hFbGVtZW50LCAna2V5dXAnLCB0aGlzLmtleVVwSGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVpVXBkYXRlLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLnVwZGF0ZVNlYXJjaEJveC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5tb2RlbENoYW5nZWQsIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudG9vbGJhclJlZnJlc2gsIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5tb2RlbENoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMudXBkYXRlU2VhcmNoQm94KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMubW9kZWxDaGFuZ2VkLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy50b29sYmFyUmVmcmVzaCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5tb2RlbENoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcyk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Rvb2xiYXInO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVG9vbGJhcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVG9vbGJhciA9IFRvb2xiYXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy90b29sYmFyLmpzXG4vLyBtb2R1bGUgaWQgPSA2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNjJfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1uYXZpZ2F0aW9uc1wiXG4vLyBtb2R1bGUgaWQgPSA2MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL2Zvb3Rlci1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL3N1bW1hcnktY2VsbC1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL3N1bW1hcnktbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZW51bV8xLCBjb25zdGFudF8xLCBmb290ZXJfcmVuZGVyZXJfMSwgc3VtbWFyeV9jZWxsX3JlbmRlcmVyXzEsIHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEFnZ3JlZ2F0ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEFnZ3JlZ2F0ZShwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnYWdncmVnYXRlJztcbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5pbml0aWF0ZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY2VsbEZhYyA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdjZWxsUmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgc3VtbWFyeV9jZWxsX3JlbmRlcmVyXzEuU3VtbWFyeUNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKTtcbiAgICAgICAgICAgIFtlbnVtXzEuQ2VsbFR5cGUuU3VtbWFyeSwgZW51bV8xLkNlbGxUeXBlLkNhcHRpb25TdW1tYXJ5LCBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBTdW1tYXJ5XS5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNlbGxGYWMuYWRkQ2VsbFJlbmRlcmVyKHR5cGUsIGluc3RhbmNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5mb290ZXJSZW5kZXJlciA9IG5ldyBmb290ZXJfcmVuZGVyZXJfMS5Gb290ZXJSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVuZGVyUGFuZWwoKTtcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvci5yZWdpc3RlcignZm9vdGVyUmVuZGVyZXInLCB0aGlzLmZvb3RlclJlbmRlcmVyKTtcbiAgICAgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcmVwYXJlU3VtbWFyeUluZm8oKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuZGF0YVJlYWR5LCBmbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5kYXRhUmVhZHksIGZuLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuZGF0YVJlYWR5LCB0aGlzLmZvb3RlclJlbmRlcmVyLnJlZnJlc2gsIHRoaXMuZm9vdGVyUmVuZGVyZXIpO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLnByZXBhcmVTdW1tYXJ5SW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBzdW1tYXJ5SXRlcmF0b3IodGhpcy5wYXJlbnQuYWdncmVnYXRlcywgZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhQ29sdW1uID0gX3RoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQoY29sdW1uLmZpZWxkKSB8fCB7fTtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGRhdGFDb2x1bW4udHlwZTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uZm9ybWF0ID0gX3RoaXMuZ2V0Rm9ybWF0RnJvbVR5cGUoY29sdW1uLmZvcm1hdCwgdHlwZSk7XG4gICAgICAgICAgICAgICAgY29sdW1uLnNldEZvcm1hdHRlcigpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jb2x1bW5OYW1lID0gY29sdW1uLmNvbHVtbk5hbWUgfHwgY29sdW1uLmZpZWxkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUuZ2V0Rm9ybWF0RnJvbVR5cGUgPSBmdW5jdGlvbiAoZm9ybWF0LCB0eXBlKSB7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0eXBlKSB8fCB0eXBlb2YgZm9ybWF0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb2JqO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgb2JqID0geyBmb3JtYXQ6IGZvcm1hdCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgb2JqID0geyB0eXBlOiB0eXBlLCBza2VsZXRvbjogZm9ybWF0IH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgb2JqID0geyB0eXBlOiAnZGF0ZVRpbWUnLCBza2VsZXRvbjogZm9ybWF0IH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5mb290ZXJSZW5kZXJlcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYXRlUmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXBhcmVTdW1tYXJ5SW5mbygpO1xuICAgICAgICAgICAgdGhpcy5mb290ZXJSZW5kZXJlci5yZWZyZXNoKCk7XG4gICAgICAgICAgICB2YXIgY01vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB2YXIgZ01vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgaWYgKGdNb2RlbC5nZXREYXRhKCkubGVuZ3RoICE9PSAwIHx8ICFjTW9kZWwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGNvbnN0YW50XzEubW9kZWxDaGFuZ2VkLCB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWF0ZVJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLnVpVXBkYXRlLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5mb290ZXJSZW5kZXJlci5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5pbml0aWFsRW5kLCB0aGlzLmluaXRpYXRlUmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmRhdGFSZWFkeSwgdGhpcy5mb290ZXJSZW5kZXJlci5yZWZyZXNoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLnVpVXBkYXRlLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRGb290ZXJDb250ZW50KCkpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQWdncmVnYXRlO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5BZ2dyZWdhdGUgPSBBZ2dyZWdhdGU7XG4gICAgZnVuY3Rpb24gc3VtbWFyeUl0ZXJhdG9yKGFnZ3JlZ2F0ZXMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGFnZ3JlZ2F0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICByb3cuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhjb2x1bW4sIHJvdyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4cG9ydHMuc3VtbWFyeUl0ZXJhdG9yID0gc3VtbWFyeUl0ZXJhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvYWdncmVnYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSA2M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuL2NvbnRlbnQtcmVuZGVyZXJcIiwgXCIuL3Jvdy1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL3N1bW1hcnktbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgY29uc3RhbnRfMSwgY29udGVudF9yZW5kZXJlcl8xLCByb3dfcmVuZGVyZXJfMSwgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRm9vdGVyUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRm9vdGVyUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEZvb3RlclJlbmRlcmVyKGdyaWRNb2R1bGUsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBncmlkTW9kdWxlLCBzZXJ2aWNlTG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmFnZ3JlZ2F0ZXMgPSB7fTtcbiAgICAgICAgICAgIF90aGlzLnBhcmVudCA9IGdyaWRNb2R1bGU7XG4gICAgICAgICAgICBfdGhpcy5sb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICBfdGhpcy5tb2RlbEdlbmVyYXRvciA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLlN1bW1hcnlNb2RlbEdlbmVyYXRvcihfdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkZm9vdGVyJyB9KTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXN1bW1hcnljb250ZW50JyB9KTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBpbm5lckRpdi5zdHlsZS5vdmVyZmxvd1ggPSAnc2Nyb2xsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbm5lckRpdik7XG4gICAgICAgICAgICB0aGlzLnNldFBhbmVsKGRpdik7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0UGFnZXIoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5pbnNlcnRCZWZvcmUoZGl2LCB0aGlzLnBhcmVudC5nZXRQYWdlcigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnREaXYgPSB0aGlzLmdldFBhbmVsKCk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSB0aGlzLmNyZWF0ZUNvbnRlbnRUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gaW5uZXJEaXYucXVlcnlTZWxlY3RvcignLmUtdGFibGUnKTtcbiAgICAgICAgICAgIHZhciB0Rm9vdCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGZvb3QnKTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRGb290KTtcbiAgICAgICAgICAgIHRoaXMuc2V0VGFibGUodGFibGUpO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyU3VtbWFyeUNvbnRlbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gdGhpcy5wYXJlbnQuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIEFycmF5ID8gdGhpcy5wYXJlbnQuZGF0YVNvdXJjZSA6IHRoaXMucGFyZW50LmN1cnJlbnRWaWV3RGF0YTtcbiAgICAgICAgICAgIHZhciBzdW1tYXJpZXMgPSB0aGlzLm1vZGVsR2VuZXJhdG9yLmdldERhdGEoKTtcbiAgICAgICAgICAgIHZhciBkdW1taWVzID0gdGhpcy5tb2RlbEdlbmVyYXRvci5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMubW9kZWxHZW5lcmF0b3IuZ2VuZXJhdGVSb3dzKGlucHV0LCBlIHx8IHRoaXMuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgICAgICB2YXIgcm93cmVuZGVyZXIgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5sb2NhdG9yKTtcbiAgICAgICAgICAgIHJvd3JlbmRlcmVyLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ1RSJywgeyBjbGFzc05hbWU6ICdlLXN1bW1hcnlyb3cnIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgc3JvdyA9IDAsIGxlbiA9IHN1bW1hcmllcy5sZW5ndGg7IHNyb3cgPCBsZW47IHNyb3crKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSByb3dzW3Nyb3ddO1xuICAgICAgICAgICAgICAgIGlmICghcm93KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdHIgPSByb3dyZW5kZXJlci5yZW5kZXIocm93LCBkdW1taWVzKTtcbiAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkudEZvb3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgICAgICAgdGhpcy5hZ2dyZWdhdGVzID0gZTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLnRGb290LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJTdW1tYXJ5Q29udGVudChlKTtcbiAgICAgICAgICAgIHRoaXMub25TY3JvbGwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hDb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQ29sID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkaGVhZGVyJykucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmdldFRhYmxlKCkucmVwbGFjZUNoaWxkKGhlYWRlckNvbCwgdGhpcy5nZXRDb2xHcm91cCgpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29sR3JvdXAoaGVhZGVyQ29sKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLm9uV2lkdGhDaGFuZ2UgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5nZXRDb2xHcm91cCgpLmNoaWxkcmVuW2FyZ3MuaW5kZXhdLnN0eWxlLndpZHRoID0gZWoyX2Jhc2VfMi5mb3JtYXRVbml0KGFyZ3Mud2lkdGgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93UmVzaXppbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZvb3RlclRhYmxlV2lkdGgodGhpcy5nZXRUYWJsZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLm9uU2Nyb2xsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlID09PSB2b2lkIDApIHsgZSA9IHsgbGVmdDogdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQuc2Nyb2xsTGVmdCB9OyB9XG4gICAgICAgICAgICB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZC5zY3JvbGxMZWZ0ID0gZS5sZWZ0O1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmNvbEdyb3VwUmVmcmVzaCwgdGhpcy5yZWZyZXNoQ29sLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuY29sdW1uV2lkdGhDaGFuZ2VkLCB0aGlzLm9uV2lkdGhDaGFuZ2UsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5zY3JvbGwsIHRoaXMub25TY3JvbGwsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgdGhpcy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuY29sR3JvdXBSZWZyZXNoLCB0aGlzLnJlZnJlc2hDb2wpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuY29sdW1uV2lkdGhDaGFuZ2VkLCB0aGlzLm9uV2lkdGhDaGFuZ2UpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuc2Nyb2xsLCB0aGlzLm9uU2Nyb2xsKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCB0aGlzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnVwZGF0ZUZvb3RlclRhYmxlV2lkdGggPSBmdW5jdGlvbiAodEZvb3QpIHtcbiAgICAgICAgICAgIHZhciB0SGVhZCA9IHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCk7XG4gICAgICAgICAgICBpZiAodEhlYWQgJiYgdEZvb3QpIHtcbiAgICAgICAgICAgICAgICB0Rm9vdC5zdHlsZS53aWR0aCA9IHRIZWFkLnN0eWxlLndpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRm9vdGVyUmVuZGVyZXI7XG4gICAgfShjb250ZW50X3JlbmRlcmVyXzEuQ29udGVudFJlbmRlcikpO1xuICAgIGV4cG9ydHMuRm9vdGVyUmVuZGVyZXIgPSBGb290ZXJSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9mb290ZXItcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDY0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgY2VsbF9yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTdW1tYXJ5Q2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFN1bW1hcnlDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFN1bW1hcnlDZWxsUmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ1REJywgeyBjbGFzc05hbWU6ICdlLXN1bW1hcnljZWxsJywgYXR0cnM6IHsgcm9sZTogJ2dyaWRjZWxsJywgdGFiaW5kZXg6ICctMScgfSB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBTdW1tYXJ5Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uIChmaWVsZCwgZGF0YSwgY29sdW1uKSB7XG4gICAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgICAga2V5ID0gIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLnR5cGUpID8gY29sdW1uLmZpZWxkICsgJyAtICcgKyAoY29sdW1uLnR5cGUpIDogY29sdW1uLmNvbHVtbk5hbWU7XG4gICAgICAgICAgICByZXR1cm4gZGF0YVtjb2x1bW4uY29sdW1uTmFtZV0gPyBkYXRhW2NvbHVtbi5jb2x1bW5OYW1lXVtrZXldIDogJyc7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlDZWxsUmVuZGVyZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKG5vZGUsIGNlbGwsIGRhdGEsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjZWxsLmNvbHVtbjtcbiAgICAgICAgICAgIGlmICghKGNvbHVtbi5mb290ZXJUZW1wbGF0ZSB8fCBjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSB8fCBjb2x1bW4uZ3JvdXBDYXB0aW9uVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZm4gPSBjb2x1bW4uZ2V0VGVtcGxhdGUoY2VsbC5jZWxsVHlwZSk7XG4gICAgICAgICAgICB1dGlsXzEuYXBwZW5kQ2hpbGRyZW4obm9kZSwgZm4oZGF0YVtjb2x1bW4uY29sdW1uTmFtZV0pKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN1bW1hcnlDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5TdW1tYXJ5Q2VsbFJlbmRlcmVyID0gU3VtbWFyeUNlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9zdW1tYXJ5LWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDY1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9yZW5kZXJlci92aXJ0dWFsLWNvbnRlbnQtcmVuZGVyZXJcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdXRpbF8xLCBjb25zdGFudF8xLCBlbnVtXzEsIHZpcnR1YWxfY29udGVudF9yZW5kZXJlcl8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZpcnR1YWxTY3JvbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsU2Nyb2xsKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAndmlydHVhbHNjcm9sbCc7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLmluc3RhbnRpYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5hZGRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5IZWFkZXIsIG5ldyB2aXJ0dWFsX2NvbnRlbnRfcmVuZGVyZXJfMS5WaXJ0dWFsSGVhZGVyUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCwgbmV3IHZpcnR1YWxfY29udGVudF9yZW5kZXJlcl8xLlZpcnR1YWxDb250ZW50UmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgdGhpcy5lbnN1cmVQYWdlU2l6ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5lbnN1cmVQYWdlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByb3dIZWlnaHQgPSB1dGlsXzEuZ2V0Um93SGVpZ2h0KHRoaXMucGFyZW50LmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5ibG9ja1NpemUgPSB+fih0aGlzLnBhcmVudC5oZWlnaHQgLyByb3dIZWlnaHQpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuYmxvY2tTaXplICogMjtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnBhZ2VTaXplO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0UHJvcGVydGllcyh7IHBhZ2VTZXR0aW5nczogeyBwYWdlU2l6ZTogc2l6ZSA8IGhlaWdodCA/IGhlaWdodCA6IHNpemUgfSB9LCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuaW5pdGlhbExvYWQsIHRoaXMuaW5zdGFudGlhdGVSZW5kZXJlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkLCB0aGlzLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5pbml0aWFsTG9hZCwgdGhpcy5pbnN0YW50aWF0ZVJlbmRlcmVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkLCB0aGlzLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgYXJncy5tb2R1bGUgPT09ICdyZXNpemUnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQpLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsU2Nyb2xsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5WaXJ0dWFsU2Nyb2xsID0gVmlydHVhbFNjcm9sbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3ZpcnR1YWwtc2Nyb2xsLmpzXG4vLyBtb2R1bGUgaWQgPSA2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4vY29udGVudC1yZW5kZXJlclwiLCBcIi4vaGVhZGVyLXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvaW50ZXJzZWN0aW9uLW9ic2VydmVyXCIsIFwiLi4vc2VydmljZXMvdmlydHVhbC1yb3ctbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2RhdGFfMSwgdXRpbF8xLCBjb25zdGFudF8xLCBlbnVtXzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgaGVhZGVyX3JlbmRlcmVyXzEsIGludGVyc2VjdGlvbl9vYnNlcnZlcl8xLCB2aXJ0dWFsX3Jvd19tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVmlydHVhbENvbnRlbnRSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhWaXJ0dWFsQ29udGVudFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsQ29udGVudFJlbmRlcmVyKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBsb2NhdG9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMucHJldkhlaWdodCA9IDA7XG4gICAgICAgICAgICBfdGhpcy5wcmV2ZW50RXZlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLmFjdGlvbnMgPSBbJ2ZpbHRlcmluZycsICdzZWFyY2hpbmcnLCAnZ3JvdXBpbmcnLCAndW5ncm91cGluZyddO1xuICAgICAgICAgICAgX3RoaXMub2Zmc2V0cyA9IHt9O1xuICAgICAgICAgICAgX3RoaXMudG1wT2Zmc2V0cyA9IHt9O1xuICAgICAgICAgICAgX3RoaXMudmlydHVhbEVsZSA9IG5ldyBWaXJ0dWFsRWxlbWVudEhhbmRsZXIoKTtcbiAgICAgICAgICAgIF90aGlzLm9mZnNldEtleXMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICBfdGhpcy5ldmVudExpc3RlbmVyKCdvbicpO1xuICAgICAgICAgICAgX3RoaXMudmdlbmVyYXRvciA9IF90aGlzLmdlbmVyYXRvcjtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpLmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkhlYWRlcik7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlclRhYmxlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUudGFibGUgPSB0aGlzLmdldFRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuY29udGVudCA9IHRoaXMuY29udGVudCA9IHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnJlbmRlcldyYXBwZXIoKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5yZW5kZXJQbGFjZUhvbGRlcigpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLndyYXBwZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgdmFyIGRlYm91bmNlRXZlbnQgPSAodGhpcy5wYXJlbnQuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIgJiYgIXRoaXMucGFyZW50LmRhdGFTb3VyY2UuZGF0YVNvdXJjZS5vZmZsaW5lKTtcbiAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRlbnQsIHBhZ2VIZWlnaHQ6IHRoaXMuZ2V0QmxvY2tIZWlnaHQoKSAqIDIsIGRlYm91bmNlRXZlbnQ6IGRlYm91bmNlRXZlbnQsXG4gICAgICAgICAgICAgICAgYXhlczogdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyBbJ1gnLCAnWSddIDogWydZJ11cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyID0gbmV3IGludGVyc2VjdGlvbl9vYnNlcnZlcl8xLkludGVyU2VjdGlvbk9ic2VydmVyKHRoaXMudmlydHVhbEVsZS53cmFwcGVyLCBvcHQpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJFbXB0eSA9IGZ1bmN0aW9uICh0Ym9keSkge1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5hZGp1c3RUYWJsZSgwLCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuc2Nyb2xsTGlzdGVuZXIgPSBmdW5jdGlvbiAoc2Nyb2xsQXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldmVudEV2ZW50IHx8IHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RXZlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHRoaXMuY29udGVudCA9PT0gZWoyX2Jhc2VfMS5jbG9zZXN0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICcuZS1jb250ZW50JykgfHwgdGhpcy5jb250ZW50ID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgdmFyIGluZm8gPSBzY3JvbGxBcmdzLnNlbnRpbmVsO1xuICAgICAgICAgICAgdmFyIHZpZXdJbmZvID0gdGhpcy5nZXRJbmZvRnJvbVZpZXcoc2Nyb2xsQXJncy5kaXJlY3Rpb24sIGluZm8sIHNjcm9sbEFyZ3Mub2Zmc2V0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZJbmZvICYmICgoaW5mby5heGlzID09PSAnWScgJiYgdGhpcy5wcmV2SW5mby5ibG9ja0luZGV4ZXMudG9TdHJpbmcoKSA9PT0gdmlld0luZm8uYmxvY2tJbmRleGVzLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgfHwgKGluZm8uYXhpcyA9PT0gJ1gnICYmIHRoaXMucHJldkluZm8uY29sdW1uSW5kZXhlcy50b1N0cmluZygpID09PSB2aWV3SW5mby5jb2x1bW5JbmRleGVzLnRvU3RyaW5nKCkpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldENvbHVtbkluZGV4ZXNJblZpZXcodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyB2aWV3SW5mby5jb2x1bW5JbmRleGVzIDogW10pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gdmlld0luZm8ubG9hZE5leHQgJiYgIXZpZXdJbmZvLmxvYWRTZWxmID8gdmlld0luZm8ubmV4dEluZm8ucGFnZSA6IHZpZXdJbmZvLnBhZ2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkodmlld0luZm8uZXZlbnQsIHsgcmVxdWVzdFR5cGU6ICd2aXJ0dWFsc2Nyb2xsJywgdmlydHVhbEluZm86IHZpZXdJbmZvIH0pO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5ibG9jayA9IGZ1bmN0aW9uIChibGspIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZnZW5lcmF0b3IuaXNCbG9ja0F2YWlsYWJsZShibGspO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRJbmZvRnJvbVZpZXcgPSBmdW5jdGlvbiAoZGlyZWN0aW9uLCBpbmZvLCBlKSB7XG4gICAgICAgICAgICB2YXIgdGVtcEJsb2NrcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGluZm9UeXBlID0geyBkaXJlY3Rpb246IGRpcmVjdGlvbiwgc2VudGluZWxJbmZvOiBpbmZvLCBvZmZzZXRzOiBlIH07XG4gICAgICAgICAgICBpbmZvVHlwZS5wYWdlID0gdGhpcy5nZXRQYWdlRnJvbVRvcChlLnRvcCwgaW5mb1R5cGUpO1xuICAgICAgICAgICAgaW5mb1R5cGUuYmxvY2tJbmRleGVzID0gdGVtcEJsb2NrcyA9IHRoaXMudmdlbmVyYXRvci5nZXRCbG9ja0luZGV4ZXMoaW5mb1R5cGUucGFnZSk7XG4gICAgICAgICAgICBpbmZvVHlwZS5sb2FkU2VsZiA9ICF0aGlzLnZnZW5lcmF0b3IuaXNCbG9ja0F2YWlsYWJsZSh0ZW1wQmxvY2tzW2luZm9UeXBlLmJsb2NrXSk7XG4gICAgICAgICAgICB2YXIgYmxvY2tzID0gdGhpcy5lbnN1cmVCbG9ja3MoaW5mb1R5cGUpO1xuICAgICAgICAgICAgaW5mb1R5cGUuYmxvY2tJbmRleGVzID0gYmxvY2tzO1xuICAgICAgICAgICAgaW5mb1R5cGUubG9hZE5leHQgPSAhYmxvY2tzLmZpbHRlcihmdW5jdGlvbiAodmFsKSB7IHJldHVybiB0ZW1wQmxvY2tzLmluZGV4T2YodmFsKSA9PT0gLTE7IH0pXG4gICAgICAgICAgICAgICAgLmV2ZXJ5KHRoaXMuYmxvY2suYmluZCh0aGlzKSk7XG4gICAgICAgICAgICBpbmZvVHlwZS5ldmVudCA9IChpbmZvVHlwZS5sb2FkTmV4dCB8fCBpbmZvVHlwZS5sb2FkU2VsZikgPyBjb25zdGFudF8xLm1vZGVsQ2hhbmdlZCA6IGNvbnN0YW50XzEucmVmcmVzaFZpcnR1YWxCbG9jaztcbiAgICAgICAgICAgIGluZm9UeXBlLm5leHRJbmZvID0gaW5mb1R5cGUubG9hZE5leHQgPyB7IHBhZ2U6IE1hdGgubWF4KDEsIGluZm9UeXBlLnBhZ2UgKyAoZGlyZWN0aW9uID09PSAnZG93bicgPyAxIDogLTEpKSB9IDoge307XG4gICAgICAgICAgICBpbmZvVHlwZS5jb2x1bW5JbmRleGVzID0gaW5mby5heGlzID09PSAnWCcgPyB0aGlzLnZnZW5lcmF0b3IuZ2V0Q29sdW1uSW5kZXhlcygpIDogdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZm8uYXhpcyA9PT0gJ1gnKSB7XG4gICAgICAgICAgICAgICAgaW5mb1R5cGUuZXZlbnQgPSBjb25zdGFudF8xLnJlZnJlc2hWaXJ0dWFsQmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5mb1R5cGU7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmVuc3VyZUJsb2NrcyA9IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gaW5mby5ibG9ja0luZGV4ZXNbaW5mby5ibG9ja107XG4gICAgICAgICAgICB2YXIgbUlkeDtcbiAgICAgICAgICAgIHZhciBvbGQgPSBpbmRleDtcbiAgICAgICAgICAgIHZhciBtYXggPSBNYXRoLm1heDtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gaW5mby5kaXJlY3Rpb24gPT09ICdkb3duJyA/IFttYXgoaW5kZXgsIDEpLCArK2luZGV4LCArK2luZGV4XSA6IFttYXgoaW5kZXggLSAxLCAxKSwgaW5kZXgsIGluZGV4ICsgMV07XG4gICAgICAgICAgICBpbmRleGVzID0gaW5kZXhlcy5maWx0ZXIoZnVuY3Rpb24gKHZhbCwgaW5kKSB7IHJldHVybiBpbmRleGVzLmluZGV4T2YodmFsKSA9PT0gaW5kOyB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZJbmZvLmJsb2NrSW5kZXhlcy50b1N0cmluZygpID09PSBpbmRleGVzLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXhlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmZvLmxvYWRTZWxmIHx8IChpbmZvLmRpcmVjdGlvbiA9PT0gJ2Rvd24nICYmIHRoaXMuaXNFbmRCbG9jayhvbGQpKSkge1xuICAgICAgICAgICAgICAgIGluZGV4ZXMgPSB0aGlzLnZnZW5lcmF0b3IuZ2V0QmxvY2tJbmRleGVzKGluZm8ucGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRleGVzLnNvbWUoZnVuY3Rpb24gKHZhbCwgaW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHZhbCA9PT0gX3RoaXMuZ2V0VG90YWxCbG9ja3MoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIG1JZHggPSBpbmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChtSWR4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpbmRleGVzID0gaW5kZXhlcy5zbGljZSgwLCBtSWR4ICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8uYmxvY2sgPT09IDAgJiYgaW5kZXhlcy5sZW5ndGggPT09IDEgJiYgdGhpcy52Z2VuZXJhdG9yLmlzQmxvY2tBdmFpbGFibGUoaW5kZXhlc1swXSAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZXMgPSBbaW5kZXhlc1swXSAtIDEsIGluZGV4ZXNbMF1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5hcHBlbmRDb250ZW50ID0gZnVuY3Rpb24gKHRhcmdldCwgbmV3Q2hpbGQsIGUpIHtcbiAgICAgICAgICAgIHZhciBpbmZvID0gZS52aXJ0dWFsSW5mbztcbiAgICAgICAgICAgIHRoaXMucHJldkluZm8gPSB0aGlzLnByZXZJbmZvIHx8IGUudmlydHVhbEluZm87XG4gICAgICAgICAgICB2YXIgY0Jsb2NrID0gKGluZm8uY29sdW1uSW5kZXhlc1swXSkgLSAxO1xuICAgICAgICAgICAgdmFyIGNPZmZzZXQgPSB0aGlzLmdldENvbHVtbk9mZnNldChjQmxvY2spO1xuICAgICAgICAgICAgdmFyIHdpZHRoO1xuICAgICAgICAgICAgdmFyIGJsb2NrcyA9IGluZm8uYmxvY2tJbmRleGVzO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hPZmZzZXRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlID0gdGhpcy5nZXRUcmFuc2xhdGVZKHRoaXMuY29udGVudC5zY3JvbGxUb3AsIHRoaXMuY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQsIGluZm8pO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKGNPZmZzZXQsIHRyYW5zbGF0ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlci52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKGNPZmZzZXQsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNJbmRleCA9IGluZm8uY29sdW1uSW5kZXhlcztcbiAgICAgICAgICAgICAgICB3aWR0aCA9IHRoaXMuZ2V0Q29sdW1uT2Zmc2V0KGNJbmRleFtjSW5kZXgubGVuZ3RoIC0gMV0pIC0gdGhpcy5nZXRDb2x1bW5PZmZzZXQoY0luZGV4WzBdIC0gMSkgKyAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlci52aXJ0dWFsRWxlLnNldFdyYXBwZXJXaWR0aCh3aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuc2V0V3JhcHBlcldpZHRoKHdpZHRoLCB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiB8fCBlajJfYmFzZV8yLkJyb3dzZXIuaXNJRSk7XG4gICAgICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobmV3Q2hpbGQpO1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLmFwcGVuZENoaWxkKHRhcmdldCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChpbmZvLmRpcmVjdGlvbiA9PT0gJ3VwJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmxrID0gdGhpcy5vZmZzZXRzW3RoaXMuZ2V0VG90YWxCbG9ja3MoKV0gLSB0aGlzLnByZXZIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmVudEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNUb3AgPSB0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wID0gc1RvcCArIGJsaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWaXJ0dWFsSGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5zZXRQYWdlSGVpZ2h0KHRoaXMuZ2V0T2Zmc2V0KGJsb2Nrc1tibG9ja3MubGVuZ3RoIC0gMV0pIC0gdGhpcy5nZXRPZmZzZXQoYmxvY2tzWzBdIC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmV2SW5mbyA9IGluZm87XG4gICAgICAgICAgICBpZiAodGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUub25EYXRhUmVhZHkgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGUuY291bnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IGUuY291bnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhQYWdlID0gTWF0aC5jZWlsKGUuY291bnQgLyB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MucGFnZVNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoT2Zmc2V0cygpO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXJ0dWFsSGVpZ2h0KCk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U2Nyb2xsUG9zaXRpb24oZS5yZXF1ZXN0VHlwZSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnNldFZpcnR1YWxIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDb2x1bW5PZmZzZXQodGhpcy5wYXJlbnQuY29sdW1ucy5sZW5ndGggKyB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoIC0gMSkgKyAncHgnIDogJzEwMCUnO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnNldFZpcnR1YWxIZWlnaHQodGhpcy5vZmZzZXRzW3RoaXMuZ2V0VG90YWxCbG9ja3MoKV0sIHdpZHRoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyLnZpcnR1YWxFbGUuc2V0VmlydHVhbEhlaWdodCgxLCB3aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFBhZ2VGcm9tVG9wID0gZnVuY3Rpb24gKHNUb3AsIGluZm8pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdG90YWwgPSB0aGlzLmdldFRvdGFsQmxvY2tzKCk7XG4gICAgICAgICAgICB2YXIgcGFnZSA9IDA7XG4gICAgICAgICAgICB2YXIgZXh0cmEgPSB0aGlzLm9mZnNldHNbdG90YWxdIC0gdGhpcy5wcmV2SGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5vZmZzZXRLZXlzLnNvbWUoZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgICAgIHZhciBpT2Zmc2V0ID0gTnVtYmVyKG9mZnNldCk7XG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlciA9IHNUb3AgPCBfdGhpcy5vZmZzZXRzW29mZnNldF0gfHwgKGlPZmZzZXQgPT09IHRvdGFsICYmIHNUb3AgPiBfdGhpcy5vZmZzZXRzW29mZnNldF0pO1xuICAgICAgICAgICAgICAgIGlmIChib3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5mby5ibG9jayA9IGlPZmZzZXQgJSAyID09PSAwID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2UgPSBNYXRoLm1heCgxLCBNYXRoLm1pbihfdGhpcy52Z2VuZXJhdG9yLmdldFBhZ2UoaU9mZnNldCksIF90aGlzLm1heFBhZ2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvcmRlcjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHBhZ2U7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFRyYW5zbGF0ZVkgPSBmdW5jdGlvbiAoc1RvcCwgY0hlaWdodCwgaW5mbykge1xuICAgICAgICAgICAgaWYgKGluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGluZm8gPSB7IHBhZ2U6IHRoaXMuZ2V0UGFnZUZyb21Ub3Aoc1RvcCwge30pIH07XG4gICAgICAgICAgICAgICAgaW5mby5ibG9ja0luZGV4ZXMgPSB0aGlzLnZnZW5lcmF0b3IuZ2V0QmxvY2tJbmRleGVzKGluZm8ucGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYmxvY2sgPSAoaW5mby5ibG9ja0luZGV4ZXNbMF0gfHwgMSkgLSAxO1xuICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZSA9IHRoaXMuZ2V0T2Zmc2V0KGJsb2NrKTtcbiAgICAgICAgICAgIHZhciBlbmRUcmFuc2xhdGUgPSB0aGlzLmdldE9mZnNldChpbmZvLmJsb2NrSW5kZXhlc1tpbmZvLmJsb2NrSW5kZXhlcy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlID4gc1RvcCA/IHRoaXMuZ2V0T2Zmc2V0KGJsb2NrIC0gMSkgOiBlbmRUcmFuc2xhdGUgPCAoc1RvcCArIGNIZWlnaHQpID8gdGhpcy5nZXRPZmZzZXQoYmxvY2sgKyAxKSA6IHRyYW5zbGF0ZTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0T2Zmc2V0ID0gZnVuY3Rpb24gKGJsb2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4odGhpcy5vZmZzZXRzW2Jsb2NrXSB8IDAsIHRoaXMub2Zmc2V0c1t0aGlzLm1heEJsb2NrXSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLm9uRW50ZXJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGVsZW1lbnQsIGN1cnJlbnQsIGRpcmVjdGlvbiwgZSkge1xuICAgICAgICAgICAgICAgIHZhciB4QXhpcyA9IGN1cnJlbnQuYXhpcyA9PT0gJ1gnO1xuICAgICAgICAgICAgICAgIHZhciB0b3AgPSBfdGhpcy5wcmV2SW5mby5vZmZzZXRzID8gX3RoaXMucHJldkluZm8ub2Zmc2V0cy50b3AgOiBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBfdGhpcy5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IF90aGlzLmdldENvbHVtbk9mZnNldCh4QXhpcyA/IF90aGlzLnZnZW5lcmF0b3IuZ2V0Q29sdW1uSW5kZXhlcygpWzBdIC0gMSA6IF90aGlzLnByZXZJbmZvLmNvbHVtbkluZGV4ZXNbMF0gLSAxKTtcbiAgICAgICAgICAgICAgICB2YXIgeSA9IF90aGlzLmdldFRyYW5zbGF0ZVkoZS50b3AsIGhlaWdodCwgeEF4aXMgJiYgdG9wID09PSBlLnRvcCA/IF90aGlzLnByZXZJbmZvIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBfdGhpcy52aXJ0dWFsRWxlLmFkanVzdFRhYmxlKHgsIE1hdGgubWluKHksIF90aGlzLm9mZnNldHNbX3RoaXMubWF4QmxvY2tdKSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5oZWFkZXIudmlydHVhbEVsZS5hZGp1c3RUYWJsZSh4LCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5ldmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucGFyZW50W2FjdGlvbl0oY29uc3RhbnRfMS5kYXRhUmVhZHksIHRoaXMub25EYXRhUmVhZHksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRbYWN0aW9uXShjb25zdGFudF8xLnJlZnJlc2hWaXJ0dWFsQmxvY2ssIHRoaXMucmVmcmVzaENvbnRlbnRSb3dzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMucGFyZW50W2FjdGlvbl0oZXZlbnQgKyBcIi1iZWdpblwiLCBfdGhpcy5vbkFjdGlvbkJlZ2luLCBfdGhpcyk7IH0pO1xuICAgICAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLm9ic2VydmVyLm9ic2VydmUoZnVuY3Rpb24gKHNjcm9sbEFyZ3MpIHsgcmV0dXJuIF90aGlzLnNjcm9sbExpc3RlbmVyKHNjcm9sbEFyZ3MpOyB9LCBfdGhpcy5vbkVudGVyZWQoKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmNvbnRlbnRSZWFkeSwgZm4pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuY29udGVudFJlYWR5LCBmbiwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldEJsb2NrU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3MucGFnZVNpemUgPj4gMTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0QmxvY2tIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRCbG9ja1NpemUoKSAqIHV0aWxfMS5nZXRSb3dIZWlnaHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuaXNFbmRCbG9jayA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gdGhpcy5nZXRUb3RhbEJsb2NrcygpO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4ID49IHRvdGFsQmxvY2tzIHx8IGluZGV4ID09PSB0b3RhbEJsb2NrcyAtIDE7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFRvdGFsQmxvY2tzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmNvdW50IC8gdGhpcy5nZXRCbG9ja1NpemUoKSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldENvbHVtbk9mZnNldCA9IGZ1bmN0aW9uIChibG9jaykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmdlbmVyYXRvci5jT2Zmc2V0c1tibG9ja10gfCAwO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRNb2RlbEdlbmVyYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdmlydHVhbF9yb3dfbW9kZWxfZ2VuZXJhdG9yXzEuVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUucmVzZXRTY3JvbGxQb3NpdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnMuc29tZShmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlID09PSBhY3Rpb247IH0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RXZlbnQgPSB0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wICE9PSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxUb3AgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5vbkFjdGlvbkJlZ2luID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldFByb3BlcnRpZXMoeyBwYWdlU2V0dGluZ3M6IHsgY3VycmVudFBhZ2U6IDEgfSB9LCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZnZW5lcmF0b3IuZ2V0Um93cygpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRSb3dCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgcHJldiA9IHRoaXMucHJldkluZm8uYmxvY2tJbmRleGVzO1xuICAgICAgICAgICAgdmFyIHN0YXJ0SWR4ID0gKHByZXZbMF0gLSAxKSAqIHRoaXMuZ2V0QmxvY2tTaXplKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtpbmRleCAtIHN0YXJ0SWR4XTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaE9mZnNldHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHJvdyA9IDA7XG4gICAgICAgICAgICB2YXIgYlNpemUgPSB0aGlzLmdldEJsb2NrU2l6ZSgpO1xuICAgICAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5nZXRUb3RhbEJsb2NrcygpO1xuICAgICAgICAgICAgdGhpcy5wcmV2SGVpZ2h0ID0gdGhpcy5vZmZzZXRzW3RvdGFsXTtcbiAgICAgICAgICAgIHRoaXMubWF4QmxvY2sgPSB0b3RhbCAlIDIgPT09IDAgPyB0b3RhbCAtIDIgOiB0b3RhbCAtIDE7XG4gICAgICAgICAgICB0aGlzLm9mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIEFycmF5LmFwcGx5KG51bGwsIEFycmF5KHRvdGFsKSkubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuICsrcm93OyB9KVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChibG9jaykge1xuICAgICAgICAgICAgICAgIHZhciB0bXAgPSAoX3RoaXMudmdlbmVyYXRvci5jYWNoZVtibG9ja10gfHwgW10pLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgcmVtID0gX3RoaXMuY291bnQgJSBiU2l6ZTtcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGJsb2NrIGluIF90aGlzLnZnZW5lcmF0b3IuY2FjaGUgP1xuICAgICAgICAgICAgICAgICAgICB0bXAgKiB1dGlsXzEuZ2V0Um93SGVpZ2h0KCkgOiByZW0gJiYgYmxvY2sgPT09IHRvdGFsID8gcmVtICogdXRpbF8xLmdldFJvd0hlaWdodCgpIDogX3RoaXMuZ2V0QmxvY2tIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5vZmZzZXRzW2Jsb2NrXSA9IChfdGhpcy5vZmZzZXRzW2Jsb2NrIC0gMV0gfCAwKSArIHNpemU7XG4gICAgICAgICAgICAgICAgX3RoaXMudG1wT2Zmc2V0c1tibG9ja10gPSBfdGhpcy5vZmZzZXRzW2Jsb2NrIC0gMV0gfCAwO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9mZnNldEtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm9mZnNldHMpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52Z2VuZXJhdG9yLnJlZnJlc2hDb2xPZmZzZXRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hWaXJ0dWFsRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudmdlbmVyYXRvci5yZWZyZXNoQ29sT2Zmc2V0cygpO1xuICAgICAgICAgICAgdGhpcy5zZXRWaXJ0dWFsSGVpZ2h0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsQ29udGVudFJlbmRlcmVyO1xuICAgIH0oY29udGVudF9yZW5kZXJlcl8xLkNvbnRlbnRSZW5kZXIpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxDb250ZW50UmVuZGVyZXIgPSBWaXJ0dWFsQ29udGVudFJlbmRlcmVyO1xuICAgIHZhciBWaXJ0dWFsSGVhZGVyUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVmlydHVhbEhlYWRlclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsSGVhZGVyUmVuZGVyZXIocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQsIGxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy52aXJ0dWFsRWxlID0gbmV3IFZpcnR1YWxFbGVtZW50SGFuZGxlcigpO1xuICAgICAgICAgICAgX3RoaXMuZ2VuID0gbmV3IHZpcnR1YWxfcm93X21vZGVsX2dlbmVyYXRvcl8xLlZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcihfdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgX3RoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEucmVmcmVzaFZpcnR1YWxCbG9jaywgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUudmlydHVhbEluZm8uc2VudGluZWxJbmZvLmF4aXMgPT09ICdYJyA/IF90aGlzLnJlZnJlc2hVSSgpIDogbnVsbDsgfSwgX3RoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFZpcnR1YWxIZWFkZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmdlbi5yZWZyZXNoQ29sT2Zmc2V0cygpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2V0Q29sdW1uSW5kZXhlc0luVmlldyh0aGlzLmdlbi5nZXRDb2x1bW5JbmRleGVzKHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkKSk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlclRhYmxlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUudGFibGUgPSB0aGlzLmdldFRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuY29udGVudCA9IHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLmNvbnRlbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnJlbmRlcldyYXBwZXIoKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5yZW5kZXJQbGFjZUhvbGRlcignYWJzb2x1dGUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEhlYWRlclJlbmRlcmVyLnByb3RvdHlwZS5hcHBlbmRDb250ZW50ID0gZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUud3JhcHBlci5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxIZWFkZXJSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaFVJID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5nZW4ucmVmcmVzaENvbE9mZnNldHMoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldENvbHVtbkluZGV4ZXNJblZpZXcodGhpcy5nZW4uZ2V0Q29sdW1uSW5kZXhlcyh0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZCkpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZWZyZXNoVUkuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZpcnR1YWxIZWFkZXJSZW5kZXJlcjtcbiAgICB9KGhlYWRlcl9yZW5kZXJlcl8xLkhlYWRlclJlbmRlcikpO1xuICAgIGV4cG9ydHMuVmlydHVhbEhlYWRlclJlbmRlcmVyID0gVmlydHVhbEhlYWRlclJlbmRlcmVyO1xuICAgIHZhciBWaXJ0dWFsRWxlbWVudEhhbmRsZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsRWxlbWVudEhhbmRsZXIoKSB7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5yZW5kZXJXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtdmlydHVhbHRhYmxlJyB9KTtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLnRhYmxlKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLndyYXBwZXIpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsRWxlbWVudEhhbmRsZXIucHJvdG90eXBlLnJlbmRlclBsYWNlSG9sZGVyID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPT09IHZvaWQgMCkgeyBwb3NpdGlvbiA9ICdyZWxhdGl2ZSc7IH1cbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS12aXJ0dWFsdHJhY2snLCBzdHlsZXM6IFwicG9zaXRpb246XCIgKyBwb3NpdGlvbiB9KTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5hZGp1c3RUYWJsZSA9IGZ1bmN0aW9uICh4VmFsdWUsIHlWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKFwiICsgeFZhbHVlICsgXCJweCwgXCIgKyB5VmFsdWUgKyBcInB4KVwiO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsRWxlbWVudEhhbmRsZXIucHJvdG90eXBlLnNldFdyYXBwZXJXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCwgZnVsbCkge1xuICAgICAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLndpZHRoID0gd2lkdGggPyB3aWR0aCArIFwicHhcIiA6IGZ1bGwgPyAnMTAwJScgOiAnJztcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5zZXRWaXJ0dWFsSGVpZ2h0ID0gZnVuY3Rpb24gKGhlaWdodCwgd2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlci5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmlydHVhbEVsZW1lbnRIYW5kbGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5WaXJ0dWFsRWxlbWVudEhhbmRsZXIgPSBWaXJ0dWFsRWxlbWVudEhhbmRsZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvdmlydHVhbC1jb250ZW50LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA2N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSW50ZXJTZWN0aW9uT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBJbnRlclNlY3Rpb25PYnNlcnZlcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5mcm9tV2hlZWwgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hNb3ZlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuc2VudGluZWxJbmZvID0ge1xuICAgICAgICAgICAgICAgICd1cCc6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChyZWN0LCBpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gcmVjdC50b3AgLSBfdGhpcy5jb250YWluZXJSZWN0LnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uZW50ZXJlZCA9IHRvcCA+PSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvcCArIChfdGhpcy5vcHRpb25zLnBhZ2VIZWlnaHQgLyAyKSA+PSAwO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBheGlzOiAnWSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdkb3duJzoge1xuICAgICAgICAgICAgICAgICAgICBjaGVjazogZnVuY3Rpb24gKHJlY3QsIGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjSGVpZ2h0ID0gX3RoaXMub3B0aW9ucy5jb250YWluZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9IHJlY3QuYm90dG9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5lbnRlcmVkID0gcmVjdC5ib3R0b20gPD0gX3RoaXMuY29udGFpbmVyUmVjdC5ib3R0b207XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9wIC0gKF90aGlzLm9wdGlvbnMucGFnZUhlaWdodCAvIDIpIDw9IF90aGlzLm9wdGlvbnMucGFnZUhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIH0sIGF4aXM6ICdZJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ3JpZ2h0Jzoge1xuICAgICAgICAgICAgICAgICAgICBjaGVjazogZnVuY3Rpb24gKHJlY3QsIGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByaWdodCA9IHJlY3QucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmVudGVyZWQgPSByaWdodCA8IF90aGlzLmNvbnRhaW5lclJlY3QucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmlnaHQgLSBfdGhpcy5jb250YWluZXJSZWN0LndpZHRoIDw9IF90aGlzLmNvbnRhaW5lclJlY3QucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIGF4aXM6ICdYJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAocmVjdCwgaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSByZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmVudGVyZWQgPSBsZWZ0ID4gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsZWZ0ICsgX3RoaXMuY29udGFpbmVyUmVjdC53aWR0aCA+PSBfdGhpcy5jb250YWluZXJSZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIGF4aXM6ICdYJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBJbnRlclNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgb25FbnRlckNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJSZWN0ID0gdGhpcy5vcHRpb25zLmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLm9wdGlvbnMuY29udGFpbmVyLCAnd2hlZWwnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5mcm9tV2hlZWwgPSB0cnVlOyB9LCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLm9wdGlvbnMuY29udGFpbmVyLCAnc2Nyb2xsJywgdGhpcy52aXJ0dWFsU2Nyb2xsSGFuZGxlcihjYWxsYmFjaywgb25FbnRlckNhbGxiYWNrKSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEludGVyU2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBpbmZvID0gdGhpcy5zZW50aW5lbEluZm9bZGlyZWN0aW9uXTtcbiAgICAgICAgICAgIHJldHVybiBpbmZvLmNoZWNrKHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgaW5mbyk7XG4gICAgICAgIH07XG4gICAgICAgIEludGVyU2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS52aXJ0dWFsU2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uIChjYWxsYmFjaywgb25FbnRlckNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHByZXZUb3AgPSAwO1xuICAgICAgICAgICAgdmFyIHByZXZMZWZ0ID0gMDtcbiAgICAgICAgICAgIHZhciBkZWJvdW5jZWQxMDAgPSBlajJfYmFzZV8yLmRlYm91bmNlKGNhbGxiYWNrLCAxMDApO1xuICAgICAgICAgICAgdmFyIGRlYm91bmNlZDUwID0gZWoyX2Jhc2VfMi5kZWJvdW5jZShjYWxsYmFjaywgNTApO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRvcCA9IGUudGFyZ2V0LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IGUudGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHByZXZUb3AgPCB0b3AgPyAnZG93bicgOiAndXAnO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IHByZXZMZWZ0ID09PSBsZWZ0ID8gZGlyZWN0aW9uIDogcHJldkxlZnQgPCBsZWZ0ID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgICAgICAgICAgICAgICBwcmV2VG9wID0gdG9wO1xuICAgICAgICAgICAgICAgIHByZXZMZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IF90aGlzLnNlbnRpbmVsSW5mb1tkaXJlY3Rpb25dO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmF4ZXMuaW5kZXhPZihjdXJyZW50LmF4aXMpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjaGVjayA9IF90aGlzLmNoZWNrKGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuZW50ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBvbkVudGVyQ2FsbGJhY2soX3RoaXMuZWxlbWVudCwgY3VycmVudCwgZGlyZWN0aW9uLCB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gX3RoaXMuZnJvbVdoZWVsID8gX3RoaXMub3B0aW9ucy5kZWJvdW5jZUV2ZW50ID8gZGVib3VuY2VkMTAwIDogY2FsbGJhY2sgOiBkZWJvdW5jZWQxMDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LmF4aXMgPT09ICdYJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm4gPSBkZWJvdW5jZWQ1MDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmbih7IGRpcmVjdGlvbjogZGlyZWN0aW9uLCBzZW50aW5lbDogY3VycmVudCwgb2Zmc2V0OiB7IHRvcDogdG9wLCBsZWZ0OiBsZWZ0IH0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLmZyb21XaGVlbCA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJTZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLnNldFBhZ2VIZWlnaHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5wYWdlSGVpZ2h0ID0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbnRlclNlY3Rpb25PYnNlcnZlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuSW50ZXJTZWN0aW9uT2JzZXJ2ZXIgPSBJbnRlclNlY3Rpb25PYnNlcnZlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDY4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4uL3NlcnZpY2VzL2dyb3VwLW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHJvd19tb2RlbF9nZW5lcmF0b3JfMSwgZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY09mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IHt9O1xuICAgICAgICAgICAgdGhpcy5ncm91cHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMucm93TW9kZWxHZW5lcmF0b3IgPSB0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nID8gbmV3IGdyb3VwX21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwTW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpIDogbmV3IHJvd19tb2RlbF9nZW5lcmF0b3JfMS5Sb3dNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZVJvd3MgPSBmdW5jdGlvbiAoZGF0YSwgbm90aWZ5QXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbmZvID0gbm90aWZ5QXJncy52aXJ0dWFsSW5mbyA9IG5vdGlmeUFyZ3MudmlydHVhbEluZm8gfHwgdGhpcy5nZXREYXRhKCk7XG4gICAgICAgICAgICB2YXIgeEF4aXMgPSBpbmZvLnNlbnRpbmVsSW5mbyAmJiBpbmZvLnNlbnRpbmVsSW5mby5heGlzID09PSAnWCc7XG4gICAgICAgICAgICB2YXIgcGFnZSA9ICF4QXhpcyAmJiBpbmZvLmxvYWROZXh0ICYmICFpbmZvLmxvYWRTZWxmID8gaW5mby5uZXh0SW5mby5wYWdlIDogaW5mby5wYWdlO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgdmFyIGNlbnRlciA9IH5+KHRoaXMubW9kZWwucGFnZVNpemUgLyAyKTtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5nZXRCbG9ja0luZGV4ZXMocGFnZSk7XG4gICAgICAgICAgICB2YXIgbG9hZGVkQmxvY2tzID0gW107XG4gICAgICAgICAgICB0aGlzLmNoZWNrQW5kUmVzZXRDYWNoZShub3RpZnlBcmdzLnJlcXVlc3RUeXBlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIGluZm8uYmxvY2tJbmRleGVzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVbdmFsdWVdID0gX3RoaXMucm93TW9kZWxHZW5lcmF0b3IucmVmcmVzaFJvd3MoX3RoaXMuY2FjaGVbdmFsdWVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5mby5ibG9ja0luZGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzQmxvY2tBdmFpbGFibGUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dzID0gX3RoaXMucm93TW9kZWxHZW5lcmF0b3IuZ2VuZXJhdGVSb3dzKGRhdGEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpcnR1YWxJbmZvOiBpbmZvLCBzdGFydEluZGV4OiBfdGhpcy5nZXRTdGFydEluZGV4KHZhbHVlLCBkYXRhKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lZGlhbiA9IH5+TWF0aC5tYXgocm93cy5sZW5ndGgsIF90aGlzLm1vZGVsLnBhZ2VTaXplKSAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNCbG9ja0F2YWlsYWJsZShpbmRleGVzWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVbaW5kZXhlc1swXV0gPSByb3dzLnNsaWNlKDAsIG1lZGlhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKGluZGV4ZXNbMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYWNoZVtpbmRleGVzWzFdXSA9IHJvd3Muc2xpY2UobWVkaWFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggJiYgIXhBeGlzICYmIF90aGlzLmNhY2hlW3ZhbHVlXSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYWNoZVt2YWx1ZV0gPSBfdGhpcy51cGRhdGVHcm91cFJvdyhfdGhpcy5jYWNoZVt2YWx1ZV0sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2guYXBwbHkocmVzdWx0LCBfdGhpcy5jYWNoZVt2YWx1ZV0pO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2FkZWRCbG9ja3MucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbmZvLmJsb2NrSW5kZXhlcyA9IGxvYWRlZEJsb2NrcztcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0QmxvY2tJbmRleGVzID0gZnVuY3Rpb24gKHBhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBbcGFnZSArIChwYWdlIC0gMSksIHBhZ2UgKiAyXTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRQYWdlID0gZnVuY3Rpb24gKGJsb2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gYmxvY2sgJSAyID09PSAwID8gYmxvY2sgLyAyIDogKGJsb2NrICsgMSkgLyAyO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmlzQmxvY2tBdmFpbGFibGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSBpbiB0aGlzLmNhY2hlO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBhZ2U6IHRoaXMubW9kZWwuY3VycmVudFBhZ2UsXG4gICAgICAgICAgICAgICAgYmxvY2tJbmRleGVzOiB0aGlzLmdldEJsb2NrSW5kZXhlcyh0aGlzLm1vZGVsLmN1cnJlbnRQYWdlKSxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdkb3duJyxcbiAgICAgICAgICAgICAgICBjb2x1bW5JbmRleGVzOiB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0U3RhcnRJbmRleCA9IGZ1bmN0aW9uIChibGssIGRhdGEsIGZ1bGwpIHtcbiAgICAgICAgICAgIGlmIChmdWxsID09PSB2b2lkIDApIHsgZnVsbCA9IHRydWU7IH1cbiAgICAgICAgICAgIHZhciBwYWdlID0gdGhpcy5nZXRQYWdlKGJsayk7XG4gICAgICAgICAgICB2YXIgZXZlbiA9IGJsayAlIDIgPT09IDA7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAocGFnZSAtIDEpICogdGhpcy5tb2RlbC5wYWdlU2l6ZTtcbiAgICAgICAgICAgIHJldHVybiBmdWxsIHx8ICFldmVuID8gaW5kZXggOiBpbmRleCArIH5+KHRoaXMubW9kZWwucGFnZVNpemUgLyAyKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleGVzID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoY29udGVudCA9PT0gdm9pZCAwKSB7IGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZDsgfVxuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBzTGVmdCA9IGNvbnRlbnQuc2Nyb2xsTGVmdCB8IDA7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuY09mZnNldHMpO1xuICAgICAgICAgICAgdmFyIGNXaWR0aCA9IGNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICBzTGVmdCA9IE1hdGgubWluKHRoaXMuY09mZnNldHNba2V5cy5sZW5ndGggLSAxXSAtIGNXaWR0aCwgc0xlZnQpO1xuICAgICAgICAgICAgdmFyIGNhbFdpZHRoID0gZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlID8gMiAqIGNXaWR0aCA6IGNXaWR0aCAvIDI7XG4gICAgICAgICAgICB2YXIgbGVmdCA9IHNMZWZ0ICsgY1dpZHRoICsgKHNMZWZ0ID09PSAwID8gY2FsV2lkdGggOiAwKTtcbiAgICAgICAgICAgIGtleXMuc29tZShmdW5jdGlvbiAob2Zmc2V0LCBpbmR4LCBpbnB1dCkge1xuICAgICAgICAgICAgICAgIHZhciBpT2Zmc2V0ID0gTnVtYmVyKG9mZnNldCk7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldFZhbCA9IF90aGlzLmNPZmZzZXRzW29mZnNldF07XG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlciA9IHNMZWZ0IC0gY2FsV2lkdGggPD0gb2Zmc2V0VmFsICYmIGxlZnQgKyBjYWxXaWR0aCA+PSBvZmZzZXRWYWw7XG4gICAgICAgICAgICAgICAgaWYgKGJvcmRlcikge1xuICAgICAgICAgICAgICAgICAgICBpbmRleGVzLnB1c2goaU9mZnNldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBsZWZ0ICsgY2FsV2lkdGggPCBvZmZzZXRWYWw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmNoZWNrQW5kUmVzZXRDYWNoZSA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBjbGVhciA9IFsncGFnaW5nJywgJ3JlZnJlc2gnLCAnc29ydGluZycsICdmaWx0ZXJpbmcnLCAnc2VhcmNoaW5nJywgJ2dyb3VwaW5nJywgJ3VuZ3JvdXBpbmcnXVxuICAgICAgICAgICAgICAgIC5zb21lKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gYWN0aW9uID09PSB2YWx1ZTsgfSk7XG4gICAgICAgICAgICBpZiAoY2xlYXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy5ncm91cHMgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjbGVhcjtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5yZWZyZXNoQ29sT2Zmc2V0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY29sID0gMDtcbiAgICAgICAgICAgIHRoaXMuY09mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIHZhciBnTGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBjTGVuID0gY29scy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgaXNWaXNpYmxlID0gZnVuY3Rpb24gKGNvbHVtbikgeyByZXR1cm4gY29sdW1uLnZpc2libGUgJiZcbiAgICAgICAgICAgICAgICAoIV90aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLnNob3dHcm91cGVkQ29sdW1uID8gX3RoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHVtbi5maWVsZCkgPCAwIDogY29sdW1uLnZpc2libGUpOyB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGMsIG4pIHsgcmV0dXJuIF90aGlzLmNPZmZzZXRzW25dID0gKF90aGlzLmNPZmZzZXRzW24gLSAxXSB8IDApICsgMzA7IH0pO1xuICAgICAgICAgICAgQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkoY0xlbikpLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiBjb2wrKzsgfSkuZm9yRWFjaChmdW5jdGlvbiAoYmxvY2ssIGkpIHtcbiAgICAgICAgICAgICAgICBibG9jayA9IGJsb2NrICsgZ0xlbjtcbiAgICAgICAgICAgICAgICBfdGhpcy5jT2Zmc2V0c1tibG9ja10gPSAoX3RoaXMuY09mZnNldHNbYmxvY2sgLSAxXSB8IDApICsgKGlzVmlzaWJsZShjb2xzW2ldKSA/IHBhcnNlSW50KGNvbHNbaV0ud2lkdGgsIDEwKSA6IDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUudXBkYXRlR3JvdXBSb3cgPSBmdW5jdGlvbiAoY3VycmVudCwgYmxvY2spIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY3VycmVudEZpcnN0ID0gY3VycmVudFswXTtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmNhY2hlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKGtleSkgPCBibG9jaykge1xuICAgICAgICAgICAgICAgICAgICByb3dzID0gcm93cy5jb25jYXQoX3RoaXMuY2FjaGVba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY3VycmVudEZpcnN0LmlzRGF0YVJvdyB8fCBibG9jayAlIDIgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdGVHcm91cChjdXJyZW50LCByb3dzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5pdGVyYXRlR3JvdXAgPSBmdW5jdGlvbiAoY3VycmVudCwgcm93cykge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaXJzdCA9IGN1cnJlbnRbMF07XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Rmlyc3QuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaXNQcmVzZW50ID0gY3VycmVudC5zb21lKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcm93cy5zb21lKGZ1bmN0aW9uIChvUm93LCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gb1JvdyAmJiBvUm93LmRhdGEuZmllbGQgIT09IHVuZGVmaW5lZCAmJiBvUm93LmRhdGEuZmllbGQgPT09IHJvdy5kYXRhLmZpZWxkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBvUm93LmRhdGEua2V5ID09PSByb3cuZGF0YS5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpc1ByZXNlbnQpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50LnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IHRoaXMuaXRlcmF0ZUdyb3VwKGN1cnJlbnQsIHJvd3Muc2xpY2Uob2Zmc2V0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmNhY2hlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHJvd3MgPSByb3dzLmNvbmNhdChfdGhpcy5jYWNoZVtrZXldKTsgfSk7XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yID0gVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3ZpcnR1YWwtcm93LW1vZGVsLWdlbmVyYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gNjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vcmVuZGVyZXIvZWRpdC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2Jvb2xlYW4tZWRpdC1jZWxsXCIsIFwiLi4vcmVuZGVyZXIvZHJvcGRvd24tZWRpdC1jZWxsXCIsIFwiLi4vcmVuZGVyZXIvbnVtZXJpYy1lZGl0LWNlbGxcIiwgXCIuLi9yZW5kZXJlci9kZWZhdWx0LWVkaXQtY2VsbFwiLCBcIi4vaW5saW5lLWVkaXRcIiwgXCIuL2JhdGNoLWVkaXRcIiwgXCIuL2RpYWxvZy1lZGl0XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgZWoyX2Jhc2VfNCwgZXZlbnRzLCBlZGl0X3JlbmRlcmVyXzEsIGJvb2xlYW5fZWRpdF9jZWxsXzEsIGRyb3Bkb3duX2VkaXRfY2VsbF8xLCBudW1lcmljX2VkaXRfY2VsbF8xLCBkZWZhdWx0X2VkaXRfY2VsbF8xLCBpbmxpbmVfZWRpdF8xLCBiYXRjaF9lZGl0XzEsIGRpYWxvZ19lZGl0XzEsIGVqMl9wb3B1cHNfMSwgdXRpbF8xLCBlajJfcG9wdXBzXzIsIGVqMl9pbnB1dHNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRWRpdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbFR5cGUgPSB7XG4gICAgICAgICAgICAgICAgJ2Ryb3Bkb3duZWRpdCc6IGRyb3Bkb3duX2VkaXRfY2VsbF8xLkRyb3BEb3duRWRpdENlbGwsXG4gICAgICAgICAgICAgICAgJ251bWVyaWNlZGl0JzogbnVtZXJpY19lZGl0X2NlbGxfMS5OdW1lcmljRWRpdENlbGwsICdib29sZWFuZWRpdCc6IGJvb2xlYW5fZWRpdF9jZWxsXzEuQm9vbGVhbkVkaXRDZWxsLCAnZGVmYXVsdCc6IGRlZmF1bHRfZWRpdF9jZWxsXzEuRGVmYXVsdEVkaXRDZWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lZGl0VHlwZSA9IHsgJ2lubGluZSc6IGlubGluZV9lZGl0XzEuSW5saW5lRWRpdCwgJ25vcm1hbCc6IGlubGluZV9lZGl0XzEuSW5saW5lRWRpdCwgJ2JhdGNoJzogYmF0Y2hfZWRpdF8xLkJhdGNoRWRpdCwgJ2RpYWxvZyc6IGRpYWxvZ19lZGl0XzEuRGlhbG9nRWRpdCB9O1xuICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVkaXRPYmooKTtcbiAgICAgICAgfVxuICAgICAgICBFZGl0LnByb3RvdHlwZS51cGRhdGVDb2xUeXBlT2JqID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucGFyZW50LmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBjb2wuZWRpdCA9IGVqMl9iYXNlXzIuZXh0ZW5kKG5ldyB0aGlzLmVkaXRDZWxsVHlwZVtjb2wuZWRpdFR5cGUgJiYgdGhpcy5lZGl0Q2VsbFR5cGVbY29sLmVkaXRUeXBlXSA/XG4gICAgICAgICAgICAgICAgICAgIGNvbC5lZGl0VHlwZSA6ICdkZWZhdWx0J10odGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IpLCBjb2wuZWRpdCB8fCB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2VkaXQnO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBuZXdQcm9wID0gZS5wcm9wZXJ0aWVzO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGUucHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93QWRkaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dEZWxldGluZyc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93RWRpdGluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dBZGRpbmcgfHwgZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0aW5nIHx8IGdPYmouZWRpdFNldHRpbmdzLmFsbG93RGVsZXRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxFbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdtb2RlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRWRpdE9iaigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmoucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS51cGRhdGVFZGl0T2JqID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdE1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IGVkaXRfcmVuZGVyZXJfMS5FZGl0UmVuZGVyKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZSA9IG5ldyB0aGlzLmVkaXRUeXBlW3RoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlXSh0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvciwgdGhpcy5yZW5kZXJlcik7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmluaXRpYWxFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbFR5cGVPYmooKTtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUFsZXJ0RGxnKCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNvbmZpcm1EbGcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICd0b3VjaHN0YXJ0JywgdGhpcy50YXBFdmVudCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICd0b3VjaHN0YXJ0JywgdGhpcy50YXBFdmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnRhcEV2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldFVzZXJBZ2VudCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRhcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcHBlZCA9IHNldFRpbWVvdXQodGhpcy50aW1lb3V0SGFuZGxlcigpLCAzMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGFwcGVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5kb3VibGVUYXAsIGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcHBlZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5nZXRVc2VyQWdlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdXNlckFnZW50ID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHJldHVybiAvaXBob25lfGlwb2R8aXBhZC8udGVzdCh1c2VyQWdlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS50aW1lb3V0SGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudGFwcGVkID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKHRyKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRpbmcgfHwgZ09iai5pc0VkaXQgfHwgZ09iai5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2JhdGNoJykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ09iai5nZXRTZWxlY3RlZFJvd3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygnRWRpdE9wZXJhdGlvbkFsZXJ0JywgdGhpcy5hbGVydERPYmopO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRyKSB7XG4gICAgICAgICAgICAgICAgdHIgPSBnT2JqLmdldFNlbGVjdGVkUm93cygpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5zdGFydEVkaXQodHIpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9vbGJhcigpO1xuICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2JhdGNoJyAmJiB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3Muc2hvd0NvbmZpcm1EaWFsb2dcbiAgICAgICAgICAgICAgICAmJiB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXVwZGF0ZWR0ZCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygnQ2FuY2VsRWRpdCcsIHRoaXMuZGlhbG9nT2JqKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnJlZnJlc2hUb29sYmFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MuYWxsb3dBZGRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuYWRkUmVjb3JkKGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9vbGJhcigpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0RlbGV0aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQoZ09iai5zZWxlY3RlZFJvd0luZGV4KSB8fCBnT2JqLnNlbGVjdGVkUm93SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygnRGVsZXRlT3BlcmF0aW9uQWxlcnQnLCB0aGlzLmFsZXJ0RE9iaik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouZWRpdFNldHRpbmdzLnNob3dEZWxldGVDb25maXJtRGlhbG9nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygnQ29uZmlybURlbGV0ZScsIHRoaXMuZGlhbG9nT2JqKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5kZWxldGVSZWNvcmQoZmllbGRuYW1lLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVsZXRlUm93ID0gZnVuY3Rpb24gKHRyKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZVJlY29yZChudWxsLCB0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVtwYXJzZUludCh0ci5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApXSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcgJiYgdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLnNob3dDb25maXJtRGlhbG9nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCdCYXRjaFNhdmVDb25maXJtJywgdGhpcy5kaWFsb2dPYmopO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW5kRWRpdGluZygpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS51cGRhdGVDZWxsID0gZnVuY3Rpb24gKHJvd0luZGV4LCBmaWVsZCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS51cGRhdGVDZWxsKHJvd0luZGV4LCBmaWVsZCwgdmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS51cGRhdGVSb3cgPSBmdW5jdGlvbiAoaW5kZXgsIGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS51cGRhdGVSb3coaW5kZXgsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5iYXRjaENhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VFZGl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmJhdGNoU2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZW5kRWRpdCgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5lZGl0Q2VsbCA9IGZ1bmN0aW9uIChpbmRleCwgZmllbGQpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5lZGl0Q2VsbChpbmRleCwgZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5lZGl0Rm9ybVZhbGlkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZm9ybU9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1PYmoudmFsaWRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0QmF0Y2hDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWRpdE1vZHVsZS5nZXRCYXRjaENoYW5nZXMgPyB0aGlzLmVkaXRNb2R1bGUuZ2V0QmF0Y2hDaGFuZ2VzKCkgOiB7fTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0Q3VycmVudEVkaXRDZWxsRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvYmogPSB0aGlzLmdldEN1cnJlbnRFZGl0ZWREYXRhKHRoaXMuZm9ybU9iai5lbGVtZW50LCB7fSk7XG4gICAgICAgICAgICByZXR1cm4gb2JqW09iamVjdC5rZXlzKG9iailbMF1dO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5zYXZlQ2VsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5zYXZlQ2VsbCgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5lbmRFZGl0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmVuZEVkaXQoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuc2hvd0RpYWxvZyA9IGZ1bmN0aW9uIChjb250ZW50LCBvYmopIHtcbiAgICAgICAgICAgIG9iai5jb250ZW50ID0gJzxkaXY+JyArIHRoaXMubDEwbi5nZXRDb25zdGFudChjb250ZW50KSArICc8L2Rpdj4nO1xuICAgICAgICAgICAgb2JqLnNob3coKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0VmFsdWVGcm9tVHlwZSA9IGZ1bmN0aW9uIChjb2wsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gdmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKGNvbC50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gIWVqMl9iYXNlXzQuaXNOdWxsT3JVbmRlZmluZWQocGFyc2VGbG9hdCh2YWx1ZSkpID8gcGFyc2VGbG9hdCh2YWx1ZSkgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5lZGl0VHlwZSAhPT0gJ2Jvb2xlYW5lZGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gdmFsdWUgPT09IHRoaXMubDEwbi5nZXRDb25zdGFudCgnVHJ1ZScpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmVkaXRUeXBlICE9PSAnZGF0ZXBpY2tlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlc3Ryb3lUb29sVGlwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtdG9vbHRpcCcpKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZWxlbWVudHNfMSA9IGVsZW1lbnRzOyBfaSA8IGVsZW1lbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBlbGVtZW50c18xW19pXTtcbiAgICAgICAgICAgICAgICBlbGVtLmVqMl9pbnN0YW5jZXNbMF0uZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5jcmVhdGVDb25maXJtRGxnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmogPSB0aGlzLmRsZ1dpZGdldChbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5kbGdPay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBidXR0b25Nb2RlbDogeyBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ09LQnV0dG9uJyksIGNzc0NsYXNzOiAnZS1wcmltYXJ5JywgaXNQcmltYXJ5OiB0cnVlIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuZGxnQ2FuY2VsLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNzc0NsYXNzOiAnZS1mbGF0JywgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdDYW5jZWxCdXR0b24nKSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSwgJ0VkaXRDb25maXJtJyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmNyZWF0ZUFsZXJ0RGxnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hbGVydERPYmogPSB0aGlzLmRsZ1dpZGdldChbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5hbGVydENsaWNrLmJpbmQodGhpcyksIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnT0tCdXR0b24nKSwgY3NzQ2xhc3M6ICdlLWZsYXQnLCBpc1ByaW1hcnk6IHRydWUgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sICdFZGl0QWxlcnQnKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYWxlcnRDbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYWxlcnRET2JqLmhpZGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGxnV2lkZ2V0ID0gZnVuY3Rpb24gKGJ0bk9wdGlvbnMsIG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyBuYW1lIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgc2hvd0Nsb3NlSWNvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNNb2RhbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uRXNjYXBlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5wYXJlbnQuZWxlbWVudCxcbiAgICAgICAgICAgICAgICB3aWR0aDogJzMyMHB4JyxcbiAgICAgICAgICAgICAgICBhbmltYXRpb25TZXR0aW5nczogeyBlZmZlY3Q6ICdOb25lJyB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb3B0aW9ucy5idXR0b25zID0gYnRuT3B0aW9ucztcbiAgICAgICAgICAgIHZhciBvYmogPSBuZXcgZWoyX3BvcHVwc18xLkRpYWxvZyhvcHRpb25zKTtcbiAgICAgICAgICAgIG9iai5hcHBlbmRUbyhkaXYpO1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGxnQ2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouaGlkZSgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kbGdPayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZGlhbG9nT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZGxnLWNvbnRlbnQnKS5maXJzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ29uZmlybURlbGV0ZScpOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVsZXRlUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5sMTBuLmdldENvbnN0YW50KCdDYW5jZWxFZGl0Jyk6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5jbG9zZUVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0JhdGNoU2F2ZUNvbmZpcm0nKTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRFZGl0aW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5sMTBuLmdldENvbnN0YW50KCdCYXRjaFNhdmVMb3N0Q2hhbmdlcycpOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVBY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRsZ0NhbmNlbCgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmF1dG9Db2wsIHRoaXMudXBkYXRlQ29sVHlwZU9iaiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudG9vbHRpcERlc3Ryb3ksIHRoaXMuZGVzdHJveVRvb2xUaXAsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnByZXZlbnRCYXRjaCwgdGhpcy5wcmV2ZW50QmF0Y2gsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlc3Ryb3lGb3JtLCB0aGlzLmRlc3Ryb3lGb3JtLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCB0aGlzLm9uQWN0aW9uQmVnaW4uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgdGhpcy5hY3Rpb25Db21wbGV0ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLndpcmVFdmVudHMsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWFsRW5kKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5hdXRvQ29sLCB0aGlzLnVwZGF0ZUNvbFR5cGVPYmopO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy50b29sdGlwRGVzdHJveSwgdGhpcy5kZXN0cm95VG9vbFRpcCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnByZXZlbnRCYXRjaCwgdGhpcy5wcmV2ZW50QmF0Y2gpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kZXN0cm95Rm9ybSwgdGhpcy5kZXN0cm95Rm9ybSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgdGhpcy5hY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25CZWdpbiwgdGhpcy5vbkFjdGlvbkJlZ2luKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy51bndpcmVFdmVudHMpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5hY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5yZXF1ZXN0VHlwZSAhPT0gJ2FkZCcgJiYgZS5yZXF1ZXN0VHlwZSAhPT0gJ2JlZ2luRWRpdCcgJiYgZS5yZXF1ZXN0VHlwZSAhPT0gJ2RlbGV0ZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0Q3VycmVudEVkaXRlZERhdGEgPSBmdW5jdGlvbiAoZm9ybSwgZWRpdGVkRGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpbnB1dHMgPSBbXS5zbGljZS5jYWxsKGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmUtZmllbGQnKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaW5wdXRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGdPYmouZ2V0Q29sdW1uQnlVaWQoaW5wdXRzW2ldLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoY29sKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sLmVkaXQucmVhZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGVqMl9iYXNlXzIuZ2V0VmFsdWUodGVtcCwgd2luZG93KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGdPYmouZWRpdE1vZHVsZS5nZXRWYWx1ZUZyb21UeXBlKGNvbCwgY29sLmVkaXQucmVhZChpbnB1dHNbaV0pKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfNC5zZXRWYWx1ZShjb2wuZmllbGQsIHZhbHVlLCBlZGl0ZWREYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWRpdGVkRGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUub25BY3Rpb25CZWdpbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgJiYgdGhpcy5mb3JtT2JqICYmICF0aGlzLmZvcm1PYmouaXNEZXN0cm95ZWQgJiYgIWUuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95Rm9ybSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveVdpZGdldHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVzdHJveVdpZGdldHMgPSBmdW5jdGlvbiAoY29scykge1xuICAgICAgICAgICAgY29scyA9IGNvbHMgPyBjb2xzIDogdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sc18xID0gY29sczsgX2kgPCBjb2xzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGNvbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC5lZGl0LmRlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sLmVkaXQuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVzdHJveUZvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB7fSk7XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtT2JqICYmICF0aGlzLmZvcm1PYmouaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1PYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sdGlwRGVzdHJveSwge30pO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLmRpYWxvZ09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmFsZXJ0RE9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLnVud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5rZXlQcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc3dpdGNoIChlLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2luc2VydCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2YyJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRjb250ZW50JykgJiYgIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXBvcHVwLW9wZW4nKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VzY2FwZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5wcmV2ZW50QmF0Y2ggPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50T2JqID0gYXJncztcbiAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygnQmF0Y2hTYXZlTG9zdENoYW5nZXMnLCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmV4ZWN1dGVBY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZlbnRPYmouaGFuZGxlci5jYWxsKHRoaXMucHJldmVudE9iai5pbnN0YW5jZSwgdGhpcy5wcmV2ZW50T2JqLmFyZzEsIHRoaXMucHJldmVudE9iai5hcmcyLCB0aGlzLnByZXZlbnRPYmouYXJnMywgdGhpcy5wcmV2ZW50T2JqLmFyZzQsIHRoaXMucHJldmVudE9iai5hcmc1LCB0aGlzLnByZXZlbnRPYmouYXJnNiwgdGhpcy5wcmV2ZW50T2JqLmFyZzcpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5hcHBseUZvcm1WYWxpZGF0aW9uID0gZnVuY3Rpb24gKGNvbHMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGZvcm0nKTtcbiAgICAgICAgICAgIHZhciBydWxlcyA9IHt9O1xuICAgICAgICAgICAgY29scyA9IGNvbHMgPyBjb2xzIDogZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2xzXzIgPSBjb2xzOyBfaSA8IGNvbHNfMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sc18yW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnZhbGlkYXRpb25SdWxlcyAmJiBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJyMnICsgZ09iai5lbGVtZW50LmlkICsgY29sLmZpZWxkKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVsZXNbY29sLmZpZWxkXSA9IGNvbC52YWxpZGF0aW9uUnVsZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5mb3JtT2JqID0gbmV3IGVqMl9pbnB1dHNfMS5Gb3JtVmFsaWRhdG9yKGZvcm0sIHtcbiAgICAgICAgICAgICAgICBydWxlczogcnVsZXMsXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbkNvbXBsZXRlOiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy52YWxpZGF0aW9uQ29tcGxldGUoYXJncyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjdXN0b21QbGFjZW1lbnQ6IGZ1bmN0aW9uIChpbnB1dEVsZW1lbnQsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnZhbEVycm9yUGxhY2VtZW50KGlucHV0RWxlbWVudCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS52YWxFcnJvclBsYWNlbWVudCA9IGZ1bmN0aW9uIChpbnB1dEVsZW1lbnQsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRkID0gdXRpbF8xLnBhcmVudHNVbnRpbChpbnB1dEVsZW1lbnQsICdlLXJvd2NlbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRkLmVqMl9pbnN0YW5jZXMgfHwgIXRkLmVqMl9pbnN0YW5jZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b29sdGlwID0gbmV3IGVqMl9wb3B1cHNfMi5Ub29sdGlwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5zT246ICdjdXN0b20nLCBjb250ZW50OiBlcnJvciwgcG9zaXRpb246ICdib3R0b20gY2VudGVyJywgY3NzQ2xhc3M6ICdlLWdyaWRlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IHsgb3BlbjogeyBlZmZlY3Q6ICdOb25lJyB9LCBjbG9zZTogeyBlZmZlY3Q6ICdOb25lJyB9IH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXAuYXBwZW5kVG8odGQpO1xuICAgICAgICAgICAgICAgICAgICB0b29sdGlwLm9wZW4odGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGQuZWoyX2luc3RhbmNlc1swXS5jb250ZW50ID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS52YWxpZGF0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gdXRpbF8xLnBhcmVudHNVbnRpbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgYXJncy5pbnB1dE5hbWUpLCAnZS1yb3djZWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW0gJiYgZWxlbS5lajJfaW5zdGFuY2VzICYmIGVsZW0uZWoyX2luc3RhbmNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRPYmogPSBlbGVtLmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLnN0YXR1cyA9PT0gJ2ZhaWx1cmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0T2JqLm9wZW4odXRpbF8xLnBhcmVudHNVbnRpbChhcmdzLmVsZW1lbnQsICdlLXJvd2NlbGwnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0T2JqLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdE9iai5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRWRpdDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRWRpdCA9IEVkaXQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA3MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9pbnB1dHNfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBOdW1lcmljRWRpdENlbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBOdW1lcmljRWRpdENlbGwocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBOdW1lcmljRWRpdENlbGwucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWZpZWxkJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyBhcmdzLmNvbHVtbi5maWVsZCwgbmFtZTogYXJncy5jb2x1bW4uZmllbGQsICdlLW1hcHBpbmd1aWQnOiBhcmdzLmNvbHVtbi51aWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0VkaXRDZWxsLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmVqMl9pbnN0YW5jZXNbMF0udmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNFZGl0Q2VsbC5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlzSW5saW5lID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnO1xuICAgICAgICAgICAgdGhpcy5vYmogPSBuZXcgZWoyX2lucHV0c18xLk51bWVyaWNUZXh0Qm94KGVqMl9iYXNlXzEuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGFyc2VGbG9hdChhcmdzLnJvd0RhdGFbY29sLmZpZWxkXSksIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBpc0lubGluZSA/ICcnIDogYXJncy5jb2x1bW4uaGVhZGVyVGV4dCxcbiAgICAgICAgICAgICAgICBlbmFibGVkOiB1dGlsXzEuaXNFZGl0YWJsZShhcmdzLmNvbHVtbiwgYXJncy5yZXF1ZXN0VHlwZSwgYXJncy5lbGVtZW50KSxcbiAgICAgICAgICAgICAgICBmbG9hdExhYmVsVHlwZTogdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnID8gJ05ldmVyJyA6ICdBbHdheXMnLFxuICAgICAgICAgICAgfSwgY29sLmVkaXQucGFyYW1zKSk7XG4gICAgICAgICAgICB0aGlzLm9iai5hcHBlbmRUbyhhcmdzLmVsZW1lbnQpO1xuICAgICAgICAgICAgYXJncy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnbmFtZScsIGNvbC5maWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNFZGl0Q2VsbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9iaiAmJiAhdGhpcy5vYmouaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBOdW1lcmljRWRpdENlbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLk51bWVyaWNFZGl0Q2VsbCA9IE51bWVyaWNFZGl0Q2VsbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9udW1lcmljLWVkaXQtY2VsbC5qc1xuLy8gbW9kdWxlIGlkID0gNzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzcyX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCJcbi8vIG1vZHVsZSBpZCA9IDcyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9pbmxpbmUtZWRpdC1yZW5kZXJlclwiLCBcIi4vYmF0Y2gtZWRpdC1yZW5kZXJlclwiLCBcIi4vZGlhbG9nLWVkaXQtcmVuZGVyZXJcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGlubGluZV9lZGl0X3JlbmRlcmVyXzEsIGJhdGNoX2VkaXRfcmVuZGVyZXJfMSwgZGlhbG9nX2VkaXRfcmVuZGVyZXJfMSwgZWoyX2Jhc2VfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRWRpdFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEVkaXRSZW5kZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5lZGl0VHlwZSA9IHtcbiAgICAgICAgICAgICAgICAnaW5saW5lJzogaW5saW5lX2VkaXRfcmVuZGVyZXJfMS5JbmxpbmVFZGl0UmVuZGVyLFxuICAgICAgICAgICAgICAgICdub3JtYWwnOiBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLklubGluZUVkaXRSZW5kZXIsICdiYXRjaCc6IGJhdGNoX2VkaXRfcmVuZGVyZXJfMS5CYXRjaEVkaXRSZW5kZXIsICdkaWFsb2cnOiBkaWFsb2dfZWRpdF9yZW5kZXJlcl8xLkRpYWxvZ0VkaXRSZW5kZXJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgdGhpcy5lZGl0VHlwZVt0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZV0ocGFyZW50LCBzZXJ2aWNlTG9jYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgRWRpdFJlbmRlci5wcm90b3R5cGUuYWRkTmV3ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkTmV3KHRoaXMuZ2V0RWRpdEVsZW1lbnRzKGFyZ3MpLCBhcmdzKTtcbiAgICAgICAgICAgIHRoaXMuY29udmVydFdpZGdldChhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdFJlbmRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlKHRoaXMuZ2V0RWRpdEVsZW1lbnRzKGFyZ3MpLCBhcmdzKTtcbiAgICAgICAgICAgIHRoaXMuY29udmVydFdpZGdldChhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdFJlbmRlci5wcm90b3R5cGUuY29udmVydFdpZGdldCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGlzRm9jdXNlZDtcbiAgICAgICAgICAgIHZhciBjZWxsO1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGZvcm0nKTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gZ09iai5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2JhdGNoJyA/IGdPYmouY29sdW1ucyA6IFtnT2JqLmdldENvbHVtbkJ5RmllbGQoYXJncy5jb2x1bW5OYW1lKV07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHNfMSA9IGNvbHM7IF9pIDwgY29sc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2xzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICghY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhbHVlID0gY29sLnZhbHVlQWNjZXNzb3IoY29sLmZpZWxkLCBhcmdzLnJvd0RhdGEsIGNvbCk7XG4gICAgICAgICAgICAgICAgY2VsbCA9IGZvcm0ucXVlcnlTZWxlY3RvcignW2UtbWFwcGluZ3VpZD0nICsgY29sLnVpZCArICddJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjb2wuZWRpdC53cml0ZTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXAgPSBlajJfYmFzZV8xLmdldFZhbHVlKHRlbXAsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbC5lZGl0LndyaXRlKHsgcm93RGF0YTogYXJncy5yb3dEYXRhLCBlbGVtZW50OiBjZWxsLCBjb2x1bW46IGNvbCwgcmVxdWVzdFR5cGU6IGFyZ3MucmVxdWVzdFR5cGUgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0ZvY3VzZWQgJiYgIWNlbGwuZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNFbGVtZW50KGNlbGwpO1xuICAgICAgICAgICAgICAgICAgICBpc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdFJlbmRlci5wcm90b3R5cGUuZm9jdXNFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICAgIGVsZW0uZm9jdXMoKTtcbiAgICAgICAgICAgIGlmIChlbGVtLmNsYXNzTGlzdC5jb250YWlucygnZS1kZWZhdWx0Y2VsbCcpKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5zZXRTZWxlY3Rpb25SYW5nZShlbGVtLnZhbHVlLmxlbmd0aCwgZWxlbS52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0UmVuZGVyLnByb3RvdHlwZS5nZXRFZGl0RWxlbWVudHMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IHt9O1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBnT2JqLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnID8gZ09iai5jb2x1bW5zIDogW2dPYmouZ2V0Q29sdW1uQnlGaWVsZChhcmdzLmNvbHVtbk5hbWUpXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sc18yID0gY29sczsgX2kgPCBjb2xzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGNvbHNfMltfaV07XG4gICAgICAgICAgICAgICAgaWYgKCFjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY29sLnZhbHVlQWNjZXNzb3IoY29sLmZpZWxkLCBhcmdzLnJvd0RhdGEsIGNvbCk7XG4gICAgICAgICAgICAgICAgdmFyIHRBcmdzID0geyBjb2x1bW46IGNvbCwgdmFsdWU6IHZhbHVlLCB0eXBlOiBhcmdzLnJlcXVlc3RUeXBlIH07XG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjb2wuZWRpdC5jcmVhdGU7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlucHV0ID0gY29sLmVkaXQuY3JlYXRlKHRBcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IGRpdi5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGlucHV0LnRhZ05hbWUgIT09ICdpbnB1dCcgJiYgaW5wdXQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGlzSW5wdXQgPyBpbnB1dC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpIDogaW5wdXQsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogY29sLmZpZWxkLCAnZS1tYXBwaW5ndWlkJzogY29sLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGdPYmouZWxlbWVudC5pZCArIGNvbC5maWVsZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChpbnB1dCwgWydlLWlucHV0JywgJ2UtZmllbGQnXSwgW10pO1xuICAgICAgICAgICAgICAgIGlmICgoY29sLmlzUHJpbWFyeUtleSB8fCBjb2wuaXNJZGVudGl0eSkgJiYgYXJncy5yZXF1ZXN0VHlwZSA9PT0gJ2JlZ2luRWRpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2NvbC51aWRdID0gaW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudHM7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFZGl0UmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FZGl0UmVuZGVyID0gRWRpdFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIElubGluZUVkaXRSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBJbmxpbmVFZGl0UmVuZGVyKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgSW5saW5lRWRpdFJlbmRlci5wcm90b3R5cGUuYWRkTmV3ID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuICAgICAgICAgICAgYXJncy5yb3cgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJywgeyBjbGFzc05hbWU6ICdlLXJvdyBlLWFkZGVkcm93JyB9KTtcbiAgICAgICAgICAgIHRib2R5Lmluc2VydEJlZm9yZShhcmdzLnJvdywgdGJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBhcmdzLnJvdy5hcHBlbmRDaGlsZCh0aGlzLmdldEVkaXRFbGVtZW50KGVsZW1lbnRzLCBmYWxzZSkpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0UmVuZGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MpIHtcbiAgICAgICAgICAgIGFyZ3Mucm93LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgYXJncy5yb3cuYXBwZW5kQ2hpbGQodGhpcy5nZXRFZGl0RWxlbWVudChlbGVtZW50cywgdHJ1ZSkpO1xuICAgICAgICAgICAgYXJncy5yb3cuY2xhc3NMaXN0LmFkZCgnZS1lZGl0ZWRyb3cnKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW5saW5lRWRpdFJlbmRlci5wcm90b3R5cGUuZ2V0RWRpdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGlzRWRpdCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBnTGVuID0gMDtcbiAgICAgICAgICAgIHZhciBpc0RldGFpbCA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGdPYmouZGV0YWlsVGVtcGxhdGUpIHx8ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGdPYmouY2hpbGRHcmlkKSA/IDEgOiAwO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGdMZW4gPSBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZWRpdGNlbGwgZS1ub3JtYWxlZGl0JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyBjb2xzcGFuOiAoZ09iai5nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aCArIGdMZW4gKyBpc0RldGFpbCkudG9TdHJpbmcoKSB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdmb3JtJywgeyBpZDogZ09iai5lbGVtZW50LmlkICsgJ0VkaXRGb3JtJywgY2xhc3NOYW1lOiAnZS1ncmlkZm9ybScgfSk7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywgeyBjbGFzc05hbWU6ICdlLXRhYmxlIGUtaW5saW5lLWVkaXQnLCBhdHRyczogeyBjZWxsc3BhY2luZzogJzAuMjUnIH0gfSk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChnT2JqLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgIHZhciB0ciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGlmIChpc0RldGFpbCkge1xuICAgICAgICAgICAgICAgIHRyLmluc2VydEJlZm9yZShlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWRldGFpbHJvd2NvbGxhcHNlJyB9KSwgdHIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoaSA8IGdMZW4pIHtcbiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWluZGVudGNlbGwnIH0pKTtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKCFjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRkXzEgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXJvd2NlbGwnLCBhdHRyczogeyBzdHlsZTogJ3RleHQtYWxpZ246JyArIChjb2wudGV4dEFsaWduID8gY29sLnRleHRBbGlnbiA6ICcnKSB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGRfMS5hcHBlbmRDaGlsZChlbGVtZW50c1tjb2wudWlkXSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbC5lZGl0VHlwZSA9PT0gJ2Jvb2xlYW5lZGl0Jykge1xuICAgICAgICAgICAgICAgICAgICB0ZF8xLmNsYXNzTGlzdC5hZGQoJ2UtYm9vbGNlbGwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRfMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgICAgIHRkLmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgICAgICAgcmV0dXJuIHRkO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSW5saW5lRWRpdFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuSW5saW5lRWRpdFJlbmRlciA9IElubGluZUVkaXRSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvaW5saW5lLWVkaXQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDc0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQmF0Y2hFZGl0UmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQmF0Y2hFZGl0UmVuZGVyKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgQmF0Y2hFZGl0UmVuZGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MpIHtcbiAgICAgICAgICAgIGFyZ3MuY2VsbC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGFyZ3MuY2VsbC5hcHBlbmRDaGlsZCh0aGlzLmdldEVkaXRFbGVtZW50KGVsZW1lbnRzLCBhcmdzKSk7XG4gICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LmFkZCgnZS1lZGl0ZWRiYXRjaGNlbGwnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuY2xhc3NMaXN0KGFyZ3Mucm93LCBbJ2UtZWRpdGVkcm93JywgJ2UtYmF0Y2hyb3cnXSwgW10pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXRSZW5kZXIucHJvdG90eXBlLmdldEVkaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nLCB7IGlkOiBnT2JqLmVsZW1lbnQuaWQgKyAnRWRpdEZvcm0nLCBjbGFzc05hbWU6ICdlLWdyaWRmb3JtJyB9KTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZWxlbWVudHNbYXJncy5jb2x1bW5PYmplY3QudWlkXSk7XG4gICAgICAgICAgICBpZiAoYXJncy5jb2x1bW5PYmplY3QuZWRpdFR5cGUgPT09ICdib29sZWFuZWRpdCcpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LmFkZCgnZS1ib29sY2VsbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFhcmdzLmNvbHVtbk9iamVjdC5lZGl0VHlwZSkge1xuICAgICAgICAgICAgICAgIGFyZ3MuY2VsbC5jbGFzc0xpc3QuYWRkKCdlLWlucHV0Ym94Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZm9ybTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEJhdGNoRWRpdFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQmF0Y2hFZGl0UmVuZGVyID0gQmF0Y2hFZGl0UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2JhdGNoLWVkaXQtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfcG9wdXBzXzEsIGVqMl9iYXNlXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGlhbG9nRWRpdFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERpYWxvZ0VkaXRSZW5kZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGlhbG9nRGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLnNldExvY2FsZU9iaiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmFkZE5ldyA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRGlhbG9nKGVsZW1lbnRzLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZURpYWxvZyhlbGVtZW50cywgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmNyZWF0ZURpYWxvZyA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiBnT2JqLmVsZW1lbnQuaWQgKyAnX2RpYWxvZ0VkaXRfd3JhcHBlcicgfSk7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5kaWFsb2cpO1xuICAgICAgICAgICAgdGhpcy5zZXRMb2NhbGVPYmooKTtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqID0gbmV3IGVqMl9wb3B1cHNfMS5EaWFsb2coe1xuICAgICAgICAgICAgICAgIGhlYWRlcjogdGhpcy5pc0VkaXQgPyB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0VkaXRGb3JtVGl0bGUnKSArIGFyZ3MucHJpbWFyeUtleVZhbHVlWzBdIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sMTBuLmdldENvbnN0YW50KCdBZGRGb3JtVGl0bGUnKSwgaXNNb2RhbDogdHJ1ZSwgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLmdldEVkaXRFbGVtZW50KGVsZW1lbnRzKSwgc2hvd0Nsb3NlSWNvbjogdHJ1ZSwgYWxsb3dEcmFnZ2luZzogdHJ1ZSwgY2xvc2U6IHRoaXMuZGVzdHJveS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGNsb3NlT25Fc2NhcGU6IHRydWUsIHdpZHRoOiAnMzMwcHgnLCB0YXJnZXQ6IGdPYmouZWxlbWVudCwgYW5pbWF0aW9uU2V0dGluZ3M6IHsgZWZmZWN0OiAnTm9uZScgfSxcbiAgICAgICAgICAgICAgICBidXR0b25zOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuYnRuQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnU2F2ZUJ1dHRvbicpLCBjc3NDbGFzczogJ2UtcHJpbWFyeScsIGlzUHJpbWFyeTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY2xpY2s6IHRoaXMuYnRuQ2xpY2suYmluZCh0aGlzKSwgYnV0dG9uTW9kZWw6IHsgY3NzQ2xhc3M6ICdlLWZsYXQnLCBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NhbmNlbEJ1dHRvbicpIH0gfV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouYXBwZW5kVG8odGhpcy5kaWFsb2cpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0UmVuZGVyLnByb3RvdHlwZS5idG5DbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sMTBuLmdldENvbnN0YW50KCdDYW5jZWxCdXR0b24nKS50b0xvd2VyQ2FzZSgpID09PSBlLnRhcmdldC5pbm5lclRleHQudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZW5kRWRpdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0UmVuZGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuZGVzdHJveUZvcm0sIHt9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGlhbG9nICYmICF0aGlzLmRpYWxvZ09iai5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZSh0aGlzLmRpYWxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmdldEVkaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IHRoaXMuaXNFZGl0ID8gJ2UtZWRpdGVkcm93JyA6ICdlLWluc2VydGVkcm93JyB9KTtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdmb3JtJywgeyBpZDogZ09iai5lbGVtZW50LmlkICsgJ0VkaXRGb3JtJywgY2xhc3NOYW1lOiAnZS1ncmlkZm9ybScgfSk7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywgeyBjbGFzc05hbWU6ICdlLXRhYmxlJywgYXR0cnM6IHsgY2VsbHNwYWNpbmc6ICc2cHgnIH0gfSk7XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB2YXIgY29scyA9IGdPYmouY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29scy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghY29sc1tpXS52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdHIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFDZWxsID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1yb3djZWxsJywgYXR0cnM6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOmxlZnQ7d2lkdGg6MTkwcHgnIH0gfSk7XG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdsYWJlbCcsIHsgaW5uZXJIVE1MOiBjb2xzW2ldLmZpZWxkIH0pO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2NvbHNbaV0udWlkXS5jbGFzc0xpc3QucmVtb3ZlKCdlLWlucHV0Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uZWRpdFR5cGUgPT09ICdib29sZWFuZWRpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBkYXRhQ2VsbC5hcHBlbmRDaGlsZChlbGVtZW50c1tjb2xzW2ldLnVpZF0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGJsID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdsYWJlbCcsIHsgY2xhc3NOYW1lOiAnZS1ub3NlbGVjdCcsIGF0dHJzOiB7IGZvcjogZWxlbS5pZCwgc3R5bGU6IGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSA/ICcnIDogJ3ZlcnRpY2FsLWFsaWduOiB0b3A7JyB9IH0pO1xuICAgICAgICAgICAgICAgICAgICBsYmwuaW5uZXJIVE1MID0gY29sc1tpXS5oZWFkZXJUZXh0O1xuICAgICAgICAgICAgICAgICAgICBkYXRhQ2VsbC5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YUNlbGwuYXBwZW5kQ2hpbGQobGJsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFDZWxsLmFwcGVuZENoaWxkKGVsZW1lbnRzW2NvbHNbaV0udWlkXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKGRhdGFDZWxsKTtcbiAgICAgICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICAgICAgICAgIHJldHVybiBkaXY7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEaWFsb2dFZGl0UmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5EaWFsb2dFZGl0UmVuZGVyID0gRGlhbG9nRWRpdFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9kaWFsb2ctZWRpdC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJvb2xlYW5FZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEJvb2xlYW5FZGl0Q2VsbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIEJvb2xlYW5FZGl0Q2VsbC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maWVsZCBlLWJvb2xjZWxsJywgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywgdmFsdWU6IGFyZ3MudmFsdWUsICdlLW1hcHBpbmd1aWQnOiBjb2wudWlkLFxuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIGNvbC5maWVsZCwgbmFtZTogY29sLmZpZWxkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5pc0VkaXRhYmxlKGFyZ3MuY29sdW1uLCBhcmdzLnJlcXVlc3RUeXBlLCBhcmdzLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9O1xuICAgICAgICBCb29sZWFuRWRpdENlbGwucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuY2hlY2tlZDtcbiAgICAgICAgfTtcbiAgICAgICAgQm9vbGVhbkVkaXRDZWxsLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBhcmdzLmVsZW1lbnQuc3R5bGUud2lkdGggPSAnYXV0byc7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5FZGl0Q2VsbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW5FZGl0Q2VsbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQm9vbGVhbkVkaXRDZWxsID0gQm9vbGVhbkVkaXRDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2Jvb2xlYW4tZWRpdC1jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA3N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Ryb3Bkb3duc18xLCBlajJfZGF0YV8xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERyb3BEb3duRWRpdENlbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEcm9wRG93bkVkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZmllbGQnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIGFyZ3MuY29sdW1uLmZpZWxkLCBuYW1lOiBhcmdzLmNvbHVtbi5maWVsZCwgdHlwZTogJ3RleHQnLCAnZS1tYXBwaW5ndWlkJzogYXJncy5jb2x1bW4udWlkLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgY29sID0gYXJncy5jb2x1bW47XG4gICAgICAgICAgICB2YXIgaXNJbmxpbmUgPSB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2RpYWxvZyc7XG4gICAgICAgICAgICB0aGlzLm9iaiA9IG5ldyBlajJfZHJvcGRvd25zXzEuRHJvcERvd25MaXN0KGVqMl9iYXNlXzEuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiB0aGlzLnBhcmVudC5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlciA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFTb3VyY2UgOiBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih0aGlzLnBhcmVudC5kYXRhU291cmNlKSxcbiAgICAgICAgICAgICAgICBxdWVyeTogbmV3IGVqMl9kYXRhXzEuUXVlcnkoKS5zZWxlY3QoYXJncy5jb2x1bW4uZmllbGQpLCBlbmFibGVkOiB1dGlsXzEuaXNFZGl0YWJsZShhcmdzLmNvbHVtbiwgYXJncy5yZXF1ZXN0VHlwZSwgYXJncy5lbGVtZW50KSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHsgdmFsdWU6IGFyZ3MuY29sdW1uLmZpZWxkIH0sIHZhbHVlOiBhcmdzLnJvd0RhdGFbYXJncy5jb2x1bW4uZmllbGRdLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5wYXJlbnQuZW5hYmxlUnRsLCBhY3Rpb25Db21wbGV0ZTogdGhpcy5kZEFjdGlvbkNvbXBsZXRlLFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBpc0lubGluZSA/ICcnIDogYXJncy5jb2x1bW4uaGVhZGVyVGV4dCwgcG9wdXBIZWlnaHQ6ICcyMDBweCcsXG4gICAgICAgICAgICAgICAgZmxvYXRMYWJlbFR5cGU6IGlzSW5saW5lID8gJ05ldmVyJyA6ICdBbHdheXMnLFxuICAgICAgICAgICAgfSwgYXJncy5jb2x1bW4uZWRpdC5wYXJhbXMpKTtcbiAgICAgICAgICAgIHRoaXMub2JqLmFwcGVuZFRvKGFyZ3MuZWxlbWVudCk7XG4gICAgICAgICAgICBhcmdzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCduYW1lJywgYXJncy5jb2x1bW4uZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmVqMl9pbnN0YW5jZXNbMF0udmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BEb3duRWRpdENlbGwucHJvdG90eXBlLmRkQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5yZXN1bHQgPSBlLnJlc3VsdC5maWx0ZXIoZnVuY3Rpb24gKHZhbCwgaSwgdmFsdWVzKSB7IHJldHVybiB2YWx1ZXMuaW5kZXhPZih2YWwpID09PSBpOyB9KTtcbiAgICAgICAgICAgIGUucmVzdWx0LnNvcnQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9iaikge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERyb3BEb3duRWRpdENlbGw7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRyb3BEb3duRWRpdENlbGwgPSBEcm9wRG93bkVkaXRDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2Ryb3Bkb3duLWVkaXQtY2VsbC5qc1xuLy8gbW9kdWxlIGlkID0gNzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2lucHV0c18xLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERlZmF1bHRFZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERlZmF1bHRFZGl0Q2VsbChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIERlZmF1bHRFZGl0Q2VsbC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maWVsZCBlLWlucHV0IGUtZGVmYXVsdGNlbGwnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsIHZhbHVlOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChhcmdzLnZhbHVlKSA/IGFyZ3MudmFsdWUgOiAnJywgJ2UtbWFwcGluZ3VpZCc6IGNvbC51aWQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgY29sLmZpZWxkLCBuYW1lOiBjb2wuZmllbGQsIHN0eWxlOiAndGV4dC1hbGlnbjonICsgY29sLnRleHRBbGlnbixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgRGVmYXVsdEVkaXRDZWxsLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBEZWZhdWx0RWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpc0lubGluZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJztcbiAgICAgICAgICAgIGVqMl9pbnB1dHNfMS5JbnB1dC5jcmVhdGVJbnB1dCh7XG4gICAgICAgICAgICAgICAgZWxlbWVudDogYXJncy5lbGVtZW50LCBmbG9hdExhYmVsVHlwZTogdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnID8gJ05ldmVyJyA6ICdBbHdheXMnLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsIGVuYWJsZWQ6IHV0aWxfMS5pc0VkaXRhYmxlKGFyZ3MuY29sdW1uLCBhcmdzLnJlcXVlc3RUeXBlLCBhcmdzLmVsZW1lbnQpLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaXNJbmxpbmUgPyAnJyA6IGFyZ3MuY29sdW1uLmhlYWRlclRleHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERlZmF1bHRFZGl0Q2VsbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGVmYXVsdEVkaXRDZWxsID0gRGVmYXVsdEVkaXRDZWxsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RlZmF1bHQtZWRpdC1jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vbm9ybWFsLWVkaXRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBub3JtYWxfZWRpdF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBJbmxpbmVFZGl0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKElubGluZUVkaXQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIElubGluZUVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBfdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNsb3NlRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hZGRSZWNvcmQuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW5saW5lRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZW5kRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlbGV0ZVJlY29yZC5jYWxsKHRoaXMsIGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5zdGFydEVkaXQuY2FsbCh0aGlzLCB0cik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbmxpbmVFZGl0O1xuICAgIH0obm9ybWFsX2VkaXRfMS5Ob3JtYWxFZGl0KSk7XG4gICAgZXhwb3J0cy5JbmxpbmVFZGl0ID0gSW5saW5lRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2lubGluZS1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA4MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL3Jvdy1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgZXZlbnRzLCByb3dfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTm9ybWFsRWRpdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE5vcm1hbEVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWRjb250ZW50JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0luZGV4ID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJvd2NlbGwnKSA/IHBhcnNlSW50KHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCkgOiAtMTtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmVuZEVkaXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmRibENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Y2VsbCcpICYmIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRPbkRibENsaWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5zdGFydEVkaXQodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5lZGl0Q29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc3dpdGNoIChlLnJlcXVlc3RUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2F2ZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdFJvdygwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc2F2ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RSb3codGhpcy5lZGl0Um93SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMS5leHRlbmQoZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdkZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5cyA9IGdPYmouZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKTtcbiAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5VmFsdWVzID0gW107XG4gICAgICAgICAgICB0aGlzLnJvd0luZGV4ID0gdGhpcy5lZGl0Um93SW5kZXggPSBwYXJzZUludCh0ci5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c0RhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3RoaXMucm93SW5kZXhdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmltYXJ5S2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHByaW1hcnlLZXlWYWx1ZXMucHVzaCh0aGlzLnByZXZpb3VzRGF0YVtwcmltYXJ5S2V5c1tpXV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgcm93OiB0ciwgcHJpbWFyeUtleTogcHJpbWFyeUtleXMsIHByaW1hcnlLZXlWYWx1ZTogcHJpbWFyeUtleVZhbHVlcywgcmVxdWVzdFR5cGU6ICdiZWdpbkVkaXQnLFxuICAgICAgICAgICAgICAgIHJvd0RhdGE6IHRoaXMucHJldmlvdXNEYXRhLCByb3dJbmRleDogdGhpcy5yb3dJbmRleCwgdHlwZTogJ2VkaXQnLCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWdpbkVkaXQsIGFyZ3MpO1xuICAgICAgICAgICAgYXJncy50eXBlID0gJ2FjdGlvbkJlZ2luJztcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgZ09iai5pc0VkaXQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGUoYXJncyk7XG4gICAgICAgICAgICB0aGlzLnVpZCA9IHRyLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5hcHBseUZvcm1WYWxpZGF0aW9uKCk7XG4gICAgICAgICAgICBhcmdzLnR5cGUgPSAnYWN0aW9uQ29tcGxldGUnO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5pc0VkaXQgfHwgIWdPYmouZWRpdE1vZHVsZS5mb3JtT2JqLnZhbGlkYXRlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWRpdGVkRGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB0aGlzLnByZXZpb3VzRGF0YSk7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3NhdmUnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4sIGRhdGE6IGVkaXRlZERhdGEsIGNhbmNlbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNEYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgc2VsZWN0ZWRSb3c6IGdPYmouc2VsZWN0ZWRSb3dJbmRleCwgZm9yZWlnbktleURhdGE6IHt9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZWRpdGVkRGF0YSA9IGdPYmouZWRpdE1vZHVsZS5nZXRDdXJyZW50RWRpdGVkRGF0YShnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGZvcm0nKSwgZWRpdGVkRGF0YSk7XG4gICAgICAgICAgICBpZiAoZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWVkaXRlZHJvdycpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGFyZ3MuYWN0aW9uID0gJ2VkaXQnO1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy51cGRhdGVEYXRhLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFyZ3MuYWN0aW9uID0gJ2FkZCc7XG4gICAgICAgICAgICAgICAgYXJncy5zZWxlY3RlZFJvdyA9IDA7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmRpYWxvZ0Rlc3Ryb3ksIHt9KTtcbiAgICAgICAgICAgIHRoaXMuc3RvcEVkaXRTdGF0dXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRpdEhhbmRsZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChhcmdzLnByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBhcmdzLnByb21pc2UudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZWRTdWNjKGUsIGFyZ3MpOyB9KS5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZWRGYWlsKGUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdFN1Y2Nlc3Moe30sIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5lZFN1Y2MgPSBmdW5jdGlvbiAoZSwgYXJncykge1xuICAgICAgICAgICAgdGhpcy5lZGl0U3VjY2VzcyhlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRGYWlsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdEZhaWx1cmUoZSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkaXRTdWNjZXNzID0gZnVuY3Rpb24gKGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChlLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmJlZm9yZURhdGFCb3VuZCwgZSk7XG4gICAgICAgICAgICAgICAgYXJncy5kYXRhID0gZS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5iZWZvcmVEYXRhQm91bmQsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJncy50eXBlID0gZXZlbnRzLmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93KGFyZ3MuZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RSb3codGhpcy5yb3dJbmRleCA+IC0xID8gdGhpcy5yb3dJbmRleCA6IHRoaXMuZWRpdFJvd0luZGV4KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRpdEZhaWx1cmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uRmFpbHVyZSwgZSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLnJlZnJlc2hSb3cgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB2YXIgcm93T2JqID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRCh0aGlzLnVpZCk7XG4gICAgICAgICAgICBpZiAocm93T2JqKSB7XG4gICAgICAgICAgICAgICAgcm93T2JqLmNoYW5nZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIHJvdy5yZWZyZXNoKHJvd09iaiwgdGhpcy5wYXJlbnQuY29sdW1ucywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2NhbmNlbCcsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgZGF0YTogdGhpcy5wcmV2aW91c0RhdGEsIHNlbGVjdGVkUm93OiBnT2JqLnNlbGVjdGVkUm93SW5kZXhcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCBhcmdzKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcEVkaXRTdGF0dXMoKTtcbiAgICAgICAgICAgIGFyZ3MudHlwZSA9IGV2ZW50cy5hY3Rpb25Db21wbGV0ZTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvdyhhcmdzLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5zZWxlY3RSb3codGhpcy5yb3dJbmRleCk7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2FkZCcsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNEYXRhID0ge307XG4gICAgICAgICAgICB0aGlzLnVpZCA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNEYXRhW2NvbC5maWVsZF0gPSBkYXRhICYmIGRhdGFbY29sLmZpZWxkXSA/IGRhdGFbY29sLmZpZWxkXSA6IGNvbC5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLCBmb3JlaWduS2V5RGF0YToge30sXG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdhZGQnLCBkYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgYXJncyk7XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBnT2JqLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZE5ldyh7IHJvd0RhdGE6IGFyZ3MuZGF0YSwgcmVxdWVzdFR5cGU6ICdhZGQnIH0pO1xuICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmFwcGx5Rm9ybVZhbGlkYXRpb24oKTtcbiAgICAgICAgICAgIGFyZ3MudHlwZSA9IGV2ZW50cy5hY3Rpb25Db21wbGV0ZTtcbiAgICAgICAgICAgIGFyZ3Mucm93ID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWFkZGVkcm93Jyk7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0Um93SW5kZXggPSB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2RlbGV0ZScsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgZm9yZWlnbktleURhdGE6IHt9LFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEgPyBbZGF0YV0gOiB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJlY29yZHMoKSwgdHI6IHRoaXMucGFyZW50LmdldFNlbGVjdGVkUm93cygpLCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuc3RvcEVkaXRTdGF0dXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgZ09iai5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBlbGVtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWFkZGVkcm93Jyk7XG4gICAgICAgICAgICBpZiAoZWxlbSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGVsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxlbSA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1lZGl0ZWRyb3cnKTtcbiAgICAgICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdlLWVkaXRlZHJvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNydWRBY3Rpb24sIHRoaXMuZWRpdEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRvdWJsZVRhcCwgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGJsY2xpY2ssIHRoaXMuZGJsQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZWxldGVDb21wbGV0ZSwgdGhpcy5lZGl0Q29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnNhdmVDb21wbGV0ZSwgdGhpcy5lZGl0Q29tcGxldGUsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jcnVkQWN0aW9uLCB0aGlzLmVkaXRIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZG91YmxlVGFwLCB0aGlzLmRibENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRibGNsaWNrLCB0aGlzLmRibENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRlbGV0ZUNvbXBsZXRlLCB0aGlzLmVkaXRDb21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnNhdmVDb21wbGV0ZSwgdGhpcy5lZGl0Q29tcGxldGUpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBOb3JtYWxFZGl0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Ob3JtYWxFZGl0ID0gTm9ybWFsRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL25vcm1hbC1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvY2VsbC1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cywgcm93X3JlbmRlcmVyXzEsIGNlbGxfcmVuZGVyZXJfMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBCYXRjaEVkaXQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBCYXRjaEVkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGJsY2xpY2ssIHRoaXMuZGJsQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMuZGF0YUJvdW5kLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRvdWJsZVRhcCwgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRibGNsaWNrLCB0aGlzLmRibENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5kYXRhQm91bmQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kb3VibGVUYXAsIHRoaXMuZGJsQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5kYXRhQm91bmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsIHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2FkZCcsIHRydWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3djZWxsJykgJiYgIXRoaXMucGFyZW50LmlzRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENlbGxJZHgoZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5kYmxDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHRyID0gdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2Utcm93Jyk7XG4gICAgICAgICAgICBpZiAoKHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1yb3djZWxsJykpICYmIHRyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbChwYXJzZUludCh0ci5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApLCB0aGlzLnBhcmVudC5jb2x1bW5zW3BhcnNlSW50KHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1yb3djZWxsJykuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbGluZGV4JyksIDEwKV0uZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmtleVByZXNzSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgaXNFZGl0ID0gdGhpcy5wYXJlbnQuaXNFZGl0O1xuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1wb3B1cC1vcGVuJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgICAgIGlzRWRpdCA9IGlzRWRpdCAmJiAhdGhpcy52YWxpZGF0ZUZvcm1PYmooKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RhYic6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0TmV4dENlbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaGlmdFRhYic6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0UHJldkNlbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNFZGl0ICYmIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggKyAxIDwgdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsKHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggKyAxLCB0aGlzLmNlbGxEZXRhaWxzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZjInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbEZyb21JbmRleCh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4LCB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCB8fCAhKHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID09PSAwICYmIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggPT09IDApIHx8XG4gICAgICAgICAgICAgICAgICAgICEodGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCA9PT0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKS5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID09PSB0aGlzLnBhcmVudC5jb2x1bW5zLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlRm9jdXNPbkVycm9yKGUpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnJlRm9jdXNPbkVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlRm9ybU9iaigpICYmIChlLmFjdGlvbiA9PT0gJ3RhYicgfHwgZS5hY3Rpb24gPT09ICdzaGlmdFRhYicpKSB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuaXNBZGRSb3cgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW2luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5zZXJ0ZWRyb3cnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5lZGl0TmV4dENlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2xkSWR4ID0gdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXg7XG4gICAgICAgICAgICB2YXIgY2VsbElkeCA9IHRoaXMuZmluZE5leHRFZGl0YWJsZUNlbGwodGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggKyAxLCB0aGlzLmlzQWRkUm93KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgpKTtcbiAgICAgICAgICAgIGlmIChjZWxsSWR4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCA9IGNlbGxJZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ICsgMSA8IHRoaXMucGFyZW50LmdldERhdGFSb3dzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCsrO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID0gdGhpcy5maW5kTmV4dEVkaXRhYmxlQ2VsbCgwLCB0aGlzLmlzQWRkUm93KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRJZHggIT09IHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbEZyb21JbmRleCh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4LCB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZWRpdFByZXZDZWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG9sZElkeCA9IHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4O1xuICAgICAgICAgICAgdmFyIGNlbGxJZHggPSB0aGlzLmZpbmRQcmV2RWRpdGFibGVDZWxsKHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4IC0gMSwgdGhpcy5pc0FkZFJvdyh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4KSk7XG4gICAgICAgICAgICBpZiAoY2VsbElkeCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPSBjZWxsSWR4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCAtIDEgPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgtLTtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCA9IHRoaXMuZmluZFByZXZFZGl0YWJsZUNlbGwodGhpcy5wYXJlbnQuY29sdW1ucy5sZW5ndGggLSAxLCB0aGlzLmlzQWRkUm93KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRJZHggIT09IHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbEZyb21JbmRleCh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4LCB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZWRpdENlbGxGcm9tSW5kZXggPSBmdW5jdGlvbiAocm93SWR4LCBjZWxsSWR4KSB7XG4gICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ID0gcm93SWR4O1xuICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPSBjZWxsSWR4O1xuICAgICAgICAgICAgdGhpcy5lZGl0Q2VsbChyb3dJZHgsIHRoaXMucGFyZW50LmNvbHVtbnNbY2VsbElkeF0uZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcm93cyA9IGdPYmouY29udGVudE1vZHVsZS5nZXRSb3dzKCk7XG4gICAgICAgICAgICB2YXIgcm93UmVuZGVyZXIgPSBuZXcgcm93X3JlbmRlcmVyXzEuUm93UmVuZGVyZXIodGhpcy5zZXJ2aWNlTG9jYXRvciwgbnVsbCwgdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdmFyIHRyO1xuICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmlzRGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHIgPSBnT2JqLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVpZD0nICsgcm93c1tpXS51aWQgKyAnXScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ci5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5zZXJ0ZWRyb3cnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVJvd09iamVjdEZyb21VSUQocm93c1tpXS51aWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByb3dzW2ldLmNoYW5nZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5pc0RpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodHIsIFtdLCBbJ2UtaGlkZGVucm93JywgJ2UtdXBkYXRlZHRkJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1JlbmRlcmVyLnJlZnJlc2gocm93c1tpXSwgZ09iai5jb2x1bW5zLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLnNlbGVjdFJvdyh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvd0lkeCgpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB7fSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgdGhpcy5idWxrRGVsZXRlKGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYWRkUmVjb3JkID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuYnVsa0FkZFJvdyhkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0VkaXQgJiYgdGhpcy52YWxpZGF0ZUZvcm1PYmooKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYmF0Y2hTYXZlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUudmFsaWRhdGVGb3JtT2JqID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZm9ybU9iaiAmJiAhdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5mb3JtT2JqLnZhbGlkYXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYmF0Y2hTYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2F2ZUNlbGwoKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaGFuZ2VzID0gdGhpcy5nZXRCYXRjaENoYW5nZXMoKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0geyBiYXRjaENoYW5nZXM6IGNoYW5nZXMsIGNhbmNlbDogZmFsc2UgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlQmF0Y2hTYXZlLCBhcmdzKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5idWxrU2F2ZSwgeyBjaGFuZ2VzOiBjaGFuZ2VzIH0pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmdldEJhdGNoQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjaGFuZ2VzID0ge1xuICAgICAgICAgICAgICAgIGFkZGVkUmVjb3JkczogW10sXG4gICAgICAgICAgICAgICAgZGVsZXRlZFJlY29yZHM6IFtdLFxuICAgICAgICAgICAgICAgIGNoYW5nZWRSZWNvcmRzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuY29udGVudE1vZHVsZS5nZXRSb3dzKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd3NfMSA9IHJvd3M7IF9pIDwgcm93c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSByb3dzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChyb3cuaXNEaXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJvdy5lZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhZGQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMuYWRkZWRSZWNvcmRzLnB1c2gocm93LmNoYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLmRlbGV0ZWRSZWNvcmRzLnB1c2gocm93LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLmNoYW5nZWRSZWNvcmRzLnB1c2gocm93LmNoYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZXM7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUucmVtb3ZlUm93T2JqZWN0RnJvbVVJRCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuY29udGVudE1vZHVsZS5nZXRSb3dzKCk7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0udWlkID09PSB1aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm93cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYWRkUm93T2JqZWN0ID0gZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuY29udGVudE1vZHVsZS5nZXRSb3dzKCkudW5zaGlmdChyb3cpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmJ1bGtEZWxldGUgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gZGF0YSA/IHRoaXMuZ2V0SW5kZXhGcm9tRGF0YShkYXRhKSA6IGdPYmouc2VsZWN0ZWRSb3dJbmRleDtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IHRoaXMucGFyZW50LmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCksXG4gICAgICAgICAgICAgICAgcm93SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIHJvd0RhdGE6IGRhdGEgPyBkYXRhIDogZ09iai5nZXRTZWxlY3RlZFJlY29yZHMoKVswXSxcbiAgICAgICAgICAgICAgICByb3c6IGRhdGEgPyBnT2JqLmdldFJvd3MoKVtpbmRleF0gOiBnT2JqLmdldFNlbGVjdGVkUm93cygpWzBdLCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFhcmdzLnJvdykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlQmF0Y2hEZWxldGUsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdmFyIHVpZCA9IGFyZ3Mucm93LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKTtcbiAgICAgICAgICAgIGlmIChhcmdzLnJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaW5zZXJ0ZWRyb3cnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUm93T2JqZWN0RnJvbVVJRCh1aWQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGFyZ3Mucm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByb3dPYmogPSBnT2JqLmdldFJvd09iamVjdEZyb21VSUQodWlkKTtcbiAgICAgICAgICAgICAgICByb3dPYmouaXNEaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcm93T2JqLmVkaXQgPSAnZGVsZXRlJztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChhcmdzLnJvdywgWydlLWhpZGRlbnJvdycsICdlLXVwZGF0ZWR0ZCddLCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hSb3dJZHgoKTtcbiAgICAgICAgICAgIGdPYmouc2VsZWN0Um93KGluZGV4KTtcbiAgICAgICAgICAgIGRlbGV0ZSBhcmdzLnJvdztcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmF0Y2hEZWxldGUsIGFyZ3MpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5yZWZyZXNoUm93SWR4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykuY2hpbGRyZW4pO1xuICAgICAgICAgICAgdmFyIGRhdGFSb3dzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93JykgJiYgIXJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhpZGRlbnJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uc2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4Jywgai50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0SW5kZXhGcm9tRGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLmluQXJyYXkoZGF0YSwgdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCkpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmJ1bGtBZGRSb3cgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dBZGRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGVmYXVsdERhdGEgPSBkYXRhID8gZGF0YSA6IHRoaXMuZ2V0RGVmYXVsdERhdGEoKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIGRlZmF1bHREYXRhOiBkZWZhdWx0RGF0YSxcbiAgICAgICAgICAgICAgICBwcmltYXJ5S2V5OiBnT2JqLmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKCksXG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlQmF0Y2hBZGQsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB2YXIgbW9kZWwgPSBuZXcgcm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHZhciBtb2RlbERhdGEgPSBtb2RlbC5nZW5lcmF0ZVJvd3MoW2FyZ3MuZGVmYXVsdERhdGFdKTtcbiAgICAgICAgICAgIHZhciB0ciA9IHJvdy5yZW5kZXIobW9kZWxEYXRhWzBdLCBnT2JqLmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICB2YXIgY29sO1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ci5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1pbmRlbnRjZWxsJyB9KSwgdHIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSBnT2JqLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB0ci5jbGFzc0xpc3QuYWRkKCdlLWluc2VydGVkcm93Jyk7XG4gICAgICAgICAgICB0Ym9keS5pbnNlcnRCZWZvcmUodHIsIHRib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5hZGRDbGFzcyh0ci5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJyksIFsnZS11cGRhdGVkdGQnXSk7XG4gICAgICAgICAgICBtb2RlbERhdGFbMF0uaXNEaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICBtb2RlbERhdGFbMF0uY2hhbmdlcyA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBtb2RlbERhdGFbMF0uZGF0YSk7XG4gICAgICAgICAgICBtb2RlbERhdGFbMF0uZWRpdCA9ICdhZGQnO1xuICAgICAgICAgICAgdGhpcy5hZGRSb3dPYmplY3QobW9kZWxEYXRhWzBdKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvd0lkeCgpO1xuICAgICAgICAgICAgZ09iai5zZWxlY3RSb3coMCk7XG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZmluZE5leHRFZGl0YWJsZUNlbGwoMCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29sID0gZ09iai5jb2x1bW5zW2luZGV4XTtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsKDAsIGNvbC5maWVsZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJnczEgPSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdERhdGE6IGFyZ3MuZGVmYXVsdERhdGEsIHJvdzogdHIsXG4gICAgICAgICAgICAgICAgY29sdW1uT2JqZWN0OiBjb2wsIGNvbHVtbkluZGV4OiBpbmRleCwgcHJpbWFyeUtleTogYXJncy5wcmltYXJ5S2V5LCBjZWxsOiB0ci5jZWxsc1tpbmRleF1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJhdGNoQWRkLCBhcmdzMSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZmluZE5leHRFZGl0YWJsZUNlbGwgPSBmdW5jdGlvbiAoY29sdW1uSW5kZXgsIGlzQWRkKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBjb2xzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBjb2x1bW5JbmRleDsgaSA8IGVuZEluZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQWRkICYmIHRoaXMuY2hlY2tOUENlbGwoY29sc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzQWRkICYmICFjb2xzW2ldLnRlbXBsYXRlICYmIGNvbHNbaV0udmlzaWJsZSAmJiBjb2xzW2ldLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZmluZFByZXZFZGl0YWJsZUNlbGwgPSBmdW5jdGlvbiAoY29sdW1uSW5kZXgsIGlzQWRkKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gY29sdW1uSW5kZXg7IGkgPiAtMTsgaS0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FkZCAmJiB0aGlzLmNoZWNrTlBDZWxsKGNvbHNbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FkZCAmJiAhY29sc1tpXS50ZW1wbGF0ZSAmJiBjb2xzW2ldLnZpc2libGUgJiYgY29sc1tpXS5hbGxvd0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmNoZWNrTlBDZWxsID0gZnVuY3Rpb24gKGNvbCkge1xuICAgICAgICAgICAgcmV0dXJuICFjb2wudGVtcGxhdGUgJiYgY29sLnZpc2libGUgJiYgIWNvbC5pc1ByaW1hcnlLZXkgJiYgIWNvbC5pc0lkZW50aXR5ICYmIGNvbC5hbGxvd0VkaXRpbmc7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0RGVmYXVsdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgIHZhciBkVmFsdWVzID0geyAnbnVtYmVyJzogMCwgJ3N0cmluZyc6IG51bGwsICdib29sZWFuJzogZmFsc2UsICdkYXRlJzogbnVsbCwgJ2RhdGV0aW1lJzogbnVsbCB9O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGRhdGFbY29sLmZpZWxkXSA9IGNvbC5kZWZhdWx0VmFsdWUgPyBjb2wuZGVmYXVsdFZhbHVlIDogZFZhbHVlc1tjb2wudHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5zZXRDZWxsSWR4ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGdMZW4gPSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBnTGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID0gdGFyZ2V0LmNlbGxJbmRleCAtIGdMZW47XG4gICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ID0gcGFyc2VJbnQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5lZGl0Q2VsbCA9IGZ1bmN0aW9uIChpbmRleCwgZmllbGQsIGlzQWRkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbCA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICB2YXIga2V5cyA9IGdPYmouZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0VkaXRpbmcgJiYgY29sLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCAmJiAhKHRoaXMuY2VsbERldGFpbHMuY29sdW1uLmZpZWxkID09PSBmaWVsZCAmJiB0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ID09PSBpbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gZ09iai5nZXREYXRhUm93cygpW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoKGtleXNbMF0gPT09IGNvbC5maWVsZCAmJiAhcm93LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpKSB8fCBjb2wudGVtcGxhdGUgfHwgY29sLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcm93RGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB0aGlzLmdldERhdGFCeUluZGV4KGluZGV4KSk7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGw6IHJvdy5jZWxsc1t0aGlzLmdldENlbGxJZHgoY29sLnVpZCldLCByb3c6IHJvdyxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uTmFtZTogY29sLmZpZWxkLCBjb2x1bW5PYmplY3Q6IGNvbCwgaXNGb3JlaWduS2V5OiAhZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2wuZm9yZWlnbktleVZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgcHJpbWFyeUtleToga2V5cywgcm93RGF0YTogcm93RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvblJ1bGVzOiBlajJfYmFzZV8xLmV4dGVuZCh7fSwgY29sLnZhbGlkYXRpb25SdWxlcyA/IGNvbC52YWxpZGF0aW9uUnVsZXMgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3dEYXRhW2NvbC5maWVsZF0sIHR5cGU6ICFpc0FkZCA/ICdlZGl0JyA6ICdhZGQnLCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmNlbGxFZGl0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgICAgICByb3dEYXRhOiByb3dEYXRhLCBjb2x1bW46IGNvbCwgdmFsdWU6IGFyZ3MudmFsdWUsIGlzRm9yZWlnbktleTogYXJncy5pc0ZvcmVpZ25LZXksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENlbGxJZHgoYXJncy5jZWxsKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jZWxsLmNsYXNzTGlzdC5jb250YWlucygnZS11cGRhdGVkdGQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29sb3JlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MuY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdlLXVwZGF0ZWR0ZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgZ09iai5zZWxlY3RSb3codGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgZ09iai5pc0VkaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlKGFyZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9ybSA9IGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGdPYmouZWxlbWVudC5pZCArICdFZGl0Rm9ybScpO1xuICAgICAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5hcHBseUZvcm1WYWxpZGF0aW9uKFtjb2xdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUudXBkYXRlQ2VsbCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgZmllbGQsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICBpZiAoY29sICYmICFjb2wuaXNQcmltYXJ5S2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRkID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtyb3dJbmRleF0uY2VsbHNbdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeUZpZWxkKGZpZWxkKV07XG4gICAgICAgICAgICAgICAgdmFyIHJvd09iaiA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQodGQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFREKHRkLCBjb2wsIHJvd09iaiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLnF1ZXJ5Q2VsbEluZm8sIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbDogdGQsIGNvbHVtbjogY29sLCBkYXRhOiByb3dPYmouY2hhbmdlc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnNldENoYW5nZXMgPSBmdW5jdGlvbiAocm93T2JqLCBmaWVsZCwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghcm93T2JqLmNoYW5nZXMpIHtcbiAgICAgICAgICAgICAgICByb3dPYmouY2hhbmdlcyA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCByb3dPYmouZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dPYmouY2hhbmdlc1tmaWVsZF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJvd09iai5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS51cGRhdGVSb3cgPSBmdW5jdGlvbiAoaW5kZXgsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMSA9IGtleXM7IF9pIDwga2V5c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBrZXlzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbChpbmRleCwgY29sLCBkYXRhW2NvbF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmdldENlbGxJZHggPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICB2YXIgY0lkeCA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlVaWQodWlkKSArIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUpIHx8ICFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucGFyZW50LmNoaWxkR3JpZCkpIHtcbiAgICAgICAgICAgICAgICBjSWR4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY0lkeDtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5yZWZyZXNoVEQgPSBmdW5jdGlvbiAodGQsIGNvbHVtbiwgcm93T2JqLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGNlbGwgPSBuZXcgY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLnNldENoYW5nZXMocm93T2JqLCBjb2x1bW4uZmllbGQsIHZhbHVlKTtcbiAgICAgICAgICAgIGNlbGwucmVmcmVzaFREKHRkLCByb3dPYmouY2VsbHNbdGhpcy5nZXRDZWxsSWR4KGNvbHVtbi51aWQpXSwgcm93T2JqLmNoYW5nZXMpO1xuICAgICAgICAgICAgdGQuY2xhc3NMaXN0LmFkZCgnZS11cGRhdGVkdGQnKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5zYXZlQ2VsbCA9IGZ1bmN0aW9uIChpc0ZvcmNlU2F2ZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghaXNGb3JjZVNhdmUgJiYgKCFnT2JqLmlzRWRpdCB8fCB0aGlzLnZhbGlkYXRlRm9ybU9iaigpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ciA9IHV0aWxfMS5wYXJlbnRzVW50aWwodGhpcy5mb3JtLCAnZS1yb3cnKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLmNlbGxEZXRhaWxzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBlZGl0ZWREYXRhID0gZ09iai5lZGl0TW9kdWxlLmdldEN1cnJlbnRFZGl0ZWREYXRhKHRoaXMuZm9ybSwge30pO1xuICAgICAgICAgICAgZWRpdGVkRGF0YSA9IGVqMl9iYXNlXzEuZXh0ZW5kKHRoaXMuY2VsbERldGFpbHMucm93RGF0YSwgZWRpdGVkRGF0YSk7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiBjb2x1bW4uZmllbGQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGVkaXRlZERhdGFbY29sdW1uLmZpZWxkXSxcbiAgICAgICAgICAgICAgICByb3dEYXRhOiB0aGlzLmNlbGxEZXRhaWxzLnJvd0RhdGEsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZTogdGhpcy5jZWxsRGV0YWlscy52YWx1ZSxcbiAgICAgICAgICAgICAgICBjb2x1bW5PYmplY3Q6IGNvbHVtbixcbiAgICAgICAgICAgICAgICBjZWxsOiB0aGlzLmZvcm0ucGFyZW50RWxlbWVudCxcbiAgICAgICAgICAgICAgICBpc0ZvcmVpZ25LZXk6IHRoaXMuY2VsbERldGFpbHMuaXNGb3JlaWduS2V5LCBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFpc0ZvcmNlU2F2ZSkge1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY2VsbFNhdmUsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmRlc3Ryb3lGb3JtKCk7XG4gICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZGVzdHJveVdpZGdldHMoW2NvbHVtbl0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sdGlwRGVzdHJveSwge30pO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVEQoYXJncy5jZWxsLCBjb2x1bW4sIGdPYmouZ2V0Um93T2JqZWN0RnJvbVVJRCh0ci5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWlkJykpLCBhcmdzLnZhbHVlKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KHRyLCBbXSwgWydlLWVkaXRlZHJvdycsICdlLWJhdGNocm93J10pO1xuICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2UtZWRpdGVkYmF0Y2hjZWxsJyk7XG4gICAgICAgICAgICBnT2JqLmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MudmFsdWUpICYmIGFyZ3MudmFsdWUudG9TdHJpbmcoKSA9PT1cbiAgICAgICAgICAgICAgICAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jZWxsRGV0YWlscy52YWx1ZSkgPyB0aGlzLmNlbGxEZXRhaWxzLnZhbHVlIDogJycpLnRvU3RyaW5nKCkgJiYgIXRoaXMuaXNDb2xvcmVkKSB7XG4gICAgICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2UtdXBkYXRlZHRkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgICAgIHRoaXMuaXNDb2xvcmVkID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0RGF0YUJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciByb3cgPSB0aGlzLnBhcmVudC5nZXRSb3dPYmplY3RGcm9tVUlEKHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXhdLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICByZXR1cm4gcm93LmNoYW5nZXMgPyByb3cuY2hhbmdlcyA6IHJvdy5kYXRhO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnZhbENvbXBsZXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBlZGl0ID0gdGhpcy5wYXJlbnQuZWRpdE1vZHVsZTtcbiAgICAgICAgICAgIGVkaXQudmFsaWRhdGlvbkNvbXBsZXRlKGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmN1c3RvbVBsYWNlbWVudCA9IGZ1bmN0aW9uIChpbnB1dEVsZW1lbnQsIGVycm9yKSB7XG4gICAgICAgICAgICB2YXIgZWRpdCA9IHRoaXMucGFyZW50LmVkaXRNb2R1bGU7XG4gICAgICAgICAgICBlZGl0LnZhbEVycm9yUGxhY2VtZW50KGlucHV0RWxlbWVudCwgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQmF0Y2hFZGl0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5CYXRjaEVkaXQgPSBCYXRjaEVkaXQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9iYXRjaC1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA4MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vbm9ybWFsLWVkaXRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBub3JtYWxfZWRpdF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEaWFsb2dFZGl0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKERpYWxvZ0VkaXQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIERpYWxvZ0VkaXQocGFyZW50LCBzZXJ2aWNlTG9jYXRvciwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBfdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNsb3NlRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hZGRSZWNvcmQuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZW5kRWRpdC5jYWxsKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlbGV0ZVJlY29yZC5jYWxsKHRoaXMsIGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5zdGFydEVkaXQuY2FsbCh0aGlzLCB0cik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEaWFsb2dFZGl0O1xuICAgIH0obm9ybWFsX2VkaXRfMS5Ob3JtYWxFZGl0KSk7XG4gICAgZXhwb3J0cy5EaWFsb2dFZGl0ID0gRGlhbG9nRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2RpYWxvZy1lZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSA4M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYWN0aW9ucy9kYXRhXCIsIFwiLi9leHBvcnQtaGVscGVyXCIsIFwiLi4vc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3JcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGV2ZW50cywgZWoyX2V4Y2VsX2V4cG9ydF8xLCBlajJfYmFzZV8xLCBkYXRhXzEsIGV4cG9ydF9oZWxwZXJfMSwgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMSwgZW51bV8xLCBlajJfZGF0YV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFeGNlbEV4cG9ydCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEV4Y2VsRXhwb3J0KHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5ib29rID0ge307XG4gICAgICAgICAgICB0aGlzLndvcmtTaGVldCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCA9IDE7XG4gICAgICAgICAgICB0aGlzLmV4cFR5cGUgPSAnYXBwZW5kdG9zaGVldCc7XG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVIaWRkZW5Db2x1bW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNDc3ZFeHBvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaW5pdChwYXJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdFeGNlbEV4cG9ydCc7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGdPYmopIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gZ09iajtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNFeHBvcnRpbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmJvb2sgPSB7fTtcbiAgICAgICAgICAgIHRoaXMud29ya1NoZWV0ID0gW107XG4gICAgICAgICAgICB0aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBkYXRhXzEuRGF0YSh0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCA9IDE7XG4gICAgICAgICAgICB0aGlzLmZvb3RlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuZXhwVHlwZSA9ICdhcHBlbmR0b3NoZWV0JztcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZUhpZGRlbkNvbHVtbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5leHBvcnRWYWx1ZUZvcm1hdHRlciA9IG5ldyBleHBvcnRfaGVscGVyXzEuRXhwb3J0VmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudGhlbWUgPSAnbWF0ZXJpYWwnO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuTWFwID0gZnVuY3Rpb24gKGdyaWQsIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rLCBpc0Nzdikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSBncmlkO1xuICAgICAgICAgICAgdGhpcy5pc0V4cG9ydGluZyA9IHRydWU7XG4gICAgICAgICAgICBpZiAoaXNDc3YpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ3N2RXhwb3J0ID0gaXNDc3Y7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ3N2RXhwb3J0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZm9yZUV4Y2VsRXhwb3J0KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NSZWNvcmRzKGdyaWQsIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NSZWNvcmRzID0gZnVuY3Rpb24gKGdPYmosIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCAmJiBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIGV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFNYW5hZ2VyID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoeyB1cmw6IGV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZS5kYXRhU291cmNlLnVybCwgYWRhcHRvcjogZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlLmFkYXB0b3IgfSkuZXhlY3V0ZVF1ZXJ5KG5ldyBlajJfZGF0YV8xLlF1ZXJ5KCkpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhTWFuYWdlci50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0KGdPYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvY2Vzc0lubmVyUmVjb3JkcyhnT2JqLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaywgcik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF90aGlzLmJvb2spO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YU1hbmFnZXIgPSBfdGhpcy5kYXRhLmdldERhdGEoe30sIF90aGlzLmRhdGEuZ2VuZXJhdGVRdWVyeSh0cnVlKS5yZXF1aXJlc0NvdW50KCkpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhTWFuYWdlci50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0KGdPYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvY2Vzc0lubmVyUmVjb3JkcyhnT2JqLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaywgcik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF90aGlzLmJvb2spO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NJbm5lclJlY29yZHMgPSBmdW5jdGlvbiAoZ09iaiwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIHIpIHtcbiAgICAgICAgICAgIHZhciBibGFua1Jvd3MgPSA1O1xuICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCAmJiBleHBvcnRQcm9wZXJ0aWVzLm11bHRpcGxlRXhwb3J0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cFR5cGUgPSAoZXhwb3J0UHJvcGVydGllcy5tdWx0aXBsZUV4cG9ydC50eXBlICE9PSB1bmRlZmluZWQgPyBleHBvcnRQcm9wZXJ0aWVzLm11bHRpcGxlRXhwb3J0LnR5cGUgOiAnYXBwZW5kdG9zaGVldCcpO1xuICAgICAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzLm11bHRpcGxlRXhwb3J0LmJsYW5rUm93cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYW5rUm93cyA9IGV4cG9ydFByb3BlcnRpZXMubXVsdGlwbGVFeHBvcnQuYmxhbmtSb3dzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3b3JrYm9vayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53b3JrU2hlZXQgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlcyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5leHBUeXBlID09PSAnbmV3c2hlZXQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53b3JrU2hlZXQgPSB3b3JrYm9vay53b3Jrc2hlZXRzO1xuICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVzID0gd29ya2Jvb2suc3R5bGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy53b3JrU2hlZXQgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MgPSB3b3JrYm9vay53b3Jrc2hlZXRzWzBdLnJvd3M7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gd29ya2Jvb2sud29ya3NoZWV0c1swXS5jb2x1bW5zO1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVzID0gd29ya2Jvb2suc3R5bGVzO1xuICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoID0gKHRoaXMucm93c1t0aGlzLnJvd3MubGVuZ3RoIC0gMV0uaW5kZXggKyBibGFua1Jvd3MpO1xuICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTXVsdGlwbGVFeHBvcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcy5oZWFkZXIgIT09IHVuZGVmaW5lZCAmJiAoaXNNdWx0aXBsZUV4cG9ydCB8fCB0aGlzLmV4cFR5cGUgPT09ICduZXdzaGVldCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NFeGNlbEhlYWRlcihKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGV4cG9ydFByb3BlcnRpZXMuaGVhZGVyKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzLmZvb3RlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHBUeXBlID09PSAnYXBwZW5kdG9zaGVldCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTXVsdGlwbGVFeHBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb290ZXIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGV4cG9ydFByb3BlcnRpZXMuZm9vdGVyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb290ZXIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGV4cG9ydFByb3BlcnRpZXMuZm9vdGVyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzLmhlYWRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NFeGNlbEhlYWRlcihKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGV4cG9ydFByb3BlcnRpZXMuaGVhZGVyKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzLmZvb3RlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvb3RlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXhwb3J0UHJvcGVydGllcy5mb290ZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZUhpZGRlbkNvbHVtbiA9IChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgPyBleHBvcnRQcm9wZXJ0aWVzLmluY2x1ZGVIaWRkZW5Db2x1bW4gOiBmYWxzZSk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93ID0gbmV3IGV4cG9ydF9oZWxwZXJfMS5FeHBvcnRIZWxwZXIoZ09iaikuZ2V0SGVhZGVycyhnT2JqLmNvbHVtbnMsIHRoaXMuaW5jbHVkZUhpZGRlbkNvbHVtbik7XG4gICAgICAgICAgICB2YXIgZ3JvdXBJbmRlbnQgPSAwO1xuICAgICAgICAgICAgaWYgKChyLnJlc3VsdCkubGV2ZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGdyb3VwSW5kZW50ICs9IChyLnJlc3VsdCkubGV2ZWw7XG4gICAgICAgICAgICAgICAgZ3JvdXBJbmRlbnQgKz0gKHIucmVzdWx0KS5jaGlsZExldmVscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0hlYWRlckNvbnRlbnQoZ09iaiwgaGVhZGVyUm93LCBleHBvcnRQcm9wZXJ0aWVzLCBncm91cEluZGVudCk7XG4gICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSAhPT0gdW5kZWZpbmVkICYmICEoZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmRDb250ZW50KGdPYmosIHIsIGhlYWRlclJvdywgaXNNdWx0aXBsZUV4cG9ydCwgZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCAmJiBleHBvcnRQcm9wZXJ0aWVzLmV4cG9ydFR5cGUgPT09ICdjdXJyZW50dmlldycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmRDb250ZW50KGdPYmosIHIsIGhlYWRlclJvdywgaXNNdWx0aXBsZUV4cG9ydCwgZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmRDb250ZW50KGdPYmosIHIsIGhlYWRlclJvdywgaXNNdWx0aXBsZUV4cG9ydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRXhwb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmV4Y2VsRXhwb3J0Q29tcGxldGUpO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc1JlY29yZENvbnRlbnQgPSBmdW5jdGlvbiAoZ09iaiwgcmV0dXJuVHlwZSwgaGVhZGVyUm93LCBpc011bHRpcGxlRXhwb3J0LCBjdXJyZW50Vmlld1JlY29yZHMpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgcmVjb3JkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRWaWV3UmVjb3JkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmVjb3JkID0gY3VycmVudFZpZXdSZWNvcmRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjb3JkID0gcmV0dXJuVHlwZS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVjb3JkLmxldmVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NHcm91cGVkUm93cyhnT2JqLCByZWNvcmQsIGhlYWRlclJvdywgcmVjb3JkLmxldmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZFJvd3MoZ09iaiwgcmVjb3JkLCBoZWFkZXJSb3csIDApO1xuICAgICAgICAgICAgICAgIGlmIChyZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFZpZXdSZWNvcmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoZ09iaiwgcmV0dXJuVHlwZS5yZXN1bHQsIGN1cnJlbnRWaWV3UmVjb3Jkcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NBZ2dyZWdhdGVzKGdPYmosIHJldHVyblR5cGUucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmZvb3RlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLmV4cFR5cGUgPT09ICdhcHBlbmR0b3NoZWV0JyAmJiAhaXNNdWx0aXBsZUV4cG9ydCkgfHwgKHRoaXMuZXhwVHlwZSA9PT0gJ25ld3NoZWV0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzRXhjZWxGb290ZXIodGhpcy5mb290ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzaGVldCA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgc2hlZXQuY29sdW1ucyA9IHRoaXMuY29sdW1ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0LnJvd3MgPSB0aGlzLnJvd3M7XG4gICAgICAgICAgICB0aGlzLndvcmtTaGVldC5wdXNoKHNoZWV0KTtcbiAgICAgICAgICAgIHRoaXMuYm9vay53b3Jrc2hlZXRzID0gdGhpcy53b3JrU2hlZXQ7XG4gICAgICAgICAgICB0aGlzLmJvb2suc3R5bGVzID0gdGhpcy5zdHlsZXM7XG4gICAgICAgICAgICBpZiAoIWlzTXVsdGlwbGVFeHBvcnQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NzdkV4cG9ydCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYm9vayA9IG5ldyBlajJfZXhjZWxfZXhwb3J0XzEuV29ya2Jvb2sodGhpcy5ib29rLCAnY3N2Jyk7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2F2ZSgnRXhwb3J0LmNzdicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvb2sgPSBuZXcgZWoyX2V4Y2VsX2V4cG9ydF8xLldvcmtib29rKHRoaXMuYm9vaywgJ3hsc3gnKTtcbiAgICAgICAgICAgICAgICAgICAgYm9vay5zYXZlKCdFeHBvcnQueGxzeCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NHcm91cGVkUm93cyA9IGZ1bmN0aW9uIChnT2JqLCBkYXRhU291cmNlLCBoZWFkZXJSb3csIGxldmVsKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRhdGFTb3VyY2VfMSA9IGRhdGFTb3VyY2U7IF9pIDwgZGF0YVNvdXJjZV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZGF0YVNvdXJjZV8xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAxO1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0ge307XG4gICAgICAgICAgICAgICAgY2VsbC5pbmRleCA9IGluZGV4ICsgbGV2ZWw7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmtleSxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBnT2JqLmdldENvbHVtbkJ5RmllbGQoaXRlbS5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSBpdGVtLmZpZWxkICsgJzogJyArIHRoaXMuZXhwb3J0VmFsdWVGb3JtYXR0ZXIuZm9ybWF0Q2VsbFZhbHVlKGFyZ3MpICsgJyAtICc7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uY291bnQgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgKz0gaXRlbS5jb3VudCArICcgaXRlbXMnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSArPSBpdGVtLmNvdW50ICsgJyBpdGVtJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZSA9IHRoaXMuZ2V0Q2FwdGlvblRoZW1lU3R5bGUodGhpcy50aGVtZSk7XG4gICAgICAgICAgICAgICAgdmFyIGNhcHRpb25Nb2RlbEdlbiA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkNhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwQ2FwdGlvblN1bW1hcnlSb3dzID0gY2FwdGlvbk1vZGVsR2VuLmdlbmVyYXRlUm93cyhpdGVtKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGxBZ2dyZWdhdGVzKGdPYmosIGdyb3VwQ2FwdGlvblN1bW1hcnlSb3dzLCBkYXRhU291cmNlLmxldmVsICsgZGF0YVNvdXJjZS5jaGlsZExldmVscywgdGhpcy5yb3dMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGNlbGxzLnB1c2goY2VsbCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucm93c1t0aGlzLnJvd0xlbmd0aCAtIDFdLmNlbGxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxJbmRleCA9IGRhdGFTb3VyY2UubGV2ZWwgKyBkYXRhU291cmNlLmNoaWxkTGV2ZWxzICsgZ3JvdXBDYXB0aW9uU3VtbWFyeVJvd3NbMF0uY2VsbHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBfYiA9IHRoaXMucm93c1t0aGlzLnJvd0xlbmd0aCAtIDFdLmNlbGxzOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRDZWxsID0gX2JbX2FdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRDZWxsLmluZGV4IDwgbEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbEluZGV4ID0gdENlbGwuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodENlbGwuaW5kZXggPiBoSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoSW5kZXggPSB0Q2VsbC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRDZWxsLnN0eWxlID0gdGhpcy5nZXRDYXB0aW9uVGhlbWVTdHlsZSh0aGlzLnRoZW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godENlbGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgobEluZGV4IC0gY2VsbC5pbmRleCkgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNvbFNwYW4gPSBsSW5kZXggLSBjZWxsLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChoSW5kZXggPCAoaGVhZGVyUm93LmNvbHVtbnMubGVuZ3RoICsgaW5kZXggKyBsZXZlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzQ2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzQ2VsbC5pbmRleCA9IChoSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc0NlbGwuaW5kZXggPSAoaEluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzQ2VsbC5zdHlsZSA9IHRoaXMuZ2V0Q2FwdGlvblRoZW1lU3R5bGUodGhpcy50aGVtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHNDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3BhbiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9jID0gMCwgX2QgPSBoZWFkZXJSb3cuY29sdW1uczsgX2MgPCBfZC5sZW5ndGg7IF9jKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfZFtfY107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2xTcGFuID0gKGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMgKyBzcGFuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzW3RoaXMucm93TGVuZ3RoIC0gMV0uY2VsbHMgPSBjZWxscztcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCsrO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhU291cmNlLmNoaWxkTGV2ZWxzICE9PSB1bmRlZmluZWQgJiYgZGF0YVNvdXJjZS5jaGlsZExldmVscyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzR3JvdXBlZFJvd3MoZ09iaiwgaXRlbS5pdGVtcywgaGVhZGVyUm93LCBpdGVtLml0ZW1zLmxldmVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY29yZFJvd3MoZ09iaiwgaXRlbS5pdGVtcywgaGVhZGVyUm93LCAobGV2ZWwpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhnT2JqLCBpdGVtLCB1bmRlZmluZWQsIChsZXZlbCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NSZWNvcmRSb3dzID0gZnVuY3Rpb24gKGdPYmosIHJlY29yZCwgaGVhZGVyUm93LCBsZXZlbCkge1xuICAgICAgICAgICAgdmFyIHJMZW4gPSBPYmplY3Qua2V5cyhyZWNvcmQpLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IDE7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgckxlbjsgcisrKSB7XG4gICAgICAgICAgICAgICAgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBpbmRleCA9IDE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDAsIGxlbiA9IGhlYWRlclJvdy5jb2x1bW5zLmxlbmd0aDsgYyA8IGxlbjsgYysrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHJlY29yZFtyXVtoZWFkZXJSb3cuY29sdW1uc1tjXS5maWVsZF07XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogaGVhZGVyUm93LmNvbHVtbnNbY10sIHZhbHVlOiB2YWx1ZSwgc3R5bGU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuZXhjZWxRdWVyeUNlbGxJbmZvLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmluZGV4ID0gaW5kZXggKyBsZXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSBhcmdzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHlsZUluZGV4ID0gdGhpcy5nZXRDb2x1bW5TdHlsZShnT2JqLCBpbmRleCArIGxldmVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlID0gdGhpcy5tZXJnZU9wdGlvbnModGhpcy5zdHlsZXNbc3R5bGVJbmRleF0sIGFyZ3Muc3R5bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZSA9IHsgbmFtZTogZ09iai5lbGVtZW50LmlkICsgJ2NvbHVtbicgKyAoaW5kZXggKyBsZXZlbCkgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2goY2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzLnB1c2goeyBpbmRleDogdGhpcy5yb3dMZW5ndGgrKywgY2VsbHM6IGNlbGxzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0FnZ3JlZ2F0ZXMgPSBmdW5jdGlvbiAoZ09iaiwgcmVjLCBjdXJyZW50Vmlld1JlY29yZHMsIGluZGVudCkge1xuICAgICAgICAgICAgdmFyIHN1bW1hcnlNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLlN1bW1hcnlNb2RlbEdlbmVyYXRvcihnT2JqKTtcbiAgICAgICAgICAgIHZhciBkYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRWaWV3UmVjb3JkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IGN1cnJlbnRWaWV3UmVjb3JkcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRhdGEgPSByZWM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpbmRlbnQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXBTdW1tYXJ5TW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcihnT2JqKTtcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXBTdW1tYXJ5Um93cyA9IGdyb3VwU3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhLCB7IGxldmVsOiBkYXRhLmxldmVsIH0pO1xuICAgICAgICAgICAgICAgIGlmIChncm91cFN1bW1hcnlSb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxsQWdncmVnYXRlcyhnT2JqLCBncm91cFN1bW1hcnlSb3dzLCBpbmRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzUm93cyA9IHN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YSwgcmVjLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgaWYgKHNSb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGxBZ2dyZWdhdGVzKGdPYmosIHNSb3dzLCBpbmRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZmlsbEFnZ3JlZ2F0ZXMgPSBmdW5jdGlvbiAoZ09iaiwgY2VsbHMsIGluZGVudCwgY3VzdG9tSW5kZXgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY2VsbHNfMSA9IGNlbGxzOyBfaSA8IGNlbGxzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IGNlbGxzXzFbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBjZWxsc18yID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gcm93LmNlbGxzOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IF9iW19hXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVDZWxsID0ge307XG4gICAgICAgICAgICAgICAgICAgIGlmICgoY2VsbC52aXNpYmxlIHx8IHRoaXMuaW5jbHVkZUhpZGRlbkNvbHVtbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC5pc0RhdGFDZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwuaW5kZXggPSBpbmRleCArIGluZGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVGbiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLmNvbHVtbi5mb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBlbnVtXzEuQ2VsbFR5cGUuU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKGNlbGwuY29sdW1uLmZvb3RlclRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dCA9ICh0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgY2VsbC5jZWxsVHlwZSldKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHR4dFswXS53aG9sZVRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNlbGwuY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKGNlbGwuY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHh0ID0gKHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBjZWxsLmNlbGxUeXBlKV0ocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gdHh0WzBdLndob2xlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2VsbC5jb2x1bW4uZ3JvdXBDYXB0aW9uVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLkNhcHRpb25TdW1tYXJ5KV0gPSBlajJfYmFzZV8xLmNvbXBpbGUoY2VsbC5jb2x1bW4uZ3JvdXBDYXB0aW9uVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHh0ID0gKHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBjZWxsLmNlbGxUeXBlKV0ocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gdHh0WzBdLndob2xlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9jID0gMCwgX2QgPSBPYmplY3Qua2V5cyhyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0pOyBfYyA8IF9kLmxlbmd0aDsgX2MrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IF9kW19jXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IGNlbGwuY29sdW1uLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLnN1bSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLnN1bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmF2ZXJhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5hdmVyYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0ubWF4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0ubWF4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0ubWluICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0ubWluO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uY291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5jb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLnRydWVjb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLnRydWVjb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmZhbHNlY291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5mYWxzZWNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uY3VzdG9tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uY3VzdG9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC5zdHlsZSA9IHRoaXMuZ2V0Q2FwdGlvblRoZW1lU3R5bGUodGhpcy50aGVtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHNfMi5wdXNoKGVDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21JbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLmluZGV4ID0gaW5kZXggKyBpbmRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnN0eWxlID0gdGhpcy5nZXRDYXB0aW9uVGhlbWVTdHlsZSh0aGlzLnRoZW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHNfMi5wdXNoKGVDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGN1c3RvbUluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dzLnB1c2goeyBpbmRleDogY3VzdG9tSW5kZXgsIGNlbGxzOiBjZWxsc18yIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dzLnB1c2goeyBpbmRleDogdGhpcy5yb3dMZW5ndGgrKywgY2VsbHM6IGNlbGxzXzIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUubWVyZ2VPcHRpb25zID0gZnVuY3Rpb24gKEpTT04xLCBKU09OMikge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAgICAgdmFyIGF0dHJuYW1lID0gT2JqZWN0LmtleXMoSlNPTjEpO1xuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGF0dHJuYW1lLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGlmIChhdHRybmFtZVtpbmRleF0gIT09ICduYW1lJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbYXR0cm5hbWVbaW5kZXhdXSA9IEpTT04xW2F0dHJuYW1lW2luZGV4XV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXR0cm5hbWUgPSBPYmplY3Qua2V5cyhKU09OMik7XG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgYXR0cm5hbWUubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJuYW1lW2luZGV4XSAhPT0gJ25hbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFthdHRybmFtZVtpbmRleF1dID0gSlNPTjJbYXR0cm5hbWVbaW5kZXhdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0Q29sdW1uU3R5bGUgPSBmdW5jdGlvbiAoZ09iaiwgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5zdHlsZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChzdHlsZS5uYW1lID09PSBnT2JqLmVsZW1lbnQuaWQgKyAnY29sdW1uJyArIGNvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzSGVhZGVyQ29udGVudCA9IGZ1bmN0aW9uIChnT2JqLCBoZWFkZXJSb3csIGV4cG9ydFByb3BlcnRpZXMsIGluZGVudCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGdPYmouY29sdW1ucztcbiAgICAgICAgICAgIHZhciByb3dJbmRleCA9IDE7XG4gICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWUgPSBoZWFkZXJSb3c7XG4gICAgICAgICAgICB2YXIgZ3JpZFJvd3MgPSByZXR1cm5WYWx1ZS5yb3dzO1xuICAgICAgICAgICAgdmFyIGdyaWRDb2x1bW5zID0gcmV0dXJuVmFsdWUuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBzcGFubmVkQ2VsbHMgPSBbXTtcbiAgICAgICAgICAgIGlmIChpbmRlbnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaW5kZXggIT09IGluZGVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMucHVzaCh7IGluZGV4OiBpbmRleCArIDEsIHdpZHRoOiAzMCB9KTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBncmlkUm93cy5sZW5ndGg7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDZWxsSW5kZXggPSAxICsgaW5kZW50O1xuICAgICAgICAgICAgICAgIHZhciBjZWxscyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGNvbHVtbl8xID0gMDsgY29sdW1uXzEgPCBncmlkUm93c1tyb3ddLmNlbGxzLmxlbmd0aDsgY29sdW1uXzErKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyaWRDZWxsID0gZ3JpZFJvd3Nbcm93XS5jZWxsc1tjb2x1bW5fMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB7IGNvbnRhaW5zOiB0cnVlLCBpbmRleDogMSB9O1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVzdWx0LmNvbnRhaW5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmdldEluZGV4KHNwYW5uZWRDZWxscywgcm93SW5kZXgsIGN1cnJlbnRDZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENlbGxJbmRleCA9IHJlc3VsdC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmNvbnRhaW5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5pbmRleCA9IHJlc3VsdC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JpZENlbGwucm93U3BhbiAhPT0gdW5kZWZpbmVkICYmIGdyaWRDZWxsLnJvd1NwYW4gIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwucm93U3BhbiA9IGdyaWRDZWxsLnJvd1NwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gcm93SW5kZXg7IGkgPCBncmlkQ2VsbC5yb3dTcGFuICsgcm93SW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFubmVkQ2VsbCA9IHsgcm93SW5kZXg6IDAsIGNvbHVtbkluZGV4OiAwIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbm5lZENlbGwucm93SW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5uZWRDZWxsLmNvbHVtbkluZGV4ID0gY3VycmVudENlbGxJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFubmVkQ2VsbHMucHVzaChzcGFubmVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdyaWRDZWxsLmNvbFNwYW4gIT09IHVuZGVmaW5lZCAmJiBncmlkQ2VsbC5jb2xTcGFuICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNvbFNwYW4gPSBncmlkQ2VsbC5jb2xTcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENlbGxJbmRleCA9IGN1cnJlbnRDZWxsSW5kZXggKyBjZWxsLmNvbFNwYW4gLSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSBncmlkQ2VsbC5jb2x1bW4uaGVhZGVyVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCAmJiBleHBvcnRQcm9wZXJ0aWVzLnRoZW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGhlbWUgPSBleHBvcnRQcm9wZXJ0aWVzLnRoZW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB0aGlzLmdldEhlYWRlclRoZW1lU3R5bGUodGhpcy50aGVtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChncmlkQ2VsbC5jb2x1bW4udGV4dEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLmhBbGlnbiA9IGdyaWRDZWxsLmNvbHVtbi50ZXh0QWxpZ247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdyaWRDZWxsLmNvbHVtbi5oZWFkZXJUZXh0QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUuaEFsaWduID0gZ3JpZENlbGwuY29sdW1uLmhlYWRlclRleHRBbGlnbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlID0gc3R5bGU7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2goY2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsSW5kZXgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzLnB1c2goeyBpbmRleDogdGhpcy5yb3dMZW5ndGgrKywgY2VsbHM6IGNlbGxzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgY29sID0gMDsgY29sIDwgZ3JpZENvbHVtbnMubGVuZ3RoOyBjb2wrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VTdHlsZXMoZ09iaiwgZ3JpZENvbHVtbnNbY29sXSwgdGhpcy5nZXRSZWNvcmRUaGVtZVN0eWxlKHRoaXMudGhlbWUpLCBpbmRlbnQgKyBjb2wgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmdldEhlYWRlclRoZW1lU3R5bGUgPSBmdW5jdGlvbiAodGhlbWUpIHtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IHt9O1xuICAgICAgICAgICAgc3dpdGNoICh0aGVtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZhYnJpYyc6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRDb2xvciA9ICcjNjY2NjY2JztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udE5hbWUgPSAnU2Vnb2UgVUknO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDE0O1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib3JkZXJzID0geyBjb2xvcjogJyNFQUVBRUEnIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb3RzdHJhcCc6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRDb2xvciA9ICcjMzMzMzBGJztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udFNpemUgPSAxNDtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9sZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvcmRlcnMgPSB7IGNvbG9yOiAnIzMzMzMwRicgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udFNpemUgPSAxMjtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRTBFMEUwJyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmdldENhcHRpb25UaGVtZVN0eWxlID0gZnVuY3Rpb24gKHRoZW1lKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhlbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdmYWJyaWMnOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250Q29sb3IgPSAnIzMzMzMwRic7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnROYW1lID0gJ1NlZ29lIFVJJztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udFNpemUgPSAxNDtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYmFja0NvbG9yID0gJyNGNkY2RjYnO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib3JkZXJzID0geyBjb2xvcjogJyNFQUVBRUEnIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb3RzdHJhcCc6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRDb2xvciA9ICcjMzMzMzBGJztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udFNpemUgPSAxNDtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9sZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvcmRlcnMgPSB7IGNvbG9yOiAnI0VBRUFFQScgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udFNpemUgPSAxMztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYmFja0NvbG9yID0gJyNGNkY2RjYnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmdldFJlY29yZFRoZW1lU3R5bGUgPSBmdW5jdGlvbiAodGhlbWUpIHtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IHt9O1xuICAgICAgICAgICAgc3dpdGNoICh0aGVtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZhYnJpYyc6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRDb2xvciA9ICcjMzMzMzMzJztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udE5hbWUgPSAnU2Vnb2UgVUknO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDEzO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib3JkZXJzID0geyBjb2xvcjogJyNFQUVBRUEnIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb3RzdHJhcCc6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRDb2xvciA9ICcjMzMzMzBGJztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udFNpemUgPSAxNDtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjREREREREJyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250U2l6ZSA9IDEzO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib3JkZXJzID0geyBjb2xvcjogJyNFMEUwRTAnIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0V4Y2VsSGVhZGVyID0gZnVuY3Rpb24gKGhlYWRlcikge1xuICAgICAgICAgICAgaWYgKGhlYWRlci5yb3dzICE9PSB1bmRlZmluZWQgJiYgKHRoaXMuZXhwVHlwZSA9PT0gJ25ld3NoZWV0JyB8fCB0aGlzLnJvd0xlbmd0aCA9PT0gMSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9Sb3dzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXIuaGVhZGVyUm93cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoID0gaGVhZGVyLnJvd3MubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggPSBoZWFkZXIuaGVhZGVyUm93cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucm93TGVuZ3RoIDwgaGVhZGVyLnJvd3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IHRoaXMucm93TGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm9Sb3dzID0gaGVhZGVyLnJvd3MubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCsrO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG5vUm93czsgcm93KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpzb24gPSBoZWFkZXIucm93c1tyb3ddO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShqc29uLmluZGV4ICE9PSBudWxsICYmIGpzb24uaW5kZXggIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uaW5kZXggPSAocm93ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVkQ2VsbEluZGV4KGpzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnVwZGF0ZWRDZWxsSW5kZXggPSBmdW5jdGlvbiAoanNvbikge1xuICAgICAgICAgICAgdmFyIGNlbGxzTGVuZ3RoID0ganNvbi5jZWxscy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBjZWxsSWQgPSAwOyBjZWxsSWQgPCBjZWxsc0xlbmd0aDsgY2VsbElkKyspIHtcbiAgICAgICAgICAgICAgICB2YXIganNvbkNlbGwgPSBqc29uLmNlbGxzW2NlbGxJZF07XG4gICAgICAgICAgICAgICAgaWYgKCEoanNvbkNlbGwuaW5kZXggIT09IG51bGwgJiYganNvbkNlbGwuaW5kZXggIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgICAgICAgICAganNvbkNlbGwuaW5kZXggPSAoY2VsbElkICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3dzLnB1c2goanNvbik7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzRXhjZWxGb290ZXIgPSBmdW5jdGlvbiAoZm9vdGVyKSB7XG4gICAgICAgICAgICBpZiAoZm9vdGVyLnJvd3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciBub1Jvd3MgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKGZvb3Rlci5mb290ZXJSb3dzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggKz0gZm9vdGVyLnJvd3MubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvb3Rlci5mb290ZXJSb3dzID4gZm9vdGVyLnJvd3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCArPSAoZm9vdGVyLmZvb3RlclJvd3MgLSBmb290ZXIucm93cy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9Sb3dzID0gZm9vdGVyLnJvd3MubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9Sb3dzID0gZm9vdGVyLmZvb3RlclJvd3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgbm9Sb3dzOyByb3crKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IGZvb3Rlci5yb3dzW3Jvd107XG4gICAgICAgICAgICAgICAgICAgIGlmIChqc29uLmluZGV4ID09PSBudWxsIHx8IGpzb24uaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pbmRleCA9IHRoaXMucm93TGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmluZGV4ICs9IHRoaXMucm93TGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlZENlbGxJbmRleChqc29uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRJbmRleCA9IGZ1bmN0aW9uIChzcGFubmVkQ2VsbHMsIHJvd0luZGV4LCBjb2x1bW5JbmRleCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzcGFubmVkQ2VsbHNfMSA9IHNwYW5uZWRDZWxsczsgX2kgPCBzcGFubmVkQ2VsbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc3Bhbm5lZENlbGwgPSBzcGFubmVkQ2VsbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKChzcGFubmVkQ2VsbC5yb3dJbmRleCA9PT0gcm93SW5kZXgpICYmIChzcGFubmVkQ2VsbC5jb2x1bW5JbmRleCA9PT0gY29sdW1uSW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbkluZGV4ID0gY29sdW1uSW5kZXggKyAxO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBjb250YWluczogdHJ1ZSwgaW5kZXg6IGNvbHVtbkluZGV4IH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgY29udGFpbnM6IGZhbHNlLCBpbmRleDogY29sdW1uSW5kZXggfTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnBhcnNlU3R5bGVzID0gZnVuY3Rpb24gKGdPYmosIGNvbCwgc3R5bGUsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoY29sLmZvcm1hdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbC5mb3JtYXQuc2tlbGV0b24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5udW1iZXJGb3JtYXQgPSBjb2wuZm9ybWF0LnNrZWxldG9uO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmZvcm1hdC50eXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLnR5cGUgPSBjb2wuZm9ybWF0LnR5cGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLm51bWJlckZvcm1hdCA9IGNvbC5mb3JtYXQ7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLnR5cGUgPSBjb2wudHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sLnRleHRBbGlnbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuaEFsaWduID0gY29sLnRleHRBbGlnbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzdHlsZSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHN0eWxlLm5hbWUgPSBnT2JqLmVsZW1lbnQuaWQgKyAnY29sdW1uJyArIGluZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVzLnB1c2goc3R5bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbC53aWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zLnB1c2goeyBpbmRleDogaW5kZXgsIHdpZHRoOiBjb2wud2lkdGggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRXhjZWxFeHBvcnQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkV4Y2VsRXhwb3J0ID0gRXhjZWxFeHBvcnQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9leGNlbC1leHBvcnQuanNcbi8vIG1vZHVsZSBpZCA9IDg0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84NV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiXG4vLyBtb2R1bGUgaWQgPSA4NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLy4uL21vZGVscy9yb3dcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL21vZGVscy9jZWxsXCIsIFwiLi8uLi9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCByb3dfMSwgZW51bV8xLCBlajJfYmFzZV8xLCBjZWxsXzEsIHZhbHVlX2Zvcm1hdHRlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFeHBvcnRIZWxwZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBFeHBvcnRIZWxwZXIocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLmdldEhlYWRlcnMgPSBmdW5jdGlvbiAoY29sdW1uLCBpc0hpZGVDb2x1bW5JbmNsdWRlKSB7XG4gICAgICAgICAgICBpZiAoaXNIaWRlQ29sdW1uSW5jbHVkZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbHMgPSBjb2x1bW47XG4gICAgICAgICAgICB0aGlzLmNvbERlcHRoID0gdGhpcy5tZWFzdXJlQ29sdW1uRGVwdGgoY29scyk7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdmFyIGFjdHVhbENvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2xEZXB0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93c1tpXSA9IG5ldyByb3dfMS5Sb3coe30pO1xuICAgICAgICAgICAgICAgIHJvd3NbaV0uY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvd3MgPSB0aGlzLnByb2Nlc3NDb2x1bW5zKHJvd3MpO1xuICAgICAgICAgICAgcm93cyA9IHRoaXMucHJvY2Vzc0hlYWRlckNlbGxzKHJvd3MpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCByb3dzXzEgPSByb3dzOyBfaSA8IHJvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gcm93c18xW19pXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvdy5jZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvdy5jZWxsc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwudmlzaWJsZSA9PT0gdW5kZWZpbmVkICYmIGNlbGwuY2VsbFR5cGUgIT09IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscyA9IHRoaXMucmVtb3ZlQ2VsbEZyb21Sb3cocm93LmNlbGxzLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKCFpc0hpZGVDb2x1bW5JbmNsdWRlKSAmJiBjZWxsLnZpc2libGUgIT09IHVuZGVmaW5lZCAmJiAoIWNlbGwudmlzaWJsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jZWxscyA9IHRoaXMucmVtb3ZlQ2VsbEZyb21Sb3cocm93LmNlbGxzLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29scy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVBY3R1YWxDb2x1bW5zKGNvbHNbaV0sIGFjdHVhbENvbHVtbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgcm93czogcm93cywgY29sdW1uczogYWN0dWFsQ29sdW1ucyB9O1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLmdlbmVyYXRlQWN0dWFsQ29sdW1ucyA9IGZ1bmN0aW9uIChjb2x1bW4sIGFjdHVhbENvbHVtbnMpIHtcbiAgICAgICAgICAgIGlmICghY29sdW1uLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUgfHwgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSkge1xuICAgICAgICAgICAgICAgICAgICBhY3R1YWxDb2x1bW5zLnB1c2goY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUgfHwgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sU3BhbiA9IHRoaXMuZ2V0Q2VsbENvdW50KGNvbHVtbiwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xTcGFuICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHVtbi5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUFjdHVhbENvbHVtbnMoY29sdW1uLmNvbHVtbnNbaV0sIGFjdHVhbENvbHVtbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLnJlbW92ZUNlbGxGcm9tUm93ID0gZnVuY3Rpb24gKGNlbGxzLCBjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRDZWxscyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjZWxsSW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdENlbGxzLnB1c2goY2VsbHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IChjZWxsSW5kZXggKyAxKTsgaSA8IGNlbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Q2VsbHMucHVzaChjZWxsc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0Q2VsbHM7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUucHJvY2Vzc0hlYWRlckNlbGxzID0gZnVuY3Rpb24gKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gPyB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkgOiB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93cyA9IHRoaXMuYXBwZW5kR3JpZENlbGxzKGNvbHVtbnNbaV0sIHJvd3MsIDAsIGkgPT09IDAsIGZhbHNlLCBpID09PSAoY29sdW1ucy5sZW5ndGggLSAxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5hcHBlbmRHcmlkQ2VsbHMgPSBmdW5jdGlvbiAoY29scywgZ3JpZFJvd3MsIGluZGV4LCBpc0ZpcnN0T2JqLCBpc0ZpcnN0Q29sdW1uLCBpc0xhc3RDb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBsYXN0Q29sID0gaXNMYXN0Q29sdW1uID8gJ2UtbGFzdGNlbGwnIDogJyc7XG4gICAgICAgICAgICBpZiAoIWNvbHMuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGdyaWRSb3dzW2luZGV4XS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKGNvbHMsIGVudW1fMS5DZWxsVHlwZS5IZWFkZXIsIHRoaXMuY29sRGVwdGggLSBpbmRleCwgKGlzRmlyc3RPYmogPyAnJyA6IChpc0ZpcnN0Q29sdW1uID8gJ2UtZmlyc3RjZWxsJyA6ICcnKSkgKyBsYXN0Q29sLCBpbmRleCwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeVVpZChjb2xzLnVpZCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjb2xTcGFuID0gdGhpcy5nZXRDZWxsQ291bnQoY29scywgMCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JpZFJvd3NbaW5kZXhdLmNlbGxzLnB1c2gobmV3IGNlbGxfMS5DZWxsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxUeXBlOiBlbnVtXzEuQ2VsbFR5cGUuU3RhY2tlZEhlYWRlciwgY29sdW1uOiBjb2xzLCBjb2xTcGFuOiBjb2xTcGFuXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGlzRmlyc3RDZWxsID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBpc0lnbm9yZUZpcnN0Q2VsbCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzRmlyc3RDZWxsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xzLmNvbHVtbnNbaV0udmlzaWJsZSAmJiAhaXNJZ25vcmVGaXJzdENlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRmlyc3RDZWxsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzSWdub3JlRmlyc3RDZWxsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBncmlkUm93cyA9IHRoaXMuYXBwZW5kR3JpZENlbGxzKGNvbHMuY29sdW1uc1tpXSwgZ3JpZFJvd3MsIGluZGV4ICsgMSwgaXNGaXJzdE9iaiwgaSA9PT0gMCwgaSA9PT0gKGxlbiAtIDEpICYmIGlzTGFzdENvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdyaWRSb3dzO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLmdlbmVyYXRlQ2VsbCA9IGZ1bmN0aW9uIChncmlkQ29sdW1uLCBjZWxsVHlwZSwgcm93U3BhbiwgY2xhc3NOYW1lLCByb3dJbmRleCwgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSB7XG4gICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBncmlkQ29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAnaXNUZW1wbGF0ZSc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGdyaWRDb2x1bW4uaGVhZGVyVGVtcGxhdGUpLFxuICAgICAgICAgICAgICAgICdyb3dJRCc6ICcnLFxuICAgICAgICAgICAgICAgICdjb2x1bW4nOiBncmlkQ29sdW1uLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6IGNlbGxUeXBlLFxuICAgICAgICAgICAgICAgICdyb3dTcGFuJzogcm93U3BhbixcbiAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzogY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICdpbmRleCc6IHJvd0luZGV4LFxuICAgICAgICAgICAgICAgICdjb2xJbmRleCc6IGNvbHVtbkluZGV4XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFvcHRpb24ucm93U3BhbiB8fCBvcHRpb24ucm93U3BhbiA8IDIpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9uLnJvd1NwYW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUucHJvY2Vzc0NvbHVtbnMgPSBmdW5jdGlvbiAocm93cykge1xuICAgICAgICAgICAgdmFyIGdyaWRPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5JbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ3JpZE9iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsZW5fMSA9IGdyaWRPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaiA8IGxlbl8xOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBjb2x1bW5JbmRleGVzLmluZGV4T2YoaikgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5IZWFkZXJJbmRlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ3JpZE9iai5kZXRhaWxUZW1wbGF0ZSB8fCBncmlkT2JqLmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5EZXRhaWxIZWFkZXIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5nZXRDZWxsQ291bnQgPSBmdW5jdGlvbiAoY29sdW1uLCBjb3VudCkge1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW4uY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IHRoaXMuZ2V0Q2VsbENvdW50KGNvbHVtbi5jb2x1bW5zW2ldLCBjb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlIHx8IHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUubWVhc3VyZUNvbHVtbkRlcHRoID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIG1heCA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHVtbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkZXB0aCA9IHRoaXMuY2hlY2tEZXB0aChjb2x1bW5baV0sIDApO1xuICAgICAgICAgICAgICAgIGlmIChtYXggPCBkZXB0aCkge1xuICAgICAgICAgICAgICAgICAgICBtYXggPSBkZXB0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWF4ICsgMTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5jaGVja0RlcHRoID0gZnVuY3Rpb24gKGNvbCwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChjb2wuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2wuY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuY2hlY2tEZXB0aChjb2wuY29sdW1uc1tpXSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICByZXR1cm4gRXhwb3J0SGVscGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FeHBvcnRIZWxwZXIgPSBFeHBvcnRIZWxwZXI7XG4gICAgdmFyIEV4cG9ydFZhbHVlRm9ybWF0dGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRXhwb3J0VmFsdWVGb3JtYXR0ZXIoKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlRm9ybWF0dGVyID0gbmV3IHZhbHVlX2Zvcm1hdHRlcl8xLlZhbHVlRm9ybWF0dGVyKCk7XG4gICAgICAgICAgICB0aGlzLmludGVybmF0aW9uYWxpemF0aW9uID0gbmV3IGVqMl9iYXNlXzEuSW50ZXJuYXRpb25hbGl6YXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBFeHBvcnRWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuZm9ybWF0Q2VsbFZhbHVlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSAnbnVtYmVyJyAmJiBhcmdzLmNvbHVtbi5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiBhcmdzLmNvbHVtbi5mb3JtYXQgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYXRpb25hbGl6YXRpb24uZ2V0TnVtYmVyRm9ybWF0KHsgZm9ybWF0OiBhcmdzLmNvbHVtbi5mb3JtYXQgfSkoYXJncy52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJncy52YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgoYXJncy5jb2x1bW4udHlwZSA9PT0gJ2RhdGUnIHx8IGFyZ3MuY29sdW1uLnR5cGUgPT09ICdkYXRldGltZScgfHwgYXJncy5jb2x1bW4udHlwZSA9PT0gJ3RpbWUnKSAmJiBhcmdzLmNvbHVtbi5mb3JtYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJncy5jb2x1bW4uZm9ybWF0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybWF0ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSB7IHR5cGU6ICdkYXRlJywgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdCB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZ3MuY29sdW1uLnR5cGUgPT09ICd0aW1lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0geyB0eXBlOiAndGltZScsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IHsgdHlwZTogJ2RhdGVUaW1lJywgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdCB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlRm9ybWF0dGVyLmdldEZvcm1hdEZ1bmN0aW9uKGZvcm1hdCkoYXJncy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5jb2x1bW4uZm9ybWF0IGluc3RhbmNlb2YgT2JqZWN0ICYmIGFyZ3MuY29sdW1uLmZvcm1hdC50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoYXJncy52YWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXN0b21Gb3JtYXQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tRm9ybWF0ID0geyB0eXBlOiBhcmdzLmNvbHVtbi5mb3JtYXQudHlwZSwgZm9ybWF0OiBhcmdzLmNvbHVtbi5mb3JtYXQuZm9ybWF0LCBza2VsZXRvbjogYXJncy5jb2x1bW4uZm9ybWF0LnNrZWxldG9uIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSAndGltZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21Gb3JtYXQgPSB7IHR5cGU6ICd0aW1lJywgZm9ybWF0OiBhcmdzLmNvbHVtbi5mb3JtYXQuZm9ybWF0LCBza2VsZXRvbjogYXJncy5jb2x1bW4uZm9ybWF0LnNrZWxldG9uIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21Gb3JtYXQgPSB7IHR5cGU6ICdkYXRlVGltZScsIGZvcm1hdDogYXJncy5jb2x1bW4uZm9ybWF0LmZvcm1hdCwgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdC5za2VsZXRvbiB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVGb3JtYXR0ZXIuZ2V0Rm9ybWF0RnVuY3Rpb24oY3VzdG9tRm9ybWF0KShhcmdzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSB1bmRlZmluZWQgfHwgYXJncy5jb2x1bW4udHlwZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGFyZ3MudmFsdWUpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRXhwb3J0VmFsdWVGb3JtYXR0ZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkV4cG9ydFZhbHVlRm9ybWF0dGVyID0gRXhwb3J0VmFsdWVGb3JtYXR0ZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9leHBvcnQtaGVscGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA4NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZlwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGZcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZlwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGZcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmXCIsIFwiLi9leHBvcnQtaGVscGVyXCIsIFwiLi4vYWN0aW9ucy9kYXRhXCIsIFwiLi4vc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3JcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZXZlbnRzLCBlajJfcGRmXzEsIGVqMl9wZGZfMiwgZWoyX3BkZl8zLCBlajJfcGRmXzQsIGVqMl9wZGZfNSwgZWoyX3BkZl82LCBleHBvcnRfaGVscGVyXzEsIGRhdGFfMSwgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMSwgZWoyX2Jhc2VfMSwgZW51bV8xLCBlajJfZGF0YV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQZGZFeHBvcnQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQZGZFeHBvcnQocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21EYXRhU291cmNlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmdyaWRUaGVtZSA9ICdtYXRlcmlhbCc7XG4gICAgICAgICAgICB0aGlzLmlzR3JvdXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3IGRhdGFfMS5EYXRhKHBhcmVudCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdQZGZFeHBvcnQnO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyID0gbmV3IGV4cG9ydF9oZWxwZXJfMS5FeHBvcnRWYWx1ZUZvcm1hdHRlcigpO1xuICAgICAgICAgICAgdGhpcy5wZGZEb2N1bWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHZhciBnT2JqID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5ncmlkVGhlbWUgPSAnbWF0ZXJpYWwnO1xuICAgICAgICAgICAgdGhpcy5pc0dyb3VwaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzRXhwb3J0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlUGRmRXhwb3J0KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5NYXAgPSBmdW5jdGlvbiAocGFyZW50LCBwZGZFeHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCBwZGZEb2MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgZGF0YV8xLkRhdGEodGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCAmJiBwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHsgdXJsOiBwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UuZGF0YVNvdXJjZS51cmwsIGFkYXB0b3I6IHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZS5hZGFwdG9yIH0pLmV4ZWN1dGVRdWVyeShuZXcgZWoyX2RhdGFfMS5RdWVyeSgpKS50aGVuKGZ1bmN0aW9uIChyZXR1cm5UeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0KHBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGRmRG9jICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZGZEb2N1bWVudCA9IHBkZkRvYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBkZkRvY3VtZW50ID0gbmV3IGVqMl9wZGZfMS5QZGZEb2N1bWVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvY2Vzc0V4cG9ydChwYXJlbnQsIHJldHVyblR5cGUsIHBkZkV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNFeHBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC50cmlnZ2VyKGV2ZW50cy5wZGZFeHBvcnRDb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF90aGlzLnBkZkRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFNYW5hZ2VyID0gX3RoaXMuZGF0YS5nZXREYXRhKHt9LCBfdGhpcy5kYXRhLmdlbmVyYXRlUXVlcnkodHJ1ZSkucmVxdWlyZXNDb3VudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAocmV0dXJuVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdChwYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBkZkRvYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGRmRG9jdW1lbnQgPSBwZGZEb2M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZGZEb2N1bWVudCA9IG5ldyBlajJfcGRmXzEuUGRmRG9jdW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb2Nlc3NFeHBvcnQocGFyZW50LCByZXR1cm5UeXBlLCBwZGZFeHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzRXhwb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQudHJpZ2dlcihldmVudHMucGRmRXhwb3J0Q29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5wZGZEb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NFeHBvcnQgPSBmdW5jdGlvbiAoZ09iaiwgcmV0dXJuVHlwZSwgcGRmRXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZGF0YVNvdXJjZSA9IHJldHVyblR5cGUucmVzdWx0O1xuICAgICAgICAgICAgdmFyIHNlY3Rpb24gPSB0aGlzLnBkZkRvY3VtZW50LnNlY3Rpb25zLmFkZCgpO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMucHJvY2Vzc0V4cG9ydFByb3BlcnRpZXMocGRmRXhwb3J0UHJvcGVydGllcywgZGF0YVNvdXJjZSwgc2VjdGlvbik7XG4gICAgICAgICAgICBkYXRhU291cmNlID0gcmVzdWx0LmRhdGFTb3VyY2U7XG4gICAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5Hcm91cEd1aWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNHcm91cGluZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWN0aW9uID0gcmVzdWx0LnNlY3Rpb247XG4gICAgICAgICAgICB2YXIgcGRmUGFnZSA9IHNlY3Rpb24ucGFnZXMuYWRkKCk7XG4gICAgICAgICAgICB2YXIgcGRmR3JpZCA9IG5ldyBlajJfcGRmXzEuUGRmR3JpZCgpO1xuICAgICAgICAgICAgdmFyIGhlYWRlclRoZW1lU3R5bGUgPSB0aGlzLmdldEhlYWRlclRoZW1lU3R5bGUoKTtcbiAgICAgICAgICAgIHZhciBib3JkZXIgPSBoZWFkZXJUaGVtZVN0eWxlLmJvcmRlcjtcbiAgICAgICAgICAgIHZhciBoZWFkZXJGb250ID0gaGVhZGVyVGhlbWVTdHlsZS5mb250O1xuICAgICAgICAgICAgdmFyIGhlYWRlckJydXNoID0gaGVhZGVyVGhlbWVTdHlsZS5icnVzaDtcbiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IChuZXcgZXhwb3J0X2hlbHBlcl8xLkV4cG9ydEhlbHBlcih0aGlzLnBhcmVudCkpLmdldEhlYWRlcnMoY29sdW1ucywgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSk7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHJldHVyblZhbHVlLnJvd3M7XG4gICAgICAgICAgICB2YXIgZ3JpZENvbHVtbnMgPSByZXR1cm5WYWx1ZS5jb2x1bW5zO1xuICAgICAgICAgICAgcGRmR3JpZCA9IHRoaXMucHJvY2Vzc0dyaWRIZWFkZXJzKGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMsIHBkZkdyaWQsIHJvd3MsIGdyaWRDb2x1bW5zLCBib3JkZXIsIGhlYWRlckZvbnQsIGhlYWRlckJydXNoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29sdW1uUHJvcGVydGllcyhncmlkQ29sdW1ucywgcGRmR3JpZCk7XG4gICAgICAgICAgICB2YXIgY2FwdGlvblRoZW1lU3R5bGUgPSB0aGlzLmdldFN1bW1hcnlDYXB0aW9uVGhlbWVTdHlsZSgpO1xuICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBkYXRhU291cmNlICE9PSBudWxsICYmIGRhdGFTb3VyY2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzR3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzR3JvdXBlZFJlY29yZHMocGRmR3JpZCwgZGF0YVNvdXJjZSwgZ3JpZENvbHVtbnMsIGdPYmosIGJvcmRlciwgMCwgY2FwdGlvblRoZW1lU3R5bGUuZm9udCwgY2FwdGlvblRoZW1lU3R5bGUuYnJ1c2gsIGNhcHRpb25UaGVtZVN0eWxlLmJhY2tncm91bmRCcnVzaCwgcmV0dXJuVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmQoYm9yZGVyLCBncmlkQ29sdW1ucywgZ09iaiwgZGF0YVNvdXJjZSwgcGRmR3JpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc1Jvd3MgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbURhdGFTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNSb3dzID0gc3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhU291cmNlLCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY3VycmVudFZpZXdEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzUm93cyA9IHN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3ModGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCksIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzUm93cyA9IHN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YVNvdXJjZS5yZWNvcmRzLCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBzdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKHJldHVyblR5cGUucmVzdWx0LCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoc1Jvd3MsIHBkZkdyaWQsIGJvcmRlciwgY2FwdGlvblRoZW1lU3R5bGUuZm9udCwgY2FwdGlvblRoZW1lU3R5bGUuYnJ1c2gsIGNhcHRpb25UaGVtZVN0eWxlLmJhY2tncm91bmRCcnVzaCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBwZGZHcmlkLnJvd3MuYWRkUm93KCk7XG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldEJvcmRlcihib3JkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGRmR3JpZC5kcmF3KHBkZlBhZ2UsIDIwLCAyMCk7XG4gICAgICAgICAgICBpZiAoIWlzTXVsdGlwbGVFeHBvcnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBkZkRvY3VtZW50LnNhdmUoJ0V4cG9ydC5wZGYnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRTdW1tYXJ5Q2FwdGlvblRoZW1lU3R5bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZ3JpZFRoZW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vdHN0cmFwJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZm9udDogbmV3IGVqMl9wZGZfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl8yLlBkZkZvbnRGYW1pbHkuSGVsdmV0aWNhLCAxMC41KSwgYnJ1c2g6IG5ldyBlajJfcGRmXzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKDUxLCA1MSwgNTEpKSwgYmFja2dyb3VuZEJydXNoOiBuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcigyNTUsIDI1NSwgMjU1KSkgfTtcbiAgICAgICAgICAgICAgICBjYXNlICdmYWJyaWMnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBmb250OiBuZXcgZWoyX3BkZl8yLlBkZlN0YW5kYXJkRm9udChlajJfcGRmXzIuUGRmRm9udEZhbWlseS5IZWx2ZXRpY2EsIDEwLjUpLCBicnVzaDogbmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoNTEsIDUxLCA1MSkpLCBiYWNrZ3JvdW5kQnJ1c2g6IG5ldyBlajJfcGRmXzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKDI0NiwgMjQ2LCAyNDYpKSB9O1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGZvbnQ6IG5ldyBlajJfcGRmXzIuUGRmU3RhbmRhcmRGb250KGVqMl9wZGZfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgOS43NSksIGJydXNoOiBuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcigwLCAwLCAwKSksIGJhY2tncm91bmRCcnVzaDogbmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoMjQ2LCAyNDYsIDI0NikpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0SGVhZGVyVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBib3JkZXIgPSBuZXcgZWoyX3BkZl8xLlBkZkJvcmRlcnMoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5ncmlkVGhlbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdib290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICBib3JkZXIuYWxsID0gbmV3IGVqMl9wZGZfMS5QZGZQZW4obmV3IGVqMl9wZGZfMy5QZGZDb2xvcigyMjEsIDIyMSwgMjIxKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGJvcmRlcjogYm9yZGVyLCBmb250OiBuZXcgZWoyX3BkZl8yLlBkZlN0YW5kYXJkRm9udChlajJfcGRmXzIuUGRmRm9udEZhbWlseS5IZWx2ZXRpY2EsIDEwLjUpLCBicnVzaDogbmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoNTEsIDUxLCA1MSkpIH07XG4gICAgICAgICAgICAgICAgY2FzZSAnZmFicmljJzpcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLmFsbCA9IG5ldyBlajJfcGRmXzEuUGRmUGVuKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoMjI0LCAyMjQsIDIyNCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBib3JkZXI6IGJvcmRlciwgZm9udDogbmV3IGVqMl9wZGZfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl8yLlBkZkZvbnRGYW1pbHkuSGVsdmV0aWNhLCA5KSwgYnJ1c2g6IG5ldyBlajJfcGRmXzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKDAsIDAsIDAuNTQpKSB9O1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci5hbGwgPSBuZXcgZWoyX3BkZl8xLlBkZlBlbihuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKDIzNCwgMjM0LCAyMzQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYm9yZGVyOiBib3JkZXIsIGZvbnQ6IG5ldyBlajJfcGRmXzIuUGRmU3RhbmRhcmRGb250KGVqMl9wZGZfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgMTAuNSksIGJydXNoOiBuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcigxMDIsIDEwMiwgMTAyKSkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzR3JvdXBlZFJlY29yZHMgPSBmdW5jdGlvbiAocGRmR3JpZCwgZGF0YVNvdXJjZSwgZ3JpZENvbHVtbnMsIGdPYmosIGJvcmRlciwgbGV2ZWwsIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIHJldHVyblR5cGUpIHtcbiAgICAgICAgICAgIHZhciBncm91cEluZGV4ID0gbGV2ZWw7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRhdGFTb3VyY2VfMSA9IGRhdGFTb3VyY2U7IF9pIDwgZGF0YVNvdXJjZV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhU291cmNlSXRlbXMgPSBkYXRhU291cmNlXzFbX2ldO1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBwZGZHcmlkLnJvd3MuYWRkUm93KCk7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhU291cmNlSXRlbXMua2V5LFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChkYXRhU291cmNlSXRlbXMuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBkYXRhU291cmNlSXRlbXMuZmllbGQgKyAnOiAnICsgdGhpcy5leHBvcnRWYWx1ZUZvcm1hdHRlci5mb3JtYXRDZWxsVmFsdWUoYXJncykgKyAnIC0gJyArIGRhdGFTb3VyY2VJdGVtcy5jb3VudCArIChkYXRhU291cmNlLmNvdW50ID4gMSA/ICcgaXRlbXMnIDogJyBpdGVtJyk7XG4gICAgICAgICAgICAgICAgcm93LmNlbGxzLmdldENlbGwoZ3JvdXBJbmRleCkudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0Qm9yZGVyKGJvcmRlcik7XG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldEZvbnQoZm9udCk7XG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldFRleHRCcnVzaChicnVzaCk7XG4gICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldEJhY2tncm91bmRCcnVzaChiYWNrZ3JvdW5kQnJ1c2gpO1xuICAgICAgICAgICAgICAgIHZhciBzUm93cyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgY2FwdGlvblN1bW1hcnlNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkNhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFTb3VyY2VJdGVtcy5pdGVtcy5yZWNvcmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBjYXB0aW9uU3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhU291cmNlSXRlbXMuaXRlbXMucmVjb3JkcywgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNSb3dzID0gY2FwdGlvblN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc1Jvd3MgIT09IHVuZGVmaW5lZCAmJiBzUm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzLmdldENlbGwoZ3JvdXBJbmRleCArIDEpLmNvbHVtblNwYW4gPSBwZGZHcmlkLmNvbHVtbnMuY291bnQgLSAoZ3JvdXBJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5jaGlsZExldmVscyAhPT0gdW5kZWZpbmVkICYmIGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoc1Jvd3MsIHBkZkdyaWQsIGJvcmRlciwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgdHJ1ZSwgcm93LCBncm91cEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzR3JvdXBlZFJlY29yZHMocGRmR3JpZCwgZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLCBncmlkQ29sdW1ucywgZ09iaiwgYm9yZGVyLCAoZ3JvdXBJbmRleCArIDEpLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCByZXR1cm5UeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwU3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHNSb3dzID0gZ3JvdXBTdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2VJdGVtcy5pdGVtcy5yZWNvcmRzLCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NBZ2dyZWdhdGVzKHNSb3dzLCBwZGZHcmlkLCBib3JkZXIsIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoc1Jvd3MsIHBkZkdyaWQsIGJvcmRlciwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgdHJ1ZSwgcm93LCBncm91cEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkKGJvcmRlciwgZ3JpZENvbHVtbnMsIGdPYmosIGRhdGFTb3VyY2VJdGVtcy5pdGVtcywgcGRmR3JpZCwgKGdyb3VwSW5kZXggKyAxKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBncm91cFN1bW1hcnlNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgICAgICBzUm93cyA9IGdyb3VwU3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhU291cmNlSXRlbXMuaXRlbXMsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoc1Jvd3MsIHBkZkdyaWQsIGJvcmRlciwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzR3JpZEhlYWRlcnMgPSBmdW5jdGlvbiAoY2hpbGRMZXZlbHMsIHBkZkdyaWQsIHJvd3MsIGdyaWRDb2x1bW5zLCBib3JkZXIsIGhlYWRlckZvbnQsIGhlYWRlckJydXNoKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uQ291bnQgPSBncmlkQ29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uQ291bnQgKz0gKGNoaWxkTGV2ZWxzICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZGZHcmlkLmNvbHVtbnMuYWRkKGNvbHVtbkNvdW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzR3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IChjaGlsZExldmVscyArIDEpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5jb2x1bW5zLmdldENvbHVtbihpKS53aWR0aCA9IDIwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBkZkdyaWQuaGVhZGVycy5hZGQocm93cy5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdyaWRIZWFkZXIgPSBwZGZHcmlkLmhlYWRlcnMuZ2V0SGVhZGVyKGkpO1xuICAgICAgICAgICAgICAgIGdyaWRIZWFkZXIuc3R5bGUuc2V0Qm9yZGVyKGJvcmRlcik7XG4gICAgICAgICAgICAgICAgZ3JpZEhlYWRlci5zdHlsZS5zZXRGb250KGhlYWRlckZvbnQpO1xuICAgICAgICAgICAgICAgIGdyaWRIZWFkZXIuc3R5bGUuc2V0VGV4dEJydXNoKGhlYWRlckJydXNoKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbEluZGV4ID0gdGhpcy5pc0dyb3VwaW5nID8gKGNoaWxkTGV2ZWxzICsgMSkgOiAwO1xuICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNlbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGdyaWRIZWFkZXIuY2VsbHMuY291bnQ7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBncmlkSGVhZGVyLmNlbGxzLmdldENlbGwoaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2VsbEluZGV4OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gZ3JpZEhlYWRlci5jZWxscy5nZXRDZWxsKGopO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcm93c1tpXS5jZWxscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBncmlkSGVhZGVyLmNlbGxzLmdldENlbGwoY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9IHJvd3NbaV0uY2VsbHNbal0uY29sdW1uLmhlYWRlclRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2VsbHNbal0uY29sdW1uLmhlYWRlclRleHRBbGlnbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuc3RyaW5nRm9ybWF0ID0gdGhpcy5nZXRIb3Jpem9udGFsQWxpZ25tZW50KHJvd3NbaV0uY2VsbHNbal0uY29sdW1uLmhlYWRlclRleHRBbGlnbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNlbGxzW2pdLnJvd1NwYW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnJvd1NwYW4gPSByb3dzW2ldLmNlbGxzW2pdLnJvd1NwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuc3RyaW5nRm9ybWF0ID0gdGhpcy5nZXRWZXJ0aWNhbEFsaWdubWVudCgnYm90dG9tJywgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQsIHJvd3NbaV0uY2VsbHNbal0uY29sdW1uLnRleHRBbGlnbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAxOyBrIDwgcm93c1tpXS5jZWxsc1tqXS5yb3dTcGFuOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBkZkdyaWQuaGVhZGVycy5nZXRIZWFkZXIoaSArIGspLmNlbGxzLmdldENlbGwoY2VsbEluZGV4KS52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2VsbHNbal0uY29sU3BhbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY29sdW1uU3BhbiA9IHJvd3NbaV0uY2VsbHNbal0uY29sU3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ICs9IGNlbGwuY29sdW1uU3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXggKz0gY2VsbC5jb2x1bW5TcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogPSBqIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwZGZHcmlkLmNvbHVtbnMuY291bnQgPj0gNikge1xuICAgICAgICAgICAgICAgIHBkZkdyaWQuc3R5bGUuYWxsb3dIb3Jpem9udGFsT3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBkZkdyaWQ7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0V4cG9ydFByb3BlcnRpZXMgPSBmdW5jdGlvbiAocGRmRXhwb3J0UHJvcGVydGllcywgZGF0YVNvdXJjZSwgc2VjdGlvbikge1xuICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLnRoZW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncmlkVGhlbWUgPSBwZGZFeHBvcnRQcm9wZXJ0aWVzLnRoZW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5wYWdlT3JpZW50YXRpb24gIT09IHVuZGVmaW5lZCB8fCBwZGZFeHBvcnRQcm9wZXJ0aWVzLnBhZ2VTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBkZlBhZ2VTZXR0aW5ncyA9IG5ldyBlajJfcGRmXzYuUGRmUGFnZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHBkZlBhZ2VTZXR0aW5ncy5vcmllbnRhdGlvbiA9IChwZGZFeHBvcnRQcm9wZXJ0aWVzLnBhZ2VPcmllbnRhdGlvbiA9PT0gJ0xhbmRzY2FwZScpID8gZWoyX3BkZl82LlBkZlBhZ2VPcmllbnRhdGlvbi5MYW5kc2NhcGUgOiBlajJfcGRmXzYuUGRmUGFnZU9yaWVudGF0aW9uLlBvcnRyYWl0O1xuICAgICAgICAgICAgICAgICAgICBwZGZQYWdlU2V0dGluZ3Muc2l6ZSA9IHRoaXMuZ2V0UGFnZVNpemUocGRmRXhwb3J0UHJvcGVydGllcy5wYWdlU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24uc2V0UGFnZVNldHRpbmdzKHBkZlBhZ2VTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjbGllbnRTaXplID0gdGhpcy5wZGZEb2N1bWVudC5wYWdlU2V0dGluZ3Muc2l6ZTtcbiAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5oZWFkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVyID0gcGRmRXhwb3J0UHJvcGVydGllcy5oZWFkZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IG5ldyBlajJfcGRmXzUuUG9pbnRGKDAsIGhlYWRlci5mcm9tVG9wKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNpemUgPSBuZXcgZWoyX3BkZl82LlNpemVGKChjbGllbnRTaXplLndpZHRoIC0gODApLCAoaGVhZGVyLmhlaWdodCAqIDAuNzUpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG5ldyBlajJfcGRmXzQuUmVjdGFuZ2xlRihwb3NpdGlvbiwgc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGRmRG9jdW1lbnQudGVtcGxhdGUudG9wID0gdGhpcy5kcmF3UGFnZVRlbXBsYXRlKG5ldyBlajJfcGRmXzQuUGRmUGFnZVRlbXBsYXRlRWxlbWVudChib3VuZHMpLCBoZWFkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5mb290ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9vdGVyID0gcGRmRXhwb3J0UHJvcGVydGllcy5mb290ZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IG5ldyBlajJfcGRmXzUuUG9pbnRGKDAsICgoY2xpZW50U2l6ZS53aWR0aCAtIDgwKSAtIChmb290ZXIuZnJvbUJvdHRvbSAqIDAuNzUpKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gbmV3IGVqMl9wZGZfNi5TaXplRigoY2xpZW50U2l6ZS53aWR0aCAtIDgwKSwgKGZvb3Rlci5oZWlnaHQgKiAwLjc1KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgZWoyX3BkZl80LlJlY3RhbmdsZUYocG9zaXRpb24sIHNpemUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBkZkRvY3VtZW50LnRlbXBsYXRlLmJvdHRvbSA9IHRoaXMuZHJhd1BhZ2VUZW1wbGF0ZShuZXcgZWoyX3BkZl80LlBkZlBhZ2VUZW1wbGF0ZUVsZW1lbnQoYm91bmRzKSwgZm9vdGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMuaW5jbHVkZUhpZGRlbkNvbHVtbiAhPT0gdW5kZWZpbmVkICYmICF0aGlzLmlzR3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSA9IHBkZkV4cG9ydFByb3BlcnRpZXMuaW5jbHVkZUhpZGRlbkNvbHVtbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlID0gcGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tRGF0YVNvdXJjZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMuZXhwb3J0VHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmV4cG9ydFR5cGUgPT09ICdjdXJyZW50dmlldycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2UgPSB0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tRGF0YVNvdXJjZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tRGF0YVNvdXJjZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tRGF0YVNvdXJjZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YVNvdXJjZTogZGF0YVNvdXJjZSwgc2VjdGlvbjogc2VjdGlvbiB9O1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdQYWdlVGVtcGxhdGUgPSBmdW5jdGlvbiAodGVtcGxhdGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBlbGVtZW50LmNvbnRlbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0NvbnRlbnRWYWxpZGF0aW9uKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RleHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQudmFsdWUgPT09ICcnIHx8IGNvbnRlbnQudmFsdWUgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnZhbHVlID09PSBudWxsIHx8IHR5cGVvZiBjb250ZW50LnZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHRoZSB2YWxpZCBpbnB1dCB2YWx1ZSBpbiB0ZXh0IGNvbnRlbnQuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1RleHQodGVtcGxhdGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhZ2VOdW1iZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3UGFnZU51bWJlcih0ZW1wbGF0ZSwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW1hZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3JjID09PSB1bmRlZmluZWQgfHwgY29udGVudC5zcmMgPT09IG51bGwgfHwgY29udGVudC5zcmMgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdGhlIHZhbGlkIGJhc2U2NCBzdHJpbmcgaW4gaW1hZ2UgY29udGVudC4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3SW1hZ2UodGVtcGxhdGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3TGluZSh0ZW1wbGF0ZSwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIHNldCB2YWxpZCBjb250ZW50IHR5cGUuLi4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0NvbnRlbnRWYWxpZGF0aW9uID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICcnIHx8IGNvbnRlbnQudHlwZSA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQudHlwZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIHNldCB2YWxpZCBjb250ZW50IHR5cGUuLi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdsaW5lJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb2ludHMgPT09ICcnIHx8IGNvbnRlbnQucG9pbnRzID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHBvaW50cyBpbiAnICsgY29udGVudC50eXBlICsgJyBjb250ZW50Li4uJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb2ludHMueDEgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBvaW50cy54MSA9PT0gbnVsbCB8fCB0eXBlb2YgY29udGVudC5wb2ludHMueDEgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdmFsaWQgeDEgY28tb3JkaW5hdGUgaW4gJyArIGNvbnRlbnQudHlwZSArICcgcG9pbnRzLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb2ludHMueTEgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBvaW50cy55MSA9PT0gbnVsbCB8fCB0eXBlb2YgY29udGVudC5wb2ludHMueTEgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdmFsaWQgeTEgY28tb3JkaW5hdGUgaW4gJyArIGNvbnRlbnQudHlwZSArICcgcG9pbnRzLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb2ludHMueDIgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBvaW50cy54MiA9PT0gbnVsbCB8fCB0eXBlb2YgY29udGVudC5wb2ludHMueDIgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdmFsaWQgeDIgY28tb3JkaW5hdGUgaW4gJyArIGNvbnRlbnQudHlwZSArICcgcG9pbnRzLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb2ludHMueTIgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBvaW50cy55MiA9PT0gbnVsbCB8fCB0eXBlb2YgY29udGVudC5wb2ludHMueTIgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdmFsaWQgeTIgY28tb3JkaW5hdGUgaW4gJyArIGNvbnRlbnQudHlwZSArICcgcG9pbnRzLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvc2l0aW9uID09PSAnJyB8fCBjb250ZW50LnBvc2l0aW9uID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb3NpdGlvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdmFsaWQgcG9zaXRpb24gaW4gJyArIGNvbnRlbnQudHlwZSArICcgY29udGVudC4uLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9zaXRpb24ueCA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9zaXRpb24ueCA9PT0gbnVsbCB8fCB0eXBlb2YgY29udGVudC5wb3NpdGlvbi54ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHggY28tb3JkaW5hdGUgaW4gJyArIGNvbnRlbnQudHlwZSArICcgcG9zaXRpb24uLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvc2l0aW9uLnkgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBvc2l0aW9uLnkgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9zaXRpb24ueSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCB5IGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvc2l0aW9uLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZHJhd1RleHQgPSBmdW5jdGlvbiAocGFnZVRlbXBsYXRlLCBjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgZm9udCA9IHRoaXMuZ2V0Rm9udChjb250ZW50KTtcbiAgICAgICAgICAgIHZhciBicnVzaCA9IHRoaXMuZ2V0QnJ1c2hGcm9tQ29udGVudChjb250ZW50KTtcbiAgICAgICAgICAgIHZhciBwZW4gPSBudWxsO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3R5bGUudGV4dFBlbkNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGVuQ29sb3IgPSB0aGlzLmhleFRvUmdiKGNvbnRlbnQuc3R5bGUudGV4dFBlbkNvbG9yKTtcbiAgICAgICAgICAgICAgICBwZW4gPSBuZXcgZWoyX3BkZl8xLlBkZlBlbihuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKHBlbkNvbG9yLnIsIHBlbkNvbG9yLmcsIHBlbkNvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChicnVzaCA9PSBudWxsICYmIHBlbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcigwLCAwLCAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBjb250ZW50LnZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB2YXIgeCA9IGNvbnRlbnQucG9zaXRpb24ueCAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeSA9IGNvbnRlbnQucG9zaXRpb24ueSAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgZm9ybWF0O1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuc2V0Q29udGVudEZvcm1hdChjb250ZW50LCBmb3JtYXQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCAmJiByZXN1bHQuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgcmVzdWx0LnNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhZ2VUZW1wbGF0ZS5ncmFwaGljcy5kcmF3U3RyaW5nKHZhbHVlLCBmb250LCBwZW4sIGJydXNoLCB4LCB5LCByZXN1bHQuc2l6ZS53aWR0aCwgcmVzdWx0LnNpemUuaGVpZ2h0LCByZXN1bHQuZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhZ2VUZW1wbGF0ZS5ncmFwaGljcy5kcmF3U3RyaW5nKHZhbHVlLCBmb250LCBwZW4sIGJydXNoLCB4LCB5LCBmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdQYWdlTnVtYmVyID0gZnVuY3Rpb24gKGRvY3VtZW50SGVhZGVyLCBjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgZm9udCA9IHRoaXMuZ2V0Rm9udChjb250ZW50KTtcbiAgICAgICAgICAgIHZhciBicnVzaCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS50ZXh0QnJ1c2hDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJydXNoQ29sb3IgPSB0aGlzLmhleFRvUmdiKGNvbnRlbnQuc3R5bGUudGV4dEJydXNoQ29sb3IpO1xuICAgICAgICAgICAgICAgIGJydXNoID0gbmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoYnJ1c2hDb2xvci5yLCBicnVzaENvbG9yLmcsIGJydXNoQ29sb3IuYikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcigwLCAwLCAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGFnZU51bWJlciA9IG5ldyBlajJfcGRmXzUuUGRmUGFnZU51bWJlckZpZWxkKGZvbnQsIGJydXNoKTtcbiAgICAgICAgICAgIHBhZ2VOdW1iZXIubnVtYmVyU3R5bGUgPSB0aGlzLmdldFBhZ2VOdW1iZXJTdHlsZShjb250ZW50LnBhZ2VOdW1iZXJUeXBlKTtcbiAgICAgICAgICAgIHZhciBjb21wb3NpdGVGaWVsZDtcbiAgICAgICAgICAgIHZhciBmb3JtYXQ7XG4gICAgICAgICAgICBpZiAoY29udGVudC5mb3JtYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LmZvcm1hdC5pbmRleE9mKCckdG90YWwnKSAhPT0gLTEgJiYgY29udGVudC5mb3JtYXQuaW5kZXhPZignJGN1cnJlbnQnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhZ2VDb3VudCA9IG5ldyBlajJfcGRmXzYuUGRmUGFnZUNvdW50RmllbGQoZm9udCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LmZvcm1hdC5pbmRleE9mKCckdG90YWwnKSA+IGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyRjdXJyZW50JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IGNvbnRlbnQuZm9ybWF0LnJlcGxhY2UoJyRjdXJyZW50JywgJzAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKCckdG90YWwnLCAnMScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gY29udGVudC5mb3JtYXQucmVwbGFjZSgnJGN1cnJlbnQnLCAnMScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoJyR0b3RhbCcsICcwJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29tcG9zaXRlRmllbGQgPSBuZXcgZWoyX3BkZl81LlBkZkNvbXBvc2l0ZUZpZWxkKGZvbnQsIGJydXNoLCBmb3JtYXQsIHBhZ2VOdW1iZXIsIHBhZ2VDb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyRjdXJyZW50JykgIT09IC0xICYmIGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyR0b3RhbCcpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBjb250ZW50LmZvcm1hdC5yZXBsYWNlKCckY3VycmVudCcsICcwJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkID0gbmV3IGVqMl9wZGZfNS5QZGZDb21wb3NpdGVGaWVsZChmb250LCBicnVzaCwgZm9ybWF0LCBwYWdlTnVtYmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYWdlQ291bnQgPSBuZXcgZWoyX3BkZl82LlBkZlBhZ2VDb3VudEZpZWxkKGZvbnQpO1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBjb250ZW50LmZvcm1hdC5yZXBsYWNlKCckdG90YWwnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZCA9IG5ldyBlajJfcGRmXzUuUGRmQ29tcG9zaXRlRmllbGQoZm9udCwgYnJ1c2gsIGZvcm1hdCwgcGFnZUNvdW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSAnezB9JztcbiAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZCA9IG5ldyBlajJfcGRmXzUuUGRmQ29tcG9zaXRlRmllbGQoZm9udCwgYnJ1c2gsIGZvcm1hdCwgcGFnZU51bWJlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgeCA9IGNvbnRlbnQucG9zaXRpb24ueCAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeSA9IGNvbnRlbnQucG9zaXRpb24ueSAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zZXRDb250ZW50Rm9ybWF0KGNvbnRlbnQsIGNvbXBvc2l0ZUZpZWxkLnN0cmluZ0Zvcm1hdCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ICE9PSBudWxsICYmIHJlc3VsdC5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiByZXN1bHQuc2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlRmllbGQuc3RyaW5nRm9ybWF0ID0gcmVzdWx0LmZvcm1hdDtcbiAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZC5ib3VuZHMgPSBuZXcgZWoyX3BkZl80LlJlY3RhbmdsZUYoeCwgeSwgcmVzdWx0LnNpemUud2lkdGgsIHJlc3VsdC5zaXplLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wb3NpdGVGaWVsZC5kcmF3KGRvY3VtZW50SGVhZGVyLmdyYXBoaWNzLCB4LCB5KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5kcmF3SW1hZ2UgPSBmdW5jdGlvbiAoZG9jdW1lbnRIZWFkZXIsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciB4ID0gY29udGVudC5wb3NpdGlvbi54ICogMC43NTtcbiAgICAgICAgICAgIHZhciB5ID0gY29udGVudC5wb3NpdGlvbi55ICogMC43NTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IChjb250ZW50LnNpemUgIT09IHVuZGVmaW5lZCkgPyAoY29udGVudC5zaXplLndpZHRoICogMC43NSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gKGNvbnRlbnQuc2l6ZSAhPT0gdW5kZWZpbmVkKSA/IChjb250ZW50LnNpemUuaGVpZ2h0ICogMC43NSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgZWoyX3BkZl8yLlBkZkJpdG1hcChjb250ZW50LnNyYyk7XG4gICAgICAgICAgICBpZiAod2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50SGVhZGVyLmdyYXBoaWNzLmRyYXdJbWFnZShpbWFnZSwgeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudEhlYWRlci5ncmFwaGljcy5kcmF3SW1hZ2UoaW1hZ2UsIHgsIHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdMaW5lID0gZnVuY3Rpb24gKGRvY3VtZW50SGVhZGVyLCBjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgeDEgPSBjb250ZW50LnBvaW50cy54MSAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeTEgPSBjb250ZW50LnBvaW50cy55MSAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeDIgPSBjb250ZW50LnBvaW50cy54MiAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeTIgPSBjb250ZW50LnBvaW50cy55MiAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgcGVuID0gdGhpcy5nZXRQZW5Gcm9tQ29udGVudChjb250ZW50KTtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnBlblNpemUgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLnBlblNpemUgIT09IG51bGwgJiYgdHlwZW9mIGNvbnRlbnQuc3R5bGUucGVuU2l6ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuLndpZHRoID0gY29udGVudC5zdHlsZS5wZW5TaXplICogMC43NTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGVuLmRhc2hTdHlsZSA9IHRoaXMuZ2V0RGFzaFN0eWxlKGNvbnRlbnQuc3R5bGUuZGFzaFN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvY3VtZW50SGVhZGVyLmdyYXBoaWNzLmRyYXdMaW5lKHBlbiwgeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NBZ2dyZWdhdGVzID0gZnVuY3Rpb24gKHNSb3dzLCBwZGZHcmlkLCBib3JkZXIsIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIGlzQ2FwdGlvbiwgY2FwdGlvblJvdywgZ3JvdXBJbmRleCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzUm93c18xID0gc1Jvd3M7IF9pIDwgc1Jvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gc1Jvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHZhciBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXggPSAtMTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHZhciBpc0VtcHR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBkZkdyaWQuY29sdW1ucy5jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93LmNlbGxzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhpZGVDb2x1bW5JbmNsdWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2VsbC52aXNpYmxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FwdGlvblJvdyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKGNhcHRpb25Sb3cuY2VsbHMuZ2V0Q2VsbChpKS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsID0gcm93LmNlbGxzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjZWxsLnZpc2libGUgIT09IHVuZGVmaW5lZCAmJiAhY2VsbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCA9IHJvdy5jZWxsc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuaXNEYXRhQ2VsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlRm4gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLmNvbHVtbi5mb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkIHx8IGNlbGwuY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQgfHwgY2VsbC5jb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZ2V0VGVtcGxhdGVGdW5jdGlvbih0ZW1wbGF0ZUZuLCBpLCBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXgsIGNlbGwuY29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuID0gcmVzdWx0LnRlbXBsYXRlRnVuY3Rpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID0gcmVzdWx0LmxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHh0ID0gKHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBjZWxsLmNlbGxUeXBlKV0ocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCh0eHRbMF0ud2hvbGVUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5nZXRTdW1tYXJ5V2l0aG91dFRlbXBsYXRlKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFbXB0eSAmJiB2YWx1ZVtpXSAhPT0gJycgJiYgdmFsdWVbaV0gIT09IHVuZGVmaW5lZCAmJiB2YWx1ZVtpXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ2FwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyaWRSb3cgPSBwZGZHcmlkLnJvd3MuYWRkUm93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkUm93LnN0eWxlLnNldEJvcmRlcihib3JkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRGb250KGZvbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRUZXh0QnJ1c2goYnJ1c2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRCYWNrZ3JvdW5kQnJ1c2goYmFja2dyb3VuZEJydXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGRmR3JpZC5jb2x1bW5zLmNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkUm93LmNlbGxzLmdldENlbGwoaSkudmFsdWUgPSB2YWx1ZVtpXS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZGZHcmlkLmNvbHVtbnMuY291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHRpb25Sb3cuY2VsbHMuZ2V0Q2VsbChpKS52YWx1ZSA9IHZhbHVlW2ldLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IChncm91cEluZGV4ICsgMSkgJiYgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkuY29sdW1uU3BhbiA9IGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCAtIChncm91cEluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgPT09IChncm91cEluZGV4ICsgMSkgJiYgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkuY29sdW1uU3BhbiA9IHBkZkdyaWQuY29sdW1ucy5jb3VudCAtIChncm91cEluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFRlbXBsYXRlRnVuY3Rpb24gPSBmdW5jdGlvbiAodGVtcGxhdGVGbiwgaW5kZXgsIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCwgY29sdW1uKSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLlN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjb2x1bW4uZm9vdGVyVGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAobGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKGNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHRlbXBsYXRlRnVuY3Rpb246IHRlbXBsYXRlRm4sIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleDogbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4IH07XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0U3VtbWFyeVdpdGhvdXRUZW1wbGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5zdW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLnN1bTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuYXZlcmFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuYXZlcmFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEubWF4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5tYXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLm1pbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubWluO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5jb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuY291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLnRydWVjb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEudHJ1ZWNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5mYWxzZWNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5mYWxzZWNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5jdXN0b20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmN1c3RvbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5zZXRDb2x1bW5Qcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGdyaWRDb2x1bW5zLCBwZGZHcmlkKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IHRoaXMuaXNHcm91cGluZyA/IChwZGZHcmlkLmNvbHVtbnMuY291bnQgLSBncmlkQ29sdW1ucy5sZW5ndGgpIDogMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JpZENvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ3JpZENvbHVtbnNbaV0udGV4dEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5jb2x1bW5zLmdldENvbHVtbihpICsgc3RhcnRJbmRleCkuZm9ybWF0ID0gdGhpcy5nZXRIb3Jpem9udGFsQWxpZ25tZW50KGdyaWRDb2x1bW5zW2ldLnRleHRBbGlnbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZHcmlkLnN0eWxlLmFsbG93SG9yaXpvbnRhbE92ZXJmbG93ICYmIGdyaWRDb2x1bW5zW2ldLndpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5jb2x1bW5zLmdldENvbHVtbihpICsgc3RhcnRJbmRleCkud2lkdGggPSAoZ3JpZENvbHVtbnNbaV0ud2lkdGggKiAwLjc1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuc2V0UmVjb3JkVGhlbWVTdHlsZSA9IGZ1bmN0aW9uIChyb3csIGJvcmRlcikge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmdyaWRUaGVtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb3RzdHJhcCc6XG4gICAgICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRUZXh0QnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoNTEsIDUxLCA1MSkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmFicmljJzpcbiAgICAgICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldFRleHRCcnVzaChuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcig1MSwgNTEsIDUxKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0VGV4dEJydXNoKG5ldyBlajJfcGRmXzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKDAsIDAsIDApKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3cuc3R5bGUuc2V0Qm9yZGVyKGJvcmRlcik7XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NSZWNvcmQgPSBmdW5jdGlvbiAoYm9yZGVyLCBjb2x1bW5zLCBnT2JqLCBkYXRhU291cmNlLCBwZGZHcmlkLCBncm91cEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IHRoaXMuaXNHcm91cGluZyA/IGdyb3VwSW5kZXggOiAwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGRhdGFTb3VyY2U7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBncmlkUm93ID0gdGhpcy5zZXRSZWNvcmRUaGVtZVN0eWxlKHBkZkdyaWQucm93cy5hZGRSb3coKSwgYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvbHVtbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gaXRlbXNbY29sdW1uc1tqXS5maWVsZF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW5zW2pdLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnBkZlF1ZXJ5Q2VsbEluZm8sIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGdyaWRSb3cuY2VsbHMuZ2V0Q2VsbChqICsgc3RhcnRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyLmZvcm1hdENlbGxWYWx1ZShhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQ2VsbFN0eWxlKGNlbGwsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NDZWxsU3R5bGUgPSBmdW5jdGlvbiAoY2VsbCwgYXJncykge1xuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUuYmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYmFja0NvbG9yID0gdGhpcy5oZXhUb1JnYihhcmdzLnN0eWxlLmJhY2tncm91bmRDb2xvcik7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQnJ1c2ggPSBuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcihiYWNrQ29sb3IuciwgYmFja0NvbG9yLmcsIGJhY2tDb2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS50ZXh0QWxpZ25tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLnN0cmluZ0Zvcm1hdCA9IHRoaXMuZ2V0SG9yaXpvbnRhbEFsaWdubWVudChhcmdzLnN0eWxlLnRleHRBbGlnbm1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUudmVydGljYWxBbGlnbm1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuc3RyaW5nRm9ybWF0ID0gdGhpcy5nZXRWZXJ0aWNhbEFsaWdubWVudChhcmdzLnN0eWxlLnZlcnRpY2FsQWxpZ25tZW50LCBjZWxsLnN0eWxlLnN0cmluZ0Zvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS50ZXh0QnJ1c2hDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleHRCcnVzaENvbG9yID0gdGhpcy5oZXhUb1JnYihhcmdzLnN0eWxlLnRleHRCcnVzaENvbG9yKTtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLnRleHRCcnVzaCA9IG5ldyBlajJfcGRmXzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl8zLlBkZkNvbG9yKHRleHRCcnVzaENvbG9yLnIsIHRleHRCcnVzaENvbG9yLmcsIHRleHRCcnVzaENvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLnRleHRQZW5Db2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS50ZXh0UGVuID0gbmV3IGVqMl9wZGZfMS5QZGZQZW4obmV3IGVqMl9wZGZfMy5QZGZDb2xvcihhcmdzLnN0eWxlLnRleHRQZW5Db2xvci5yLCBhcmdzLnN0eWxlLnRleHRQZW5Db2xvci5nLCBhcmdzLnN0eWxlLnRleHRQZW5Db2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS5mb250RmFtaWx5ICE9PSB1bmRlZmluZWQgfHwgYXJncy5zdHlsZS5mb250U2l6ZSAhPT0gdW5kZWZpbmVkIHx8IGFyZ3Muc3R5bGUuYm9sZCAhPT0gdW5kZWZpbmVkIHx8IGFyZ3Muc3R5bGUuaXRhbGljICE9PSB1bmRlZmluZWQgfHwgYXJncy5zdHlsZS51bmRlcmxpbmUgIT09IHVuZGVmaW5lZCB8fCBhcmdzLnN0eWxlLnN0cmlrZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5mb250ID0gdGhpcy5nZXRGb250KGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUuYm9yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYm9yZGVyID0gbmV3IGVqMl9wZGZfMS5QZGZCb3JkZXJzKCk7XG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlcldpZHRoID0gYXJncy5zdHlsZS5ib3JkZXIud2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gKGJvcmRlcldpZHRoICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGJvcmRlcldpZHRoID09PSAnbnVtYmVyJykgPyAoYm9yZGVyV2lkdGggKiAwLjc1KSA6ICh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoMTk2LCAxOTYsIDE5Nik7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUuYm9yZGVyLmNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvcmRlckNvbG9yID0gdGhpcy5oZXhUb1JnYihhcmdzLnN0eWxlLmJvcmRlci5jb2xvcik7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yID0gbmV3IGVqMl9wZGZfMy5QZGZDb2xvcihib3JkZXJDb2xvci5yLCBib3JkZXJDb2xvci5nLCBib3JkZXJDb2xvci5iKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBlbiA9IG5ldyBlajJfcGRmXzEuUGRmUGVuKGNvbG9yLCB3aWR0aCk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUuYm9yZGVyLmRhc2hTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlbi5kYXNoU3R5bGUgPSB0aGlzLmdldERhc2hTdHlsZShhcmdzLnN0eWxlLmJvcmRlci5kYXNoU3R5bGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBib3JkZXIuYWxsID0gcGVuO1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuYm9yZGVycyA9IGJvcmRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRIb3Jpem9udGFsQWxpZ25tZW50ID0gZnVuY3Rpb24gKHRleHRBbGlnbiwgZm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSBuZXcgZWoyX3BkZl8zLlBkZlN0cmluZ0Zvcm1hdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoICh0ZXh0QWxpZ24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmXzMuUGRmVGV4dEFsaWdubWVudC5SaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfMy5QZGZUZXh0QWxpZ25tZW50LkNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnanVzdGlmeSc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmXzMuUGRmVGV4dEFsaWdubWVudC5KdXN0aWZ5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfMy5QZGZUZXh0QWxpZ25tZW50LkxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRWZXJ0aWNhbEFsaWdubWVudCA9IGZ1bmN0aW9uICh2ZXJ0aWNhbEFsaWduLCBmb3JtYXQsIHRleHRBbGlnbikge1xuICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gbmV3IGVqMl9wZGZfMy5QZGZTdHJpbmdGb3JtYXQoKTtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSB0aGlzLmdldEhvcml6b250YWxBbGlnbm1lbnQodGV4dEFsaWduLCBmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoICh2ZXJ0aWNhbEFsaWduKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmxpbmVBbGlnbm1lbnQgPSBlajJfcGRmXzQuUGRmVmVydGljYWxBbGlnbm1lbnQuQm90dG9tO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtaWRkbGUnOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQubGluZUFsaWdubWVudCA9IGVqMl9wZGZfNC5QZGZWZXJ0aWNhbEFsaWdubWVudC5NaWRkbGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5saW5lQWxpZ25tZW50ID0gZWoyX3BkZl80LlBkZlZlcnRpY2FsQWxpZ25tZW50LlRvcDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0O1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldEZvbnRGYW1pbHkgPSBmdW5jdGlvbiAoZm9udEZhbWlseSkge1xuICAgICAgICAgICAgc3dpdGNoIChmb250RmFtaWx5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnVGltZXNSb21hbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0NvdXJpZXInOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICBjYXNlICdTeW1ib2wnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMztcbiAgICAgICAgICAgICAgICBjYXNlICdaYXBmRGluZ2JhdHMnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRGb250ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBmb250U2l6ZSA9IChjb250ZW50LnN0eWxlLmZvbnRTaXplICE9PSB1bmRlZmluZWQpID8gKGNvbnRlbnQuc3R5bGUuZm9udFNpemUgKiAwLjc1KSA6IDkuNzU7XG4gICAgICAgICAgICB2YXIgZm9udEZhbWlseSA9IChjb250ZW50LnN0eWxlLmZvbnRGYW1pbHkgIT09IHVuZGVmaW5lZCkgPyAodGhpcy5nZXRGb250RmFtaWx5KGNvbnRlbnQuc3R5bGUuZm9udEZhbWlseSkpIDogZWoyX3BkZl8yLlBkZkZvbnRGYW1pbHkuSGVsdmV0aWNhO1xuICAgICAgICAgICAgdmFyIGZvbnRTdHlsZSA9IGVqMl9wZGZfMi5QZGZGb250U3R5bGUuUmVndWxhcjtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLmJvbGQgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLmJvbGQpIHtcbiAgICAgICAgICAgICAgICBmb250U3R5bGUgfD0gZWoyX3BkZl8yLlBkZkZvbnRTdHlsZS5Cb2xkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3R5bGUuaXRhbGljICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZS5pdGFsaWMpIHtcbiAgICAgICAgICAgICAgICBmb250U3R5bGUgfD0gZWoyX3BkZl8yLlBkZkZvbnRTdHlsZS5JdGFsaWM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS51bmRlcmxpbmUgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLnVuZGVybGluZSkge1xuICAgICAgICAgICAgICAgIGZvbnRTdHlsZSB8PSBlajJfcGRmXzIuUGRmRm9udFN0eWxlLlVuZGVybGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnN0cmlrZW91dCAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUuc3RyaWtlb3V0KSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfMi5QZGZGb250U3R5bGUuU3RyaWtlb3V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzIuUGRmU3RhbmRhcmRGb250KGZvbnRGYW1pbHksIGZvbnRTaXplLCBmb250U3R5bGUpO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFBhZ2VOdW1iZXJTdHlsZSA9IGZ1bmN0aW9uIChwYWdlTnVtYmVyVHlwZSkge1xuICAgICAgICAgICAgc3dpdGNoIChwYWdlTnVtYmVyVHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0xvd2VyTGF0aW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgICAgICBjYXNlICdMb3dlclJvbWFuJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgICAgICAgICAgY2FzZSAnVXBwZXJMYXRpbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA0O1xuICAgICAgICAgICAgICAgIGNhc2UgJ1VwcGVyUm9tYW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5zZXRDb250ZW50Rm9ybWF0ID0gZnVuY3Rpb24gKGNvbnRlbnQsIGZvcm1hdCkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQuc2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gY29udGVudC5zaXplLndpZHRoICogMC43NTtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gY29udGVudC5zaXplLmhlaWdodCAqIDAuNzU7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gbmV3IGVqMl9wZGZfMy5QZGZTdHJpbmdGb3JtYXQoZWoyX3BkZl8zLlBkZlRleHRBbGlnbm1lbnQuTGVmdCwgZWoyX3BkZl80LlBkZlZlcnRpY2FsQWxpZ25tZW50Lk1pZGRsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3R5bGUuaEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb250ZW50LnN0eWxlLmhBbGlnbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmXzMuUGRmVGV4dEFsaWdubWVudC5SaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfMy5QZGZUZXh0QWxpZ25tZW50LkNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2p1c3RpZnknOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmXzMuUGRmVGV4dEFsaWdubWVudC5KdXN0aWZ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl8zLlBkZlRleHRBbGlnbm1lbnQuTGVmdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS52QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSB0aGlzLmdldFZlcnRpY2FsQWxpZ25tZW50KGNvbnRlbnQuc3R5bGUudkFsaWduLCBmb3JtYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBmb3JtYXQ6IGZvcm1hdCwgc2l6ZTogbmV3IGVqMl9wZGZfNi5TaXplRih3aWR0aCwgaGVpZ2h0KSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0UGFnZVNpemUgPSBmdW5jdGlvbiAocGFnZVNpemUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAocGFnZVNpemUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdMZXR0ZXInOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRig2MTIsIDc5Mik7XG4gICAgICAgICAgICAgICAgY2FzZSAnTm90ZSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDU0MCwgNzIwKTtcbiAgICAgICAgICAgICAgICBjYXNlICdMZWdhbCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDYxMiwgMTAwOCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQTAnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRigyMzgwLCAzMzY4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBMSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDE2ODQsIDIzODApO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0EyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoMTE5MCwgMTY4NCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQTMnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRig4NDIsIDExOTApO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0E1JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoNDIxLCA1OTUpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0E2JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoMjk3LCA0MjEpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0E3JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoMjEwLCAyOTcpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0E4JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoMTQ4LCAyMTApO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0E5JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoMTA1LCAxNDgpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0IwJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoMjgzNiwgNDAwOCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQjEnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRigyMDA0LCAyODM2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdCMic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDE0MTgsIDIwMDQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0IzJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoMTAwMiwgMTQxOCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQjQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRig3MDksIDEwMDIpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0I1JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoNTAxLCA3MDkpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0FyY2hBJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoNjQ4LCA4NjQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0FyY2hCJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoODY0LCAxMjk2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBcmNoQyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDEyOTYsIDE3MjgpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0FyY2hEJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoMTcyOCwgMjU5Mik7XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJjaEUnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRigyNTkyLCAzNDU2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdGbHNhJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoNjEyLCA5MzYpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0hhbGZMZXR0ZXInOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRigzOTYsIDYxMik7XG4gICAgICAgICAgICAgICAgY2FzZSAnTGV0dGVyMTF4MTcnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfNi5TaXplRig3OTIsIDEyMjQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0xlZGdlcic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl82LlNpemVGKDEyMjQsIDc5Mik7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmXzYuU2l6ZUYoNTk1LCA4NDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldERhc2hTdHlsZSA9IGZ1bmN0aW9uIChkYXNoU3R5bGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZGFzaFN0eWxlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnRGFzaCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0RvdCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0Rhc2hEb3QnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMztcbiAgICAgICAgICAgICAgICBjYXNlICdEYXNoRG90RG90JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0UGVuRnJvbUNvbnRlbnQgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIHBlbiA9IG5ldyBlajJfcGRmXzEuUGRmUGVuKG5ldyBlajJfcGRmXzMuUGRmQ29sb3IoMCwgMCwgMCkpO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3R5bGUgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlICE9PSBudWxsICYmIGNvbnRlbnQuc3R5bGUucGVuQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciBwZW5Db2xvciA9IHRoaXMuaGV4VG9SZ2IoY29udGVudC5zdHlsZS5wZW5Db2xvcik7XG4gICAgICAgICAgICAgICAgcGVuID0gbmV3IGVqMl9wZGZfMS5QZGZQZW4obmV3IGVqMl9wZGZfMy5QZGZDb2xvcihwZW5Db2xvci5yLCBwZW5Db2xvci5nLCBwZW5Db2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGVuO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldEJydXNoRnJvbUNvbnRlbnQgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIGJydXNoID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnRleHRCcnVzaENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IoY29udGVudC5zdHlsZS50ZXh0QnJ1c2hDb2xvcik7XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBuZXcgZWoyX3BkZl8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfMy5QZGZDb2xvcihicnVzaENvbG9yLnIsIGJydXNoQ29sb3IuZywgYnJ1c2hDb2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYnJ1c2g7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuaGV4VG9SZ2IgPSBmdW5jdGlvbiAoaGV4KSB7XG4gICAgICAgICAgICBpZiAoaGV4ID09PSBudWxsIHx8IGhleCA9PT0gJycgfHwgaGV4Lmxlbmd0aCAhPT0gNykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIHNldCB2YWxpZCBoZXggdmFsdWUgZm9yIGNvbG9yLi4uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZXggPSBoZXguc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgdmFyIGJpZ2ludCA9IHBhcnNlSW50KGhleCwgMTYpO1xuICAgICAgICAgICAgdmFyIHIgPSAoYmlnaW50ID4+IDE2KSAmIDI1NTtcbiAgICAgICAgICAgIHZhciBnID0gKGJpZ2ludCA+PiA4KSAmIDI1NTtcbiAgICAgICAgICAgIHZhciBiID0gYmlnaW50ICYgMjU1O1xuICAgICAgICAgICAgcmV0dXJuIHsgcjogciwgZzogZywgYjogYiB9O1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQZGZFeHBvcnQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlBkZkV4cG9ydCA9IFBkZkV4cG9ydDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3BkZi1leHBvcnQuanNcbi8vIG1vZHVsZSBpZCA9IDg3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84OF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLXBkZlwiXG4vLyBtb2R1bGUgaWQgPSA4OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL21vZGVscy9jb2x1bW5cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBjb2x1bW5fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoY29sdW1uXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy5qc1xuLy8gbW9kdWxlIGlkID0gODlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9yZW5kZXJlci9oZWFkZXItcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2NvbnRlbnQtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL3Jvdy1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvaGVhZGVyLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9zdGFja2VkLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL3JlbmRlclwiLCBcIi4vcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9jYXB0aW9uLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2JhdGNoLWVkaXQtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2RpYWxvZy1lZGl0LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9pbmxpbmUtZWRpdC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvZWRpdC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvYm9vbGVhbi1lZGl0LWNlbGxcIiwgXCIuL3JlbmRlcmVyL2RlZmF1bHQtZWRpdC1jZWxsXCIsIFwiLi9yZW5kZXJlci9kcm9wZG93bi1lZGl0LWNlbGxcIiwgXCIuL3JlbmRlcmVyL251bWVyaWMtZWRpdC1jZWxsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVhZGVyX3JlbmRlcmVyXzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgcm93X3JlbmRlcmVyXzEsIGNlbGxfcmVuZGVyZXJfMSwgaGVhZGVyX2NlbGxfcmVuZGVyZXJfMSwgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSwgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEsIHJlbmRlcl8xLCBmaWx0ZXJfY2VsbF9yZW5kZXJlcl8yLCBpbmRlbnRfY2VsbF9yZW5kZXJlcl8xLCBjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMSwgYmF0Y2hfZWRpdF9yZW5kZXJlcl8xLCBkaWFsb2dfZWRpdF9yZW5kZXJlcl8xLCBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLCBlZGl0X3JlbmRlcmVyXzEsIGJvb2xlYW5fZWRpdF9jZWxsXzEsIGRlZmF1bHRfZWRpdF9jZWxsXzEsIGRyb3Bkb3duX2VkaXRfY2VsbF8xLCBudW1lcmljX2VkaXRfY2VsbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChoZWFkZXJfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoY29udGVudF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChyb3dfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChoZWFkZXJfY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChmaWx0ZXJfY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChzdGFja2VkX2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQocmVuZGVyXzEpO1xuICAgIF9fZXhwb3J0KGZpbHRlcl9jZWxsX3JlbmRlcmVyXzIpO1xuICAgIF9fZXhwb3J0KGluZGVudF9jZWxsX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChiYXRjaF9lZGl0X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGRpYWxvZ19lZGl0X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGlubGluZV9lZGl0X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGVkaXRfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoYm9vbGVhbl9lZGl0X2NlbGxfMSk7XG4gICAgX19leHBvcnQoZGVmYXVsdF9lZGl0X2NlbGxfMSk7XG4gICAgX19leHBvcnQoZHJvcGRvd25fZWRpdF9jZWxsXzEpO1xuICAgIF9fZXhwb3J0KG51bWVyaWNfZWRpdF9jZWxsXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnlcIiwgXCIuL3NlcnZpY2VzL3NlcnZpY2UtbG9jYXRvclwiLCBcIi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4vc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY2VsbF9yZW5kZXJfZmFjdG9yeV8xLCBzZXJ2aWNlX2xvY2F0b3JfMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xLCBncm91cF9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoY2VsbF9yZW5kZXJfZmFjdG9yeV8xKTtcbiAgICBfX2V4cG9ydChzZXJ2aWNlX2xvY2F0b3JfMSk7XG4gICAgX19leHBvcnQocm93X21vZGVsX2dlbmVyYXRvcl8xKTtcbiAgICBfX2V4cG9ydChncm91cF9tb2RlbF9nZW5lcmF0b3JfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMuanNcbi8vIG1vZHVsZSBpZCA9IDkxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vcGFnZXJcIiwgXCIuL2V4dGVybmFsLW1lc3NhZ2VcIiwgXCIuL251bWVyaWMtY29udGFpbmVyXCIsIFwiLi9wYWdlci1tZXNzYWdlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcGFnZXJfMSwgZXh0ZXJuYWxfbWVzc2FnZV8xLCBudW1lcmljX2NvbnRhaW5lcl8xLCBwYWdlcl9tZXNzYWdlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KHBhZ2VyXzEpO1xuICAgIF9fZXhwb3J0KGV4dGVybmFsX21lc3NhZ2VfMSk7XG4gICAgX19leHBvcnQobnVtZXJpY19jb250YWluZXJfMSk7XG4gICAgX19leHBvcnQocGFnZXJfbWVzc2FnZV8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDkyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0="]}