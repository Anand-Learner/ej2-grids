/*!
*  filename: ej2-grids.umd.min.js.map
*  version : 1.0.25
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-grids.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_8__","__WEBPACK_EXTERNAL_MODULE_44__","__WEBPACK_EXTERNAL_MODULE_53__","__WEBPACK_EXTERNAL_MODULE_62__","__WEBPACK_EXTERNAL_MODULE_72__","__WEBPACK_EXTERNAL_MODULE_85__","__WEBPACK_EXTERNAL_MODULE_88__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","__export","hasOwnProperty","Object","defineProperty","value","apply","common_1","actions_1","models_1","renderer_1","services_1","grid_1","enum_1","util_1","constant_1","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","prototype","create","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_1","ej2_base_2","ej2_base_3","ej2_base_4","ej2_base_5","ej2_popups_1","events","render_1","cell_render_factory_1","service_locator_1","value_formatter_1","renderer_factory_1","width_controller_1","aria_service_1","page_settings_1","selection_1","search_1","show_hide_1","scroll_1","print_1","aggregate_1","column_chooser_1","SortDescriptor","_super","ChildProperty","Property","SortSettings","Collection","Predicate","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","Grid","options","element","_this","isInitial","sortedColumns","inViewIndexes","mediaCol","isMediaQuery","isInitialLoad","filterOperators","contains","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Print","Pdfexport","Excelexport","Wordexport","Csvexport","Search","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDown","shiftUp","shiftRight","shiftLeft","home","end","escape","ctrlHome","ctrlEnd","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusA","ctrlPlusP","insert","delete","f2","enter","tab","shiftTab","getPersistData","keyEntity","ignoreOnPersist","pageSettings","filterSettings","groupSettings","searchSettings","sortSettings","columns","selectedRowIndex","ignoreOnColumn","forEach","currentObject","_i","_a","ignoreInArrays","addOnPersist","column","ignoreInColumn","val","requiredModules","allowFiltering","push","member","args","serviceLocator","allowExcelExport","allowPdfExport","allowSorting","allowPaging","allowSelection","selectionSettings","allowReordering","allowRowDragAndDrop","allowGrouping","aggregates","isDetail","toolbar","toolbarTemplate","enableVirtualization","enableColumnVirtualization","editSettings","allowAdding","allowDeleting","allowEditing","preRender","ServiceLocator","initializeServices","render","ariaService","setOptions","role","createSpinner","renderModule","Render","getMediaColumns","searchModule","scrollModule","Scroll","showColumnChooser","columnChooserModule","ColumnChooser","notify","initialLoad","trigger","load","prepareColumns","getColumns","processModel","gridRender","wireEvents","addListener","updateDefaultCursor","showSpinner","initialEnd","hideSpinner","gcol","getShowHideService","getService","isNullOrUndefined","index","hideAtMedia","media","window","matchMedia","mediaQueryUpdate","bind","columnIndex","e","col","visible","matches","showHider","show","headerText","hide","refreshMediaCol","refresh","eventInitializer","destroy","unwireEvents","removeListener","destroyDependentModules","innerHTML","classList","keyboardModule","getModuleName","onPropertyChanged","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","requestType","isDestroyed","keys","prop","uiUpdate","enable","inBoundModelChanged","properties","currentPage","totalRecordsCount","localeObj","setLocale","locale","valueFormatterService","setCulture","width","height","rowTemplateFn","templateCompiler","rowTemplate","detailTemplateFn","detailTemplate","headerModule","refreshUI","showDropArea","updateColumnObject","extendedPropertyChange","modelChanged","updateRTL","querySelector","ej2_instances","enableRtl","dataBind","removePadding","setPadding","toolbarModule","getToolbar","updateGridLines","allowTextWrap","applyTextWrap","removeTextWrap","dataSourceModified","enableHover","addClass","removeClass","headerRows","slice","querySelectorAll","headerRows_1","row","remove","add","updateColumnModel","len","columnModel","inview","map","v","filter","vLen","getColumnIndexesInView","setColumnIndexesInView","indexes","getVisibleColumns","cols","getHeaderContent","getPanel","setGridHeaderContent","setPanel","getContentTable","contentModule","getTable","setGridContentTable","setTable","getContent","setGridContent","getHeaderTable","setGridHeaderTable","getFooterContent","footerElement","getElementsByClassName","getFooterContentTable","firstChild","getPager","gridPager","setGridPager","getRowByIndex","getRows","getRowElements","getDataRows","rows","children","dataRows","getCellFromIndex","rowIndex","getColumnHeaderByIndex","getRowObjectFromUID","uid","getColumnHeaderByField","field","getColumnHeaderByUid","getColumnByField","parentElement","iterateArrayOrObject","item","getColumnIndexByField","getColumnByUid","getColumnIndexByUid","getUidByColumnField","getNormalizedColumnIndex","getColumnFieldNames","columnNames","getRowTemplate","getDetailTemplate","getPrimaryKeyFieldNames","cLen","isPrimaryKey","refreshHeader","getSelectedRows","selectionModule","selectedRecords","getSelectedRowIndexes","selectedRowIndexes","getSelectedRowCellIndexes","selectedRowCellIndexes","getSelectedRecords","isSelected","data","getDataModule","showColumns","showBy","hideColumns","hideBy","goToPage","pageNo","pagerModule","updateExternalMessage","message","sortColumn","columnName","direction","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","fieldName","filterOperator","filterValue","predicate","matchCase","actualFilterValue","actualOperator","filterModule","clearFiltering","removeFilteredColsByField","isClearFilterBar","selectRow","isToggle","selectRows","rowIndexes","clearSelection","selectCell","cellIndex","search","searchString","print","printModule","deleteRecord","fieldname","editModule","startEdit","endEdit","closeEdit","addRecord","deleteRow","tr","recalcIndentWidth","getAttribute","indentWidth","offsetWidth","headerCol","childNodes","contentCol","perPixel","style","columnWidthChanged","setAttribute","reorderColumns","fromFName","toFName","reorderModule","autoFitColumns","fieldNames","resizeModule","createColumnchooser","x","y","renderColumnChooser","register","widthService","ColumnWidthService","CellRendererFactory","RendererFactory","L10n","ValueFormatter","ShowHide","AriaService","flag","j","gCols","sCols","this_1","sLen","showGroupedColumn","parentDetails","parentKeyFieldValue","query","where","queryString","Browser","isDevice","rendererFactory","getRenderer","RenderType","Header","Content","createGridPopUpElement","setWidthToColumns","dataReady","setWidth","setHeight","popup","createElement","className","styles","content","attrs","tabIndex","append","appendChild","gridLines","textWrapSettings","wrapMode","wrap","refreshTooltip","headerTable","htable","createTable","ctable","all","allele","table","ele","getBoundingClientRect","Tooltip","document","body","removeChild","tag","type","myTableDiv","cssText","mySubDiv","myTable","myTr","mytd","EventHandler","mouseClickHandler","focusOutHandler","dblClickHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","on","contentReady","updateData","event","headerRefreshed","addEventListener","dataBound","off","removeEventListener","getCurrentViewRecords","currentViewData","records","isChildGrid","parentsUntil","touches","checkEdit","preventDefault","click","mode","isEdit","dblclick","display","filterClear","gridElement","childGrid","action","keyPressed","setInjectedModules","injectedModules","autoCol","refreshColumns","excelExport","exportProperties","isMultipleExport","workbook","excelExportModule","Map","csvExport","pdfExport","pdfDoc","pdfExportModule","Component","Complex","PageSettings","AggregateRow","Event","NotifyPropertyChanges","Inject","Selection","services","name","ej2_data_1","column_1","doesImplementInterface","checkFor","valueAccessor","getValue","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","collection","result","pred","template","compile","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","extend","setStyleAttribute","attributes","copied","first","second","exclude","moved","indexOf","autoWidth","Column","setCssInGridPopUp","popUp","isBottomTail","popUpSpan","position","targetPosition","clientY","changedTouches","offsetHeight","top","left","getPopupLeftPosition","getPosition","right","getActualProperties","obj","elem","selector","isID","parent","getElementIndex","elements","isEqualNode","inArray","getActualPropFromColl","coll","removeElement","clientX","getUid","prefix","appendChildren","parents","calculateAggregate","context","customAggregate","DataUtil","getScrollBarWidth","scrollWidth","divNode","clientWidth","getRowHeight","rowHeight","rect","Math","ceil","isEditable","isOldRow","isIdentity","isActionPrevent","inst","dlg","changeButtonType","elements_1","button","allowResizing","showInColumnChooser","merge","valueFormatter","format","skeleton","setFormatter","getFormatFunction","setParser","getParserFunction","templateFn","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getDomSetter","disableHtmlEncode","cultureName","intl","Internationalization","culture","getDateFormat","getNumberFormat","getDateParser","getNumberParser","fromView","toView","created","destroyed","rowDataBound","queryCellInfo","actionBegin","actionComplete","actionFailure","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDragStart","columnDrag","columnDrop","rowDragStart","rowDrag","rowDrop","beforePrint","printComplete","detailDataBound","toolbarClick","batchAdd","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beginEdit","cellEdit","cellSave","endAdd","endDelete","recordDoubleClick","recordClick","beforeDataBound","beforeOpenColumnChooser","resizeStart","onResize","resizeStop","colGroupRefresh","pageBegin","pageComplete","sortBegin","sortComplete","filterBegin","filterComplete","searchBegin","searchComplete","reorderBegin","reorderComplete","rowDragAndDropBegin","rowDragAndDropComplete","groupBegin","groupComplete","ungroupBegin","ungroupComplete","rowSelectionBegin","rowSelectionComplete","columnSelectionBegin","columnSelectionComplete","cellSelectionBegin","cellSelectionComplete","columnVisibilityChanged","scroll","columnPositionChanged","rowDragAndDrop","rowsAdded","rowsRemoved","columnDragStop","headerDrop","refreshComplete","refreshVirtualBlock","toolbarRefresh","bulkSave","tooltipDestroy","editBegin","editComplete","addBegin","addComplete","saveComplete","deleteBegin","deleteComplete","preventBatch","dialogDestroy","crudAction","addDeleteAction","destroyForm","doubleTap","beforeExcelExport","excelExportComplete","excelQueryCellInfo","beforePdfExport","pdfExportComplete","pdfQueryCellInfo","data_1","content_renderer_1","header_renderer_1","cell_renderer_1","header_cell_renderer_1","stacked_cell_renderer_1","indent_cell_renderer_1","caption_cell_renderer_1","expand_cell_renderer_1","header_indent_renderer_1","detail_header_indent_renderer_1","detail_expand_cell_renderer_1","locator","Data","l10n","renderer","gObj","headerRenderer","contentRenderer","renderPanel","renderTable","emptyRow","refreshDataManager","cancel","ready","dataManager","setBusy","getData","generateQuery","requiresCount","disablePageWiseAggregates","then","validateGroupRecords","dataManagerSuccess","catch","dataManagerFailure","sendBulkRequest","promise","saveChanges","changes","dataSource","offline","dmSuccess","dmFailure","renderEmptyRow","isTrigger","tbody","getConstant","colspan","toString","renderEmpty","updateColumnType","record","items","fmtr","isColTypeDef","getDay","getHours","getMinutes","getSeconds","getMilliseconds","count","pageSize","updatesOnInitialRender","refreshContentRows","alert","setRowElements","toLowerCase","busy","invalid","error","buildColumns","instantiateRenderer","addRenderer","HeaderRender","ContentRender","cellrender","addCellRenderer","CellType","HeaderCellRenderer","CellRenderer","StackedHeader","StackedHeaderCellRenderer","Indent","IndentCellRenderer","GroupCaption","GroupCaptionCellRenderer","GroupCaptionEmpty","GroupCaptionEmptyCellRenderer","Expand","ExpandCellRenderer","HeaderIndent","HeaderIndentCellRenderer","DetailHeader","DetailHeaderIndentCellRenderer","DetailExpand","DetailExpandCellRenderer","Promise","resolve","group0","groupN","addWhere","input","group","and","getPredicate","or","Query","curDm","DataManager","curFilter","executeLocal","newQuery","rPredicate","isRemote","deferred","Deferred","updateGroupInfo","operator","Date","getDatePredicate","current","untouched","dm","array","uGroup","itemGroup","uGroupItem","GroupGuid","level","row_renderer_1","cell_1","row_1","helper","visualElement","sender","headercelldiv","textContent","lineHeight","dragStart","drag","closest","cloneElement","dragStop","drop","droppedElement","setVisible","div","innerDiv","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","headerPanel","panel","getColGroup","colgroup","setColGroup","colGroup","tHead","bodyCell","cellspacing","findHeaderRow","createHeaderContent","thead","rowBody","len_1","cells","updateColGroup","colcount","colHeader","rowRenderer","RowRenderer","headerRow","colDepth","getObjDepth","generateRow","ensureColumns","getHeaderCells","len_2","generateCell","appendCells","isFirstObj","isFirstCol","isLastCol","lastCol","colSpan","getCellCnt","Cell","cellType","Row","rowSpan","colIndex","opt","isDataCell","isTemplate","headerTemplate","rowID","idx","displayVal","clen","insertBefore","appendContent","max","depth","checkDepth","cnt","Draggable","dragTarget","distance","abort","Droppable","accept","refreshRow","isChanged","cells_1","cell","cloneNode","rowArgs","cellArgs","attrCopy","isDataRow","buildAttributeFromRow","cellRendererFact","cellRenderer","getCellRenderer","td","cssClass","attr","rowindex","dataUID","ariaSelected","classes","isAltRow","class","initDataManager","addRows","removeRows","crudActions","skipPage","clone","columns_1","sType","sSettings","fields","ignoreCase","aggregate","sortGrp","sortBy","page","getKey","foreignKeyData","executeQuery","update","url","filterObject","prevDate","nextDate","prevObj","nextObj","setDate","getDate","predicateSt","predicateEnd","json","splice","toIndex","row_model_generator_1","group_model_generator_1","rafCallback","generator","getModelGenerator","contentDiv","createContentTable","multiselectable","initializeContentDrop","frag","createDocumentFragment","rowElements","modelData","generateRows","isTR","nodeName","contentPanel","contentTable","testRow","some","canSkip","GroupModelGenerator","RowModelGenerator","setSelection","set","clearAll","startIndex","indent","enableAltRow","concat","generateCells","dummies","tmp","dummy","rowId","oIndex","refreshRows","summary_model_generator_1","summaryModelGen","GroupSummaryModelGenerator","captionModelGen","CaptionSummaryModelGenerator","getGroupedRecords","raw","generateDataRows","generateCaptionRow","getCaptionRowCells","visibles","groupedLen","generateIndentCell","isEmpty","captionCells","wFlag","tmpFlag","unshift","cRow","SummaryModelGenerator","footerTemplate","groupFooterTemplate","groupCaptionTemplate","columnSelector","buildSummaryData","getGeneratedRow","summaryRow","indents","getIndentByLevel","indentLength","getGeneratedCell","getCellType","sColumn","scolumn","textAlign","summaryRows","single","setTemplate","types","disp","Summary","indx","GroupSummary","initVal","reduce","prev","cur","CaptionSummary","tabindex","localizer","formatter","getGui","evaluate","innerText","invokeFormatter","refreshCell","refreshTD","innerHtml","isNull","displayAsCheckBox","localeStr","fromFormatter","appendHtml","setAttributes","property","buildAttributeFromCell","clipMode","colindex","hTxtEle","sortEle","gui","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","sort","grabbed","handler","headerTextAlign","alignment","setStateAndProperties","attribute","removeAttribute","config","setExpand","expand","setSort","isBusy","setGrabbed","isGrabbed","setDropTarget","isTarget","dropeffect","selected","haspopup","toolTip","aria-expanded","cellRenderMap","getEnumValue","rendererMap","rName","setColumnWidth","cWidth","getWidth","setWidthToTable","header","fWidth","formatUnit","edit","getSiblingsHeight","getHeightFromDirection","sibling","parseInt","minWidth","maxWidth","getTableWidth","tWidth","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","initializeSelection","mouseDownHandler","onActionBegin","onActionComplete","hidePopUp","isEditing","selectedRow","selectData","isRowType","isRowSelected","hasAttribute","prevRowIndex","isCtrlPressed","isShiftPressed","previousRow","previousRowIndex","clearRow","updateRowSelection","updateRowProps","selectRowsByRange","endIndex","getCollectionFromIndexes","selectedData","isSingleSel","prevRow","rowIndexes_1","addRowsToSelection","rowIndexes_2","isUnSelected","rowDeselect","addRemoveClassesForRow","reverse","clearRowSelection","span","clearCellSelection","isCellType","selectedCell","currentIndex","isCellSelected","isUndefined","prevCIdxs","currentCell","previousRowCellIndex","prevECIdxs","previousRowCell","clearCell","updateCellSelection","updateCellProps","selectedRowCellIndex","selectCellsByRange","min","cellIndexes","stIndex","edIndex","temp","cellSelectionMode","addAttribute","selectCells","rowCellIndexes","cellLen","addRowCellIndex","addCellsToSelection","cellIndexes_1","selectedCellIdx","cellDeselect","focus","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","elementFromPoint","offsetLeft","ctrlKey","shiftKey","mouseUpHandler","postion","clearSelAfterRefresh","clickHandler","keyPressHandler","popUpClickHandler","rowCellSelectionHandler","showPopup","checkScroll","downArrowKey","upArrowKey","rightArrowKey","leftArrowKey","homeKey","endKey","ctrlHomeKey","ctrlEndKey","shiftDownKey","shiftUpKey","shiftRightKey","shiftLeftKey","scrollElem","firstElementChild","scrollTop","checkVisible","st","scrollY","innerHeight","applyDownUpKey","cond1","cond2","applyUpDown","cIndex","preSelectedCellIndex","applyRightLeftKey","key1","key2","cond","isCellHide","cellIndex_1","rowElement","applyHomeEndKey","applyShiftLeftRightKey","applyCtrlHomeEndKey","isAdd","instance","arg1","getToggleFields","getKeyBy","lastScrollTop","previousValues","oneTimeReady","refreshOverflow","ensureOverflow","getThreshold","cssProps","getCssProperties","border","padding","rtl","info","onContentScroll","scrollTarget","isHeader","scrollLeft","isFooter","scrollHeight","clientHeight","css","overflowY","isPrinting","printWindow","open","outerHeight","outerWidth","moveTo","resizeTo","screen","availWidth","availHeight","printMode","isPagerDisabled","removeColGroup","selectedRows","groupCaption","colGroups","AggregateColumn","fn","getTemplate","ej2_buttons_1","showColumn","hideColumn","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","unWireEvents","hideDialog","renderDlgContent","targetElement","dlgObj","columnChooserSearch","removeCancelIcon","addcancelIcon","args1","refreshCheckboxState","maxHeight","elementVisible","newpos","calculateRelativeBasedPosition","X","Y","refreshPosition","mOpenDlg","openColumnChooser","renderChooserList","dlgDiv","tarElement","Dialog","showCloseIcon","closeOnEscape","getElementById","buttons","confirmDlgBtnClick","buttonModel","isPrimary","clearActions","animationSettings","effect","appendTo","mainDiv","searchDiv","ccsearchele","placeholder","ccsearchicon","conDiv","innerDivContent","refreshCheckboxList","columnStateChange","params","dialogInstance","stateColumns","state","colUid","replace","currentCol","checkstatecolumn","targetEle","uncheckColumn","checked","searchVal","fltrCol","clearSearch","nMatchele","stopTimer","searchElement","columnChooserManualSearch","gdCol","ulElement","renderCheckbox","cclist","hideColState","showColState","checkBoxObj","cclabe","cccheckboxlist","CheckBox","label","change","searchValue","startTimer","proxy","interval","keyCode","timer","setInterval","clearInterval","sort_1","page_1","filter_1","resize_1","reorder_1","row_reorder_1","group_1","detail_row_1","toolbar_1","virtual_scroll_1","edit_1","batch_edit_1","inline_edit_1","normal_edit_1","dialog_edit_1","excel_export_1","pdf_export_1","export_helper_1","DetailRow","aria","toogleExpandcollapse","nextRow","isDetailRow","detailRow","detailCell","parentNode","nextSibling","parentID","parentPrimaryKeys","parentKeyField","parentRowData","grid","getInjectedModules","injectedModues","gridElem","detailElement","getTDfromIndex","isNaN","collapse","expandAll","expandCollapse","collapseAll","isExpand","dataRow","Sort","contentRefresh","isModelChanged","updateModel","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","lastSortedCol","isRemove","arg2","arg3","removeSortIcons","updateSortedCols","addSortIcons","refreshSortIcons","enableSortMultiTouch","showPopUp","filterElement","updateAriaAttr","pager_1","pager_dropdown_1","external_message_1","Pager","ExternalMessage","PagerDropDown","Page","pagerObj","pagerTemplate","dropDownChanged","onSelect","addAriaAttr","numericContainer","links","isForceCancel","prevPage","previousPage","canSkipAction","keyActions","el","activeElement","enableExternalMessage","externalMessage","appendToElement","enableAfterRender","handlers","complete","updateLayout","inboundChange","keyPress","numeric_container_1","pager_message_1","defaultConstants","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","containerModule","NumericContainer","pagerMessageModule","PagerMessage","checkpagesizes","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","refreshNumericLinks","checkGoToPage","currentPageChanged","showMessage","hideMessage","getLocalizedLabel","pageSizes","newPageNo","oldPageNo","previousPageNo","totalPages","enableQueryString","updateQueryString","pageCount","getPagerTemplate","updateTotalPages","updatedUrl","getUpdatedURL","location","href","history","pushState","path","uri","regx","RegExp","match","hash","title","pagerElement","renderNumericContainer","updateLinksHtml","updateStyles","link","aria-label","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","PP","NP","next","last","currentPageSet","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","pageNoMsgElem","pageCountMsgElem","str","ej2_dropdowns_1","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","defaultValue","dropDownListObject","DropDownList","onChange","filter_cell_renderer_1","Filter","values","FilterCellRenderer","detail","updateFilterMsg","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","updateSpanClass","keyUpHandler","filterCell","arg4","arg5","arg6","arg7","checkForSkipInput","filterStatusMsg","checkAlreadyColFiltered","split","updateCrossIcon","processFilter","targetText","previousElementSibling","disabled","lastFilterElement","nextElementSibling","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","onTimerTick","immediateModeDelay","JSON","parse","stringify","validateFilterValue","getOperator","substring","charAt","singleOp","multipleOp","operators","=","!","filterCells","fromIndex","filterCells_1","filterBarTemplate","templateRead","read","templateWrite","write","resizeClassList","suppress","icon","cursor","lines","Resize","tapped","isDblClk","fName","findColumn","resizeColumn","indentWidthClone","headerTextClone","contentTextClone","contentText","wHeader","wContent","columnbyindex","tableWidth_1","tableWidth","text","offsetWidthValue","setHandlerHeight","getResizeHandlers","touchStartEvent","callAutoFit","getTargetColumn","refreshColumnWidth","appendHelper","pageX","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","detach","mousemove","colData","updateHelper","doubleTapEvent","_b","pos","calcPos","floor","cls","parentOffset","offset","doc","ownerDocument","offsetParent","documentElement","nodeType","getUserAgent","clearTimeout","setTimeout","timeoutHandler","test","userAgent","Reorder","createReorderElement","chkDropPosition","srcElem","destElem","targetParentContainerIndex","chkDropAllCols","isFound","headers","pop","findColParent","getColumnsModel","subCols","oldIdx","newIndex","moveColumns","destIndex","getColParent","srcIdx","flatColumns","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","draggableType","cliRectBase","setScrollLeft","cliRect","RowDD","dropElem","rowDropSettings","targetID","isDragStop","getElementFromPosition","initializeDrag","getTargetIdx","targetRow","srcControl","targetIndex","skip","Group","groupColumn","dropArea","ungroupColumn","grpRow","expandCollapseRows","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","cellIdx","rowIdx","rowNodes","isHide","expandElem","toExpand","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","addColToGroupDrop","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","clearGrouping","ej2_navigations_1","Toolbar","predefinedItems","gridID","preItems","preItems_1","localeName","toUpperCase","prefixIcon","tooltipText","align","columnchooser","suffixIcon","createToolbar","unWireEvent","getItems","clicked","toolbarClickHandler","enablePersistence","viewStr","wireEvent","refreshToolbarItems","updateSearchBox","enableItems","disableItems","toolbarItems","toolbarItems_1","getItemObject","getItem","itemObject","itemName","isEnable","items_1","gID","originalEvent","offsetTop","footer_renderer_1","summary_cell_renderer_1","summaryIterator","callback","Aggregate","initiateRender","cellFac","SummaryCellRenderer","footerRenderer","FooterRenderer","prepareSummaryInfo","dataColumn","getFormatFromType","cModel","gridModule","modelGenerator","overflowX","tFoot","renderSummaryContent","summaries","fragment","rowrenderer","srow","onScroll","refreshCol","replaceChild","onWidthChange","updateFooterTableWidth","tempObj","virtual_content_renderer_1","VirtualScroll","VirtualHeaderRenderer","VirtualContentRenderer","ensurePageSize","blockSize","size","setProperties","refreshVirtualElement","intersection_observer_1","virtual_row_model_generator_1","prevHeight","preventEvent","actions","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","isFocused","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","container","pageHeight","getBlockHeight","axes","observer","InterSectionObserver","adjustTable","scrollListener","scrollArgs","sentinel","viewInfo","getInfoFromView","prevInfo","axis","blockIndexes","columnIndexes","loadNext","loadSelf","nextInfo","virtualInfo","block","blk","isBlockAvailable","tempBlocks","infoType","sentinelInfo","getPageFromTop","getBlockIndexes","blocks","ensureBlocks","every","getColumnIndexes","mIdx","old","ind","isEndBlock","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","isIE","sTop","setVirtualHeight","setPageHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","iOffset","Number","getPage","cHeight","endTranslate","maxBlock","onEntered","xAxis","observe","getBlockSize","totalBlocks","cOffsets","VirtualRowModelGenerator","startIdx","bSize","cache","rem","refreshColOffsets","gen","xValue","yValue","transform","full","fromWheel","touchMove","up","check","containerRect","entered","down","bottom","onEnterCallback","virtualScrollHandler","prevTop","prevLeft","debounced100","debounce","debounced50","groups","model","rowModelGenerator","notifyArgs","loadedBlocks","checkAndResetCache","getStartIndex","median","updateGroupRow","even","sLeft","calWidth","offsetVal","clear","gLen","n","currentFirst","iterateGroup","oRow","res","shift","edit_renderer_1","boolean_edit_cell_1","dropdown_edit_cell_1","numeric_edit_cell_1","default_edit_cell_1","ej2_popups_2","ej2_inputs_1","editCellType","dropdownedit","DropDownEditCell","numericedit","NumericEditCell","booleanedit","BooleanEditCell","default","DefaultEditCell","editType","inline","InlineEdit","normal","batch","BatchEdit","dialog","DialogEdit","updateEditObj","updateColTypeObj","EditRender","createAlertDlg","createConfirmDlg","tapEvent","navigator","showDialog","alertDObj","refreshToolbar","showConfirmDialog","dialogObj","showDeleteConfirmDialog","endEditing","updateCell","updateRow","batchCancel","batchSave","editCell","editFormValidate","formObj","validate","getBatchChanges","getCurrentEditCellData","getCurrentEditedData","saveCell","getValueFromType","parseFloat","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","isModal","executeAction","form","editedData","inputs","setValue","destroyWidgets","cols_1","preventObj","applyFormValidation","rules","cols_2","validationRules","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","tooltip","opensOn","animation","close","inputName","tObj","status","isInline","NumericTextBox","rowData","enabled","floatLabelType","inline_edit_renderer_1","batch_edit_renderer_1","dialog_edit_renderer_1","InlineEditRender","BatchEditRender","DialogEditRender","addNew","getEditElements","convertWidget","focusElement","setSelectionRange","tArgs","isInput","tagName","getEditElement","td_1","columnObject","setLocaleObj","createDialog","primaryKeyValue","allowDragging","btnClick","dataCell","lbl","for","select","ddActionComplete","popupHeight","Input","createInput","NormalEdit","allowEditOnDblClick","editRowIndex","primaryKeys","primaryKeyValues","previousData","primaryKey","stopEditStatus","editHandler","edSucc","edFail","editSuccess","editFailure","rowObj","cellDetails","setCellIdx","validateFormObj","editNextCell","editPrevCell","editCellFromIndex","reFocusOnError","isAddRow","findNextEditableCell","findPrevEditableCell","isDirty","removeRowObjectFromUID","refreshRowIdx","bulkDelete","bulkAddRow","batchChanges","addedRecords","deletedRecords","changedRecords","rows_1","addRowObject","getIndexFromData","defaultData","getDefaultData","checkNPCell","dValues","number","string","boolean","date","datetime","getDataByIndex","getCellIdx","isForeignKey","foreignKeyValue","isColored","setChanges","keys_1","cIdx","isForceSave","previousValue","valComplete","ej2_excel_export_1","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","init","toISOString","isExporting","footer","exportValueFormatter","ExportValueFormatter","theme","isCsv","processRecords","reject","adaptor","processInnerRecords","blankRows","multipleExport","worksheets","processExcelHeader","ExportHelper","getHeaders","groupIndent","childLevels","processHeaderContent","exportType","processRecordContent","returnType","currentViewRecords","processGroupedRows","processRecordRows","processAggregates","processExcelFooter","sheet","Workbook","save","dataSource_1","formatCellValue","getCaptionThemeStyle","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","_c","_d","rLen","styleIndex","getColumnStyle","mergeOptions","rec","summaryModel","groupSummaryModel","groupSummaryRows","sRows","customIndex","cells_2","eCell","txt","wholeText","sum","average","truecount","falsecount","custom","JSON1","JSON2","attrname","returnValue","gridRows","gridColumns","spannedCells","currentCellIndex","gridCell","getIndex","spannedCell","getHeaderThemeStyle","hAlign","parseStyles","getRecordThemeStyle","fontColor","fontName","fontSize","borders","color","bold","backColor","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","numberFormat","hideColumnInclude","isHideColumnInclude","measureColumnDepth","actualColumns","processColumns","processHeaderCells","removeCellFromRow","generateActualColumns","getCellCount","resultCells","appendGridCells","isFirstColumn","isLastColumn","isIgnoreFirstCell","gridColumn","option","gridObj","internationalization","customFormat","ej2_pdf_export_1","ej2_pdf_export_2","ej2_pdf_export_3","ej2_pdf_export_4","ej2_pdf_export_5","ej2_pdf_export_6","PdfExport","customDataSource","gridTheme","isGrouping","pdfDocument","pdfExportProperties","PdfDocument","processExport","section","sections","processExportProperties","pdfPage","pages","pdfGrid","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","setBorder","draw","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfColor","PdfBorders","PdfPen","groupIndex","dataSourceItems","getCell","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","columnCount","getColumn","gridHeader","getHeader","stringFormat","getHorizontalAlignment","getVerticalAlignment","k","allowHorizontalOverflow","pageOrientation","pdfPageSettings","PdfPageSettings","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","clientSize","PointF","fromTop","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromBottom","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","hexToRgb","g","setContentFormat","graphics","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfPageCountField","PdfCompositeField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","sRows_1","leastCaptionSummaryIndex","getTemplateFunction","templateFunction","getSummaryWithoutTemplate","gridRow","setRecordThemeStyle","processCellStyle","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","fontFamily","italic","underline","strikeout","borderWidth","borderColor","PdfStringFormat","PdfTextAlignment","Right","Center","Justify","Left","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","getFontFamily","fontStyle","PdfFontStyle","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","filter_cell_renderer_2"],"mappings":"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","file":"ej2-grids.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-dropdowns\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-excel-export\"), require(\"@syncfusion/ej2-pdf-export\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-popups\", \"@syncfusion/ej2-data\", \"@syncfusion/ej2-buttons\", \"@syncfusion/ej2-dropdowns\", \"@syncfusion/ej2-navigations\", \"@syncfusion/ej2-inputs\", \"@syncfusion/ej2-excel-export\", \"@syncfusion/ej2-pdf-export\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-popups\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-buttons\"), require(\"@syncfusion/ej2-dropdowns\"), require(\"@syncfusion/ej2-navigations\"), require(\"@syncfusion/ej2-inputs\"), require(\"@syncfusion/ej2-excel-export\"), require(\"@syncfusion/ej2-pdf-export\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-popups\"], root[\"@syncfusion/ej2-data\"], root[\"@syncfusion/ej2-buttons\"], root[\"@syncfusion/ej2-dropdowns\"], root[\"@syncfusion/ej2-navigations\"], root[\"@syncfusion/ej2-inputs\"], root[\"@syncfusion/ej2-excel-export\"], root[\"@syncfusion/ej2-pdf-export\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_44__, __WEBPACK_EXTERNAL_MODULE_53__, __WEBPACK_EXTERNAL_MODULE_62__, __WEBPACK_EXTERNAL_MODULE_72__, __WEBPACK_EXTERNAL_MODULE_85__, __WEBPACK_EXTERNAL_MODULE_88__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(92)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(45), __webpack_require__(89), __webpack_require__(90), __webpack_require__(91)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, common_1, actions_1, models_1, renderer_1, services_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(common_1);\n\t    __export(actions_1);\n\t    __export(models_1);\n\t    __export(renderer_1);\n\t    __export(services_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(15), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, grid_1, enum_1, util_1, constant_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(grid_1);\n\t    __export(enum_1);\n\t    __export(util_1);\n\t    __export(constant_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(6), __webpack_require__(7), __webpack_require__(11), __webpack_require__(12), __webpack_require__(15), __webpack_require__(33), __webpack_require__(4), __webpack_require__(10), __webpack_require__(34), __webpack_require__(35), __webpack_require__(25), __webpack_require__(36), __webpack_require__(37), __webpack_require__(38), __webpack_require__(39), __webpack_require__(40), __webpack_require__(41), __webpack_require__(42), __webpack_require__(43)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_popups_1, util_1, events, render_1, enum_1, cell_render_factory_1, service_locator_1, value_formatter_1, renderer_factory_1, width_controller_1, aria_service_1, page_settings_1, selection_1, search_1, show_hide_1, scroll_1, print_1, aggregate_1, column_chooser_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SortDescriptor = (function (_super) {\n\t        __extends(SortDescriptor, _super);\n\t        function SortDescriptor() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SortDescriptor;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], SortDescriptor.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], SortDescriptor.prototype, \"direction\", void 0);\n\t    exports.SortDescriptor = SortDescriptor;\n\t    var SortSettings = (function (_super) {\n\t        __extends(SortSettings, _super);\n\t        function SortSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SortSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Collection([], SortDescriptor)\n\t    ], SortSettings.prototype, \"columns\", void 0);\n\t    exports.SortSettings = SortSettings;\n\t    var Predicate = (function (_super) {\n\t        __extends(Predicate, _super);\n\t        function Predicate() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Predicate;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"operator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"value\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"matchCase\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Predicate.prototype, \"predicate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({})\n\t    ], Predicate.prototype, \"actualFilterValue\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property({})\n\t    ], Predicate.prototype, \"actualOperator\", void 0);\n\t    exports.Predicate = Predicate;\n\t    var FilterSettings = (function (_super) {\n\t        __extends(FilterSettings, _super);\n\t        function FilterSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return FilterSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Collection([], Predicate)\n\t    ], FilterSettings.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('filterbar')\n\t    ], FilterSettings.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], FilterSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1500)\n\t    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n\t    exports.FilterSettings = FilterSettings;\n\t    var SelectionSettings = (function (_super) {\n\t        __extends(SelectionSettings, _super);\n\t        function SelectionSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SelectionSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property('row')\n\t    ], SelectionSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('flow')\n\t    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('single')\n\t    ], SelectionSettings.prototype, \"type\", void 0);\n\t    exports.SelectionSettings = SelectionSettings;\n\t    var SearchSettings = (function (_super) {\n\t        __extends(SearchSettings, _super);\n\t        function SearchSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return SearchSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], SearchSettings.prototype, \"fields\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('')\n\t    ], SearchSettings.prototype, \"key\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('contains')\n\t    ], SearchSettings.prototype, \"operator\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n\t    exports.SearchSettings = SearchSettings;\n\t    var RowDropSettings = (function (_super) {\n\t        __extends(RowDropSettings, _super);\n\t        function RowDropSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return RowDropSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], RowDropSettings.prototype, \"targetID\", void 0);\n\t    exports.RowDropSettings = RowDropSettings;\n\t    var TextWrapSettings = (function (_super) {\n\t        __extends(TextWrapSettings, _super);\n\t        function TextWrapSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TextWrapSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property('both')\n\t    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n\t    exports.TextWrapSettings = TextWrapSettings;\n\t    var GroupSettings = (function (_super) {\n\t        __extends(GroupSettings, _super);\n\t        function GroupSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return GroupSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], GroupSettings.prototype, \"showDropArea\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], GroupSettings.prototype, \"columns\", void 0);\n\t    exports.GroupSettings = GroupSettings;\n\t    var EditSettings = (function (_super) {\n\t        __extends(EditSettings, _super);\n\t        function EditSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return EditSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowAdding\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowEditing\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"allowDeleting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('normal')\n\t    ], EditSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n\t    exports.EditSettings = EditSettings;\n\t    var Grid = (function (_super) {\n\t        __extends(Grid, _super);\n\t        function Grid(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.isInitial = true;\n\t            _this.sortedColumns = [];\n\t            _this.inViewIndexes = [];\n\t            _this.mediaCol = [];\n\t            _this.isMediaQuery = false;\n\t            _this.isInitialLoad = false;\n\t            _this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            _this.defaultLocale = {\n\t                EmptyRecord: 'No records to display',\n\t                True: 'true',\n\t                False: 'false',\n\t                InvalidFilterMessage: 'Invalid Filter Data',\n\t                GroupDropArea: 'Drag a column header here to group its column',\n\t                UnGroup: 'Click here to ungroup',\n\t                GroupDisable: 'Grouping is disabled for this column',\n\t                FilterbarTitle: '\\'s filter bar cell',\n\t                EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n\t                Add: 'Add',\n\t                Edit: 'Edit',\n\t                Cancel: 'Cancel',\n\t                Update: 'Update',\n\t                Delete: 'Delete',\n\t                Print: 'Print',\n\t                Pdfexport: 'PDF Export',\n\t                Excelexport: 'Excel Export',\n\t                Wordexport: 'Word Export',\n\t                Csvexport: 'CSV Export',\n\t                Search: 'Search',\n\t                Item: 'item',\n\t                Items: 'items',\n\t                EditOperationAlert: 'No records selected for edit operation',\n\t                DeleteOperationAlert: 'No records selected for delete operation',\n\t                SaveButton: 'Save',\n\t                OKButton: 'OK',\n\t                CancelButton: 'Cancel',\n\t                EditFormTitle: 'Details of ',\n\t                AddFormTitle: 'Add New Record',\n\t                BatchSaveConfirm: 'Are you sure you want to save changes?',\n\t                BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n\t                ConfirmDelete: 'Are you sure you want to Delete Record?',\n\t                CancelEdit: 'Are you sure you want to Cancel the changes?',\n\t                ChooseColumns: 'Choose Column',\n\t                SearchColumns: 'search columns',\n\t                Matchs: 'No Matches Found'\n\t            };\n\t            _this.keyConfigs = {\n\t                downArrow: 'downarrow',\n\t                upArrow: 'uparrow',\n\t                rightArrow: 'rightarrow',\n\t                leftArrow: 'leftarrow',\n\t                shiftDown: 'shift+downarrow',\n\t                shiftUp: 'shift+uparrow',\n\t                shiftRight: 'shift+rightarrow',\n\t                shiftLeft: 'shift+leftarrow',\n\t                home: 'home',\n\t                end: 'end',\n\t                escape: 'escape',\n\t                ctrlHome: 'ctrl+home',\n\t                ctrlEnd: 'ctrl+end',\n\t                pageUp: 'pageup',\n\t                pageDown: 'pagedown',\n\t                ctrlAltPageUp: 'ctrl+alt+pageup',\n\t                ctrlAltPageDown: 'ctrl+alt+pagedown',\n\t                altPageUp: 'alt+pageup',\n\t                altPageDown: 'alt+pagedown',\n\t                altDownArrow: 'alt+downarrow',\n\t                altUpArrow: 'alt+uparrow',\n\t                ctrlDownArrow: 'ctrl+downarrow',\n\t                ctrlUpArrow: 'ctrl+uparrow',\n\t                ctrlPlusA: 'ctrl+A',\n\t                ctrlPlusP: 'ctrl+P',\n\t                insert: 'insert',\n\t                delete: 'delete',\n\t                f2: 'f2',\n\t                enter: 'enter',\n\t                tab: 'tab',\n\t                shiftTab: 'shift+tab'\n\t            };\n\t            return _this;\n\t        }\n\t        Grid.prototype.getPersistData = function () {\n\t            var _this = this;\n\t            var keyEntity = ['pageSettings', 'sortSettings',\n\t                'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex'];\n\t            var ignoreOnPersist = {\n\t                pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n\t                filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay'],\n\t                groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n\t                    'disablePageWiseAggregates', 'hideCaptionCount'],\n\t                searchSettings: ['fields', 'operator', 'ignoreCase'],\n\t                sortSettings: [], columns: [], selectedRowIndex: []\n\t            };\n\t            var ignoreOnColumn = ['edit', 'filterBarTemplate', 'headerTemplate', 'template'];\n\t            keyEntity.forEach(function (value) {\n\t                var currentObject = _this[value];\n\t                for (var _i = 0, _a = ignoreOnPersist[value]; _i < _a.length; _i++) {\n\t                    var val = _a[_i];\n\t                    delete currentObject[val];\n\t                }\n\t            });\n\t            this.ignoreInArrays(ignoreOnColumn, this.columns);\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Grid.prototype.ignoreInArrays = function (ignoreOnColumn, columns) {\n\t            var _this = this;\n\t            columns.forEach(function (column) {\n\t                if (column.columns) {\n\t                    _this.ignoreInColumn(ignoreOnColumn, column);\n\t                    _this.ignoreInArrays(ignoreOnColumn, column.columns);\n\t                }\n\t                else {\n\t                    _this.ignoreInColumn(ignoreOnColumn, column);\n\t                }\n\t            });\n\t        };\n\t        Grid.prototype.ignoreInColumn = function (ignoreOnColumn, column) {\n\t            ignoreOnColumn.forEach(function (val) {\n\t                delete column[val];\n\t            });\n\t        };\n\t        Grid.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.allowFiltering) {\n\t                modules.push({\n\t                    member: 'filter',\n\t                    args: [this, this.filterSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.allowExcelExport) {\n\t                modules.push({\n\t                    member: 'ExcelExport',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowPdfExport) {\n\t                modules.push({\n\t                    member: 'PdfExport',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowSorting) {\n\t                modules.push({\n\t                    member: 'sort',\n\t                    args: [this, this.sortSettings, this.sortedColumns]\n\t                });\n\t            }\n\t            if (this.allowPaging) {\n\t                modules.push({\n\t                    member: 'pager',\n\t                    args: [this, this.pageSettings]\n\t                });\n\t            }\n\t            if (this.allowSelection) {\n\t                modules.push({\n\t                    member: 'selection',\n\t                    args: [this, this.selectionSettings, this.serviceLocator]\n\t                });\n\t            }\n\t            modules.push({\n\t                member: 'resize',\n\t                args: [this]\n\t            });\n\t            if (this.allowReordering) {\n\t                modules.push({\n\t                    member: 'reorder',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowRowDragAndDrop) {\n\t                modules.push({\n\t                    member: 'rowDragAndDrop',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.allowGrouping) {\n\t                modules.push({\n\t                    member: 'group',\n\t                    args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.aggregates.length) {\n\t                modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n\t            }\n\t            if (this.isDetail()) {\n\t                modules.push({\n\t                    member: 'detailRow',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.toolbar || this.toolbarTemplate) {\n\t                modules.push({\n\t                    member: 'toolbar',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.enableVirtualization || this.enableColumnVirtualization) {\n\t                modules.push({\n\t                    member: 'virtualscroll',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n\t                modules.push({\n\t                    member: 'edit',\n\t                    args: [this, this.serviceLocator]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Grid.prototype.preRender = function () {\n\t            this.serviceLocator = new service_locator_1.ServiceLocator;\n\t            this.initializeServices();\n\t        };\n\t        Grid.prototype.render = function () {\n\t            this.ariaService.setOptions(this.element, { role: 'grid' });\n\t            ej2_popups_1.createSpinner({ target: this.element });\n\t            this.renderModule = new render_1.Render(this, this.serviceLocator);\n\t            this.getMediaColumns();\n\t            this.searchModule = new search_1.Search(this);\n\t            this.scrollModule = new scroll_1.Scroll(this);\n\t            if (this.showColumnChooser) {\n\t                this.columnChooserModule = new column_chooser_1.ColumnChooser(this, this.serviceLocator);\n\t            }\n\t            this.notify(events.initialLoad, {});\n\t            this.trigger(events.load);\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            this.getColumns();\n\t            this.processModel();\n\t            this.gridRender();\n\t            this.wireEvents();\n\t            this.addListener();\n\t            this.updateDefaultCursor();\n\t            this.showSpinner();\n\t            this.notify(events.initialEnd, {});\n\t        };\n\t        Grid.prototype.showSpinner = function () {\n\t            ej2_popups_1.showSpinner(this.element);\n\t        };\n\t        Grid.prototype.hideSpinner = function () {\n\t            ej2_popups_1.hideSpinner(this.element);\n\t        };\n\t        Grid.prototype.getMediaColumns = function () {\n\t            if (!this.enableColumnVirtualization) {\n\t                var gcol = this.getColumns();\n\t                this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t                if (!ej2_base_2.isNullOrUndefined(gcol)) {\n\t                    for (var index = 0; index < gcol.length; index++) {\n\t                        if (!ej2_base_2.isNullOrUndefined(gcol[index].hideAtMedia)) {\n\t                            this.mediaCol.push(gcol[index]);\n\t                            var media = window.matchMedia(gcol[index].hideAtMedia);\n\t                            this.mediaQueryUpdate(index, media);\n\t                            media.addListener(this.mediaQueryUpdate.bind(this, index));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n\t            this.isMediaQuery = true;\n\t            var col = this.getColumns()[columnIndex];\n\t            col.visible = e.matches;\n\t            if (this.isInitialLoad) {\n\t                if (col.visible) {\n\t                    this.showHider.show(col.headerText, 'headerText');\n\t                }\n\t                else {\n\t                    this.showHider.hide(col.headerText, 'headerText');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.refreshMediaCol = function () {\n\t            if (this.isMediaQuery) {\n\t                this.refresh();\n\t                this.isMediaQuery = false;\n\t            }\n\t            this.isInitialLoad = true;\n\t        };\n\t        Grid.prototype.eventInitializer = function () {\n\t        };\n\t        Grid.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t            this.removeListener();\n\t            this.notify(events.destroy, {});\n\t            this.destroyDependentModules();\n\t            _super.prototype.destroy.call(this);\n\t            this.element.innerHTML = '';\n\t            ej2_base_3.classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device']);\n\t        };\n\t        Grid.prototype.destroyDependentModules = function () {\n\t            this.scrollModule.destroy();\n\t            this.keyboardModule.destroy();\n\t        };\n\t        Grid.prototype.getModuleName = function () {\n\t            return 'grid';\n\t        };\n\t        Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var requireRefresh = false;\n\t            var requireGridRefresh = false;\n\t            var checkCursor;\n\t            var args = { requestType: 'refresh' };\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowPaging':\n\t                        this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'pageSettings':\n\t                        this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n\t                        if (ej2_base_2.isNullOrUndefined(newProp.pageSettings.currentPage) && ej2_base_2.isNullOrUndefined(newProp.pageSettings.totalRecordsCount)) {\n\t                            requireRefresh = true;\n\t                        }\n\t                        break;\n\t                    case 'locale':\n\t                        this.localeObj.setLocale(newProp.locale);\n\t                        this.valueFormatterService.setCulture(newProp.locale);\n\t                        requireRefresh = true;\n\t                        if (this.toolbar) {\n\t                            this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        }\n\t                        break;\n\t                    case 'allowSorting':\n\t                        this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowFiltering':\n\t                        this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'height':\n\t                    case 'width':\n\t                        this.notify(events.uiUpdate, {\n\t                            module: 'scroll',\n\t                            properties: { width: newProp.width, height: newProp.height }\n\t                        });\n\t                        break;\n\t                    case 'allowReordering':\n\t                        this.notify(events.uiUpdate, { module: 'reorder', enable: this.allowReordering });\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'allowRowDragAndDrop':\n\t                        this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n\t                        break;\n\t                    case 'rowTemplate':\n\t                        this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'detailTemplate':\n\t                        this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'allowGrouping':\n\t                        this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n\t                        this.headerModule.refreshUI();\n\t                        requireRefresh = true;\n\t                        checkCursor = true;\n\t                        break;\n\t                    case 'childGrid':\n\t                        requireRefresh = true;\n\t                        break;\n\t                    case 'toolbar':\n\t                        this.notify(events.uiUpdate, { module: 'toolbar' });\n\t                        break;\n\t                    case 'groupSettings':\n\t                        if (!(ej2_base_2.isNullOrUndefined(newProp.groupSettings.showDropArea))) {\n\t                            this.headerModule.refreshUI();\n\t                            requireRefresh = true;\n\t                            checkCursor = true;\n\t                        }\n\t                        this.notify(events.inBoundModelChanged, { module: 'group', properties: newProp.groupSettings });\n\t                        break;\n\t                    case 'aggregates':\n\t                        this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n\t                        break;\n\t                    case 'columns':\n\t                        this.updateColumnObject();\n\t                        requireGridRefresh = true;\n\t                        break;\n\t                    default:\n\t                        this.extendedPropertyChange(prop, newProp);\n\t                }\n\t            }\n\t            if (checkCursor) {\n\t                this.updateDefaultCursor();\n\t            }\n\t            if (requireGridRefresh) {\n\t                this.refresh();\n\t            }\n\t            else if (requireRefresh) {\n\t                this.notify(events.modelChanged, args);\n\t                requireRefresh = false;\n\t            }\n\t        };\n\t        Grid.prototype.extendedPropertyChange = function (prop, newProp) {\n\t            switch (prop) {\n\t                case 'enableRtl':\n\t                    this.updateRTL();\n\t                    if (this.allowPaging) {\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n\t                    }\n\t                    if (this.height !== 'auto') {\n\t                        this.scrollModule.removePadding(!newProp.enableRtl);\n\t                        this.scrollModule.setPadding();\n\t                    }\n\t                    if (this.toolbar) {\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n\t                        this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n\t                    }\n\t                    break;\n\t                case 'enableAltRow':\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'allowResizing':\n\t                    this.headerModule.refreshUI();\n\t                    break;\n\t                case 'gridLines':\n\t                    this.updateGridLines();\n\t                    break;\n\t                case 'filterSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n\t                    break;\n\t                case 'searchSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n\t                    break;\n\t                case 'sortSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'sort' });\n\t                    break;\n\t                case 'selectionSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n\t                    break;\n\t                case 'editSettings':\n\t                    this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n\t                    break;\n\t                case 'allowTextWrap':\n\t                case 'textWrapSettings':\n\t                    if (this.allowTextWrap) {\n\t                        this.applyTextWrap();\n\t                    }\n\t                    else {\n\t                        this.removeTextWrap();\n\t                    }\n\t                    break;\n\t                case 'dataSource':\n\t                    this.notify(events.dataSourceModified, {});\n\t                    this.renderModule.refresh();\n\t                    break;\n\t                case 'enableHover':\n\t                    var action = newProp.enableHover ? ej2_base_3.addClass : ej2_base_3.removeClass;\n\t                    action([this.element], 'e-gridhover');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.updateDefaultCursor = function () {\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                if (this.allowSorting || this.allowGrouping || this.allowReordering) {\n\t                    row.classList.remove('e-defaultcursor');\n\t                }\n\t                else {\n\t                    row.classList.add('e-defaultcursor');\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.updateColumnModel = function (columns) {\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                if (columns[i].columns) {\n\t                    this.updateColumnModel(columns[i].columns);\n\t                }\n\t                else {\n\t                    this.columnModel.push(columns[i]);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.getColumns = function () {\n\t            var _this = this;\n\t            var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n\t            var vLen = inview.length;\n\t            if (!this.enableColumnVirtualization || ej2_base_2.isNullOrUndefined(this.columnModel) || this.columnModel.length === 0) {\n\t                this.columnModel = [];\n\t                this.updateColumnModel(this.columns);\n\t            }\n\t            var columns = vLen === 0 ? this.columnModel :\n\t                this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n\t            return columns;\n\t        };\n\t        Grid.prototype.getColumnIndexesInView = function () {\n\t            return this.inViewIndexes;\n\t        };\n\t        Grid.prototype.setColumnIndexesInView = function (indexes) {\n\t            this.inViewIndexes = indexes;\n\t        };\n\t        Grid.prototype.getVisibleColumns = function () {\n\t            var cols = [];\n\t            for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (col.visible) {\n\t                    cols.push(col);\n\t                }\n\t            }\n\t            return cols;\n\t        };\n\t        Grid.prototype.getHeaderContent = function () {\n\t            return this.headerModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridHeaderContent = function (element) {\n\t            this.headerModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getContentTable = function () {\n\t            return this.contentModule.getTable();\n\t        };\n\t        Grid.prototype.setGridContentTable = function (element) {\n\t            this.contentModule.setTable(element);\n\t        };\n\t        Grid.prototype.getContent = function () {\n\t            return this.contentModule.getPanel();\n\t        };\n\t        Grid.prototype.setGridContent = function (element) {\n\t            this.contentModule.setPanel(element);\n\t        };\n\t        Grid.prototype.getHeaderTable = function () {\n\t            return this.headerModule.getTable();\n\t        };\n\t        Grid.prototype.setGridHeaderTable = function (element) {\n\t            this.headerModule.setTable(element);\n\t        };\n\t        Grid.prototype.getFooterContent = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement;\n\t        };\n\t        Grid.prototype.getFooterContentTable = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.footerElement)) {\n\t                this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n\t            }\n\t            return this.footerElement.firstChild.firstChild;\n\t        };\n\t        Grid.prototype.getPager = function () {\n\t            return this.gridPager;\n\t        };\n\t        Grid.prototype.setGridPager = function (element) {\n\t            this.gridPager = element;\n\t        };\n\t        Grid.prototype.getRowByIndex = function (index) {\n\t            return this.contentModule.getRowByIndex(index);\n\t        };\n\t        Grid.prototype.getRows = function () {\n\t            return this.contentModule.getRowElements();\n\t        };\n\t        Grid.prototype.getDataRows = function () {\n\t            var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    dataRows.push(rows[i]);\n\t                }\n\t            }\n\t            return dataRows;\n\t        };\n\t        Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n\t            return this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n\t        };\n\t        Grid.prototype.getColumnHeaderByIndex = function (index) {\n\t            return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n\t        };\n\t        Grid.prototype.getRowObjectFromUID = function (uid) {\n\t            for (var _i = 0, _a = this.contentModule.getRows(); _i < _a.length; _i++) {\n\t                var row = _a[_i];\n\t                if (row.uid === uid) {\n\t                    return row;\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        Grid.prototype.getColumnHeaderByField = function (field) {\n\t            return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n\t        };\n\t        Grid.prototype.getColumnHeaderByUid = function (uid) {\n\t            return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n\t        };\n\t        Grid.prototype.getColumnByField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByField = function (field) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getColumnByUid = function (uid) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return item;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getColumnIndexByUid = function (uid) {\n\t            var index = util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.uid === uid) {\n\t                    return index;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t            return !ej2_base_2.isNullOrUndefined(index) ? index : -1;\n\t        };\n\t        Grid.prototype.getUidByColumnField = function (field) {\n\t            return util_1.iterateArrayOrObject(this.getColumns(), function (item, index) {\n\t                if (item.field === field) {\n\t                    return item.uid;\n\t                }\n\t                return undefined;\n\t            })[0];\n\t        };\n\t        Grid.prototype.getNormalizedColumnIndex = function (uid) {\n\t            var index = this.getColumnIndexByUid(uid);\n\t            if (this.allowGrouping) {\n\t                index += this.groupSettings.columns.length;\n\t            }\n\t            if (this.isDetail()) {\n\t                index++;\n\t            }\n\t            return index;\n\t        };\n\t        Grid.prototype.getColumnFieldNames = function () {\n\t            var columnNames = [];\n\t            var column;\n\t            for (var i = 0, len = this.getColumns().length; i < len; i++) {\n\t                column = this.getColumns()[i];\n\t                if (column.visible) {\n\t                    columnNames.push(column.field);\n\t                }\n\t            }\n\t            return columnNames;\n\t        };\n\t        Grid.prototype.getRowTemplate = function () {\n\t            return this.rowTemplateFn;\n\t        };\n\t        Grid.prototype.getDetailTemplate = function () {\n\t            return this.detailTemplateFn;\n\t        };\n\t        Grid.prototype.getPrimaryKeyFieldNames = function () {\n\t            var keys = [];\n\t            for (var key = 0, col = this.columns, cLen = col.length; key < cLen; key++) {\n\t                if (col[key].isPrimaryKey) {\n\t                    keys.push(col[key].field);\n\t                }\n\t            }\n\t            return keys;\n\t        };\n\t        Grid.prototype.refresh = function () {\n\t            this.headerModule.refreshUI();\n\t            this.renderModule.refresh();\n\t        };\n\t        Grid.prototype.refreshHeader = function () {\n\t            this.headerModule.refreshUI();\n\t        };\n\t        Grid.prototype.getSelectedRows = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRecords : [];\n\t        };\n\t        Grid.prototype.getSelectedRowIndexes = function () {\n\t            return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n\t        };\n\t        Grid.prototype.getSelectedRowCellIndexes = function () {\n\t            return this.selectionModule.selectedRowCellIndexes;\n\t        };\n\t        Grid.prototype.getSelectedRecords = function () {\n\t            return this.contentModule.getRows().filter(function (row) { return row.isSelected; })\n\t                .map(function (m) { return m.data; });\n\t        };\n\t        Grid.prototype.getDataModule = function () {\n\t            return this.renderModule.data;\n\t        };\n\t        Grid.prototype.showColumns = function (keys, showBy) {\n\t            showBy = showBy ? showBy : 'headerText';\n\t            this.showHider.show(keys, showBy);\n\t        };\n\t        Grid.prototype.hideColumns = function (keys, hideBy) {\n\t            hideBy = hideBy ? hideBy : 'headerText';\n\t            this.showHider.hide(keys, hideBy);\n\t        };\n\t        Grid.prototype.goToPage = function (pageNo) {\n\t            this.pagerModule.goToPage(pageNo);\n\t        };\n\t        Grid.prototype.updateExternalMessage = function (message) {\n\t            this.pagerModule.updateExternalMessage(message);\n\t        };\n\t        Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            this.sortModule.sortColumn(columnName, direction, isMultiSort);\n\t        };\n\t        Grid.prototype.clearSorting = function () {\n\t            this.sortModule.clearSorting();\n\t        };\n\t        Grid.prototype.removeSortColumn = function (field) {\n\t            this.sortModule.removeSortColumn(field);\n\t        };\n\t        Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator);\n\t        };\n\t        Grid.prototype.clearFiltering = function () {\n\t            this.filterModule.clearFiltering();\n\t        };\n\t        Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n\t        };\n\t        Grid.prototype.selectRow = function (index, isToggle) {\n\t            this.selectionModule.selectRow(index, isToggle);\n\t        };\n\t        Grid.prototype.selectRows = function (rowIndexes) {\n\t            this.selectionModule.selectRows(rowIndexes);\n\t        };\n\t        Grid.prototype.clearSelection = function () {\n\t            this.selectionModule.clearSelection();\n\t        };\n\t        Grid.prototype.selectCell = function (cellIndex, isToggle) {\n\t            this.selectionModule.selectCell(cellIndex, isToggle);\n\t        };\n\t        Grid.prototype.search = function (searchString) {\n\t            this.searchModule.search(searchString);\n\t        };\n\t        Grid.prototype.print = function () {\n\t            this.printModule.print();\n\t        };\n\t        Grid.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Grid.prototype.startEdit = function () {\n\t            this.editModule.startEdit();\n\t        };\n\t        Grid.prototype.endEdit = function () {\n\t            this.editModule.endEdit();\n\t        };\n\t        Grid.prototype.closeEdit = function () {\n\t            this.editModule.closeEdit();\n\t        };\n\t        Grid.prototype.addRecord = function (data) {\n\t            this.editModule.addRecord(data);\n\t        };\n\t        Grid.prototype.deleteRow = function (tr) {\n\t            this.editModule.deleteRow(tr);\n\t        };\n\t        Grid.prototype.recalcIndentWidth = function () {\n\t            if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n\t                return;\n\t            }\n\t            if ((!this.groupSettings.columns.length && !this.isDetail()) ||\n\t                this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n\t                !this.getContentTable()) {\n\t                return;\n\t            }\n\t            var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n\t            var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n\t            var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n\t            var perPixel = indentWidth / 30;\n\t            var i = 0;\n\t            if (perPixel >= 1) {\n\t                indentWidth = (30 / perPixel);\n\t            }\n\t            if (this.enableColumnVirtualization) {\n\t                indentWidth = 30;\n\t            }\n\t            while (i < this.groupSettings.columns.length) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t                i++;\n\t            }\n\t            if (this.isDetail()) {\n\t                headerCol[i].style.width = indentWidth + 'px';\n\t                contentCol[i].style.width = indentWidth + 'px';\n\t                this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n\t            }\n\t            this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n\t        };\n\t        Grid.prototype.reorderColumns = function (fromFName, toFName) {\n\t            this.reorderModule.reorderColumns(fromFName, toFName);\n\t        };\n\t        Grid.prototype.autoFitColumns = function (fieldNames) {\n\t            this.resizeModule.autoFitColumns(fieldNames);\n\t        };\n\t        Grid.prototype.createColumnchooser = function (x, y, target) {\n\t            this.columnChooserModule.renderColumnChooser(x, y, target);\n\t        };\n\t        Grid.prototype.initializeServices = function () {\n\t            this.serviceLocator.register('widthService', this.widthService = new width_controller_1.ColumnWidthService(this));\n\t            this.serviceLocator.register('cellRendererFactory', new cell_render_factory_1.CellRendererFactory);\n\t            this.serviceLocator.register('rendererFactory', new renderer_factory_1.RendererFactory);\n\t            this.serviceLocator.register('localization', this.localeObj = new ej2_base_4.L10n(this.getModuleName(), this.defaultLocale, this.locale));\n\t            this.serviceLocator.register('valueFormatter', this.valueFormatterService = new value_formatter_1.ValueFormatter(this.locale));\n\t            this.serviceLocator.register('showHideService', this.showHider = new show_hide_1.ShowHide(this));\n\t            this.serviceLocator.register('ariaService', this.ariaService = new aria_service_1.AriaService());\n\t        };\n\t        Grid.prototype.processModel = function () {\n\t            var gCols = this.groupSettings.columns;\n\t            var sCols = this.sortSettings.columns;\n\t            var flag;\n\t            var j;\n\t            if (this.allowGrouping) {\n\t                var _loop_1 = function (i, len) {\n\t                    j = 0;\n\t                    for (var sLen = sCols.length; j < sLen; j++) {\n\t                        if (sCols[j].field === gCols[i]) {\n\t                            flag = true;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sCols.push({ field: gCols[i], direction: 'ascending' });\n\t                    }\n\t                    else {\n\t                        if (this_1.allowSorting) {\n\t                            this_1.sortedColumns.push(sCols[j].field);\n\t                        }\n\t                        else {\n\t                            sCols[j].direction = 'ascending';\n\t                        }\n\t                    }\n\t                    if (!this_1.groupSettings.showGroupedColumn) {\n\t                        var column = this_1.enableColumnVirtualization ?\n\t                            this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n\t                        column.visible = false;\n\t                    }\n\t                };\n\t                var this_1 = this;\n\t                for (var i = 0, len = gCols.length; i < len; i++) {\n\t                    _loop_1(i, len);\n\t                }\n\t            }\n\t            this.rowTemplateFn = util_1.templateCompiler(this.rowTemplate);\n\t            this.detailTemplateFn = util_1.templateCompiler(this.detailTemplate);\n\t            if (!ej2_base_2.isNullOrUndefined(this.parentDetails)) {\n\t                var value = ej2_base_2.isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n\t                    this.parentDetails.parentKeyFieldValue;\n\t                this.query.where(this.queryString, 'equal', value, true);\n\t            }\n\t        };\n\t        Grid.prototype.gridRender = function () {\n\t            this.updateRTL();\n\t            if (this.enableHover) {\n\t                this.element.classList.add('e-gridhover');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                this.element.classList.add('e-device');\n\t            }\n\t            ej2_base_3.classList(this.element, ['e-responsive', 'e-default'], []);\n\t            var rendererFactory = this.serviceLocator.getService('rendererFactory');\n\t            this.headerModule = rendererFactory.getRenderer(enum_1.RenderType.Header);\n\t            this.contentModule = rendererFactory.getRenderer(enum_1.RenderType.Content);\n\t            this.printModule = new print_1.Print(this, this.scrollModule);\n\t            this.renderModule.render();\n\t            this.eventInitializer();\n\t            this.createGridPopUpElement();\n\t            this.widthService.setWidthToColumns();\n\t            this.updateGridLines();\n\t            this.applyTextWrap();\n\t        };\n\t        Grid.prototype.dataReady = function () {\n\t            this.scrollModule.setWidth();\n\t            this.scrollModule.setHeight();\n\t            if (this.height !== 'auto') {\n\t                this.scrollModule.setPadding();\n\t            }\n\t        };\n\t        Grid.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Grid.prototype.createGridPopUpElement = function () {\n\t            var popup = ej2_base_3.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n\t            var content = ej2_base_3.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-uptail e-tail' })], popup);\n\t            content.appendChild(ej2_base_3.createElement('span'));\n\t            ej2_base_3.append([content, ej2_base_3.createElement('div', { className: 'e-downtail e-tail' })], popup);\n\t            this.element.appendChild(popup);\n\t        };\n\t        Grid.prototype.updateGridLines = function () {\n\t            ej2_base_3.classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n\t            switch (this.gridLines) {\n\t                case 'horizontal':\n\t                    this.element.classList.add('e-horizontallines');\n\t                    break;\n\t                case 'vertical':\n\t                    this.element.classList.add('e-verticallines');\n\t                    break;\n\t                case 'none':\n\t                    this.element.classList.add('e-hidelines');\n\t                    break;\n\t                case 'both':\n\t                    this.element.classList.add('e-bothlines');\n\t                    break;\n\t            }\n\t        };\n\t        Grid.prototype.applyTextWrap = function () {\n\t            if (this.allowTextWrap) {\n\t                var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t                switch (this.textWrapSettings.wrapMode) {\n\t                    case 'header':\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, true);\n\t                        break;\n\t                    case 'content':\n\t                        util_1.wrap(this.getContent(), true);\n\t                        util_1.wrap(this.element, false);\n\t                        util_1.wrap(headerRows, false);\n\t                        break;\n\t                    default:\n\t                        util_1.wrap(this.element, true);\n\t                        util_1.wrap(this.getContent(), false);\n\t                        util_1.wrap(headerRows, false);\n\t                }\n\t            }\n\t        };\n\t        Grid.prototype.removeTextWrap = function () {\n\t            util_1.wrap(this.element, false);\n\t            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n\t            util_1.wrap(headerRows, false);\n\t            util_1.wrap(this.getContent(), false);\n\t        };\n\t        Grid.prototype.refreshTooltip = function () {\n\t            var width;\n\t            var headerTable = this.getHeaderTable();\n\t            var contentTable = this.getContentTable();\n\t            var headerDivTag = 'e-gridheader';\n\t            var contentDivTag = 'e-gridcontent';\n\t            var htable = this.createTable(headerTable, headerDivTag, 'header');\n\t            var ctable = this.createTable(headerTable, headerDivTag, 'content');\n\t            var all = this.element.querySelectorAll('.e-ellipsistooltip');\n\t            var allele = [];\n\t            for (var i = 0; i < all.length; i++) {\n\t                allele[i] = all[i];\n\t            }\n\t            allele.forEach(function (element) {\n\t                var td = element;\n\t                var table = headerTable.contains(element) ? htable : ctable;\n\t                var ele = headerTable.contains(element) ? 'th' : 'tr';\n\t                table.querySelector(ele).className = element.className;\n\t                table.querySelector(ele).innerHTML = element.innerHTML;\n\t                width = table.querySelector(ele).getBoundingClientRect().width;\n\t                if (width > element.getBoundingClientRect().width && !element.classList.contains('e-tooltip')) {\n\t                    var tooltip = new ej2_popups_1.Tooltip({ content: element.innerHTML }, element);\n\t                }\n\t                else if (width < element.getBoundingClientRect().width && element.classList.contains('e-tooltip')) {\n\t                    element.ej2_instances[0].destroy();\n\t                }\n\t            });\n\t            document.body.removeChild(htable);\n\t            document.body.removeChild(ctable);\n\t        };\n\t        Grid.prototype.createTable = function (table, tag, type) {\n\t            var myTableDiv = ej2_base_3.createElement('div');\n\t            myTableDiv.className = this.element.className;\n\t            myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n\t            var mySubDiv = ej2_base_3.createElement('div');\n\t            mySubDiv.className = tag;\n\t            var myTable = ej2_base_3.createElement('table');\n\t            myTable.className = table.className;\n\t            myTable.style.cssText = 'table-layout: auto;width: auto';\n\t            var ele = (type === 'header') ? 'th' : 'td';\n\t            var myTr = ej2_base_3.createElement('tr');\n\t            var mytd = ej2_base_3.createElement(ele);\n\t            myTr.appendChild(mytd);\n\t            myTable.appendChild(myTr);\n\t            mySubDiv.appendChild(myTable);\n\t            myTableDiv.appendChild(mySubDiv);\n\t            document.body.appendChild(myTableDiv);\n\t            return myTableDiv;\n\t        };\n\t        Grid.prototype.wireEvents = function () {\n\t            ej2_base_5.EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n\t            ej2_base_5.EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n\t            ej2_base_5.EventHandler.add(this.getContent(), 'dblclick', this.dblClickHandler, this);\n\t            if (this.allowKeyboard) {\n\t                this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n\t            }\n\t            this.keyboardModule = new ej2_base_5.KeyboardEvents(this.element, {\n\t                keyAction: this.keyActionHandler.bind(this),\n\t                keyConfigs: this.keyConfigs,\n\t                eventName: 'keydown'\n\t            });\n\t        };\n\t        Grid.prototype.unwireEvents = function () {\n\t            ej2_base_5.EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n\t            ej2_base_5.EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n\t        };\n\t        Grid.prototype.addListener = function () {\n\t            var _this = this;\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.on(events.dataReady, this.dataReady, this);\n\t            this.on(events.contentReady, this.recalcIndentWidth, this);\n\t            [events.updateData, events.modelChanged, events.contentReady, events.columnWidthChanged].forEach(function (event) {\n\t                return _this.on(event, _this.refreshTooltip, _this);\n\t            });\n\t            this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n\t            this.addEventListener(events.dataBound, this.refreshMediaCol.bind(this));\n\t        };\n\t        Grid.prototype.removeListener = function () {\n\t            var _this = this;\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            this.off(events.dataReady, this.dataReady);\n\t            this.off(events.contentReady, this.recalcIndentWidth);\n\t            [events.updateData, events.modelChanged, events.contentReady, events.columnWidthChanged].forEach(function (event) {\n\t                return _this.off(event, _this.refreshTooltip);\n\t            });\n\t            this.off(events.headerRefreshed, this.recalcIndentWidth);\n\t            this.removeEventListener(events.dataBound, this.refreshMediaCol);\n\t        };\n\t        Grid.prototype.getCurrentViewRecords = function () {\n\t            return (this.allowGrouping && this.groupSettings.columns.length) ?\n\t                this.currentViewData.records : this.currentViewData;\n\t        };\n\t        Grid.prototype.mouseClickHandler = function (e) {\n\t            if (this.isChildGrid(e) || (util_1.parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n\t                this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n\t                return;\n\t            }\n\t            if (((!this.allowRowDragAndDrop && util_1.parentsUntil(e.target, 'e-gridcontent')) ||\n\t                (!(this.allowGrouping || this.allowReordering) && util_1.parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n\t                return;\n\t            }\n\t            if (util_1.parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n\t                e.preventDefault();\n\t            }\n\t            this.notify(events.click, e);\n\t        };\n\t        Grid.prototype.checkEdit = function (e) {\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            var isEdit = this.editSettings.mode !== 'batch' &&\n\t                this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n\t            return isEdit || (util_1.parentsUntil(e.target, 'e-rowcell') &&\n\t                util_1.parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell'));\n\t        };\n\t        Grid.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-grid').id !== this.element.id) {\n\t                return;\n\t            }\n\t            this.notify(events.dblclick, e);\n\t        };\n\t        Grid.prototype.focusOutHandler = function (e) {\n\t            if (this.isChildGrid(e)) {\n\t                return;\n\t            }\n\t            if (!util_1.parentsUntil(e.target, 'e-grid')) {\n\t                this.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n\t            if (filterClear) {\n\t                filterClear.classList.add('e-hide');\n\t            }\n\t        };\n\t        Grid.prototype.isChildGrid = function (e) {\n\t            var gridElement = util_1.parentsUntil(e.target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.element.id) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Grid.prototype.isDetail = function () {\n\t            return !ej2_base_2.isNullOrUndefined(this.detailTemplate) || !ej2_base_2.isNullOrUndefined(this.childGrid);\n\t        };\n\t        Grid.prototype.keyActionHandler = function (e) {\n\t            if (this.isChildGrid(e) ||\n\t                (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'tab' && e.action !== 'shiftTab')) {\n\t                return;\n\t            }\n\t            if (this.allowKeyboard) {\n\t                if (e.action === 'ctrlPlusP') {\n\t                    e.preventDefault();\n\t                    this.print();\n\t                }\n\t                this.notify(events.keyPressed, e);\n\t            }\n\t        };\n\t        Grid.prototype.setInjectedModules = function (modules) {\n\t            this.injectedModules = modules;\n\t        };\n\t        Grid.prototype.updateColumnObject = function () {\n\t            util_1.prepareColumns(this.columns, this.enableColumnVirtualization);\n\t            if (this.editSettings.allowEditing || this.editSettings.allowAdding || this.editSettings.allowDeleting) {\n\t                this.notify(events.autoCol, {});\n\t            }\n\t        };\n\t        Grid.prototype.refreshColumns = function () {\n\t            this.updateColumnObject();\n\t            this.refresh();\n\t        };\n\t        Grid.prototype.excelExport = function (exportProperties, isMultipleExport, workbook) {\n\t            return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, false);\n\t        };\n\t        Grid.prototype.csvExport = function (exportProperties, isMultipleExport, workbook) {\n\t            return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, true);\n\t        };\n\t        Grid.prototype.pdfExport = function (exportProperties, isMultipleExport, pdfDoc) {\n\t            return this.pdfExportModule.Map(this, exportProperties, isMultipleExport, pdfDoc);\n\t        };\n\t        return Grid;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], Grid.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"enableAltRow\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"enableHover\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowKeyboard\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowTextWrap\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, TextWrapSettings)\n\t    ], Grid.prototype, \"textWrapSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowPaging\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, page_settings_1.PageSettings)\n\t    ], Grid.prototype, \"pageSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"enableVirtualization\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SearchSettings)\n\t    ], Grid.prototype, \"searchSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowSorting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowExcelExport\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowPdfExport\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SortSettings)\n\t    ], Grid.prototype, \"sortSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Grid.prototype, \"allowSelection\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(-1)\n\t    ], Grid.prototype, \"selectedRowIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, SelectionSettings)\n\t    ], Grid.prototype, \"selectionSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowFiltering\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowReordering\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowResizing\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, RowDropSettings)\n\t    ], Grid.prototype, \"rowDropSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, FilterSettings)\n\t    ], Grid.prototype, \"filterSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"allowGrouping\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, GroupSettings)\n\t    ], Grid.prototype, \"groupSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Complex({}, EditSettings)\n\t    ], Grid.prototype, \"editSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Collection([], aggregate_1.AggregateRow)\n\t    ], Grid.prototype, \"aggregates\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Grid.prototype, \"showColumnChooser\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Grid.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('auto')\n\t    ], Grid.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('default')\n\t    ], Grid.prototype, \"gridLines\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"rowTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"detailTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"childGrid\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"queryString\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('allpages')\n\t    ], Grid.prototype, \"printMode\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property([])\n\t    ], Grid.prototype, \"dataSource\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"query\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"toolbar\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"toolbarTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Grid.prototype, \"pagerTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(['columns'])\n\t    ], Grid.prototype, \"deepMerge\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"created\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"destroyed\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"load\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"queryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionBegin\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"actionFailure\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"dataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowSelecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDeselecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDeselected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSelecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSelected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellDeselecting\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellDeselected\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDrag\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"columnDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"printComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforePrint\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"detailDataBound\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDragStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDrag\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"rowDrop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"toolbarClick\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"batchAdd\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"batchDelete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeBatchSave\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beginEdit\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellEdit\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"cellSave\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"resizeStart\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"onResize\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"resizeStop\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Grid.prototype, \"beforeDataBound\", void 0);\n\t    Grid = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Grid);\n\t    exports.Grid = Grid;\n\t    Grid.Inject(selection_1.Selection);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ServiceLocator = (function () {\n\t        function ServiceLocator() {\n\t            this.services = {};\n\t        }\n\t        ServiceLocator.prototype.register = function (name, type) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                this.services[name] = type;\n\t            }\n\t        };\n\t        ServiceLocator.prototype.getService = function (name) {\n\t            if (ej2_base_1.isNullOrUndefined(this.services[name])) {\n\t                throw \"The service \" + name + \" is not registered\";\n\t            }\n\t            return this.services[name];\n\t        };\n\t        return ServiceLocator;\n\t    }());\n\t    exports.ServiceLocator = ServiceLocator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, column_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    function doesImplementInterface(target, checkFor) {\n\t        return target.prototype && checkFor in target.prototype;\n\t    }\n\t    exports.doesImplementInterface = doesImplementInterface;\n\t    function valueAccessor(field, data, column) {\n\t        field = ej2_base_2.isNullOrUndefined(field) ? '' : field;\n\t        return ej2_base_2.getValue(field, data);\n\t    }\n\t    exports.valueAccessor = valueAccessor;\n\t    function getUpdateUsingRaf(updateFunction, callBack) {\n\t        requestAnimationFrame(function () {\n\t            try {\n\t                callBack(null, updateFunction());\n\t            }\n\t            catch (e) {\n\t                callBack(e);\n\t            }\n\t        });\n\t    }\n\t    exports.getUpdateUsingRaf = getUpdateUsingRaf;\n\t    function iterateArrayOrObject(collection, predicate) {\n\t        var result = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            var pred = predicate(collection[i], i);\n\t            if (!ej2_base_2.isNullOrUndefined(pred)) {\n\t                result.push(pred);\n\t            }\n\t        }\n\t        return result;\n\t    }\n\t    exports.iterateArrayOrObject = iterateArrayOrObject;\n\t    function templateCompiler(template) {\n\t        if (template) {\n\t            var e = void 0;\n\t            try {\n\t                if (document.querySelectorAll(template).length) {\n\t                    return ej2_base_1.compile(document.querySelector(template).innerHTML.trim());\n\t                }\n\t            }\n\t            catch (e) {\n\t                return ej2_base_1.compile(template);\n\t            }\n\t        }\n\t        return undefined;\n\t    }\n\t    exports.templateCompiler = templateCompiler;\n\t    function setStyleAndAttributes(node, customAttributes) {\n\t        var copyAttr = {};\n\t        var literals = ['style', 'class'];\n\t        ej2_base_2.extend(copyAttr, customAttributes, {});\n\t        if ('style' in copyAttr) {\n\t            ej2_base_3.setStyleAttribute(node, copyAttr[literals[0]]);\n\t            delete copyAttr[literals[0]];\n\t        }\n\t        if ('class' in copyAttr) {\n\t            ej2_base_3.addClass([node], copyAttr[literals[1]]);\n\t            delete copyAttr[literals[1]];\n\t        }\n\t        ej2_base_3.attributes(node, copyAttr);\n\t    }\n\t    exports.setStyleAndAttributes = setStyleAndAttributes;\n\t    function extend(copied, first, second, exclude) {\n\t        var moved = ej2_base_2.extend(copied, first, second);\n\t        Object.keys(moved).forEach(function (value, index) {\n\t            if (exclude.indexOf(value) !== -1) {\n\t                delete moved[value];\n\t            }\n\t        });\n\t        return moved;\n\t    }\n\t    exports.extend = extend;\n\t    function prepareColumns(columns, autoWidth) {\n\t        for (var c = 0, len = columns.length; c < len; c++) {\n\t            var column = void 0;\n\t            if (typeof columns[c] === 'string') {\n\t                column = new column_1.Column({ field: columns[c] });\n\t            }\n\t            else if (!(columns[c] instanceof column_1.Column)) {\n\t                if (!columns[c].columns) {\n\t                    column = new column_1.Column(columns[c]);\n\t                }\n\t                else {\n\t                    column = new column_1.Column(columns[c]);\n\t                    columns[c].columns = prepareColumns(columns[c].columns);\n\t                }\n\t            }\n\t            else {\n\t                column = columns[c];\n\t            }\n\t            column.headerText = ej2_base_2.isNullOrUndefined(column.headerText) ? column.field || '' : column.headerText;\n\t            column.valueAccessor = column.valueAccessor || valueAccessor;\n\t            column.width = autoWidth && ej2_base_2.isNullOrUndefined(column.width) ? 200 : column.width;\n\t            if (ej2_base_2.isNullOrUndefined(column.visible)) {\n\t                column.visible = true;\n\t            }\n\t            columns[c] = column;\n\t        }\n\t        return columns;\n\t    }\n\t    exports.prepareColumns = prepareColumns;\n\t    function setCssInGridPopUp(popUp, e, className) {\n\t        var popUpSpan = popUp.querySelector('span');\n\t        var position = popUp.parentElement.getBoundingClientRect();\n\t        var targetPosition = e.target.getBoundingClientRect();\n\t        var isBottomTail;\n\t        popUpSpan.className = className;\n\t        popUp.style.display = '';\n\t        isBottomTail = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY) > popUp.offsetHeight + 10;\n\t        popUp.style.top = targetPosition.top - position.top +\n\t            (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px';\n\t        popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n\t        if (isBottomTail) {\n\t            popUp.querySelector('.e-downtail').style.display = '';\n\t            popUp.querySelector('.e-uptail').style.display = 'none';\n\t        }\n\t        else {\n\t            popUp.querySelector('.e-downtail').style.display = 'none';\n\t            popUp.querySelector('.e-uptail').style.display = '';\n\t        }\n\t    }\n\t    exports.setCssInGridPopUp = setCssInGridPopUp;\n\t    function getPopupLeftPosition(popup, e, targetPosition, left) {\n\t        var width = popup.offsetWidth / 2;\n\t        var x = getPosition(e).x;\n\t        if (x - targetPosition.left < width) {\n\t            return targetPosition.left - left;\n\t        }\n\t        else if (targetPosition.right - x < width) {\n\t            return targetPosition.right - left - width * 2;\n\t        }\n\t        else {\n\t            return x - left - width;\n\t        }\n\t    }\n\t    function getActualProperties(obj) {\n\t        if (obj instanceof ej2_base_1.ChildProperty) {\n\t            return ej2_base_2.getValue('properties', obj);\n\t        }\n\t        else {\n\t            return obj;\n\t        }\n\t    }\n\t    exports.getActualProperties = getActualProperties;\n\t    function parentsUntil(elem, selector, isID) {\n\t        var parent = elem;\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                break;\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parent;\n\t    }\n\t    exports.parentsUntil = parentsUntil;\n\t    function getElementIndex(element, elements) {\n\t        var index = -1;\n\t        for (var i = 0, len = elements.length; i < len; i++) {\n\t            if (elements[i].isEqualNode(element)) {\n\t                index = i;\n\t                break;\n\t            }\n\t        }\n\t        return index;\n\t    }\n\t    exports.getElementIndex = getElementIndex;\n\t    function inArray(value, collection) {\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i] === value) {\n\t                return i;\n\t            }\n\t        }\n\t        return -1;\n\t    }\n\t    exports.inArray = inArray;\n\t    function getActualPropFromColl(collection) {\n\t        var coll = [];\n\t        for (var i = 0, len = collection.length; i < len; i++) {\n\t            if (collection[i].hasOwnProperty('properties')) {\n\t                coll.push(collection[i].properties);\n\t            }\n\t            else {\n\t                coll.push(collection[i]);\n\t            }\n\t        }\n\t        return coll;\n\t    }\n\t    exports.getActualPropFromColl = getActualPropFromColl;\n\t    function removeElement(target, selector) {\n\t        var elements = [].slice.call(target.querySelectorAll(selector));\n\t        for (var i = 0; i < elements.length; i++) {\n\t            ej2_base_3.remove(elements[i]);\n\t        }\n\t    }\n\t    exports.removeElement = removeElement;\n\t    function getPosition(e) {\n\t        var position = {};\n\t        position.x = (ej2_base_2.isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n\t            e.clientX);\n\t        position.y = (ej2_base_2.isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n\t            e.clientY);\n\t        return position;\n\t    }\n\t    exports.getPosition = getPosition;\n\t    var uid = 0;\n\t    function getUid(prefix) {\n\t        return prefix + uid++;\n\t    }\n\t    exports.getUid = getUid;\n\t    function appendChildren(elem, children) {\n\t        for (var i = 0, len = children.length; i < len; i++) {\n\t            if (len === children.length) {\n\t                elem.appendChild(children[i]);\n\t            }\n\t            else {\n\t                elem.appendChild(children[0]);\n\t            }\n\t        }\n\t        return elem;\n\t    }\n\t    exports.appendChildren = appendChildren;\n\t    function parents(elem, selector, isID) {\n\t        var parent = elem;\n\t        var parents = [];\n\t        while (parent) {\n\t            if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n\t                parents.push(parent);\n\t            }\n\t            parent = parent.parentElement;\n\t        }\n\t        return parents;\n\t    }\n\t    exports.parents = parents;\n\t    function calculateAggregate(type, data, column, context) {\n\t        if (type === 'custom') {\n\t            return column.customAggregate ? column.customAggregate.call(context, data, column) : '';\n\t        }\n\t        return ej2_data_1.DataUtil.aggregates[type](data, column.field);\n\t    }\n\t    exports.calculateAggregate = calculateAggregate;\n\t    var scrollWidth = null;\n\t    function getScrollBarWidth() {\n\t        if (scrollWidth !== null) {\n\t            return scrollWidth;\n\t        }\n\t        var divNode = document.createElement('div');\n\t        var value = 0;\n\t        divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n\t        document.body.appendChild(divNode);\n\t        value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n\t        document.body.removeChild(divNode);\n\t        return scrollWidth = value;\n\t    }\n\t    exports.getScrollBarWidth = getScrollBarWidth;\n\t    var rowHeight;\n\t    function getRowHeight(element) {\n\t        if (rowHeight !== undefined) {\n\t            return rowHeight;\n\t        }\n\t        var table = ej2_base_3.createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n\t        table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n\t        element.appendChild(table);\n\t        var rect = table.querySelector('td').getBoundingClientRect();\n\t        element.removeChild(table);\n\t        rowHeight = Math.ceil(rect.height);\n\t        return rowHeight;\n\t    }\n\t    exports.getRowHeight = getRowHeight;\n\t    function isEditable(col, type, elem) {\n\t        var row = parentsUntil(elem, 'e-row');\n\t        var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n\t        if (type === 'beginEdit' && isOldRow) {\n\t            if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t        else {\n\t            if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t    }\n\t    exports.isEditable = isEditable;\n\t    function isActionPrevent(inst) {\n\t        var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n\t        return inst.editSettings.mode === 'batch' &&\n\t            (inst.element.querySelectorAll('.e-updatedtd').length) &&\n\t            (dlg ? dlg.classList.contains('e-popup-close') : true);\n\t    }\n\t    exports.isActionPrevent = isActionPrevent;\n\t    function wrap(elem, action) {\n\t        var clName = 'e-wrap';\n\t        elem = elem instanceof Array ? elem : [elem];\n\t        for (var i = 0; i < elem.length; i++) {\n\t            action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n\t        }\n\t    }\n\t    exports.wrap = wrap;\n\t    function changeButtonType(target) {\n\t        var elements = [].slice.call(target.querySelectorAll('button'));\n\t        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t            var button = elements_1[_i];\n\t            ej2_base_3.attributes(button, { type: 'button' });\n\t        }\n\t    }\n\t    exports.changeButtonType = changeButtonType;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(10), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, value_formatter_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Column = (function () {\n\t        function Column(options) {\n\t            this.allowSorting = true;\n\t            this.allowResizing = true;\n\t            this.allowFiltering = true;\n\t            this.allowGrouping = true;\n\t            this.allowEditing = true;\n\t            this.showInColumnChooser = true;\n\t            ej2_base_1.merge(this, options);\n\t            this.uid = util_1.getUid('grid-column');\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (options.format && (options.format.skeleton || options.format.format)) {\n\t                this.setFormatter(valueFormatter.getFormatFunction(options.format));\n\t                this.setParser(valueFormatter.getParserFunction(options.format));\n\t            }\n\t            if (!this.field) {\n\t                this.allowFiltering = false;\n\t                this.allowGrouping = false;\n\t                this.allowSorting = false;\n\t            }\n\t            if (this.template) {\n\t                this.templateFn = util_1.templateCompiler(this.template);\n\t            }\n\t        }\n\t        Column.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        Column.prototype.setFormatter = function (value) {\n\t            this.formatFn = value;\n\t        };\n\t        Column.prototype.getParser = function () {\n\t            return this.parserFn;\n\t        };\n\t        Column.prototype.setParser = function (value) {\n\t            this.parserFn = value;\n\t        };\n\t        Column.prototype.getColumnTemplate = function () {\n\t            return this.templateFn;\n\t        };\n\t        Column.prototype.getDomSetter = function () {\n\t            return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n\t        };\n\t        return Column;\n\t    }());\n\t    exports.Column = Column;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ValueFormatter = (function () {\n\t        function ValueFormatter(cultureName) {\n\t            this.intl = new ej2_base_2.Internationalization();\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                this.intl.culture = cultureName;\n\t            }\n\t        }\n\t        ValueFormatter.prototype.getFormatFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateFormat(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberFormat(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.getParserFunction = function (format) {\n\t            if (format.type) {\n\t                return this.intl.getDateParser(format);\n\t            }\n\t            else {\n\t                return this.intl.getNumberParser(format);\n\t            }\n\t        };\n\t        ValueFormatter.prototype.fromView = function (value, format, type) {\n\t            if (type === 'date' || type === 'datetime' || type === 'number') {\n\t                return format(value);\n\t            }\n\t            else {\n\t                return value;\n\t            }\n\t        };\n\t        ValueFormatter.prototype.toView = function (value, format) {\n\t            var result = value;\n\t            if (!ej2_base_1.isNullOrUndefined(format) && !ej2_base_1.isNullOrUndefined(value)) {\n\t                result = format(value);\n\t            }\n\t            return result;\n\t        };\n\t        ValueFormatter.prototype.setCulture = function (cultureName) {\n\t            if (!ej2_base_1.isNullOrUndefined(cultureName)) {\n\t                ej2_base_2.setCulture(cultureName);\n\t            }\n\t        };\n\t        return ValueFormatter;\n\t    }());\n\t    exports.ValueFormatter = ValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.created = 'create';\n\t    exports.destroyed = 'destroy';\n\t    exports.load = 'load';\n\t    exports.rowDataBound = 'rowDataBound';\n\t    exports.queryCellInfo = 'queryCellInfo';\n\t    exports.actionBegin = 'actionBegin';\n\t    exports.actionComplete = 'actionComplete';\n\t    exports.actionFailure = 'actionFailure';\n\t    exports.dataBound = 'dataBound';\n\t    exports.rowSelecting = 'rowSelecting';\n\t    exports.rowSelected = 'rowSelected';\n\t    exports.rowDeselecting = 'rowDeselecting';\n\t    exports.rowDeselected = 'rowDeselected';\n\t    exports.cellSelecting = 'cellSelecting';\n\t    exports.cellSelected = 'cellSelected';\n\t    exports.cellDeselecting = 'cellDeselecting';\n\t    exports.cellDeselected = 'cellDeselected';\n\t    exports.columnDragStart = 'columnDragStart';\n\t    exports.columnDrag = 'columnDrag';\n\t    exports.columnDrop = 'columnDrop';\n\t    exports.rowDragStart = 'rowDragStart';\n\t    exports.rowDrag = 'rowDrag';\n\t    exports.rowDrop = 'rowDrop';\n\t    exports.beforePrint = 'beforePrint';\n\t    exports.printComplete = 'printComplete';\n\t    exports.detailDataBound = 'detailDataBound';\n\t    exports.toolbarClick = 'toolbarClick';\n\t    exports.batchAdd = 'batchAdd';\n\t    exports.batchDelete = 'batchDelete';\n\t    exports.beforeBatchAdd = 'beforeBatchAdd';\n\t    exports.beforeBatchDelete = 'beforeBatchDelete';\n\t    exports.beforeBatchSave = 'beforeBatchSave';\n\t    exports.beginEdit = 'beginEdit';\n\t    exports.cellEdit = 'cellEdit';\n\t    exports.cellSave = 'cellSave';\n\t    exports.endAdd = 'endAdd';\n\t    exports.endDelete = 'endDelete';\n\t    exports.endEdit = 'endEdit';\n\t    exports.recordDoubleClick = 'recordDoubleClick';\n\t    exports.recordClick = 'recordClick';\n\t    exports.beforeDataBound = 'beforeDataBound';\n\t    exports.beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n\t    exports.resizeStart = 'resizeStart';\n\t    exports.onResize = 'onResize';\n\t    exports.resizeStop = 'resizeStop';\n\t    exports.initialLoad = 'initial-load';\n\t    exports.initialEnd = 'initial-end';\n\t    exports.dataReady = 'data-ready';\n\t    exports.contentReady = 'content-ready';\n\t    exports.uiUpdate = 'ui-update';\n\t    exports.inBoundModelChanged = 'inbound-model-changed';\n\t    exports.modelChanged = 'model-changed';\n\t    exports.colGroupRefresh = 'colgroup-refresh';\n\t    exports.headerRefreshed = 'header-refreshed';\n\t    exports.pageBegin = 'paging-begin';\n\t    exports.pageComplete = 'paging-complete';\n\t    exports.sortBegin = 'sorting-begin';\n\t    exports.sortComplete = 'sorting-complete';\n\t    exports.filterBegin = 'filtering-begin';\n\t    exports.filterComplete = 'filtering-complete';\n\t    exports.searchBegin = 'searching-begin';\n\t    exports.searchComplete = 'searching-complete';\n\t    exports.reorderBegin = 'reorder-begin';\n\t    exports.reorderComplete = 'reorder-complete';\n\t    exports.rowDragAndDropBegin = 'rowdraganddrop-begin';\n\t    exports.rowDragAndDropComplete = 'rowdraganddrop-complete';\n\t    exports.groupBegin = 'grouping-begin';\n\t    exports.groupComplete = 'grouping-complete';\n\t    exports.ungroupBegin = 'ungrouping-begin';\n\t    exports.ungroupComplete = 'ungrouping-complete';\n\t    exports.rowSelectionBegin = 'rowselecting';\n\t    exports.rowSelectionComplete = 'rowselected';\n\t    exports.columnSelectionBegin = 'columnselecting';\n\t    exports.columnSelectionComplete = 'columnselected';\n\t    exports.cellSelectionBegin = 'cellselecting';\n\t    exports.cellSelectionComplete = 'cellselected';\n\t    exports.keyPressed = 'key-pressed';\n\t    exports.click = 'click';\n\t    exports.destroy = 'destroy';\n\t    exports.columnVisibilityChanged = 'column-visible-changed';\n\t    exports.scroll = 'scroll';\n\t    exports.columnWidthChanged = 'column-width-changed';\n\t    exports.columnPositionChanged = 'column-position-changed';\n\t    exports.rowDragAndDrop = 'row-drag-and-drop';\n\t    exports.rowsAdded = 'rows-added';\n\t    exports.rowsRemoved = 'rows-removed';\n\t    exports.columnDragStop = 'column-drag-stop';\n\t    exports.headerDrop = 'header-drop';\n\t    exports.dataSourceModified = 'datasource-modified';\n\t    exports.refreshComplete = 'refresh-complete';\n\t    exports.refreshVirtualBlock = 'refresh-virtual-block';\n\t    exports.dblclick = 'dblclick';\n\t    exports.toolbarRefresh = 'toolbar-refresh';\n\t    exports.bulkSave = 'bulk-save';\n\t    exports.autoCol = 'auto-col';\n\t    exports.tooltipDestroy = 'tooltip-destroy';\n\t    exports.updateData = 'update-data';\n\t    exports.editBegin = 'edit-begin';\n\t    exports.editComplete = 'edit-complete';\n\t    exports.addBegin = 'add-begin';\n\t    exports.addComplete = 'add-complete';\n\t    exports.saveComplete = 'save-complete';\n\t    exports.deleteBegin = 'delete-begin';\n\t    exports.deleteComplete = 'delete-complete';\n\t    exports.preventBatch = 'prevent-batch';\n\t    exports.dialogDestroy = 'dialog-destroy';\n\t    exports.crudAction = 'crud-Action';\n\t    exports.addDeleteAction = 'add-delete-Action';\n\t    exports.destroyForm = 'destroy-form';\n\t    exports.doubleTap = 'double-tap';\n\t    exports.beforeExcelExport = 'beforeExcelExport';\n\t    exports.excelExportComplete = 'excelExportComplete';\n\t    exports.excelQueryCellInfo = 'excelQueryCellInfo';\n\t    exports.beforePdfExport = 'beforePdfExport';\n\t    exports.pdfExportComplete = 'pdfExportComplete';\n\t    exports.pdfQueryCellInfo = 'pdfQueryCellInfo';\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(15), __webpack_require__(18), __webpack_require__(11), __webpack_require__(7), __webpack_require__(19), __webpack_require__(13), __webpack_require__(23), __webpack_require__(24), __webpack_require__(26), __webpack_require__(27), __webpack_require__(28), __webpack_require__(29), __webpack_require__(30), __webpack_require__(31), __webpack_require__(32)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_data_1, enum_1, data_1, events, util_1, content_renderer_1, header_renderer_1, cell_renderer_1, header_cell_renderer_1, stacked_cell_renderer_1, indent_cell_renderer_1, caption_cell_renderer_1, expand_cell_renderer_1, header_indent_renderer_1, detail_header_indent_renderer_1, detail_expand_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Render = (function () {\n\t        function Render(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.data = new data_1.Data(parent);\n\t            this.l10n = locator.getService('localization');\n\t            this.ariaService = this.locator.getService('ariaService');\n\t            this.renderer = this.locator.getService('rendererFactory');\n\t            this.addEventListener();\n\t        }\n\t        Render.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            this.headerRenderer = this.renderer.getRenderer(enum_1.RenderType.Header);\n\t            this.contentRenderer = this.renderer.getRenderer(enum_1.RenderType.Content);\n\t            this.headerRenderer.renderPanel();\n\t            this.contentRenderer.renderPanel();\n\t            if (gObj.getColumns().length) {\n\t                this.headerRenderer.renderTable();\n\t                this.contentRenderer.renderTable();\n\t                this.emptyRow(false);\n\t            }\n\t            this.refreshDataManager();\n\t        };\n\t        Render.prototype.refresh = function (e) {\n\t            if (e === void 0) { e = { requestType: 'refresh' }; }\n\t            this.parent.notify(e.requestType + \"-begin\", e);\n\t            this.parent.trigger(events.actionBegin, e);\n\t            if (e.cancel) {\n\t                return;\n\t            }\n\t            this.refreshDataManager(e);\n\t        };\n\t        Render.prototype.refreshComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, e);\n\t        };\n\t        Render.prototype.refreshDataManager = function (args) {\n\t            var _this = this;\n\t            if (args === void 0) { args = {}; }\n\t            if (args.requestType !== 'virtualscroll') {\n\t                this.parent.showSpinner();\n\t            }\n\t            var ready = this.data.dataManager.ready;\n\t            this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n\t            var dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n\t            if (!ready) {\n\t                if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n\t                    dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n\t                }\n\t                dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dataManagerFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.sendBulkRequest = function (args) {\n\t            var _this = this;\n\t            var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0]);\n\t            if (this.data.dataManager.dataSource.offline) {\n\t                this.refreshDataManager({ requestType: 'batchsave' });\n\t                return;\n\t            }\n\t            else {\n\t                promise.then(function (e) { return _this.dmSuccess(e, args); })\n\t                    .catch(function (e) { return _this.dmFailure(e); });\n\t            }\n\t        };\n\t        Render.prototype.dmSuccess = function (e, args) {\n\t            this.dataManagerSuccess(e, args);\n\t        };\n\t        Render.prototype.dmFailure = function (e) {\n\t            this.dataManagerFailure(e);\n\t        };\n\t        Render.prototype.renderEmptyRow = function () {\n\t            this.emptyRow(true);\n\t        };\n\t        Render.prototype.emptyRow = function (isTrigger) {\n\t            var gObj = this.parent;\n\t            var tbody = this.contentRenderer.getTable().querySelector('tbody');\n\t            var tr;\n\t            ej2_base_1.remove(tbody);\n\t            tbody = ej2_base_1.createElement('tbody');\n\t            tr = ej2_base_1.createElement('tr', { className: 'e-emptyrow' });\n\t            tr.appendChild(ej2_base_1.createElement('td', {\n\t                innerHTML: this.l10n.getConstant('EmptyRecord'),\n\t                attrs: { colspan: gObj.getColumns().length.toString() }\n\t            }));\n\t            tbody.appendChild(tr);\n\t            this.contentRenderer.renderEmpty(tbody);\n\t            if (isTrigger) {\n\t                this.parent.trigger(events.dataBound, {});\n\t            }\n\t        };\n\t        Render.prototype.updateColumnType = function (record) {\n\t            var columns = this.parent.getColumns();\n\t            var value;\n\t            var data = record && record.items ? record.items[0] : record;\n\t            var fmtr = this.locator.getService('valueFormatter');\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                value = ej2_base_2.getValue(columns[i].field || '', data);\n\t                if (!ej2_base_2.isNullOrUndefined(value)) {\n\t                    this.isColTypeDef = true;\n\t                    if (!columns[i].type) {\n\t                        columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n\t                            value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n\t                    }\n\t                    if (typeof (columns[i].format) === 'string') {\n\t                        switch (columns[i].type) {\n\t                            case 'date':\n\t                                columns[i].setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: columns[i].format }));\n\t                                columns[i].setParser(fmtr.getParserFunction({ type: 'date', skeleton: columns[i].format }));\n\t                                break;\n\t                            case 'datetime':\n\t                                columns[i].setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: columns[i].format }));\n\t                                columns[i].setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: columns[i].format }));\n\t                                break;\n\t                            case 'number':\n\t                                columns[i].setFormatter(fmtr.getFormatFunction({ format: columns[i].format }));\n\t                                columns[i].setParser(fmtr.getParserFunction({ format: columns[i].format }));\n\t                                break;\n\t                        }\n\t                    }\n\t                    else if (!columns[i].format && columns[i].type === 'number') {\n\t                        columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n\t                    }\n\t                }\n\t                else {\n\t                    columns[i].type = columns[i].type || null;\n\t                }\n\t            }\n\t        };\n\t        Render.prototype.dataManagerSuccess = function (e, args) {\n\t            var gObj = this.parent;\n\t            gObj.trigger(events.beforeDataBound, e);\n\t            var len = Object.keys(e.result).length;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            gObj.currentViewData = e.result;\n\t            if (!len && e.count && gObj.allowPaging) {\n\t                gObj.pageSettings.currentPage = Math.ceil(e.count / gObj.pageSettings.pageSize);\n\t                gObj.dataBind();\n\t                return;\n\t            }\n\t            if (!gObj.getColumns().length && len) {\n\t                this.updatesOnInitialRender(e);\n\t            }\n\t            if (!this.isColTypeDef) {\n\t                this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n\t            }\n\t            this.parent.notify(events.dataReady, ej2_base_2.extend({ count: e.count, result: e.result, aggregates: e.aggregates }, args));\n\t            if (gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping')) {\n\t                this.headerRenderer.refreshUI();\n\t            }\n\t            if (len) {\n\t                this.contentRenderer.refreshContentRows(args);\n\t            }\n\t            else {\n\t                if (!gObj.getColumns().length) {\n\t                    gObj.element.innerHTML = '';\n\t                    alert(this.l10n.getConstant('EmptyDataSourceError'));\n\t                    return;\n\t                }\n\t                this.contentRenderer.setRowElements([]);\n\t                this.renderEmptyRow();\n\t                if (args) {\n\t                    var action = (args.requestType || '').toLowerCase() + '-complete';\n\t                    this.parent.notify(action, args);\n\t                }\n\t                this.parent.hideSpinner();\n\t            }\n\t        };\n\t        Render.prototype.dataManagerFailure = function (e) {\n\t            this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n\t            this.parent.trigger(events.actionFailure, { error: e });\n\t            this.parent.currentViewData = [];\n\t            this.renderEmptyRow();\n\t            this.parent.hideSpinner();\n\t        };\n\t        Render.prototype.updatesOnInitialRender = function (e) {\n\t            this.buildColumns(e.result[0]);\n\t            util_1.prepareColumns(this.parent.columns);\n\t            this.headerRenderer.renderTable();\n\t            this.contentRenderer.renderTable();\n\t            this.parent.notify(events.autoCol, {});\n\t        };\n\t        Render.prototype.buildColumns = function (record) {\n\t            var columns = Object.keys(record);\n\t            var cols = [];\n\t            for (var i = 0, len = columns.length; i < len; i++) {\n\t                cols[i] = { 'field': columns[i] };\n\t                if (this.parent.enableColumnVirtualization) {\n\t                    cols[i].width = !ej2_base_2.isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n\t                }\n\t            }\n\t            this.parent.columns = cols;\n\t        };\n\t        Render.prototype.instantiateRenderer = function () {\n\t            this.renderer.addRenderer(enum_1.RenderType.Header, new header_renderer_1.HeaderRender(this.parent, this.locator));\n\t            this.renderer.addRenderer(enum_1.RenderType.Content, new content_renderer_1.ContentRender(this.parent, this.locator));\n\t            var cellrender = this.locator.getService('cellRendererFactory');\n\t            cellrender.addCellRenderer(enum_1.CellType.Header, new header_cell_renderer_1.HeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Data, new cell_renderer_1.CellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Indent, new indent_cell_renderer_1.IndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaption, new caption_cell_renderer_1.GroupCaptionCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.GroupCaptionEmpty, new caption_cell_renderer_1.GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.Expand, new expand_cell_renderer_1.ExpandCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.HeaderIndent, new header_indent_renderer_1.HeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.StackedHeader, new stacked_cell_renderer_1.StackedHeaderCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailHeader, new detail_header_indent_renderer_1.DetailHeaderIndentCellRenderer(this.parent, this.locator));\n\t            cellrender.addCellRenderer(enum_1.CellType.DetailExpand, new detail_expand_cell_renderer_1.DetailExpandCellRenderer(this.parent, this.locator));\n\t        };\n\t        Render.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.modelChanged, this.refresh, this);\n\t            this.parent.on(events.refreshComplete, this.refreshComplete, this);\n\t            this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n\t        };\n\t        Render.prototype.validateGroupRecords = function (e) {\n\t            var _this = this;\n\t            var index = e.result.length - 1;\n\t            if (index < 0) {\n\t                return Promise.resolve(e);\n\t            }\n\t            var group0 = e.result[0];\n\t            var groupN = e.result[index];\n\t            var predicate = [];\n\t            var addWhere = function (input) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return predicate.push(new ej2_data_1.Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n\t                });\n\t                input.where(ej2_data_1.Predicate.or(predicate));\n\t            };\n\t            var query = new ej2_data_1.Query();\n\t            addWhere(query);\n\t            var curDm = new ej2_data_1.DataManager(e.result);\n\t            var curFilter = curDm.executeLocal(query);\n\t            var newQuery = this.data.generateQuery(true);\n\t            var rPredicate = [];\n\t            if (this.data.isRemote()) {\n\t                [group0, groupN].forEach(function (group) {\n\t                    return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n\t                });\n\t                newQuery.where(ej2_data_1.Predicate.or(rPredicate));\n\t            }\n\t            else {\n\t                addWhere(newQuery);\n\t            }\n\t            var deferred = new ej2_data_1.Deferred();\n\t            this.data.getData({}, newQuery).then(function (r) {\n\t                _this.updateGroupInfo(curFilter, r.result);\n\t                deferred.resolve(e);\n\t            });\n\t            return deferred.promise;\n\t        };\n\t        Render.prototype.getPredicate = function (key, operator, value) {\n\t            if (value instanceof Date) {\n\t                return this.data.getDatePredicate({ field: key, operator: operator, value: value });\n\t            }\n\t            return new ej2_data_1.Predicate(key, operator, value);\n\t        };\n\t        Render.prototype.updateGroupInfo = function (current, untouched) {\n\t            var _this = this;\n\t            var dm = new ej2_data_1.DataManager(untouched);\n\t            current.forEach(function (element, index, array) {\n\t                var uGroup = dm.executeLocal(new ej2_data_1.Query()\n\t                    .where(new ej2_data_1.Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n\t                element.count = uGroup.count;\n\t                var itemGroup = element.items;\n\t                var uGroupItem = uGroup.items;\n\t                if (itemGroup.GroupGuid) {\n\t                    element.items = _this.updateGroupInfo(element.items, uGroup.items);\n\t                }\n\t                _this.parent.aggregates.forEach(function (row) {\n\t                    return row.columns.forEach(function (column) {\n\t                        var types = column.type instanceof Array ? column.type : [column.type];\n\t                        types.forEach(function (type) {\n\t                            var key = column.field + ' - ' + type;\n\t                            element.aggregates[key] = util_1.calculateAggregate(type, itemGroup.level ? uGroupItem.records : uGroup.items, column);\n\t                        });\n\t                    });\n\t                });\n\t            });\n\t            return current;\n\t        };\n\t        return Render;\n\t    }());\n\t    exports.Render = Render;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(15), __webpack_require__(14), __webpack_require__(16), __webpack_require__(17), __webpack_require__(11), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, enum_1, row_renderer_1, cell_1, row_1, events, ej2_base_4, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderRender = (function () {\n\t        function HeaderRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (!(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_2.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-headercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-headercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                var height = element.offsetHeight;\n\t                var headercelldiv = element.querySelector('.e-headercelldiv');\n\t                visualElement.textContent = headercelldiv ?\n\t                    gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid')).headerText : element.innerHTML;\n\t                visualElement.style.width = element.offsetWidth + 'px';\n\t                visualElement.style.height = element.offsetHeight + 'px';\n\t                visualElement.style.lineHeight = (height - 6).toString() + 'px';\n\t                if (element.querySelector('.e-headercelldiv')) {\n\t                    _this.column = gObj.getColumnByUid(element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\t                    visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                }\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.target;\n\t                if (target) {\n\t                    var closest = ej2_base_2.closest(target, '.e-grid');\n\t                    var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                    if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n\t                        ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                        if (gObj.allowReordering) {\n\t                            gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n\t                            gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n\t                        }\n\t                        return;\n\t                    }\n\t                    gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                var cancel;\n\t                gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                if ((!util_1.parentsUntil(e.target, 'e-headercell') && !util_1.parentsUntil(e.target, 'e-groupdroparea')) ||\n\t                    (!gObj.allowReordering && util_1.parentsUntil(e.target, 'e-headercell')) ||\n\t                    (!e.helper.getAttribute('e-mappinguid') && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    cancel = true;\n\t                }\n\t                gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var uid = e.droppedElement.getAttribute('e-mappinguid');\n\t                var closest = ej2_base_2.closest(e.target, '.e-grid');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n\t                    !(gObj.allowReordering || gObj.allowGrouping)) {\n\t                    return;\n\t                }\n\t                gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.widthService = this.serviceLocator.getService('widthService');\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.columnPositionChanged, this.refreshUI, this);\n\t        }\n\t        HeaderRender.prototype.renderPanel = function () {\n\t            var div = ej2_base_2.createElement('div', { className: 'e-gridheader' });\n\t            var innerDiv = ej2_base_2.createElement('div', { className: 'e-headercontent' });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            this.parent.element.appendChild(div);\n\t        };\n\t        HeaderRender.prototype.renderTable = function () {\n\t            var headerDiv = this.getPanel();\n\t            headerDiv.appendChild(this.createHeaderTable());\n\t            this.setTable(headerDiv.querySelector('.e-table'));\n\t            this.initializeHeaderDrag();\n\t            this.initializeHeaderDrop();\n\t            this.parent.notify(events.headerRefreshed, {});\n\t        };\n\t        HeaderRender.prototype.getPanel = function () {\n\t            return this.headerPanel;\n\t        };\n\t        HeaderRender.prototype.setPanel = function (panel) {\n\t            this.headerPanel = panel;\n\t        };\n\t        HeaderRender.prototype.getTable = function () {\n\t            return this.headerTable;\n\t        };\n\t        HeaderRender.prototype.setTable = function (table) {\n\t            this.headerTable = table;\n\t        };\n\t        HeaderRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        HeaderRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        HeaderRender.prototype.getRows = function () {\n\t            var table = this.getTable();\n\t            return table.tHead.rows;\n\t        };\n\t        HeaderRender.prototype.createHeaderTable = function () {\n\t            var table = this.createTable();\n\t            var innerDiv = this.getPanel().firstChild;\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        HeaderRender.prototype.createTable = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var table = ej2_base_2.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var findHeaderRow = this.createHeaderContent();\n\t            var thead = findHeaderRow.thead;\n\t            var tbody = ej2_base_2.createElement('tbody', { className: 'e-hide' });\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var rowBody = ej2_base_2.createElement('tr');\n\t            var bodyCell;\n\t            var rows = findHeaderRow.rows;\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n\t                    var cell = rows[i].cells[j];\n\t                    bodyCell = ej2_base_2.createElement('td');\n\t                    rowBody.appendChild(bodyCell);\n\t                }\n\t            }\n\t            if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n\t                table.classList.add('e-sortfilter');\n\t            }\n\t            this.updateColGroup(colGroup);\n\t            tbody.appendChild(rowBody);\n\t            table.appendChild(this.setColGroup(colGroup));\n\t            table.appendChild(thead);\n\t            table.appendChild(tbody);\n\t            this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n\t            return table;\n\t        };\n\t        HeaderRender.prototype.createHeaderContent = function () {\n\t            var gObj = this.parent;\n\t            var columns = gObj.getColumns();\n\t            var thead = ej2_base_2.createElement('thead');\n\t            var colHeader = ej2_base_2.createElement('tr', { className: 'e-columnheader' });\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Header);\n\t            rowRenderer.element = colHeader;\n\t            var rows = [];\n\t            var headerRow;\n\t            this.colDepth = this.getObjDepth();\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                rows[i] = this.generateRow(i);\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.ensureColumns(rows);\n\t            rows = this.getHeaderCells(rows);\n\t            for (var i = 0, len = this.colDepth; i < len; i++) {\n\t                headerRow = rowRenderer.render(rows[i], columns);\n\t                thead.appendChild(headerRow);\n\t            }\n\t            var findHeaderRow = {\n\t                thead: thead,\n\t                rows: rows\n\t            };\n\t            return findHeaderRow;\n\t        };\n\t        HeaderRender.prototype.updateColGroup = function (colGroup) {\n\t            var cols = this.parent.getColumns();\n\t            var col;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.allowGrouping) {\n\t                for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        continue;\n\t                    }\n\t                    col = ej2_base_2.createElement('col');\n\t                    colGroup.appendChild(col);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                col = ej2_base_2.createElement('col');\n\t                colGroup.appendChild(col);\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                col = ej2_base_2.createElement('col');\n\t                if (cols[i].visible === false) {\n\t                    ej2_base_2.setStyleAttribute(col, { 'display': 'none' });\n\t                }\n\t                colGroup.appendChild(col);\n\t            }\n\t            return colGroup;\n\t        };\n\t        HeaderRender.prototype.ensureColumns = function (rows) {\n\t            var gObj = this.parent;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gObj.allowGrouping) {\n\t                    for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n\t                        if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gObj.detailTemplate || gObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.getHeaderCells = function (rows) {\n\t            var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol) {\n\t            var lastCol = isLastCol ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                rows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCnt(cols, 0);\n\t                if (colSpan) {\n\t                    rows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol);\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        HeaderRender.prototype.generateRow = function (index) {\n\t            return new row_1.Row({});\n\t        };\n\t        HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.headerTemplate),\n\t                'rowID': '',\n\t                'column': column,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': colIndex\n\t            };\n\t            if (!opt.rowSpan || opt.rowSpan < 2) {\n\t                delete opt.rowSpan;\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        HeaderRender.prototype.setVisible = function (columns) {\n\t            var rows = [].slice.call(this.getRows());\n\t            var displayVal = '';\n\t            var idx;\n\t            var className;\n\t            var element;\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (column.visible === false) {\n\t                    displayVal = 'none';\n\t                }\n\t                ej2_base_2.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t                this.refreshUI();\n\t            }\n\t        };\n\t        HeaderRender.prototype.refreshUI = function () {\n\t            var headerDiv = this.getPanel();\n\t            var table = this.getTable();\n\t            ej2_base_2.remove(this.getTable());\n\t            table.removeChild(table.firstChild);\n\t            table.removeChild(table.childNodes[0]);\n\t            var colGroup = ej2_base_2.createElement('colgroup');\n\t            var findHeaderRow = this.createHeaderContent();\n\t            table.insertBefore(findHeaderRow.thead, table.firstChild);\n\t            this.updateColGroup(colGroup);\n\t            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n\t            this.setTable(table);\n\t            this.appendContent(table);\n\t            this.parent.notify(events.colGroupRefresh, {});\n\t            this.widthService.setWidthToColumns();\n\t            this.initializeHeaderDrag();\n\t            this.parent.notify(events.headerRefreshed, {});\n\t            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n\t            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'header') {\n\t                util_1.wrap(rows, true);\n\t            }\n\t        };\n\t        HeaderRender.prototype.appendContent = function (table) {\n\t            this.getPanel().firstChild.appendChild(table);\n\t        };\n\t        HeaderRender.prototype.getObjDepth = function () {\n\t            var max = 0;\n\t            var cols = this.parent.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                var depth = this.checkDepth(cols[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        HeaderRender.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        HeaderRender.prototype.getCellCnt = function (col, cnt) {\n\t            if (col.columns) {\n\t                for (var i = 0, len = col.columns.length; i < len; i++) {\n\t                    cnt = this.getCellCnt(col.columns[i], cnt);\n\t                }\n\t            }\n\t            else {\n\t                if (col.visible) {\n\t                    cnt++;\n\t                }\n\t            }\n\t            return cnt;\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrag = function () {\n\t            var gObj = this.parent;\n\t            if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n\t                return;\n\t            }\n\t            var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n\t            for (var i = 0, len = headerRows.length; i < len; i++) {\n\t                var drag = new ej2_base_4.Draggable(headerRows[i], {\n\t                    dragTarget: '.e-headercell',\n\t                    distance: 5,\n\t                    helper: this.helper,\n\t                    dragStart: this.dragStart,\n\t                    drag: this.drag,\n\t                    dragStop: this.dragStop,\n\t                    abort: '.e-rhandler'\n\t                });\n\t            }\n\t        };\n\t        HeaderRender.prototype.initializeHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_4.Droppable(gObj.getHeaderContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        return HeaderRender;\n\t    }());\n\t    exports.HeaderRender = HeaderRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(11), __webpack_require__(7), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, util_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowRenderer = (function () {\n\t        function RowRenderer(serviceLocator, cellType, parent) {\n\t            this.element = ej2_base_2.createElement('tr', { attrs: { role: 'row' } });\n\t            this.cellType = cellType;\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent = parent;\n\t        }\n\t        RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate) {\n\t            return this.refreshRow(row, columns, attributes, rowTemplate);\n\t        };\n\t        RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n\t            if (isChanged) {\n\t                row.data = ej2_base_1.extend({}, row.changes);\n\t            }\n\t            var node = this.parent.getContent().querySelector('[data-uid=' + row.uid + ']');\n\t            var tr = this.refreshRow(row, columns, attributes, rowTemplate);\n\t            var cells = [].slice.call(tr.cells);\n\t            node.innerHTML = '';\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var cell = cells_1[_i];\n\t                node.appendChild(cell);\n\t            }\n\t        };\n\t        RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate) {\n\t            var tr = this.element.cloneNode();\n\t            var rowArgs = { data: row.data };\n\t            var cellArgs = { data: row.data };\n\t            var attrCopy = ej2_base_1.extend({}, attributes, {});\n\t            if (row.isDataRow) {\n\t                row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1;\n\t            }\n\t            this.buildAttributeFromRow(tr, row);\n\t            ej2_base_2.attributes(tr, attrCopy);\n\t            util_1.setStyleAndAttributes(tr, row.attributes);\n\t            var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\t            for (var i = 0, len = row.cells.length; i < len; i++) {\n\t                var cell = row.cells[i];\n\t                cell.isSelected = row.isSelected;\n\t                var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || enum_1.CellType.Data);\n\t                var td = cellRenderer.render(row.cells[i], row.data, { 'index': !ej2_base_1.isNullOrUndefined(row.index) ? row.index.toString() : '' });\n\t                tr.appendChild(td);\n\t                if (row.cells[i].cellType === enum_1.CellType.Data) {\n\t                    this.parent.trigger(constant_1.queryCellInfo, ej2_base_1.extend(cellArgs, { cell: td, column: cell.column }));\n\t                }\n\t            }\n\t            if (row.isDataRow) {\n\t                this.parent.trigger(constant_1.rowDataBound, ej2_base_1.extend(rowArgs, { row: tr }));\n\t            }\n\t            if (row.cssClass) {\n\t                tr.classList.add(row.cssClass);\n\t            }\n\t            return tr;\n\t        };\n\t        RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n\t            var attr = {};\n\t            var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n\t            var classes = [];\n\t            if (row.isDataRow) {\n\t                classes.push('e-row');\n\t            }\n\t            if (row.isAltRow) {\n\t                classes.push('e-altrow');\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(row.index)) {\n\t                attr[prop.rowindex] = row.index;\n\t            }\n\t            if (row.rowSpan) {\n\t                attr.rowSpan = row.rowSpan;\n\t            }\n\t            if (row.uid) {\n\t                attr[prop.dataUID] = row.uid;\n\t            }\n\t            if (row.isSelected) {\n\t                attr[prop.ariaSelected] = true;\n\t            }\n\t            if (row.visible === false) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(tr, attr);\n\t        };\n\t        return RowRenderer;\n\t    }());\n\t    exports.RowRenderer = RowRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellType;\n\t    (function (CellType) {\n\t        CellType[CellType[\"Data\"] = 0] = \"Data\";\n\t        CellType[CellType[\"Header\"] = 1] = \"Header\";\n\t        CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n\t        CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n\t        CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n\t        CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n\t        CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n\t        CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n\t        CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n\t        CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n\t        CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n\t        CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n\t        CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n\t        CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n\t    })(CellType = exports.CellType || (exports.CellType = {}));\n\t    var RenderType;\n\t    (function (RenderType) {\n\t        RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n\t        RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n\t        RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n\t    })(RenderType = exports.RenderType || (exports.RenderType = {}));\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Cell = (function () {\n\t        function Cell(options) {\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Cell;\n\t    }());\n\t    exports.Cell = Cell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Row = (function () {\n\t        function Row(options) {\n\t            ej2_base_1.merge(this, options);\n\t        }\n\t        return Row;\n\t    }());\n\t    exports.Row = Row;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Data = (function () {\n\t        function Data(parent) {\n\t            this.parent = parent;\n\t            this.initDataManager();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.rowsAdded, this.addRows, this);\n\t            this.parent.on(events.rowsRemoved, this.removeRows, this);\n\t            this.parent.on(events.dataSourceModified, this.initDataManager, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.updateData, this.crudActions, this);\n\t            this.parent.on(events.addDeleteAction, this.getData, this);\n\t        }\n\t        Data.prototype.initDataManager = function () {\n\t            var gObj = this.parent;\n\t            this.dataManager = gObj.dataSource instanceof ej2_data_1.DataManager ? gObj.dataSource :\n\t                (ej2_base_1.isNullOrUndefined(gObj.dataSource) ? new ej2_data_1.DataManager() : new ej2_data_1.DataManager(gObj.dataSource));\n\t            gObj.query = gObj.query instanceof ej2_data_1.Query ? gObj.query : new ej2_data_1.Query();\n\t        };\n\t        Data.prototype.generateQuery = function (skipPage) {\n\t            var gObj = this.parent;\n\t            var query = gObj.query.clone();\n\t            if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n\t                var columns = gObj.filterSettings.columns;\n\t                for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                    var col = columns_1[_i];\n\t                    var sType = gObj.getColumnByField(col.field).type;\n\t                    if (sType !== 'date' && sType !== 'datetime') {\n\t                        query.where(col.field, col.operator, col.value, !col.matchCase);\n\t                    }\n\t                    else {\n\t                        query.where(this.getDatePredicate(col));\n\t                    }\n\t                }\n\t            }\n\t            if (gObj.searchSettings.key.length) {\n\t                var sSettings = gObj.searchSettings;\n\t                sSettings.fields = sSettings.fields.length ? sSettings.fields : gObj.getColumnFieldNames();\n\t                query.search(sSettings.key, sSettings.fields, sSettings.operator, sSettings.ignoreCase);\n\t            }\n\t            gObj.aggregates.forEach(function (row) {\n\t                row.columns.forEach(function (column) {\n\t                    var types = column.type instanceof Array ? column.type : [column.type];\n\t                    types.forEach(function (type) { return query.aggregate(type, column.field); });\n\t                });\n\t            });\n\t            if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n\t                var columns = gObj.sortSettings.columns;\n\t                var sortGrp = [];\n\t                for (var i = columns.length - 1; i > -1; i--) {\n\t                    if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n\t                        query.sortBy(columns[i].field, columns[i].direction);\n\t                    }\n\t                    else {\n\t                        sortGrp.push(columns[i]);\n\t                    }\n\t                }\n\t                for (var i = 0, len = sortGrp.length; i < len; i++) {\n\t                    query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n\t                }\n\t            }\n\t            if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n\t                query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n\t            }\n\t            if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n\t                var columns = gObj.groupSettings.columns;\n\t                for (var i = 0, len = columns.length; i < len; i++) {\n\t                    query.group(columns[i]);\n\t                }\n\t            }\n\t            return query;\n\t        };\n\t        Data.prototype.getData = function (args, query) {\n\t            var _this = this;\n\t            if (args === void 0) { args = { requestType: '' }; }\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ?\n\t                args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'delete':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.remove(key, args.data[0], null, query);\n\t                    break;\n\t                case 'save':\n\t                    query = query ? query : this.generateQuery();\n\t                    this.dataManager.insert(args.data, null, query, 0);\n\t                    break;\n\t            }\n\t            if (this.dataManager.ready) {\n\t                var ready = this.dataManager.ready;\n\t                ready.then(function (e) {\n\t                    _this.dataManager = new ej2_data_1.DataManager(e.result);\n\t                    _this.parent.refresh();\n\t                }).catch(function (e) {\n\t                    _this.parent.trigger(events.actionFailure, { error: e });\n\t                });\n\t            }\n\t            return this.dataManager.executeQuery(query);\n\t        };\n\t        Data.prototype.crudActions = function (args) {\n\t            this.generateQuery();\n\t            var promise = null;\n\t            var pr = 'promise';\n\t            var key = this.getKey(args.foreignKeyData &&\n\t                Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n\t                this.parent.getPrimaryKeyFieldNames());\n\t            switch (args.requestType) {\n\t                case 'save':\n\t                    promise = this.dataManager.update(key, args.data, null, this.generateQuery());\n\t                    break;\n\t            }\n\t            args[pr] = promise;\n\t            this.parent.notify(events.crudAction, args);\n\t        };\n\t        Data.prototype.saveChanges = function (changes, key) {\n\t            var promise = this.dataManager.saveChanges(changes, key, null, this.generateQuery().requiresCount());\n\t            return promise;\n\t        };\n\t        Data.prototype.getKey = function (keys) {\n\t            if (keys && keys.length) {\n\t                return keys[0];\n\t            }\n\t            return undefined;\n\t        };\n\t        Data.prototype.isRemote = function () {\n\t            return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined;\n\t        };\n\t        Data.prototype.getDatePredicate = function (filterObject) {\n\t            var prevDate;\n\t            var nextDate;\n\t            var prevObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var nextObj = ej2_base_1.extend({}, util_1.getActualProperties(filterObject));\n\t            var value = new Date(filterObject.value);\n\t            prevDate = new Date(value.setDate(value.getDate() - 1));\n\t            nextDate = new Date(value.setDate(value.getDate() + 2));\n\t            prevObj.value = prevDate;\n\t            nextObj.value = nextDate;\n\t            if (filterObject.operator === 'equal') {\n\t                prevObj.operator = 'greaterthan';\n\t                nextObj.operator = 'lessthan';\n\t            }\n\t            else {\n\t                prevObj.operator = 'lessthanorequal';\n\t                nextObj.operator = 'greaterthanorequal';\n\t            }\n\t            var predicateSt = new ej2_data_1.Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n\t            var predicateEnd = new ej2_data_1.Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n\t            return filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n\t        };\n\t        Data.prototype.addRows = function (e) {\n\t            for (var i = e.records.length; i > 0; i--) {\n\t                this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n\t            }\n\t        };\n\t        Data.prototype.removeRows = function (e) {\n\t            var json = this.dataManager.dataSource.json;\n\t            this.dataManager.dataSource.json = json.filter(function (value, index) { return e.indexes.indexOf(index) === -1; });\n\t        };\n\t        Data.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.rowsAdded, this.addRows);\n\t            this.parent.off(events.rowsRemoved, this.removeRows);\n\t            this.parent.off(events.dataSourceModified, this.initDataManager);\n\t            this.parent.off(events.dataSourceModified, this.destroy);\n\t            this.parent.off(events.updateData, this.crudActions);\n\t            this.parent.off(events.addDeleteAction, this.getData);\n\t        };\n\t        return Data;\n\t    }());\n\t    exports.Data = Data;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(14), __webpack_require__(20), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, row_renderer_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ContentRender = (function () {\n\t        function ContentRender(parent, serviceLocator) {\n\t            var _this = this;\n\t            this.rows = [];\n\t            this.drop = function (e) {\n\t                _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n\t                ej2_base_3.remove(e.droppedElement);\n\t            };\n\t            this.rafCallback = function () {\n\t                _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n\t                if (_this.parent.isDestroyed) {\n\t                    return;\n\t                }\n\t                _this.parent.notify(events.contentReady, {});\n\t                _this.parent.trigger(events.dataBound, {});\n\t                if (_this.args) {\n\t                    var action = (_this.args.requestType || '').toLowerCase() + '-complete';\n\t                    _this.parent.notify(action, _this.args);\n\t                }\n\t                _this.parent.hideSpinner();\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.ariaService = this.serviceLocator.getService('ariaService');\n\t            this.generator = this.getModelGenerator();\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n\t            this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n\t        }\n\t        ContentRender.prototype.renderPanel = function () {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_3.createElement('div', { className: 'e-gridcontent' });\n\t            var innerDiv = ej2_base_3.createElement('div', {\n\t                className: 'e-content'\n\t            });\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                innerDiv.setAttribute('tabindex', '0');\n\t            }\n\t            this.ariaService.setOptions(innerDiv, { busy: false });\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            gObj.element.appendChild(div);\n\t        };\n\t        ContentRender.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            contentDiv.appendChild(this.createContentTable());\n\t            this.setTable(contentDiv.querySelector('.e-table'));\n\t            this.ariaService.setOptions(this.getTable(), {\n\t                multiselectable: this.parent.selectionSettings.type === 'multiple'\n\t            });\n\t            this.initializeContentDrop();\n\t        };\n\t        ContentRender.prototype.createContentTable = function () {\n\t            var innerDiv = this.getPanel().firstChild;\n\t            var table = ej2_base_3.createElement('table', {\n\t                className: 'e-table', attrs: {\n\t                    cellspacing: '0.25px', role: 'grid',\n\t                    id: this.parent.element.id + '_content_table'\n\t                }\n\t            });\n\t            this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n\t            table.appendChild(this.getColGroup());\n\t            table.appendChild(ej2_base_3.createElement('tbody'));\n\t            innerDiv.appendChild(table);\n\t            return innerDiv;\n\t        };\n\t        ContentRender.prototype.refreshContentRows = function (args) {\n\t            var _this = this;\n\t            if (args === void 0) { args = {}; }\n\t            var gObj = this.parent;\n\t            var dataSource = gObj.currentViewData;\n\t            var frag = document.createDocumentFragment();\n\t            var columns = gObj.getColumns();\n\t            var tr;\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            this.rowElements = [];\n\t            var modelData = this.generator.generateRows(dataSource, args);\n\t            var tbody = this.getTable().querySelector('tbody');\n\t            for (var i = 0, len = modelData.length; i < len; i++) {\n\t                if (!gObj.rowTemplate) {\n\t                    tr = row.render(modelData[i], columns);\n\t                }\n\t                else {\n\t                    var elements = gObj.getRowTemplate()(ej2_base_2.extend({ index: i }, dataSource[i]), gObj, 'rowTemplate');\n\t                    for (var j = 0; j < elements.length; j++) {\n\t                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n\t                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n\t                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n\t                        }\n\t                    }\n\t                }\n\t                frag.appendChild(tr);\n\t                this.rows.push(modelData[i]);\n\t                if (modelData[i].isDataRow) {\n\t                    var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n\t                    if (td) {\n\t                        td.classList.add('e-detailrowvisible');\n\t                    }\n\t                    this.rowElements.push(tr);\n\t                }\n\t                this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n\t            }\n\t            this.args = args;\n\t            util_1.getUpdateUsingRaf(function () {\n\t                ej2_base_3.remove(tbody);\n\t                tbody = ej2_base_3.createElement('tbody');\n\t                _this.appendContent(tbody, frag, args);\n\t            }, this.rafCallback);\n\t        };\n\t        ContentRender.prototype.appendContent = function (tbody, frag, args) {\n\t            tbody.appendChild(frag);\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.getPanel = function () {\n\t            return this.contentPanel;\n\t        };\n\t        ContentRender.prototype.setPanel = function (panel) {\n\t            this.contentPanel = panel;\n\t        };\n\t        ContentRender.prototype.getTable = function () {\n\t            return this.contentTable;\n\t        };\n\t        ContentRender.prototype.setTable = function (table) {\n\t            this.contentTable = table;\n\t        };\n\t        ContentRender.prototype.getRows = function () {\n\t            return this.rows;\n\t        };\n\t        ContentRender.prototype.getRowElements = function () {\n\t            return this.rowElements;\n\t        };\n\t        ContentRender.prototype.setRowElements = function (elements) {\n\t            this.rowElements = elements;\n\t        };\n\t        ContentRender.prototype.getColGroup = function () {\n\t            return this.colgroup;\n\t        };\n\t        ContentRender.prototype.setColGroup = function (colGroup) {\n\t            return this.colgroup = colGroup;\n\t        };\n\t        ContentRender.prototype.setVisible = function (columns) {\n\t            var rows = this.getRows();\n\t            var element;\n\t            var testRow;\n\t            rows.some(function (r) { if (r.isDataRow) {\n\t                testRow = r;\n\t            } return r.isDataRow; });\n\t            var tasks = [];\n\t            for (var c = 0, clen = columns.length; c < clen; c++) {\n\t                var column = columns[c];\n\t                var idx = this.parent.getNormalizedColumnIndex(column.uid);\n\t                if (this.canSkip(column, testRow, idx)) {\n\t                    continue;\n\t                }\n\t                var displayVal = column.visible === true ? '' : 'none';\n\t                ej2_base_3.setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n\t            }\n\t            this.refreshContentRows({ requestType: 'refresh' });\n\t        };\n\t        ContentRender.prototype.colGroupRefresh = function () {\n\t            if (this.getColGroup()) {\n\t                var colGroup = this.getColGroup();\n\t                colGroup.innerHTML = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').innerHTML;\n\t                this.setColGroup(colGroup);\n\t            }\n\t        };\n\t        ContentRender.prototype.initializeContentDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(gObj.getContent(), {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        ContentRender.prototype.canSkip = function (column, row, index) {\n\t            return ej2_base_2.isNullOrUndefined(row) ||\n\t                ej2_base_2.isNullOrUndefined(column.visible) ||\n\t                row.cells[index].visible === column.visible;\n\t        };\n\t        ContentRender.prototype.getModelGenerator = function () {\n\t            return this.generator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        };\n\t        ContentRender.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t        };\n\t        ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n\t            this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n\t                .forEach(function (row) { return row.isSelected = set; });\n\t        };\n\t        ContentRender.prototype.getRowByIndex = function (index) {\n\t            return this.parent.getDataRows()[index];\n\t        };\n\t        return ContentRender;\n\t    }());\n\t    exports.ContentRender = ContentRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(17), __webpack_require__(15), __webpack_require__(16), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_1, enum_1, cell_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowModelGenerator = (function () {\n\t        function RowModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        RowModelGenerator.prototype.generateRows = function (data, args) {\n\t            var rows = [];\n\t            var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n\t            for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n\t                rows[i] = this.generateRow(data[i], startIndex);\n\t            }\n\t            return rows;\n\t        };\n\t        RowModelGenerator.prototype.ensureColumns = function () {\n\t            var cols = [];\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cols.push(this.generateCell({}, null, enum_1.CellType.DetailExpand));\n\t            }\n\t            return cols;\n\t        };\n\t        RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            options.uid = util_1.getUid('grid-row');\n\t            options.data = data;\n\t            options.index = index;\n\t            options.indent = indent;\n\t            options.isDataRow = true;\n\t            options.cssClass = cssClass;\n\t            options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n\t            options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n\t            var cells = this.ensureColumns();\n\t            var row = new row_1.Row(options);\n\t            row.cells = cells.concat(this.generateCells(options));\n\t            return row;\n\t        };\n\t        RowModelGenerator.prototype.generateCells = function (options) {\n\t            var _this = this;\n\t            var dummies = this.parent.getColumns();\n\t            var tmp = [];\n\t            dummies.forEach(function (dummy, index) {\n\t                return tmp.push(_this.generateCell(dummy, options.uid, undefined, null, index));\n\t            });\n\t            return tmp;\n\t        };\n\t        RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(column.field || column.template),\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(column.template),\n\t                'rowID': rowId,\n\t                'column': column,\n\t                'cellType': !ej2_base_1.isNullOrUndefined(cellType) ? cellType : enum_1.CellType.Data,\n\t                'colSpan': colSpan\n\t            };\n\t            if (opt.isDataCell) {\n\t                opt.index = this.parent.getColumnIndexByField(column.field);\n\t            }\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        RowModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            input.forEach(function (row) { return row.cells = _this.generateCells(row); });\n\t            return input;\n\t        };\n\t        return RowModelGenerator;\n\t    }());\n\t    exports.RowModelGenerator = RowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(5), __webpack_require__(15), __webpack_require__(20), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, ej2_base_1, enum_1, row_model_generator_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupModelGenerator = (function (_super) {\n\t        __extends(GroupModelGenerator, _super);\n\t        function GroupModelGenerator(parent) {\n\t            var _this = _super.call(this, parent) || this;\n\t            _this.rows = [];\n\t            _this.index = 0;\n\t            _this.parent = parent;\n\t            _this.summaryModelGen = new summary_model_generator_1.GroupSummaryModelGenerator(parent);\n\t            _this.captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(parent);\n\t            return _this;\n\t        }\n\t        GroupModelGenerator.prototype.generateRows = function (data, args) {\n\t            if (this.parent.groupSettings.columns.length === 0) {\n\t                return _super.prototype.generateRows.call(this, data, args);\n\t            }\n\t            this.rows = [];\n\t            this.index = this.parent.enableVirtualization ? (this.parent.pageSettings.currentPage - 1) * data.records.length : 0;\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                this.getGroupedRecords(0, data[i], data.level);\n\t            }\n\t            this.index = 0;\n\t            return this.rows;\n\t        };\n\t        GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw) {\n\t            var level = raw;\n\t            if (ej2_base_1.isNullOrUndefined(data.items)) {\n\t                if (ej2_base_1.isNullOrUndefined(data.GroupGuid)) {\n\t                    this.rows = this.rows.concat(this.generateDataRows(data, index));\n\t                }\n\t                else {\n\t                    for (var j = 0, len = data.length; j < len; j++) {\n\t                        this.getGroupedRecords(index, data[j], data.level);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.rows = this.rows.concat(this.generateCaptionRow(data, index));\n\t                if (data.items && data.items.length) {\n\t                    this.getGroupedRecords(index + 1, data.items, data.items.level);\n\t                }\n\t                if (this.parent.aggregates.length) {\n\t                    (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n\t                }\n\t            }\n\t            var _a;\n\t        };\n\t        GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n\t            var _this = this;\n\t            var cells = [];\n\t            var visibles = [];\n\t            var column = this.parent.getColumnByField(field);\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization) {\n\t                column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n\t            }\n\t            var groupedLen = this.parent.groupSettings.columns.length;\n\t            var gObj = this.parent;\n\t            if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n\t                for (var i = 0; i < indent; i++) {\n\t                    cells.push(this.generateIndentCell());\n\t                }\n\t                cells.push(this.generateCell({}, null, enum_1.CellType.Expand));\n\t            }\n\t            indent = this.parent.enableColumnVirtualization ? 1 :\n\t                (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n\t                    indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n\t            if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n\t                var captionCells = this.captionModelGen.generateRows(data)[0];\n\t                ej2_base_1.extend(data, captionCells.data);\n\t                visibles = captionCells.cells.filter(function (cell) { return cell.visible; });\n\t                visibles = visibles.slice(groupedLen + 1, visibles.length);\n\t                indent = indent - visibles.length;\n\t            }\n\t            var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n\t            var wFlag = true;\n\t            cols.forEach(function (col, index) {\n\t                var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n\t                if (tmpFlag) {\n\t                    wFlag = false;\n\t                }\n\t                var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n\t                    enum_1.CellType.GroupCaption : enum_1.CellType.GroupCaptionEmpty;\n\t                indent = _this.parent.enableColumnVirtualization && cellType === enum_1.CellType.GroupCaption ? indent + groupedLen : indent;\n\t                cells.push(_this.generateCell(column, null, cellType, indent));\n\t            });\n\t            cells.push.apply(cells, visibles);\n\t            return cells;\n\t        };\n\t        GroupModelGenerator.prototype.generateCaptionRow = function (data, indent) {\n\t            var options = {};\n\t            var tmp = [];\n\t            var col = this.parent.getColumnByField(data.field);\n\t            options.data = ej2_base_1.extend({}, data);\n\t            if (col) {\n\t                options.data.field = data.field;\n\t            }\n\t            options.isDataRow = false;\n\t            var row = new row_1.Row(options);\n\t            row.indent = indent;\n\t            row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n\t            return row;\n\t        };\n\t        GroupModelGenerator.prototype.generateDataRows = function (data, indent) {\n\t            var rows = [];\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = data.length; i < len; i++) {\n\t                rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent);\n\t                for (var j = 0; j < indent; j++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n\t                        continue;\n\t                    }\n\t                    rows[i].cells.unshift(this.generateIndentCell());\n\t                }\n\t                this.index++;\n\t            }\n\t            return rows;\n\t        };\n\t        GroupModelGenerator.prototype.generateIndentCell = function () {\n\t            return this.generateCell({}, null, enum_1.CellType.Indent);\n\t        };\n\t        GroupModelGenerator.prototype.refreshRows = function (input) {\n\t            var _this = this;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            input.forEach(function (row) {\n\t                if (row.isDataRow) {\n\t                    row.cells = _this.generateCells(row);\n\t                    for (var j = 0; j < row.indent; j++) {\n\t                        if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n\t                            continue;\n\t                        }\n\t                        row.cells.unshift(_this.generateIndentCell());\n\t                    }\n\t                }\n\t                else {\n\t                    var cRow = _this.generateCaptionRow(row.data, row.indent);\n\t                    row.cells = cRow.cells;\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        return GroupModelGenerator;\n\t    }(row_model_generator_1.RowModelGenerator));\n\t    exports.GroupModelGenerator = GroupModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(9), __webpack_require__(5), __webpack_require__(7), __webpack_require__(15), __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, column_1, ej2_base_1, util_1, enum_1, cell_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryModelGenerator = (function () {\n\t        function SummaryModelGenerator(parent) {\n\t            this.parent = parent;\n\t        }\n\t        SummaryModelGenerator.prototype.getData = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            this.parent.aggregates.slice().forEach(function (row) {\n\t                var columns = row.columns.filter(function (column) {\n\t                    return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n\t                        || _this.columnSelector(column);\n\t                });\n\t                if (columns.length) {\n\t                    rows.push({ columns: columns });\n\t                }\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.footerTemplate !== undefined;\n\t        };\n\t        SummaryModelGenerator.prototype.getColumns = function () {\n\t            var columns = [];\n\t            if (this.parent.allowGrouping) {\n\t                this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new column_1.Column({})); });\n\t            }\n\t            if (this.parent.detailTemplate) {\n\t                columns.push(new column_1.Column({}));\n\t            }\n\t            columns.push.apply(columns, this.parent.getColumns());\n\t            return columns;\n\t        };\n\t        SummaryModelGenerator.prototype.generateRows = function (input, args) {\n\t            var _this = this;\n\t            if (this.parent.currentViewData.length === 0) {\n\t                return [];\n\t            }\n\t            var data = this.buildSummaryData(input, args);\n\t            var rows = [];\n\t            this.getData().forEach(function (row, index) {\n\t                rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined));\n\t            });\n\t            return rows;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw) {\n\t            var _this = this;\n\t            var tmp = [];\n\t            var indents = this.getIndentByLevel(raw);\n\t            var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ? 1 : 0);\n\t            this.getColumns().forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() : enum_1.CellType.Indent, indents[index])); });\n\t            var row = new row_1.Row({ data: data, attributes: { class: 'e-summaryrow' } });\n\t            row.cells = tmp;\n\t            row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n\t            return row;\n\t        };\n\t        SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent) {\n\t            var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n\t            var attrs = { 'style': { 'textAlign': column.textAlign } };\n\t            if (indent) {\n\t                attrs.class = indent;\n\t            }\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': !ej2_base_1.isNullOrUndefined(sColumn),\n\t                'isTemplate': sColumn && !ej2_base_1.isNullOrUndefined(sColumn.footerTemplate\n\t                    || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n\t                'column': sColumn || {},\n\t                'attributes': attrs,\n\t                'cellType': cellType\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n\t            var _this = this;\n\t            var dummy = [];\n\t            var summaryRows = this.getData();\n\t            var single = {};\n\t            var key = '';\n\t            summaryRows.forEach(function (row) {\n\t                single = {};\n\t                row.columns.forEach(function (column) {\n\t                    single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n\t                });\n\t                dummy.push(single);\n\t            });\n\t            return dummy;\n\t        };\n\t        SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n\t            return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n\t        };\n\t        SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n\t            var _this = this;\n\t            var types = column.type;\n\t            var helper = {};\n\t            var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n\t            var group = data;\n\t            if (!(types instanceof Array)) {\n\t                types = [column.type];\n\t            }\n\t            types.forEach(function (type) {\n\t                var key = column.field + ' - ' + type;\n\t                var disp = column.columnName;\n\t                var val = group.aggregates && group.aggregates[key] ? group.aggregates[key] :\n\t                    util_1.calculateAggregate(type, group.aggregates ? group.result : data, column, _this.parent);\n\t                single[disp] = single[disp] || {};\n\t                single[disp][key] = val;\n\t                single[disp][type] = formatFn(val);\n\t                if (group.field) {\n\t                    single[disp].field = group.field;\n\t                    single[disp].key = group.key;\n\t                }\n\t            });\n\t            helper.format = column.getFormatter();\n\t            column.setTemplate(helper);\n\t            return single;\n\t        };\n\t        SummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.Summary;\n\t        };\n\t        return SummaryModelGenerator;\n\t    }());\n\t    exports.SummaryModelGenerator = SummaryModelGenerator;\n\t    var GroupSummaryModelGenerator = (function (_super) {\n\t        __extends(GroupSummaryModelGenerator, _super);\n\t        function GroupSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupFooterTemplate !== undefined;\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n\t            if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n\t            return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n\t        };\n\t        GroupSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.GroupSummary;\n\t        };\n\t        return GroupSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.GroupSummaryModelGenerator = GroupSummaryModelGenerator;\n\t    var CaptionSummaryModelGenerator = (function (_super) {\n\t        __extends(CaptionSummaryModelGenerator, _super);\n\t        function CaptionSummaryModelGenerator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n\t            return column.groupCaptionTemplate !== undefined;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getData = function () {\n\t            var initVal = { columns: [] };\n\t            return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n\t                    prev.columns = prev.columns.concat(cur.columns);\n\t                    return prev;\n\t                }, initVal)];\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n\t            return (this.getData()[0].columns || []).length === 0;\n\t        };\n\t        CaptionSummaryModelGenerator.prototype.getCellType = function () {\n\t            return enum_1.CellType.CaptionSummary;\n\t        };\n\t        return CaptionSummaryModelGenerator;\n\t    }(SummaryModelGenerator));\n\t    exports.CaptionSummaryModelGenerator = CaptionSummaryModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRenderer = (function () {\n\t        function CellRenderer(parent, locator) {\n\t            this.element = ej2_base_2.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            this.localizer = locator.getService('localization');\n\t            this.formatter = locator.getService('valueFormatter');\n\t            this.parent = parent;\n\t        }\n\t        CellRenderer.prototype.getGui = function () {\n\t            return '';\n\t        };\n\t        CellRenderer.prototype.format = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.format)) {\n\t                value = this.formatter.toView(value, column.getFormatter());\n\t            }\n\t            return ej2_base_1.isNullOrUndefined(value) ? '' : value.toString();\n\t        };\n\t        CellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var result;\n\t            if (cell.column.template) {\n\t                var literals = ['index'];\n\t                result = cell.column.getColumnTemplate()(ej2_base_1.extend({ 'index': attributes[literals[0]] }, data), this.parent, 'template');\n\t                util_1.appendChildren(node, result);\n\t                node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n\t                    cell.column.headerText);\n\t                return false;\n\t            }\n\t            return true;\n\t        };\n\t        CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n\t            if (!ej2_base_1.isNullOrUndefined(column.formatter)) {\n\t                if (util_1.doesImplementInterface(column.formatter, 'getValue')) {\n\t                    var formatter = column.formatter;\n\t                    value = new formatter().getValue(column, data);\n\t                }\n\t                else if (typeof column.formatter === 'function') {\n\t                    value = column.formatter(column, data);\n\t                }\n\t                else {\n\t                    value = column.formatter.getValue(column, data);\n\t                }\n\t            }\n\t            return value;\n\t        };\n\t        CellRenderer.prototype.render = function (cell, data, attributes) {\n\t            return this.refreshCell(cell, data, attributes);\n\t        };\n\t        CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n\t            var node = this.refreshCell(cell, data, attributes);\n\t            td.innerHTML = '';\n\t            var elements = [].slice.call(node.childNodes);\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                td.appendChild(elem);\n\t            }\n\t        };\n\t        CellRenderer.prototype.refreshCell = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var column = cell.column;\n\t            var innerHtml = this.getGui();\n\t            var value = this.getValue(column.field, data, column);\n\t            if (column.type === 'date') {\n\t                value = new Date(value);\n\t            }\n\t            value = this.format(column, value, data);\n\t            innerHtml = value.toString();\n\t            if (column.type === 'boolean') {\n\t                var isNull = (value !== 'true' && value !== 'false');\n\t                if (column.displayAsCheckBox) {\n\t                    node.classList.add('e-checkbox');\n\t                    innerHtml = isNull ? null : '<input type=\"checkbox\" disabled ' + (value === 'true' ? 'checked' : '') + '/>';\n\t                }\n\t                else {\n\t                    var localeStr = isNull ? null : value === 'true' ? 'True' : 'False';\n\t                    innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n\t                }\n\t            }\n\t            var fromFormatter = this.invokeFormatter(column, value, data);\n\t            innerHtml = !ej2_base_1.isNullOrUndefined(column.formatter) ? ej2_base_1.isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n\t            node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n\t            if (this.evaluate(node, cell, data, attributes)) {\n\t                this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n\t            }\n\t            this.setAttributes(node, cell, attributes);\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n\t            if (property === void 0) { property = 'innerHTML'; }\n\t            node[property] = innerHtml;\n\t            return node;\n\t        };\n\t        CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n\t            var column = cell.column;\n\t            this.buildAttributeFromCell(node, cell);\n\t            util_1.setStyleAndAttributes(node, attributes);\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.textAlign) {\n\t                node.style.textAlign = column.textAlign;\n\t            }\n\t            if (column.clipMode === 'clip') {\n\t                node.classList.add('e-gridclip');\n\t            }\n\t            else if (column.clipMode === 'ellipsiswithtooltip') {\n\t                node.classList.add('e-ellipsistooltip');\n\t            }\n\t        };\n\t        CellRenderer.prototype.buildAttributeFromCell = function (node, cell) {\n\t            var attr = {};\n\t            var prop = { 'colindex': 'aria-colindex' };\n\t            var classes = [];\n\t            if (cell.colSpan) {\n\t                attr.colSpan = cell.colSpan;\n\t            }\n\t            if (cell.rowSpan) {\n\t                attr.rowSpan = cell.rowSpan;\n\t            }\n\t            if (cell.isTemplate) {\n\t                classes.push('e-templatecell');\n\t            }\n\t            if (cell.isSelected) {\n\t                classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(cell.index)) {\n\t                attr[prop.colindex] = cell.index;\n\t            }\n\t            if (!cell.visible) {\n\t                classes.push('e-hide');\n\t            }\n\t            attr.class = classes;\n\t            util_1.setStyleAndAttributes(node, attr);\n\t        };\n\t        CellRenderer.prototype.getValue = function (field, data, column) {\n\t            return column.valueAccessor(column.field, data, column);\n\t        };\n\t        return CellRenderer;\n\t    }());\n\t    exports.CellRenderer = CellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(23), __webpack_require__(25)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderCellRenderer = (function (_super) {\n\t        __extends(HeaderCellRenderer, _super);\n\t        function HeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n\t            _this.ariaService = new aria_service_1.AriaService();\n\t            _this.hTxtEle = ej2_base_2.createElement('span', { className: 'e-headertext' });\n\t            _this.sortEle = ej2_base_2.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n\t            _this.gui = ej2_base_2.createElement('div');\n\t            return _this;\n\t        }\n\t        HeaderCellRenderer.prototype.getGui = function () {\n\t            return this.gui.cloneNode();\n\t        };\n\t        HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            return this.prepareHeader(cell, node);\n\t        };\n\t        HeaderCellRenderer.prototype.refresh = function (cell, node) {\n\t            this.clean(node);\n\t            return this.prepareHeader(cell, node);\n\t        };\n\t        HeaderCellRenderer.prototype.clean = function (node) {\n\t            node.innerHTML = '';\n\t        };\n\t        HeaderCellRenderer.prototype.prepareHeader = function (cell, node) {\n\t            var column = cell.column;\n\t            var ariaAttr = {};\n\t            var innerDIV = this.getGui();\n\t            var value = column.headerText;\n\t            var headerText = this.hTxtEle.cloneNode();\n\t            headerText[column.getDomSetter()] = value;\n\t            innerDIV.appendChild(headerText);\n\t            ej2_base_2.attributes(innerDIV, {\n\t                'e-mappinguid': column.uid,\n\t                'class': 'e-headercelldiv'\n\t            });\n\t            this.buildAttributeFromCell(node, cell);\n\t            this.appendHtml(node, innerDIV);\n\t            node.appendChild(this.sortEle.cloneNode());\n\t            if (cell.className) {\n\t                node.classList.add(cell.className);\n\t            }\n\t            if (column.customAttributes) {\n\t                util_1.setStyleAndAttributes(node, column.customAttributes);\n\t            }\n\t            if (column.allowSorting) {\n\t                ariaAttr.sort = 'none';\n\t            }\n\t            if (column.allowGrouping) {\n\t                ariaAttr.grabbed = false;\n\t            }\n\t            if (this.parent.allowResizing) {\n\t                var handler = ej2_base_2.createElement('div');\n\t                handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n\t                node.appendChild(handler);\n\t            }\n\t            this.ariaService.setOptions(node, ariaAttr);\n\t            if (!ej2_base_1.isNullOrUndefined(column.headerTextAlign) || !ej2_base_1.isNullOrUndefined(column.textAlign)) {\n\t                var alignment = column.headerTextAlign || column.textAlign;\n\t                innerDIV.style.textAlign = alignment;\n\t                if (alignment === 'right' || alignment === 'left') {\n\t                    node.classList.add(alignment === 'right' ? 'e-rightalign' : 'e-leftalign');\n\t                }\n\t            }\n\t            if (column.clipMode === 'clip') {\n\t                node.classList.add('e-gridclip');\n\t            }\n\t            else if (column.clipMode === 'ellipsiswithtooltip') {\n\t                node.classList.add('e-ellipsistooltip');\n\t            }\n\t            node.setAttribute('aria-rowspan', (!ej2_base_1.isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n\t            node.setAttribute('aria-colspan', '1');\n\t            return node;\n\t        };\n\t        HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return HeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderCellRenderer = HeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AriaService = (function () {\n\t        function AriaService() {\n\t        }\n\t        AriaService.prototype.setOptions = function (target, options) {\n\t            var props = Object.keys(options);\n\t            props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n\t        };\n\t        AriaService.prototype.setExpand = function (target, expand) {\n\t            setStateAndProperties(target, config.expand, expand);\n\t        };\n\t        AriaService.prototype.setSort = function (target, direction) {\n\t            setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n\t        };\n\t        AriaService.prototype.setBusy = function (target, isBusy) {\n\t            setStateAndProperties(target, config.busy, isBusy);\n\t            setStateAndProperties(target, config.invalid, null, true);\n\t        };\n\t        AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n\t            setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n\t        };\n\t        AriaService.prototype.setDropTarget = function (target, isTarget) {\n\t            setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n\t        };\n\t        return AriaService;\n\t    }());\n\t    exports.AriaService = AriaService;\n\t    function setStateAndProperties(target, attribute, value, remove) {\n\t        if (remove) {\n\t            target.removeAttribute(attribute);\n\t            return;\n\t        }\n\t        if (target) {\n\t            target.setAttribute(attribute, value);\n\t        }\n\t    }\n\t    var config = {\n\t        expand: 'aria-expanded',\n\t        role: 'role',\n\t        selected: 'aria-selected',\n\t        multiselectable: 'aria-multiselectable',\n\t        sort: 'aria-sort',\n\t        busy: 'aria-busy',\n\t        invalid: 'aria-invalid',\n\t        grabbed: 'aria-grabbed',\n\t        dropeffect: 'aria-dropeffect',\n\t        haspopup: 'aria-haspopup',\n\t        level: 'aria-level',\n\t        colcount: 'aria-colcount'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StackedHeaderCellRenderer = (function (_super) {\n\t        __extends(StackedHeaderCellRenderer, _super);\n\t        function StackedHeaderCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', {\n\t                className: 'e-headercell e-stackedheadercell', attrs: {\n\t                    role: 'columnheader',\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            return _this;\n\t        }\n\t        StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n\t            var node = this.element.cloneNode();\n\t            var div = ej2_base_1.createElement('div', { className: 'e-stackedheadercelldiv' });\n\t            node.appendChild(div);\n\t            div.innerHTML = cell.column.headerText;\n\t            if (cell.column.toolTip) {\n\t                node.setAttribute('title', cell.column.toolTip);\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(cell.column.textAlign)) {\n\t                div.style.textAlign = cell.column.textAlign;\n\t            }\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-rowspan', '1');\n\t            return node;\n\t        };\n\t        return StackedHeaderCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.StackedHeaderCellRenderer = StackedHeaderCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var IndentCellRenderer = (function (_super) {\n\t        __extends(IndentCellRenderer, _super);\n\t        function IndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-indentcell' });\n\t            return _this;\n\t        }\n\t        IndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            util_1.setStyleAndAttributes(node, cell.attributes);\n\t            return node;\n\t        };\n\t        return IndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.IndentCellRenderer = IndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var GroupCaptionCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionCellRenderer, _super);\n\t        function GroupCaptionCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var value = this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n\t            node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n\t                (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n\t            return node;\n\t        };\n\t        return GroupCaptionCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionCellRenderer = GroupCaptionCellRenderer;\n\t    var GroupCaptionEmptyCellRenderer = (function (_super) {\n\t        __extends(GroupCaptionEmptyCellRenderer, _super);\n\t        function GroupCaptionEmptyCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', { className: 'e-groupcaption' });\n\t            return _this;\n\t        }\n\t        GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.innerHTML = '&nbsp;';\n\t            node.setAttribute('colspan', cell.colSpan.toString());\n\t            return node;\n\t        };\n\t        return GroupCaptionEmptyCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.GroupCaptionEmptyCellRenderer = GroupCaptionEmptyCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(27)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, indent_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExpandCellRenderer = (function (_super) {\n\t        __extends(ExpandCellRenderer, _super);\n\t        function ExpandCellRenderer() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        ExpandCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.className = 'e-recordplusexpand';\n\t            node.setAttribute('ej-mappingname', data.field);\n\t            node.setAttribute('ej-mappingvalue', data.key);\n\t            node.setAttribute('aria-expanded', 'true');\n\t            node.setAttribute('tabindex', '-1');\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-gdiagonaldown e-icon-gdownarrow' }));\n\t            return node;\n\t        };\n\t        return ExpandCellRenderer;\n\t    }(indent_cell_renderer_1.IndentCellRenderer));\n\t    exports.ExpandCellRenderer = ExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HeaderIndentCellRenderer = (function (_super) {\n\t        __extends(HeaderIndentCellRenderer, _super);\n\t        function HeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-grouptopleftcell' });\n\t            return _this;\n\t        }\n\t        HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '&nbsp;' }));\n\t            return node;\n\t        };\n\t        return HeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.HeaderIndentCellRenderer = HeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailHeaderIndentCellRenderer = (function (_super) {\n\t        __extends(DetailHeaderIndentCellRenderer, _super);\n\t        function DetailHeaderIndentCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TH', { className: 'e-detailheadercell' });\n\t            return _this;\n\t        }\n\t        DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-emptycell' }));\n\t            return node;\n\t        };\n\t        return DetailHeaderIndentCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailHeaderIndentCellRenderer = DetailHeaderIndentCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailExpandCellRenderer = (function (_super) {\n\t        __extends(DetailExpandCellRenderer, _super);\n\t        function DetailExpandCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_1.createElement('TD', {\n\t                className: 'e-detailrowcollapse',\n\t                attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n\t            });\n\t            return _this;\n\t        }\n\t        DetailExpandCellRenderer.prototype.render = function () {\n\t            var node = this.element.cloneNode();\n\t            node.appendChild(ej2_base_1.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n\t            return node;\n\t        };\n\t        return DetailExpandCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.DetailExpandCellRenderer = DetailExpandCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CellRendererFactory = (function () {\n\t        function CellRendererFactory() {\n\t            this.cellRenderMap = {};\n\t        }\n\t        CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                this.cellRenderMap[name] = type;\n\t            }\n\t        };\n\t        CellRendererFactory.prototype.getCellRenderer = function (name) {\n\t            name = typeof name === 'string' ? name : ej2_base_1.getEnumValue(enum_1.CellType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.cellRenderMap[name])) {\n\t                throw \"The cellRenderer \" + name + \" is not found\";\n\t            }\n\t            else {\n\t                return this.cellRenderMap[name];\n\t            }\n\t        };\n\t        return CellRendererFactory;\n\t    }());\n\t    exports.CellRendererFactory = CellRendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RendererFactory = (function () {\n\t        function RendererFactory() {\n\t            this.rendererMap = {};\n\t        }\n\t        RendererFactory.prototype.addRenderer = function (name, type) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                this.rendererMap[rName] = type;\n\t            }\n\t        };\n\t        RendererFactory.prototype.getRenderer = function (name) {\n\t            var rName = ej2_base_1.getEnumValue(enum_1.RenderType, name);\n\t            if (ej2_base_1.isNullOrUndefined(this.rendererMap[rName])) {\n\t                throw \"The renderer \" + rName + \" is not found\";\n\t            }\n\t            else {\n\t                return this.rendererMap[rName];\n\t            }\n\t        };\n\t        return RendererFactory;\n\t    }());\n\t    exports.RendererFactory = RendererFactory;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(11), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, constant_1, column_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnWidthService = (function () {\n\t        function ColumnWidthService(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ColumnWidthService.prototype.setWidthToColumns = function () {\n\t            var _this = this;\n\t            var i = 0;\n\t            var indexes = this.parent.getColumnIndexesInView();\n\t            var wFlag = true;\n\t            if (this.parent.allowGrouping) {\n\t                for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n\t                    if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n\t                        wFlag = false;\n\t                        continue;\n\t                    }\n\t                    this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                this.setColumnWidth(new column_1.Column({ width: '30px' }), i);\n\t            }\n\t            this.parent.getColumns().forEach(function (column, index) {\n\t                _this.setColumnWidth(column, wFlag ? undefined : index);\n\t            });\n\t        };\n\t        ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n\t            var columnIndex = ej2_base_1.isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n\t            var cWidth = this.getWidth(column);\n\t            if (cWidth !== null) {\n\t                this.setWidth(cWidth, columnIndex);\n\t                if (this.parent.allowResizing && module === 'resize') {\n\t                    this.setWidthToTable();\n\t                }\n\t                this.parent.notify(constant_1.columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.setWidth = function (width, index) {\n\t            var header = this.parent.getHeaderTable();\n\t            var content = this.parent.getContentTable();\n\t            var fWidth = ej2_base_2.formatUnit(width);\n\t            var headerCol = header.querySelector('colgroup').children[index];\n\t            if (headerCol) {\n\t                headerCol.style.width = fWidth;\n\t                content.querySelector('colgroup').children[index].style.width = fWidth;\n\t            }\n\t            var edit = content.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.querySelector('colgroup').children[index].style.width = fWidth;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n\t            var previous = this.getHeightFromDirection(element, 'previous');\n\t            var next = this.getHeightFromDirection(element, 'next');\n\t            return previous + next;\n\t        };\n\t        ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n\t            var sibling = element[direction + 'ElementSibling'];\n\t            var result = 0;\n\t            while (sibling) {\n\t                result += sibling.offsetHeight;\n\t                sibling = sibling[direction + 'ElementSibling'];\n\t            }\n\t            return result;\n\t        };\n\t        ColumnWidthService.prototype.getWidth = function (column) {\n\t            if (ej2_base_1.isNullOrUndefined(column.width) && this.parent.allowResizing) {\n\t                column.width = 200;\n\t            }\n\t            if (!column.width) {\n\t                return null;\n\t            }\n\t            var width = parseInt(column.width.toString(), 10);\n\t            if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n\t                return column.minWidth;\n\t            }\n\t            else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n\t                return column.maxWidth;\n\t            }\n\t            else {\n\t                return column.width;\n\t            }\n\t        };\n\t        ColumnWidthService.prototype.getTableWidth = function (columns) {\n\t            var tWidth = 0;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                var cWidth = this.getWidth(column);\n\t                if (column.visible !== false && cWidth !== null) {\n\t                    tWidth += parseInt(cWidth.toString(), 10);\n\t                }\n\t            }\n\t            return tWidth;\n\t        };\n\t        ColumnWidthService.prototype.setWidthToTable = function () {\n\t            var tWidth = ej2_base_2.formatUnit(this.getTableWidth(this.parent.getColumns()));\n\t            this.parent.getHeaderTable().style.width = tWidth;\n\t            this.parent.getContentTable().style.width = tWidth;\n\t            var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n\t            if (edit) {\n\t                edit.style.width = tWidth;\n\t            }\n\t        };\n\t        return ColumnWidthService;\n\t    }());\n\t    exports.ColumnWidthService = ColumnWidthService;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PageSettings = (function (_super) {\n\t        __extends(PageSettings, _super);\n\t        function PageSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return PageSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(12)\n\t    ], PageSettings.prototype, \"pageSize\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(8)\n\t    ], PageSettings.prototype, \"pageCount\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], PageSettings.prototype, \"currentPage\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], PageSettings.prototype, \"enableQueryString\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], PageSettings.prototype, \"pageSizes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], PageSettings.prototype, \"template\", void 0);\n\t    exports.PageSettings = PageSettings;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, enum_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Selection = (function () {\n\t        function Selection(parent, selectionSettings, locator) {\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRowCellIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.isMultiShiftRequest = false;\n\t            this.isMultiCtrlRequest = false;\n\t            this.enableSelectMultiTouch = false;\n\t            this.parent = parent;\n\t            this.selectionSettings = selectionSettings;\n\t            this.factory = locator.getService('rendererFactory');\n\t            this.addEventListener();\n\t        }\n\t        Selection.prototype.initializeSelection = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n\t        };\n\t        Selection.prototype.onActionBegin = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.onActionComplete = function (args, type) {\n\t            this.parent.trigger(type, args);\n\t        };\n\t        Selection.prototype.getModuleName = function () {\n\t            return 'selection';\n\t        };\n\t        Selection.prototype.destroy = function () {\n\t            this.hidePopUp();\n\t            this.clearSelection();\n\t            this.removeEventListener();\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n\t        };\n\t        Selection.prototype.isEditing = function () {\n\t            return this.parent.editSettings.mode !== 'batch' && this.parent.isEdit;\n\t        };\n\t        Selection.prototype.selectRow = function (index, isToggle) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(index);\n\t            var selectData = gObj.getCurrentViewRecords()[index];\n\t            if (!this.isRowType() || !selectedRow || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isRowSelected = selectedRow.hasAttribute('aria-selected');\n\t            isToggle = !isToggle ? isToggle : index === this.prevRowIndex && isRowSelected;\n\t            if (!isToggle) {\n\t                this.onActionBegin({\n\t                    data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    isShiftPressed: this.isMultiShiftRequest, row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelecting);\n\t            }\n\t            this.clearRow();\n\t            if (!isToggle) {\n\t                this.updateRowSelection(selectedRow, index);\n\t                this.parent.selectedRowIndex = index;\n\t            }\n\t            this.updateRowProps(index);\n\t            if (!isToggle) {\n\t                this.onActionComplete({\n\t                    data: selectData, rowIndex: index,\n\t                    row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n\t                    previousRowIndex: this.prevRowIndex, target: this.target\n\t                }, events.rowSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n\t            this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n\t            this.parent.selectedRowIndex = endIndex;\n\t        };\n\t        Selection.prototype.selectRows = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            var selectedData = gObj.getCurrentViewRecords()[rowIndexes[0]];\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n\t                data: selectedData\n\t            }, events.rowSelecting);\n\t            this.clearRow();\n\t            for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n\t                var rowIndex = rowIndexes_1[_i];\n\t                this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n\t            }\n\t            this.updateRowProps(rowIndexes[0]);\n\t            this.onActionComplete({\n\t                rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n\t                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                data: selectedData\n\t            }, events.rowSelected);\n\t        };\n\t        Selection.prototype.addRowsToSelection = function (rowIndexes) {\n\t            var gObj = this.parent;\n\t            var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n\t            if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n\t                var rowIndex = rowIndexes_2[_i];\n\t                var data = gObj.getCurrentViewRecords()[rowIndex];\n\t                var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n\t                gObj.selectedRowIndex = rowIndex;\n\t                if (isUnSelected) {\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                    this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n\t                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n\t                    selectedRow.removeAttribute('aria-selected');\n\t                    this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n\t                    this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n\t                }\n\t                else {\n\t                    this.onActionBegin({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n\t                        isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n\t                    }, events.rowSelecting);\n\t                    this.updateRowSelection(selectedRow, rowIndex);\n\t                }\n\t                this.updateRowProps(rowIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n\t                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex\n\t                    }, events.rowSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n\t            var indexes = [];\n\t            var _a = (startIndex < endIndex) ?\n\t                { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n\t            for (; i <= max; i++) {\n\t                indexes.push(i);\n\t            }\n\t            if (startIndex > endIndex) {\n\t                indexes.reverse();\n\t            }\n\t            return indexes;\n\t        };\n\t        Selection.prototype.clearRow = function () {\n\t            this.clearRowSelection();\n\t            this.selectedRowIndexes = [];\n\t            this.selectedRecords = [];\n\t            this.parent.selectedRowIndex = -1;\n\t        };\n\t        Selection.prototype.updateRowProps = function (startIndex) {\n\t            this.prevRowIndex = startIndex;\n\t            this.isRowSelected = this.selectedRowIndexes.length && true;\n\t        };\n\t        Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n\t            if (!selectedRow) {\n\t                return;\n\t            }\n\t            this.selectedRowIndexes.push(startIndex);\n\t            this.selectedRecords.push(selectedRow);\n\t            selectedRow.setAttribute('aria-selected', 'true');\n\t            this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n\t        };\n\t        Selection.prototype.clearSelection = function () {\n\t            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n\t            if (span.classList.contains('e-rowselect')) {\n\t                span.classList.remove('e-spanclicked');\n\t            }\n\t            this.clearRowSelection();\n\t            this.clearCellSelection();\n\t            this.enableSelectMultiTouch = false;\n\t        };\n\t        Selection.prototype.clearRowSelection = function () {\n\t            if (this.isRowSelected) {\n\t                var rows = this.parent.getDataRows();\n\t                var data = [];\n\t                var row = [];\n\t                var rowIndex = [];\n\t                var currentViewData = this.parent.getCurrentViewRecords();\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    data.push(currentViewData[this.selectedRowIndexes[i]]);\n\t                    row.push(this.parent.getRows()[this.selectedRowIndexes[i]]);\n\t                    rowIndex.push(this.selectedRowIndexes[i]);\n\t                }\n\t                this.rowDeselect(events.rowDeselecting, rowIndex, data, row);\n\t                for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n\t                    var row_1 = this.parent.getRowByIndex(this.selectedRowIndexes[i]);\n\t                    if (row_1) {\n\t                        row_1.removeAttribute('aria-selected');\n\t                    }\n\t                    this.addRemoveClassesForRow(row_1, false, true, 'e-selectionbackground', 'e-active');\n\t                }\n\t                this.selectedRowIndexes = [];\n\t                this.selectedRecords = [];\n\t                this.isRowSelected = false;\n\t                this.parent.selectedRowIndex = undefined;\n\t                this.rowDeselect(events.rowDeselected, rowIndex, data, row);\n\t            }\n\t        };\n\t        Selection.prototype.rowDeselect = function (type, rowIndex, data, row) {\n\t            this.parent.trigger(type, {\n\t                rowIndex: rowIndex, data: data, row: row\n\t            });\n\t        };\n\t        Selection.prototype.selectCell = function (cellIndex, isToggle) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, cellIndex.cellIndex);\n\t            this.currentIndex = cellIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (!this.isCellType() || !selectedCell || this.isEditing()) {\n\t                return;\n\t            }\n\t            var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n\t            isToggle = !isToggle ? isToggle : !(!ej2_base_2.isUndefined(this.prevCIdxs) &&\n\t                cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n\t                isCellSelected);\n\t            if (isToggle) {\n\t                this.onActionBegin({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelecting);\n\t            }\n\t            this.clearCell();\n\t            if (isToggle) {\n\t                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t            }\n\t            this.updateCellProps(cellIndex, cellIndex);\n\t            if (isToggle) {\n\t                this.onActionComplete({\n\t                    data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n\t                    previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                }, events.cellSelected);\n\t            }\n\t        };\n\t        Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n\t            var min;\n\t            var max;\n\t            var stIndex = startIndex;\n\t            var edIndex = endIndex = endIndex ? endIndex : startIndex;\n\t            var cellIndexes;\n\t            this.currentIndex = startIndex.rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            this.clearCell();\n\t            if (startIndex.rowIndex > endIndex.rowIndex) {\n\t                var temp = startIndex;\n\t                startIndex = endIndex;\n\t                endIndex = temp;\n\t            }\n\t            for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n\t                if (this.selectionSettings.cellSelectionMode !== 'box') {\n\t                    min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n\t                    max = i === endIndex.rowIndex ? (endIndex.cellIndex) : gObj.getColumns().length - 1;\n\t                }\n\t                else {\n\t                    min = startIndex.cellIndex;\n\t                    max = endIndex.cellIndex;\n\t                }\n\t                cellIndexes = [];\n\t                for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(i, j);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    cellIndexes.push(j);\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                }\n\t                this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n\t            }\n\t            this.updateCellProps(stIndex, edIndex);\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.selectCells = function (rowCellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n\t            this.currentIndex = rowCellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            this.onActionBegin({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelecting);\n\t            for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n\t                for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n\t                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n\t                    if (!selectedCell) {\n\t                        continue;\n\t                    }\n\t                    this.updateCellSelection(selectedCell);\n\t                    this.addAttribute(selectedCell);\n\t                    this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n\t                }\n\t            }\n\t            this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n\t            this.onActionComplete({\n\t                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n\t                currentCell: selectedCell,\n\t                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n\t                previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t            }, events.cellSelected);\n\t        };\n\t        Selection.prototype.addCellsToSelection = function (cellIndexes) {\n\t            if (!this.isCellType()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var selectedCell = gObj.getCellFromIndex(cellIndexes[0].rowIndex, cellIndexes[0].cellIndex);\n\t            var index;\n\t            this.currentIndex = cellIndexes[0].rowIndex;\n\t            var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n\t            if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n\t                var cellIndex = cellIndexes_1[_i];\n\t                for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                    if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n\t                        index = i;\n\t                        break;\n\t                    }\n\t                }\n\t                var args = {\n\t                    data: selectedData, cellIndex: cellIndexes[0],\n\t                    isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n\t                    currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n\t                    previousRowCell: this.prevECIdxs ?\n\t                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n\t                };\n\t                var isUnSelected = index > -1;\n\t                if (isUnSelected) {\n\t                    var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n\t                    if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n\t                        this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                        selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n\t                        selectedCell.classList.remove('e-cellselectionbackground');\n\t                        selectedCell.removeAttribute('aria-selected');\n\t                        this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n\t                    }\n\t                    else {\n\t                        isUnSelected = false;\n\t                        this.onActionBegin(args, events.cellSelecting);\n\t                        this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n\t                        this.updateCellSelection(selectedCell);\n\t                        this.addAttribute(selectedCell);\n\t                    }\n\t                }\n\t                else {\n\t                    this.onActionBegin(args, events.cellSelecting);\n\t                    this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n\t                }\n\t                this.updateCellProps(cellIndex, cellIndex);\n\t                if (!isUnSelected) {\n\t                    this.onActionComplete({\n\t                        data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n\t                        previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n\t                            undefined, previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes\n\t                    }, events.cellSelected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.clearCell = function () {\n\t            this.clearCellSelection();\n\t        };\n\t        Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells) {\n\t            this.parent.trigger(type, {\n\t                cells: cells, data: data, cellIndexes: cellIndexes\n\t            });\n\t        };\n\t        Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n\t            if (!ej2_base_2.isNullOrUndefined(rowIndex)) {\n\t                this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            selectedCell.classList.add('e-cellselectionbackground');\n\t            this.addAttribute(selectedCell);\n\t        };\n\t        Selection.prototype.addAttribute = function (cell) {\n\t            this.target = cell;\n\t            cell.setAttribute('aria-selected', 'true');\n\t            cell.focus();\n\t        };\n\t        Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n\t            this.prevCIdxs = startIndex;\n\t            this.prevECIdxs = endIndex;\n\t            this.isCellSelected = this.selectedRowCellIndexes.length && true;\n\t        };\n\t        Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n\t            var isRowAvail;\n\t            var index;\n\t            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n\t                if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n\t                    isRowAvail = true;\n\t                    index = i;\n\t                    break;\n\t                }\n\t            }\n\t            if (isRowAvail) {\n\t                if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n\t                    this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n\t                }\n\t            }\n\t            else {\n\t                this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n\t            }\n\t        };\n\t        Selection.prototype.clearCellSelection = function () {\n\t            if (this.isCellSelected) {\n\t                var gObj = this.parent;\n\t                var selectedCells = this.getSelectedCellsElement();\n\t                var rowCell = this.selectedRowCellIndexes;\n\t                var data = [];\n\t                var cells = [];\n\t                var currentViewData = gObj.getCurrentViewRecords();\n\t                for (var i = 0, len = rowCell.length; i < len; i++) {\n\t                    data.push(currentViewData[rowCell[i].rowIndex]);\n\t                    for (var j = 0, cLen = rowCell.length; j < cLen; j++) {\n\t                        cells.push(this.parent.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n\t                    }\n\t                }\n\t                this.cellDeselect(events.cellDeselecting, rowCell, data, cells);\n\t                for (var i = 0, len = selectedCells.length; i < len; i++) {\n\t                    selectedCells[i].classList.remove('e-cellselectionbackground');\n\t                    selectedCells[i].removeAttribute('aria-selected');\n\t                }\n\t                this.selectedRowCellIndexes = [];\n\t                this.isCellSelected = false;\n\t                this.cellDeselect(events.cellDeselected, rowCell, data, cells);\n\t            }\n\t        };\n\t        Selection.prototype.getSelectedCellsElement = function () {\n\t            var rows = this.parent.getDataRows();\n\t            var cells = [];\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n\t            }\n\t            return cells;\n\t        };\n\t        Selection.prototype.mouseMoveHandler = function (e) {\n\t            e.preventDefault();\n\t            var gBRect = this.parent.element.getBoundingClientRect();\n\t            var x1 = this.x;\n\t            var y1 = this.y;\n\t            var position = util_1.getPosition(e);\n\t            var x2 = position.x - gBRect.left;\n\t            var y2 = position.y - gBRect.top;\n\t            var tmp;\n\t            var target = ej2_base_3.closest(e.target, 'tr');\n\t            this.isDragged = true;\n\t            if (!target) {\n\t                target = ej2_base_3.closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n\t            }\n\t            if (x1 > x2) {\n\t                tmp = x2;\n\t                x2 = x1;\n\t                x1 = tmp;\n\t            }\n\t            if (y1 > y2) {\n\t                tmp = y2;\n\t                y2 = y1;\n\t                y1 = tmp;\n\t            }\n\t            this.element.style.left = x1 + 'px';\n\t            this.element.style.top = y1 + 'px';\n\t            this.element.style.width = x2 - x1 + 'px';\n\t            this.element.style.height = y2 - y1 + 'px';\n\t            if (target && !e.ctrlKey && !e.shiftKey) {\n\t                var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n\t                this.selectRowsByRange(this.startIndex, rowIndex);\n\t            }\n\t        };\n\t        Selection.prototype.mouseUpHandler = function (e) {\n\t            document.body.classList.remove('e-disableuserselect');\n\t            ej2_base_3.remove(this.element);\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n\t            ej2_base_1.EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.mouseDownHandler = function (e) {\n\t            var target = e.target;\n\t            var gridElement = util_1.parentsUntil(target, 'e-grid');\n\t            if (gridElement && gridElement.id !== this.parent.element.id) {\n\t                return;\n\t            }\n\t            if (e.shiftKey || e.ctrlKey) {\n\t                e.preventDefault();\n\t            }\n\t            if (this.parent.allowRowDragAndDrop && target.classList.contains('e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n\t                if (!this.isRowType() || this.isSingleSel() || ej2_base_3.closest(target, 'td').classList.contains('e-selectionbackground')) {\n\t                    this.isDragged = false;\n\t                    return;\n\t                }\n\t                document.body.classList.add('e-disableuserselect');\n\t                var tr = ej2_base_3.closest(e.target, 'tr');\n\t                var gBRect = this.parent.element.getBoundingClientRect();\n\t                var postion = util_1.getPosition(e);\n\t                this.startIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t                this.x = postion.x - gBRect.left;\n\t                this.y = postion.y - gBRect.top;\n\t                this.element = ej2_base_3.createElement('div', { className: 'e-griddragarea' });\n\t                this.parent.getContent().appendChild(this.element);\n\t                ej2_base_1.EventHandler.add(this.parent.getContent(), 'mousemove', this.mouseMoveHandler, this);\n\t                ej2_base_1.EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n\t            }\n\t        };\n\t        Selection.prototype.clearSelAfterRefresh = function (e) {\n\t            if (e.requestType !== 'virtualscroll') {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        Selection.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeSelection, this);\n\t            this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.dataReady, this.dataReady, this);\n\t            this.parent.on(events.dataReady, this.clearSelAfterRefresh, this);\n\t            this.parent.on(events.columnPositionChanged, this.clearSelection, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t        };\n\t        Selection.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeSelection);\n\t            this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.dataReady, this.dataReady);\n\t            this.parent.off(events.dataReady, this.clearSelAfterRefresh);\n\t            this.parent.off(events.columnPositionChanged, this.clearSelection);\n\t        };\n\t        Selection.prototype.dataReady = function (e) {\n\t            if (e.requestType !== 'virtualscroll') {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        ;\n\t        Selection.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'single') {\n\t                if (this.selectedRowCellIndexes.length > 1) {\n\t                    this.clearCellSelection();\n\t                }\n\t                if (this.selectedRowIndexes.length > 1) {\n\t                    this.clearRowSelection();\n\t                }\n\t                this.enableSelectMultiTouch = false;\n\t                this.hidePopUp();\n\t            }\n\t            if (!ej2_base_2.isNullOrUndefined(e.properties.mode) ||\n\t                !ej2_base_2.isNullOrUndefined(e.properties.cellSelectionMode)) {\n\t                this.clearSelection();\n\t            }\n\t        };\n\t        Selection.prototype.hidePopUp = function () {\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            this.selectRow(this.parent.selectedRowIndex);\n\t        };\n\t        Selection.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch;\n\t            this.isMultiShiftRequest = e.shiftKey;\n\t            this.popUpClickHandler(e);\n\t            if (target.classList.contains('e-rowcell')) {\n\t                this.target = target;\n\t                this.rowCellSelectionHandler(parseInt(target.parentElement.getAttribute('aria-rowindex'), 10), parseInt(target.getAttribute('aria-colindex'), 10));\n\t                if (ej2_base_1.Browser.isDevice && this.parent.selectionSettings.type === 'multiple') {\n\t                    this.showPopup(e);\n\t                }\n\t            }\n\t            this.isMultiCtrlRequest = false;\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-rowselect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSelectMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSelectMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Selection.prototype.showPopup = function (e) {\n\t            util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n\t                (this.selectionSettings.type === 'multiple' &&\n\t                    (this.selectedRecords.length > 1 || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n\t        };\n\t        Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n\t            if (!this.isMultiCtrlRequest && !this.isMultiShiftRequest) {\n\t                if (!this.isDragged) {\n\t                    this.selectRow(rowIndex, true);\n\t                }\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t            }\n\t            else if (this.isMultiShiftRequest) {\n\t                this.selectRowsByRange(ej2_base_2.isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n\t                this.selectCellsByRange(ej2_base_2.isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n\t            }\n\t            else {\n\t                this.addRowsToSelection([rowIndex]);\n\t                this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n\t            }\n\t            this.isDragged = false;\n\t        };\n\t        Selection.prototype.keyPressHandler = function (e) {\n\t            var checkScroll;\n\t            var preventDefault;\n\t            switch (e.action) {\n\t                case 'downArrow':\n\t                    checkScroll = true;\n\t                    this.downArrowKey();\n\t                    break;\n\t                case 'upArrow':\n\t                    checkScroll = true;\n\t                    this.upArrowKey();\n\t                    break;\n\t                case 'rightArrow':\n\t                    preventDefault = true;\n\t                    this.rightArrowKey();\n\t                    break;\n\t                case 'leftArrow':\n\t                    preventDefault = true;\n\t                    this.leftArrowKey();\n\t                    break;\n\t                case 'home':\n\t                    preventDefault = true;\n\t                    this.homeKey();\n\t                    break;\n\t                case 'end':\n\t                    preventDefault = true;\n\t                    this.endKey();\n\t                    break;\n\t                case 'ctrlHome':\n\t                    preventDefault = true;\n\t                    this.ctrlHomeKey();\n\t                    break;\n\t                case 'ctrlEnd':\n\t                    preventDefault = true;\n\t                    this.ctrlEndKey();\n\t                    break;\n\t                case 'shiftDown':\n\t                    this.shiftDownKey();\n\t                    break;\n\t                case 'shiftUp':\n\t                    this.shiftUpKey();\n\t                    break;\n\t                case 'shiftRight':\n\t                    this.shiftRightKey();\n\t                    break;\n\t                case 'shiftLeft':\n\t                    this.shiftLeftKey();\n\t                    break;\n\t                case 'escape':\n\t                    preventDefault = true;\n\t                    this.clearSelection();\n\t                    break;\n\t                case 'ctrlPlusA':\n\t                    preventDefault = true;\n\t                    this.ctrlPlusA();\n\t                    break;\n\t            }\n\t            if (checkScroll) {\n\t                var scrollElem = this.parent.getContent().firstElementChild;\n\t                if (this.selectedRecords.length || this.selectedRowCellIndexes.length) {\n\t                    var row = this.selectedRecords.length ? this.selectedRecords[0] :\n\t                        this.parent.getRowByIndex(this.selectedRowCellIndexes[0].rowIndex);\n\t                    var height = row.offsetHeight;\n\t                    var rowIndex = row.rowIndex;\n\t                    scrollElem.scrollTop = scrollElem.scrollTop + (e.action === 'downArrow' ? height : height * -1);\n\t                    if (this.checkVisible(row) &&\n\t                        rowIndex !== 0 && this.parent.getContentTable().querySelector('tbody').children.length !== rowIndex + 1) {\n\t                        e.preventDefault();\n\t                    }\n\t                }\n\t            }\n\t            if (preventDefault) {\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        Selection.prototype.checkVisible = function (element) {\n\t            var st = window.scrollY;\n\t            var y = element.getBoundingClientRect().top + st;\n\t            return y + 36 < (window.innerHeight + st) - this.getRowHeight(element) && y > (st - element.offsetHeight) +\n\t                this.getRowHeight(element);\n\t        };\n\t        Selection.prototype.getRowHeight = function (element) {\n\t            return element.getBoundingClientRect().height;\n\t        };\n\t        Selection.prototype.ctrlPlusA = function () {\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                this.selectRowsByRange(0, this.parent.getRows().length - 1);\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n\t            }\n\t        };\n\t        Selection.prototype.downArrowKey = function () {\n\t            this.applyDownUpKey(1, !ej2_base_2.isUndefined(this.parent.selectedRowIndex) && this.parent.selectedRowIndex + 1 < this.parent.getRows().length, !ej2_base_2.isUndefined(this.prevECIdxs) &&\n\t                this.prevECIdxs.rowIndex + 1 < this.parent.getRows().length);\n\t        };\n\t        Selection.prototype.upArrowKey = function () {\n\t            this.applyDownUpKey(-1, !ej2_base_2.isUndefined(this.parent.selectedRowIndex) && this.parent.selectedRowIndex - 1 > -1, !ej2_base_2.isUndefined(this.prevECIdxs) && this.prevECIdxs.rowIndex - 1 > -1);\n\t        };\n\t        Selection.prototype.applyDownUpKey = function (key, cond1, cond2) {\n\t            var gObj = this.parent;\n\t            if (this.isRowType() && cond1) {\n\t                this.selectRow(gObj.selectedRowIndex + key, true);\n\t                this.applyUpDown(gObj.selectedRowIndex);\n\t            }\n\t            if (this.isCellType() && cond2) {\n\t                this.selectCell({ rowIndex: this.prevECIdxs.rowIndex + key, cellIndex: this.prevECIdxs.cellIndex }, true);\n\t            }\n\t        };\n\t        Selection.prototype.applyUpDown = function (rowIndex) {\n\t            var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n\t            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n\t            this.addAttribute(this.target);\n\t        };\n\t        Selection.prototype.rightArrowKey = function () {\n\t            this.preSelectedCellIndex = this.prevECIdxs;\n\t            this.applyRightLeftKey(1, 0, !ej2_base_2.isUndefined(this.prevECIdxs) && this.prevECIdxs.cellIndex + 1 < this.parent.getColumns().length);\n\t        };\n\t        Selection.prototype.leftArrowKey = function () {\n\t            this.preSelectedCellIndex = this.prevECIdxs;\n\t            this.applyRightLeftKey(-1, this.parent.getColumns().length - 1, !ej2_base_2.isUndefined(this.prevECIdxs) && this.prevECIdxs.cellIndex - 1 > -1);\n\t        };\n\t        Selection.prototype.applyRightLeftKey = function (key1, key2, cond) {\n\t            var gObj = this.parent;\n\t            var cellIndex;\n\t            var rowIndex;\n\t            if (!ej2_base_2.isNullOrUndefined(this.prevECIdxs)) {\n\t                cellIndex = this.prevECIdxs.cellIndex;\n\t                rowIndex = this.prevECIdxs.rowIndex;\n\t            }\n\t            if (this.isCellType()) {\n\t                if (cond && this.prevECIdxs.cellIndex + key1 > -1 &&\n\t                    this.prevECIdxs.cellIndex + key1 < this.parent.getColumns().length) {\n\t                    cellIndex = this.prevECIdxs.cellIndex + key1;\n\t                    rowIndex = this.prevECIdxs.rowIndex;\n\t                    this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t                }\n\t                else if (this.prevECIdxs.rowIndex + key1 > -1 &&\n\t                    this.prevECIdxs.rowIndex + key1 < this.parent.getRows().length) {\n\t                    cellIndex = key2;\n\t                    rowIndex = this.prevECIdxs.rowIndex + key1;\n\t                    this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n\t                }\n\t                if (this.isCellHide({ rowIndex: rowIndex, cellIndex: cellIndex })) {\n\t                    if (!((cellIndex === 0 && rowIndex === 0) ||\n\t                        (cellIndex === gObj.getColumns().length - 1 && rowIndex === gObj.getRows().length - 1))) {\n\t                        this.applyRightLeftKey(key1, key2, cond);\n\t                    }\n\t                    else {\n\t                        this.selectCell(this.preSelectedCellIndex, true);\n\t                    }\n\t                }\n\t            }\n\t            else if (this.isRowType()) {\n\t                var cellIndex_1 = parseInt(this.target.getAttribute('aria-colindex'), 10);\n\t                var rowElement = ej2_base_3.closest(this.target, 'tr');\n\t                if (cellIndex_1 + key1 > -1 && cellIndex_1 + key1 < this.parent.getColumns().length) {\n\t                    var cell = rowElement.querySelectorAll('.e-rowcell')[cellIndex_1 + key1];\n\t                    if (cell) {\n\t                        if (!cell.classList.contains('e-hide')) {\n\t                            this.addAttribute(cell);\n\t                        }\n\t                        else {\n\t                            key1 += key1;\n\t                            this.applyRightLeftKey(key1, key2, cond);\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    this.addAttribute(this.target);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.homeKey = function () {\n\t            this.applyHomeEndKey({ rowIndex: this.currentIndex || 0, cellIndex: 0 });\n\t        };\n\t        Selection.prototype.endKey = function () {\n\t            this.applyHomeEndKey({ rowIndex: this.currentIndex || 0, cellIndex: this.parent.getColumns().length - 1 });\n\t        };\n\t        Selection.prototype.applyHomeEndKey = function (key) {\n\t            if (this.isCellType()) {\n\t                this.selectCell(key, true);\n\t                if (this.isCellHide(key)) {\n\t                    if (key.cellIndex > 0) {\n\t                        this.applyRightLeftKey(-1, this.parent.getColumns().length - 1, true);\n\t                    }\n\t                    else {\n\t                        this.applyRightLeftKey(1, 0, true);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.addAttribute(this.parent.getCellFromIndex(key.rowIndex, key.cellIndex));\n\t            }\n\t        };\n\t        Selection.prototype.shiftDownKey = function () {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isRowType() && !this.isSingleSel()) {\n\t                if (!ej2_base_2.isUndefined(this.prevRowIndex)) {\n\t                    var endIndex = ej2_base_2.isUndefined(gObj.selectedRowIndex) ? this.prevRowIndex + 1 :\n\t                        (gObj.selectedRowIndex + 1 < this.parent.getRows().length ?\n\t                            gObj.selectedRowIndex + 1 : gObj.selectedRowIndex);\n\t                    if (endIndex < this.parent.getRows().length) {\n\t                        this.selectRowsByRange(this.prevRowIndex, endIndex);\n\t                        this.applyUpDown(endIndex);\n\t                    }\n\t                }\n\t                else {\n\t                    this.selectRow(0, true);\n\t                }\n\t            }\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                if (!ej2_base_2.isUndefined(this.prevCIdxs)) {\n\t                    if (this.prevECIdxs.rowIndex + 1 < this.parent.getRows().length) {\n\t                        this.selectCellsByRange(this.prevCIdxs, { rowIndex: this.prevECIdxs.rowIndex + 1, cellIndex: this.prevECIdxs.cellIndex });\n\t                    }\n\t                }\n\t                else {\n\t                    this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: 1, cellIndex: 0 });\n\t                }\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.shiftUpKey = function () {\n\t            var gObj = this.parent;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isRowType() && !ej2_base_2.isUndefined(this.prevRowIndex) && !this.isSingleSel()) {\n\t                var endIndex = ej2_base_2.isUndefined(gObj.selectedRowIndex) ? (this.prevRowIndex - 1 > -1 ? (this.prevRowIndex - 1) : 0) :\n\t                    ((gObj.selectedRowIndex - 1) > -1 ? gObj.selectedRowIndex - 1 : gObj.selectedRowIndex);\n\t                this.selectRowsByRange(this.prevRowIndex, endIndex);\n\t                this.applyUpDown(endIndex);\n\t            }\n\t            if (this.isCellType() && !ej2_base_2.isUndefined(this.prevECIdxs) && (this.prevECIdxs.rowIndex - 1) > -1 && !this.isSingleSel()) {\n\t                this.selectCellsByRange(this.prevCIdxs, { rowIndex: this.prevECIdxs.rowIndex - 1, cellIndex: this.prevECIdxs.cellIndex });\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.shiftLeftKey = function () {\n\t            this.applyShiftLeftRightKey(-1, !ej2_base_2.isUndefined(this.prevCIdxs) && this.prevECIdxs.cellIndex - 1 > -1);\n\t        };\n\t        Selection.prototype.shiftRightKey = function () {\n\t            this.applyShiftLeftRightKey(1, !ej2_base_2.isUndefined(this.prevCIdxs) && this.prevECIdxs.cellIndex + 1 < this.parent.getColumns().length);\n\t        };\n\t        Selection.prototype.applyShiftLeftRightKey = function (key, cond) {\n\t            var gObj = this.parent;\n\t            var cellIndex;\n\t            this.isMultiShiftRequest = true;\n\t            if (this.isCellType() && !this.isSingleSel()) {\n\t                if (cond) {\n\t                    cellIndex = { rowIndex: this.prevECIdxs.rowIndex, cellIndex: this.prevECIdxs.cellIndex + key };\n\t                    this.selectCellsByRange(this.prevCIdxs, {\n\t                        rowIndex: this.prevECIdxs.rowIndex, cellIndex: this.prevECIdxs.cellIndex + key\n\t                    });\n\t                }\n\t                else if (!this.isSingleSel()) {\n\t                    if (this.selectionSettings.cellSelectionMode === 'flow' &&\n\t                        (key > 0 ? this.prevECIdxs.rowIndex + 1 < this.parent.pageSettings.pageSize : this.prevECIdxs.rowIndex - 1 > -1)) {\n\t                        cellIndex = { rowIndex: this.prevECIdxs.rowIndex + key, cellIndex: key > 0 ? 0 : gObj.getColumns().length - 1 };\n\t                        this.selectCellsByRange(this.prevCIdxs, {\n\t                            rowIndex: this.prevECIdxs.rowIndex + key, cellIndex: key > 0 ? 0 : gObj.getColumns().length - 1\n\t                        });\n\t                    }\n\t                }\n\t                if (!ej2_base_2.isNullOrUndefined(cellIndex) && this.isCellHide(cellIndex) && !((cellIndex.rowIndex === 0 && cellIndex.cellIndex === 0) ||\n\t                    (cellIndex.rowIndex === gObj.getRows().length - 1 && cellIndex.cellIndex === gObj.getColumns().length))) {\n\t                    this.applyShiftLeftRightKey(key, cellIndex.cellIndex > 0);\n\t                }\n\t            }\n\t            this.isMultiShiftRequest = false;\n\t        };\n\t        Selection.prototype.ctrlHomeKey = function () {\n\t            this.applyCtrlHomeEndKey(0, 0);\n\t        };\n\t        Selection.prototype.ctrlEndKey = function () {\n\t            this.applyCtrlHomeEndKey(this.parent.getRows().length - 1, this.parent.getColumns().length - 1);\n\t        };\n\t        Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, colIndex) {\n\t            if (this.isRowType()) {\n\t                this.selectRow(rowIndex, true);\n\t                this.addAttribute(this.parent.getCellFromIndex(rowIndex, colIndex));\n\t            }\n\t            if (this.isCellType()) {\n\t                this.selectCell({ rowIndex: rowIndex, cellIndex: colIndex }, true);\n\t                if (this.isCellHide({ rowIndex: rowIndex, cellIndex: colIndex })) {\n\t                    if (colIndex > 0) {\n\t                        this.applyRightLeftKey(-1, this.parent.getColumns().length - 1, true);\n\t                    }\n\t                    else {\n\t                        this.applyRightLeftKey(1, 0, true);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n\t            var args = [];\n\t            for (var _i = 3; _i < arguments.length; _i++) {\n\t                args[_i - 3] = arguments[_i];\n\t            }\n\t            if (row) {\n\t                var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n\t                var cell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n\t                if (cell) {\n\t                    cells.push(cell);\n\t                }\n\t                for (var i = 0, len = cells.length; i < len; i++) {\n\t                    if (isAdd) {\n\t                        ej2_base_3.classList(cells[i], args.slice(), []);\n\t                        cells[i].setAttribute('aria-selected', 'true');\n\t                    }\n\t                    else {\n\t                        ej2_base_3.classList(cells[i], [], args.slice());\n\t                        cells[i].removeAttribute('aria-selected');\n\t                    }\n\t                }\n\t            }\n\t            this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n\t        };\n\t        Selection.prototype.isRowType = function () {\n\t            return this.selectionSettings.mode === 'row' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isCellType = function () {\n\t            return this.selectionSettings.mode === 'cell' || this.selectionSettings.mode === 'both';\n\t        };\n\t        Selection.prototype.isSingleSel = function () {\n\t            return this.selectionSettings.type === 'single';\n\t        };\n\t        Selection.prototype.isCellHide = function (cellIndex) {\n\t            return !this.parent.getColumns()[cellIndex.cellIndex].visible;\n\t        };\n\t        Selection.prototype.getRenderer = function () {\n\t            if (ej2_base_2.isNullOrUndefined(this.contentRenderer)) {\n\t                this.contentRenderer = this.factory.getRenderer(enum_1.RenderType.Content);\n\t            }\n\t            return this.contentRenderer;\n\t        };\n\t        return Selection;\n\t    }());\n\t    exports.Selection = Selection;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(11), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Search = (function () {\n\t        function Search(parent) {\n\t            this.parent = parent;\n\t            this.addEventListener();\n\t        }\n\t        Search.prototype.search = function (searchString) {\n\t            var gObj = this.parent;\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n\t                return;\n\t            }\n\t            searchString = searchString.toLowerCase();\n\t            if (searchString !== gObj.searchSettings.key) {\n\t                gObj.searchSettings.key = searchString;\n\t                gObj.dataBind();\n\t            }\n\t        };\n\t        Search.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.searchComplete, this.onActionComplete, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        };\n\t        Search.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.searchComplete, this.onActionComplete);\n\t            this.parent.off(events.destroy, this.destroy);\n\t        };\n\t        Search.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        Search.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (!ej2_base_1.isNullOrUndefined(e.properties.key)) {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n\t                });\n\t            }\n\t            else {\n\t                this.parent.notify(events.modelChanged, {\n\t                    requestType: 'searching', type: events.actionBegin\n\t                });\n\t            }\n\t        };\n\t        Search.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n\t            }));\n\t        };\n\t        Search.prototype.getModuleName = function () {\n\t            return 'search';\n\t        };\n\t        return Search;\n\t    }());\n\t    exports.Search = Search;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ShowHide = (function () {\n\t        function ShowHide(parent) {\n\t            this.parent = parent;\n\t        }\n\t        ShowHide.prototype.show = function (columnName, showBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, showBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = true;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.hide = function (columnName, hideBy) {\n\t            var keys = this.getToggleFields(columnName);\n\t            var columns = this.getColumns(keys, hideBy);\n\t            columns.forEach(function (value) {\n\t                value.visible = false;\n\t            });\n\t            this.setVisible(columns);\n\t        };\n\t        ShowHide.prototype.getToggleFields = function (key) {\n\t            var finalized = [];\n\t            if (typeof key === 'string') {\n\t                finalized = [key];\n\t            }\n\t            else {\n\t                finalized = key;\n\t            }\n\t            return finalized;\n\t        };\n\t        ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n\t            var _this = this;\n\t            var columns = util_1.iterateArrayOrObject(keys, function (key, index) {\n\t                return util_1.iterateArrayOrObject(_this.parent.getColumns(), function (item, index) {\n\t                    if (item[getKeyBy] === key) {\n\t                        return item;\n\t                    }\n\t                    return undefined;\n\t                })[0];\n\t            });\n\t            return columns;\n\t        };\n\t        ShowHide.prototype.setVisible = function (columns) {\n\t            columns = ej2_base_1.isNullOrUndefined(columns) ? this.parent.getColumns() : columns;\n\t            this.parent.notify(events.columnVisibilityChanged, columns);\n\t        };\n\t        return ShowHide;\n\t    }());\n\t    exports.ShowHide = ShowHide;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(35)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, constant_1, width_controller_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Scroll = (function () {\n\t        function Scroll(parent) {\n\t            this.lastScrollTop = 0;\n\t            this.previousValues = { top: 0, left: 0 };\n\t            this.oneTimeReady = true;\n\t            this.parent = parent;\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Scroll.prototype.getModuleName = function () {\n\t            return 'scroll';\n\t        };\n\t        Scroll.prototype.setWidth = function () {\n\t            this.parent.element.style.width = ej2_base_3.formatUnit(this.parent.width);\n\t            if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar.element) {\n\t                this.parent.toolbarModule.toolbar.refreshOverflow();\n\t            }\n\t        };\n\t        Scroll.prototype.setHeight = function () {\n\t            var content = this.parent.getContent().firstChild;\n\t            content.style.height = ej2_base_3.formatUnit(this.parent.height);\n\t            this.ensureOverflow(content);\n\t        };\n\t        Scroll.prototype.setPadding = function () {\n\t            var content = this.parent.getHeaderContent();\n\t            var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n\t            var cssProps = this.getCssProperties();\n\t            content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n\t            content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n\t        };\n\t        Scroll.prototype.removePadding = function (rtl) {\n\t            var cssProps = this.getCssProperties(rtl);\n\t            this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n\t            this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n\t        };\n\t        Scroll.prototype.refresh = function () {\n\t            if (this.parent.height !== '100%') {\n\t                return;\n\t            }\n\t            var content = this.parent.getContent();\n\t            this.parent.element.style.height = '100%';\n\t            var height = this.widthService.getSiblingsHeight(content);\n\t            content.style.height = 'calc(100% - ' + height + 'px)';\n\t        };\n\t        Scroll.prototype.getThreshold = function () {\n\t            var appName = ej2_base_1.Browser.info.name;\n\t            if (appName === 'mozilla') {\n\t                return 0.5;\n\t            }\n\t            return 1;\n\t        };\n\t        Scroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.contentReady, this.wireEvents, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Scroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.contentReady, this.wireEvents);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Scroll.prototype.onContentScroll = function (scrollTarget) {\n\t            var _this = this;\n\t            var element = scrollTarget;\n\t            var isHeader = element.classList.contains('e-headercontent');\n\t            return function (e) {\n\t                if (_this.content.querySelector('tbody') === null) {\n\t                    return;\n\t                }\n\t                var target = e.target;\n\t                var left = target.scrollLeft;\n\t                var sLimit = target.scrollWidth;\n\t                var isFooter = target.classList.contains('e-summarycontent');\n\t                if (_this.previousValues.left === left) {\n\t                    _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n\t                    return;\n\t                }\n\t                element.scrollLeft = left;\n\t                if (isFooter) {\n\t                    _this.header.scrollLeft = left;\n\t                }\n\t                _this.previousValues.left = left;\n\t                _this.parent.notify(constant_1.scroll, { left: left });\n\t            };\n\t        };\n\t        Scroll.prototype.wireEvents = function () {\n\t            if (this.oneTimeReady) {\n\t                this.content = this.parent.getContent().firstChild;\n\t                this.header = this.parent.getHeaderContent().firstChild;\n\t                ej2_base_1.EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n\t                ej2_base_1.EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n\t                if (this.parent.aggregates.length) {\n\t                    ej2_base_1.EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n\t                }\n\t                this.refresh();\n\t                this.oneTimeReady = false;\n\t            }\n\t            var table = this.parent.getContentTable();\n\t            if (table.scrollHeight < this.parent.getContent().clientHeight) {\n\t                ej2_base_2.addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n\t            }\n\t            if (!this.parent.enableVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t                this.content.scrollTop = this.previousValues.top;\n\t            }\n\t            if (!this.parent.enableColumnVirtualization) {\n\t                this.content.scrollLeft = this.previousValues.left;\n\t            }\n\t        };\n\t        Scroll.prototype.getCssProperties = function (rtl) {\n\t            var css = {};\n\t            var enableRtl = ej2_base_3.isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n\t            css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n\t            css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n\t            return css;\n\t        };\n\t        Scroll.prototype.ensureOverflow = function (content) {\n\t            content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n\t        };\n\t        Scroll.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            this.setPadding();\n\t            this.oneTimeReady = true;\n\t            if (this.parent.height === 'auto') {\n\t                this.removePadding();\n\t            }\n\t            this.wireEvents();\n\t            this.setHeight();\n\t            this.setWidth();\n\t        };\n\t        Scroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.removePadding();\n\t            ej2_base_2.removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n\t            ej2_base_2.removeClass([this.parent.getContent().firstChild], 'e-content');\n\t            this.parent.getContent().firstChild.style.height = '';\n\t            this.parent.element.style.width = '';\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n\t        };\n\t        Scroll.getScrollBarWidth = function () {\n\t            return util_1.getScrollBarWidth();\n\t        };\n\t        return Scroll;\n\t    }());\n\t    exports.Scroll = Scroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Print = (function () {\n\t        function Print(parent, scrollModule) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.contentReady.bind(this));\n\t            this.scrollModule = scrollModule;\n\t        }\n\t        Print.prototype.print = function () {\n\t            var gObj = this.parent;\n\t            this.isPrinting = true;\n\t            this.element = gObj.element.cloneNode(true);\n\t            this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n\t            this.printWindow.moveTo(0, 0);\n\t            this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n\t            if (gObj.allowPaging) {\n\t                if (gObj.printMode === 'currentpage') {\n\t                    this.element.querySelector('.e-gridpager').style.display = 'none';\n\t                    this.contentReady();\n\t                }\n\t                else {\n\t                    this.isPagerDisabled = true;\n\t                    gObj.allowPaging = false;\n\t                    gObj.dataBind();\n\t                }\n\t            }\n\t            else {\n\t                this.contentReady();\n\t            }\n\t        };\n\t        Print.prototype.contentReady = function () {\n\t            var gObj = this.parent;\n\t            if (!this.isPrinting) {\n\t                return;\n\t            }\n\t            if (this.isPagerDisabled) {\n\t                this.element = gObj.element.cloneNode(true);\n\t                this.isPagerDisabled = false;\n\t                gObj.allowPaging = true;\n\t            }\n\t            if (gObj.height !== 'auto') {\n\t                var cssProps = this.scrollModule.getCssProperties();\n\t                var contentDiv = this.element.querySelector('.e-content');\n\t                var headerDiv = this.element.querySelector('.e-gridheader');\n\t                contentDiv.style.height = 'auto';\n\t                contentDiv.style.overflowY = 'auto';\n\t                headerDiv.style[cssProps.padding] = '';\n\t                headerDiv.firstElementChild.style[cssProps.border] = '';\n\t            }\n\t            if (gObj.allowGrouping) {\n\t                if (!gObj.groupSettings.columns.length) {\n\t                    this.element.querySelector('.e-groupdroparea').style.display = 'none';\n\t                }\n\t                else {\n\t                    this.removeColGroup(gObj.groupSettings.columns.length);\n\t                    util_1.removeElement(this.element, '.e-grouptopleftcell');\n\t                    util_1.removeElement(this.element, '.e-recordpluscollapse');\n\t                    util_1.removeElement(this.element, '.e-indentcell');\n\t                    util_1.removeElement(this.element, '.e-recordplusexpand');\n\t                }\n\t            }\n\t            if (gObj.toolbar) {\n\t                this.element.querySelector('.e-toolbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowFiltering && gObj.filterSettings.type === 'filterbar') {\n\t                this.element.querySelector('.e-filterbar').style.display = 'none';\n\t            }\n\t            if (gObj.allowSelection) {\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-active'), 'e-active');\n\t                ej2_base_1.removeClass(this.element.querySelectorAll('.e-cellselection1background'), 'e-cellselection1background');\n\t            }\n\t            var args = {\n\t                requestType: 'print', element: this.element,\n\t                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]')\n\t            };\n\t            gObj.trigger(events.beforePrint, args);\n\t            ej2_base_2.print(this.element, this.printWindow);\n\t            this.isPrinting = false;\n\t            gObj.trigger(events.printComplete, args);\n\t        };\n\t        Print.prototype.removeColGroup = function (depth) {\n\t            var groupCaption = this.element.querySelectorAll('.e-groupcaption');\n\t            var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n\t            for (var i = 0; i < groupCaption.length; i++) {\n\t                groupCaption[i].setAttribute('colspan', colSpan);\n\t            }\n\t            var colGroups = this.element.querySelectorAll('colgroup');\n\t            for (var i = 0; i < colGroups.length; i++) {\n\t                for (var j = 0; j < depth; j++) {\n\t                    colGroups[i].childNodes[j].style.display = 'none';\n\t                }\n\t            }\n\t        };\n\t        Print.prototype.destroy = function () {\n\t        };\n\t        Print.prototype.getModuleName = function () {\n\t            return 'print';\n\t        };\n\t        return Print;\n\t    }());\n\t    exports.Print = Print;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(15), __webpack_require__(5), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, ej2_base_3, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AggregateColumn = (function (_super) {\n\t        __extends(AggregateColumn, _super);\n\t        function AggregateColumn() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.templateFn = {};\n\t            return _this;\n\t        }\n\t        AggregateColumn.prototype.setFormatter = function () {\n\t            var valueFormatter = new value_formatter_1.ValueFormatter();\n\t            if (this.format && (this.format.skeleton || this.format.format)) {\n\t                this.formatFn = valueFormatter.getFormatFunction(this.format);\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getFormatter = function () {\n\t            return this.formatFn;\n\t        };\n\t        AggregateColumn.prototype.setTemplate = function (helper) {\n\t            if (helper === void 0) { helper = {}; }\n\t            if (this.footerTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = { fn: ej2_base_1.compile(this.footerTemplate, helper),\n\t                    property: 'footerTemplate' };\n\t            }\n\t            if (this.groupFooterTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = { fn: ej2_base_1.compile(this.groupFooterTemplate, helper),\n\t                    property: 'groupFooterTemplate' };\n\t            }\n\t            if (this.groupCaptionTemplate !== undefined) {\n\t                this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = { fn: ej2_base_1.compile(this.groupCaptionTemplate, helper),\n\t                    property: 'groupCaptionTemplate' };\n\t            }\n\t        };\n\t        AggregateColumn.prototype.getTemplate = function (type) {\n\t            return this.templateFn[ej2_base_2.getEnumValue(enum_1.CellType, type)];\n\t        };\n\t        return AggregateColumn;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"columnName\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"format\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n\t    __decorate([\n\t        ej2_base_3.Property()\n\t    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n\t    exports.AggregateColumn = AggregateColumn;\n\t    var AggregateRow = (function (_super) {\n\t        __extends(AggregateRow, _super);\n\t        function AggregateRow() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AggregateRow;\n\t    }(ej2_base_3.ChildProperty));\n\t    __decorate([\n\t        ej2_base_3.Collection([], AggregateColumn)\n\t    ], AggregateRow.prototype, \"columns\", void 0);\n\t    exports.AggregateRow = AggregateRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(8), __webpack_require__(5), __webpack_require__(44), __webpack_require__(11), __webpack_require__(6), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_data_1, ej2_base_2, ej2_buttons_1, events, ej2_popups_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnChooser = (function () {\n\t        function ColumnChooser(parent, serviceLocator) {\n\t            this.showColumn = [];\n\t            this.hideColumn = [];\n\t            this.isDlgOpen = false;\n\t            this.dlghide = false;\n\t            this.initialOpenDlg = true;\n\t            this.stateChangeColumns = [];\n\t            this.isInitialOpen = false;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        ColumnChooser.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t        };\n\t        ColumnChooser.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n\t        };\n\t        ColumnChooser.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.initialEnd, this.render);\n\t        };\n\t        ColumnChooser.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderDlgContent();\n\t            this.getShowHideService = this.serviceLocator.getService('showHideService');\n\t        };\n\t        ColumnChooser.prototype.clickHandler = function (e) {\n\t            var targetElement = e.target;\n\t            if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc')) || !ej2_base_1.isNullOrUndefined(ej2_base_2.closest(targetElement, '.e-cc-toolbar'))) {\n\t                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n\t                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n\t                        this.isDlgOpen = true;\n\t                        return;\n\t                    }\n\t                }\n\t                else if (targetElement.classList.contains('e-cc-cancel')) {\n\t                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n\t                    this.columnChooserSearch('');\n\t                    this.removeCancelIcon();\n\t                }\n\t            }\n\t            else {\n\t                if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n\t                    this.dlgObj.hide();\n\t                    this.isDlgOpen = false;\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.hideDialog = function () {\n\t            if (!ej2_base_1.isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n\t                this.dlgObj.hide();\n\t                this.isDlgOpen = false;\n\t            }\n\t        };\n\t        ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n\t            if (!this.dlgObj.visible) {\n\t                var pos = { X: null, Y: null };\n\t                var args1 = {\n\t                    requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n\t                    columns: this.parent.getColumns()\n\t                };\n\t                this.parent.trigger(events.beforeOpenColumnChooser, args1);\n\t                this.refreshCheckboxState();\n\t                this.dlgObj.dataBind();\n\t                this.dlgObj.element.style.maxHeight = '430px';\n\t                var elementVisible = this.dlgObj.element.style.display;\n\t                this.dlgObj.element.style.display = 'block';\n\t                var newpos = ej2_popups_1.calculateRelativeBasedPosition(ej2_base_2.closest(target, '.e-toolbar-item'), this.dlgObj.element);\n\t                this.dlgObj.element.style.display = elementVisible;\n\t                this.dlgObj.element.style.top = newpos.top + ej2_base_2.closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n\t                var dlgWidth = 250;\n\t                if (!ej2_base_1.isNullOrUndefined(ej2_base_2.closest(target, '.e-bigger'))) {\n\t                    this.dlgObj.width = 253;\n\t                }\n\t                if (this.parent.element.classList.contains('e-device')) {\n\t                    this.dlgObj.target = document.body;\n\t                    this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                    this.dlgObj.refreshPosition();\n\t                    this.dlgObj.open = this.mOpenDlg.bind(this);\n\t                }\n\t                else {\n\t                    if (this.parent.enableRtl) {\n\t                        this.dlgObj.element.style.left = target.offsetLeft + 'px';\n\t                    }\n\t                    else {\n\t                        this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + ej2_base_2.closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n\t                    }\n\t                }\n\t                this.removeCancelIcon();\n\t                this.dlgObj.show();\n\t                this.wireEvents();\n\t            }\n\t            else {\n\t                this.unWireEvents();\n\t                this.hideDialog();\n\t                this.addcancelIcon();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n\t            if (this.dlgObj.visible) {\n\t                this.hideDialog();\n\t                return;\n\t            }\n\t            if (!this.isInitialOpen) {\n\t                this.dlgObj.content = this.renderChooserList();\n\t            }\n\t            else {\n\t                this.refreshCheckboxState();\n\t            }\n\t            this.dlgObj.dataBind();\n\t            this.dlgObj.position = { X: 'center', Y: 'center' };\n\t            if (ej2_base_1.isNullOrUndefined(X)) {\n\t                this.dlgObj.position = { X: 'center', Y: 'center' };\n\t                this.dlgObj.refreshPosition();\n\t            }\n\t            else {\n\t                this.dlgObj.element.style.top = '';\n\t                this.dlgObj.element.style.left = '';\n\t                this.dlgObj.element.style.top = Y + 'px';\n\t                this.dlgObj.element.style.left = X + 'px';\n\t            }\n\t            this.dlgObj.show();\n\t            this.isInitialOpen = true;\n\t            this.wireEvents();\n\t        };\n\t        ColumnChooser.prototype.renderDlgContent = function () {\n\t            var y;\n\t            this.dlgDiv = ej2_base_1.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n\t            this.parent.element.appendChild(this.dlgDiv);\n\t            var xpos = this.parent.element.getBoundingClientRect().width - 250;\n\t            var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n\t            var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t            if (!ej2_base_1.isNullOrUndefined(tarElement)) {\n\t                y = tarElement.getBoundingClientRect().top;\n\t            }\n\t            var pos = { X: null, Y: null };\n\t            this.dlgObj = new ej2_popups_1.Dialog({\n\t                header: this.l10n.getConstant('ChooseColumns'),\n\t                showCloseIcon: false,\n\t                closeOnEscape: false,\n\t                locale: this.parent.locale,\n\t                visible: false,\n\t                enableRtl: this.parent.enableRtl,\n\t                target: document.getElementById(this.parent.element.id),\n\t                buttons: [{\n\t                        click: this.confirmDlgBtnClick.bind(this),\n\t                        buttonModel: {\n\t                            content: this.l10n.getConstant('OKButton'), isPrimary: true,\n\t                            cssClass: 'e-cc e-cc_okbtn',\n\t                        }\n\t                    },\n\t                    {\n\t                        click: this.clearActions.bind(this),\n\t                        buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n\t                    }],\n\t                content: this.renderChooserList(),\n\t                width: 250,\n\t                cssClass: 'e-cc',\n\t                animationSettings: { effect: 'None' },\n\t            });\n\t            this.dlgObj.appendTo(this.dlgDiv);\n\t            util_1.changeButtonType(this.dlgObj.element);\n\t        };\n\t        ColumnChooser.prototype.renderChooserList = function () {\n\t            this.mainDiv = ej2_base_1.createElement('div', { className: 'e-main-div e-cc' });\n\t            var searchDiv = ej2_base_1.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n\t            var ccsearchele = ej2_base_1.createElement('input', {\n\t                className: 'e-ccsearch e-cc e-input',\n\t                attrs: { placeholder: this.l10n.getConstant('Search') }\n\t            });\n\t            var ccsearchicon = ej2_base_1.createElement('span', { className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon' });\n\t            var conDiv = ej2_base_1.createElement('div', { className: 'e-cc-contentdiv' });\n\t            this.innerDiv = ej2_base_1.createElement('div', { className: 'e-innerdiv e-cc' });\n\t            searchDiv.appendChild(ccsearchele);\n\t            searchDiv.appendChild(ccsearchicon);\n\t            ccsearchele.addEventListener('focus', function () {\n\t                ccsearchele.parentElement.classList.add('e-input-focus');\n\t            });\n\t            ccsearchele.addEventListener('blur', function () {\n\t                ccsearchele.parentElement.classList.remove('e-input-focus');\n\t            });\n\t            var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n\t            this.innerDiv.appendChild(innerDivContent);\n\t            conDiv.appendChild(this.innerDiv);\n\t            this.mainDiv.appendChild(searchDiv);\n\t            this.mainDiv.appendChild(conDiv);\n\t            return this.mainDiv;\n\t        };\n\t        ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n\t            this.stateChangeColumns = [];\n\t            if (!ej2_base_1.isNullOrUndefined(args)) {\n\t                if (this.hideColumn.length) {\n\t                    this.columnStateChange(this.hideColumn, false);\n\t                }\n\t                if (this.showColumn.length) {\n\t                    this.columnStateChange(this.showColumn, true);\n\t                }\n\t                var params = {\n\t                    requestType: 'columnstate', element: this.parent.element,\n\t                    columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n\t                };\n\t                this.parent.trigger(events.actionComplete, params);\n\t                this.getShowHideService.setVisible(this.stateChangeColumns);\n\t                this.clearActions();\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n\t            for (var index = 0; index < stateColumns.length; index++) {\n\t                var colUid = stateColumns[index].replace('e-cc', '');\n\t                var currentCol = this.parent.getColumnByUid(colUid);\n\t                currentCol.visible = state;\n\t                this.stateChangeColumns.push(currentCol);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.clearActions = function () {\n\t            this.hideColumn = [];\n\t            this.showColumn = [];\n\t            this.unWireEvents();\n\t            this.hideDialog();\n\t            this.addcancelIcon();\n\t        };\n\t        ColumnChooser.prototype.checkstatecolumn = function (e) {\n\t            var targetEle = e.event.target;\n\t            var uncheckColumn = targetEle.id;\n\t            if (e.checked) {\n\t                if (this.hideColumn.indexOf(uncheckColumn) !== -1) {\n\t                    this.hideColumn.splice(this.hideColumn.indexOf(uncheckColumn), 1);\n\t                }\n\t                if (this.showColumn.indexOf(uncheckColumn) === -1) {\n\t                    this.showColumn.push(uncheckColumn);\n\t                }\n\t            }\n\t            else {\n\t                if (this.showColumn.indexOf(uncheckColumn) !== -1) {\n\t                    this.showColumn.splice(this.showColumn.indexOf(uncheckColumn), 1);\n\t                }\n\t                if (this.hideColumn.indexOf(uncheckColumn) === -1) {\n\t                    this.hideColumn.push(uncheckColumn);\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n\t            var clearSearch = false;\n\t            var fltrCol;\n\t            if (searchVal === '') {\n\t                this.removeCancelIcon();\n\t                fltrCol = this.parent.getColumns();\n\t                clearSearch = true;\n\t            }\n\t            else {\n\t                fltrCol = new ej2_data_1.DataManager(this.parent.getColumns()).executeLocal(new ej2_data_1.Query()\n\t                    .where('headerText', 'startswith', searchVal, true));\n\t            }\n\t            if (fltrCol.length) {\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.classList.remove('e-ccnmdiv');\n\t                this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n\t                if (!clearSearch) {\n\t                    this.addcancelIcon();\n\t                }\n\t            }\n\t            else {\n\t                var nMatchele = ej2_base_1.createElement('span', { className: 'e-cc e-nmatch' });\n\t                nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n\t                this.innerDiv.innerHTML = ' ';\n\t                this.innerDiv.appendChild(nMatchele);\n\t                this.innerDiv.classList.add('e-ccnmdiv');\n\t            }\n\t            this.flag = true;\n\t            this.stopTimer();\n\t        };\n\t        ColumnChooser.prototype.wireEvents = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n\t        };\n\t        ColumnChooser.prototype.unWireEvents = function () {\n\t            var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n\t            ej2_base_2.EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n\t            this.ulElement = ej2_base_1.createElement('ul', { className: 'e-ccul-ele e-cc' });\n\t            for (var i = 0; i < gdCol.length; i++) {\n\t                var columns = gdCol[i];\n\t                this.renderCheckbox(columns);\n\t            }\n\t            return this.ulElement;\n\t        };\n\t        ColumnChooser.prototype.refreshCheckboxState = function () {\n\t            this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n\t            this.columnChooserSearch('');\n\t            for (var i = 0; i < this.parent.element.querySelectorAll('.e-cc-chbox').length; i++) {\n\t                var element = this.parent.element.querySelectorAll('.e-cc-chbox')[i];\n\t                var column = this.parent.getColumnByUid(element.id.replace('e-cc', ''));\n\t                if (column.visible) {\n\t                    element.checked = true;\n\t                }\n\t                else {\n\t                    element.checked = false;\n\t                }\n\t            }\n\t        };\n\t        ColumnChooser.prototype.renderCheckbox = function (column) {\n\t            var cclist;\n\t            var hideColState;\n\t            var showColState;\n\t            var checkBoxObj;\n\t            if (column.showInColumnChooser) {\n\t                cclist = ej2_base_1.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n\t                var cclabe = ej2_base_1.createElement('label', { className: 'e-cc' });\n\t                var cccheckboxlist = ej2_base_1.createElement('input', {\n\t                    className: 'e-cc e-cc-chbox ',\n\t                    id: 'e-cc' + column.uid, attrs: { type: 'checkbox' }\n\t                });\n\t                cclabe.appendChild(cccheckboxlist);\n\t                hideColState = this.hideColumn.indexOf('e-cc' + column.uid) === -1 ? false : true;\n\t                showColState = this.showColumn.indexOf('e-cc' + column.uid) === -1 ? false : true;\n\t                checkBoxObj = new ej2_buttons_1.CheckBox({ label: column.headerText, checked: true, change: this.checkstatecolumn.bind(this) });\n\t                if ((column.visible && !hideColState) || showColState) {\n\t                    checkBoxObj.checked = true;\n\t                }\n\t                else {\n\t                    checkBoxObj.checked = false;\n\t                }\n\t                checkBoxObj.appendTo(cccheckboxlist);\n\t                cclist.appendChild(cclabe);\n\t                this.ulElement.appendChild(cclist);\n\t            }\n\t        };\n\t        ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n\t            this.addcancelIcon();\n\t            this.searchValue = e.target.value;\n\t            var proxy = this;\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        ColumnChooser.prototype.startTimer = function (e) {\n\t            var proxy = this;\n\t            var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n\t            this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n\t        };\n\t        ColumnChooser.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        ColumnChooser.prototype.addcancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.removeCancelIcon = function () {\n\t            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n\t        };\n\t        ColumnChooser.prototype.mOpenDlg = function () {\n\t            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n\t            var chele = this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0];\n\t            chele.focus();\n\t        };\n\t        ColumnChooser.prototype.getModuleName = function () {\n\t            return 'ColumnChooser';\n\t        };\n\t        return ColumnChooser;\n\t    }());\n\t    exports.ColumnChooser = ColumnChooser;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_44__;\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(18), __webpack_require__(47), __webpack_require__(48), __webpack_require__(37), __webpack_require__(55), __webpack_require__(38), __webpack_require__(40), __webpack_require__(57), __webpack_require__(58), __webpack_require__(59), __webpack_require__(60), __webpack_require__(41), __webpack_require__(46), __webpack_require__(61), __webpack_require__(63), __webpack_require__(66), __webpack_require__(70), __webpack_require__(82), __webpack_require__(80), __webpack_require__(81), __webpack_require__(83), __webpack_require__(43), __webpack_require__(84), __webpack_require__(87), __webpack_require__(86)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, data_1, sort_1, page_1, selection_1, filter_1, search_1, scroll_1, resize_1, reorder_1, row_reorder_1, group_1, print_1, detail_row_1, toolbar_1, aggregate_1, virtual_scroll_1, edit_1, batch_edit_1, inline_edit_1, normal_edit_1, dialog_edit_1, column_chooser_1, excel_export_1, pdf_export_1, export_helper_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(data_1);\n\t    __export(sort_1);\n\t    __export(page_1);\n\t    __export(selection_1);\n\t    __export(filter_1);\n\t    __export(search_1);\n\t    __export(scroll_1);\n\t    __export(resize_1);\n\t    __export(reorder_1);\n\t    __export(row_reorder_1);\n\t    __export(group_1);\n\t    __export(print_1);\n\t    __export(detail_row_1);\n\t    __export(toolbar_1);\n\t    __export(aggregate_1);\n\t    __export(virtual_scroll_1);\n\t    __export(edit_1);\n\t    __export(batch_edit_1);\n\t    __export(inline_edit_1);\n\t    __export(normal_edit_1);\n\t    __export(dialog_edit_1);\n\t    __export(column_chooser_1);\n\t    __export(excel_export_1);\n\t    __export(pdf_export_1);\n\t    __export(export_helper_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(3), __webpack_require__(7), __webpack_require__(11), __webpack_require__(25)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, grid_1, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DetailRow = (function () {\n\t        function DetailRow(parent) {\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t        }\n\t        DetailRow.prototype.clickHandler = function (e) {\n\t            this.toogleExpandcollapse(ej2_base_1.closest(e.target, 'td'));\n\t        };\n\t        DetailRow.prototype.toogleExpandcollapse = function (target) {\n\t            var gObj = this.parent;\n\t            var parent = 'parentDetails';\n\t            if (target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) {\n\t                var tr = target.parentElement;\n\t                var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n\t                if (target.classList.contains('e-detailrowcollapse')) {\n\t                    var key = 'records';\n\t                    var currentViewData = gObj.allowGrouping && gObj.groupSettings.columns.length ?\n\t                        gObj.currentViewData[key] : gObj.currentViewData;\n\t                    var data = currentViewData[tr.getAttribute('aria-rowindex')];\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = '';\n\t                    }\n\t                    else if (gObj.getDetailTemplate() || gObj.childGrid) {\n\t                        var detailRow = ej2_base_1.createElement('tr', { className: 'e-detailrow' });\n\t                        var detailCell = ej2_base_1.createElement('td', { className: 'e-detailcell' });\n\t                        detailCell.setAttribute('colspan', this.parent.getVisibleColumns().length.toString());\n\t                        for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n\t                            detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                        }\n\t                        detailRow.appendChild(ej2_base_1.createElement('td', { className: 'e-detailindentcell' }));\n\t                        detailRow.appendChild(detailCell);\n\t                        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n\t                        if (gObj.detailTemplate) {\n\t                            util_1.appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate'));\n\t                        }\n\t                        else {\n\t                            gObj.childGrid[parent] = {\n\t                                parentID: gObj.element.id,\n\t                                parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n\t                                parentKeyField: gObj.childGrid.queryString,\n\t                                parentKeyFieldValue: data[gObj.childGrid.queryString],\n\t                                parentRowData: data\n\t                            };\n\t                            var grid = new grid_1.Grid(gObj.childGrid);\n\t                            var modules = grid.getInjectedModules();\n\t                            var injectedModues = gObj.getInjectedModules();\n\t                            if (!modules || modules.length !== injectedModues.length) {\n\t                                grid.setInjectedModules(injectedModues);\n\t                            }\n\t                            var gridElem = ej2_base_1.createElement('div', {\n\t                                id: 'child' + util_1.parents(tr, 'e-grid').length +\n\t                                    '_grid' + tr.rowIndex + util_1.getUid('')\n\t                            });\n\t                            detailCell.appendChild(gridElem);\n\t                            grid.appendTo(gridElem);\n\t                        }\n\t                        gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n\t                        gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data });\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n\t                    this.aria.setExpand(target, true);\n\t                }\n\t                else {\n\t                    if (this.isDetailRow(nextRow)) {\n\t                        nextRow.style.display = 'none';\n\t                    }\n\t                    ej2_base_1.classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n\t                    ej2_base_1.classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n\t                    this.aria.setExpand(target, false);\n\t                }\n\t            }\n\t        };\n\t        DetailRow.prototype.isDetailRow = function (row) {\n\t            return row && row.classList.contains('e-detailrow');\n\t        };\n\t        DetailRow.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.destroy, this.destroy);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t        };\n\t        DetailRow.prototype.getTDfromIndex = function (index, className) {\n\t            var tr = this.parent.getDataRows()[index];\n\t            if (tr && tr.querySelector(className)) {\n\t                return tr.querySelector(className);\n\t            }\n\t            return null;\n\t        };\n\t        DetailRow.prototype.expand = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowcollapse')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.collapse = function (target) {\n\t            if (!isNaN(target)) {\n\t                target = this.getTDfromIndex(target, '.e-detailrowexpand');\n\t            }\n\t            if (target && target.classList.contains('e-detailrowexpand')) {\n\t                this.toogleExpandcollapse(target);\n\t            }\n\t        };\n\t        DetailRow.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        DetailRow.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        DetailRow.prototype.expandCollapse = function (isExpand) {\n\t            var td;\n\t            var rows = this.parent.getDataRows();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                isExpand ? this.expand(td) : this.collapse(td);\n\t            }\n\t        };\n\t        DetailRow.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            switch (e.action) {\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t                case 'altUpArrow':\n\t                case 'altDownArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n\t                        e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        DetailRow.prototype.getModuleName = function () {\n\t            return 'detailRow';\n\t        };\n\t        return DetailRow;\n\t    }());\n\t    exports.DetailRow = DetailRow;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(25)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Sort = (function () {\n\t        function Sort(parent, sortSettings, sortedColumns) {\n\t            this.contentRefresh = true;\n\t            this.isModelChanged = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.sortSettings = sortSettings;\n\t            this.sortedColumns = sortedColumns;\n\t            this.addEventListener();\n\t        }\n\t        Sort.prototype.updateModel = function () {\n\t            var sortedColumn = { field: this.columnName, direction: this.direction };\n\t            var index;\n\t            var gCols = this.parent.groupSettings.columns;\n\t            var flag = false;\n\t            if (!this.isMultiSort) {\n\t                if (!gCols.length) {\n\t                    this.sortSettings.columns = [sortedColumn];\n\t                }\n\t                else {\n\t                    var sortedCols = [];\n\t                    for (var i = 0, len = gCols.length; i < len; i++) {\n\t                        index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n\t                        if (this.columnName === gCols[i]) {\n\t                            flag = true;\n\t                            sortedCols.push(sortedColumn);\n\t                        }\n\t                        else {\n\t                            var sCol = this.getSortColumnFromField(gCols[i]);\n\t                            sortedCols.push({ field: sCol.field, direction: sCol.direction });\n\t                        }\n\t                    }\n\t                    if (!flag) {\n\t                        sortedCols.push(sortedColumn);\n\t                    }\n\t                    this.sortSettings.columns = sortedCols;\n\t                }\n\t            }\n\t            else {\n\t                index = this.getSortedColsIndexByField(this.columnName);\n\t                if (index > -1) {\n\t                    this.sortSettings.columns[index] = sortedColumn;\n\t                }\n\t                else {\n\t                    this.sortSettings.columns.push(sortedColumn);\n\t                }\n\t                this.sortSettings.columns = this.sortSettings.columns;\n\t            }\n\t            this.parent.dataBind();\n\t            this.lastSortedCol = this.columnName;\n\t        };\n\t        Sort.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n\t            } : { requestType: 'sorting', type: events.actionComplete };\n\t            this.isRemove = false;\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, args));\n\t        };\n\t        Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n\t            if (this.parent.getColumnByField(columnName).allowSorting === false) {\n\t                return;\n\t            }\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, {\n\t                    instance: this, handler: this.sortColumn,\n\t                    arg1: columnName, arg2: direction, arg3: isMultiSort\n\t                });\n\t                return;\n\t            }\n\t            this.columnName = columnName;\n\t            this.direction = direction;\n\t            this.isMultiSort = isMultiSort;\n\t            this.removeSortIcons();\n\t            var column = this.parent.getColumnHeaderByField(columnName);\n\t            this.updateSortedCols(columnName, isMultiSort);\n\t            this.updateModel();\n\t        };\n\t        Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n\t            if (!isMultiSort) {\n\t                if (this.parent.allowGrouping) {\n\t                    for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n\t                        if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n\t                            this.sortedColumns.splice(i, 1);\n\t                            len--;\n\t                            i--;\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    this.sortedColumns.splice(0, this.sortedColumns.length);\n\t                }\n\t            }\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                this.sortedColumns.push(columnName);\n\t            }\n\t        };\n\t        Sort.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (this.contentRefresh) {\n\t                var args = this.sortSettings.columns.length ? {\n\t                    columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionBegin\n\t                } : { requestType: 'sorting', type: events.actionBegin };\n\t                this.parent.notify(events.modelChanged, args);\n\t            }\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.clearSorting = function () {\n\t            var cols = util_1.getActualPropFromColl(this.sortSettings.columns);\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeSortColumn(cols[i].field);\n\t            }\n\t        };\n\t        Sort.prototype.isActionPrevent = function () {\n\t            return util_1.isActionPrevent(this.parent);\n\t        };\n\t        Sort.prototype.removeSortColumn = function (field) {\n\t            var gObj = this.parent;\n\t            var cols = this.sortSettings.columns;\n\t            if (this.isActionPrevent()) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n\t                return;\n\t            }\n\t            this.removeSortIcons();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                        continue;\n\t                    }\n\t                    this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n\t                    cols.splice(i, 1);\n\t                    this.isRemove = true;\n\t                    if (this.isModelChanged) {\n\t                        this.parent.notify(events.modelChanged, {\n\t                            requestType: 'sorting', type: events.actionBegin\n\t                        });\n\t                    }\n\t                    break;\n\t                }\n\t            }\n\t            this.addSortIcons();\n\t        };\n\t        Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n\t            var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Sort.prototype.getModuleName = function () {\n\t            return 'sort';\n\t        };\n\t        Sort.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                this.isMultiSort = this.sortSettings.columns.length > 1;\n\t                for (var _i = 0, _a = gObj.sortSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    if (this.sortedColumns.indexOf(col.field) > -1) {\n\t                        this.sortColumn(col.field, col.direction, true);\n\t                    }\n\t                }\n\t                this.isMultiSort = false;\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Sort.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.sortComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t        };\n\t        Sort.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.sortComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t        };\n\t        Sort.prototype.destroy = function () {\n\t            this.isModelChanged = false;\n\t            if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t            this.clearSorting();\n\t            this.isModelChanged = true;\n\t            this.removeEventListener();\n\t        };\n\t        Sort.prototype.clickHandler = function (e) {\n\t            this.popUpClickHandler(e);\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (target && !e.target.classList.contains('e-grptogglebtn') &&\n\t                !e.target.classList.contains('e-stackedheadercell') &&\n\t                !e.target.classList.contains('e-stackedheadercelldiv') &&\n\t                !e.target.classList.contains('e-rhandler')) {\n\t                var gObj = this.parent;\n\t                var field = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid')).field;\n\t                var direction = !target.querySelectorAll('.e-ascending').length ? 'ascending' :\n\t                    'descending';\n\t                if (!e.shiftKey) {\n\t                    this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n\t                }\n\t                else {\n\t                    this.removeSortColumn(field);\n\t                }\n\t                if (ej2_base_1.Browser.isDevice) {\n\t                    this.showPopUp(e);\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.showPopUp = function (e) {\n\t            var target = ej2_base_3.closest(e.target, '.e-headercell');\n\t            if (!ej2_base_2.isNullOrUndefined(target)) {\n\t                util_1.setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n\t            }\n\t        };\n\t        Sort.prototype.popUpClickHandler = function (e) {\n\t            var target = e.target;\n\t            if (ej2_base_3.closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n\t                ej2_base_3.closest(target, '.e-gridpopup')) {\n\t                if (target.classList.contains('e-sortdirect')) {\n\t                    if (!target.classList.contains('e-spanclicked')) {\n\t                        target.classList.add('e-spanclicked');\n\t                        this.enableSortMultiTouch = true;\n\t                    }\n\t                    else {\n\t                        target.classList.remove('e-spanclicked');\n\t                        this.enableSortMultiTouch = false;\n\t                        this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        Sort.prototype.addSortIcons = function () {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var filterElement;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, cols[i].direction);\n\t                if (this.isMultiSort && cols.length > 1) {\n\t                    header.querySelector('.e-headercelldiv').insertBefore(ej2_base_3.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n\t                }\n\t                filterElement = header.querySelector('.e-sortfilterdiv');\n\t                if (cols[i].direction === 'ascending') {\n\t                    ej2_base_3.classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n\t                }\n\t                else {\n\t                    ej2_base_3.classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.removeSortIcons = function (position) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = this.sortSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var i = position ? position : 0, len = !ej2_base_2.isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n\t                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n\t                    continue;\n\t                }\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                this.aria.setSort(header, 'none');\n\t                ej2_base_3.classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n\t                if (header.querySelector('.e-sortnumber')) {\n\t                    header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n\t                }\n\t            }\n\t        };\n\t        Sort.prototype.getSortColumnFromField = function (field) {\n\t            for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n\t                if (this.sortSettings.columns[i].field === field) {\n\t                    return this.sortSettings.columns[i];\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Sort.prototype.updateAriaAttr = function () {\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (fieldNames.indexOf(col) === -1) {\n\t                    continue;\n\t                }\n\t                var header = this.parent.getColumnHeaderByField(col);\n\t                this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n\t            }\n\t        };\n\t        Sort.prototype.refreshSortIcons = function () {\n\t            this.removeSortIcons();\n\t            this.isMultiSort = true;\n\t            this.removeSortIcons();\n\t            this.addSortIcons();\n\t            this.isMultiSort = false;\n\t            this.updateAriaAttr();\n\t        };\n\t        return Sort;\n\t    }());\n\t    exports.Sort = Sort;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(49), __webpack_require__(52), __webpack_require__(54), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, pager_1, pager_dropdown_1, external_message_1, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    pager_1.Pager.Inject(external_message_1.ExternalMessage, pager_dropdown_1.PagerDropDown);\n\t    var Page = (function () {\n\t        function Page(parent, pageSettings) {\n\t            this.parent = parent;\n\t            this.pageSettings = pageSettings;\n\t            this.addEventListener();\n\t        }\n\t        Page.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Page.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            var pagerObj;\n\t            if (!ej2_base_2.isNullOrUndefined(this.parent.pagerTemplate)) {\n\t                this.pageSettings.template = this.parent.pagerTemplate;\n\t            }\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-gridpager' });\n\t            pagerObj = util_1.extend({}, ej2_base_1.extend({}, util_1.getActualProperties(this.pageSettings)), {\n\t                click: this.clickHandler.bind(this),\n\t                dropDownChanged: this.onSelect.bind(this),\n\t                enableRtl: gObj.enableRtl, locale: gObj.locale,\n\t                created: this.addAriaAttr.bind(this)\n\t            }, ['parentObj', 'propName']);\n\t            this.pagerObj = new pager_1.Pager(pagerObj);\n\t        };\n\t        Page.prototype.onSelect = function (e) {\n\t            this.pageSettings.pageSize = e.pageSize;\n\t            this.pageSettings.currentPage = 1;\n\t        };\n\t        Page.prototype.addAriaAttr = function () {\n\t            var _this = this;\n\t            if (!(this.pageSettings.template)) {\n\t                var numericContainer = this.element.querySelector('.e-numericcontainer');\n\t                var links = numericContainer.querySelectorAll('a');\n\t                for (var i = 0; i < links.length; i++) {\n\t                    if (this.parent.getContentTable()) {\n\t                        links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n\t                    }\n\t                }\n\t                var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n\t                classList.forEach(function (value) {\n\t                    var element = _this.element.querySelector(value);\n\t                    if (_this.parent.getContentTable()) {\n\t                        element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n\t                    }\n\t                });\n\t            }\n\t        };\n\t        Page.prototype.dataReady = function (e) {\n\t            this.updateModel(e);\n\t        };\n\t        Page.prototype.refresh = function () {\n\t            this.pagerObj.refresh();\n\t        };\n\t        Page.prototype.goToPage = function (pageNo) {\n\t            this.pagerObj.goToPage(pageNo);\n\t        };\n\t        Page.prototype.updateModel = function (e) {\n\t            this.parent.pageSettings.totalRecordsCount = e.count;\n\t            this.parent.dataBind();\n\t        };\n\t        Page.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n\t                type: events.actionComplete\n\t            }));\n\t        };\n\t        Page.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                this.pagerObj[prop] = newProp[prop];\n\t            }\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.clickHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (this.isForceCancel || util_1.isActionPrevent(gObj)) {\n\t                if (!this.isForceCancel) {\n\t                    gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n\t                    this.pagerObj.currentPage = gObj.pageSettings.currentPage;\n\t                    this.isForceCancel = true;\n\t                }\n\t                else {\n\t                    this.isForceCancel = false;\n\t                }\n\t                e.cancel = true;\n\t                return;\n\t            }\n\t            var prevPage = this.pageSettings.currentPage;\n\t            this.pageSettings.currentPage = e.currentPage;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'paging',\n\t                previousPage: prevPage,\n\t                currentPage: e.currentPage,\n\t                type: events.actionBegin\n\t            });\n\t        };\n\t        Page.prototype.keyPressHandler = function (e) {\n\t            if (this.canSkipAction(e.action)) {\n\t                return;\n\t            }\n\t            if (e.action in keyActions) {\n\t                e.preventDefault();\n\t                this.element.querySelector(keyActions[e.action]).click();\n\t            }\n\t        };\n\t        Page.prototype.canSkipAction = function (action) {\n\t            var page = {\n\t                pageUp: function (el) { return el.scrollTop !== 0; },\n\t                pageDown: function (el) { return !(el.scrollTop >= el.scrollHeight - el.clientHeight); }\n\t            };\n\t            var activeElement = document.activeElement;\n\t            if (activeElement.classList.contains('e-content') &&\n\t                activeElement.isEqualNode(this.parent.getContent().firstElementChild) && ['pageUp', 'pageDown'].indexOf(action) !== -1) {\n\t                return page[action](this.parent.getContent().firstChild);\n\t            }\n\t            return false;\n\t        };\n\t        Page.prototype.updateExternalMessage = function (message) {\n\t            if (!this.pagerObj.enableExternalMessage) {\n\t                this.pagerObj.enableExternalMessage = true;\n\t                this.pagerObj.dataBind();\n\t            }\n\t            this.pagerObj.externalMessage = message;\n\t            this.pagerObj.dataBind();\n\t        };\n\t        Page.prototype.appendToElement = function (e) {\n\t            this.parent.element.appendChild(this.element);\n\t            this.parent.setGridPager(this.element);\n\t            this.pagerObj.appendTo(this.element);\n\t        };\n\t        Page.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t                this.appendToElement();\n\t            }\n\t        };\n\t        Page.prototype.addEventListener = function () {\n\t            this.handlers = {\n\t                load: this.render,\n\t                end: this.appendToElement,\n\t                ready: this.dataReady,\n\t                complete: this.onActionComplete,\n\t                updateLayout: this.enableAfterRender,\n\t                inboundChange: this.onPropertyChanged,\n\t                keyPress: this.keyPressHandler\n\t            };\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialLoad, this.handlers.load, this);\n\t            this.parent.on(events.initialEnd, this.handlers.end, this);\n\t            this.parent.on(events.dataReady, this.handlers.ready, this);\n\t            this.parent.on(events.pageComplete, this.handlers.complete, this);\n\t            this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n\t            this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n\t            this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n\t        };\n\t        Page.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialLoad, this.handlers.load);\n\t            this.parent.off(events.initialEnd, this.handlers.end);\n\t            this.parent.off(events.dataReady, this.handlers.ready);\n\t            this.parent.off(events.pageComplete, this.handlers.complete);\n\t            this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n\t            this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n\t            this.parent.off(events.keyPressed, this.handlers.keyPress);\n\t        };\n\t        Page.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            this.pagerObj.destroy();\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        return Page;\n\t    }());\n\t    exports.Page = Page;\n\t    var keyActions = {\n\t        pageUp: '.e-prev',\n\t        pageDown: '.e-next',\n\t        ctrlAltPageDown: '.e-last',\n\t        ctrlAltPageUp: '.e-first',\n\t        altPageUp: '.e-pp',\n\t        altPageDown: '.e-np'\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(50), __webpack_require__(51), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, numeric_container_1, pager_message_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Pager = (function (_super) {\n\t        __extends(Pager, _super);\n\t        function Pager(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.defaultConstants = {\n\t                currentPageInfo: '{0} of {1} pages',\n\t                totalItemsInfo: '({0} items)',\n\t                firstPageTooltip: 'Go to first page',\n\t                lastPageTooltip: 'Go to last page',\n\t                nextPageTooltip: 'Go to next page',\n\t                previousPageTooltip: 'Go to previous page',\n\t                nextPagerTooltip: 'Go to next pager',\n\t                previousPagerTooltip: 'Go to previous pager',\n\t                pagerDropDown: 'Items per page'\n\t            };\n\t            _this.containerModule = new numeric_container_1.NumericContainer(_this);\n\t            _this.pagerMessageModule = new pager_message_1.PagerMessage(_this);\n\t            return _this;\n\t        }\n\t        Pager.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            if (this.enableExternalMessage) {\n\t                modules.push({\n\t                    member: 'externalMessage',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.checkpagesizes()) {\n\t                modules.push({\n\t                    member: 'pagerdropdown',\n\t                    args: [this]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Pager.prototype.preRender = function () {\n\t        };\n\t        Pager.prototype.render = function () {\n\t            if (this.template) {\n\t                this.pagerTemplate();\n\t            }\n\t            else {\n\t                this.initLocalization();\n\t                this.updateRTL();\n\t                this.totalRecordsCount = this.totalRecordsCount || 0;\n\t                this.renderFirstPrevDivForDevice();\n\t                this.containerModule.render();\n\t                if (this.enablePagerMessage) {\n\t                    this.pagerMessageModule.render();\n\t                }\n\t                this.renderNextLastDivForDevice();\n\t                if (this.checkpagesizes()) {\n\t                    this.pagerdropdownModule.render();\n\t                }\n\t                this.addAriaLabel();\n\t                if (this.enableExternalMessage && this.externalMessageModule) {\n\t                    this.externalMessageModule.render();\n\t                }\n\t                this.refresh();\n\t                this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n\t            }\n\t        };\n\t        Pager.prototype.getPersistData = function () {\n\t            var keyEntity = ['currentPage', 'pageSize'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Pager.prototype.destroy = function () {\n\t            _super.prototype.destroy.call(this);\n\t            this.containerModule.destroy();\n\t            this.pagerMessageModule.destroy();\n\t            this.element.innerHTML = '';\n\t        };\n\t        Pager.prototype.getModuleName = function () {\n\t            return 'pager';\n\t        };\n\t        Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            if (this.isDestroyed) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'pageCount':\n\t                        this.containerModule.refreshNumericLinks();\n\t                        this.containerModule.refresh();\n\t                        break;\n\t                    case 'currentPage':\n\t                        if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n\t                            this.currentPageChanged();\n\t                        }\n\t                        break;\n\t                    case 'pageSize':\n\t                    case 'totalRecordsCount':\n\t                    case 'customText':\n\t                        this.refresh();\n\t                        break;\n\t                    case 'pageSizes':\n\t                        if (this.checkpagesizes()) {\n\t                            this.pagerdropdownModule.destroy();\n\t                            this.pagerdropdownModule.render();\n\t                        }\n\t                        this.refresh();\n\t                        break;\n\t                    case 'template':\n\t                        this.templateFn = this.compile(this.template);\n\t                        this.refresh();\n\t                        break;\n\t                    case 'locale':\n\t                        this.initLocalization();\n\t                        this.refresh();\n\t                        break;\n\t                    case 'enableExternalMessage':\n\t                        if (this.enableExternalMessage) {\n\t                            this.externalMessageModule.render();\n\t                        }\n\t                        break;\n\t                    case 'externalMessage':\n\t                        if (this.externalMessageModule) {\n\t                            this.externalMessageModule.refresh();\n\t                        }\n\t                        break;\n\t                    case 'enableRtl':\n\t                        this.updateRTL();\n\t                        break;\n\t                    case 'enablePagerMessage':\n\t                        if (this.enablePagerMessage) {\n\t                            this.pagerMessageModule.showMessage();\n\t                        }\n\t                        else {\n\t                            this.pagerMessageModule.hideMessage();\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Pager.prototype.getLocalizedLabel = function (key) {\n\t            return this.localeObj.getConstant(key);\n\t        };\n\t        Pager.prototype.goToPage = function (pageNo) {\n\t            if (this.checkGoToPage(pageNo)) {\n\t                this.currentPage = pageNo;\n\t                this.dataBind();\n\t            }\n\t        };\n\t        Pager.prototype.checkpagesizes = function () {\n\t            if (this.pageSizes === true || this.pageSizes.length) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n\t            if (newPageNo !== this.currentPage) {\n\t                this.previousPageNo = this.currentPage;\n\t            }\n\t            if (!ej2_base_3.isNullOrUndefined(oldPageNo)) {\n\t                this.previousPageNo = oldPageNo;\n\t            }\n\t            if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Pager.prototype.currentPageChanged = function () {\n\t            if (this.enableQueryString) {\n\t                this.updateQueryString(this.currentPage);\n\t            }\n\t            var args = { currentPage: this.currentPage, cancel: false };\n\t            this.trigger('click', args);\n\t            if (!args.cancel) {\n\t                this.refresh();\n\t            }\n\t        };\n\t        Pager.prototype.pagerTemplate = function () {\n\t            var result;\n\t            this.element.classList.add('e-pagertemplate');\n\t            this.compile(this.template);\n\t            var data = {\n\t                currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n\t                totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n\t            };\n\t            result = this.getPagerTemplate()(data);\n\t            util_1.appendChildren(this.element, result);\n\t        };\n\t        Pager.prototype.updateTotalPages = function () {\n\t            this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n\t                (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n\t        };\n\t        Pager.prototype.getPagerTemplate = function () {\n\t            return this.templateFn;\n\t        };\n\t        Pager.prototype.compile = function (template) {\n\t            if (template) {\n\t                var e = void 0;\n\t                try {\n\t                    if (document.querySelectorAll(template).length) {\n\t                        this.templateFn = ej2_base_2.compile(document.querySelector(template).innerHTML.trim());\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    this.templateFn = ej2_base_2.compile(template);\n\t                }\n\t            }\n\t            return undefined;\n\t        };\n\t        Pager.prototype.refresh = function () {\n\t            if (this.template) {\n\t                this.element.innerHTML = '';\n\t                this.updateTotalPages();\n\t                this.pagerTemplate();\n\t            }\n\t            else {\n\t                this.updateRTL();\n\t                this.containerModule.refresh();\n\t                if (this.enablePagerMessage) {\n\t                    this.pagerMessageModule.refresh();\n\t                }\n\t                if (this.enableExternalMessage && this.externalMessageModule) {\n\t                    this.externalMessageModule.refresh();\n\t                }\n\t            }\n\t        };\n\t        Pager.prototype.updateRTL = function () {\n\t            if (this.enableRtl) {\n\t                this.element.classList.add('e-rtl');\n\t            }\n\t            else {\n\t                this.element.classList.remove('e-rtl');\n\t            }\n\t        };\n\t        Pager.prototype.initLocalization = function () {\n\t            this.localeObj = new ej2_base_1.L10n(this.getModuleName(), this.defaultConstants, this.locale);\n\t        };\n\t        Pager.prototype.updateQueryString = function (value) {\n\t            var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n\t            window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n\t        };\n\t        Pager.prototype.getUpdatedURL = function (uri, key, value) {\n\t            var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n\t            if (uri.match(regx)) {\n\t                return uri.replace(regx, '$1' + key + '=' + value + '$2');\n\t            }\n\t            else {\n\t                var hash = '';\n\t                if (uri.indexOf('#') !== -1) {\n\t                    hash = uri.replace(/.*#/, '#');\n\t                    uri = uri.replace(/#.*/, '');\n\t                }\n\t                return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n\t            }\n\t        };\n\t        Pager.prototype.renderFirstPrevDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mfirst e-icons e-icon-first',\n\t                attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mprev e-icons e-icon-prev',\n\t                attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.renderNextLastDivForDevice = function () {\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mnext e-icons e-icon-next',\n\t                attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n\t            }));\n\t            this.element.appendChild(ej2_base_2.createElement('div', {\n\t                className: 'e-mlast e-icons e-icon-last',\n\t                attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n\t            }));\n\t        };\n\t        Pager.prototype.addAriaLabel = function () {\n\t            var _this = this;\n\t            var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n\t            if (!ej2_base_1.Browser.isDevice) {\n\t                classList.forEach(function (value) {\n\t                    var element = _this.element.querySelector(value);\n\t                    element.setAttribute('aria-label', element.getAttribute('title'));\n\t                });\n\t            }\n\t        };\n\t        return Pager;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"enableQueryString\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"enableExternalMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(true)\n\t    ], Pager.prototype, \"enablePagerMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(12)\n\t    ], Pager.prototype, \"pageSize\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(10)\n\t    ], Pager.prototype, \"pageCount\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(1)\n\t    ], Pager.prototype, \"currentPage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"totalRecordsCount\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"externalMessage\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property(false)\n\t    ], Pager.prototype, \"pageSizes\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property()\n\t    ], Pager.prototype, \"template\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Property('')\n\t    ], Pager.prototype, \"customText\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"click\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"dropDownChanged\", void 0);\n\t    __decorate([\n\t        ej2_base_4.Event()\n\t    ], Pager.prototype, \"created\", void 0);\n\t    Pager = __decorate([\n\t        ej2_base_4.NotifyPropertyChanges\n\t    ], Pager);\n\t    exports.Pager = Pager;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericContainer = (function () {\n\t        function NumericContainer(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        NumericContainer.prototype.render = function () {\n\t            this.pagerElement = this.pagerModule.element;\n\t            this.renderNumericContainer();\n\t            this.refreshNumericLinks();\n\t            this.wireEvents();\n\t        };\n\t        NumericContainer.prototype.refresh = function () {\n\t            this.pagerModule.updateTotalPages();\n\t            if (this.links.length) {\n\t                this.updateLinksHtml();\n\t            }\n\t            this.updateStyles();\n\t        };\n\t        NumericContainer.prototype.refreshNumericLinks = function () {\n\t            var link;\n\t            var pagerObj = this.pagerModule;\n\t            var div = pagerObj.element.querySelector('.e-numericcontainer');\n\t            var frag = document.createDocumentFragment();\n\t            div.innerHTML = '';\n\t            for (var i = 1; i <= pagerObj.pageCount; i++) {\n\t                link = ej2_base_3.createElement('a', {\n\t                    className: 'e-link e-numericitem e-spacing e-pager-default',\n\t                    attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i }\n\t                });\n\t                if (pagerObj.currentPage === i) {\n\t                    ej2_base_3.classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n\t                }\n\t                frag.appendChild(link);\n\t            }\n\t            div.appendChild(frag);\n\t            this.links = [].slice.call(div.childNodes);\n\t        };\n\t        NumericContainer.prototype.wireEvents = function () {\n\t            ej2_base_2.EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n\t        };\n\t        NumericContainer.prototype.unwireEvents = function () {\n\t            ej2_base_2.EventHandler.remove(this.pagerElement, 'click', this.clickHandler);\n\t        };\n\t        NumericContainer.prototype.destroy = function () {\n\t            this.unwireEvents();\n\t        };\n\t        NumericContainer.prototype.renderNumericContainer = function () {\n\t            this.element = ej2_base_3.createElement('div', {\n\t                className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n\t            });\n\t            this.renderFirstNPrev(this.element);\n\t            this.renderPrevPagerSet(this.element);\n\t            this.element.appendChild(ej2_base_3.createElement('div', { className: 'e-numericcontainer' }));\n\t            this.renderNextPagerSet(this.element);\n\t            this.renderNextNLast(this.element);\n\t            this.pagerModule.element.appendChild(this.element);\n\t        };\n\t        NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n\t            this.first = ej2_base_3.createElement('div', {\n\t                className: 'e-first e-icons e-icon-first',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.prev = ej2_base_3.createElement('div', {\n\t                className: 'e-prev e-icons e-icon-prev',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.first, this.prev], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n\t            this.PP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-pp e-spacing', innerHTML: '...',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.PP);\n\t        };\n\t        NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n\t            this.NP = ej2_base_3.createElement('a', {\n\t                className: 'e-link e-np e-spacing',\n\t                innerHTML: '...', attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            pagerContainer.appendChild(this.NP);\n\t        };\n\t        NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n\t            this.next = ej2_base_3.createElement('div', {\n\t                className: 'e-next e-icons e-icon-next',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            this.last = ej2_base_3.createElement('div', {\n\t                className: 'e-last e-icons e-icon-last',\n\t                attrs: {\n\t                    title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n\t                    tabindex: '-1'\n\t                }\n\t            });\n\t            ej2_base_3.append([this.next, this.last], pagerContainer);\n\t        };\n\t        NumericContainer.prototype.clickHandler = function (e) {\n\t            var pagerObj = this.pagerModule;\n\t            var target = e.target;\n\t            pagerObj.previousPageNo = pagerObj.currentPage;\n\t            if (!target.classList.contains('e-disable') && !ej2_base_1.isNullOrUndefined(target.getAttribute('index'))) {\n\t                pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n\t                pagerObj.dataBind();\n\t            }\n\t            return false;\n\t        };\n\t        NumericContainer.prototype.updateLinksHtml = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var currentPageSet;\n\t            var pageNo;\n\t            pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n\t            if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n\t                pagerObj.currentPage = pagerObj.totalPages;\n\t            }\n\t            currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n\t            if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n\t                currentPageSet = currentPageSet - 1;\n\t            }\n\t            for (var i = 0; i < pagerObj.pageCount; i++) {\n\t                pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n\t                if (pageNo <= pagerObj.totalPages) {\n\t                    this.links[i].style.display = '';\n\t                    this.links[i].setAttribute('index', pageNo.toString());\n\t                    this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n\t                    if (pagerObj.currentPage !== pageNo) {\n\t                        this.links[i].classList.add('e-pager-default');\n\t                    }\n\t                    else {\n\t                        this.links[i].classList.remove('e-pager-default');\n\t                    }\n\t                }\n\t                else {\n\t                    this.links[i].style.display = 'none';\n\t                }\n\t                ej2_base_3.classList(this.links[i], [], ['e-currentitem', 'e-active']);\n\t            }\n\t            this.first.setAttribute('index', '1');\n\t            this.last.setAttribute('index', pagerObj.totalPages.toString());\n\t            this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n\t            this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n\t            this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n\t            this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n\t            this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n\t            this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n\t        };\n\t        NumericContainer.prototype.updateStyles = function () {\n\t            this.updateFirstNPrevStyles();\n\t            this.updatePrevPagerSetStyles();\n\t            this.updateNextPagerSetStyles();\n\t            this.updateNextNLastStyles();\n\t            if (this.links.length) {\n\t                ej2_base_3.classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateFirstNPrevStyles = function () {\n\t            var firstPage = ['e-firstpage', 'e-pager-default'];\n\t            var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n\t            var prevPage = ['e-prevpage', 'e-pager-default'];\n\t            var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n\t            if (this.pagerModule.currentPage > 1) {\n\t                ej2_base_3.classList(this.prev, prevPage, prevPageDisabled);\n\t                ej2_base_3.classList(this.first, firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.prev, prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.first, firstPageDisabled, firstPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n\t            if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n\t                ej2_base_3.classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextPagerSetStyles = function () {\n\t            var pagerObj = this.pagerModule;\n\t            var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n\t            if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n\t                ej2_base_3.classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n\t            }\n\t        };\n\t        NumericContainer.prototype.updateNextNLastStyles = function () {\n\t            var lastPage = ['e-lastpage', 'e-pager-default'];\n\t            var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n\t            var nextPage = ['e-nextpage', 'e-pager-default'];\n\t            var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n\t            var pagerObj = this.pagerModule;\n\t            if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n\t                ej2_base_3.classList(this.last, lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.next, nextPageDisabled, nextPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n\t            }\n\t            else {\n\t                ej2_base_3.classList(this.last, lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.next, nextPage, nextPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n\t                ej2_base_3.classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n\t            }\n\t        };\n\t        return NumericContainer;\n\t    }());\n\t    exports.NumericContainer = NumericContainer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerMessage = (function () {\n\t        function PagerMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerMessage.prototype.render = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n\t            this.pageNoMsgElem = ej2_base_1.createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n\t            this.pageCountMsgElem = ej2_base_1.createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n\t            ej2_base_1.append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n\t            this.pagerModule.element.appendChild(div);\n\t            this.refresh();\n\t        };\n\t        PagerMessage.prototype.refresh = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n\t                    pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n\t            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n\t            this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n\t        };\n\t        PagerMessage.prototype.hideMessage = function () {\n\t            if (this.pageNoMsgElem) {\n\t                this.pageNoMsgElem.style.display = 'none';\n\t            }\n\t            if (this.pageCountMsgElem) {\n\t                this.pageCountMsgElem.style.display = 'none';\n\t            }\n\t        };\n\t        PagerMessage.prototype.showMessage = function () {\n\t            if (!this.pageNoMsgElem) {\n\t                this.render();\n\t            }\n\t            this.pageNoMsgElem.style.display = '';\n\t            this.pageCountMsgElem.style.display = '';\n\t        };\n\t        PagerMessage.prototype.destroy = function () {\n\t        };\n\t        PagerMessage.prototype.format = function (str, args) {\n\t            var regx;\n\t            for (var i = 0; i < args.length; i++) {\n\t                regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n\t                str = str.replace(regx, args[i].toString());\n\t            }\n\t            return str;\n\t        };\n\t        return PagerMessage;\n\t    }());\n\t    exports.PagerMessage = PagerMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(53)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_dropdowns_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PagerDropDown = (function () {\n\t        function PagerDropDown(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        PagerDropDown.prototype.getModuleName = function () {\n\t            return 'pagerdropdown';\n\t        };\n\t        PagerDropDown.prototype.render = function () {\n\t            var pagerObj = this.pagerModule;\n\t            this.pagerDropDownDiv = ej2_base_1.createElement('div', { className: 'e-pagesizes' });\n\t            var dropDownDiv = ej2_base_1.createElement('div', { className: 'e-pagerdropdown' });\n\t            var defaultTextDiv = ej2_base_1.createElement('div', { className: 'e-pagerconstant' });\n\t            var input = ej2_base_1.createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n\t            this.pagerCons = ej2_base_1.createElement('span', { className: 'e-constant', innerHTML: this.pagerModule.getLocalizedLabel('pagerDropDown') });\n\t            dropDownDiv.appendChild(input);\n\t            defaultTextDiv.appendChild(this.pagerCons);\n\t            this.pagerDropDownDiv.appendChild(dropDownDiv);\n\t            this.pagerDropDownDiv.appendChild(defaultTextDiv);\n\t            this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n\t            var pageSizesModule = this.pagerModule.pageSizes;\n\t            var pageSizesArray = (pageSizesModule.length ? pageSizesModule : [5, 10, 12, 20]);\n\t            var defaultValue = (pageSizesArray).indexOf(this.pagerModule.pageSize) > -1 ? this.pagerModule.pageSize : pageSizesArray[0];\n\t            this.dropDownListObject = new ej2_dropdowns_1.DropDownList({\n\t                dataSource: pageSizesArray,\n\t                value: defaultValue,\n\t                change: this.onChange.bind(this)\n\t            });\n\t            this.dropDownListObject.appendTo(input);\n\t            pagerObj.pageSize = defaultValue;\n\t            pagerObj.dataBind();\n\t            pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n\t        };\n\t        PagerDropDown.prototype.onChange = function (e) {\n\t            this.pagerModule.pageSize = this.dropDownListObject.value;\n\t            this.pagerModule.dataBind();\n\t            this.pagerModule.trigger('dropDownChanged', { pageSize: this.dropDownListObject.value });\n\t        };\n\t        PagerDropDown.prototype.destroy = function (args) {\n\t            if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n\t                this.dropDownListObject.destroy();\n\t                ej2_base_1.remove(this.pagerDropDownDiv);\n\t            }\n\t        };\n\t        return PagerDropDown;\n\t    }());\n\t    exports.PagerDropDown = PagerDropDown;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_53__;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExternalMessage = (function () {\n\t        function ExternalMessage(pagerModule) {\n\t            this.pagerModule = pagerModule;\n\t        }\n\t        ExternalMessage.prototype.getModuleName = function () {\n\t            return 'externalMessage';\n\t        };\n\t        ExternalMessage.prototype.render = function () {\n\t            this.element = ej2_base_1.createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n\t            this.pagerModule.element.appendChild(this.element);\n\t            this.refresh();\n\t        };\n\t        ExternalMessage.prototype.refresh = function () {\n\t            if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n\t                this.showMessage();\n\t                this.element.innerHTML = this.pagerModule.externalMessage;\n\t            }\n\t            else {\n\t                this.hideMessage();\n\t            }\n\t        };\n\t        ExternalMessage.prototype.hideMessage = function () {\n\t            this.element.style.display = 'none';\n\t        };\n\t        ExternalMessage.prototype.showMessage = function () {\n\t            this.element.style.display = '';\n\t        };\n\t        ExternalMessage.prototype.destroy = function () {\n\t            ej2_base_1.remove(this.element);\n\t        };\n\t        return ExternalMessage;\n\t    }());\n\t    exports.ExternalMessage = ExternalMessage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(5), __webpack_require__(8), __webpack_require__(11), __webpack_require__(15), __webpack_require__(14), __webpack_require__(16), __webpack_require__(17), __webpack_require__(56)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, ej2_base_3, ej2_data_1, events, enum_1, row_renderer_1, cell_1, row_1, filter_cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Filter = (function () {\n\t        function Filter(parent, filterSettings, serviceLocator) {\n\t            this.predicate = 'and';\n\t            this.contentRefresh = true;\n\t            this.values = {};\n\t            this.filterOperators = {\n\t                contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n\t                lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n\t            };\n\t            this.parent = parent;\n\t            this.filterSettings = filterSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Filter.prototype.render = function () {\n\t            var gObj = this.parent;\n\t            if (gObj.columns.length) {\n\t                var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, enum_1.CellType.Filter);\n\t                var row = void 0;\n\t                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n\t                cellrender.addCellRenderer(enum_1.CellType.Filter, new filter_cell_renderer_1.FilterCellRenderer(this.parent, this.serviceLocator));\n\t                this.l10n = this.serviceLocator.getService('localization');\n\t                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n\t                rowRenderer.element = ej2_base_3.createElement('tr', { className: 'e-filterbar' });\n\t                row = this.generateRow();\n\t                row.data = this.values;\n\t                this.element = rowRenderer.render(row, gObj.getColumns());\n\t                this.parent.getHeaderContent().querySelector('thead').appendChild(this.element);\n\t                var detail = this.element.querySelector('.e-detailheadercell');\n\t                if (detail) {\n\t                    detail.className = 'e-filterbarcell e-mastercell';\n\t                }\n\t                this.wireEvents();\n\t            }\n\t        };\n\t        Filter.prototype.destroy = function () {\n\t            this.filterSettings.columns = [];\n\t            this.updateFilterMsg();\n\t            this.removeEventListener();\n\t            this.unWireEvents();\n\t            ej2_base_3.remove(this.element);\n\t        };\n\t        Filter.prototype.generateRow = function (index) {\n\t            var options = {};\n\t            var row = new row_1.Row(options);\n\t            row.cells = this.generateCells();\n\t            return row;\n\t        };\n\t        Filter.prototype.generateCells = function () {\n\t            var cells = [];\n\t            if (this.parent.allowGrouping) {\n\t                for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n\t                    cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                }\n\t            }\n\t            if (this.parent.detailTemplate || this.parent.childGrid) {\n\t                cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t            }\n\t            for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n\t                var dummy = _a[_i];\n\t                cells.push(this.generateCell(dummy));\n\t            }\n\t            return cells;\n\t        };\n\t        Filter.prototype.generateCell = function (column, cellType) {\n\t            var opt = {\n\t                'visible': column.visible,\n\t                'isDataCell': false,\n\t                'rowId': '',\n\t                'column': column,\n\t                'cellType': cellType ? cellType : enum_1.CellType.Filter,\n\t                'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n\t            };\n\t            return new cell_1.Cell(opt);\n\t        };\n\t        Filter.prototype.updateModel = function () {\n\t            this.currentFilterObject = {\n\t                field: this.fieldName, operator: this.operator, value: this.value, predicate: this.predicate,\n\t                matchCase: this.matchCase, actualFilterValue: {}, actualOperator: {}\n\t            };\n\t            var index = this.getFilteredColsIndexByField(this.fieldName);\n\t            if (index > -1) {\n\t                this.filterSettings.columns[index] = this.currentFilterObject;\n\t            }\n\t            else {\n\t                this.filterSettings.columns.push(this.currentFilterObject);\n\t            }\n\t            this.filterSettings.columns = this.filterSettings.columns;\n\t            this.parent.dataBind();\n\t        };\n\t        Filter.prototype.getFilteredColsIndexByField = function (field) {\n\t            var cols = this.filterSettings.columns;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        Filter.prototype.onActionComplete = function (e) {\n\t            var args = !this.isRemove ? {\n\t                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column.field,\n\t                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n\t            } : {\n\t                requestType: 'filtering', type: events.actionComplete\n\t            };\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, args));\n\t            this.isRemove = false;\n\t        };\n\t        Filter.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.element, 'focusin', this.updateSpanClass, this);\n\t            ej2_base_1.EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n\t        };\n\t        Filter.prototype.unWireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.element, 'focusin', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass);\n\t            ej2_base_1.EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n\t        };\n\t        Filter.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Filter.prototype.initialEnd = function () {\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n\t                var gObj = this.parent;\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.actualFilterValue, col.actualOperator);\n\t                }\n\t                this.updateFilterMsg();\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Filter.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.filterComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.keyPressed, this.keyUpHandler, this);\n\t            this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n\t            this.parent.on(events.headerRefreshed, this.render, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t        };\n\t        Filter.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.filterComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.keyPressed, this.keyUpHandler);\n\t            this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t        };\n\t        Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n\t            var gObj = this.parent;\n\t            var filterCell;\n\t            this.column = gObj.getColumnByField(fieldName);\n\t            filterCell = this.element.querySelector('#' + this.column.field + '_filterBarcell');\n\t            if (!ej2_base_2.isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, {\n\t                    instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n\t                    arg5: matchCase, arg6: actualFilterValue, arg7: actualOperator\n\t                });\n\t                return;\n\t            }\n\t            this.value = filterValue;\n\t            this.matchCase = matchCase || false;\n\t            this.fieldName = fieldName;\n\t            this.predicate = predicate || 'and';\n\t            this.operator = filterOperator;\n\t            filterValue = filterValue.toString();\n\t            this.values[this.column.field] = filterValue;\n\t            gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n\t            if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n\t                this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n\t                this.updateFilterMsg();\n\t                return;\n\t            }\n\t            if (filterCell.value !== filterValue) {\n\t                filterCell.value = filterValue;\n\t            }\n\t            if (this.checkAlreadyColFiltered(this.column.field)) {\n\t                return;\n\t            }\n\t            this.updateModel();\n\t        };\n\t        Filter.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            this.parent.notify(events.modelChanged, {\n\t                                currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n\t                                    this.column.field : undefined,\n\t                                columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n\t                            });\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        break;\n\t                    case 'showFilterBarStatus':\n\t                        if (e.properties[prop]) {\n\t                            this.updateFilterMsg();\n\t                        }\n\t                        else if (this.parent.allowPaging) {\n\t                            this.parent.updateExternalMessage('');\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.clearFiltering = function () {\n\t            var cols = util_1.getActualPropFromColl(this.filterSettings.columns);\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.removeFilteredColsByField(cols[i].field, true);\n\t            }\n\t            this.isRemove = true;\n\t            this.filterStatusMsg = '';\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.checkAlreadyColFiltered = function (field) {\n\t            var columns = this.filterSettings.columns;\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var col = columns_1[_i];\n\t                if (col.field === field && col.value === this.value &&\n\t                    col.operator === this.operator && col.predicate === this.predicate) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n\t            var cols = this.filterSettings.columns;\n\t            if (util_1.isActionPrevent(this.parent)) {\n\t                this.parent.notify(events.preventBatch, {\n\t                    instance: this, handler: this.removeFilteredColsByField,\n\t                    arg1: field, arg2: isClearFilterBar\n\t                });\n\t                return;\n\t            }\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (cols[i].field === field) {\n\t                    if (!(isClearFilterBar === false)) {\n\t                        this.element.querySelector('#' + cols[i].field + '_filterBarcell').value = '';\n\t                        delete this.values[field];\n\t                    }\n\t                    cols.splice(i, 1);\n\t                    this.parent.getColumnHeaderByField(field).removeAttribute('aria-filtered');\n\t                    this.isRemove = true;\n\t                    this.parent.notify(events.modelChanged, {\n\t                        requestType: 'filtering', type: events.actionBegin\n\t                    });\n\t                    break;\n\t                }\n\t            }\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.getModuleName = function () {\n\t            return 'filter';\n\t        };\n\t        Filter.prototype.keyUpHandler = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            if (ej2_base_3.matches(target, '.e-filterbar input')) {\n\t                this.column = gObj.getColumnByField(target.id.split('_')[0]);\n\t                if (!this.column) {\n\t                    return;\n\t                }\n\t                this.updateCrossIcon(target);\n\t                if ((this.filterSettings.mode === 'immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n\t                    this.value = target.value.trim();\n\t                    this.processFilter(e);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.updateSpanClass = function (e) {\n\t            var target = e.target;\n\t            if (e.type === 'mousedown' && target.classList.contains('e-cancel')) {\n\t                var targetText = target.previousElementSibling;\n\t                targetText.value = '';\n\t                target.classList.add('e-hide');\n\t                targetText.focus();\n\t                e.preventDefault();\n\t            }\n\t            if (e.type === 'focusin' && target.classList.contains('e-filtertext') && !target.disabled) {\n\t                if (this.lastFilterElement) {\n\t                    this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t                }\n\t                this.updateCrossIcon(target);\n\t                this.lastFilterElement = target;\n\t            }\n\t            if (e.type === 'focusin' && !target.classList.contains('e-filtertext') && this.lastFilterElement) {\n\t                this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n\t            }\n\t            return false;\n\t        };\n\t        Filter.prototype.updateCrossIcon = function (element) {\n\t            if (element.value.length) {\n\t                element.nextElementSibling.classList.remove('e-hide');\n\t            }\n\t        };\n\t        Filter.prototype.updateFilterMsg = function () {\n\t            var gObj = this.parent;\n\t            var columns = this.filterSettings.columns;\n\t            var column;\n\t            if (!this.filterSettings.showFilterBarStatus) {\n\t                return;\n\t            }\n\t            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n\t                this.filterStatusMsg = '';\n\t                for (var index = 0; index < columns.length; index++) {\n\t                    column = gObj.getColumnByField(columns[index].field);\n\t                    if (index) {\n\t                        this.filterStatusMsg += ' && ';\n\t                    }\n\t                    this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n\t                }\n\t            }\n\t            if (gObj.allowPaging) {\n\t                gObj.updateExternalMessage(this.filterStatusMsg);\n\t            }\n\t            this.filterStatusMsg = '';\n\t        };\n\t        Filter.prototype.checkForSkipInput = function (column, value) {\n\t            var isSkip;\n\t            var skipInput;\n\t            if (column.type === 'number') {\n\t                skipInput = ['=', ' ', '!'];\n\t                if (ej2_data_1.DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n\t                    isSkip = true;\n\t                }\n\t            }\n\t            else if (column.type === 'string') {\n\t                skipInput = ['>', '<', '=', '!'];\n\t                for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n\t                    var val = value_1[_i];\n\t                    if (skipInput.indexOf(val) > -1) {\n\t                        isSkip = true;\n\t                    }\n\t                }\n\t            }\n\t            return isSkip;\n\t        };\n\t        Filter.prototype.processFilter = function (e) {\n\t            this.stopTimer();\n\t            this.startTimer(e);\n\t        };\n\t        Filter.prototype.startTimer = function (e) {\n\t            var _this = this;\n\t            this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n\t        };\n\t        Filter.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Filter.prototype.onTimerTick = function () {\n\t            var filterElement = this.element.querySelector('#' + this.column.field + '_filterBarcell');\n\t            var filterValue = JSON.parse(JSON.stringify(filterElement.value));\n\t            this.stopTimer();\n\t            if (this.value === '') {\n\t                this.removeFilteredColsByField(this.column.field);\n\t                return;\n\t            }\n\t            this.validateFilterValue(this.value);\n\t            this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase);\n\t            this.values[this.column.field] = filterValue;\n\t            filterElement.value = filterValue;\n\t            this.updateFilterMsg();\n\t        };\n\t        Filter.prototype.validateFilterValue = function (value) {\n\t            var gObj = this.parent;\n\t            var skipInput;\n\t            var index;\n\t            this.matchCase = true;\n\t            switch (this.column.type) {\n\t                case 'number':\n\t                    this.operator = this.filterOperators.equal;\n\t                    skipInput = ['>', '<', '=', '!'];\n\t                    for (var i = 0; i < value.length; i++) {\n\t                        if (skipInput.indexOf(value[i]) > -1) {\n\t                            index = i;\n\t                            break;\n\t                        }\n\t                    }\n\t                    this.getOperator(value.substring(index));\n\t                    if (index !== 0) {\n\t                        this.value = value.substring(0, index);\n\t                    }\n\t                    if (this.value !== '' && value.length >= 1) {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                    }\n\t                    if (isNaN(this.value)) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                case 'datetime':\n\t                    this.operator = this.filterOperators.equal;\n\t                    this.getOperator(value);\n\t                    if (this.value !== '') {\n\t                        this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n\t                        if (ej2_base_2.isNullOrUndefined(this.value)) {\n\t                            this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'string':\n\t                    this.matchCase = false;\n\t                    if (value.charAt(0) === '*') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(value.length - 1) === '%') {\n\t                        this.value = this.value.slice(0, -1);\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    else if (value.charAt(0) === '%') {\n\t                        this.value = this.value.slice(1);\n\t                        this.operator = this.filterOperators.endsWith;\n\t                    }\n\t                    else {\n\t                        this.operator = this.filterOperators.startsWith;\n\t                    }\n\t                    break;\n\t                case 'boolean':\n\t                    if (value.toLowerCase() === 'true' || value === '1') {\n\t                        this.value = true;\n\t                    }\n\t                    else if (value.toLowerCase() === 'false' || value === '0') {\n\t                        this.value = false;\n\t                    }\n\t                    else if (value.length) {\n\t                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n\t                    }\n\t                    this.operator = this.filterOperators.equal;\n\t                    break;\n\t                default:\n\t                    this.operator = this.filterOperators.equal;\n\t            }\n\t        };\n\t        Filter.prototype.getOperator = function (value) {\n\t            var singleOp = value.charAt(0);\n\t            var multipleOp = value.slice(0, 2);\n\t            var operators = ej2_base_2.extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, ej2_data_1.DataUtil.operatorSymbols);\n\t            if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n\t                this.operator = operators[singleOp];\n\t                this.value = value.substring(1);\n\t                if (!this.operator) {\n\t                    this.operator = operators[multipleOp];\n\t                    this.value = value.substring(2);\n\t                }\n\t            }\n\t            if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n\t                if (this.value.charAt(0) === '=') {\n\t                    this.operator = this.operator + 'orequal';\n\t                    this.value = this.value.substring(1);\n\t                }\n\t            }\n\t        };\n\t        Filter.prototype.columnPositionChanged = function (e) {\n\t            var filterCells = [].slice.call(this.element.querySelectorAll('.e-filterbarcell'));\n\t            filterCells.splice(e.toIndex, 0, filterCells.splice(e.fromIndex, 1)[0]);\n\t            this.element.innerHTML = '';\n\t            for (var _i = 0, filterCells_1 = filterCells; _i < filterCells_1.length; _i++) {\n\t                var cell = filterCells_1[_i];\n\t                this.element.appendChild(cell);\n\t            }\n\t        };\n\t        return Filter;\n\t    }());\n\t    exports.Filter = Filter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FilterCellRenderer = (function (_super) {\n\t        __extends(FilterCellRenderer, _super);\n\t        function FilterCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TH', { className: 'e-filterbarcell' });\n\t            return _this;\n\t        }\n\t        FilterCellRenderer.prototype.getGui = function () {\n\t            return ej2_base_2.createElement('div');\n\t        };\n\t        FilterCellRenderer.prototype.render = function (cell, data) {\n\t            var node = this.element.cloneNode();\n\t            var innerDIV = this.getGui();\n\t            var input;\n\t            var column = cell.column;\n\t            if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                node.classList.add('e-fltrtemp');\n\t                ej2_base_2.attributes(innerDIV, {\n\t                    'class': 'e-fltrtempdiv'\n\t                });\n\t                if (ej2_base_1.isNullOrUndefined(column.filterBarTemplate.create)) {\n\t                    input = ej2_base_2.createElement('input', {\n\t                        id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                        attrs: { type: 'search', title: column.headerText }\n\t                    });\n\t                    innerDIV.appendChild(input);\n\t                }\n\t                else {\n\t                    var args = { column: column };\n\t                    var temp = column.filterBarTemplate.create;\n\t                    if (typeof temp === 'string') {\n\t                        temp = ej2_base_1.getValue(temp, window);\n\t                    }\n\t                    input = temp(args);\n\t                    if (typeof input === 'string') {\n\t                        var div = ej2_base_2.createElement('div');\n\t                        div.innerHTML = input;\n\t                        input = div.firstChild;\n\t                    }\n\t                    ej2_base_2.attributes(innerDIV, {\n\t                        class: 'e-filterUi_input e-filtertext e-fltrTemp',\n\t                        title: column.headerText,\n\t                        id: column.field + '_filterBarcell',\n\t                    });\n\t                    innerDIV.appendChild(input);\n\t                }\n\t            }\n\t            else {\n\t                ej2_base_2.attributes(innerDIV, {\n\t                    'class': 'e-filterdiv e-fltrinputdiv'\n\t                });\n\t                input = ej2_base_2.createElement('input', {\n\t                    id: column.field + '_filterBarcell', className: 'e-filtertext',\n\t                    attrs: {\n\t                        type: 'search', title: column.headerText + cell.attributes.title,\n\t                        value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n\t                    }\n\t                });\n\t                innerDIV.appendChild(input);\n\t                innerDIV.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-cancel e-hide e-icons e-icon-hide',\n\t                    attrs: { 'aria-label': 'clear filter cell', tabindex: '-1' }\n\t                }));\n\t            }\n\t            if (column.allowFiltering === false || column.field === '' || ej2_base_1.isNullOrUndefined(column.field)) {\n\t                input.setAttribute('disabled', 'true');\n\t                input.classList.add('e-disable');\n\t            }\n\t            if (!column.visible) {\n\t                node.classList.add('e-hide');\n\t            }\n\t            if ((ej2_base_1.isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !ej2_base_1.isNullOrUndefined(column.filterBarTemplate)) {\n\t                var templateRead = column.filterBarTemplate.read;\n\t                var templateWrite = column.filterBarTemplate.write;\n\t                var args = { element: input, column: column };\n\t                if (typeof templateRead === 'string') {\n\t                    templateRead = args.column = ej2_base_1.getValue(templateRead, window);\n\t                }\n\t                if (typeof templateWrite === 'string') {\n\t                    templateWrite = ej2_base_1.getValue(templateWrite, window);\n\t                }\n\t                templateWrite.call(this, args);\n\t            }\n\t            this.appendHtml(node, innerDIV);\n\t            return node;\n\t        };\n\t        FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n\t            node.appendChild(innerHtml);\n\t            return node;\n\t        };\n\t        return FilterCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.FilterCellRenderer = FilterCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(35), __webpack_require__(11), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, width_controller_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.resizeClassList = {\n\t        root: 'e-rhandler',\n\t        suppress: 'e-rsuppress',\n\t        icon: 'e-ricon',\n\t        helper: 'e-rhelper',\n\t        header: 'th.e-headercell',\n\t        cursor: 'e-rcursor',\n\t        lines: 'e-rlines'\n\t    };\n\t    var Resize = (function () {\n\t        function Resize(parent) {\n\t            this.tapped = false;\n\t            this.isDblClk = true;\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.widthService = new width_controller_1.ColumnWidthService(parent);\n\t            this.addEventListener();\n\t        }\n\t        Resize.prototype.autoFitColumns = function (fName) {\n\t            var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n\t                this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n\t            this.findColumn(columnName);\n\t        };\n\t        Resize.prototype.resizeColumn = function (fName, index, id) {\n\t            var gObj = this.parent;\n\t            var tWidth = 0;\n\t            var headerTable = this.parent.getHeaderTable();\n\t            var contentTable = this.parent.getContentTable();\n\t            var headerDivTag = 'e-gridheader';\n\t            var contentDivTag = 'e-gridcontent';\n\t            var indentWidthClone = gObj.getHeaderTable().querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n\t            var indentWidth = 0;\n\t            if (indentWidthClone.length > 0) {\n\t                for (var i = 0; i < indentWidthClone.length; i++) {\n\t                    indentWidth += indentWidthClone[i].offsetWidth;\n\t                }\n\t            }\n\t            var uid = id ? id : this.parent.getUidByColumnField(fName);\n\t            var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n\t            var headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n\t            var headerText = [headerTextClone];\n\t            var contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n\t            var contentText = [];\n\t            for (var i = 0; i < contentTextClone.length; i++) {\n\t                contentText[i] = contentTextClone[i].cloneNode(true);\n\t            }\n\t            var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n\t            var wContent = this.createTable(contentTable, contentText, contentDivTag);\n\t            var columnbyindex = gObj.getColumns()[index];\n\t            var result;\n\t            var width = (wHeader > wContent) ? columnbyindex.width = ej2_base_1.formatUnit(wHeader) : columnbyindex.width = ej2_base_1.formatUnit(wContent);\n\t            this.widthService.setColumnWidth(gObj.getColumns()[index]);\n\t            if (!this.parent.allowResizing) {\n\t                result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n\t                if (result === false) {\n\t                    gObj.getColumns().forEach(function (element) {\n\t                        if (element.visible) {\n\t                            tWidth = tWidth + parseInt(element.width, 10);\n\t                        }\n\t                    });\n\t                }\n\t                var tableWidth_1 = tWidth + indentWidth;\n\t                if (tWidth > 0) {\n\t                    headerTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                    contentTable.style.width = ej2_base_1.formatUnit(tableWidth_1);\n\t                }\n\t            }\n\t            var tableWidth = headerTable.offsetWidth;\n\t            var contentwidth = (gObj.getContent().scrollWidth);\n\t            if (contentwidth > tableWidth) {\n\t                headerTable.classList.add('e-tableborder');\n\t                contentTable.classList.add('e-tableborder');\n\t            }\n\t            else {\n\t                headerTable.classList.remove('e-tableborder');\n\t                contentTable.classList.remove('e-tableborder');\n\t            }\n\t        };\n\t        Resize.prototype.destroy = function () {\n\t            this.widthService = null;\n\t            this.unwireEvents();\n\t            this.removeEventListener();\n\t        };\n\t        Resize.prototype.getModuleName = function () {\n\t            return 'resize';\n\t        };\n\t        Resize.prototype.findColumn = function (fName) {\n\t            var _this = this;\n\t            fName.forEach(function (element) {\n\t                var fieldName = element;\n\t                var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n\t                if (_this.parent.getColumns()[columnIndex].visible === true) {\n\t                    _this.resizeColumn(fieldName, columnIndex);\n\t                }\n\t            });\n\t        };\n\t        Resize.prototype.createTable = function (table, text, tag) {\n\t            var myTableDiv = ej2_base_1.createElement('div');\n\t            myTableDiv.className = this.parent.element.className;\n\t            myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n\t            var mySubDiv = ej2_base_1.createElement('div');\n\t            mySubDiv.className = tag;\n\t            var myTable = ej2_base_1.createElement('table');\n\t            myTable.className = table.className;\n\t            myTable.style.cssText = 'table-layout: auto;width: auto';\n\t            var myTr = ej2_base_1.createElement('tr');\n\t            text.forEach(function (element) {\n\t                var tr = myTr.cloneNode();\n\t                tr.className = table.querySelector('tr').className;\n\t                tr.appendChild(element);\n\t                myTable.appendChild(tr);\n\t            });\n\t            mySubDiv.appendChild(myTable);\n\t            myTableDiv.appendChild(mySubDiv);\n\t            document.body.appendChild(myTableDiv);\n\t            var offsetWidthValue = myTable.getBoundingClientRect().width;\n\t            document.body.removeChild(myTableDiv);\n\t            return Math.ceil(offsetWidthValue);\n\t        };\n\t        Resize.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerRefreshed, this.render, this);\n\t        };\n\t        Resize.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.headerRefreshed, this.render);\n\t        };\n\t        Resize.prototype.render = function () {\n\t            this.wireEvents();\n\t            if (!(this.parent.gridLines === 'vertical' || this.parent.gridLines === 'both')) {\n\t                this.parent.element.classList.add(exports.resizeClassList.lines);\n\t            }\n\t            this.setHandlerHeight();\n\t        };\n\t        Resize.prototype.wireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t                ej2_base_1.EventHandler.add(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart, _this);\n\t                ej2_base_1.EventHandler.add(ele, events.dblclick, _this.callAutoFit, _this);\n\t            });\n\t        };\n\t        Resize.prototype.unwireEvents = function () {\n\t            var _this = this;\n\t            this.getResizeHandlers().forEach(function (ele) {\n\t                ej2_base_1.EventHandler.remove(ele, ej2_base_1.Browser.touchStartEvent, _this.resizeStart);\n\t                ej2_base_1.EventHandler.remove(ele, events.dblclick, _this.callAutoFit);\n\t            });\n\t        };\n\t        Resize.prototype.getResizeHandlers = function () {\n\t            return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.root));\n\t        };\n\t        Resize.prototype.setHandlerHeight = function () {\n\t            [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + exports.resizeClassList.suppress)).forEach(function (ele) {\n\t                ele.style.height = ele.parentElement.offsetHeight + 'px';\n\t            });\n\t        };\n\t        Resize.prototype.callAutoFit = function (e) {\n\t            var col = this.getTargetColumn(e);\n\t            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n\t        };\n\t        Resize.prototype.resizeStart = function (e) {\n\t            if (!this.helper) {\n\t                if (this.getScrollBarWidth() === 0) {\n\t                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n\t                        var col = _a[_i];\n\t                        this.widthService.setColumnWidth(col);\n\t                    }\n\t                    this.widthService.setWidthToTable();\n\t                }\n\t                this.element = e.target;\n\t                this.appendHelper();\n\t                this.column = this.getTargetColumn(e);\n\t                this.pageX = this.getPointX(e);\n\t                if (this.parent.enableRtl) {\n\t                    this.minMove = parseInt(this.column.width.toString(), 10)\n\t                        - (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0);\n\t                }\n\t                else {\n\t                    this.minMove = (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0)\n\t                        - parseInt(this.column.width.toString(), 10);\n\t                }\n\t                this.minMove += this.pageX;\n\t            }\n\t            if (ej2_base_1.Browser.isDevice && !this.helper.classList.contains(exports.resizeClassList.icon)) {\n\t                this.helper.classList.add(exports.resizeClassList.icon);\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper, this);\n\t                ej2_base_1.EventHandler.add(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart, this);\n\t            }\n\t            else {\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.resizeStart, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction();\n\t                    return;\n\t                }\n\t                ej2_base_1.EventHandler.add(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd, this);\n\t                ej2_base_1.EventHandler.add(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing, this);\n\t                this.updateCursor('add');\n\t            }\n\t        };\n\t        Resize.prototype.cancelResizeAction = function (removeEvents) {\n\t            if (removeEvents) {\n\t                ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t                this.updateCursor('remove');\n\t            }\n\t            if (ej2_base_1.Browser.isDevice) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t            }\n\t            ej2_base_1.detach(this.helper);\n\t            this.refresh();\n\t        };\n\t        Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n\t            if (minWidth && width < minWidth) {\n\t                return minWidth;\n\t            }\n\t            else if ((maxWidth && width > maxWidth)) {\n\t                return maxWidth;\n\t            }\n\t            else {\n\t                return width;\n\t            }\n\t        };\n\t        Resize.prototype.resizing = function (e) {\n\t            var pageX = this.getPointX(e);\n\t            var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n\t            var colData = {\n\t                width: parseInt(this.widthService.getWidth(this.column).toString(), 10) + mousemove,\n\t                minWidth: this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : null,\n\t                maxWidth: this.column.maxWidth ? parseInt(this.column.maxWidth.toString(), 10) : null\n\t            };\n\t            var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n\t            if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n\t                width = this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0;\n\t                this.pageX = pageX = this.minMove;\n\t            }\n\t            if (width !== parseInt(this.column.width.toString(), 10)) {\n\t                this.pageX = pageX;\n\t                this.column.width = ej2_base_1.formatUnit(width);\n\t                var args = {\n\t                    e: e,\n\t                    column: this.column\n\t                };\n\t                this.parent.trigger(events.onResize, args);\n\t                if (args.cancel) {\n\t                    this.cancelResizeAction(true);\n\t                    return;\n\t                }\n\t                this.widthService.setColumnWidth(this.column, null, 'resize');\n\t                this.updateHelper();\n\t            }\n\t            this.isDblClk = false;\n\t        };\n\t        Resize.prototype.resizeEnd = function (e) {\n\t            if (!this.helper) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.parent.element, ej2_base_1.Browser.touchMoveEvent, this.resizing);\n\t            ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchEndEvent, this.resizeEnd);\n\t            this.updateCursor('remove');\n\t            ej2_base_1.detach(this.helper);\n\t            var args = {\n\t                e: e,\n\t                column: this.column\n\t            };\n\t            this.parent.trigger(events.resizeStop, args);\n\t            this.refresh();\n\t            this.doubleTapEvent(e);\n\t            this.isDblClk = true;\n\t        };\n\t        Resize.prototype.getPointX = function (e) {\n\t            if (e.touches && e.touches.length) {\n\t                return e.touches[0].pageX;\n\t            }\n\t            else {\n\t                return e.pageX;\n\t            }\n\t        };\n\t        Resize.prototype.refreshColumnWidth = function () {\n\t            var columns = this.parent.getColumns();\n\t            for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderTable().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n\t                var ele = _a[_i];\n\t                for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n\t                    var column = columns_1[_b];\n\t                    if (ele.querySelector('[e-mappinguid]') &&\n\t                        ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n\t                        column.width = ele.getBoundingClientRect().width;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            return columns;\n\t        };\n\t        Resize.prototype.getTargetColumn = function (e) {\n\t            var cell = ej2_base_1.closest(e.target, exports.resizeClassList.header);\n\t            var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n\t            return this.parent.getColumnByUid(uid);\n\t        };\n\t        Resize.prototype.updateCursor = function (action) {\n\t            var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n\t            headerRows.push(this.parent.element);\n\t            for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n\t                var row = headerRows_1[_i];\n\t                row.classList[action](exports.resizeClassList.cursor);\n\t            }\n\t        };\n\t        Resize.prototype.refresh = function () {\n\t            this.column = null;\n\t            this.pageX = null;\n\t            this.element = null;\n\t            this.helper = null;\n\t        };\n\t        Resize.prototype.appendHelper = function () {\n\t            this.helper = ej2_base_1.createElement('div', {\n\t                className: exports.resizeClassList.helper\n\t            });\n\t            this.parent.element.appendChild(this.helper);\n\t            var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            var tr = [].slice.call(this.parent.getHeaderTable().querySelectorAll('tr'));\n\t            for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n\t                height += tr[i].offsetHeight;\n\t            }\n\t            var pos = this.calcPos(rect);\n\t            pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n\t            this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n\t        };\n\t        Resize.prototype.getScrollBarWidth = function (height) {\n\t            var ele = this.parent.getContent().firstChild;\n\t            return (ele.scrollHeight > ele.clientHeight && height) ||\n\t                ele.scrollWidth > ele.clientWidth ? util_1.getScrollBarWidth() : 0;\n\t        };\n\t        Resize.prototype.removeHelper = function (e) {\n\t            var cls = e.target.classList;\n\t            if (!(cls.contains(exports.resizeClassList.root) || cls.contains(exports.resizeClassList.icon)) && this.helper) {\n\t                ej2_base_1.EventHandler.remove(document, ej2_base_1.Browser.touchStartEvent, this.removeHelper);\n\t                ej2_base_1.EventHandler.remove(this.helper, ej2_base_1.Browser.touchStartEvent, this.resizeStart);\n\t                ej2_base_1.detach(this.helper);\n\t                this.refresh();\n\t            }\n\t        };\n\t        Resize.prototype.updateHelper = function () {\n\t            var rect = ej2_base_1.closest(this.element, exports.resizeClassList.header);\n\t            this.helper.style.left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2)) + 'px';\n\t        };\n\t        Resize.prototype.calcPos = function (elem) {\n\t            var parentOffset = {\n\t                top: 0,\n\t                left: 0\n\t            };\n\t            var offset = elem.getBoundingClientRect();\n\t            var doc = elem.ownerDocument;\n\t            var offsetParent = elem.offsetParent || doc.documentElement;\n\t            while (offsetParent &&\n\t                (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n\t                offsetParent.style.position === 'static') {\n\t                offsetParent = offsetParent.parentNode;\n\t            }\n\t            if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n\t                parentOffset = offsetParent.getBoundingClientRect();\n\t            }\n\t            return {\n\t                top: offset.top - parentOffset.top,\n\t                left: offset.left - parentOffset.left\n\t            };\n\t        };\n\t        Resize.prototype.doubleTapEvent = function (e) {\n\t            if (this.getUserAgent() && this.isDblClk) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.callAutoFit(e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Resize.prototype.getUserAgent = function () {\n\t            var userAgent = ej2_base_1.Browser.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Resize.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        return Resize;\n\t    }());\n\t    exports.Resize = Resize;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Reorder = (function () {\n\t        function Reorder(parent) {\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.reorderComplete, this.onActionComplete, this);\n\t            this.parent.on(events.columnDrag, this.drag, this);\n\t            this.parent.on(events.columnDragStart, this.dragStart, this);\n\t            this.parent.on(events.columnDragStop, this.dragStop, this);\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n\t        }\n\t        Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n\t            return srcElem.parentElement.isEqualNode(destElem.parentElement) && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t        };\n\t        Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n\t            var isFound;\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var header;\n\t            while (!isFound && headers.length > 0) {\n\t                header = headers.pop();\n\t                isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n\t            }\n\t            return isFound;\n\t        };\n\t        Reorder.prototype.findColParent = function (col, cols, parent) {\n\t            parent = parent;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (col === cols[i]) {\n\t                    return true;\n\t                }\n\t                else if (cols[i].columns) {\n\t                    var cnt = parent.length;\n\t                    parent.push(cols[i]);\n\t                    if (!this.findColParent(col, cols[i].columns, parent)) {\n\t                        parent.splice(cnt, parent.length - cnt);\n\t                    }\n\t                    else {\n\t                        return true;\n\t                    }\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        Reorder.prototype.getColumnsModel = function (cols) {\n\t            var columnModel = [];\n\t            var subCols = [];\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                columnModel.push(cols[i]);\n\t                if (cols[i].columns) {\n\t                    subCols = subCols.concat(cols[i].columns);\n\t                }\n\t            }\n\t            if (subCols.length) {\n\t                columnModel = columnModel.concat(this.getColumnsModel(subCols));\n\t            }\n\t            return columnModel;\n\t        };\n\t        Reorder.prototype.headerDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (!ej2_base_2.closest(e.target, 'th')) {\n\t                return;\n\t            }\n\t            var destElem = ej2_base_2.closest(e.target, '.e-headercell');\n\t            if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t                var oldIdx = util_1.getElementIndex(this.element, headers);\n\t                var columns = this.getColumnsModel(this.parent.columns);\n\t                var column = columns[oldIdx];\n\t                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n\t                this.moveColumns(newIndex, column);\n\t            }\n\t        };\n\t        Reorder.prototype.isActionPrevent = function (gObj) {\n\t            return util_1.isActionPrevent(gObj);\n\t        };\n\t        Reorder.prototype.moveColumns = function (destIndex, column) {\n\t            var gObj = this.parent;\n\t            if (this.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n\t                return;\n\t            }\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var cols = parent ? parent.columns : this.parent.columns;\n\t            var srcIdx = util_1.inArray(column, cols);\n\t            if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n\t                return;\n\t            }\n\t            cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n\t            gObj.getColumns(true);\n\t            gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n\t            gObj.notify(events.modelChanged, {\n\t                type: events.actionBegin, requestType: 'reorder'\n\t            });\n\t        };\n\t        Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n\t            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n\t            var cols = this.parent.columns;\n\t            var flatColumns = this.getColumnsModel(cols);\n\t            var parent = this.getColParent(flatColumns[util_1.getElementIndex(srcElem, headers)], cols);\n\t            cols = parent ? parent.columns : cols;\n\t            return util_1.inArray(flatColumns[util_1.getElementIndex(destElem, headers)], cols);\n\t        };\n\t        Reorder.prototype.getColParent = function (column, columns) {\n\t            var parents = [];\n\t            this.findColParent(column, columns, parents);\n\t            return parents[parents.length - 1];\n\t        };\n\t        Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n\t            var column = this.parent.getColumnByField(toFName);\n\t            var parent = this.getColParent(column, this.parent.columns);\n\t            var columns = parent ? parent.columns : this.parent.columns;\n\t            var destIndex = util_1.inArray(column, columns);\n\t            if (destIndex > -1) {\n\t                this.moveColumns(destIndex, this.parent.getColumnByField(fromFName));\n\t            }\n\t        };\n\t        Reorder.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.createReorderElement();\n\t            }\n\t        };\n\t        Reorder.prototype.createReorderElement = function () {\n\t            var header = this.parent.element.querySelector('.e-headercontent');\n\t            this.upArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n\t            this.downArrow = header.appendChild(ej2_base_2.createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n\t        };\n\t        Reorder.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, { type: events.actionComplete }));\n\t        };\n\t        Reorder.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_2.remove(this.upArrow);\n\t            ej2_base_2.remove(this.downArrow);\n\t            this.parent.off(events.headerDrop, this.headerDrop);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.reorderComplete, this.onActionComplete);\n\t            this.parent.off(events.columnDrag, this.drag);\n\t            this.parent.off(events.columnDragStart, this.dragStart);\n\t            this.parent.off(events.columnDragStop, this.dragStop);\n\t            this.parent.off(events.headerRefreshed, this.createReorderElement);\n\t        };\n\t        Reorder.prototype.drag = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            var closest = ej2_base_2.closest(target, '.e-headercell:not(.e-stackedHeaderCell)');\n\t            var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n\t            var isLeft = this.x > util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            this.updateScrollPostion(e.event);\n\t            if (closest && !closest.isEqualNode(this.element)) {\n\t                target = closest;\n\t                if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n\t                    this.updateArrowPosition(target, isLeft);\n\t                    ej2_base_2.classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n\t                }\n\t                else if (!(gObj.allowGrouping && util_1.parentsUntil(e.target, 'e-groupdroparea'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            }\n\t            gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n\t        };\n\t        Reorder.prototype.updateScrollPostion = function (e) {\n\t            var _this = this;\n\t            var x = util_1.getPosition(e).x;\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            var scrollElem = this.parent.getContent().firstElementChild;\n\t            if (x > cliRectBase.left && x < cliRectBase.left + 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n\t            }\n\t            else if (x < cliRectBase.right && x > cliRectBase.right - 35) {\n\t                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n\t            }\n\t        };\n\t        Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n\t            var scrollLeft = scrollElem.scrollLeft;\n\t            scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n\t            if (scrollLeft !== scrollElem.scrollLeft) {\n\t                this.setDisplay('none');\n\t            }\n\t        };\n\t        Reorder.prototype.stopTimer = function () {\n\t            window.clearInterval(this.timer);\n\t        };\n\t        Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n\t            var cliRect = target.getBoundingClientRect();\n\t            var cliRectBase = this.parent.element.getBoundingClientRect();\n\t            if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n\t                return;\n\t            }\n\t            this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n\t            this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n\t            this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n\t            this.setDisplay('');\n\t        };\n\t        Reorder.prototype.dragStart = function (e) {\n\t            var gObj = this.parent;\n\t            var target = e.target;\n\t            this.element = target.classList.contains('e-headercell') ? target :\n\t                util_1.parentsUntil(target, 'e-headercell');\n\t            this.x = util_1.getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n\t            gObj.trigger(events.columnDragStart, {\n\t                target: target, draggableType: 'headercell', column: e.column\n\t            });\n\t        };\n\t        Reorder.prototype.dragStop = function (e) {\n\t            var gObj = this.parent;\n\t            this.setDisplay('none');\n\t            this.stopTimer();\n\t            if (!e.cancel) {\n\t                gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n\t            }\n\t            ej2_base_2.removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n\t        };\n\t        Reorder.prototype.setDisplay = function (display) {\n\t            this.upArrow.style.display = display;\n\t            this.downArrow.style.display = display;\n\t        };\n\t        Reorder.prototype.getModuleName = function () {\n\t            return 'reorder';\n\t        };\n\t        return Reorder;\n\t    }());\n\t    exports.Reorder = Reorder;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RowDD = (function () {\n\t        function RowDD(parent) {\n\t            var _this = this;\n\t            this.selectedRows = [];\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length ||\n\t                    !e.sender.target.classList.contains('e-selectionbackground')) {\n\t                    return false;\n\t                }\n\t                var visualElement = ej2_base_3.createElement('div', {\n\t                    className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n\t                    styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n\t                });\n\t                var table = ej2_base_3.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n\t                var tbody = ej2_base_3.createElement('tbody');\n\t                var selectedRows = gObj.getSelectedRows();\n\t                for (var i = 0, len = selectedRows.length; i < len; i++) {\n\t                    var selectedRow = selectedRows[i].cloneNode(true);\n\t                    util_1.removeElement(selectedRow, '.e-indentcell');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowcollapse');\n\t                    util_1.removeElement(selectedRow, '.e-detailrowexpand');\n\t                    tbody.appendChild(selectedRow);\n\t                }\n\t                table.appendChild(tbody);\n\t                visualElement.appendChild(table);\n\t                gObj.element.appendChild(visualElement);\n\t                return visualElement;\n\t            };\n\t            this.dragStart = function (e) {\n\t                var gObj = _this.parent;\n\t                if (document.getElementsByClassName('e-griddragarea').length) {\n\t                    return;\n\t                }\n\t                gObj.trigger(events.rowDragStart, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: e.target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n\t                }\n\t                _this.isDragStop = false;\n\t            };\n\t            this.drag = function (e) {\n\t                var gObj = _this.parent;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                var target = _this.getElementFromPosition(cloneElement, e.event);\n\t                ej2_base_3.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                gObj.trigger(events.rowDrag, {\n\t                    rows: gObj.getSelectedRows(),\n\t                    target: target, draggableType: 'rows', data: gObj.getSelectedRecords()\n\t                });\n\t                gObj.element.classList.add('e-rowdrag');\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent') ||\n\t                    util_1.parentsUntil(cloneElement.parentElement, 'e-grid').id === util_1.parentsUntil(target, 'e-grid').id) {\n\t                    ej2_base_3.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = _this.getElementFromPosition(e.helper, e.event);\n\t                gObj.element.classList.remove('e-rowdrag');\n\t                var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n\t                if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n\t                    dropElem.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n\t                }\n\t                gObj.trigger(events.rowDrop, {\n\t                    target: target, draggableType: 'rows',\n\t                    rows: gObj.getSelectedRows(), data: gObj.getSelectedRecords()\n\t                });\n\t                if (!util_1.parentsUntil(target, 'e-gridcontent')) {\n\t                    ej2_base_3.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.parent = parent;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.initializeDrag, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.rowDragAndDropComplete, this.onActionComplete, this);\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t        }\n\t        RowDD.prototype.initializeDrag = function () {\n\t            var gObj = this.parent;\n\t            var column;\n\t            var drag;\n\t            drag = new ej2_base_1.Draggable(gObj.getContent(), {\n\t                dragTarget: '.e-rowcell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        RowDD.prototype.getElementFromPosition = function (element, event) {\n\t            var target;\n\t            var position = util_1.getPosition(event);\n\t            element.style.display = 'none';\n\t            target = document.elementFromPoint(position.x, position.y);\n\t            element.style.display = '';\n\t            return target;\n\t        };\n\t        RowDD.prototype.onActionComplete = function (e) {\n\t            this.parent.trigger(events.actionComplete, ej2_base_2.extend(e, { type: events.actionComplete }));\n\t        };\n\t        RowDD.prototype.getTargetIdx = function (targetRow) {\n\t            return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n\t        };\n\t        RowDD.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') !== 'grouping') {\n\t                var targetRow = ej2_base_3.closest(e.target, 'tr');\n\t                var srcControl = void 0;\n\t                var currentIndex = void 0;\n\t                if (e.droppedElement.parentElement.id !== gObj.element.id) {\n\t                    srcControl = e.droppedElement.parentElement.ej2_instances[0];\n\t                }\n\t                else {\n\t                    return;\n\t                }\n\t                if (srcControl.element.id !== gObj.element.id && srcControl.rowDropSettings.targetID !== gObj.element.id) {\n\t                    return;\n\t                }\n\t                var records = srcControl.getSelectedRecords();\n\t                var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n\t                var count = 0;\n\t                if (isNaN(targetIndex)) {\n\t                    targetIndex = currentIndex = 0;\n\t                }\n\t                if (gObj.allowPaging) {\n\t                    targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n\t                }\n\t                gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n\t                gObj.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t                var selectedRows = srcControl.getSelectedRowIndexes();\n\t                var skip = srcControl.allowPaging ?\n\t                    (srcControl.pageSettings.currentPage * srcControl.pageSettings.pageSize) - srcControl.pageSettings.pageSize : 0;\n\t                this.selectedRows = [];\n\t                for (var i = 0, len = records.length; i < len; i++) {\n\t                    this.selectedRows.push(skip + selectedRows[i]);\n\t                }\n\t                srcControl.notify(events.rowsRemoved, { indexes: this.selectedRows });\n\t                srcControl.notify(events.modelChanged, {\n\t                    type: events.actionBegin, requestType: 'rowdraganddrop'\n\t                });\n\t            }\n\t        };\n\t        RowDD.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.initializeDrag();\n\t            }\n\t        };\n\t        RowDD.prototype.destroy = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.initializeDrag);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.rowDragAndDropComplete, this.onActionComplete);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t        };\n\t        RowDD.prototype.getModuleName = function () {\n\t            return 'rowDragAndDrop';\n\t        };\n\t        return RowDD;\n\t    }());\n\t    exports.RowDD = RowDD;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(25)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, aria_service_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Group = (function () {\n\t        function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n\t            var _this = this;\n\t            this.visualElement = ej2_base_2.createElement('div', {\n\t                className: 'e-cloneproperties e-dragclone e-gdclone',\n\t                styles: 'line-height:23px', attrs: { action: 'grouping' }\n\t            });\n\t            this.helper = function (e) {\n\t                var gObj = _this.parent;\n\t                var target = e.sender.target;\n\t                var element = target.classList.contains('e-groupheadercell') ? target :\n\t                    util_1.parentsUntil(target, 'e-groupheadercell');\n\t                if (!element) {\n\t                    return false;\n\t                }\n\t                _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n\t                _this.visualElement.textContent = element.textContent;\n\t                _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n\t                _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n\t                _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n\t                gObj.element.appendChild(_this.visualElement);\n\t                return _this.visualElement;\n\t            };\n\t            this.dragStart = function () {\n\t                _this.parent.element.classList.add('e-ungroupdrag');\n\t            };\n\t            this.drag = function (e) {\n\t                var target = e.target;\n\t                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\t                _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n\t                ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t                if (!(util_1.parentsUntil(target, 'e-gridcontent') || util_1.parentsUntil(target, 'e-headercell'))) {\n\t                    ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t                }\n\t            };\n\t            this.dragStop = function (e) {\n\t                _this.parent.element.classList.remove('e-ungroupdrag');\n\t                if (!(util_1.parentsUntil(e.target, 'e-gridcontent') || util_1.parentsUntil(e.target, 'e-gridheader'))) {\n\t                    ej2_base_2.remove(e.helper);\n\t                    return;\n\t                }\n\t            };\n\t            this.drop = function (e) {\n\t                var gObj = _this.parent;\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                _this.element.classList.remove('e-hover');\n\t                ej2_base_2.remove(e.droppedElement);\n\t                _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n\t                _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                _this.groupColumn(column.field);\n\t            };\n\t            this.contentRefresh = true;\n\t            this.aria = new aria_service_1.AriaService();\n\t            this.parent = parent;\n\t            this.groupSettings = groupSettings;\n\t            this.serviceLocator = serviceLocator;\n\t            this.sortedColumns = sortedColumns;\n\t            this.addEventListener();\n\t        }\n\t        Group.prototype.columnDrag = function (e) {\n\t            var gObj = this.parent;\n\t            var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n\t            ej2_base_2.classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n\t            if (!util_1.parentsUntil(e.target, 'e-groupdroparea') &&\n\t                !(this.parent.allowReordering && util_1.parentsUntil(e.target, 'e-headercell'))) {\n\t                ej2_base_2.classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\t            }\n\t            e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n\t        };\n\t        Group.prototype.columnDragStart = function (e) {\n\t            if (e.target.classList.contains('e-stackedheadercell')) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n\t            this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n\t            var element = e.target.classList.contains('e-headercell') ? e.target : util_1.parentsUntil(e.target, 'e-headercell');\n\t            this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n\t        };\n\t        Group.prototype.columnDrop = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.droppedElement.getAttribute('action') === 'grouping') {\n\t                var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n\t                if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                    util_1.parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n\t                        gObj.element.getAttribute('id')) {\n\t                    return;\n\t                }\n\t                this.ungroupColumn(column.field);\n\t            }\n\t        };\n\t        Group.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n\t            this.parent.on(events.groupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.columnDrag, this.columnDrag, this);\n\t            this.parent.on(events.columnDragStart, this.columnDragStart, this);\n\t            this.parent.on(events.columnDrop, this.columnDrop, this);\n\t            this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n\t            this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.contentReady, this.initialEnd, this);\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.headerDrop, this.headerDrop, this);\n\t        };\n\t        Group.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.enableAfterRender);\n\t            this.parent.off(events.groupComplete, this.onActionComplete);\n\t            this.parent.off(events.ungroupComplete, this.onActionComplete);\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.columnDrag, this.columnDrag);\n\t            this.parent.off(events.columnDragStart, this.columnDragStart);\n\t            this.parent.off(events.columnDrop, this.columnDrop);\n\t            this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n\t            this.parent.off(events.sortComplete, this.refreshSortIcons);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.headerDrop, this.headerDrop);\n\t        };\n\t        Group.prototype.initialEnd = function () {\n\t            var gObj = this.parent;\n\t            this.parent.off(events.contentReady, this.initialEnd);\n\t            if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n\t                this.contentRefresh = false;\n\t                for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n\t                    var col = _a[_i];\n\t                    this.groupColumn(col);\n\t                }\n\t                this.contentRefresh = true;\n\t            }\n\t        };\n\t        Group.prototype.keyPressHandler = function (e) {\n\t            var gObj = this.parent;\n\t            if (!this.groupSettings.columns.length) {\n\t                return;\n\t            }\n\t            e.preventDefault();\n\t            switch (e.action) {\n\t                case 'altDownArrow':\n\t                case 'altUpArrow':\n\t                    var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n\t                    if (selected.length) {\n\t                        var rows = gObj.getContentTable().querySelector('tbody').children;\n\t                        var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n\t                        var grpRow = void 0;\n\t                        for (var i = dataRow.rowIndex; i >= 0; i--) {\n\t                            if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n\t                                grpRow = rows[i];\n\t                                break;\n\t                            }\n\t                        }\n\t                        this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n\t                            '.e-recordplusexpand' : '.e-recordpluscollapse'));\n\t                    }\n\t                    break;\n\t                case 'ctrlDownArrow':\n\t                    this.expandAll();\n\t                    break;\n\t                case 'ctrlUpArrow':\n\t                    this.collapseAll();\n\t                    break;\n\t            }\n\t        };\n\t        Group.prototype.clickHandler = function (e) {\n\t            this.expandCollapseRows(e.target);\n\t            this.applySortFromTarget(e.target);\n\t            this.unGroupFromTarget(e.target);\n\t            this.toogleGroupFromHeader(e.target);\n\t        };\n\t        Group.prototype.unGroupFromTarget = function (target) {\n\t            if (target.classList.contains('e-ungroupbutton')) {\n\t                this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t            }\n\t        };\n\t        Group.prototype.toogleGroupFromHeader = function (target) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                if (target.classList.contains('e-grptogglebtn')) {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                    else {\n\t                        this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n\t                    }\n\t                }\n\t                else {\n\t                    if (target.classList.contains('e-toggleungroup')) {\n\t                        this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.applySortFromTarget = function (target) {\n\t            var gObj = this.parent;\n\t            var gHeader = ej2_base_2.closest(target, '.e-groupheadercell');\n\t            if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n\t                !target.classList.contains('e-toggleungroup')) {\n\t                var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n\t                if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n\t                    gObj.sortColumn(field, 'descending', true);\n\t                }\n\t                else {\n\t                    gObj.sortColumn(field, 'ascending', true);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapseRows = function (target) {\n\t            var trgt = util_1.parentsUntil(target, 'e-recordplusexpand') ||\n\t                util_1.parentsUntil(target, 'e-recordpluscollapse');\n\t            if (trgt) {\n\t                var cellIdx = trgt.cellIndex;\n\t                var rowIdx = trgt.parentElement.rowIndex;\n\t                var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t                var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n\t                var isHide = void 0;\n\t                var expandElem = void 0;\n\t                var toExpand = [];\n\t                var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n\t                var expand = false;\n\t                if (trgt.classList.contains('e-recordpluscollapse')) {\n\t                    trgt.className = 'e-recordplusexpand';\n\t                    trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n\t                    expand = true;\n\t                }\n\t                else {\n\t                    isHide = true;\n\t                    trgt.className = 'e-recordpluscollapse';\n\t                    trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                }\n\t                this.aria.setExpand(trgt, expand);\n\t                for (var i = 0, len = rows.length; i < len; i++) {\n\t                    if (rows[i].querySelectorAll('td')[cellIdx] &&\n\t                        rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n\t                        if (isHide) {\n\t                            rows[i].style.display = 'none';\n\t                        }\n\t                        else {\n\t                            if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n\t                                rows[i].style.display = '';\n\t                                expandElem = rows[i].querySelector('.e-recordplusexpand');\n\t                                if (expandElem) {\n\t                                    toExpand.push(expandElem);\n\t                                }\n\t                                if (rows[i].classList.contains('e-detailrow')) {\n\t                                    if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n\t                                        rows[i].style.display = 'none';\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        break;\n\t                    }\n\t                }\n\t                for (var i = 0, len = toExpand.length; i < len; i++) {\n\t                    toExpand[i].className = 'e-recordpluscollapse';\n\t                    toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n\t                    this.expandCollapseRows(toExpand[i]);\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandCollapse = function (isExpand) {\n\t            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n\t            var row;\n\t            for (var i = 0, len = rowNodes.length; i < len; i++) {\n\t                if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n\t                    row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n\t                    if (row) {\n\t                        row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n\t                        row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n\t                            'e-icons e-gnextforward e-icon-grightarrow';\n\t                    }\n\t                    if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n\t                        rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n\t                        rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                    }\n\t                }\n\t                else {\n\t                    rowNodes[i].style.display = isExpand ? '' : 'none';\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.expandAll = function () {\n\t            this.expandCollapse(true);\n\t        };\n\t        Group.prototype.collapseAll = function () {\n\t            this.expandCollapse(false);\n\t        };\n\t        Group.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.renderGroupDropArea();\n\t            this.initDragAndDrop();\n\t            this.refreshToggleBtn();\n\t        };\n\t        Group.prototype.renderGroupDropArea = function () {\n\t            this.element = ej2_base_2.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n\t            this.updateGroupDropArea();\n\t            this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n\t            if (!this.groupSettings.showDropArea) {\n\t                this.element.style.display = 'none';\n\t            }\n\t        };\n\t        Group.prototype.updateGroupDropArea = function () {\n\t            if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n\t                var dragLabel = this.l10n.getConstant('GroupDropArea');\n\t                this.element.innerHTML = dragLabel;\n\t                this.element.classList.remove('e-grouped');\n\t            }\n\t            else {\n\t                if (this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && this.groupSettings.columns.length === 1) {\n\t                    this.element.innerHTML = '';\n\t                }\n\t                this.element.classList.add('e-grouped');\n\t            }\n\t        };\n\t        Group.prototype.initDragAndDrop = function () {\n\t            this.initializeGHeaderDrop();\n\t            this.initializeGHeaderDrag();\n\t        };\n\t        Group.prototype.initializeGHeaderDrag = function () {\n\t            var drag = new ej2_base_1.Draggable(this.element, {\n\t                dragTarget: '.e-groupheadercell',\n\t                distance: 5,\n\t                helper: this.helper,\n\t                dragStart: this.dragStart,\n\t                drag: this.drag,\n\t                dragStop: this.dragStop\n\t            });\n\t        };\n\t        Group.prototype.headerDrop = function (e) {\n\t            if (!e.uid) {\n\t                return;\n\t            }\n\t            var column = this.parent.getColumnByUid(e.uid);\n\t            this.ungroupColumn(column.field);\n\t        };\n\t        Group.prototype.initializeGHeaderDrop = function () {\n\t            var gObj = this.parent;\n\t            var drop = new ej2_base_1.Droppable(this.element, {\n\t                accept: '.e-dragclone',\n\t                drop: this.drop\n\t            });\n\t        };\n\t        Group.prototype.groupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false ||\n\t                (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = gObj.groupSettings.showGroupedColumn;\n\t            this.colName = columnName;\n\t            if (this.contentRefresh) {\n\t                this.updateModel();\n\t            }\n\t            else {\n\t                this.addColToGroupDrop(columnName);\n\t            }\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.ungroupColumn = function (columnName) {\n\t            var gObj = this.parent;\n\t            var column = this.parent.enableColumnVirtualization ?\n\t                this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n\t            if (ej2_base_3.isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n\t                return;\n\t            }\n\t            if (util_1.isActionPrevent(gObj)) {\n\t                gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n\t                return;\n\t            }\n\t            column.visible = true;\n\t            this.colName = column.field;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.splice(columns.indexOf(this.colName), 1);\n\t            if (this.sortedColumns.indexOf(columnName) < 0) {\n\t                for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n\t                    if (columnName === gObj.sortSettings.columns[i].field) {\n\t                        gObj.sortSettings.columns.splice(i, 1);\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            this.groupSettings.columns = columns;\n\t            if (gObj.allowGrouping) {\n\t                this.parent.dataBind();\n\t            }\n\t        };\n\t        Group.prototype.updateModel = function () {\n\t            var gObj = this.parent;\n\t            var i = 0;\n\t            var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            columns.push(this.colName);\n\t            this.groupSettings.columns = columns;\n\t            while (i < gObj.sortSettings.columns.length) {\n\t                if (gObj.sortSettings.columns[i].field === this.colName) {\n\t                    break;\n\t                }\n\t                i++;\n\t            }\n\t            if (gObj.sortSettings.columns.length === i) {\n\t                gObj.sortSettings.columns.push({ field: this.colName, direction: 'ascending' });\n\t            }\n\t            else if (!gObj.allowSorting) {\n\t                gObj.sortSettings.columns[i].direction = 'ascending';\n\t            }\n\t            this.parent.dataBind();\n\t        };\n\t        Group.prototype.onActionComplete = function (e) {\n\t            var gObj = this.parent;\n\t            if (e.requestType === 'grouping') {\n\t                this.addColToGroupDrop(this.colName);\n\t            }\n\t            else {\n\t                this.removeColFromGroupDrop(this.colName);\n\t            }\n\t            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n\t            } : { requestType: 'ungrouping', type: events.actionComplete };\n\t            this.parent.trigger(events.actionComplete, ej2_base_3.extend(e, args));\n\t        };\n\t        Group.prototype.addColToGroupDrop = function (field) {\n\t            var gObj = this.parent;\n\t            var direction = 'ascending';\n\t            var groupedColumn = ej2_base_2.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n\t            var childDiv = ej2_base_2.createElement('div', { attrs: { 'ej-mappingname': field } });\n\t            var column = this.parent.getColumnByField(field);\n\t            var headerCell = gObj.getColumnHeaderByUid(column.uid);\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-grouptext', innerHTML: column.headerText,\n\t                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t            }));\n\t            if (this.groupSettings.showToggleButton) {\n\t                childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                    className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n\t                    attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n\t                }));\n\t            }\n\t            if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n\t                direction = headerCell.querySelector('.e-ascending') ? 'ascending' : 'descending';\n\t            }\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-groupsort e-icons ' + ('e-' + direction + ' e-icon-' + direction), innerHTML: '&nbsp;',\n\t                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n\t            }));\n\t            childDiv.appendChild(ej2_base_2.createElement('span', {\n\t                className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n\t                attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n\t                styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n\t            }));\n\t            groupedColumn.appendChild(childDiv);\n\t            this.element.appendChild(groupedColumn);\n\t        };\n\t        Group.prototype.refreshToggleBtn = function (isRemove) {\n\t            if (this.groupSettings.showToggleButton) {\n\t                var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n\t                for (var i = 0, len = headers.length; i < len; i++) {\n\t                    if (!(headers[i].classList.contains('e-emptycell'))) {\n\t                        var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n\t                        if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n\t                            ej2_base_2.remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n\t                        }\n\t                        if (!isRemove) {\n\t                            headers[i].appendChild(ej2_base_2.createElement('span', {\n\t                                className: 'e-grptogglebtn e-icons ' +\n\t                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n\t                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n\t                            }));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.removeColFromGroupDrop = function (field) {\n\t            ej2_base_2.remove(this.getGHeaderCell(field));\n\t            this.updateGroupDropArea();\n\t        };\n\t        Group.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'columns':\n\t                        if (this.contentRefresh) {\n\t                            var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n\t                                columnName: this.colName, requestType: 'grouping', type: events.actionBegin\n\t                            } : { requestType: 'ungrouping', type: events.actionBegin };\n\t                            this.parent.notify(events.modelChanged, args);\n\t                        }\n\t                        break;\n\t                    case 'showDropArea':\n\t                        this.updateGroupDropArea();\n\t                        this.groupSettings.showDropArea ? this.element.style.display = '' : this.element.style.display = 'none';\n\t                        break;\n\t                    case 'showGroupedColumn':\n\t                        this.updateGroupedColumn(this.groupSettings.showGroupedColumn);\n\t                        this.parent.notify(events.modelChanged, { requestType: 'refresh' });\n\t                        break;\n\t                    case 'showUngroupButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showUngroupButton, 'e-ungroupbutton');\n\t                        break;\n\t                    case 'showToggleButton':\n\t                        this.updateButtonVisibility(this.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n\t                        this.parent.refreshHeader();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Group.prototype.updateGroupedColumn = function (isVisible) {\n\t            for (var i = 0; i < this.groupSettings.columns.length; i++) {\n\t                this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n\t            }\n\t        };\n\t        Group.prototype.updateButtonVisibility = function (isVisible, className) {\n\t            var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n\t            for (var i = 0; i < gHeader.length; i++) {\n\t                gHeader[i].style.display = isVisible ? '' : 'none';\n\t            }\n\t        };\n\t        Group.prototype.enableAfterRender = function (e) {\n\t            if (e.module === this.getModuleName() && e.enable) {\n\t                this.render();\n\t            }\n\t        };\n\t        Group.prototype.destroy = function () {\n\t            this.clearGrouping();\n\t            this.removeEventListener();\n\t            this.refreshToggleBtn(true);\n\t            ej2_base_2.remove(this.element);\n\t        };\n\t        Group.prototype.clearGrouping = function () {\n\t            var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n\t            this.contentRefresh = false;\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                this.ungroupColumn(cols[i]);\n\t            }\n\t            this.contentRefresh = true;\n\t        };\n\t        Group.prototype.getModuleName = function () {\n\t            return 'group';\n\t        };\n\t        Group.prototype.refreshSortIcons = function (e) {\n\t            var gObj = this.parent;\n\t            var header;\n\t            var cols = gObj.sortSettings.columns;\n\t            var gCols = gObj.groupSettings.columns;\n\t            var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n\t            this.refreshToggleBtn();\n\t            for (var i = 0, len = cols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(cols[i].field) === -1) {\n\t                    continue;\n\t                }\n\t                header = gObj.getColumnHeaderByField(cols[i].field);\n\t                if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n\t                    this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n\t                    ej2_base_2.classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n\t                    if (cols.length > 1) {\n\t                        header.querySelector('.e-headercelldiv').appendChild(ej2_base_2.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n\t                    }\n\t                }\n\t                else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n\t                    if (cols[i].direction === 'ascending') {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n\t                    }\n\t                    else {\n\t                        ej2_base_2.classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0, len = gCols.length; i < len; i++) {\n\t                if (fieldNames.indexOf(gCols[i]) === -1) {\n\t                    continue;\n\t                }\n\t                gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n\t            }\n\t        };\n\t        Group.prototype.getGHeaderCell = function (field) {\n\t            if (this.element && this.element.querySelector('[ej-mappingname=' + field + ']')) {\n\t                return this.element.querySelector('[ej-mappingname=' + field + ']').parentElement;\n\t            }\n\t            return null;\n\t        };\n\t        return Group;\n\t    }());\n\t    exports.Group = Group;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(62), __webpack_require__(11), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_navigations_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Toolbar = (function () {\n\t        function Toolbar(parent, serviceLocator) {\n\t            this.predefinedItems = {};\n\t            this.parent = parent;\n\t            this.gridID = parent.element.id;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        Toolbar.prototype.render = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            var preItems = ['add', 'edit', 'update', 'delete', 'cancel', 'print',\n\t                'pdfexport', 'excelexport', 'wordexport', 'csvexport'];\n\t            for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n\t                var item = preItems_1[_i];\n\t                var localeName = item[0].toUpperCase() + item.slice(1);\n\t                this.predefinedItems[item] = {\n\t                    id: this.gridID + '_' + item, prefixIcon: 'e-' + item,\n\t                    text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n\t                };\n\t            }\n\t            this.predefinedItems.search = {\n\t                id: this.gridID + '_search', template: '<div class=\"e-search\" role=\"search\" >\\\n\t                         <span id=\"' + this.gridID + '_searchbutton\" class=\"e-searchfind e-icons\" tabindex=\"-1\"\\\n\t                         role=\"button\" aria-label= \"search\"></span>\\\n\t                         <input id=\"' + this.gridID + '_searchbar\" aria-multiline= \"false\" type=\"search\"\\\n\t                         placeholder=' + this.l10n.getConstant('Search') + '>\\\n\t                         </input></div>', tooltipText: this.l10n.getConstant('Search'), align: 'right'\n\t            };\n\t            this.predefinedItems.columnchooser = {\n\t                id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n\t                text: 'Columns', tooltipText: 'columns', align: 'right',\n\t            };\n\t            this.createToolbar();\n\t        };\n\t        Toolbar.prototype.getToolbar = function () {\n\t            return this.toolbar.element;\n\t        };\n\t        Toolbar.prototype.destroy = function () {\n\t            if (!this.toolbar.isDestroyed) {\n\t                this.unWireEvent();\n\t                this.toolbar.destroy();\n\t                this.removeEventListener();\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t        };\n\t        Toolbar.prototype.createToolbar = function () {\n\t            var items = this.getItems();\n\t            this.toolbar = new ej2_navigations_1.Toolbar({\n\t                items: items,\n\t                clicked: this.toolbarClickHandler.bind(this),\n\t                enablePersistence: this.parent.enablePersistence,\n\t                enableRtl: this.parent.enableRtl\n\t            });\n\t            var viewStr = 'viewContainerRef';\n\t            var registerTemp = 'registeredTemplate';\n\t            if (this.parent[viewStr]) {\n\t                this.toolbar[registerTemp] = {};\n\t                this.toolbar[viewStr] = this.parent[viewStr];\n\t            }\n\t            this.element = ej2_base_2.createElement('div', { id: this.gridID + '_toolbarItems' });\n\t            if (this.parent.toolbarTemplate) {\n\t                if (typeof (this.parent.toolbarTemplate) === 'string') {\n\t                    this.toolbar.appendTo(this.parent.toolbarTemplate);\n\t                    this.element = this.toolbar.element;\n\t                }\n\t                else {\n\t                    util_1.appendChildren(this.element, util_1.templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n\t                }\n\t            }\n\t            else {\n\t                this.toolbar.appendTo(this.element);\n\t            }\n\t            this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n\t            this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n\t            this.wireEvent();\n\t            this.refreshToolbarItems();\n\t            if (this.parent.searchSettings) {\n\t                this.updateSearchBox();\n\t            }\n\t        };\n\t        Toolbar.prototype.refreshToolbarItems = function (args) {\n\t            var gObj = this.parent;\n\t            var enableItems = [];\n\t            var disableItems = [];\n\t            var edit = gObj.editSettings;\n\t            edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n\t            edit.allowEditing ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n\t            edit.allowDeleting ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n\t            if (gObj.editSettings.mode === 'batch') {\n\t                if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems.push(this.gridID + '_update');\n\t                    enableItems.push(this.gridID + '_cancel');\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            else {\n\t                if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n\t                    enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n\t                    disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n\t                }\n\t                else {\n\t                    disableItems.push(this.gridID + '_update');\n\t                    disableItems.push(this.gridID + '_cancel');\n\t                }\n\t            }\n\t            this.enableItems(enableItems, true);\n\t            this.enableItems(disableItems, false);\n\t        };\n\t        Toolbar.prototype.getItems = function () {\n\t            var items = [];\n\t            var toolbarItems = this.parent.toolbar || [];\n\t            if (typeof (this.parent.toolbar) === 'string') {\n\t                return [];\n\t            }\n\t            for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n\t                var item = toolbarItems_1[_i];\n\t                typeof (item) === 'string' ? items.push(this.getItemObject(item)) : items.push(this.getItem(item));\n\t            }\n\t            return items;\n\t        };\n\t        Toolbar.prototype.getItem = function (itemObject) {\n\t            var item = this.predefinedItems[itemObject.text];\n\t            if (item) {\n\t                ej2_base_1.extend(item, item, itemObject);\n\t            }\n\t            else {\n\t                item = itemObject;\n\t            }\n\t            return item;\n\t        };\n\t        Toolbar.prototype.getItemObject = function (itemName) {\n\t            return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n\t        };\n\t        Toolbar.prototype.enableItems = function (items, isEnable) {\n\t            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n\t                var item = items_1[_i];\n\t                var element = this.element.querySelector('#' + item);\n\t                if (element) {\n\t                    this.toolbar.enableItems(element.parentElement, isEnable);\n\t                }\n\t            }\n\t        };\n\t        Toolbar.prototype.toolbarClickHandler = function (args) {\n\t            var gObj = this.parent;\n\t            var gID = this.gridID;\n\t            if (!args.item) {\n\t                gObj.trigger(events.toolbarClick, args);\n\t                return;\n\t            }\n\t            switch (args.item.id) {\n\t                case gID + '_print':\n\t                    gObj.print();\n\t                    break;\n\t                case gID + '_edit':\n\t                    gObj.startEdit();\n\t                    break;\n\t                case gID + '_update':\n\t                    gObj.endEdit();\n\t                    break;\n\t                case gID + '_cancel':\n\t                    gObj.closeEdit();\n\t                    break;\n\t                case gID + '_add':\n\t                    gObj.addRecord();\n\t                    break;\n\t                case gID + '_delete':\n\t                    gObj.deleteRecord();\n\t                    break;\n\t                case gID + '_search':\n\t                    if (args.originalEvent.target.id === gID + '_searchbutton') {\n\t                        this.search();\n\t                    }\n\t                    break;\n\t                case gID + '_columnchooser':\n\t                    var tarElement = this.parent.element.querySelector('.e-ccdiv');\n\t                    var y = tarElement.getBoundingClientRect().top;\n\t                    var x = tarElement.getBoundingClientRect().left;\n\t                    var targetEle = args.originalEvent.target;\n\t                    y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n\t                    gObj.createColumnchooser(x, y, targetEle);\n\t                    break;\n\t                default:\n\t                    gObj.trigger(events.toolbarClick, args);\n\t            }\n\t        };\n\t        Toolbar.prototype.modelChanged = function (e) {\n\t            if (e.module === 'edit') {\n\t                this.refreshToolbarItems();\n\t            }\n\t        };\n\t        Toolbar.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n\t                return;\n\t            }\n\t            if (this.element) {\n\t                ej2_base_2.remove(this.element);\n\t            }\n\t            this.render();\n\t        };\n\t        Toolbar.prototype.keyUpHandler = function (e) {\n\t            if (e.keyCode === 13) {\n\t                this.search();\n\t            }\n\t        };\n\t        Toolbar.prototype.search = function () {\n\t            this.parent.search(this.searchElement.value);\n\t        };\n\t        Toolbar.prototype.updateSearchBox = function () {\n\t            if (this.searchElement) {\n\t                this.searchElement.value = this.parent.searchSettings.key;\n\t            }\n\t        };\n\t        Toolbar.prototype.wireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n\t            }\n\t        };\n\t        Toolbar.prototype.unWireEvent = function () {\n\t            if (this.searchElement) {\n\t                ej2_base_1.EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n\t            }\n\t        };\n\t        Toolbar.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.initialEnd, this.render, this);\n\t            this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n\t            this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n\t            this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n\t            this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n\t            this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n\t            this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n\t        };\n\t        Toolbar.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.initialEnd, this.render);\n\t            this.parent.off(events.uiUpdate, this.onPropertyChanged);\n\t            this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n\t            this.parent.off(events.modelChanged, this.refreshToolbarItems);\n\t            this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n\t            this.parent.off(events.inBoundModelChanged, this.modelChanged);\n\t            this.parent.off(events.dataBound, this.refreshToolbarItems);\n\t        };\n\t        Toolbar.prototype.getModuleName = function () {\n\t            return 'toolbar';\n\t        };\n\t        return Toolbar;\n\t    }());\n\t    exports.Toolbar = Toolbar;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_62__;\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(15), __webpack_require__(11), __webpack_require__(64), __webpack_require__(65), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, enum_1, constant_1, footer_renderer_1, summary_cell_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Aggregate = (function () {\n\t        function Aggregate(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        Aggregate.prototype.getModuleName = function () {\n\t            return 'aggregate';\n\t        };\n\t        Aggregate.prototype.initiateRender = function () {\n\t            var _this = this;\n\t            var cellFac = this.locator.getService('cellRendererFactory');\n\t            var instance = new summary_cell_renderer_1.SummaryCellRenderer(this.parent, this.locator);\n\t            [enum_1.CellType.Summary, enum_1.CellType.CaptionSummary, enum_1.CellType.GroupSummary].forEach(function (type) {\n\t                return cellFac.addCellRenderer(type, instance);\n\t            });\n\t            this.footerRenderer = new footer_renderer_1.FooterRenderer(this.parent, this.locator);\n\t            this.footerRenderer.renderPanel();\n\t            this.footerRenderer.renderTable();\n\t            this.locator.register('footerRenderer', this.footerRenderer);\n\t            var fn = function () {\n\t                _this.prepareSummaryInfo();\n\t                _this.parent.off(constant_1.dataReady, fn);\n\t            };\n\t            this.parent.on(constant_1.dataReady, fn, this);\n\t            this.parent.on(constant_1.dataReady, this.footerRenderer.refresh, this.footerRenderer);\n\t        };\n\t        Aggregate.prototype.prepareSummaryInfo = function () {\n\t            var _this = this;\n\t            summaryIterator(this.parent.aggregates, function (column) {\n\t                var dataColumn = _this.parent.getColumnByField(column.field) || {};\n\t                var type = dataColumn.type;\n\t                column.format = _this.getFormatFromType(column.format, type);\n\t                column.setFormatter();\n\t                column.columnName = column.columnName || column.field;\n\t            });\n\t        };\n\t        Aggregate.prototype.getFormatFromType = function (format, type) {\n\t            if (ej2_base_2.isNullOrUndefined(type) || typeof format !== 'string') {\n\t                return format;\n\t            }\n\t            var obj;\n\t            switch (type) {\n\t                case 'number':\n\t                    obj = { format: format };\n\t                    break;\n\t                case 'date':\n\t                    obj = { type: type, skeleton: format };\n\t                    break;\n\t                case 'datetime':\n\t                    obj = { type: 'dateTime', skeleton: format };\n\t                    break;\n\t            }\n\t            return obj;\n\t        };\n\t        Aggregate.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            if (ej2_base_2.isNullOrUndefined(this.footerRenderer)) {\n\t                this.initiateRender();\n\t            }\n\t            this.prepareSummaryInfo();\n\t            this.footerRenderer.refresh();\n\t            var cModel = new summary_model_generator_1.CaptionSummaryModelGenerator(this.parent);\n\t            var gModel = new summary_model_generator_1.GroupSummaryModelGenerator(this.parent);\n\t            if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n\t                this.parent.notify(constant_1.modelChanged, {});\n\t            }\n\t        };\n\t        Aggregate.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialEnd, this.initiateRender, this);\n\t            this.parent.on(constant_1.uiUpdate, this.onPropertyChanged, this);\n\t        };\n\t        Aggregate.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.footerRenderer.removeEventListener();\n\t            this.parent.off(constant_1.initialEnd, this.initiateRender);\n\t            this.parent.off(constant_1.dataReady, this.footerRenderer.refresh);\n\t            this.parent.off(constant_1.uiUpdate, this.onPropertyChanged);\n\t        };\n\t        Aggregate.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t            ej2_base_1.remove(this.parent.getFooterContent());\n\t        };\n\t        return Aggregate;\n\t    }());\n\t    exports.Aggregate = Aggregate;\n\t    function summaryIterator(aggregates, callback) {\n\t        aggregates.forEach(function (row) {\n\t            row.columns.forEach(function (column) {\n\t                callback(column, row);\n\t            });\n\t        });\n\t    }\n\t    exports.summaryIterator = summaryIterator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(11), __webpack_require__(19), __webpack_require__(14), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, constant_1, content_renderer_1, row_renderer_1, summary_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FooterRenderer = (function (_super) {\n\t        __extends(FooterRenderer, _super);\n\t        function FooterRenderer(gridModule, serviceLocator) {\n\t            var _this = _super.call(this, gridModule, serviceLocator) || this;\n\t            _this.aggregates = {};\n\t            _this.parent = gridModule;\n\t            _this.locator = serviceLocator;\n\t            _this.modelGenerator = new summary_model_generator_1.SummaryModelGenerator(_this.parent);\n\t            _this.addEventListener();\n\t            return _this;\n\t        }\n\t        FooterRenderer.prototype.renderPanel = function () {\n\t            var div = ej2_base_1.createElement('div', { className: 'e-gridfooter' });\n\t            var innerDiv = ej2_base_1.createElement('div', { className: 'e-summarycontent' });\n\t            if (ej2_base_3.Browser.isDevice) {\n\t                innerDiv.style.overflowX = 'scroll';\n\t            }\n\t            div.appendChild(innerDiv);\n\t            this.setPanel(div);\n\t            if (this.parent.getPager() != null) {\n\t                this.parent.element.insertBefore(div, this.parent.getPager());\n\t            }\n\t            else {\n\t                this.parent.element.appendChild(div);\n\t            }\n\t        };\n\t        FooterRenderer.prototype.renderTable = function () {\n\t            var contentDiv = this.getPanel();\n\t            var innerDiv = this.createContentTable();\n\t            var table = innerDiv.querySelector('.e-table');\n\t            var tFoot = ej2_base_1.createElement('tfoot');\n\t            table.appendChild(tFoot);\n\t            this.setTable(table);\n\t        };\n\t        FooterRenderer.prototype.renderSummaryContent = function (e) {\n\t            var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n\t            var summaries = this.modelGenerator.getData();\n\t            var dummies = this.modelGenerator.getColumns();\n\t            var rows = this.modelGenerator.generateRows(input, e || this.aggregates);\n\t            var fragment = document.createDocumentFragment();\n\t            var rowrenderer = new row_renderer_1.RowRenderer(this.locator);\n\t            rowrenderer.element = ej2_base_1.createElement('TR', { className: 'e-summaryrow' });\n\t            for (var srow = 0, len = summaries.length; srow < len; srow++) {\n\t                var row = rows[srow];\n\t                if (!row) {\n\t                    continue;\n\t                }\n\t                var tr = rowrenderer.render(row, dummies);\n\t                fragment.appendChild(tr);\n\t            }\n\t            this.getTable().tFoot.appendChild(fragment);\n\t            this.aggregates = e;\n\t        };\n\t        FooterRenderer.prototype.refresh = function (e) {\n\t            this.getTable().tFoot.innerHTML = '';\n\t            this.renderSummaryContent(e);\n\t            this.onScroll();\n\t        };\n\t        FooterRenderer.prototype.refreshCol = function () {\n\t            var headerCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n\t            this.getTable().replaceChild(headerCol, this.getColGroup());\n\t            this.setColGroup(headerCol);\n\t        };\n\t        FooterRenderer.prototype.onWidthChange = function (args) {\n\t            this.getColGroup().children[args.index].style.width = ej2_base_2.formatUnit(args.width);\n\t            if (this.parent.allowResizing && args.module === 'resize') {\n\t                this.updateFooterTableWidth(this.getTable());\n\t            }\n\t        };\n\t        FooterRenderer.prototype.onScroll = function (e) {\n\t            if (e === void 0) { e = { left: this.parent.getContent().firstChild.scrollLeft }; }\n\t            this.getPanel().firstChild.scrollLeft = e.left;\n\t        };\n\t        FooterRenderer.prototype.columnVisibilityChanged = function () {\n\t            this.refresh();\n\t        };\n\t        FooterRenderer.prototype.addEventListener = function () {\n\t            this.parent.on(constant_1.colGroupRefresh, this.refreshCol, this);\n\t            this.parent.on(constant_1.columnWidthChanged, this.onWidthChange, this);\n\t            this.parent.on(constant_1.scroll, this.onScroll, this);\n\t            this.parent.on(constant_1.columnVisibilityChanged, this.columnVisibilityChanged, this);\n\t        };\n\t        FooterRenderer.prototype.removeEventListener = function () {\n\t            this.parent.off(constant_1.colGroupRefresh, this.refreshCol);\n\t            this.parent.off(constant_1.columnWidthChanged, this.onWidthChange);\n\t            this.parent.off(constant_1.scroll, this.onScroll);\n\t            this.parent.off(constant_1.columnVisibilityChanged, this.columnVisibilityChanged);\n\t        };\n\t        FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n\t            var tHead = this.parent.getHeaderTable();\n\t            if (tHead && tFoot) {\n\t                tFoot.style.width = tHead.style.width;\n\t            }\n\t        };\n\t        return FooterRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.FooterRenderer = FooterRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(23)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, cell_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SummaryCellRenderer = (function (_super) {\n\t        __extends(SummaryCellRenderer, _super);\n\t        function SummaryCellRenderer() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.element = ej2_base_2.createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n\t            return _this;\n\t        }\n\t        SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n\t            var key;\n\t            key = !ej2_base_1.isNullOrUndefined(column.type) ? column.field + ' - ' + (column.type) : column.columnName;\n\t            return data[column.columnName] ? data[column.columnName][key] : '';\n\t        };\n\t        SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n\t            var column = cell.column;\n\t            if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n\t                return true;\n\t            }\n\t            var tempObj = column.getTemplate(cell.cellType);\n\t            util_1.appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property));\n\t            return false;\n\t        };\n\t        return SummaryCellRenderer;\n\t    }(cell_renderer_1.CellRenderer));\n\t    exports.SummaryCellRenderer = SummaryCellRenderer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(7), __webpack_require__(11), __webpack_require__(15), __webpack_require__(67), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, util_1, constant_1, enum_1, virtual_content_renderer_1, events) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualScroll = (function () {\n\t        function VirtualScroll(parent, locator) {\n\t            this.parent = parent;\n\t            this.locator = locator;\n\t            this.addEventListener();\n\t        }\n\t        VirtualScroll.prototype.getModuleName = function () {\n\t            return 'virtualscroll';\n\t        };\n\t        VirtualScroll.prototype.instantiateRenderer = function () {\n\t            var renderer = this.locator.getService('rendererFactory');\n\t            if (this.parent.enableColumnVirtualization) {\n\t                renderer.addRenderer(enum_1.RenderType.Header, new virtual_content_renderer_1.VirtualHeaderRenderer(this.parent, this.locator));\n\t            }\n\t            renderer.addRenderer(enum_1.RenderType.Content, new virtual_content_renderer_1.VirtualContentRenderer(this.parent, this.locator));\n\t            this.ensurePageSize();\n\t        };\n\t        VirtualScroll.prototype.ensurePageSize = function () {\n\t            var rowHeight = util_1.getRowHeight(this.parent.element);\n\t            this.blockSize = ~~(this.parent.height / rowHeight);\n\t            var height = this.blockSize * 2;\n\t            var size = this.parent.pageSettings.pageSize;\n\t            this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n\t        };\n\t        VirtualScroll.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(constant_1.initialLoad, this.instantiateRenderer, this);\n\t            this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n\t        };\n\t        VirtualScroll.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(constant_1.initialLoad, this.instantiateRenderer);\n\t            this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n\t        };\n\t        VirtualScroll.prototype.refreshVirtualElement = function (args) {\n\t            if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n\t                var renderer = this.locator.getService('rendererFactory');\n\t                renderer.getRenderer(enum_1.RenderType.Content).refreshVirtualElement();\n\t            }\n\t        };\n\t        VirtualScroll.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return VirtualScroll;\n\t    }());\n\t    exports.VirtualScroll = VirtualScroll;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(8), __webpack_require__(7), __webpack_require__(11), __webpack_require__(15), __webpack_require__(19), __webpack_require__(13), __webpack_require__(68), __webpack_require__(69)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_data_1, util_1, constant_1, enum_1, content_renderer_1, header_renderer_1, intersection_observer_1, virtual_row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualContentRenderer = (function (_super) {\n\t        __extends(VirtualContentRenderer, _super);\n\t        function VirtualContentRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.prevHeight = 0;\n\t            _this.preventEvent = false;\n\t            _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n\t            _this.offsets = {};\n\t            _this.tmpOffsets = {};\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.offsetKeys = [];\n\t            _this.isFocused = false;\n\t            _this.locator = locator;\n\t            _this.eventListener('on');\n\t            _this.vgenerator = _this.generator;\n\t            return _this;\n\t        }\n\t        VirtualContentRenderer.prototype.renderTable = function () {\n\t            this.header = this.locator.getService('rendererFactory').getRenderer(enum_1.RenderType.Header);\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.content = this.getPanel().firstChild;\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder();\n\t            this.virtualEle.wrapper.style.position = 'absolute';\n\t            var debounceEvent = (this.parent.dataSource instanceof ej2_data_1.DataManager && !this.parent.dataSource.dataSource.offline);\n\t            var opt = {\n\t                container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n\t                axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n\t            };\n\t            this.observer = new intersection_observer_1.InterSectionObserver(this.virtualEle.wrapper, opt);\n\t        };\n\t        VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n\t            this.getTable().appendChild(tbody);\n\t            this.virtualEle.adjustTable(0, 0);\n\t        };\n\t        VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n\t            if (this.preventEvent || this.parent.isDestroyed) {\n\t                this.preventEvent = false;\n\t                return;\n\t            }\n\t            this.isFocused = this.content === ej2_base_1.closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n\t            var info = scrollArgs.sentinel;\n\t            var viewInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n\t            if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n\t                || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n\t                return;\n\t            }\n\t            this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n\t            this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n\t            this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo });\n\t        };\n\t        VirtualContentRenderer.prototype.block = function (blk) {\n\t            return this.vgenerator.isBlockAvailable(blk);\n\t        };\n\t        VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n\t            var tempBlocks = [];\n\t            var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n\t            infoType.page = this.getPageFromTop(e.top, infoType);\n\t            infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n\t            infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n\t            var blocks = this.ensureBlocks(infoType);\n\t            infoType.blockIndexes = blocks;\n\t            infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n\t                .every(this.block.bind(this));\n\t            infoType.event = (infoType.loadNext || infoType.loadSelf) ? constant_1.modelChanged : constant_1.refreshVirtualBlock;\n\t            infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n\t            infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n\t            if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n\t                infoType.event = constant_1.refreshVirtualBlock;\n\t            }\n\t            return infoType;\n\t        };\n\t        VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n\t            var _this = this;\n\t            var index = info.blockIndexes[info.block];\n\t            var mIdx;\n\t            var old = index;\n\t            var max = Math.max;\n\t            var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n\t            indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n\t            if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n\t                return indexes;\n\t            }\n\t            if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n\t                indexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            indexes.some(function (val, ind) {\n\t                var result = val === _this.getTotalBlocks();\n\t                if (result) {\n\t                    mIdx = ind;\n\t                }\n\t                return result;\n\t            });\n\t            if (mIdx !== undefined) {\n\t                indexes = indexes.slice(0, mIdx + 1);\n\t                if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n\t                    indexes = [indexes[0] - 1, indexes[0]];\n\t                }\n\t            }\n\t            return indexes;\n\t        };\n\t        VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n\t            var info = e.virtualInfo;\n\t            this.prevInfo = this.prevInfo || e.virtualInfo;\n\t            var cBlock = (info.columnIndexes[0]) - 1;\n\t            var cOffset = this.getColumnOffset(cBlock);\n\t            var width;\n\t            var blocks = info.blockIndexes;\n\t            if (this.parent.groupSettings.columns.length) {\n\t                this.refreshOffsets();\n\t            }\n\t            var translate = this.getTranslateY(this.content.scrollTop, this.content.getBoundingClientRect().height, info);\n\t            this.virtualEle.adjustTable(cOffset, translate);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.adjustTable(cOffset, 0);\n\t            }\n\t            if (this.parent.enableColumnVirtualization) {\n\t                var cIndex = info.columnIndexes;\n\t                width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n\t                this.header.virtualEle.setWrapperWidth(width);\n\t            }\n\t            this.virtualEle.setWrapperWidth(width, this.parent.enableColumnVirtualization || ej2_base_2.Browser.isIE);\n\t            target.appendChild(newChild);\n\t            this.getTable().appendChild(target);\n\t            if (this.parent.groupSettings.columns.length) {\n\t                if (info.direction === 'up') {\n\t                    var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n\t                    this.preventEvent = true;\n\t                    var sTop = this.content.scrollTop;\n\t                    this.content.scrollTop = sTop + blk;\n\t                }\n\t                this.setVirtualHeight();\n\t                this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n\t            }\n\t            this.prevInfo = info;\n\t            if (this.isFocused) {\n\t                this.content.focus();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onDataReady = function (e) {\n\t            if (!ej2_base_3.isNullOrUndefined(e.count)) {\n\t                this.count = e.count;\n\t                this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n\t            }\n\t            this.refreshOffsets();\n\t            this.setVirtualHeight();\n\t            this.resetScrollPosition(e.requestType);\n\t        };\n\t        VirtualContentRenderer.prototype.setVirtualHeight = function () {\n\t            var width = this.parent.enableColumnVirtualization ?\n\t                this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n\t            this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()], width);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.header.virtualEle.setVirtualHeight(1, width);\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n\t            var _this = this;\n\t            var total = this.getTotalBlocks();\n\t            var page = 0;\n\t            var extra = this.offsets[total] - this.prevHeight;\n\t            this.offsetKeys.some(function (offset) {\n\t                var iOffset = Number(offset);\n\t                var border = sTop < _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n\t                if (border) {\n\t                    info.block = iOffset % 2 === 0 ? 1 : 0;\n\t                    page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n\t                }\n\t                return border;\n\t            });\n\t            return page;\n\t        };\n\t        VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info) {\n\t            if (info === undefined) {\n\t                info = { page: this.getPageFromTop(sTop, {}) };\n\t                info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n\t            }\n\t            var block = (info.blockIndexes[0] || 1) - 1;\n\t            var translate = this.getOffset(block);\n\t            var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n\t            return translate > sTop ? this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n\t        };\n\t        VirtualContentRenderer.prototype.getOffset = function (block) {\n\t            return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock]);\n\t        };\n\t        VirtualContentRenderer.prototype.onEntered = function () {\n\t            var _this = this;\n\t            return function (element, current, direction, e) {\n\t                var xAxis = current.axis === 'X';\n\t                var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n\t                var height = _this.content.getBoundingClientRect().height;\n\t                var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n\t                var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined);\n\t                _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n\t                if (_this.parent.enableColumnVirtualization) {\n\t                    _this.header.virtualEle.adjustTable(x, 0);\n\t                }\n\t            };\n\t        };\n\t        VirtualContentRenderer.prototype.eventListener = function (action) {\n\t            var _this = this;\n\t            this.parent[action](constant_1.dataReady, this.onDataReady, this);\n\t            this.parent[action](constant_1.refreshVirtualBlock, this.refreshContentRows, this);\n\t            this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n\t            var fn = function () {\n\t                _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n\t                _this.parent.off(constant_1.contentReady, fn);\n\t            };\n\t            this.parent.on(constant_1.contentReady, fn, this);\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockSize = function () {\n\t            return this.parent.pageSettings.pageSize >> 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getBlockHeight = function () {\n\t            return this.getBlockSize() * util_1.getRowHeight();\n\t        };\n\t        VirtualContentRenderer.prototype.isEndBlock = function (index) {\n\t            var totalBlocks = this.getTotalBlocks();\n\t            return index >= totalBlocks || index === totalBlocks - 1;\n\t        };\n\t        VirtualContentRenderer.prototype.getTotalBlocks = function () {\n\t            return Math.ceil(this.count / this.getBlockSize());\n\t        };\n\t        VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n\t            return this.vgenerator.cOffsets[block] | 0;\n\t        };\n\t        VirtualContentRenderer.prototype.getModelGenerator = function () {\n\t            return new virtual_row_model_generator_1.VirtualRowModelGenerator(this.parent);\n\t        };\n\t        VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n\t            if (this.actions.some(function (value) { return value === action; })) {\n\t                this.preventEvent = this.content.scrollTop !== 0;\n\t                this.content.scrollTop = 0;\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.onActionBegin = function (e) {\n\t            this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n\t        };\n\t        VirtualContentRenderer.prototype.getRows = function () {\n\t            return this.vgenerator.getRows();\n\t        };\n\t        VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n\t            var prev = this.prevInfo.blockIndexes;\n\t            var startIdx = (prev[0] - 1) * this.getBlockSize();\n\t            return this.parent.getDataRows()[index - startIdx];\n\t        };\n\t        VirtualContentRenderer.prototype.refreshOffsets = function () {\n\t            var _this = this;\n\t            var row = 0;\n\t            var bSize = this.getBlockSize();\n\t            var total = this.getTotalBlocks();\n\t            this.prevHeight = this.offsets[total];\n\t            this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n\t            this.offsets = {};\n\t            Array.apply(null, Array(total)).map(function () { return ++row; })\n\t                .forEach(function (block) {\n\t                var tmp = (_this.vgenerator.cache[block] || []).length;\n\t                var rem = _this.count % bSize;\n\t                var size = block in _this.vgenerator.cache ?\n\t                    tmp * util_1.getRowHeight() : rem && block === total ? rem * util_1.getRowHeight() : _this.getBlockHeight();\n\t                _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n\t                _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n\t            });\n\t            this.offsetKeys = Object.keys(this.offsets);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                this.vgenerator.refreshColOffsets();\n\t            }\n\t        };\n\t        VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n\t            this.vgenerator.refreshColOffsets();\n\t            this.setVirtualHeight();\n\t        };\n\t        return VirtualContentRenderer;\n\t    }(content_renderer_1.ContentRender));\n\t    exports.VirtualContentRenderer = VirtualContentRenderer;\n\t    var VirtualHeaderRenderer = (function (_super) {\n\t        __extends(VirtualHeaderRenderer, _super);\n\t        function VirtualHeaderRenderer(parent, locator) {\n\t            var _this = _super.call(this, parent, locator) || this;\n\t            _this.virtualEle = new VirtualElementHandler();\n\t            _this.gen = new virtual_row_model_generator_1.VirtualRowModelGenerator(_this.parent);\n\t            _this.parent.on(constant_1.refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n\t            return _this;\n\t        }\n\t        VirtualHeaderRenderer.prototype.renderTable = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.renderTable.call(this);\n\t            this.virtualEle.table = this.getTable();\n\t            this.virtualEle.content = this.getPanel().firstChild;\n\t            this.virtualEle.content.style.position = 'relative';\n\t            this.virtualEle.renderWrapper();\n\t            this.virtualEle.renderPlaceHolder('absolute');\n\t        };\n\t        VirtualHeaderRenderer.prototype.appendContent = function (table) {\n\t            this.virtualEle.wrapper.appendChild(table);\n\t        };\n\t        VirtualHeaderRenderer.prototype.refreshUI = function () {\n\t            this.gen.refreshColOffsets();\n\t            this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n\t            _super.prototype.refreshUI.call(this);\n\t        };\n\t        return VirtualHeaderRenderer;\n\t    }(header_renderer_1.HeaderRender));\n\t    exports.VirtualHeaderRenderer = VirtualHeaderRenderer;\n\t    var VirtualElementHandler = (function () {\n\t        function VirtualElementHandler() {\n\t        }\n\t        VirtualElementHandler.prototype.renderWrapper = function () {\n\t            this.wrapper = ej2_base_1.createElement('div', { className: 'e-virtualtable' });\n\t            this.wrapper.appendChild(this.table);\n\t            this.content.appendChild(this.wrapper);\n\t        };\n\t        VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n\t            if (position === void 0) { position = 'relative'; }\n\t            this.placeholder = ej2_base_1.createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n\t            this.content.appendChild(this.placeholder);\n\t        };\n\t        VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n\t            this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n\t        };\n\t        VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n\t            this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n\t        };\n\t        VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n\t            this.placeholder.style.height = height + \"px\";\n\t            this.placeholder.style.width = width;\n\t        };\n\t        return VirtualElementHandler;\n\t    }());\n\t    exports.VirtualElementHandler = VirtualElementHandler;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InterSectionObserver = (function () {\n\t        function InterSectionObserver(element, options) {\n\t            var _this = this;\n\t            this.fromWheel = false;\n\t            this.touchMove = false;\n\t            this.options = {};\n\t            this.sentinelInfo = {\n\t                'up': {\n\t                    check: function (rect, info) {\n\t                        var top = rect.top - _this.containerRect.top;\n\t                        info.entered = top >= 0;\n\t                        return top + (_this.options.pageHeight / 2) >= 0;\n\t                    },\n\t                    axis: 'Y'\n\t                },\n\t                'down': {\n\t                    check: function (rect, info) {\n\t                        var cHeight = _this.options.container.clientHeight;\n\t                        var top = rect.bottom;\n\t                        info.entered = rect.bottom <= _this.containerRect.bottom;\n\t                        return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n\t                    }, axis: 'Y'\n\t                },\n\t                'right': {\n\t                    check: function (rect, info) {\n\t                        var right = rect.right;\n\t                        info.entered = right < _this.containerRect.right;\n\t                        return right - _this.containerRect.width <= _this.containerRect.right;\n\t                    }, axis: 'X'\n\t                },\n\t                'left': {\n\t                    check: function (rect, info) {\n\t                        var left = rect.left;\n\t                        info.entered = left > 0;\n\t                        return left + _this.containerRect.width >= _this.containerRect.left;\n\t                    }, axis: 'X'\n\t                }\n\t            };\n\t            this.element = element;\n\t            this.options = options;\n\t        }\n\t        InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            this.containerRect = this.options.container.getBoundingClientRect();\n\t            ej2_base_1.EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n\t            ej2_base_1.EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n\t        };\n\t        InterSectionObserver.prototype.check = function (direction) {\n\t            var info = this.sentinelInfo[direction];\n\t            return info.check(this.element.getBoundingClientRect(), info);\n\t        };\n\t        InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n\t            var _this = this;\n\t            var prevTop = 0;\n\t            var prevLeft = 0;\n\t            var debounced100 = ej2_base_2.debounce(callback, 100);\n\t            var debounced50 = ej2_base_2.debounce(callback, 50);\n\t            return function (e) {\n\t                var top = e.target.scrollTop;\n\t                var left = e.target.scrollLeft;\n\t                var direction = prevTop < top ? 'down' : 'up';\n\t                direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n\t                prevTop = top;\n\t                prevLeft = left;\n\t                var current = _this.sentinelInfo[direction];\n\t                if (_this.options.axes.indexOf(current.axis) === -1) {\n\t                    return;\n\t                }\n\t                var check = _this.check(direction);\n\t                if (current.entered) {\n\t                    onEnterCallback(_this.element, current, direction, { top: top, left: left });\n\t                }\n\t                if (check) {\n\t                    var fn = _this.fromWheel ? _this.options.debounceEvent ? debounced100 : callback : debounced100;\n\t                    if (current.axis === 'X') {\n\t                        fn = debounced50;\n\t                    }\n\t                    fn({ direction: direction, sentinel: current, offset: { top: top, left: left } });\n\t                }\n\t                _this.fromWheel = false;\n\t            };\n\t        };\n\t        InterSectionObserver.prototype.setPageHeight = function (value) {\n\t            this.options.pageHeight = value;\n\t        };\n\t        return InterSectionObserver;\n\t    }());\n\t    exports.InterSectionObserver = InterSectionObserver;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(20), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var VirtualRowModelGenerator = (function () {\n\t        function VirtualRowModelGenerator(parent) {\n\t            this.cOffsets = {};\n\t            this.cache = {};\n\t            this.data = {};\n\t            this.groups = {};\n\t            this.parent = parent;\n\t            this.model = this.parent.pageSettings;\n\t            this.rowModelGenerator = this.parent.allowGrouping ? new group_model_generator_1.GroupModelGenerator(this.parent) : new row_model_generator_1.RowModelGenerator(this.parent);\n\t        }\n\t        VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n\t            var _this = this;\n\t            var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n\t            var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n\t            var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n\t            var result = [];\n\t            var center = ~~(this.model.pageSize / 2);\n\t            var indexes = this.getBlockIndexes(page);\n\t            var loadedBlocks = [];\n\t            this.checkAndResetCache(notifyArgs.requestType);\n\t            if (this.parent.enableColumnVirtualization) {\n\t                info.blockIndexes.forEach(function (value) {\n\t                    if (_this.isBlockAvailable(value)) {\n\t                        _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n\t                    }\n\t                });\n\t            }\n\t            info.blockIndexes.forEach(function (value) {\n\t                if (!_this.isBlockAvailable(value)) {\n\t                    var rows = _this.rowModelGenerator.generateRows(data, {\n\t                        virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n\t                    });\n\t                    var median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n\t                    if (!_this.isBlockAvailable(indexes[0])) {\n\t                        _this.cache[indexes[0]] = rows.slice(0, median);\n\t                    }\n\t                    if (!_this.isBlockAvailable(indexes[1])) {\n\t                        _this.cache[indexes[1]] = rows.slice(median);\n\t                    }\n\t                }\n\t                if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n\t                    _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n\t                }\n\t                result.push.apply(result, _this.cache[value]);\n\t                if (_this.isBlockAvailable(value)) {\n\t                    loadedBlocks.push(value);\n\t                }\n\t            });\n\t            info.blockIndexes = loadedBlocks;\n\t            return result;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n\t            return [page + (page - 1), page * 2];\n\t        };\n\t        VirtualRowModelGenerator.prototype.getPage = function (block) {\n\t            return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n\t        };\n\t        VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n\t            return value in this.cache;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getData = function () {\n\t            return {\n\t                page: this.model.currentPage,\n\t                blockIndexes: this.getBlockIndexes(this.model.currentPage),\n\t                direction: 'down',\n\t                columnIndexes: this.parent.getColumnIndexesInView()\n\t            };\n\t        };\n\t        VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n\t            if (full === void 0) { full = true; }\n\t            var page = this.getPage(blk);\n\t            var even = blk % 2 === 0;\n\t            var index = (page - 1) * this.model.pageSize;\n\t            return full || !even ? index : index + ~~(this.model.pageSize / 2);\n\t        };\n\t        VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n\t            var _this = this;\n\t            if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n\t            var indexes = [];\n\t            var sLeft = content.scrollLeft | 0;\n\t            var keys = Object.keys(this.cOffsets);\n\t            var cWidth = content.getBoundingClientRect().width;\n\t            sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n\t            var calWidth = ej2_base_1.Browser.isDevice ? 2 * cWidth : cWidth / 2;\n\t            var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n\t            keys.some(function (offset, indx, input) {\n\t                var iOffset = Number(offset);\n\t                var offsetVal = _this.cOffsets[offset];\n\t                var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n\t                if (border) {\n\t                    indexes.push(iOffset);\n\t                }\n\t                return left + calWidth < offsetVal;\n\t            });\n\t            return indexes;\n\t        };\n\t        VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n\t            var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping']\n\t                .some(function (value) { return action === value; });\n\t            if (clear) {\n\t                this.cache = {};\n\t                this.data = {};\n\t                this.groups = {};\n\t            }\n\t            return clear;\n\t        };\n\t        VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n\t            var _this = this;\n\t            var col = 0;\n\t            this.cOffsets = {};\n\t            var gLen = this.parent.groupSettings.columns.length;\n\t            var cols = this.parent.columns;\n\t            var cLen = cols.length;\n\t            var isVisible = function (column) { return column.visible &&\n\t                (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n\t            this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n\t            Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n\t                block = block + gLen;\n\t                _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n\t            });\n\t        };\n\t        VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n\t            var _this = this;\n\t            var currentFirst = current[0];\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) {\n\t                if (Number(key) < block) {\n\t                    rows = rows.concat(_this.cache[key]);\n\t                }\n\t            });\n\t            if (currentFirst.isDataRow || block % 2 === 0) {\n\t                return current;\n\t            }\n\t            return this.iterateGroup(current, rows);\n\t        };\n\t        VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n\t            var currentFirst = current[0];\n\t            var offset = 0;\n\t            if (currentFirst.isDataRow) {\n\t                return current;\n\t            }\n\t            var isPresent = current.some(function (row) {\n\t                return rows.some(function (oRow, index) {\n\t                    var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n\t                        oRow.data.key === row.data.key;\n\t                    if (res) {\n\t                        offset = index;\n\t                    }\n\t                    return res;\n\t                });\n\t            });\n\t            if (isPresent) {\n\t                current.shift();\n\t                current = this.iterateGroup(current, rows.slice(offset));\n\t            }\n\t            return current;\n\t        };\n\t        VirtualRowModelGenerator.prototype.getRows = function () {\n\t            var _this = this;\n\t            var rows = [];\n\t            Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n\t            return rows;\n\t        };\n\t        return VirtualRowModelGenerator;\n\t    }());\n\t    exports.VirtualRowModelGenerator = VirtualRowModelGenerator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(11), __webpack_require__(73), __webpack_require__(77), __webpack_require__(78), __webpack_require__(71), __webpack_require__(79), __webpack_require__(80), __webpack_require__(82), __webpack_require__(83), __webpack_require__(6), __webpack_require__(7), __webpack_require__(6), __webpack_require__(72)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, events, edit_renderer_1, boolean_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1, default_edit_cell_1, inline_edit_1, batch_edit_1, dialog_edit_1, ej2_popups_1, util_1, ej2_popups_2, ej2_inputs_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Edit = (function () {\n\t        function Edit(parent, serviceLocator) {\n\t            this.editCellType = {\n\t                'dropdownedit': dropdown_edit_cell_1.DropDownEditCell,\n\t                'numericedit': numeric_edit_cell_1.NumericEditCell, 'booleanedit': boolean_edit_cell_1.BooleanEditCell, 'default': default_edit_cell_1.DefaultEditCell\n\t            };\n\t            this.editType = { 'inline': inline_edit_1.InlineEdit, 'normal': inline_edit_1.InlineEdit, 'batch': batch_edit_1.BatchEdit, 'dialog': dialog_edit_1.DialogEdit };\n\t            this.tapped = false;\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t            this.updateEditObj();\n\t        }\n\t        Edit.prototype.updateColTypeObj = function () {\n\t            for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                col.edit = ej2_base_2.extend(new this.editCellType[col.editType && this.editCellType[col.editType] ?\n\t                    col.editType : 'default'](this.parent, this.serviceLocator), col.edit || {});\n\t            }\n\t        };\n\t        Edit.prototype.getModuleName = function () {\n\t            return 'edit';\n\t        };\n\t        Edit.prototype.onPropertyChanged = function (e) {\n\t            if (e.module !== this.getModuleName()) {\n\t                return;\n\t            }\n\t            var gObj = this.parent;\n\t            var newProp = e.properties;\n\t            for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'allowAdding':\n\t                    case 'allowDeleting':\n\t                    case 'allowEditing':\n\t                        if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n\t                            this.initialEnd();\n\t                        }\n\t                        break;\n\t                    case 'mode':\n\t                        this.updateEditObj();\n\t                        gObj.isEdit = false;\n\t                        gObj.refresh();\n\t                        break;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.updateEditObj = function () {\n\t            if (this.editModule) {\n\t                this.editModule.destroy();\n\t            }\n\t            this.renderer = new edit_renderer_1.EditRender(this.parent, this.serviceLocator);\n\t            this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n\t        };\n\t        Edit.prototype.initialEnd = function () {\n\t            this.updateColTypeObj();\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t            this.createAlertDlg();\n\t            this.createConfirmDlg();\n\t        };\n\t        Edit.prototype.wireEvents = function () {\n\t            ej2_base_1.EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n\t        };\n\t        Edit.prototype.unwireEvents = function () {\n\t            ej2_base_1.EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n\t        };\n\t        Edit.prototype.tapEvent = function (e) {\n\t            if (this.getUserAgent()) {\n\t                if (!this.tapped) {\n\t                    this.tapped = setTimeout(this.timeoutHandler(), 300);\n\t                }\n\t                else {\n\t                    clearTimeout(this.tapped);\n\t                    this.parent.notify(events.doubleTap, e);\n\t                    this.tapped = null;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.getUserAgent = function () {\n\t            var userAgent = window.navigator.userAgent.toLowerCase();\n\t            return /iphone|ipod|ipad/.test(userAgent);\n\t        };\n\t        Edit.prototype.timeoutHandler = function () {\n\t            this.tapped = null;\n\t        };\n\t        Edit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'batch') {\n\t                return;\n\t            }\n\t            if (!gObj.getSelectedRows().length) {\n\t                if (!tr) {\n\t                    this.showDialog('EditOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t            }\n\t            else if (!tr) {\n\t                tr = gObj.getSelectedRows()[0];\n\t            }\n\t            if (tr.style.display === 'none') {\n\t                return;\n\t            }\n\t            this.editModule.startEdit(tr);\n\t            this.refreshToolbar();\n\t            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\t        };\n\t        Edit.prototype.closeEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog\n\t                && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n\t                this.showDialog('CancelEdit', this.dialogObj);\n\t                return;\n\t            }\n\t            this.editModule.closeEdit();\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.refreshToolbar = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        Edit.prototype.addRecord = function (data) {\n\t            if (!this.parent.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            this.editModule.addRecord(data);\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.deleteRecord = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowDeleting) {\n\t                return;\n\t            }\n\t            if (!data) {\n\t                if (ej2_base_4.isNullOrUndefined(gObj.selectedRowIndex) || gObj.selectedRowIndex === -1) {\n\t                    this.showDialog('DeleteOperationAlert', this.alertDObj);\n\t                    return;\n\t                }\n\t                if (gObj.editSettings.showDeleteConfirmDialog) {\n\t                    this.showDialog('ConfirmDelete', this.dialogObj);\n\t                    return;\n\t                }\n\t            }\n\t            this.editModule.deleteRecord(fieldname, data);\n\t        };\n\t        Edit.prototype.deleteRow = function (tr) {\n\t            this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n\t        };\n\t        Edit.prototype.endEdit = function () {\n\t            if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog) {\n\t                this.showDialog('BatchSaveConfirm', this.dialogObj);\n\t                return;\n\t            }\n\t            this.endEditing();\n\t        };\n\t        Edit.prototype.updateCell = function (rowIndex, field, value) {\n\t            this.editModule.updateCell(rowIndex, field, value);\n\t        };\n\t        Edit.prototype.updateRow = function (index, data) {\n\t            this.editModule.updateRow(index, data);\n\t        };\n\t        Edit.prototype.batchCancel = function () {\n\t            this.closeEdit();\n\t        };\n\t        Edit.prototype.batchSave = function () {\n\t            this.endEdit();\n\t        };\n\t        Edit.prototype.editCell = function (index, field) {\n\t            this.editModule.editCell(index, field);\n\t        };\n\t        Edit.prototype.editFormValidate = function () {\n\t            if (this.formObj) {\n\t                return this.formObj.validate();\n\t            }\n\t            return false;\n\t        };\n\t        Edit.prototype.getBatchChanges = function () {\n\t            return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n\t        };\n\t        Edit.prototype.getCurrentEditCellData = function () {\n\t            var obj = this.getCurrentEditedData(this.formObj.element, {});\n\t            return obj[Object.keys(obj)[0]];\n\t        };\n\t        Edit.prototype.saveCell = function () {\n\t            this.editModule.saveCell();\n\t        };\n\t        Edit.prototype.endEditing = function () {\n\t            this.editModule.endEdit();\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.showDialog = function (content, obj) {\n\t            obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n\t            obj.show();\n\t        };\n\t        Edit.prototype.getValueFromType = function (col, value) {\n\t            var val = value;\n\t            switch (col.type) {\n\t                case 'number':\n\t                    val = !ej2_base_4.isNullOrUndefined(parseFloat(value)) ? parseFloat(value) : null;\n\t                    break;\n\t                case 'boolean':\n\t                    if (col.editType !== 'booleanedit') {\n\t                        val = value === this.l10n.getConstant('True') ? true : false;\n\t                    }\n\t                    break;\n\t                case 'date':\n\t                    if (col.editType !== 'datepicker') {\n\t                        val = new Date(value);\n\t                    }\n\t                    break;\n\t            }\n\t            return val;\n\t        };\n\t        Edit.prototype.destroyToolTip = function () {\n\t            var elements = [].slice.call(this.parent.element.querySelectorAll('td.e-tooltip'));\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var elem = elements_1[_i];\n\t                elem.ej2_instances[0].destroy();\n\t            }\n\t        };\n\t        Edit.prototype.createConfirmDlg = function () {\n\t            this.dialogObj = this.dlgWidget([\n\t                {\n\t                    click: this.dlgOk.bind(this),\n\t                    buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n\t                },\n\t                {\n\t                    click: this.dlgCancel.bind(this),\n\t                    buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n\t                }\n\t            ], 'EditConfirm');\n\t        };\n\t        Edit.prototype.createAlertDlg = function () {\n\t            this.alertDObj = this.dlgWidget([\n\t                {\n\t                    click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n\t                }\n\t            ], 'EditAlert');\n\t        };\n\t        Edit.prototype.alertClick = function () {\n\t            this.alertDObj.hide();\n\t        };\n\t        Edit.prototype.dlgWidget = function (btnOptions, name) {\n\t            var div = ej2_base_3.createElement('div', { id: this.parent.element.id + name });\n\t            this.parent.element.appendChild(div);\n\t            var options = {\n\t                showCloseIcon: false,\n\t                isModal: true,\n\t                visible: false,\n\t                closeOnEscape: true,\n\t                target: this.parent.element,\n\t                width: '320px',\n\t                animationSettings: { effect: 'None' }\n\t            };\n\t            options.buttons = btnOptions;\n\t            var obj = new ej2_popups_1.Dialog(options);\n\t            obj.appendTo(div);\n\t            util_1.changeButtonType(obj.element);\n\t            return obj;\n\t        };\n\t        Edit.prototype.dlgCancel = function () {\n\t            this.dialogObj.hide();\n\t        };\n\t        Edit.prototype.dlgOk = function (e) {\n\t            switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n\t                case this.l10n.getConstant('ConfirmDelete'):\n\t                    this.editModule.deleteRecord();\n\t                    break;\n\t                case this.l10n.getConstant('CancelEdit'):\n\t                    this.editModule.closeEdit();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveConfirm'):\n\t                    this.endEditing();\n\t                    break;\n\t                case this.l10n.getConstant('BatchSaveLostChanges'):\n\t                    this.executeAction();\n\t                    break;\n\t            }\n\t            this.dlgCancel();\n\t        };\n\t        Edit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n\t            this.parent.on(events.initialEnd, this.initialEnd, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.on(events.autoCol, this.updateColTypeObj, this);\n\t            this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n\t            this.parent.on(events.preventBatch, this.preventBatch, this);\n\t            this.parent.on(events.destroyForm, this.destroyForm, this);\n\t            this.parent.addEventListener(events.actionBegin, this.onActionBegin.bind(this));\n\t            this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n\t            this.parent.on(events.initialEnd, this.wireEvents, this);\n\t        };\n\t        Edit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n\t            this.parent.off(events.initialEnd, this.initialEnd);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.off(events.autoCol, this.updateColTypeObj);\n\t            this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n\t            this.parent.off(events.preventBatch, this.preventBatch);\n\t            this.parent.off(events.destroyForm, this.destroyForm);\n\t            this.parent.removeEventListener(events.actionComplete, this.actionComplete);\n\t            this.parent.removeEventListener(events.actionBegin, this.onActionBegin);\n\t            this.parent.off(events.initialEnd, this.unwireEvents);\n\t        };\n\t        Edit.prototype.actionComplete = function (e) {\n\t            if (e.requestType !== 'add' && e.requestType !== 'beginEdit' && e.requestType !== 'delete') {\n\t                this.parent.isEdit = false;\n\t            }\n\t            this.refreshToolbar();\n\t        };\n\t        Edit.prototype.getCurrentEditedData = function (form, editedData) {\n\t            var gObj = this.parent;\n\t            var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n\t            for (var i = 0, len = inputs.length; i < len; i++) {\n\t                var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n\t                var value = void 0;\n\t                if (col) {\n\t                    var temp = col.edit.read;\n\t                    if (typeof temp === 'string') {\n\t                        temp = ej2_base_2.getValue(temp, window);\n\t                    }\n\t                    value = gObj.editModule.getValueFromType(col, col.edit.read(inputs[i]));\n\t                    ej2_base_4.setValue(col.field, value, editedData);\n\t                }\n\t            }\n\t            return editedData;\n\t        };\n\t        Edit.prototype.onActionBegin = function (e) {\n\t            if (this.parent.editSettings.mode !== 'batch' && this.formObj && !this.formObj.isDestroyed && !e.cancel) {\n\t                this.destroyForm();\n\t                this.destroyWidgets();\n\t            }\n\t        };\n\t        Edit.prototype.destroyWidgets = function (cols) {\n\t            cols = cols ? cols : this.parent.columns;\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (col.edit.destroy) {\n\t                    col.edit.destroy();\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.destroyForm = function () {\n\t            this.destroyToolTip();\n\t            if (this.formObj && !this.formObj.isDestroyed) {\n\t                this.formObj.destroy();\n\t            }\n\t            this.destroyToolTip();\n\t        };\n\t        Edit.prototype.destroy = function () {\n\t            this.destroyForm();\n\t            this.removeEventListener();\n\t            this.dialogObj.destroy();\n\t            this.alertDObj.destroy();\n\t            this.unwireEvents();\n\t        };\n\t        Edit.prototype.keyPressHandler = function (e) {\n\t            switch (e.action) {\n\t                case 'insert':\n\t                    this.addRecord();\n\t                    break;\n\t                case 'delete':\n\t                    this.deleteRecord();\n\t                    break;\n\t                case 'f2':\n\t                    this.startEdit();\n\t                    break;\n\t                case 'enter':\n\t                    if (this.parent.editSettings.mode !== 'batch' &&\n\t                        util_1.parentsUntil(e.target, 'e-gridcontent') && !document.querySelectorAll('.e-popup-open').length) {\n\t                        e.preventDefault();\n\t                        this.endEdit();\n\t                    }\n\t                    break;\n\t                case 'escape':\n\t                    this.closeEdit();\n\t                    break;\n\t            }\n\t        };\n\t        Edit.prototype.preventBatch = function (args) {\n\t            this.preventObj = args;\n\t            this.showDialog('BatchSaveLostChanges', this.dialogObj);\n\t        };\n\t        Edit.prototype.executeAction = function () {\n\t            this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7);\n\t        };\n\t        Edit.prototype.applyFormValidation = function (cols) {\n\t            var _this = this;\n\t            var gObj = this.parent;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var rules = {};\n\t            cols = cols ? cols : gObj.columns;\n\t            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n\t                var col = cols_2[_i];\n\t                if (col.validationRules && form.querySelectorAll('#' + gObj.element.id + col.field).length) {\n\t                    rules[col.field] = col.validationRules;\n\t                }\n\t            }\n\t            this.parent.editModule.formObj = new ej2_inputs_1.FormValidator(form, {\n\t                rules: rules,\n\t                validationComplete: function (args) {\n\t                    _this.validationComplete(args);\n\t                },\n\t                customPlacement: function (inputElement, error) {\n\t                    _this.valErrorPlacement(inputElement, error);\n\t                }\n\t            });\n\t        };\n\t        Edit.prototype.valErrorPlacement = function (inputElement, error) {\n\t            if (this.parent.isEdit) {\n\t                var td = util_1.parentsUntil(inputElement, 'e-rowcell');\n\t                if (!td.ej2_instances || !td.ej2_instances.length) {\n\t                    var tooltip = new ej2_popups_2.Tooltip({\n\t                        opensOn: 'custom', content: error, position: 'bottom center', cssClass: 'e-griderror',\n\t                        animation: { open: { effect: 'None' }, close: { effect: 'None' } }\n\t                    });\n\t                    tooltip.appendTo(td);\n\t                    tooltip.open(td);\n\t                }\n\t                else {\n\t                    td.ej2_instances[0].content = error;\n\t                }\n\t            }\n\t        };\n\t        Edit.prototype.validationComplete = function (args) {\n\t            if (this.parent.isEdit) {\n\t                var elem = util_1.parentsUntil(document.getElementById(this.parent.element.id + args.inputName), 'e-rowcell');\n\t                if (elem && elem.ej2_instances && elem.ej2_instances.length) {\n\t                    var tObj = elem.ej2_instances[0];\n\t                    if (args.status === 'failure') {\n\t                        tObj.open(util_1.parentsUntil(args.element, 'e-rowcell'));\n\t                    }\n\t                    else {\n\t                        tObj.close();\n\t                    }\n\t                    tObj.refresh();\n\t                }\n\t            }\n\t        };\n\t        return Edit;\n\t    }());\n\t    exports.Edit = Edit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(72), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NumericEditCell = (function () {\n\t        function NumericEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        NumericEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, 'e-mappinguid': args.column.uid\n\t                }\n\t            });\n\t        };\n\t        NumericEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        NumericEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_inputs_1.NumericTextBox(ej2_base_1.extend({\n\t                value: parseFloat(args.rowData[col.field]), enableRtl: this.parent.enableRtl,\n\t                placeholder: isInline ? '' : args.column.headerText,\n\t                enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t            }, col.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', col.field);\n\t        };\n\t        NumericEditCell.prototype.destroy = function () {\n\t            if (this.obj && !this.obj.isDestroyed) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return NumericEditCell;\n\t    }());\n\t    exports.NumericEditCell = NumericEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_72__;\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(74), __webpack_require__(75), __webpack_require__(76), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, inline_edit_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, ej2_base_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var EditRender = (function () {\n\t        function EditRender(parent, serviceLocator) {\n\t            this.editType = {\n\t                'inline': inline_edit_renderer_1.InlineEditRender,\n\t                'normal': inline_edit_renderer_1.InlineEditRender, 'batch': batch_edit_renderer_1.BatchEditRender, 'dialog': dialog_edit_renderer_1.DialogEditRender\n\t            };\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n\t        }\n\t        EditRender.prototype.addNew = function (args) {\n\t            this.renderer.addNew(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.update = function (args) {\n\t            this.renderer.update(this.getEditElements(args), args);\n\t            this.convertWidget(args);\n\t        };\n\t        EditRender.prototype.convertWidget = function (args) {\n\t            var gObj = this.parent;\n\t            var isFocused;\n\t            var cell;\n\t            var value;\n\t            var form = gObj.element.querySelector('.e-gridform');\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.columns : [gObj.getColumnByField(args.columnName)];\n\t            for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n\t                var col = cols_1[_i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                value = col.valueAccessor(col.field, args.rowData, col);\n\t                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n\t                var temp = col.edit.write;\n\t                if (typeof temp === 'string') {\n\t                    temp = ej2_base_1.getValue(temp, window);\n\t                }\n\t                col.edit.write({ rowData: args.rowData, element: cell, column: col, requestType: args.requestType });\n\t                if (!isFocused && !cell.getAttribute('disabled')) {\n\t                    this.focusElement(cell);\n\t                    isFocused = true;\n\t                }\n\t            }\n\t        };\n\t        EditRender.prototype.focusElement = function (elem) {\n\t            elem.focus();\n\t            if (elem.classList.contains('e-defaultcell')) {\n\t                elem.setSelectionRange(elem.value.length, elem.value.length);\n\t            }\n\t        };\n\t        EditRender.prototype.getEditElements = function (args) {\n\t            var gObj = this.parent;\n\t            var elements = {};\n\t            var cols = gObj.editSettings.mode !== 'batch' ? gObj.columns : [gObj.getColumnByField(args.columnName)];\n\t            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n\t                var col = cols_2[_i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                var value = col.valueAccessor(col.field, args.rowData, col);\n\t                var tArgs = { column: col, value: value, type: args.requestType };\n\t                var temp = col.edit.create;\n\t                var input = void 0;\n\t                input = col.edit.create(tArgs);\n\t                if (typeof input === 'string') {\n\t                    var div = ej2_base_2.createElement('div');\n\t                    div.innerHTML = input;\n\t                    input = div.firstChild;\n\t                }\n\t                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n\t                ej2_base_2.attributes(isInput ? input.querySelector('input') : input, {\n\t                    name: col.field, 'e-mappinguid': col.uid,\n\t                    id: gObj.element.id + col.field,\n\t                });\n\t                ej2_base_2.classList(input, ['e-input', 'e-field'], []);\n\t                if (col.textAlign === 'right') {\n\t                    input.classList.add('e-ralign');\n\t                }\n\t                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit') {\n\t                    input.setAttribute('disabled', 'true');\n\t                }\n\t                elements[col.uid] = input;\n\t            }\n\t            return elements;\n\t        };\n\t        return EditRender;\n\t    }());\n\t    exports.EditRender = EditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEditRender = (function () {\n\t        function InlineEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        InlineEditRender.prototype.addNew = function (elements, args) {\n\t            var tbody = this.parent.getContentTable().querySelector('tbody');\n\t            args.row = ej2_base_1.createElement('tr', { className: 'e-row e-addedrow' });\n\t            tbody.insertBefore(args.row, tbody.firstChild);\n\t            args.row.appendChild(this.getEditElement(elements, false));\n\t        };\n\t        InlineEditRender.prototype.update = function (elements, args) {\n\t            args.row.innerHTML = '';\n\t            args.row.appendChild(this.getEditElement(elements, true));\n\t            args.row.classList.add('e-editedrow');\n\t        };\n\t        InlineEditRender.prototype.getEditElement = function (elements, isEdit) {\n\t            var gObj = this.parent;\n\t            var gLen = 0;\n\t            var isDetail = !ej2_base_1.isNullOrUndefined(gObj.detailTemplate) || !ej2_base_1.isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n\t            if (gObj.allowGrouping) {\n\t                gLen = gObj.groupSettings.columns.length;\n\t            }\n\t            var td = ej2_base_1.createElement('td', {\n\t                className: 'e-editcell e-normaledit',\n\t                attrs: { colspan: (gObj.getVisibleColumns().length + gLen + isDetail).toString() }\n\t            });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n\t            table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var tr = ej2_base_1.createElement('tr');\n\t            var i = 0;\n\t            if (isDetail) {\n\t                tr.insertBefore(ej2_base_1.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n\t            }\n\t            while (i < gLen) {\n\t                tr.appendChild(ej2_base_1.createElement('td', { className: 'e-indentcell' }));\n\t                i++;\n\t            }\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                if (!col.visible) {\n\t                    continue;\n\t                }\n\t                var td_1 = ej2_base_1.createElement('td', {\n\t                    className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : '') }\n\t                });\n\t                td_1.appendChild(elements[col.uid]);\n\t                if (col.editType === 'booleanedit') {\n\t                    td_1.classList.add('e-boolcell');\n\t                }\n\t                tr.appendChild(td_1);\n\t            }\n\t            tbody.appendChild(tr);\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            td.appendChild(form);\n\t            return td;\n\t        };\n\t        return InlineEditRender;\n\t    }());\n\t    exports.InlineEditRender = InlineEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEditRender = (function () {\n\t        function BatchEditRender(parent) {\n\t            this.parent = parent;\n\t        }\n\t        BatchEditRender.prototype.update = function (elements, args) {\n\t            args.cell.innerHTML = '';\n\t            args.cell.appendChild(this.getEditElement(elements, args));\n\t            args.cell.classList.add('e-editedbatchcell');\n\t            ej2_base_1.classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n\t        };\n\t        BatchEditRender.prototype.getEditElement = function (elements, args) {\n\t            var gObj = this.parent;\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            form.appendChild(elements[args.columnObject.uid]);\n\t            if (args.columnObject.editType === 'booleanedit') {\n\t                args.cell.classList.add('e-boolcell');\n\t            }\n\t            if (!args.columnObject.editType) {\n\t                args.cell.classList.add('e-inputbox');\n\t            }\n\t            return form;\n\t        };\n\t        return BatchEditRender;\n\t    }());\n\t    exports.BatchEditRender = BatchEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(6), __webpack_require__(5), __webpack_require__(11), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_popups_1, ej2_base_1, events, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEditRender = (function () {\n\t        function DialogEditRender(parent, serviceLocator) {\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.parent.on(events.dialogDestroy, this.destroy, this);\n\t            this.parent.on(events.destroy, this.destroy, this);\n\t        }\n\t        DialogEditRender.prototype.setLocaleObj = function () {\n\t            this.l10n = this.serviceLocator.getService('localization');\n\t        };\n\t        DialogEditRender.prototype.addNew = function (elements, args) {\n\t            this.isEdit = false;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.update = function (elements, args) {\n\t            this.isEdit = true;\n\t            this.createDialog(elements, args);\n\t        };\n\t        DialogEditRender.prototype.createDialog = function (elements, args) {\n\t            var gObj = this.parent;\n\t            this.dialog = ej2_base_1.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper' });\n\t            gObj.element.appendChild(this.dialog);\n\t            this.setLocaleObj();\n\t            this.dialogObj = new ej2_popups_1.Dialog({\n\t                header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n\t                    this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true,\n\t                content: this.getEditElement(elements), showCloseIcon: true, allowDragging: true, close: this.destroy.bind(this),\n\t                closeOnEscape: true, width: '330px', target: gObj.element, animationSettings: { effect: 'None' },\n\t                buttons: [{\n\t                        click: this.btnClick.bind(this),\n\t                        buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n\t                    },\n\t                    { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n\t            });\n\t            this.dialogObj.appendTo(this.dialog);\n\t            util_1.changeButtonType(this.dialogObj.element);\n\t        };\n\t        DialogEditRender.prototype.btnClick = function (e) {\n\t            if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.toLowerCase()) {\n\t                this.parent.closeEdit();\n\t                this.destroy();\n\t            }\n\t            else {\n\t                this.parent.endEdit();\n\t            }\n\t        };\n\t        DialogEditRender.prototype.destroy = function (args) {\n\t            this.parent.notify(events.destroyForm, {});\n\t            this.parent.isEdit = false;\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t            if (this.dialog && !this.dialogObj.isDestroyed) {\n\t                this.dialogObj.destroy();\n\t                ej2_base_1.remove(this.dialog);\n\t            }\n\t        };\n\t        DialogEditRender.prototype.getEditElement = function (elements) {\n\t            var gObj = this.parent;\n\t            var div = ej2_base_1.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n\t            var form = ej2_base_1.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n\t            var table = ej2_base_1.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n\t            var tbody = ej2_base_1.createElement('tbody');\n\t            var cols = gObj.columns;\n\t            for (var i = 0; i < cols.length; i++) {\n\t                if (!cols[i].visible) {\n\t                    continue;\n\t                }\n\t                var tr = ej2_base_1.createElement('tr');\n\t                var dataCell = ej2_base_1.createElement('td', { className: 'e-rowcell', attrs: { style: 'text-align:left;width:190px' } });\n\t                var label = ej2_base_1.createElement('label', { innerHTML: cols[i].field });\n\t                elements[cols[i].uid].classList.remove('e-input');\n\t                if (cols[i].editType === 'booleanedit') {\n\t                    var elem = dataCell.appendChild(elements[cols[i].uid]);\n\t                    var lbl = ej2_base_1.createElement('label', { className: 'e-noselect', attrs: { for: elem.id, style: ej2_base_1.Browser.isDevice ? '' : 'vertical-align: top;' } });\n\t                    lbl.innerHTML = cols[i].headerText;\n\t                    dataCell.appendChild(elem);\n\t                    dataCell.appendChild(lbl);\n\t                }\n\t                else {\n\t                    dataCell.appendChild(elements[cols[i].uid]);\n\t                }\n\t                tr.appendChild(dataCell);\n\t                tbody.appendChild(tr);\n\t            }\n\t            table.appendChild(tbody);\n\t            form.appendChild(table);\n\t            div.appendChild(form);\n\t            return div;\n\t        };\n\t        return DialogEditRender;\n\t    }());\n\t    exports.DialogEditRender = DialogEditRender;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BooleanEditCell = (function () {\n\t        function BooleanEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        BooleanEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var input = ej2_base_1.createElement('input', {\n\t                className: 'e-field e-boolcell', attrs: {\n\t                    type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field\n\t                }\n\t            });\n\t            if (!util_1.isEditable(args.column, args.requestType, args.element)) {\n\t                input.setAttribute('disabled', 'true');\n\t            }\n\t            if (args.value) {\n\t                input.checked = true;\n\t            }\n\t            return input;\n\t        };\n\t        BooleanEditCell.prototype.read = function (element) {\n\t            return element.checked;\n\t        };\n\t        BooleanEditCell.prototype.write = function (args) {\n\t            args.element.style.width = 'auto';\n\t        };\n\t        BooleanEditCell.prototype.destroy = function () {\n\t        };\n\t        return BooleanEditCell;\n\t    }());\n\t    exports.BooleanEditCell = BooleanEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(53), __webpack_require__(8), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_dropdowns_1, ej2_data_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DropDownEditCell = (function () {\n\t        function DropDownEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DropDownEditCell.prototype.create = function (args) {\n\t            return ej2_base_2.createElement('input', {\n\t                className: 'e-field', attrs: {\n\t                    id: this.parent.element.id + args.column.field, name: args.column.field, type: 'text', 'e-mappinguid': args.column.uid,\n\t                }\n\t            });\n\t        };\n\t        DropDownEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            this.obj = new ej2_dropdowns_1.DropDownList(ej2_base_1.extend({\n\t                dataSource: this.parent.dataSource instanceof ej2_data_1.DataManager ?\n\t                    this.parent.dataSource : new ej2_data_1.DataManager(this.parent.dataSource),\n\t                query: new ej2_data_1.Query().select(args.column.field), enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                fields: { value: args.column.field }, value: args.rowData[args.column.field],\n\t                enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete,\n\t                placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n\t                floatLabelType: isInline ? 'Never' : 'Always',\n\t            }, args.column.edit.params));\n\t            this.obj.appendTo(args.element);\n\t            args.element.setAttribute('name', args.column.field);\n\t        };\n\t        DropDownEditCell.prototype.read = function (element) {\n\t            return element.ej2_instances[0].value;\n\t        };\n\t        DropDownEditCell.prototype.ddActionComplete = function (e) {\n\t            e.result = e.result.filter(function (val, i, values) { return values.indexOf(val) === i; });\n\t            e.result.sort();\n\t        };\n\t        DropDownEditCell.prototype.destroy = function () {\n\t            if (this.obj) {\n\t                this.obj.destroy();\n\t            }\n\t        };\n\t        return DropDownEditCell;\n\t    }());\n\t    exports.DropDownEditCell = DropDownEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(72), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_inputs_1, util_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DefaultEditCell = (function () {\n\t        function DefaultEditCell(parent) {\n\t            this.parent = parent;\n\t        }\n\t        DefaultEditCell.prototype.create = function (args) {\n\t            var col = args.column;\n\t            var input = ej2_base_1.createElement('input', {\n\t                className: 'e-field e-input e-defaultcell', attrs: {\n\t                    type: 'text', value: !ej2_base_1.isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n\t                    id: this.parent.element.id + col.field, name: col.field, style: 'text-align:' + col.textAlign,\n\t                }\n\t            });\n\t            return input;\n\t        };\n\t        DefaultEditCell.prototype.read = function (element) {\n\t            return element.value;\n\t        };\n\t        DefaultEditCell.prototype.write = function (args) {\n\t            var col = args.column;\n\t            var isInline = this.parent.editSettings.mode !== 'dialog';\n\t            ej2_inputs_1.Input.createInput({\n\t                element: args.element, floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n\t                properties: {\n\t                    enableRtl: this.parent.enableRtl, enabled: util_1.isEditable(args.column, args.requestType, args.element),\n\t                    placeholder: isInline ? '' : args.column.headerText\n\t                }\n\t            });\n\t        };\n\t        return DefaultEditCell;\n\t    }());\n\t    exports.DefaultEditCell = DefaultEditCell;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(81)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var InlineEdit = (function (_super) {\n\t        __extends(InlineEdit, _super);\n\t        function InlineEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        InlineEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        InlineEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        InlineEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return InlineEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.InlineEdit = InlineEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, util_1, events, row_renderer_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var NormalEdit = (function () {\n\t        function NormalEdit(parent, serviceLocator, renderer) {\n\t            this.parent = parent;\n\t            this.renderer = renderer;\n\t            this.serviceLocator = serviceLocator;\n\t            this.addEventListener();\n\t        }\n\t        NormalEdit.prototype.clickHandler = function (e) {\n\t            var target = e.target;\n\t            var gObj = this.parent;\n\t            if (util_1.parentsUntil(target, 'e-gridcontent')) {\n\t                this.rowIndex = util_1.parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n\t                if (gObj.isEdit) {\n\t                    gObj.editModule.endEdit();\n\t                }\n\t            }\n\t        };\n\t        NormalEdit.prototype.dblClickHandler = function (e) {\n\t            if (util_1.parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n\t                this.parent.editModule.startEdit(util_1.parentsUntil(e.target, 'e-row'));\n\t            }\n\t        };\n\t        NormalEdit.prototype.editComplete = function (e) {\n\t            switch (e.requestType) {\n\t                case 'save':\n\t                    this.parent.selectRow(0);\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'save',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t                case 'delete':\n\t                    this.parent.selectRow(this.editRowIndex);\n\t                    this.parent.trigger(events.actionComplete, ej2_base_1.extend(e, {\n\t                        requestType: 'delete',\n\t                        type: events.actionComplete\n\t                    }));\n\t                    break;\n\t            }\n\t            this.parent.element.focus();\n\t        };\n\t        NormalEdit.prototype.startEdit = function (tr) {\n\t            var gObj = this.parent;\n\t            var primaryKeys = gObj.getPrimaryKeyFieldNames();\n\t            var primaryKeyValues = [];\n\t            this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n\t            this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n\t            for (var i = 0; i < primaryKeys.length; i++) {\n\t                primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n\t            }\n\t            var args = {\n\t                row: tr, primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n\t                rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false\n\t            };\n\t            gObj.trigger(events.beginEdit, args);\n\t            args.type = 'actionBegin';\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            gObj.isEdit = true;\n\t            this.renderer.update(args);\n\t            this.uid = tr.getAttribute('data-uid');\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = 'actionComplete';\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.endEdit = function () {\n\t            var gObj = this.parent;\n\t            if (!this.parent.isEdit || !gObj.editModule.formObj.validate()) {\n\t                return;\n\t            }\n\t            var editedData = ej2_base_1.extend({}, this.previousData);\n\t            var args = {\n\t                requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n\t                previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n\t            };\n\t            editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-gridform'), editedData);\n\t            if (gObj.element.querySelectorAll('.e-editedrow').length) {\n\t                args.action = 'edit';\n\t                gObj.trigger(events.actionBegin, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                gObj.showSpinner();\n\t                gObj.notify(events.updateData, args);\n\t            }\n\t            else {\n\t                args.action = 'add';\n\t                args.selectedRow = 0;\n\t                gObj.notify(events.modelChanged, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t            }\n\t            this.parent.notify(events.dialogDestroy, {});\n\t            this.stopEditStatus();\n\t        };\n\t        NormalEdit.prototype.editHandler = function (args) {\n\t            var _this = this;\n\t            if (args.promise) {\n\t                args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n\t            }\n\t            else {\n\t                this.editSuccess({}, args);\n\t            }\n\t        };\n\t        NormalEdit.prototype.edSucc = function (e, args) {\n\t            this.editSuccess(e, args);\n\t        };\n\t        NormalEdit.prototype.edFail = function (e) {\n\t            this.editFailure(e);\n\t        };\n\t        NormalEdit.prototype.editSuccess = function (e, args) {\n\t            if (e.result) {\n\t                this.parent.trigger(events.beforeDataBound, e);\n\t                args.data = e.result;\n\t            }\n\t            else {\n\t                this.parent.trigger(events.beforeDataBound, args);\n\t            }\n\t            args.type = events.actionComplete;\n\t            this.refreshRow(args.data);\n\t            this.parent.trigger(events.actionComplete, args);\n\t            this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n\t            this.parent.element.focus();\n\t            this.parent.hideSpinner();\n\t        };\n\t        NormalEdit.prototype.editFailure = function (e) {\n\t            this.parent.trigger(events.actionFailure, e);\n\t            this.parent.hideSpinner();\n\t        };\n\t        NormalEdit.prototype.refreshRow = function (data) {\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var rowObj = this.parent.getRowObjectFromUID(this.uid);\n\t            if (rowObj) {\n\t                rowObj.changes = data;\n\t                row.refresh(rowObj, this.parent.columns, true);\n\t            }\n\t        };\n\t        NormalEdit.prototype.closeEdit = function () {\n\t            var gObj = this.parent;\n\t            var args = {\n\t                requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            this.stopEditStatus();\n\t            args.type = events.actionComplete;\n\t            if (gObj.editSettings.mode !== 'dialog') {\n\t                this.refreshRow(args.data);\n\t            }\n\t            gObj.selectRow(this.rowIndex);\n\t            gObj.element.focus();\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.addRecord = function (data) {\n\t            var gObj = this.parent;\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            if (data) {\n\t                gObj.notify(events.modelChanged, {\n\t                    requestType: 'add', type: events.actionBegin, data: data\n\t                });\n\t                return;\n\t            }\n\t            this.previousData = {};\n\t            this.uid = '';\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                this.previousData[col.field] = data && data[col.field] ? data[col.field] : col.defaultValue;\n\t            }\n\t            var args = {\n\t                cancel: false, foreignKeyData: {},\n\t                requestType: 'add', data: this.previousData, type: events.actionBegin\n\t            };\n\t            gObj.trigger(events.actionBegin, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            gObj.isEdit = true;\n\t            this.renderer.addNew({ rowData: args.data, requestType: 'add' });\n\t            gObj.editModule.applyFormValidation();\n\t            args.type = events.actionComplete;\n\t            args.row = gObj.element.querySelector('.e-addedrow');\n\t            gObj.trigger(events.actionComplete, args);\n\t        };\n\t        NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.editRowIndex = this.parent.selectedRowIndex;\n\t            this.parent.notify(events.modelChanged, {\n\t                requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n\t                data: data ? [data] : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n\t            });\n\t        };\n\t        NormalEdit.prototype.stopEditStatus = function () {\n\t            var gObj = this.parent;\n\t            gObj.isEdit = false;\n\t            var elem = gObj.element.querySelector('.e-addedrow');\n\t            if (elem) {\n\t                ej2_base_2.remove(elem);\n\t            }\n\t            elem = gObj.element.querySelector('.e-editedrow');\n\t            if (elem) {\n\t                elem.classList.remove('e-editedrow');\n\t            }\n\t        };\n\t        NormalEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.crudAction, this.editHandler, this);\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.deleteComplete, this.editComplete, this);\n\t            this.parent.on(events.saveComplete, this.editComplete, this);\n\t        };\n\t        NormalEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.crudAction, this.editHandler);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.deleteComplete, this.editComplete);\n\t            this.parent.off(events.saveComplete, this.editComplete);\n\t        };\n\t        NormalEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        return NormalEdit;\n\t    }());\n\t    exports.NormalEdit = NormalEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5), __webpack_require__(5), __webpack_require__(5), __webpack_require__(7), __webpack_require__(11), __webpack_require__(14), __webpack_require__(23), __webpack_require__(20)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, util_1, events, row_renderer_1, cell_renderer_1, row_model_generator_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BatchEdit = (function () {\n\t        function BatchEdit(parent, serviceLocator, renderer) {\n\t            this.cellDetails = {};\n\t            this.parent = parent;\n\t            this.serviceLocator = serviceLocator;\n\t            this.renderer = renderer;\n\t            this.addEventListener();\n\t        }\n\t        BatchEdit.prototype.addEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.on(events.click, this.clickHandler, this);\n\t            this.parent.on(events.dblclick, this.dblClickHandler, this);\n\t            this.parent.on(events.keyPressed, this.keyPressHandler, this);\n\t            this.parent.addEventListener(events.dataBound, this.dataBound.bind(this));\n\t            this.parent.on(events.doubleTap, this.dblClickHandler, this);\n\t        };\n\t        BatchEdit.prototype.removeEventListener = function () {\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.parent.off(events.click, this.clickHandler);\n\t            this.parent.off(events.dblclick, this.dblClickHandler);\n\t            this.parent.off(events.keyPressed, this.keyPressHandler);\n\t            this.parent.removeEventListener(events.dataBound, this.dataBound);\n\t            this.parent.off(events.doubleTap, this.dblClickHandler);\n\t        };\n\t        BatchEdit.prototype.dataBound = function () {\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.destroy = function () {\n\t            this.removeEventListener();\n\t        };\n\t        BatchEdit.prototype.clickHandler = function (e) {\n\t            if (!util_1.parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n\t                this.saveCell();\n\t                if (util_1.parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n\t                    this.setCellIdx(e.target);\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.dblClickHandler = function (e) {\n\t            var target = e.target;\n\t            var tr = util_1.parentsUntil(e.target, 'e-row');\n\t            if ((util_1.parentsUntil(target, 'e-rowcell')) && tr) {\n\t                this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.columns[parseInt(util_1.parentsUntil(target, 'e-rowcell').getAttribute('aria-colindex'), 10)].field);\n\t            }\n\t        };\n\t        BatchEdit.prototype.keyPressHandler = function (e) {\n\t            var isEdit = this.parent.isEdit;\n\t            if (!document.querySelectorAll('.e-popup-open').length) {\n\t                this.saveCell();\n\t                isEdit = isEdit && !this.validateFormObj();\n\t                switch (e.action) {\n\t                    case 'tab':\n\t                        if (isEdit) {\n\t                            this.editNextCell();\n\t                        }\n\t                        break;\n\t                    case 'shiftTab':\n\t                        if (isEdit) {\n\t                            this.editPrevCell();\n\t                        }\n\t                        break;\n\t                    case 'enter':\n\t                        e.preventDefault();\n\t                        if (isEdit && this.cellDetails.rowIndex + 1 < this.parent.getDataRows().length) {\n\t                            this.editCell(this.cellDetails.rowIndex + 1, this.cellDetails.column.field);\n\t                        }\n\t                        break;\n\t                    case 'f2':\n\t                        this.editCellFromIndex(this.cellDetails.rowIndex, this.cellDetails.cellIndex);\n\t                        break;\n\t                }\n\t                if (this.parent.isEdit || !(this.cellDetails.cellIndex === 0 && this.cellDetails.rowIndex === 0) ||\n\t                    !(this.cellDetails.rowIndex === this.parent.getDataRows().length &&\n\t                        this.cellDetails.cellIndex === this.parent.columns.length - 1)) {\n\t                    e.preventDefault();\n\t                }\n\t            }\n\t            this.reFocusOnError(e);\n\t        };\n\t        BatchEdit.prototype.reFocusOnError = function (e) {\n\t            if (this.validateFormObj() && (e.action === 'tab' || e.action === 'shiftTab')) {\n\t                e.target.focus();\n\t                e.preventDefault();\n\t            }\n\t        };\n\t        BatchEdit.prototype.isAddRow = function (index) {\n\t            return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n\t        };\n\t        BatchEdit.prototype.editNextCell = function () {\n\t            var oldIdx = this.cellDetails.cellIndex;\n\t            var cellIdx = this.findNextEditableCell(this.cellDetails.cellIndex + 1, this.isAddRow(this.cellDetails.rowIndex));\n\t            if (cellIdx > -1) {\n\t                this.cellDetails.cellIndex = cellIdx;\n\t            }\n\t            else if (this.cellDetails.rowIndex + 1 < this.parent.getDataRows().length) {\n\t                this.cellDetails.rowIndex++;\n\t                this.cellDetails.cellIndex = this.findNextEditableCell(0, this.isAddRow(this.cellDetails.rowIndex));\n\t            }\n\t            if (oldIdx !== this.cellDetails.cellIndex) {\n\t                this.editCellFromIndex(this.cellDetails.rowIndex, this.cellDetails.cellIndex);\n\t            }\n\t        };\n\t        BatchEdit.prototype.editPrevCell = function () {\n\t            var oldIdx = this.cellDetails.cellIndex;\n\t            var cellIdx = this.findPrevEditableCell(this.cellDetails.cellIndex - 1, this.isAddRow(this.cellDetails.rowIndex));\n\t            if (cellIdx > -1) {\n\t                this.cellDetails.cellIndex = cellIdx;\n\t            }\n\t            else if (this.cellDetails.rowIndex - 1 > -1) {\n\t                this.cellDetails.rowIndex--;\n\t                this.cellDetails.cellIndex = this.findPrevEditableCell(this.parent.columns.length - 1, this.isAddRow(this.cellDetails.rowIndex));\n\t            }\n\t            if (oldIdx !== this.cellDetails.cellIndex) {\n\t                this.editCellFromIndex(this.cellDetails.rowIndex, this.cellDetails.cellIndex);\n\t            }\n\t        };\n\t        BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n\t            this.cellDetails.rowIndex = rowIdx;\n\t            this.cellDetails.cellIndex = cellIdx;\n\t            this.editCell(rowIdx, this.parent.columns[cellIdx].field);\n\t        };\n\t        BatchEdit.prototype.closeEdit = function () {\n\t            var gObj = this.parent;\n\t            var rows = gObj.contentModule.getRows();\n\t            var rowRenderer = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var tr;\n\t            if (gObj.isEdit) {\n\t                this.saveCell(true);\n\t            }\n\t            gObj.clearSelection();\n\t            for (var i = 0; i < rows.length; i++) {\n\t                if (rows[i].isDirty) {\n\t                    tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n\t                    if (tr) {\n\t                        if (tr.classList.contains('e-insertedrow')) {\n\t                            ej2_base_2.remove(tr);\n\t                            this.removeRowObjectFromUID(rows[i].uid);\n\t                            i--;\n\t                        }\n\t                        else {\n\t                            delete rows[i].changes;\n\t                            rows[i].isDirty = false;\n\t                            ej2_base_2.classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n\t                            rowRenderer.refresh(rows[i], gObj.columns, false);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            gObj.selectRow(this.cellDetails.rowIndex);\n\t            this.refreshRowIdx();\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t        };\n\t        BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            this.saveCell();\n\t            this.bulkDelete(fieldname, data);\n\t        };\n\t        BatchEdit.prototype.addRecord = function (data) {\n\t            this.bulkAddRow(data);\n\t        };\n\t        BatchEdit.prototype.endEdit = function (data) {\n\t            if (this.parent.isEdit && this.validateFormObj()) {\n\t                return;\n\t            }\n\t            this.batchSave();\n\t        };\n\t        BatchEdit.prototype.validateFormObj = function () {\n\t            return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n\t        };\n\t        BatchEdit.prototype.batchSave = function () {\n\t            var gObj = this.parent;\n\t            this.saveCell();\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var changes = this.getBatchChanges();\n\t            var args = { batchChanges: changes, cancel: false };\n\t            gObj.trigger(events.beforeBatchSave, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.showSpinner();\n\t            gObj.notify(events.bulkSave, { changes: changes });\n\t        };\n\t        BatchEdit.prototype.getBatchChanges = function () {\n\t            var changes = {\n\t                addedRecords: [],\n\t                deletedRecords: [],\n\t                changedRecords: []\n\t            };\n\t            var rows = this.parent.contentModule.getRows();\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                if (row.isDirty) {\n\t                    switch (row.edit) {\n\t                        case 'add':\n\t                            changes.addedRecords.push(row.changes);\n\t                            break;\n\t                        case 'delete':\n\t                            changes.deletedRecords.push(row.data);\n\t                            break;\n\t                        default:\n\t                            changes.changedRecords.push(row.changes);\n\t                    }\n\t                }\n\t            }\n\t            return changes;\n\t        };\n\t        BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n\t            var rows = this.parent.contentModule.getRows();\n\t            var i = 0;\n\t            for (var len = rows.length; i < len; i++) {\n\t                if (rows[i].uid === uid) {\n\t                    break;\n\t                }\n\t            }\n\t            rows.splice(i, 1);\n\t        };\n\t        BatchEdit.prototype.addRowObject = function (row) {\n\t            this.parent.contentModule.getRows().unshift(row);\n\t        };\n\t        BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n\t            var gObj = this.parent;\n\t            var index = data ? this.getIndexFromData(data) : gObj.selectedRowIndex;\n\t            var args = {\n\t                primaryKey: this.parent.getPrimaryKeyFieldNames(),\n\t                rowIndex: index,\n\t                rowData: data ? data : gObj.getSelectedRecords()[0],\n\t                row: data ? gObj.getRows()[index] : gObj.getSelectedRows()[0], cancel: false\n\t            };\n\t            if (!args.row) {\n\t                return;\n\t            }\n\t            gObj.trigger(events.beforeBatchDelete, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var uid = args.row.getAttribute('data-uid');\n\t            if (args.row.classList.contains('e-insertedrow')) {\n\t                this.removeRowObjectFromUID(uid);\n\t                ej2_base_2.remove(args.row);\n\t            }\n\t            else {\n\t                var rowObj = gObj.getRowObjectFromUID(uid);\n\t                rowObj.isDirty = true;\n\t                rowObj.edit = 'delete';\n\t                ej2_base_2.classList(args.row, ['e-hiddenrow', 'e-updatedtd'], []);\n\t            }\n\t            this.refreshRowIdx();\n\t            gObj.selectRow(index);\n\t            delete args.row;\n\t            gObj.trigger(events.batchDelete, args);\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            gObj.element.focus();\n\t        };\n\t        BatchEdit.prototype.refreshRowIdx = function () {\n\t            var rows = [].slice.call(this.parent.getContentTable().querySelector('tbody').children);\n\t            var dataRows = [];\n\t            for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n\t                if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n\t                    rows[i].setAttribute('aria-rowindex', j.toString());\n\t                    j++;\n\t                }\n\t                else {\n\t                    rows[i].removeAttribute('aria-rowindex');\n\t                }\n\t            }\n\t        };\n\t        BatchEdit.prototype.getIndexFromData = function (data) {\n\t            return util_1.inArray(data, this.parent.getCurrentViewRecords());\n\t        };\n\t        BatchEdit.prototype.bulkAddRow = function (data) {\n\t            var gObj = this.parent;\n\t            if (!gObj.editSettings.allowAdding) {\n\t                return;\n\t            }\n\t            if (gObj.isEdit) {\n\t                this.saveCell();\n\t            }\n\t            if (gObj.isEdit) {\n\t                return;\n\t            }\n\t            var defaultData = data ? data : this.getDefaultData();\n\t            var args = {\n\t                defaultData: defaultData,\n\t                primaryKey: gObj.getPrimaryKeyFieldNames(),\n\t                cancel: false\n\t            };\n\t            gObj.trigger(events.beforeBatchAdd, args);\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.clearSelection();\n\t            var row = new row_renderer_1.RowRenderer(this.serviceLocator, null, this.parent);\n\t            var model = new row_model_generator_1.RowModelGenerator(this.parent);\n\t            var modelData = model.generateRows([args.defaultData]);\n\t            var tr = row.render(modelData[0], gObj.getColumns());\n\t            var col;\n\t            var index;\n\t            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n\t                tr.insertBefore(ej2_base_2.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n\t            }\n\t            var tbody = gObj.getContentTable().querySelector('tbody');\n\t            tr.classList.add('e-insertedrow');\n\t            tbody.insertBefore(tr, tbody.firstChild);\n\t            ej2_base_1.addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n\t            modelData[0].isDirty = true;\n\t            modelData[0].changes = ej2_base_1.extend({}, modelData[0].data);\n\t            modelData[0].edit = 'add';\n\t            this.addRowObject(modelData[0]);\n\t            this.refreshRowIdx();\n\t            gObj.selectRow(0);\n\t            if (!data) {\n\t                index = this.findNextEditableCell(0, true);\n\t                col = gObj.columns[index];\n\t                this.editCell(0, col.field, true);\n\t            }\n\t            var args1 = {\n\t                defaultData: args.defaultData, row: tr,\n\t                columnObject: col, columnIndex: index, primaryKey: args.primaryKey, cell: tr.cells[index]\n\t            };\n\t            gObj.trigger(events.batchAdd, args1);\n\t        };\n\t        BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd) {\n\t            var cols = this.parent.columns;\n\t            var endIndex = cols.length;\n\t            for (var i = columnIndex; i < endIndex; i++) {\n\t                if (!isAdd && this.checkNPCell(cols[i])) {\n\t                    return i;\n\t                }\n\t                else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.findPrevEditableCell = function (columnIndex, isAdd) {\n\t            var cols = this.parent.columns;\n\t            for (var i = columnIndex; i > -1; i--) {\n\t                if (!isAdd && this.checkNPCell(cols[i])) {\n\t                    return i;\n\t                }\n\t                else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing) {\n\t                    return i;\n\t                }\n\t            }\n\t            return -1;\n\t        };\n\t        BatchEdit.prototype.checkNPCell = function (col) {\n\t            return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n\t        };\n\t        BatchEdit.prototype.getDefaultData = function () {\n\t            var gObj = this.parent;\n\t            var data = {};\n\t            var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n\t            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n\t                var col = _a[_i];\n\t                data[col.field] = col.defaultValue ? col.defaultValue : dValues[col.type];\n\t            }\n\t            return data;\n\t        };\n\t        BatchEdit.prototype.setCellIdx = function (target) {\n\t            var gLen = 0;\n\t            if (this.parent.allowGrouping) {\n\t                gLen = this.parent.groupSettings.columns.length;\n\t            }\n\t            this.cellDetails.cellIndex = target.cellIndex - gLen;\n\t            this.cellDetails.rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n\t        };\n\t        BatchEdit.prototype.editCell = function (index, field, isAdd) {\n\t            var gObj = this.parent;\n\t            var col = gObj.getColumnByField(field);\n\t            var keys = gObj.getPrimaryKeyFieldNames();\n\t            if (gObj.editSettings.allowEditing && col.allowEditing) {\n\t                if (gObj.isEdit && !(this.cellDetails.column.field === field && this.cellDetails.rowIndex === index)) {\n\t                    this.saveCell();\n\t                }\n\t                if (gObj.isEdit) {\n\t                    return;\n\t                }\n\t                var row = gObj.getDataRows()[index];\n\t                if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.template || col.columns) {\n\t                    return;\n\t                }\n\t                var rowData = ej2_base_1.extend({}, this.getDataByIndex(index));\n\t                var args = {\n\t                    cell: row.cells[this.getCellIdx(col.uid)], row: row,\n\t                    columnName: col.field, columnObject: col, isForeignKey: !ej2_base_3.isNullOrUndefined(col.foreignKeyValue),\n\t                    primaryKey: keys, rowData: rowData,\n\t                    validationRules: ej2_base_1.extend({}, col.validationRules ? col.validationRules : {}),\n\t                    value: rowData[col.field], type: !isAdd ? 'edit' : 'add', cancel: false\n\t                };\n\t                gObj.trigger(events.cellEdit, args);\n\t                if (args.cancel) {\n\t                    return;\n\t                }\n\t                this.cellDetails = {\n\t                    rowData: rowData, column: col, value: args.value, isForeignKey: args.isForeignKey,\n\t                };\n\t                this.setCellIdx(args.cell);\n\t                if (args.cell.classList.contains('e-updatedtd')) {\n\t                    this.isColored = true;\n\t                    args.cell.classList.remove('e-updatedtd');\n\t                }\n\t                gObj.clearSelection();\n\t                gObj.selectRow(this.cellDetails.rowIndex);\n\t                gObj.isEdit = true;\n\t                this.renderer.update(args);\n\t                this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n\t                gObj.editModule.applyFormValidation([col]);\n\t                this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n\t            }\n\t        };\n\t        BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n\t            var col = this.parent.getColumnByField(field);\n\t            if (col && !col.isPrimaryKey) {\n\t                var td = this.parent.getDataRows()[rowIndex].cells[this.parent.getColumnIndexByField(field)];\n\t                var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n\t                this.refreshTD(td, col, rowObj, value);\n\t                this.parent.trigger(events.queryCellInfo, {\n\t                    cell: td, column: col, data: rowObj.changes\n\t                });\n\t            }\n\t        };\n\t        BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n\t            if (!rowObj.changes) {\n\t                rowObj.changes = ej2_base_1.extend({}, rowObj.data);\n\t            }\n\t            rowObj.changes[field] = value;\n\t            rowObj.isDirty = true;\n\t        };\n\t        BatchEdit.prototype.updateRow = function (index, data) {\n\t            var keys = Object.keys(data);\n\t            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                var col = keys_1[_i];\n\t                this.updateCell(index, col, data[col]);\n\t            }\n\t        };\n\t        BatchEdit.prototype.getCellIdx = function (uid) {\n\t            var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n\t            if (!ej2_base_3.isNullOrUndefined(this.parent.detailTemplate) || !ej2_base_3.isNullOrUndefined(this.parent.childGrid)) {\n\t                cIdx++;\n\t            }\n\t            return cIdx;\n\t        };\n\t        BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n\t            var cell = new cell_renderer_1.CellRenderer(this.parent, this.serviceLocator);\n\t            this.setChanges(rowObj, column.field, value);\n\t            cell.refreshTD(td, rowObj.cells[this.getCellIdx(column.uid)], rowObj.changes);\n\t            td.classList.add('e-updatedtd');\n\t            this.parent.notify(events.toolbarRefresh, {});\n\t        };\n\t        BatchEdit.prototype.saveCell = function (isForceSave) {\n\t            var gObj = this.parent;\n\t            if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n\t                return;\n\t            }\n\t            var tr = util_1.parentsUntil(this.form, 'e-row');\n\t            var column = this.cellDetails.column;\n\t            var editedData = gObj.editModule.getCurrentEditedData(this.form, {});\n\t            editedData = ej2_base_1.extend(this.cellDetails.rowData, editedData);\n\t            var args = {\n\t                columnName: column.field,\n\t                value: editedData[column.field],\n\t                rowData: this.cellDetails.rowData,\n\t                previousValue: this.cellDetails.value,\n\t                columnObject: column,\n\t                cell: this.form.parentElement,\n\t                isForeignKey: this.cellDetails.isForeignKey, cancel: false\n\t            };\n\t            if (!isForceSave) {\n\t                gObj.trigger(events.cellSave, args);\n\t            }\n\t            if (args.cancel) {\n\t                return;\n\t            }\n\t            gObj.editModule.destroyForm();\n\t            gObj.editModule.destroyWidgets([column]);\n\t            this.parent.notify(events.tooltipDestroy, {});\n\t            this.refreshTD(args.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), args.value);\n\t            ej2_base_2.classList(tr, [], ['e-editedrow', 'e-batchrow']);\n\t            args.cell.classList.remove('e-editedbatchcell');\n\t            gObj.isEdit = false;\n\t            if (!ej2_base_3.isNullOrUndefined(args.value) && args.value.toString() ===\n\t                (!ej2_base_3.isNullOrUndefined(this.cellDetails.value) ? this.cellDetails.value : '').toString() && !this.isColored) {\n\t                args.cell.classList.remove('e-updatedtd');\n\t            }\n\t            gObj.notify(events.toolbarRefresh, {});\n\t            this.isColored = false;\n\t        };\n\t        BatchEdit.prototype.getDataByIndex = function (index) {\n\t            var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n\t            return row.changes ? row.changes : row.data;\n\t        };\n\t        BatchEdit.prototype.valComplete = function (args) {\n\t            var edit = this.parent.editModule;\n\t            edit.validationComplete(args);\n\t        };\n\t        BatchEdit.prototype.customPlacement = function (inputElement, error) {\n\t            var edit = this.parent.editModule;\n\t            edit.valErrorPlacement(inputElement, error);\n\t        };\n\t        return BatchEdit;\n\t    }());\n\t    exports.BatchEdit = BatchEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(81)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, normal_edit_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DialogEdit = (function (_super) {\n\t        __extends(DialogEdit, _super);\n\t        function DialogEdit(parent, serviceLocator, renderer) {\n\t            var _this = _super.call(this, parent, serviceLocator) || this;\n\t            _this.parent = parent;\n\t            _this.serviceLocator = serviceLocator;\n\t            _this.renderer = renderer;\n\t            return _this;\n\t        }\n\t        DialogEdit.prototype.closeEdit = function () {\n\t            _super.prototype.closeEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.addRecord = function (data) {\n\t            _super.prototype.addRecord.call(this, data);\n\t        };\n\t        DialogEdit.prototype.endEdit = function () {\n\t            _super.prototype.endEdit.call(this);\n\t        };\n\t        DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n\t            _super.prototype.deleteRecord.call(this, fieldname, data);\n\t        };\n\t        DialogEdit.prototype.startEdit = function (tr) {\n\t            _super.prototype.startEdit.call(this, tr);\n\t        };\n\t        return DialogEdit;\n\t    }(normal_edit_1.NormalEdit));\n\t    exports.DialogEdit = DialogEdit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(11), __webpack_require__(85), __webpack_require__(5), __webpack_require__(18), __webpack_require__(86), __webpack_require__(22), __webpack_require__(15), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, ej2_excel_export_1, ej2_base_1, data_1, export_helper_1, summary_model_generator_1, enum_1, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExcelExport = (function () {\n\t        function ExcelExport(parent) {\n\t            this.book = {};\n\t            this.workSheet = [];\n\t            this.rows = [];\n\t            this.columns = [];\n\t            this.styles = [];\n\t            this.rowLength = 1;\n\t            this.expType = 'appendtosheet';\n\t            this.includeHiddenColumn = false;\n\t            this.isCsvExport = false;\n\t            this.parent = parent;\n\t        }\n\t        ExcelExport.prototype.getModuleName = function () {\n\t            return 'ExcelExport';\n\t        };\n\t        ExcelExport.prototype.init = function (gObj) {\n\t            if (gObj.element !== null && gObj.element.id === '') {\n\t                gObj.element.id = new Date().toISOString();\n\t            }\n\t            this.parent = gObj;\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t            this.isExporting = undefined;\n\t            this.book = {};\n\t            this.workSheet = [];\n\t            this.rows = [];\n\t            this.columns = [];\n\t            this.styles = [];\n\t            this.rowLength = 1;\n\t            this.footer = undefined;\n\t            this.expType = 'appendtosheet';\n\t            this.includeHiddenColumn = false;\n\t            this.exportValueFormatter = new export_helper_1.ExportValueFormatter();\n\t            this.theme = 'material';\n\t        };\n\t        ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv) {\n\t            var gObj = grid;\n\t            this.data = new data_1.Data(gObj);\n\t            this.isExporting = true;\n\t            if (isCsv) {\n\t                this.isCsvExport = isCsv;\n\t            }\n\t            else {\n\t                this.isCsvExport = false;\n\t            }\n\t            gObj.trigger(events.beforeExcelExport);\n\t            return this.processRecords(grid, exportProperties, isMultipleExport, workbook);\n\t        };\n\t        ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n\t            var _this = this;\n\t            if (exportProperties !== undefined && exportProperties.dataSource !== undefined &&\n\t                exportProperties.dataSource instanceof ej2_data_1.DataManager) {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = new ej2_data_1.DataManager({ url: exportProperties.dataSource.dataSource.url, adaptor: exportProperties.dataSource.adaptor }).executeQuery(new ej2_data_1.Query());\n\t                    dataManager.then(function (r) {\n\t                        _this.init(gObj);\n\t                        _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n\t                        resolve(_this.book);\n\t                    });\n\t                });\n\t            }\n\t            else {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = _this.data.getData({}, _this.data.generateQuery(true).requiresCount());\n\t                    dataManager.then(function (r) {\n\t                        _this.init(gObj);\n\t                        _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n\t                        resolve(_this.book);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t        ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, isMultipleExport, workbook, r) {\n\t            var blankRows = 5;\n\t            if (exportProperties !== undefined && exportProperties.multipleExport !== undefined) {\n\t                this.expType = (exportProperties.multipleExport.type !== undefined ? exportProperties.multipleExport.type : 'appendtosheet');\n\t                if (exportProperties.multipleExport.blankRows !== undefined) {\n\t                    blankRows = exportProperties.multipleExport.blankRows;\n\t                }\n\t            }\n\t            if (workbook === undefined) {\n\t                this.workSheet = [];\n\t                this.rows = [];\n\t                this.columns = [];\n\t                this.styles = [];\n\t            }\n\t            else if (this.expType === 'newsheet') {\n\t                this.workSheet = workbook.worksheets;\n\t                this.rows = [];\n\t                this.columns = [];\n\t                this.styles = workbook.styles;\n\t            }\n\t            else {\n\t                this.workSheet = [];\n\t                this.rows = workbook.worksheets[0].rows;\n\t                this.columns = workbook.worksheets[0].columns;\n\t                this.styles = workbook.styles;\n\t                this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n\t                this.rowLength++;\n\t            }\n\t            if (exportProperties !== undefined) {\n\t                if (isMultipleExport !== undefined) {\n\t                    if (exportProperties.header !== undefined && (isMultipleExport || this.expType === 'newsheet')) {\n\t                        this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n\t                    }\n\t                    if (exportProperties.footer !== undefined) {\n\t                        if (this.expType === 'appendtosheet') {\n\t                            if (!isMultipleExport) {\n\t                                this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                            }\n\t                        }\n\t                        else {\n\t                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (exportProperties.header !== undefined) {\n\t                        this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n\t                    }\n\t                    if (exportProperties.footer !== undefined) {\n\t                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n\t                    }\n\t                }\n\t            }\n\t            this.includeHiddenColumn = (exportProperties !== undefined ? exportProperties.includeHiddenColumn : false);\n\t            var headerRow = new export_helper_1.ExportHelper(gObj).getHeaders(gObj.columns, this.includeHiddenColumn);\n\t            var groupIndent = 0;\n\t            if ((r.result).level !== undefined) {\n\t                groupIndent += (r.result).level;\n\t                groupIndent += (r.result).childLevels;\n\t            }\n\t            this.processHeaderContent(gObj, headerRow, exportProperties, groupIndent);\n\t            if (exportProperties !== undefined && exportProperties.dataSource !== undefined && !(exportProperties.dataSource instanceof ej2_data_1.DataManager)) {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties.dataSource);\n\t            }\n\t            else if (exportProperties !== undefined && exportProperties.exportType === 'currentview') {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport, gObj.getCurrentViewRecords());\n\t            }\n\t            else {\n\t                this.processRecordContent(gObj, r, headerRow, isMultipleExport);\n\t            }\n\t            this.isExporting = false;\n\t            gObj.trigger(events.excelExportComplete);\n\t        };\n\t        ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, isMultipleExport, currentViewRecords) {\n\t            var column = gObj.columns;\n\t            var record = undefined;\n\t            if (currentViewRecords !== undefined) {\n\t                record = currentViewRecords;\n\t            }\n\t            else {\n\t                record = returnType.result;\n\t            }\n\t            if (record.level !== undefined) {\n\t                this.processGroupedRows(gObj, record, headerRow, record.level);\n\t            }\n\t            else {\n\t                this.processRecordRows(gObj, record, headerRow, 0);\n\t                if (returnType.aggregates !== undefined) {\n\t                    if (currentViewRecords !== undefined) {\n\t                        this.processAggregates(gObj, returnType.result, currentViewRecords);\n\t                    }\n\t                    else {\n\t                        this.processAggregates(gObj, returnType.result);\n\t                    }\n\t                }\n\t            }\n\t            if (this.footer !== undefined) {\n\t                if ((this.expType === 'appendtosheet' && !isMultipleExport) || (this.expType === 'newsheet')) {\n\t                    this.processExcelFooter(this.footer);\n\t                }\n\t            }\n\t            var sheet = {};\n\t            if (this.columns.length > 0) {\n\t                sheet.columns = this.columns;\n\t            }\n\t            sheet.rows = this.rows;\n\t            this.workSheet.push(sheet);\n\t            this.book.worksheets = this.workSheet;\n\t            this.book.styles = this.styles;\n\t            if (!isMultipleExport) {\n\t                if (this.isCsvExport) {\n\t                    var book = new ej2_excel_export_1.Workbook(this.book, 'csv');\n\t                    book.save('Export.csv');\n\t                }\n\t                else {\n\t                    var book = new ej2_excel_export_1.Workbook(this.book, 'xlsx');\n\t                    book.save('Export.xlsx');\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level) {\n\t            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n\t                var item = dataSource_1[_i];\n\t                var cells = [];\n\t                var index = 1;\n\t                var cell = {};\n\t                cell.index = index + level;\n\t                var args = {\n\t                    value: item.key,\n\t                    column: gObj.getColumnByField(item.field),\n\t                    style: undefined\n\t                };\n\t                cell.value = item.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ';\n\t                if (item.count > 1) {\n\t                    cell.value += item.count + ' items';\n\t                }\n\t                else {\n\t                    cell.value += item.count + ' item';\n\t                }\n\t                cell.style = this.getCaptionThemeStyle(this.theme);\n\t                var captionModelGen = new summary_model_generator_1.CaptionSummaryModelGenerator(gObj);\n\t                var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n\t                this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, this.rowLength);\n\t                cells.push(cell);\n\t                if (this.rows[this.rowLength - 1].cells.length > 0) {\n\t                    var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n\t                    var hIndex = 0;\n\t                    for (var _a = 0, _b = this.rows[this.rowLength - 1].cells; _a < _b.length; _a++) {\n\t                        var tCell = _b[_a];\n\t                        if (tCell.index < lIndex) {\n\t                            lIndex = tCell.index;\n\t                        }\n\t                        if (tCell.index > hIndex) {\n\t                            hIndex = tCell.index;\n\t                        }\n\t                        tCell.style = this.getCaptionThemeStyle(this.theme);\n\t                        cells.push(tCell);\n\t                    }\n\t                    if ((lIndex - cell.index) > 1) {\n\t                        cell.colSpan = lIndex - cell.index;\n\t                    }\n\t                    while (hIndex < (headerRow.columns.length + index + level)) {\n\t                        var sCell = {};\n\t                        if (dataSource.childLevels === 0) {\n\t                            sCell.index = (hIndex);\n\t                        }\n\t                        else {\n\t                            sCell.index = (hIndex + 1);\n\t                        }\n\t                        sCell.style = this.getCaptionThemeStyle(this.theme);\n\t                        cells.push(sCell);\n\t                        hIndex++;\n\t                    }\n\t                }\n\t                else {\n\t                    var span = 0;\n\t                    for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n\t                        var col = _d[_c];\n\t                        if (col.visible) {\n\t                            span++;\n\t                        }\n\t                    }\n\t                    cell.colSpan = (dataSource.childLevels + span);\n\t                }\n\t                this.rows[this.rowLength - 1].cells = cells;\n\t                this.rowLength++;\n\t                if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n\t                    this.processGroupedRows(gObj, item.items, headerRow, item.items.level);\n\t                }\n\t                else {\n\t                    this.processRecordRows(gObj, item.items, headerRow, (level));\n\t                    this.processAggregates(gObj, item, undefined, (level));\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level) {\n\t            var rLen = Object.keys(record).length;\n\t            var index = 1;\n\t            var cells = [];\n\t            for (var r = 0; r < rLen; r++) {\n\t                cells = [];\n\t                index = 1;\n\t                for (var c = 0, len = headerRow.columns.length; c < len; c++) {\n\t                    var value = record[r][headerRow.columns[c].field];\n\t                    if (!ej2_base_1.isNullOrUndefined(value)) {\n\t                        var args = {\n\t                            column: headerRow.columns[c], value: value, style: undefined\n\t                        };\n\t                        gObj.trigger(events.excelQueryCellInfo, args);\n\t                        var cell = {};\n\t                        cell.index = index + level;\n\t                        cell.value = args.value;\n\t                        if (args.style !== undefined) {\n\t                            var styleIndex = this.getColumnStyle(gObj, index + level);\n\t                            cell.style = this.mergeOptions(this.styles[styleIndex], args.style);\n\t                        }\n\t                        else {\n\t                            cell.style = { name: gObj.element.id + 'column' + (index + level) };\n\t                        }\n\t                        cells.push(cell);\n\t                    }\n\t                    index++;\n\t                }\n\t                this.rows.push({ index: this.rowLength++, cells: cells });\n\t            }\n\t        };\n\t        ExcelExport.prototype.processAggregates = function (gObj, rec, currentViewRecords, indent) {\n\t            var summaryModel = new summary_model_generator_1.SummaryModelGenerator(gObj);\n\t            var data = undefined;\n\t            if (currentViewRecords !== undefined) {\n\t                data = currentViewRecords;\n\t            }\n\t            else {\n\t                data = rec;\n\t            }\n\t            if (indent === undefined) {\n\t                indent = 0;\n\t            }\n\t            if (gObj.groupSettings.columns.length > 0) {\n\t                var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n\t                if (groupSummaryRows.length > 0) {\n\t                    this.fillAggregates(gObj, groupSummaryRows, indent);\n\t                }\n\t            }\n\t            var sRows = summaryModel.generateRows(data, rec.aggregates);\n\t            if (sRows.length > 0) {\n\t                this.fillAggregates(gObj, sRows, indent);\n\t            }\n\t        };\n\t        ExcelExport.prototype.fillAggregates = function (gObj, cells, indent, customIndex) {\n\t            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n\t                var row = cells_1[_i];\n\t                var cells_2 = [];\n\t                var index = 0;\n\t                for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n\t                    var cell = _b[_a];\n\t                    var eCell = {};\n\t                    if ((cell.visible || this.includeHiddenColumn)) {\n\t                        index++;\n\t                        if (cell.isDataCell) {\n\t                            eCell.index = index + indent;\n\t                            var templateFn = {};\n\t                            if (cell.column.footerTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(cell.column.footerTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else if (cell.column.groupFooterTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(cell.column.groupFooterTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else if (cell.column.groupCaptionTemplate !== undefined) {\n\t                                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(cell.column.groupCaptionTemplate);\n\t                                var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                                eCell.value = txt[0].wholeText;\n\t                            }\n\t                            else {\n\t                                for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n\t                                    var key = _d[_c];\n\t                                    if (key === cell.column.type) {\n\t                                        if (row.data[cell.column.field].sum !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].sum;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].average !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].average;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].max !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].max;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].min !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].min;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].count !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].count;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].truecount !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].truecount;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].falsecount !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].falsecount;\n\t                                        }\n\t                                        else if (row.data[cell.column.field].custom !== undefined) {\n\t                                            eCell.value = row.data[cell.column.field].custom;\n\t                                        }\n\t                                    }\n\t                                }\n\t                            }\n\t                            eCell.style = this.getCaptionThemeStyle(this.theme);\n\t                            cells_2.push(eCell);\n\t                        }\n\t                        else {\n\t                            if (customIndex === undefined) {\n\t                                eCell.index = index + indent;\n\t                                eCell.style = this.getCaptionThemeStyle(this.theme);\n\t                                cells_2.push(eCell);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t                if (customIndex !== undefined) {\n\t                    this.rows.push({ index: customIndex, cells: cells_2 });\n\t                }\n\t                else {\n\t                    this.rows.push({ index: this.rowLength++, cells: cells_2 });\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n\t            var result = {};\n\t            var attrname = Object.keys(JSON1);\n\t            for (var index = 0; index < attrname.length; index++) {\n\t                if (attrname[index] !== 'name') {\n\t                    result[attrname[index]] = JSON1[attrname[index]];\n\t                }\n\t            }\n\t            attrname = Object.keys(JSON2);\n\t            for (var index = 0; index < attrname.length; index++) {\n\t                if (attrname[index] !== 'name') {\n\t                    result[attrname[index]] = JSON2[attrname[index]];\n\t                }\n\t            }\n\t            return result;\n\t        };\n\t        ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n\t            var index = 0;\n\t            for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n\t                var style = _a[_i];\n\t                if (style.name === gObj.element.id + 'column' + columnIndex) {\n\t                    return index;\n\t                }\n\t                index++;\n\t            }\n\t            return undefined;\n\t        };\n\t        ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, exportProperties, indent) {\n\t            var column = gObj.columns;\n\t            var rowIndex = 1;\n\t            var returnValue = headerRow;\n\t            var gridRows = returnValue.rows;\n\t            var gridColumns = returnValue.columns;\n\t            var spannedCells = [];\n\t            if (indent > 0) {\n\t                var index = 0;\n\t                while (index !== indent) {\n\t                    this.columns.push({ index: index + 1, width: 30 });\n\t                    index++;\n\t                }\n\t            }\n\t            for (var row = 0; row < gridRows.length; row++) {\n\t                var currentCellIndex = 1 + indent;\n\t                var cells = [];\n\t                for (var column_1 = 0; column_1 < gridRows[row].cells.length; column_1++) {\n\t                    var style = {};\n\t                    var cell = {};\n\t                    var gridCell = gridRows[row].cells[column_1];\n\t                    var result = { contains: true, index: 1 };\n\t                    while (result.contains) {\n\t                        result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n\t                        currentCellIndex = result.index;\n\t                        if (!result.contains) {\n\t                            cell.index = result.index;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (gridCell.rowSpan !== undefined && gridCell.rowSpan !== 1) {\n\t                        cell.rowSpan = gridCell.rowSpan;\n\t                        for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n\t                            var spannedCell = { rowIndex: 0, columnIndex: 0 };\n\t                            spannedCell.rowIndex = i;\n\t                            spannedCell.columnIndex = currentCellIndex;\n\t                            spannedCells.push(spannedCell);\n\t                        }\n\t                    }\n\t                    if (gridCell.colSpan !== undefined && gridCell.colSpan !== 1) {\n\t                        cell.colSpan = gridCell.colSpan;\n\t                        currentCellIndex = currentCellIndex + cell.colSpan - 1;\n\t                    }\n\t                    cell.value = gridCell.column.headerText;\n\t                    if (exportProperties !== undefined && exportProperties.theme !== undefined) {\n\t                        this.theme = exportProperties.theme;\n\t                    }\n\t                    cell.style = this.getHeaderThemeStyle(this.theme);\n\t                    if (gridCell.column.textAlign !== undefined) {\n\t                        style.hAlign = gridCell.column.textAlign;\n\t                    }\n\t                    if (gridCell.column.headerTextAlign !== undefined) {\n\t                        style.hAlign = gridCell.column.headerTextAlign;\n\t                    }\n\t                    cell.style = style;\n\t                    cells.push(cell);\n\t                    currentCellIndex++;\n\t                }\n\t                this.rows.push({ index: this.rowLength++, cells: cells });\n\t            }\n\t            for (var col = 0; col < gridColumns.length; col++) {\n\t                this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n\t            }\n\t        };\n\t        ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n\t            var style = {};\n\t            switch (theme) {\n\t                case 'fabric':\n\t                    style.fontColor = '#666666';\n\t                    style.fontName = 'Segoe UI';\n\t                    style.fontSize = 14;\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                case 'bootstrap':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontSize = 14;\n\t                    style.bold = true;\n\t                    style.borders = { color: '#33330F' };\n\t                    break;\n\t                default:\n\t                    style.fontSize = 12;\n\t                    style.borders = { color: '#E0E0E0' };\n\t                    break;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n\t            var style = {};\n\t            switch (theme) {\n\t                case 'fabric':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontName = 'Segoe UI';\n\t                    style.fontSize = 14;\n\t                    style.backColor = '#F6F6F6';\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                case 'bootstrap':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontSize = 14;\n\t                    style.bold = true;\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                default:\n\t                    style.fontSize = 13;\n\t                    style.backColor = '#F6F6F6';\n\t                    break;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n\t            var style = {};\n\t            switch (theme) {\n\t                case 'fabric':\n\t                    style.fontColor = '#333333';\n\t                    style.fontName = 'Segoe UI';\n\t                    style.fontSize = 13;\n\t                    style.borders = { color: '#EAEAEA' };\n\t                    break;\n\t                case 'bootstrap':\n\t                    style.fontColor = '#33330F';\n\t                    style.fontSize = 14;\n\t                    style.borders = { color: '#DDDDDD' };\n\t                    break;\n\t                default:\n\t                    style.fontSize = 13;\n\t                    style.borders = { color: '#E0E0E0' };\n\t                    break;\n\t            }\n\t            return style;\n\t        };\n\t        ExcelExport.prototype.processExcelHeader = function (header) {\n\t            if (header.rows !== undefined && (this.expType === 'newsheet' || this.rowLength === 1)) {\n\t                var noRows = void 0;\n\t                if (header.headerRows === undefined) {\n\t                    this.rowLength = header.rows.length;\n\t                }\n\t                else {\n\t                    this.rowLength = header.headerRows;\n\t                }\n\t                if (this.rowLength < header.rows.length) {\n\t                    noRows = this.rowLength;\n\t                }\n\t                else {\n\t                    noRows = header.rows.length;\n\t                }\n\t                this.rowLength++;\n\t                for (var row = 0; row < noRows; row++) {\n\t                    var json = header.rows[row];\n\t                    if (!(json.index !== null && json.index !== undefined)) {\n\t                        json.index = (row + 1);\n\t                    }\n\t                    this.updatedCellIndex(json);\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.updatedCellIndex = function (json) {\n\t            var cellsLength = json.cells.length;\n\t            for (var cellId = 0; cellId < cellsLength; cellId++) {\n\t                var jsonCell = json.cells[cellId];\n\t                if (!(jsonCell.index !== null && jsonCell.index !== undefined)) {\n\t                    jsonCell.index = (cellId + 1);\n\t                }\n\t            }\n\t            this.rows.push(json);\n\t        };\n\t        ExcelExport.prototype.processExcelFooter = function (footer) {\n\t            if (footer.rows !== undefined) {\n\t                var noRows = void 0;\n\t                if (footer.footerRows === undefined) {\n\t                    this.rowLength += footer.rows.length;\n\t                }\n\t                else {\n\t                    if (footer.footerRows > footer.rows.length) {\n\t                        this.rowLength += (footer.footerRows - footer.rows.length);\n\t                        noRows = footer.rows.length;\n\t                    }\n\t                    else {\n\t                        noRows = footer.footerRows;\n\t                    }\n\t                }\n\t                for (var row = 0; row < noRows; row++) {\n\t                    var json = footer.rows[row];\n\t                    if (json.index === null || json.index === undefined) {\n\t                        json.index = this.rowLength++;\n\t                    }\n\t                    else {\n\t                        json.index += this.rowLength;\n\t                    }\n\t                    this.updatedCellIndex(json);\n\t                }\n\t            }\n\t        };\n\t        ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n\t            for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n\t                var spannedCell = spannedCells_1[_i];\n\t                if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n\t                    columnIndex = columnIndex + 1;\n\t                    return { contains: true, index: columnIndex };\n\t                }\n\t            }\n\t            return { contains: false, index: columnIndex };\n\t        };\n\t        ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n\t            if (col.format !== undefined) {\n\t                if (col.format.skeleton !== undefined) {\n\t                    style.numberFormat = col.format.skeleton;\n\t                    if (col.format.type !== undefined) {\n\t                        style.type = col.format.type;\n\t                    }\n\t                }\n\t                else {\n\t                    style.numberFormat = col.format;\n\t                    style.type = col.type;\n\t                }\n\t            }\n\t            if (col.textAlign !== undefined) {\n\t                style.hAlign = col.textAlign;\n\t            }\n\t            if (Object.keys(style).length > 0) {\n\t                style.name = gObj.element.id + 'column' + index;\n\t                this.styles.push(style);\n\t            }\n\t            if (col.width !== undefined) {\n\t                this.columns.push({ index: index, width: col.width });\n\t            }\n\t        };\n\t        ExcelExport.prototype.destroy = function () {\n\t        };\n\t        return ExcelExport;\n\t    }());\n\t    exports.ExcelExport = ExcelExport;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_85__;\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(17), __webpack_require__(15), __webpack_require__(5), __webpack_require__(16), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, row_1, enum_1, ej2_base_1, cell_1, value_formatter_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExportHelper = (function () {\n\t        function ExportHelper(parent) {\n\t            this.hideColumnInclude = false;\n\t            this.parent = parent;\n\t        }\n\t        ExportHelper.prototype.getHeaders = function (column, isHideColumnInclude) {\n\t            if (isHideColumnInclude) {\n\t                this.hideColumnInclude = true;\n\t            }\n\t            else {\n\t                this.hideColumnInclude = false;\n\t            }\n\t            var cols = column;\n\t            this.colDepth = this.measureColumnDepth(cols);\n\t            var rows = [];\n\t            var actualColumns = [];\n\t            for (var i = 0; i < this.colDepth; i++) {\n\t                rows[i] = new row_1.Row({});\n\t                rows[i].cells = [];\n\t            }\n\t            rows = this.processColumns(rows);\n\t            rows = this.processHeaderCells(rows);\n\t            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n\t                var row = rows_1[_i];\n\t                for (var i = 0; i < row.cells.length; i++) {\n\t                    var cell = row.cells[i];\n\t                    if (cell.visible === undefined && cell.cellType !== 9) {\n\t                        row.cells = this.removeCellFromRow(row.cells, i);\n\t                        i = i - 1;\n\t                    }\n\t                    if ((!isHideColumnInclude) && cell.visible !== undefined && (!cell.visible)) {\n\t                        row.cells = this.removeCellFromRow(row.cells, i);\n\t                        i = i - 1;\n\t                    }\n\t                }\n\t            }\n\t            for (var i = 0; i < cols.length; i++) {\n\t                this.generateActualColumns(cols[i], actualColumns);\n\t            }\n\t            return { rows: rows, columns: actualColumns };\n\t        };\n\t        ExportHelper.prototype.generateActualColumns = function (column, actualColumns) {\n\t            if (!column.columns) {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    actualColumns.push(column);\n\t                }\n\t            }\n\t            else {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    var colSpan = this.getCellCount(column, 0);\n\t                    if (colSpan !== 0) {\n\t                        for (var i = 0; i < column.columns.length; i++) {\n\t                            this.generateActualColumns(column.columns[i], actualColumns);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ExportHelper.prototype.removeCellFromRow = function (cells, cellIndex) {\n\t            var resultCells = [];\n\t            for (var i = 0; i < cellIndex; i++) {\n\t                resultCells.push(cells[i]);\n\t            }\n\t            for (var i = (cellIndex + 1); i < cells.length; i++) {\n\t                resultCells.push(cells[i]);\n\t            }\n\t            return resultCells;\n\t        };\n\t        ExportHelper.prototype.processHeaderCells = function (rows) {\n\t            var columns = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n\t            for (var i = 0; i < columns.length; i++) {\n\t                rows = this.appendGridCells(columns[i], rows, 0, i === 0, false, i === (columns.length - 1));\n\t            }\n\t            return rows;\n\t        };\n\t        ExportHelper.prototype.appendGridCells = function (cols, gridRows, index, isFirstObj, isFirstColumn, isLastColumn) {\n\t            var lastCol = isLastColumn ? 'e-lastcell' : '';\n\t            if (!cols.columns) {\n\t                gridRows[index].cells.push(this.generateCell(cols, enum_1.CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstColumn ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n\t            }\n\t            else {\n\t                var colSpan = this.getCellCount(cols, 0);\n\t                if (colSpan) {\n\t                    gridRows[index].cells.push(new cell_1.Cell({\n\t                        cellType: enum_1.CellType.StackedHeader, column: cols, colSpan: colSpan\n\t                    }));\n\t                }\n\t                var isFirstCell = void 0;\n\t                var isIgnoreFirstCell = void 0;\n\t                for (var i = 0, len = cols.columns.length; i < len; i++) {\n\t                    isFirstCell = false;\n\t                    if (cols.columns[i].visible && !isIgnoreFirstCell) {\n\t                        isFirstCell = true;\n\t                        isIgnoreFirstCell = true;\n\t                    }\n\t                    gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastColumn);\n\t                }\n\t            }\n\t            return gridRows;\n\t        };\n\t        ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, className, rowIndex, columnIndex) {\n\t            var option = {\n\t                'visible': gridColumn.visible,\n\t                'isDataCell': false,\n\t                'isTemplate': !ej2_base_1.isNullOrUndefined(gridColumn.headerTemplate),\n\t                'rowID': '',\n\t                'column': gridColumn,\n\t                'cellType': cellType,\n\t                'rowSpan': rowSpan,\n\t                'className': className,\n\t                'index': rowIndex,\n\t                'colIndex': columnIndex\n\t            };\n\t            if (!option.rowSpan || option.rowSpan < 2) {\n\t                delete option.rowSpan;\n\t            }\n\t            return new cell_1.Cell(option);\n\t        };\n\t        ExportHelper.prototype.processColumns = function (rows) {\n\t            var gridObj = this.parent;\n\t            var columnIndexes = this.parent.getColumnIndexesInView();\n\t            for (var i = 0, len = rows.length; i < len; i++) {\n\t                if (gridObj.allowGrouping) {\n\t                    for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n\t                        if (this.parent.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n\t                            continue;\n\t                        }\n\t                        rows[i].cells.push(this.generateCell({}, enum_1.CellType.HeaderIndent));\n\t                    }\n\t                }\n\t                if (gridObj.detailTemplate || gridObj.childGrid) {\n\t                    rows[i].cells.push(this.generateCell({}, enum_1.CellType.DetailHeader));\n\t                }\n\t            }\n\t            return rows;\n\t        };\n\t        ExportHelper.prototype.getCellCount = function (column, count) {\n\t            if (column.columns) {\n\t                for (var i = 0; i < column.columns.length; i++) {\n\t                    count = this.getCellCount(column.columns[i], count);\n\t                }\n\t            }\n\t            else {\n\t                if (column.visible || this.hideColumnInclude) {\n\t                    count++;\n\t                }\n\t            }\n\t            return count;\n\t        };\n\t        ExportHelper.prototype.measureColumnDepth = function (column) {\n\t            var max = 0;\n\t            for (var i = 0; i < column.length; i++) {\n\t                var depth = this.checkDepth(column[i], 0);\n\t                if (max < depth) {\n\t                    max = depth;\n\t                }\n\t            }\n\t            return max + 1;\n\t        };\n\t        ExportHelper.prototype.checkDepth = function (col, index) {\n\t            if (col.columns) {\n\t                index++;\n\t                for (var i = 0; i < col.columns.length; i++) {\n\t                    index = this.checkDepth(col.columns[i], index);\n\t                }\n\t            }\n\t            return index;\n\t        };\n\t        ;\n\t        return ExportHelper;\n\t    }());\n\t    exports.ExportHelper = ExportHelper;\n\t    var ExportValueFormatter = (function () {\n\t        function ExportValueFormatter() {\n\t            this.valueFormatter = new value_formatter_1.ValueFormatter();\n\t            this.internationalization = new ej2_base_1.Internationalization();\n\t        }\n\t        ExportValueFormatter.prototype.formatCellValue = function (args) {\n\t            if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n\t                return this.internationalization.getNumberFormat({ format: args.column.format })(args.value);\n\t            }\n\t            else if (args.column.type === 'boolean') {\n\t                return args.value ? 'true' : 'false';\n\t            }\n\t            else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n\t                if (typeof args.column.format === 'string') {\n\t                    var format = void 0;\n\t                    if (args.column.type === 'date') {\n\t                        format = { type: 'date', skeleton: args.column.format };\n\t                    }\n\t                    else if (args.column.type === 'time') {\n\t                        format = { type: 'time', skeleton: args.column.format };\n\t                    }\n\t                    else {\n\t                        format = { type: 'dateTime', skeleton: args.column.format };\n\t                    }\n\t                    return this.valueFormatter.getFormatFunction(format)(args.value);\n\t                }\n\t                else {\n\t                    if (args.column.format instanceof Object && args.column.format.type === undefined) {\n\t                        return (args.value.toString());\n\t                    }\n\t                    else {\n\t                        var customFormat = void 0;\n\t                        if (args.column.type === 'date') {\n\t                            customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        else if (args.column.type === 'time') {\n\t                            customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        else {\n\t                            customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n\t                        }\n\t                        return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                if (args.column.type === undefined || args.column.type === null) {\n\t                    return '';\n\t                }\n\t                else {\n\t                    return (args.value).toString();\n\t                }\n\t            }\n\t        };\n\t        return ExportValueFormatter;\n\t    }());\n\t    exports.ExportValueFormatter = ExportValueFormatter;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(11), __webpack_require__(88), __webpack_require__(88), __webpack_require__(88), __webpack_require__(88), __webpack_require__(88), __webpack_require__(88), __webpack_require__(86), __webpack_require__(18), __webpack_require__(22), __webpack_require__(5), __webpack_require__(15), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, events, ej2_pdf_export_1, ej2_pdf_export_2, ej2_pdf_export_3, ej2_pdf_export_4, ej2_pdf_export_5, ej2_pdf_export_6, export_helper_1, data_1, summary_model_generator_1, ej2_base_1, enum_1, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PdfExport = (function () {\n\t        function PdfExport(parent) {\n\t            this.hideColumnInclude = false;\n\t            this.currentViewData = false;\n\t            this.customDataSource = false;\n\t            this.gridTheme = 'material';\n\t            this.isGrouping = false;\n\t            this.parent = parent;\n\t            this.data = new data_1.Data(parent);\n\t            if (this.parent.isDestroyed) {\n\t                return;\n\t            }\n\t        }\n\t        PdfExport.prototype.getModuleName = function () {\n\t            return 'PdfExport';\n\t        };\n\t        PdfExport.prototype.init = function (parent) {\n\t            this.exportValueFormatter = new export_helper_1.ExportValueFormatter();\n\t            this.pdfDocument = undefined;\n\t            this.hideColumnInclude = false;\n\t            this.currentViewData = false;\n\t            this.parent = parent;\n\t            var gObj = parent;\n\t            this.gridTheme = 'material';\n\t            this.isGrouping = false;\n\t            this.isExporting = true;\n\t            gObj.trigger(events.beforePdfExport);\n\t        };\n\t        PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc) {\n\t            var _this = this;\n\t            this.data = new data_1.Data(this.parent);\n\t            if (pdfExportProperties !== undefined && pdfExportProperties.dataSource !== undefined && pdfExportProperties.dataSource instanceof ej2_data_1.DataManager) {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    new ej2_data_1.DataManager({ url: pdfExportProperties.dataSource.dataSource.url, adaptor: pdfExportProperties.dataSource.adaptor }).executeQuery(new ej2_data_1.Query()).then(function (returnType) {\n\t                        _this.init(parent);\n\t                        if (pdfDoc !== undefined) {\n\t                            _this.pdfDocument = pdfDoc;\n\t                        }\n\t                        else {\n\t                            _this.pdfDocument = new ej2_pdf_export_1.PdfDocument();\n\t                        }\n\t                        _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n\t                        _this.isExporting = false;\n\t                        parent.trigger(events.pdfExportComplete);\n\t                        resolve(_this.pdfDocument);\n\t                    });\n\t                });\n\t            }\n\t            else {\n\t                var promise = void 0;\n\t                return promise = new Promise(function (resolve, reject) {\n\t                    var dataManager = _this.data.getData({}, _this.data.generateQuery(true).requiresCount());\n\t                    dataManager.then(function (returnType) {\n\t                        _this.init(parent);\n\t                        if (pdfDoc !== undefined) {\n\t                            _this.pdfDocument = pdfDoc;\n\t                        }\n\t                        else {\n\t                            _this.pdfDocument = new ej2_pdf_export_1.PdfDocument();\n\t                        }\n\t                        _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n\t                        _this.isExporting = false;\n\t                        parent.trigger(events.pdfExportComplete);\n\t                        resolve(_this.pdfDocument);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t        PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n\t            var columns = gObj.columns;\n\t            var dataSource = returnType.result;\n\t            var section = this.pdfDocument.sections.add();\n\t            var result = this.processExportProperties(pdfExportProperties, dataSource, section);\n\t            dataSource = result.dataSource;\n\t            if (dataSource.GroupGuid !== undefined) {\n\t                this.isGrouping = true;\n\t            }\n\t            section = result.section;\n\t            var pdfPage = section.pages.add();\n\t            var pdfGrid = new ej2_pdf_export_1.PdfGrid();\n\t            var headerThemeStyle = this.getHeaderThemeStyle();\n\t            var border = headerThemeStyle.border;\n\t            var headerFont = headerThemeStyle.font;\n\t            var headerBrush = headerThemeStyle.brush;\n\t            var returnValue = (new export_helper_1.ExportHelper(this.parent)).getHeaders(columns, this.hideColumnInclude);\n\t            var rows = returnValue.rows;\n\t            var gridColumns = returnValue.columns;\n\t            pdfGrid = this.processGridHeaders(dataSource.childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush);\n\t            this.setColumnProperties(gridColumns, pdfGrid);\n\t            var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n\t            if (dataSource !== undefined && dataSource !== null && dataSource.length > 0) {\n\t                if (this.isGrouping) {\n\t                    this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, returnType);\n\t                }\n\t                else {\n\t                    this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid);\n\t                }\n\t                if (returnType.aggregates !== undefined) {\n\t                    var summaryModel = new summary_model_generator_1.SummaryModelGenerator(gObj);\n\t                    var sRows = void 0;\n\t                    if (this.customDataSource) {\n\t                        sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n\t                    }\n\t                    else if (this.currentViewData) {\n\t                        sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n\t                    }\n\t                    else if (this.isGrouping) {\n\t                        sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n\t                    }\n\t                    else {\n\t                        sRows = summaryModel.generateRows(returnType.result, returnType.aggregates);\n\t                    }\n\t                    this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n\t                }\n\t            }\n\t            else {\n\t                var row = pdfGrid.rows.addRow();\n\t                row.style.setBorder(border);\n\t            }\n\t            pdfGrid.draw(pdfPage, 20, 20);\n\t            if (!isMultipleExport) {\n\t                this.pdfDocument.save('Export.pdf');\n\t            }\n\t        };\n\t        PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n\t            switch (this.gridTheme) {\n\t                case 'bootstrap':\n\t                    return { font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(51, 51, 51)), backgroundBrush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(255, 255, 255)) };\n\t                case 'fabric':\n\t                    return { font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(51, 51, 51)), backgroundBrush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(246, 246, 246)) };\n\t                default:\n\t                    return { font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 9.75), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0)), backgroundBrush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(246, 246, 246)) };\n\t            }\n\t        };\n\t        PdfExport.prototype.getHeaderThemeStyle = function () {\n\t            var border = new ej2_pdf_export_1.PdfBorders();\n\t            switch (this.gridTheme) {\n\t                case 'bootstrap':\n\t                    border.all = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(221, 221, 221));\n\t                    return { border: border, font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(51, 51, 51)) };\n\t                case 'fabric':\n\t                    border.all = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(224, 224, 224));\n\t                    return { border: border, font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 9), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0.54)) };\n\t                default:\n\t                    border.all = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(234, 234, 234));\n\t                    return { border: border, font: new ej2_pdf_export_2.PdfStandardFont(ej2_pdf_export_2.PdfFontFamily.Helvetica, 10.5), brush: new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(102, 102, 102)) };\n\t            }\n\t        };\n\t        PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType) {\n\t            var groupIndex = level;\n\t            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n\t                var dataSourceItems = dataSource_1[_i];\n\t                var row = pdfGrid.rows.addRow();\n\t                var args = {\n\t                    value: dataSourceItems.key,\n\t                    column: gObj.getColumnByField(dataSourceItems.field),\n\t                    style: undefined\n\t                };\n\t                var value = dataSourceItems.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n\t                row.cells.getCell(groupIndex).value = value;\n\t                row.style.setBorder(border);\n\t                row.style.setFont(font);\n\t                row.style.setTextBrush(brush);\n\t                row.style.setBackgroundBrush(backgroundBrush);\n\t                var sRows = void 0;\n\t                var captionSummaryModel = new summary_model_generator_1.CaptionSummaryModelGenerator(gObj);\n\t                if (dataSourceItems.items.records !== undefined) {\n\t                    sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n\t                }\n\t                else {\n\t                    sRows = captionSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n\t                }\n\t                if (sRows !== undefined && sRows.length === 0) {\n\t                    row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n\t                }\n\t                if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\t                    this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType);\n\t                    var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                    sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n\t                }\n\t                else {\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n\t                    this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1));\n\t                    var groupSummaryModel = new summary_model_generator_1.GroupSummaryModelGenerator(gObj);\n\t                    sRows = groupSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n\t                    this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush) {\n\t            var columnCount = gridColumns.length;\n\t            if (this.isGrouping) {\n\t                columnCount += (childLevels + 1);\n\t            }\n\t            pdfGrid.columns.add(columnCount);\n\t            if (this.isGrouping) {\n\t                for (var i = 0; i < (childLevels + 1); i++) {\n\t                    pdfGrid.columns.getColumn(i).width = 20;\n\t                }\n\t            }\n\t            pdfGrid.headers.add(rows.length);\n\t            for (var i = 0; i < rows.length; i++) {\n\t                var gridHeader = pdfGrid.headers.getHeader(i);\n\t                gridHeader.style.setBorder(border);\n\t                gridHeader.style.setFont(headerFont);\n\t                gridHeader.style.setTextBrush(headerBrush);\n\t                var cellIndex = this.isGrouping ? (childLevels + 1) : 0;\n\t                if (rows[i].cells.length === 0) {\n\t                    for (var j = 0; j < gridHeader.cells.count; j++) {\n\t                        var cell = gridHeader.cells.getCell(j);\n\t                        cell.value = '';\n\t                    }\n\t                }\n\t                else {\n\t                    for (var j = 0; j < cellIndex; j++) {\n\t                        var cell = gridHeader.cells.getCell(j);\n\t                        cell.value = '';\n\t                    }\n\t                    for (var j = 0; j < rows[i].cells.length; j++) {\n\t                        var cell = gridHeader.cells.getCell(cellIndex);\n\t                        if (cell.value !== null) {\n\t                            cell.value = rows[i].cells[j].column.headerText;\n\t                            if (rows[i].cells[j].column.headerTextAlign !== undefined) {\n\t                                cell.style.stringFormat = this.getHorizontalAlignment(rows[i].cells[j].column.headerTextAlign);\n\t                            }\n\t                            if (rows[i].cells[j].rowSpan !== undefined) {\n\t                                cell.rowSpan = rows[i].cells[j].rowSpan;\n\t                                cell.style.stringFormat = this.getVerticalAlignment('bottom', cell.style.stringFormat, rows[i].cells[j].column.textAlign);\n\t                                for (var k = 1; k < rows[i].cells[j].rowSpan; k++) {\n\t                                    pdfGrid.headers.getHeader(i + k).cells.getCell(cellIndex).value = null;\n\t                                }\n\t                            }\n\t                            if (rows[i].cells[j].colSpan !== undefined) {\n\t                                cell.columnSpan = rows[i].cells[j].colSpan;\n\t                            }\n\t                            cellIndex += cell.columnSpan;\n\t                        }\n\t                        else {\n\t                            cell.value = '';\n\t                            cellIndex += cell.columnSpan;\n\t                            j = j - 1;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (pdfGrid.columns.count >= 6) {\n\t                pdfGrid.style.allowHorizontalOverflow = true;\n\t            }\n\t            return pdfGrid;\n\t        };\n\t        PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource, section) {\n\t            if (pdfExportProperties !== undefined) {\n\t                if (pdfExportProperties.theme !== undefined) {\n\t                    this.gridTheme = pdfExportProperties.theme;\n\t                }\n\t                if (pdfExportProperties.pageOrientation !== undefined || pdfExportProperties.pageSize !== undefined) {\n\t                    var pdfPageSettings = new ej2_pdf_export_6.PdfPageSettings();\n\t                    pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ? ej2_pdf_export_6.PdfPageOrientation.Landscape : ej2_pdf_export_6.PdfPageOrientation.Portrait;\n\t                    pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n\t                    section.setPageSettings(pdfPageSettings);\n\t                }\n\t                var clientSize = this.pdfDocument.pageSettings.size;\n\t                if (pdfExportProperties.header !== undefined) {\n\t                    var header = pdfExportProperties.header;\n\t                    var position = new ej2_pdf_export_5.PointF(0, header.fromTop);\n\t                    var size = new ej2_pdf_export_6.SizeF((clientSize.width - 80), (header.height * 0.75));\n\t                    var bounds = new ej2_pdf_export_4.RectangleF(position, size);\n\t                    this.pdfDocument.template.top = this.drawPageTemplate(new ej2_pdf_export_4.PdfPageTemplateElement(bounds), header);\n\t                }\n\t                if (pdfExportProperties.footer !== undefined) {\n\t                    var footer = pdfExportProperties.footer;\n\t                    var position = new ej2_pdf_export_5.PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n\t                    var size = new ej2_pdf_export_6.SizeF((clientSize.width - 80), (footer.height * 0.75));\n\t                    var bounds = new ej2_pdf_export_4.RectangleF(position, size);\n\t                    this.pdfDocument.template.bottom = this.drawPageTemplate(new ej2_pdf_export_4.PdfPageTemplateElement(bounds), footer);\n\t                }\n\t                if (pdfExportProperties.includeHiddenColumn !== undefined && !this.isGrouping) {\n\t                    this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n\t                }\n\t                if (pdfExportProperties.dataSource !== undefined) {\n\t                    if (!(pdfExportProperties.dataSource instanceof ej2_data_1.DataManager)) {\n\t                        dataSource = pdfExportProperties.dataSource;\n\t                    }\n\t                    this.customDataSource = true;\n\t                    this.currentViewData = false;\n\t                }\n\t                else if (pdfExportProperties.exportType !== undefined) {\n\t                    if (pdfExportProperties.exportType === 'currentview') {\n\t                        dataSource = this.parent.getCurrentViewRecords();\n\t                        this.currentViewData = true;\n\t                        this.customDataSource = false;\n\t                    }\n\t                    else {\n\t                        this.currentViewData = false;\n\t                        this.customDataSource = false;\n\t                    }\n\t                }\n\t                else {\n\t                    this.currentViewData = false;\n\t                    this.customDataSource = false;\n\t                }\n\t            }\n\t            else {\n\t                this.currentViewData = false;\n\t                this.customDataSource = false;\n\t            }\n\t            return { dataSource: dataSource, section: section };\n\t        };\n\t        PdfExport.prototype.drawPageTemplate = function (template, element) {\n\t            for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n\t                var content = _a[_i];\n\t                this.processContentValidation(content);\n\t                switch (content.type) {\n\t                    case 'text':\n\t                        if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n\t                            throw new Error('please enter the valid input value in text content...');\n\t                        }\n\t                        this.drawText(template, content);\n\t                        break;\n\t                    case 'pageNumber':\n\t                        this.drawPageNumber(template, content);\n\t                        break;\n\t                    case 'image':\n\t                        if (content.src === undefined || content.src === null || content.src === '') {\n\t                            throw new Error('please enter the valid base64 string in image content...');\n\t                        }\n\t                        this.drawImage(template, content);\n\t                        break;\n\t                    case 'line':\n\t                        this.drawLine(template, content);\n\t                        break;\n\t                    default:\n\t                        throw new Error('Please set valid content type...');\n\t                }\n\t            }\n\t            return template;\n\t        };\n\t        PdfExport.prototype.processContentValidation = function (content) {\n\t            if (content.type === '' || content.type === undefined || content.type === null) {\n\t                throw new Error('please set valid content type...');\n\t            }\n\t            else {\n\t                if (content.type === 'line') {\n\t                    if (content.points === '' || content.points === undefined || content.points === null) {\n\t                        throw new Error('please enter valid points in ' + content.type + ' content...');\n\t                    }\n\t                    else {\n\t                        if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n\t                            throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n\t                            throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n\t                            throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                        if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n\t                            throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (content.position === '' || content.position === undefined || content.position === null) {\n\t                        throw new Error('please enter valid position in ' + content.type + ' content...');\n\t                    }\n\t                    else {\n\t                        if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n\t                            throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n\t                        }\n\t                        if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n\t                            throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.drawText = function (pageTemplate, content) {\n\t            var font = this.getFont(content);\n\t            var brush = this.getBrushFromContent(content);\n\t            var pen = null;\n\t            if (content.style.textPenColor !== undefined) {\n\t                var penColor = this.hexToRgb(content.style.textPenColor);\n\t                pen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(penColor.r, penColor.g, penColor.b));\n\t            }\n\t            if (brush == null && pen == null) {\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0));\n\t            }\n\t            var value = content.value.toString();\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var format;\n\t            var result = this.setContentFormat(content, format);\n\t            if (result !== null && result.format !== undefined && result.size !== undefined) {\n\t                pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n\t            }\n\t            else {\n\t                pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n\t            }\n\t        };\n\t        PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n\t            var font = this.getFont(content);\n\t            var brush = null;\n\t            if (content.style.textBrushColor !== undefined) {\n\t                var brushColor = this.hexToRgb(content.style.textBrushColor);\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(brushColor.r, brushColor.g, brushColor.b));\n\t            }\n\t            else {\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0));\n\t            }\n\t            var pageNumber = new ej2_pdf_export_5.PdfPageNumberField(font, brush);\n\t            pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n\t            var compositeField;\n\t            var format;\n\t            if (content.format !== undefined) {\n\t                if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n\t                    var pageCount = new ej2_pdf_export_6.PdfPageCountField(font);\n\t                    if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n\t                        format = content.format.replace('$current', '0');\n\t                        format = format.replace('$total', '1');\n\t                    }\n\t                    else {\n\t                        format = content.format.replace('$current', '1');\n\t                        format = format.replace('$total', '0');\n\t                    }\n\t                    compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageNumber, pageCount);\n\t                }\n\t                else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n\t                    format = content.format.replace('$current', '0');\n\t                    compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageNumber);\n\t                }\n\t                else {\n\t                    var pageCount = new ej2_pdf_export_6.PdfPageCountField(font);\n\t                    format = content.format.replace('$total', '0');\n\t                    compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageCount);\n\t                }\n\t            }\n\t            else {\n\t                format = '{0}';\n\t                compositeField = new ej2_pdf_export_5.PdfCompositeField(font, brush, format, pageNumber);\n\t            }\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var result = this.setContentFormat(content, compositeField.stringFormat);\n\t            if (result !== null && result.format !== undefined && result.size !== undefined) {\n\t                compositeField.stringFormat = result.format;\n\t                compositeField.bounds = new ej2_pdf_export_4.RectangleF(x, y, result.size.width, result.size.height);\n\t            }\n\t            compositeField.draw(documentHeader.graphics, x, y);\n\t        };\n\t        PdfExport.prototype.drawImage = function (documentHeader, content) {\n\t            var x = content.position.x * 0.75;\n\t            var y = content.position.y * 0.75;\n\t            var width = (content.size !== undefined) ? (content.size.width * 0.75) : undefined;\n\t            var height = (content.size !== undefined) ? (content.size.height * 0.75) : undefined;\n\t            var image = new ej2_pdf_export_2.PdfBitmap(content.src);\n\t            if (width !== undefined) {\n\t                documentHeader.graphics.drawImage(image, x, y, width, height);\n\t            }\n\t            else {\n\t                documentHeader.graphics.drawImage(image, x, y);\n\t            }\n\t        };\n\t        PdfExport.prototype.drawLine = function (documentHeader, content) {\n\t            var x1 = content.points.x1 * 0.75;\n\t            var y1 = content.points.y1 * 0.75;\n\t            var x2 = content.points.x2 * 0.75;\n\t            var y2 = content.points.y2 * 0.75;\n\t            var pen = this.getPenFromContent(content);\n\t            if (content.style !== undefined && content.style !== null) {\n\t                if (content.style.penSize !== undefined && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n\t                    pen.width = content.style.penSize * 0.75;\n\t                }\n\t                pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n\t            }\n\t            documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n\t        };\n\t        PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex) {\n\t            for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n\t                var row = sRows_1[_i];\n\t                var startIndex = 0;\n\t                var leastCaptionSummaryIndex = -1;\n\t                var index = 0;\n\t                var isEmpty = true;\n\t                var value = [];\n\t                for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                    var cell = row.cells[index];\n\t                    if (!this.hideColumnInclude) {\n\t                        while (cell.visible === undefined) {\n\t                            if (captionRow !== undefined) {\n\t                                if (captionRow.cells.getCell(i).value !== undefined) {\n\t                                    value.push('');\n\t                                    value.push(captionRow.cells.getCell(i).value);\n\t                                    isEmpty = false;\n\t                                    i += 1;\n\t                                }\n\t                                else {\n\t                                    value.push('');\n\t                                }\n\t                            }\n\t                            else {\n\t                                value.push('');\n\t                            }\n\t                            i += 1;\n\t                            index = index + 1;\n\t                            cell = row.cells[index];\n\t                        }\n\t                        while (cell.visible !== undefined && !cell.visible) {\n\t                            index = index + 1;\n\t                            cell = row.cells[index];\n\t                        }\n\t                    }\n\t                    if (cell.isDataCell) {\n\t                        var templateFn = {};\n\t                        if (cell.column.footerTemplate !== undefined || cell.column.groupCaptionTemplate !== undefined || cell.column.groupFooterTemplate !== undefined) {\n\t                            var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell.column);\n\t                            templateFn = result.templateFunction;\n\t                            leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n\t                            var txt = (templateFn[ej2_base_1.getEnumValue(enum_1.CellType, cell.cellType)](row.data[cell.column.field]));\n\t                            value.push(txt[0].wholeText);\n\t                            isEmpty = false;\n\t                        }\n\t                        else {\n\t                            var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n\t                            if (result !== undefined) {\n\t                                value.push(result);\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        value.push('');\n\t                    }\n\t                    if (isEmpty && value[i] !== '' && value[i] !== undefined && value[i] !== null) {\n\t                        isEmpty = false;\n\t                    }\n\t                    index += 1;\n\t                }\n\t                if (!isEmpty) {\n\t                    if (!isCaption) {\n\t                        var gridRow = pdfGrid.rows.addRow();\n\t                        gridRow.style.setBorder(border);\n\t                        gridRow.style.setFont(font);\n\t                        gridRow.style.setTextBrush(brush);\n\t                        gridRow.style.setBackgroundBrush(backgroundBrush);\n\t                        for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                            gridRow.cells.getCell(i).value = value[i].toString();\n\t                        }\n\t                    }\n\t                    else {\n\t                        for (var i = 0; i < pdfGrid.columns.count; i++) {\n\t                            captionRow.cells.getCell(i).value = value[i].toString();\n\t                            if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1) {\n\t                                captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n\t                            }\n\t                            else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n\t                                captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, column) {\n\t            if (column.footerTemplate !== undefined) {\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.Summary)] = ej2_base_1.compile(column.footerTemplate);\n\t            }\n\t            else if (column.groupCaptionTemplate !== undefined) {\n\t                if (leastCaptionSummaryIndex === -1) {\n\t                    leastCaptionSummaryIndex = index;\n\t                }\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.CaptionSummary)] = ej2_base_1.compile(column.groupCaptionTemplate);\n\t            }\n\t            else {\n\t                templateFn[ej2_base_1.getEnumValue(enum_1.CellType, enum_1.CellType.GroupSummary)] = ej2_base_1.compile(column.groupFooterTemplate);\n\t            }\n\t            return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n\t        };\n\t        PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n\t            if (data.sum !== undefined) {\n\t                return data.sum;\n\t            }\n\t            else if (data.average !== undefined) {\n\t                return data.average;\n\t            }\n\t            else if (data.max !== undefined) {\n\t                return data.max;\n\t            }\n\t            else if (data.min !== undefined) {\n\t                return data.min;\n\t            }\n\t            else if (data.count !== undefined) {\n\t                return data.count;\n\t            }\n\t            else if (data.truecount !== undefined) {\n\t                return data.truecount;\n\t            }\n\t            else if (data.falsecount !== undefined) {\n\t                return data.falsecount;\n\t            }\n\t            else if (data.custom !== undefined) {\n\t                return data.custom;\n\t            }\n\t        };\n\t        PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid) {\n\t            var startIndex = this.isGrouping ? (pdfGrid.columns.count - gridColumns.length) : 0;\n\t            for (var i = 0; i < gridColumns.length; i++) {\n\t                if (gridColumns[i].textAlign !== undefined) {\n\t                    pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n\t                }\n\t                if (pdfGrid.style.allowHorizontalOverflow && gridColumns[i].width !== undefined) {\n\t                    pdfGrid.columns.getColumn(i + startIndex).width = (gridColumns[i].width * 0.75);\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n\t            switch (this.gridTheme) {\n\t                case 'bootstrap':\n\t                    row.style.setTextBrush(new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(51, 51, 51)));\n\t                    break;\n\t                case 'fabric':\n\t                    row.style.setTextBrush(new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(51, 51, 51)));\n\t                    break;\n\t                default:\n\t                    row.style.setTextBrush(new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(0, 0, 0)));\n\t            }\n\t            row.style.setBorder(border);\n\t            return row;\n\t        };\n\t        PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, groupIndex) {\n\t            var startIndex = this.isGrouping ? groupIndex : 0;\n\t            for (var _i = 0, _a = dataSource; _i < _a.length; _i++) {\n\t                var items = _a[_i];\n\t                var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n\t                for (var j = 0; j < columns.length; j++) {\n\t                    var value = items[columns[j].field];\n\t                    var args = {\n\t                        value: value,\n\t                        column: columns[j],\n\t                        style: undefined\n\t                    };\n\t                    gObj.trigger(events.pdfQueryCellInfo, args);\n\t                    var cell = gridRow.cells.getCell(j + startIndex);\n\t                    cell.value = this.exportValueFormatter.formatCellValue(args);\n\t                    if (args.style !== undefined) {\n\t                        this.processCellStyle(cell, args);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        PdfExport.prototype.processCellStyle = function (cell, args) {\n\t            if (args.style.backgroundColor !== undefined) {\n\t                var backColor = this.hexToRgb(args.style.backgroundColor);\n\t                cell.style.backgroundBrush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(backColor.r, backColor.g, backColor.b));\n\t            }\n\t            if (args.style.textAlignment !== undefined) {\n\t                cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n\t            }\n\t            if (args.style.verticalAlignment !== undefined) {\n\t                cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n\t            }\n\t            if (args.style.textBrushColor !== undefined) {\n\t                var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n\t                cell.style.textBrush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n\t            }\n\t            if (args.style.textPenColor !== undefined) {\n\t                cell.style.textPen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(args.style.textPenColor.r, args.style.textPenColor.g, args.style.textPenColor.b));\n\t            }\n\t            if (args.style.fontFamily !== undefined || args.style.fontSize !== undefined || args.style.bold !== undefined || args.style.italic !== undefined || args.style.underline !== undefined || args.style.strikeout !== undefined) {\n\t                cell.style.font = this.getFont(args);\n\t            }\n\t            if (args.style.border !== undefined) {\n\t                var border = new ej2_pdf_export_1.PdfBorders();\n\t                var borderWidth = args.style.border.width;\n\t                var width = (borderWidth !== undefined && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n\t                var color = new ej2_pdf_export_3.PdfColor(196, 196, 196);\n\t                if (args.style.border.color !== undefined) {\n\t                    var borderColor = this.hexToRgb(args.style.border.color);\n\t                    color = new ej2_pdf_export_3.PdfColor(borderColor.r, borderColor.g, borderColor.b);\n\t                }\n\t                var pen = new ej2_pdf_export_1.PdfPen(color, width);\n\t                if (args.style.border.dashStyle !== undefined) {\n\t                    pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n\t                }\n\t                border.all = pen;\n\t                cell.style.borders = border;\n\t            }\n\t        };\n\t        PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n\t            if (format === undefined) {\n\t                format = new ej2_pdf_export_3.PdfStringFormat();\n\t            }\n\t            switch (textAlign) {\n\t                case 'right':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Right;\n\t                    break;\n\t                case 'center':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Center;\n\t                    break;\n\t                case 'justify':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Justify;\n\t                    break;\n\t                case 'left':\n\t                    format.alignment = ej2_pdf_export_3.PdfTextAlignment.Left;\n\t                    break;\n\t            }\n\t            return format;\n\t        };\n\t        PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n\t            if (format === undefined) {\n\t                format = new ej2_pdf_export_3.PdfStringFormat();\n\t                format = this.getHorizontalAlignment(textAlign, format);\n\t            }\n\t            switch (verticalAlign) {\n\t                case 'bottom':\n\t                    format.lineAlignment = ej2_pdf_export_4.PdfVerticalAlignment.Bottom;\n\t                    break;\n\t                case 'middle':\n\t                    format.lineAlignment = ej2_pdf_export_4.PdfVerticalAlignment.Middle;\n\t                    break;\n\t                case 'top':\n\t                    format.lineAlignment = ej2_pdf_export_4.PdfVerticalAlignment.Top;\n\t                    break;\n\t            }\n\t            return format;\n\t        };\n\t        PdfExport.prototype.getFontFamily = function (fontFamily) {\n\t            switch (fontFamily) {\n\t                case 'TimesRoman':\n\t                    return 2;\n\t                case 'Courier':\n\t                    return 1;\n\t                case 'Symbol':\n\t                    return 3;\n\t                case 'ZapfDingbats':\n\t                    return 4;\n\t                default:\n\t                    return 0;\n\t            }\n\t        };\n\t        PdfExport.prototype.getFont = function (content) {\n\t            var fontSize = (content.style.fontSize !== undefined) ? (content.style.fontSize * 0.75) : 9.75;\n\t            var fontFamily = (content.style.fontFamily !== undefined) ? (this.getFontFamily(content.style.fontFamily)) : ej2_pdf_export_2.PdfFontFamily.Helvetica;\n\t            var fontStyle = ej2_pdf_export_2.PdfFontStyle.Regular;\n\t            if (content.style.bold !== undefined && content.style.bold) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Bold;\n\t            }\n\t            if (content.style.italic !== undefined && content.style.italic) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Italic;\n\t            }\n\t            if (content.style.underline !== undefined && content.style.underline) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Underline;\n\t            }\n\t            if (content.style.strikeout !== undefined && content.style.strikeout) {\n\t                fontStyle |= ej2_pdf_export_2.PdfFontStyle.Strikeout;\n\t            }\n\t            return new ej2_pdf_export_2.PdfStandardFont(fontFamily, fontSize, fontStyle);\n\t        };\n\t        PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n\t            switch (pageNumberType) {\n\t                case 'LowerLatin':\n\t                    return 2;\n\t                case 'LowerRoman':\n\t                    return 3;\n\t                case 'UpperLatin':\n\t                    return 4;\n\t                case 'UpperRoman':\n\t                    return 5;\n\t                default:\n\t                    return 1;\n\t            }\n\t        };\n\t        PdfExport.prototype.setContentFormat = function (content, format) {\n\t            if (content.size !== undefined) {\n\t                var width = content.size.width * 0.75;\n\t                var height = content.size.height * 0.75;\n\t                format = new ej2_pdf_export_3.PdfStringFormat(ej2_pdf_export_3.PdfTextAlignment.Left, ej2_pdf_export_4.PdfVerticalAlignment.Middle);\n\t                if (content.style.hAlign !== undefined) {\n\t                    switch (content.style.hAlign) {\n\t                        case 'right':\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Right;\n\t                            break;\n\t                        case 'center':\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Center;\n\t                            break;\n\t                        case 'justify':\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Justify;\n\t                            break;\n\t                        default:\n\t                            format.alignment = ej2_pdf_export_3.PdfTextAlignment.Left;\n\t                    }\n\t                }\n\t                if (content.style.vAlign !== undefined) {\n\t                    format = this.getVerticalAlignment(content.style.vAlign, format);\n\t                }\n\t                return { format: format, size: new ej2_pdf_export_6.SizeF(width, height) };\n\t            }\n\t            return null;\n\t        };\n\t        PdfExport.prototype.getPageSize = function (pageSize) {\n\t            switch (pageSize) {\n\t                case 'Letter':\n\t                    return new ej2_pdf_export_6.SizeF(612, 792);\n\t                case 'Note':\n\t                    return new ej2_pdf_export_6.SizeF(540, 720);\n\t                case 'Legal':\n\t                    return new ej2_pdf_export_6.SizeF(612, 1008);\n\t                case 'A0':\n\t                    return new ej2_pdf_export_6.SizeF(2380, 3368);\n\t                case 'A1':\n\t                    return new ej2_pdf_export_6.SizeF(1684, 2380);\n\t                case 'A2':\n\t                    return new ej2_pdf_export_6.SizeF(1190, 1684);\n\t                case 'A3':\n\t                    return new ej2_pdf_export_6.SizeF(842, 1190);\n\t                case 'A5':\n\t                    return new ej2_pdf_export_6.SizeF(421, 595);\n\t                case 'A6':\n\t                    return new ej2_pdf_export_6.SizeF(297, 421);\n\t                case 'A7':\n\t                    return new ej2_pdf_export_6.SizeF(210, 297);\n\t                case 'A8':\n\t                    return new ej2_pdf_export_6.SizeF(148, 210);\n\t                case 'A9':\n\t                    return new ej2_pdf_export_6.SizeF(105, 148);\n\t                case 'B0':\n\t                    return new ej2_pdf_export_6.SizeF(2836, 4008);\n\t                case 'B1':\n\t                    return new ej2_pdf_export_6.SizeF(2004, 2836);\n\t                case 'B2':\n\t                    return new ej2_pdf_export_6.SizeF(1418, 2004);\n\t                case 'B3':\n\t                    return new ej2_pdf_export_6.SizeF(1002, 1418);\n\t                case 'B4':\n\t                    return new ej2_pdf_export_6.SizeF(709, 1002);\n\t                case 'B5':\n\t                    return new ej2_pdf_export_6.SizeF(501, 709);\n\t                case 'ArchA':\n\t                    return new ej2_pdf_export_6.SizeF(648, 864);\n\t                case 'ArchB':\n\t                    return new ej2_pdf_export_6.SizeF(864, 1296);\n\t                case 'ArchC':\n\t                    return new ej2_pdf_export_6.SizeF(1296, 1728);\n\t                case 'ArchD':\n\t                    return new ej2_pdf_export_6.SizeF(1728, 2592);\n\t                case 'ArchE':\n\t                    return new ej2_pdf_export_6.SizeF(2592, 3456);\n\t                case 'Flsa':\n\t                    return new ej2_pdf_export_6.SizeF(612, 936);\n\t                case 'HalfLetter':\n\t                    return new ej2_pdf_export_6.SizeF(396, 612);\n\t                case 'Letter11x17':\n\t                    return new ej2_pdf_export_6.SizeF(792, 1224);\n\t                case 'Ledger':\n\t                    return new ej2_pdf_export_6.SizeF(1224, 792);\n\t                default:\n\t                    return new ej2_pdf_export_6.SizeF(595, 842);\n\t            }\n\t        };\n\t        PdfExport.prototype.getDashStyle = function (dashStyle) {\n\t            switch (dashStyle) {\n\t                case 'Dash':\n\t                    return 1;\n\t                case 'Dot':\n\t                    return 2;\n\t                case 'DashDot':\n\t                    return 3;\n\t                case 'DashDotDot':\n\t                    return 4;\n\t                default:\n\t                    return 0;\n\t            }\n\t        };\n\t        PdfExport.prototype.getPenFromContent = function (content) {\n\t            var pen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(0, 0, 0));\n\t            if (content.style !== undefined && content.style !== null && content.style.penColor !== undefined) {\n\t                var penColor = this.hexToRgb(content.style.penColor);\n\t                pen = new ej2_pdf_export_1.PdfPen(new ej2_pdf_export_3.PdfColor(penColor.r, penColor.g, penColor.b));\n\t            }\n\t            return pen;\n\t        };\n\t        PdfExport.prototype.getBrushFromContent = function (content) {\n\t            var brush = null;\n\t            if (content.style.textBrushColor !== undefined) {\n\t                var brushColor = this.hexToRgb(content.style.textBrushColor);\n\t                brush = new ej2_pdf_export_3.PdfSolidBrush(new ej2_pdf_export_3.PdfColor(brushColor.r, brushColor.g, brushColor.b));\n\t            }\n\t            return brush;\n\t        };\n\t        PdfExport.prototype.hexToRgb = function (hex) {\n\t            if (hex === null || hex === '' || hex.length !== 7) {\n\t                throw new Error('please set valid hex value for color...');\n\t            }\n\t            hex = hex.substring(1);\n\t            var bigint = parseInt(hex, 16);\n\t            var r = (bigint >> 16) & 255;\n\t            var g = (bigint >> 8) & 255;\n\t            var b = bigint & 255;\n\t            return { r: r, g: g, b: b };\n\t        };\n\t        PdfExport.prototype.destroy = function () {\n\t        };\n\t        return PdfExport;\n\t    }());\n\t    exports.PdfExport = PdfExport;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_88__;\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, column_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(column_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(13), __webpack_require__(19), __webpack_require__(14), __webpack_require__(23), __webpack_require__(24), __webpack_require__(56), __webpack_require__(26), __webpack_require__(12), __webpack_require__(56), __webpack_require__(27), __webpack_require__(28), __webpack_require__(75), __webpack_require__(76), __webpack_require__(74), __webpack_require__(73), __webpack_require__(77), __webpack_require__(79), __webpack_require__(78), __webpack_require__(71)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, header_renderer_1, content_renderer_1, row_renderer_1, cell_renderer_1, header_cell_renderer_1, filter_cell_renderer_1, stacked_cell_renderer_1, render_1, filter_cell_renderer_2, indent_cell_renderer_1, caption_cell_renderer_1, batch_edit_renderer_1, dialog_edit_renderer_1, inline_edit_renderer_1, edit_renderer_1, boolean_edit_cell_1, default_edit_cell_1, dropdown_edit_cell_1, numeric_edit_cell_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(header_renderer_1);\n\t    __export(content_renderer_1);\n\t    __export(row_renderer_1);\n\t    __export(cell_renderer_1);\n\t    __export(header_cell_renderer_1);\n\t    __export(filter_cell_renderer_1);\n\t    __export(stacked_cell_renderer_1);\n\t    __export(render_1);\n\t    __export(filter_cell_renderer_2);\n\t    __export(indent_cell_renderer_1);\n\t    __export(caption_cell_renderer_1);\n\t    __export(batch_edit_renderer_1);\n\t    __export(dialog_edit_renderer_1);\n\t    __export(inline_edit_renderer_1);\n\t    __export(edit_renderer_1);\n\t    __export(boolean_edit_cell_1);\n\t    __export(default_edit_cell_1);\n\t    __export(dropdown_edit_cell_1);\n\t    __export(numeric_edit_cell_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(33), __webpack_require__(4), __webpack_require__(20), __webpack_require__(21)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, cell_render_factory_1, service_locator_1, row_model_generator_1, group_model_generator_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(cell_render_factory_1);\n\t    __export(service_locator_1);\n\t    __export(row_model_generator_1);\n\t    __export(group_model_generator_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(49), __webpack_require__(54), __webpack_require__(50), __webpack_require__(51)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, pager_1, external_message_1, numeric_container_1, pager_message_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(pager_1);\n\t    __export(external_message_1);\n\t    __export(numeric_container_1);\n\t    __export(pager_message_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAxNTE3YWUwMzA4NWE0MWFjNzRlZCIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvY29tbW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2Jhc2UvZ3JpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9zZXJ2aWNlLWxvY2F0b3IuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYmFzZS91dGlsLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL2NvbHVtbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYmFzZS9jb25zdGFudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvaGVhZGVyLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3Jvdy1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9iYXNlL2VudW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL2NlbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL3Jvdy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2RhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvY29udGVudC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL2dyb3VwLW1vZGVsLWdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL2FyaWEtc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9zdGFja2VkLWNlbGwtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvaW5kZW50LWNlbGwtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvY2FwdGlvbi1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2V4cGFuZC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2hlYWRlci1pbmRlbnQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZGV0YWlsLWhlYWRlci1pbmRlbnQtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZGV0YWlsLWV4cGFuZC1jZWxsLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvcmVuZGVyZXItZmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy93aWR0aC1jb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL21vZGVscy9wYWdlLXNldHRpbmdzLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvc2VsZWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvc2VhcmNoLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvc2hvdy1oaWRlLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvc2Nyb2xsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvcHJpbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvbW9kZWxzL2FnZ3JlZ2F0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbHVtbi1jaG9vc2VyLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2RldGFpbC1yb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9zb3J0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvcGFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXIvcGFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL251bWVyaWMtY29udGFpbmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9wYWdlci1tZXNzYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlci9wYWdlci1kcm9wZG93bi5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL2V4dGVybmFsLW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yZXNpemUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9yZW9yZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvcm93LXJlb3JkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9ncm91cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3Rvb2xiYXIuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9hZ2dyZWdhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZm9vdGVyLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3N1bW1hcnktY2VsbC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3ZpcnR1YWwtc2Nyb2xsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL3ZpcnR1YWwtY29udGVudC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9zZXJ2aWNlcy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMvdmlydHVhbC1yb3ctbW9kZWwtZ2VuZXJhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9udW1lcmljLWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIvZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9pbmxpbmUtZWRpdC1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9iYXRjaC1lZGl0LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2RpYWxvZy1lZGl0LXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2Jvb2xlYW4tZWRpdC1jZWxsLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL3JlbmRlcmVyL2Ryb3Bkb3duLWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9yZW5kZXJlci9kZWZhdWx0LWVkaXQtY2VsbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL2lubGluZS1lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvbm9ybWFsLWVkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9iYXRjaC1lZGl0LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZGlhbG9nLWVkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvYWN0aW9ucy9leGNlbC1leHBvcnQuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2FjdGlvbnMvZXhwb3J0LWhlbHBlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9hY3Rpb25zL3BkZi1leHBvcnQuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2RlbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvc2VydmljZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VyL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO0FDVkE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7OztpRUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ1JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUNYRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O0FDVkQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBOEI7QUFDOUI7QUFDQTtBQUNBLCtCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQTZELGdCQUFnQjtBQUM3RTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNi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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUM5akREO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUNy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O0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7QUN2VEQsZ0Q7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQ2hERDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDakREO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZ0UsOEJBQThCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBaUMsMkNBQTJDO0FBQzVFO0FBQ0E7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QSxrQkFBaUI7QUFDakIsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUNwREQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLG9DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RCxhQUFhO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQzFKRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLHlCQUF5QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsc0JBQXNCO0FBQ2pELGdDQUErQixXQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQ3pHRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHdCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0MsYUFBYTtBQUNqRDtBQUNBLHVHQUFzRztBQUN0RztBQUNBO0FBQ0E7QUFDQSw0R0FBMkc7QUFDM0c7QUFDQTtBQUNBO0FBQ0EsOEdBQTZHO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7Ozs7OztpRUMzRkQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBeUMsK0VBQStFO0FBQ3hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELGdCQUFnQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXNDLG1CQUFtQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBd0I7QUFDeEIsY0FBYTtBQUNiO0FBQ0E7QUFDQSx5QkFBd0I7QUFDeEIsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXdCO0FBQ3hCLGNBQWE7QUFDYjtBQUNBO0FBQ0EseUJBQXdCO0FBQ3hCLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDM1ZEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLHlCQUF5QjtBQUNwRDtBQUNBO0FBQ0EsNkJBQTRCO0FBQzVCLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RDtBQUN2RCxjQUFhO0FBQ2I7QUFDQTtBQUNBLHVFQUFzRSxrQ0FBa0M7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQix3QkFBd0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUM3T0Q7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsc0NBQXNDLG9DQUFvQyxFQUFFO0FBQ25JLG9FQUFtRSxzREFBc0Q7QUFDekgsdUVBQXNFLHlEQUF5RDtBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsaUJBQWlCO0FBQzVDLHVDQUFzQyxjQUFjO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQ2xERDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXFFLDJCQUEyQjtBQUNoRyxnRUFBK0QsK0JBQStCO0FBQzlGLG1FQUFrRSwrQkFBK0I7QUFDakcsNERBQTJELFNBQVMsOEJBQThCLEVBQUU7QUFDcEcsZ0VBQStELDBGQUEwRjtBQUN6SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0Esa0RBQWlELHlCQUF5QjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUF5RCwwQ0FBMEM7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUNqREQsaUQ7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE0RCwwQ0FBMEMseUNBQXlDLEVBQUU7QUFDako7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQ3BDRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUFzRSwyQkFBMkI7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0ZBQStFLFNBQVM7QUFDeEYsb0RBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLGdEQUErQztBQUMvQztBQUNBLDREQUEyRCxnQkFBZ0I7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFnRTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QyxTQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQWtFLGdCQUFnQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTRELGdCQUFnQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBeUQsK0NBQStDO0FBQ3hHO0FBQ0E7QUFDQSwrQ0FBOEMsU0FBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWlELHVCQUF1QjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSwrQ0FBOEMsU0FBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFtQyx3QkFBd0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFpRCxxQkFBcUI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUF5RCxxQkFBcUIsRUFBRTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUMsa0JBQWtCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQStDLHNFQUFzRTtBQUNySDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUF5RCwyQkFBMkI7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUMxZUQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTRELCtCQUErQjtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlDQUFnQztBQUNoQyxzQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSw2QkFBNEI7QUFDNUIsa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQzFHRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBMkQsZ0JBQWdCLEVBQUU7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLDZCQUE2QjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsNkJBQTZCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUE4RCx5RUFBeUUsRUFBRTtBQUN6STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQThELGtCQUFrQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFvRSxnQkFBZ0I7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFpRSxnQkFBZ0I7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUFzRCxRQUFRO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0EsNkRBQTRELG9DQUFvQztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnSEFBK0c7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUEyRCw0QkFBNEI7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0Q7QUFDdEQ7QUFDQTtBQUNBLDhDQUE2QyxxQkFBcUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXdFO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW1ELHdCQUF3QjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQWtDO0FBQ2xDLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsbUNBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFxRTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxvQ0FBb0M7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBZ0QsU0FBUztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsb0JBQW9CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsb0JBQW9CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0MsUUFBUSxpQkFBaUIsVUFBVSxpQkFBaUI7QUFDeEYsc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDaGNEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUNyQ0QsaUQ7Ozs7OztpRUNBQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsb0JBQW9CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWdDLG1GQUFtRjtBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQyxvQkFBb0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUMxRkQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxnQ0FBZ0M7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF3QjtBQUN4QixjQUFhO0FBQ2IsMERBQXlELDREQUE0RDtBQUNySCw0REFBMkQsNkNBQTZDLHNCQUFzQixFQUFFO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZ0UsbUNBQW1DO0FBQ25HO0FBQ0E7QUFDQSxnRUFBK0QsNEJBQTRCO0FBQzNGO0FBQ0E7QUFDQSxnREFBK0MsZ0JBQWdCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBb0Q7QUFDcEQsa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUNqRUQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUF5RCw0REFBNEQ7QUFDckg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQzVCRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUEyRCw4Q0FBOEM7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0dBQStGLGlCQUFpQjtBQUNoSDtBQUNBO0FBQ0EsdUNBQXNDO0FBQ3RDLHNCQUFxQjtBQUNyQixzQkFBcUIsZ0RBQWdELHFFQUFxRSxFQUFFO0FBQzVJLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFxRDtBQUNyRDtBQUNBLHlEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCwyREFBMkQ7QUFDbEgsMERBQXlELDREQUE0RDtBQUNySCw0REFBMkQsK0JBQStCLHFCQUFxQixFQUFFO0FBQ2pIO0FBQ0E7QUFDQSw0QkFBMkIsaUJBQWlCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQStELGlDQUFpQyx5QkFBeUIsY0FBYyxFQUFFO0FBQ3pJLGdFQUErRCwyQkFBMkI7QUFDMUY7QUFDQTtBQUNBO0FBQ0Esa0VBQWlFLGtDQUFrQyw4RUFBOEUsR0FBRyxFQUFFO0FBQ3RMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUM5RkQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDbENEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUF5QiwyQkFBMkI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQWtFLGtDQUFrQyxFQUFFO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQzVDRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O0FDbENEO0FBQ0E7QUFDQSxXQUFVLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDbkYsMEJBQXlCLHVEQUF1RDtBQUNoRjtBQUNBO0FBQ0Esd0JBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDeENEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQix3QkFBd0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQ7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFnRCw4QkFBOEIsRUFBRSxzQkFBc0Isd0JBQXdCLEVBQUU7QUFDaEk7QUFDQTtBQUNBLG9DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUErQyxnQkFBZ0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFrQyx5Q0FBeUM7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFtRjtBQUNuRjtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQy9PRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLGlCQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFpRDtBQUNqRCx5REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMEMsbUJBQW1CO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsb0JBQW9CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXVDLFNBQVM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXFELFNBQVM7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsOENBQThDO0FBQ3pFLGlFQUFnRSw0QkFBNEI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFxQyxjQUFjO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBcUMsUUFBUTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkI7QUFDM0IsZ0RBQStDLGdCQUFnQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUF5RCxnREFBZ0Q7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLG9CQUFvQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0ZBQStFO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUNqZ0JEO0FBQ0E7QUFDQSxXQUFVLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDbkYsMEJBQXlCLHVEQUF1RDtBQUNoRjtBQUNBO0FBQ0Esd0JBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDeENEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQWtFLGdHQUFnRztBQUNsSztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQixrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBcUI7QUFDckIsa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCwwQkFBMEI7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBOEUsZ0JBQWdCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTRELGdCQUFnQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixVQUFVO0FBQ3JDO0FBQ0E7QUFDQSxnRUFBK0QsU0FBUztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBZ0Msd0NBQXdDO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQTZFLG9CQUFvQjtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxxQkFBcUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0EsaURBQWdELGdCQUFnQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0dBQStGLGdCQUFnQjtBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0MscUNBQXFDO0FBQ3pFO0FBQ0E7QUFDQSxxQ0FBb0MsMENBQTBDO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQix5QkFBeUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQix5QkFBeUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QyxnQkFBZ0I7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXVDLDhCQUE4QjtBQUNyRTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQSx1Q0FBc0MsdUNBQXVDO0FBQzdFO0FBQ0E7QUFDQTtBQUNBLG1DQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QyxpQ0FBaUM7QUFDL0UsZ0RBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFnQyx3Q0FBd0M7QUFDeEU7QUFDQSw4QkFBNkIsMEJBQTBCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0Esc0NBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQSxzQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFpQyxjQUFjO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWdDLHNCQUFzQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFpQyxjQUFjO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUEyRCw0QkFBNEI7QUFDdkY7QUFDQTtBQUNBO0FBQ0EsNkJBQTRCO0FBQzVCO0FBQ0E7QUFDQSxxQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUMsaUNBQWlDO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O0FDMXBCRCxpRDs7Ozs7O2lFQ0FBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixtQkFBbUI7QUFDOUMsMkNBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLG9CQUFvQjtBQUMvRDtBQUNBLGdDQUErQixzQkFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixpQkFBaUI7QUFDNUM7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXVDLDJCQUEyQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLGVBQWU7QUFDMUM7QUFDQTtBQUNBLDBDQUF5QyxrQkFBa0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLG9CQUFvQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLDJEQUEwRCxTQUFTO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQThDLFNBQVM7QUFDdkQ7QUFDQSxrRkFBaUYsV0FBVztBQUM1RjtBQUNBO0FBQ0E7QUFDQSxnRUFBK0Q7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsNERBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQiwyQkFBMkI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLG1CQUFtQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQix3QkFBd0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFrRSw2QkFBNkI7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFrQztBQUNsQztBQUNBO0FBQ0EsbUNBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxtQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNEM7QUFDNUM7QUFDQTtBQUNBLDZDQUE0QztBQUM1QztBQUNBO0FBQ0EsNkNBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDeE9EO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFnRCxzR0FBc0c7QUFDdEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQixrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE0QjtBQUM1QjtBQUNBLDZCQUE0QjtBQUM1QjtBQUNBLDZCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE0QjtBQUM1QjtBQUNBO0FBQ0EsNkJBQTRCO0FBQzVCO0FBQ0E7QUFDQSw2QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQsMEJBQTBCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0IsdUJBQXVCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLGlCQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUMsNEJBQTRCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUMsZUFBZTtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUMsMEJBQTBCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUErQyw4QkFBOEI7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0Esb0RBQW1ELGdCQUFnQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixFQUFFO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxxQkFBcUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLDJCQUEyQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF1QywyQkFBMkI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBdUMsMkJBQTJCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsd0JBQXdCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxnQkFBZ0I7QUFDN0Q7QUFDQTtBQUNBLGdDQUErQixvQkFBb0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQzc0QkQsaUQ7Ozs7OztpRUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQSxFQUFDOzs7Ozs7O2lFQ1BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDekJEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDVkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQyIsImZpbGUiOiJlajItZ3JpZHMudW1kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIiwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItaW5wdXRzXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWV4Y2VsLWV4cG9ydFwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIpKSA6IGZhY3Rvcnkocm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWJ1dHRvbnNcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLW5hdmlnYXRpb25zXCJdLCByb290W1wiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiXSk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzVfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzQ0X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNTNfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82Ml9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzcyX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfODVfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84OF9fKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDE1MTdhZTAzMDg1YTQxYWM3NGVkIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9ncmlkL2luZGV4XCIsIFwiLi9wYWdlci9pbmRleFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGluZGV4XzEsIGluZGV4XzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGluZGV4XzEpO1xuICAgIF9fZXhwb3J0KGluZGV4XzIpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL2NvbW1vblwiLCBcIi4vYWN0aW9uc1wiLCBcIi4vbW9kZWxzXCIsIFwiLi9yZW5kZXJlclwiLCBcIi4vc2VydmljZXNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBjb21tb25fMSwgYWN0aW9uc18xLCBtb2RlbHNfMSwgcmVuZGVyZXJfMSwgc2VydmljZXNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoY29tbW9uXzEpO1xuICAgIF9fZXhwb3J0KGFjdGlvbnNfMSk7XG4gICAgX19leHBvcnQobW9kZWxzXzEpO1xuICAgIF9fZXhwb3J0KHJlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KHNlcnZpY2VzXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vYmFzZS9ncmlkXCIsIFwiLi9iYXNlL2VudW1cIiwgXCIuL2Jhc2UvdXRpbFwiLCBcIi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGdyaWRfMSwgZW51bV8xLCB1dGlsXzEsIGNvbnN0YW50XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGdyaWRfMSk7XG4gICAgX19leHBvcnQoZW51bV8xKTtcbiAgICBfX2V4cG9ydCh1dGlsXzEpO1xuICAgIF9fZXhwb3J0KGNvbnN0YW50XzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2NvbW1vbi5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiLi91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL3JlbmRlclwiLCBcIi4vZW51bVwiLCBcIi4uL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnlcIiwgXCIuLi9zZXJ2aWNlcy9zZXJ2aWNlLWxvY2F0b3JcIiwgXCIuLi9zZXJ2aWNlcy92YWx1ZS1mb3JtYXR0ZXJcIiwgXCIuLi9zZXJ2aWNlcy9yZW5kZXJlci1mYWN0b3J5XCIsIFwiLi4vc2VydmljZXMvd2lkdGgtY29udHJvbGxlclwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiLCBcIi4uL21vZGVscy9wYWdlLXNldHRpbmdzXCIsIFwiLi4vYWN0aW9ucy9zZWxlY3Rpb25cIiwgXCIuLi9hY3Rpb25zL3NlYXJjaFwiLCBcIi4uL2FjdGlvbnMvc2hvdy1oaWRlXCIsIFwiLi4vYWN0aW9ucy9zY3JvbGxcIiwgXCIuLi9hY3Rpb25zL3ByaW50XCIsIFwiLi4vbW9kZWxzL2FnZ3JlZ2F0ZVwiLCBcIi4uL2FjdGlvbnMvY29sdW1uLWNob29zZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfYmFzZV80LCBlajJfYmFzZV81LCBlajJfcG9wdXBzXzEsIHV0aWxfMSwgZXZlbnRzLCByZW5kZXJfMSwgZW51bV8xLCBjZWxsX3JlbmRlcl9mYWN0b3J5XzEsIHNlcnZpY2VfbG9jYXRvcl8xLCB2YWx1ZV9mb3JtYXR0ZXJfMSwgcmVuZGVyZXJfZmFjdG9yeV8xLCB3aWR0aF9jb250cm9sbGVyXzEsIGFyaWFfc2VydmljZV8xLCBwYWdlX3NldHRpbmdzXzEsIHNlbGVjdGlvbl8xLCBzZWFyY2hfMSwgc2hvd19oaWRlXzEsIHNjcm9sbF8xLCBwcmludF8xLCBhZ2dyZWdhdGVfMSwgY29sdW1uX2Nob29zZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU29ydERlc2NyaXB0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU29ydERlc2NyaXB0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFNvcnREZXNjcmlwdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTb3J0RGVzY3JpcHRvcjtcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBTb3J0RGVzY3JpcHRvci5wcm90b3R5cGUsIFwiZmllbGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgU29ydERlc2NyaXB0b3IucHJvdG90eXBlLCBcImRpcmVjdGlvblwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuU29ydERlc2NyaXB0b3IgPSBTb3J0RGVzY3JpcHRvcjtcbiAgICB2YXIgU29ydFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFNvcnRTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU29ydFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTb3J0U2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db2xsZWN0aW9uKFtdLCBTb3J0RGVzY3JpcHRvcilcbiAgICBdLCBTb3J0U2V0dGluZ3MucHJvdG90eXBlLCBcImNvbHVtbnNcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlNvcnRTZXR0aW5ncyA9IFNvcnRTZXR0aW5ncztcbiAgICB2YXIgUHJlZGljYXRlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFByZWRpY2F0ZSwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUHJlZGljYXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcmVkaWNhdGU7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJmaWVsZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcIm9wZXJhdG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFByZWRpY2F0ZS5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJtYXRjaENhc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJwcmVkaWNhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh7fSlcbiAgICBdLCBQcmVkaWNhdGUucHJvdG90eXBlLCBcImFjdHVhbEZpbHRlclZhbHVlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoe30pXG4gICAgXSwgUHJlZGljYXRlLnByb3RvdHlwZSwgXCJhY3R1YWxPcGVyYXRvclwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuUHJlZGljYXRlID0gUHJlZGljYXRlO1xuICAgIHZhciBGaWx0ZXJTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGaWx0ZXJTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRmlsdGVyU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEZpbHRlclNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29sbGVjdGlvbihbXSwgUHJlZGljYXRlKVxuICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2ZpbHRlcmJhcicpXG4gICAgXSwgRmlsdGVyU2V0dGluZ3MucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgRmlsdGVyU2V0dGluZ3MucHJvdG90eXBlLCBcIm1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEZpbHRlclNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93RmlsdGVyQmFyU3RhdHVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMTUwMClcbiAgICBdLCBGaWx0ZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwiaW1tZWRpYXRlTW9kZURlbGF5XCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5GaWx0ZXJTZXR0aW5ncyA9IEZpbHRlclNldHRpbmdzO1xuICAgIHZhciBTZWxlY3Rpb25TZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTZWxlY3Rpb25TZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU2VsZWN0aW9uU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNlbGVjdGlvblNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ3JvdycpXG4gICAgXSwgU2VsZWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcIm1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnZmxvdycpXG4gICAgXSwgU2VsZWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImNlbGxTZWxlY3Rpb25Nb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ3NpbmdsZScpXG4gICAgXSwgU2VsZWN0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlNlbGVjdGlvblNldHRpbmdzID0gU2VsZWN0aW9uU2V0dGluZ3M7XG4gICAgdmFyIFNlYXJjaFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFNlYXJjaFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTZWFyY2hTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU2VhcmNoU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShbXSlcbiAgICBdLCBTZWFyY2hTZXR0aW5ncy5wcm90b3R5cGUsIFwiZmllbGRzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJycpXG4gICAgXSwgU2VhcmNoU2V0dGluZ3MucHJvdG90eXBlLCBcImtleVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCdjb250YWlucycpXG4gICAgXSwgU2VhcmNoU2V0dGluZ3MucHJvdG90eXBlLCBcIm9wZXJhdG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBTZWFyY2hTZXR0aW5ncy5wcm90b3R5cGUsIFwiaWdub3JlQ2FzZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuU2VhcmNoU2V0dGluZ3MgPSBTZWFyY2hTZXR0aW5ncztcbiAgICB2YXIgUm93RHJvcFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFJvd0Ryb3BTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUm93RHJvcFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSb3dEcm9wU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUm93RHJvcFNldHRpbmdzLnByb3RvdHlwZSwgXCJ0YXJnZXRJRFwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuUm93RHJvcFNldHRpbmdzID0gUm93RHJvcFNldHRpbmdzO1xuICAgIHZhciBUZXh0V3JhcFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRleHRXcmFwU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFRleHRXcmFwU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFRleHRXcmFwU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnYm90aCcpXG4gICAgXSwgVGV4dFdyYXBTZXR0aW5ncy5wcm90b3R5cGUsIFwid3JhcE1vZGVcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlRleHRXcmFwU2V0dGluZ3MgPSBUZXh0V3JhcFNldHRpbmdzO1xuICAgIHZhciBHcm91cFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyb3VwU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEdyb3VwU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dEcm9wQXJlYVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyb3VwU2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dUb2dnbGVCdXR0b25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaG93R3JvdXBlZENvbHVtblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KHRydWUpXG4gICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd1VuZ3JvdXBCdXR0b25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcm91cFNldHRpbmdzLnByb3RvdHlwZSwgXCJkaXNhYmxlUGFnZVdpc2VBZ2dyZWdhdGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoW10pXG4gICAgXSwgR3JvdXBTZXR0aW5ncy5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuR3JvdXBTZXR0aW5ncyA9IEdyb3VwU2V0dGluZ3M7XG4gICAgdmFyIEVkaXRTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhFZGl0U2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEVkaXRTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRWRpdFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJhbGxvd0FkZGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwiYWxsb3dFZGl0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJhbGxvd0RlbGV0aW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ25vcm1hbCcpXG4gICAgXSwgRWRpdFNldHRpbmdzLnByb3RvdHlwZSwgXCJtb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcImFsbG93RWRpdE9uRGJsQ2xpY2tcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEVkaXRTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hvd0NvbmZpcm1EaWFsb2dcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBFZGl0U2V0dGluZ3MucHJvdG90eXBlLCBcInNob3dEZWxldGVDb25maXJtRGlhbG9nXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5FZGl0U2V0dGluZ3MgPSBFZGl0U2V0dGluZ3M7XG4gICAgdmFyIEdyaWQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JpZCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JpZChvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuaXNJbml0aWFsID0gdHJ1ZTtcbiAgICAgICAgICAgIF90aGlzLnNvcnRlZENvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmluVmlld0luZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLm1lZGlhQ29sID0gW107XG4gICAgICAgICAgICBfdGhpcy5pc01lZGlhUXVlcnkgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLmlzSW5pdGlhbExvYWQgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLmZpbHRlck9wZXJhdG9ycyA9IHtcbiAgICAgICAgICAgICAgICBjb250YWluczogJ2NvbnRhaW5zJywgZW5kc1dpdGg6ICdlbmRzd2l0aCcsIGVxdWFsOiAnZXF1YWwnLCBncmVhdGVyVGhhbjogJ2dyZWF0ZXJ0aGFuJywgZ3JlYXRlclRoYW5PckVxdWFsOiAnZ3JlYXRlcnRoYW5vcmVxdWFsJyxcbiAgICAgICAgICAgICAgICBsZXNzVGhhbjogJ2xlc3N0aGFuJywgbGVzc1RoYW5PckVxdWFsOiAnbGVzc3RoYW5vcmVxdWFsJywgbm90RXF1YWw6ICdub3RlcXVhbCcsIHN0YXJ0c1dpdGg6ICdzdGFydHN3aXRoJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLmRlZmF1bHRMb2NhbGUgPSB7XG4gICAgICAgICAgICAgICAgRW1wdHlSZWNvcmQ6ICdObyByZWNvcmRzIHRvIGRpc3BsYXknLFxuICAgICAgICAgICAgICAgIFRydWU6ICd0cnVlJyxcbiAgICAgICAgICAgICAgICBGYWxzZTogJ2ZhbHNlJyxcbiAgICAgICAgICAgICAgICBJbnZhbGlkRmlsdGVyTWVzc2FnZTogJ0ludmFsaWQgRmlsdGVyIERhdGEnLFxuICAgICAgICAgICAgICAgIEdyb3VwRHJvcEFyZWE6ICdEcmFnIGEgY29sdW1uIGhlYWRlciBoZXJlIHRvIGdyb3VwIGl0cyBjb2x1bW4nLFxuICAgICAgICAgICAgICAgIFVuR3JvdXA6ICdDbGljayBoZXJlIHRvIHVuZ3JvdXAnLFxuICAgICAgICAgICAgICAgIEdyb3VwRGlzYWJsZTogJ0dyb3VwaW5nIGlzIGRpc2FibGVkIGZvciB0aGlzIGNvbHVtbicsXG4gICAgICAgICAgICAgICAgRmlsdGVyYmFyVGl0bGU6ICdcXCdzIGZpbHRlciBiYXIgY2VsbCcsXG4gICAgICAgICAgICAgICAgRW1wdHlEYXRhU291cmNlRXJyb3I6ICdEYXRhU291cmNlIG11c3Qgbm90IGJlIGVtcHR5IGF0IGluaXRpYWwgbG9hZCBzaW5jZSBjb2x1bW5zIGFyZSBnZW5lcmF0ZWQgZnJvbSBkYXRhU291cmNlIGluIEF1dG9HZW5lcmF0ZSBDb2x1bW4gR3JpZCcsXG4gICAgICAgICAgICAgICAgQWRkOiAnQWRkJyxcbiAgICAgICAgICAgICAgICBFZGl0OiAnRWRpdCcsXG4gICAgICAgICAgICAgICAgQ2FuY2VsOiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICBVcGRhdGU6ICdVcGRhdGUnLFxuICAgICAgICAgICAgICAgIERlbGV0ZTogJ0RlbGV0ZScsXG4gICAgICAgICAgICAgICAgUHJpbnQ6ICdQcmludCcsXG4gICAgICAgICAgICAgICAgUGRmZXhwb3J0OiAnUERGIEV4cG9ydCcsXG4gICAgICAgICAgICAgICAgRXhjZWxleHBvcnQ6ICdFeGNlbCBFeHBvcnQnLFxuICAgICAgICAgICAgICAgIFdvcmRleHBvcnQ6ICdXb3JkIEV4cG9ydCcsXG4gICAgICAgICAgICAgICAgQ3N2ZXhwb3J0OiAnQ1NWIEV4cG9ydCcsXG4gICAgICAgICAgICAgICAgU2VhcmNoOiAnU2VhcmNoJyxcbiAgICAgICAgICAgICAgICBJdGVtOiAnaXRlbScsXG4gICAgICAgICAgICAgICAgSXRlbXM6ICdpdGVtcycsXG4gICAgICAgICAgICAgICAgRWRpdE9wZXJhdGlvbkFsZXJ0OiAnTm8gcmVjb3JkcyBzZWxlY3RlZCBmb3IgZWRpdCBvcGVyYXRpb24nLFxuICAgICAgICAgICAgICAgIERlbGV0ZU9wZXJhdGlvbkFsZXJ0OiAnTm8gcmVjb3JkcyBzZWxlY3RlZCBmb3IgZGVsZXRlIG9wZXJhdGlvbicsXG4gICAgICAgICAgICAgICAgU2F2ZUJ1dHRvbjogJ1NhdmUnLFxuICAgICAgICAgICAgICAgIE9LQnV0dG9uOiAnT0snLFxuICAgICAgICAgICAgICAgIENhbmNlbEJ1dHRvbjogJ0NhbmNlbCcsXG4gICAgICAgICAgICAgICAgRWRpdEZvcm1UaXRsZTogJ0RldGFpbHMgb2YgJyxcbiAgICAgICAgICAgICAgICBBZGRGb3JtVGl0bGU6ICdBZGQgTmV3IFJlY29yZCcsXG4gICAgICAgICAgICAgICAgQmF0Y2hTYXZlQ29uZmlybTogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBzYXZlIGNoYW5nZXM/JyxcbiAgICAgICAgICAgICAgICBCYXRjaFNhdmVMb3N0Q2hhbmdlczogJ1Vuc2F2ZWQgY2hhbmdlcyB3aWxsIGJlIGxvc3QuIEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjb250aW51ZT8nLFxuICAgICAgICAgICAgICAgIENvbmZpcm1EZWxldGU6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gRGVsZXRlIFJlY29yZD8nLFxuICAgICAgICAgICAgICAgIENhbmNlbEVkaXQ6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gQ2FuY2VsIHRoZSBjaGFuZ2VzPycsXG4gICAgICAgICAgICAgICAgQ2hvb3NlQ29sdW1uczogJ0Nob29zZSBDb2x1bW4nLFxuICAgICAgICAgICAgICAgIFNlYXJjaENvbHVtbnM6ICdzZWFyY2ggY29sdW1ucycsXG4gICAgICAgICAgICAgICAgTWF0Y2hzOiAnTm8gTWF0Y2hlcyBGb3VuZCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5rZXlDb25maWdzID0ge1xuICAgICAgICAgICAgICAgIGRvd25BcnJvdzogJ2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgdXBBcnJvdzogJ3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIHJpZ2h0QXJyb3c6ICdyaWdodGFycm93JyxcbiAgICAgICAgICAgICAgICBsZWZ0QXJyb3c6ICdsZWZ0YXJyb3cnLFxuICAgICAgICAgICAgICAgIHNoaWZ0RG93bjogJ3NoaWZ0K2Rvd25hcnJvdycsXG4gICAgICAgICAgICAgICAgc2hpZnRVcDogJ3NoaWZ0K3VwYXJyb3cnLFxuICAgICAgICAgICAgICAgIHNoaWZ0UmlnaHQ6ICdzaGlmdCtyaWdodGFycm93JyxcbiAgICAgICAgICAgICAgICBzaGlmdExlZnQ6ICdzaGlmdCtsZWZ0YXJyb3cnLFxuICAgICAgICAgICAgICAgIGhvbWU6ICdob21lJyxcbiAgICAgICAgICAgICAgICBlbmQ6ICdlbmQnLFxuICAgICAgICAgICAgICAgIGVzY2FwZTogJ2VzY2FwZScsXG4gICAgICAgICAgICAgICAgY3RybEhvbWU6ICdjdHJsK2hvbWUnLFxuICAgICAgICAgICAgICAgIGN0cmxFbmQ6ICdjdHJsK2VuZCcsXG4gICAgICAgICAgICAgICAgcGFnZVVwOiAncGFnZXVwJyxcbiAgICAgICAgICAgICAgICBwYWdlRG93bjogJ3BhZ2Vkb3duJyxcbiAgICAgICAgICAgICAgICBjdHJsQWx0UGFnZVVwOiAnY3RybCthbHQrcGFnZXVwJyxcbiAgICAgICAgICAgICAgICBjdHJsQWx0UGFnZURvd246ICdjdHJsK2FsdCtwYWdlZG93bicsXG4gICAgICAgICAgICAgICAgYWx0UGFnZVVwOiAnYWx0K3BhZ2V1cCcsXG4gICAgICAgICAgICAgICAgYWx0UGFnZURvd246ICdhbHQrcGFnZWRvd24nLFxuICAgICAgICAgICAgICAgIGFsdERvd25BcnJvdzogJ2FsdCtkb3duYXJyb3cnLFxuICAgICAgICAgICAgICAgIGFsdFVwQXJyb3c6ICdhbHQrdXBhcnJvdycsXG4gICAgICAgICAgICAgICAgY3RybERvd25BcnJvdzogJ2N0cmwrZG93bmFycm93JyxcbiAgICAgICAgICAgICAgICBjdHJsVXBBcnJvdzogJ2N0cmwrdXBhcnJvdycsXG4gICAgICAgICAgICAgICAgY3RybFBsdXNBOiAnY3RybCtBJyxcbiAgICAgICAgICAgICAgICBjdHJsUGx1c1A6ICdjdHJsK1AnLFxuICAgICAgICAgICAgICAgIGluc2VydDogJ2luc2VydCcsXG4gICAgICAgICAgICAgICAgZGVsZXRlOiAnZGVsZXRlJyxcbiAgICAgICAgICAgICAgICBmMjogJ2YyJyxcbiAgICAgICAgICAgICAgICBlbnRlcjogJ2VudGVyJyxcbiAgICAgICAgICAgICAgICB0YWI6ICd0YWInLFxuICAgICAgICAgICAgICAgIHNoaWZ0VGFiOiAnc2hpZnQrdGFiJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIga2V5RW50aXR5ID0gWydwYWdlU2V0dGluZ3MnLCAnc29ydFNldHRpbmdzJyxcbiAgICAgICAgICAgICAgICAnZmlsdGVyU2V0dGluZ3MnLCAnZ3JvdXBTZXR0aW5ncycsICdjb2x1bW5zJywgJ3NlYXJjaFNldHRpbmdzJywgJ3NlbGVjdGVkUm93SW5kZXgnXTtcbiAgICAgICAgICAgIHZhciBpZ25vcmVPblBlcnNpc3QgPSB7XG4gICAgICAgICAgICAgICAgcGFnZVNldHRpbmdzOiBbJ3RlbXBsYXRlJywgJ3BhZ2VTaXplcycsICdlbmFibGVRdWVyeVN0cmluZycsICd0b3RhbFJlY29yZHNDb3VudCcsICdwYWdlQ291bnQnXSxcbiAgICAgICAgICAgICAgICBmaWx0ZXJTZXR0aW5nczogWyd0eXBlJywgJ21vZGUnLCAnc2hvd0ZpbHRlckJhclN0YXR1cycsICdpbW1lZGlhdGVNb2RlRGVsYXknXSxcbiAgICAgICAgICAgICAgICBncm91cFNldHRpbmdzOiBbJ3Nob3dEcm9wQXJlYScsICdzaG93VG9nZ2xlQnV0dG9uJywgJ3Nob3dHcm91cGVkQ29sdW1uJywgJ3Nob3dVbmdyb3VwQnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgJ2Rpc2FibGVQYWdlV2lzZUFnZ3JlZ2F0ZXMnLCAnaGlkZUNhcHRpb25Db3VudCddLFxuICAgICAgICAgICAgICAgIHNlYXJjaFNldHRpbmdzOiBbJ2ZpZWxkcycsICdvcGVyYXRvcicsICdpZ25vcmVDYXNlJ10sXG4gICAgICAgICAgICAgICAgc29ydFNldHRpbmdzOiBbXSwgY29sdW1uczogW10sIHNlbGVjdGVkUm93SW5kZXg6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGlnbm9yZU9uQ29sdW1uID0gWydlZGl0JywgJ2ZpbHRlckJhclRlbXBsYXRlJywgJ2hlYWRlclRlbXBsYXRlJywgJ3RlbXBsYXRlJ107XG4gICAgICAgICAgICBrZXlFbnRpdHkuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudE9iamVjdCA9IF90aGlzW3ZhbHVlXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gaWdub3JlT25QZXJzaXN0W3ZhbHVlXTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGN1cnJlbnRPYmplY3RbdmFsXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlSW5BcnJheXMoaWdub3JlT25Db2x1bW4sIHRoaXMuY29sdW1ucyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRPblBlcnNpc3Qoa2V5RW50aXR5KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuaWdub3JlSW5BcnJheXMgPSBmdW5jdGlvbiAoaWdub3JlT25Db2x1bW4sIGNvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBjb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pZ25vcmVJbkNvbHVtbihpZ25vcmVPbkNvbHVtbiwgY29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaWdub3JlSW5BcnJheXMoaWdub3JlT25Db2x1bW4sIGNvbHVtbi5jb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmlnbm9yZUluQ29sdW1uKGlnbm9yZU9uQ29sdW1uLCBjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5pZ25vcmVJbkNvbHVtbiA9IGZ1bmN0aW9uIChpZ25vcmVPbkNvbHVtbiwgY29sdW1uKSB7XG4gICAgICAgICAgICBpZ25vcmVPbkNvbHVtbi5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgY29sdW1uW3ZhbF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVxdWlyZWRNb2R1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93RmlsdGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZmlsdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuZmlsdGVyU2V0dGluZ3MsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0V4Y2VsRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnRXhjZWxFeHBvcnQnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93UGRmRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnUGRmRXhwb3J0JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1NvcnRpbmcpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdzb3J0JyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc29ydFNldHRpbmdzLCB0aGlzLnNvcnRlZENvbHVtbnNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3BhZ2VyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMucGFnZVNldHRpbmdzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdzZWxlY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncywgdGhpcy5zZXJ2aWNlTG9jYXRvcl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWVtYmVyOiAncmVzaXplJyxcbiAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dSZW9yZGVyaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAncmVvcmRlcicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3Jvd0RyYWdBbmREcm9wJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZ3JvdXAnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5ncm91cFNldHRpbmdzLCB0aGlzLnNvcnRlZENvbHVtbnMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hZ2dyZWdhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7IG1lbWJlcjogJ2FnZ3JlZ2F0ZScsIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdkZXRhaWxSb3cnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnRvb2xiYXIgfHwgdGhpcy50b29sYmFyVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICd0b29sYmFyJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuc2VydmljZUxvY2F0b3JdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVWaXJ0dWFsaXphdGlvbiB8fCB0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAndmlydHVhbHNjcm9sbCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFNldHRpbmdzLmFsbG93QWRkaW5nIHx8IHRoaXMuZWRpdFNldHRpbmdzLmFsbG93RGVsZXRpbmcgfHwgdGhpcy5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnZWRpdCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLnNlcnZpY2VMb2NhdG9yXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBuZXcgc2VydmljZV9sb2NhdG9yXzEuU2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTZXJ2aWNlcygpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnModGhpcy5lbGVtZW50LCB7IHJvbGU6ICdncmlkJyB9KTtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMS5jcmVhdGVTcGlubmVyKHsgdGFyZ2V0OiB0aGlzLmVsZW1lbnQgfSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck1vZHVsZSA9IG5ldyByZW5kZXJfMS5SZW5kZXIodGhpcywgdGhpcy5zZXJ2aWNlTG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLmdldE1lZGlhQ29sdW1ucygpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hNb2R1bGUgPSBuZXcgc2VhcmNoXzEuU2VhcmNoKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUgPSBuZXcgc2Nyb2xsXzEuU2Nyb2xsKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbkNob29zZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbkNob29zZXJNb2R1bGUgPSBuZXcgY29sdW1uX2Nob29zZXJfMS5Db2x1bW5DaG9vc2VyKHRoaXMsIHRoaXMuc2VydmljZUxvY2F0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluaXRpYWxMb2FkLCB7fSk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoZXZlbnRzLmxvYWQpO1xuICAgICAgICAgICAgdXRpbF8xLnByZXBhcmVDb2x1bW5zKHRoaXMuY29sdW1ucywgdGhpcy5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbik7XG4gICAgICAgICAgICB0aGlzLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc01vZGVsKCk7XG4gICAgICAgICAgICB0aGlzLmdyaWRSZW5kZXIoKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5hZGRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVEZWZhdWx0Q3Vyc29yKCk7XG4gICAgICAgICAgICB0aGlzLnNob3dTcGlubmVyKCk7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5pdGlhbEVuZCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zaG93U3Bpbm5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMS5zaG93U3Bpbm5lcih0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5oaWRlU3Bpbm5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9wb3B1cHNfMS5oaWRlU3Bpbm5lcih0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRNZWRpYUNvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2NvbCA9IHRoaXMuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2hvd0hpZGVTZXJ2aWNlID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdzaG93SGlkZVNlcnZpY2UnKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZ2NvbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGdjb2wubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZ2NvbFtpbmRleF0uaGlkZUF0TWVkaWEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZWRpYUNvbC5wdXNoKGdjb2xbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVkaWEgPSB3aW5kb3cubWF0Y2hNZWRpYShnY29sW2luZGV4XS5oaWRlQXRNZWRpYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZWRpYVF1ZXJ5VXBkYXRlKGluZGV4LCBtZWRpYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEuYWRkTGlzdGVuZXIodGhpcy5tZWRpYVF1ZXJ5VXBkYXRlLmJpbmQodGhpcywgaW5kZXgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUubWVkaWFRdWVyeVVwZGF0ZSA9IGZ1bmN0aW9uIChjb2x1bW5JbmRleCwgZSkge1xuICAgICAgICAgICAgdGhpcy5pc01lZGlhUXVlcnkgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMuZ2V0Q29sdW1ucygpW2NvbHVtbkluZGV4XTtcbiAgICAgICAgICAgIGNvbC52aXNpYmxlID0gZS5tYXRjaGVzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsTG9hZCkge1xuICAgICAgICAgICAgICAgIGlmIChjb2wudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dIaWRlci5zaG93KGNvbC5oZWFkZXJUZXh0LCAnaGVhZGVyVGV4dCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93SGlkZXIuaGlkZShjb2wuaGVhZGVyVGV4dCwgJ2hlYWRlclRleHQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlZnJlc2hNZWRpYUNvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTWVkaWFRdWVyeSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNZWRpYVF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzSW5pdGlhbExvYWQgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5ldmVudEluaXRpYWxpemVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5kZXN0cm95LCB7fSk7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lEZXBlbmRlbnRNb2R1bGVzKCk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuZWxlbWVudCwgW10sIFsnZS1ydGwnLCAnZS1ncmlkaG92ZXInLCAnZS1yZXNwb25zaXZlJywgJ2UtZGVmYXVsdCcsICdlLWRldmljZSddKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGVzdHJveURlcGVuZGVudE1vZHVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZ3JpZCc7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgICAgIHZhciByZXF1aXJlUmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHJlcXVpcmVHcmlkUmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGNoZWNrQ3Vyc29yO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IHJlcXVlc3RUeXBlOiAncmVmcmVzaCcgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1BhZ2luZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAncGFnZXInLCBlbmFibGU6IHRoaXMuYWxsb3dQYWdpbmcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFnZVNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB7IG1vZHVsZTogJ3BhZ2VyJywgcHJvcGVydGllczogbmV3UHJvcC5wYWdlU2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChuZXdQcm9wLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSkgJiYgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChuZXdQcm9wLnBhZ2VTZXR0aW5ncy50b3RhbFJlY29yZHNDb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbG9jYWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxlT2JqLnNldExvY2FsZShuZXdQcm9wLmxvY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlRm9ybWF0dGVyU2VydmljZS5zZXRDdWx0dXJlKG5ld1Byb3AubG9jYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvb2xiYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAndG9vbGJhcicgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dTb3J0aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdzb3J0JywgZW5hYmxlOiB0aGlzLmFsbG93U29ydGluZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0ZpbHRlcmluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAnZmlsdGVyJywgZW5hYmxlOiB0aGlzLmFsbG93RmlsdGVyaW5nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZTogJ3Njcm9sbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczogeyB3aWR0aDogbmV3UHJvcC53aWR0aCwgaGVpZ2h0OiBuZXdQcm9wLmhlaWdodCB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1Jlb3JkZXJpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3Jlb3JkZXInLCBlbmFibGU6IHRoaXMuYWxsb3dSZW9yZGVyaW5nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93Um93RHJhZ0FuZERyb3AnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLnVpVXBkYXRlLCB7IG1vZHVsZTogJ3Jvd0RyYWdBbmREcm9wJywgZW5hYmxlOiB0aGlzLmFsbG93Um93RHJhZ0FuZERyb3AgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncm93VGVtcGxhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dUZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5yb3dUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGV0YWlsVGVtcGxhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRhaWxUZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5kZXRhaWxUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dHcm91cGluZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAnZ3JvdXAnLCBlbmFibGU6IHRoaXMuYWxsb3dHcm91cGluZyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NoaWxkR3JpZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndG9vbGJhcic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMudWlVcGRhdGUsIHsgbW9kdWxlOiAndG9vbGJhcicgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZ3JvdXBTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKG5ld1Byb3AuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja0N1cnNvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdncm91cCcsIHByb3BlcnRpZXM6IG5ld1Byb3AuZ3JvdXBTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhZ2dyZWdhdGVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy51aVVwZGF0ZSwgeyBtb2R1bGU6ICdhZ2dyZWdhdGUnLCBwcm9wZXJ0aWVzOiBuZXdQcm9wIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbHVtbnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5PYmplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVHcmlkUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kZWRQcm9wZXJ0eUNoYW5nZShwcm9wLCBuZXdQcm9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hlY2tDdXJzb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURlZmF1bHRDdXJzb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1aXJlR3JpZFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlcXVpcmVSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgcmVxdWlyZVJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZXh0ZW5kZWRQcm9wZXJ0eUNoYW5nZSA9IGZ1bmN0aW9uIChwcm9wLCBuZXdQcm9wKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJUTCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd1BhZ2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwYWdlcicpLmVqMl9pbnN0YW5jZXNbMF0uZW5hYmxlUnRsID0gbmV3UHJvcC5lbmFibGVSdGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBhZ2VyJykuZWoyX2luc3RhbmNlc1swXS5kYXRhQmluZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5yZW1vdmVQYWRkaW5nKCFuZXdQcm9wLmVuYWJsZVJ0bCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5zZXRQYWRkaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbGJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYmFyTW9kdWxlLmdldFRvb2xiYXIoKS5lajJfaW5zdGFuY2VzWzBdLmVuYWJsZVJ0bCA9IG5ld1Byb3AuZW5hYmxlUnRsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sYmFyTW9kdWxlLmdldFRvb2xiYXIoKS5lajJfaW5zdGFuY2VzWzBdLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlQWx0Um93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbGxvd1Jlc2l6aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUucmVmcmVzaFVJKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2dyaWRMaW5lcyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlR3JpZExpbmVzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbHRlclNldHRpbmdzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHsgbW9kdWxlOiAnZmlsdGVyJywgcHJvcGVydGllczogbmV3UHJvcC5maWx0ZXJTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2VhcmNoU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdzZWFyY2gnLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLnNlYXJjaFNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzb3J0U2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdzb3J0JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2VsZWN0aW9uU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdzZWxlY3Rpb24nLCBwcm9wZXJ0aWVzOiBuZXdQcm9wLnNlbGVjdGlvblNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlZGl0U2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgeyBtb2R1bGU6ICdlZGl0JywgcHJvcGVydGllczogbmV3UHJvcC5lZGl0U2V0dGluZ3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93VGV4dFdyYXAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RleHRXcmFwU2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxvd1RleHRXcmFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VGV4dFdyYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVGV4dFdyYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRhU291cmNlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmRhdGFTb3VyY2VNb2RpZmllZCwge30pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZUhvdmVyJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IG5ld1Byb3AuZW5hYmxlSG92ZXIgPyBlajJfYmFzZV8zLmFkZENsYXNzIDogZWoyX2Jhc2VfMy5yZW1vdmVDbGFzcztcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uKFt0aGlzLmVsZW1lbnRdLCAnZS1ncmlkaG92ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZURlZmF1bHRDdXJzb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNvbHVtbmhlYWRlcicpKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgaGVhZGVyUm93c18xID0gaGVhZGVyUm93czsgX2kgPCBoZWFkZXJSb3dzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IGhlYWRlclJvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dTb3J0aW5nIHx8IHRoaXMuYWxsb3dHcm91cGluZyB8fCB0aGlzLmFsbG93UmVvcmRlcmluZykge1xuICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZSgnZS1kZWZhdWx0Y3Vyc29yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgnZS1kZWZhdWx0Y3Vyc29yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51cGRhdGVDb2x1bW5Nb2RlbCA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW5zW2ldLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5Nb2RlbChjb2x1bW5zW2ldLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5Nb2RlbC5wdXNoKGNvbHVtbnNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW52aWV3ID0gdGhpcy5pblZpZXdJbmRleGVzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gdiAtIF90aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IH0pLmZpbHRlcihmdW5jdGlvbiAodikgeyByZXR1cm4gdiA+IC0xOyB9KTtcbiAgICAgICAgICAgIHZhciB2TGVuID0gaW52aWV3Lmxlbmd0aDtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiB8fCBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29sdW1uTW9kZWwpIHx8IHRoaXMuY29sdW1uTW9kZWwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5Nb2RlbCA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sdW1uTW9kZWwodGhpcy5jb2x1bW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdkxlbiA9PT0gMCA/IHRoaXMuY29sdW1uTW9kZWwgOlxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uTW9kZWwuc2xpY2UoaW52aWV3WzBdLCBpbnZpZXdbdkxlbiAtIDFdICsgMSk7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uSW5kZXhlc0luVmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluVmlld0luZGV4ZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldENvbHVtbkluZGV4ZXNJblZpZXcgPSBmdW5jdGlvbiAoaW5kZXhlcykge1xuICAgICAgICAgICAgdGhpcy5pblZpZXdJbmRleGVzID0gaW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0VmlzaWJsZUNvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuY29sdW1uTW9kZWw7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29scy5wdXNoKGNvbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbHM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldEhlYWRlckNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJNb2R1bGUuZ2V0UGFuZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0R3JpZEhlYWRlckNvbnRlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUuc2V0UGFuZWwoZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbnRlbnRUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0VGFibGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0R3JpZENvbnRlbnRUYWJsZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRNb2R1bGUuc2V0VGFibGUoZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TW9kdWxlLmdldFBhbmVsKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEdyaWRDb250ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudE1vZHVsZS5zZXRQYW5lbChlbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0SGVhZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJNb2R1bGUuZ2V0VGFibGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2V0R3JpZEhlYWRlclRhYmxlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnNldFRhYmxlKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRGb290ZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5mb290ZXJFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyRWxlbWVudCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWdyaWRmb290ZXInKVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvb3RlckVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldEZvb3RlckNvbnRlbnRUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZm9vdGVyRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvb3RlckVsZW1lbnQgPSB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1ncmlkZm9vdGVyJylbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb290ZXJFbGVtZW50LmZpcnN0Q2hpbGQuZmlyc3RDaGlsZDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0UGFnZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ncmlkUGFnZXI7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEdyaWRQYWdlciA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmdyaWRQYWdlciA9IGVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFJvd0J5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0Um93QnlJbmRleChpbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TW9kdWxlLmdldFJvd0VsZW1lbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldERhdGFSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbik7XG4gICAgICAgICAgICB2YXIgZGF0YVJvd3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvdycpICYmICFyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1oaWRkZW5yb3cnKSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhUm93cy5wdXNoKHJvd3NbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhUm93cztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q2VsbEZyb21JbmRleCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERhdGFSb3dzKClbcm93SW5kZXhdLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGwnKVtjb2x1bW5JbmRleF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkhlYWRlckJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLmUtaGVhZGVyY2VsbCcpW2luZGV4XTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Um93T2JqZWN0RnJvbVVJRCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmNvbnRlbnRNb2R1bGUuZ2V0Um93cygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHJvdy51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2x1bW5IZWFkZXJCeVVpZCh0aGlzLmdldENvbHVtbkJ5RmllbGQoZmllbGQpLnVpZCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkhlYWRlckJ5VWlkID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWQ9JyArIHVpZCArICddJykucGFyZW50RWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uQnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdCh0aGlzLmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldENvbHVtbkluZGV4QnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgICAgICByZXR1cm4gIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpID8gaW5kZXggOiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q29sdW1uQnlVaWQgPSBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5JbmRleEJ5VWlkID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgIHJldHVybiAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChpbmRleCkgPyBpbmRleCA6IC0xO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRVaWRCeUNvbHVtbkZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gdXRpbF8xLml0ZXJhdGVBcnJheU9yT2JqZWN0KHRoaXMuZ2V0Q29sdW1ucygpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udWlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0Q29sdW1uSW5kZXhCeVVpZCh1aWQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGluZGV4ICs9IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRDb2x1bW5GaWVsZE5hbWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbk5hbWVzID0gW107XG4gICAgICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuZ2V0Q29sdW1ucygpLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gdGhpcy5nZXRDb2x1bW5zKClbaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbk5hbWVzLnB1c2goY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uTmFtZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFJvd1RlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93VGVtcGxhdGVGbjtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0RGV0YWlsVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZXRhaWxUZW1wbGF0ZUZuO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRQcmltYXJ5S2V5RmllbGROYW1lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgPSAwLCBjb2wgPSB0aGlzLmNvbHVtbnMsIGNMZW4gPSBjb2wubGVuZ3RoOyBrZXkgPCBjTGVuOyBrZXkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjb2xba2V5XS5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKGNvbFtrZXldLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyTW9kdWxlLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2R1bGUucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWZyZXNoSGVhZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJNb2R1bGUucmVmcmVzaFVJKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdldFNlbGVjdGVkUm93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZHVsZSA/IHRoaXMuc2VsZWN0aW9uTW9kdWxlLnNlbGVjdGVkUmVjb3JkcyA6IFtdO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRTZWxlY3RlZFJvd0luZGV4ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2R1bGUgPyB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZFJvd0luZGV4ZXMgOiBbXTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZFJvd0NlbGxJbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5nZXRTZWxlY3RlZFJlY29yZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TW9kdWxlLmdldFJvd3MoKS5maWx0ZXIoZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gcm93LmlzU2VsZWN0ZWQ7IH0pXG4gICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5kYXRhOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0RGF0YU1vZHVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlck1vZHVsZS5kYXRhO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zaG93Q29sdW1ucyA9IGZ1bmN0aW9uIChrZXlzLCBzaG93QnkpIHtcbiAgICAgICAgICAgIHNob3dCeSA9IHNob3dCeSA/IHNob3dCeSA6ICdoZWFkZXJUZXh0JztcbiAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVyLnNob3coa2V5cywgc2hvd0J5KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuaGlkZUNvbHVtbnMgPSBmdW5jdGlvbiAoa2V5cywgaGlkZUJ5KSB7XG4gICAgICAgICAgICBoaWRlQnkgPSBoaWRlQnkgPyBoaWRlQnkgOiAnaGVhZGVyVGV4dCc7XG4gICAgICAgICAgICB0aGlzLnNob3dIaWRlci5oaWRlKGtleXMsIGhpZGVCeSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmdvVG9QYWdlID0gZnVuY3Rpb24gKHBhZ2VObykge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5nb1RvUGFnZShwYWdlTm8pO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51cGRhdGVFeHRlcm5hbE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS51cGRhdGVFeHRlcm5hbE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNvcnRDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uTmFtZSwgZGlyZWN0aW9uLCBpc011bHRpU29ydCkge1xuICAgICAgICAgICAgdGhpcy5zb3J0TW9kdWxlLnNvcnRDb2x1bW4oY29sdW1uTmFtZSwgZGlyZWN0aW9uLCBpc011bHRpU29ydCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNsZWFyU29ydGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydE1vZHVsZS5jbGVhclNvcnRpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVtb3ZlU29ydENvbHVtbiA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdGhpcy5zb3J0TW9kdWxlLnJlbW92ZVNvcnRDb2x1bW4oZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5maWx0ZXJCeUNvbHVtbiA9IGZ1bmN0aW9uIChmaWVsZE5hbWUsIGZpbHRlck9wZXJhdG9yLCBmaWx0ZXJWYWx1ZSwgcHJlZGljYXRlLCBtYXRjaENhc2UsIGFjdHVhbEZpbHRlclZhbHVlLCBhY3R1YWxPcGVyYXRvcikge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJNb2R1bGUuZmlsdGVyQnlDb2x1bW4oZmllbGROYW1lLCBmaWx0ZXJPcGVyYXRvciwgZmlsdGVyVmFsdWUsIHByZWRpY2F0ZSwgbWF0Y2hDYXNlLCBhY3R1YWxGaWx0ZXJWYWx1ZSwgYWN0dWFsT3BlcmF0b3IpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jbGVhckZpbHRlcmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyTW9kdWxlLmNsZWFyRmlsdGVyaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQsIGlzQ2xlYXJGaWx0ZXJCYXIpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyTW9kdWxlLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQoZmllbGQsIGlzQ2xlYXJGaWx0ZXJCYXIpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5zZWxlY3RSb3cgPSBmdW5jdGlvbiAoaW5kZXgsIGlzVG9nZ2xlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RSb3coaW5kZXgsIGlzVG9nZ2xlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2VsZWN0Um93cyA9IGZ1bmN0aW9uIChyb3dJbmRleGVzKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RSb3dzKHJvd0luZGV4ZXMpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kdWxlLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNlbGVjdENlbGwgPSBmdW5jdGlvbiAoY2VsbEluZGV4LCBpc1RvZ2dsZSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0Q2VsbChjZWxsSW5kZXgsIGlzVG9nZ2xlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaFN0cmluZykge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hNb2R1bGUuc2VhcmNoKHNlYXJjaFN0cmluZyk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnByaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wcmludE1vZHVsZS5wcmludCgpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVsZXRlUmVjb3JkKGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5zdGFydEVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5jbG9zZUVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYWRkUmVjb3JkID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5hZGRSZWNvcmQoZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRlbGV0ZVJvdyA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlbGV0ZVJvdyh0cik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnJlY2FsY0luZGVudFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKCF0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggJiYgIXRoaXMuaXNEZXRhaWwoKSkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykuZ2V0QXR0cmlidXRlKCdpbmRlbnRSZWZyZXNoZWQnKSB8fFxuICAgICAgICAgICAgICAgICF0aGlzLmdldENvbnRlbnRUYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGluZGVudFdpZHRoID0gdGhpcy5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJy5lLWVtcHR5Y2VsbCcpLnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgaGVhZGVyQ29sID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50Q29sID0gW10uc2xpY2UuY2FsbCh0aGlzLmdldENvbnRlbnRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICB2YXIgcGVyUGl4ZWwgPSBpbmRlbnRXaWR0aCAvIDMwO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgaWYgKHBlclBpeGVsID49IDEpIHtcbiAgICAgICAgICAgICAgICBpbmRlbnRXaWR0aCA9ICgzMCAvIHBlclBpeGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaW5kZW50V2lkdGggPSAzMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChpIDwgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29sW2ldLnN0eWxlLndpZHRoID0gaW5kZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRDb2xbaV0uc3R5bGUud2lkdGggPSBpbmRlbnRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmNvbHVtbldpZHRoQ2hhbmdlZCwgeyBpbmRleDogaSwgd2lkdGg6IGluZGVudFdpZHRoIH0pO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsKCkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJDb2xbaV0uc3R5bGUud2lkdGggPSBpbmRlbnRXaWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgY29udGVudENvbFtpXS5zdHlsZS53aWR0aCA9IGluZGVudFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkLCB7IGluZGV4OiBpLCB3aWR0aDogaW5kZW50V2lkdGggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignLmUtZW1wdHljZWxsJykuc2V0QXR0cmlidXRlKCdpbmRlbnRSZWZyZXNoZWQnLCAndHJ1ZScpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW9yZGVyQ29sdW1ucyA9IGZ1bmN0aW9uIChmcm9tRk5hbWUsIHRvRk5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVvcmRlck1vZHVsZS5yZW9yZGVyQ29sdW1ucyhmcm9tRk5hbWUsIHRvRk5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5hdXRvRml0Q29sdW1ucyA9IGZ1bmN0aW9uIChmaWVsZE5hbWVzKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZU1vZHVsZS5hdXRvRml0Q29sdW1ucyhmaWVsZE5hbWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY3JlYXRlQ29sdW1uY2hvb3NlciA9IGZ1bmN0aW9uICh4LCB5LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uQ2hvb3Nlck1vZHVsZS5yZW5kZXJDb2x1bW5DaG9vc2VyKHgsIHksIHRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmluaXRpYWxpemVTZXJ2aWNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3dpZHRoU2VydmljZScsIHRoaXMud2lkdGhTZXJ2aWNlID0gbmV3IHdpZHRoX2NvbnRyb2xsZXJfMS5Db2x1bW5XaWR0aFNlcnZpY2UodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvci5yZWdpc3RlcignY2VsbFJlbmRlcmVyRmFjdG9yeScsIG5ldyBjZWxsX3JlbmRlcl9mYWN0b3J5XzEuQ2VsbFJlbmRlcmVyRmFjdG9yeSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdyZW5kZXJlckZhY3RvcnknLCBuZXcgcmVuZGVyZXJfZmFjdG9yeV8xLlJlbmRlcmVyRmFjdG9yeSk7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yLnJlZ2lzdGVyKCdsb2NhbGl6YXRpb24nLCB0aGlzLmxvY2FsZU9iaiA9IG5ldyBlajJfYmFzZV80LkwxMG4odGhpcy5nZXRNb2R1bGVOYW1lKCksIHRoaXMuZGVmYXVsdExvY2FsZSwgdGhpcy5sb2NhbGUpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3ZhbHVlRm9ybWF0dGVyJywgdGhpcy52YWx1ZUZvcm1hdHRlclNlcnZpY2UgPSBuZXcgdmFsdWVfZm9ybWF0dGVyXzEuVmFsdWVGb3JtYXR0ZXIodGhpcy5sb2NhbGUpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ3Nob3dIaWRlU2VydmljZScsIHRoaXMuc2hvd0hpZGVyID0gbmV3IHNob3dfaGlkZV8xLlNob3dIaWRlKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IucmVnaXN0ZXIoJ2FyaWFTZXJ2aWNlJywgdGhpcy5hcmlhU2VydmljZSA9IG5ldyBhcmlhX3NlcnZpY2VfMS5BcmlhU2VydmljZSgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucHJvY2Vzc01vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdDb2xzID0gdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgc0NvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZsYWc7XG4gICAgICAgICAgICB2YXIgajtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpLCBsZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHNMZW4gPSBzQ29scy5sZW5ndGg7IGogPCBzTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzQ29sc1tqXS5maWVsZCA9PT0gZ0NvbHNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNDb2xzLnB1c2goeyBmaWVsZDogZ0NvbHNbaV0sIGRpcmVjdGlvbjogJ2FzY2VuZGluZycgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc18xLmFsbG93U29ydGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMS5zb3J0ZWRDb2x1bW5zLnB1c2goc0NvbHNbal0uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc0NvbHNbal0uZGlyZWN0aW9uID0gJ2FzY2VuZGluZyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzXzEuZ3JvdXBTZXR0aW5ncy5zaG93R3JvdXBlZENvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXNfMS5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkID09PSBnQ29sc1tpXTsgfSlbMF0gOiB0aGlzXzEuZ2V0Q29sdW1uQnlGaWVsZChnQ29sc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4udmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgdGhpc18xID0gdGhpcztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ0NvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvb3BfMShpLCBsZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93VGVtcGxhdGVGbiA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMucm93VGVtcGxhdGUpO1xuICAgICAgICAgICAgdGhpcy5kZXRhaWxUZW1wbGF0ZUZuID0gdXRpbF8xLnRlbXBsYXRlQ29tcGlsZXIodGhpcy5kZXRhaWxUZW1wbGF0ZSk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnREZXRhaWxzKSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnREZXRhaWxzLnBhcmVudEtleUZpZWxkVmFsdWUpID8gJ3VuZGVmaW5lZCcgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudERldGFpbHMucGFyZW50S2V5RmllbGRWYWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5LndoZXJlKHRoaXMucXVlcnlTdHJpbmcsICdlcXVhbCcsIHZhbHVlLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ3JpZFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUlRMKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVIb3Zlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWdyaWRob3ZlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWRldmljZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5lbGVtZW50LCBbJ2UtcmVzcG9uc2l2ZScsICdlLWRlZmF1bHQnXSwgW10pO1xuICAgICAgICAgICAgdmFyIHJlbmRlcmVyRmFjdG9yeSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlck1vZHVsZSA9IHJlbmRlcmVyRmFjdG9yeS5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5IZWFkZXIpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50TW9kdWxlID0gcmVuZGVyZXJGYWN0b3J5LmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQpO1xuICAgICAgICAgICAgdGhpcy5wcmludE1vZHVsZSA9IG5ldyBwcmludF8xLlByaW50KHRoaXMsIHRoaXMuc2Nyb2xsTW9kdWxlKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEluaXRpYWxpemVyKCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUdyaWRQb3BVcEVsZW1lbnQoKTtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlLnNldFdpZHRoVG9Db2x1bW5zKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdyaWRMaW5lcygpO1xuICAgICAgICAgICAgdGhpcy5hcHBseVRleHRXcmFwKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmRhdGFSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTW9kdWxlLnNldFdpZHRoKCk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZS5zZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxNb2R1bGUuc2V0UGFkZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS51cGRhdGVSVEwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ydGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5jcmVhdGVHcmlkUG9wVXBFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBvcHVwID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZHBvcHVwJywgc3R5bGVzOiAnZGlzcGxheTpub25lOycgfSk7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNvbnRlbnQnLCBhdHRyczogeyB0YWJJbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hcHBlbmQoW2NvbnRlbnQsIGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXVwdGFpbCBlLXRhaWwnIH0pXSwgcG9wdXApO1xuICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLmFwcGVuZChbY29udGVudCwgZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZG93bnRhaWwgZS10YWlsJyB9KV0sIHBvcHVwKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChwb3B1cCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUdyaWRMaW5lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuZWxlbWVudCwgW10sIFsnZS12ZXJ0aWNhbGxpbmVzJywgJ2UtaG9yaXpvbnRhbGxpbmVzJywgJ2UtaGlkZWxpbmVzJywgJ2UtYm90aGxpbmVzJ10pO1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmdyaWRMaW5lcykge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvcml6b250YWwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ob3Jpem9udGFsbGluZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndmVydGljYWwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS12ZXJ0aWNhbGxpbmVzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ25vbmUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1oaWRlbGluZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm90aCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWJvdGhsaW5lcycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuYXBwbHlUZXh0V3JhcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93VGV4dFdyYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNvbHVtbmhlYWRlcicpKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMudGV4dFdyYXBTZXR0aW5ncy53cmFwTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWFkZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5lbGVtZW50LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAoaGVhZGVyUm93cywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKGhlYWRlclJvd3MsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLndyYXAodGhpcy5lbGVtZW50LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZ2V0Q29udGVudCgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEud3JhcChoZWFkZXJSb3dzLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZW1vdmVUZXh0V3JhcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHV0aWxfMS53cmFwKHRoaXMuZWxlbWVudCwgZmFsc2UpO1xuICAgICAgICAgICAgdmFyIGhlYWRlclJvd3MgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jb2x1bW5oZWFkZXInKSk7XG4gICAgICAgICAgICB1dGlsXzEud3JhcChoZWFkZXJSb3dzLCBmYWxzZSk7XG4gICAgICAgICAgICB1dGlsXzEud3JhcCh0aGlzLmdldENvbnRlbnQoKSwgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5yZWZyZXNoVG9vbHRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aDtcbiAgICAgICAgICAgIHZhciBoZWFkZXJUYWJsZSA9IHRoaXMuZ2V0SGVhZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50VGFibGUgPSB0aGlzLmdldENvbnRlbnRUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckRpdlRhZyA9ICdlLWdyaWRoZWFkZXInO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnREaXZUYWcgPSAnZS1ncmlkY29udGVudCc7XG4gICAgICAgICAgICB2YXIgaHRhYmxlID0gdGhpcy5jcmVhdGVUYWJsZShoZWFkZXJUYWJsZSwgaGVhZGVyRGl2VGFnLCAnaGVhZGVyJyk7XG4gICAgICAgICAgICB2YXIgY3RhYmxlID0gdGhpcy5jcmVhdGVUYWJsZShoZWFkZXJUYWJsZSwgaGVhZGVyRGl2VGFnLCAnY29udGVudCcpO1xuICAgICAgICAgICAgdmFyIGFsbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1lbGxpcHNpc3Rvb2x0aXAnKTtcbiAgICAgICAgICAgIHZhciBhbGxlbGUgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYWxsZWxlW2ldID0gYWxsW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWxsZWxlLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGQgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9IGhlYWRlclRhYmxlLmNvbnRhaW5zKGVsZW1lbnQpID8gaHRhYmxlIDogY3RhYmxlO1xuICAgICAgICAgICAgICAgIHZhciBlbGUgPSBoZWFkZXJUYWJsZS5jb250YWlucyhlbGVtZW50KSA/ICd0aCcgOiAndHInO1xuICAgICAgICAgICAgICAgIHRhYmxlLnF1ZXJ5U2VsZWN0b3IoZWxlKS5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZTtcbiAgICAgICAgICAgICAgICB0YWJsZS5xdWVyeVNlbGVjdG9yKGVsZSkuaW5uZXJIVE1MID0gZWxlbWVudC5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgd2lkdGggPSB0YWJsZS5xdWVyeVNlbGVjdG9yKGVsZSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICAgICAgaWYgKHdpZHRoID4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAmJiAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9vbHRpcCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b29sdGlwID0gbmV3IGVqMl9wb3B1cHNfMS5Ub29sdGlwKHsgY29udGVudDogZWxlbWVudC5pbm5lckhUTUwgfSwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdpZHRoIDwgZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS10b29sdGlwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5lajJfaW5zdGFuY2VzWzBdLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaHRhYmxlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY3RhYmxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY3JlYXRlVGFibGUgPSBmdW5jdGlvbiAodGFibGUsIHRhZywgdHlwZSkge1xuICAgICAgICAgICAgdmFyIG15VGFibGVEaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbXlUYWJsZURpdi5jbGFzc05hbWUgPSB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lO1xuICAgICAgICAgICAgbXlUYWJsZURpdi5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IGlubGluZS1ibG9jazt2aXNpYmlsaXR5OmhpZGRlbjtwb3NpdGlvbjphYnNvbHV0ZSc7XG4gICAgICAgICAgICB2YXIgbXlTdWJEaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbXlTdWJEaXYuY2xhc3NOYW1lID0gdGFnO1xuICAgICAgICAgICAgdmFyIG15VGFibGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgICAgICAgICBteVRhYmxlLmNsYXNzTmFtZSA9IHRhYmxlLmNsYXNzTmFtZTtcbiAgICAgICAgICAgIG15VGFibGUuc3R5bGUuY3NzVGV4dCA9ICd0YWJsZS1sYXlvdXQ6IGF1dG87d2lkdGg6IGF1dG8nO1xuICAgICAgICAgICAgdmFyIGVsZSA9ICh0eXBlID09PSAnaGVhZGVyJykgPyAndGgnIDogJ3RkJztcbiAgICAgICAgICAgIHZhciBteVRyID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgdmFyIG15dGQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoZWxlKTtcbiAgICAgICAgICAgIG15VHIuYXBwZW5kQ2hpbGQobXl0ZCk7XG4gICAgICAgICAgICBteVRhYmxlLmFwcGVuZENoaWxkKG15VHIpO1xuICAgICAgICAgICAgbXlTdWJEaXYuYXBwZW5kQ2hpbGQobXlUYWJsZSk7XG4gICAgICAgICAgICBteVRhYmxlRGl2LmFwcGVuZENoaWxkKG15U3ViRGl2KTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobXlUYWJsZURpdik7XG4gICAgICAgICAgICByZXR1cm4gbXlUYWJsZURpdjtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMubW91c2VDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ3RvdWNoZW5kJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnZm9jdXNvdXQnLCB0aGlzLmZvY3VzT3V0SGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5hZGQodGhpcy5nZXRDb250ZW50KCksICdkYmxjbGljaycsIHRoaXMuZGJsQ2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93S2V5Ym9hcmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudGFiSW5kZXggPSB0aGlzLmVsZW1lbnQudGFiSW5kZXggPT09IC0xID8gMCA6IHRoaXMuZWxlbWVudC50YWJJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRNb2R1bGUgPSBuZXcgZWoyX2Jhc2VfNS5LZXlib2FyZEV2ZW50cyh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBrZXlBY3Rpb246IHRoaXMua2V5QWN0aW9uSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGtleUNvbmZpZ3M6IHRoaXMua2V5Q29uZmlncyxcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdrZXlkb3duJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzUuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMubW91c2VDbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ3RvdWNoZW5kJywgdGhpcy5tb3VzZUNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICBlajJfYmFzZV81LkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnZm9jdXNvdXQnLCB0aGlzLmZvY3VzT3V0SGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmRhdGFSZWFkeSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMucmVjYWxjSW5kZW50V2lkdGgsIHRoaXMpO1xuICAgICAgICAgICAgW2V2ZW50cy51cGRhdGVEYXRhLCBldmVudHMubW9kZWxDaGFuZ2VkLCBldmVudHMuY29udGVudFJlYWR5LCBldmVudHMuY29sdW1uV2lkdGhDaGFuZ2VkXS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5vbihldmVudCwgX3RoaXMucmVmcmVzaFRvb2x0aXAsIF90aGlzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlY2FsY0luZGVudFdpZHRoLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLnJlZnJlc2hNZWRpYUNvbC5iaW5kKHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9mZihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmRhdGFSZWFkeSk7XG4gICAgICAgICAgICB0aGlzLm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLnJlY2FsY0luZGVudFdpZHRoKTtcbiAgICAgICAgICAgIFtldmVudHMudXBkYXRlRGF0YSwgZXZlbnRzLm1vZGVsQ2hhbmdlZCwgZXZlbnRzLmNvbnRlbnRSZWFkeSwgZXZlbnRzLmNvbHVtbldpZHRoQ2hhbmdlZF0uZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMub2ZmKGV2ZW50LCBfdGhpcy5yZWZyZXNoVG9vbHRpcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVjYWxjSW5kZW50V2lkdGgpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMucmVmcmVzaE1lZGlhQ29sKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZ2V0Q3VycmVudFZpZXdSZWNvcmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmFsbG93R3JvdXBpbmcgJiYgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEucmVjb3JkcyA6IHRoaXMuY3VycmVudFZpZXdEYXRhO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5tb3VzZUNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSB8fCAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZHBvcHVwJykgJiYgZS50b3VjaGVzKSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jbG9uZXByb3BlcnRpZXMnKS5sZW5ndGggfHwgdGhpcy5jaGVja0VkaXQoZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKCghdGhpcy5hbGxvd1Jvd0RyYWdBbmREcm9wICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRjb250ZW50JykpIHx8XG4gICAgICAgICAgICAgICAgKCEodGhpcy5hbGxvd0dyb3VwaW5nIHx8IHRoaXMuYWxsb3dSZW9yZGVyaW5nKSAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkaGVhZGVyJykpKSAmJiBlLnRvdWNoZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGhlYWRlcicpICYmIHRoaXMuYWxsb3dSb3dEcmFnQW5kRHJvcCkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5jbGljaywgZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmNoZWNrRWRpdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdHIgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3cnKTtcbiAgICAgICAgICAgIHZhciBpc0VkaXQgPSB0aGlzLmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmXG4gICAgICAgICAgICAgICAgdGhpcy5pc0VkaXQgJiYgdHIgJiYgKHRyLmNsYXNzTGlzdC5jb250YWlucygnZS1lZGl0ZWRyb3cnKSB8fCB0ci5jbGFzc0xpc3QuY29udGFpbnMoJ2UtYWRkZWRyb3cnKSk7XG4gICAgICAgICAgICByZXR1cm4gaXNFZGl0IHx8ICh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3djZWxsJykgJiZcbiAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3djZWxsJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWVkaXRlZGJhdGNoY2VsbCcpKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuZGJsQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkJykuaWQgIT09IHRoaXMuZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGV2ZW50cy5kYmxjbGljaywgZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmZvY3VzT3V0SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZmlsdGVyQ2xlYXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2FuY2VsOm5vdCguZS1oaWRlKScpO1xuICAgICAgICAgICAgaWYgKGZpbHRlckNsZWFyKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyQ2xlYXIuY2xhc3NMaXN0LmFkZCgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmlzQ2hpbGRHcmlkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBncmlkRWxlbWVudCA9IHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWQnKTtcbiAgICAgICAgICAgIGlmIChncmlkRWxlbWVudCAmJiBncmlkRWxlbWVudC5pZCAhPT0gdGhpcy5lbGVtZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmlzRGV0YWlsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGV0YWlsVGVtcGxhdGUpIHx8ICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2hpbGRHcmlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUua2V5QWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoaWxkR3JpZChlKSB8fFxuICAgICAgICAgICAgICAgICh0aGlzLmlzRWRpdCAmJiBlLmFjdGlvbiAhPT0gJ2VzY2FwZScgJiYgZS5hY3Rpb24gIT09ICdlbnRlcicgJiYgZS5hY3Rpb24gIT09ICd0YWInICYmIGUuYWN0aW9uICE9PSAnc2hpZnRUYWInKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93S2V5Ym9hcmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5hY3Rpb24gPT09ICdjdHJsUGx1c1AnKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmludCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShldmVudHMua2V5UHJlc3NlZCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnNldEluamVjdGVkTW9kdWxlcyA9IGZ1bmN0aW9uIChtb2R1bGVzKSB7XG4gICAgICAgICAgICB0aGlzLmluamVjdGVkTW9kdWxlcyA9IG1vZHVsZXM7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLnVwZGF0ZUNvbHVtbk9iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHV0aWxfMS5wcmVwYXJlQ29sdW1ucyh0aGlzLmNvbHVtbnMsIHRoaXMuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZyB8fCB0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZyB8fCB0aGlzLmVkaXRTZXR0aW5ncy5hbGxvd0RlbGV0aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoZXZlbnRzLmF1dG9Db2wsIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUucmVmcmVzaENvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbk9iamVjdCgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyaWQucHJvdG90eXBlLmV4Y2VsRXhwb3J0ID0gZnVuY3Rpb24gKGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGNlbEV4cG9ydE1vZHVsZS5NYXAodGhpcywgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JpZC5wcm90b3R5cGUuY3N2RXhwb3J0ID0gZnVuY3Rpb24gKGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGNlbEV4cG9ydE1vZHVsZS5NYXAodGhpcywgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBHcmlkLnByb3RvdHlwZS5wZGZFeHBvcnQgPSBmdW5jdGlvbiAoZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgcGRmRG9jKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wZGZFeHBvcnRNb2R1bGUuTWFwKHRoaXMsIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHBkZkRvYyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcmlkO1xuICAgIH0oZWoyX2Jhc2VfMS5Db21wb25lbnQpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShbXSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb2x1bW5zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVBbHRSb3dcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImVuYWJsZUhvdmVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd0tleWJvYXJkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dUZXh0V3JhcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbXBsZXgoe30sIFRleHRXcmFwU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidGV4dFdyYXBTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93UGFnaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgcGFnZV9zZXR0aW5nc18xLlBhZ2VTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJwYWdlU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJlbmFibGVWaXJ0dWFsaXphdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgU2VhcmNoU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic2VhcmNoU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1NvcnRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd0V4Y2VsRXhwb3J0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dQZGZFeHBvcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBTb3J0U2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic29ydFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd1NlbGVjdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KC0xKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInNlbGVjdGVkUm93SW5kZXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBTZWxlY3Rpb25TZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJzZWxlY3Rpb25TZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93RmlsdGVyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dSZW9yZGVyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYWxsb3dSZXNpemluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFsbG93Um93RHJhZ0FuZERyb3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Db21wbGV4KHt9LCBSb3dEcm9wU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicm93RHJvcFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgRmlsdGVyU2V0dGluZ3MpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZmlsdGVyU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhbGxvd0dyb3VwaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgR3JvdXBTZXR0aW5ncylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJncm91cFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuQ29tcGxleCh7fSwgRWRpdFNldHRpbmdzKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImVkaXRTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkNvbGxlY3Rpb24oW10sIGFnZ3JlZ2F0ZV8xLkFnZ3JlZ2F0ZVJvdylcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJhZ2dyZWdhdGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwic2hvd0NvbHVtbkNob29zZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnYXV0bycpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoJ2RlZmF1bHQnKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImdyaWRMaW5lc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJkZXRhaWxUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjaGlsZEdyaWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicXVlcnlTdHJpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgnYWxscGFnZXMnKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInByaW50TW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KFtdKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRhdGFTb3VyY2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicXVlcnlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidG9vbGJhclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJ0b29sYmFyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicGFnZXJUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KFsnY29sdW1ucyddKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRlZXBNZXJnZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImRlc3Ryb3llZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJsb2FkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd0RhdGFCb3VuZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJxdWVyeUNlbGxJbmZvXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFjdGlvbkJlZ2luXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFjdGlvbkNvbXBsZXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImFjdGlvbkZhaWx1cmVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZGF0YUJvdW5kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd1NlbGVjdGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dTZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEZXNlbGVjdGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEZXNlbGVjdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxTZWxlY3RpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2VsbFNlbGVjdGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImNlbGxEZXNlbGVjdGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjZWxsRGVzZWxlY3RlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb2x1bW5EcmFnU3RhcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY29sdW1uRHJhZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJjb2x1bW5Ecm9wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInByaW50Q29tcGxldGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiYmVmb3JlUHJpbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicGRmUXVlcnlDZWxsSW5mb1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJleGNlbFF1ZXJ5Q2VsbEluZm9cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiZGV0YWlsRGF0YUJvdW5kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd0RyYWdTdGFydFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJyb3dEcmFnXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcInJvd0Ryb3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwidG9vbGJhckNsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZU9wZW5Db2x1bW5DaG9vc2VyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJhdGNoQWRkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJhdGNoRGVsZXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZUJhdGNoQWRkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZUJhdGNoRGVsZXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIEdyaWQucHJvdG90eXBlLCBcImJlZm9yZUJhdGNoU2F2ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWdpbkVkaXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2VsbEVkaXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwiY2VsbFNhdmVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicmVzaXplU3RhcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwib25SZXNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5FdmVudCgpXG4gICAgXSwgR3JpZC5wcm90b3R5cGUsIFwicmVzaXplU3RvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBHcmlkLnByb3RvdHlwZSwgXCJiZWZvcmVEYXRhQm91bmRcIiwgdm9pZCAwKTtcbiAgICBHcmlkID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuTm90aWZ5UHJvcGVydHlDaGFuZ2VzXG4gICAgXSwgR3JpZCk7XG4gICAgZXhwb3J0cy5HcmlkID0gR3JpZDtcbiAgICBHcmlkLkluamVjdChzZWxlY3Rpb25fMS5TZWxlY3Rpb24pO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2Jhc2UvZ3JpZC5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNlcnZpY2VMb2NhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU2VydmljZUxvY2F0b3IoKSB7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgU2VydmljZUxvY2F0b3IucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKG5hbWUsIHR5cGUpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuc2VydmljZXNbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXJ2aWNlc1tuYW1lXSA9IHR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlcnZpY2VMb2NhdG9yLnByb3RvdHlwZS5nZXRTZXJ2aWNlID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuc2VydmljZXNbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJUaGUgc2VydmljZSBcIiArIG5hbWUgKyBcIiBpcyBub3QgcmVnaXN0ZXJlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZXNbbmFtZV07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTZXJ2aWNlTG9jYXRvcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2VydmljZUxvY2F0b3IgPSBTZXJ2aWNlTG9jYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9zZXJ2aWNlLWxvY2F0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzVfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzZfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIlxuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIi4uL21vZGVscy9jb2x1bW5cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfZGF0YV8xLCBjb2x1bW5fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBmdW5jdGlvbiBkb2VzSW1wbGVtZW50SW50ZXJmYWNlKHRhcmdldCwgY2hlY2tGb3IpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5wcm90b3R5cGUgJiYgY2hlY2tGb3IgaW4gdGFyZ2V0LnByb3RvdHlwZTtcbiAgICB9XG4gICAgZXhwb3J0cy5kb2VzSW1wbGVtZW50SW50ZXJmYWNlID0gZG9lc0ltcGxlbWVudEludGVyZmFjZTtcbiAgICBmdW5jdGlvbiB2YWx1ZUFjY2Vzc29yKGZpZWxkLCBkYXRhLCBjb2x1bW4pIHtcbiAgICAgICAgZmllbGQgPSBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGZpZWxkKSA/ICcnIDogZmllbGQ7XG4gICAgICAgIHJldHVybiBlajJfYmFzZV8yLmdldFZhbHVlKGZpZWxkLCBkYXRhKTtcbiAgICB9XG4gICAgZXhwb3J0cy52YWx1ZUFjY2Vzc29yID0gdmFsdWVBY2Nlc3NvcjtcbiAgICBmdW5jdGlvbiBnZXRVcGRhdGVVc2luZ1JhZih1cGRhdGVGdW5jdGlvbiwgY2FsbEJhY2spIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2FsbEJhY2sobnVsbCwgdXBkYXRlRnVuY3Rpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNhbGxCYWNrKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRVcGRhdGVVc2luZ1JhZiA9IGdldFVwZGF0ZVVzaW5nUmFmO1xuICAgIGZ1bmN0aW9uIGl0ZXJhdGVBcnJheU9yT2JqZWN0KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJlZCA9IHByZWRpY2F0ZShjb2xsZWN0aW9uW2ldLCBpKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChwcmVkKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHByZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGV4cG9ydHMuaXRlcmF0ZUFycmF5T3JPYmplY3QgPSBpdGVyYXRlQXJyYXlPck9iamVjdDtcbiAgICBmdW5jdGlvbiB0ZW1wbGF0ZUNvbXBpbGVyKHRlbXBsYXRlKSB7XG4gICAgICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgdmFyIGUgPSB2b2lkIDA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRlbXBsYXRlKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzEuY29tcGlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmNvbXBpbGUodGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGV4cG9ydHMudGVtcGxhdGVDb21waWxlciA9IHRlbXBsYXRlQ29tcGlsZXI7XG4gICAgZnVuY3Rpb24gc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGN1c3RvbUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgdmFyIGNvcHlBdHRyID0ge307XG4gICAgICAgIHZhciBsaXRlcmFscyA9IFsnc3R5bGUnLCAnY2xhc3MnXTtcbiAgICAgICAgZWoyX2Jhc2VfMi5leHRlbmQoY29weUF0dHIsIGN1c3RvbUF0dHJpYnV0ZXMsIHt9KTtcbiAgICAgICAgaWYgKCdzdHlsZScgaW4gY29weUF0dHIpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuc2V0U3R5bGVBdHRyaWJ1dGUobm9kZSwgY29weUF0dHJbbGl0ZXJhbHNbMF1dKTtcbiAgICAgICAgICAgIGRlbGV0ZSBjb3B5QXR0cltsaXRlcmFsc1swXV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdjbGFzcycgaW4gY29weUF0dHIpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYWRkQ2xhc3MoW25vZGVdLCBjb3B5QXR0cltsaXRlcmFsc1sxXV0pO1xuICAgICAgICAgICAgZGVsZXRlIGNvcHlBdHRyW2xpdGVyYWxzWzFdXTtcbiAgICAgICAgfVxuICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXMobm9kZSwgY29weUF0dHIpO1xuICAgIH1cbiAgICBleHBvcnRzLnNldFN0eWxlQW5kQXR0cmlidXRlcyA9IHNldFN0eWxlQW5kQXR0cmlidXRlcztcbiAgICBmdW5jdGlvbiBleHRlbmQoY29waWVkLCBmaXJzdCwgc2Vjb25kLCBleGNsdWRlKSB7XG4gICAgICAgIHZhciBtb3ZlZCA9IGVqMl9iYXNlXzIuZXh0ZW5kKGNvcGllZCwgZmlyc3QsIHNlY29uZCk7XG4gICAgICAgIE9iamVjdC5rZXlzKG1vdmVkKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChleGNsdWRlLmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBtb3ZlZFt2YWx1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbW92ZWQ7XG4gICAgfVxuICAgIGV4cG9ydHMuZXh0ZW5kID0gZXh0ZW5kO1xuICAgIGZ1bmN0aW9uIHByZXBhcmVDb2x1bW5zKGNvbHVtbnMsIGF1dG9XaWR0aCkge1xuICAgICAgICBmb3IgKHZhciBjID0gMCwgbGVuID0gY29sdW1ucy5sZW5ndGg7IGMgPCBsZW47IGMrKykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHZvaWQgMDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29sdW1uc1tjXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBuZXcgY29sdW1uXzEuQ29sdW1uKHsgZmllbGQ6IGNvbHVtbnNbY10gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghKGNvbHVtbnNbY10gaW5zdGFuY2VvZiBjb2x1bW5fMS5Db2x1bW4pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb2x1bW5zW2NdLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gbmV3IGNvbHVtbl8xLkNvbHVtbihjb2x1bW5zW2NdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IG5ldyBjb2x1bW5fMS5Db2x1bW4oY29sdW1uc1tjXSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbY10uY29sdW1ucyA9IHByZXBhcmVDb2x1bW5zKGNvbHVtbnNbY10uY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gY29sdW1uc1tjXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHVtbi5oZWFkZXJUZXh0ID0gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uaGVhZGVyVGV4dCkgPyBjb2x1bW4uZmllbGQgfHwgJycgOiBjb2x1bW4uaGVhZGVyVGV4dDtcbiAgICAgICAgICAgIGNvbHVtbi52YWx1ZUFjY2Vzc29yID0gY29sdW1uLnZhbHVlQWNjZXNzb3IgfHwgdmFsdWVBY2Nlc3NvcjtcbiAgICAgICAgICAgIGNvbHVtbi53aWR0aCA9IGF1dG9XaWR0aCAmJiBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi53aWR0aCkgPyAyMDAgOiBjb2x1bW4ud2lkdGg7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udmlzaWJsZSkpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4udmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2x1bW5zW2NdID0gY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgIH1cbiAgICBleHBvcnRzLnByZXBhcmVDb2x1bW5zID0gcHJlcGFyZUNvbHVtbnM7XG4gICAgZnVuY3Rpb24gc2V0Q3NzSW5HcmlkUG9wVXAocG9wVXAsIGUsIGNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgcG9wVXBTcGFuID0gcG9wVXAucXVlcnlTZWxlY3Rvcignc3BhbicpO1xuICAgICAgICB2YXIgcG9zaXRpb24gPSBwb3BVcC5wYXJlbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgdGFyZ2V0UG9zaXRpb24gPSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGlzQm90dG9tVGFpbDtcbiAgICAgICAgcG9wVXBTcGFuLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICAgICAgcG9wVXAuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICBpc0JvdHRvbVRhaWwgPSAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChlLmNsaWVudFkpID8gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZIDpcbiAgICAgICAgICAgIGUuY2xpZW50WSkgPiBwb3BVcC5vZmZzZXRIZWlnaHQgKyAxMDtcbiAgICAgICAgcG9wVXAuc3R5bGUudG9wID0gdGFyZ2V0UG9zaXRpb24udG9wIC0gcG9zaXRpb24udG9wICtcbiAgICAgICAgICAgIChpc0JvdHRvbVRhaWwgPyAtKHBvcFVwLm9mZnNldEhlaWdodCArIDEwKSA6IHBvcFVwLm9mZnNldEhlaWdodCArIDEwKSArICdweCc7XG4gICAgICAgIHBvcFVwLnN0eWxlLmxlZnQgPSBnZXRQb3B1cExlZnRQb3NpdGlvbihwb3BVcCwgZSwgdGFyZ2V0UG9zaXRpb24sIHBvc2l0aW9uLmxlZnQpICsgJ3B4JztcbiAgICAgICAgaWYgKGlzQm90dG9tVGFpbCkge1xuICAgICAgICAgICAgcG9wVXAucXVlcnlTZWxlY3RvcignLmUtZG93bnRhaWwnKS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICBwb3BVcC5xdWVyeVNlbGVjdG9yKCcuZS11cHRhaWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcG9wVXAucXVlcnlTZWxlY3RvcignLmUtZG93bnRhaWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgcG9wVXAucXVlcnlTZWxlY3RvcignLmUtdXB0YWlsJykuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuc2V0Q3NzSW5HcmlkUG9wVXAgPSBzZXRDc3NJbkdyaWRQb3BVcDtcbiAgICBmdW5jdGlvbiBnZXRQb3B1cExlZnRQb3NpdGlvbihwb3B1cCwgZSwgdGFyZ2V0UG9zaXRpb24sIGxlZnQpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gcG9wdXAub2Zmc2V0V2lkdGggLyAyO1xuICAgICAgICB2YXIgeCA9IGdldFBvc2l0aW9uKGUpLng7XG4gICAgICAgIGlmICh4IC0gdGFyZ2V0UG9zaXRpb24ubGVmdCA8IHdpZHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0UG9zaXRpb24ubGVmdCAtIGxlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGFyZ2V0UG9zaXRpb24ucmlnaHQgLSB4IDwgd2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRQb3NpdGlvbi5yaWdodCAtIGxlZnQgLSB3aWR0aCAqIDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geCAtIGxlZnQgLSB3aWR0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRBY3R1YWxQcm9wZXJ0aWVzKG9iaikge1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5nZXRWYWx1ZSgncHJvcGVydGllcycsIG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0QWN0dWFsUHJvcGVydGllcyA9IGdldEFjdHVhbFByb3BlcnRpZXM7XG4gICAgZnVuY3Rpb24gcGFyZW50c1VudGlsKGVsZW0sIHNlbGVjdG9yLCBpc0lEKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBlbGVtO1xuICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgICBpZiAoaXNJRCA/IHBhcmVudC5pZCA9PT0gc2VsZWN0b3IgOiBwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICB9XG4gICAgZXhwb3J0cy5wYXJlbnRzVW50aWwgPSBwYXJlbnRzVW50aWw7XG4gICAgZnVuY3Rpb24gZ2V0RWxlbWVudEluZGV4KGVsZW1lbnQsIGVsZW1lbnRzKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS5pc0VxdWFsTm9kZShlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0RWxlbWVudEluZGV4ID0gZ2V0RWxlbWVudEluZGV4O1xuICAgIGZ1bmN0aW9uIGluQXJyYXkodmFsdWUsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbGxlY3Rpb24ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uW2ldID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgZXhwb3J0cy5pbkFycmF5ID0gaW5BcnJheTtcbiAgICBmdW5jdGlvbiBnZXRBY3R1YWxQcm9wRnJvbUNvbGwoY29sbGVjdGlvbikge1xuICAgICAgICB2YXIgY29sbCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sbGVjdGlvbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb25baV0uaGFzT3duUHJvcGVydHkoJ3Byb3BlcnRpZXMnKSkge1xuICAgICAgICAgICAgICAgIGNvbGwucHVzaChjb2xsZWN0aW9uW2ldLnByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29sbC5wdXNoKGNvbGxlY3Rpb25baV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xsO1xuICAgIH1cbiAgICBleHBvcnRzLmdldEFjdHVhbFByb3BGcm9tQ29sbCA9IGdldEFjdHVhbFByb3BGcm9tQ29sbDtcbiAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KHRhcmdldCwgc2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbCh0YXJnZXQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZShlbGVtZW50c1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5yZW1vdmVFbGVtZW50ID0gcmVtb3ZlRWxlbWVudDtcbiAgICBmdW5jdGlvbiBnZXRQb3NpdGlvbihlKSB7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHt9O1xuICAgICAgICBwb3NpdGlvbi54ID0gKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5jbGllbnRYKSA/IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCA6XG4gICAgICAgICAgICBlLmNsaWVudFgpO1xuICAgICAgICBwb3NpdGlvbi55ID0gKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5jbGllbnRZKSA/IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSA6XG4gICAgICAgICAgICBlLmNsaWVudFkpO1xuICAgICAgICByZXR1cm4gcG9zaXRpb247XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0UG9zaXRpb24gPSBnZXRQb3NpdGlvbjtcbiAgICB2YXIgdWlkID0gMDtcbiAgICBmdW5jdGlvbiBnZXRVaWQocHJlZml4KSB7XG4gICAgICAgIHJldHVybiBwcmVmaXggKyB1aWQrKztcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRVaWQgPSBnZXRVaWQ7XG4gICAgZnVuY3Rpb24gYXBwZW5kQ2hpbGRyZW4oZWxlbSwgY2hpbGRyZW4pIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGVuID09PSBjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlbGVtLmFwcGVuZENoaWxkKGNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW0uYXBwZW5kQ2hpbGQoY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtO1xuICAgIH1cbiAgICBleHBvcnRzLmFwcGVuZENoaWxkcmVuID0gYXBwZW5kQ2hpbGRyZW47XG4gICAgZnVuY3Rpb24gcGFyZW50cyhlbGVtLCBzZWxlY3RvciwgaXNJRCkge1xuICAgICAgICB2YXIgcGFyZW50ID0gZWxlbTtcbiAgICAgICAgdmFyIHBhcmVudHMgPSBbXTtcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKGlzSUQgPyBwYXJlbnQuaWQgPT09IHNlbGVjdG9yIDogcGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnRzO1xuICAgIH1cbiAgICBleHBvcnRzLnBhcmVudHMgPSBwYXJlbnRzO1xuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUFnZ3JlZ2F0ZSh0eXBlLCBkYXRhLCBjb2x1bW4sIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdjdXN0b20nKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLmN1c3RvbUFnZ3JlZ2F0ZSA/IGNvbHVtbi5jdXN0b21BZ2dyZWdhdGUuY2FsbChjb250ZXh0LCBkYXRhLCBjb2x1bW4pIDogJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVqMl9kYXRhXzEuRGF0YVV0aWwuYWdncmVnYXRlc1t0eXBlXShkYXRhLCBjb2x1bW4uZmllbGQpO1xuICAgIH1cbiAgICBleHBvcnRzLmNhbGN1bGF0ZUFnZ3JlZ2F0ZSA9IGNhbGN1bGF0ZUFnZ3JlZ2F0ZTtcbiAgICB2YXIgc2Nyb2xsV2lkdGggPSBudWxsO1xuICAgIGZ1bmN0aW9uIGdldFNjcm9sbEJhcldpZHRoKCkge1xuICAgICAgICBpZiAoc2Nyb2xsV2lkdGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGl2Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB2YXIgdmFsdWUgPSAwO1xuICAgICAgICBkaXZOb2RlLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6MTAwcHg7aGVpZ2h0OiAxMDBweDtvdmVyZmxvdzogc2Nyb2xsO3Bvc2l0aW9uOiBhYnNvbHV0ZTt0b3A6IC05OTk5cHg7JztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXZOb2RlKTtcbiAgICAgICAgdmFsdWUgPSAoZGl2Tm9kZS5vZmZzZXRXaWR0aCAtIGRpdk5vZGUuY2xpZW50V2lkdGgpIHwgMDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkaXZOb2RlKTtcbiAgICAgICAgcmV0dXJuIHNjcm9sbFdpZHRoID0gdmFsdWU7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0U2Nyb2xsQmFyV2lkdGggPSBnZXRTY3JvbGxCYXJXaWR0aDtcbiAgICB2YXIgcm93SGVpZ2h0O1xuICAgIGZ1bmN0aW9uIGdldFJvd0hlaWdodChlbGVtZW50KSB7XG4gICAgICAgIGlmIChyb3dIZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJvd0hlaWdodDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywgeyBjbGFzc05hbWU6ICdlLXRhYmxlJywgc3R5bGVzOiAndmlzaWJpbGl0eTogaGlkZGVuJyB9KTtcbiAgICAgICAgdGFibGUuaW5uZXJIVE1MID0gJzx0cj48dGQgY2xhc3M9XCJlLXJvd2NlbGxcIj5BPHRkPjwvdHI+JztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgIHZhciByZWN0ID0gdGFibGUucXVlcnlTZWxlY3RvcigndGQnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZCh0YWJsZSk7XG4gICAgICAgIHJvd0hlaWdodCA9IE1hdGguY2VpbChyZWN0LmhlaWdodCk7XG4gICAgICAgIHJldHVybiByb3dIZWlnaHQ7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0Um93SGVpZ2h0ID0gZ2V0Um93SGVpZ2h0O1xuICAgIGZ1bmN0aW9uIGlzRWRpdGFibGUoY29sLCB0eXBlLCBlbGVtKSB7XG4gICAgICAgIHZhciByb3cgPSBwYXJlbnRzVW50aWwoZWxlbSwgJ2Utcm93Jyk7XG4gICAgICAgIHZhciBpc09sZFJvdyA9ICFyb3cgPyB0cnVlIDogcm93ICYmICFyb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWluc2VydGVkcm93Jyk7XG4gICAgICAgIGlmICh0eXBlID09PSAnYmVnaW5FZGl0JyAmJiBpc09sZFJvdykge1xuICAgICAgICAgICAgaWYgKGNvbC5pc0lkZW50aXR5IHx8IGNvbC5pc1ByaW1hcnlLZXkgfHwgIWNvbC5hbGxvd0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChpc09sZFJvdyAmJiAhY29sLmFsbG93RWRpdGluZyAmJiAhY29sLmlzSWRlbnRpdHkgJiYgIWNvbC5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnRzLmlzRWRpdGFibGUgPSBpc0VkaXRhYmxlO1xuICAgIGZ1bmN0aW9uIGlzQWN0aW9uUHJldmVudChpbnN0KSB7XG4gICAgICAgIHZhciBkbGcgPSBpbnN0LmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBpbnN0LmVsZW1lbnQuaWQgKyAnRWRpdENvbmZpcm0nKTtcbiAgICAgICAgcmV0dXJuIGluc3QuZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcgJiZcbiAgICAgICAgICAgIChpbnN0LmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtdXBkYXRlZHRkJykubGVuZ3RoKSAmJlxuICAgICAgICAgICAgKGRsZyA/IGRsZy5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcG9wdXAtY2xvc2UnKSA6IHRydWUpO1xuICAgIH1cbiAgICBleHBvcnRzLmlzQWN0aW9uUHJldmVudCA9IGlzQWN0aW9uUHJldmVudDtcbiAgICBmdW5jdGlvbiB3cmFwKGVsZW0sIGFjdGlvbikge1xuICAgICAgICB2YXIgY2xOYW1lID0gJ2Utd3JhcCc7XG4gICAgICAgIGVsZW0gPSBlbGVtIGluc3RhbmNlb2YgQXJyYXkgPyBlbGVtIDogW2VsZW1dO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFjdGlvbiA/IGVsZW1baV0uY2xhc3NMaXN0LmFkZChjbE5hbWUpIDogZWxlbVtpXS5jbGFzc0xpc3QucmVtb3ZlKGNsTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy53cmFwID0gd3JhcDtcbiAgICBmdW5jdGlvbiBjaGFuZ2VCdXR0b25UeXBlKHRhcmdldCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBbXS5zbGljZS5jYWxsKHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSk7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgZWxlbWVudHNfMSA9IGVsZW1lbnRzOyBfaSA8IGVsZW1lbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uID0gZWxlbWVudHNfMVtfaV07XG4gICAgICAgICAgICBlajJfYmFzZV8zLmF0dHJpYnV0ZXMoYnV0dG9uLCB7IHR5cGU6ICdidXR0b24nIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuY2hhbmdlQnV0dG9uVHlwZSA9IGNoYW5nZUJ1dHRvblR5cGU7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYmFzZS91dGlsLmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgdmFsdWVfZm9ybWF0dGVyXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29sdW1uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29sdW1uKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuYWxsb3dTb3J0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYWxsb3dSZXNpemluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFsbG93RmlsdGVyaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYWxsb3dHcm91cGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFsbG93RWRpdGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNob3dJbkNvbHVtbkNob29zZXIgPSB0cnVlO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5tZXJnZSh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMudWlkID0gdXRpbF8xLmdldFVpZCgnZ3JpZC1jb2x1bW4nKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZUZvcm1hdHRlciA9IG5ldyB2YWx1ZV9mb3JtYXR0ZXJfMS5WYWx1ZUZvcm1hdHRlcigpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZm9ybWF0ICYmIChvcHRpb25zLmZvcm1hdC5za2VsZXRvbiB8fCBvcHRpb25zLmZvcm1hdC5mb3JtYXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGb3JtYXR0ZXIodmFsdWVGb3JtYXR0ZXIuZ2V0Rm9ybWF0RnVuY3Rpb24ob3B0aW9ucy5mb3JtYXQpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBhcnNlcih2YWx1ZUZvcm1hdHRlci5nZXRQYXJzZXJGdW5jdGlvbihvcHRpb25zLmZvcm1hdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbGxvd0ZpbHRlcmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dHcm91cGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dTb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVGbiA9IHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMudGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Rm47XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuc2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdEZuID0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0UGFyc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VyRm47XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuc2V0UGFyc2VyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnNlckZuID0gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbi5wcm90b3R5cGUuZ2V0Q29sdW1uVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZUZuO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmdldERvbVNldHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVIdG1sRW5jb2RlID8gJ3RleHRDb250ZW50JyA6ICdpbm5lckhUTUwnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29sdW1uO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW4gPSBDb2x1bW47XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvbW9kZWxzL2NvbHVtbi5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVmFsdWVGb3JtYXR0ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWYWx1ZUZvcm1hdHRlcihjdWx0dXJlTmFtZSkge1xuICAgICAgICAgICAgdGhpcy5pbnRsID0gbmV3IGVqMl9iYXNlXzIuSW50ZXJuYXRpb25hbGl6YXRpb24oKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjdWx0dXJlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmludGwuY3VsdHVyZSA9IGN1bHR1cmVOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFZhbHVlRm9ybWF0dGVyLnByb3RvdHlwZS5nZXRGb3JtYXRGdW5jdGlvbiA9IGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgICAgICAgIGlmIChmb3JtYXQudHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGwuZ2V0RGF0ZUZvcm1hdChmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50bC5nZXROdW1iZXJGb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLmdldFBhcnNlckZ1bmN0aW9uID0gZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgICAgICAgICAgaWYgKGZvcm1hdC50eXBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50bC5nZXREYXRlUGFyc2VyKGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRsLmdldE51bWJlclBhcnNlcihmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWYWx1ZUZvcm1hdHRlci5wcm90b3R5cGUuZnJvbVZpZXcgPSBmdW5jdGlvbiAodmFsdWUsIGZvcm1hdCwgdHlwZSkge1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdkYXRlJyB8fCB0eXBlID09PSAnZGF0ZXRpbWUnIHx8IHR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZhbHVlRm9ybWF0dGVyLnByb3RvdHlwZS50b1ZpZXcgPSBmdW5jdGlvbiAodmFsdWUsIGZvcm1hdCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGZvcm1hdCkgJiYgIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZm9ybWF0KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIFZhbHVlRm9ybWF0dGVyLnByb3RvdHlwZS5zZXRDdWx0dXJlID0gZnVuY3Rpb24gKGN1bHR1cmVOYW1lKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY3VsdHVyZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZXRDdWx0dXJlKGN1bHR1cmVOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZhbHVlRm9ybWF0dGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5WYWx1ZUZvcm1hdHRlciA9IFZhbHVlRm9ybWF0dGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3ZhbHVlLWZvcm1hdHRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBleHBvcnRzLmNyZWF0ZWQgPSAnY3JlYXRlJztcbiAgICBleHBvcnRzLmRlc3Ryb3llZCA9ICdkZXN0cm95JztcbiAgICBleHBvcnRzLmxvYWQgPSAnbG9hZCc7XG4gICAgZXhwb3J0cy5yb3dEYXRhQm91bmQgPSAncm93RGF0YUJvdW5kJztcbiAgICBleHBvcnRzLnF1ZXJ5Q2VsbEluZm8gPSAncXVlcnlDZWxsSW5mbyc7XG4gICAgZXhwb3J0cy5hY3Rpb25CZWdpbiA9ICdhY3Rpb25CZWdpbic7XG4gICAgZXhwb3J0cy5hY3Rpb25Db21wbGV0ZSA9ICdhY3Rpb25Db21wbGV0ZSc7XG4gICAgZXhwb3J0cy5hY3Rpb25GYWlsdXJlID0gJ2FjdGlvbkZhaWx1cmUnO1xuICAgIGV4cG9ydHMuZGF0YUJvdW5kID0gJ2RhdGFCb3VuZCc7XG4gICAgZXhwb3J0cy5yb3dTZWxlY3RpbmcgPSAncm93U2VsZWN0aW5nJztcbiAgICBleHBvcnRzLnJvd1NlbGVjdGVkID0gJ3Jvd1NlbGVjdGVkJztcbiAgICBleHBvcnRzLnJvd0Rlc2VsZWN0aW5nID0gJ3Jvd0Rlc2VsZWN0aW5nJztcbiAgICBleHBvcnRzLnJvd0Rlc2VsZWN0ZWQgPSAncm93RGVzZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5jZWxsU2VsZWN0aW5nID0gJ2NlbGxTZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY2VsbFNlbGVjdGVkID0gJ2NlbGxTZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5jZWxsRGVzZWxlY3RpbmcgPSAnY2VsbERlc2VsZWN0aW5nJztcbiAgICBleHBvcnRzLmNlbGxEZXNlbGVjdGVkID0gJ2NlbGxEZXNlbGVjdGVkJztcbiAgICBleHBvcnRzLmNvbHVtbkRyYWdTdGFydCA9ICdjb2x1bW5EcmFnU3RhcnQnO1xuICAgIGV4cG9ydHMuY29sdW1uRHJhZyA9ICdjb2x1bW5EcmFnJztcbiAgICBleHBvcnRzLmNvbHVtbkRyb3AgPSAnY29sdW1uRHJvcCc7XG4gICAgZXhwb3J0cy5yb3dEcmFnU3RhcnQgPSAncm93RHJhZ1N0YXJ0JztcbiAgICBleHBvcnRzLnJvd0RyYWcgPSAncm93RHJhZyc7XG4gICAgZXhwb3J0cy5yb3dEcm9wID0gJ3Jvd0Ryb3AnO1xuICAgIGV4cG9ydHMuYmVmb3JlUHJpbnQgPSAnYmVmb3JlUHJpbnQnO1xuICAgIGV4cG9ydHMucHJpbnRDb21wbGV0ZSA9ICdwcmludENvbXBsZXRlJztcbiAgICBleHBvcnRzLmRldGFpbERhdGFCb3VuZCA9ICdkZXRhaWxEYXRhQm91bmQnO1xuICAgIGV4cG9ydHMudG9vbGJhckNsaWNrID0gJ3Rvb2xiYXJDbGljayc7XG4gICAgZXhwb3J0cy5iYXRjaEFkZCA9ICdiYXRjaEFkZCc7XG4gICAgZXhwb3J0cy5iYXRjaERlbGV0ZSA9ICdiYXRjaERlbGV0ZSc7XG4gICAgZXhwb3J0cy5iZWZvcmVCYXRjaEFkZCA9ICdiZWZvcmVCYXRjaEFkZCc7XG4gICAgZXhwb3J0cy5iZWZvcmVCYXRjaERlbGV0ZSA9ICdiZWZvcmVCYXRjaERlbGV0ZSc7XG4gICAgZXhwb3J0cy5iZWZvcmVCYXRjaFNhdmUgPSAnYmVmb3JlQmF0Y2hTYXZlJztcbiAgICBleHBvcnRzLmJlZ2luRWRpdCA9ICdiZWdpbkVkaXQnO1xuICAgIGV4cG9ydHMuY2VsbEVkaXQgPSAnY2VsbEVkaXQnO1xuICAgIGV4cG9ydHMuY2VsbFNhdmUgPSAnY2VsbFNhdmUnO1xuICAgIGV4cG9ydHMuZW5kQWRkID0gJ2VuZEFkZCc7XG4gICAgZXhwb3J0cy5lbmREZWxldGUgPSAnZW5kRGVsZXRlJztcbiAgICBleHBvcnRzLmVuZEVkaXQgPSAnZW5kRWRpdCc7XG4gICAgZXhwb3J0cy5yZWNvcmREb3VibGVDbGljayA9ICdyZWNvcmREb3VibGVDbGljayc7XG4gICAgZXhwb3J0cy5yZWNvcmRDbGljayA9ICdyZWNvcmRDbGljayc7XG4gICAgZXhwb3J0cy5iZWZvcmVEYXRhQm91bmQgPSAnYmVmb3JlRGF0YUJvdW5kJztcbiAgICBleHBvcnRzLmJlZm9yZU9wZW5Db2x1bW5DaG9vc2VyID0gJ2JlZm9yZU9wZW5Db2x1bW5DaG9vc2VyJztcbiAgICBleHBvcnRzLnJlc2l6ZVN0YXJ0ID0gJ3Jlc2l6ZVN0YXJ0JztcbiAgICBleHBvcnRzLm9uUmVzaXplID0gJ29uUmVzaXplJztcbiAgICBleHBvcnRzLnJlc2l6ZVN0b3AgPSAncmVzaXplU3RvcCc7XG4gICAgZXhwb3J0cy5pbml0aWFsTG9hZCA9ICdpbml0aWFsLWxvYWQnO1xuICAgIGV4cG9ydHMuaW5pdGlhbEVuZCA9ICdpbml0aWFsLWVuZCc7XG4gICAgZXhwb3J0cy5kYXRhUmVhZHkgPSAnZGF0YS1yZWFkeSc7XG4gICAgZXhwb3J0cy5jb250ZW50UmVhZHkgPSAnY29udGVudC1yZWFkeSc7XG4gICAgZXhwb3J0cy51aVVwZGF0ZSA9ICd1aS11cGRhdGUnO1xuICAgIGV4cG9ydHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCA9ICdpbmJvdW5kLW1vZGVsLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMubW9kZWxDaGFuZ2VkID0gJ21vZGVsLWNoYW5nZWQnO1xuICAgIGV4cG9ydHMuY29sR3JvdXBSZWZyZXNoID0gJ2NvbGdyb3VwLXJlZnJlc2gnO1xuICAgIGV4cG9ydHMuaGVhZGVyUmVmcmVzaGVkID0gJ2hlYWRlci1yZWZyZXNoZWQnO1xuICAgIGV4cG9ydHMucGFnZUJlZ2luID0gJ3BhZ2luZy1iZWdpbic7XG4gICAgZXhwb3J0cy5wYWdlQ29tcGxldGUgPSAncGFnaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnNvcnRCZWdpbiA9ICdzb3J0aW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnNvcnRDb21wbGV0ZSA9ICdzb3J0aW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLmZpbHRlckJlZ2luID0gJ2ZpbHRlcmluZy1iZWdpbic7XG4gICAgZXhwb3J0cy5maWx0ZXJDb21wbGV0ZSA9ICdmaWx0ZXJpbmctY29tcGxldGUnO1xuICAgIGV4cG9ydHMuc2VhcmNoQmVnaW4gPSAnc2VhcmNoaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnNlYXJjaENvbXBsZXRlID0gJ3NlYXJjaGluZy1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5yZW9yZGVyQmVnaW4gPSAncmVvcmRlci1iZWdpbic7XG4gICAgZXhwb3J0cy5yZW9yZGVyQ29tcGxldGUgPSAncmVvcmRlci1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5yb3dEcmFnQW5kRHJvcEJlZ2luID0gJ3Jvd2RyYWdhbmRkcm9wLWJlZ2luJztcbiAgICBleHBvcnRzLnJvd0RyYWdBbmREcm9wQ29tcGxldGUgPSAncm93ZHJhZ2FuZGRyb3AtY29tcGxldGUnO1xuICAgIGV4cG9ydHMuZ3JvdXBCZWdpbiA9ICdncm91cGluZy1iZWdpbic7XG4gICAgZXhwb3J0cy5ncm91cENvbXBsZXRlID0gJ2dyb3VwaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnVuZ3JvdXBCZWdpbiA9ICd1bmdyb3VwaW5nLWJlZ2luJztcbiAgICBleHBvcnRzLnVuZ3JvdXBDb21wbGV0ZSA9ICd1bmdyb3VwaW5nLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnJvd1NlbGVjdGlvbkJlZ2luID0gJ3Jvd3NlbGVjdGluZyc7XG4gICAgZXhwb3J0cy5yb3dTZWxlY3Rpb25Db21wbGV0ZSA9ICdyb3dzZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5jb2x1bW5TZWxlY3Rpb25CZWdpbiA9ICdjb2x1bW5zZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY29sdW1uU2VsZWN0aW9uQ29tcGxldGUgPSAnY29sdW1uc2VsZWN0ZWQnO1xuICAgIGV4cG9ydHMuY2VsbFNlbGVjdGlvbkJlZ2luID0gJ2NlbGxzZWxlY3RpbmcnO1xuICAgIGV4cG9ydHMuY2VsbFNlbGVjdGlvbkNvbXBsZXRlID0gJ2NlbGxzZWxlY3RlZCc7XG4gICAgZXhwb3J0cy5rZXlQcmVzc2VkID0gJ2tleS1wcmVzc2VkJztcbiAgICBleHBvcnRzLmNsaWNrID0gJ2NsaWNrJztcbiAgICBleHBvcnRzLmRlc3Ryb3kgPSAnZGVzdHJveSc7XG4gICAgZXhwb3J0cy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCA9ICdjb2x1bW4tdmlzaWJsZS1jaGFuZ2VkJztcbiAgICBleHBvcnRzLnNjcm9sbCA9ICdzY3JvbGwnO1xuICAgIGV4cG9ydHMuY29sdW1uV2lkdGhDaGFuZ2VkID0gJ2NvbHVtbi13aWR0aC1jaGFuZ2VkJztcbiAgICBleHBvcnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCA9ICdjb2x1bW4tcG9zaXRpb24tY2hhbmdlZCc7XG4gICAgZXhwb3J0cy5yb3dEcmFnQW5kRHJvcCA9ICdyb3ctZHJhZy1hbmQtZHJvcCc7XG4gICAgZXhwb3J0cy5yb3dzQWRkZWQgPSAncm93cy1hZGRlZCc7XG4gICAgZXhwb3J0cy5yb3dzUmVtb3ZlZCA9ICdyb3dzLXJlbW92ZWQnO1xuICAgIGV4cG9ydHMuY29sdW1uRHJhZ1N0b3AgPSAnY29sdW1uLWRyYWctc3RvcCc7XG4gICAgZXhwb3J0cy5oZWFkZXJEcm9wID0gJ2hlYWRlci1kcm9wJztcbiAgICBleHBvcnRzLmRhdGFTb3VyY2VNb2RpZmllZCA9ICdkYXRhc291cmNlLW1vZGlmaWVkJztcbiAgICBleHBvcnRzLnJlZnJlc2hDb21wbGV0ZSA9ICdyZWZyZXNoLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnJlZnJlc2hWaXJ0dWFsQmxvY2sgPSAncmVmcmVzaC12aXJ0dWFsLWJsb2NrJztcbiAgICBleHBvcnRzLmRibGNsaWNrID0gJ2RibGNsaWNrJztcbiAgICBleHBvcnRzLnRvb2xiYXJSZWZyZXNoID0gJ3Rvb2xiYXItcmVmcmVzaCc7XG4gICAgZXhwb3J0cy5idWxrU2F2ZSA9ICdidWxrLXNhdmUnO1xuICAgIGV4cG9ydHMuYXV0b0NvbCA9ICdhdXRvLWNvbCc7XG4gICAgZXhwb3J0cy50b29sdGlwRGVzdHJveSA9ICd0b29sdGlwLWRlc3Ryb3knO1xuICAgIGV4cG9ydHMudXBkYXRlRGF0YSA9ICd1cGRhdGUtZGF0YSc7XG4gICAgZXhwb3J0cy5lZGl0QmVnaW4gPSAnZWRpdC1iZWdpbic7XG4gICAgZXhwb3J0cy5lZGl0Q29tcGxldGUgPSAnZWRpdC1jb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5hZGRCZWdpbiA9ICdhZGQtYmVnaW4nO1xuICAgIGV4cG9ydHMuYWRkQ29tcGxldGUgPSAnYWRkLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLnNhdmVDb21wbGV0ZSA9ICdzYXZlLWNvbXBsZXRlJztcbiAgICBleHBvcnRzLmRlbGV0ZUJlZ2luID0gJ2RlbGV0ZS1iZWdpbic7XG4gICAgZXhwb3J0cy5kZWxldGVDb21wbGV0ZSA9ICdkZWxldGUtY29tcGxldGUnO1xuICAgIGV4cG9ydHMucHJldmVudEJhdGNoID0gJ3ByZXZlbnQtYmF0Y2gnO1xuICAgIGV4cG9ydHMuZGlhbG9nRGVzdHJveSA9ICdkaWFsb2ctZGVzdHJveSc7XG4gICAgZXhwb3J0cy5jcnVkQWN0aW9uID0gJ2NydWQtQWN0aW9uJztcbiAgICBleHBvcnRzLmFkZERlbGV0ZUFjdGlvbiA9ICdhZGQtZGVsZXRlLUFjdGlvbic7XG4gICAgZXhwb3J0cy5kZXN0cm95Rm9ybSA9ICdkZXN0cm95LWZvcm0nO1xuICAgIGV4cG9ydHMuZG91YmxlVGFwID0gJ2RvdWJsZS10YXAnO1xuICAgIGV4cG9ydHMuYmVmb3JlRXhjZWxFeHBvcnQgPSAnYmVmb3JlRXhjZWxFeHBvcnQnO1xuICAgIGV4cG9ydHMuZXhjZWxFeHBvcnRDb21wbGV0ZSA9ICdleGNlbEV4cG9ydENvbXBsZXRlJztcbiAgICBleHBvcnRzLmV4Y2VsUXVlcnlDZWxsSW5mbyA9ICdleGNlbFF1ZXJ5Q2VsbEluZm8nO1xuICAgIGV4cG9ydHMuYmVmb3JlUGRmRXhwb3J0ID0gJ2JlZm9yZVBkZkV4cG9ydCc7XG4gICAgZXhwb3J0cy5wZGZFeHBvcnRDb21wbGV0ZSA9ICdwZGZFeHBvcnRDb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5wZGZRdWVyeUNlbGxJbmZvID0gJ3BkZlF1ZXJ5Q2VsbEluZm8nO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2Jhc2UvY29uc3RhbnQuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL2FjdGlvbnMvZGF0YVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9yZW5kZXJlci9jb250ZW50LXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvaGVhZGVyLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2hlYWRlci1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvc3RhY2tlZC1jZWxsLXJlbmRlcmVyXCIsIFwiLi4vcmVuZGVyZXIvaW5kZW50LWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9jYXB0aW9uLWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9leHBhbmQtY2VsbC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2hlYWRlci1pbmRlbnQtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9kZXRhaWwtaGVhZGVyLWluZGVudC1yZW5kZXJlclwiLCBcIi4uL3JlbmRlcmVyL2RldGFpbC1leHBhbmQtY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9kYXRhXzEsIGVudW1fMSwgZGF0YV8xLCBldmVudHMsIHV0aWxfMSwgY29udGVudF9yZW5kZXJlcl8xLCBoZWFkZXJfcmVuZGVyZXJfMSwgY2VsbF9yZW5kZXJlcl8xLCBoZWFkZXJfY2VsbF9yZW5kZXJlcl8xLCBzdGFja2VkX2NlbGxfcmVuZGVyZXJfMSwgaW5kZW50X2NlbGxfcmVuZGVyZXJfMSwgY2FwdGlvbl9jZWxsX3JlbmRlcmVyXzEsIGV4cGFuZF9jZWxsX3JlbmRlcmVyXzEsIGhlYWRlcl9pbmRlbnRfcmVuZGVyZXJfMSwgZGV0YWlsX2hlYWRlcl9pbmRlbnRfcmVuZGVyZXJfMSwgZGV0YWlsX2V4cGFuZF9jZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJlbmRlcihwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBkYXRhXzEuRGF0YShwYXJlbnQpO1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gbG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2UgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgnYXJpYVNlcnZpY2UnKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmhlYWRlclJlbmRlcmVyID0gdGhpcy5yZW5kZXJlci5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5IZWFkZXIpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyLmdldFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQpO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJSZW5kZXJlci5yZW5kZXJQYW5lbCgpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIucmVuZGVyUGFuZWwoKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlclJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIucmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtcHR5Um93KGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaERhdGFNYW5hZ2VyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZSA9PT0gdm9pZCAwKSB7IGUgPSB7IHJlcXVlc3RUeXBlOiAncmVmcmVzaCcgfTsgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGUucmVxdWVzdFR5cGUgKyBcIi1iZWdpblwiLCBlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCBlKTtcbiAgICAgICAgICAgIGlmIChlLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaERhdGFNYW5hZ2VyKGUpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hDb21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUucmVmcmVzaERhdGFNYW5hZ2VyID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoYXJncyA9PT0gdm9pZCAwKSB7IGFyZ3MgPSB7fTsgfVxuICAgICAgICAgICAgaWYgKGFyZ3MucmVxdWVzdFR5cGUgIT09ICd2aXJ0dWFsc2Nyb2xsJykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNob3dTcGlubmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVhZHkgPSB0aGlzLmRhdGEuZGF0YU1hbmFnZXIucmVhZHk7XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldEJ1c3kodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQsIHRydWUpO1xuICAgICAgICAgICAgdmFyIGRhdGFNYW5hZ2VyID0gdGhpcy5kYXRhLmdldERhdGEoYXJncywgdGhpcy5kYXRhLmdlbmVyYXRlUXVlcnkoKS5yZXF1aXJlc0NvdW50KCkpO1xuICAgICAgICAgICAgaWYgKCFyZWFkeSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmRpc2FibGVQYWdlV2lzZUFnZ3JlZ2F0ZXMgJiYgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhTWFuYWdlciA9IGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLnZhbGlkYXRlR3JvdXBSZWNvcmRzKGUpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZGF0YU1hbmFnZXJTdWNjZXNzKGUsIGFyZ3MpOyB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmRhdGFNYW5hZ2VyRmFpbHVyZShlKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuc2VuZEJ1bGtSZXF1ZXN0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuZGF0YS5zYXZlQ2hhbmdlcyhhcmdzLmNoYW5nZXMsIHRoaXMucGFyZW50LmdldFByaW1hcnlLZXlGaWVsZE5hbWVzKClbMF0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5kYXRhTWFuYWdlci5kYXRhU291cmNlLm9mZmxpbmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hEYXRhTWFuYWdlcih7IHJlcXVlc3RUeXBlOiAnYmF0Y2hzYXZlJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmRtU3VjY2VzcyhlLCBhcmdzKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBfdGhpcy5kbUZhaWx1cmUoZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmRtU3VjY2VzcyA9IGZ1bmN0aW9uIChlLCBhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyU3VjY2VzcyhlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5kbUZhaWx1cmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlckZhaWx1cmUoZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUucmVuZGVyRW1wdHlSb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVtcHR5Um93KHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmVtcHR5Um93ID0gZnVuY3Rpb24gKGlzVHJpZ2dlcikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IHRoaXMuY29udGVudFJlbmRlcmVyLmdldFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICAgICAgICAgIHZhciB0cjtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRib2R5KTtcbiAgICAgICAgICAgIHRib2R5ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICAgICAgdHIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJywgeyBjbGFzc05hbWU6ICdlLWVtcHR5cm93JyB9KTtcbiAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGQnLCB7XG4gICAgICAgICAgICAgICAgaW5uZXJIVE1MOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0VtcHR5UmVjb3JkJyksXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgY29sc3BhbjogZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoLnRvU3RyaW5nKCkgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIucmVuZGVyRW1wdHkodGJvZHkpO1xuICAgICAgICAgICAgaWYgKGlzVHJpZ2dlcikge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmRhdGFCb3VuZCwge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLnVwZGF0ZUNvbHVtblR5cGUgPSBmdW5jdGlvbiAocmVjb3JkKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBkYXRhID0gcmVjb3JkICYmIHJlY29yZC5pdGVtcyA/IHJlY29yZC5pdGVtc1swXSA6IHJlY29yZDtcbiAgICAgICAgICAgIHZhciBmbXRyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3ZhbHVlRm9ybWF0dGVyJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZWoyX2Jhc2VfMi5nZXRWYWx1ZShjb2x1bW5zW2ldLmZpZWxkIHx8ICcnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb2xUeXBlRGVmID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb2x1bW5zW2ldLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0udHlwZSA9IHZhbHVlLmdldERheSA/ICh2YWx1ZS5nZXRIb3VycygpID4gMCB8fCB2YWx1ZS5nZXRNaW51dGVzKCkgPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuZ2V0U2Vjb25kcygpID4gMCB8fCB2YWx1ZS5nZXRNaWxsaXNlY29uZHMoKSA+IDAgPyAnZGF0ZXRpbWUnIDogJ2RhdGUnKSA6IHR5cGVvZiAodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKGNvbHVtbnNbaV0uZm9ybWF0KSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29sdW1uc1tpXS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0uc2V0Rm9ybWF0dGVyKGZtdHIuZ2V0Rm9ybWF0RnVuY3Rpb24oeyB0eXBlOiAnZGF0ZScsIHNrZWxldG9uOiBjb2x1bW5zW2ldLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0uc2V0UGFyc2VyKGZtdHIuZ2V0UGFyc2VyRnVuY3Rpb24oeyB0eXBlOiAnZGF0ZScsIHNrZWxldG9uOiBjb2x1bW5zW2ldLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uc1tpXS5zZXRGb3JtYXR0ZXIoZm10ci5nZXRGb3JtYXRGdW5jdGlvbih7IHR5cGU6ICdkYXRlVGltZScsIHNrZWxldG9uOiBjb2x1bW5zW2ldLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0uc2V0UGFyc2VyKGZtdHIuZ2V0UGFyc2VyRnVuY3Rpb24oeyB0eXBlOiAnZGF0ZVRpbWUnLCBza2VsZXRvbjogY29sdW1uc1tpXS5mb3JtYXQgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnNldEZvcm1hdHRlcihmbXRyLmdldEZvcm1hdEZ1bmN0aW9uKHsgZm9ybWF0OiBjb2x1bW5zW2ldLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0uc2V0UGFyc2VyKGZtdHIuZ2V0UGFyc2VyRnVuY3Rpb24oeyBmb3JtYXQ6IGNvbHVtbnNbaV0uZm9ybWF0IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWNvbHVtbnNbaV0uZm9ybWF0ICYmIGNvbHVtbnNbaV0udHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnNbaV0uc2V0UGFyc2VyKGZtdHIuZ2V0UGFyc2VyRnVuY3Rpb24oeyBmb3JtYXQ6ICduMicgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zW2ldLnR5cGUgPSBjb2x1bW5zW2ldLnR5cGUgfHwgbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuZGF0YU1hbmFnZXJTdWNjZXNzID0gZnVuY3Rpb24gKGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZm9yZURhdGFCb3VuZCwgZSk7XG4gICAgICAgICAgICB2YXIgbGVuID0gT2JqZWN0LmtleXMoZS5yZXN1bHQpLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbHRpcERlc3Ryb3ksIHt9KTtcbiAgICAgICAgICAgIGdPYmouY3VycmVudFZpZXdEYXRhID0gZS5yZXN1bHQ7XG4gICAgICAgICAgICBpZiAoIWxlbiAmJiBlLmNvdW50ICYmIGdPYmouYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICBnT2JqLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA9IE1hdGguY2VpbChlLmNvdW50IC8gZ09iai5wYWdlU2V0dGluZ3MucGFnZVNpemUpO1xuICAgICAgICAgICAgICAgIGdPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aCAmJiBsZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZXNPbkluaXRpYWxSZW5kZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDb2xUeXBlRGVmKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb2x1bW5UeXBlKGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5kYXRhUmVhZHksIGVqMl9iYXNlXzIuZXh0ZW5kKHsgY291bnQ6IGUuY291bnQsIHJlc3VsdDogZS5yZXN1bHQsIGFnZ3JlZ2F0ZXM6IGUuYWdncmVnYXRlcyB9LCBhcmdzKSk7XG4gICAgICAgICAgICBpZiAoZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoIHx8IChhcmdzICYmIGFyZ3MucmVxdWVzdFR5cGUgPT09ICd1bmdyb3VwaW5nJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlclJlbmRlcmVyLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlZnJlc2hDb250ZW50Um93cyhhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQodGhpcy5sMTBuLmdldENvbnN0YW50KCdFbXB0eURhdGFTb3VyY2VFcnJvcicpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlci5zZXRSb3dFbGVtZW50cyhbXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJFbXB0eVJvdygpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSAoYXJncy5yZXF1ZXN0VHlwZSB8fCAnJykudG9Mb3dlckNhc2UoKSArICctY29tcGxldGUnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoYWN0aW9uLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5kYXRhTWFuYWdlckZhaWx1cmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdENoaWxkLCB7IGJ1c3k6IGZhbHNlLCBpbnZhbGlkOiB0cnVlIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uRmFpbHVyZSwgeyBlcnJvcjogZSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmN1cnJlbnRWaWV3RGF0YSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJFbXB0eVJvdygpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS51cGRhdGVzT25Jbml0aWFsUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuYnVpbGRDb2x1bW5zKGUucmVzdWx0WzBdKTtcbiAgICAgICAgICAgIHV0aWxfMS5wcmVwYXJlQ29sdW1ucyh0aGlzLnBhcmVudC5jb2x1bW5zKTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUmVuZGVyZXIucmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmF1dG9Db2wsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVuZGVyLnByb3RvdHlwZS5idWlsZENvbHVtbnMgPSBmdW5jdGlvbiAocmVjb3JkKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IE9iamVjdC5rZXlzKHJlY29yZCk7XG4gICAgICAgICAgICB2YXIgY29scyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb2xzW2ldID0geyAnZmllbGQnOiBjb2x1bW5zW2ldIH07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHNbaV0ud2lkdGggPSAhZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2xzW2ldLndpZHRoKSA/IGNvbHNbaV0ud2lkdGggOiAyMDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuY29sdW1ucyA9IGNvbHM7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUuaW5zdGFudGlhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyLCBuZXcgaGVhZGVyX3JlbmRlcmVyXzEuSGVhZGVyUmVuZGVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCwgbmV3IGNvbnRlbnRfcmVuZGVyZXJfMS5Db250ZW50UmVuZGVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIHZhciBjZWxscmVuZGVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5IZWFkZXIsIG5ldyBoZWFkZXJfY2VsbF9yZW5kZXJlcl8xLkhlYWRlckNlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRGF0YSwgbmV3IGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLlN0YWNrZWRIZWFkZXIsIG5ldyBzdGFja2VkX2NlbGxfcmVuZGVyZXJfMS5TdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5JbmRlbnQsIG5ldyBpbmRlbnRfY2VsbF9yZW5kZXJlcl8xLkluZGVudENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuR3JvdXBDYXB0aW9uLCBuZXcgY2FwdGlvbl9jZWxsX3JlbmRlcmVyXzEuR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5Hcm91cENhcHRpb25FbXB0eSwgbmV3IGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xLkdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5FeHBhbmQsIG5ldyBleHBhbmRfY2VsbF9yZW5kZXJlcl8xLkV4cGFuZENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuSGVhZGVySW5kZW50LCBuZXcgaGVhZGVyX2luZGVudF9yZW5kZXJlcl8xLkhlYWRlckluZGVudENlbGxSZW5kZXJlcih0aGlzLnBhcmVudCwgdGhpcy5sb2NhdG9yKSk7XG4gICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuU3RhY2tlZEhlYWRlciwgbmV3IHN0YWNrZWRfY2VsbF9yZW5kZXJlcl8xLlN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICAgICAgY2VsbHJlbmRlci5hZGRDZWxsUmVuZGVyZXIoZW51bV8xLkNlbGxUeXBlLkRldGFpbEhlYWRlciwgbmV3IGRldGFpbF9oZWFkZXJfaW5kZW50X3JlbmRlcmVyXzEuRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIGNlbGxyZW5kZXIuYWRkQ2VsbFJlbmRlcmVyKGVudW1fMS5DZWxsVHlwZS5EZXRhaWxFeHBhbmQsIG5ldyBkZXRhaWxfZXhwYW5kX2NlbGxfcmVuZGVyZXJfMS5EZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcikpO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbExvYWQsIHRoaXMuaW5zdGFudGlhdGVSZW5kZXJlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMubW9kZWxDaGFuZ2VkLCB0aGlzLnJlZnJlc2gsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJlZnJlc2hDb21wbGV0ZSwgdGhpcy5yZWZyZXNoQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmJ1bGtTYXZlLCB0aGlzLnNlbmRCdWxrUmVxdWVzdCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUudmFsaWRhdGVHcm91cFJlY29yZHMgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGUucmVzdWx0Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBncm91cDAgPSBlLnJlc3VsdFswXTtcbiAgICAgICAgICAgIHZhciBncm91cE4gPSBlLnJlc3VsdFtpbmRleF07XG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlID0gW107XG4gICAgICAgICAgICB2YXIgYWRkV2hlcmUgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICBbZ3JvdXAwLCBncm91cE5dLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVkaWNhdGUucHVzaChuZXcgZWoyX2RhdGFfMS5QcmVkaWNhdGUoJ2ZpZWxkJywgJz09JywgZ3JvdXAuZmllbGQpLmFuZChfdGhpcy5nZXRQcmVkaWNhdGUoJ2tleScsICdlcXVhbCcsIGdyb3VwLmtleSkpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpbnB1dC53aGVyZShlajJfZGF0YV8xLlByZWRpY2F0ZS5vcihwcmVkaWNhdGUpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpO1xuICAgICAgICAgICAgYWRkV2hlcmUocXVlcnkpO1xuICAgICAgICAgICAgdmFyIGN1ckRtID0gbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoZS5yZXN1bHQpO1xuICAgICAgICAgICAgdmFyIGN1ckZpbHRlciA9IGN1ckRtLmV4ZWN1dGVMb2NhbChxdWVyeSk7XG4gICAgICAgICAgICB2YXIgbmV3UXVlcnkgPSB0aGlzLmRhdGEuZ2VuZXJhdGVRdWVyeSh0cnVlKTtcbiAgICAgICAgICAgIHZhciByUHJlZGljYXRlID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLmlzUmVtb3RlKCkpIHtcbiAgICAgICAgICAgICAgICBbZ3JvdXAwLCBncm91cE5dLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByUHJlZGljYXRlLnB1c2goX3RoaXMuZ2V0UHJlZGljYXRlKGdyb3VwLmZpZWxkLCAnZXF1YWwnLCBncm91cC5rZXkpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBuZXdRdWVyeS53aGVyZShlajJfZGF0YV8xLlByZWRpY2F0ZS5vcihyUHJlZGljYXRlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRXaGVyZShuZXdRdWVyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgZWoyX2RhdGFfMS5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhpcy5kYXRhLmdldERhdGEoe30sIG5ld1F1ZXJ5KS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlR3JvdXBJbmZvKGN1ckZpbHRlciwgci5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9O1xuICAgICAgICBSZW5kZXIucHJvdG90eXBlLmdldFByZWRpY2F0ZSA9IGZ1bmN0aW9uIChrZXksIG9wZXJhdG9yLCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuZ2V0RGF0ZVByZWRpY2F0ZSh7IGZpZWxkOiBrZXksIG9wZXJhdG9yOiBvcGVyYXRvciwgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShrZXksIG9wZXJhdG9yLCB2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlci5wcm90b3R5cGUudXBkYXRlR3JvdXBJbmZvID0gZnVuY3Rpb24gKGN1cnJlbnQsIHVudG91Y2hlZCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkbSA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHVudG91Y2hlZCk7XG4gICAgICAgICAgICBjdXJyZW50LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgICAgIHZhciB1R3JvdXAgPSBkbS5leGVjdXRlTG9jYWwobmV3IGVqMl9kYXRhXzEuUXVlcnkoKVxuICAgICAgICAgICAgICAgICAgICAud2hlcmUobmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKCdmaWVsZCcsICc9PScsIGVsZW1lbnQuZmllbGQpLmFuZChfdGhpcy5nZXRQcmVkaWNhdGUoJ2tleScsICdlcXVhbCcsIGVsZW1lbnQua2V5KSkpKVswXTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNvdW50ID0gdUdyb3VwLmNvdW50O1xuICAgICAgICAgICAgICAgIHZhciBpdGVtR3JvdXAgPSBlbGVtZW50Lml0ZW1zO1xuICAgICAgICAgICAgICAgIHZhciB1R3JvdXBJdGVtID0gdUdyb3VwLml0ZW1zO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtR3JvdXAuR3JvdXBHdWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXRlbXMgPSBfdGhpcy51cGRhdGVHcm91cEluZm8oZWxlbWVudC5pdGVtcywgdUdyb3VwLml0ZW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LmFnZ3JlZ2F0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3cuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eXBlcyA9IGNvbHVtbi50eXBlIGluc3RhbmNlb2YgQXJyYXkgPyBjb2x1bW4udHlwZSA6IFtjb2x1bW4udHlwZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGNvbHVtbi5maWVsZCArICcgLSAnICsgdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFnZ3JlZ2F0ZXNba2V5XSA9IHV0aWxfMS5jYWxjdWxhdGVBZ2dyZWdhdGUodHlwZSwgaXRlbUdyb3VwLmxldmVsID8gdUdyb3VwSXRlbS5yZWNvcmRzIDogdUdyb3VwLml0ZW1zLCBjb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUmVuZGVyID0gUmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL3JlbmRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi9yb3ctcmVuZGVyZXJcIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4uL21vZGVscy9yb3dcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlbnVtXzEsIHJvd19yZW5kZXJlcl8xLCBjZWxsXzEsIHJvd18xLCBldmVudHMsIGVqMl9iYXNlXzQsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSGVhZGVyUmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gSGVhZGVyUmVuZGVyKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKCEoZ09iai5hbGxvd1Jlb3JkZXJpbmcgfHwgZ09iai5hbGxvd0dyb3VwaW5nKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB2aXN1YWxFbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtY2xvbmVwcm9wZXJ0aWVzIGUtZHJhZ2Nsb25lIGUtaGVhZGVyY2xvbmUnIH0pO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnNlbmRlci50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNlbGwnKSA/IHRhcmdldCA6XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJjZWxsZGl2ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2Jyk7XG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudC50ZXh0Q29udGVudCA9IGhlYWRlcmNlbGxkaXYgP1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENvbHVtbkJ5VWlkKGhlYWRlcmNlbGxkaXYuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSkuaGVhZGVyVGV4dCA6IGVsZW1lbnQuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQuc3R5bGUud2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnN0eWxlLmhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50LnN0eWxlLmxpbmVIZWlnaHQgPSAoaGVpZ2h0IC0gNikudG9TdHJpbmcoKSArICdweCc7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlVaWQoZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQuc2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnLCBfdGhpcy5jb2x1bW4udWlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmFwcGVuZENoaWxkKHZpc3VhbEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB2aXN1YWxFbGVtZW50O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB7IHRhcmdldDogZS50YXJnZXQsIGNvbHVtbjogX3RoaXMuY29sdW1uLCBldmVudDogZS5ldmVudCB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbG9zZXN0ID0gZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWdyaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lRWxlbWVudCA9IF90aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNsb25lcHJvcGVydGllcycpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNsb3Nlc3QgfHwgY2xvc2VzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09IGdPYmouZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLW5vdGFsbG93ZWRjdXInXSwgWydlLWRlZmF1bHRjdXInXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd1Jlb3JkZXJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtcmVvcmRlcnVwYXJyb3cnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1yZW9yZGVyZG93bmFycm93Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuY29sdW1uRHJhZywgeyB0YXJnZXQ6IGUudGFyZ2V0LCBjb2x1bW46IF90aGlzLmNvbHVtbiwgZXZlbnQ6IGUuZXZlbnQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0b3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBjYW5jZWw7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgaWYgKCghdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpICYmICF1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncm91cGRyb3BhcmVhJykpIHx8XG4gICAgICAgICAgICAgICAgICAgICghZ09iai5hbGxvd1Jlb3JkZXJpbmcgJiYgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtaGVhZGVyY2VsbCcpKSB8fFxuICAgICAgICAgICAgICAgICAgICAoIWUuaGVscGVyLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykgJiYgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JvdXBkcm9wYXJlYScpKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShlLmhlbHBlcik7XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5jb2x1bW5EcmFnU3RvcCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCBldmVudDogZS5ldmVudCwgY29sdW1uOiBfdGhpcy5jb2x1bW4sIGNhbmNlbDogY2FuY2VsIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHVpZCA9IGUuZHJvcHBlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgY2xvc2VzdCA9IGVqMl9iYXNlXzIuY2xvc2VzdChlLnRhcmdldCwgJy5lLWdyaWQnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShlLmRyb3BwZWRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VzdCAmJiBjbG9zZXN0LmdldEF0dHJpYnV0ZSgnaWQnKSAhPT0gZ09iai5lbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSB8fFxuICAgICAgICAgICAgICAgICAgICAhKGdPYmouYWxsb3dSZW9yZGVyaW5nIHx8IGdPYmouYWxsb3dHcm91cGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMuaGVhZGVyRHJvcCwgeyB0YXJnZXQ6IGUudGFyZ2V0LCB1aWQ6IHVpZCB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2FyaWFTZXJ2aWNlJyk7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnd2lkdGhTZXJ2aWNlJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMuc2V0VmlzaWJsZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLnJlZnJlc2hVSSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5yZW5kZXJQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkaGVhZGVyJyB9KTtcbiAgICAgICAgICAgIHZhciBpbm5lckRpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWhlYWRlcmNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlubmVyRGl2KTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGFuZWwoZGl2KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJEaXYgPSB0aGlzLmdldFBhbmVsKCk7XG4gICAgICAgICAgICBoZWFkZXJEaXYuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVIZWFkZXJUYWJsZSgpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VGFibGUoaGVhZGVyRGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlJykpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplSGVhZGVyRHJhZygpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplSGVhZGVyRHJvcCgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlclBhbmVsO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnNldFBhbmVsID0gZnVuY3Rpb24gKHBhbmVsKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlclBhbmVsID0gcGFuZWw7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJUYWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5zZXRUYWJsZSA9IGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJUYWJsZSA9IHRhYmxlO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldENvbEdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sZ3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuc2V0Q29sR3JvdXAgPSBmdW5jdGlvbiAoY29sR3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbGdyb3VwID0gY29sR3JvdXA7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IHRoaXMuZ2V0VGFibGUoKTtcbiAgICAgICAgICAgIHJldHVybiB0YWJsZS50SGVhZC5yb3dzO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmNyZWF0ZUhlYWRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5jcmVhdGVUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBpbm5lckRpdi5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICByZXR1cm4gaW5uZXJEaXY7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuY3JlYXRlVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7IGNsYXNzTmFtZTogJ2UtdGFibGUnLCBhdHRyczogeyBjZWxsc3BhY2luZzogJzAuMjVweCcsIHJvbGU6ICdncmlkJyB9IH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB2YXIgZmluZEhlYWRlclJvdyA9IHRoaXMuY3JlYXRlSGVhZGVyQ29udGVudCgpO1xuICAgICAgICAgICAgdmFyIHRoZWFkID0gZmluZEhlYWRlclJvdy50aGVhZDtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGJvZHknLCB7IGNsYXNzTmFtZTogJ2UtaGlkZScgfSk7XG4gICAgICAgICAgICB2YXIgY29sR3JvdXAgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbGdyb3VwJyk7XG4gICAgICAgICAgICB2YXIgcm93Qm9keSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgIHZhciBib2R5Q2VsbDtcbiAgICAgICAgICAgIHZhciByb3dzID0gZmluZEhlYWRlclJvdy5yb3dzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuXzEgPSByb3dzW2ldLmNlbGxzLmxlbmd0aDsgaiA8IGxlbl8xOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSByb3dzW2ldLmNlbGxzW2pdO1xuICAgICAgICAgICAgICAgICAgICBib2R5Q2VsbCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgICAgICAgICAgcm93Qm9keS5hcHBlbmRDaGlsZChib2R5Q2VsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dGaWx0ZXJpbmcgfHwgZ09iai5hbGxvd1NvcnRpbmcgfHwgZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgdGFibGUuY2xhc3NMaXN0LmFkZCgnZS1zb3J0ZmlsdGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbEdyb3VwKGNvbEdyb3VwKTtcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHJvd0JvZHkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhpcy5zZXRDb2xHcm91cChjb2xHcm91cCkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhlYWQpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRhYmxlLCB7IGNvbGNvdW50OiBnT2JqLmdldENvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0YWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5jcmVhdGVIZWFkZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgdGhlYWQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJyk7XG4gICAgICAgICAgICB2YXIgY29sSGVhZGVyID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCd0cicsIHsgY2xhc3NOYW1lOiAnZS1jb2x1bW5oZWFkZXInIH0pO1xuICAgICAgICAgICAgdmFyIHJvd1JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIGVudW1fMS5DZWxsVHlwZS5IZWFkZXIpO1xuICAgICAgICAgICAgcm93UmVuZGVyZXIuZWxlbWVudCA9IGNvbEhlYWRlcjtcbiAgICAgICAgICAgIHZhciByb3dzID0gW107XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93O1xuICAgICAgICAgICAgdGhpcy5jb2xEZXB0aCA9IHRoaXMuZ2V0T2JqRGVwdGgoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmNvbERlcHRoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICByb3dzW2ldID0gdGhpcy5nZW5lcmF0ZVJvdyhpKTtcbiAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dzID0gdGhpcy5lbnN1cmVDb2x1bW5zKHJvd3MpO1xuICAgICAgICAgICAgcm93cyA9IHRoaXMuZ2V0SGVhZGVyQ2VsbHMocm93cyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5jb2xEZXB0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUm93ID0gcm93UmVuZGVyZXIucmVuZGVyKHJvd3NbaV0sIGNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIHRoZWFkLmFwcGVuZENoaWxkKGhlYWRlclJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZmluZEhlYWRlclJvdyA9IHtcbiAgICAgICAgICAgICAgICB0aGVhZDogdGhlYWQsXG4gICAgICAgICAgICAgICAgcm93czogcm93c1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBmaW5kSGVhZGVyUm93O1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnVwZGF0ZUNvbEdyb3VwID0gZnVuY3Rpb24gKGNvbEdyb3VwKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIHZhciBjb2w7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5kZXhlcy5pbmRleE9mKGkpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29sID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdjb2wnKTtcbiAgICAgICAgICAgICAgICAgICAgY29sR3JvdXAuYXBwZW5kQ2hpbGQoY29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgfHwgdGhpcy5wYXJlbnQuY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgY29sID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdjb2wnKTtcbiAgICAgICAgICAgICAgICBjb2xHcm91cC5hcHBlbmRDaGlsZChjb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb2wgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2NvbCcpO1xuICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLnZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0U3R5bGVBdHRyaWJ1dGUoY29sLCB7ICdkaXNwbGF5JzogJ25vbmUnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2xHcm91cC5hcHBlbmRDaGlsZChjb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbEdyb3VwO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmVuc3VyZUNvbHVtbnMgPSBmdW5jdGlvbiAocm93cykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBsZW5fMiA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgYyA8IGxlbl8yOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2YoYykgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5IZWFkZXJJbmRlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ09iai5kZXRhaWxUZW1wbGF0ZSB8fCBnT2JqLmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5EZXRhaWxIZWFkZXIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZXRIZWFkZXJDZWxscyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpIDogdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93cyA9IHRoaXMuYXBwZW5kQ2VsbHMoY29sc1tpXSwgcm93cywgMCwgaSA9PT0gMCwgZmFsc2UsIGkgPT09IChsZW4gLSAxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5hcHBlbmRDZWxscyA9IGZ1bmN0aW9uIChjb2xzLCByb3dzLCBpbmRleCwgaXNGaXJzdE9iaiwgaXNGaXJzdENvbCwgaXNMYXN0Q29sKSB7XG4gICAgICAgICAgICB2YXIgbGFzdENvbCA9IGlzTGFzdENvbCA/ICdlLWxhc3RjZWxsJyA6ICcnO1xuICAgICAgICAgICAgaWYgKCFjb2xzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICByb3dzW2luZGV4XS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKGNvbHMsIGVudW1fMS5DZWxsVHlwZS5IZWFkZXIsIHRoaXMuY29sRGVwdGggLSBpbmRleCwgKGlzRmlyc3RPYmogPyAnJyA6IChpc0ZpcnN0Q29sID8gJ2UtZmlyc3RjZWxsJyA6ICcnKSkgKyBsYXN0Q29sLCBpbmRleCwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeVVpZChjb2xzLnVpZCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjb2xTcGFuID0gdGhpcy5nZXRDZWxsQ250KGNvbHMsIDApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3NbaW5kZXhdLmNlbGxzLnB1c2gobmV3IGNlbGxfMS5DZWxsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxUeXBlOiBlbnVtXzEuQ2VsbFR5cGUuU3RhY2tlZEhlYWRlciwgY29sdW1uOiBjb2xzLCBjb2xTcGFuOiBjb2xTcGFuXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICByb3dzID0gdGhpcy5hcHBlbmRDZWxscyhjb2xzLmNvbHVtbnNbaV0sIHJvd3MsIGluZGV4ICsgMSwgaXNGaXJzdE9iaiwgaSA9PT0gMCwgaSA9PT0gKGxlbiAtIDEpICYmIGlzTGFzdENvbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2VuZXJhdGVSb3cgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgcm93XzEuUm93KHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGwgPSBmdW5jdGlvbiAoY29sdW1uLCBjZWxsVHlwZSwgcm93U3BhbiwgY2xhc3NOYW1lLCByb3dJbmRleCwgY29sSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBjb2x1bW4udmlzaWJsZSxcbiAgICAgICAgICAgICAgICAnaXNEYXRhQ2VsbCc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICdpc1RlbXBsYXRlJzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmhlYWRlclRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAncm93SUQnOiAnJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogY29sdW1uLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6IGNlbGxUeXBlLFxuICAgICAgICAgICAgICAgICdyb3dTcGFuJzogcm93U3BhbixcbiAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzogY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICdpbmRleCc6IHJvd0luZGV4LFxuICAgICAgICAgICAgICAgICdjb2xJbmRleCc6IGNvbEluZGV4XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFvcHQucm93U3BhbiB8fCBvcHQucm93U3BhbiA8IDIpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0LnJvd1NwYW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5nZXRSb3dzKCkpO1xuICAgICAgICAgICAgdmFyIGRpc3BsYXlWYWwgPSAnJztcbiAgICAgICAgICAgIHZhciBpZHg7XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQ7XG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMCwgY2xlbiA9IGNvbHVtbnMubGVuZ3RoOyBjIDwgY2xlbjsgYysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNbY107XG4gICAgICAgICAgICAgICAgaWR4ID0gdGhpcy5wYXJlbnQuZ2V0Tm9ybWFsaXplZENvbHVtbkluZGV4KGNvbHVtbi51aWQpO1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVZhbCA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmdldENvbEdyb3VwKCkuY2hpbGROb2Rlc1tpZHhdLCB7ICdkaXNwbGF5JzogZGlzcGxheVZhbCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hVSSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hVSSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJEaXYgPSB0aGlzLmdldFBhbmVsKCk7XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB0aGlzLmdldFRhYmxlKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmdldFRhYmxlKCkpO1xuICAgICAgICAgICAgdGFibGUucmVtb3ZlQ2hpbGQodGFibGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0YWJsZS5yZW1vdmVDaGlsZCh0YWJsZS5jaGlsZE5vZGVzWzBdKTtcbiAgICAgICAgICAgIHZhciBjb2xHcm91cCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnY29sZ3JvdXAnKTtcbiAgICAgICAgICAgIHZhciBmaW5kSGVhZGVyUm93ID0gdGhpcy5jcmVhdGVIZWFkZXJDb250ZW50KCk7XG4gICAgICAgICAgICB0YWJsZS5pbnNlcnRCZWZvcmUoZmluZEhlYWRlclJvdy50aGVhZCwgdGFibGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbEdyb3VwKGNvbEdyb3VwKTtcbiAgICAgICAgICAgIHRhYmxlLmluc2VydEJlZm9yZSh0aGlzLnNldENvbEdyb3VwKGNvbEdyb3VwKSwgdGFibGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKHRhYmxlKTtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kQ29udGVudCh0YWJsZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNvbEdyb3VwUmVmcmVzaCwge30pO1xuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2Uuc2V0V2lkdGhUb0NvbHVtbnMoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUhlYWRlckRyYWcoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB7fSk7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwoaGVhZGVyRGl2LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyLmUtY29sdW1uaGVhZGVyJykpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93VGV4dFdyYXAgJiYgdGhpcy5wYXJlbnQudGV4dFdyYXBTZXR0aW5ncy53cmFwTW9kZSA9PT0gJ2hlYWRlcicpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEud3JhcChyb3dzLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5hcHBlbmRDb250ZW50ID0gZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuZ2V0T2JqRGVwdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbWF4ID0gMDtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlcHRoID0gdGhpcy5jaGVja0RlcHRoKGNvbHNbaV0sIDApO1xuICAgICAgICAgICAgICAgIGlmIChtYXggPCBkZXB0aCkge1xuICAgICAgICAgICAgICAgICAgICBtYXggPSBkZXB0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWF4ICsgMTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyUmVuZGVyLnByb3RvdHlwZS5jaGVja0RlcHRoID0gZnVuY3Rpb24gKGNvbCwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChjb2wuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbC5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5jaGVja0RlcHRoKGNvbC5jb2x1bW5zW2ldLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJSZW5kZXIucHJvdG90eXBlLmdldENlbGxDbnQgPSBmdW5jdGlvbiAoY29sLCBjbnQpIHtcbiAgICAgICAgICAgIGlmIChjb2wuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2wuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjbnQgPSB0aGlzLmdldENlbGxDbnQoY29sLmNvbHVtbnNbaV0sIGNudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuaW5pdGlhbGl6ZUhlYWRlckRyYWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCEodGhpcy5wYXJlbnQuYWxsb3dSZW9yZGVyaW5nIHx8ICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nICYmIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3Muc2hvd0Ryb3BBcmVhKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwoZ09iai5nZXRIZWFkZXJDb250ZW50KCkucXVlcnlTZWxlY3RvckFsbCgnLmUtY29sdW1uaGVhZGVyJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGhlYWRlclJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZHJhZyA9IG5ldyBlajJfYmFzZV80LkRyYWdnYWJsZShoZWFkZXJSb3dzW2ldLCB7XG4gICAgICAgICAgICAgICAgICAgIGRyYWdUYXJnZXQ6ICcuZS1oZWFkZXJjZWxsJyxcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2U6IDUsXG4gICAgICAgICAgICAgICAgICAgIGhlbHBlcjogdGhpcy5oZWxwZXIsXG4gICAgICAgICAgICAgICAgICAgIGRyYWdTdGFydDogdGhpcy5kcmFnU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIGRyYWc6IHRoaXMuZHJhZyxcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1N0b3A6IHRoaXMuZHJhZ1N0b3AsXG4gICAgICAgICAgICAgICAgICAgIGFib3J0OiAnLmUtcmhhbmRsZXInXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlclJlbmRlci5wcm90b3R5cGUuaW5pdGlhbGl6ZUhlYWRlckRyb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRyb3AgPSBuZXcgZWoyX2Jhc2VfNC5Ecm9wcGFibGUoZ09iai5nZXRIZWFkZXJDb250ZW50KCksIHtcbiAgICAgICAgICAgICAgICBhY2NlcHQ6ICcuZS1kcmFnY2xvbmUnLFxuICAgICAgICAgICAgICAgIGRyb3A6IHRoaXMuZHJvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIZWFkZXJSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkhlYWRlclJlbmRlciA9IEhlYWRlclJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9oZWFkZXItcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9lbnVtXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgY29uc3RhbnRfMSwgdXRpbF8xLCBlbnVtXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJvd1JlbmRlcmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUm93UmVuZGVyZXIoc2VydmljZUxvY2F0b3IsIGNlbGxUeXBlLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgndHInLCB7IGF0dHJzOiB7IHJvbGU6ICdyb3cnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLmNlbGxUeXBlID0gY2VsbFR5cGU7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBSb3dSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHJvdywgY29sdW1ucywgYXR0cmlidXRlcywgcm93VGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZnJlc2hSb3cocm93LCBjb2x1bW5zLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFJvd1JlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKHJvdywgY29sdW1ucywgaXNDaGFuZ2VkLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSkge1xuICAgICAgICAgICAgaWYgKGlzQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHJvdy5kYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHJvdy5jaGFuZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXVpZD0nICsgcm93LnVpZCArICddJyk7XG4gICAgICAgICAgICB2YXIgdHIgPSB0aGlzLnJlZnJlc2hSb3cocm93LCBjb2x1bW5zLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSk7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXS5zbGljZS5jYWxsKHRyLmNlbGxzKTtcbiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNlbGxzXzEgPSBjZWxsczsgX2kgPCBjZWxsc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gY2VsbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUm93UmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hSb3cgPSBmdW5jdGlvbiAocm93LCBjb2x1bW5zLCBhdHRyaWJ1dGVzLCByb3dUZW1wbGF0ZSkge1xuICAgICAgICAgICAgdmFyIHRyID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdmFyIHJvd0FyZ3MgPSB7IGRhdGE6IHJvdy5kYXRhIH07XG4gICAgICAgICAgICB2YXIgY2VsbEFyZ3MgPSB7IGRhdGE6IHJvdy5kYXRhIH07XG4gICAgICAgICAgICB2YXIgYXR0ckNvcHkgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgYXR0cmlidXRlcywge30pO1xuICAgICAgICAgICAgaWYgKHJvdy5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICByb3cuaXNTZWxlY3RlZCA9IHRoaXMucGFyZW50LmdldFNlbGVjdGVkUm93SW5kZXhlcygpLmluZGV4T2Yocm93LmluZGV4KSA+IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5idWlsZEF0dHJpYnV0ZUZyb21Sb3codHIsIHJvdyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXModHIsIGF0dHJDb3B5KTtcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXModHIsIHJvdy5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHZhciBjZWxsUmVuZGVyZXJGYWN0ID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdjZWxsUmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcm93LmNlbGxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGwgPSByb3cuY2VsbHNbaV07XG4gICAgICAgICAgICAgICAgY2VsbC5pc1NlbGVjdGVkID0gcm93LmlzU2VsZWN0ZWQ7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxSZW5kZXJlciA9IGNlbGxSZW5kZXJlckZhY3QuZ2V0Q2VsbFJlbmRlcmVyKHJvdy5jZWxsc1tpXS5jZWxsVHlwZSB8fCBlbnVtXzEuQ2VsbFR5cGUuRGF0YSk7XG4gICAgICAgICAgICAgICAgdmFyIHRkID0gY2VsbFJlbmRlcmVyLnJlbmRlcihyb3cuY2VsbHNbaV0sIHJvdy5kYXRhLCB7ICdpbmRleCc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHJvdy5pbmRleCkgPyByb3cuaW5kZXgudG9TdHJpbmcoKSA6ICcnIH0pO1xuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICAgICAgICAgICAgICBpZiAocm93LmNlbGxzW2ldLmNlbGxUeXBlID09PSBlbnVtXzEuQ2VsbFR5cGUuRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGNvbnN0YW50XzEucXVlcnlDZWxsSW5mbywgZWoyX2Jhc2VfMS5leHRlbmQoY2VsbEFyZ3MsIHsgY2VsbDogdGQsIGNvbHVtbjogY2VsbC5jb2x1bW4gfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihjb25zdGFudF8xLnJvd0RhdGFCb3VuZCwgZWoyX2Jhc2VfMS5leHRlbmQocm93QXJncywgeyByb3c6IHRyIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cuY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICB0ci5jbGFzc0xpc3QuYWRkKHJvdy5jc3NDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHI7XG4gICAgICAgIH07XG4gICAgICAgIFJvd1JlbmRlcmVyLnByb3RvdHlwZS5idWlsZEF0dHJpYnV0ZUZyb21Sb3cgPSBmdW5jdGlvbiAodHIsIHJvdykge1xuICAgICAgICAgICAgdmFyIGF0dHIgPSB7fTtcbiAgICAgICAgICAgIHZhciBwcm9wID0geyAncm93aW5kZXgnOiAnYXJpYS1yb3dpbmRleCcsICdkYXRhVUlEJzogJ2RhdGEtdWlkJywgJ2FyaWFTZWxlY3RlZCc6ICdhcmlhLXNlbGVjdGVkJyB9O1xuICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSBbXTtcbiAgICAgICAgICAgIGlmIChyb3cuaXNEYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdlLXJvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5pc0FsdFJvdykge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS1hbHRyb3cnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChyb3cuaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgYXR0cltwcm9wLnJvd2luZGV4XSA9IHJvdy5pbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cucm93U3Bhbikge1xuICAgICAgICAgICAgICAgIGF0dHIucm93U3BhbiA9IHJvdy5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy51aWQpIHtcbiAgICAgICAgICAgICAgICBhdHRyW3Byb3AuZGF0YVVJRF0gPSByb3cudWlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgYXR0cltwcm9wLmFyaWFTZWxlY3RlZF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdy52aXNpYmxlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRyLmNsYXNzID0gY2xhc3NlcztcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXModHIsIGF0dHIpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUm93UmVuZGVyZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJvd1JlbmRlcmVyID0gUm93UmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvcm93LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDZWxsVHlwZTtcbiAgICAoZnVuY3Rpb24gKENlbGxUeXBlKSB7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRGF0YVwiXSA9IDBdID0gXCJEYXRhXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiSGVhZGVyXCJdID0gMV0gPSBcIkhlYWRlclwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIlN1bW1hcnlcIl0gPSAyXSA9IFwiU3VtbWFyeVwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkdyb3VwU3VtbWFyeVwiXSA9IDNdID0gXCJHcm91cFN1bW1hcnlcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJDYXB0aW9uU3VtbWFyeVwiXSA9IDRdID0gXCJDYXB0aW9uU3VtbWFyeVwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkZpbHRlclwiXSA9IDVdID0gXCJGaWx0ZXJcIjtcbiAgICAgICAgQ2VsbFR5cGVbQ2VsbFR5cGVbXCJJbmRlbnRcIl0gPSA2XSA9IFwiSW5kZW50XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiR3JvdXBDYXB0aW9uXCJdID0gN10gPSBcIkdyb3VwQ2FwdGlvblwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkdyb3VwQ2FwdGlvbkVtcHR5XCJdID0gOF0gPSBcIkdyb3VwQ2FwdGlvbkVtcHR5XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRXhwYW5kXCJdID0gOV0gPSBcIkV4cGFuZFwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkhlYWRlckluZGVudFwiXSA9IDEwXSA9IFwiSGVhZGVySW5kZW50XCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiU3RhY2tlZEhlYWRlclwiXSA9IDExXSA9IFwiU3RhY2tlZEhlYWRlclwiO1xuICAgICAgICBDZWxsVHlwZVtDZWxsVHlwZVtcIkRldGFpbEhlYWRlclwiXSA9IDEyXSA9IFwiRGV0YWlsSGVhZGVyXCI7XG4gICAgICAgIENlbGxUeXBlW0NlbGxUeXBlW1wiRGV0YWlsRXhwYW5kXCJdID0gMTNdID0gXCJEZXRhaWxFeHBhbmRcIjtcbiAgICB9KShDZWxsVHlwZSA9IGV4cG9ydHMuQ2VsbFR5cGUgfHwgKGV4cG9ydHMuQ2VsbFR5cGUgPSB7fSkpO1xuICAgIHZhciBSZW5kZXJUeXBlO1xuICAgIChmdW5jdGlvbiAoUmVuZGVyVHlwZSkge1xuICAgICAgICBSZW5kZXJUeXBlW1JlbmRlclR5cGVbXCJIZWFkZXJcIl0gPSAwXSA9IFwiSGVhZGVyXCI7XG4gICAgICAgIFJlbmRlclR5cGVbUmVuZGVyVHlwZVtcIkNvbnRlbnRcIl0gPSAxXSA9IFwiQ29udGVudFwiO1xuICAgICAgICBSZW5kZXJUeXBlW1JlbmRlclR5cGVbXCJTdW1tYXJ5XCJdID0gMl0gPSBcIlN1bW1hcnlcIjtcbiAgICB9KShSZW5kZXJUeXBlID0gZXhwb3J0cy5SZW5kZXJUeXBlIHx8IChleHBvcnRzLlJlbmRlclR5cGUgPSB7fSkpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2Jhc2UvZW51bS5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ2VsbChvcHRpb25zKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLm1lcmdlKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DZWxsID0gQ2VsbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9tb2RlbHMvY2VsbC5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSb3cgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSb3cob3B0aW9ucykge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5tZXJnZSh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUm93O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Sb3cgPSBSb3c7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvbW9kZWxzL3Jvdy5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfZGF0YV8xLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGF0YSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERhdGEocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaW5pdERhdGFNYW5hZ2VyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMucm93c0FkZGVkLCB0aGlzLmFkZFJvd3MsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJvd3NSZW1vdmVkLCB0aGlzLnJlbW92ZVJvd3MsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRhdGFTb3VyY2VNb2RpZmllZCwgdGhpcy5pbml0RGF0YU1hbmFnZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudXBkYXRlRGF0YSwgdGhpcy5jcnVkQWN0aW9ucywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuYWRkRGVsZXRlQWN0aW9uLCB0aGlzLmdldERhdGEsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIERhdGEucHJvdG90eXBlLmluaXREYXRhTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyID0gZ09iai5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlciA/IGdPYmouZGF0YVNvdXJjZSA6XG4gICAgICAgICAgICAgICAgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZ09iai5kYXRhU291cmNlKSA/IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKCkgOiBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcihnT2JqLmRhdGFTb3VyY2UpKTtcbiAgICAgICAgICAgIGdPYmoucXVlcnkgPSBnT2JqLnF1ZXJ5IGluc3RhbmNlb2YgZWoyX2RhdGFfMS5RdWVyeSA/IGdPYmoucXVlcnkgOiBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZW5lcmF0ZVF1ZXJ5ID0gZnVuY3Rpb24gKHNraXBQYWdlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gZ09iai5xdWVyeS5jbG9uZSgpO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dGaWx0ZXJpbmcgJiYgZ09iai5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ09iai5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2kgPCBjb2x1bW5zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2x1bW5zXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc1R5cGUgPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sLmZpZWxkKS50eXBlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc1R5cGUgIT09ICdkYXRlJyAmJiBzVHlwZSAhPT0gJ2RhdGV0aW1lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkud2hlcmUoY29sLmZpZWxkLCBjb2wub3BlcmF0b3IsIGNvbC52YWx1ZSwgIWNvbC5tYXRjaENhc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkud2hlcmUodGhpcy5nZXREYXRlUHJlZGljYXRlKGNvbCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouc2VhcmNoU2V0dGluZ3Mua2V5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBzU2V0dGluZ3MgPSBnT2JqLnNlYXJjaFNldHRpbmdzO1xuICAgICAgICAgICAgICAgIHNTZXR0aW5ncy5maWVsZHMgPSBzU2V0dGluZ3MuZmllbGRzLmxlbmd0aCA/IHNTZXR0aW5ncy5maWVsZHMgOiBnT2JqLmdldENvbHVtbkZpZWxkTmFtZXMoKTtcbiAgICAgICAgICAgICAgICBxdWVyeS5zZWFyY2goc1NldHRpbmdzLmtleSwgc1NldHRpbmdzLmZpZWxkcywgc1NldHRpbmdzLm9wZXJhdG9yLCBzU2V0dGluZ3MuaWdub3JlQ2FzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmFnZ3JlZ2F0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgcm93LmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0eXBlcyA9IGNvbHVtbi50eXBlIGluc3RhbmNlb2YgQXJyYXkgPyBjb2x1bW4udHlwZSA6IFtjb2x1bW4udHlwZV07XG4gICAgICAgICAgICAgICAgICAgIHR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIHF1ZXJ5LmFnZ3JlZ2F0ZSh0eXBlLCBjb2x1bW4uZmllbGQpOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKChnT2JqLmFsbG93U29ydGluZyB8fCBnT2JqLmFsbG93R3JvdXBpbmcpICYmIGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgICAgIHZhciBzb3J0R3JwID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGNvbHVtbnMubGVuZ3RoIC0gMTsgaSA+IC0xOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sdW1uc1tpXS5maWVsZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeS5zb3J0QnkoY29sdW1uc1tpXS5maWVsZCwgY29sdW1uc1tpXS5kaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ydEdycC5wdXNoKGNvbHVtbnNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzb3J0R3JwLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5LnNvcnRCeShzb3J0R3JwW2ldLmZpZWxkLCBzb3J0R3JwW2ldLmRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChnT2JqLmFsbG93UGFnaW5nIHx8IGdPYmouZW5hYmxlVmlydHVhbGl6YXRpb24pICYmIHNraXBQYWdlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkucGFnZShnT2JqLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSwgZ09iai5wYWdlU2V0dGluZ3MucGFnZVNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZyAmJiBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5Lmdyb3VwKGNvbHVtbnNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuZ2V0RGF0YSA9IGZ1bmN0aW9uIChhcmdzLCBxdWVyeSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChhcmdzID09PSB2b2lkIDApIHsgYXJncyA9IHsgcmVxdWVzdFR5cGU6ICcnIH07IH1cbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmdldEtleShhcmdzLmZvcmVpZ25LZXlEYXRhICYmXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoYXJncy5mb3JlaWduS2V5RGF0YSkubGVuZ3RoID9cbiAgICAgICAgICAgICAgICBhcmdzLmZvcmVpZ25LZXlEYXRhIDogdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKSk7XG4gICAgICAgICAgICBzd2l0Y2ggKGFyZ3MucmVxdWVzdFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5ID8gcXVlcnkgOiB0aGlzLmdlbmVyYXRlUXVlcnkoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlci5yZW1vdmUoa2V5LCBhcmdzLmRhdGFbMF0sIG51bGwsIHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2F2ZSc6XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkgPyBxdWVyeSA6IHRoaXMuZ2VuZXJhdGVRdWVyeSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyLmluc2VydChhcmdzLmRhdGEsIG51bGwsIHF1ZXJ5LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhTWFuYWdlci5yZWFkeSkge1xuICAgICAgICAgICAgICAgIHZhciByZWFkeSA9IHRoaXMuZGF0YU1hbmFnZXIucmVhZHk7XG4gICAgICAgICAgICAgICAgcmVhZHkudGhlbihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kYXRhTWFuYWdlciA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKGUucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uRmFpbHVyZSwgeyBlcnJvcjogZSB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYW5hZ2VyLmV4ZWN1dGVRdWVyeShxdWVyeSk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmNydWRBY3Rpb25zID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVRdWVyeSgpO1xuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBudWxsO1xuICAgICAgICAgICAgdmFyIHByID0gJ3Byb21pc2UnO1xuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5KGFyZ3MuZm9yZWlnbktleURhdGEgJiZcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhhcmdzLmZvcmVpZ25LZXlEYXRhKS5sZW5ndGggPyBhcmdzLmZvcmVpZ25LZXlEYXRhIDpcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpKTtcbiAgICAgICAgICAgIHN3aXRjaCAoYXJncy5yZXF1ZXN0VHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NhdmUnOlxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlID0gdGhpcy5kYXRhTWFuYWdlci51cGRhdGUoa2V5LCBhcmdzLmRhdGEsIG51bGwsIHRoaXMuZ2VuZXJhdGVRdWVyeSgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcmdzW3ByXSA9IHByb21pc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmNydWRBY3Rpb24sIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5zYXZlQ2hhbmdlcyA9IGZ1bmN0aW9uIChjaGFuZ2VzLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5kYXRhTWFuYWdlci5zYXZlQ2hhbmdlcyhjaGFuZ2VzLCBrZXksIG51bGwsIHRoaXMuZ2VuZXJhdGVRdWVyeSgpLnJlcXVpcmVzQ291bnQoKSk7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuZ2V0S2V5ID0gZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgICAgICAgIGlmIChrZXlzICYmIGtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleXNbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5pc1JlbW90ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2Uub2ZmbGluZSAhPT0gdHJ1ZSAmJiB0aGlzLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2UudXJsICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdldERhdGVQcmVkaWNhdGUgPSBmdW5jdGlvbiAoZmlsdGVyT2JqZWN0KSB7XG4gICAgICAgICAgICB2YXIgcHJldkRhdGU7XG4gICAgICAgICAgICB2YXIgbmV4dERhdGU7XG4gICAgICAgICAgICB2YXIgcHJldk9iaiA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB1dGlsXzEuZ2V0QWN0dWFsUHJvcGVydGllcyhmaWx0ZXJPYmplY3QpKTtcbiAgICAgICAgICAgIHZhciBuZXh0T2JqID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHV0aWxfMS5nZXRBY3R1YWxQcm9wZXJ0aWVzKGZpbHRlck9iamVjdCkpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gbmV3IERhdGUoZmlsdGVyT2JqZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIHByZXZEYXRlID0gbmV3IERhdGUodmFsdWUuc2V0RGF0ZSh2YWx1ZS5nZXREYXRlKCkgLSAxKSk7XG4gICAgICAgICAgICBuZXh0RGF0ZSA9IG5ldyBEYXRlKHZhbHVlLnNldERhdGUodmFsdWUuZ2V0RGF0ZSgpICsgMikpO1xuICAgICAgICAgICAgcHJldk9iai52YWx1ZSA9IHByZXZEYXRlO1xuICAgICAgICAgICAgbmV4dE9iai52YWx1ZSA9IG5leHREYXRlO1xuICAgICAgICAgICAgaWYgKGZpbHRlck9iamVjdC5vcGVyYXRvciA9PT0gJ2VxdWFsJykge1xuICAgICAgICAgICAgICAgIHByZXZPYmoub3BlcmF0b3IgPSAnZ3JlYXRlcnRoYW4nO1xuICAgICAgICAgICAgICAgIG5leHRPYmoub3BlcmF0b3IgPSAnbGVzc3RoYW4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJldk9iai5vcGVyYXRvciA9ICdsZXNzdGhhbm9yZXF1YWwnO1xuICAgICAgICAgICAgICAgIG5leHRPYmoub3BlcmF0b3IgPSAnZ3JlYXRlcnRoYW5vcmVxdWFsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGVTdCA9IG5ldyBlajJfZGF0YV8xLlByZWRpY2F0ZShwcmV2T2JqLmZpZWxkLCBwcmV2T2JqLm9wZXJhdG9yLCBwcmV2T2JqLnZhbHVlLCBmYWxzZSk7XG4gICAgICAgICAgICB2YXIgcHJlZGljYXRlRW5kID0gbmV3IGVqMl9kYXRhXzEuUHJlZGljYXRlKG5leHRPYmouZmllbGQsIG5leHRPYmoub3BlcmF0b3IsIG5leHRPYmoudmFsdWUsIGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJPYmplY3Qub3BlcmF0b3IgPT09ICdlcXVhbCcgPyBwcmVkaWNhdGVTdC5hbmQocHJlZGljYXRlRW5kKSA6IHByZWRpY2F0ZVN0Lm9yKHByZWRpY2F0ZUVuZCk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmFkZFJvd3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGUucmVjb3Jkcy5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyLmRhdGFTb3VyY2UuanNvbi5zcGxpY2UoZS50b0luZGV4LCAwLCBlLnJlY29yZHNbaSAtIDFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUucmVtb3ZlUm93cyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIganNvbiA9IHRoaXMuZGF0YU1hbmFnZXIuZGF0YVNvdXJjZS5qc29uO1xuICAgICAgICAgICAgdGhpcy5kYXRhTWFuYWdlci5kYXRhU291cmNlLmpzb24gPSBqc29uLmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7IHJldHVybiBlLmluZGV4ZXMuaW5kZXhPZihpbmRleCkgPT09IC0xOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucm93c0FkZGVkLCB0aGlzLmFkZFJvd3MpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5yb3dzUmVtb3ZlZCwgdGhpcy5yZW1vdmVSb3dzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YVNvdXJjZU1vZGlmaWVkLCB0aGlzLmluaXREYXRhTWFuYWdlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFTb3VyY2VNb2RpZmllZCwgdGhpcy5kZXN0cm95KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudXBkYXRlRGF0YSwgdGhpcy5jcnVkQWN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmFkZERlbGV0ZUFjdGlvbiwgdGhpcy5nZXREYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERhdGE7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRhdGEgPSBEYXRhO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4vcm93LXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4uL3NlcnZpY2VzL2dyb3VwLW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzLCByb3dfcmVuZGVyZXJfMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xLCBncm91cF9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29udGVudFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbnRlbnRSZW5kZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5kcm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jb2x1bW5Ecm9wLCB7IHRhcmdldDogZS50YXJnZXQsIGRyb3BwZWRFbGVtZW50OiBlLmRyb3BwZWRFbGVtZW50IH0pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKGUuZHJvcHBlZEVsZW1lbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucmFmQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXJpYVNlcnZpY2Uuc2V0QnVzeShfdGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm5vdGlmeShldmVudHMuY29udGVudFJlYWR5LCB7fSk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmRhdGFCb3VuZCwge30pO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5hcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSAoX3RoaXMuYXJncy5yZXF1ZXN0VHlwZSB8fCAnJykudG9Mb3dlckNhc2UoKSArICctY29tcGxldGUnO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQubm90aWZ5KGFjdGlvbiwgX3RoaXMuYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5oaWRlU3Bpbm5lcigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZSA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnYXJpYVNlcnZpY2UnKTtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gdGhpcy5nZXRNb2RlbEdlbmVyYXRvcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCB0aGlzLnNldFZpc2libGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbEdyb3VwUmVmcmVzaCwgdGhpcy5jb2xHcm91cFJlZnJlc2gsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlbmRlclBhbmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkY29udGVudCcgfSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNvbnRlbnQnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJEaXYuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFyaWFTZXJ2aWNlLnNldE9wdGlvbnMoaW5uZXJEaXYsIHsgYnVzeTogZmFsc2UgfSk7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXYpO1xuICAgICAgICAgICAgdGhpcy5zZXRQYW5lbChkaXYpO1xuICAgICAgICAgICAgZ09iai5lbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlbmRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnREaXYgPSB0aGlzLmdldFBhbmVsKCk7XG4gICAgICAgICAgICBjb250ZW50RGl2LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQ29udGVudFRhYmxlKCkpO1xuICAgICAgICAgICAgdGhpcy5zZXRUYWJsZShjb250ZW50RGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlJykpO1xuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKHRoaXMuZ2V0VGFibGUoKSwge1xuICAgICAgICAgICAgICAgIG11bHRpc2VsZWN0YWJsZTogdGhpcy5wYXJlbnQuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9PT0gJ211bHRpcGxlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVDb250ZW50RHJvcCgpO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5jcmVhdGVDb250ZW50VGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS10YWJsZScsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzcGFjaW5nOiAnMC4yNXB4Jywgcm9sZTogJ2dyaWQnLFxuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArICdfY29udGVudF90YWJsZSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29sR3JvdXAodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkaGVhZGVyJykucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhpcy5nZXRDb2xHcm91cCgpKTtcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGJvZHknKSk7XG4gICAgICAgICAgICBpbm5lckRpdi5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICByZXR1cm4gaW5uZXJEaXY7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hDb250ZW50Um93cyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGFyZ3MgPT09IHZvaWQgMCkgeyBhcmdzID0ge307IH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGF0YVNvdXJjZSA9IGdPYmouY3VycmVudFZpZXdEYXRhO1xuICAgICAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IGdPYmouZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHRyO1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB0aGlzLnJvd0VsZW1lbnRzID0gW107XG4gICAgICAgICAgICB2YXIgbW9kZWxEYXRhID0gdGhpcy5nZW5lcmF0b3IuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2UsIGFyZ3MpO1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gdGhpcy5nZXRUYWJsZSgpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbW9kZWxEYXRhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFnT2JqLnJvd1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyID0gcm93LnJlbmRlcihtb2RlbERhdGFbaV0sIGNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gZ09iai5nZXRSb3dUZW1wbGF0ZSgpKGVqMl9iYXNlXzIuZXh0ZW5kKHsgaW5kZXg6IGkgfSwgZGF0YVNvdXJjZVtpXSksIGdPYmosICdyb3dUZW1wbGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNUUiA9IGVsZW1lbnRzW2pdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0cic7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUUiB8fCAoZWxlbWVudHNbal0ucXVlcnlTZWxlY3RvckFsbCAmJiBlbGVtZW50c1tqXS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ciA9IGlzVFIgPyBlbGVtZW50c1tqXSA6IGVsZW1lbnRzW2pdLnF1ZXJ5U2VsZWN0b3IoJ3RyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzLnB1c2gobW9kZWxEYXRhW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAobW9kZWxEYXRhW2ldLmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGQgPSB0ci5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsOm5vdCguZS1oaWRlKScpWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRkLmNsYXNzTGlzdC5hZGQoJ2UtZGV0YWlscm93dmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93RWxlbWVudHMucHVzaCh0cik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYXJpYVNlcnZpY2Uuc2V0T3B0aW9ucyh0aGlzLmdldFRhYmxlKCksIHsgY29sY291bnQ6IGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aC50b1N0cmluZygpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hcmdzID0gYXJncztcbiAgICAgICAgICAgIHV0aWxfMS5nZXRVcGRhdGVVc2luZ1JhZihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUodGJvZHkpO1xuICAgICAgICAgICAgICAgIHRib2R5ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICAgICAgICAgIF90aGlzLmFwcGVuZENvbnRlbnQodGJvZHksIGZyYWcsIGFyZ3MpO1xuICAgICAgICAgICAgfSwgdGhpcy5yYWZDYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmFwcGVuZENvbnRlbnQgPSBmdW5jdGlvbiAodGJvZHksIGZyYWcsIGFyZ3MpIHtcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuZ2V0UGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50UGFuZWw7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldFBhbmVsID0gZnVuY3Rpb24gKHBhbmVsKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRQYW5lbCA9IHBhbmVsO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRUYWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0VGFibGUgPSBmdW5jdGlvbiAodGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFRhYmxlID0gdGFibGU7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmdldFJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3dzO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRSb3dFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd0VsZW1lbnRzO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRSb3dFbGVtZW50cyA9IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgICAgICAgdGhpcy5yb3dFbGVtZW50cyA9IGVsZW1lbnRzO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRDb2xHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbGdyb3VwO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5zZXRDb2xHcm91cCA9IGZ1bmN0aW9uIChjb2xHcm91cCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sZ3JvdXAgPSBjb2xHcm91cDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMuZ2V0Um93cygpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgdGVzdFJvdztcbiAgICAgICAgICAgIHJvd3Muc29tZShmdW5jdGlvbiAocikgeyBpZiAoci5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICB0ZXN0Um93ID0gcjtcbiAgICAgICAgICAgIH0gcmV0dXJuIHIuaXNEYXRhUm93OyB9KTtcbiAgICAgICAgICAgIHZhciB0YXNrcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDAsIGNsZW4gPSBjb2x1bW5zLmxlbmd0aDsgYyA8IGNsZW47IGMrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zW2NdO1xuICAgICAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLnBhcmVudC5nZXROb3JtYWxpemVkQ29sdW1uSW5kZXgoY29sdW1uLnVpZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FuU2tpcChjb2x1bW4sIHRlc3RSb3csIGlkeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkaXNwbGF5VmFsID0gY29sdW1uLnZpc2libGUgPT09IHRydWUgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnNldFN0eWxlQXR0cmlidXRlKHRoaXMuZ2V0Q29sR3JvdXAoKS5jaGlsZE5vZGVzW2lkeF0sIHsgJ2Rpc3BsYXknOiBkaXNwbGF5VmFsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ29udGVudFJvd3MoeyByZXF1ZXN0VHlwZTogJ3JlZnJlc2gnIH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5jb2xHcm91cFJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRDb2xHcm91cCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbEdyb3VwID0gdGhpcy5nZXRDb2xHcm91cCgpO1xuICAgICAgICAgICAgICAgIGNvbEdyb3VwLmlubmVySFRNTCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGhlYWRlcicpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29sR3JvdXAoY29sR3JvdXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5pbml0aWFsaXplQ29udGVudERyb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRyb3AgPSBuZXcgZWoyX2Jhc2VfMS5Ecm9wcGFibGUoZ09iai5nZXRDb250ZW50KCksIHtcbiAgICAgICAgICAgICAgICBhY2NlcHQ6ICcuZS1kcmFnY2xvbmUnLFxuICAgICAgICAgICAgICAgIGRyb3A6IHRoaXMuZHJvcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLmNhblNraXAgPSBmdW5jdGlvbiAoY29sdW1uLCByb3csIGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChyb3cpIHx8XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udmlzaWJsZSkgfHxcbiAgICAgICAgICAgICAgICByb3cuY2VsbHNbaW5kZXhdLnZpc2libGUgPT09IGNvbHVtbi52aXNpYmxlO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRNb2RlbEdlbmVyYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvciA9IHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcgPyBuZXcgZ3JvdXBfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCkgOiBuZXcgcm93X21vZGVsX2dlbmVyYXRvcl8xLlJvd01vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29udGVudFJlbmRlci5wcm90b3R5cGUucmVuZGVyRW1wdHkgPSBmdW5jdGlvbiAodGJvZHkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbnRlbnRSZW5kZXIucHJvdG90eXBlLnNldFNlbGVjdGlvbiA9IGZ1bmN0aW9uICh1aWQsIHNldCwgY2xlYXJBbGwpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0Um93cygpLmZpbHRlcihmdW5jdGlvbiAocm93KSB7IHJldHVybiBjbGVhckFsbCB8fCB1aWQgPT09IHJvdy51aWQ7IH0pXG4gICAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gcm93LmlzU2VsZWN0ZWQgPSBzZXQ7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb250ZW50UmVuZGVyLnByb3RvdHlwZS5nZXRSb3dCeUluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtpbmRleF07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb250ZW50UmVuZGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db250ZW50UmVuZGVyID0gQ29udGVudFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9jb250ZW50LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL21vZGVscy9yb3dcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHJvd18xLCBlbnVtXzEsIGNlbGxfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSb3dNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJvd01vZGVsR2VuZXJhdG9yKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChkYXRhLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLnBhcmVudC5lbmFibGVWaXJ0dWFsaXphdGlvbiA/IGFyZ3Muc3RhcnRJbmRleCA6IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoOyBpIDwgbGVuOyBpKyssIHN0YXJ0SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHJvd3NbaV0gPSB0aGlzLmdlbmVyYXRlUm93KGRhdGFbaV0sIHN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5lbnN1cmVDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSB8fCB0aGlzLnBhcmVudC5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICBjb2xzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIG51bGwsIGVudW1fMS5DZWxsVHlwZS5EZXRhaWxFeHBhbmQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2xzO1xuICAgICAgICB9O1xuICAgICAgICBSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVSb3cgPSBmdW5jdGlvbiAoZGF0YSwgaW5kZXgsIGNzc0NsYXNzLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgdG1wID0gW107XG4gICAgICAgICAgICBvcHRpb25zLnVpZCA9IHV0aWxfMS5nZXRVaWQoJ2dyaWQtcm93Jyk7XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgb3B0aW9ucy5pbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgb3B0aW9ucy5pbmRlbnQgPSBpbmRlbnQ7XG4gICAgICAgICAgICBvcHRpb25zLmlzRGF0YVJvdyA9IHRydWU7XG4gICAgICAgICAgICBvcHRpb25zLmNzc0NsYXNzID0gY3NzQ2xhc3M7XG4gICAgICAgICAgICBvcHRpb25zLmlzQWx0Um93ID0gdGhpcy5wYXJlbnQuZW5hYmxlQWx0Um93ID8gaW5kZXggJSAyICE9PSAwIDogZmFsc2U7XG4gICAgICAgICAgICBvcHRpb25zLmlzU2VsZWN0ZWQgPSB0aGlzLnBhcmVudC5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKS5pbmRleE9mKGluZGV4KSA+IC0xO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gdGhpcy5lbnN1cmVDb2x1bW5zKCk7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd18xLlJvdyhvcHRpb25zKTtcbiAgICAgICAgICAgIHJvdy5jZWxscyA9IGNlbGxzLmNvbmNhdCh0aGlzLmdlbmVyYXRlQ2VsbHMob3B0aW9ucykpO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlQ2VsbHMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkdW1taWVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgZHVtbWllcy5mb3JFYWNoKGZ1bmN0aW9uIChkdW1teSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG1wLnB1c2goX3RoaXMuZ2VuZXJhdGVDZWxsKGR1bW15LCBvcHRpb25zLnVpZCwgdW5kZWZpbmVkLCBudWxsLCBpbmRleCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdG1wO1xuICAgICAgICB9O1xuICAgICAgICBSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVDZWxsID0gZnVuY3Rpb24gKGNvbHVtbiwgcm93SWQsIGNlbGxUeXBlLCBjb2xTcGFuLCBvSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBvcHQgPSB7XG4gICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBjb2x1bW4udmlzaWJsZSxcbiAgICAgICAgICAgICAgICAnaXNEYXRhQ2VsbCc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWVsZCB8fCBjb2x1bW4udGVtcGxhdGUpLFxuICAgICAgICAgICAgICAgICdpc1RlbXBsYXRlJzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLnRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAncm93SUQnOiByb3dJZCxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogY29sdW1uLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGxUeXBlKSA/IGNlbGxUeXBlIDogZW51bV8xLkNlbGxUeXBlLkRhdGEsXG4gICAgICAgICAgICAgICAgJ2NvbFNwYW4nOiBjb2xTcGFuXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKG9wdC5pc0RhdGFDZWxsKSB7XG4gICAgICAgICAgICAgICAgb3B0LmluZGV4ID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeUZpZWxkKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5yZWZyZXNoUm93cyA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlucHV0LmZvckVhY2goZnVuY3Rpb24gKHJvdykgeyByZXR1cm4gcm93LmNlbGxzID0gX3RoaXMuZ2VuZXJhdGVDZWxscyhyb3cpOyB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJvd01vZGVsR2VuZXJhdG9yO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Sb3dNb2RlbEdlbmVyYXRvciA9IFJvd01vZGVsR2VuZXJhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vbW9kZWxzL3Jvd1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4uL3NlcnZpY2VzL3N1bW1hcnktbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcm93XzEsIGVqMl9iYXNlXzEsIGVudW1fMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xLCBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBHcm91cE1vZGVsR2VuZXJhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyb3VwTW9kZWxHZW5lcmF0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwTW9kZWxHZW5lcmF0b3IocGFyZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICBfdGhpcy5pbmRleCA9IDA7XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBfdGhpcy5zdW1tYXJ5TW9kZWxHZW4gPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcihwYXJlbnQpO1xuICAgICAgICAgICAgX3RoaXMuY2FwdGlvbk1vZGVsR2VuID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcihwYXJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwTW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChkYXRhLCBhcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdlbmVyYXRlUm93cy5jYWxsKHRoaXMsIGRhdGEsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gdGhpcy5wYXJlbnQuZW5hYmxlVmlydHVhbGl6YXRpb24gPyAodGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlIC0gMSkgKiBkYXRhLnJlY29yZHMubGVuZ3RoIDogMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkYXRhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRHcm91cGVkUmVjb3JkcygwLCBkYXRhW2ldLCBkYXRhLmxldmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93cztcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0R3JvdXBlZFJlY29yZHMgPSBmdW5jdGlvbiAoaW5kZXgsIGRhdGEsIHJhdykge1xuICAgICAgICAgICAgdmFyIGxldmVsID0gcmF3O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZGF0YS5pdGVtcykpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChkYXRhLkdyb3VwR3VpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gdGhpcy5yb3dzLmNvbmNhdCh0aGlzLmdlbmVyYXRlRGF0YVJvd3MoZGF0YSwgaW5kZXgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsZW4gPSBkYXRhLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEdyb3VwZWRSZWNvcmRzKGluZGV4LCBkYXRhW2pdLCBkYXRhLmxldmVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IHRoaXMucm93cy5jb25jYXQodGhpcy5nZW5lcmF0ZUNhcHRpb25Sb3coZGF0YSwgaW5kZXgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5pdGVtcyAmJiBkYXRhLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEdyb3VwZWRSZWNvcmRzKGluZGV4ICsgMSwgZGF0YS5pdGVtcywgZGF0YS5pdGVtcy5sZXZlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hZ2dyZWdhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLnJvd3MpLnB1c2guYXBwbHkoX2EsIHRoaXMuc3VtbWFyeU1vZGVsR2VuLmdlbmVyYXRlUm93cyhkYXRhLCB7IGxldmVsOiBsZXZlbCB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDYXB0aW9uUm93Q2VsbHMgPSBmdW5jdGlvbiAoZmllbGQsIGluZGVudCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjZWxscyA9IFtdO1xuICAgICAgICAgICAgdmFyIHZpc2libGVzID0gW107XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIGNvbHVtbiA9IHRoaXMucGFyZW50LmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkID09PSBmaWVsZDsgfSlbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ3JvdXBlZExlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiB8fCBpbmRleGVzLmluZGV4T2YoaW5kZW50KSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGVudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUluZGVudENlbGwoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIG51bGwsIGVudW1fMS5DZWxsVHlwZS5FeHBhbmQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGVudCA9IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gMSA6XG4gICAgICAgICAgICAgICAgKHRoaXMucGFyZW50LmdldFZpc2libGVDb2x1bW5zKCkubGVuZ3RoICsgZ3JvdXBlZExlbiArIChnT2JqLmRldGFpbFRlbXBsYXRlIHx8IGdPYmouY2hpbGRHcmlkID8gMSA6IDApIC1cbiAgICAgICAgICAgICAgICAgICAgaW5kZW50ICsgKHRoaXMucGFyZW50LmdldFZpc2libGVDb2x1bW5zKCkubGVuZ3RoID8gLTEgOiAwKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWdncmVnYXRlcy5sZW5ndGggJiYgIXRoaXMuY2FwdGlvbk1vZGVsR2VuLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHZhciBjYXB0aW9uQ2VsbHMgPSB0aGlzLmNhcHRpb25Nb2RlbEdlbi5nZW5lcmF0ZVJvd3MoZGF0YSlbMF07XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5leHRlbmQoZGF0YSwgY2FwdGlvbkNlbGxzLmRhdGEpO1xuICAgICAgICAgICAgICAgIHZpc2libGVzID0gY2FwdGlvbkNlbGxzLmNlbGxzLmZpbHRlcihmdW5jdGlvbiAoY2VsbCkgeyByZXR1cm4gY2VsbC52aXNpYmxlOyB9KTtcbiAgICAgICAgICAgICAgICB2aXNpYmxlcyA9IHZpc2libGVzLnNsaWNlKGdyb3VwZWRMZW4gKyAxLCB2aXNpYmxlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGluZGVudCA9IGluZGVudCAtIHZpc2libGVzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2xzID0gKCF0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiA/IFtjb2x1bW5dIDogdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpKTtcbiAgICAgICAgICAgIHZhciB3RmxhZyA9IHRydWU7XG4gICAgICAgICAgICBjb2xzLmZvckVhY2goZnVuY3Rpb24gKGNvbCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG1wRmxhZyA9IHdGbGFnICYmIGluZGV4ZXMuaW5kZXhPZihpbmRlbnQpICE9PSAtMTtcbiAgICAgICAgICAgICAgICBpZiAodG1wRmxhZykge1xuICAgICAgICAgICAgICAgICAgICB3RmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2VsbFR5cGUgPSAhX3RoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uIHx8IHRtcEZsYWcgP1xuICAgICAgICAgICAgICAgICAgICBlbnVtXzEuQ2VsbFR5cGUuR3JvdXBDYXB0aW9uIDogZW51bV8xLkNlbGxUeXBlLkdyb3VwQ2FwdGlvbkVtcHR5O1xuICAgICAgICAgICAgICAgIGluZGVudCA9IF90aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBjZWxsVHlwZSA9PT0gZW51bV8xLkNlbGxUeXBlLkdyb3VwQ2FwdGlvbiA/IGluZGVudCArIGdyb3VwZWRMZW4gOiBpbmRlbnQ7XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaChfdGhpcy5nZW5lcmF0ZUNlbGwoY29sdW1uLCBudWxsLCBjZWxsVHlwZSwgaW5kZW50KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNlbGxzLnB1c2guYXBwbHkoY2VsbHMsIHZpc2libGVzKTtcbiAgICAgICAgICAgIHJldHVybiBjZWxscztcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVDYXB0aW9uUm93ID0gZnVuY3Rpb24gKGRhdGEsIGluZGVudCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGRhdGEuZmllbGQpO1xuICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIGRhdGEpO1xuICAgICAgICAgICAgaWYgKGNvbCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5maWVsZCA9IGRhdGEuZmllbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLmlzRGF0YVJvdyA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfMS5Sb3cob3B0aW9ucyk7XG4gICAgICAgICAgICByb3cuaW5kZW50ID0gaW5kZW50O1xuICAgICAgICAgICAgcm93LmNlbGxzID0gdGhpcy5nZXRDYXB0aW9uUm93Q2VsbHMoZGF0YS5maWVsZCwgaW5kZW50LCByb3cuZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9O1xuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZURhdGFSb3dzID0gZnVuY3Rpb24gKGRhdGEsIGluZGVudCkge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICByb3dzW2ldID0gdGhpcy5nZW5lcmF0ZVJvdyhkYXRhW2ldLCB0aGlzLmluZGV4LCBpID8gdW5kZWZpbmVkIDogJ2UtZmlyc3RjaGlsZHJvdycsIGluZGVudCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpbmRlbnQ7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgaW5kZXhlcy5pbmRleE9mKGluZGVudCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzLnVuc2hpZnQodGhpcy5nZW5lcmF0ZUluZGVudENlbGwoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZUluZGVudENlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUNlbGwoe30sIG51bGwsIGVudW1fMS5DZWxsVHlwZS5JbmRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cE1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5yZWZyZXNoUm93cyA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpO1xuICAgICAgICAgICAgaW5wdXQuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5pc0RhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzID0gX3RoaXMuZ2VuZXJhdGVDZWxscyhyb3cpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJvdy5pbmRlbnQ7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmRleGVzLmluZGV4T2Yocm93LmluZGVudCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMudW5zaGlmdChfdGhpcy5nZW5lcmF0ZUluZGVudENlbGwoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjUm93ID0gX3RoaXMuZ2VuZXJhdGVDYXB0aW9uUm93KHJvdy5kYXRhLCByb3cuaW5kZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNlbGxzID0gY1Jvdy5jZWxscztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwTW9kZWxHZW5lcmF0b3I7XG4gICAgfShyb3dfbW9kZWxfZ2VuZXJhdG9yXzEuUm93TW9kZWxHZW5lcmF0b3IpKTtcbiAgICBleHBvcnRzLkdyb3VwTW9kZWxHZW5lcmF0b3IgPSBHcm91cE1vZGVsR2VuZXJhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL2dyb3VwLW1vZGVsLWdlbmVyYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vbW9kZWxzL2NvbHVtblwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vbW9kZWxzL2NlbGxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCByb3dfMSwgY29sdW1uXzEsIGVqMl9iYXNlXzEsIHV0aWxfMSwgZW51bV8xLCBjZWxsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFN1bW1hcnlNb2RlbEdlbmVyYXRvcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWdncmVnYXRlcy5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gcm93LmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoY29sdW1uLmZvb3RlclRlbXBsYXRlIHx8IGNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlIHx8IGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IF90aGlzLmNvbHVtblNlbGVjdG9yKGNvbHVtbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7IGNvbHVtbnM6IGNvbHVtbnMgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcm93cztcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5jb2x1bW5TZWxlY3RvciA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW4uZm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBjb2x1bW5zLnB1c2gobmV3IGNvbHVtbl8xLkNvbHVtbih7fSkpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbHVtbnMucHVzaChuZXcgY29sdW1uXzEuQ29sdW1uKHt9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2x1bW5zLnB1c2guYXBwbHkoY29sdW1ucywgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpKTtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlUm93cyA9IGZ1bmN0aW9uIChpbnB1dCwgYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5jdXJyZW50Vmlld0RhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmJ1aWxkU3VtbWFyeURhdGEoaW5wdXQsIGFyZ3MpO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpLmZvckVhY2goZnVuY3Rpb24gKHJvdywgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByb3dzLnB1c2goX3RoaXMuZ2V0R2VuZXJhdGVkUm93KHJvdywgZGF0YVtpbmRleF0sIGFyZ3MgPyBhcmdzLmxldmVsIDogdW5kZWZpbmVkKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByb3dzO1xuICAgICAgICB9O1xuICAgICAgICBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldEdlbmVyYXRlZFJvdyA9IGZ1bmN0aW9uIChzdW1tYXJ5Um93LCBkYXRhLCByYXcpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdG1wID0gW107XG4gICAgICAgICAgICB2YXIgaW5kZW50cyA9IHRoaXMuZ2V0SW5kZW50QnlMZXZlbChyYXcpO1xuICAgICAgICAgICAgdmFyIGluZGVudExlbmd0aCA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggKyAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgPyAxIDogMCk7XG4gICAgICAgICAgICB0aGlzLmdldENvbHVtbnMoKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsgcmV0dXJuIHRtcC5wdXNoKF90aGlzLmdldEdlbmVyYXRlZENlbGwodmFsdWUsIHN1bW1hcnlSb3csIGluZGV4ID49IGluZGVudExlbmd0aCA/IF90aGlzLmdldENlbGxUeXBlKCkgOiBlbnVtXzEuQ2VsbFR5cGUuSW5kZW50LCBpbmRlbnRzW2luZGV4XSkpOyB9KTtcbiAgICAgICAgICAgIHZhciByb3cgPSBuZXcgcm93XzEuUm93KHsgZGF0YTogZGF0YSwgYXR0cmlidXRlczogeyBjbGFzczogJ2Utc3VtbWFyeXJvdycgfSB9KTtcbiAgICAgICAgICAgIHJvdy5jZWxscyA9IHRtcDtcbiAgICAgICAgICAgIHJvdy52aXNpYmxlID0gdG1wLnNvbWUoZnVuY3Rpb24gKGNlbGwpIHsgcmV0dXJuIGNlbGwuaXNEYXRhQ2VsbCAmJiBjZWxsLnZpc2libGU7IH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRHZW5lcmF0ZWRDZWxsID0gZnVuY3Rpb24gKGNvbHVtbiwgc3VtbWFyeVJvdywgY2VsbFR5cGUsIGluZGVudCkge1xuICAgICAgICAgICAgdmFyIHNDb2x1bW4gPSBzdW1tYXJ5Um93LmNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChzY29sdW1uKSB7IHJldHVybiBzY29sdW1uLmNvbHVtbk5hbWUgPT09IGNvbHVtbi5maWVsZDsgfSlbMF07XG4gICAgICAgICAgICB2YXIgYXR0cnMgPSB7ICdzdHlsZSc6IHsgJ3RleHRBbGlnbic6IGNvbHVtbi50ZXh0QWxpZ24gfSB9O1xuICAgICAgICAgICAgaWYgKGluZGVudCkge1xuICAgICAgICAgICAgICAgIGF0dHJzLmNsYXNzID0gaW5kZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9wdCA9IHtcbiAgICAgICAgICAgICAgICAndmlzaWJsZSc6IGNvbHVtbi52aXNpYmxlLFxuICAgICAgICAgICAgICAgICdpc0RhdGFDZWxsJzogIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoc0NvbHVtbiksXG4gICAgICAgICAgICAgICAgJ2lzVGVtcGxhdGUnOiBzQ29sdW1uICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHNDb2x1bW4uZm9vdGVyVGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgfHwgc0NvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlIHx8IHNDb2x1bW4uZ3JvdXBDYXB0aW9uVGVtcGxhdGUpLFxuICAgICAgICAgICAgICAgICdjb2x1bW4nOiBzQ29sdW1uIHx8IHt9LFxuICAgICAgICAgICAgICAgICdhdHRyaWJ1dGVzJzogYXR0cnMsXG4gICAgICAgICAgICAgICAgJ2NlbGxUeXBlJzogY2VsbFR5cGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuYnVpbGRTdW1tYXJ5RGF0YSA9IGZ1bmN0aW9uIChkYXRhLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGR1bW15ID0gW107XG4gICAgICAgICAgICB2YXIgc3VtbWFyeVJvd3MgPSB0aGlzLmdldERhdGEoKTtcbiAgICAgICAgICAgIHZhciBzaW5nbGUgPSB7fTtcbiAgICAgICAgICAgIHZhciBrZXkgPSAnJztcbiAgICAgICAgICAgIHN1bW1hcnlSb3dzLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIHNpbmdsZSA9IHt9O1xuICAgICAgICAgICAgICAgIHJvdy5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICBzaW5nbGUgPSBfdGhpcy5zZXRUZW1wbGF0ZShjb2x1bW4sIChhcmdzICYmIGFyZ3MuYWdncmVnYXRlcykgPyBhcmdzIDogZGF0YSwgc2luZ2xlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkdW1teS5wdXNoKHNpbmdsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkdW1teTtcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXRJbmRlbnRCeUxldmVsID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuICdlLWluZGVudGNlbGx0b3AnOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5zZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uIChjb2x1bW4sIGRhdGEsIHNpbmdsZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0eXBlcyA9IGNvbHVtbi50eXBlO1xuICAgICAgICAgICAgdmFyIGhlbHBlciA9IHt9O1xuICAgICAgICAgICAgdmFyIGZvcm1hdEZuID0gY29sdW1uLmdldEZvcm1hdHRlcigpIHx8IChmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gYTsgfTsgfSkoKTtcbiAgICAgICAgICAgIHZhciBncm91cCA9IGRhdGE7XG4gICAgICAgICAgICBpZiAoISh0eXBlcyBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgICAgICAgIHR5cGVzID0gW2NvbHVtbi50eXBlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gY29sdW1uLmZpZWxkICsgJyAtICcgKyB0eXBlO1xuICAgICAgICAgICAgICAgIHZhciBkaXNwID0gY29sdW1uLmNvbHVtbk5hbWU7XG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IGdyb3VwLmFnZ3JlZ2F0ZXMgJiYgZ3JvdXAuYWdncmVnYXRlc1trZXldID8gZ3JvdXAuYWdncmVnYXRlc1trZXldIDpcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLmNhbGN1bGF0ZUFnZ3JlZ2F0ZSh0eXBlLCBncm91cC5hZ2dyZWdhdGVzID8gZ3JvdXAucmVzdWx0IDogZGF0YSwgY29sdW1uLCBfdGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgICAgIHNpbmdsZVtkaXNwXSA9IHNpbmdsZVtkaXNwXSB8fCB7fTtcbiAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF1ba2V5XSA9IHZhbDtcbiAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF1bdHlwZV0gPSBmb3JtYXRGbih2YWwpO1xuICAgICAgICAgICAgICAgIGlmIChncm91cC5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICBzaW5nbGVbZGlzcF0uZmllbGQgPSBncm91cC5maWVsZDtcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlW2Rpc3BdLmtleSA9IGdyb3VwLmtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhlbHBlci5mb3JtYXQgPSBjb2x1bW4uZ2V0Rm9ybWF0dGVyKCk7XG4gICAgICAgICAgICBjb2x1bW4uc2V0VGVtcGxhdGUoaGVscGVyKTtcbiAgICAgICAgICAgIHJldHVybiBzaW5nbGU7XG4gICAgICAgIH07XG4gICAgICAgIFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q2VsbFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZW51bV8xLkNlbGxUeXBlLlN1bW1hcnk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTdW1tYXJ5TW9kZWxHZW5lcmF0b3I7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IFN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB2YXIgR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5jb2x1bW5TZWxlY3RvciA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0SW5kZW50QnlMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCkge1xuICAgICAgICAgICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsgbGV2ZWwgPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLm1hcChmdW5jdGlvbiAodiwgaW5keCkgeyByZXR1cm4gaW5keCA8PSBsZXZlbCAtIDEgPyAnJyA6ICdlLWluZGVudGNlbGx0b3AnOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldENlbGxUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB9KFN1bW1hcnlNb2RlbEdlbmVyYXRvcikpO1xuICAgIGV4cG9ydHMuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IgPSBHcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB2YXIgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmNvbHVtblNlbGVjdG9yID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBDYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluaXRWYWwgPSB7IGNvbHVtbnM6IFtdIH07XG4gICAgICAgICAgICByZXR1cm4gW19zdXBlci5wcm90b3R5cGUuZ2V0RGF0YS5jYWxsKHRoaXMpLnJlZHVjZShmdW5jdGlvbiAocHJldiwgY3VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXYuY29sdW1ucyA9IHByZXYuY29sdW1ucy5jb25jYXQoY3VyLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgICAgICAgICB9LCBpbml0VmFsKV07XG4gICAgICAgIH07XG4gICAgICAgIENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuZ2V0RGF0YSgpWzBdLmNvbHVtbnMgfHwgW10pLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q2VsbFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZW51bV8xLkNlbGxUeXBlLkNhcHRpb25TdW1tYXJ5O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcjtcbiAgICB9KFN1bW1hcnlNb2RlbEdlbmVyYXRvcikpO1xuICAgIGV4cG9ydHMuQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvciA9IENhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvc3VtbWFyeS1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENlbGxSZW5kZXJlcihwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnVEQnLCB7IGNsYXNzTmFtZTogJ2Utcm93Y2VsbCcsIGF0dHJzOiB7IHJvbGU6ICdncmlkY2VsbCcsIHRhYmluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICB0aGlzLmxvY2FsaXplciA9IGxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdHRlciA9IGxvY2F0b3IuZ2V0U2VydmljZSgndmFsdWVGb3JtYXR0ZXInKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0R3VpID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uIChjb2x1bW4sIHZhbHVlLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZm9ybWF0dGVyLnRvVmlldyh2YWx1ZSwgY29sdW1uLmdldEZvcm1hdHRlcigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChub2RlLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgaWYgKGNlbGwuY29sdW1uLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpdGVyYWxzID0gWydpbmRleCddO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNlbGwuY29sdW1uLmdldENvbHVtblRlbXBsYXRlKCkoZWoyX2Jhc2VfMS5leHRlbmQoeyAnaW5kZXgnOiBhdHRyaWJ1dGVzW2xpdGVyYWxzWzBdXSB9LCBkYXRhKSwgdGhpcy5wYXJlbnQsICd0ZW1wbGF0ZScpO1xuICAgICAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbihub2RlLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbm9kZS5pbm5lclRleHQgKyAnIGlzIHRlbXBsYXRlIGNlbGwnICsgJyBjb2x1bW4gaGVhZGVyICcgK1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmNvbHVtbi5oZWFkZXJUZXh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5pbnZva2VGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoY29sdW1uLCB2YWx1ZSwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5mb3JtYXR0ZXIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5kb2VzSW1wbGVtZW50SW50ZXJmYWNlKGNvbHVtbi5mb3JtYXR0ZXIsICdnZXRWYWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3JtYXR0ZXIgPSBjb2x1bW4uZm9ybWF0dGVyO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBmb3JtYXR0ZXIoKS5nZXRWYWx1ZShjb2x1bW4sIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgY29sdW1uLmZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbHVtbi5mb3JtYXR0ZXIoY29sdW1uLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29sdW1uLmZvcm1hdHRlci5nZXRWYWx1ZShjb2x1bW4sIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmcmVzaENlbGwoY2VsbCwgZGF0YSwgYXR0cmlidXRlcyk7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVmcmVzaFREID0gZnVuY3Rpb24gKHRkLCBjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMucmVmcmVzaENlbGwoY2VsbCwgZGF0YSwgYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB0ZC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwobm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZWxlbWVudHNfMSA9IGVsZW1lbnRzOyBfaSA8IGVsZW1lbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBlbGVtZW50c18xW19pXTtcbiAgICAgICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoQ2VsbCA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjZWxsLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpbm5lckh0bWwgPSB0aGlzLmdldEd1aSgpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXRWYWx1ZShjb2x1bW4uZmllbGQsIGRhdGEsIGNvbHVtbik7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IERhdGUodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmZvcm1hdChjb2x1bW4sIHZhbHVlLCBkYXRhKTtcbiAgICAgICAgICAgIGlubmVySHRtbCA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgIHZhciBpc051bGwgPSAodmFsdWUgIT09ICd0cnVlJyAmJiB2YWx1ZSAhPT0gJ2ZhbHNlJyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5kaXNwbGF5QXNDaGVja0JveCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtY2hlY2tib3gnKTtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJIdG1sID0gaXNOdWxsID8gbnVsbCA6ICc8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgZGlzYWJsZWQgJyArICh2YWx1ZSA9PT0gJ3RydWUnID8gJ2NoZWNrZWQnIDogJycpICsgJy8+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbGVTdHIgPSBpc051bGwgPyBudWxsIDogdmFsdWUgPT09ICd0cnVlJyA/ICdUcnVlJyA6ICdGYWxzZSc7XG4gICAgICAgICAgICAgICAgICAgIGlubmVySHRtbCA9IGxvY2FsZVN0ciA/IHRoaXMubG9jYWxpemVyLmdldENvbnN0YW50KGxvY2FsZVN0cikgOiBpbm5lckh0bWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZyb21Gb3JtYXR0ZXIgPSB0aGlzLmludm9rZUZvcm1hdHRlcihjb2x1bW4sIHZhbHVlLCBkYXRhKTtcbiAgICAgICAgICAgIGlubmVySHRtbCA9ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5mb3JtYXR0ZXIpID8gZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChmcm9tRm9ybWF0dGVyKSA/ICcnIDogZnJvbUZvcm1hdHRlci50b1N0cmluZygpIDogaW5uZXJIdG1sO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpbm5lckh0bWwgKyAnIGNvbHVtbiBoZWFkZXIgJyArIGNlbGwuY29sdW1uLmhlYWRlclRleHQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZXZhbHVhdGUobm9kZSwgY2VsbCwgZGF0YSwgYXR0cmlidXRlcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEh0bWwobm9kZSwgaW5uZXJIdG1sLCBjb2x1bW4uZ2V0RG9tU2V0dGVyID8gY29sdW1uLmdldERvbVNldHRlcigpIDogJ2lubmVySFRNTCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVzKG5vZGUsIGNlbGwsIGF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kSHRtbCA9IGZ1bmN0aW9uIChub2RlLCBpbm5lckh0bWwsIHByb3BlcnR5KSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydHkgPT09IHZvaWQgMCkgeyBwcm9wZXJ0eSA9ICdpbm5lckhUTUwnOyB9XG4gICAgICAgICAgICBub2RlW3Byb3BlcnR5XSA9IGlubmVySHRtbDtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLnNldEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAobm9kZSwgY2VsbCwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgdGhpcy5idWlsZEF0dHJpYnV0ZUZyb21DZWxsKG5vZGUsIGNlbGwpO1xuICAgICAgICAgICAgdXRpbF8xLnNldFN0eWxlQW5kQXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY2VsbC5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW4uY3VzdG9tQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgY29sdW1uLmN1c3RvbUF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi50ZXh0QWxpZ24pIHtcbiAgICAgICAgICAgICAgICBub2RlLnN0eWxlLnRleHRBbGlnbiA9IGNvbHVtbi50ZXh0QWxpZ247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLmNsaXBNb2RlID09PSAnY2xpcCcpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZ3JpZGNsaXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi5jbGlwTW9kZSA9PT0gJ2VsbGlwc2lzd2l0aHRvb2x0aXAnKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWVsbGlwc2lzdG9vbHRpcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDZWxsUmVuZGVyZXIucHJvdG90eXBlLmJ1aWxkQXR0cmlidXRlRnJvbUNlbGwgPSBmdW5jdGlvbiAobm9kZSwgY2VsbCkge1xuICAgICAgICAgICAgdmFyIGF0dHIgPSB7fTtcbiAgICAgICAgICAgIHZhciBwcm9wID0geyAnY29saW5kZXgnOiAnYXJpYS1jb2xpbmRleCcgfTtcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0gW107XG4gICAgICAgICAgICBpZiAoY2VsbC5jb2xTcGFuKSB7XG4gICAgICAgICAgICAgICAgYXR0ci5jb2xTcGFuID0gY2VsbC5jb2xTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNlbGwucm93U3Bhbikge1xuICAgICAgICAgICAgICAgIGF0dHIucm93U3BhbiA9IGNlbGwucm93U3BhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjZWxsLmlzVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goJ2UtdGVtcGxhdGVjZWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2VsbC5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoLmFwcGx5KGNsYXNzZXMsIFsnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJywgJ2UtYWN0aXZlJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGwuaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgYXR0cltwcm9wLmNvbGluZGV4XSA9IGNlbGwuaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNlbGwudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZS1oaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRyLmNsYXNzID0gY2xhc3NlcztcbiAgICAgICAgICAgIHV0aWxfMS5zZXRTdHlsZUFuZEF0dHJpYnV0ZXMobm9kZSwgYXR0cik7XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlci5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoZmllbGQsIGRhdGEsIGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi52YWx1ZUFjY2Vzc29yKGNvbHVtbi5maWVsZCwgZGF0YSwgY29sdW1uKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENlbGxSZW5kZXJlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ2VsbFJlbmRlcmVyID0gQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2NlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4vY2VsbC1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgY2VsbF9yZW5kZXJlcl8xLCBhcmlhX3NlcnZpY2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSGVhZGVyQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEhlYWRlckNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSGVhZGVyQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdUSCcsIHsgY2xhc3NOYW1lOiAnZS1oZWFkZXJjZWxsJywgYXR0cnM6IHsgcm9sZTogJ2NvbHVtbmhlYWRlcicsIHRhYmluZGV4OiAnLTEnIH0gfSk7XG4gICAgICAgICAgICBfdGhpcy5hcmlhU2VydmljZSA9IG5ldyBhcmlhX3NlcnZpY2VfMS5BcmlhU2VydmljZSgpO1xuICAgICAgICAgICAgX3RoaXMuaFR4dEVsZSA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1oZWFkZXJ0ZXh0JyB9KTtcbiAgICAgICAgICAgIF90aGlzLnNvcnRFbGUgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1zb3J0ZmlsdGVyZGl2IGUtaWNvbnMnIH0pO1xuICAgICAgICAgICAgX3RoaXMuZ3VpID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmdldEd1aSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmd1aS5jbG9uZU5vZGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmVwYXJlSGVhZGVyKGNlbGwsIG5vZGUpO1xuICAgICAgICB9O1xuICAgICAgICBIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoY2VsbCwgbm9kZSkge1xuICAgICAgICAgICAgdGhpcy5jbGVhbihub2RlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXBhcmVIZWFkZXIoY2VsbCwgbm9kZSk7XG4gICAgICAgIH07XG4gICAgICAgIEhlYWRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuY2xlYW4gPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgbm9kZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlSGVhZGVyID0gZnVuY3Rpb24gKGNlbGwsIG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjZWxsLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBhcmlhQXR0ciA9IHt9O1xuICAgICAgICAgICAgdmFyIGlubmVyRElWID0gdGhpcy5nZXRHdWkoKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbHVtbi5oZWFkZXJUZXh0O1xuICAgICAgICAgICAgdmFyIGhlYWRlclRleHQgPSB0aGlzLmhUeHRFbGUuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBoZWFkZXJUZXh0W2NvbHVtbi5nZXREb21TZXR0ZXIoKV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGhlYWRlclRleHQpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5hdHRyaWJ1dGVzKGlubmVyRElWLCB7XG4gICAgICAgICAgICAgICAgJ2UtbWFwcGluZ3VpZCc6IGNvbHVtbi51aWQsXG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2UtaGVhZGVyY2VsbGRpdidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5idWlsZEF0dHJpYnV0ZUZyb21DZWxsKG5vZGUsIGNlbGwpO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRIdG1sKG5vZGUsIGlubmVyRElWKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5zb3J0RWxlLmNsb25lTm9kZSgpKTtcbiAgICAgICAgICAgIGlmIChjZWxsLmNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChjZWxsLmNsYXNzTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLmN1c3RvbUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGNvbHVtbi5jdXN0b21BdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2x1bW4uYWxsb3dTb3J0aW5nKSB7XG4gICAgICAgICAgICAgICAgYXJpYUF0dHIuc29ydCA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2x1bW4uYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGFyaWFBdHRyLmdyYWJiZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGhhbmRsZXIuY2xhc3NOYW1lID0gY29sdW1uLmFsbG93UmVzaXppbmcgPyAnZS1yaGFuZGxlciBlLXJjdXJzb3InIDogJ2UtcnN1cHByZXNzJztcbiAgICAgICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hcmlhU2VydmljZS5zZXRPcHRpb25zKG5vZGUsIGFyaWFBdHRyKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uaGVhZGVyVGV4dEFsaWduKSB8fCAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udGV4dEFsaWduKSkge1xuICAgICAgICAgICAgICAgIHZhciBhbGlnbm1lbnQgPSBjb2x1bW4uaGVhZGVyVGV4dEFsaWduIHx8IGNvbHVtbi50ZXh0QWxpZ247XG4gICAgICAgICAgICAgICAgaW5uZXJESVYuc3R5bGUudGV4dEFsaWduID0gYWxpZ25tZW50O1xuICAgICAgICAgICAgICAgIGlmIChhbGlnbm1lbnQgPT09ICdyaWdodCcgfHwgYWxpZ25tZW50ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKGFsaWdubWVudCA9PT0gJ3JpZ2h0JyA/ICdlLXJpZ2h0YWxpZ24nIDogJ2UtbGVmdGFsaWduJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi5jbGlwTW9kZSA9PT0gJ2NsaXAnKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdlLWdyaWRjbGlwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb2x1bW4uY2xpcE1vZGUgPT09ICdlbGxpcHNpc3dpdGh0b29sdGlwJykge1xuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnZS1lbGxpcHNpc3Rvb2x0aXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLXJvd3NwYW4nLCAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY2VsbC5yb3dTcGFuKSA/IGNlbGwucm93U3BhbiA6IDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29sc3BhbicsICcxJyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgSGVhZGVyQ2VsbFJlbmRlcmVyLnByb3RvdHlwZS5hcHBlbmRIdG1sID0gZnVuY3Rpb24gKG5vZGUsIGlubmVySHRtbCkge1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChpbm5lckh0bWwpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIZWFkZXJDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5IZWFkZXJDZWxsUmVuZGVyZXIgPSBIZWFkZXJDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvaGVhZGVyLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEFyaWFTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQXJpYVNlcnZpY2UoKSB7XG4gICAgICAgIH1cbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiAodGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgcHJvcHMgPSBPYmplY3Qua2V5cyhvcHRpb25zKTtcbiAgICAgICAgICAgIHByb3BzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZ1tuYW1lXSwgb3B0aW9uc1tuYW1lXSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0RXhwYW5kID0gZnVuY3Rpb24gKHRhcmdldCwgZXhwYW5kKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuZXhwYW5kLCBleHBhbmQpO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0U29ydCA9IGZ1bmN0aW9uICh0YXJnZXQsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLnNvcnQsIGRpcmVjdGlvbiwgdHlwZW9mIGRpcmVjdGlvbiA9PT0gJ2Jvb2xlYW4nKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJpYVNlcnZpY2UucHJvdG90eXBlLnNldEJ1c3kgPSBmdW5jdGlvbiAodGFyZ2V0LCBpc0J1c3kpIHtcbiAgICAgICAgICAgIHNldFN0YXRlQW5kUHJvcGVydGllcyh0YXJnZXQsIGNvbmZpZy5idXN5LCBpc0J1c3kpO1xuICAgICAgICAgICAgc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgY29uZmlnLmludmFsaWQsIG51bGwsIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0R3JhYmJlZCA9IGZ1bmN0aW9uICh0YXJnZXQsIGlzR3JhYmJlZCwgcmVtb3ZlKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuZ3JhYmJlZCwgaXNHcmFiYmVkLCByZW1vdmUpO1xuICAgICAgICB9O1xuICAgICAgICBBcmlhU2VydmljZS5wcm90b3R5cGUuc2V0RHJvcFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQsIGlzVGFyZ2V0KSB7XG4gICAgICAgICAgICBzZXRTdGF0ZUFuZFByb3BlcnRpZXModGFyZ2V0LCBjb25maWcuZHJvcGVmZmVjdCwgJ2NvcHknLCAhaXNUYXJnZXQpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQXJpYVNlcnZpY2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkFyaWFTZXJ2aWNlID0gQXJpYVNlcnZpY2U7XG4gICAgZnVuY3Rpb24gc2V0U3RhdGVBbmRQcm9wZXJ0aWVzKHRhcmdldCwgYXR0cmlidXRlLCB2YWx1ZSwgcmVtb3ZlKSB7XG4gICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgIGV4cGFuZDogJ2FyaWEtZXhwYW5kZWQnLFxuICAgICAgICByb2xlOiAncm9sZScsXG4gICAgICAgIHNlbGVjdGVkOiAnYXJpYS1zZWxlY3RlZCcsXG4gICAgICAgIG11bHRpc2VsZWN0YWJsZTogJ2FyaWEtbXVsdGlzZWxlY3RhYmxlJyxcbiAgICAgICAgc29ydDogJ2FyaWEtc29ydCcsXG4gICAgICAgIGJ1c3k6ICdhcmlhLWJ1c3knLFxuICAgICAgICBpbnZhbGlkOiAnYXJpYS1pbnZhbGlkJyxcbiAgICAgICAgZ3JhYmJlZDogJ2FyaWEtZ3JhYmJlZCcsXG4gICAgICAgIGRyb3BlZmZlY3Q6ICdhcmlhLWRyb3BlZmZlY3QnLFxuICAgICAgICBoYXNwb3B1cDogJ2FyaWEtaGFzcG9wdXAnLFxuICAgICAgICBsZXZlbDogJ2FyaWEtbGV2ZWwnLFxuICAgICAgICBjb2xjb3VudDogJ2FyaWEtY29sY291bnQnXG4gICAgfTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy9hcmlhLXNlcnZpY2UuanNcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdUSCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWhlYWRlcmNlbGwgZS1zdGFja2VkaGVhZGVyY2VsbCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdjb2x1bW5oZWFkZXInLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1zdGFja2VkaGVhZGVyY2VsbGRpdicgfSk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gY2VsbC5jb2x1bW4uaGVhZGVyVGV4dDtcbiAgICAgICAgICAgIGlmIChjZWxsLmNvbHVtbi50b29sVGlwKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgY2VsbC5jb2x1bW4udG9vbFRpcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChjZWxsLmNvbHVtbi50ZXh0QWxpZ24pKSB7XG4gICAgICAgICAgICAgICAgZGl2LnN0eWxlLnRleHRBbGlnbiA9IGNlbGwuY29sdW1uLnRleHRBbGlnbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY2VsbC5jb2xTcGFuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29sc3BhbicsIGNlbGwuY29sU3Bhbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLXJvd3NwYW4nLCAnMScpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTdGFja2VkSGVhZGVyQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuU3RhY2tlZEhlYWRlckNlbGxSZW5kZXJlciA9IFN0YWNrZWRIZWFkZXJDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvc3RhY2tlZC1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgdXRpbF8xLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEluZGVudENlbGxSZW5kZXJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhJbmRlbnRDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEluZGVudENlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnVEQnLCB7IGNsYXNzTmFtZTogJ2UtaW5kZW50Y2VsbCcgfSk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgSW5kZW50Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB1dGlsXzEuc2V0U3R5bGVBbmRBdHRyaWJ1dGVzKG5vZGUsIGNlbGwuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEluZGVudENlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkluZGVudENlbGxSZW5kZXJlciA9IEluZGVudENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9pbmRlbnQtY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gR3JvdXBDYXB0aW9uQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdURCcsIHsgY2xhc3NOYW1lOiAnZS1ncm91cGNhcHRpb24nLCBhdHRyczogeyByb2xlOiAnZ3JpZGNlbGwnLCB0YWJpbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5mb3JtYXQoY2VsbC5jb2x1bW4sIGNlbGwuY29sdW1uLnZhbHVlQWNjZXNzb3IoJ2tleScsIGRhdGEsIGNlbGwuY29sdW1uKSk7XG4gICAgICAgICAgICBub2RlLmlubmVySFRNTCA9IGNlbGwuY29sdW1uLmhlYWRlclRleHQgKyAnOiAnICsgdmFsdWUgKyAnIC0gJyArIGRhdGEuY291bnQgKyAnICcgK1xuICAgICAgICAgICAgICAgIChkYXRhLmNvdW50IDwgMiA/IHRoaXMubG9jYWxpemVyLmdldENvbnN0YW50KCdJdGVtJykgOiB0aGlzLmxvY2FsaXplci5nZXRDb25zdGFudCgnSXRlbXMnKSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGNlbGwuY29sU3Bhbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbm9kZS5pbm5lckhUTUwgKyAnIGlzIGdyb3VwY2FwdGlvbiBjZWxsJyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlciA9IEdyb3VwQ2FwdGlvbkNlbGxSZW5kZXJlcjtcbiAgICB2YXIgR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdURCcsIHsgY2xhc3NOYW1lOiAnZS1ncm91cGNhcHRpb24nIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY2VsbCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmlubmVySFRNTCA9ICcmbmJzcDsnO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBjZWxsLmNvbFNwYW4udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwQ2FwdGlvbkVtcHR5Q2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuR3JvdXBDYXB0aW9uRW1wdHlDZWxsUmVuZGVyZXIgPSBHcm91cENhcHRpb25FbXB0eUNlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9jYXB0aW9uLWNlbGwtcmVuZGVyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuL2luZGVudC1jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgaW5kZW50X2NlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRXhwYW5kQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEV4cGFuZENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRXhwYW5kQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIEV4cGFuZENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNlbGwsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgbm9kZS5jbGFzc05hbWUgPSAnZS1yZWNvcmRwbHVzZXhwYW5kJztcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdlai1tYXBwaW5nbmFtZScsIGRhdGEuZmllbGQpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmd2YWx1ZScsIGRhdGEua2V5KTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWdkaWFnb25hbGRvd24gZS1pY29uLWdkb3duYXJyb3cnIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRXhwYW5kQ2VsbFJlbmRlcmVyO1xuICAgIH0oaW5kZW50X2NlbGxfcmVuZGVyZXJfMS5JbmRlbnRDZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkV4cGFuZENlbGxSZW5kZXJlciA9IEV4cGFuZENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9leHBhbmQtY2VsbC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEhlYWRlckluZGVudENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdUSCcsIHsgY2xhc3NOYW1lOiAnZS1ncm91cHRvcGxlZnRjZWxsJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaGVhZGVyY2VsbGRpdiBlLWVtcHR5Y2VsbCcsIGlubmVySFRNTDogJyZuYnNwOycgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5IZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIgPSBIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvaGVhZGVyLWluZGVudC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRGV0YWlsSGVhZGVySW5kZW50Q2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdUSCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxoZWFkZXJjZWxsJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBEZXRhaWxIZWFkZXJJbmRlbnRDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZW1wdHljZWxsJyB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlcjtcbiAgICB9KGNlbGxfcmVuZGVyZXJfMS5DZWxsUmVuZGVyZXIpKTtcbiAgICBleHBvcnRzLkRldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlciA9IERldGFpbEhlYWRlckluZGVudENlbGxSZW5kZXJlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9kZXRhaWwtaGVhZGVyLWluZGVudC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKERldGFpbEV4cGFuZENlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRGV0YWlsRXhwYW5kQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdURCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWRldGFpbHJvd2NvbGxhcHNlJyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyAnYXJpYS1leHBhbmRlZCc6ICdmYWxzZScsIHJvbGU6ICdncmlkY2VsbCcsIHRhYmluZGV4OiAnLTEnIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIERldGFpbEV4cGFuZENlbGxSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWljb25zIGUtZHRkaWFnb25hbHJpZ2h0IGUtaWNvbi1ncmlnaHRhcnJvdycgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXI7XG4gICAgfShjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKSk7XG4gICAgZXhwb3J0cy5EZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXIgPSBEZXRhaWxFeHBhbmRDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZGV0YWlsLWV4cGFuZC1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVudW1fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2VsbFJlbmRlcmVyRmFjdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENlbGxSZW5kZXJlckZhY3RvcnkoKSB7XG4gICAgICAgICAgICB0aGlzLmNlbGxSZW5kZXJNYXAgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBDZWxsUmVuZGVyZXJGYWN0b3J5LnByb3RvdHlwZS5hZGRDZWxsUmVuZGVyZXIgPSBmdW5jdGlvbiAobmFtZSwgdHlwZSkge1xuICAgICAgICAgICAgbmFtZSA9IHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyA/IG5hbWUgOiBlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIG5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jZWxsUmVuZGVyTWFwW25hbWVdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbFJlbmRlck1hcFtuYW1lXSA9IHR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENlbGxSZW5kZXJlckZhY3RvcnkucHJvdG90eXBlLmdldENlbGxSZW5kZXJlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBuYW1lID0gdHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnID8gbmFtZSA6IGVqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgbmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNlbGxSZW5kZXJNYXBbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJUaGUgY2VsbFJlbmRlcmVyIFwiICsgbmFtZSArIFwiIGlzIG5vdCBmb3VuZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2VsbFJlbmRlck1hcFtuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENlbGxSZW5kZXJlckZhY3Rvcnk7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNlbGxSZW5kZXJlckZhY3RvcnkgPSBDZWxsUmVuZGVyZXJGYWN0b3J5O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnkuanNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9lbnVtXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZW51bV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSZW5kZXJlckZhY3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBSZW5kZXJlckZhY3RvcnkoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyTWFwID0ge307XG4gICAgICAgIH1cbiAgICAgICAgUmVuZGVyZXJGYWN0b3J5LnByb3RvdHlwZS5hZGRSZW5kZXJlciA9IGZ1bmN0aW9uIChuYW1lLCB0eXBlKSB7XG4gICAgICAgICAgICB2YXIgck5hbWUgPSBlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuUmVuZGVyVHlwZSwgbmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLnJlbmRlcmVyTWFwW3JOYW1lXSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyTWFwW3JOYW1lXSA9IHR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlbmRlcmVyRmFjdG9yeS5wcm90b3R5cGUuZ2V0UmVuZGVyZXIgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgdmFyIHJOYW1lID0gZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLlJlbmRlclR5cGUsIG5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5yZW5kZXJlck1hcFtyTmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJUaGUgcmVuZGVyZXIgXCIgKyByTmFtZSArIFwiIGlzIG5vdCBmb3VuZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJNYXBbck5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUmVuZGVyZXJGYWN0b3J5O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5SZW5kZXJlckZhY3RvcnkgPSBSZW5kZXJlckZhY3Rvcnk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvcmVuZGVyZXItZmFjdG9yeS5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9tb2RlbHMvY29sdW1uXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgY29uc3RhbnRfMSwgY29sdW1uXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIENvbHVtbldpZHRoU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbHVtbldpZHRoU2VydmljZShwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuc2V0V2lkdGhUb0NvbHVtbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleGVzSW5WaWV3KCk7XG4gICAgICAgICAgICB2YXIgd0ZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBsZW4gPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGluZGV4ZXMuaW5kZXhPZihpKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbldpZHRoKG5ldyBjb2x1bW5fMS5Db2x1bW4oeyB3aWR0aDogJzMwcHgnIH0pLCBpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgfHwgdGhpcy5wYXJlbnQuY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb2x1bW5XaWR0aChuZXcgY29sdW1uXzEuQ29sdW1uKHsgd2lkdGg6ICczMHB4JyB9KSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnNldENvbHVtbldpZHRoKGNvbHVtbiwgd0ZsYWcgPyB1bmRlZmluZWQgOiBpbmRleCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5zZXRDb2x1bW5XaWR0aCA9IGZ1bmN0aW9uIChjb2x1bW4sIGluZGV4LCBtb2R1bGUpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5JbmRleCA9IGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoaW5kZXgpID8gdGhpcy5wYXJlbnQuZ2V0Tm9ybWFsaXplZENvbHVtbkluZGV4KGNvbHVtbi51aWQpIDogaW5kZXg7XG4gICAgICAgICAgICB2YXIgY1dpZHRoID0gdGhpcy5nZXRXaWR0aChjb2x1bW4pO1xuICAgICAgICAgICAgaWYgKGNXaWR0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgoY1dpZHRoLCBjb2x1bW5JbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93UmVzaXppbmcgJiYgbW9kdWxlID09PSAncmVzaXplJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFdpZHRoVG9UYWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoY29uc3RhbnRfMS5jb2x1bW5XaWR0aENoYW5nZWQsIHsgaW5kZXg6IGNvbHVtbkluZGV4LCB3aWR0aDogY1dpZHRoLCBjb2x1bW46IGNvbHVtbiwgbW9kdWxlOiBtb2R1bGUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuc2V0V2lkdGggPSBmdW5jdGlvbiAod2lkdGgsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCk7XG4gICAgICAgICAgICB2YXIgZldpZHRoID0gZWoyX2Jhc2VfMi5mb3JtYXRVbml0KHdpZHRoKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJDb2wgPSBoZWFkZXIucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZHJlbltpbmRleF07XG4gICAgICAgICAgICBpZiAoaGVhZGVyQ29sKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29sLnN0eWxlLndpZHRoID0gZldpZHRoO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQucXVlcnlTZWxlY3RvcignY29sZ3JvdXAnKS5jaGlsZHJlbltpbmRleF0uc3R5bGUud2lkdGggPSBmV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWRpdCA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLmUtdGFibGUuZS1pbmxpbmUtZWRpdCcpO1xuICAgICAgICAgICAgaWYgKGVkaXQpIHtcbiAgICAgICAgICAgICAgICBlZGl0LnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2hpbGRyZW5baW5kZXhdLnN0eWxlLndpZHRoID0gZldpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLmdldFNpYmxpbmdzSGVpZ2h0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBwcmV2aW91cyA9IHRoaXMuZ2V0SGVpZ2h0RnJvbURpcmVjdGlvbihlbGVtZW50LCAncHJldmlvdXMnKTtcbiAgICAgICAgICAgIHZhciBuZXh0ID0gdGhpcy5nZXRIZWlnaHRGcm9tRGlyZWN0aW9uKGVsZW1lbnQsICduZXh0Jyk7XG4gICAgICAgICAgICByZXR1cm4gcHJldmlvdXMgKyBuZXh0O1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLmdldEhlaWdodEZyb21EaXJlY3Rpb24gPSBmdW5jdGlvbiAoZWxlbWVudCwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc2libGluZyA9IGVsZW1lbnRbZGlyZWN0aW9uICsgJ0VsZW1lbnRTaWJsaW5nJ107XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChzaWJsaW5nKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHNpYmxpbmcub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIHNpYmxpbmcgPSBzaWJsaW5nW2RpcmVjdGlvbiArICdFbGVtZW50U2libGluZyddO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uV2lkdGhTZXJ2aWNlLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi53aWR0aCkgJiYgdGhpcy5wYXJlbnQuYWxsb3dSZXNpemluZykge1xuICAgICAgICAgICAgICAgIGNvbHVtbi53aWR0aCA9IDIwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY29sdW1uLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBwYXJzZUludChjb2x1bW4ud2lkdGgudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5taW5XaWR0aCAmJiB3aWR0aCA8IHBhcnNlSW50KGNvbHVtbi5taW5XaWR0aC50b1N0cmluZygpLCAxMCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uLm1pbldpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKGNvbHVtbi5tYXhXaWR0aCAmJiB3aWR0aCA+IHBhcnNlSW50KGNvbHVtbi5tYXhXaWR0aC50b1N0cmluZygpLCAxMCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5tYXhXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW4ud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbldpZHRoU2VydmljZS5wcm90b3R5cGUuZ2V0VGFibGVXaWR0aCA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgICAgICB2YXIgdFdpZHRoID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2kgPCBjb2x1bW5zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGNXaWR0aCA9IHRoaXMuZ2V0V2lkdGgoY29sdW1uKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnZpc2libGUgIT09IGZhbHNlICYmIGNXaWR0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0V2lkdGggKz0gcGFyc2VJbnQoY1dpZHRoLnRvU3RyaW5nKCksIDEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdFdpZHRoO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5XaWR0aFNlcnZpY2UucHJvdG90eXBlLnNldFdpZHRoVG9UYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0V2lkdGggPSBlajJfYmFzZV8yLmZvcm1hdFVuaXQodGhpcy5nZXRUYWJsZVdpZHRoKHRoaXMucGFyZW50LmdldENvbHVtbnMoKSkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5zdHlsZS53aWR0aCA9IHRXaWR0aDtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLnN0eWxlLndpZHRoID0gdFdpZHRoO1xuICAgICAgICAgICAgdmFyIGVkaXQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlLmUtaW5saW5lLWVkaXQnKTtcbiAgICAgICAgICAgIGlmIChlZGl0KSB7XG4gICAgICAgICAgICAgICAgZWRpdC5zdHlsZS53aWR0aCA9IHRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbHVtbldpZHRoU2VydmljZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29sdW1uV2lkdGhTZXJ2aWNlID0gQ29sdW1uV2lkdGhTZXJ2aWNlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXIuanNcbi8vIG1vZHVsZSBpZCA9IDM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQYWdlU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUGFnZVNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBQYWdlU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBhZ2VTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEyKVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwicGFnZVNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSg4KVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwicGFnZUNvdW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMSlcbiAgICBdLCBQYWdlU2V0dGluZ3MucHJvdG90eXBlLCBcImN1cnJlbnRQYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoKVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwidG90YWxSZWNvcmRzQ291bnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBQYWdlU2V0dGluZ3MucHJvdG90eXBlLCBcImVuYWJsZVF1ZXJ5U3RyaW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgUGFnZVNldHRpbmdzLnByb3RvdHlwZSwgXCJwYWdlU2l6ZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIFBhZ2VTZXR0aW5ncy5wcm90b3R5cGUsIFwidGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlBhZ2VTZXR0aW5ncyA9IFBhZ2VTZXR0aW5ncztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9tb2RlbHMvcGFnZS1zZXR0aW5ncy5qc1xuLy8gbW9kdWxlIGlkID0gMzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL2Jhc2UvZW51bVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzLCBlbnVtXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNlbGVjdGlvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNlbGVjdGlvbihwYXJlbnQsIHNlbGVjdGlvblNldHRpbmdzLCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmVjb3JkcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVTZWxlY3RNdWx0aVRvdWNoID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MgPSBzZWxlY3Rpb25TZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuZmFjdG9yeSA9IGxvY2F0b3IuZ2V0U2VydmljZSgncmVuZGVyZXJGYWN0b3J5Jyk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmluaXRpYWxpemVTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLCAnbW91c2Vkb3duJywgdGhpcy5tb3VzZURvd25IYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5vbkFjdGlvbkJlZ2luID0gZnVuY3Rpb24gKGFyZ3MsIHR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIodHlwZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChhcmdzLCB0eXBlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKHR5cGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3NlbGVjdGlvbic7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZVBvcFVwKCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICdtb3VzZWRvd24nLCB0aGlzLm1vdXNlRG93bkhhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmlzRWRpdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2JhdGNoJyAmJiB0aGlzLnBhcmVudC5pc0VkaXQ7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Um93ID0gZnVuY3Rpb24gKGluZGV4LCBpc1RvZ2dsZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvdyA9IGdPYmouZ2V0Um93QnlJbmRleChpbmRleCk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0RGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUm93VHlwZSgpIHx8ICFzZWxlY3RlZFJvdyB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzUm93U2VsZWN0ZWQgPSBzZWxlY3RlZFJvdy5oYXNBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIGlzVG9nZ2xlID0gIWlzVG9nZ2xlID8gaXNUb2dnbGUgOiBpbmRleCA9PT0gdGhpcy5wcmV2Um93SW5kZXggJiYgaXNSb3dTZWxlY3RlZDtcbiAgICAgICAgICAgIGlmICghaXNUb2dnbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3REYXRhLCByb3dJbmRleDogaW5kZXgsIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCByb3c6IHNlbGVjdGVkUm93LCBwcmV2aW91c1JvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCwgdGFyZ2V0OiB0aGlzLnRhcmdldFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhclJvdygpO1xuICAgICAgICAgICAgaWYgKCFpc1RvZ2dsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUm93U2VsZWN0aW9uKHNlbGVjdGVkUm93LCBpbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dQcm9wcyhpbmRleCk7XG4gICAgICAgICAgICBpZiAoIWlzVG9nZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0RGF0YSwgcm93SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICByb3c6IHNlbGVjdGVkUm93LCBwcmV2aW91c1JvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCwgdGFyZ2V0OiB0aGlzLnRhcmdldFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Um93c0J5UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93cyh0aGlzLmdldENvbGxlY3Rpb25Gcm9tSW5kZXhlcyhzdGFydEluZGV4LCBlbmRJbmRleCkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCA9IGVuZEluZGV4O1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdFJvd3MgPSBmdW5jdGlvbiAocm93SW5kZXhlcykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvdyA9IGdPYmouZ2V0Um93QnlJbmRleChyb3dJbmRleGVzWzBdKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3Jvd0luZGV4ZXNbMF1dO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWwoKSB8fCAhdGhpcy5pc1Jvd1R5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICByb3dJbmRleGVzOiByb3dJbmRleGVzLCByb3c6IHNlbGVjdGVkUm93LCByb3dJbmRleDogcm93SW5kZXhlc1swXSwgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICBwcmV2Um93OiBnT2JqLmdldFJvd3MoKVt0aGlzLnByZXZSb3dJbmRleF0sIHByZXZpb3VzUm93SW5kZXg6IHRoaXMucHJldlJvd0luZGV4LFxuICAgICAgICAgICAgICAgIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LCBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YVxuICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGluZyk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyUm93KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd0luZGV4ZXNfMSA9IHJvd0luZGV4ZXM7IF9pIDwgcm93SW5kZXhlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IHJvd0luZGV4ZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dTZWxlY3Rpb24oZ09iai5nZXRSb3dCeUluZGV4KHJvd0luZGV4KSwgcm93SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dQcm9wcyhyb3dJbmRleGVzWzBdKTtcbiAgICAgICAgICAgIHRoaXMub25BY3Rpb25Db21wbGV0ZSh7XG4gICAgICAgICAgICAgICAgcm93SW5kZXhlczogcm93SW5kZXhlcywgcm93OiBzZWxlY3RlZFJvdywgcm93SW5kZXg6IHJvd0luZGV4ZXNbMF0sIHRhcmdldDogdGhpcy50YXJnZXQsXG4gICAgICAgICAgICAgICAgcHJldlJvdzogZ09iai5nZXRSb3dzKClbdGhpcy5wcmV2Um93SW5kZXhdLCBwcmV2aW91c1Jvd0luZGV4OiB0aGlzLnByZXZSb3dJbmRleCxcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGFcbiAgICAgICAgICAgIH0sIGV2ZW50cy5yb3dTZWxlY3RlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkUm93c1RvU2VsZWN0aW9uID0gZnVuY3Rpb24gKHJvd0luZGV4ZXMpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3cgPSBnT2JqLmdldFJvd0J5SW5kZXgocm93SW5kZXhlc1swXSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzUm93VHlwZSgpIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJvd0luZGV4ZXNfMiA9IHJvd0luZGV4ZXM7IF9pIDwgcm93SW5kZXhlc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IHJvd0luZGV4ZXNfMltfaV07XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3Jvd0luZGV4XTtcbiAgICAgICAgICAgICAgICB2YXIgaXNVblNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMuaW5kZXhPZihyb3dJbmRleCkgPiAtMTtcbiAgICAgICAgICAgICAgICBnT2JqLnNlbGVjdGVkUm93SW5kZXggPSByb3dJbmRleDtcbiAgICAgICAgICAgICAgICBpZiAoaXNVblNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93RGVzZWxlY3QoZXZlbnRzLnJvd0Rlc2VsZWN0aW5nLCBbcm93SW5kZXhdLCBkYXRhLCBbc2VsZWN0ZWRSb3ddKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMuc3BsaWNlKHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmluZGV4T2Yocm93SW5kZXgpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJlY29yZHMuc3BsaWNlKHRoaXMuc2VsZWN0ZWRSZWNvcmRzLmluZGV4T2Yoc2VsZWN0ZWRSb3cpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3cucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyhzZWxlY3RlZFJvdywgZmFsc2UsIG51bGwsICdlLXNlbGVjdGlvbmJhY2tncm91bmQnLCAnZS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dEZXNlbGVjdChldmVudHMucm93RGVzZWxlY3RpbmcsIFtyb3dJbmRleF0sIGRhdGEsIFtzZWxlY3RlZFJvd10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsIHJvd0luZGV4OiByb3dJbmRleCwgcm93OiBzZWxlY3RlZFJvdywgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSwgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCwgaXNTaGlmdFByZXNzZWQ6IHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdFxuICAgICAgICAgICAgICAgICAgICB9LCBldmVudHMucm93U2VsZWN0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dTZWxlY3Rpb24oc2VsZWN0ZWRSb3csIHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSb3dQcm9wcyhyb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1VuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsIHJvd0luZGV4OiByb3dJbmRleCwgcm93OiBzZWxlY3RlZFJvdywgdGFyZ2V0OiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZSb3c6IGdPYmouZ2V0Um93cygpW3RoaXMucHJldlJvd0luZGV4XSwgcHJldmlvdXNSb3dJbmRleDogdGhpcy5wcmV2Um93SW5kZXhcbiAgICAgICAgICAgICAgICAgICAgfSwgZXZlbnRzLnJvd1NlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0Q29sbGVjdGlvbkZyb21JbmRleGVzID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIF9hID0gKHN0YXJ0SW5kZXggPCBlbmRJbmRleCkgP1xuICAgICAgICAgICAgICAgIHsgaTogc3RhcnRJbmRleCwgbWF4OiBlbmRJbmRleCB9IDogeyBpOiBlbmRJbmRleCwgbWF4OiBzdGFydEluZGV4IH0sIGkgPSBfYS5pLCBtYXggPSBfYS5tYXg7XG4gICAgICAgICAgICBmb3IgKDsgaSA8PSBtYXg7IGkrKykge1xuICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGFydEluZGV4ID4gZW5kSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpbmRleGVzLnJldmVyc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyUm93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclJvd1NlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzID0gW107XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RlZFJvd0luZGV4ID0gLTE7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlUm93UHJvcHMgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2Um93SW5kZXggPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgdGhpcy5pc1Jvd1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMubGVuZ3RoICYmIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlUm93U2VsZWN0aW9uID0gZnVuY3Rpb24gKHNlbGVjdGVkUm93LCBzdGFydEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkUm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMucHVzaChzdGFydEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWNvcmRzLnB1c2goc2VsZWN0ZWRSb3cpO1xuICAgICAgICAgICAgc2VsZWN0ZWRSb3cuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIHRoaXMuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyhzZWxlY3RlZFJvdywgdHJ1ZSwgbnVsbCwgJ2Utc2VsZWN0aW9uYmFja2dyb3VuZCcsICdlLWFjdGl2ZScpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRwb3B1cCcpLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTtcbiAgICAgICAgICAgIGlmIChzcGFuLmNsYXNzTGlzdC5jb250YWlucygnZS1yb3dzZWxlY3QnKSkge1xuICAgICAgICAgICAgICAgIHNwYW4uY2xhc3NMaXN0LnJlbW92ZSgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhclJvd1NlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0TXVsdGlUb3VjaCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyUm93U2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHZhciByb3dzID0gdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFZpZXdEYXRhID0gdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChjdXJyZW50Vmlld0RhdGFbdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LnB1c2godGhpcy5wYXJlbnQuZ2V0Um93cygpW3RoaXMuc2VsZWN0ZWRSb3dJbmRleGVzW2ldXSk7XG4gICAgICAgICAgICAgICAgICAgIHJvd0luZGV4LnB1c2godGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJvd0Rlc2VsZWN0KGV2ZW50cy5yb3dEZXNlbGVjdGluZywgcm93SW5kZXgsIGRhdGEsIHJvdyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dfMSA9IHRoaXMucGFyZW50LmdldFJvd0J5SW5kZXgodGhpcy5zZWxlY3RlZFJvd0luZGV4ZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93XzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd18xLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyhyb3dfMSwgZmFsc2UsIHRydWUsICdlLXNlbGVjdGlvbmJhY2tncm91bmQnLCAnZS1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0luZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUmVjb3JkcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNSb3dTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dEZXNlbGVjdChldmVudHMucm93RGVzZWxlY3RlZCwgcm93SW5kZXgsIGRhdGEsIHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucm93RGVzZWxlY3QgPSBmdW5jdGlvbiAodHlwZSwgcm93SW5kZXgsIGRhdGEsIHJvdykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcih0eXBlLCB7XG4gICAgICAgICAgICAgICAgcm93SW5kZXg6IHJvd0luZGV4LCBkYXRhOiBkYXRhLCByb3c6IHJvd1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Q2VsbCA9IGZ1bmN0aW9uIChjZWxsSW5kZXgsIGlzVG9nZ2xlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZENlbGwgPSBnT2JqLmdldENlbGxGcm9tSW5kZXgoY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXguY2VsbEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gY2VsbEluZGV4LnJvd0luZGV4O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbdGhpcy5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2VsbFR5cGUoKSB8fCAhc2VsZWN0ZWRDZWxsIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaXNDZWxsU2VsZWN0ZWQgPSBzZWxlY3RlZENlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNlbGxzZWxlY3Rpb25iYWNrZ3JvdW5kJyk7XG4gICAgICAgICAgICBpc1RvZ2dsZSA9ICFpc1RvZ2dsZSA/IGlzVG9nZ2xlIDogISghZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZDSWR4cykgJiZcbiAgICAgICAgICAgICAgICBjZWxsSW5kZXgucm93SW5kZXggPT09IHRoaXMucHJldkNJZHhzLnJvd0luZGV4ICYmIGNlbGxJbmRleC5jZWxsSW5kZXggPT09IHRoaXMucHJldkNJZHhzLmNlbGxJbmRleCAmJlxuICAgICAgICAgICAgICAgIGlzQ2VsbFNlbGVjdGVkKTtcbiAgICAgICAgICAgIGlmIChpc1RvZ2dsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25BY3Rpb25CZWdpbih7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBjZWxsSW5kZXgsIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsXG4gICAgICAgICAgICAgICAgICAgIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LCBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsKCk7XG4gICAgICAgICAgICBpZiAoaXNUb2dnbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsLCBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleC5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsUHJvcHMoY2VsbEluZGV4LCBjZWxsSW5kZXgpO1xuICAgICAgICAgICAgaWYgKGlzVG9nZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWREYXRhLCBjZWxsSW5kZXg6IGNlbGxJbmRleCwgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cywgc2VsZWN0ZWRSb3dDZWxsSW5kZXg6IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcyxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3RDZWxsc0J5UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChzdGFydEluZGV4LnJvd0luZGV4LCBzdGFydEluZGV4LmNlbGxJbmRleCk7XG4gICAgICAgICAgICB2YXIgbWluO1xuICAgICAgICAgICAgdmFyIG1heDtcbiAgICAgICAgICAgIHZhciBzdEluZGV4ID0gc3RhcnRJbmRleDtcbiAgICAgICAgICAgIHZhciBlZEluZGV4ID0gZW5kSW5kZXggPSBlbmRJbmRleCA/IGVuZEluZGV4IDogc3RhcnRJbmRleDtcbiAgICAgICAgICAgIHZhciBjZWxsSW5kZXhlcztcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gc3RhcnRJbmRleC5yb3dJbmRleDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsKCkgfHwgIXRoaXMuaXNDZWxsVHlwZSgpIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBzdGFydEluZGV4LCBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LCBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsKCk7XG4gICAgICAgICAgICBpZiAoc3RhcnRJbmRleC5yb3dJbmRleCA+IGVuZEluZGV4LnJvd0luZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgICAgIHN0YXJ0SW5kZXggPSBlbmRJbmRleDtcbiAgICAgICAgICAgICAgICBlbmRJbmRleCA9IHRlbXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleC5yb3dJbmRleDsgaSA8PSBlbmRJbmRleC5yb3dJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MuY2VsbFNlbGVjdGlvbk1vZGUgIT09ICdib3gnKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGkgPT09IHN0YXJ0SW5kZXgucm93SW5kZXggPyAoc3RhcnRJbmRleC5jZWxsSW5kZXgpIDogMDtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gaSA9PT0gZW5kSW5kZXgucm93SW5kZXggPyAoZW5kSW5kZXguY2VsbEluZGV4KSA6IGdPYmouZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtaW4gPSBzdGFydEluZGV4LmNlbGxJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gZW5kSW5kZXguY2VsbEluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjZWxsSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBtaW4gPCBtYXggPyBtaW4gOiBtYXgsIGxlbiA9IG1pbiA+IG1heCA/IG1pbiA6IG1heDsgaiA8PSBsZW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGwgPSBnT2JqLmdldENlbGxGcm9tSW5kZXgoaSwgaik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZWN0ZWRDZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXhlcy5wdXNoKGopO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLnB1c2goeyByb3dJbmRleDogaSwgY2VsbEluZGV4ZXM6IGNlbGxJbmRleGVzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsUHJvcHMoc3RJbmRleCwgZWRJbmRleCk7XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQ29tcGxldGUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBzdGFydEluZGV4LCBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsIHNlbGVjdGVkUm93Q2VsbEluZGV4OiB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSb3dDZWxsOiB0aGlzLnByZXZFQ0lkeHMgPyBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSwgZXZlbnRzLmNlbGxTZWxlY3RlZCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0Q2VsbHMgPSBmdW5jdGlvbiAocm93Q2VsbEluZGV4ZXMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChyb3dDZWxsSW5kZXhlc1swXS5yb3dJbmRleCwgcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0pO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSByb3dDZWxsSW5kZXhlc1swXS5yb3dJbmRleDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGEgPSBnT2JqLmdldEN1cnJlbnRWaWV3UmVjb3JkcygpW3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsKCkgfHwgIXRoaXMuaXNDZWxsVHlwZSgpIHx8IHRoaXMuaXNFZGl0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oe1xuICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiByb3dDZWxsSW5kZXhlc1swXS5jZWxsSW5kZXhlc1swXSxcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbDogc2VsZWN0ZWRDZWxsLCBpc0N0cmxQcmVzc2VkOiB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCxcbiAgICAgICAgICAgICAgICBpc1NoaWZ0UHJlc3NlZDogdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0LCBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dDZWxsSW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBjZWxsTGVuID0gcm93Q2VsbEluZGV4ZXNbaV0uY2VsbEluZGV4ZXMubGVuZ3RoOyBqIDwgY2VsbExlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChyb3dDZWxsSW5kZXhlc1tpXS5yb3dJbmRleCwgcm93Q2VsbEluZGV4ZXNbaV0uY2VsbEluZGV4ZXNbal0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkQ2VsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93Q2VsbEluZGV4KHsgcm93SW5kZXg6IHJvd0NlbGxJbmRleGVzW2ldLnJvd0luZGV4LCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzW2ldLmNlbGxJbmRleGVzW2pdIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2VsbFByb3BzKHsgcm93SW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4LCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLmNlbGxJbmRleGVzWzBdIH0sIHsgcm93SW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLnJvd0luZGV4LCBjZWxsSW5kZXg6IHJvd0NlbGxJbmRleGVzWzBdLmNlbGxJbmRleGVzWzBdIH0pO1xuICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogcm93Q2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4ZXNbMF0sXG4gICAgICAgICAgICAgICAgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLCBzZWxlY3RlZFJvd0NlbGxJbmRleDogdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sIGV2ZW50cy5jZWxsU2VsZWN0ZWQpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZENlbGxzVG9TZWxlY3Rpb24gPSBmdW5jdGlvbiAoY2VsbEluZGV4ZXMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NlbGxUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2VsbCA9IGdPYmouZ2V0Q2VsbEZyb21JbmRleChjZWxsSW5kZXhlc1swXS5yb3dJbmRleCwgY2VsbEluZGV4ZXNbMF0uY2VsbEluZGV4KTtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gY2VsbEluZGV4ZXNbMF0ucm93SW5kZXg7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhID0gZ09iai5nZXRDdXJyZW50Vmlld1JlY29yZHMoKVt0aGlzLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbCgpIHx8ICF0aGlzLmlzQ2VsbFR5cGUoKSB8fCB0aGlzLmlzRWRpdGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjZWxsSW5kZXhlc18xID0gY2VsbEluZGV4ZXM7IF9pIDwgY2VsbEluZGV4ZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbEluZGV4ID0gY2VsbEluZGV4ZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2ldLnJvd0luZGV4ID09PSBjZWxsSW5kZXgucm93SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxlY3RlZERhdGEsIGNlbGxJbmRleDogY2VsbEluZGV4ZXNbMF0sXG4gICAgICAgICAgICAgICAgICAgIGlzU2hpZnRQcmVzc2VkOiB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QsIHByZXZpb3VzUm93Q2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsOiBzZWxlY3RlZENlbGwsIGlzQ3RybFByZXNzZWQ6IHRoaXMuaXNNdWx0aUN0cmxSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0NlbGw6IHRoaXMucHJldkVDSWR4cyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmdldENlbGxGcm9tSW5kZXgodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4KSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGlzVW5TZWxlY3RlZCA9IGluZGV4ID4gLTE7XG4gICAgICAgICAgICAgICAgaWYgKGlzVW5TZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDZWxsSWR4ID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzW2luZGV4XS5jZWxsSW5kZXhlcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ2VsbElkeC5pbmRleE9mKGNlbGxJbmRleC5jZWxsSW5kZXgpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2VsbERlc2VsZWN0KGV2ZW50cy5jZWxsRGVzZWxlY3RpbmcsIFt7IHJvd0luZGV4OiBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleGVzOiBbY2VsbEluZGV4LmNlbGxJbmRleF0gfV0sIHNlbGVjdGVkRGF0YSwgW3NlbGVjdGVkQ2VsbF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsSWR4LnNwbGljZShzZWxlY3RlZENlbGxJZHguaW5kZXhPZihjZWxsSW5kZXguY2VsbEluZGV4KSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDZWxsLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGVkLCBbeyByb3dJbmRleDogY2VsbEluZGV4LnJvd0luZGV4LCBjZWxsSW5kZXhlczogW2NlbGxJbmRleC5jZWxsSW5kZXhdIH1dLCBzZWxlY3RlZERhdGEsIFtzZWxlY3RlZENlbGxdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVW5TZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkJlZ2luKGFyZ3MsIGV2ZW50cy5jZWxsU2VsZWN0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93Q2VsbEluZGV4KHsgcm93SW5kZXg6IGNlbGxJbmRleC5yb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXguY2VsbEluZGV4IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsU2VsZWN0aW9uKHNlbGVjdGVkQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZShzZWxlY3RlZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aW9uQmVnaW4oYXJncywgZXZlbnRzLmNlbGxTZWxlY3RpbmcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxTZWxlY3Rpb24oc2VsZWN0ZWRDZWxsLCBjZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleC5jZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNlbGxQcm9wcyhjZWxsSW5kZXgsIGNlbGxJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1VuU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGVjdGVkRGF0YSwgY2VsbEluZGV4OiBjZWxsSW5kZXhlc1swXSwgY3VycmVudENlbGw6IHNlbGVjdGVkQ2VsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUm93Q2VsbDogdGhpcy5wcmV2RUNJZHhzID8gZ09iai5nZXRDZWxsRnJvbUluZGV4KHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgcHJldmlvdXNSb3dDZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cywgc2VsZWN0ZWRSb3dDZWxsSW5kZXg6IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1xuICAgICAgICAgICAgICAgICAgICB9LCBldmVudHMuY2VsbFNlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJDZWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jZWxsRGVzZWxlY3QgPSBmdW5jdGlvbiAodHlwZSwgY2VsbEluZGV4ZXMsIGRhdGEsIGNlbGxzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKHR5cGUsIHtcbiAgICAgICAgICAgICAgICBjZWxsczogY2VsbHMsIGRhdGE6IGRhdGEsIGNlbGxJbmRleGVzOiBjZWxsSW5kZXhlc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlQ2VsbFNlbGVjdGlvbiA9IGZ1bmN0aW9uIChzZWxlY3RlZENlbGwsIHJvd0luZGV4LCBjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChyb3dJbmRleCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFJvd0NlbGxJbmRleCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjZWxsSW5kZXggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxlY3RlZENlbGwuY2xhc3NMaXN0LmFkZCgnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoc2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoY2VsbCkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBjZWxsO1xuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgY2VsbC5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUNlbGxQcm9wcyA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2Q0lkeHMgPSBzdGFydEluZGV4O1xuICAgICAgICAgICAgdGhpcy5wcmV2RUNJZHhzID0gZW5kSW5kZXg7XG4gICAgICAgICAgICB0aGlzLmlzQ2VsbFNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLmxlbmd0aCAmJiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZFJvd0NlbGxJbmRleCA9IGZ1bmN0aW9uIChyb3dDZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBpc1Jvd0F2YWlsO1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbaV0ucm93SW5kZXggPT09IHJvd0NlbGxJbmRleC5yb3dJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBpc1Jvd0F2YWlsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNSb3dBdmFpbCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXNbaW5kZXhdLmNlbGxJbmRleGVzLmluZGV4T2Yocm93Q2VsbEluZGV4LmNlbGxJbmRleCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1tpbmRleF0uY2VsbEluZGV4ZXMucHVzaChyb3dDZWxsSW5kZXguY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMucHVzaCh7IHJvd0luZGV4OiByb3dDZWxsSW5kZXgucm93SW5kZXgsIGNlbGxJbmRleGVzOiBbcm93Q2VsbEluZGV4LmNlbGxJbmRleF0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2xlYXJDZWxsU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZENlbGxzID0gdGhpcy5nZXRTZWxlY3RlZENlbGxzRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgIHZhciByb3dDZWxsID0gdGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWaWV3RGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd0NlbGwubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKGN1cnJlbnRWaWV3RGF0YVtyb3dDZWxsW2ldLnJvd0luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBjTGVuID0gcm93Q2VsbC5sZW5ndGg7IGogPCBjTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5wYXJlbnQuZ2V0Q2VsbEZyb21JbmRleChyb3dDZWxsW2ldLnJvd0luZGV4LCByb3dDZWxsW2ldLmNlbGxJbmRleGVzW2pdKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGluZywgcm93Q2VsbCwgZGF0YSwgY2VsbHMpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzZWxlY3RlZENlbGxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbHNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZS1jZWxsc2VsZWN0aW9uYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGxzW2ldLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2VsbFNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGVzZWxlY3QoZXZlbnRzLmNlbGxEZXNlbGVjdGVkLCByb3dDZWxsLCBkYXRhLCBjZWxscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRDZWxsc0VsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMucGFyZW50LmdldERhdGFSb3dzKCk7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2VsbHMgPSBjZWxscy5jb25jYXQoW10uc2xpY2UuY2FsbChyb3dzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNlbGxzZWxlY3Rpb25iYWNrZ3JvdW5kJykpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjZWxscztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5tb3VzZU1vdmVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBnQlJlY3QgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIHgxID0gdGhpcy54O1xuICAgICAgICAgICAgdmFyIHkxID0gdGhpcy55O1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdXRpbF8xLmdldFBvc2l0aW9uKGUpO1xuICAgICAgICAgICAgdmFyIHgyID0gcG9zaXRpb24ueCAtIGdCUmVjdC5sZWZ0O1xuICAgICAgICAgICAgdmFyIHkyID0gcG9zaXRpb24ueSAtIGdCUmVjdC50b3A7XG4gICAgICAgICAgICB2YXIgdG1wO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJ3RyJyk7XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHRoaXMucGFyZW50LmVsZW1lbnQub2Zmc2V0TGVmdCArIDIsIGUuY2xpZW50WSksICd0cicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHgxID4geDIpIHtcbiAgICAgICAgICAgICAgICB0bXAgPSB4MjtcbiAgICAgICAgICAgICAgICB4MiA9IHgxO1xuICAgICAgICAgICAgICAgIHgxID0gdG1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHkxID4geTIpIHtcbiAgICAgICAgICAgICAgICB0bXAgPSB5MjtcbiAgICAgICAgICAgICAgICB5MiA9IHkxO1xuICAgICAgICAgICAgICAgIHkxID0gdG1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSB4MSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0geTEgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0geDIgLSB4MSArICdweCc7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0geTIgLSB5MSArICdweCc7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmICFlLmN0cmxLZXkgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSBwYXJzZUludCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3NCeVJhbmdlKHRoaXMuc3RhcnRJbmRleCwgcm93SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm1vdXNlVXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZS1kaXNhYmxldXNlcnNlbGVjdCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LmJvZHksICdtb3VzZXVwJywgdGhpcy5tb3VzZVVwSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm1vdXNlRG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGdyaWRFbGVtZW50ID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWQnKTtcbiAgICAgICAgICAgIGlmIChncmlkRWxlbWVudCAmJiBncmlkRWxlbWVudC5pZCAhPT0gdGhpcy5wYXJlbnQuZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5IHx8IGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jvd0RyYWdBbmREcm9wICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utcm93Y2VsbCcpICYmICFlLnNoaWZ0S2V5ICYmICFlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNSb3dUeXBlKCkgfHwgdGhpcy5pc1NpbmdsZVNlbCgpIHx8IGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICd0ZCcpLmNsYXNzTGlzdC5jb250YWlucygnZS1zZWxlY3Rpb25iYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2UtZGlzYWJsZXVzZXJzZWxlY3QnKTtcbiAgICAgICAgICAgICAgICB2YXIgdHIgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZS50YXJnZXQsICd0cicpO1xuICAgICAgICAgICAgICAgIHZhciBnQlJlY3QgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIHZhciBwb3N0aW9uID0gdXRpbF8xLmdldFBvc2l0aW9uKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRJbmRleCA9IHBhcnNlSW50KHRyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy54ID0gcG9zdGlvbi54IC0gZ0JSZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgdGhpcy55ID0gcG9zdGlvbi55IC0gZ0JSZWN0LnRvcDtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkZHJhZ2FyZWEnIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhcmVudC5nZXRDb250ZW50KCksICdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudC5ib2R5LCAnbW91c2V1cCcsIHRoaXMubW91c2VVcEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyU2VsQWZ0ZXJSZWZyZXNoID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnJlcXVlc3RUeXBlICE9PSAndmlydHVhbHNjcm9sbCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmluaXRpYWxpemVTZWxlY3Rpb24sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJvd1NlbGVjdGlvbkNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNlbGxTZWxlY3Rpb25Db21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuZGF0YVJlYWR5LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuY2xlYXJTZWxBZnRlclJlZnJlc2gsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgdGhpcy5jbGVhclNlbGVjdGlvbiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbGl6ZVNlbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnJvd1NlbGVjdGlvbkNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jZWxsU2VsZWN0aW9uQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRhdGFSZWFkeSwgdGhpcy5kYXRhUmVhZHkpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kYXRhUmVhZHksIHRoaXMuY2xlYXJTZWxBZnRlclJlZnJlc2gpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHRoaXMuY2xlYXJTZWxlY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmRhdGFSZWFkeSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5yZXF1ZXN0VHlwZSAhPT0gJ3ZpcnR1YWxzY3JvbGwnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICA7XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoZS5wcm9wZXJ0aWVzLnR5cGUpICYmIHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9PT0gJ3NpbmdsZScpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd0NlbGxJbmRleGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckNlbGxTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dJbmRleGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclJvd1NlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVQb3BVcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUucHJvcGVydGllcy5tb2RlKSB8fFxuICAgICAgICAgICAgICAgICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGUucHJvcGVydGllcy5jZWxsU2VsZWN0aW9uTW9kZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaGlkZVBvcFVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykucXVlcnlTZWxlY3RvckFsbCgnLmUtcm93c2VsZWN0JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmluaXRpYWxFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCA9IGUuY3RybEtleSB8fCB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2g7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBlLnNoaWZ0S2V5O1xuICAgICAgICAgICAgdGhpcy5wb3BVcENsaWNrSGFuZGxlcihlKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgIHRoaXMucm93Q2VsbFNlbGVjdGlvbkhhbmRsZXIocGFyc2VJbnQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKSwgcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCkpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UgJiYgdGhpcy5wYXJlbnQuc2VsZWN0aW9uU2V0dGluZ3MudHlwZSA9PT0gJ211bHRpcGxlJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQb3B1cChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlDdHJsUmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucG9wVXBDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICcuZS1oZWFkZXJjZWxsJykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSB8fFxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICcuZS1ncmlkcG9wdXAnKSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd3NlbGVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1zcGFuY2xpY2tlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZS1zcGFuY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVTZWxlY3RNdWx0aVRvdWNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdlLXNwYW5jbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdE11bHRpVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zaG93UG9wdXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdXRpbF8xLnNldENzc0luR3JpZFBvcFVwKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJyksIGUsICdlLXJvd3NlbGVjdCBlLWljb25zIGUtaWNvbi1yb3dzZWxlY3QnICtcbiAgICAgICAgICAgICAgICAodGhpcy5zZWxlY3Rpb25TZXR0aW5ncy50eXBlID09PSAnbXVsdGlwbGUnICYmXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPiAxIHx8IHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlcy5sZW5ndGggPiAxKSA/ICcgZS1zcGFuY2xpY2tlZCcgOiAnJykpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJvd0NlbGxTZWxlY3Rpb25IYW5kbGVyID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjZWxsSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc011bHRpQ3RybFJlcXVlc3QgJiYgIXRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0RyYWdnZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3cocm93SW5kZXgsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZShlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldlJvd0luZGV4KSA/IHJvd0luZGV4IDogdGhpcy5wcmV2Um93SW5kZXgsIHJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGxzQnlSYW5nZShlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkNJZHhzKSA/IHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9IDogdGhpcy5wcmV2Q0lkeHMsIHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93c1RvU2VsZWN0aW9uKFtyb3dJbmRleF0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2VsbHNUb1NlbGVjdGlvbihbeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNEcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjaGVja1Njcm9sbDtcbiAgICAgICAgICAgIHZhciBwcmV2ZW50RGVmYXVsdDtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdkb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICBjaGVja1Njcm9sbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG93bkFycm93S2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VwQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICBjaGVja1Njcm9sbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBBcnJvd0tleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0QXJyb3dLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnRBcnJvd0tleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdob21lJzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbWVLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZEtleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsSG9tZSc6XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHJsSG9tZUtleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsRW5kJzpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0cmxFbmRLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnREb3duJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdERvd25LZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hpZnRVcCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRVcEtleSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzaGlmdFJpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdFJpZ2h0S2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0TGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRMZWZ0S2V5KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VzY2FwZSc6XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsUGx1c0EnOlxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3RybFBsdXNBKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoZWNrU2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbEVsZW0gPSB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCB8fCB0aGlzLnNlbGVjdGVkUm93Q2VsbEluZGV4ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSB0aGlzLnNlbGVjdGVkUmVjb3Jkcy5sZW5ndGggPyB0aGlzLnNlbGVjdGVkUmVjb3Jkc1swXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRSb3dCeUluZGV4KHRoaXMuc2VsZWN0ZWRSb3dDZWxsSW5kZXhlc1swXS5yb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSByb3cub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSByb3cucm93SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEVsZW0uc2Nyb2xsVG9wID0gc2Nyb2xsRWxlbS5zY3JvbGxUb3AgKyAoZS5hY3Rpb24gPT09ICdkb3duQXJyb3cnID8gaGVpZ2h0IDogaGVpZ2h0ICogLTEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja1Zpc2libGUocm93KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kZXggIT09IDAgJiYgdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbi5sZW5ndGggIT09IHJvd0luZGV4ICsgMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNoZWNrVmlzaWJsZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgc3QgPSB3aW5kb3cuc2Nyb2xsWTtcbiAgICAgICAgICAgIHZhciB5ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyBzdDtcbiAgICAgICAgICAgIHJldHVybiB5ICsgMzYgPCAod2luZG93LmlubmVySGVpZ2h0ICsgc3QpIC0gdGhpcy5nZXRSb3dIZWlnaHQoZWxlbWVudCkgJiYgeSA+IChzdCAtIGVsZW1lbnQub2Zmc2V0SGVpZ2h0KSArXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRSb3dIZWlnaHQoZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0Um93SGVpZ2h0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jdHJsUGx1c0EgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSgwLCB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHsgcm93SW5kZXg6IDAsIGNlbGxJbmRleDogMCB9LCB7IHJvd0luZGV4OiB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoIC0gMSwgY2VsbEluZGV4OiB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5kb3duQXJyb3dLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5RG93blVwS2V5KDEsICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXgpICYmIHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXggKyAxIDwgdGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCwgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2RUNJZHhzKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCArIDEgPCB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS51cEFycm93S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseURvd25VcEtleSgtMSwgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCkgJiYgdGhpcy5wYXJlbnQuc2VsZWN0ZWRSb3dJbmRleCAtIDEgPiAtMSwgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2RUNJZHhzKSAmJiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggLSAxID4gLTEpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5RG93blVwS2V5ID0gZnVuY3Rpb24gKGtleSwgY29uZDEsIGNvbmQyKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkgJiYgY29uZDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyhnT2JqLnNlbGVjdGVkUm93SW5kZXggKyBrZXksIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlVcERvd24oZ09iai5zZWxlY3RlZFJvd0luZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSAmJiBjb25kMikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyBrZXksIGNlbGxJbmRleDogdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseVVwRG93biA9IGZ1bmN0aW9uIChyb3dJbmRleCkge1xuICAgICAgICAgICAgdmFyIGNJbmRleCA9IHBhcnNlSW50KHRoaXMudGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMuY29udGVudFJlbmRlcmVyLmdldFJvd0J5SW5kZXgocm93SW5kZXgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGwnKVtjSW5kZXhdO1xuICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy50YXJnZXQpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJpZ2h0QXJyb3dLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByZVNlbGVjdGVkQ2VsbEluZGV4ID0gdGhpcy5wcmV2RUNJZHhzO1xuICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleSgxLCAwLCAhZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZFQ0lkeHMpICYmIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggKyAxIDwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUubGVmdEFycm93S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wcmVTZWxlY3RlZENlbGxJbmRleCA9IHRoaXMucHJldkVDSWR4cztcbiAgICAgICAgICAgIHRoaXMuYXBwbHlSaWdodExlZnRLZXkoLTEsIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggLSAxLCAhZWoyX2Jhc2VfMi5pc1VuZGVmaW5lZCh0aGlzLnByZXZFQ0lkeHMpICYmIHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggLSAxID4gLTEpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5UmlnaHRMZWZ0S2V5ID0gZnVuY3Rpb24gKGtleTEsIGtleTIsIGNvbmQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY2VsbEluZGV4O1xuICAgICAgICAgICAgdmFyIHJvd0luZGV4O1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJldkVDSWR4cykpIHtcbiAgICAgICAgICAgICAgICBjZWxsSW5kZXggPSB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4O1xuICAgICAgICAgICAgICAgIHJvd0luZGV4ID0gdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmQgJiYgdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCArIGtleTEgPiAtMSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4ICsga2V5MSA8IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ID0gdGhpcy5wcmV2RUNJZHhzLmNlbGxJbmRleCArIGtleTE7XG4gICAgICAgICAgICAgICAgICAgIHJvd0luZGV4ID0gdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyBrZXkxID4gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsga2V5MSA8IHRoaXMucGFyZW50LmdldFJvd3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ID0ga2V5MjtcbiAgICAgICAgICAgICAgICAgICAgcm93SW5kZXggPSB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyBrZXkxO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENlbGwoeyByb3dJbmRleDogcm93SW5kZXgsIGNlbGxJbmRleDogY2VsbEluZGV4IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxIaWRlKHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNlbGxJbmRleCB9KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISgoY2VsbEluZGV4ID09PSAwICYmIHJvd0luZGV4ID09PSAwKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKGNlbGxJbmRleCA9PT0gZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSAmJiByb3dJbmRleCA9PT0gZ09iai5nZXRSb3dzKCkubGVuZ3RoIC0gMSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5UmlnaHRMZWZ0S2V5KGtleTEsIGtleTIsIGNvbmQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsKHRoaXMucHJlU2VsZWN0ZWRDZWxsSW5kZXgsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc1Jvd1R5cGUoKSkge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsSW5kZXhfMSA9IHBhcnNlSW50KHRoaXMudGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb2xpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0VsZW1lbnQgPSBlajJfYmFzZV8zLmNsb3Nlc3QodGhpcy50YXJnZXQsICd0cicpO1xuICAgICAgICAgICAgICAgIGlmIChjZWxsSW5kZXhfMSArIGtleTEgPiAtMSAmJiBjZWxsSW5kZXhfMSArIGtleTEgPCB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJylbY2VsbEluZGV4XzEgKyBrZXkxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGlkZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUoY2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkxICs9IGtleTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleShrZXkxLCBrZXkyLCBjb25kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5ob21lS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseUhvbWVFbmRLZXkoeyByb3dJbmRleDogdGhpcy5jdXJyZW50SW5kZXggfHwgMCwgY2VsbEluZGV4OiAwIH0pO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmVuZEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlIb21lRW5kS2V5KHsgcm93SW5kZXg6IHRoaXMuY3VycmVudEluZGV4IHx8IDAsIGNlbGxJbmRleDogdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDEgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlIb21lRW5kS2V5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsKGtleSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsSGlkZShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuY2VsbEluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleSgtMSwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAtIDEsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVJpZ2h0TGVmdEtleSgxLCAwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKHRoaXMucGFyZW50LmdldENlbGxGcm9tSW5kZXgoa2V5LnJvd0luZGV4LCBrZXkuY2VsbEluZGV4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2hpZnREb3duS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jvd1R5cGUoKSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldlJvd0luZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBlajJfYmFzZV8yLmlzVW5kZWZpbmVkKGdPYmouc2VsZWN0ZWRSb3dJbmRleCkgPyB0aGlzLnByZXZSb3dJbmRleCArIDEgOlxuICAgICAgICAgICAgICAgICAgICAgICAgKGdPYmouc2VsZWN0ZWRSb3dJbmRleCArIDEgPCB0aGlzLnBhcmVudC5nZXRSb3dzKCkubGVuZ3RoID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLnNlbGVjdGVkUm93SW5kZXggKyAxIDogZ09iai5zZWxlY3RlZFJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZEluZGV4IDwgdGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSh0aGlzLnByZXZSb3dJbmRleCwgZW5kSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVVwRG93bihlbmRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KDAsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSAmJiAhdGhpcy5pc1NpbmdsZVNlbCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkNJZHhzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsgMSA8IHRoaXMucGFyZW50LmdldFJvd3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHRoaXMucHJldkNJZHhzLCB7IHJvd0luZGV4OiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyAxLCBjZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHsgcm93SW5kZXg6IDAsIGNlbGxJbmRleDogMCB9LCB7IHJvd0luZGV4OiAxLCBjZWxsSW5kZXg6IDAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc011bHRpU2hpZnRSZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2hpZnRVcEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkgJiYgIWVqMl9iYXNlXzIuaXNVbmRlZmluZWQodGhpcy5wcmV2Um93SW5kZXgpICYmICF0aGlzLmlzU2luZ2xlU2VsKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBlajJfYmFzZV8yLmlzVW5kZWZpbmVkKGdPYmouc2VsZWN0ZWRSb3dJbmRleCkgPyAodGhpcy5wcmV2Um93SW5kZXggLSAxID4gLTEgPyAodGhpcy5wcmV2Um93SW5kZXggLSAxKSA6IDApIDpcbiAgICAgICAgICAgICAgICAgICAgKChnT2JqLnNlbGVjdGVkUm93SW5kZXggLSAxKSA+IC0xID8gZ09iai5zZWxlY3RlZFJvd0luZGV4IC0gMSA6IGdPYmouc2VsZWN0ZWRSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3dzQnlSYW5nZSh0aGlzLnByZXZSb3dJbmRleCwgZW5kSW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlVcERvd24oZW5kSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDZWxsVHlwZSgpICYmICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkVDSWR4cykgJiYgKHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCAtIDEpID4gLTEgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHRoaXMucHJldkNJZHhzLCB7IHJvd0luZGV4OiB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggLSAxLCBjZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzTXVsdGlTaGlmdFJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zaGlmdExlZnRLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5U2hpZnRMZWZ0UmlnaHRLZXkoLTEsICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkNJZHhzKSAmJiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4IC0gMSA+IC0xKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zaGlmdFJpZ2h0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseVNoaWZ0TGVmdFJpZ2h0S2V5KDEsICFlajJfYmFzZV8yLmlzVW5kZWZpbmVkKHRoaXMucHJldkNJZHhzKSAmJiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4ICsgMSA8IHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGgpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5U2hpZnRMZWZ0UmlnaHRLZXkgPSBmdW5jdGlvbiAoa2V5LCBjb25kKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNlbGxJbmRleDtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxUeXBlKCkgJiYgIXRoaXMuaXNTaW5nbGVTZWwoKSkge1xuICAgICAgICAgICAgICAgIGlmIChjb25kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleCA9IHsgcm93SW5kZXg6IHRoaXMucHJldkVDSWR4cy5yb3dJbmRleCwgY2VsbEluZGV4OiB0aGlzLnByZXZFQ0lkeHMuY2VsbEluZGV4ICsga2V5IH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbHNCeVJhbmdlKHRoaXMucHJldkNJZHhzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRleDogdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4LCBjZWxsSW5kZXg6IHRoaXMucHJldkVDSWR4cy5jZWxsSW5kZXggKyBrZXlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLmlzU2luZ2xlU2VsKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MuY2VsbFNlbGVjdGlvbk1vZGUgPT09ICdmbG93JyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKGtleSA+IDAgPyB0aGlzLnByZXZFQ0lkeHMucm93SW5kZXggKyAxIDwgdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnBhZ2VTaXplIDogdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4IC0gMSA+IC0xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ID0geyByb3dJbmRleDogdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsga2V5LCBjZWxsSW5kZXg6IGtleSA+IDAgPyAwIDogZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsc0J5UmFuZ2UodGhpcy5wcmV2Q0lkeHMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRleDogdGhpcy5wcmV2RUNJZHhzLnJvd0luZGV4ICsga2V5LCBjZWxsSW5kZXg6IGtleSA+IDAgPyAwIDogZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoIC0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNlbGxJbmRleCkgJiYgdGhpcy5pc0NlbGxIaWRlKGNlbGxJbmRleCkgJiYgISgoY2VsbEluZGV4LnJvd0luZGV4ID09PSAwICYmIGNlbGxJbmRleC5jZWxsSW5kZXggPT09IDApIHx8XG4gICAgICAgICAgICAgICAgICAgIChjZWxsSW5kZXgucm93SW5kZXggPT09IGdPYmouZ2V0Um93cygpLmxlbmd0aCAtIDEgJiYgY2VsbEluZGV4LmNlbGxJbmRleCA9PT0gZ09iai5nZXRDb2x1bW5zKCkubGVuZ3RoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVNoaWZ0TGVmdFJpZ2h0S2V5KGtleSwgY2VsbEluZGV4LmNlbGxJbmRleCA+IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNoaWZ0UmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmN0cmxIb21lS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hcHBseUN0cmxIb21lRW5kS2V5KDAsIDApO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmN0cmxFbmRLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5Q3RybEhvbWVFbmRLZXkodGhpcy5wYXJlbnQuZ2V0Um93cygpLmxlbmd0aCAtIDEsIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggLSAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hcHBseUN0cmxIb21lRW5kS2V5ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjb2xJbmRleCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dUeXBlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyhyb3dJbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUodGhpcy5wYXJlbnQuZ2V0Q2VsbEZyb21JbmRleChyb3dJbmRleCwgY29sSW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2VsbFR5cGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2VsbCh7IHJvd0luZGV4OiByb3dJbmRleCwgY2VsbEluZGV4OiBjb2xJbmRleCB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NlbGxIaWRlKHsgcm93SW5kZXg6IHJvd0luZGV4LCBjZWxsSW5kZXg6IGNvbEluZGV4IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlSaWdodExlZnRLZXkoLTEsIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggLSAxLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlSaWdodExlZnRLZXkoMSwgMCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYWRkUmVtb3ZlQ2xhc3Nlc0ZvclJvdyA9IGZ1bmN0aW9uIChyb3csIGlzQWRkLCBjbGVhckFsbCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDNdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBbXS5zbGljZS5jYWxsKHJvdy5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yb3djZWxsJykpO1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2NvbGxhcHNlJykgfHwgcm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgIGlmIChjZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2goY2VsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjZWxscy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGNlbGxzW2ldLCBhcmdzLnNsaWNlKCksIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzW2ldLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChjZWxsc1tpXSwgW10sIGFyZ3Muc2xpY2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2V0UmVuZGVyZXIoKS5zZXRTZWxlY3Rpb24ocm93ID8gcm93LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSA6IG51bGwsIGlzQWRkLCBjbGVhckFsbCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNSb3dUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uU2V0dGluZ3MubW9kZSA9PT0gJ3JvdycgfHwgdGhpcy5zZWxlY3Rpb25TZXR0aW5ncy5tb2RlID09PSAnYm90aCc7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuaXNDZWxsVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLm1vZGUgPT09ICdjZWxsJyB8fCB0aGlzLnNlbGVjdGlvblNldHRpbmdzLm1vZGUgPT09ICdib3RoJztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pc1NpbmdsZVNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblNldHRpbmdzLnR5cGUgPT09ICdzaW5nbGUnO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmlzQ2VsbEhpZGUgPSBmdW5jdGlvbiAoY2VsbEluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMucGFyZW50LmdldENvbHVtbnMoKVtjZWxsSW5kZXguY2VsbEluZGV4XS52aXNpYmxlO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldFJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb250ZW50UmVuZGVyZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVuZGVyZXIgPSB0aGlzLmZhY3RvcnkuZ2V0UmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuQ29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50UmVuZGVyZXI7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTZWxlY3Rpb247XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNlbGVjdGlvbiA9IFNlbGVjdGlvbjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3NlbGVjdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZXZlbnRzLCB1dGlsXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNlYXJjaCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNlYXJjaChwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAoc2VhcmNoU3RyaW5nKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnNlYXJjaCwgYXJnMTogc2VhcmNoU3RyaW5nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKHNlYXJjaFN0cmluZyAhPT0gZ09iai5zZWFyY2hTZXR0aW5ncy5rZXkpIHtcbiAgICAgICAgICAgICAgICBnT2JqLnNlYXJjaFNldHRpbmdzLmtleSA9IHNlYXJjaFN0cmluZztcbiAgICAgICAgICAgICAgICBnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5zZWFyY2hDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBTZWFyY2gucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5zZWFyY2hDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlLnByb3BlcnRpZXMua2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc2VhcmNoaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBzZWFyY2hTdHJpbmc6IHRoaXMucGFyZW50LnNlYXJjaFNldHRpbmdzLmtleVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdzZWFyY2hpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VhcmNoLnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCB7XG4gICAgICAgICAgICAgICAgc2VhcmNoU3RyaW5nOiB0aGlzLnBhcmVudC5zZWFyY2hTZXR0aW5ncy5rZXksIHJlcXVlc3RUeXBlOiAnc2VhcmNoaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlYXJjaC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnc2VhcmNoJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNlYXJjaDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2VhcmNoID0gU2VhcmNoO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc2VhcmNoLmpzXG4vLyBtb2R1bGUgaWQgPSAzOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCB1dGlsXzEsIGV2ZW50cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2hvd0hpZGUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTaG93SGlkZShwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIFNob3dIaWRlLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUsIHNob3dCeSkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSB0aGlzLmdldFRvZ2dsZUZpZWxkcyhjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zKGtleXMsIHNob3dCeSk7XG4gICAgICAgICAgICBjb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZShjb2x1bW5zKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoY29sdW1uTmFtZSwgaGlkZUJ5KSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IHRoaXMuZ2V0VG9nZ2xlRmllbGRzKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmdldENvbHVtbnMoa2V5cywgaGlkZUJ5KTtcbiAgICAgICAgICAgIGNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZShjb2x1bW5zKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLmdldFRvZ2dsZUZpZWxkcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHZhciBmaW5hbGl6ZWQgPSBbXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGZpbmFsaXplZCA9IFtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZmluYWxpemVkID0ga2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplZDtcbiAgICAgICAgfTtcbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLmdldENvbHVtbnMgPSBmdW5jdGlvbiAoa2V5cywgZ2V0S2V5QnkpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHV0aWxfMS5pdGVyYXRlQXJyYXlPck9iamVjdChrZXlzLCBmdW5jdGlvbiAoa2V5LCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaXRlcmF0ZUFycmF5T3JPYmplY3QoX3RoaXMucGFyZW50LmdldENvbHVtbnMoKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtW2dldEtleUJ5XSA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY29sdW1ucztcbiAgICAgICAgfTtcbiAgICAgICAgU2hvd0hpZGUucHJvdG90eXBlLnNldFZpc2libGUgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICAgICAgY29sdW1ucyA9IGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1ucykgPyB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkgOiBjb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCwgY29sdW1ucyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTaG93SGlkZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU2hvd0hpZGUgPSBTaG93SGlkZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3Nob3ctaGlkZS5qc1xuLy8gbW9kdWxlIGlkID0gMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGNvbnN0YW50XzEsIHdpZHRoX2NvbnRyb2xsZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2Nyb2xsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gU2Nyb2xsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0U2Nyb2xsVG9wID0gMDtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZXMgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuICAgICAgICAgICAgdGhpcy5vbmVUaW1lUmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZSA9IG5ldyB3aWR0aF9jb250cm9sbGVyXzEuQ29sdW1uV2lkdGhTZXJ2aWNlKHBhcmVudCk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Njcm9sbCc7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuc2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LnN0eWxlLndpZHRoID0gZWoyX2Jhc2VfMy5mb3JtYXRVbml0KHRoaXMucGFyZW50LndpZHRoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC50b29sYmFyTW9kdWxlICYmIHRoaXMucGFyZW50LnRvb2xiYXJNb2R1bGUudG9vbGJhci5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudG9vbGJhck1vZHVsZS50b29sYmFyLnJlZnJlc2hPdmVyZmxvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLnNldEhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBjb250ZW50LnN0eWxlLmhlaWdodCA9IGVqMl9iYXNlXzMuZm9ybWF0VW5pdCh0aGlzLnBhcmVudC5oZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5lbnN1cmVPdmVyZmxvdyhjb250ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5zZXRQYWRkaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCk7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsV2lkdGggPSBTY3JvbGwuZ2V0U2Nyb2xsQmFyV2lkdGgoKSAtIHRoaXMuZ2V0VGhyZXNob2xkKCk7XG4gICAgICAgICAgICB2YXIgY3NzUHJvcHMgPSB0aGlzLmdldENzc1Byb3BlcnRpZXMoKTtcbiAgICAgICAgICAgIGNvbnRlbnQuZmlyc3RDaGlsZC5zdHlsZVtjc3NQcm9wcy5ib3JkZXJdID0gc2Nyb2xsV2lkdGggPiAwID8gJzFweCcgOiAnMHB4JztcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGVbY3NzUHJvcHMucGFkZGluZ10gPSBzY3JvbGxXaWR0aCA+IDAgPyBzY3JvbGxXaWR0aCArICdweCcgOiAnMHB4JztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5yZW1vdmVQYWRkaW5nID0gZnVuY3Rpb24gKHJ0bCkge1xuICAgICAgICAgICAgdmFyIGNzc1Byb3BzID0gdGhpcy5nZXRDc3NQcm9wZXJ0aWVzKHJ0bCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZC5zdHlsZVtjc3NQcm9wcy5ib3JkZXJdID0gJyc7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZC5wYXJlbnRFbGVtZW50LnN0eWxlW2Nzc1Byb3BzLnBhZGRpbmddID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5oZWlnaHQgIT09ICcxMDAlJykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy53aWR0aFNlcnZpY2UuZ2V0U2libGluZ3NIZWlnaHQoY29udGVudCk7XG4gICAgICAgICAgICBjb250ZW50LnN0eWxlLmhlaWdodCA9ICdjYWxjKDEwMCUgLSAnICsgaGVpZ2h0ICsgJ3B4KSc7XG4gICAgICAgIH07XG4gICAgICAgIFNjcm9sbC5wcm90b3R5cGUuZ2V0VGhyZXNob2xkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFwcE5hbWUgPSBlajJfYmFzZV8xLkJyb3dzZXIuaW5mby5uYW1lO1xuICAgICAgICAgICAgaWYgKGFwcE5hbWUgPT09ICdtb3ppbGxhJykge1xuICAgICAgICAgICAgICAgIHJldHVybiAwLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jb250ZW50UmVhZHksIHRoaXMud2lyZUV2ZW50cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLnVpVXBkYXRlLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuY29udGVudFJlYWR5LCB0aGlzLndpcmVFdmVudHMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLm9uQ29udGVudFNjcm9sbCA9IGZ1bmN0aW9uIChzY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNjcm9sbFRhcmdldDtcbiAgICAgICAgICAgIHZhciBpc0hlYWRlciA9IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNvbnRlbnQnKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JykgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIGxlZnQgPSB0YXJnZXQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICB2YXIgc0xpbWl0ID0gdGFyZ2V0LnNjcm9sbFdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBpc0Zvb3RlciA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3VtbWFyeWNvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJldmlvdXNWYWx1ZXMubGVmdCA9PT0gbGVmdCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcmV2aW91c1ZhbHVlcy50b3AgPSAhaXNIZWFkZXIgPyBfdGhpcy5wcmV2aW91c1ZhbHVlcy50b3AgOiB0YXJnZXQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IGxlZnQ7XG4gICAgICAgICAgICAgICAgaWYgKGlzRm9vdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmhlYWRlci5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMucHJldmlvdXNWYWx1ZXMubGVmdCA9IGxlZnQ7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm5vdGlmeShjb25zdGFudF8xLnNjcm9sbCwgeyBsZWZ0OiBsZWZ0IH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub25lVGltZVJlYWR5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXIgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5jb250ZW50LCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRlbnRTY3JvbGwodGhpcy5oZWFkZXIpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5oZWFkZXIsICdzY3JvbGwnLCB0aGlzLm9uQ29udGVudFNjcm9sbCh0aGlzLmNvbnRlbnQpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWdncmVnYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldEZvb3RlckNvbnRlbnQoKS5maXJzdENoaWxkLCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRlbnRTY3JvbGwodGhpcy5jb250ZW50KSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub25lVGltZVJlYWR5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGFibGUgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIGlmICh0YWJsZS5zY3JvbGxIZWlnaHQgPCB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5hZGRDbGFzcyh0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0cjpsYXN0LWNoaWxkIHRkJyksICdlLWxhc3Ryb3djZWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmVuYWJsZVZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnNjcm9sbExlZnQgPSB0aGlzLnByZXZpb3VzVmFsdWVzLmxlZnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnNjcm9sbFRvcCA9IHRoaXMucHJldmlvdXNWYWx1ZXMudG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zY3JvbGxMZWZ0ID0gdGhpcy5wcmV2aW91c1ZhbHVlcy5sZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmdldENzc1Byb3BlcnRpZXMgPSBmdW5jdGlvbiAocnRsKSB7XG4gICAgICAgICAgICB2YXIgY3NzID0ge307XG4gICAgICAgICAgICB2YXIgZW5hYmxlUnRsID0gZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChydGwpID8gdGhpcy5wYXJlbnQuZW5hYmxlUnRsIDogcnRsO1xuICAgICAgICAgICAgY3NzLmJvcmRlciA9IGVuYWJsZVJ0bCA/ICdib3JkZXJMZWZ0V2lkdGgnIDogJ2JvcmRlclJpZ2h0V2lkdGgnO1xuICAgICAgICAgICAgY3NzLnBhZGRpbmcgPSBlbmFibGVSdGwgPyAncGFkZGluZ0xlZnQnIDogJ3BhZGRpbmdSaWdodCc7XG4gICAgICAgICAgICByZXR1cm4gY3NzO1xuICAgICAgICB9O1xuICAgICAgICBTY3JvbGwucHJvdG90eXBlLmVuc3VyZU92ZXJmbG93ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUub3ZlcmZsb3dZID0gdGhpcy5wYXJlbnQuaGVpZ2h0ID09PSAnYXV0bycgPyAnYXV0bycgOiAnc2Nyb2xsJztcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRQYWRkaW5nKCk7XG4gICAgICAgICAgICB0aGlzLm9uZVRpbWVSZWFkeSA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaGVpZ2h0ID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBhZGRpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5zZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVBhZGRpbmcoKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoW3RoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKS5maXJzdENoaWxkXSwgJ2UtaGVhZGVyY29udGVudCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhbdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGRdLCAnZS1jb250ZW50Jyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZCwgJ3Njcm9sbCcsIHRoaXMub25Db250ZW50U2Nyb2xsKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2Nyb2xsLmdldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5nZXRTY3JvbGxCYXJXaWR0aCgpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU2Nyb2xsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TY3JvbGwgPSBTY3JvbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9zY3JvbGwuanNcbi8vIG1vZHVsZSBpZCA9IDQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFByaW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUHJpbnQocGFyZW50LCBzY3JvbGxNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5jb250ZW50UmVhZHkuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbE1vZHVsZSA9IHNjcm9sbE1vZHVsZTtcbiAgICAgICAgfVxuICAgICAgICBQcmludC5wcm90b3R5cGUucHJpbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5pc1ByaW50aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGdPYmouZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnByaW50V2luZG93ID0gd2luZG93Lm9wZW4oJycsICdwcmludCcsICdoZWlnaHQ9JyArIHdpbmRvdy5vdXRlckhlaWdodCArICcsd2lkdGg9JyArIHdpbmRvdy5vdXRlcldpZHRoICsgJyx0YWJiYXI9bm8nKTtcbiAgICAgICAgICAgIHRoaXMucHJpbnRXaW5kb3cubW92ZVRvKDAsIDApO1xuICAgICAgICAgICAgdGhpcy5wcmludFdpbmRvdy5yZXNpemVUbyhzY3JlZW4uYXZhaWxXaWR0aCwgc2NyZWVuLmF2YWlsSGVpZ2h0KTtcbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmoucHJpbnRNb2RlID09PSAnY3VycmVudHBhZ2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcGFnZXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWFkeSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1BhZ2VyRGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmFsbG93UGFnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWFkeSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQcmludC5wcm90b3R5cGUuY29udGVudFJlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1ByaW50aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQYWdlckRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZ09iai5lbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUGFnZXJEaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGdPYmouYWxsb3dQYWdpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouaGVpZ2h0ICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3NzUHJvcHMgPSB0aGlzLnNjcm9sbE1vZHVsZS5nZXRDc3NQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnREaXYgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY29udGVudCcpO1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJEaXYgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGhlYWRlcicpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuc3R5bGUub3ZlcmZsb3dZID0gJ2F1dG8nO1xuICAgICAgICAgICAgICAgIGhlYWRlckRpdi5zdHlsZVtjc3NQcm9wcy5wYWRkaW5nXSA9ICcnO1xuICAgICAgICAgICAgICAgIGhlYWRlckRpdi5maXJzdEVsZW1lbnRDaGlsZC5zdHlsZVtjc3NQcm9wcy5ib3JkZXJdID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyb3VwZHJvcGFyZWEnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDb2xHcm91cChnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnQsICcuZS1ncm91cHRvcGxlZnRjZWxsJyk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudCwgJy5lLXJlY29yZHBsdXNjb2xsYXBzZScpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnQsICcuZS1pbmRlbnRjZWxsJyk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudCwgJy5lLXJlY29yZHBsdXNleHBhbmQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ09iai50b29sYmFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLXRvb2xiYXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dGaWx0ZXJpbmcgJiYgZ09iai5maWx0ZXJTZXR0aW5ncy50eXBlID09PSAnZmlsdGVyYmFyJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1maWx0ZXJiYXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1hY3RpdmUnKSwgJ2UtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtY2VsbHNlbGVjdGlvbjFiYWNrZ3JvdW5kJyksICdlLWNlbGxzZWxlY3Rpb24xYmFja2dyb3VuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdwcmludCcsIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd3M6IGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgndHJbYXJpYS1zZWxlY3RlZD1cInRydWVcIl0nKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmVmb3JlUHJpbnQsIGFyZ3MpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5wcmludCh0aGlzLmVsZW1lbnQsIHRoaXMucHJpbnRXaW5kb3cpO1xuICAgICAgICAgICAgdGhpcy5pc1ByaW50aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnByaW50Q29tcGxldGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBQcmludC5wcm90b3R5cGUucmVtb3ZlQ29sR3JvdXAgPSBmdW5jdGlvbiAoZGVwdGgpIHtcbiAgICAgICAgICAgIHZhciBncm91cENhcHRpb24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JvdXBjYXB0aW9uJyk7XG4gICAgICAgICAgICB2YXIgY29sU3BhbiA9IGdyb3VwQ2FwdGlvbltkZXB0aCAtIDFdLmdldEF0dHJpYnV0ZSgnY29sc3BhbicpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncm91cENhcHRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBncm91cENhcHRpb25baV0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgY29sU3Bhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY29sR3JvdXBzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2NvbGdyb3VwJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbEdyb3Vwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGVwdGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjb2xHcm91cHNbaV0uY2hpbGROb2Rlc1tqXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUHJpbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIFByaW50LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdwcmludCc7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQcmludDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUHJpbnQgPSBQcmludDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL3ByaW50LmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL3NlcnZpY2VzL3ZhbHVlLWZvcm1hdHRlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVudW1fMSwgZWoyX2Jhc2VfMywgdmFsdWVfZm9ybWF0dGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEFnZ3JlZ2F0ZUNvbHVtbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBZ2dyZWdhdGVDb2x1bW4sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFnZ3JlZ2F0ZUNvbHVtbigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMudGVtcGxhdGVGbiA9IHt9O1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUuc2V0Rm9ybWF0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlRm9ybWF0dGVyID0gbmV3IHZhbHVlX2Zvcm1hdHRlcl8xLlZhbHVlRm9ybWF0dGVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtYXQgJiYgKHRoaXMuZm9ybWF0LnNrZWxldG9uIHx8IHRoaXMuZm9ybWF0LmZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdEZuID0gdmFsdWVGb3JtYXR0ZXIuZ2V0Rm9ybWF0RnVuY3Rpb24odGhpcy5mb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLmdldEZvcm1hdHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdEZuO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLnNldFRlbXBsYXRlID0gZnVuY3Rpb24gKGhlbHBlcikge1xuICAgICAgICAgICAgaWYgKGhlbHBlciA9PT0gdm9pZCAwKSB7IGhlbHBlciA9IHt9OyB9XG4gICAgICAgICAgICBpZiAodGhpcy5mb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuW2VqMl9iYXNlXzIuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLlN1bW1hcnkpXSA9IHsgZm46IGVqMl9iYXNlXzEuY29tcGlsZSh0aGlzLmZvb3RlclRlbXBsYXRlLCBoZWxwZXIpLFxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogJ2Zvb3RlclRlbXBsYXRlJyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBGb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuW2VqMl9iYXNlXzIuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeSldID0geyBmbjogZWoyX2Jhc2VfMS5jb21waWxlKHRoaXMuZ3JvdXBGb290ZXJUZW1wbGF0ZSwgaGVscGVyKSxcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6ICdncm91cEZvb3RlclRlbXBsYXRlJyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBDYXB0aW9uVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVGbltlajJfYmFzZV8yLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeSldID0geyBmbjogZWoyX2Jhc2VfMS5jb21waWxlKHRoaXMuZ3JvdXBDYXB0aW9uVGVtcGxhdGUsIGhlbHBlciksXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiAnZ3JvdXBDYXB0aW9uVGVtcGxhdGUnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZUNvbHVtbi5wcm90b3R5cGUuZ2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVGbltlajJfYmFzZV8yLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIHR5cGUpXTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFnZ3JlZ2F0ZUNvbHVtbjtcbiAgICB9KGVqMl9iYXNlXzMuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJmaWVsZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImNvbHVtbk5hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJmb3JtYXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJmb290ZXJUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImdyb3VwRm9vdGVyVGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMy5Qcm9wZXJ0eSgpXG4gICAgXSwgQWdncmVnYXRlQ29sdW1uLnByb3RvdHlwZSwgXCJncm91cENhcHRpb25UZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLlByb3BlcnR5KClcbiAgICBdLCBBZ2dyZWdhdGVDb2x1bW4ucHJvdG90eXBlLCBcImN1c3RvbUFnZ3JlZ2F0ZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQWdncmVnYXRlQ29sdW1uID0gQWdncmVnYXRlQ29sdW1uO1xuICAgIHZhciBBZ2dyZWdhdGVSb3cgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWdncmVnYXRlUm93LCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBZ2dyZWdhdGVSb3coKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFnZ3JlZ2F0ZVJvdztcbiAgICB9KGVqMl9iYXNlXzMuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8zLkNvbGxlY3Rpb24oW10sIEFnZ3JlZ2F0ZUNvbHVtbilcbiAgICBdLCBBZ2dyZWdhdGVSb3cucHJvdG90eXBlLCBcImNvbHVtbnNcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkFnZ3JlZ2F0ZVJvdyA9IEFnZ3JlZ2F0ZVJvdztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9tb2RlbHMvYWdncmVnYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYnV0dG9uc1wiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2RhdGFfMSwgZWoyX2Jhc2VfMiwgZWoyX2J1dHRvbnNfMSwgZXZlbnRzLCBlajJfcG9wdXBzXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29sdW1uQ2hvb3NlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbHVtbkNob29zZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5zaG93Q29sdW1uID0gW107XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW4gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNEbGdPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRsZ2hpZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbE9wZW5EbGcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLmhpZGVEaWFsb2cuYmluZCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRGxnQ29udGVudCgpO1xuICAgICAgICAgICAgdGhpcy5nZXRTaG93SGlkZVNlcnZpY2UgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3Nob3dIaWRlU2VydmljZScpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlajJfYmFzZV8yLmNsb3Nlc3QodGFyZ2V0RWxlbWVudCwgJy5lLWNjJykpIHx8ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXRFbGVtZW50LCAnLmUtY2MtdG9vbGJhcicpKSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1jb2x1bW5jaG9vc2VyLWJ0bicpIHx8IHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWNjLXRvb2xiYXInKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMuaW5pdGlhbE9wZW5EbGcgJiYgdGhpcy5kbGdPYmoudmlzaWJsZSkgfHwgIXRoaXMuaXNEbGdPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRGxnT3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2MtY2FuY2VsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjc2VhcmNoJykudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5DaG9vc2VyU2VhcmNoKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDYW5jZWxJY29uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGxnT2JqKSAmJiB0aGlzLmRsZ09iai52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RsZ09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmhpZGVEaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kbGdPYmopICYmIHRoaXMuZGxnT2JqLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0RsZ09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyQ29sdW1uQ2hvb3NlciA9IGZ1bmN0aW9uICh4LCB5LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kbGdPYmoudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHZhciBwb3MgPSB7IFg6IG51bGwsIFk6IG51bGwgfTtcbiAgICAgICAgICAgICAgICB2YXIgYXJnczEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnYmVmb3JlT3BlbkNvbHVtbkNob29zZXInLCBlbGVtZW50OiB0aGlzLnBhcmVudC5lbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmJlZm9yZU9wZW5Db2x1bW5DaG9vc2VyLCBhcmdzMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2hlY2tib3hTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnNDMwcHgnO1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50VmlzaWJsZSA9IHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUuZGlzcGxheTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIHZhciBuZXdwb3MgPSBlajJfcG9wdXBzXzEuY2FsY3VsYXRlUmVsYXRpdmVCYXNlZFBvc2l0aW9uKGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS10b29sYmFyLWl0ZW0nKSwgdGhpcy5kbGdPYmouZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gZWxlbWVudFZpc2libGU7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS50b3AgPSBuZXdwb3MudG9wICsgZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWNjLXRvb2xiYXInKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIHZhciBkbGdXaWR0aCA9IDI1MDtcbiAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWJpZ2dlcicpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai53aWR0aCA9IDI1MztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldmljZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnRhcmdldCA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnBvc2l0aW9uID0geyBYOiAnY2VudGVyJywgWTogJ2NlbnRlcicgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kbGdPYmoucmVmcmVzaFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLm9wZW4gPSB0aGlzLm1PcGVuRGxnLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSB0YXJnZXQub2Zmc2V0TGVmdCArICdweCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSAoKG5ld3Bvcy5sZWZ0IC0gZGxnV2lkdGgpICsgZWoyX2Jhc2VfMi5jbG9zZXN0KHRhcmdldCwgJy5lLWNjLXRvb2xiYXInKS5jbGllbnRXaWR0aCkgKyAyICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNhbmNlbEljb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5zaG93KCk7XG4gICAgICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkY2FuY2VsSWNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5vcGVuQ29sdW1uQ2hvb3NlciA9IGZ1bmN0aW9uIChYLCBZKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kbGdPYmoudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0luaXRpYWxPcGVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouY29udGVudCA9IHRoaXMucmVuZGVyQ2hvb3Nlckxpc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaENoZWNrYm94U3RhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5wb3NpdGlvbiA9IHsgWDogJ2NlbnRlcicsIFk6ICdjZW50ZXInIH07XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChYKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLnBvc2l0aW9uID0geyBYOiAnY2VudGVyJywgWTogJ2NlbnRlcicgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5yZWZyZXNoUG9zaXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQuc3R5bGUudG9wID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS5sZWZ0ID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdPYmouZWxlbWVudC5zdHlsZS50b3AgPSBZICsgJ3B4JztcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnN0eWxlLmxlZnQgPSBYICsgJ3B4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLnNob3coKTtcbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsT3BlbiA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVuZGVyRGxnQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB5O1xuICAgICAgICAgICAgdGhpcy5kbGdEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1jY2RsZyBlLWNjJywgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyAnX2NjZGxnJyB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5kbGdEaXYpO1xuICAgICAgICAgICAgdmFyIHhwb3MgPSB0aGlzLnBhcmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gMjUwO1xuICAgICAgICAgICAgdmFyIGRpYWxvUG9zID0gdGhpcy5wYXJlbnQuZW5hYmxlUnRsID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICAgICAgICAgIHZhciB0YXJFbGVtZW50ID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jY2RpdicpO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHRhckVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgeSA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvcyA9IHsgWDogbnVsbCwgWTogbnVsbCB9O1xuICAgICAgICAgICAgdGhpcy5kbGdPYmogPSBuZXcgZWoyX3BvcHVwc18xLkRpYWxvZyh7XG4gICAgICAgICAgICAgICAgaGVhZGVyOiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0Nob29zZUNvbHVtbnMnKSxcbiAgICAgICAgICAgICAgICBzaG93Q2xvc2VJY29uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uRXNjYXBlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IHRoaXMucGFyZW50LmxvY2FsZSxcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucGFyZW50LmVsZW1lbnQuaWQpLFxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jb25maXJtRGxnQnRuQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdPS0J1dHRvbicpLCBpc1ByaW1hcnk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdlLWNjIGUtY2Nfb2tidG4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogdGhpcy5jbGVhckFjdGlvbnMuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNzc0NsYXNzOiAnZS1mbGF0IGUtY2MgZS1jYy1jbmJ0bicsIGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsQnV0dG9uJykgfVxuICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnJlbmRlckNob29zZXJMaXN0KCksXG4gICAgICAgICAgICAgICAgd2lkdGg6IDI1MCxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ2UtY2MnLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvblNldHRpbmdzOiB7IGVmZmVjdDogJ05vbmUnIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmFwcGVuZFRvKHRoaXMuZGxnRGl2KTtcbiAgICAgICAgICAgIHV0aWxfMS5jaGFuZ2VCdXR0b25UeXBlKHRoaXMuZGxnT2JqLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5yZW5kZXJDaG9vc2VyTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubWFpbkRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLW1haW4tZGl2IGUtY2MnIH0pO1xuICAgICAgICAgICAgdmFyIHNlYXJjaERpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWNjLXNlYXJjaGRpdiBlLWNjIGUtaW5wdXQtZ3JvdXAnIH0pO1xuICAgICAgICAgICAgdmFyIGNjc2VhcmNoZWxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNjc2VhcmNoIGUtY2MgZS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgcGxhY2Vob2xkZXI6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnU2VhcmNoJykgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgY2NzZWFyY2hpY29uID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLWNjc2VhcmNoLWljb24gZS1pY29ucyBlLWNjIGUtaW5wdXQtZ3JvdXAtaWNvbicgfSk7XG4gICAgICAgICAgICB2YXIgY29uRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtY2MtY29udGVudGRpdicgfSk7XG4gICAgICAgICAgICB0aGlzLmlubmVyRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaW5uZXJkaXYgZS1jYycgfSk7XG4gICAgICAgICAgICBzZWFyY2hEaXYuYXBwZW5kQ2hpbGQoY2NzZWFyY2hlbGUpO1xuICAgICAgICAgICAgc2VhcmNoRGl2LmFwcGVuZENoaWxkKGNjc2VhcmNoaWNvbik7XG4gICAgICAgICAgICBjY3NlYXJjaGVsZS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjY3NlYXJjaGVsZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtaW5wdXQtZm9jdXMnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2NzZWFyY2hlbGUuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjY3NlYXJjaGVsZS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtaW5wdXQtZm9jdXMnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2Q29udGVudCA9IHRoaXMucmVmcmVzaENoZWNrYm94TGlzdCh0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkpO1xuICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5hcHBlbmRDaGlsZChpbm5lckRpdkNvbnRlbnQpO1xuICAgICAgICAgICAgY29uRGl2LmFwcGVuZENoaWxkKHRoaXMuaW5uZXJEaXYpO1xuICAgICAgICAgICAgdGhpcy5tYWluRGl2LmFwcGVuZENoaWxkKHNlYXJjaERpdik7XG4gICAgICAgICAgICB0aGlzLm1haW5EaXYuYXBwZW5kQ2hpbGQoY29uRGl2KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1haW5EaXY7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNvbmZpcm1EbGdCdG5DbGljayA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlkZUNvbHVtbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5TdGF0ZUNoYW5nZSh0aGlzLmhpZGVDb2x1bW4sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5TdGF0ZUNoYW5nZSh0aGlzLnNob3dDb2x1bW4sIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2NvbHVtbnN0YXRlJywgZWxlbWVudDogdGhpcy5wYXJlbnQuZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogdGhpcy5zdGF0ZUNoYW5nZUNvbHVtbnMsIGRpYWxvZ0luc3RhbmNlOiB0aGlzLmRsZ09ialxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTaG93SGlkZVNlcnZpY2Uuc2V0VmlzaWJsZSh0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckFjdGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY29sdW1uU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdGVDb2x1bW5zLCBzdGF0ZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHN0YXRlQ29sdW1ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sVWlkID0gc3RhdGVDb2x1bW5zW2luZGV4XS5yZXBsYWNlKCdlLWNjJywgJycpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q29sID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQoY29sVWlkKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29sLnZpc2libGUgPSBzdGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlQ29sdW1ucy5wdXNoKGN1cnJlbnRDb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5jbGVhckFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW4gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbHVtbiA9IFtdO1xuICAgICAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICAgICAgdGhpcy5hZGRjYW5jZWxJY29uKCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLmNoZWNrc3RhdGVjb2x1bW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldEVsZSA9IGUuZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHVuY2hlY2tDb2x1bW4gPSB0YXJnZXRFbGUuaWQ7XG4gICAgICAgICAgICBpZiAoZS5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlkZUNvbHVtbi5pbmRleE9mKHVuY2hlY2tDb2x1bW4pICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW4uc3BsaWNlKHRoaXMuaGlkZUNvbHVtbi5pbmRleE9mKHVuY2hlY2tDb2x1bW4pLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKHVuY2hlY2tDb2x1bW4pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb2x1bW4ucHVzaCh1bmNoZWNrQ29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93Q29sdW1uLmluZGV4T2YodW5jaGVja0NvbHVtbikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NvbHVtbi5zcGxpY2UodGhpcy5zaG93Q29sdW1uLmluZGV4T2YodW5jaGVja0NvbHVtbiksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oaWRlQ29sdW1uLmluZGV4T2YodW5jaGVja0NvbHVtbikgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbi5wdXNoKHVuY2hlY2tDb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY29sdW1uQ2hvb3NlclNlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2hWYWwpIHtcbiAgICAgICAgICAgIHZhciBjbGVhclNlYXJjaCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGZsdHJDb2w7XG4gICAgICAgICAgICBpZiAoc2VhcmNoVmFsID09PSAnJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2FuY2VsSWNvbigpO1xuICAgICAgICAgICAgICAgIGZsdHJDb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCk7XG4gICAgICAgICAgICAgICAgY2xlYXJTZWFyY2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZmx0ckNvbCA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMucGFyZW50LmdldENvbHVtbnMoKSkuZXhlY3V0ZUxvY2FsKG5ldyBlajJfZGF0YV8xLlF1ZXJ5KClcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKCdoZWFkZXJUZXh0JywgJ3N0YXJ0c3dpdGgnLCBzZWFyY2hWYWwsIHRydWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmbHRyQ29sLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuaW5uZXJIVE1MID0gJyAnO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJEaXYuY2xhc3NMaXN0LnJlbW92ZSgnZS1jY25tZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5hcHBlbmRDaGlsZCh0aGlzLnJlZnJlc2hDaGVja2JveExpc3QoZmx0ckNvbCwgc2VhcmNoVmFsKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjbGVhclNlYXJjaCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZGNhbmNlbEljb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbk1hdGNoZWxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLWNjIGUtbm1hdGNoJyB9KTtcbiAgICAgICAgICAgICAgICBuTWF0Y2hlbGUuaW5uZXJIVE1MID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdNYXRjaHMnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmlubmVySFRNTCA9ICcgJztcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGl2LmFwcGVuZENoaWxkKG5NYXRjaGVsZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckRpdi5jbGFzc0xpc3QuYWRkKCdlLWNjbm1kaXYnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlYXJjaEVsZW1lbnQgPSB0aGlzLmRsZ09iai5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LmUtY2NzZWFyY2gnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZChzZWFyY2hFbGVtZW50LCAna2V5dXAnLCB0aGlzLmNvbHVtbkNob29zZXJNYW51YWxTZWFyY2gsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS51bldpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VhcmNoRWxlbWVudCA9IHRoaXMuZGxnT2JqLmNvbnRlbnQucXVlcnlTZWxlY3RvcignaW5wdXQuZS1jY3NlYXJjaCcpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHNlYXJjaEVsZW1lbnQsICdrZXl1cCcsIHRoaXMuY29sdW1uQ2hvb3Nlck1hbnVhbFNlYXJjaCk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlZnJlc2hDaGVja2JveExpc3QgPSBmdW5jdGlvbiAoZ2RDb2wsIHNlYXJjaFZhbCkge1xuICAgICAgICAgICAgdGhpcy51bEVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3VsJywgeyBjbGFzc05hbWU6ICdlLWNjdWwtZWxlIGUtY2MnIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZENvbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gZ2RDb2xbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDaGVja2JveChjb2x1bW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVsRWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUucmVmcmVzaENoZWNrYm94U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjLmUtaW5wdXQnKS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5DaG9vc2VyU2VhcmNoKCcnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jYy1jaGJveCcpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWNjLWNoYm94JylbaV07XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKGVsZW1lbnQuaWQucmVwbGFjZSgnZS1jYycsICcnKSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbmRlckNoZWNrYm94ID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICAgICAgdmFyIGNjbGlzdDtcbiAgICAgICAgICAgIHZhciBoaWRlQ29sU3RhdGU7XG4gICAgICAgICAgICB2YXIgc2hvd0NvbFN0YXRlO1xuICAgICAgICAgICAgdmFyIGNoZWNrQm94T2JqO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5zaG93SW5Db2x1bW5DaG9vc2VyKSB7XG4gICAgICAgICAgICAgICAgY2NsaXN0ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdsaScsIHsgY2xhc3NOYW1lOiAnZS1jY2xpc3QgZS1jYycsIHN0eWxlczogJ2xpc3Qtc3R5bGU6Tm9uZScsIGlkOiAnZS1jY2xpXycgKyBjb2x1bW4udWlkIH0pO1xuICAgICAgICAgICAgICAgIHZhciBjY2xhYmUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywgeyBjbGFzc05hbWU6ICdlLWNjJyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgY2NjaGVja2JveGxpc3QgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWNjIGUtY2MtY2hib3ggJyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdlLWNjJyArIGNvbHVtbi51aWQsIGF0dHJzOiB7IHR5cGU6ICdjaGVja2JveCcgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNjbGFiZS5hcHBlbmRDaGlsZChjY2NoZWNrYm94bGlzdCk7XG4gICAgICAgICAgICAgICAgaGlkZUNvbFN0YXRlID0gdGhpcy5oaWRlQ29sdW1uLmluZGV4T2YoJ2UtY2MnICsgY29sdW1uLnVpZCkgPT09IC0xID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgICAgIHNob3dDb2xTdGF0ZSA9IHRoaXMuc2hvd0NvbHVtbi5pbmRleE9mKCdlLWNjJyArIGNvbHVtbi51aWQpID09PSAtMSA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICBjaGVja0JveE9iaiA9IG5ldyBlajJfYnV0dG9uc18xLkNoZWNrQm94KHsgbGFiZWw6IGNvbHVtbi5oZWFkZXJUZXh0LCBjaGVja2VkOiB0cnVlLCBjaGFuZ2U6IHRoaXMuY2hlY2tzdGF0ZWNvbHVtbi5iaW5kKHRoaXMpIH0pO1xuICAgICAgICAgICAgICAgIGlmICgoY29sdW1uLnZpc2libGUgJiYgIWhpZGVDb2xTdGF0ZSkgfHwgc2hvd0NvbFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrQm94T2JqLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3hPYmouY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaGVja0JveE9iai5hcHBlbmRUbyhjY2NoZWNrYm94bGlzdCk7XG4gICAgICAgICAgICAgICAgY2NsaXN0LmFwcGVuZENoaWxkKGNjbGFiZSk7XG4gICAgICAgICAgICAgICAgdGhpcy51bEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2NsaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuY29sdW1uQ2hvb3Nlck1hbnVhbFNlYXJjaCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmFkZGNhbmNlbEljb24oKTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoVmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIHZhciBwcm94eSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVyKGUpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5zdGFydFRpbWVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwcm94eSA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSAhcHJveHkuZmxhZyAmJiBlLmtleUNvZGUgIT09IDEzID8gNTAwIDogMDtcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBwcm94eS5jb2x1bW5DaG9vc2VyU2VhcmNoKHByb3h5LnNlYXJjaFZhbHVlKTsgfSwgaW50ZXJ2YWwpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5zdG9wVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuYWRkY2FuY2VsSWNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGxnRGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjLmUtY2NzZWFyY2gtaWNvbicpLmNsYXNzTGlzdC5hZGQoJ2UtY2MtY2FuY2VsJyk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkNob29zZXIucHJvdG90eXBlLnJlbW92ZUNhbmNlbEljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ0Rpdi5xdWVyeVNlbGVjdG9yKCcuZS1jYy5lLWNjc2VhcmNoLWljb24nKS5jbGFzc0xpc3QucmVtb3ZlKCdlLWNjLWNhbmNlbCcpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5DaG9vc2VyLnByb3RvdHlwZS5tT3BlbkRsZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGxnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2Mtc2VhcmNoZGl2JykuY2xhc3NMaXN0LnJlbW92ZSgnZS1pbnB1dC1mb2N1cycpO1xuICAgICAgICAgICAgdmFyIGNoZWxlID0gdGhpcy5kbGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1jYy1jaGJveCcpWzBdO1xuICAgICAgICAgICAgY2hlbGUuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQ2hvb3Nlci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnQ29sdW1uQ2hvb3Nlcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDb2x1bW5DaG9vc2VyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Db2x1bW5DaG9vc2VyID0gQ29sdW1uQ2hvb3Nlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2NvbHVtbi1jaG9vc2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA0M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNDRfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1idXR0b25zXCJcbi8vIG1vZHVsZSBpZCA9IDQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vYWN0aW9ucy9kYXRhXCIsIFwiLi9hY3Rpb25zL3NvcnRcIiwgXCIuL2FjdGlvbnMvcGFnZVwiLCBcIi4vYWN0aW9ucy9zZWxlY3Rpb25cIiwgXCIuL2FjdGlvbnMvZmlsdGVyXCIsIFwiLi9hY3Rpb25zL3NlYXJjaFwiLCBcIi4vYWN0aW9ucy9zY3JvbGxcIiwgXCIuL2FjdGlvbnMvcmVzaXplXCIsIFwiLi9hY3Rpb25zL3Jlb3JkZXJcIiwgXCIuL2FjdGlvbnMvcm93LXJlb3JkZXJcIiwgXCIuL2FjdGlvbnMvZ3JvdXBcIiwgXCIuL2FjdGlvbnMvcHJpbnRcIiwgXCIuL2FjdGlvbnMvZGV0YWlsLXJvd1wiLCBcIi4vYWN0aW9ucy90b29sYmFyXCIsIFwiLi9hY3Rpb25zL2FnZ3JlZ2F0ZVwiLCBcIi4vYWN0aW9ucy92aXJ0dWFsLXNjcm9sbFwiLCBcIi4vYWN0aW9ucy9lZGl0XCIsIFwiLi9hY3Rpb25zL2JhdGNoLWVkaXRcIiwgXCIuL2FjdGlvbnMvaW5saW5lLWVkaXRcIiwgXCIuL2FjdGlvbnMvbm9ybWFsLWVkaXRcIiwgXCIuL2FjdGlvbnMvZGlhbG9nLWVkaXRcIiwgXCIuL2FjdGlvbnMvY29sdW1uLWNob29zZXJcIiwgXCIuL2FjdGlvbnMvZXhjZWwtZXhwb3J0XCIsIFwiLi9hY3Rpb25zL3BkZi1leHBvcnRcIiwgXCIuL2FjdGlvbnMvZXhwb3J0LWhlbHBlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGRhdGFfMSwgc29ydF8xLCBwYWdlXzEsIHNlbGVjdGlvbl8xLCBmaWx0ZXJfMSwgc2VhcmNoXzEsIHNjcm9sbF8xLCByZXNpemVfMSwgcmVvcmRlcl8xLCByb3dfcmVvcmRlcl8xLCBncm91cF8xLCBwcmludF8xLCBkZXRhaWxfcm93XzEsIHRvb2xiYXJfMSwgYWdncmVnYXRlXzEsIHZpcnR1YWxfc2Nyb2xsXzEsIGVkaXRfMSwgYmF0Y2hfZWRpdF8xLCBpbmxpbmVfZWRpdF8xLCBub3JtYWxfZWRpdF8xLCBkaWFsb2dfZWRpdF8xLCBjb2x1bW5fY2hvb3Nlcl8xLCBleGNlbF9leHBvcnRfMSwgcGRmX2V4cG9ydF8xLCBleHBvcnRfaGVscGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KGRhdGFfMSk7XG4gICAgX19leHBvcnQoc29ydF8xKTtcbiAgICBfX2V4cG9ydChwYWdlXzEpO1xuICAgIF9fZXhwb3J0KHNlbGVjdGlvbl8xKTtcbiAgICBfX2V4cG9ydChmaWx0ZXJfMSk7XG4gICAgX19leHBvcnQoc2VhcmNoXzEpO1xuICAgIF9fZXhwb3J0KHNjcm9sbF8xKTtcbiAgICBfX2V4cG9ydChyZXNpemVfMSk7XG4gICAgX19leHBvcnQocmVvcmRlcl8xKTtcbiAgICBfX2V4cG9ydChyb3dfcmVvcmRlcl8xKTtcbiAgICBfX2V4cG9ydChncm91cF8xKTtcbiAgICBfX2V4cG9ydChwcmludF8xKTtcbiAgICBfX2V4cG9ydChkZXRhaWxfcm93XzEpO1xuICAgIF9fZXhwb3J0KHRvb2xiYXJfMSk7XG4gICAgX19leHBvcnQoYWdncmVnYXRlXzEpO1xuICAgIF9fZXhwb3J0KHZpcnR1YWxfc2Nyb2xsXzEpO1xuICAgIF9fZXhwb3J0KGVkaXRfMSk7XG4gICAgX19leHBvcnQoYmF0Y2hfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChpbmxpbmVfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChub3JtYWxfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChkaWFsb2dfZWRpdF8xKTtcbiAgICBfX2V4cG9ydChjb2x1bW5fY2hvb3Nlcl8xKTtcbiAgICBfX2V4cG9ydChleGNlbF9leHBvcnRfMSk7XG4gICAgX19leHBvcnQocGRmX2V4cG9ydF8xKTtcbiAgICBfX2V4cG9ydChleHBvcnRfaGVscGVyXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMuanNcbi8vIG1vZHVsZSBpZCA9IDQ1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9ncmlkXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGdyaWRfMSwgdXRpbF8xLCBldmVudHMsIGFyaWFfc2VydmljZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEZXRhaWxSb3cgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEZXRhaWxSb3cocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmFyaWEgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmtleVByZXNzSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy50b29nbGVFeHBhbmRjb2xsYXBzZShlajJfYmFzZV8xLmNsb3Nlc3QoZS50YXJnZXQsICd0ZCcpKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS50b29nbGVFeHBhbmRjb2xsYXBzZSA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gJ3BhcmVudERldGFpbHMnO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3djb2xsYXBzZScpIHx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93ZXhwYW5kJykpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRSb3cgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuW3RyLnJvd0luZGV4ICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGV0YWlscm93Y29sbGFwc2UnKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gJ3JlY29yZHMnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFZpZXdEYXRhID0gZ09iai5hbGxvd0dyb3VwaW5nICYmIGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA/XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmN1cnJlbnRWaWV3RGF0YVtrZXldIDogZ09iai5jdXJyZW50Vmlld0RhdGE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gY3VycmVudFZpZXdEYXRhW3RyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEZXRhaWxSb3cobmV4dFJvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRSb3cuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdPYmouZ2V0RGV0YWlsVGVtcGxhdGUoKSB8fCBnT2JqLmNoaWxkR3JpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbFJvdyA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtZGV0YWlscm93JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWxDZWxsID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxjZWxsJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbENlbGwuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgdGhpcy5wYXJlbnQuZ2V0VmlzaWJsZUNvbHVtbnMoKS5sZW5ndGgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxSb3cuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1pbmRlbnRjZWxsJyB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxSb3cuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxpbmRlbnRjZWxsJyB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxSb3cuYXBwZW5kQ2hpbGQoZGV0YWlsQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkZXRhaWxSb3csIHRyLm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmRldGFpbFRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbF8xLmFwcGVuZENoaWxkcmVuKGRldGFpbENlbGwsIGdPYmouZ2V0RGV0YWlsVGVtcGxhdGUoKShkYXRhLCBnT2JqLCAnZGV0YWlsVGVtcGxhdGUnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnT2JqLmNoaWxkR3JpZFtwYXJlbnRdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJRDogZ09iai5lbGVtZW50LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRQcmltYXJ5S2V5czogZ09iai5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRLZXlGaWVsZDogZ09iai5jaGlsZEdyaWQucXVlcnlTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEtleUZpZWxkVmFsdWU6IGRhdGFbZ09iai5jaGlsZEdyaWQucXVlcnlTdHJpbmddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRSb3dEYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZCA9IG5ldyBncmlkXzEuR3JpZChnT2JqLmNoaWxkR3JpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBncmlkLmdldEluamVjdGVkTW9kdWxlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmplY3RlZE1vZHVlcyA9IGdPYmouZ2V0SW5qZWN0ZWRNb2R1bGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2R1bGVzIHx8IG1vZHVsZXMubGVuZ3RoICE9PSBpbmplY3RlZE1vZHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5zZXRJbmplY3RlZE1vZHVsZXMoaW5qZWN0ZWRNb2R1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZEVsZW0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdjaGlsZCcgKyB1dGlsXzEucGFyZW50cyh0ciwgJ2UtZ3JpZCcpLmxlbmd0aCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnX2dyaWQnICsgdHIucm93SW5kZXggKyB1dGlsXzEuZ2V0VWlkKCcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbENlbGwuYXBwZW5kQ2hpbGQoZ3JpZEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQuYXBwZW5kVG8oZ3JpZEVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRSb3dzKCkuc3BsaWNlKHRyLnJvd0luZGV4ICsgMSwgMCwgZGV0YWlsUm93KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuZGV0YWlsRGF0YUJvdW5kLCB7IGRldGFpbEVsZW1lbnQ6IGRldGFpbENlbGwsIGRhdGE6IGRhdGEgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LCBbJ2UtZGV0YWlscm93ZXhwYW5kJ10sIFsnZS1kZXRhaWxyb3djb2xsYXBzZSddKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLCBbJ2UtZHRkaWFnb25hbGRvd24nLCAnZS1pY29uLWdkb3duYXJyb3cnXSwgWydlLWR0ZGlhZ29uYWxyaWdodCcsICdlLWljb24tZ3JpZ2h0YXJyb3cnXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRFeHBhbmQodGFyZ2V0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRGV0YWlsUm93KG5leHRSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Um93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LCBbJ2UtZGV0YWlscm93Y29sbGFwc2UnXSwgWydlLWRldGFpbHJvd2V4cGFuZCddKTtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5jbGFzc0xpc3QodGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLCBbJ2UtZHRkaWFnb25hbHJpZ2h0JywgJ2UtaWNvbi1ncmlnaHRhcnJvdyddLCBbJ2UtZHRkaWFnb25hbGRvd24nLCAnZS1pY29uLWdkb3duYXJyb3cnXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRFeHBhbmQodGFyZ2V0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmlzRGV0YWlsUm93ID0gZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgcmV0dXJuIHJvdyAmJiByb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvdycpO1xuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRlc3Ryb3ksIHRoaXMuZGVzdHJveSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5nZXRURGZyb21JbmRleCA9IGZ1bmN0aW9uIChpbmRleCwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgdHIgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW2luZGV4XTtcbiAgICAgICAgICAgIGlmICh0ciAmJiB0ci5xdWVyeVNlbGVjdG9yKGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHIucXVlcnlTZWxlY3RvcihjbGFzc05hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuZXhwYW5kID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKCFpc05hTih0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5nZXRURGZyb21JbmRleCh0YXJnZXQsICcuZS1kZXRhaWxyb3djb2xsYXBzZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2NvbGxhcHNlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2dsZUV4cGFuZGNvbGxhcHNlKHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuY29sbGFwc2UgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB0aGlzLmdldFREZnJvbUluZGV4KHRhcmdldCwgJy5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvd2V4cGFuZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b29nbGVFeHBhbmRjb2xsYXBzZSh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmV4cGFuZEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2UodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGV0YWlsUm93LnByb3RvdHlwZS5leHBhbmRDb2xsYXBzZSA9IGZ1bmN0aW9uIChpc0V4cGFuZCkge1xuICAgICAgICAgICAgdmFyIHRkO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ZCA9IHJvd3NbaV0ucXVlcnlTZWxlY3RvcignLmUtZGV0YWlscm93Y29sbGFwc2UsIC5lLWRldGFpbHJvd2V4cGFuZCcpO1xuICAgICAgICAgICAgICAgIGlzRXhwYW5kID8gdGhpcy5leHBhbmQodGQpIDogdGhpcy5jb2xsYXBzZSh0ZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERldGFpbFJvdy5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3RybERvd25BcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxVcEFycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbHRVcEFycm93JzpcbiAgICAgICAgICAgICAgICBjYXNlICdhbHREb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBnT2JqLmFsbG93U2VsZWN0aW9uID8gZ09iai5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YVJvdyA9IGdPYmouZ2V0RGF0YVJvd3MoKVtzZWxlY3RlZFtzZWxlY3RlZC5sZW5ndGggLSAxXV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGQgPSBkYXRhUm93LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbHJvd2NvbGxhcHNlLCAuZS1kZXRhaWxyb3dleHBhbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuYWN0aW9uID09PSAnYWx0RG93bkFycm93JyA/IHRoaXMuZXhwYW5kKHRkKSA6IHRoaXMuY29sbGFwc2UodGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEZXRhaWxSb3cucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2RldGFpbFJvdyc7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEZXRhaWxSb3c7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRldGFpbFJvdyA9IERldGFpbFJvdztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2RldGFpbC1yb3cuanNcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9zZXJ2aWNlcy9hcmlhLXNlcnZpY2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCB1dGlsXzEsIGV2ZW50cywgYXJpYV9zZXJ2aWNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNvcnQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTb3J0KHBhcmVudCwgc29ydFNldHRpbmdzLCBzb3J0ZWRDb2x1bW5zKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNNb2RlbENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hcmlhID0gbmV3IGFyaWFfc2VydmljZV8xLkFyaWFTZXJ2aWNlKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzID0gc29ydFNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5zb3J0ZWRDb2x1bW5zID0gc29ydGVkQ29sdW1ucztcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNvcnRlZENvbHVtbiA9IHsgZmllbGQ6IHRoaXMuY29sdW1uTmFtZSwgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbiB9O1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgdmFyIGdDb2xzID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc011bHRpU29ydCkge1xuICAgICAgICAgICAgICAgIGlmICghZ0NvbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMgPSBbc29ydGVkQ29sdW1uXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ZWRDb2xzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnQ29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmdldFNvcnRlZENvbHNJbmRleEJ5RmllbGQoZ0NvbHNbaV0sIHNvcnRlZENvbHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uTmFtZSA9PT0gZ0NvbHNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWRDb2xzLnB1c2goc29ydGVkQ29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzQ29sID0gdGhpcy5nZXRTb3J0Q29sdW1uRnJvbUZpZWxkKGdDb2xzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWRDb2xzLnB1c2goeyBmaWVsZDogc0NvbC5maWVsZCwgZGlyZWN0aW9uOiBzQ29sLmRpcmVjdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZENvbHMucHVzaChzb3J0ZWRDb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMgPSBzb3J0ZWRDb2xzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5nZXRTb3J0ZWRDb2xzSW5kZXhCeUZpZWxkKHRoaXMuY29sdW1uTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1uc1tpbmRleF0gPSBzb3J0ZWRDb2x1bW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLnB1c2goc29ydGVkQ29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucyA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5kYXRhQmluZCgpO1xuICAgICAgICAgICAgdGhpcy5sYXN0U29ydGVkQ29sID0gdGhpcy5jb2x1bW5OYW1lO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5vbkFjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gIXRoaXMuaXNSZW1vdmUgPyB7XG4gICAgICAgICAgICAgICAgY29sdW1uTmFtZTogdGhpcy5jb2x1bW5OYW1lLCBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLCByZXF1ZXN0VHlwZTogJ3NvcnRpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0gOiB7IHJlcXVlc3RUeXBlOiAnc29ydGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZSB9O1xuICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzIuZXh0ZW5kKGUsIGFyZ3MpKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuc29ydENvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBkaXJlY3Rpb24sIGlzTXVsdGlTb3J0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChjb2x1bW5OYW1lKS5hbGxvd1NvcnRpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3Rpb25QcmV2ZW50KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5zb3J0Q29sdW1uLFxuICAgICAgICAgICAgICAgICAgICBhcmcxOiBjb2x1bW5OYW1lLCBhcmcyOiBkaXJlY3Rpb24sIGFyZzM6IGlzTXVsdGlTb3J0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb2x1bW5OYW1lID0gY29sdW1uTmFtZTtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU29ydCA9IGlzTXVsdGlTb3J0O1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0SWNvbnMoKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTb3J0ZWRDb2xzKGNvbHVtbk5hbWUsIGlzTXVsdGlTb3J0KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUudXBkYXRlU29ydGVkQ29scyA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lLCBpc011bHRpU29ydCkge1xuICAgICAgICAgICAgaWYgKCFpc011bHRpU29ydCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnNvcnRlZENvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZih0aGlzLnNvcnRlZENvbHVtbnNbaV0pIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuLS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRlZENvbHVtbnMuc3BsaWNlKDAsIHRoaXMuc29ydGVkQ29sdW1ucy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNvcnRlZENvbHVtbnMuaW5kZXhPZihjb2x1bW5OYW1lKSA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNvcnRlZENvbHVtbnMucHVzaChjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA/IHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uTmFtZTogdGhpcy5jb2x1bW5OYW1lLCBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLCByZXF1ZXN0VHlwZTogJ3NvcnRpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgICAgICB9IDogeyByZXF1ZXN0VHlwZTogJ3NvcnRpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW4gfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgdGhpcy5hZGRTb3J0SWNvbnMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuY2xlYXJTb3J0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB1dGlsXzEuZ2V0QWN0dWFsUHJvcEZyb21Db2xsKHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3Rpb25QcmV2ZW50KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5jbGVhclNvcnRpbmcgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRDb2x1bW4oY29sc1tpXS5maWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmlzQWN0aW9uUHJldmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KHRoaXMucGFyZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUucmVtb3ZlU29ydENvbHVtbiA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aW9uUHJldmVudCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHsgaW5zdGFuY2U6IHRoaXMsIGhhbmRsZXI6IHRoaXMucmVtb3ZlU29ydENvbHVtbiwgYXJnMTogZmllbGQgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVTb3J0SWNvbnMoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uZmllbGQgPT09IGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcgJiYgZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRlZENvbHVtbnMuc3BsaWNlKHRoaXMuc29ydGVkQ29sdW1ucy5pbmRleE9mKGNvbHNbaV0uZmllbGQpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgY29scy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01vZGVsQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3NvcnRpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWRkU29ydEljb25zKCk7XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmdldFNvcnRlZENvbHNJbmRleEJ5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQsIHNvcnRlZENvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gc29ydGVkQ29sdW1ucyA/IHNvcnRlZENvbHVtbnMgOiB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdzb3J0JztcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggJiYgdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTXVsdGlTb3J0ID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPiAxO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zb3J0ZWRDb2x1bW5zLmluZGV4T2YoY29sLmZpZWxkKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRDb2x1bW4oY29sLmZpZWxkLCBjb2wuZGlyZWN0aW9uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmlzTXVsdGlTb3J0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnNvcnRDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZWZyZXNoU29ydEljb25zLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuc29ydENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pc01vZGVsQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykucXVlcnlTZWxlY3RvckFsbCgnLmUtc29ydGRpcmVjdCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJTb3J0aW5nKCk7XG4gICAgICAgICAgICB0aGlzLmlzTW9kZWxDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wb3BVcENsaWNrSGFuZGxlcihlKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlajJfYmFzZV8zLmNsb3Nlc3QoZS50YXJnZXQsICcuZS1oZWFkZXJjZWxsJyk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmICFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZ3JwdG9nZ2xlYnRuJykgJiZcbiAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXN0YWNrZWRoZWFkZXJjZWxsJykgJiZcbiAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXN0YWNrZWRoZWFkZXJjZWxsZGl2JykgJiZcbiAgICAgICAgICAgICAgICAhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJoYW5kbGVyJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IGdPYmouZ2V0Q29sdW1uQnlVaWQodGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKS5maWVsZDtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gIXRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1hc2NlbmRpbmcnKS5sZW5ndGggPyAnYXNjZW5kaW5nJyA6XG4gICAgICAgICAgICAgICAgICAgICdkZXNjZW5kaW5nJztcbiAgICAgICAgICAgICAgICBpZiAoIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0Q29sdW1uKGZpZWxkLCBkaXJlY3Rpb24sIGUuY3RybEtleSB8fCB0aGlzLmVuYWJsZVNvcnRNdWx0aVRvdWNoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU29ydENvbHVtbihmaWVsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLkJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93UG9wVXAoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5zaG93UG9wVXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVqMl9iYXNlXzMuY2xvc2VzdChlLnRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgdXRpbF8xLnNldENzc0luR3JpZFBvcFVwKHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJyksIGUsICdlLXNvcnRkaXJlY3QgZS1pY29ucyBlLWljb24tc29ydGRpcmVjdCcgKyAodGhpcy5zb3J0ZWRDb2x1bW5zLmxlbmd0aCA+IDEgPyAnIGUtc3BhbmNsaWNrZWQnIDogJycpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUucG9wVXBDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICcuZS1oZWFkZXJjZWxsJykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvd2NlbGwnKSB8fFxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xvc2VzdCh0YXJnZXQsICcuZS1ncmlkcG9wdXAnKSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNvcnRkaXJlY3QnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Utc3BhbmNsaWNrZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2Utc3BhbmNsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU29ydE11bHRpVG91Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2Utc3BhbmNsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU29ydE11bHRpVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuYWRkU29ydEljb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBoZWFkZXI7XG4gICAgICAgICAgICB2YXIgZmlsdGVyRWxlbWVudDtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5zb3J0U2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBmaWVsZE5hbWVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZDsgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoZWFkZXIgPSBnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sc1tpXS5maWVsZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmlhLnNldFNvcnQoaGVhZGVyLCBjb2xzW2ldLmRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNdWx0aVNvcnQgJiYgY29scy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjZWxsZGl2JykuaW5zZXJ0QmVmb3JlKGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZS1zb3J0bnVtYmVyJywgaW5uZXJIVE1MOiAoaSArIDEpLnRvU3RyaW5nKCkgfSksIGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJ0ZXh0JykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaWx0ZXJFbGVtZW50ID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNvcnRmaWx0ZXJkaXYnKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5kaXJlY3Rpb24gPT09ICdhc2NlbmRpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGZpbHRlckVsZW1lbnQsIFsnZS1hc2NlbmRpbmcnLCAnZS1pY29uLWFzY2VuZGluZyddLCBbXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChmaWx0ZXJFbGVtZW50LCBbJ2UtZGVzY2VuZGluZycsICdlLWljb24tZGVzY2VuZGluZyddLCBbXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS5yZW1vdmVTb3J0SWNvbnMgPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaGVhZGVyO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB0aGlzLnNvcnRTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXMgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5zKCkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmZpZWxkOyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBwb3NpdGlvbiA/IHBvc2l0aW9uIDogMCwgbGVuID0gIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocG9zaXRpb24pID8gcG9zaXRpb24gKyAxIDogY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcgJiYgZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lcy5pbmRleE9mKGNvbHNbaV0uZmllbGQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGVhZGVyID0gZ09iai5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGNvbHNbaV0uZmllbGQpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRTb3J0KGhlYWRlciwgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdChoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtc29ydGZpbHRlcmRpdicpLCBbXSwgWydlLWRlc2NlbmRpbmcnLCAnZS1pY29uLWRlc2NlbmRpbmcnLCAnZS1hc2NlbmRpbmcnLCAnZS1pY29uLWFzY2VuZGluZyddKTtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNvcnRudW1iZXInKSkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXIucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLnJlbW92ZUNoaWxkKGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuZS1zb3J0bnVtYmVyJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU29ydC5wcm90b3R5cGUuZ2V0U29ydENvbHVtbkZyb21GaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zb3J0U2V0dGluZ3MuY29sdW1uc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc29ydFNldHRpbmdzLmNvbHVtbnNbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBTb3J0LnByb3RvdHlwZS51cGRhdGVBcmlhQXR0ciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZE5hbWVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZDsgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5zb3J0ZWRDb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXMuaW5kZXhPZihjb2wpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlciA9IHRoaXMucGFyZW50LmdldENvbHVtbkhlYWRlckJ5RmllbGQoY29sKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFyaWEuc2V0U29ydChoZWFkZXIsIHRoaXMuZ2V0U29ydENvbHVtbkZyb21GaWVsZChjb2wpLmRpcmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNvcnQucHJvdG90eXBlLnJlZnJlc2hTb3J0SWNvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgdGhpcy5pc011bHRpU29ydCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNvcnRJY29ucygpO1xuICAgICAgICAgICAgdGhpcy5hZGRTb3J0SWNvbnMoKTtcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aVNvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQXJpYUF0dHIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNvcnQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlNvcnQgPSBTb3J0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvc29ydC5qc1xuLy8gbW9kdWxlIGlkID0gNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uLy4uL3BhZ2VyL3BhZ2VyXCIsIFwiLi4vLi4vcGFnZXIvcGFnZXItZHJvcGRvd25cIiwgXCIuLi8uLi9wYWdlci9leHRlcm5hbC1tZXNzYWdlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHBhZ2VyXzEsIHBhZ2VyX2Ryb3Bkb3duXzEsIGV4dGVybmFsX21lc3NhZ2VfMSwgdXRpbF8xLCBldmVudHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgcGFnZXJfMS5QYWdlci5JbmplY3QoZXh0ZXJuYWxfbWVzc2FnZV8xLkV4dGVybmFsTWVzc2FnZSwgcGFnZXJfZHJvcGRvd25fMS5QYWdlckRyb3BEb3duKTtcbiAgICB2YXIgUGFnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFBhZ2UocGFyZW50LCBwYWdlU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5wYWdlU2V0dGluZ3MgPSBwYWdlU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBQYWdlLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdwYWdlcic7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmo7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnQucGFnZXJUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VTZXR0aW5ncy50ZW1wbGF0ZSA9IHRoaXMucGFyZW50LnBhZ2VyVGVtcGxhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1ncmlkcGFnZXInIH0pO1xuICAgICAgICAgICAgcGFnZXJPYmogPSB1dGlsXzEuZXh0ZW5kKHt9LCBlajJfYmFzZV8xLmV4dGVuZCh7fSwgdXRpbF8xLmdldEFjdHVhbFByb3BlcnRpZXModGhpcy5wYWdlU2V0dGluZ3MpKSwge1xuICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGRyb3BEb3duQ2hhbmdlZDogdGhpcy5vblNlbGVjdC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGVuYWJsZVJ0bDogZ09iai5lbmFibGVSdGwsIGxvY2FsZTogZ09iai5sb2NhbGUsXG4gICAgICAgICAgICAgICAgY3JlYXRlZDogdGhpcy5hZGRBcmlhQXR0ci5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9LCBbJ3BhcmVudE9iaicsICdwcm9wTmFtZSddKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmogPSBuZXcgcGFnZXJfMS5QYWdlcihwYWdlck9iaik7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLm9uU2VsZWN0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZVNldHRpbmdzLnBhZ2VTaXplID0gZS5wYWdlU2l6ZTtcbiAgICAgICAgICAgIHRoaXMucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID0gMTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuYWRkQXJpYUF0dHIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCEodGhpcy5wYWdlU2V0dGluZ3MudGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bWVyaWNDb250YWluZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbnVtZXJpY2NvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgIHZhciBsaW5rcyA9IG51bWVyaWNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnYScpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rc1tpXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtb3ducycsIHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gWycuZS1tZmlyc3QnLCAnLmUtbXByZXYnLCAnLmUtZmlyc3QnLCAnLmUtcHJldicsICcuZS1uZXh0JywgJy5lLWxhc3QnLCAnLmUtbW5leHQnLCAnLmUtbWxhc3QnXTtcbiAgICAgICAgICAgICAgICBjbGFzc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1vd25zJywgX3RoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5kYXRhUmVhZHkgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbChlKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmoucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5nb1RvUGFnZSA9IGZ1bmN0aW9uIChwYWdlTm8pIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZ29Ub1BhZ2UocGFnZU5vKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnRvdGFsUmVjb3Jkc0NvdW50ID0gZS5jb3VudDtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFCaW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlLCByZXF1ZXN0VHlwZTogJ3BhZ2luZycsXG4gICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSAhPT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbmV3UHJvcCA9IGUucHJvcGVydGllcztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqW3Byb3BdID0gbmV3UHJvcFtwcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0ZvcmNlQ2FuY2VsIHx8IHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNGb3JjZUNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLmdvVG9QYWdlLCBhcmcxOiBlLmN1cnJlbnRQYWdlIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyT2JqLmN1cnJlbnRQYWdlID0gZ09iai5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNGb3JjZUNhbmNlbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRm9yY2VDYW5jZWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZS5jYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcmV2UGFnZSA9IHRoaXMucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgdGhpcy5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSBlLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3BhZ2luZycsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNQYWdlOiBwcmV2UGFnZSxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogZS5jdXJyZW50UGFnZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5rZXlQcmVzc0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FuU2tpcEFjdGlvbihlLmFjdGlvbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5hY3Rpb24gaW4ga2V5QWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihrZXlBY3Rpb25zW2UuYWN0aW9uXSkuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuY2FuU2tpcEFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBwYWdlID0ge1xuICAgICAgICAgICAgICAgIHBhZ2VVcDogZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5zY3JvbGxUb3AgIT09IDA7IH0sXG4gICAgICAgICAgICAgICAgcGFnZURvd246IGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gIShlbC5zY3JvbGxUb3AgPj0gZWwuc2Nyb2xsSGVpZ2h0IC0gZWwuY2xpZW50SGVpZ2h0KTsgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIGlmIChhY3RpdmVFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1jb250ZW50JykgJiZcbiAgICAgICAgICAgICAgICBhY3RpdmVFbGVtZW50LmlzRXF1YWxOb2RlKHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdEVsZW1lbnRDaGlsZCkgJiYgWydwYWdlVXAnLCAncGFnZURvd24nXS5pbmRleE9mKGFjdGlvbikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhZ2VbYWN0aW9uXSh0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLnVwZGF0ZUV4dGVybmFsTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFnZXJPYmouZW5hYmxlRXh0ZXJuYWxNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlck9iai5lbmFibGVFeHRlcm5hbE1lc3NhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZXh0ZXJuYWxNZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUuYXBwZW5kVG9FbGVtZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldEdyaWRQYWdlcih0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5wYWdlck9iai5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5lbmFibGVBZnRlclJlbmRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpICYmIGUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZFRvRWxlbWVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycyA9IHtcbiAgICAgICAgICAgICAgICBsb2FkOiB0aGlzLnJlbmRlcixcbiAgICAgICAgICAgICAgICBlbmQ6IHRoaXMuYXBwZW5kVG9FbGVtZW50LFxuICAgICAgICAgICAgICAgIHJlYWR5OiB0aGlzLmRhdGFSZWFkeSxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogdGhpcy5vbkFjdGlvbkNvbXBsZXRlLFxuICAgICAgICAgICAgICAgIHVwZGF0ZUxheW91dDogdGhpcy5lbmFibGVBZnRlclJlbmRlcixcbiAgICAgICAgICAgICAgICBpbmJvdW5kQ2hhbmdlOiB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLFxuICAgICAgICAgICAgICAgIGtleVByZXNzOiB0aGlzLmtleVByZXNzSGFuZGxlclxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsTG9hZCwgdGhpcy5oYW5kbGVycy5sb2FkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmhhbmRsZXJzLmVuZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmhhbmRsZXJzLnJlYWR5LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5wYWdlQ29tcGxldGUsIHRoaXMuaGFuZGxlcnMuY29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmhhbmRsZXJzLnVwZGF0ZUxheW91dCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5oYW5kbGVycy5pbmJvdW5kQ2hhbmdlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5rZXlQcmVzc2VkLCB0aGlzLmhhbmRsZXJzLmtleVByZXNzLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5pdGlhbExvYWQsIHRoaXMuaGFuZGxlcnMubG9hZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaGFuZGxlcnMuZW5kKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YVJlYWR5LCB0aGlzLmhhbmRsZXJzLnJlYWR5KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucGFnZUNvbXBsZXRlLCB0aGlzLmhhbmRsZXJzLmNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuaGFuZGxlcnMudXBkYXRlTGF5b3V0KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5oYW5kbGVycy5pbmJvdW5kQ2hhbmdlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5oYW5kbGVycy5rZXlQcmVzcyk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2UucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBhZ2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlBhZ2UgPSBQYWdlO1xuICAgIHZhciBrZXlBY3Rpb25zID0ge1xuICAgICAgICBwYWdlVXA6ICcuZS1wcmV2JyxcbiAgICAgICAgcGFnZURvd246ICcuZS1uZXh0JyxcbiAgICAgICAgY3RybEFsdFBhZ2VEb3duOiAnLmUtbGFzdCcsXG4gICAgICAgIGN0cmxBbHRQYWdlVXA6ICcuZS1maXJzdCcsXG4gICAgICAgIGFsdFBhZ2VVcDogJy5lLXBwJyxcbiAgICAgICAgYWx0UGFnZURvd246ICcuZS1ucCdcbiAgICB9O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcGFnZS5qc1xuLy8gbW9kdWxlIGlkID0gNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vbnVtZXJpYy1jb250YWluZXJcIiwgXCIuL3BhZ2VyLW1lc3NhZ2VcIiwgXCIuLi9ncmlkL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIG51bWVyaWNfY29udGFpbmVyXzEsIHBhZ2VyX21lc3NhZ2VfMSwgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQYWdlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhQYWdlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUGFnZXIob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmRlZmF1bHRDb25zdGFudHMgPSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2VJbmZvOiAnezB9IG9mIHsxfSBwYWdlcycsXG4gICAgICAgICAgICAgICAgdG90YWxJdGVtc0luZm86ICcoezB9IGl0ZW1zKScsXG4gICAgICAgICAgICAgICAgZmlyc3RQYWdlVG9vbHRpcDogJ0dvIHRvIGZpcnN0IHBhZ2UnLFxuICAgICAgICAgICAgICAgIGxhc3RQYWdlVG9vbHRpcDogJ0dvIHRvIGxhc3QgcGFnZScsXG4gICAgICAgICAgICAgICAgbmV4dFBhZ2VUb29sdGlwOiAnR28gdG8gbmV4dCBwYWdlJyxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1BhZ2VUb29sdGlwOiAnR28gdG8gcHJldmlvdXMgcGFnZScsXG4gICAgICAgICAgICAgICAgbmV4dFBhZ2VyVG9vbHRpcDogJ0dvIHRvIG5leHQgcGFnZXInLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUGFnZXJUb29sdGlwOiAnR28gdG8gcHJldmlvdXMgcGFnZXInLFxuICAgICAgICAgICAgICAgIHBhZ2VyRHJvcERvd246ICdJdGVtcyBwZXIgcGFnZSdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5jb250YWluZXJNb2R1bGUgPSBuZXcgbnVtZXJpY19jb250YWluZXJfMS5OdW1lcmljQ29udGFpbmVyKF90aGlzKTtcbiAgICAgICAgICAgIF90aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZSA9IG5ldyBwYWdlcl9tZXNzYWdlXzEuUGFnZXJNZXNzYWdlKF90aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVxdWlyZWRNb2R1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUV4dGVybmFsTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ2V4dGVybmFsTWVzc2FnZScsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2twYWdlc2l6ZXMoKSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ3BhZ2VyZHJvcGRvd24nLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVzO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyVGVtcGxhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdExvY2FsaXphdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUlRMKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbFJlY29yZHNDb3VudCA9IHRoaXMudG90YWxSZWNvcmRzQ291bnQgfHwgMDtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckZpcnN0UHJldkRpdkZvckRldmljZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVBhZ2VyTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJOZXh0TGFzdERpdkZvckRldmljZSgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrcGFnZXNpemVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlcmRyb3Bkb3duTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFyaWFMYWJlbCgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUV4dGVybmFsTWVzc2FnZSAmJiB0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjcmVhdGVkJywgeyAnY3VycmVudFBhZ2UnOiB0aGlzLmN1cnJlbnRQYWdlLCAndG90YWxSZWNvcmRzQ291bnQnOiB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5RW50aXR5ID0gWydjdXJyZW50UGFnZScsICdwYWdlU2l6ZSddO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KGtleUVudGl0eSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdwYWdlcic7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFnZUNvdW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlZnJlc2hOdW1lcmljTGlua3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjdXJyZW50UGFnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0dvVG9QYWdlKG5ld1Byb3AuY3VycmVudFBhZ2UsIG9sZFByb3AuY3VycmVudFBhZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZUNoYW5nZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlU2l6ZSc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvdGFsUmVjb3Jkc0NvdW50JzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3VzdG9tVGV4dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlU2l6ZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2twYWdlc2l6ZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJkcm9wZG93bk1vZHVsZS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlcmRyb3Bkb3duTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGVtcGxhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuID0gdGhpcy5jb21waWxlKHRoaXMudGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbG9jYWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdExvY2FsaXphdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlRXh0ZXJuYWxNZXNzYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUV4dGVybmFsTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4dGVybmFsTWVzc2FnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHRlcm5hbE1lc3NhZ2VNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVybmFsTWVzc2FnZU1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUlRMKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUGFnZXJNZXNzYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVBhZ2VyTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLnNob3dNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VyTWVzc2FnZU1vZHVsZS5oaWRlTWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ2V0TG9jYWxpemVkTGFiZWwgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVPYmouZ2V0Q29uc3RhbnQoa2V5KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmdvVG9QYWdlID0gZnVuY3Rpb24gKHBhZ2VObykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tHb1RvUGFnZShwYWdlTm8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2VObztcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5jaGVja3BhZ2VzaXplcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VTaXplcyA9PT0gdHJ1ZSB8fCB0aGlzLnBhZ2VTaXplcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmNoZWNrR29Ub1BhZ2UgPSBmdW5jdGlvbiAobmV3UGFnZU5vLCBvbGRQYWdlTm8pIHtcbiAgICAgICAgICAgIGlmIChuZXdQYWdlTm8gIT09IHRoaXMuY3VycmVudFBhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzUGFnZU5vID0gdGhpcy5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChvbGRQYWdlTm8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1BhZ2VObyA9IG9sZFBhZ2VObztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZpb3VzUGFnZU5vICE9PSBuZXdQYWdlTm8gJiYgKG5ld1BhZ2VObyA+PSAxICYmIG5ld1BhZ2VObyA8PSB0aGlzLnRvdGFsUGFnZXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5jdXJyZW50UGFnZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVRdWVyeVN0cmluZykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUXVlcnlTdHJpbmcodGhpcy5jdXJyZW50UGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHsgY3VycmVudFBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsIGNhbmNlbDogZmFsc2UgfTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignY2xpY2snLCBhcmdzKTtcbiAgICAgICAgICAgIGlmICghYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLnBhZ2VyVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2UtcGFnZXJ0ZW1wbGF0ZScpO1xuICAgICAgICAgICAgdGhpcy5jb21waWxlKHRoaXMudGVtcGxhdGUpO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLCBwYWdlQ291bnQ6IHRoaXMucGFnZUNvdW50LFxuICAgICAgICAgICAgICAgIHRvdGFsUmVjb3Jkc0NvdW50OiB0aGlzLnRvdGFsUmVjb3Jkc0NvdW50LCB0b3RhbFBhZ2VzOiB0aGlzLnRvdGFsUGFnZXNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmdldFBhZ2VyVGVtcGxhdGUoKShkYXRhKTtcbiAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbih0aGlzLmVsZW1lbnQsIHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS51cGRhdGVUb3RhbFBhZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50b3RhbFBhZ2VzID0gKHRoaXMudG90YWxSZWNvcmRzQ291bnQgJSB0aGlzLnBhZ2VTaXplID09PSAwKSA/ICh0aGlzLnRvdGFsUmVjb3Jkc0NvdW50IC8gdGhpcy5wYWdlU2l6ZSkgOlxuICAgICAgICAgICAgICAgIChwYXJzZUludCgodGhpcy50b3RhbFJlY29yZHNDb3VudCAvIHRoaXMucGFnZVNpemUpLnRvU3RyaW5nKCksIDEwKSArIDEpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuZ2V0UGFnZXJUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlRm47XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5jb21waWxlID0gZnVuY3Rpb24gKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0ZW1wbGF0ZSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm4gPSBlajJfYmFzZV8yLmNvbXBpbGUoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZSkuaW5uZXJIVE1MLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUZuID0gZWoyX2Jhc2VfMi5jb21waWxlKHRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVG90YWxQYWdlcygpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSVEwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1vZHVsZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUGFnZXJNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZXJNZXNzYWdlTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRXh0ZXJuYWxNZXNzYWdlICYmIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZXJuYWxNZXNzYWdlTW9kdWxlLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS51cGRhdGVSVEwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ydGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXJ0bCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUuaW5pdExvY2FsaXphdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxlT2JqID0gbmV3IGVqMl9iYXNlXzEuTDEwbih0aGlzLmdldE1vZHVsZU5hbWUoKSwgdGhpcy5kZWZhdWx0Q29uc3RhbnRzLCB0aGlzLmxvY2FsZSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS51cGRhdGVRdWVyeVN0cmluZyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHVwZGF0ZWRVcmwgPSB0aGlzLmdldFVwZGF0ZWRVUkwod2luZG93LmxvY2F0aW9uLmhyZWYsICdwYWdlJywgdmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoeyBwYXRoOiB1cGRhdGVkVXJsIH0sICcnLCB1cGRhdGVkVXJsKTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXIucHJvdG90eXBlLmdldFVwZGF0ZWRVUkwgPSBmdW5jdGlvbiAodXJpLCBrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgcmVneCA9IG5ldyBSZWdFeHAoJyhbP3wmXSknICsga2V5ICsgJz0uKj8oJnwjfCQpJywgJ2knKTtcbiAgICAgICAgICAgIGlmICh1cmkubWF0Y2gocmVneCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJpLnJlcGxhY2UocmVneCwgJyQxJyArIGtleSArICc9JyArIHZhbHVlICsgJyQyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFzaCA9ICcnO1xuICAgICAgICAgICAgICAgIGlmICh1cmkuaW5kZXhPZignIycpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBoYXNoID0gdXJpLnJlcGxhY2UoLy4qIy8sICcjJyk7XG4gICAgICAgICAgICAgICAgICAgIHVyaSA9IHVyaS5yZXBsYWNlKC8jLiovLCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1cmkgKyAodXJpLmluZGV4T2YoJz8nKSAhPT0gLTEgPyAnJicgOiAnPycpICsga2V5ICsgJz0nICsgdmFsdWUgKyBoYXNoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlci5wcm90b3R5cGUucmVuZGVyRmlyc3RQcmV2RGl2Rm9yRGV2aWNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbWZpcnN0IGUtaWNvbnMgZS1pY29uLWZpcnN0JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0aXRsZTogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgnZmlyc3RQYWdlVG9vbHRpcCcpLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1tcHJldiBlLWljb25zIGUtaWNvbi1wcmV2JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0aXRsZTogdGhpcy5nZXRMb2NhbGl6ZWRMYWJlbCgncHJldmlvdXNQYWdlVG9vbHRpcCcpLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5yZW5kZXJOZXh0TGFzdERpdkZvckRldmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW1uZXh0IGUtaWNvbnMgZS1pY29uLW5leHQnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRpdGxlOiB0aGlzLmdldExvY2FsaXplZExhYmVsKCduZXh0UGFnZVRvb2x0aXAnKSwgdGFiaW5kZXg6ICctMScgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbWxhc3QgZS1pY29ucyBlLWljb24tbGFzdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGl0bGU6IHRoaXMuZ2V0TG9jYWxpemVkTGFiZWwoJ2xhc3RQYWdlVG9vbHRpcCcpLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyLnByb3RvdHlwZS5hZGRBcmlhTGFiZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IFsnLmUtbWZpcnN0JywgJy5lLW1wcmV2JywgJy5lLW1uZXh0JywgJy5lLW1sYXN0J107XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQucXVlcnlTZWxlY3Rvcih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUGFnZXI7XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJlbmFibGVRdWVyeVN0cmluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJlbmFibGVFeHRlcm5hbE1lc3NhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJlbmFibGVQYWdlck1lc3NhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgxMilcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwicGFnZVNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgxMClcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwicGFnZUNvdW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoMSlcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiY3VycmVudFBhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eSgpXG4gICAgXSwgUGFnZXIucHJvdG90eXBlLCBcInRvdGFsUmVjb3Jkc0NvdW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJleHRlcm5hbE1lc3NhZ2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwicGFnZVNpemVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuUHJvcGVydHkoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LlByb3BlcnR5KCcnKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjdXN0b21UZXh0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjbGlja1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV80LkV2ZW50KClcbiAgICBdLCBQYWdlci5wcm90b3R5cGUsIFwiZHJvcERvd25DaGFuZ2VkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzQuRXZlbnQoKVxuICAgIF0sIFBhZ2VyLnByb3RvdHlwZSwgXCJjcmVhdGVkXCIsIHZvaWQgMCk7XG4gICAgUGFnZXIgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNC5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBQYWdlcik7XG4gICAgZXhwb3J0cy5QYWdlciA9IFBhZ2VyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9wYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTnVtZXJpY0NvbnRhaW5lciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIE51bWVyaWNDb250YWluZXIocGFnZXJNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUgPSBwYWdlck1vZHVsZTtcbiAgICAgICAgfVxuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudCA9IHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTnVtZXJpY0NvbnRhaW5lcigpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoTnVtZXJpY0xpbmtzKCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUudXBkYXRlVG90YWxQYWdlcygpO1xuICAgICAgICAgICAgaWYgKHRoaXMubGlua3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaW5rc0h0bWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlZnJlc2hOdW1lcmljTGlua3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbGluaztcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgZGl2ID0gcGFnZXJPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1udW1lcmljY29udGFpbmVyJyk7XG4gICAgICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHBhZ2VyT2JqLnBhZ2VDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGluayA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1saW5rIGUtbnVtZXJpY2l0ZW0gZS1zcGFjaW5nIGUtcGFnZXItZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHJvbGU6ICdsaW5rJywgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ0dvdG8gUGFnZSAnICsgaSB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlID09PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGxpbmssIFsnZS1jdXJyZW50aXRlbScsICdlLWFjdGl2ZSddLCBbJ2UtcGFnZXItZGVmYXVsdCddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgICAgICAgIHRoaXMubGlua3MgPSBbXS5zbGljZS5jYWxsKGRpdi5jaGlsZE5vZGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnBhZ2VyRWxlbWVudCwgJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljQ29udGFpbmVyLnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYWdlckVsZW1lbnQsICdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlck51bWVyaWNDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLXBhZ2VyY29udGFpbmVyJywgYXR0cnM6IHsgJ3JvbGUnOiAnbmF2aWdhdGlvbicgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZpcnN0TlByZXYodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUHJldlBhZ2VyU2V0KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtbnVtZXJpY2NvbnRhaW5lcicgfSkpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJOZXh0UGFnZXJTZXQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTmV4dE5MYXN0KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyRmlyc3ROUHJldiA9IGZ1bmN0aW9uIChwYWdlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5maXJzdCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtZmlyc3QgZS1pY29ucyBlLWljb24tZmlyc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdmaXJzdFBhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgnZmlyc3RQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wcmV2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1wcmV2IGUtaWNvbnMgZS1pY29uLXByZXYnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5wYWdlck1vZHVsZS5nZXRMb2NhbGl6ZWRMYWJlbCgncHJldmlvdXNQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5hcHBlbmQoW3RoaXMuZmlyc3QsIHRoaXMucHJldl0sIHBhZ2VyQ29udGFpbmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyUHJldlBhZ2VyU2V0ID0gZnVuY3Rpb24gKHBhZ2VyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLlBQID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdhJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtbGluayBlLXBwIGUtc3BhY2luZycsIGlubmVySFRNTDogJy4uLicsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ3ByZXZpb3VzUGFnZXJUb29sdGlwJyksIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdwcmV2aW91c1BhZ2VyVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcGFnZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5QUCk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnJlbmRlck5leHRQYWdlclNldCA9IGZ1bmN0aW9uIChwYWdlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5OUCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWxpbmsgZS1ucCBlLXNwYWNpbmcnLFxuICAgICAgICAgICAgICAgIGlubmVySFRNTDogJy4uLicsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCduZXh0UGFnZXJUb29sdGlwJyksIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCduZXh0UGFnZXJUb29sdGlwJyksXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAnLTEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwYWdlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLk5QKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUucmVuZGVyTmV4dE5MYXN0ID0gZnVuY3Rpb24gKHBhZ2VyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLm5leHQgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLW5leHQgZS1pY29ucyBlLWljb24tbmV4dCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ25leHRQYWdlVG9vbHRpcCcpLFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5sYXN0ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1sYXN0IGUtaWNvbnMgZS1pY29uLWxhc3QnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdsYXN0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnBhZ2VyTW9kdWxlLmdldExvY2FsaXplZExhYmVsKCdsYXN0UGFnZVRvb2x0aXAnKSxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6ICctMSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMuYXBwZW5kKFt0aGlzLm5leHQsIHRoaXMubGFzdF0sIHBhZ2VyQ29udGFpbmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBwYWdlck9iai5wcmV2aW91c1BhZ2VObyA9IHBhZ2VyT2JqLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRpc2FibGUnKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdpbmRleCcpKSkge1xuICAgICAgICAgICAgICAgIHBhZ2VyT2JqLmN1cnJlbnRQYWdlID0gcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnaW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgICAgIHBhZ2VyT2JqLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZUxpbmtzSHRtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB2YXIgY3VycmVudFBhZ2VTZXQ7XG4gICAgICAgICAgICB2YXIgcGFnZU5vO1xuICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UgPSBwYWdlck9iai50b3RhbFBhZ2VzID09PSAxID8gMSA6IHBhZ2VyT2JqLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgaWYgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlID4gcGFnZXJPYmoudG90YWxQYWdlcyAmJiBwYWdlck9iai50b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UgPSBwYWdlck9iai50b3RhbFBhZ2VzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFBhZ2VTZXQgPSBwYXJzZUludCgocGFnZXJPYmouY3VycmVudFBhZ2UgLyBwYWdlck9iai5wYWdlQ291bnQpLnRvU3RyaW5nKCksIDEwKTtcbiAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSAlIHBhZ2VyT2JqLnBhZ2VDb3VudCA9PT0gMCAmJiBjdXJyZW50UGFnZVNldCA+IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZVNldCA9IGN1cnJlbnRQYWdlU2V0IC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFnZXJPYmoucGFnZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBwYWdlTm8gPSAoY3VycmVudFBhZ2VTZXQgKiBwYWdlck9iai5wYWdlQ291bnQpICsgMSArIGk7XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VObyA8PSBwYWdlck9iai50b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCBwYWdlTm8udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua3NbaV0uaW5uZXJIVE1MID0gIXBhZ2VyT2JqLmN1c3RvbVRleHQgPyBwYWdlTm8udG9TdHJpbmcoKSA6IHBhZ2VyT2JqLmN1c3RvbVRleHQgKyBwYWdlTm87XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSAhPT0gcGFnZU5vKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtzW2ldLmNsYXNzTGlzdC5hZGQoJ2UtcGFnZXItZGVmYXVsdCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdlLXBhZ2VyLWRlZmF1bHQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxpbmtzW2ldLCBbXSwgWydlLWN1cnJlbnRpdGVtJywgJ2UtYWN0aXZlJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maXJzdC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgJzEnKTtcbiAgICAgICAgICAgIHRoaXMubGFzdC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgcGFnZXJPYmoudG90YWxQYWdlcy50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMucHJldi5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlIC0gMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLm5leHQuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYWdlck9iai5jdXJyZW50UGFnZSArIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbWZpcnN0Jykuc2V0QXR0cmlidXRlKCdpbmRleCcsICcxJyk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbGFzdCcpLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCBwYWdlck9iai50b3RhbFBhZ2VzLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbXByZXYnKS5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgKHBhZ2VyT2JqLmN1cnJlbnRQYWdlIC0gMSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbmV4dCcpLnNldEF0dHJpYnV0ZSgnaW5kZXgnLCAocGFnZXJPYmouY3VycmVudFBhZ2UgKyAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMuUFAuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYXJzZUludCh0aGlzLmxpbmtzWzBdLmdldEF0dHJpYnV0ZSgnaW5kZXgnKSwgMTApIC0gcGFnZXJPYmoucGFnZUNvdW50KS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMuTlAuc2V0QXR0cmlidXRlKCdpbmRleCcsIChwYXJzZUludCh0aGlzLmxpbmtzW3RoaXMubGlua3MubGVuZ3RoIC0gMV0uZ2V0QXR0cmlidXRlKCdpbmRleCcpLCAxMCkgKyAxKS50b1N0cmluZygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlU3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaXJzdE5QcmV2U3R5bGVzKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByZXZQYWdlclNldFN0eWxlcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVOZXh0UGFnZXJTZXRTdHlsZXMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTmV4dE5MYXN0U3R5bGVzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5saW5rcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxpbmtzWyh0aGlzLnBhZ2VyTW9kdWxlLmN1cnJlbnRQYWdlIC0gMSkgJSB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VDb3VudF0sIFsnZS1jdXJyZW50aXRlbScsICdlLWFjdGl2ZSddLCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZUZpcnN0TlByZXZTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3RQYWdlID0gWydlLWZpcnN0cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBmaXJzdFBhZ2VEaXNhYmxlZCA9IFsnZS1maXJzdHBhZ2VkaXNhYmxlZCcsICdlLWRpc2FibGUnXTtcbiAgICAgICAgICAgIHZhciBwcmV2UGFnZSA9IFsnZS1wcmV2cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBwcmV2UGFnZURpc2FibGVkID0gWydlLXByZXZwYWdlZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ107XG4gICAgICAgICAgICBpZiAodGhpcy5wYWdlck1vZHVsZS5jdXJyZW50UGFnZSA+IDEpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnByZXYsIHByZXZQYWdlLCBwcmV2UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmZpcnN0LCBmaXJzdFBhZ2UsIGZpcnN0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tZmlyc3QnKSwgZmlyc3RQYWdlLCBmaXJzdFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbXByZXYnKSwgcHJldlBhZ2UsIHByZXZQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wcmV2LCBwcmV2UGFnZURpc2FibGVkLCBwcmV2UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5maXJzdCwgZmlyc3RQYWdlRGlzYWJsZWQsIGZpcnN0UGFnZSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbXByZXYnKSwgcHJldlBhZ2VEaXNhYmxlZCwgcHJldlBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1maXJzdCcpLCBmaXJzdFBhZ2VEaXNhYmxlZCwgZmlyc3RQYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlUHJldlBhZ2VyU2V0U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXJNb2R1bGUuY3VycmVudFBhZ2UgPiB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VDb3VudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuUFAsIFsnZS1udW1lcmljaXRlbScsICdlLXBhZ2VyLWRlZmF1bHQnXSwgWydlLW5leHRwcmV2aXRlbWRpc2FibGVkJywgJ2UtZGlzYWJsZSddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMuUFAsIFsnZS1uZXh0cHJldml0ZW1kaXNhYmxlZCcsICdlLWRpc2FibGUnXSwgWydlLW51bWVyaWNpdGVtJywgJ2UtcGFnZXItZGVmYXVsdCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTnVtZXJpY0NvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlTmV4dFBhZ2VyU2V0U3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIHZhciBmaXJzdFBhZ2UgPSB0aGlzLmxpbmtzWzBdLmlubmVySFRNTC5yZXBsYWNlKHBhZ2VyT2JqLmN1c3RvbVRleHQsICcnKTtcbiAgICAgICAgICAgIGlmICghZmlyc3RQYWdlLmxlbmd0aCB8fCAhdGhpcy5saW5rcy5sZW5ndGggfHwgKHBhcnNlSW50KGZpcnN0UGFnZSwgMTApICsgcGFnZXJPYmoucGFnZUNvdW50ID4gcGFnZXJPYmoudG90YWxQYWdlcykpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLk5QLCBbJ2UtbmV4dHByZXZpdGVtZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ10sIFsnZS1udW1lcmljaXRlbScsICdlLXBhZ2VyLWRlZmF1bHQnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLk5QLCBbJ2UtbnVtZXJpY2l0ZW0nLCAnZS1wYWdlci1kZWZhdWx0J10sIFsnZS1uZXh0cHJldml0ZW1kaXNhYmxlZCcsICdlLWRpc2FibGUnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZU5leHROTGFzdFN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsYXN0UGFnZSA9IFsnZS1sYXN0cGFnZScsICdlLXBhZ2VyLWRlZmF1bHQnXTtcbiAgICAgICAgICAgIHZhciBsYXN0UGFnZURpc2FibGVkID0gWydlLWxhc3RwYWdlZGlzYWJsZWQnLCAnZS1kaXNhYmxlJ107XG4gICAgICAgICAgICB2YXIgbmV4dFBhZ2UgPSBbJ2UtbmV4dHBhZ2UnLCAnZS1wYWdlci1kZWZhdWx0J107XG4gICAgICAgICAgICB2YXIgbmV4dFBhZ2VEaXNhYmxlZCA9IFsnZS1uZXh0cGFnZWRpc2FibGVkJywgJ2UtZGlzYWJsZSddO1xuICAgICAgICAgICAgdmFyIHBhZ2VyT2JqID0gdGhpcy5wYWdlck1vZHVsZTtcbiAgICAgICAgICAgIGlmIChwYWdlck9iai5jdXJyZW50UGFnZSA9PT0gcGFnZXJPYmoudG90YWxQYWdlcyB8fCBwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubGFzdCwgbGFzdFBhZ2VEaXNhYmxlZCwgbGFzdFBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMubmV4dCwgbmV4dFBhZ2VEaXNhYmxlZCwgbmV4dFBhZ2UpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KHRoaXMucGFnZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLW1sYXN0JyksIGxhc3RQYWdlRGlzYWJsZWQsIGxhc3RQYWdlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbmV4dCcpLCBuZXh0UGFnZURpc2FibGVkLCBuZXh0UGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLmxhc3QsIGxhc3RQYWdlLCBsYXN0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLm5leHQsIG5leHRQYWdlLCBuZXh0UGFnZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8zLmNsYXNzTGlzdCh0aGlzLnBhZ2VyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1tbGFzdCcpLCBsYXN0UGFnZSwgbGFzdFBhZ2VEaXNhYmxlZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QodGhpcy5wYWdlckVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtbW5leHQnKSwgbmV4dFBhZ2UsIG5leHRQYWdlRGlzYWJsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTnVtZXJpY0NvbnRhaW5lcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuTnVtZXJpY0NvbnRhaW5lciA9IE51bWVyaWNDb250YWluZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BhZ2VyL251bWVyaWMtY29udGFpbmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBhZ2VyTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFBhZ2VyTWVzc2FnZShwYWdlck1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZSA9IHBhZ2VyTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXBhcmVudG1zZ2JhcicsIGF0dHJzOiB7ICdhcmlhLWxhYmVsJzogJ1BhZ2VyIEluZm9ybWF0aW9uJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdlLXBhZ2Vub21zZycsIHN0eWxlczogJ3RleHRhbGlnbjpyaWdodCcgfSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VDb3VudE1zZ0VsZW0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtcGFnZWNvdW50bXNnJywgc3R5bGVzOiAndGV4dGFsaWduOnJpZ2h0JyB9KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuYXBwZW5kKFt0aGlzLnBhZ2VOb01zZ0VsZW0sIHRoaXMucGFnZUNvdW50TXNnRWxlbV0sIGRpdik7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZXJPYmogPSB0aGlzLnBhZ2VyTW9kdWxlO1xuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXQocGFnZXJPYmouZ2V0TG9jYWxpemVkTGFiZWwoJ2N1cnJlbnRQYWdlSW5mbycpLCBbcGFnZXJPYmoudG90YWxSZWNvcmRzQ291bnQgPT09IDAgPyAwIDpcbiAgICAgICAgICAgICAgICAgICAgcGFnZXJPYmouY3VycmVudFBhZ2UsIHBhZ2VyT2JqLnRvdGFsUGFnZXMgfHwgMF0pICsgJyAnO1xuICAgICAgICAgICAgdGhpcy5wYWdlQ291bnRNc2dFbGVtLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXQocGFnZXJPYmouZ2V0TG9jYWxpemVkTGFiZWwoJ3RvdGFsSXRlbXNJbmZvJyksIFtwYWdlck9iai50b3RhbFJlY29yZHNDb3VudCB8fCAwXSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VOb01zZ0VsZW0ucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0aGlzLnBhZ2VOb01zZ0VsZW0udGV4dENvbnRlbnQgKyB0aGlzLnBhZ2VDb3VudE1zZ0VsZW0udGV4dENvbnRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLmhpZGVNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZU5vTXNnRWxlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZU5vTXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFnZUNvdW50TXNnRWxlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZUNvdW50TXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQYWdlck1lc3NhZ2UucHJvdG90eXBlLnNob3dNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhZ2VOb01zZ0VsZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYWdlTm9Nc2dFbGVtLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIHRoaXMucGFnZUNvdW50TXNnRWxlbS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyTWVzc2FnZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJNZXNzYWdlLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAoc3RyLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgcmVneDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlZ3ggPSBuZXcgUmVnRXhwKCdcXFxceycgKyAoaSkgKyAnXFxcXH0nLCAnZ20nKTtcbiAgICAgICAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShyZWd4LCBhcmdzW2ldLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBhZ2VyTWVzc2FnZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUGFnZXJNZXNzYWdlID0gUGFnZXJNZXNzYWdlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wYWdlci9wYWdlci1tZXNzYWdlLmpzXG4vLyBtb2R1bGUgaWQgPSA1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kcm9wZG93bnNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfZHJvcGRvd25zXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFBhZ2VyRHJvcERvd24gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQYWdlckRyb3BEb3duKHBhZ2VyTW9kdWxlKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyTW9kdWxlID0gcGFnZXJNb2R1bGU7XG4gICAgICAgIH1cbiAgICAgICAgUGFnZXJEcm9wRG93bi5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncGFnZXJkcm9wZG93bic7XG4gICAgICAgIH07XG4gICAgICAgIFBhZ2VyRHJvcERvd24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdlck9iaiA9IHRoaXMucGFnZXJNb2R1bGU7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRHJvcERvd25EaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlc2l6ZXMnIH0pO1xuICAgICAgICAgICAgdmFyIGRyb3BEb3duRGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtcGFnZXJkcm9wZG93bicgfSk7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdFRleHREaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlcmNvbnN0YW50JyB9KTtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IGF0dHJzOiB7IHR5cGU6ICd0ZXh0JywgdGFiaW5kZXg6ICcxJyB9IH0pO1xuICAgICAgICAgICAgdGhpcy5wYWdlckNvbnMgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2UtY29uc3RhbnQnLCBpbm5lckhUTUw6IHRoaXMucGFnZXJNb2R1bGUuZ2V0TG9jYWxpemVkTGFiZWwoJ3BhZ2VyRHJvcERvd24nKSB9KTtcbiAgICAgICAgICAgIGRyb3BEb3duRGl2LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIGRlZmF1bHRUZXh0RGl2LmFwcGVuZENoaWxkKHRoaXMucGFnZXJDb25zKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJEcm9wRG93bkRpdi5hcHBlbmRDaGlsZChkcm9wRG93bkRpdik7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyRHJvcERvd25EaXYuYXBwZW5kQ2hpbGQoZGVmYXVsdFRleHREaXYpO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMucGFnZXJEcm9wRG93bkRpdik7XG4gICAgICAgICAgICB2YXIgcGFnZVNpemVzTW9kdWxlID0gdGhpcy5wYWdlck1vZHVsZS5wYWdlU2l6ZXM7XG4gICAgICAgICAgICB2YXIgcGFnZVNpemVzQXJyYXkgPSAocGFnZVNpemVzTW9kdWxlLmxlbmd0aCA/IHBhZ2VTaXplc01vZHVsZSA6IFs1LCAxMCwgMTIsIDIwXSk7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdFZhbHVlID0gKHBhZ2VTaXplc0FycmF5KS5pbmRleE9mKHRoaXMucGFnZXJNb2R1bGUucGFnZVNpemUpID4gLTEgPyB0aGlzLnBhZ2VyTW9kdWxlLnBhZ2VTaXplIDogcGFnZVNpemVzQXJyYXlbMF07XG4gICAgICAgICAgICB0aGlzLmRyb3BEb3duTGlzdE9iamVjdCA9IG5ldyBlajJfZHJvcGRvd25zXzEuRHJvcERvd25MaXN0KHtcbiAgICAgICAgICAgICAgICBkYXRhU291cmNlOiBwYWdlU2l6ZXNBcnJheSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZGVmYXVsdFZhbHVlLFxuICAgICAgICAgICAgICAgIGNoYW5nZTogdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZHJvcERvd25MaXN0T2JqZWN0LmFwcGVuZFRvKGlucHV0KTtcbiAgICAgICAgICAgIHBhZ2VyT2JqLnBhZ2VTaXplID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgcGFnZXJPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgICAgIHBhZ2VyT2JqLnRyaWdnZXIoJ2Ryb3BEb3duQ2hhbmdlZCcsIHsgcGFnZVNpemU6IGRlZmF1bHRWYWx1ZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJEcm9wRG93bi5wcm90b3R5cGUub25DaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5wYWdlU2l6ZSA9IHRoaXMuZHJvcERvd25MaXN0T2JqZWN0LnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS5kYXRhQmluZCgpO1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZS50cmlnZ2VyKCdkcm9wRG93bkNoYW5nZWQnLCB7IHBhZ2VTaXplOiB0aGlzLmRyb3BEb3duTGlzdE9iamVjdC52YWx1ZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUGFnZXJEcm9wRG93bi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kcm9wRG93bkxpc3RPYmplY3QgJiYgIXRoaXMuZHJvcERvd25MaXN0T2JqZWN0LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wRG93bkxpc3RPYmplY3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMucGFnZXJEcm9wRG93bkRpdik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQYWdlckRyb3BEb3duO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5QYWdlckRyb3BEb3duID0gUGFnZXJEcm9wRG93bjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvcGFnZXItZHJvcGRvd24uanNcbi8vIG1vZHVsZSBpZCA9IDUyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81M19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWRyb3Bkb3duc1wiXG4vLyBtb2R1bGUgaWQgPSA1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEV4dGVybmFsTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEV4dGVybmFsTWVzc2FnZShwYWdlck1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy5wYWdlck1vZHVsZSA9IHBhZ2VyTW9kdWxlO1xuICAgICAgICB9XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnZXh0ZXJuYWxNZXNzYWdlJztcbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1wYWdlcmV4dGVybmFsbXNnJywgYXR0cnM6IHsgJ2FyaWEtbGFiZWwnOiAnUGFnZXIgZXh0ZXJuYWwgbWVzc2FnZScgfSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJNb2R1bGUuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VyTW9kdWxlLmV4dGVybmFsTWVzc2FnZSAmJiB0aGlzLnBhZ2VyTW9kdWxlLmV4dGVybmFsTWVzc2FnZS50b1N0cmluZygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5wYWdlck1vZHVsZS5leHRlcm5hbE1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVNZXNzYWdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuaGlkZU1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfTtcbiAgICAgICAgRXh0ZXJuYWxNZXNzYWdlLnByb3RvdHlwZS5zaG93TWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIH07XG4gICAgICAgIEV4dGVybmFsTWVzc2FnZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFeHRlcm5hbE1lc3NhZ2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkV4dGVybmFsTWVzc2FnZSA9IEV4dGVybmFsTWVzc2FnZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvZXh0ZXJuYWwtbWVzc2FnZS5qc1xuLy8gbW9kdWxlIGlkID0gNTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCIsIFwiLi4vbW9kZWxzL2NlbGxcIiwgXCIuLi9tb2RlbHMvcm93XCIsIFwiLi4vcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCB1dGlsXzEsIGVqMl9iYXNlXzMsIGVqMl9kYXRhXzEsIGV2ZW50cywgZW51bV8xLCByb3dfcmVuZGVyZXJfMSwgY2VsbF8xLCByb3dfMSwgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRmlsdGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRmlsdGVyKHBhcmVudCwgZmlsdGVyU2V0dGluZ3MsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnByZWRpY2F0ZSA9ICdhbmQnO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJPcGVyYXRvcnMgPSB7XG4gICAgICAgICAgICAgICAgY29udGFpbnM6ICdjb250YWlucycsIGVuZHNXaXRoOiAnZW5kc3dpdGgnLCBlcXVhbDogJ2VxdWFsJywgZ3JlYXRlclRoYW46ICdncmVhdGVydGhhbicsIGdyZWF0ZXJUaGFuT3JFcXVhbDogJ2dyZWF0ZXJ0aGFub3JlcXVhbCcsXG4gICAgICAgICAgICAgICAgbGVzc1RoYW46ICdsZXNzdGhhbicsIGxlc3NUaGFuT3JFcXVhbDogJ2xlc3N0aGFub3JlcXVhbCcsIG5vdEVxdWFsOiAnbm90ZXF1YWwnLCBzdGFydHNXaXRoOiAnc3RhcnRzd2l0aCdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MgPSBmaWx0ZXJTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChnT2JqLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd1JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIGVudW1fMS5DZWxsVHlwZS5GaWx0ZXIpO1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxyZW5kZXIgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2NlbGxSZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgICAgICBjZWxscmVuZGVyLmFkZENlbGxSZW5kZXJlcihlbnVtXzEuQ2VsbFR5cGUuRmlsdGVyLCBuZXcgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMS5GaWx0ZXJDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVGb3JtYXR0ZXIgPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ3ZhbHVlRm9ybWF0dGVyJyk7XG4gICAgICAgICAgICAgICAgcm93UmVuZGVyZXIuZWxlbWVudCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndHInLCB7IGNsYXNzTmFtZTogJ2UtZmlsdGVyYmFyJyB9KTtcbiAgICAgICAgICAgICAgICByb3cgPSB0aGlzLmdlbmVyYXRlUm93KCk7XG4gICAgICAgICAgICAgICAgcm93LmRhdGEgPSB0aGlzLnZhbHVlcztcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSByb3dSZW5kZXJlci5yZW5kZXIocm93LCBnT2JqLmdldENvbHVtbnMoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3IoJ3RoZWFkJykuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB2YXIgZGV0YWlsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWRldGFpbGhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWlsKSB7XG4gICAgICAgICAgICAgICAgICAgIGRldGFpbC5jbGFzc05hbWUgPSAnZS1maWx0ZXJiYXJjZWxsIGUtbWFzdGVyY2VsbCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdlbmVyYXRlUm93ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIHJvdyA9IG5ldyByb3dfMS5Sb3cob3B0aW9ucyk7XG4gICAgICAgICAgICByb3cuY2VsbHMgPSB0aGlzLmdlbmVyYXRlQ2VsbHMoKTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZ2VuZXJhdGVDZWxscyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjZWxscyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMCwgbGVuID0gdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgYyA8IGxlbjsgYysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLnB1c2godGhpcy5nZW5lcmF0ZUNlbGwoe30sIGVudW1fMS5DZWxsVHlwZS5IZWFkZXJJbmRlbnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZGV0YWlsVGVtcGxhdGUgfHwgdGhpcy5wYXJlbnQuY2hpbGRHcmlkKSB7XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbCh7fSwgZW51bV8xLkNlbGxUeXBlLkRldGFpbEhlYWRlcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZHVtbXkgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbChkdW1teSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNlbGxzO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdlbmVyYXRlQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW4sIGNlbGxUeXBlKSB7XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogY29sdW1uLnZpc2libGUsXG4gICAgICAgICAgICAgICAgJ2lzRGF0YUNlbGwnOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAncm93SWQnOiAnJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogY29sdW1uLFxuICAgICAgICAgICAgICAgICdjZWxsVHlwZSc6IGNlbGxUeXBlID8gY2VsbFR5cGUgOiBlbnVtXzEuQ2VsbFR5cGUuRmlsdGVyLFxuICAgICAgICAgICAgICAgICdhdHRyaWJ1dGVzJzogeyB0aXRsZTogdGhpcy5sMTBuLmdldENvbnN0YW50KCdGaWx0ZXJiYXJUaXRsZScpIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNlbGxfMS5DZWxsKG9wdCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMuZmllbGROYW1lLCBvcGVyYXRvcjogdGhpcy5vcGVyYXRvciwgdmFsdWU6IHRoaXMudmFsdWUsIHByZWRpY2F0ZTogdGhpcy5wcmVkaWNhdGUsXG4gICAgICAgICAgICAgICAgbWF0Y2hDYXNlOiB0aGlzLm1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWU6IHt9LCBhY3R1YWxPcGVyYXRvcjoge31cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldEZpbHRlcmVkQ29sc0luZGV4QnlGaWVsZCh0aGlzLmZpZWxkTmFtZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1uc1tpbmRleF0gPSB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMucHVzaCh0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5nZXRGaWx0ZXJlZENvbHNJbmRleEJ5RmllbGQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSAhdGhpcy5pc1JlbW92ZSA/IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RmlsdGVyT2JqZWN0OiB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QsIGN1cnJlbnRGaWx0ZXJpbmdDb2x1bW46IHRoaXMuY29sdW1uLmZpZWxkLFxuICAgICAgICAgICAgICAgIGNvbHVtbnM6IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucywgcmVxdWVzdFR5cGU6ICdmaWx0ZXJpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdmaWx0ZXJpbmcnLCB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMi5leHRlbmQoZSwgYXJncykpO1xuICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLCAnbW91c2Vkb3duJywgdGhpcy51cGRhdGVTcGFuQ2xhc3MsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmVsZW1lbnQsICdmb2N1c2luJywgdGhpcy51cGRhdGVTcGFuQ2xhc3MsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKHRoaXMucGFyZW50LmdldEhlYWRlckNvbnRlbnQoKSwgJ2tleXVwJywgdGhpcy5rZXlVcEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVuV2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5lbGVtZW50LCAnZm9jdXNpbicsIHRoaXMudXBkYXRlU3BhbkNsYXNzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCksICdtb3VzZWRvd24nLCB0aGlzLnVwZGF0ZVNwYW5DbGFzcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLCAna2V5dXAnLCB0aGlzLmtleVVwSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuaW5pdGlhbEVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29udGVudFJlYWR5LCB0aGlzLmluaXRpYWxFbmQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5sZW5ndGggJiYgdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBnT2JqLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyQnlDb2x1bW4oY29sLmZpZWxkLCBjb2wub3BlcmF0b3IsIGNvbC52YWx1ZSwgY29sLnByZWRpY2F0ZSwgY29sLm1hdGNoQ2FzZSwgY29sLmFjdHVhbEZpbHRlclZhbHVlLCBjb2wuYWN0dWFsT3BlcmF0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmZpbHRlckNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5VXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5Qb3NpdGlvbkNoYW5nZWQsIHRoaXMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5maWx0ZXJDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5VXBIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uUG9zaXRpb25DaGFuZ2VkLCB0aGlzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZW5kZXIpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmZpbHRlckJ5Q29sdW1uID0gZnVuY3Rpb24gKGZpZWxkTmFtZSwgZmlsdGVyT3BlcmF0b3IsIGZpbHRlclZhbHVlLCBwcmVkaWNhdGUsIG1hdGNoQ2FzZSwgYWN0dWFsRmlsdGVyVmFsdWUsIGFjdHVhbE9wZXJhdG9yKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGZpbHRlckNlbGw7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChmaWVsZE5hbWUpO1xuICAgICAgICAgICAgZmlsdGVyQ2VsbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRoaXMuY29sdW1uLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb2x1bW4uYWxsb3dGaWx0ZXJpbmcpICYmICF0aGlzLmNvbHVtbi5hbGxvd0ZpbHRlcmluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5maWx0ZXJCeUNvbHVtbiwgYXJnMTogZmllbGROYW1lLCBhcmcyOiBmaWx0ZXJPcGVyYXRvciwgYXJnMzogZmlsdGVyVmFsdWUsIGFyZzQ6IHByZWRpY2F0ZSxcbiAgICAgICAgICAgICAgICAgICAgYXJnNTogbWF0Y2hDYXNlLCBhcmc2OiBhY3R1YWxGaWx0ZXJWYWx1ZSwgYXJnNzogYWN0dWFsT3BlcmF0b3JcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gZmlsdGVyVmFsdWU7XG4gICAgICAgICAgICB0aGlzLm1hdGNoQ2FzZSA9IG1hdGNoQ2FzZSB8fCBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZmllbGROYW1lID0gZmllbGROYW1lO1xuICAgICAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGUgfHwgJ2FuZCc7XG4gICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gZmlsdGVyT3BlcmF0b3I7XG4gICAgICAgICAgICBmaWx0ZXJWYWx1ZSA9IGZpbHRlclZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlc1t0aGlzLmNvbHVtbi5maWVsZF0gPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChmaWVsZE5hbWUpLnNldEF0dHJpYnV0ZSgnYXJpYS1maWx0ZXJlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICBpZiAoZmlsdGVyVmFsdWUubGVuZ3RoIDwgMSB8fCB0aGlzLmNoZWNrRm9yU2tpcElucHV0KHRoaXMuY29sdW1uLCBmaWx0ZXJWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyA9IGZpbHRlclZhbHVlLmxlbmd0aCA8IDEgPyAnJyA6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnSW52YWxpZEZpbHRlck1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaWx0ZXJDZWxsLnZhbHVlICE9PSBmaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGZpbHRlckNlbGwudmFsdWUgPSBmaWx0ZXJWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrQWxyZWFkeUNvbEZpbHRlcmVkKHRoaXMuY29sdW1uLmZpZWxkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGUucHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbHVtbnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudFJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RmlsdGVyT2JqZWN0OiB0aGlzLmN1cnJlbnRGaWx0ZXJPYmplY3QsIGN1cnJlbnRGaWx0ZXJpbmdDb2x1bW46IHRoaXMuY29sdW1uID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uLmZpZWxkIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnMsIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93RmlsdGVyQmFyU3RhdHVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnByb3BlcnRpZXNbcHJvcF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wYXJlbnQuYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC51cGRhdGVFeHRlcm5hbE1lc3NhZ2UoJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNsZWFyRmlsdGVyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbHMgPSB1dGlsXzEuZ2V0QWN0dWFsUHJvcEZyb21Db2xsKHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAodXRpbF8xLmlzQWN0aW9uUHJldmVudCh0aGlzLnBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5jbGVhckZpbHRlcmluZyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZChjb2xzW2ldLmZpZWxkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSAnJztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyTXNnKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUuY2hlY2tBbHJlYWR5Q29sRmlsdGVyZWQgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5maWx0ZXJTZXR0aW5ncy5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2x1bW5zXzEgPSBjb2x1bW5zOyBfaSA8IGNvbHVtbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sdW1uc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLmZpZWxkID09PSBmaWVsZCAmJiBjb2wudmFsdWUgPT09IHRoaXMudmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgY29sLm9wZXJhdG9yID09PSB0aGlzLm9wZXJhdG9yICYmIGNvbC5wcmVkaWNhdGUgPT09IHRoaXMucHJlZGljYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5yZW1vdmVGaWx0ZXJlZENvbHNCeUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkLCBpc0NsZWFyRmlsdGVyQmFyKSB7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMuZmlsdGVyU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KHRoaXMucGFyZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLnJlbW92ZUZpbHRlcmVkQ29sc0J5RmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGFyZzE6IGZpZWxkLCBhcmcyOiBpc0NsZWFyRmlsdGVyQmFyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5maWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaXNDbGVhckZpbHRlckJhciA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBjb2xzW2ldLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJykudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlc1tmaWVsZF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29scy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbHVtbkhlYWRlckJ5RmllbGQoZmllbGQpLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1maWx0ZXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnZmlsdGVyaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlck1zZygpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2ZpbHRlcic7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUua2V5VXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5tYXRjaGVzKHRhcmdldCwgJy5lLWZpbHRlcmJhciBpbnB1dCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQodGFyZ2V0LmlkLnNwbGl0KCdfJylbMF0pO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNyb3NzSWNvbih0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGlmICgodGhpcy5maWx0ZXJTZXR0aW5ncy5tb2RlID09PSAnaW1tZWRpYXRlJyB8fCBlLmtleUNvZGUgPT09IDEzKSAmJiBlLmtleUNvZGUgIT09IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRhcmdldC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0ZpbHRlcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUudXBkYXRlU3BhbkNsYXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtY2FuY2VsJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0VGV4dCA9IHRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIHRhcmdldFRleHQudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZS1oaWRlJyk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0VGV4dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdmb2N1c2luJyAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWZpbHRlcnRleHQnKSAmJiAhdGFyZ2V0LmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGFzdEZpbHRlckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0RmlsdGVyRWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZCgnZS1oaWRlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Jvc3NJY29uKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0RmlsdGVyRWxlbWVudCA9IHRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdmb2N1c2luJyAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1maWx0ZXJ0ZXh0JykgJiYgdGhpcy5sYXN0RmlsdGVyRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEZpbHRlckVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnVwZGF0ZUNyb3NzSWNvbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QucmVtb3ZlKCdlLWhpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS51cGRhdGVGaWx0ZXJNc2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLmZpbHRlclNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZpbHRlclNldHRpbmdzLnNob3dGaWx0ZXJCYXJTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1ucy5sZW5ndGggPiAwICYmIHRoaXMuZmlsdGVyU3RhdHVzTXNnICE9PSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyA9ICcnO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBjb2x1bW5zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uc1tpbmRleF0uZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnICs9ICcgJiYgJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclN0YXR1c01zZyArPSBjb2x1bW4uaGVhZGVyVGV4dCArICc6ICcgKyB0aGlzLnZhbHVlc1tjb2x1bW4uZmllbGRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93UGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgZ09iai51cGRhdGVFeHRlcm5hbE1lc3NhZ2UodGhpcy5maWx0ZXJTdGF0dXNNc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSAnJztcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5jaGVja0ZvclNraXBJbnB1dCA9IGZ1bmN0aW9uIChjb2x1bW4sIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgaXNTa2lwO1xuICAgICAgICAgICAgdmFyIHNraXBJbnB1dDtcbiAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBza2lwSW5wdXQgPSBbJz0nLCAnICcsICchJ107XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9kYXRhXzEuRGF0YVV0aWwub3BlcmF0b3JTeW1ib2xzW3ZhbHVlXSB8fCBza2lwSW5wdXQuaW5kZXhPZih2YWx1ZSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpc1NraXAgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi50eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHNraXBJbnB1dCA9IFsnPicsICc8JywgJz0nLCAnISddO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdmFsdWVfMSA9IHZhbHVlOyBfaSA8IHZhbHVlXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSB2YWx1ZV8xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNraXBJbnB1dC5pbmRleE9mKHZhbCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNTa2lwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpc1NraXA7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlci5wcm90b3R5cGUucHJvY2Vzc0ZpbHRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVyKGUpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLnN0YXJ0VGltZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBfdGhpcy5vblRpbWVyVGljaygpOyB9LCBlLmtleUNvZGUgPT09IDEzID8gMCA6IHRoaXMuZmlsdGVyU2V0dGluZ3MuaW1tZWRpYXRlTW9kZURlbGF5KTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5zdG9wVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS5vblRpbWVyVGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5jb2x1bW4uZmllbGQgKyAnX2ZpbHRlckJhcmNlbGwnKTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJWYWx1ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmlsdGVyRWxlbWVudC52YWx1ZSkpO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsdGVyZWRDb2xzQnlGaWVsZCh0aGlzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUZpbHRlclZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJCeUNvbHVtbih0aGlzLmNvbHVtbi5maWVsZCwgdGhpcy5vcGVyYXRvciwgdGhpcy52YWx1ZSwgdGhpcy5wcmVkaWNhdGUsIHRoaXMubWF0Y2hDYXNlKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzW3RoaXMuY29sdW1uLmZpZWxkXSA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgZmlsdGVyRWxlbWVudC52YWx1ZSA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJNc2coKTtcbiAgICAgICAgfTtcbiAgICAgICAgRmlsdGVyLnByb3RvdHlwZS52YWxpZGF0ZUZpbHRlclZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHNraXBJbnB1dDtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHRoaXMubWF0Y2hDYXNlID0gdHJ1ZTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jb2x1bW4udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbDtcbiAgICAgICAgICAgICAgICAgICAgc2tpcElucHV0ID0gWyc+JywgJzwnLCAnPScsICchJ107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lwSW5wdXQuaW5kZXhPZih2YWx1ZVtpXSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9wZXJhdG9yKHZhbHVlLnN1YnN0cmluZyhpbmRleCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSAnJyAmJiB2YWx1ZS5sZW5ndGggPj0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWVGb3JtYXR0ZXIuZnJvbVZpZXcodGhpcy52YWx1ZSwgdGhpcy5jb2x1bW4uZ2V0UGFyc2VyKCksIHRoaXMuY29sdW1uLnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05hTih0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZXRpbWUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZXF1YWw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3BlcmF0b3IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlRm9ybWF0dGVyLmZyb21WaWV3KHRoaXMudmFsdWUsIHRoaXMuY29sdW1uLmdldFBhcnNlcigpLCB0aGlzLmNvbHVtbi50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJTdGF0dXNNc2cgPSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0ludmFsaWRGaWx0ZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaENhc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmNoYXJBdCgwKSA9PT0gJyonKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5zdGFydHNXaXRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlLmNoYXJBdCh2YWx1ZS5sZW5ndGggLSAxKSA9PT0gJyUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuc3RhcnRzV2l0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5jaGFyQXQoMCkgPT09ICclJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuZW5kc1dpdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gdGhpcy5maWx0ZXJPcGVyYXRvcnMuc3RhcnRzV2l0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJyB8fCB2YWx1ZSA9PT0gJzEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAnZmFsc2UnIHx8IHZhbHVlID09PSAnMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyU3RhdHVzTXNnID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdJbnZhbGlkRmlsdGVyTWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRvciA9IHRoaXMuZmlsdGVyT3BlcmF0b3JzLmVxdWFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmdldE9wZXJhdG9yID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgc2luZ2xlT3AgPSB2YWx1ZS5jaGFyQXQoMCk7XG4gICAgICAgICAgICB2YXIgbXVsdGlwbGVPcCA9IHZhbHVlLnNsaWNlKDAsIDIpO1xuICAgICAgICAgICAgdmFyIG9wZXJhdG9ycyA9IGVqMl9iYXNlXzIuZXh0ZW5kKHsgJz0nOiB0aGlzLmZpbHRlck9wZXJhdG9ycy5lcXVhbCwgJyEnOiB0aGlzLmZpbHRlck9wZXJhdG9ycy5ub3RFcXVhbCB9LCBlajJfZGF0YV8xLkRhdGFVdGlsLm9wZXJhdG9yU3ltYm9scyk7XG4gICAgICAgICAgICBpZiAob3BlcmF0b3JzLmhhc093blByb3BlcnR5KHNpbmdsZU9wKSB8fCBvcGVyYXRvcnMuaGFzT3duUHJvcGVydHkobXVsdGlwbGVPcCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3JzW3NpbmdsZU9wXTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcGVyYXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3JzW211bHRpcGxlT3BdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wZXJhdG9yID09PSB0aGlzLmZpbHRlck9wZXJhdG9ycy5sZXNzVGhhbiB8fCB0aGlzLm9wZXJhdG9yID09PSB0aGlzLmZpbHRlck9wZXJhdG9ycy5ncmVhdGVyVGhhbikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlLmNoYXJBdCgwKSA9PT0gJz0nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmF0b3IgPSB0aGlzLm9wZXJhdG9yICsgJ29yZXF1YWwnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXIucHJvdG90eXBlLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyQ2VsbHMgPSBbXS5zbGljZS5jYWxsKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1maWx0ZXJiYXJjZWxsJykpO1xuICAgICAgICAgICAgZmlsdGVyQ2VsbHMuc3BsaWNlKGUudG9JbmRleCwgMCwgZmlsdGVyQ2VsbHMuc3BsaWNlKGUuZnJvbUluZGV4LCAxKVswXSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGZpbHRlckNlbGxzXzEgPSBmaWx0ZXJDZWxsczsgX2kgPCBmaWx0ZXJDZWxsc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gZmlsdGVyQ2VsbHNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGNlbGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRmlsdGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5GaWx0ZXIgPSBGaWx0ZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9maWx0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDU1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vY2VsbC1yZW5kZXJlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGNlbGxfcmVuZGVyZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRmlsdGVyQ2VsbFJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEZpbHRlckNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRmlsdGVyQ2VsbFJlbmRlcmVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdUSCcsIHsgY2xhc3NOYW1lOiAnZS1maWx0ZXJiYXJjZWxsJyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBGaWx0ZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLmdldEd1aSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB9O1xuICAgICAgICBGaWx0ZXJDZWxsUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjZWxsLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgIHZhciBpbm5lckRJViA9IHRoaXMuZ2V0R3VpKCk7XG4gICAgICAgICAgICB2YXIgaW5wdXQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2VsbC5jb2x1bW47XG4gICAgICAgICAgICBpZiAoKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmFsbG93RmlsdGVyaW5nKSB8fCBjb2x1bW4uYWxsb3dGaWx0ZXJpbmcpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtZmx0cnRlbXAnKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2UtZmx0cnRlbXBkaXYnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uLmZpbHRlckJhclRlbXBsYXRlLmNyZWF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcsIGNsYXNzTmFtZTogJ2UtZmlsdGVyVWlfaW5wdXQgZS1maWx0ZXJ0ZXh0IGUtZmx0clRlbXAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgdHlwZTogJ3NlYXJjaCcsIHRpdGxlOiBjb2x1bW4uaGVhZGVyVGV4dCB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHsgY29sdW1uOiBjb2x1bW4gfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUuY3JlYXRlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gdGVtcChhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBkaXYuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAnZS1maWx0ZXJVaV9pbnB1dCBlLWZpbHRlcnRleHQgZS1mbHRyVGVtcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogY29sdW1uLmhlYWRlclRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogY29sdW1uLmZpZWxkICsgJ19maWx0ZXJCYXJjZWxsJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmF0dHJpYnV0ZXMoaW5uZXJESVYsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2UtZmlsdGVyZGl2IGUtZmx0cmlucHV0ZGl2J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlucHV0ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5maWVsZCArICdfZmlsdGVyQmFyY2VsbCcsIGNsYXNzTmFtZTogJ2UtZmlsdGVydGV4dCcsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VhcmNoJywgdGl0bGU6IGNvbHVtbi5oZWFkZXJUZXh0ICsgY2VsbC5hdHRyaWJ1dGVzLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGFbY2VsbC5jb2x1bW4uZmllbGRdID8gZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0gOiAnJywgcm9sZTogJ3NlYXJjaCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlubmVyRElWLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgICAgICBpbm5lckRJVi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2FuY2VsIGUtaGlkZSBlLWljb25zIGUtaWNvbi1oaWRlJyxcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgJ2FyaWEtbGFiZWwnOiAnY2xlYXIgZmlsdGVyIGNlbGwnLCB0YWJpbmRleDogJy0xJyB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbi5hbGxvd0ZpbHRlcmluZyA9PT0gZmFsc2UgfHwgY29sdW1uLmZpZWxkID09PSAnJyB8fCBlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5maWVsZCkpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdlLWRpc2FibGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY29sdW1uLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2UtaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbi5hbGxvd0ZpbHRlcmluZykgfHwgY29sdW1uLmFsbG93RmlsdGVyaW5nKSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4uZmlsdGVyQmFyVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlUmVhZCA9IGNvbHVtbi5maWx0ZXJCYXJUZW1wbGF0ZS5yZWFkO1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZVdyaXRlID0gY29sdW1uLmZpbHRlckJhclRlbXBsYXRlLndyaXRlO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0geyBlbGVtZW50OiBpbnB1dCwgY29sdW1uOiBjb2x1bW4gfTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlbXBsYXRlUmVhZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZWFkID0gYXJncy5jb2x1bW4gPSBlajJfYmFzZV8xLmdldFZhbHVlKHRlbXBsYXRlUmVhZCwgd2luZG93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZVdyaXRlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVdyaXRlID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wbGF0ZVdyaXRlLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVdyaXRlLmNhbGwodGhpcywgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFwcGVuZEh0bWwobm9kZSwgaW5uZXJESVYpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIEZpbHRlckNlbGxSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kSHRtbCA9IGZ1bmN0aW9uIChub2RlLCBpbm5lckh0bWwpIHtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaW5uZXJIdG1sKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRmlsdGVyQ2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuRmlsdGVyQ2VsbFJlbmRlcmVyID0gRmlsdGVyQ2VsbFJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL3NlcnZpY2VzL3dpZHRoLWNvbnRyb2xsZXJcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgd2lkdGhfY29udHJvbGxlcl8xLCBldmVudHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdCA9IHtcbiAgICAgICAgcm9vdDogJ2UtcmhhbmRsZXInLFxuICAgICAgICBzdXBwcmVzczogJ2UtcnN1cHByZXNzJyxcbiAgICAgICAgaWNvbjogJ2Utcmljb24nLFxuICAgICAgICBoZWxwZXI6ICdlLXJoZWxwZXInLFxuICAgICAgICBoZWFkZXI6ICd0aC5lLWhlYWRlcmNlbGwnLFxuICAgICAgICBjdXJzb3I6ICdlLXJjdXJzb3InLFxuICAgICAgICBsaW5lczogJ2UtcmxpbmVzJ1xuICAgIH07XG4gICAgdmFyIFJlc2l6ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJlc2l6ZShwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMudGFwcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzRGJsQ2xrID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2UgPSBuZXcgd2lkdGhfY29udHJvbGxlcl8xLkNvbHVtbldpZHRoU2VydmljZShwYXJlbnQpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5hdXRvRml0Q29sdW1ucyA9IGZ1bmN0aW9uIChmTmFtZSkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbk5hbWUgPSAoZk5hbWUgPT09IHVuZGVmaW5lZCB8fCBmTmFtZSA9PT0gbnVsbCB8fCBmTmFtZS5sZW5ndGggPD0gMCkgP1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbHVtbnMoKS5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguZmllbGQ7IH0pIDogKHR5cGVvZiBmTmFtZSA9PT0gJ3N0cmluZycpID8gW2ZOYW1lXSA6IGZOYW1lO1xuICAgICAgICAgICAgdGhpcy5maW5kQ29sdW1uKGNvbHVtbk5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlc2l6ZUNvbHVtbiA9IGZ1bmN0aW9uIChmTmFtZSwgaW5kZXgsIGlkKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHRXaWR0aCA9IDA7XG4gICAgICAgICAgICB2YXIgaGVhZGVyVGFibGUgPSB0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRUYWJsZSA9IHRoaXMucGFyZW50LmdldENvbnRlbnRUYWJsZSgpO1xuICAgICAgICAgICAgdmFyIGhlYWRlckRpdlRhZyA9ICdlLWdyaWRoZWFkZXInO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnREaXZUYWcgPSAnZS1ncmlkY29udGVudCc7XG4gICAgICAgICAgICB2YXIgaW5kZW50V2lkdGhDbG9uZSA9IGdPYmouZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0cicpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdyb3VwdG9wbGVmdGNlbGwnKTtcbiAgICAgICAgICAgIHZhciBpbmRlbnRXaWR0aCA9IDA7XG4gICAgICAgICAgICBpZiAoaW5kZW50V2lkdGhDbG9uZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRlbnRXaWR0aENsb25lLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGVudFdpZHRoICs9IGluZGVudFdpZHRoQ2xvbmVbaV0ub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHVpZCA9IGlkID8gaWQgOiB0aGlzLnBhcmVudC5nZXRVaWRCeUNvbHVtbkZpZWxkKGZOYW1lKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5JbmRleCA9IHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleCh1aWQpO1xuICAgICAgICAgICAgdmFyIGhlYWRlclRleHRDbG9uZSA9IGhlYWRlclRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJylbY29sdW1uSW5kZXhdLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJUZXh0ID0gW2hlYWRlclRleHRDbG9uZV07XG4gICAgICAgICAgICB2YXIgY29udGVudFRleHRDbG9uZSA9IGNvbnRlbnRUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKFwidGQ6bnRoLWNoaWxkKFwiICsgKGNvbHVtbkluZGV4ICsgMSkgKyBcIilcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudFRleHQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudFRleHRDbG9uZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUZXh0W2ldID0gY29udGVudFRleHRDbG9uZVtpXS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgd0hlYWRlciA9IHRoaXMuY3JlYXRlVGFibGUoaGVhZGVyVGFibGUsIGhlYWRlclRleHQsIGhlYWRlckRpdlRhZyk7XG4gICAgICAgICAgICB2YXIgd0NvbnRlbnQgPSB0aGlzLmNyZWF0ZVRhYmxlKGNvbnRlbnRUYWJsZSwgY29udGVudFRleHQsIGNvbnRlbnREaXZUYWcpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbmJ5aW5kZXggPSBnT2JqLmdldENvbHVtbnMoKVtpbmRleF07XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gKHdIZWFkZXIgPiB3Q29udGVudCkgPyBjb2x1bW5ieWluZGV4LndpZHRoID0gZWoyX2Jhc2VfMS5mb3JtYXRVbml0KHdIZWFkZXIpIDogY29sdW1uYnlpbmRleC53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh3Q29udGVudCk7XG4gICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZS5zZXRDb2x1bW5XaWR0aChnT2JqLmdldENvbHVtbnMoKVtpbmRleF0pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZ09iai5nZXRDb2x1bW5zKCkuc29tZShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC53aWR0aCA9PT0gbnVsbCB8fCB4LndpZHRoID09PSB1bmRlZmluZWQgfHwgeC53aWR0aC5sZW5ndGggPD0gMDsgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZ09iai5nZXRDb2x1bW5zKCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRXaWR0aCA9IHRXaWR0aCArIHBhcnNlSW50KGVsZW1lbnQud2lkdGgsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0YWJsZVdpZHRoXzEgPSB0V2lkdGggKyBpbmRlbnRXaWR0aDtcbiAgICAgICAgICAgICAgICBpZiAodFdpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJUYWJsZS5zdHlsZS53aWR0aCA9IGVqMl9iYXNlXzEuZm9ybWF0VW5pdCh0YWJsZVdpZHRoXzEpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50VGFibGUuc3R5bGUud2lkdGggPSBlajJfYmFzZV8xLmZvcm1hdFVuaXQodGFibGVXaWR0aF8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGFibGVXaWR0aCA9IGhlYWRlclRhYmxlLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnR3aWR0aCA9IChnT2JqLmdldENvbnRlbnQoKS5zY3JvbGxXaWR0aCk7XG4gICAgICAgICAgICBpZiAoY29udGVudHdpZHRoID4gdGFibGVXaWR0aCkge1xuICAgICAgICAgICAgICAgIGhlYWRlclRhYmxlLmNsYXNzTGlzdC5hZGQoJ2UtdGFibGVib3JkZXInKTtcbiAgICAgICAgICAgICAgICBjb250ZW50VGFibGUuY2xhc3NMaXN0LmFkZCgnZS10YWJsZWJvcmRlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyVGFibGUuY2xhc3NMaXN0LnJlbW92ZSgnZS10YWJsZWJvcmRlcicpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRUYWJsZS5jbGFzc0xpc3QucmVtb3ZlKCdlLXRhYmxlYm9yZGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMud2lkdGhTZXJ2aWNlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdyZXNpemUnO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmZpbmRDb2x1bW4gPSBmdW5jdGlvbiAoZk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBmTmFtZS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbkluZGV4ID0gX3RoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlGaWVsZChmaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpW2NvbHVtbkluZGV4XS52aXNpYmxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlc2l6ZUNvbHVtbihmaWVsZE5hbWUsIGNvbHVtbkluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5jcmVhdGVUYWJsZSA9IGZ1bmN0aW9uICh0YWJsZSwgdGV4dCwgdGFnKSB7XG4gICAgICAgICAgICB2YXIgbXlUYWJsZURpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBteVRhYmxlRGl2LmNsYXNzTmFtZSA9IHRoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NOYW1lO1xuICAgICAgICAgICAgbXlUYWJsZURpdi5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IGlubGluZS1ibG9jazt2aXNpYmlsaXR5OmhpZGRlbjtwb3NpdGlvbjphYnNvbHV0ZSc7XG4gICAgICAgICAgICB2YXIgbXlTdWJEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbXlTdWJEaXYuY2xhc3NOYW1lID0gdGFnO1xuICAgICAgICAgICAgdmFyIG15VGFibGUgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgICAgICAgICBteVRhYmxlLmNsYXNzTmFtZSA9IHRhYmxlLmNsYXNzTmFtZTtcbiAgICAgICAgICAgIG15VGFibGUuc3R5bGUuY3NzVGV4dCA9ICd0YWJsZS1sYXlvdXQ6IGF1dG87d2lkdGg6IGF1dG8nO1xuICAgICAgICAgICAgdmFyIG15VHIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICB0ZXh0LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHIgPSBteVRyLmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgICAgIHRyLmNsYXNzTmFtZSA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RyJykuY2xhc3NOYW1lO1xuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIG15VGFibGUuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBteVN1YkRpdi5hcHBlbmRDaGlsZChteVRhYmxlKTtcbiAgICAgICAgICAgIG15VGFibGVEaXYuYXBwZW5kQ2hpbGQobXlTdWJEaXYpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChteVRhYmxlRGl2KTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRXaWR0aFZhbHVlID0gbXlUYWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobXlUYWJsZURpdik7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG9mZnNldFdpZHRoVmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlbmRlcik7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgICAgICBpZiAoISh0aGlzLnBhcmVudC5ncmlkTGluZXMgPT09ICd2ZXJ0aWNhbCcgfHwgdGhpcy5wYXJlbnQuZ3JpZExpbmVzID09PSAnYm90aCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuYWRkKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LmxpbmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0SGFuZGxlckhlaWdodCgpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5nZXRSZXNpemVIYW5kbGVycygpLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICAgICAgICAgIGVsZS5zdHlsZS5oZWlnaHQgPSBlbGUucGFyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChlbGUsIGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIF90aGlzLnJlc2l6ZVN0YXJ0LCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIuYWRkKGVsZSwgZXZlbnRzLmRibGNsaWNrLCBfdGhpcy5jYWxsQXV0b0ZpdCwgX3RoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUudW53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVzaXplSGFuZGxlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUoZWxlLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCBfdGhpcy5yZXNpemVTdGFydCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGVsZSwgZXZlbnRzLmRibGNsaWNrLCBfdGhpcy5jYWxsQXV0b0ZpdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5nZXRSZXNpemVIYW5kbGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLicgKyBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5yb290KSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuc2V0SGFuZGxlckhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0LnN1cHByZXNzKSkuZm9yRWFjaChmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgICAgICAgZWxlLnN0eWxlLmhlaWdodCA9IGVsZS5wYXJlbnRFbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5jYWxsQXV0b0ZpdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY29sID0gdGhpcy5nZXRUYXJnZXRDb2x1bW4oZSk7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUNvbHVtbihjb2wuZmllbGQsIHRoaXMucGFyZW50LmdldE5vcm1hbGl6ZWRDb2x1bW5JbmRleChjb2wudWlkKSwgY29sLnVpZCk7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVzaXplU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhlbHBlcikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldFNjcm9sbEJhcldpZHRoKCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucmVmcmVzaENvbHVtbldpZHRoKCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aWR0aFNlcnZpY2Uuc2V0Q29sdW1uV2lkdGgoY29sKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZS5zZXRXaWR0aFRvVGFibGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRIZWxwZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbiA9IHRoaXMuZ2V0VGFyZ2V0Q29sdW1uKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZVggPSB0aGlzLmdldFBvaW50WChlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWluTW92ZSA9IHBhcnNlSW50KHRoaXMuY29sdW1uLndpZHRoLnRvU3RyaW5nKCksIDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLSAodGhpcy5jb2x1bW4ubWluV2lkdGggPyBwYXJzZUludCh0aGlzLmNvbHVtbi5taW5XaWR0aC50b1N0cmluZygpLCAxMCkgOiAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWluTW92ZSA9ICh0aGlzLmNvbHVtbi5taW5XaWR0aCA/IHBhcnNlSW50KHRoaXMuY29sdW1uLm1pbldpZHRoLnRvU3RyaW5nKCksIDEwKSA6IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAtIHBhcnNlSW50KHRoaXMuY29sdW1uLndpZHRoLnRvU3RyaW5nKCksIDEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5taW5Nb3ZlICs9IHRoaXMucGFnZVg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlICYmICF0aGlzLmhlbHBlci5jbGFzc0xpc3QuY29udGFpbnMoZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaWNvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlbHBlci5jbGFzc0xpc3QuYWRkKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0Lmljb24pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZW1vdmVIZWxwZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmhlbHBlciwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZXNpemVTdGFydCwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZTogZSxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uOiB0aGlzLmNvbHVtblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMucmVzaXplU3RhcnQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFJlc2l6ZUFjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChkb2N1bWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoRW5kRXZlbnQsIHRoaXMucmVzaXplRW5kLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZWxlbWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLnJlc2l6aW5nLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnNvcignYWRkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuY2FuY2VsUmVzaXplQWN0aW9uID0gZnVuY3Rpb24gKHJlbW92ZUV2ZW50cykge1xuICAgICAgICAgICAgaWYgKHJlbW92ZUV2ZW50cykge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLnBhcmVudC5lbGVtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMucmVzaXppbmcpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoRW5kRXZlbnQsIHRoaXMucmVzaXplRW5kKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnNvcigncmVtb3ZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnJlbW92ZUhlbHBlcik7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuaGVscGVyLCBlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCB0aGlzLnJlc2l6ZVN0YXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEuZGV0YWNoKHRoaXMuaGVscGVyKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gKHdpZHRoLCBtaW5XaWR0aCwgbWF4V2lkdGgpIHtcbiAgICAgICAgICAgIGlmIChtaW5XaWR0aCAmJiB3aWR0aCA8IG1pbldpZHRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1pbldpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKG1heFdpZHRoICYmIHdpZHRoID4gbWF4V2lkdGgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnJlc2l6aW5nID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwYWdlWCA9IHRoaXMuZ2V0UG9pbnRYKGUpO1xuICAgICAgICAgICAgdmFyIG1vdXNlbW92ZSA9IHRoaXMucGFyZW50LmVuYWJsZVJ0bCA/IC0ocGFnZVggLSB0aGlzLnBhZ2VYKSA6IChwYWdlWCAtIHRoaXMucGFnZVgpO1xuICAgICAgICAgICAgdmFyIGNvbERhdGEgPSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHBhcnNlSW50KHRoaXMud2lkdGhTZXJ2aWNlLmdldFdpZHRoKHRoaXMuY29sdW1uKS50b1N0cmluZygpLCAxMCkgKyBtb3VzZW1vdmUsXG4gICAgICAgICAgICAgICAgbWluV2lkdGg6IHRoaXMuY29sdW1uLm1pbldpZHRoID8gcGFyc2VJbnQodGhpcy5jb2x1bW4ubWluV2lkdGgudG9TdHJpbmcoKSwgMTApIDogbnVsbCxcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDogdGhpcy5jb2x1bW4ubWF4V2lkdGggPyBwYXJzZUludCh0aGlzLmNvbHVtbi5tYXhXaWR0aC50b1N0cmluZygpLCAxMCkgOiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5nZXRXaWR0aChjb2xEYXRhLndpZHRoLCBjb2xEYXRhLm1pbldpZHRoLCBjb2xEYXRhLm1heFdpZHRoKTtcbiAgICAgICAgICAgIGlmICgoIXRoaXMucGFyZW50LmVuYWJsZVJ0bCAmJiB0aGlzLm1pbk1vdmUgPj0gcGFnZVgpIHx8ICh0aGlzLnBhcmVudC5lbmFibGVSdGwgJiYgdGhpcy5taW5Nb3ZlIDw9IHBhZ2VYKSkge1xuICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy5jb2x1bW4ubWluV2lkdGggPyBwYXJzZUludCh0aGlzLmNvbHVtbi5taW5XaWR0aC50b1N0cmluZygpLCAxMCkgOiAwO1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZVggPSBwYWdlWCA9IHRoaXMubWluTW92ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3aWR0aCAhPT0gcGFyc2VJbnQodGhpcy5jb2x1bW4ud2lkdGgudG9TdHJpbmcoKSwgMTApKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlWCA9IHBhZ2VYO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uLndpZHRoID0gZWoyX2Jhc2VfMS5mb3JtYXRVbml0KHdpZHRoKTtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZTogZSxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uOiB0aGlzLmNvbHVtblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMub25SZXNpemUsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFJlc2l6ZUFjdGlvbih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLndpZHRoU2VydmljZS5zZXRDb2x1bW5XaWR0aCh0aGlzLmNvbHVtbiwgbnVsbCwgJ3Jlc2l6ZScpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSGVscGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzRGJsQ2xrID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVzaXplRW5kID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5oZWxwZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZWxlbWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLnJlc2l6aW5nKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoRW5kRXZlbnQsIHRoaXMucmVzaXplRW5kKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ3Vyc29yKCdyZW1vdmUnKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuZGV0YWNoKHRoaXMuaGVscGVyKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIGU6IGUsXG4gICAgICAgICAgICAgICAgY29sdW1uOiB0aGlzLmNvbHVtblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLnJlc2l6ZVN0b3AsIGFyZ3MpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB0aGlzLmRvdWJsZVRhcEV2ZW50KGUpO1xuICAgICAgICAgICAgdGhpcy5pc0RibENsayA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0UG9pbnRYID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5wYWdlWDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZWZyZXNoQ29sdW1uV2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMucGFyZW50LmdldENvbHVtbnMoKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBbXS5zbGljZS5hcHBseSh0aGlzLnBhcmVudC5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoLmUtaGVhZGVyY2VsbCcpKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9iID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2IgPCBjb2x1bW5zXzEubGVuZ3RoOyBfYisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zXzFbX2JdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlLnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWRdJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5xdWVyeVNlbGVjdG9yKCdbZS1tYXBwaW5ndWlkXScpLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykgPT09IGNvbHVtbi51aWQgJiYgY29sdW1uLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbi53aWR0aCA9IGVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbnM7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0VGFyZ2V0Q29sdW1uID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjZWxsID0gZWoyX2Jhc2VfMS5jbG9zZXN0KGUudGFyZ2V0LCBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5oZWFkZXIpO1xuICAgICAgICAgICAgdmFyIHVpZCA9IGNlbGwucXVlcnlTZWxlY3RvcignLmUtaGVhZGVyY2VsbGRpdicpLmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodWlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS51cGRhdGVDdXJzb3IgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyUm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJykpO1xuICAgICAgICAgICAgaGVhZGVyUm93cy5wdXNoKHRoaXMucGFyZW50LmVsZW1lbnQpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBoZWFkZXJSb3dzXzEgPSBoZWFkZXJSb3dzOyBfaSA8IGhlYWRlclJvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gaGVhZGVyUm93c18xW19pXTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NMaXN0W2FjdGlvbl0oZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuY3Vyc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jb2x1bW4gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wYWdlWCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmFwcGVuZEhlbHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBleHBvcnRzLnJlc2l6ZUNsYXNzTGlzdC5oZWxwZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmhlbHBlcik7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLm9mZnNldEhlaWdodCAtIHRoaXMuZ2V0U2Nyb2xsQmFyV2lkdGgoKTtcbiAgICAgICAgICAgIHZhciByZWN0ID0gZWoyX2Jhc2VfMS5jbG9zZXN0KHRoaXMuZWxlbWVudCwgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaGVhZGVyKTtcbiAgICAgICAgICAgIHZhciB0ciA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSB0ci5pbmRleE9mKHJlY3QucGFyZW50RWxlbWVudCk7IGkgPCB0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGhlaWdodCArPSB0cltpXS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcG9zID0gdGhpcy5jYWxjUG9zKHJlY3QpO1xuICAgICAgICAgICAgcG9zLmxlZnQgKz0gKHRoaXMucGFyZW50LmVuYWJsZVJ0bCA/IDAgLSAxIDogcmVjdC5vZmZzZXRXaWR0aCAtIDIpO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIuc3R5bGUuY3NzVGV4dCA9ICdoZWlnaHQ6ICcgKyBoZWlnaHQgKyAncHg7IHRvcDogJyArIHBvcy50b3AgKyAncHg7IGxlZnQ6JyArIE1hdGguZmxvb3IocG9zLmxlZnQpICsgJ3B4Oyc7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbiAoaGVpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICByZXR1cm4gKGVsZS5zY3JvbGxIZWlnaHQgPiBlbGUuY2xpZW50SGVpZ2h0ICYmIGhlaWdodCkgfHxcbiAgICAgICAgICAgICAgICBlbGUuc2Nyb2xsV2lkdGggPiBlbGUuY2xpZW50V2lkdGggPyB1dGlsXzEuZ2V0U2Nyb2xsQmFyV2lkdGgoKSA6IDA7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUucmVtb3ZlSGVscGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjbHMgPSBlLnRhcmdldC5jbGFzc0xpc3Q7XG4gICAgICAgICAgICBpZiAoIShjbHMuY29udGFpbnMoZXhwb3J0cy5yZXNpemVDbGFzc0xpc3Qucm9vdCkgfHwgY2xzLmNvbnRhaW5zKGV4cG9ydHMucmVzaXplQ2xhc3NMaXN0Lmljb24pKSAmJiB0aGlzLmhlbHBlcikge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZShkb2N1bWVudCwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZW1vdmVIZWxwZXIpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmhlbHBlciwgZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5yZXNpemVTdGFydCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5kZXRhY2godGhpcy5oZWxwZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLnVwZGF0ZUhlbHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZWN0ID0gZWoyX2Jhc2VfMS5jbG9zZXN0KHRoaXMuZWxlbWVudCwgZXhwb3J0cy5yZXNpemVDbGFzc0xpc3QuaGVhZGVyKTtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyLnN0eWxlLmxlZnQgPSBNYXRoLmZsb29yKHRoaXMuY2FsY1BvcyhyZWN0KS5sZWZ0ICsgKHRoaXMucGFyZW50LmVuYWJsZVJ0bCA/IDAgLSAxIDogcmVjdC5vZmZzZXRXaWR0aCAtIDIpKSArICdweCc7XG4gICAgICAgIH07XG4gICAgICAgIFJlc2l6ZS5wcm90b3R5cGUuY2FsY1BvcyA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50T2Zmc2V0ID0ge1xuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgZG9jID0gZWxlbS5vd25lckRvY3VtZW50O1xuICAgICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IGVsZW0ub2Zmc2V0UGFyZW50IHx8IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICB3aGlsZSAob2Zmc2V0UGFyZW50ICYmXG4gICAgICAgICAgICAgICAgKG9mZnNldFBhcmVudCA9PT0gZG9jLmJvZHkgfHwgb2Zmc2V0UGFyZW50ID09PSBkb2MuZG9jdW1lbnRFbGVtZW50KSAmJlxuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudC5zdHlsZS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvZmZzZXRQYXJlbnQgJiYgb2Zmc2V0UGFyZW50ICE9PSBlbGVtICYmIG9mZnNldFBhcmVudC5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHBhcmVudE9mZnNldCA9IG9mZnNldFBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9wOiBvZmZzZXQudG9wIC0gcGFyZW50T2Zmc2V0LnRvcCxcbiAgICAgICAgICAgICAgICBsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmRvdWJsZVRhcEV2ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldFVzZXJBZ2VudCgpICYmIHRoaXMuaXNEYmxDbGspIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGFwcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFwcGVkID0gc2V0VGltZW91dCh0aGlzLnRpbWVvdXRIYW5kbGVyKCksIDMwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50YXBwZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxBdXRvRml0KGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcHBlZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZXNpemUucHJvdG90eXBlLmdldFVzZXJBZ2VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1c2VyQWdlbnQgPSBlajJfYmFzZV8xLkJyb3dzZXIudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gL2lwaG9uZXxpcG9kfGlwYWQvLnRlc3QodXNlckFnZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVzaXplLnByb3RvdHlwZS50aW1lb3V0SGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudGFwcGVkID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJlc2l6ZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUmVzaXplID0gUmVzaXplO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcmVzaXplLmpzXG4vLyBtb2R1bGUgaWQgPSA1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSZW9yZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUmVvcmRlcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlckRyb3AsIHRoaXMuaGVhZGVyRHJvcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJlb3JkZXJDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5EcmFnLCB0aGlzLmRyYWcsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWdTdGFydCwgdGhpcy5kcmFnU3RhcnQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbkRyYWdTdG9wLCB0aGlzLmRyYWdTdG9wLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5oZWFkZXJEcm9wLCB0aGlzLmhlYWRlckRyb3AsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5jcmVhdGVSZW9yZGVyRWxlbWVudCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuY2hrRHJvcFBvc2l0aW9uID0gZnVuY3Rpb24gKHNyY0VsZW0sIGRlc3RFbGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gc3JjRWxlbS5wYXJlbnRFbGVtZW50LmlzRXF1YWxOb2RlKGRlc3RFbGVtLnBhcmVudEVsZW1lbnQpICYmIHRoaXMudGFyZ2V0UGFyZW50Q29udGFpbmVySW5kZXgoc3JjRWxlbSwgZGVzdEVsZW0pID4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmNoa0Ryb3BBbGxDb2xzID0gZnVuY3Rpb24gKHNyY0VsZW0sIGRlc3RFbGVtKSB7XG4gICAgICAgICAgICB2YXIgaXNGb3VuZDtcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0gW10uc2xpY2UuY2FsbCh0aGlzLnBhcmVudC5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtaGVhZGVyY2VsbCcpKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXI7XG4gICAgICAgICAgICB3aGlsZSAoIWlzRm91bmQgJiYgaGVhZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyID0gaGVhZGVycy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpc0ZvdW5kID0gc3JjRWxlbSAhPT0gaGVhZGVyICYmIHRoaXMudGFyZ2V0UGFyZW50Q29udGFpbmVySW5kZXgoc3JjRWxlbSwgZGVzdEVsZW0pID4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXNGb3VuZDtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZmluZENvbFBhcmVudCA9IGZ1bmN0aW9uIChjb2wsIGNvbHMsIHBhcmVudCkge1xuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sID09PSBjb2xzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2xzW2ldLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNudCA9IHBhcmVudC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5wdXNoKGNvbHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZmluZENvbFBhcmVudChjb2wsIGNvbHNbaV0uY29sdW1ucywgcGFyZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnNwbGljZShjbnQsIHBhcmVudC5sZW5ndGggLSBjbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmdldENvbHVtbnNNb2RlbCA9IGZ1bmN0aW9uIChjb2xzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uTW9kZWwgPSBbXTtcbiAgICAgICAgICAgIHZhciBzdWJDb2xzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbHVtbk1vZGVsLnB1c2goY29sc1tpXSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICBzdWJDb2xzID0gc3ViQ29scy5jb25jYXQoY29sc1tpXS5jb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3ViQ29scy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5Nb2RlbCA9IGNvbHVtbk1vZGVsLmNvbmNhdCh0aGlzLmdldENvbHVtbnNNb2RlbChzdWJDb2xzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sdW1uTW9kZWw7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmhlYWRlckRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMi5jbG9zZXN0KGUudGFyZ2V0LCAndGgnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZXN0RWxlbSA9IGVqMl9iYXNlXzIuY2xvc2VzdChlLnRhcmdldCwgJy5lLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIGlmIChkZXN0RWxlbSAmJiAhKCF0aGlzLmNoa0Ryb3BQb3NpdGlvbih0aGlzLmVsZW1lbnQsIGRlc3RFbGVtKSB8fCAhdGhpcy5jaGtEcm9wQWxsQ29scyh0aGlzLmVsZW1lbnQsIGRlc3RFbGVtKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWhlYWRlcmNlbGwnKSk7XG4gICAgICAgICAgICAgICAgdmFyIG9sZElkeCA9IHV0aWxfMS5nZXRFbGVtZW50SW5kZXgodGhpcy5lbGVtZW50LCBoZWFkZXJzKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1uc01vZGVsKHRoaXMucGFyZW50LmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zW29sZElkeF07XG4gICAgICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gdGhpcy50YXJnZXRQYXJlbnRDb250YWluZXJJbmRleCh0aGlzLmVsZW1lbnQsIGRlc3RFbGVtKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDb2x1bW5zKG5ld0luZGV4LCBjb2x1bW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5pc0FjdGlvblByZXZlbnQgPSBmdW5jdGlvbiAoZ09iaikge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaik7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLm1vdmVDb2x1bW5zID0gZnVuY3Rpb24gKGRlc3RJbmRleCwgY29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy5tb3ZlQ29sdW1ucywgYXJnMTogZGVzdEluZGV4LCBhcmcyOiBjb2x1bW4gfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0Q29sUGFyZW50KGNvbHVtbiwgdGhpcy5wYXJlbnQuY29sdW1ucyk7XG4gICAgICAgICAgICB2YXIgY29scyA9IHBhcmVudCA/IHBhcmVudC5jb2x1bW5zIDogdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBzcmNJZHggPSB1dGlsXzEuaW5BcnJheShjb2x1bW4sIGNvbHMpO1xuICAgICAgICAgICAgaWYgKCFnT2JqLmFsbG93UmVvcmRlcmluZyB8fCBzcmNJZHggPT09IGRlc3RJbmRleCB8fCBzcmNJZHggPT09IC0xIHx8IGRlc3RJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2xzLnNwbGljZShkZXN0SW5kZXgsIDAsIGNvbHMuc3BsaWNlKHNyY0lkeCwgMSlbMF0pO1xuICAgICAgICAgICAgZ09iai5nZXRDb2x1bW5zKHRydWUpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmNvbHVtblBvc2l0aW9uQ2hhbmdlZCwgeyBmcm9tSW5kZXg6IGRlc3RJbmRleCwgdG9JbmRleDogc3JjSWR4IH0pO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgcmVxdWVzdFR5cGU6ICdyZW9yZGVyJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnRhcmdldFBhcmVudENvbnRhaW5lckluZGV4ID0gZnVuY3Rpb24gKHNyY0VsZW0sIGRlc3RFbGVtKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlLWhlYWRlcmNlbGwnKSk7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZmxhdENvbHVtbnMgPSB0aGlzLmdldENvbHVtbnNNb2RlbChjb2xzKTtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldENvbFBhcmVudChmbGF0Q29sdW1uc1t1dGlsXzEuZ2V0RWxlbWVudEluZGV4KHNyY0VsZW0sIGhlYWRlcnMpXSwgY29scyk7XG4gICAgICAgICAgICBjb2xzID0gcGFyZW50ID8gcGFyZW50LmNvbHVtbnMgOiBjb2xzO1xuICAgICAgICAgICAgcmV0dXJuIHV0aWxfMS5pbkFycmF5KGZsYXRDb2x1bW5zW3V0aWxfMS5nZXRFbGVtZW50SW5kZXgoZGVzdEVsZW0sIGhlYWRlcnMpXSwgY29scyk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmdldENvbFBhcmVudCA9IGZ1bmN0aW9uIChjb2x1bW4sIGNvbHVtbnMpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRzID0gW107XG4gICAgICAgICAgICB0aGlzLmZpbmRDb2xQYXJlbnQoY29sdW1uLCBjb2x1bW5zLCBwYXJlbnRzKTtcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnRzW3BhcmVudHMubGVuZ3RoIC0gMV07XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnJlb3JkZXJDb2x1bW5zID0gZnVuY3Rpb24gKGZyb21GTmFtZSwgdG9GTmFtZSkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQodG9GTmFtZSk7XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRDb2xQYXJlbnQoY29sdW1uLCB0aGlzLnBhcmVudC5jb2x1bW5zKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gcGFyZW50ID8gcGFyZW50LmNvbHVtbnMgOiB0aGlzLnBhcmVudC5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGRlc3RJbmRleCA9IHV0aWxfMS5pbkFycmF5KGNvbHVtbiwgY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAoZGVzdEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDb2x1bW5zKGRlc3RJbmRleCwgdGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlGaWVsZChmcm9tRk5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZW5hYmxlQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlID09PSB0aGlzLmdldE1vZHVsZU5hbWUoKSAmJiBlLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUmVvcmRlckVsZW1lbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuY3JlYXRlUmVvcmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1oZWFkZXJjb250ZW50Jyk7XG4gICAgICAgICAgICB0aGlzLnVwQXJyb3cgPSBoZWFkZXIuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgZS1pY29uLXJlb3JkZXJ1cGFycm93IGUtcmVvcmRlcnVwYXJyb3cnLCBhdHRyczogeyBzdHlsZTogJ2Rpc3BsYXk6bm9uZScgfSB9KSk7XG4gICAgICAgICAgICB0aGlzLmRvd25BcnJvdyA9IGhlYWRlci5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1pY29ucyBlLWljb24tcmVvcmRlcmRvd25hcnJvdyBlLXJlb3JkZXJkb3duYXJyb3cnLCBhdHRyczogeyBzdHlsZTogJ2Rpc3BsYXk6bm9uZScgfSB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGVqMl9iYXNlXzEuZXh0ZW5kKGUsIHsgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMudXBBcnJvdyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmRvd25BcnJvdyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmhlYWRlckRyb3AsIHRoaXMuaGVhZGVyRHJvcCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLnVpVXBkYXRlLCB0aGlzLmVuYWJsZUFmdGVyUmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucmVvcmRlckNvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnLCB0aGlzLmRyYWcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMuZHJhZ1N0YXJ0KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJhZ1N0b3AsIHRoaXMuZHJhZ1N0b3ApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5oZWFkZXJSZWZyZXNoZWQsIHRoaXMuY3JlYXRlUmVvcmRlckVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5kcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgY2xvc2VzdCA9IGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS1oZWFkZXJjZWxsOm5vdCguZS1zdGFja2VkSGVhZGVyQ2VsbCknKTtcbiAgICAgICAgICAgIHZhciBjbG9uZUVsZW1lbnQgPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2xvbmVwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgICB2YXIgaXNMZWZ0ID0gdGhpcy54ID4gdXRpbF8xLmdldFBvc2l0aW9uKGUuZXZlbnQpLnggKyBnT2JqLmdldENvbnRlbnQoKS5maXJzdEVsZW1lbnRDaGlsZC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmVDbGFzcyhnT2JqLmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvckFsbCgnLmUtcmVvcmRlcmluZGljYXRlJyksIFsnZS1yZW9yZGVyaW5kaWNhdGUnXSk7XG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXkoJ25vbmUnKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1kZWZhdWx0Y3VyJ10sIFsnZS1ub3RhbGxvd2VkY3VyJ10pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxQb3N0aW9uKGUuZXZlbnQpO1xuICAgICAgICAgICAgaWYgKGNsb3Nlc3QgJiYgIWNsb3Nlc3QuaXNFcXVhbE5vZGUodGhpcy5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IGNsb3Nlc3Q7XG4gICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuY2hrRHJvcFBvc2l0aW9uKHRoaXMuZWxlbWVudCwgdGFyZ2V0KSB8fCAhdGhpcy5jaGtEcm9wQWxsQ29scyh0aGlzLmVsZW1lbnQsIHRhcmdldCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQXJyb3dQb3NpdGlvbih0YXJnZXQsIGlzTGVmdCk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KHRhcmdldCwgWydlLWFsbG93RHJvcCcsICdlLXJlb3JkZXJpbmRpY2F0ZSddLCBbXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCEoZ09iai5hbGxvd0dyb3VwaW5nICYmIHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyb3VwZHJvcGFyZWEnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2Utbm90YWxsb3dlZGN1ciddLCBbJ2UtZGVmYXVsdGN1ciddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmNvbHVtbkRyYWcsIHsgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdoZWFkZXJjZWxsJywgY29sdW1uOiBlLmNvbHVtbiB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUudXBkYXRlU2Nyb2xsUG9zdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHggPSB1dGlsXzEuZ2V0UG9zaXRpb24oZSkueDtcbiAgICAgICAgICAgIHZhciBjbGlSZWN0QmFzZSA9IHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsRWxlbSA9IHRoaXMucGFyZW50LmdldENvbnRlbnQoKS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIGlmICh4ID4gY2xpUmVjdEJhc2UubGVmdCAmJiB4IDwgY2xpUmVjdEJhc2UubGVmdCArIDM1KSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IF90aGlzLnNldFNjcm9sbExlZnQoc2Nyb2xsRWxlbSwgdHJ1ZSk7IH0sIDUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHggPCBjbGlSZWN0QmFzZS5yaWdodCAmJiB4ID4gY2xpUmVjdEJhc2UucmlnaHQgLSAzNSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBfdGhpcy5zZXRTY3JvbGxMZWZ0KHNjcm9sbEVsZW0sIGZhbHNlKTsgfSwgNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5zZXRTY3JvbGxMZWZ0ID0gZnVuY3Rpb24gKHNjcm9sbEVsZW0sIGlzTGVmdCkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSBzY3JvbGxFbGVtLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBzY3JvbGxFbGVtLnNjcm9sbExlZnQgPSBzY3JvbGxFbGVtLnNjcm9sbExlZnQgKyAoaXNMZWZ0ID8gLTUgOiA1KTtcbiAgICAgICAgICAgIGlmIChzY3JvbGxMZWZ0ICE9PSBzY3JvbGxFbGVtLnNjcm9sbExlZnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldERpc3BsYXkoJ25vbmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuc3RvcFRpbWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLnVwZGF0ZUFycm93UG9zaXRpb24gPSBmdW5jdGlvbiAodGFyZ2V0LCBpc0xlZnQpIHtcbiAgICAgICAgICAgIHZhciBjbGlSZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGNsaVJlY3RCYXNlID0gdGhpcy5wYXJlbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGlmICgoaXNMZWZ0ICYmIGNsaVJlY3QubGVmdCA8IGNsaVJlY3RCYXNlLmxlZnQpIHx8ICghaXNMZWZ0ICYmIGNsaVJlY3QucmlnaHQgPiBjbGlSZWN0QmFzZS5yaWdodCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwQXJyb3cuc3R5bGUudG9wID0gY2xpUmVjdC50b3AgKyBjbGlSZWN0LmhlaWdodCAtIGNsaVJlY3RCYXNlLnRvcCArICdweCc7XG4gICAgICAgICAgICB0aGlzLmRvd25BcnJvdy5zdHlsZS50b3AgPSBjbGlSZWN0LnRvcCAtIGNsaVJlY3RCYXNlLnRvcCAtIDQgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy51cEFycm93LnN0eWxlLmxlZnQgPSB0aGlzLmRvd25BcnJvdy5zdHlsZS5sZWZ0ID0gKGlzTGVmdCA/IGNsaVJlY3QubGVmdCA6IGNsaVJlY3QucmlnaHQpIC0gY2xpUmVjdEJhc2UubGVmdCAtIDQgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5zZXREaXNwbGF5KCcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgUmVvcmRlci5wcm90b3R5cGUuZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWhlYWRlcmNlbGwnKSA/IHRhcmdldCA6XG4gICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIHRoaXMueCA9IHV0aWxfMS5nZXRQb3NpdGlvbihlLmV2ZW50KS54ICsgZ09iai5nZXRDb250ZW50KCkuZmlyc3RFbGVtZW50Q2hpbGQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY29sdW1uRHJhZ1N0YXJ0LCB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdoZWFkZXJjZWxsJywgY29sdW1uOiBlLmNvbHVtblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFJlb3JkZXIucHJvdG90eXBlLmRyYWdTdG9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXkoJ25vbmUnKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICBpZiAoIWUuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5jb2x1bW5Ecm9wLCB7IHRhcmdldDogZS50YXJnZXQsIGRyYWdnYWJsZVR5cGU6ICdoZWFkZXJjZWxsJywgY29sdW1uOiBlLmNvbHVtbiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlQ2xhc3MoZ09iai5nZXRIZWFkZXJUYWJsZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJlb3JkZXJpbmRpY2F0ZScpLCBbJ2UtcmVvcmRlcmluZGljYXRlJ10pO1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5zZXREaXNwbGF5ID0gZnVuY3Rpb24gKGRpc3BsYXkpIHtcbiAgICAgICAgICAgIHRoaXMudXBBcnJvdy5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICAgICAgICAgIHRoaXMuZG93bkFycm93LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xuICAgICAgICB9O1xuICAgICAgICBSZW9yZGVyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdyZW9yZGVyJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJlb3JkZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJlb3JkZXIgPSBSZW9yZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcmVvcmRlci5qc1xuLy8gbW9kdWxlIGlkID0gNThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSb3dERCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJvd0REKHBhcmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gW107XG4gICAgICAgICAgICB0aGlzLmhlbHBlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZ3JpZGRyYWdhcmVhJykubGVuZ3RoIHx8XG4gICAgICAgICAgICAgICAgICAgICFlLnNlbmRlci50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNlbGVjdGlvbmJhY2tncm91bmQnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB2aXN1YWxFbGVtZW50ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtY2xvbmVwcm9wZXJ0aWVzIGUtZHJhZ2FuZGRyb3AgZS1ncmlkIGUtZHJhZ2Nsb25lJyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiAnaGVpZ2h0OlwiYXV0b1wiLCB6LWluZGV4OjIsIHdpZHRoOicgKyBnT2JqLmVsZW1lbnQub2Zmc2V0V2lkdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJywgeyBzdHlsZXM6ICd3aWR0aDonICsgZ09iai5lbGVtZW50Lm9mZnNldFdpZHRoIH0pO1xuICAgICAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3dzID0gZ09iai5nZXRTZWxlY3RlZFJvd3MoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2VsZWN0ZWRSb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvdyA9IHNlbGVjdGVkUm93c1tpXS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHNlbGVjdGVkUm93LCAnLmUtaW5kZW50Y2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucmVtb3ZlRWxlbWVudChzZWxlY3RlZFJvdywgJy5lLWRldGFpbHJvd2NvbGxhcHNlJyk7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5yZW1vdmVFbGVtZW50KHNlbGVjdGVkUm93LCAnLmUtZGV0YWlscm93ZXhwYW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHNlbGVjdGVkUm93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnQuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5hcHBlbmRDaGlsZCh2aXN1YWxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmlzdWFsRWxlbWVudDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtZ3JpZGRyYWdhcmVhJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5yb3dEcmFnU3RhcnQsIHtcbiAgICAgICAgICAgICAgICAgICAgcm93czogZ09iai5nZXRTZWxlY3RlZFJvd3MoKSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBlLnRhcmdldCwgZHJhZ2dhYmxlVHlwZTogJ3Jvd3MnLCBkYXRhOiBnT2JqLmdldFNlbGVjdGVkUmVjb3JkcygpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGRyb3BFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZ09iai5yb3dEcm9wU2V0dGluZ3MudGFyZ2V0SUQpO1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLnJvd0Ryb3BTZXR0aW5ncy50YXJnZXRJRCAmJiBkcm9wRWxlbSAmJiBkcm9wRWxlbS5lajJfaW5zdGFuY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3BFbGVtLmVqMl9pbnN0YW5jZXNbMF0uZ2V0Q29udGVudCgpLmNsYXNzTGlzdC5hZGQoJ2UtYWxsb3dSb3dEcm9wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLmlzRHJhZ1N0b3AgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWcgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciBjbG9uZUVsZW1lbnQgPSBfdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1jbG9uZXByb3BlcnRpZXMnKTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gX3RoaXMuZ2V0RWxlbWVudEZyb21Qb3NpdGlvbihjbG9uZUVsZW1lbnQsIGUuZXZlbnQpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLWRlZmF1bHRjdXInXSwgWydlLW5vdGFsbG93ZWRjdXInXSk7XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5yb3dEcmFnLCB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3M6IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKCksXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAncm93cycsIGRhdGE6IGdPYmouZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBnT2JqLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1yb3dkcmFnJyk7XG4gICAgICAgICAgICAgICAgaWYgKCF1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSB8fFxuICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGNsb25lRWxlbWVudC5wYXJlbnRFbGVtZW50LCAnZS1ncmlkJykuaWQgPT09IHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1ncmlkJykuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMy5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2Utbm90YWxsb3dlZGN1ciddLCBbJ2UtZGVmYXVsdGN1ciddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdPYmogPSBfdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IF90aGlzLmdldEVsZW1lbnRGcm9tUG9zaXRpb24oZS5oZWxwZXIsIGUuZXZlbnQpO1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXJvd2RyYWcnKTtcbiAgICAgICAgICAgICAgICB2YXIgZHJvcEVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChnT2JqLnJvd0Ryb3BTZXR0aW5ncy50YXJnZXRJRCk7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmoucm93RHJvcFNldHRpbmdzLnRhcmdldElEICYmIGRyb3BFbGVtICYmIGRyb3BFbGVtLmVqMl9pbnN0YW5jZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJvcEVsZW0uZWoyX2luc3RhbmNlc1swXS5nZXRDb250ZW50KCkuY2xhc3NMaXN0LnJlbW92ZSgnZS1hbGxvd1Jvd0Ryb3AnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5yb3dEcm9wLCB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAncm93cycsXG4gICAgICAgICAgICAgICAgICAgIHJvd3M6IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKCksIGRhdGE6IGdPYmouZ2V0U2VsZWN0ZWRSZWNvcmRzKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1ncmlkY29udGVudCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKGUuaGVscGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmluaXRpYWxpemVEcmFnLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5Ecm9wLCB0aGlzLmNvbHVtbkRyb3AsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnJvd0RyYWdBbmREcm9wQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5pbml0aWFsaXplRHJhZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICAgICAgdmFyIGRyYWc7XG4gICAgICAgICAgICBkcmFnID0gbmV3IGVqMl9iYXNlXzEuRHJhZ2dhYmxlKGdPYmouZ2V0Q29udGVudCgpLCB7XG4gICAgICAgICAgICAgICAgZHJhZ1RhcmdldDogJy5lLXJvd2NlbGwnLFxuICAgICAgICAgICAgICAgIGRpc3RhbmNlOiA1LFxuICAgICAgICAgICAgICAgIGhlbHBlcjogdGhpcy5oZWxwZXIsXG4gICAgICAgICAgICAgICAgZHJhZ1N0YXJ0OiB0aGlzLmRyYWdTdGFydCxcbiAgICAgICAgICAgICAgICBkcmFnOiB0aGlzLmRyYWcsXG4gICAgICAgICAgICAgICAgZHJhZ1N0b3A6IHRoaXMuZHJhZ1N0b3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuZ2V0RWxlbWVudEZyb21Qb3NpdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldDtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHV0aWxfMS5nZXRQb3NpdGlvbihldmVudCk7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB0YXJnZXQgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUub25BY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMi5leHRlbmQoZSwgeyB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGUgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuZ2V0VGFyZ2V0SWR4ID0gZnVuY3Rpb24gKHRhcmdldFJvdykge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFJvdyA/IHBhcnNlSW50KHRhcmdldFJvdy5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApIDogMDtcbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmNvbHVtbkRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChlLmRyb3BwZWRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYWN0aW9uJykgIT09ICdncm91cGluZycpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0Um93ID0gZWoyX2Jhc2VfMy5jbG9zZXN0KGUudGFyZ2V0LCAndHInKTtcbiAgICAgICAgICAgICAgICB2YXIgc3JjQ29udHJvbCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChlLmRyb3BwZWRFbGVtZW50LnBhcmVudEVsZW1lbnQuaWQgIT09IGdPYmouZWxlbWVudC5pZCkge1xuICAgICAgICAgICAgICAgICAgICBzcmNDb250cm9sID0gZS5kcm9wcGVkRWxlbWVudC5wYXJlbnRFbGVtZW50LmVqMl9pbnN0YW5jZXNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzcmNDb250cm9sLmVsZW1lbnQuaWQgIT09IGdPYmouZWxlbWVudC5pZCAmJiBzcmNDb250cm9sLnJvd0Ryb3BTZXR0aW5ncy50YXJnZXRJRCAhPT0gZ09iai5lbGVtZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJlY29yZHMgPSBzcmNDb250cm9sLmdldFNlbGVjdGVkUmVjb3JkcygpO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRJbmRleCA9IGN1cnJlbnRJbmRleCA9IHRoaXMuZ2V0VGFyZ2V0SWR4KHRhcmdldFJvdyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4odGFyZ2V0SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEluZGV4ID0gY3VycmVudEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dQYWdpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SW5kZXggPSB0YXJnZXRJbmRleCArIChnT2JqLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAqIGdPYmoucGFnZVNldHRpbmdzLnBhZ2VTaXplKSAtIGdPYmoucGFnZVNldHRpbmdzLnBhZ2VTaXplO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucm93c0FkZGVkLCB7IHRvSW5kZXg6IHRhcmdldEluZGV4LCByZWNvcmRzOiByZWNvcmRzIH0pO1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCByZXF1ZXN0VHlwZTogJ3Jvd2RyYWdhbmRkcm9wJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFJvd3MgPSBzcmNDb250cm9sLmdldFNlbGVjdGVkUm93SW5kZXhlcygpO1xuICAgICAgICAgICAgICAgIHZhciBza2lwID0gc3JjQ29udHJvbC5hbGxvd1BhZ2luZyA/XG4gICAgICAgICAgICAgICAgICAgIChzcmNDb250cm9sLnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSAqIHNyY0NvbnRyb2wucGFnZVNldHRpbmdzLnBhZ2VTaXplKSAtIHNyY0NvbnRyb2wucGFnZVNldHRpbmdzLnBhZ2VTaXplIDogMDtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByZWNvcmRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzLnB1c2goc2tpcCArIHNlbGVjdGVkUm93c1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNyY0NvbnRyb2wubm90aWZ5KGV2ZW50cy5yb3dzUmVtb3ZlZCwgeyBpbmRleGVzOiB0aGlzLnNlbGVjdGVkUm93cyB9KTtcbiAgICAgICAgICAgICAgICBzcmNDb250cm9sLm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgcmVxdWVzdFR5cGU6ICdyb3dkcmFnYW5kZHJvcCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUm93REQucHJvdG90eXBlLmVuYWJsZUFmdGVyUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSA9PT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkgJiYgZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVEcmFnKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJvd0RELnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmluaXRpYWxpemVEcmFnKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJvcCwgdGhpcy5jb2x1bW5Ecm9wKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMucm93RHJhZ0FuZERyb3BDb21wbGV0ZSwgdGhpcy5vbkFjdGlvbkNvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIpO1xuICAgICAgICB9O1xuICAgICAgICBSb3dERC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAncm93RHJhZ0FuZERyb3AnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUm93REQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlJvd0REID0gUm93REQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy9yb3ctcmVvcmRlci5qc1xuLy8gbW9kdWxlIGlkID0gNTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3NlcnZpY2VzL2FyaWEtc2VydmljZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzLCBhcmlhX3NlcnZpY2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgR3JvdXAgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBHcm91cChwYXJlbnQsIGdyb3VwU2V0dGluZ3MsIHNvcnRlZENvbHVtbnMsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy52aXN1YWxFbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1jbG9uZXByb3BlcnRpZXMgZS1kcmFnY2xvbmUgZS1nZGNsb25lJyxcbiAgICAgICAgICAgICAgICBzdHlsZXM6ICdsaW5lLWhlaWdodDoyM3B4JywgYXR0cnM6IHsgYWN0aW9uOiAnZ3JvdXBpbmcnIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBnT2JqID0gX3RoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnNlbmRlci50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWdyb3VwaGVhZGVyY2VsbCcpID8gdGFyZ2V0IDpcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyb3VwaGVhZGVyY2VsbCcpO1xuICAgICAgICAgICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLmNvbHVtbiA9IGdPYmouZ2V0Q29sdW1uQnlGaWVsZChlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmdldEF0dHJpYnV0ZSgnZWotbWFwcGluZ25hbWUnKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMudmlzdWFsRWxlbWVudC50ZXh0Q29udGVudCA9IGVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgX3RoaXMudmlzdWFsRWxlbWVudC5zdHlsZS53aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGggKyAyICsgJ3B4JztcbiAgICAgICAgICAgICAgICBfdGhpcy52aXN1YWxFbGVtZW50LnN0eWxlLmhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgMiArICdweCc7XG4gICAgICAgICAgICAgICAgX3RoaXMudmlzdWFsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcsIF90aGlzLmNvbHVtbi51aWQpO1xuICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5hcHBlbmRDaGlsZChfdGhpcy52aXN1YWxFbGVtZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudmlzdWFsRWxlbWVudDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRyYWdTdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wYXJlbnQuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLXVuZ3JvdXBkcmFnJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIGNsb25lRWxlbWVudCA9IF90aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNsb25lcHJvcGVydGllcycpO1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5jb2x1bW5EcmFnLCB7IHRhcmdldDogdGFyZ2V0LCBkcmFnZ2FibGVUeXBlOiAnaGVhZGVyY2VsbCcsIGNvbHVtbjogX3RoaXMuY29sdW1uIH0pO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGNsb25lRWxlbWVudCwgWydlLWRlZmF1bHRjdXInXSwgWydlLW5vdGFsbG93ZWRjdXInXSk7XG4gICAgICAgICAgICAgICAgaWYgKCEodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWdyaWRjb250ZW50JykgfHwgdXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLWhlYWRlcmNlbGwnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2Utbm90YWxsb3dlZGN1ciddLCBbJ2UtZGVmYXVsdGN1ciddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50LmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS11bmdyb3VwZHJhZycpO1xuICAgICAgICAgICAgICAgIGlmICghKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWdyaWRjb250ZW50JykgfHwgdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgJ2UtZ3JpZGhlYWRlcicpKSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShlLmhlbHBlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kcm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ09iaiA9IF90aGlzLnBhcmVudDtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeVVpZChlLmRyb3BwZWRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1ob3ZlcicpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGUuZHJvcHBlZEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIF90aGlzLmFyaWEuc2V0RHJvcFRhcmdldChfdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cGRyb3BhcmVhJyksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hcmlhLnNldEdyYWJiZWQoX3RoaXMucGFyZW50LmdldEhlYWRlclRhYmxlKCkucXVlcnlTZWxlY3RvcignW2FyaWEtZ3JhYmJlZD10cnVlXScpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uKSB8fCBjb2x1bW4uYWxsb3dHcm91cGluZyA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICAgICAgICAgdXRpbF8xLnBhcmVudHNVbnRpbChnT2JqLmdldENvbHVtbkhlYWRlckJ5VWlkKGNvbHVtbi51aWQpLCAnZS1ncmlkJykuZ2V0QXR0cmlidXRlKCdpZCcpICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLmdyb3VwQ29sdW1uKGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFyaWEgPSBuZXcgYXJpYV9zZXJ2aWNlXzEuQXJpYVNlcnZpY2UoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5ncm91cFNldHRpbmdzID0gZ3JvdXBTZXR0aW5ncztcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuc29ydGVkQ29sdW1ucyA9IHNvcnRlZENvbHVtbnM7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBHcm91cC5wcm90b3R5cGUuY29sdW1uRHJhZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNsb25lRWxlbWVudCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtY2xvbmVwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdChjbG9uZUVsZW1lbnQsIFsnZS1kZWZhdWx0Y3VyJ10sIFsnZS1ub3RhbGxvd2VkY3VyJ10pO1xuICAgICAgICAgICAgaWYgKCF1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncm91cGRyb3BhcmVhJykgJiZcbiAgICAgICAgICAgICAgICAhKHRoaXMucGFyZW50LmFsbG93UmVvcmRlcmluZyAmJiB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1oZWFkZXJjZWxsJykpKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoY2xvbmVFbGVtZW50LCBbJ2Utbm90YWxsb3dlZGN1ciddLCBbJ2UtZGVmYXVsdGN1ciddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1ncm91cGRyb3BhcmVhJykgPyB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ob3ZlcicpIDogdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2UtaG92ZXInKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNvbHVtbkRyYWdTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXN0YWNrZWRoZWFkZXJjZWxsJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGRyb3BBcmVhID0gdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncm91cGRyb3BhcmVhJyk7XG4gICAgICAgICAgICB0aGlzLmFyaWEuc2V0RHJvcFRhcmdldChkcm9wQXJlYSwgZS5jb2x1bW4uYWxsb3dHcm91cGluZyk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS1oZWFkZXJjZWxsJykgPyBlLnRhcmdldCA6IHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLWhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIHRoaXMuYXJpYS5zZXRHcmFiYmVkKGVsZW1lbnQsIHRydWUsICFlLmNvbHVtbi5hbGxvd0dyb3VwaW5nKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNvbHVtbkRyb3AgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChlLmRyb3BwZWRFbGVtZW50LmdldEF0dHJpYnV0ZSgnYWN0aW9uJykgPT09ICdncm91cGluZycpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeVVpZChlLmRyb3BwZWRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpO1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbHVtbikgfHwgY29sdW1uLmFsbG93R3JvdXBpbmcgPT09IGZhbHNlIHx8XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5wYXJlbnRzVW50aWwoZ09iai5nZXRDb2x1bW5IZWFkZXJCeVVpZChjb2x1bW4udWlkKSwgJ2UtZ3JpZCcpLmdldEF0dHJpYnV0ZSgnaWQnKSAhPT1cbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVuZ3JvdXBDb2x1bW4oY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmdyb3VwQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMudW5ncm91cENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNsaWNrLCB0aGlzLmNsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY29sdW1uRHJhZywgdGhpcy5jb2x1bW5EcmFnLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMuY29sdW1uRHJhZ1N0YXJ0LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5jb2x1bW5Ecm9wLCB0aGlzLmNvbHVtbkRyb3AsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmhlYWRlclJlZnJlc2hlZCwgdGhpcy5yZWZyZXNoU29ydEljb25zLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5zb3J0Q29tcGxldGUsIHRoaXMucmVmcmVzaFNvcnRJY29ucywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbnRlbnRSZWFkeSwgdGhpcy5pbml0aWFsRW5kLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLnJlbmRlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaGVhZGVyRHJvcCwgdGhpcy5oZWFkZXJEcm9wLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMuZW5hYmxlQWZ0ZXJSZW5kZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5ncm91cENvbXBsZXRlLCB0aGlzLm9uQWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy51bmdyb3VwQ29tcGxldGUsIHRoaXMub25BY3Rpb25Db21wbGV0ZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jbGljaywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnLCB0aGlzLmNvbHVtbkRyYWcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb2x1bW5EcmFnU3RhcnQsIHRoaXMuY29sdW1uRHJhZ1N0YXJ0KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY29sdW1uRHJvcCwgdGhpcy5jb2x1bW5Ecm9wKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyUmVmcmVzaGVkLCB0aGlzLnJlZnJlc2hTb3J0SWNvbnMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5zb3J0Q29tcGxldGUsIHRoaXMucmVmcmVzaFNvcnRJY29ucyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaGVhZGVyRHJvcCwgdGhpcy5oZWFkZXJEcm9wKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmluaXRpYWxFbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5jb250ZW50UmVhZHksIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLmxlbmd0aCAmJiB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouZ3JvdXBTZXR0aW5ncy5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwQ29sdW1uKGNvbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFJlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdhbHREb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2FsdFVwQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBnT2JqLmFsbG93U2VsZWN0aW9uID8gZ09iai5nZXRTZWxlY3RlZFJvd0luZGV4ZXMoKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93cyA9IGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhUm93ID0gZ09iai5nZXREYXRhUm93cygpW3NlbGVjdGVkW3NlbGVjdGVkLmxlbmd0aCAtIDFdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncnBSb3cgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gZGF0YVJvdy5yb3dJbmRleDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJvdycpICYmICFyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1kZXRhaWxyb3cnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncnBSb3cgPSByb3dzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlUm93cyhncnBSb3cucXVlcnlTZWxlY3RvcihlLmFjdGlvbiA9PT0gJ2FsdFVwQXJyb3cnID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLmUtcmVjb3JkcGx1c2V4cGFuZCcgOiAnLmUtcmVjb3JkcGx1c2NvbGxhcHNlJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N0cmxEb3duQXJyb3cnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZEFsbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdHJsVXBBcnJvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZVJvd3MoZS50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy5hcHBseVNvcnRGcm9tVGFyZ2V0KGUudGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMudW5Hcm91cEZyb21UYXJnZXQoZS50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy50b29nbGVHcm91cEZyb21IZWFkZXIoZS50YXJnZXQpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudW5Hcm91cEZyb21UYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS11bmdyb3VwYnV0dG9uJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuZ3JvdXBDb2x1bW4odGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlai1tYXBwaW5nbmFtZScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnRvb2dsZUdyb3VwRnJvbUhlYWRlciA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd1RvZ2dsZUJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWdycHRvZ2dsZWJ0bicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXRvZ2dsZXVuZ3JvdXAnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmdyb3VwQ29sdW1uKHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKHRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZS1tYXBwaW5ndWlkJykpLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBDb2x1bW4odGhpcy5wYXJlbnQuZ2V0Q29sdW1uQnlVaWQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSkuZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZS10b2dnbGV1bmdyb3VwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbih0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2VqLW1hcHBpbmduYW1lJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuYXBwbHlTb3J0RnJvbVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ0hlYWRlciA9IGVqMl9iYXNlXzIuY2xvc2VzdCh0YXJnZXQsICcuZS1ncm91cGhlYWRlcmNlbGwnKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93U29ydGluZyAmJiBnSGVhZGVyICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXVuZ3JvdXBidXR0b24nKSAmJlxuICAgICAgICAgICAgICAgICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXRvZ2dsZXVuZ3JvdXAnKSkge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IGdIZWFkZXIuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0QXR0cmlidXRlKCdlai1tYXBwaW5nbmFtZScpO1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmdldENvbHVtbkhlYWRlckJ5RmllbGQoZmllbGQpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWFzY2VuZGluZycpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLnNvcnRDb2x1bW4oZmllbGQsICdkZXNjZW5kaW5nJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLnNvcnRDb2x1bW4oZmllbGQsICdhc2NlbmRpbmcnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5leHBhbmRDb2xsYXBzZVJvd3MgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgdHJndCA9IHV0aWxfMS5wYXJlbnRzVW50aWwodGFyZ2V0LCAnZS1yZWNvcmRwbHVzZXhwYW5kJykgfHxcbiAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJyk7XG4gICAgICAgICAgICBpZiAodHJndCkge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsSWR4ID0gdHJndC5jZWxsSW5kZXg7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0lkeCA9IHRyZ3QucGFyZW50RWxlbWVudC5yb3dJbmRleDtcbiAgICAgICAgICAgICAgICB2YXIgcm93Tm9kZXMgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgIHZhciByb3dzID0gW10uc2xpY2UuY2FsbChyb3dOb2Rlcykuc2xpY2Uocm93SWR4ICsgMSwgcm93Tm9kZXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB2YXIgaXNIaWRlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBleHBhbmRFbGVtID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciB0b0V4cGFuZCA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBpbmRlbnQgPSB0cmd0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtaW5kZW50Y2VsbCcpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgZXhwYW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHRyZ3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXJlY29yZHBsdXNjb2xsYXBzZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3QuY2xhc3NOYW1lID0gJ2UtcmVjb3JkcGx1c2V4cGFuZCc7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3QuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NOYW1lID0gJ2UtaWNvbnMgZS1nZGlhZ29uYWxkb3duIGUtaWNvbi1nZG93bmFycm93JztcbiAgICAgICAgICAgICAgICAgICAgZXhwYW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlzSGlkZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRyZ3QuY2xhc3NOYW1lID0gJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJztcbiAgICAgICAgICAgICAgICAgICAgdHJndC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc05hbWUgPSAnZS1pY29ucyBlLWduZXh0Zm9yd2FyZCBlLWljb24tZ3JpZ2h0YXJyb3cnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFyaWEuc2V0RXhwYW5kKHRyZ3QsIGV4cGFuZCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0ucXVlcnlTZWxlY3RvckFsbCgndGQnKVtjZWxsSWR4XSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpW2NlbGxJZHhdLmNsYXNzTGlzdC5jb250YWlucygnZS1pbmRlbnRjZWxsJykgJiYgcm93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzSGlkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWluZGVudGNlbGwnKS5sZW5ndGggPT09IGluZGVudCArIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZEVsZW0gPSByb3dzW2ldLnF1ZXJ5U2VsZWN0b3IoJy5lLXJlY29yZHBsdXNleHBhbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4cGFuZEVsZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvRXhwYW5kLnB1c2goZXhwYW5kRWxlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRldGFpbHJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpIC0gMV0ucXVlcnlTZWxlY3RvckFsbCgnLmUtZGV0YWlscm93Y29sbGFwc2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdG9FeHBhbmQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdG9FeHBhbmRbaV0uY2xhc3NOYW1lID0gJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJztcbiAgICAgICAgICAgICAgICAgICAgdG9FeHBhbmRbaV0uZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NOYW1lID0gJ2UtaWNvbnMgZS1nbmV4dGZvcndhcmQgZS1pY29uLWdyaWdodGFycm93JztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZVJvd3ModG9FeHBhbmRbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmV4cGFuZENvbGxhcHNlID0gZnVuY3Rpb24gKGlzRXhwYW5kKSB7XG4gICAgICAgICAgICB2YXIgcm93Tm9kZXMgPSB0aGlzLnBhcmVudC5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLmNoaWxkcmVuO1xuICAgICAgICAgICAgdmFyIHJvdztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dOb2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3dOb2Rlc1tpXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1yZWNvcmRwbHVzZXhwYW5kLCAuZS1yZWNvcmRwbHVzY29sbGFwc2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93ID0gcm93Tm9kZXNbaV0ucXVlcnlTZWxlY3Rvcihpc0V4cGFuZCA/ICcuZS1yZWNvcmRwbHVzY29sbGFwc2UnIDogJy5lLXJlY29yZHBsdXNleHBhbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNsYXNzTmFtZSA9IGlzRXhwYW5kID8gJ2UtcmVjb3JkcGx1c2V4cGFuZCcgOiAnZS1yZWNvcmRwbHVzY29sbGFwc2UnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTmFtZSA9IGlzRXhwYW5kID8gJ2UtaWNvbnMgZS1nZGlhZ29uYWxkb3duIGUtaWNvbi1nZG93bmFycm93JyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2UtaWNvbnMgZS1nbmV4dGZvcndhcmQgZS1pY29uLWdyaWdodGFycm93JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIShyb3dOb2Rlc1tpXS5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcmVjb3JkcGx1c2V4cGFuZCcpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dOb2Rlc1tpXS5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcmVjb3JkcGx1c2NvbGxhcHNlJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dOb2Rlc1tpXS5zdHlsZS5kaXNwbGF5ID0gaXNFeHBhbmQgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm93Tm9kZXNbaV0uc3R5bGUuZGlzcGxheSA9IGlzRXhwYW5kID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZXhwYW5kQWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZSh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmNvbGxhcHNlQWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZShmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJHcm91cERyb3BBcmVhKCk7XG4gICAgICAgICAgICB0aGlzLmluaXREcmFnQW5kRHJvcCgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9nZ2xlQnRuKCk7XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5yZW5kZXJHcm91cERyb3BBcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JvdXBkcm9wYXJlYScsIGF0dHJzOiB7ICd0YWJpbmRleCc6ICctMScgfSB9KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlR3JvdXBEcm9wQXJlYSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5lbGVtZW50LCB0aGlzLnBhcmVudC5lbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd0Ryb3BBcmVhKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51cGRhdGVHcm91cERyb3BBcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEgJiYgIXRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBkcmFnTGFiZWwgPSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0dyb3VwRHJvcEFyZWEnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gZHJhZ0xhYmVsO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLWdyb3VwZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID09PSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0dyb3VwRHJvcEFyZWEnKSAmJiB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1ncm91cGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5pbml0RHJhZ0FuZERyb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVHSGVhZGVyRHJvcCgpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplR0hlYWRlckRyYWcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmluaXRpYWxpemVHSGVhZGVyRHJhZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkcmFnID0gbmV3IGVqMl9iYXNlXzEuRHJhZ2dhYmxlKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGRyYWdUYXJnZXQ6ICcuZS1ncm91cGhlYWRlcmNlbGwnLFxuICAgICAgICAgICAgICAgIGRpc3RhbmNlOiA1LFxuICAgICAgICAgICAgICAgIGhlbHBlcjogdGhpcy5oZWxwZXIsXG4gICAgICAgICAgICAgICAgZHJhZ1N0YXJ0OiB0aGlzLmRyYWdTdGFydCxcbiAgICAgICAgICAgICAgICBkcmFnOiB0aGlzLmRyYWcsXG4gICAgICAgICAgICAgICAgZHJhZ1N0b3A6IHRoaXMuZHJhZ1N0b3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuaGVhZGVyRHJvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIWUudWlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKGUudWlkKTtcbiAgICAgICAgICAgIHRoaXMudW5ncm91cENvbHVtbihjb2x1bW4uZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuaW5pdGlhbGl6ZUdIZWFkZXJEcm9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBkcm9wID0gbmV3IGVqMl9iYXNlXzEuRHJvcHBhYmxlKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGFjY2VwdDogJy5lLWRyYWdjbG9uZScsXG4gICAgICAgICAgICAgICAgZHJvcDogdGhpcy5kcm9wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmdyb3VwQ29sdW1uID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbk5hbWUpO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoY29sdW1uKSB8fCBjb2x1bW4uYWxsb3dHcm91cGluZyA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5jb250ZW50UmVmcmVzaCAmJiB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHVtbk5hbWUpID4gLTEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHV0aWxfMS5pc0FjdGlvblByZXZlbnQoZ09iaikpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMucHJldmVudEJhdGNoLCB7IGluc3RhbmNlOiB0aGlzLCBoYW5kbGVyOiB0aGlzLmdyb3VwQ29sdW1uLCBhcmcxOiBjb2x1bW5OYW1lIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHVtbi52aXNpYmxlID0gZ09iai5ncm91cFNldHRpbmdzLnNob3dHcm91cGVkQ29sdW1uO1xuICAgICAgICAgICAgdGhpcy5jb2xOYW1lID0gY29sdW1uTmFtZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDb2xUb0dyb3VwRHJvcChjb2x1bW5OYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlR3JvdXBEcm9wQXJlYSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUudW5ncm91cENvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5OYW1lKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID9cbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5jb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZCA9PT0gY29sdW1uTmFtZTsgfSlbMF0gOiBnT2JqLmdldENvbHVtbkJ5RmllbGQoY29sdW1uTmFtZSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChjb2x1bW4pIHx8IGNvbHVtbi5hbGxvd0dyb3VwaW5nID09PSBmYWxzZSB8fCB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHVtbk5hbWUpIDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1dGlsXzEuaXNBY3Rpb25QcmV2ZW50KGdPYmopKSB7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLnByZXZlbnRCYXRjaCwgeyBpbnN0YW5jZTogdGhpcywgaGFuZGxlcjogdGhpcy51bmdyb3VwQ29sdW1uLCBhcmcxOiBjb2x1bW5OYW1lIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHVtbi52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY29sTmFtZSA9IGNvbHVtbi5maWVsZDtcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucykpO1xuICAgICAgICAgICAgY29sdW1ucy5zcGxpY2UoY29sdW1ucy5pbmRleE9mKHRoaXMuY29sTmFtZSksIDEpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc29ydGVkQ29sdW1ucy5pbmRleE9mKGNvbHVtbk5hbWUpIDwgMCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2x1bW5OYW1lID09PSBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2ldLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMgPSBjb2x1bW5zO1xuICAgICAgICAgICAgaWYgKGdPYmouYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMpKTtcbiAgICAgICAgICAgIGNvbHVtbnMucHVzaCh0aGlzLmNvbE5hbWUpO1xuICAgICAgICAgICAgdGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnMgPSBjb2x1bW5zO1xuICAgICAgICAgICAgd2hpbGUgKGkgPCBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2ldLmZpZWxkID09PSB0aGlzLmNvbE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnMucHVzaCh7IGZpZWxkOiB0aGlzLmNvbE5hbWUsIGRpcmVjdGlvbjogJ2FzY2VuZGluZycgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghZ09iai5hbGxvd1NvcnRpbmcpIHtcbiAgICAgICAgICAgICAgICBnT2JqLnNvcnRTZXR0aW5ncy5jb2x1bW5zW2ldLmRpcmVjdGlvbiA9ICdhc2NlbmRpbmcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YUJpbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLm9uQWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChlLnJlcXVlc3RUeXBlID09PSAnZ3JvdXBpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDb2xUb0dyb3VwRHJvcCh0aGlzLmNvbE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDb2xGcm9tR3JvdXBEcm9wKHRoaXMuY29sTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YodGhpcy5jb2xOYW1lKSA+IC0xID8ge1xuICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IHRoaXMuY29sTmFtZSwgcmVxdWVzdFR5cGU6ICdncm91cGluZycsIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgfSA6IHsgcmVxdWVzdFR5cGU6ICd1bmdyb3VwaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkNvbXBsZXRlIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMy5leHRlbmQoZSwgYXJncykpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuYWRkQ29sVG9Hcm91cERyb3AgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gJ2FzY2VuZGluZyc7XG4gICAgICAgICAgICB2YXIgZ3JvdXBlZENvbHVtbiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLWdyaWQtaWNvbiBlLWdyb3VwaGVhZGVyY2VsbCcgfSk7XG4gICAgICAgICAgICB2YXIgY2hpbGREaXYgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgYXR0cnM6IHsgJ2VqLW1hcHBpbmduYW1lJzogZmllbGQgfSB9KTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJDZWxsID0gZ09iai5nZXRDb2x1bW5IZWFkZXJCeVVpZChjb2x1bW4udWlkKTtcbiAgICAgICAgICAgIGNoaWxkRGl2LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWdyb3VwdGV4dCcsIGlubmVySFRNTDogY29sdW1uLmhlYWRlclRleHQsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ3NvcnQgdGhlIGdyb3VwZWQgY29sdW1uJyB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpZiAodGhpcy5ncm91cFNldHRpbmdzLnNob3dUb2dnbGVCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBjaGlsZERpdi5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtdG9nZ2xlZ3JvdXBidXR0b24gZS1pY29ucyBlLWljb24tdW5ncm91cCBlLXRvZ2dsZXVuZ3JvdXAnLCBpbm5lckhUTUw6ICcmbmJzcDsnLFxuICAgICAgICAgICAgICAgICAgICBhdHRyczogeyB0YWJpbmRleDogJy0xJywgJ2FyaWEtbGFiZWwnOiAndW5ncm91cCBidXR0b24nIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGVhZGVyQ2VsbC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1hc2NlbmRpbmcsLmUtZGVzY2VuZGluZycpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGhlYWRlckNlbGwucXVlcnlTZWxlY3RvcignLmUtYXNjZW5kaW5nJykgPyAnYXNjZW5kaW5nJyA6ICdkZXNjZW5kaW5nJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoaWxkRGl2LmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWdyb3Vwc29ydCBlLWljb25zICcgKyAoJ2UtJyArIGRpcmVjdGlvbiArICcgZS1pY29uLScgKyBkaXJlY3Rpb24pLCBpbm5lckhUTUw6ICcmbmJzcDsnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHRhYmluZGV4OiAnLTEnLCAnYXJpYS1sYWJlbCc6ICdzb3J0IHRoZSBncm91cGVkIGNvbHVtbicgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY2hpbGREaXYuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMi5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2UtdW5ncm91cGJ1dHRvbiBlLWljb25zIGUtaWNvbi1oaWRlJywgaW5uZXJIVE1MOiAnJm5ic3A7JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0aXRsZTogdGhpcy5sMTBuLmdldENvbnN0YW50KCdVbkdyb3VwJyksIHRhYmluZGV4OiAnLTEnLCAnYXJpYS1sYWJlbCc6ICd1bmdyb3VwIHRoZSBncm91cGVkIGNvbHVtbicgfSxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VW5ncm91cEJ1dHRvbiA/ICcnIDogJ2Rpc3BsYXk6bm9uZSdcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGdyb3VwZWRDb2x1bW4uYXBwZW5kQ2hpbGQoY2hpbGREaXYpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGdyb3VwZWRDb2x1bW4pO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUucmVmcmVzaFRvZ2dsZUJ0biA9IGZ1bmN0aW9uIChpc1JlbW92ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93VG9nZ2xlQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBbXS5zbGljZS5jYWxsKHRoaXMucGFyZW50LmVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZS1oZWFkZXJjZWxsZGl2JykpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBoZWFkZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGhlYWRlcnNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWVtcHR5Y2VsbCcpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucGFyZW50LmdldENvbHVtbkJ5VWlkKGhlYWRlcnNbaV0uZ2V0QXR0cmlidXRlKCdlLW1hcHBpbmd1aWQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyc1tpXS5xdWVyeVNlbGVjdG9yQWxsKCcuZS1ncnB0b2dnbGVidG4nKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShoZWFkZXJzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWdycHRvZ2dsZWJ0bicpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNSZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW2ldLmFwcGVuZENoaWxkKGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1ncnB0b2dnbGVidG4gZS1pY29ucyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKGNvbHVtbi5maWVsZCkgPiAtMSA/ICdlLXRvZ2dsZXVuZ3JvdXAgZS1pY29uLXVuZ3JvdXAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnZS10b2dnbGVncm91cCBlLWljb24tZ3JvdXAnKSwgYXR0cnM6IHsgdGFiaW5kZXg6ICctMScsICdhcmlhLWxhYmVsJzogJ0dyb3VwIGJ1dHRvbicgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlbW92ZUNvbEZyb21Hcm91cERyb3AgPSBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZ2V0R0hlYWRlckNlbGwoZmllbGQpKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlR3JvdXBEcm9wQXJlYSgpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhlLnByb3BlcnRpZXMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjb2x1bW5zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5pbmRleE9mKHRoaXMuY29sTmFtZSkgPiAtMSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uTmFtZTogdGhpcy5jb2xOYW1lLCByZXF1ZXN0VHlwZTogJ2dyb3VwaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHsgcmVxdWVzdFR5cGU6ICd1bmdyb3VwaW5nJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5tb2RlbENoYW5nZWQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dEcm9wQXJlYSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUdyb3VwRHJvcEFyZWEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93RHJvcEFyZWEgPyB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnIDogdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hvd0dyb3VwZWRDb2x1bW4nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVHcm91cGVkQ29sdW1uKHRoaXMuZ3JvdXBTZXR0aW5ncy5zaG93R3JvdXBlZENvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgeyByZXF1ZXN0VHlwZTogJ3JlZnJlc2gnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dVbmdyb3VwQnV0dG9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQnV0dG9uVmlzaWJpbGl0eSh0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd1VuZ3JvdXBCdXR0b24sICdlLXVuZ3JvdXBidXR0b24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaG93VG9nZ2xlQnV0dG9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQnV0dG9uVmlzaWJpbGl0eSh0aGlzLmdyb3VwU2V0dGluZ3Muc2hvd1RvZ2dsZUJ1dHRvbiwgJ2UtdG9nZ2xlZ3JvdXBidXR0b24gJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5yZWZyZXNoSGVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51cGRhdGVHcm91cGVkQ29sdW1uID0gZnVuY3Rpb24gKGlzVmlzaWJsZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmdldENvbHVtbkJ5RmllbGQodGhpcy5ncm91cFNldHRpbmdzLmNvbHVtbnNbaV0pLnZpc2libGUgPSBpc1Zpc2libGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS51cGRhdGVCdXR0b25WaXNpYmlsaXR5ID0gZnVuY3Rpb24gKGlzVmlzaWJsZSwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgZ0hlYWRlciA9IFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgY2xhc3NOYW1lKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdIZWFkZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBnSGVhZGVyW2ldLnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmVuYWJsZUFmdGVyUmVuZGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm1vZHVsZSA9PT0gdGhpcy5nZXRNb2R1bGVOYW1lKCkgJiYgZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJHcm91cGluZygpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb2dnbGVCdG4odHJ1ZSk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBHcm91cC5wcm90b3R5cGUuY2xlYXJHcm91cGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmdyb3VwU2V0dGluZ3MuY29sdW1ucykpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuZ3JvdXBDb2x1bW4oY29sc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2dyb3VwJztcbiAgICAgICAgfTtcbiAgICAgICAgR3JvdXAucHJvdG90eXBlLnJlZnJlc2hTb3J0SWNvbnMgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBoZWFkZXI7XG4gICAgICAgICAgICB2YXIgY29scyA9IGdPYmouc29ydFNldHRpbmdzLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZ0NvbHMgPSBnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBmaWVsZE5hbWVzID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5maWVsZDsgfSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb2dnbGVCdG4oKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2xzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZXMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhlYWRlciA9IGdPYmouZ2V0Q29sdW1uSGVhZGVyQnlGaWVsZChjb2xzW2ldLmZpZWxkKTtcbiAgICAgICAgICAgICAgICBpZiAoIWdPYmouYWxsb3dTb3J0aW5nICYmICh0aGlzLnNvcnRlZENvbHVtbnMuaW5kZXhPZihjb2xzW2ldLmZpZWxkKSA+IC0xIHx8XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmluZGV4T2YoY29sc1tpXS5maWVsZCkgPiAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLXNvcnRmaWx0ZXJkaXYnKSwgWydlLWFzY2VuZGluZycsICdlLWljb24tYXNjZW5kaW5nJ10sIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5lLWhlYWRlcmNlbGxkaXYnKS5hcHBlbmRDaGlsZChlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2Utc29ydG51bWJlcicsIGlubmVySFRNTDogKGkgKyAxKS50b1N0cmluZygpIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmdldEdIZWFkZXJDZWxsKGNvbHNbaV0uZmllbGQpICYmIHRoaXMuZ2V0R0hlYWRlckNlbGwoY29sc1tpXS5maWVsZCkucXVlcnlTZWxlY3RvckFsbCgnLmUtZ3JvdXBzb3J0JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xzW2ldLmRpcmVjdGlvbiA9PT0gJ2FzY2VuZGluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KHRoaXMuZ2V0R0hlYWRlckNlbGwoY29sc1tpXS5maWVsZCkucXVlcnlTZWxlY3RvcignLmUtZ3JvdXBzb3J0JyksIFsnZS1hc2NlbmRpbmcnLCAnZS1pY29uLWFzY2VuZGluZyddLCBbJ2UtZGVzY2VuZGluZycsICdlLWljb24tZGVzY2VuZGluZyddKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KHRoaXMuZ2V0R0hlYWRlckNlbGwoY29sc1tpXS5maWVsZCkucXVlcnlTZWxlY3RvcignLmUtZ3JvdXBzb3J0JyksIFsnZS1kZXNjZW5kaW5nJywgJ2UtaWNvbi1kZXNjZW5kaW5nJ10sIFsnZS1hc2NlbmRpbmcnLCAnZS1pY29uLWFzY2VuZGluZyddKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBnQ29scy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzLmluZGV4T2YoZ0NvbHNbaV0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5nZXRDb2x1bW5IZWFkZXJCeUZpZWxkKGdDb2xzW2ldKS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZ3JvdXBlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdyb3VwLnByb3RvdHlwZS5nZXRHSGVhZGVyQ2VsbCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudCAmJiB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignW2VqLW1hcHBpbmduYW1lPScgKyBmaWVsZCArICddJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tlai1tYXBwaW5nbmFtZT0nICsgZmllbGQgKyAnXScpLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEdyb3VwO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Hcm91cCA9IEdyb3VwO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZ3JvdXAuanNcbi8vIG1vZHVsZSBpZCA9IDYwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX25hdmlnYXRpb25zXzEsIGV2ZW50cywgdXRpbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBUb29sYmFyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVG9vbGJhcihwYXJlbnQsIHNlcnZpY2VMb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnByZWRlZmluZWRJdGVtcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmdyaWRJRCA9IHBhcmVudC5lbGVtZW50LmlkO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlTG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sMTBuID0gdGhpcy5zZXJ2aWNlTG9jYXRvci5nZXRTZXJ2aWNlKCdsb2NhbGl6YXRpb24nKTtcbiAgICAgICAgICAgIHZhciBwcmVJdGVtcyA9IFsnYWRkJywgJ2VkaXQnLCAndXBkYXRlJywgJ2RlbGV0ZScsICdjYW5jZWwnLCAncHJpbnQnLFxuICAgICAgICAgICAgICAgICdwZGZleHBvcnQnLCAnZXhjZWxleHBvcnQnLCAnd29yZGV4cG9ydCcsICdjc3ZleHBvcnQnXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcHJlSXRlbXNfMSA9IHByZUl0ZW1zOyBfaSA8IHByZUl0ZW1zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBwcmVJdGVtc18xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxlTmFtZSA9IGl0ZW1bMF0udG9VcHBlckNhc2UoKSArIGl0ZW0uc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVkZWZpbmVkSXRlbXNbaXRlbV0gPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLmdyaWRJRCArICdfJyArIGl0ZW0sIHByZWZpeEljb246ICdlLScgKyBpdGVtLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQobG9jYWxlTmFtZSksIHRvb2x0aXBUZXh0OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQobG9jYWxlTmFtZSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmVkZWZpbmVkSXRlbXMuc2VhcmNoID0ge1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmdyaWRJRCArICdfc2VhcmNoJywgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwiZS1zZWFyY2hcIiByb2xlPVwic2VhcmNoXCIgPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCInICsgdGhpcy5ncmlkSUQgKyAnX3NlYXJjaGJ1dHRvblwiIGNsYXNzPVwiZS1zZWFyY2hmaW5kIGUtaWNvbnNcIiB0YWJpbmRleD1cIi0xXCJcXFxuICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIiBhcmlhLWxhYmVsPSBcInNlYXJjaFwiPjwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cIicgKyB0aGlzLmdyaWRJRCArICdfc2VhcmNoYmFyXCIgYXJpYS1tdWx0aWxpbmU9IFwiZmFsc2VcIiB0eXBlPVwic2VhcmNoXCJcXFxuICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPScgKyB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1NlYXJjaCcpICsgJz5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgIDwvaW5wdXQ+PC9kaXY+JywgdG9vbHRpcFRleHQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnU2VhcmNoJyksIGFsaWduOiAncmlnaHQnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wcmVkZWZpbmVkSXRlbXMuY29sdW1uY2hvb3NlciA9IHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5ncmlkSUQgKyAnXycgKyAnY29sdW1uY2hvb3NlcicsIGNzc0NsYXNzOiAnZS1jYyBlLWNjZGl2IGUtY2MtdG9vbGJhcicsIHN1ZmZpeEljb246ICdlLScgKyAnY29sdW1uY2hvb3Nlci1idG4nLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdDb2x1bW5zJywgdG9vbHRpcFRleHQ6ICdjb2x1bW5zJywgYWxpZ246ICdyaWdodCcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVUb29sYmFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldFRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b29sYmFyLmVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudG9vbGJhci5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmNyZWF0ZVRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmdldEl0ZW1zKCk7XG4gICAgICAgICAgICB0aGlzLnRvb2xiYXIgPSBuZXcgZWoyX25hdmlnYXRpb25zXzEuVG9vbGJhcih7XG4gICAgICAgICAgICAgICAgaXRlbXM6IGl0ZW1zLFxuICAgICAgICAgICAgICAgIGNsaWNrZWQ6IHRoaXMudG9vbGJhckNsaWNrSGFuZGxlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGVuYWJsZVBlcnNpc3RlbmNlOiB0aGlzLnBhcmVudC5lbmFibGVQZXJzaXN0ZW5jZSxcbiAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgdmlld1N0ciA9ICd2aWV3Q29udGFpbmVyUmVmJztcbiAgICAgICAgICAgIHZhciByZWdpc3RlclRlbXAgPSAncmVnaXN0ZXJlZFRlbXBsYXRlJztcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudFt2aWV3U3RyXSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhcltyZWdpc3RlclRlbXBdID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy50b29sYmFyW3ZpZXdTdHJdID0gdGhpcy5wYXJlbnRbdmlld1N0cl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgaWQ6IHRoaXMuZ3JpZElEICsgJ190b29sYmFySXRlbXMnIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnRvb2xiYXJUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMucGFyZW50LnRvb2xiYXJUZW1wbGF0ZSkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRUbyh0aGlzLnBhcmVudC50b29sYmFyVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLnRvb2xiYXIuZWxlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxfMS5hcHBlbmRDaGlsZHJlbih0aGlzLmVsZW1lbnQsIHV0aWxfMS50ZW1wbGF0ZUNvbXBpbGVyKHRoaXMucGFyZW50LnRvb2xiYXJUZW1wbGF0ZSkoe30sIHRoaXMucGFyZW50LCAndG9vbGJhclRlbXBsYXRlJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5lbGVtZW50LCB0aGlzLnBhcmVudC5nZXRIZWFkZXJDb250ZW50KCkpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5ncmlkSUQgKyAnX3NlYXJjaGJhcicpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnQoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnNlYXJjaFNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZWFyY2hCb3goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUucmVmcmVzaFRvb2xiYXJJdGVtcyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIGVuYWJsZUl0ZW1zID0gW107XG4gICAgICAgICAgICB2YXIgZGlzYWJsZUl0ZW1zID0gW107XG4gICAgICAgICAgICB2YXIgZWRpdCA9IGdPYmouZWRpdFNldHRpbmdzO1xuICAgICAgICAgICAgZWRpdC5hbGxvd0FkZGluZyA/IGVuYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2FkZCcpIDogZGlzYWJsZUl0ZW1zLnB1c2godGhpcy5ncmlkSUQgKyAnX2FkZCcpO1xuICAgICAgICAgICAgZWRpdC5hbGxvd0VkaXRpbmcgPyBlbmFibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19lZGl0JykgOiBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfZWRpdCcpO1xuICAgICAgICAgICAgZWRpdC5hbGxvd0RlbGV0aW5nID8gZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfZGVsZXRlJykgOiBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfZGVsZXRlJyk7XG4gICAgICAgICAgICBpZiAoZ09iai5lZGl0U2V0dGluZ3MubW9kZSA9PT0gJ2JhdGNoJykge1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtdXBkYXRlZHRkJykubGVuZ3RoICYmIChlZGl0LmFsbG93QWRkaW5nIHx8IGVkaXQuYWxsb3dFZGl0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ191cGRhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfY2FuY2VsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfdXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19jYW5jZWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQgJiYgKGVkaXQuYWxsb3dBZGRpbmcgfHwgZWRpdC5hbGxvd0VkaXRpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUl0ZW1zID0gW3RoaXMuZ3JpZElEICsgJ191cGRhdGUnLCB0aGlzLmdyaWRJRCArICdfY2FuY2VsJ107XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtcyA9IFt0aGlzLmdyaWRJRCArICdfYWRkJywgdGhpcy5ncmlkSUQgKyAnX2VkaXQnLCB0aGlzLmdyaWRJRCArICdfZGVsZXRlJ107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbXMucHVzaCh0aGlzLmdyaWRJRCArICdfdXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtcy5wdXNoKHRoaXMuZ3JpZElEICsgJ19jYW5jZWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuYWJsZUl0ZW1zKGVuYWJsZUl0ZW1zLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlSXRlbXMoZGlzYWJsZUl0ZW1zLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgICAgICB2YXIgdG9vbGJhckl0ZW1zID0gdGhpcy5wYXJlbnQudG9vbGJhciB8fCBbXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMucGFyZW50LnRvb2xiYXIpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdG9vbGJhckl0ZW1zXzEgPSB0b29sYmFySXRlbXM7IF9pIDwgdG9vbGJhckl0ZW1zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0b29sYmFySXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdHlwZW9mIChpdGVtKSA9PT0gJ3N0cmluZycgPyBpdGVtcy5wdXNoKHRoaXMuZ2V0SXRlbU9iamVjdChpdGVtKSkgOiBpdGVtcy5wdXNoKHRoaXMuZ2V0SXRlbShpdGVtKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldEl0ZW0gPSBmdW5jdGlvbiAoaXRlbU9iamVjdCkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnByZWRlZmluZWRJdGVtc1tpdGVtT2JqZWN0LnRleHRdO1xuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLmV4dGVuZChpdGVtLCBpdGVtLCBpdGVtT2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtT2JqZWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLmdldEl0ZW1PYmplY3QgPSBmdW5jdGlvbiAoaXRlbU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZWRlZmluZWRJdGVtc1tpdGVtTmFtZV0gfHwgeyB0ZXh0OiBpdGVtTmFtZSwgaWQ6IHRoaXMuZ3JpZElEICsgJ18nICsgaXRlbU5hbWUgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUuZW5hYmxlSXRlbXMgPSBmdW5jdGlvbiAoaXRlbXMsIGlzRW5hYmxlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGl0ZW1zXzEgPSBpdGVtczsgX2kgPCBpdGVtc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXIuZW5hYmxlSXRlbXMoZWxlbWVudC5wYXJlbnRFbGVtZW50LCBpc0VuYWJsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS50b29sYmFyQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ0lEID0gdGhpcy5ncmlkSUQ7XG4gICAgICAgICAgICBpZiAoIWFyZ3MuaXRlbSkge1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMudG9vbGJhckNsaWNrLCBhcmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGFyZ3MuaXRlbS5pZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19wcmludCc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmoucHJpbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX2VkaXQnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLnN0YXJ0RWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfdXBkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5lbmRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19jYW5jZWwnOlxuICAgICAgICAgICAgICAgICAgICBnT2JqLmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGdJRCArICdfYWRkJzpcbiAgICAgICAgICAgICAgICAgICAgZ09iai5hZGRSZWNvcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBnSUQgKyAnX2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGdPYmouZGVsZXRlUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19zZWFyY2gnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5vcmlnaW5hbEV2ZW50LnRhcmdldC5pZCA9PT0gZ0lEICsgJ19zZWFyY2hidXR0b24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZ0lEICsgJ19jb2x1bW5jaG9vc2VyJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhckVsZW1lbnQgPSB0aGlzLnBhcmVudC5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWNjZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gdGFyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gdGFyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0RWxlID0gYXJncy5vcmlnaW5hbEV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgeSA9IHRhckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgdGFyRWxlbWVudC5vZmZzZXRUb3A7XG4gICAgICAgICAgICAgICAgICAgIGdPYmouY3JlYXRlQ29sdW1uY2hvb3Nlcih4LCB5LCB0YXJnZXRFbGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnRvb2xiYXJDbGljaywgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLm1vZGVsQ2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgPT09ICdlZGl0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5tb2R1bGUgIT09IHRoaXMuZ2V0TW9kdWxlTmFtZSgpIHx8ICF0aGlzLnBhcmVudC50b29sYmFyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5rZXlVcEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWFyY2godGhpcy5zZWFyY2hFbGVtZW50LnZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudXBkYXRlU2VhcmNoQm94ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoRWxlbWVudC52YWx1ZSA9IHRoaXMucGFyZW50LnNlYXJjaFNldHRpbmdzLmtleTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUud2lyZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnNlYXJjaEVsZW1lbnQsICdrZXl1cCcsIHRoaXMua2V5VXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGJhci5wcm90b3R5cGUudW5XaXJlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuc2VhcmNoRWxlbWVudCwgJ2tleXVwJywgdGhpcy5rZXlVcEhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy51cGRhdGVTZWFyY2hCb3guYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMubW9kZWxDaGFuZ2VkLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMubW9kZWxDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYXRhQm91bmQsIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcywgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xiYXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMucmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudWlVcGRhdGUsIHRoaXMub25Qcm9wZXJ0eUNoYW5nZWQpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLnVwZGF0ZVNlYXJjaEJveCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVG9vbGJhckl0ZW1zKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudG9vbGJhclJlZnJlc2gsIHRoaXMucmVmcmVzaFRvb2xiYXJJdGVtcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluQm91bmRNb2RlbENoYW5nZWQsIHRoaXMubW9kZWxDaGFuZ2VkKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGF0YUJvdW5kLCB0aGlzLnJlZnJlc2hUb29sYmFySXRlbXMpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sYmFyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICd0b29sYmFyJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRvb2xiYXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlRvb2xiYXIgPSBUb29sYmFyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvdG9vbGJhci5qc1xuLy8gbW9kdWxlIGlkID0gNjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzYyX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItbmF2aWdhdGlvbnNcIlxuLy8gbW9kdWxlIGlkID0gNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9yZW5kZXJlci9mb290ZXItcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9zdW1tYXJ5LWNlbGwtcmVuZGVyZXJcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVudW1fMSwgY29uc3RhbnRfMSwgZm9vdGVyX3JlbmRlcmVyXzEsIHN1bW1hcnlfY2VsbF9yZW5kZXJlcl8xLCBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBZ2dyZWdhdGUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBBZ2dyZWdhdGUocGFyZW50LCBsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2FnZ3JlZ2F0ZSc7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUuaW5pdGlhdGVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNlbGxGYWMgPSB0aGlzLmxvY2F0b3IuZ2V0U2VydmljZSgnY2VsbFJlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gbmV3IHN1bW1hcnlfY2VsbF9yZW5kZXJlcl8xLlN1bW1hcnlDZWxsUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcik7XG4gICAgICAgICAgICBbZW51bV8xLkNlbGxUeXBlLlN1bW1hcnksIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeSwgZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeV0uZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjZWxsRmFjLmFkZENlbGxSZW5kZXJlcih0eXBlLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyUmVuZGVyZXIgPSBuZXcgZm9vdGVyX3JlbmRlcmVyXzEuRm9vdGVyUmVuZGVyZXIodGhpcy5wYXJlbnQsIHRoaXMubG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyLnJlbmRlclBhbmVsKCk7XG4gICAgICAgICAgICB0aGlzLmZvb3RlclJlbmRlcmVyLnJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLmxvY2F0b3IucmVnaXN0ZXIoJ2Zvb3RlclJlbmRlcmVyJywgdGhpcy5mb290ZXJSZW5kZXJlcik7XG4gICAgICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJlcGFyZVN1bW1hcnlJbmZvKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Lm9mZihjb25zdGFudF8xLmRhdGFSZWFkeSwgZm4pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuZGF0YVJlYWR5LCBmbiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmRhdGFSZWFkeSwgdGhpcy5mb290ZXJSZW5kZXJlci5yZWZyZXNoLCB0aGlzLmZvb3RlclJlbmRlcmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWdncmVnYXRlLnByb3RvdHlwZS5wcmVwYXJlU3VtbWFyeUluZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgc3VtbWFyeUl0ZXJhdG9yKHRoaXMucGFyZW50LmFnZ3JlZ2F0ZXMsIGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YUNvbHVtbiA9IF90aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGNvbHVtbi5maWVsZCkgfHwge307XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBkYXRhQ29sdW1uLnR5cGU7XG4gICAgICAgICAgICAgICAgY29sdW1uLmZvcm1hdCA9IF90aGlzLmdldEZvcm1hdEZyb21UeXBlKGNvbHVtbi5mb3JtYXQsIHR5cGUpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5zZXRGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY29sdW1uTmFtZSA9IGNvbHVtbi5jb2x1bW5OYW1lIHx8IGNvbHVtbi5maWVsZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmdldEZvcm1hdEZyb21UeXBlID0gZnVuY3Rpb24gKGZvcm1hdCwgdHlwZSkge1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodHlwZSkgfHwgdHlwZW9mIGZvcm1hdCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9iajtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IHsgZm9ybWF0OiBmb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IHsgdHlwZTogdHlwZSwgc2tlbGV0b246IGZvcm1hdCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRldGltZSc6XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IHsgdHlwZTogJ2RhdGVUaW1lJywgc2tlbGV0b246IGZvcm1hdCB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZm9vdGVyUmVuZGVyZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWF0ZVJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmVwYXJlU3VtbWFyeUluZm8oKTtcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVmcmVzaCgpO1xuICAgICAgICAgICAgdmFyIGNNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkNhcHRpb25TdW1tYXJ5TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdmFyIGdNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLkdyb3VwU3VtbWFyeU1vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIGlmIChnTW9kZWwuZ2V0RGF0YSgpLmxlbmd0aCAhPT0gMCB8fCAhY01vZGVsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShjb25zdGFudF8xLm1vZGVsQ2hhbmdlZCwge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBZ2dyZWdhdGUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhdGVSZW5kZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuaW5pdGlhbEVuZCwgdGhpcy5pbml0aWF0ZVJlbmRlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5kYXRhUmVhZHksIHRoaXMuZm9vdGVyUmVuZGVyZXIucmVmcmVzaCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS51aVVwZGF0ZSwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgIH07XG4gICAgICAgIEFnZ3JlZ2F0ZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMS5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0Rm9vdGVyQ29udGVudCgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFnZ3JlZ2F0ZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQWdncmVnYXRlID0gQWdncmVnYXRlO1xuICAgIGZ1bmN0aW9uIHN1bW1hcnlJdGVyYXRvcihhZ2dyZWdhdGVzLCBjYWxsYmFjaykge1xuICAgICAgICBhZ2dyZWdhdGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgcm93LmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soY29sdW1uLCByb3cpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleHBvcnRzLnN1bW1hcnlJdGVyYXRvciA9IHN1bW1hcnlJdGVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2FnZ3JlZ2F0ZS5qc1xuLy8gbW9kdWxlIGlkID0gNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi9jb250ZW50LXJlbmRlcmVyXCIsIFwiLi9yb3ctcmVuZGVyZXJcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGNvbnN0YW50XzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgcm93X3JlbmRlcmVyXzEsIHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEZvb3RlclJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEZvb3RlclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBGb290ZXJSZW5kZXJlcihncmlkTW9kdWxlLCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZ3JpZE1vZHVsZSwgc2VydmljZUxvY2F0b3IpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5hZ2dyZWdhdGVzID0ge307XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnQgPSBncmlkTW9kdWxlO1xuICAgICAgICAgICAgX3RoaXMubG9jYXRvciA9IHNlcnZpY2VMb2NhdG9yO1xuICAgICAgICAgICAgX3RoaXMubW9kZWxHZW5lcmF0b3IgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoX3RoaXMucGFyZW50KTtcbiAgICAgICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyUGFuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtZ3JpZGZvb3RlcicgfSk7XG4gICAgICAgICAgICB2YXIgaW5uZXJEaXYgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiAnZS1zdW1tYXJ5Y29udGVudCcgfSk7XG4gICAgICAgICAgICBpZiAoZWoyX2Jhc2VfMy5Ccm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJEaXYuc3R5bGUub3ZlcmZsb3dYID0gJ3Njcm9sbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXYpO1xuICAgICAgICAgICAgdGhpcy5zZXRQYW5lbChkaXYpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmdldFBhZ2VyKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuaW5zZXJ0QmVmb3JlKGRpdiwgdGhpcy5wYXJlbnQuZ2V0UGFnZXIoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50RGl2ID0gdGhpcy5nZXRQYW5lbCgpO1xuICAgICAgICAgICAgdmFyIGlubmVyRGl2ID0gdGhpcy5jcmVhdGVDb250ZW50VGFibGUoKTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGlubmVyRGl2LnF1ZXJ5U2VsZWN0b3IoJy5lLXRhYmxlJyk7XG4gICAgICAgICAgICB2YXIgdEZvb3QgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3Rmb290Jyk7XG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0Rm9vdCk7XG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlKHRhYmxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclN1bW1hcnlDb250ZW50ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMucGFyZW50LmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBBcnJheSA/IHRoaXMucGFyZW50LmRhdGFTb3VyY2UgOiB0aGlzLnBhcmVudC5jdXJyZW50Vmlld0RhdGE7XG4gICAgICAgICAgICB2YXIgc3VtbWFyaWVzID0gdGhpcy5tb2RlbEdlbmVyYXRvci5nZXREYXRhKCk7XG4gICAgICAgICAgICB2YXIgZHVtbWllcyA9IHRoaXMubW9kZWxHZW5lcmF0b3IuZ2V0Q29sdW1ucygpO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLm1vZGVsR2VuZXJhdG9yLmdlbmVyYXRlUm93cyhpbnB1dCwgZSB8fCB0aGlzLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgdmFyIHJvd3JlbmRlcmVyID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMubG9jYXRvcik7XG4gICAgICAgICAgICByb3dyZW5kZXJlci5lbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdUUicsIHsgY2xhc3NOYW1lOiAnZS1zdW1tYXJ5cm93JyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIHNyb3cgPSAwLCBsZW4gPSBzdW1tYXJpZXMubGVuZ3RoOyBzcm93IDwgbGVuOyBzcm93KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gcm93c1tzcm93XTtcbiAgICAgICAgICAgICAgICBpZiAoIXJvdykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRyID0gcm93cmVuZGVyZXIucmVuZGVyKHJvdywgZHVtbWllcyk7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLnRGb290LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICAgICAgICAgIHRoaXMuYWdncmVnYXRlcyA9IGU7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS50Rm9vdC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU3VtbWFyeUNvbnRlbnQoZSk7XG4gICAgICAgICAgICB0aGlzLm9uU2Nyb2xsKCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoQ29sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlckNvbCA9IHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZGhlYWRlcicpLnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5nZXRUYWJsZSgpLnJlcGxhY2VDaGlsZChoZWFkZXJDb2wsIHRoaXMuZ2V0Q29sR3JvdXAoKSk7XG4gICAgICAgICAgICB0aGlzLnNldENvbEdyb3VwKGhlYWRlckNvbCk7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5vbldpZHRoQ2hhbmdlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29sR3JvdXAoKS5jaGlsZHJlblthcmdzLmluZGV4XS5zdHlsZS53aWR0aCA9IGVqMl9iYXNlXzIuZm9ybWF0VW5pdChhcmdzLndpZHRoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5hbGxvd1Jlc2l6aW5nICYmIGFyZ3MubW9kdWxlID09PSAncmVzaXplJykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRm9vdGVyVGFibGVXaWR0aCh0aGlzLmdldFRhYmxlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUub25TY3JvbGwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUgPT09IHZvaWQgMCkgeyBlID0geyBsZWZ0OiB0aGlzLnBhcmVudC5nZXRDb250ZW50KCkuZmlyc3RDaGlsZC5zY3JvbGxMZWZ0IH07IH1cbiAgICAgICAgICAgIHRoaXMuZ2V0UGFuZWwoKS5maXJzdENoaWxkLnNjcm9sbExlZnQgPSBlLmxlZnQ7XG4gICAgICAgIH07XG4gICAgICAgIEZvb3RlclJlbmRlcmVyLnByb3RvdHlwZS5jb2x1bW5WaXNpYmlsaXR5Q2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGNvbnN0YW50XzEuY29sR3JvdXBSZWZyZXNoLCB0aGlzLnJlZnJlc2hDb2wsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oY29uc3RhbnRfMS5jb2x1bW5XaWR0aENoYW5nZWQsIHRoaXMub25XaWR0aENoYW5nZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLnNjcm9sbCwgdGhpcy5vblNjcm9sbCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCB0aGlzLmNvbHVtblZpc2liaWxpdHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRm9vdGVyUmVuZGVyZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jb2xHcm91cFJlZnJlc2gsIHRoaXMucmVmcmVzaENvbCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jb2x1bW5XaWR0aENoYW5nZWQsIHRoaXMub25XaWR0aENoYW5nZSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5zY3JvbGwsIHRoaXMub25TY3JvbGwpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQsIHRoaXMuY29sdW1uVmlzaWJpbGl0eUNoYW5nZWQpO1xuICAgICAgICB9O1xuICAgICAgICBGb290ZXJSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlRm9vdGVyVGFibGVXaWR0aCA9IGZ1bmN0aW9uICh0Rm9vdCkge1xuICAgICAgICAgICAgdmFyIHRIZWFkID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyVGFibGUoKTtcbiAgICAgICAgICAgIGlmICh0SGVhZCAmJiB0Rm9vdCkge1xuICAgICAgICAgICAgICAgIHRGb290LnN0eWxlLndpZHRoID0gdEhlYWQuc3R5bGUud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGb290ZXJSZW5kZXJlcjtcbiAgICB9KGNvbnRlbnRfcmVuZGVyZXJfMS5Db250ZW50UmVuZGVyKSk7XG4gICAgZXhwb3J0cy5Gb290ZXJSZW5kZXJlciA9IEZvb3RlclJlbmRlcmVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2Zvb3Rlci1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS91dGlsXCIsIFwiLi9jZWxsLXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBjZWxsX3JlbmRlcmVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFN1bW1hcnlDZWxsUmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU3VtbWFyeUNlbGxSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU3VtbWFyeUNlbGxSZW5kZXJlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnVEQnLCB7IGNsYXNzTmFtZTogJ2Utc3VtbWFyeWNlbGwnLCBhdHRyczogeyByb2xlOiAnZ3JpZGNlbGwnLCB0YWJpbmRleDogJy0xJyB9IH0pO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFN1bW1hcnlDZWxsUmVuZGVyZXIucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKGZpZWxkLCBkYXRhLCBjb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBrZXk7XG4gICAgICAgICAgICBrZXkgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChjb2x1bW4udHlwZSkgPyBjb2x1bW4uZmllbGQgKyAnIC0gJyArIChjb2x1bW4udHlwZSkgOiBjb2x1bW4uY29sdW1uTmFtZTtcbiAgICAgICAgICAgIHJldHVybiBkYXRhW2NvbHVtbi5jb2x1bW5OYW1lXSA/IGRhdGFbY29sdW1uLmNvbHVtbk5hbWVdW2tleV0gOiAnJztcbiAgICAgICAgfTtcbiAgICAgICAgU3VtbWFyeUNlbGxSZW5kZXJlci5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAobm9kZSwgY2VsbCwgZGF0YSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNlbGwuY29sdW1uO1xuICAgICAgICAgICAgaWYgKCEoY29sdW1uLmZvb3RlclRlbXBsYXRlIHx8IGNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlIHx8IGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ZW1wT2JqID0gY29sdW1uLmdldFRlbXBsYXRlKGNlbGwuY2VsbFR5cGUpO1xuICAgICAgICAgICAgdXRpbF8xLmFwcGVuZENoaWxkcmVuKG5vZGUsIHRlbXBPYmouZm4oZGF0YVtjb2x1bW4uY29sdW1uTmFtZV0sIHRoaXMucGFyZW50LCB0ZW1wT2JqLnByb3BlcnR5KSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTdW1tYXJ5Q2VsbFJlbmRlcmVyO1xuICAgIH0oY2VsbF9yZW5kZXJlcl8xLkNlbGxSZW5kZXJlcikpO1xuICAgIGV4cG9ydHMuU3VtbWFyeUNlbGxSZW5kZXJlciA9IFN1bW1hcnlDZWxsUmVuZGVyZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvc3VtbWFyeS1jZWxsLXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiLi4vcmVuZGVyZXIvdmlydHVhbC1jb250ZW50LXJlbmRlcmVyXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIHV0aWxfMSwgY29uc3RhbnRfMSwgZW51bV8xLCB2aXJ0dWFsX2NvbnRlbnRfcmVuZGVyZXJfMSwgZXZlbnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBWaXJ0dWFsU2Nyb2xsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVmlydHVhbFNjcm9sbChwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3ZpcnR1YWxzY3JvbGwnO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5pbnN0YW50aWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5sb2NhdG9yLmdldFNlcnZpY2UoJ3JlbmRlcmVyRmFjdG9yeScpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuYWRkUmVuZGVyZXIoZW51bV8xLlJlbmRlclR5cGUuSGVhZGVyLCBuZXcgdmlydHVhbF9jb250ZW50X3JlbmRlcmVyXzEuVmlydHVhbEhlYWRlclJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbmRlcmVyLmFkZFJlbmRlcmVyKGVudW1fMS5SZW5kZXJUeXBlLkNvbnRlbnQsIG5ldyB2aXJ0dWFsX2NvbnRlbnRfcmVuZGVyZXJfMS5WaXJ0dWFsQ29udGVudFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLmxvY2F0b3IpKTtcbiAgICAgICAgICAgIHRoaXMuZW5zdXJlUGFnZVNpemUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUuZW5zdXJlUGFnZVNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcm93SGVpZ2h0ID0gdXRpbF8xLmdldFJvd0hlaWdodCh0aGlzLnBhcmVudC5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tTaXplID0gfn4odGhpcy5wYXJlbnQuaGVpZ2h0IC8gcm93SGVpZ2h0KTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmJsb2NrU2l6ZSAqIDI7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5wYWdlU2l6ZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldFByb3BlcnRpZXMoeyBwYWdlU2V0dGluZ3M6IHsgcGFnZVNpemU6IHNpemUgPCBoZWlnaHQgPyBoZWlnaHQgOiBzaXplIH0gfSwgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxTY3JvbGwucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmluaXRpYWxMb2FkLCB0aGlzLmluc3RhbnRpYXRlUmVuZGVyZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmNvbHVtbldpZHRoQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVmlydHVhbEVsZW1lbnQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGNvbnN0YW50XzEuaW5pdGlhbExvYWQsIHRoaXMuaW5zdGFudGlhdGVSZW5kZXJlcik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNvbHVtbldpZHRoQ2hhbmdlZCwgdGhpcy5yZWZyZXNoVmlydHVhbEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsU2Nyb2xsLnByb3RvdHlwZS5yZWZyZXNoVmlydHVhbEVsZW1lbnQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uICYmIGFyZ3MubW9kdWxlID09PSAncmVzaXplJykge1xuICAgICAgICAgICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5Db250ZW50KS5yZWZyZXNoVmlydHVhbEVsZW1lbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFNjcm9sbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmlydHVhbFNjcm9sbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVmlydHVhbFNjcm9sbCA9IFZpcnR1YWxTY3JvbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvYWN0aW9ucy92aXJ0dWFsLXNjcm9sbC5qc1xuLy8gbW9kdWxlIGlkID0gNjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCIuL2NvbnRlbnQtcmVuZGVyZXJcIiwgXCIuL2hlYWRlci1yZW5kZXJlclwiLCBcIi4uL3NlcnZpY2VzL2ludGVyc2VjdGlvbi1vYnNlcnZlclwiLCBcIi4uL3NlcnZpY2VzL3ZpcnR1YWwtcm93LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9kYXRhXzEsIHV0aWxfMSwgY29uc3RhbnRfMSwgZW51bV8xLCBjb250ZW50X3JlbmRlcmVyXzEsIGhlYWRlcl9yZW5kZXJlcl8xLCBpbnRlcnNlY3Rpb25fb2JzZXJ2ZXJfMSwgdmlydHVhbF9yb3dfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFZpcnR1YWxDb250ZW50UmVuZGVyZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVmlydHVhbENvbnRlbnRSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVmlydHVhbENvbnRlbnRSZW5kZXJlcihwYXJlbnQsIGxvY2F0b3IpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhcmVudCwgbG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnByZXZIZWlnaHQgPSAwO1xuICAgICAgICAgICAgX3RoaXMucHJldmVudEV2ZW50ID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5hY3Rpb25zID0gWydmaWx0ZXJpbmcnLCAnc2VhcmNoaW5nJywgJ2dyb3VwaW5nJywgJ3VuZ3JvdXBpbmcnXTtcbiAgICAgICAgICAgIF90aGlzLm9mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIF90aGlzLnRtcE9mZnNldHMgPSB7fTtcbiAgICAgICAgICAgIF90aGlzLnZpcnR1YWxFbGUgPSBuZXcgVmlydHVhbEVsZW1lbnRIYW5kbGVyKCk7XG4gICAgICAgICAgICBfdGhpcy5vZmZzZXRLZXlzID0gW107XG4gICAgICAgICAgICBfdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICAgICAgX3RoaXMuZXZlbnRMaXN0ZW5lcignb24nKTtcbiAgICAgICAgICAgIF90aGlzLnZnZW5lcmF0b3IgPSBfdGhpcy5nZW5lcmF0b3I7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlciA9IHRoaXMubG9jYXRvci5nZXRTZXJ2aWNlKCdyZW5kZXJlckZhY3RvcnknKS5nZXRSZW5kZXJlcihlbnVtXzEuUmVuZGVyVHlwZS5IZWFkZXIpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnRhYmxlID0gdGhpcy5nZXRUYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLmNvbnRlbnQgPSB0aGlzLmNvbnRlbnQgPSB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5yZW5kZXJXcmFwcGVyKCk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUucmVuZGVyUGxhY2VIb2xkZXIoKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS53cmFwcGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIHZhciBkZWJvdW5jZUV2ZW50ID0gKHRoaXMucGFyZW50LmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyICYmICF0aGlzLnBhcmVudC5kYXRhU291cmNlLmRhdGFTb3VyY2Uub2ZmbGluZSk7XG4gICAgICAgICAgICB2YXIgb3B0ID0ge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250ZW50LCBwYWdlSGVpZ2h0OiB0aGlzLmdldEJsb2NrSGVpZ2h0KCkgKiAyLCBkZWJvdW5jZUV2ZW50OiBkZWJvdW5jZUV2ZW50LFxuICAgICAgICAgICAgICAgIGF4ZXM6IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gWydYJywgJ1knXSA6IFsnWSddXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBpbnRlcnNlY3Rpb25fb2JzZXJ2ZXJfMS5JbnRlclNlY3Rpb25PYnNlcnZlcih0aGlzLnZpcnR1YWxFbGUud3JhcHBlciwgb3B0KTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRW1wdHkgPSBmdW5jdGlvbiAodGJvZHkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUuYWRqdXN0VGFibGUoMCwgMCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnNjcm9sbExpc3RlbmVyID0gZnVuY3Rpb24gKHNjcm9sbEFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZlbnRFdmVudCB8fCB0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmVudEV2ZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0aGlzLmNvbnRlbnQgPT09IGVqMl9iYXNlXzEuY2xvc2VzdChkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAnLmUtY29udGVudCcpIHx8IHRoaXMuY29udGVudCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIHZhciBpbmZvID0gc2Nyb2xsQXJncy5zZW50aW5lbDtcbiAgICAgICAgICAgIHZhciB2aWV3SW5mbyA9IHRoaXMuZ2V0SW5mb0Zyb21WaWV3KHNjcm9sbEFyZ3MuZGlyZWN0aW9uLCBpbmZvLCBzY3JvbGxBcmdzLm9mZnNldCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2SW5mbyAmJiAoKGluZm8uYXhpcyA9PT0gJ1knICYmIHRoaXMucHJldkluZm8uYmxvY2tJbmRleGVzLnRvU3RyaW5nKCkgPT09IHZpZXdJbmZvLmJsb2NrSW5kZXhlcy50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIHx8IChpbmZvLmF4aXMgPT09ICdYJyAmJiB0aGlzLnByZXZJbmZvLmNvbHVtbkluZGV4ZXMudG9TdHJpbmcoKSA9PT0gdmlld0luZm8uY29sdW1uSW5kZXhlcy50b1N0cmluZygpKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRDb2x1bW5JbmRleGVzSW5WaWV3KHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gdmlld0luZm8uY29sdW1uSW5kZXhlcyA6IFtdKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnBhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZSA9IHZpZXdJbmZvLmxvYWROZXh0ICYmICF2aWV3SW5mby5sb2FkU2VsZiA/IHZpZXdJbmZvLm5leHRJbmZvLnBhZ2UgOiB2aWV3SW5mby5wYWdlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KHZpZXdJbmZvLmV2ZW50LCB7IHJlcXVlc3RUeXBlOiAndmlydHVhbHNjcm9sbCcsIHZpcnR1YWxJbmZvOiB2aWV3SW5mbyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuYmxvY2sgPSBmdW5jdGlvbiAoYmxrKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52Z2VuZXJhdG9yLmlzQmxvY2tBdmFpbGFibGUoYmxrKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0SW5mb0Zyb21WaWV3ID0gZnVuY3Rpb24gKGRpcmVjdGlvbiwgaW5mbywgZSkge1xuICAgICAgICAgICAgdmFyIHRlbXBCbG9ja3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBpbmZvVHlwZSA9IHsgZGlyZWN0aW9uOiBkaXJlY3Rpb24sIHNlbnRpbmVsSW5mbzogaW5mbywgb2Zmc2V0czogZSB9O1xuICAgICAgICAgICAgaW5mb1R5cGUucGFnZSA9IHRoaXMuZ2V0UGFnZUZyb21Ub3AoZS50b3AsIGluZm9UeXBlKTtcbiAgICAgICAgICAgIGluZm9UeXBlLmJsb2NrSW5kZXhlcyA9IHRlbXBCbG9ja3MgPSB0aGlzLnZnZW5lcmF0b3IuZ2V0QmxvY2tJbmRleGVzKGluZm9UeXBlLnBhZ2UpO1xuICAgICAgICAgICAgaW5mb1R5cGUubG9hZFNlbGYgPSAhdGhpcy52Z2VuZXJhdG9yLmlzQmxvY2tBdmFpbGFibGUodGVtcEJsb2Nrc1tpbmZvVHlwZS5ibG9ja10pO1xuICAgICAgICAgICAgdmFyIGJsb2NrcyA9IHRoaXMuZW5zdXJlQmxvY2tzKGluZm9UeXBlKTtcbiAgICAgICAgICAgIGluZm9UeXBlLmJsb2NrSW5kZXhlcyA9IGJsb2NrcztcbiAgICAgICAgICAgIGluZm9UeXBlLmxvYWROZXh0ID0gIWJsb2Nrcy5maWx0ZXIoZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gdGVtcEJsb2Nrcy5pbmRleE9mKHZhbCkgPT09IC0xOyB9KVxuICAgICAgICAgICAgICAgIC5ldmVyeSh0aGlzLmJsb2NrLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgaW5mb1R5cGUuZXZlbnQgPSAoaW5mb1R5cGUubG9hZE5leHQgfHwgaW5mb1R5cGUubG9hZFNlbGYpID8gY29uc3RhbnRfMS5tb2RlbENoYW5nZWQgOiBjb25zdGFudF8xLnJlZnJlc2hWaXJ0dWFsQmxvY2s7XG4gICAgICAgICAgICBpbmZvVHlwZS5uZXh0SW5mbyA9IGluZm9UeXBlLmxvYWROZXh0ID8geyBwYWdlOiBNYXRoLm1heCgxLCBpbmZvVHlwZS5wYWdlICsgKGRpcmVjdGlvbiA9PT0gJ2Rvd24nID8gMSA6IC0xKSkgfSA6IHt9O1xuICAgICAgICAgICAgaW5mb1R5cGUuY29sdW1uSW5kZXhlcyA9IGluZm8uYXhpcyA9PT0gJ1gnID8gdGhpcy52Z2VuZXJhdG9yLmdldENvbHVtbkluZGV4ZXMoKSA6IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbiAmJiBpbmZvLmF4aXMgPT09ICdYJykge1xuICAgICAgICAgICAgICAgIGluZm9UeXBlLmV2ZW50ID0gY29uc3RhbnRfMS5yZWZyZXNoVmlydHVhbEJsb2NrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZm9UeXBlO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5lbnN1cmVCbG9ja3MgPSBmdW5jdGlvbiAoaW5mbykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGluZm8uYmxvY2tJbmRleGVzW2luZm8uYmxvY2tdO1xuICAgICAgICAgICAgdmFyIG1JZHg7XG4gICAgICAgICAgICB2YXIgb2xkID0gaW5kZXg7XG4gICAgICAgICAgICB2YXIgbWF4ID0gTWF0aC5tYXg7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IGluZm8uZGlyZWN0aW9uID09PSAnZG93bicgPyBbbWF4KGluZGV4LCAxKSwgKytpbmRleCwgKytpbmRleF0gOiBbbWF4KGluZGV4IC0gMSwgMSksIGluZGV4LCBpbmRleCArIDFdO1xuICAgICAgICAgICAgaW5kZXhlcyA9IGluZGV4ZXMuZmlsdGVyKGZ1bmN0aW9uICh2YWwsIGluZCkgeyByZXR1cm4gaW5kZXhlcy5pbmRleE9mKHZhbCkgPT09IGluZDsgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2SW5mby5ibG9ja0luZGV4ZXMudG9TdHJpbmcoKSA9PT0gaW5kZXhlcy50b1N0cmluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5mby5sb2FkU2VsZiB8fCAoaW5mby5kaXJlY3Rpb24gPT09ICdkb3duJyAmJiB0aGlzLmlzRW5kQmxvY2sob2xkKSkpIHtcbiAgICAgICAgICAgICAgICBpbmRleGVzID0gdGhpcy52Z2VuZXJhdG9yLmdldEJsb2NrSW5kZXhlcyhpbmZvLnBhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5kZXhlcy5zb21lKGZ1bmN0aW9uICh2YWwsIGluZCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB2YWwgPT09IF90aGlzLmdldFRvdGFsQmxvY2tzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBtSWR4ID0gaW5kO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobUlkeCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaW5kZXhlcyA9IGluZGV4ZXMuc2xpY2UoMCwgbUlkeCArIDEpO1xuICAgICAgICAgICAgICAgIGlmIChpbmZvLmJsb2NrID09PSAwICYmIGluZGV4ZXMubGVuZ3RoID09PSAxICYmIHRoaXMudmdlbmVyYXRvci5pc0Jsb2NrQXZhaWxhYmxlKGluZGV4ZXNbMF0gLSAxKSkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleGVzID0gW2luZGV4ZXNbMF0gLSAxLCBpbmRleGVzWzBdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kQ29udGVudCA9IGZ1bmN0aW9uICh0YXJnZXQsIG5ld0NoaWxkLCBlKSB7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IGUudmlydHVhbEluZm87XG4gICAgICAgICAgICB0aGlzLnByZXZJbmZvID0gdGhpcy5wcmV2SW5mbyB8fCBlLnZpcnR1YWxJbmZvO1xuICAgICAgICAgICAgdmFyIGNCbG9jayA9IChpbmZvLmNvbHVtbkluZGV4ZXNbMF0pIC0gMTtcbiAgICAgICAgICAgIHZhciBjT2Zmc2V0ID0gdGhpcy5nZXRDb2x1bW5PZmZzZXQoY0Jsb2NrKTtcbiAgICAgICAgICAgIHZhciB3aWR0aDtcbiAgICAgICAgICAgIHZhciBibG9ja3MgPSBpbmZvLmJsb2NrSW5kZXhlcztcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoT2Zmc2V0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZSA9IHRoaXMuZ2V0VHJhbnNsYXRlWSh0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wLCB0aGlzLmNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0LCBpbmZvKTtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5hZGp1c3RUYWJsZShjT2Zmc2V0LCB0cmFuc2xhdGUpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXIudmlydHVhbEVsZS5hZGp1c3RUYWJsZShjT2Zmc2V0LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBjSW5kZXggPSBpbmZvLmNvbHVtbkluZGV4ZXM7XG4gICAgICAgICAgICAgICAgd2lkdGggPSB0aGlzLmdldENvbHVtbk9mZnNldChjSW5kZXhbY0luZGV4Lmxlbmd0aCAtIDFdKSAtIHRoaXMuZ2V0Q29sdW1uT2Zmc2V0KGNJbmRleFswXSAtIDEpICsgJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXIudmlydHVhbEVsZS5zZXRXcmFwcGVyV2lkdGgod2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnNldFdyYXBwZXJXaWR0aCh3aWR0aCwgdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gfHwgZWoyX2Jhc2VfMi5Ccm93c2VyLmlzSUUpO1xuICAgICAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKG5ld0NoaWxkKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFibGUoKS5hcHBlbmRDaGlsZCh0YXJnZXQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5mby5kaXJlY3Rpb24gPT09ICd1cCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsayA9IHRoaXMub2Zmc2V0c1t0aGlzLmdldFRvdGFsQmxvY2tzKCldIC0gdGhpcy5wcmV2SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZlbnRFdmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzVG9wID0gdGhpcy5jb250ZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnNjcm9sbFRvcCA9IHNUb3AgKyBibGs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmlydHVhbEhlaWdodCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIuc2V0UGFnZUhlaWdodCh0aGlzLmdldE9mZnNldChibG9ja3NbYmxvY2tzLmxlbmd0aCAtIDFdKSAtIHRoaXMuZ2V0T2Zmc2V0KGJsb2Nrc1swXSAtIDEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJldkluZm8gPSBpbmZvO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLm9uRGF0YVJlYWR5ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChlLmNvdW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSBlLmNvdW50O1xuICAgICAgICAgICAgICAgIHRoaXMubWF4UGFnZSA9IE1hdGguY2VpbChlLmNvdW50IC8gdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaE9mZnNldHMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlydHVhbEhlaWdodCgpO1xuICAgICAgICAgICAgdGhpcy5yZXNldFNjcm9sbFBvc2l0aW9uKGUucmVxdWVzdFR5cGUpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5zZXRWaXJ0dWFsSGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gP1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29sdW1uT2Zmc2V0KHRoaXMucGFyZW50LmNvbHVtbnMubGVuZ3RoICsgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aCAtIDEpICsgJ3B4JyA6ICcxMDAlJztcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5zZXRWaXJ0dWFsSGVpZ2h0KHRoaXMub2Zmc2V0c1t0aGlzLmdldFRvdGFsQmxvY2tzKCldLCB3aWR0aCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlci52aXJ0dWFsRWxlLnNldFZpcnR1YWxIZWlnaHQoMSwgd2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRQYWdlRnJvbVRvcCA9IGZ1bmN0aW9uIChzVG9wLCBpbmZvKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5nZXRUb3RhbEJsb2NrcygpO1xuICAgICAgICAgICAgdmFyIHBhZ2UgPSAwO1xuICAgICAgICAgICAgdmFyIGV4dHJhID0gdGhpcy5vZmZzZXRzW3RvdGFsXSAtIHRoaXMucHJldkhlaWdodDtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0S2V5cy5zb21lKGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IE51bWJlcihvZmZzZXQpO1xuICAgICAgICAgICAgICAgIHZhciBib3JkZXIgPSBzVG9wIDwgX3RoaXMub2Zmc2V0c1tvZmZzZXRdIHx8IChpT2Zmc2V0ID09PSB0b3RhbCAmJiBzVG9wID4gX3RoaXMub2Zmc2V0c1tvZmZzZXRdKTtcbiAgICAgICAgICAgICAgICBpZiAoYm9yZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZm8uYmxvY2sgPSBpT2Zmc2V0ICUgMiA9PT0gMCA/IDEgOiAwO1xuICAgICAgICAgICAgICAgICAgICBwYWdlID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oX3RoaXMudmdlbmVyYXRvci5nZXRQYWdlKGlPZmZzZXQpLCBfdGhpcy5tYXhQYWdlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBib3JkZXI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYWdlO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRUcmFuc2xhdGVZID0gZnVuY3Rpb24gKHNUb3AsIGNIZWlnaHQsIGluZm8pIHtcbiAgICAgICAgICAgIGlmIChpbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpbmZvID0geyBwYWdlOiB0aGlzLmdldFBhZ2VGcm9tVG9wKHNUb3AsIHt9KSB9O1xuICAgICAgICAgICAgICAgIGluZm8uYmxvY2tJbmRleGVzID0gdGhpcy52Z2VuZXJhdG9yLmdldEJsb2NrSW5kZXhlcyhpbmZvLnBhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJsb2NrID0gKGluZm8uYmxvY2tJbmRleGVzWzBdIHx8IDEpIC0gMTtcbiAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSB0aGlzLmdldE9mZnNldChibG9jayk7XG4gICAgICAgICAgICB2YXIgZW5kVHJhbnNsYXRlID0gdGhpcy5nZXRPZmZzZXQoaW5mby5ibG9ja0luZGV4ZXNbaW5mby5ibG9ja0luZGV4ZXMubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZSA+IHNUb3AgPyB0aGlzLmdldE9mZnNldChibG9jayAtIDEpIDogZW5kVHJhbnNsYXRlIDwgKHNUb3AgKyBjSGVpZ2h0KSA/IHRoaXMuZ2V0T2Zmc2V0KGJsb2NrICsgMSkgOiB0cmFuc2xhdGU7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldE9mZnNldCA9IGZ1bmN0aW9uIChibG9jaykge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKHRoaXMub2Zmc2V0c1tibG9ja10gfCAwLCB0aGlzLm9mZnNldHNbdGhpcy5tYXhCbG9ja10pO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5vbkVudGVyZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlbGVtZW50LCBjdXJyZW50LCBkaXJlY3Rpb24sIGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgeEF4aXMgPSBjdXJyZW50LmF4aXMgPT09ICdYJztcbiAgICAgICAgICAgICAgICB2YXIgdG9wID0gX3RoaXMucHJldkluZm8ub2Zmc2V0cyA/IF90aGlzLnByZXZJbmZvLm9mZnNldHMudG9wIDogbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gX3RoaXMuY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmFyIHggPSBfdGhpcy5nZXRDb2x1bW5PZmZzZXQoeEF4aXMgPyBfdGhpcy52Z2VuZXJhdG9yLmdldENvbHVtbkluZGV4ZXMoKVswXSAtIDEgOiBfdGhpcy5wcmV2SW5mby5jb2x1bW5JbmRleGVzWzBdIC0gMSk7XG4gICAgICAgICAgICAgICAgdmFyIHkgPSBfdGhpcy5nZXRUcmFuc2xhdGVZKGUudG9wLCBoZWlnaHQsIHhBeGlzICYmIHRvcCA9PT0gZS50b3AgPyBfdGhpcy5wcmV2SW5mbyA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgX3RoaXMudmlydHVhbEVsZS5hZGp1c3RUYWJsZSh4LCBNYXRoLm1pbih5LCBfdGhpcy5vZmZzZXRzW190aGlzLm1heEJsb2NrXSkpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGVhZGVyLnZpcnR1YWxFbGUuYWRqdXN0VGFibGUoeCwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnBhcmVudFthY3Rpb25dKGNvbnN0YW50XzEuZGF0YVJlYWR5LCB0aGlzLm9uRGF0YVJlYWR5LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50W2FjdGlvbl0oY29uc3RhbnRfMS5yZWZyZXNoVmlydHVhbEJsb2NrLCB0aGlzLnJlZnJlc2hDb250ZW50Um93cywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLnBhcmVudFthY3Rpb25dKGV2ZW50ICsgXCItYmVnaW5cIiwgX3RoaXMub25BY3Rpb25CZWdpbiwgX3RoaXMpOyB9KTtcbiAgICAgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vYnNlcnZlci5vYnNlcnZlKGZ1bmN0aW9uIChzY3JvbGxBcmdzKSB7IHJldHVybiBfdGhpcy5zY3JvbGxMaXN0ZW5lcihzY3JvbGxBcmdzKTsgfSwgX3RoaXMub25FbnRlcmVkKCkpO1xuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudC5vZmYoY29uc3RhbnRfMS5jb250ZW50UmVhZHksIGZuKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihjb25zdGFudF8xLmNvbnRlbnRSZWFkeSwgZm4sIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRCbG9ja1NpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQucGFnZVNldHRpbmdzLnBhZ2VTaXplID4+IDE7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldEJsb2NrSGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxvY2tTaXplKCkgKiB1dGlsXzEuZ2V0Um93SGVpZ2h0KCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmlzRW5kQmxvY2sgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciB0b3RhbEJsb2NrcyA9IHRoaXMuZ2V0VG90YWxCbG9ja3MoKTtcbiAgICAgICAgICAgIHJldHVybiBpbmRleCA+PSB0b3RhbEJsb2NrcyB8fCBpbmRleCA9PT0gdG90YWxCbG9ja3MgLSAxO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRUb3RhbEJsb2NrcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5jb3VudCAvIHRoaXMuZ2V0QmxvY2tTaXplKCkpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5nZXRDb2x1bW5PZmZzZXQgPSBmdW5jdGlvbiAoYmxvY2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZnZW5lcmF0b3IuY09mZnNldHNbYmxvY2tdIHwgMDtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0TW9kZWxHZW5lcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHZpcnR1YWxfcm93X21vZGVsX2dlbmVyYXRvcl8xLlZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcih0aGlzLnBhcmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnJlc2V0U2Nyb2xsUG9zaXRpb24gPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3Rpb25zLnNvbWUoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA9PT0gYWN0aW9uOyB9KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmVudEV2ZW50ID0gdGhpcy5jb250ZW50LnNjcm9sbFRvcCAhPT0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUub25BY3Rpb25CZWdpbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRQcm9wZXJ0aWVzKHsgcGFnZVNldHRpbmdzOiB7IGN1cnJlbnRQYWdlOiAxIH0gfSwgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLmdldFJvd3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52Z2VuZXJhdG9yLmdldFJvd3MoKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbENvbnRlbnRSZW5kZXJlci5wcm90b3R5cGUuZ2V0Um93QnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIHByZXYgPSB0aGlzLnByZXZJbmZvLmJsb2NrSW5kZXhlcztcbiAgICAgICAgICAgIHZhciBzdGFydElkeCA9IChwcmV2WzBdIC0gMSkgKiB0aGlzLmdldEJsb2NrU2l6ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXggLSBzdGFydElkeF07XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxDb250ZW50UmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hPZmZzZXRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciByb3cgPSAwO1xuICAgICAgICAgICAgdmFyIGJTaXplID0gdGhpcy5nZXRCbG9ja1NpemUoKTtcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IHRoaXMuZ2V0VG90YWxCbG9ja3MoKTtcbiAgICAgICAgICAgIHRoaXMucHJldkhlaWdodCA9IHRoaXMub2Zmc2V0c1t0b3RhbF07XG4gICAgICAgICAgICB0aGlzLm1heEJsb2NrID0gdG90YWwgJSAyID09PSAwID8gdG90YWwgLSAyIDogdG90YWwgLSAxO1xuICAgICAgICAgICAgdGhpcy5vZmZzZXRzID0ge307XG4gICAgICAgICAgICBBcnJheS5hcHBseShudWxsLCBBcnJheSh0b3RhbCkpLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiArK3JvdzsgfSlcbiAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoYmxvY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgdG1wID0gKF90aGlzLnZnZW5lcmF0b3IuY2FjaGVbYmxvY2tdIHx8IFtdKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFyIHJlbSA9IF90aGlzLmNvdW50ICUgYlNpemU7XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSBibG9jayBpbiBfdGhpcy52Z2VuZXJhdG9yLmNhY2hlID9cbiAgICAgICAgICAgICAgICAgICAgdG1wICogdXRpbF8xLmdldFJvd0hlaWdodCgpIDogcmVtICYmIGJsb2NrID09PSB0b3RhbCA/IHJlbSAqIHV0aWxfMS5nZXRSb3dIZWlnaHQoKSA6IF90aGlzLmdldEJsb2NrSGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgX3RoaXMub2Zmc2V0c1tibG9ja10gPSAoX3RoaXMub2Zmc2V0c1tibG9jayAtIDFdIHwgMCkgKyBzaXplO1xuICAgICAgICAgICAgICAgIF90aGlzLnRtcE9mZnNldHNbYmxvY2tdID0gX3RoaXMub2Zmc2V0c1tibG9jayAtIDFdIHwgMDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vZmZzZXRLZXlzID0gT2JqZWN0LmtleXModGhpcy5vZmZzZXRzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5lbmFibGVDb2x1bW5WaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMudmdlbmVyYXRvci5yZWZyZXNoQ29sT2Zmc2V0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsQ29udGVudFJlbmRlcmVyLnByb3RvdHlwZS5yZWZyZXNoVmlydHVhbEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnZnZW5lcmF0b3IucmVmcmVzaENvbE9mZnNldHMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlydHVhbEhlaWdodCgpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVmlydHVhbENvbnRlbnRSZW5kZXJlcjtcbiAgICB9KGNvbnRlbnRfcmVuZGVyZXJfMS5Db250ZW50UmVuZGVyKSk7XG4gICAgZXhwb3J0cy5WaXJ0dWFsQ29udGVudFJlbmRlcmVyID0gVmlydHVhbENvbnRlbnRSZW5kZXJlcjtcbiAgICB2YXIgVmlydHVhbEhlYWRlclJlbmRlcmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFZpcnR1YWxIZWFkZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVmlydHVhbEhlYWRlclJlbmRlcmVyKHBhcmVudCwgbG9jYXRvcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBsb2NhdG9yKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMudmlydHVhbEVsZSA9IG5ldyBWaXJ0dWFsRWxlbWVudEhhbmRsZXIoKTtcbiAgICAgICAgICAgIF90aGlzLmdlbiA9IG5ldyB2aXJ0dWFsX3Jvd19tb2RlbF9nZW5lcmF0b3JfMS5WaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IoX3RoaXMucGFyZW50KTtcbiAgICAgICAgICAgIF90aGlzLnBhcmVudC5vbihjb25zdGFudF8xLnJlZnJlc2hWaXJ0dWFsQmxvY2ssIGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLnZpcnR1YWxJbmZvLnNlbnRpbmVsSW5mby5heGlzID09PSAnWCcgPyBfdGhpcy5yZWZyZXNoVUkoKSA6IG51bGw7IH0sIF90aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBWaXJ0dWFsSGVhZGVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5nZW4ucmVmcmVzaENvbE9mZnNldHMoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnNldENvbHVtbkluZGV4ZXNJblZpZXcodGhpcy5nZW4uZ2V0Q29sdW1uSW5kZXhlcyh0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZCkpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZW5kZXJUYWJsZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLnRhYmxlID0gdGhpcy5nZXRUYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLmNvbnRlbnQgPSB0aGlzLmdldFBhbmVsKCkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5jb250ZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgICAgIHRoaXMudmlydHVhbEVsZS5yZW5kZXJXcmFwcGVyKCk7XG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxFbGUucmVuZGVyUGxhY2VIb2xkZXIoJ2Fic29sdXRlJyk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxIZWFkZXJSZW5kZXJlci5wcm90b3R5cGUuYXBwZW5kQ29udGVudCA9IGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgdGhpcy52aXJ0dWFsRWxlLndyYXBwZXIuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsSGVhZGVyUmVuZGVyZXIucHJvdG90eXBlLnJlZnJlc2hVSSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VuLnJlZnJlc2hDb2xPZmZzZXRzKCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRDb2x1bW5JbmRleGVzSW5WaWV3KHRoaXMuZ2VuLmdldENvbHVtbkluZGV4ZXModGhpcy5nZXRQYW5lbCgpLmZpcnN0Q2hpbGQpKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVmcmVzaFVJLmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsSGVhZGVyUmVuZGVyZXI7XG4gICAgfShoZWFkZXJfcmVuZGVyZXJfMS5IZWFkZXJSZW5kZXIpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxIZWFkZXJSZW5kZXJlciA9IFZpcnR1YWxIZWFkZXJSZW5kZXJlcjtcbiAgICB2YXIgVmlydHVhbEVsZW1lbnRIYW5kbGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVmlydHVhbEVsZW1lbnRIYW5kbGVyKCkge1xuICAgICAgICB9XG4gICAgICAgIFZpcnR1YWxFbGVtZW50SGFuZGxlci5wcm90b3R5cGUucmVuZGVyV3JhcHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6ICdlLXZpcnR1YWx0YWJsZScgfSk7XG4gICAgICAgICAgICB0aGlzLndyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy50YWJsZSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy53cmFwcGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5yZW5kZXJQbGFjZUhvbGRlciA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSB2b2lkIDApIHsgcG9zaXRpb24gPSAncmVsYXRpdmUnOyB9XG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtdmlydHVhbHRyYWNrJywgc3R5bGVzOiBcInBvc2l0aW9uOlwiICsgcG9zaXRpb24gfSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5wbGFjZWhvbGRlcik7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxFbGVtZW50SGFuZGxlci5wcm90b3R5cGUuYWRqdXN0VGFibGUgPSBmdW5jdGlvbiAoeFZhbHVlLCB5VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZShcIiArIHhWYWx1ZSArIFwicHgsIFwiICsgeVZhbHVlICsgXCJweClcIjtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbEVsZW1lbnRIYW5kbGVyLnByb3RvdHlwZS5zZXRXcmFwcGVyV2lkdGggPSBmdW5jdGlvbiAod2lkdGgsIGZ1bGwpIHtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlci5zdHlsZS53aWR0aCA9IHdpZHRoID8gd2lkdGggKyBcInB4XCIgOiBmdWxsID8gJzEwMCUnIDogJyc7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxFbGVtZW50SGFuZGxlci5wcm90b3R5cGUuc2V0VmlydHVhbEhlaWdodCA9IGZ1bmN0aW9uIChoZWlnaHQsIHdpZHRoKSB7XG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIuc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFZpcnR1YWxFbGVtZW50SGFuZGxlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVmlydHVhbEVsZW1lbnRIYW5kbGVyID0gVmlydHVhbEVsZW1lbnRIYW5kbGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL3ZpcnR1YWwtY29udGVudC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEludGVyU2VjdGlvbk9ic2VydmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gSW50ZXJTZWN0aW9uT2JzZXJ2ZXIoZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuZnJvbVdoZWVsID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRvdWNoTW92ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0ge307XG4gICAgICAgICAgICB0aGlzLnNlbnRpbmVsSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAndXAnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAocmVjdCwgaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9IHJlY3QudG9wIC0gX3RoaXMuY29udGFpbmVyUmVjdC50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmVudGVyZWQgPSB0b3AgPj0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b3AgKyAoX3RoaXMub3B0aW9ucy5wYWdlSGVpZ2h0IC8gMikgPj0gMDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXhpczogJ1knXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnZG93bic6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChyZWN0LCBpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY0hlaWdodCA9IF90aGlzLm9wdGlvbnMuY29udGFpbmVyLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSByZWN0LmJvdHRvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uZW50ZXJlZCA9IHJlY3QuYm90dG9tIDw9IF90aGlzLmNvbnRhaW5lclJlY3QuYm90dG9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvcCAtIChfdGhpcy5vcHRpb25zLnBhZ2VIZWlnaHQgLyAyKSA8PSBfdGhpcy5vcHRpb25zLnBhZ2VIZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICB9LCBheGlzOiAnWSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdyaWdodCc6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uIChyZWN0LCBpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmlnaHQgPSByZWN0LnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5lbnRlcmVkID0gcmlnaHQgPCBfdGhpcy5jb250YWluZXJSZWN0LnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJpZ2h0IC0gX3RoaXMuY29udGFpbmVyUmVjdC53aWR0aCA8PSBfdGhpcy5jb250YWluZXJSZWN0LnJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB9LCBheGlzOiAnWCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdsZWZ0Jzoge1xuICAgICAgICAgICAgICAgICAgICBjaGVjazogZnVuY3Rpb24gKHJlY3QsIGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gcmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5lbnRlcmVkID0gbGVmdCA+IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGVmdCArIF90aGlzLmNvbnRhaW5lclJlY3Qud2lkdGggPj0gX3RoaXMuY29udGFpbmVyUmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICB9LCBheGlzOiAnWCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgSW50ZXJTZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIG9uRW50ZXJDYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyUmVjdCA9IHRoaXMub3B0aW9ucy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5vcHRpb25zLmNvbnRhaW5lciwgJ3doZWVsJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZnJvbVdoZWVsID0gdHJ1ZTsgfSwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5vcHRpb25zLmNvbnRhaW5lciwgJ3Njcm9sbCcsIHRoaXMudmlydHVhbFNjcm9sbEhhbmRsZXIoY2FsbGJhY2ssIG9uRW50ZXJDYWxsYmFjayksIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBJbnRlclNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IHRoaXMuc2VudGluZWxJbmZvW2RpcmVjdGlvbl07XG4gICAgICAgICAgICByZXR1cm4gaW5mby5jaGVjayh0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGluZm8pO1xuICAgICAgICB9O1xuICAgICAgICBJbnRlclNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUudmlydHVhbFNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIG9uRW50ZXJDYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBwcmV2VG9wID0gMDtcbiAgICAgICAgICAgIHZhciBwcmV2TGVmdCA9IDA7XG4gICAgICAgICAgICB2YXIgZGVib3VuY2VkMTAwID0gZWoyX2Jhc2VfMi5kZWJvdW5jZShjYWxsYmFjaywgMTAwKTtcbiAgICAgICAgICAgIHZhciBkZWJvdW5jZWQ1MCA9IGVqMl9iYXNlXzIuZGVib3VuY2UoY2FsbGJhY2ssIDUwKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciB0b3AgPSBlLnRhcmdldC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBlLnRhcmdldC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBwcmV2VG9wIDwgdG9wID8gJ2Rvd24nIDogJ3VwJztcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBwcmV2TGVmdCA9PT0gbGVmdCA/IGRpcmVjdGlvbiA6IHByZXZMZWZ0IDwgbGVmdCA/ICdyaWdodCcgOiAnbGVmdCc7XG4gICAgICAgICAgICAgICAgcHJldlRvcCA9IHRvcDtcbiAgICAgICAgICAgICAgICBwcmV2TGVmdCA9IGxlZnQ7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBfdGhpcy5zZW50aW5lbEluZm9bZGlyZWN0aW9uXTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5heGVzLmluZGV4T2YoY3VycmVudC5heGlzKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2hlY2sgPSBfdGhpcy5jaGVjayhkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LmVudGVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgb25FbnRlckNhbGxiYWNrKF90aGlzLmVsZW1lbnQsIGN1cnJlbnQsIGRpcmVjdGlvbiwgeyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IF90aGlzLmZyb21XaGVlbCA/IF90aGlzLm9wdGlvbnMuZGVib3VuY2VFdmVudCA/IGRlYm91bmNlZDEwMCA6IGNhbGxiYWNrIDogZGVib3VuY2VkMTAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5heGlzID09PSAnWCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuID0gZGVib3VuY2VkNTA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm4oeyBkaXJlY3Rpb246IGRpcmVjdGlvbiwgc2VudGluZWw6IGN1cnJlbnQsIG9mZnNldDogeyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5mcm9tV2hlZWwgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIEludGVyU2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5zZXRQYWdlSGVpZ2h0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucGFnZUhlaWdodCA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSW50ZXJTZWN0aW9uT2JzZXJ2ZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkludGVyU2VjdGlvbk9ic2VydmVyID0gSW50ZXJTZWN0aW9uT2JzZXJ2ZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMvaW50ZXJzZWN0aW9uLW9ic2VydmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA2OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL3NlcnZpY2VzL3Jvdy1tb2RlbC1nZW5lcmF0b3JcIiwgXCIuLi9zZXJ2aWNlcy9ncm91cC1tb2RlbC1nZW5lcmF0b3JcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCByb3dfbW9kZWxfZ2VuZXJhdG9yXzEsIGdyb3VwX21vZGVsX2dlbmVyYXRvcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNPZmZzZXRzID0ge307XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0ge307XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBzID0ge307XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMubW9kZWwgPSB0aGlzLnBhcmVudC5wYWdlU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLnJvd01vZGVsR2VuZXJhdG9yID0gdGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZyA/IG5ldyBncm91cF9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cE1vZGVsR2VuZXJhdG9yKHRoaXMucGFyZW50KSA6IG5ldyByb3dfbW9kZWxfZ2VuZXJhdG9yXzEuUm93TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzID0gZnVuY3Rpb24gKGRhdGEsIG5vdGlmeUFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IG5vdGlmeUFyZ3MudmlydHVhbEluZm8gPSBub3RpZnlBcmdzLnZpcnR1YWxJbmZvIHx8IHRoaXMuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgdmFyIHhBeGlzID0gaW5mby5zZW50aW5lbEluZm8gJiYgaW5mby5zZW50aW5lbEluZm8uYXhpcyA9PT0gJ1gnO1xuICAgICAgICAgICAgdmFyIHBhZ2UgPSAheEF4aXMgJiYgaW5mby5sb2FkTmV4dCAmJiAhaW5mby5sb2FkU2VsZiA/IGluZm8ubmV4dEluZm8ucGFnZSA6IGluZm8ucGFnZTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIHZhciBjZW50ZXIgPSB+fih0aGlzLm1vZGVsLnBhZ2VTaXplIC8gMik7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMuZ2V0QmxvY2tJbmRleGVzKHBhZ2UpO1xuICAgICAgICAgICAgdmFyIGxvYWRlZEJsb2NrcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jaGVja0FuZFJlc2V0Q2FjaGUobm90aWZ5QXJncy5yZXF1ZXN0VHlwZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2NrSW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNCbG9ja0F2YWlsYWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNhY2hlW3ZhbHVlXSA9IF90aGlzLnJvd01vZGVsR2VuZXJhdG9yLnJlZnJlc2hSb3dzKF90aGlzLmNhY2hlW3ZhbHVlXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZm8uYmxvY2tJbmRleGVzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0Jsb2NrQXZhaWxhYmxlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93cyA9IF90aGlzLnJvd01vZGVsR2VuZXJhdG9yLmdlbmVyYXRlUm93cyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aXJ0dWFsSW5mbzogaW5mbywgc3RhcnRJbmRleDogX3RoaXMuZ2V0U3RhcnRJbmRleCh2YWx1ZSwgZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZWRpYW4gPSB+fk1hdGgubWF4KHJvd3MubGVuZ3RoLCBfdGhpcy5tb2RlbC5wYWdlU2l6ZSkgLyAyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzQmxvY2tBdmFpbGFibGUoaW5kZXhlc1swXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNhY2hlW2luZGV4ZXNbMF1dID0gcm93cy5zbGljZSgwLCBtZWRpYW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNCbG9ja0F2YWlsYWJsZShpbmRleGVzWzFdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVbaW5kZXhlc1sxXV0gPSByb3dzLnNsaWNlKG1lZGlhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoICYmICF4QXhpcyAmJiBfdGhpcy5jYWNoZVt2YWx1ZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVbdmFsdWVdID0gX3RoaXMudXBkYXRlR3JvdXBSb3coX3RoaXMuY2FjaGVbdmFsdWVdLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoLmFwcGx5KHJlc3VsdCwgX3RoaXMuY2FjaGVbdmFsdWVdKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNCbG9ja0F2YWlsYWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkQmxvY2tzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW5mby5ibG9ja0luZGV4ZXMgPSBsb2FkZWRCbG9ja3M7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldEJsb2NrSW5kZXhlcyA9IGZ1bmN0aW9uIChwYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gW3BhZ2UgKyAocGFnZSAtIDEpLCBwYWdlICogMl07XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0UGFnZSA9IGZ1bmN0aW9uIChibG9jaykge1xuICAgICAgICAgICAgcmV0dXJuIGJsb2NrICUgMiA9PT0gMCA/IGJsb2NrIC8gMiA6IChibG9jayArIDEpIC8gMjtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5pc0Jsb2NrQXZhaWxhYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgaW4gdGhpcy5jYWNoZTtcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwYWdlOiB0aGlzLm1vZGVsLmN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgICAgIGJsb2NrSW5kZXhlczogdGhpcy5nZXRCbG9ja0luZGV4ZXModGhpcy5tb2RlbC5jdXJyZW50UGFnZSksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiAnZG93bicsXG4gICAgICAgICAgICAgICAgY29sdW1uSW5kZXhlczogdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhlc0luVmlldygpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLmdldFN0YXJ0SW5kZXggPSBmdW5jdGlvbiAoYmxrLCBkYXRhLCBmdWxsKSB7XG4gICAgICAgICAgICBpZiAoZnVsbCA9PT0gdm9pZCAwKSB7IGZ1bGwgPSB0cnVlOyB9XG4gICAgICAgICAgICB2YXIgcGFnZSA9IHRoaXMuZ2V0UGFnZShibGspO1xuICAgICAgICAgICAgdmFyIGV2ZW4gPSBibGsgJSAyID09PSAwO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gKHBhZ2UgLSAxKSAqIHRoaXMubW9kZWwucGFnZVNpemU7XG4gICAgICAgICAgICByZXR1cm4gZnVsbCB8fCAhZXZlbiA/IGluZGV4IDogaW5kZXggKyB+fih0aGlzLm1vZGVsLnBhZ2VTaXplIC8gMik7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Q29sdW1uSW5kZXhlcyA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQgPT09IHZvaWQgMCkgeyBjb250ZW50ID0gdGhpcy5wYXJlbnQuZ2V0SGVhZGVyQ29udGVudCgpLmZpcnN0Q2hpbGQ7IH1cbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gW107XG4gICAgICAgICAgICB2YXIgc0xlZnQgPSBjb250ZW50LnNjcm9sbExlZnQgfCAwO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLmNPZmZzZXRzKTtcbiAgICAgICAgICAgIHZhciBjV2lkdGggPSBjb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICAgICAgc0xlZnQgPSBNYXRoLm1pbih0aGlzLmNPZmZzZXRzW2tleXMubGVuZ3RoIC0gMV0gLSBjV2lkdGgsIHNMZWZ0KTtcbiAgICAgICAgICAgIHZhciBjYWxXaWR0aCA9IGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZSA/IDIgKiBjV2lkdGggOiBjV2lkdGggLyAyO1xuICAgICAgICAgICAgdmFyIGxlZnQgPSBzTGVmdCArIGNXaWR0aCArIChzTGVmdCA9PT0gMCA/IGNhbFdpZHRoIDogMCk7XG4gICAgICAgICAgICBrZXlzLnNvbWUoZnVuY3Rpb24gKG9mZnNldCwgaW5keCwgaW5wdXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IE51bWJlcihvZmZzZXQpO1xuICAgICAgICAgICAgICAgIHZhciBvZmZzZXRWYWwgPSBfdGhpcy5jT2Zmc2V0c1tvZmZzZXRdO1xuICAgICAgICAgICAgICAgIHZhciBib3JkZXIgPSBzTGVmdCAtIGNhbFdpZHRoIDw9IG9mZnNldFZhbCAmJiBsZWZ0ICsgY2FsV2lkdGggPj0gb2Zmc2V0VmFsO1xuICAgICAgICAgICAgICAgIGlmIChib3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKGlPZmZzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbGVmdCArIGNhbFdpZHRoIDwgb2Zmc2V0VmFsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXhlcztcbiAgICAgICAgfTtcbiAgICAgICAgVmlydHVhbFJvd01vZGVsR2VuZXJhdG9yLnByb3RvdHlwZS5jaGVja0FuZFJlc2V0Q2FjaGUgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgY2xlYXIgPSBbJ3BhZ2luZycsICdyZWZyZXNoJywgJ3NvcnRpbmcnLCAnZmlsdGVyaW5nJywgJ3NlYXJjaGluZycsICdncm91cGluZycsICd1bmdyb3VwaW5nJ11cbiAgICAgICAgICAgICAgICAuc29tZShmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIGFjdGlvbiA9PT0gdmFsdWU7IH0pO1xuICAgICAgICAgICAgaWYgKGNsZWFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBzID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2xlYXI7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUucmVmcmVzaENvbE9mZnNldHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNvbCA9IDA7XG4gICAgICAgICAgICB0aGlzLmNPZmZzZXRzID0ge307XG4gICAgICAgICAgICB2YXIgZ0xlbiA9IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgY29scyA9IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgY0xlbiA9IGNvbHMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGlzVmlzaWJsZSA9IGZ1bmN0aW9uIChjb2x1bW4pIHsgcmV0dXJuIGNvbHVtbi52aXNpYmxlICYmXG4gICAgICAgICAgICAgICAgKCFfdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5zaG93R3JvdXBlZENvbHVtbiA/IF90aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMuaW5kZXhPZihjb2x1bW4uZmllbGQpIDwgMCA6IGNvbHVtbi52aXNpYmxlKTsgfTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjLCBuKSB7IHJldHVybiBfdGhpcy5jT2Zmc2V0c1tuXSA9IChfdGhpcy5jT2Zmc2V0c1tuIC0gMV0gfCAwKSArIDMwOyB9KTtcbiAgICAgICAgICAgIEFycmF5LmFwcGx5KG51bGwsIEFycmF5KGNMZW4pKS5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gY29sKys7IH0pLmZvckVhY2goZnVuY3Rpb24gKGJsb2NrLCBpKSB7XG4gICAgICAgICAgICAgICAgYmxvY2sgPSBibG9jayArIGdMZW47XG4gICAgICAgICAgICAgICAgX3RoaXMuY09mZnNldHNbYmxvY2tdID0gKF90aGlzLmNPZmZzZXRzW2Jsb2NrIC0gMV0gfCAwKSArIChpc1Zpc2libGUoY29sc1tpXSkgPyBwYXJzZUludChjb2xzW2ldLndpZHRoLCAxMCkgOiAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3IucHJvdG90eXBlLnVwZGF0ZUdyb3VwUm93ID0gZnVuY3Rpb24gKGN1cnJlbnQsIGJsb2NrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaXJzdCA9IGN1cnJlbnRbMF07XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5jYWNoZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcihrZXkpIDwgYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcm93cyA9IHJvd3MuY29uY2F0KF90aGlzLmNhY2hlW2tleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRGaXJzdC5pc0RhdGFSb3cgfHwgYmxvY2sgJSAyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRlR3JvdXAoY3VycmVudCwgcm93cyk7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuaXRlcmF0ZUdyb3VwID0gZnVuY3Rpb24gKGN1cnJlbnQsIHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50Rmlyc3QgPSBjdXJyZW50WzBdO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICAgICAgICBpZiAoY3VycmVudEZpcnN0LmlzRGF0YVJvdykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzUHJlc2VudCA9IGN1cnJlbnQuc29tZShmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvd3Muc29tZShmdW5jdGlvbiAob1JvdywgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IG9Sb3cgJiYgb1Jvdy5kYXRhLmZpZWxkICE9PSB1bmRlZmluZWQgJiYgb1Jvdy5kYXRhLmZpZWxkID09PSByb3cuZGF0YS5maWVsZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgb1Jvdy5kYXRhLmtleSA9PT0gcm93LmRhdGEua2V5O1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaXNQcmVzZW50KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB0aGlzLml0ZXJhdGVHcm91cChjdXJyZW50LCByb3dzLnNsaWNlKG9mZnNldCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH07XG4gICAgICAgIFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvci5wcm90b3R5cGUuZ2V0Um93cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdO1xuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5jYWNoZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiByb3dzID0gcm93cy5jb25jYXQoX3RoaXMuY2FjaGVba2V5XSk7IH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBWaXJ0dWFsUm93TW9kZWxHZW5lcmF0b3I7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvciA9IFZpcnR1YWxSb3dNb2RlbEdlbmVyYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9zZXJ2aWNlcy92aXJ0dWFsLXJvdy1tb2RlbC1nZW5lcmF0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIi4uL3JlbmRlcmVyL2VkaXQtcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9ib29sZWFuLWVkaXQtY2VsbFwiLCBcIi4uL3JlbmRlcmVyL2Ryb3Bkb3duLWVkaXQtY2VsbFwiLCBcIi4uL3JlbmRlcmVyL251bWVyaWMtZWRpdC1jZWxsXCIsIFwiLi4vcmVuZGVyZXIvZGVmYXVsdC1lZGl0LWNlbGxcIiwgXCIuL2lubGluZS1lZGl0XCIsIFwiLi9iYXRjaC1lZGl0XCIsIFwiLi9kaWFsb2ctZWRpdFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGV2ZW50cywgZWRpdF9yZW5kZXJlcl8xLCBib29sZWFuX2VkaXRfY2VsbF8xLCBkcm9wZG93bl9lZGl0X2NlbGxfMSwgbnVtZXJpY19lZGl0X2NlbGxfMSwgZGVmYXVsdF9lZGl0X2NlbGxfMSwgaW5saW5lX2VkaXRfMSwgYmF0Y2hfZWRpdF8xLCBkaWFsb2dfZWRpdF8xLCBlajJfcG9wdXBzXzEsIHV0aWxfMSwgZWoyX3BvcHVwc18yLCBlajJfaW5wdXRzXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEVkaXQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBFZGl0KHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdENlbGxUeXBlID0ge1xuICAgICAgICAgICAgICAgICdkcm9wZG93bmVkaXQnOiBkcm9wZG93bl9lZGl0X2NlbGxfMS5Ecm9wRG93bkVkaXRDZWxsLFxuICAgICAgICAgICAgICAgICdudW1lcmljZWRpdCc6IG51bWVyaWNfZWRpdF9jZWxsXzEuTnVtZXJpY0VkaXRDZWxsLCAnYm9vbGVhbmVkaXQnOiBib29sZWFuX2VkaXRfY2VsbF8xLkJvb2xlYW5FZGl0Q2VsbCwgJ2RlZmF1bHQnOiBkZWZhdWx0X2VkaXRfY2VsbF8xLkRlZmF1bHRFZGl0Q2VsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZWRpdFR5cGUgPSB7ICdpbmxpbmUnOiBpbmxpbmVfZWRpdF8xLklubGluZUVkaXQsICdub3JtYWwnOiBpbmxpbmVfZWRpdF8xLklubGluZUVkaXQsICdiYXRjaCc6IGJhdGNoX2VkaXRfMS5CYXRjaEVkaXQsICdkaWFsb2cnOiBkaWFsb2dfZWRpdF8xLkRpYWxvZ0VkaXQgfTtcbiAgICAgICAgICAgIHRoaXMudGFwcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZUxvY2F0b3IgPSBzZXJ2aWNlTG9jYXRvcjtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVFZGl0T2JqKCk7XG4gICAgICAgIH1cbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlQ29sVHlwZU9iaiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnBhcmVudC5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgY29sLmVkaXQgPSBlajJfYmFzZV8yLmV4dGVuZChuZXcgdGhpcy5lZGl0Q2VsbFR5cGVbY29sLmVkaXRUeXBlICYmIHRoaXMuZWRpdENlbGxUeXBlW2NvbC5lZGl0VHlwZV0gP1xuICAgICAgICAgICAgICAgICAgICBjb2wuZWRpdFR5cGUgOiAnZGVmYXVsdCddKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yKSwgY29sLmVkaXQgfHwge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdlZGl0JztcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUubW9kdWxlICE9PSB0aGlzLmdldE1vZHVsZU5hbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgbmV3UHJvcCA9IGUucHJvcGVydGllcztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhlLnByb3BlcnRpZXMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0FkZGluZyc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbG93RGVsZXRpbmcnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbGxvd0VkaXRpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdPYmouZWRpdFNldHRpbmdzLmFsbG93QWRkaW5nIHx8IGdPYmouZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZyB8fCBnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0RlbGV0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsRW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbW9kZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUVkaXRPYmooKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdPYmouaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlRWRpdE9iaiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBlZGl0X3JlbmRlcmVyXzEuRWRpdFJlbmRlcih0aGlzLnBhcmVudCwgdGhpcy5zZXJ2aWNlTG9jYXRvcik7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUgPSBuZXcgdGhpcy5lZGl0VHlwZVt0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZV0odGhpcy5wYXJlbnQsIHRoaXMuc2VydmljZUxvY2F0b3IsIHRoaXMucmVuZGVyZXIpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5pbml0aWFsRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDb2xUeXBlT2JqKCk7XG4gICAgICAgICAgICB0aGlzLmwxMG4gPSB0aGlzLnNlcnZpY2VMb2NhdG9yLmdldFNlcnZpY2UoJ2xvY2FsaXphdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVBbGVydERsZygpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVDb25maXJtRGxnKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLCAndG91Y2hzdGFydCcsIHRoaXMudGFwRXZlbnQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5wYXJlbnQuZ2V0Q29udGVudCgpLCAndG91Y2hzdGFydCcsIHRoaXMudGFwRXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS50YXBFdmVudCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRVc2VyQWdlbnQoKSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy50YXBwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBzZXRUaW1lb3V0KHRoaXMudGltZW91dEhhbmRsZXIoKSwgMzAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRhcHBlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMuZG91YmxlVGFwLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXBwZWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZ2V0VXNlckFnZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHVzZXJBZ2VudCA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gL2lwaG9uZXxpcG9kfGlwYWQvLnRlc3QodXNlckFnZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudGltZW91dEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRhcHBlZCA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dFZGl0aW5nIHx8IGdPYmouaXNFZGl0IHx8IGdPYmouZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdPYmouZ2V0U2VsZWN0ZWRSb3dzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0cikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0VkaXRPcGVyYXRpb25BbGVydCcsIHRoaXMuYWxlcnRET2JqKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCF0cikge1xuICAgICAgICAgICAgICAgIHRyID0gZ09iai5nZXRTZWxlY3RlZFJvd3MoKVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0ci5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuc3RhcnRFZGl0KHRyKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXIoKTtcbiAgICAgICAgICAgIGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkcG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5jbG9zZUVkaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgPT09ICdiYXRjaCcgJiYgdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLnNob3dDb25maXJtRGlhbG9nXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS11cGRhdGVkdGQnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0NhbmNlbEVkaXQnLCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVG9vbGJhcigpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5yZWZyZXNoVG9vbGJhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYWRkUmVjb3JkID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLmFsbG93QWRkaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmFkZFJlY29yZChkYXRhKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRvb2xiYXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVsZXRlUmVjb3JkID0gZnVuY3Rpb24gKGZpZWxkbmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghZ09iai5lZGl0U2V0dGluZ3MuYWxsb3dEZWxldGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKGdPYmouc2VsZWN0ZWRSb3dJbmRleCkgfHwgZ09iai5zZWxlY3RlZFJvd0luZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0RlbGV0ZU9wZXJhdGlvbkFsZXJ0JywgdGhpcy5hbGVydERPYmopO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmVkaXRTZXR0aW5ncy5zaG93RGVsZXRlQ29uZmlybURpYWxvZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0NvbmZpcm1EZWxldGUnLCB0aGlzLmRpYWxvZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZGVsZXRlUmVjb3JkKGZpZWxkbmFtZSwgZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlbGV0ZVJvdyA9IGZ1bmN0aW9uICh0cikge1xuICAgICAgICAgICAgdGhpcy5kZWxldGVSZWNvcmQobnVsbCwgdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbcGFyc2VJbnQodHIuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKV0pO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlID09PSAnYmF0Y2gnICYmIHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5zaG93Q29uZmlybURpYWxvZykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZygnQmF0Y2hTYXZlQ29uZmlybScsIHRoaXMuZGlhbG9nT2JqKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuZEVkaXRpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlQ2VsbCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgZmllbGQsIHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUudXBkYXRlQ2VsbChyb3dJbmRleCwgZmllbGQsIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudXBkYXRlUm93ID0gZnVuY3Rpb24gKGluZGV4LCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUudXBkYXRlUm93KGluZGV4LCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYmF0Y2hDYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRWRpdCgpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5iYXRjaFNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVuZEVkaXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZWRpdENlbGwgPSBmdW5jdGlvbiAoaW5kZXgsIGZpZWxkKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuZWRpdENlbGwoaW5kZXgsIGZpZWxkKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZWRpdEZvcm1WYWxpZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1PYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtT2JqLnZhbGlkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldEJhdGNoQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRNb2R1bGUuZ2V0QmF0Y2hDaGFuZ2VzID8gdGhpcy5lZGl0TW9kdWxlLmdldEJhdGNoQ2hhbmdlcygpIDoge307XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldEN1cnJlbnRFZGl0Q2VsbERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2JqID0gdGhpcy5nZXRDdXJyZW50RWRpdGVkRGF0YSh0aGlzLmZvcm1PYmouZWxlbWVudCwge30pO1xuICAgICAgICAgICAgcmV0dXJuIG9ialtPYmplY3Qua2V5cyhvYmopWzBdXTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuc2F2ZUNlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuc2F2ZUNlbGwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZW5kRWRpdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZHVsZS5lbmRFZGl0KCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLnNob3dEaWFsb2cgPSBmdW5jdGlvbiAoY29udGVudCwgb2JqKSB7XG4gICAgICAgICAgICBvYmouY29udGVudCA9ICc8ZGl2PicgKyB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoY29udGVudCkgKyAnPC9kaXY+JztcbiAgICAgICAgICAgIG9iai5zaG93KCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldFZhbHVlRnJvbVR5cGUgPSBmdW5jdGlvbiAoY29sLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IHZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoIChjb2wudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9ICFlajJfYmFzZV80LmlzTnVsbE9yVW5kZWZpbmVkKHBhcnNlRmxvYXQodmFsdWUpKSA/IHBhcnNlRmxvYXQodmFsdWUpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZWRpdFR5cGUgIT09ICdib29sZWFuZWRpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbHVlID09PSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ1RydWUnKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5lZGl0VHlwZSAhPT0gJ2RhdGVwaWNrZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5kZXN0cm95VG9vbFRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0ZC5lLXRvb2x0aXAnKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVsZW1lbnRzXzEgPSBlbGVtZW50czsgX2kgPCBlbGVtZW50c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gZWxlbWVudHNfMVtfaV07XG4gICAgICAgICAgICAgICAgZWxlbS5lajJfaW5zdGFuY2VzWzBdLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuY3JlYXRlQ29uZmlybURsZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqID0gdGhpcy5kbGdXaWRnZXQoW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuZGxnT2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgY29udGVudDogdGhpcy5sMTBuLmdldENvbnN0YW50KCdPS0J1dHRvbicpLCBjc3NDbGFzczogJ2UtcHJpbWFyeScsIGlzUHJpbWFyeTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmRsZ0NhbmNlbC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBidXR0b25Nb2RlbDogeyBjc3NDbGFzczogJ2UtZmxhdCcsIGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsQnV0dG9uJykgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sICdFZGl0Q29uZmlybScpO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5jcmVhdGVBbGVydERsZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYWxlcnRET2JqID0gdGhpcy5kbGdXaWRnZXQoW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuYWxlcnRDbGljay5iaW5kKHRoaXMpLCBidXR0b25Nb2RlbDogeyBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ09LQnV0dG9uJyksIGNzc0NsYXNzOiAnZS1mbGF0JywgaXNQcmltYXJ5OiB0cnVlIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLCAnRWRpdEFsZXJ0Jyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmFsZXJ0Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFsZXJ0RE9iai5oaWRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRsZ1dpZGdldCA9IGZ1bmN0aW9uIChidG5PcHRpb25zLCBuYW1lKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgbmFtZSB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHNob3dDbG9zZUljb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzTW9kYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2xvc2VPbkVzY2FwZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMucGFyZW50LmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICczMjBweCcsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uU2V0dGluZ3M6IHsgZWZmZWN0OiAnTm9uZScgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9wdGlvbnMuYnV0dG9ucyA9IGJ0bk9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgb2JqID0gbmV3IGVqMl9wb3B1cHNfMS5EaWFsb2cob3B0aW9ucyk7XG4gICAgICAgICAgICBvYmouYXBwZW5kVG8oZGl2KTtcbiAgICAgICAgICAgIHV0aWxfMS5jaGFuZ2VCdXR0b25UeXBlKG9iai5lbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRsZ0NhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqLmhpZGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGxnT2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmRpYWxvZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWRsZy1jb250ZW50JykuZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NvbmZpcm1EZWxldGUnKTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlLmRlbGV0ZVJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMubDEwbi5nZXRDb25zdGFudCgnQ2FuY2VsRWRpdCcpOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGUuY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5sMTBuLmdldENvbnN0YW50KCdCYXRjaFNhdmVDb25maXJtJyk6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kRWRpdGluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMubDEwbi5nZXRDb25zdGFudCgnQmF0Y2hTYXZlTG9zdENoYW5nZXMnKTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlQWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kbGdDYW5jZWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbkJvdW5kTW9kZWxDaGFuZ2VkLCB0aGlzLm9uUHJvcGVydHlDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5pbml0aWFsRW5kLCB0aGlzLmluaXRpYWxFbmQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5hdXRvQ29sLCB0aGlzLnVwZGF0ZUNvbFR5cGVPYmosIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB0aGlzLmRlc3Ryb3lUb29sVGlwLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHRoaXMucHJldmVudEJhdGNoLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95Rm9ybSwgdGhpcy5kZXN0cm95Rm9ybSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5hY3Rpb25CZWdpbiwgdGhpcy5vbkFjdGlvbkJlZ2luLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHRoaXMuYWN0aW9uQ29tcGxldGUuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuaW5pdGlhbEVuZCwgdGhpcy53aXJlRXZlbnRzLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuaW5Cb3VuZE1vZGVsQ2hhbmdlZCwgdGhpcy5vblByb3BlcnR5Q2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMuaW5pdGlhbEVuZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuYXV0b0NvbCwgdGhpcy51cGRhdGVDb2xUeXBlT2JqKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMudG9vbHRpcERlc3Ryb3ksIHRoaXMuZGVzdHJveVRvb2xUaXApO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5wcmV2ZW50QmF0Y2gsIHRoaXMucHJldmVudEJhdGNoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGVzdHJveUZvcm0sIHRoaXMuZGVzdHJveUZvcm0pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQ29tcGxldGUsIHRoaXMuYWN0aW9uQ29tcGxldGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuYWN0aW9uQmVnaW4sIHRoaXMub25BY3Rpb25CZWdpbik7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmluaXRpYWxFbmQsIHRoaXMudW53aXJlRXZlbnRzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUucmVxdWVzdFR5cGUgIT09ICdhZGQnICYmIGUucmVxdWVzdFR5cGUgIT09ICdiZWdpbkVkaXQnICYmIGUucmVxdWVzdFR5cGUgIT09ICdkZWxldGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUb29sYmFyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmdldEN1cnJlbnRFZGl0ZWREYXRhID0gZnVuY3Rpb24gKGZvcm0sIGVkaXRlZERhdGEpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaW5wdXRzID0gW10uc2xpY2UuY2FsbChmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWZpZWxkJykpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGlucHV0cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBnT2JqLmdldENvbHVtbkJ5VWlkKGlucHV0c1tpXS5nZXRBdHRyaWJ1dGUoJ2UtbWFwcGluZ3VpZCcpKTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKGNvbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGNvbC5lZGl0LnJlYWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVtcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBlajJfYmFzZV8yLmdldFZhbHVlKHRlbXAsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBnT2JqLmVkaXRNb2R1bGUuZ2V0VmFsdWVGcm9tVHlwZShjb2wsIGNvbC5lZGl0LnJlYWQoaW5wdXRzW2ldKSk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzQuc2V0VmFsdWUoY29sLmZpZWxkLCB2YWx1ZSwgZWRpdGVkRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVkaXRlZERhdGE7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLm9uQWN0aW9uQmVnaW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmIHRoaXMuZm9ybU9iaiAmJiAhdGhpcy5mb3JtT2JqLmlzRGVzdHJveWVkICYmICFlLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUZvcm0oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lXaWRnZXRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlc3Ryb3lXaWRnZXRzID0gZnVuY3Rpb24gKGNvbHMpIHtcbiAgICAgICAgICAgIGNvbHMgPSBjb2xzID8gY29scyA6IHRoaXMucGFyZW50LmNvbHVtbnM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHNfMSA9IGNvbHM7IF9pIDwgY29sc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2xzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb2wuZWRpdC5kZXN0cm95KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbC5lZGl0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXQucHJvdG90eXBlLmRlc3Ryb3lGb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95VG9vbFRpcCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZm9ybU9iaiAmJiAhdGhpcy5mb3JtT2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGVzdHJveVRvb2xUaXAoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUZvcm0oKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5hbGVydERPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdpbnNlcnQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZVJlY29yZCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmMic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRFZGl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnYmF0Y2gnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1ncmlkY29udGVudCcpICYmICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1wb3B1cC1vcGVuJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZEVkaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlc2NhcGUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRWRpdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUucHJldmVudEJhdGNoID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmVudE9iaiA9IGFyZ3M7XG4gICAgICAgICAgICB0aGlzLnNob3dEaWFsb2coJ0JhdGNoU2F2ZUxvc3RDaGFuZ2VzJywgdGhpcy5kaWFsb2dPYmopO1xuICAgICAgICB9O1xuICAgICAgICBFZGl0LnByb3RvdHlwZS5leGVjdXRlQWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2ZW50T2JqLmhhbmRsZXIuY2FsbCh0aGlzLnByZXZlbnRPYmouaW5zdGFuY2UsIHRoaXMucHJldmVudE9iai5hcmcxLCB0aGlzLnByZXZlbnRPYmouYXJnMiwgdGhpcy5wcmV2ZW50T2JqLmFyZzMsIHRoaXMucHJldmVudE9iai5hcmc0LCB0aGlzLnByZXZlbnRPYmouYXJnNSwgdGhpcy5wcmV2ZW50T2JqLmFyZzYsIHRoaXMucHJldmVudE9iai5hcmc3KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUuYXBwbHlGb3JtVmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChjb2xzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRmb3JtJyk7XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSB7fTtcbiAgICAgICAgICAgIGNvbHMgPSBjb2xzID8gY29scyA6IGdPYmouY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sc18yID0gY29sczsgX2kgPCBjb2xzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGNvbHNfMltfaV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbC52YWxpZGF0aW9uUnVsZXMgJiYgZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcjJyArIGdPYmouZWxlbWVudC5pZCArIGNvbC5maWVsZCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzW2NvbC5maWVsZF0gPSBjb2wudmFsaWRhdGlvblJ1bGVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVkaXRNb2R1bGUuZm9ybU9iaiA9IG5ldyBlajJfaW5wdXRzXzEuRm9ybVZhbGlkYXRvcihmb3JtLCB7XG4gICAgICAgICAgICAgICAgcnVsZXM6IHJ1bGVzLFxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25Db21wbGV0ZTogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudmFsaWRhdGlvbkNvbXBsZXRlKGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY3VzdG9tUGxhY2VtZW50OiBmdW5jdGlvbiAoaW5wdXRFbGVtZW50LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy52YWxFcnJvclBsYWNlbWVudChpbnB1dEVsZW1lbnQsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudmFsRXJyb3JQbGFjZW1lbnQgPSBmdW5jdGlvbiAoaW5wdXRFbGVtZW50LCBlcnJvcikge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZCA9IHV0aWxfMS5wYXJlbnRzVW50aWwoaW5wdXRFbGVtZW50LCAnZS1yb3djZWxsJyk7XG4gICAgICAgICAgICAgICAgaWYgKCF0ZC5lajJfaW5zdGFuY2VzIHx8ICF0ZC5lajJfaW5zdGFuY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9vbHRpcCA9IG5ldyBlajJfcG9wdXBzXzIuVG9vbHRpcCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuc09uOiAnY3VzdG9tJywgY29udGVudDogZXJyb3IsIHBvc2l0aW9uOiAnYm90dG9tIGNlbnRlcicsIGNzc0NsYXNzOiAnZS1ncmlkZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiB7IG9wZW46IHsgZWZmZWN0OiAnTm9uZScgfSwgY2xvc2U6IHsgZWZmZWN0OiAnTm9uZScgfSB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0b29sdGlwLmFwcGVuZFRvKHRkKTtcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC5vcGVuKHRkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRkLmVqMl9pbnN0YW5jZXNbMF0uY29udGVudCA9IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdC5wcm90b3R5cGUudmFsaWRhdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IHV0aWxfMS5wYXJlbnRzVW50aWwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5wYXJlbnQuZWxlbWVudC5pZCArIGFyZ3MuaW5wdXROYW1lKSwgJ2Utcm93Y2VsbCcpO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtICYmIGVsZW0uZWoyX2luc3RhbmNlcyAmJiBlbGVtLmVqMl9pbnN0YW5jZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0T2JqID0gZWxlbS5lajJfaW5zdGFuY2VzWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5zdGF0dXMgPT09ICdmYWlsdXJlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdE9iai5vcGVuKHV0aWxfMS5wYXJlbnRzVW50aWwoYXJncy5lbGVtZW50LCAnZS1yb3djZWxsJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdE9iai5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRPYmoucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEVkaXQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkVkaXQgPSBFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZWRpdC5qc1xuLy8gbW9kdWxlIGlkID0gNzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfaW5wdXRzXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTnVtZXJpY0VkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTnVtZXJpY0VkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgTnVtZXJpY0VkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maWVsZCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgYXJncy5jb2x1bW4uZmllbGQsIG5hbWU6IGFyZ3MuY29sdW1uLmZpZWxkLCAnZS1tYXBwaW5ndWlkJzogYXJncy5jb2x1bW4udWlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIE51bWVyaWNFZGl0Q2VsbC5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5lajJfaW5zdGFuY2VzWzBdLnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpc0lubGluZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJztcbiAgICAgICAgICAgIHRoaXMub2JqID0gbmV3IGVqMl9pbnB1dHNfMS5OdW1lcmljVGV4dEJveChlajJfYmFzZV8xLmV4dGVuZCh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHBhcnNlRmxvYXQoYXJncy5yb3dEYXRhW2NvbC5maWVsZF0pLCBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCxcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaXNJbmxpbmUgPyAnJyA6IGFyZ3MuY29sdW1uLmhlYWRlclRleHQsXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCksXG4gICAgICAgICAgICAgICAgZmxvYXRMYWJlbFR5cGU6IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJyA/ICdOZXZlcicgOiAnQWx3YXlzJyxcbiAgICAgICAgICAgIH0sIGNvbC5lZGl0LnBhcmFtcykpO1xuICAgICAgICAgICAgdGhpcy5vYmouYXBwZW5kVG8oYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBjb2wuZmllbGQpO1xuICAgICAgICB9O1xuICAgICAgICBOdW1lcmljRWRpdENlbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vYmogJiYgIXRoaXMub2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTnVtZXJpY0VkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5OdW1lcmljRWRpdENlbGwgPSBOdW1lcmljRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvbnVtZXJpYy1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDcxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV83Ml9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLWlucHV0c1wiXG4vLyBtb2R1bGUgaWQgPSA3MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4vaW5saW5lLWVkaXQtcmVuZGVyZXJcIiwgXCIuL2JhdGNoLWVkaXQtcmVuZGVyZXJcIiwgXCIuL2RpYWxvZy1lZGl0LXJlbmRlcmVyXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLCBiYXRjaF9lZGl0X3JlbmRlcmVyXzEsIGRpYWxvZ19lZGl0X3JlbmRlcmVyXzEsIGVqMl9iYXNlXzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEVkaXRSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBFZGl0UmVuZGVyKHBhcmVudCwgc2VydmljZUxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdFR5cGUgPSB7XG4gICAgICAgICAgICAgICAgJ2lubGluZSc6IGlubGluZV9lZGl0X3JlbmRlcmVyXzEuSW5saW5lRWRpdFJlbmRlcixcbiAgICAgICAgICAgICAgICAnbm9ybWFsJzogaW5saW5lX2VkaXRfcmVuZGVyZXJfMS5JbmxpbmVFZGl0UmVuZGVyLCAnYmF0Y2gnOiBiYXRjaF9lZGl0X3JlbmRlcmVyXzEuQmF0Y2hFZGl0UmVuZGVyLCAnZGlhbG9nJzogZGlhbG9nX2VkaXRfcmVuZGVyZXJfMS5EaWFsb2dFZGl0UmVuZGVyXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IHRoaXMuZWRpdFR5cGVbdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGVdKHBhcmVudCwgc2VydmljZUxvY2F0b3IpO1xuICAgICAgICB9XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLmFkZE5ldyA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZE5ldyh0aGlzLmdldEVkaXRFbGVtZW50cyhhcmdzKSwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLmNvbnZlcnRXaWRnZXQoYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZSh0aGlzLmdldEVkaXRFbGVtZW50cyhhcmdzKSwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLmNvbnZlcnRXaWRnZXQoYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLmNvbnZlcnRXaWRnZXQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBpc0ZvY3VzZWQ7XG4gICAgICAgICAgICB2YXIgY2VsbDtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWdyaWRmb3JtJyk7XG4gICAgICAgICAgICB2YXIgY29scyA9IGdPYmouZWRpdFNldHRpbmdzLm1vZGUgIT09ICdiYXRjaCcgPyBnT2JqLmNvbHVtbnMgOiBbZ09iai5nZXRDb2x1bW5CeUZpZWxkKGFyZ3MuY29sdW1uTmFtZSldO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb2xzXzEgPSBjb2xzOyBfaSA8IGNvbHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gY29sc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbC52YWx1ZUFjY2Vzc29yKGNvbC5maWVsZCwgYXJncy5yb3dEYXRhLCBjb2wpO1xuICAgICAgICAgICAgICAgIGNlbGwgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tlLW1hcHBpbmd1aWQ9JyArIGNvbC51aWQgKyAnXScpO1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sLmVkaXQud3JpdGU7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wID0gZWoyX2Jhc2VfMS5nZXRWYWx1ZSh0ZW1wLCB3aW5kb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb2wuZWRpdC53cml0ZSh7IHJvd0RhdGE6IGFyZ3Mucm93RGF0YSwgZWxlbWVudDogY2VsbCwgY29sdW1uOiBjb2wsIHJlcXVlc3RUeXBlOiBhcmdzLnJlcXVlc3RUeXBlIH0pO1xuICAgICAgICAgICAgICAgIGlmICghaXNGb2N1c2VkICYmICFjZWxsLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzRWxlbWVudChjZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVkaXRSZW5kZXIucHJvdG90eXBlLmZvY3VzRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgICAgICBlbGVtLmZvY3VzKCk7XG4gICAgICAgICAgICBpZiAoZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGVmYXVsdGNlbGwnKSkge1xuICAgICAgICAgICAgICAgIGVsZW0uc2V0U2VsZWN0aW9uUmFuZ2UoZWxlbS52YWx1ZS5sZW5ndGgsIGVsZW0udmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRWRpdFJlbmRlci5wcm90b3R5cGUuZ2V0RWRpdEVsZW1lbnRzID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSB7fTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gZ09iai5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2JhdGNoJyA/IGdPYmouY29sdW1ucyA6IFtnT2JqLmdldENvbHVtbkJ5RmllbGQoYXJncy5jb2x1bW5OYW1lKV07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvbHNfMiA9IGNvbHM7IF9pIDwgY29sc18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBjb2xzXzJbX2ldO1xuICAgICAgICAgICAgICAgIGlmICghY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbC52YWx1ZUFjY2Vzc29yKGNvbC5maWVsZCwgYXJncy5yb3dEYXRhLCBjb2wpO1xuICAgICAgICAgICAgICAgIHZhciB0QXJncyA9IHsgY29sdW1uOiBjb2wsIHZhbHVlOiB2YWx1ZSwgdHlwZTogYXJncy5yZXF1ZXN0VHlwZSB9O1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY29sLmVkaXQuY3JlYXRlO1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpbnB1dCA9IGNvbC5lZGl0LmNyZWF0ZSh0QXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBkaXYuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBpbnB1dC50YWdOYW1lICE9PSAnaW5wdXQnICYmIGlucHV0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuYXR0cmlidXRlcyhpc0lucHV0ID8gaW5wdXQucXVlcnlTZWxlY3RvcignaW5wdXQnKSA6IGlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbC5maWVsZCwgJ2UtbWFwcGluZ3VpZCc6IGNvbC51aWQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBnT2JqLmVsZW1lbnQuaWQgKyBjb2wuZmllbGQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QoaW5wdXQsIFsnZS1pbnB1dCcsICdlLWZpZWxkJ10sIFtdKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sLnRleHRBbGlnbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdlLXJhbGlnbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKGNvbC5pc1ByaW1hcnlLZXkgfHwgY29sLmlzSWRlbnRpdHkpICYmIGFyZ3MucmVxdWVzdFR5cGUgPT09ICdiZWdpbkVkaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbGVtZW50c1tjb2wudWlkXSA9IGlucHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRWRpdFJlbmRlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRWRpdFJlbmRlciA9IEVkaXRSZW5kZXI7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZWRpdC1yZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBJbmxpbmVFZGl0UmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gSW5saW5lRWRpdFJlbmRlcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIElubGluZUVkaXRSZW5kZXIucHJvdG90eXBlLmFkZE5ldyA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdmFyIHRib2R5ID0gdGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICAgICAgICAgIGFyZ3Mucm93ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0cicsIHsgY2xhc3NOYW1lOiAnZS1yb3cgZS1hZGRlZHJvdycgfSk7XG4gICAgICAgICAgICB0Ym9keS5pbnNlcnRCZWZvcmUoYXJncy5yb3csIHRib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgYXJncy5yb3cuYXBwZW5kQ2hpbGQodGhpcy5nZXRFZGl0RWxlbWVudChlbGVtZW50cywgZmFsc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW5saW5lRWRpdFJlbmRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICBhcmdzLnJvdy5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGFyZ3Mucm93LmFwcGVuZENoaWxkKHRoaXMuZ2V0RWRpdEVsZW1lbnQoZWxlbWVudHMsIHRydWUpKTtcbiAgICAgICAgICAgIGFyZ3Mucm93LmNsYXNzTGlzdC5hZGQoJ2UtZWRpdGVkcm93Jyk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXRSZW5kZXIucHJvdG90eXBlLmdldEVkaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBpc0VkaXQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ0xlbiA9IDA7XG4gICAgICAgICAgICB2YXIgaXNEZXRhaWwgPSAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChnT2JqLmRldGFpbFRlbXBsYXRlKSB8fCAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChnT2JqLmNoaWxkR3JpZCkgPyAxIDogMDtcbiAgICAgICAgICAgIGlmIChnT2JqLmFsbG93R3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBnTGVuID0gZ09iai5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRkID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWVkaXRjZWxsIGUtbm9ybWFsZWRpdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgY29sc3BhbjogKGdPYmouZ2V0VmlzaWJsZUNvbHVtbnMoKS5sZW5ndGggKyBnTGVuICsgaXNEZXRhaWwpLnRvU3RyaW5nKCkgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgZm9ybSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZm9ybScsIHsgaWQ6IGdPYmouZWxlbWVudC5pZCArICdFZGl0Rm9ybScsIGNsYXNzTmFtZTogJ2UtZ3JpZGZvcm0nIH0pO1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHsgY2xhc3NOYW1lOiAnZS10YWJsZSBlLWlubGluZS1lZGl0JywgYXR0cnM6IHsgY2VsbHNwYWNpbmc6ICcwLjI1JyB9IH0pO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoZ09iai5nZXRDb250ZW50VGFibGUoKS5xdWVyeVNlbGVjdG9yKCdjb2xncm91cCcpLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgICAgICB2YXIgdGJvZHkgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgICAgICB2YXIgdHIgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBpZiAoaXNEZXRhaWwpIHtcbiAgICAgICAgICAgICAgICB0ci5pbnNlcnRCZWZvcmUoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1kZXRhaWxyb3djb2xsYXBzZScgfSksIHRyLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGkgPCBnTGVuKSB7XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHsgY2xhc3NOYW1lOiAnZS1pbmRlbnRjZWxsJyB9KSk7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGdPYmouY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmICghY29sLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0ZF8xID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1yb3djZWxsJywgYXR0cnM6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOicgKyAoY29sLnRleHRBbGlnbiA/IGNvbC50ZXh0QWxpZ24gOiAnJykgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRkXzEuYXBwZW5kQ2hpbGQoZWxlbWVudHNbY29sLnVpZF0pO1xuICAgICAgICAgICAgICAgIGlmIChjb2wuZWRpdFR5cGUgPT09ICdib29sZWFuZWRpdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGRfMS5jbGFzc0xpc3QuYWRkKCdlLWJvb2xjZWxsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkXzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICAgICAgICAgIHJldHVybiB0ZDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIElubGluZUVkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLklubGluZUVkaXRSZW5kZXIgPSBJbmxpbmVFZGl0UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2lubGluZS1lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJhdGNoRWRpdFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEJhdGNoRWRpdFJlbmRlcihwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIEJhdGNoRWRpdFJlbmRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICBhcmdzLmNlbGwuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBhcmdzLmNlbGwuYXBwZW5kQ2hpbGQodGhpcy5nZXRFZGl0RWxlbWVudChlbGVtZW50cywgYXJncykpO1xuICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5hZGQoJ2UtZWRpdGVkYmF0Y2hjZWxsJyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmNsYXNzTGlzdChhcmdzLnJvdywgWydlLWVkaXRlZHJvdycsICdlLWJhdGNocm93J10sIFtdKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0UmVuZGVyLnByb3RvdHlwZS5nZXRFZGl0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdmb3JtJywgeyBpZDogZ09iai5lbGVtZW50LmlkICsgJ0VkaXRGb3JtJywgY2xhc3NOYW1lOiAnZS1ncmlkZm9ybScgfSk7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGVsZW1lbnRzW2FyZ3MuY29sdW1uT2JqZWN0LnVpZF0pO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uT2JqZWN0LmVkaXRUeXBlID09PSAnYm9vbGVhbmVkaXQnKSB7XG4gICAgICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5hZGQoJ2UtYm9vbGNlbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghYXJncy5jb2x1bW5PYmplY3QuZWRpdFR5cGUpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LmFkZCgnZS1pbnB1dGJveCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBCYXRjaEVkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkJhdGNoRWRpdFJlbmRlciA9IEJhdGNoRWRpdFJlbmRlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9yZW5kZXJlci9iYXRjaC1lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItcG9wdXBzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vYmFzZS91dGlsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX3BvcHVwc18xLCBlajJfYmFzZV8xLCBldmVudHMsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGlhbG9nRWRpdFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERpYWxvZ0VkaXRSZW5kZXIocGFyZW50LCBzZXJ2aWNlTG9jYXRvcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZGlhbG9nRGVzdHJveSwgdGhpcy5kZXN0cm95LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kZXN0cm95LCB0aGlzLmRlc3Ryb3ksIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLnNldExvY2FsZU9iaiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubDEwbiA9IHRoaXMuc2VydmljZUxvY2F0b3IuZ2V0U2VydmljZSgnbG9jYWxpemF0aW9uJyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmFkZE5ldyA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRGlhbG9nKGVsZW1lbnRzLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZURpYWxvZyhlbGVtZW50cywgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmNyZWF0ZURpYWxvZyA9IGZ1bmN0aW9uIChlbGVtZW50cywgYXJncykge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGlkOiBnT2JqLmVsZW1lbnQuaWQgKyAnX2RpYWxvZ0VkaXRfd3JhcHBlcicgfSk7XG4gICAgICAgICAgICBnT2JqLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5kaWFsb2cpO1xuICAgICAgICAgICAgdGhpcy5zZXRMb2NhbGVPYmooKTtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nT2JqID0gbmV3IGVqMl9wb3B1cHNfMS5EaWFsb2coe1xuICAgICAgICAgICAgICAgIGhlYWRlcjogdGhpcy5pc0VkaXQgPyB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0VkaXRGb3JtVGl0bGUnKSArIGFyZ3MucHJpbWFyeUtleVZhbHVlWzBdIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sMTBuLmdldENvbnN0YW50KCdBZGRGb3JtVGl0bGUnKSwgaXNNb2RhbDogdHJ1ZSwgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLmdldEVkaXRFbGVtZW50KGVsZW1lbnRzKSwgc2hvd0Nsb3NlSWNvbjogdHJ1ZSwgYWxsb3dEcmFnZ2luZzogdHJ1ZSwgY2xvc2U6IHRoaXMuZGVzdHJveS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGNsb3NlT25Fc2NhcGU6IHRydWUsIHdpZHRoOiAnMzMwcHgnLCB0YXJnZXQ6IGdPYmouZWxlbWVudCwgYW5pbWF0aW9uU2V0dGluZ3M6IHsgZWZmZWN0OiAnTm9uZScgfSxcbiAgICAgICAgICAgICAgICBidXR0b25zOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuYnRuQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6IHRoaXMubDEwbi5nZXRDb25zdGFudCgnU2F2ZUJ1dHRvbicpLCBjc3NDbGFzczogJ2UtcHJpbWFyeScsIGlzUHJpbWFyeTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgY2xpY2s6IHRoaXMuYnRuQ2xpY2suYmluZCh0aGlzKSwgYnV0dG9uTW9kZWw6IHsgY3NzQ2xhc3M6ICdlLWZsYXQnLCBjb250ZW50OiB0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NhbmNlbEJ1dHRvbicpIH0gfV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouYXBwZW5kVG8odGhpcy5kaWFsb2cpO1xuICAgICAgICAgICAgdXRpbF8xLmNoYW5nZUJ1dHRvblR5cGUodGhpcy5kaWFsb2dPYmouZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmJ0bkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmwxMG4uZ2V0Q29uc3RhbnQoJ0NhbmNlbEJ1dHRvbicpLnRvTG93ZXJDYXNlKCkgPT09IGUudGFyZ2V0LmlubmVyVGV4dC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuY2xvc2VFZGl0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lbmRFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXRSZW5kZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy5kZXN0cm95Rm9ybSwge30pO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2xiYXJSZWZyZXNoLCB7fSk7XG4gICAgICAgICAgICBpZiAodGhpcy5kaWFsb2cgJiYgIXRoaXMuZGlhbG9nT2JqLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEucmVtb3ZlKHRoaXMuZGlhbG9nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdFJlbmRlci5wcm90b3R5cGUuZ2V0RWRpdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogdGhpcy5pc0VkaXQgPyAnZS1lZGl0ZWRyb3cnIDogJ2UtaW5zZXJ0ZWRyb3cnIH0pO1xuICAgICAgICAgICAgdmFyIGZvcm0gPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nLCB7IGlkOiBnT2JqLmVsZW1lbnQuaWQgKyAnRWRpdEZvcm0nLCBjbGFzc05hbWU6ICdlLWdyaWRmb3JtJyB9KTtcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7IGNsYXNzTmFtZTogJ2UtdGFibGUnLCBhdHRyczogeyBjZWxsc3BhY2luZzogJzZweCcgfSB9KTtcbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb2xzW2ldLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0ciA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YUNlbGwgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLXJvd2NlbGwnLCBhdHRyczogeyBzdHlsZTogJ3RleHQtYWxpZ246bGVmdDt3aWR0aDoxOTBweCcgfSB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywgeyBpbm5lckhUTUw6IGNvbHNbaV0uZmllbGQgfSk7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbY29sc1tpXS51aWRdLmNsYXNzTGlzdC5yZW1vdmUoJ2UtaW5wdXQnKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sc1tpXS5lZGl0VHlwZSA9PT0gJ2Jvb2xlYW5lZGl0Jykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGRhdGFDZWxsLmFwcGVuZENoaWxkKGVsZW1lbnRzW2NvbHNbaV0udWlkXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsYmwgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJywgeyBjbGFzc05hbWU6ICdlLW5vc2VsZWN0JywgYXR0cnM6IHsgZm9yOiBlbGVtLmlkLCBzdHlsZTogZWoyX2Jhc2VfMS5Ccm93c2VyLmlzRGV2aWNlID8gJycgOiAndmVydGljYWwtYWxpZ246IHRvcDsnIH0gfSk7XG4gICAgICAgICAgICAgICAgICAgIGxibC5pbm5lckhUTUwgPSBjb2xzW2ldLmhlYWRlclRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFDZWxsLmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICAgICAgICAgICAgICBkYXRhQ2VsbC5hcHBlbmRDaGlsZChsYmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YUNlbGwuYXBwZW5kQ2hpbGQoZWxlbWVudHNbY29sc1tpXS51aWRdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQoZGF0YUNlbGwpO1xuICAgICAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgICAgICAgcmV0dXJuIGRpdjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERpYWxvZ0VkaXRSZW5kZXI7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRpYWxvZ0VkaXRSZW5kZXIgPSBEaWFsb2dFZGl0UmVuZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyL2RpYWxvZy1lZGl0LXJlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQm9vbGVhbkVkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQm9vbGVhbkVkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgQm9vbGVhbkVkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWZpZWxkIGUtYm9vbGNlbGwnLCBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLCB2YWx1ZTogYXJncy52YWx1ZSwgJ2UtbWFwcGluZ3VpZCc6IGNvbC51aWQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgY29sLmZpZWxkLCBuYW1lOiBjb2wuZmllbGRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH07XG4gICAgICAgIEJvb2xlYW5FZGl0Q2VsbC5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jaGVja2VkO1xuICAgICAgICB9O1xuICAgICAgICBCb29sZWFuRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zdHlsZS53aWR0aCA9ICdhdXRvJztcbiAgICAgICAgfTtcbiAgICAgICAgQm9vbGVhbkVkaXRDZWxsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQm9vbGVhbkVkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Cb29sZWFuRWRpdENlbGwgPSBCb29sZWFuRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvYm9vbGVhbi1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItZHJvcGRvd25zXCIsIFwiQHN5bmNmdXNpb24vZWoyLWRhdGFcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfZHJvcGRvd25zXzEsIGVqMl9kYXRhXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRHJvcERvd25FZGl0Q2VsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERyb3BEb3duRWRpdENlbGwocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZS1maWVsZCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBhcmVudC5lbGVtZW50LmlkICsgYXJncy5jb2x1bW4uZmllbGQsIG5hbWU6IGFyZ3MuY29sdW1uLmZpZWxkLCB0eXBlOiAndGV4dCcsICdlLW1hcHBpbmd1aWQnOiBhcmdzLmNvbHVtbi51aWQsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BEb3duRWRpdENlbGwucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSBhcmdzLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpc0lubGluZSA9IHRoaXMucGFyZW50LmVkaXRTZXR0aW5ncy5tb2RlICE9PSAnZGlhbG9nJztcbiAgICAgICAgICAgIHRoaXMub2JqID0gbmV3IGVqMl9kcm9wZG93bnNfMS5Ecm9wRG93bkxpc3QoZWoyX2Jhc2VfMS5leHRlbmQoe1xuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U6IHRoaXMucGFyZW50LmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyID9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGF0YVNvdXJjZSA6IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHRoaXMucGFyZW50LmRhdGFTb3VyY2UpLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpLnNlbGVjdChhcmdzLmNvbHVtbi5maWVsZCksIGVuYWJsZWQ6IHV0aWxfMS5pc0VkaXRhYmxlKGFyZ3MuY29sdW1uLCBhcmdzLnJlcXVlc3RUeXBlLCBhcmdzLmVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIGZpZWxkczogeyB2YWx1ZTogYXJncy5jb2x1bW4uZmllbGQgfSwgdmFsdWU6IGFyZ3Mucm93RGF0YVthcmdzLmNvbHVtbi5maWVsZF0sXG4gICAgICAgICAgICAgICAgZW5hYmxlUnRsOiB0aGlzLnBhcmVudC5lbmFibGVSdGwsIGFjdGlvbkNvbXBsZXRlOiB0aGlzLmRkQWN0aW9uQ29tcGxldGUsXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGlzSW5saW5lID8gJycgOiBhcmdzLmNvbHVtbi5oZWFkZXJUZXh0LCBwb3B1cEhlaWdodDogJzIwMHB4JyxcbiAgICAgICAgICAgICAgICBmbG9hdExhYmVsVHlwZTogaXNJbmxpbmUgPyAnTmV2ZXInIDogJ0Fsd2F5cycsXG4gICAgICAgICAgICB9LCBhcmdzLmNvbHVtbi5lZGl0LnBhcmFtcykpO1xuICAgICAgICAgICAgdGhpcy5vYmouYXBwZW5kVG8oYXJncy5lbGVtZW50KTtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBhcmdzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIERyb3BEb3duRWRpdENlbGwucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZWoyX2luc3RhbmNlc1swXS52YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgRHJvcERvd25FZGl0Q2VsbC5wcm90b3R5cGUuZGRBY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnJlc3VsdCA9IGUucmVzdWx0LmZpbHRlcihmdW5jdGlvbiAodmFsLCBpLCB2YWx1ZXMpIHsgcmV0dXJuIHZhbHVlcy5pbmRleE9mKHZhbCkgPT09IGk7IH0pO1xuICAgICAgICAgICAgZS5yZXN1bHQuc29ydCgpO1xuICAgICAgICB9O1xuICAgICAgICBEcm9wRG93bkVkaXRDZWxsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub2JqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRHJvcERvd25FZGl0Q2VsbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRHJvcERvd25FZGl0Q2VsbCA9IERyb3BEb3duRWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZHJvcGRvd24tZWRpdC1jZWxsLmpzXG4vLyBtb2R1bGUgaWQgPSA3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1pbnB1dHNcIiwgXCIuLi9iYXNlL3V0aWxcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfaW5wdXRzXzEsIHV0aWxfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRGVmYXVsdEVkaXRDZWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRGVmYXVsdEVkaXRDZWxsKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRGVmYXVsdEVkaXRDZWxsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlLWZpZWxkIGUtaW5wdXQgZS1kZWZhdWx0Y2VsbCcsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywgdmFsdWU6ICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MudmFsdWUpID8gYXJncy52YWx1ZSA6ICcnLCAnZS1tYXBwaW5ndWlkJzogY29sLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucGFyZW50LmVsZW1lbnQuaWQgKyBjb2wuZmllbGQsIG5hbWU6IGNvbC5maWVsZCwgc3R5bGU6ICd0ZXh0LWFsaWduOicgKyBjb2wudGV4dEFsaWduLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9O1xuICAgICAgICBEZWZhdWx0RWRpdENlbGwucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQudmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIERlZmF1bHRFZGl0Q2VsbC5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbCA9IGFyZ3MuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGlzSW5saW5lID0gdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnO1xuICAgICAgICAgICAgZWoyX2lucHV0c18xLklucHV0LmNyZWF0ZUlucHV0KHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBhcmdzLmVsZW1lbnQsIGZsb2F0TGFiZWxUeXBlOiB0aGlzLnBhcmVudC5lZGl0U2V0dGluZ3MubW9kZSAhPT0gJ2RpYWxvZycgPyAnTmV2ZXInIDogJ0Fsd2F5cycsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMucGFyZW50LmVuYWJsZVJ0bCwgZW5hYmxlZDogdXRpbF8xLmlzRWRpdGFibGUoYXJncy5jb2x1bW4sIGFyZ3MucmVxdWVzdFR5cGUsIGFyZ3MuZWxlbWVudCksXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBpc0lubGluZSA/ICcnIDogYXJncy5jb2x1bW4uaGVhZGVyVGV4dFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGVmYXVsdEVkaXRDZWxsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5EZWZhdWx0RWRpdENlbGwgPSBEZWZhdWx0RWRpdENlbGw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvcmVuZGVyZXIvZGVmYXVsdC1lZGl0LWNlbGwuanNcbi8vIG1vZHVsZSBpZCA9IDc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9ub3JtYWwtZWRpdFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIG5vcm1hbF9lZGl0XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIElubGluZUVkaXQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSW5saW5lRWRpdCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSW5saW5lRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCByZW5kZXJlcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBzZXJ2aWNlTG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIF90aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuY2xvc2VFZGl0LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFkZFJlY29yZC5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBJbmxpbmVFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5lbmRFZGl0LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIElubGluZUVkaXQucHJvdG90eXBlLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVsZXRlUmVjb3JkLmNhbGwodGhpcywgZmllbGRuYW1lLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgSW5saW5lRWRpdC5wcm90b3R5cGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKHRyKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnN0YXJ0RWRpdC5jYWxsKHRoaXMsIHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIElubGluZUVkaXQ7XG4gICAgfShub3JtYWxfZWRpdF8xLk5vcm1hbEVkaXQpKTtcbiAgICBleHBvcnRzLklubGluZUVkaXQgPSBJbmxpbmVFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvaW5saW5lLWVkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL3V0aWxcIiwgXCIuLi9iYXNlL2NvbnN0YW50XCIsIFwiLi4vcmVuZGVyZXIvcm93LXJlbmRlcmVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgdXRpbF8xLCBldmVudHMsIHJvd19yZW5kZXJlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBOb3JtYWxFZGl0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTm9ybWFsRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCByZW5kZXJlcikge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2UtZ3JpZGNvbnRlbnQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucm93SW5kZXggPSB1dGlsXzEucGFyZW50c1VudGlsKHRhcmdldCwgJ2Utcm93Y2VsbCcpID8gcGFyc2VJbnQodGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLXJvd2luZGV4JyksIDEwKSA6IC0xO1xuICAgICAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZW5kRWRpdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZGJsQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3djZWxsJykgJiYgdGhpcy5wYXJlbnQuZWRpdFNldHRpbmdzLmFsbG93RWRpdE9uRGJsQ2xpY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5lZGl0TW9kdWxlLnN0YXJ0RWRpdCh1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3cnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkaXRDb21wbGV0ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUucmVxdWVzdFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzYXZlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuc2VsZWN0Um93KDApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgZWoyX2Jhc2VfMS5leHRlbmQoZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICdzYXZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGV2ZW50cy5hY3Rpb25Db21wbGV0ZVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNlbGVjdFJvdyh0aGlzLmVkaXRSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBlajJfYmFzZV8xLmV4dGVuZChlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBldmVudHMuYWN0aW9uQ29tcGxldGVcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKHRyKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdmFyIHByaW1hcnlLZXlzID0gZ09iai5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpO1xuICAgICAgICAgICAgdmFyIHByaW1hcnlLZXlWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucm93SW5kZXggPSB0aGlzLmVkaXRSb3dJbmRleCA9IHBhcnNlSW50KHRyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCk7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzRGF0YSA9IGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKClbdGhpcy5yb3dJbmRleF07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByaW1hcnlLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcHJpbWFyeUtleVZhbHVlcy5wdXNoKHRoaXMucHJldmlvdXNEYXRhW3ByaW1hcnlLZXlzW2ldXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICByb3c6IHRyLCBwcmltYXJ5S2V5OiBwcmltYXJ5S2V5cywgcHJpbWFyeUtleVZhbHVlOiBwcmltYXJ5S2V5VmFsdWVzLCByZXF1ZXN0VHlwZTogJ2JlZ2luRWRpdCcsXG4gICAgICAgICAgICAgICAgcm93RGF0YTogdGhpcy5wcmV2aW91c0RhdGEsIHJvd0luZGV4OiB0aGlzLnJvd0luZGV4LCB0eXBlOiAnZWRpdCcsIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZ2luRWRpdCwgYXJncyk7XG4gICAgICAgICAgICBhcmdzLnR5cGUgPSAnYWN0aW9uQmVnaW4nO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgYXJncyk7XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBnT2JqLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZShhcmdzKTtcbiAgICAgICAgICAgIHRoaXMudWlkID0gdHIuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpO1xuICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmFwcGx5Rm9ybVZhbGlkYXRpb24oKTtcbiAgICAgICAgICAgIGFyZ3MudHlwZSA9ICdhY3Rpb25Db21wbGV0ZSc7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkNvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50LmlzRWRpdCB8fCAhZ09iai5lZGl0TW9kdWxlLmZvcm1PYmoudmFsaWRhdGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlZGl0ZWREYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHRoaXMucHJldmlvdXNEYXRhKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnc2F2ZScsIHR5cGU6IGV2ZW50cy5hY3Rpb25CZWdpbiwgZGF0YTogZWRpdGVkRGF0YSwgY2FuY2VsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmV2aW91c0RhdGE6IHRoaXMucHJldmlvdXNEYXRhLCBzZWxlY3RlZFJvdzogZ09iai5zZWxlY3RlZFJvd0luZGV4LCBmb3JlaWduS2V5RGF0YToge31cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlZGl0ZWREYXRhID0gZ09iai5lZGl0TW9kdWxlLmdldEN1cnJlbnRFZGl0ZWREYXRhKGdPYmouZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1ncmlkZm9ybScpLCBlZGl0ZWREYXRhKTtcbiAgICAgICAgICAgIGlmIChnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmUtZWRpdGVkcm93JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYXJncy5hY3Rpb24gPSAnZWRpdCc7XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25CZWdpbiwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ09iai5zaG93U3Bpbm5lcigpO1xuICAgICAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy51cGRhdGVEYXRhLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFyZ3MuYWN0aW9uID0gJ2FkZCc7XG4gICAgICAgICAgICAgICAgYXJncy5zZWxlY3RlZFJvdyA9IDA7XG4gICAgICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLmRpYWxvZ0Rlc3Ryb3ksIHt9KTtcbiAgICAgICAgICAgIHRoaXMuc3RvcEVkaXRTdGF0dXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRpdEhhbmRsZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChhcmdzLnByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBhcmdzLnByb21pc2UudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZWRTdWNjKGUsIGFyZ3MpOyB9KS5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZWRGYWlsKGUpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdFN1Y2Nlc3Moe30sIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5lZFN1Y2MgPSBmdW5jdGlvbiAoZSwgYXJncykge1xuICAgICAgICAgICAgdGhpcy5lZGl0U3VjY2VzcyhlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuZWRGYWlsID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdEZhaWx1cmUoZSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkaXRTdWNjZXNzID0gZnVuY3Rpb24gKGUsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChlLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmJlZm9yZURhdGFCb3VuZCwgZSk7XG4gICAgICAgICAgICAgICAgYXJncy5kYXRhID0gZS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5iZWZvcmVEYXRhQm91bmQsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJncy50eXBlID0gZXZlbnRzLmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93KGFyZ3MuZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZWxlY3RSb3codGhpcy5yb3dJbmRleCA+IC0xID8gdGhpcy5yb3dJbmRleCA6IHRoaXMuZWRpdFJvd0luZGV4KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmhpZGVTcGlubmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmVkaXRGYWlsdXJlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnRyaWdnZXIoZXZlbnRzLmFjdGlvbkZhaWx1cmUsIGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaGlkZVNwaW5uZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUucmVmcmVzaFJvdyA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIG51bGwsIHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHZhciByb3dPYmogPSB0aGlzLnBhcmVudC5nZXRSb3dPYmplY3RGcm9tVUlEKHRoaXMudWlkKTtcbiAgICAgICAgICAgIGlmIChyb3dPYmopIHtcbiAgICAgICAgICAgICAgICByb3dPYmouY2hhbmdlcyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgcm93LnJlZnJlc2gocm93T2JqLCB0aGlzLnBhcmVudC5jb2x1bW5zLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTm9ybWFsRWRpdC5wcm90b3R5cGUuY2xvc2VFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnY2FuY2VsJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBkYXRhOiB0aGlzLnByZXZpb3VzRGF0YSwgc2VsZWN0ZWRSb3c6IGdPYmouc2VsZWN0ZWRSb3dJbmRleFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQmVnaW4sIGFyZ3MpO1xuICAgICAgICAgICAgdGhpcy5zdG9wRWRpdFN0YXR1cygpO1xuICAgICAgICAgICAgYXJncy50eXBlID0gZXZlbnRzLmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgaWYgKGdPYmouZWRpdFNldHRpbmdzLm1vZGUgIT09ICdkaWFsb2cnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93KGFyZ3MuZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLnNlbGVjdFJvdyh0aGlzLnJvd0luZGV4KTtcbiAgICAgICAgICAgIGdPYmouZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5hY3Rpb25Db21wbGV0ZSwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMubW9kZWxDaGFuZ2VkLCB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnYWRkJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBkYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c0RhdGEgPSB7fTtcbiAgICAgICAgICAgIHRoaXMudWlkID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c0RhdGFbY29sLmZpZWxkXSA9IGRhdGEgJiYgZGF0YVtjb2wuZmllbGRdID8gZGF0YVtjb2wuZmllbGRdIDogY29sLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIGNhbmNlbDogZmFsc2UsIGZvcmVpZ25LZXlEYXRhOiB7fSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogJ2FkZCcsIGRhdGE6IHRoaXMucHJldmlvdXNEYXRhLCB0eXBlOiBldmVudHMuYWN0aW9uQmVnaW5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmFjdGlvbkJlZ2luLCBhcmdzKTtcbiAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGdPYmouaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkTmV3KHsgcm93RGF0YTogYXJncy5kYXRhLCByZXF1ZXN0VHlwZTogJ2FkZCcgfSk7XG4gICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuYXBwbHlGb3JtVmFsaWRhdGlvbigpO1xuICAgICAgICAgICAgYXJncy50eXBlID0gZXZlbnRzLmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgYXJncy5yb3cgPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtYWRkZWRyb3cnKTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYWN0aW9uQ29tcGxldGUsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRSb3dJbmRleCA9IHRoaXMucGFyZW50LnNlbGVjdGVkUm93SW5kZXg7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLm1vZGVsQ2hhbmdlZCwge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAnZGVsZXRlJywgdHlwZTogZXZlbnRzLmFjdGlvbkJlZ2luLCBmb3JlaWduS2V5RGF0YToge30sXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YSA/IFtkYXRhXSA6IHRoaXMucGFyZW50LmdldFNlbGVjdGVkUmVjb3JkcygpLCB0cjogdGhpcy5wYXJlbnQuZ2V0U2VsZWN0ZWRSb3dzKCksIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBOb3JtYWxFZGl0LnByb3RvdHlwZS5zdG9wRWRpdFN0YXR1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICBnT2JqLmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGVsZW0gPSBnT2JqLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtYWRkZWRyb3cnKTtcbiAgICAgICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoZWxlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbGVtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWVkaXRlZHJvdycpO1xuICAgICAgICAgICAgaWYgKGVsZW0pIHtcbiAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2UtZWRpdGVkcm93Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY3J1ZEFjdGlvbiwgdGhpcy5lZGl0SGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZG91YmxlVGFwLCB0aGlzLmRibENsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYmxjbGljaywgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmRlbGV0ZUNvbXBsZXRlLCB0aGlzLmVkaXRDb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuc2F2ZUNvbXBsZXRlLCB0aGlzLmVkaXRDb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmNydWRBY3Rpb24sIHRoaXMuZWRpdEhhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub2ZmKGV2ZW50cy5kb3VibGVUYXAsIHRoaXMuZGJsQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGJsY2xpY2ssIHRoaXMuZGJsQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGVsZXRlQ29tcGxldGUsIHRoaXMuZWRpdENvbXBsZXRlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuc2F2ZUNvbXBsZXRlLCB0aGlzLmVkaXRDb21wbGV0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIE5vcm1hbEVkaXQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE5vcm1hbEVkaXQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLk5vcm1hbEVkaXQgPSBOb3JtYWxFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvbm9ybWFsLWVkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDgxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2Jhc2UvdXRpbFwiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCIuLi9yZW5kZXJlci9yb3ctcmVuZGVyZXJcIiwgXCIuLi9yZW5kZXJlci9jZWxsLXJlbmRlcmVyXCIsIFwiLi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIHV0aWxfMSwgZXZlbnRzLCByb3dfcmVuZGVyZXJfMSwgY2VsbF9yZW5kZXJlcl8xLCByb3dfbW9kZWxfZ2VuZXJhdG9yXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJhdGNoRWRpdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEJhdGNoRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCByZW5kZXJlcikge1xuICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9uKGV2ZW50cy5kYmxjbGljaywgdGhpcy5kYmxDbGlja0hhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQub24oZXZlbnRzLmtleVByZXNzZWQsIHRoaXMua2V5UHJlc3NIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLmRhdGFCb3VuZCwgdGhpcy5kYXRhQm91bmQuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vbihldmVudHMuZG91YmxlVGFwLCB0aGlzLmRibENsaWNrSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuY2xpY2ssIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMuZGJsY2xpY2ssIHRoaXMuZGJsQ2xpY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm9mZihldmVudHMua2V5UHJlc3NlZCwgdGhpcy5rZXlQcmVzc0hhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHMuZGF0YUJvdW5kLCB0aGlzLmRhdGFCb3VuZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5vZmYoZXZlbnRzLmRvdWJsZVRhcCwgdGhpcy5kYmxDbGlja0hhbmRsZXIpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmRhdGFCb3VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghdXRpbF8xLnBhcmVudHNVbnRpbChlLnRhcmdldCwgdGhpcy5wYXJlbnQuZWxlbWVudC5pZCArICdfYWRkJywgdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxfMS5wYXJlbnRzVW50aWwoZS50YXJnZXQsICdlLXJvd2NlbGwnKSAmJiAhdGhpcy5wYXJlbnQuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VsbElkeChlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmRibENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgdHIgPSB1dGlsXzEucGFyZW50c1VudGlsKGUudGFyZ2V0LCAnZS1yb3cnKTtcbiAgICAgICAgICAgIGlmICgodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJvd2NlbGwnKSkgJiYgdHIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsKHBhcnNlSW50KHRyLmdldEF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpLCAxMCksIHRoaXMucGFyZW50LmNvbHVtbnNbcGFyc2VJbnQodXRpbF8xLnBhcmVudHNVbnRpbCh0YXJnZXQsICdlLXJvd2NlbGwnKS5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29saW5kZXgnKSwgMTApXS5maWVsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUua2V5UHJlc3NIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBpc0VkaXQgPSB0aGlzLnBhcmVudC5pc0VkaXQ7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXBvcHVwLW9wZW4nKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICAgICAgaXNFZGl0ID0gaXNFZGl0ICYmICF0aGlzLnZhbGlkYXRlRm9ybU9iaigpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGFiJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXROZXh0Q2VsbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NoaWZ0VGFiJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0VkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRQcmV2Q2VsbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0VkaXQgJiYgdGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCArIDEgPCB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdENlbGwodGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCArIDEsIHRoaXMuY2VsbERldGFpbHMuY29sdW1uLmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmMic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsRnJvbUluZGV4KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgsIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaXNFZGl0IHx8ICEodGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPT09IDAgJiYgdGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCA9PT0gMCkgfHxcbiAgICAgICAgICAgICAgICAgICAgISh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4ID09PSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPT09IHRoaXMucGFyZW50LmNvbHVtbnMubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVGb2N1c09uRXJyb3IoZSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUucmVGb2N1c09uRXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVGb3JtT2JqKCkgJiYgKGUuYWN0aW9uID09PSAndGFiJyB8fCBlLmFjdGlvbiA9PT0gJ3NoaWZ0VGFiJykpIHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5pc0FkZFJvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldERhdGFSb3dzKClbaW5kZXhdLmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmVkaXROZXh0Q2VsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvbGRJZHggPSB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleDtcbiAgICAgICAgICAgIHZhciBjZWxsSWR4ID0gdGhpcy5maW5kTmV4dEVkaXRhYmxlQ2VsbCh0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCArIDEsIHRoaXMuaXNBZGRSb3codGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCkpO1xuICAgICAgICAgICAgaWYgKGNlbGxJZHggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID0gY2VsbElkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggKyAxIDwgdGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4Kys7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPSB0aGlzLmZpbmROZXh0RWRpdGFibGVDZWxsKDAsIHRoaXMuaXNBZGRSb3codGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZElkeCAhPT0gdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsRnJvbUluZGV4KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgsIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5lZGl0UHJldkNlbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2xkSWR4ID0gdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXg7XG4gICAgICAgICAgICB2YXIgY2VsbElkeCA9IHRoaXMuZmluZFByZXZFZGl0YWJsZUNlbGwodGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggLSAxLCB0aGlzLmlzQWRkUm93KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgpKTtcbiAgICAgICAgICAgIGlmIChjZWxsSWR4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCA9IGNlbGxJZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4IC0gMSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleC0tO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4ID0gdGhpcy5maW5kUHJldkVkaXRhYmxlQ2VsbCh0aGlzLnBhcmVudC5jb2x1bW5zLmxlbmd0aCAtIDEsIHRoaXMuaXNBZGRSb3codGhpcy5jZWxsRGV0YWlscy5yb3dJbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZElkeCAhPT0gdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDZWxsRnJvbUluZGV4KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgsIHRoaXMuY2VsbERldGFpbHMuY2VsbEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5lZGl0Q2VsbEZyb21JbmRleCA9IGZ1bmN0aW9uIChyb3dJZHgsIGNlbGxJZHgpIHtcbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggPSByb3dJZHg7XG4gICAgICAgICAgICB0aGlzLmNlbGxEZXRhaWxzLmNlbGxJbmRleCA9IGNlbGxJZHg7XG4gICAgICAgICAgICB0aGlzLmVkaXRDZWxsKHJvd0lkeCwgdGhpcy5wYXJlbnQuY29sdW1uc1tjZWxsSWR4XS5maWVsZCk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuY2xvc2VFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdPYmogPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHZhciByb3dzID0gZ09iai5jb250ZW50TW9kdWxlLmdldFJvd3MoKTtcbiAgICAgICAgICAgIHZhciByb3dSZW5kZXJlciA9IG5ldyByb3dfcmVuZGVyZXJfMS5Sb3dSZW5kZXJlcih0aGlzLnNlcnZpY2VMb2NhdG9yLCBudWxsLCB0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB2YXIgdHI7XG4gICAgICAgICAgICBpZiAoZ09iai5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uaXNEaXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICB0ciA9IGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcignW2RhdGEtdWlkPScgKyByb3dzW2ldLnVpZCArICddJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyLmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUodHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUm93T2JqZWN0RnJvbVVJRChyb3dzW2ldLnVpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJvd3NbaV0uY2hhbmdlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dzW2ldLmlzRGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8yLmNsYXNzTGlzdCh0ciwgW10sIFsnZS1oaWRkZW5yb3cnLCAnZS11cGRhdGVkdGQnXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93UmVuZGVyZXIucmVmcmVzaChyb3dzW2ldLCBnT2JqLmNvbHVtbnMsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmouc2VsZWN0Um93KHRoaXMuY2VsbERldGFpbHMucm93SW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93SWR4KCk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeShldmVudHMudG9vbHRpcERlc3Ryb3ksIHt9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5kZWxldGVSZWNvcmQgPSBmdW5jdGlvbiAoZmllbGRuYW1lLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICB0aGlzLmJ1bGtEZWxldGUoZmllbGRuYW1lLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5hZGRSZWNvcmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5idWxrQWRkUm93KGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRWRpdCAmJiB0aGlzLnZhbGlkYXRlRm9ybU9iaigpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5iYXRjaFNhdmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS52YWxpZGF0ZUZvcm1PYmogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZWRpdE1vZHVsZS5mb3JtT2JqICYmICF0aGlzLnBhcmVudC5lZGl0TW9kdWxlLmZvcm1PYmoudmFsaWRhdGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5iYXRjaFNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5zYXZlQ2VsbCgpO1xuICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNoYW5nZXMgPSB0aGlzLmdldEJhdGNoQ2hhbmdlcygpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7IGJhdGNoQ2hhbmdlczogY2hhbmdlcywgY2FuY2VsOiBmYWxzZSB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVCYXRjaFNhdmUsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai5zaG93U3Bpbm5lcigpO1xuICAgICAgICAgICAgZ09iai5ub3RpZnkoZXZlbnRzLmJ1bGtTYXZlLCB7IGNoYW5nZXM6IGNoYW5nZXMgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0QmF0Y2hDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoYW5nZXMgPSB7XG4gICAgICAgICAgICAgICAgYWRkZWRSZWNvcmRzOiBbXSxcbiAgICAgICAgICAgICAgICBkZWxldGVkUmVjb3JkczogW10sXG4gICAgICAgICAgICAgICAgY2hhbmdlZFJlY29yZHM6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5jb250ZW50TW9kdWxlLmdldFJvd3MoKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcm93c18xID0gcm93czsgX2kgPCByb3dzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHJvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5pc0RpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocm93LmVkaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcy5hZGRlZFJlY29yZHMucHVzaChyb3cuY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMuZGVsZXRlZFJlY29yZHMucHVzaChyb3cuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMuY2hhbmdlZFJlY29yZHMucHVzaChyb3cuY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hhbmdlcztcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5yZW1vdmVSb3dPYmplY3RGcm9tVUlEID0gZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAgICAgdmFyIHJvd3MgPSB0aGlzLnBhcmVudC5jb250ZW50TW9kdWxlLmdldFJvd3MoKTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGxlbiA9IHJvd3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93c1tpXS51aWQgPT09IHVpZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dzLnNwbGljZShpLCAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5hZGRSb3dPYmplY3QgPSBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5jb250ZW50TW9kdWxlLmdldFJvd3MoKS51bnNoaWZ0KHJvdyk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYnVsa0RlbGV0ZSA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBkYXRhID8gdGhpcy5nZXRJbmRleEZyb21EYXRhKGRhdGEpIDogZ09iai5zZWxlY3RlZFJvd0luZGV4O1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgcHJpbWFyeUtleTogdGhpcy5wYXJlbnQuZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKSxcbiAgICAgICAgICAgICAgICByb3dJbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgcm93RGF0YTogZGF0YSA/IGRhdGEgOiBnT2JqLmdldFNlbGVjdGVkUmVjb3JkcygpWzBdLFxuICAgICAgICAgICAgICAgIHJvdzogZGF0YSA/IGdPYmouZ2V0Um93cygpW2luZGV4XSA6IGdPYmouZ2V0U2VsZWN0ZWRSb3dzKClbMF0sIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIWFyZ3Mucm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVCYXRjaERlbGV0ZSwgYXJncyk7XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB2YXIgdWlkID0gYXJncy5yb3cuZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpO1xuICAgICAgICAgICAgaWYgKGFyZ3Mucm93LmNsYXNzTGlzdC5jb250YWlucygnZS1pbnNlcnRlZHJvdycpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVSb3dPYmplY3RGcm9tVUlEKHVpZCk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5yZW1vdmUoYXJncy5yb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd09iaiA9IGdPYmouZ2V0Um93T2JqZWN0RnJvbVVJRCh1aWQpO1xuICAgICAgICAgICAgICAgIHJvd09iai5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByb3dPYmouZWRpdCA9ICdkZWxldGUnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIuY2xhc3NMaXN0KGFyZ3Mucm93LCBbJ2UtaGlkZGVucm93JywgJ2UtdXBkYXRlZHRkJ10sIFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFJvd0lkeCgpO1xuICAgICAgICAgICAgZ09iai5zZWxlY3RSb3coaW5kZXgpO1xuICAgICAgICAgICAgZGVsZXRlIGFyZ3Mucm93O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iYXRjaERlbGV0ZSwgYXJncyk7XG4gICAgICAgICAgICBnT2JqLm5vdGlmeShldmVudHMudG9vbGJhclJlZnJlc2gsIHt9KTtcbiAgICAgICAgICAgIGdPYmouZWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnJlZnJlc2hSb3dJZHggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IFtdLnNsaWNlLmNhbGwodGhpcy5wYXJlbnQuZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKS5jaGlsZHJlbik7XG4gICAgICAgICAgICB2YXIgZGF0YVJvd3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gMCwgbGVuID0gcm93cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3dzW2ldLmNsYXNzTGlzdC5jb250YWlucygnZS1yb3cnKSAmJiAhcm93c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtaGlkZGVucm93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnLCBqLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByb3dzW2ldLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1yb3dpbmRleCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXRJbmRleEZyb21EYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsXzEuaW5BcnJheShkYXRhLCB0aGlzLnBhcmVudC5nZXRDdXJyZW50Vmlld1JlY29yZHMoKSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuYnVsa0FkZFJvdyA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFnT2JqLmVkaXRTZXR0aW5ncy5hbGxvd0FkZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUNlbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0YSA9IGRhdGEgPyBkYXRhIDogdGhpcy5nZXREZWZhdWx0RGF0YSgpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdERhdGE6IGRlZmF1bHREYXRhLFxuICAgICAgICAgICAgICAgIHByaW1hcnlLZXk6IGdPYmouZ2V0UHJpbWFyeUtleUZpZWxkTmFtZXMoKSxcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVCYXRjaEFkZCwgYXJncyk7XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB2YXIgcm93ID0gbmV3IHJvd19yZW5kZXJlcl8xLlJvd1JlbmRlcmVyKHRoaXMuc2VydmljZUxvY2F0b3IsIG51bGwsIHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIHZhciBtb2RlbCA9IG5ldyByb3dfbW9kZWxfZ2VuZXJhdG9yXzEuUm93TW9kZWxHZW5lcmF0b3IodGhpcy5wYXJlbnQpO1xuICAgICAgICAgICAgdmFyIG1vZGVsRGF0YSA9IG1vZGVsLmdlbmVyYXRlUm93cyhbYXJncy5kZWZhdWx0RGF0YV0pO1xuICAgICAgICAgICAgdmFyIHRyID0gcm93LnJlbmRlcihtb2RlbERhdGFbMF0sIGdPYmouZ2V0Q29sdW1ucygpKTtcbiAgICAgICAgICAgIHZhciBjb2w7XG4gICAgICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyZW50Lmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRyLmluc2VydEJlZm9yZShlajJfYmFzZV8yLmNyZWF0ZUVsZW1lbnQoJ3RkJywgeyBjbGFzc05hbWU6ICdlLWluZGVudGNlbGwnIH0pLCB0ci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0Ym9keSA9IGdPYmouZ2V0Q29udGVudFRhYmxlKCkucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICAgICAgICAgIHRyLmNsYXNzTGlzdC5hZGQoJ2UtaW5zZXJ0ZWRyb3cnKTtcbiAgICAgICAgICAgIHRib2R5Lmluc2VydEJlZm9yZSh0ciwgdGJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLmFkZENsYXNzKHRyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLXJvd2NlbGwnKSwgWydlLXVwZGF0ZWR0ZCddKTtcbiAgICAgICAgICAgIG1vZGVsRGF0YVswXS5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIG1vZGVsRGF0YVswXS5jaGFuZ2VzID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIG1vZGVsRGF0YVswXS5kYXRhKTtcbiAgICAgICAgICAgIG1vZGVsRGF0YVswXS5lZGl0ID0gJ2FkZCc7XG4gICAgICAgICAgICB0aGlzLmFkZFJvd09iamVjdChtb2RlbERhdGFbMF0pO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUm93SWR4KCk7XG4gICAgICAgICAgICBnT2JqLnNlbGVjdFJvdygwKTtcbiAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5maW5kTmV4dEVkaXRhYmxlQ2VsbCgwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb2wgPSBnT2JqLmNvbHVtbnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdENlbGwoMCwgY29sLmZpZWxkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzMSA9IHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0RGF0YTogYXJncy5kZWZhdWx0RGF0YSwgcm93OiB0cixcbiAgICAgICAgICAgICAgICBjb2x1bW5PYmplY3Q6IGNvbCwgY29sdW1uSW5kZXg6IGluZGV4LCBwcmltYXJ5S2V5OiBhcmdzLnByaW1hcnlLZXksIGNlbGw6IHRyLmNlbGxzW2luZGV4XVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuYmF0Y2hBZGQsIGFyZ3MxKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5maW5kTmV4dEVkaXRhYmxlQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW5JbmRleCwgaXNBZGQpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIHZhciBlbmRJbmRleCA9IGNvbHMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGNvbHVtbkluZGV4OyBpIDwgZW5kSW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghaXNBZGQgJiYgdGhpcy5jaGVja05QQ2VsbChjb2xzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNBZGQgJiYgIWNvbHNbaV0udGVtcGxhdGUgJiYgY29sc1tpXS52aXNpYmxlICYmIGNvbHNbaV0uYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5maW5kUHJldkVkaXRhYmxlQ2VsbCA9IGZ1bmN0aW9uIChjb2x1bW5JbmRleCwgaXNBZGQpIHtcbiAgICAgICAgICAgIHZhciBjb2xzID0gdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBjb2x1bW5JbmRleDsgaSA+IC0xOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQWRkICYmIHRoaXMuY2hlY2tOUENlbGwoY29sc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzQWRkICYmICFjb2xzW2ldLnRlbXBsYXRlICYmIGNvbHNbaV0udmlzaWJsZSAmJiBjb2xzW2ldLmFsbG93RWRpdGluZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuY2hlY2tOUENlbGwgPSBmdW5jdGlvbiAoY29sKSB7XG4gICAgICAgICAgICByZXR1cm4gIWNvbC50ZW1wbGF0ZSAmJiBjb2wudmlzaWJsZSAmJiAhY29sLmlzUHJpbWFyeUtleSAmJiAhY29sLmlzSWRlbnRpdHkgJiYgY29sLmFsbG93RWRpdGluZztcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXREZWZhdWx0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgdmFyIGRWYWx1ZXMgPSB7ICdudW1iZXInOiAwLCAnc3RyaW5nJzogbnVsbCwgJ2Jvb2xlYW4nOiBmYWxzZSwgJ2RhdGUnOiBudWxsLCAnZGF0ZXRpbWUnOiBudWxsIH07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZ09iai5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgZGF0YVtjb2wuZmllbGRdID0gY29sLmRlZmF1bHRWYWx1ZSA/IGNvbC5kZWZhdWx0VmFsdWUgOiBkVmFsdWVzW2NvbC50eXBlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnNldENlbGxJZHggPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgZ0xlbiA9IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGdMZW4gPSB0aGlzLnBhcmVudC5ncm91cFNldHRpbmdzLmNvbHVtbnMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jZWxsRGV0YWlscy5jZWxsSW5kZXggPSB0YXJnZXQuY2VsbEluZGV4IC0gZ0xlbjtcbiAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggPSBwYXJzZUludCh0YXJnZXQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtcm93aW5kZXgnKSwgMTApO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLmVkaXRDZWxsID0gZnVuY3Rpb24gKGluZGV4LCBmaWVsZCwgaXNBZGQpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sID0gZ09iai5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIHZhciBrZXlzID0gZ09iai5nZXRQcmltYXJ5S2V5RmllbGROYW1lcygpO1xuICAgICAgICAgICAgaWYgKGdPYmouZWRpdFNldHRpbmdzLmFsbG93RWRpdGluZyAmJiBjb2wuYWxsb3dFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdPYmouaXNFZGl0ICYmICEodGhpcy5jZWxsRGV0YWlscy5jb2x1bW4uZmllbGQgPT09IGZpZWxkICYmIHRoaXMuY2VsbERldGFpbHMucm93SW5kZXggPT09IGluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmVDZWxsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnT2JqLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByb3cgPSBnT2JqLmdldERhdGFSb3dzKClbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmICgoa2V5c1swXSA9PT0gY29sLmZpZWxkICYmICFyb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWluc2VydGVkcm93JykpIHx8IGNvbC50ZW1wbGF0ZSB8fCBjb2wuY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByb3dEYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHRoaXMuZ2V0RGF0YUJ5SW5kZXgoaW5kZXgpKTtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbDogcm93LmNlbGxzW3RoaXMuZ2V0Q2VsbElkeChjb2wudWlkKV0sIHJvdzogcm93LFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lOiBjb2wuZmllbGQsIGNvbHVtbk9iamVjdDogY29sLCBpc0ZvcmVpZ25LZXk6ICFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGNvbC5mb3JlaWduS2V5VmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICBwcmltYXJ5S2V5OiBrZXlzLCByb3dEYXRhOiByb3dEYXRhLFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uUnVsZXM6IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBjb2wudmFsaWRhdGlvblJ1bGVzID8gY29sLnZhbGlkYXRpb25SdWxlcyA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvd0RhdGFbY29sLmZpZWxkXSwgdHlwZTogIWlzQWRkID8gJ2VkaXQnIDogJ2FkZCcsIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGdPYmoudHJpZ2dlcihldmVudHMuY2VsbEVkaXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2VsbERldGFpbHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd0RhdGE6IHJvd0RhdGEsIGNvbHVtbjogY29sLCB2YWx1ZTogYXJncy52YWx1ZSwgaXNGb3JlaWduS2V5OiBhcmdzLmlzRm9yZWlnbktleSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VsbElkeChhcmdzLmNlbGwpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXVwZGF0ZWR0ZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb2xvcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2UtdXBkYXRlZHRkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdPYmouY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBnT2JqLnNlbGVjdFJvdyh0aGlzLmNlbGxEZXRhaWxzLnJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICBnT2JqLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGUoYXJncyk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtID0gZ09iai5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgZ09iai5lbGVtZW50LmlkICsgJ0VkaXRGb3JtJyk7XG4gICAgICAgICAgICAgICAgZ09iai5lZGl0TW9kdWxlLmFwcGx5Rm9ybVZhbGlkYXRpb24oW2NvbF0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtZ3JpZHBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS51cGRhdGVDZWxsID0gZnVuY3Rpb24gKHJvd0luZGV4LCBmaWVsZCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLnBhcmVudC5nZXRDb2x1bW5CeUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIGlmIChjb2wgJiYgIWNvbC5pc1ByaW1hcnlLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGQgPSB0aGlzLnBhcmVudC5nZXREYXRhUm93cygpW3Jvd0luZGV4XS5jZWxsc1t0aGlzLnBhcmVudC5nZXRDb2x1bW5JbmRleEJ5RmllbGQoZmllbGQpXTtcbiAgICAgICAgICAgICAgICB2YXIgcm93T2JqID0gdGhpcy5wYXJlbnQuZ2V0Um93T2JqZWN0RnJvbVVJRCh0ZC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVEQodGQsIGNvbCwgcm93T2JqLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudHJpZ2dlcihldmVudHMucXVlcnlDZWxsSW5mbywge1xuICAgICAgICAgICAgICAgICAgICBjZWxsOiB0ZCwgY29sdW1uOiBjb2wsIGRhdGE6IHJvd09iai5jaGFuZ2VzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuc2V0Q2hhbmdlcyA9IGZ1bmN0aW9uIChyb3dPYmosIGZpZWxkLCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFyb3dPYmouY2hhbmdlcykge1xuICAgICAgICAgICAgICAgIHJvd09iai5jaGFuZ2VzID0gZWoyX2Jhc2VfMS5leHRlbmQoe30sIHJvd09iai5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvd09iai5jaGFuZ2VzW2ZpZWxkXSA9IHZhbHVlO1xuICAgICAgICAgICAgcm93T2JqLmlzRGlydHkgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnVwZGF0ZVJvdyA9IGZ1bmN0aW9uIChpbmRleCwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwga2V5c18xID0ga2V5czsgX2kgPCBrZXlzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGtleXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDZWxsKGluZGV4LCBjb2wsIGRhdGFbY29sXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuZ2V0Q2VsbElkeCA9IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgICAgIHZhciBjSWR4ID0gdGhpcy5wYXJlbnQuZ2V0Q29sdW1uSW5kZXhCeVVpZCh1aWQpICsgdGhpcy5wYXJlbnQuZ3JvdXBTZXR0aW5ncy5jb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZCh0aGlzLnBhcmVudC5kZXRhaWxUZW1wbGF0ZSkgfHwgIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wYXJlbnQuY2hpbGRHcmlkKSkge1xuICAgICAgICAgICAgICAgIGNJZHgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjSWR4O1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnJlZnJlc2hURCA9IGZ1bmN0aW9uICh0ZCwgY29sdW1uLCByb3dPYmosIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgY2VsbCA9IG5ldyBjZWxsX3JlbmRlcmVyXzEuQ2VsbFJlbmRlcmVyKHRoaXMucGFyZW50LCB0aGlzLnNlcnZpY2VMb2NhdG9yKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2hhbmdlcyhyb3dPYmosIGNvbHVtbi5maWVsZCwgdmFsdWUpO1xuICAgICAgICAgICAgY2VsbC5yZWZyZXNoVEQodGQsIHJvd09iai5jZWxsc1t0aGlzLmdldENlbGxJZHgoY29sdW1uLnVpZCldLCByb3dPYmouY2hhbmdlcyk7XG4gICAgICAgICAgICB0ZC5jbGFzc0xpc3QuYWRkKCdlLXVwZGF0ZWR0ZCcpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICB9O1xuICAgICAgICBCYXRjaEVkaXQucHJvdG90eXBlLnNhdmVDZWxsID0gZnVuY3Rpb24gKGlzRm9yY2VTYXZlKSB7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgaWYgKCFpc0ZvcmNlU2F2ZSAmJiAoIWdPYmouaXNFZGl0IHx8IHRoaXMudmFsaWRhdGVGb3JtT2JqKCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRyID0gdXRpbF8xLnBhcmVudHNVbnRpbCh0aGlzLmZvcm0sICdlLXJvdycpO1xuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMuY2VsbERldGFpbHMuY29sdW1uO1xuICAgICAgICAgICAgdmFyIGVkaXRlZERhdGEgPSBnT2JqLmVkaXRNb2R1bGUuZ2V0Q3VycmVudEVkaXRlZERhdGEodGhpcy5mb3JtLCB7fSk7XG4gICAgICAgICAgICBlZGl0ZWREYXRhID0gZWoyX2Jhc2VfMS5leHRlbmQodGhpcy5jZWxsRGV0YWlscy5yb3dEYXRhLCBlZGl0ZWREYXRhKTtcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgIGNvbHVtbk5hbWU6IGNvbHVtbi5maWVsZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZWRpdGVkRGF0YVtjb2x1bW4uZmllbGRdLFxuICAgICAgICAgICAgICAgIHJvd0RhdGE6IHRoaXMuY2VsbERldGFpbHMucm93RGF0YSxcbiAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlOiB0aGlzLmNlbGxEZXRhaWxzLnZhbHVlLFxuICAgICAgICAgICAgICAgIGNvbHVtbk9iamVjdDogY29sdW1uLFxuICAgICAgICAgICAgICAgIGNlbGw6IHRoaXMuZm9ybS5wYXJlbnRFbGVtZW50LFxuICAgICAgICAgICAgICAgIGlzRm9yZWlnbktleTogdGhpcy5jZWxsRGV0YWlscy5pc0ZvcmVpZ25LZXksIGNhbmNlbDogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIWlzRm9yY2VTYXZlKSB7XG4gICAgICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5jZWxsU2F2ZSwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnT2JqLmVkaXRNb2R1bGUuZGVzdHJveUZvcm0oKTtcbiAgICAgICAgICAgIGdPYmouZWRpdE1vZHVsZS5kZXN0cm95V2lkZ2V0cyhbY29sdW1uXSk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnkoZXZlbnRzLnRvb2x0aXBEZXN0cm95LCB7fSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hURChhcmdzLmNlbGwsIGNvbHVtbiwgZ09iai5nZXRSb3dPYmplY3RGcm9tVUlEKHRyLmdldEF0dHJpYnV0ZSgnZGF0YS11aWQnKSksIGFyZ3MudmFsdWUpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5jbGFzc0xpc3QodHIsIFtdLCBbJ2UtZWRpdGVkcm93JywgJ2UtYmF0Y2hyb3cnXSk7XG4gICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZS1lZGl0ZWRiYXRjaGNlbGwnKTtcbiAgICAgICAgICAgIGdPYmouaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQoYXJncy52YWx1ZSkgJiYgYXJncy52YWx1ZS50b1N0cmluZygpID09PVxuICAgICAgICAgICAgICAgICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZCh0aGlzLmNlbGxEZXRhaWxzLnZhbHVlKSA/IHRoaXMuY2VsbERldGFpbHMudmFsdWUgOiAnJykudG9TdHJpbmcoKSAmJiAhdGhpcy5pc0NvbG9yZWQpIHtcbiAgICAgICAgICAgICAgICBhcmdzLmNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZS11cGRhdGVkdGQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdPYmoubm90aWZ5KGV2ZW50cy50b29sYmFyUmVmcmVzaCwge30pO1xuICAgICAgICAgICAgdGhpcy5pc0NvbG9yZWQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQmF0Y2hFZGl0LnByb3RvdHlwZS5nZXREYXRhQnlJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIHJvdyA9IHRoaXMucGFyZW50LmdldFJvd09iamVjdEZyb21VSUQodGhpcy5wYXJlbnQuZ2V0RGF0YVJvd3MoKVtpbmRleF0uZ2V0QXR0cmlidXRlKCdkYXRhLXVpZCcpKTtcbiAgICAgICAgICAgIHJldHVybiByb3cuY2hhbmdlcyA/IHJvdy5jaGFuZ2VzIDogcm93LmRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUudmFsQ29tcGxldGUgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgdmFyIGVkaXQgPSB0aGlzLnBhcmVudC5lZGl0TW9kdWxlO1xuICAgICAgICAgICAgZWRpdC52YWxpZGF0aW9uQ29tcGxldGUoYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIEJhdGNoRWRpdC5wcm90b3R5cGUuY3VzdG9tUGxhY2VtZW50ID0gZnVuY3Rpb24gKGlucHV0RWxlbWVudCwgZXJyb3IpIHtcbiAgICAgICAgICAgIHZhciBlZGl0ID0gdGhpcy5wYXJlbnQuZWRpdE1vZHVsZTtcbiAgICAgICAgICAgIGVkaXQudmFsRXJyb3JQbGFjZW1lbnQoaW5wdXRFbGVtZW50LCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBCYXRjaEVkaXQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkJhdGNoRWRpdCA9IEJhdGNoRWRpdDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3JpZC9hY3Rpb25zL2JhdGNoLWVkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9ub3JtYWwtZWRpdFwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIG5vcm1hbF9lZGl0XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERpYWxvZ0VkaXQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRGlhbG9nRWRpdCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRGlhbG9nRWRpdChwYXJlbnQsIHNlcnZpY2VMb2NhdG9yLCByZW5kZXJlcikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyZW50LCBzZXJ2aWNlTG9jYXRvcikgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIF90aGlzLnNlcnZpY2VMb2NhdG9yID0gc2VydmljZUxvY2F0b3I7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLmNsb3NlRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuY2xvc2VFZGl0LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLmFkZFJlY29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFkZFJlY29yZC5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBEaWFsb2dFZGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5lbmRFZGl0LmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIERpYWxvZ0VkaXQucHJvdG90eXBlLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uIChmaWVsZG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGVsZXRlUmVjb3JkLmNhbGwodGhpcywgZmllbGRuYW1lLCBkYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGlhbG9nRWRpdC5wcm90b3R5cGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKHRyKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnN0YXJ0RWRpdC5jYWxsKHRoaXMsIHRyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERpYWxvZ0VkaXQ7XG4gICAgfShub3JtYWxfZWRpdF8xLk5vcm1hbEVkaXQpKTtcbiAgICBleHBvcnRzLkRpYWxvZ0VkaXQgPSBEaWFsb2dFZGl0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZGlhbG9nLWVkaXQuanNcbi8vIG1vZHVsZSBpZCA9IDgzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2Jhc2UvY29uc3RhbnRcIiwgXCJAc3luY2Z1c2lvbi9lajItZXhjZWwtZXhwb3J0XCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9hY3Rpb25zL2RhdGFcIiwgXCIuL2V4cG9ydC1oZWxwZXJcIiwgXCIuLi9zZXJ2aWNlcy9zdW1tYXJ5LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4uL2Jhc2UvZW51bVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZXZlbnRzLCBlajJfZXhjZWxfZXhwb3J0XzEsIGVqMl9iYXNlXzEsIGRhdGFfMSwgZXhwb3J0X2hlbHBlcl8xLCBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLCBlbnVtXzEsIGVqMl9kYXRhXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEV4Y2VsRXhwb3J0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRXhjZWxFeHBvcnQocGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmJvb2sgPSB7fTtcbiAgICAgICAgICAgIHRoaXMud29ya1NoZWV0ID0gW107XG4gICAgICAgICAgICB0aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoID0gMTtcbiAgICAgICAgICAgIHRoaXMuZXhwVHlwZSA9ICdhcHBlbmR0b3NoZWV0JztcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZUhpZGRlbkNvbHVtbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0NzdkV4cG9ydCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0V4Y2VsRXhwb3J0JztcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZ09iaikge1xuICAgICAgICAgICAgaWYgKGdPYmouZWxlbWVudCAhPT0gbnVsbCAmJiBnT2JqLmVsZW1lbnQuaWQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgZ09iai5lbGVtZW50LmlkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBnT2JqO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0V4cG9ydGluZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuYm9vayA9IHt9O1xuICAgICAgICAgICAgdGhpcy53b3JrU2hlZXQgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucm93cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gW107XG4gICAgICAgICAgICB0aGlzLnN0eWxlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggPSAxO1xuICAgICAgICAgICAgdGhpcy5mb290ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmV4cFR5cGUgPSAnYXBwZW5kdG9zaGVldCc7XG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVIaWRkZW5Db2x1bW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZXhwb3J0VmFsdWVGb3JtYXR0ZXIgPSBuZXcgZXhwb3J0X2hlbHBlcl8xLkV4cG9ydFZhbHVlRm9ybWF0dGVyKCk7XG4gICAgICAgICAgICB0aGlzLnRoZW1lID0gJ21hdGVyaWFsJztcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLk1hcCA9IGZ1bmN0aW9uIChncmlkLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaywgaXNDc3YpIHtcbiAgICAgICAgICAgIHZhciBnT2JqID0gZ3JpZDtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBkYXRhXzEuRGF0YShnT2JqKTtcbiAgICAgICAgICAgIHRoaXMuaXNFeHBvcnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGlzQ3N2KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NzdkV4cG9ydCA9IGlzQ3N2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NzdkV4cG9ydCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5iZWZvcmVFeGNlbEV4cG9ydCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzUmVjb3JkcyhncmlkLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vayk7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzUmVjb3JkcyA9IGZ1bmN0aW9uIChnT2JqLCBleHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0LCB3b3JrYm9vaykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgZXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IG5ldyBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKHsgdXJsOiBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UuZGF0YVNvdXJjZS51cmwsIGFkYXB0b3I6IGV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZS5hZGFwdG9yIH0pLmV4ZWN1dGVRdWVyeShuZXcgZWoyX2RhdGFfMS5RdWVyeSgpKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdChnT2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb2Nlc3NJbm5lclJlY29yZHMoZ09iaiwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5ib29rKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFNYW5hZ2VyID0gX3RoaXMuZGF0YS5nZXREYXRhKHt9LCBfdGhpcy5kYXRhLmdlbmVyYXRlUXVlcnkodHJ1ZSkucmVxdWlyZXNDb3VudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdChnT2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb2Nlc3NJbm5lclJlY29yZHMoZ09iaiwgZXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgd29ya2Jvb2ssIHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5ib29rKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzSW5uZXJSZWNvcmRzID0gZnVuY3Rpb24gKGdPYmosIGV4cG9ydFByb3BlcnRpZXMsIGlzTXVsdGlwbGVFeHBvcnQsIHdvcmtib29rLCByKSB7XG4gICAgICAgICAgICB2YXIgYmxhbmtSb3dzID0gNTtcbiAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgZXhwb3J0UHJvcGVydGllcy5tdWx0aXBsZUV4cG9ydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBUeXBlID0gKGV4cG9ydFByb3BlcnRpZXMubXVsdGlwbGVFeHBvcnQudHlwZSAhPT0gdW5kZWZpbmVkID8gZXhwb3J0UHJvcGVydGllcy5tdWx0aXBsZUV4cG9ydC50eXBlIDogJ2FwcGVuZHRvc2hlZXQnKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcy5tdWx0aXBsZUV4cG9ydC5ibGFua1Jvd3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBibGFua1Jvd3MgPSBleHBvcnRQcm9wZXJ0aWVzLm11bHRpcGxlRXhwb3J0LmJsYW5rUm93cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod29ya2Jvb2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMud29ya1NoZWV0ID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZXhwVHlwZSA9PT0gJ25ld3NoZWV0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMud29ya1NoZWV0ID0gd29ya2Jvb2sud29ya3NoZWV0cztcbiAgICAgICAgICAgICAgICB0aGlzLnJvd3MgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlcyA9IHdvcmtib29rLnN0eWxlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMud29ya1NoZWV0ID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gd29ya2Jvb2sud29ya3NoZWV0c1swXS5yb3dzO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHdvcmtib29rLndvcmtzaGVldHNbMF0uY29sdW1ucztcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlcyA9IHdvcmtib29rLnN0eWxlcztcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCA9ICh0aGlzLnJvd3NbdGhpcy5yb3dzLmxlbmd0aCAtIDFdLmluZGV4ICsgYmxhbmtSb3dzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChpc011bHRpcGxlRXhwb3J0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMuaGVhZGVyICE9PSB1bmRlZmluZWQgJiYgKGlzTXVsdGlwbGVFeHBvcnQgfHwgdGhpcy5leHBUeXBlID09PSAnbmV3c2hlZXQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzRXhjZWxIZWFkZXIoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShleHBvcnRQcm9wZXJ0aWVzLmhlYWRlcikpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcy5mb290ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXhwVHlwZSA9PT0gJ2FwcGVuZHRvc2hlZXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc011bHRpcGxlRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShleHBvcnRQcm9wZXJ0aWVzLmZvb3RlcikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShleHBvcnRQcm9wZXJ0aWVzLmZvb3RlcikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcy5oZWFkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzRXhjZWxIZWFkZXIoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShleHBvcnRQcm9wZXJ0aWVzLmhlYWRlcikpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb3J0UHJvcGVydGllcy5mb290ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb290ZXIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGV4cG9ydFByb3BlcnRpZXMuZm9vdGVyKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVIaWRkZW5Db2x1bW4gPSAoZXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkID8gZXhwb3J0UHJvcGVydGllcy5pbmNsdWRlSGlkZGVuQ29sdW1uIDogZmFsc2UpO1xuICAgICAgICAgICAgdmFyIGhlYWRlclJvdyA9IG5ldyBleHBvcnRfaGVscGVyXzEuRXhwb3J0SGVscGVyKGdPYmopLmdldEhlYWRlcnMoZ09iai5jb2x1bW5zLCB0aGlzLmluY2x1ZGVIaWRkZW5Db2x1bW4pO1xuICAgICAgICAgICAgdmFyIGdyb3VwSW5kZW50ID0gMDtcbiAgICAgICAgICAgIGlmICgoci5yZXN1bHQpLmxldmVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBncm91cEluZGVudCArPSAoci5yZXN1bHQpLmxldmVsO1xuICAgICAgICAgICAgICAgIGdyb3VwSW5kZW50ICs9IChyLnJlc3VsdCkuY2hpbGRMZXZlbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NIZWFkZXJDb250ZW50KGdPYmosIGhlYWRlclJvdywgZXhwb3J0UHJvcGVydGllcywgZ3JvdXBJbmRlbnQpO1xuICAgICAgICAgICAgaWYgKGV4cG9ydFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCAmJiBleHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgIT09IHVuZGVmaW5lZCAmJiAhKGV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkQ29udGVudChnT2JqLCByLCBoZWFkZXJSb3csIGlzTXVsdGlwbGVFeHBvcnQsIGV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgZXhwb3J0UHJvcGVydGllcy5leHBvcnRUeXBlID09PSAnY3VycmVudHZpZXcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkQ29udGVudChnT2JqLCByLCBoZWFkZXJSb3csIGlzTXVsdGlwbGVFeHBvcnQsIGdPYmouZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkQ29udGVudChnT2JqLCByLCBoZWFkZXJSb3csIGlzTXVsdGlwbGVFeHBvcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0V4cG9ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgZ09iai50cmlnZ2VyKGV2ZW50cy5leGNlbEV4cG9ydENvbXBsZXRlKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NSZWNvcmRDb250ZW50ID0gZnVuY3Rpb24gKGdPYmosIHJldHVyblR5cGUsIGhlYWRlclJvdywgaXNNdWx0aXBsZUV4cG9ydCwgY3VycmVudFZpZXdSZWNvcmRzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gZ09iai5jb2x1bW5zO1xuICAgICAgICAgICAgdmFyIHJlY29yZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Vmlld1JlY29yZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlY29yZCA9IGN1cnJlbnRWaWV3UmVjb3JkcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY29yZCA9IHJldHVyblR5cGUucmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlY29yZC5sZXZlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzR3JvdXBlZFJvd3MoZ09iaiwgcmVjb3JkLCBoZWFkZXJSb3csIHJlY29yZC5sZXZlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmRSb3dzKGdPYmosIHJlY29yZCwgaGVhZGVyUm93LCAwKTtcbiAgICAgICAgICAgICAgICBpZiAocmV0dXJuVHlwZS5hZ2dyZWdhdGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRWaWV3UmVjb3JkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NBZ2dyZWdhdGVzKGdPYmosIHJldHVyblR5cGUucmVzdWx0LCBjdXJyZW50Vmlld1JlY29yZHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhnT2JqLCByZXR1cm5UeXBlLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mb290ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICgodGhpcy5leHBUeXBlID09PSAnYXBwZW5kdG9zaGVldCcgJiYgIWlzTXVsdGlwbGVFeHBvcnQpIHx8ICh0aGlzLmV4cFR5cGUgPT09ICduZXdzaGVldCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0V4Y2VsRm9vdGVyKHRoaXMuZm9vdGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2hlZXQgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNoZWV0LmNvbHVtbnMgPSB0aGlzLmNvbHVtbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldC5yb3dzID0gdGhpcy5yb3dzO1xuICAgICAgICAgICAgdGhpcy53b3JrU2hlZXQucHVzaChzaGVldCk7XG4gICAgICAgICAgICB0aGlzLmJvb2sud29ya3NoZWV0cyA9IHRoaXMud29ya1NoZWV0O1xuICAgICAgICAgICAgdGhpcy5ib29rLnN0eWxlcyA9IHRoaXMuc3R5bGVzO1xuICAgICAgICAgICAgaWYgKCFpc011bHRpcGxlRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNDc3ZFeHBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvb2sgPSBuZXcgZWoyX2V4Y2VsX2V4cG9ydF8xLldvcmtib29rKHRoaXMuYm9vaywgJ2NzdicpO1xuICAgICAgICAgICAgICAgICAgICBib29rLnNhdmUoJ0V4cG9ydC5jc3YnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib29rID0gbmV3IGVqMl9leGNlbF9leHBvcnRfMS5Xb3JrYm9vayh0aGlzLmJvb2ssICd4bHN4Jyk7XG4gICAgICAgICAgICAgICAgICAgIGJvb2suc2F2ZSgnRXhwb3J0Lnhsc3gnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzR3JvdXBlZFJvd3MgPSBmdW5jdGlvbiAoZ09iaiwgZGF0YVNvdXJjZSwgaGVhZGVyUm93LCBsZXZlbCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBkYXRhU291cmNlXzEgPSBkYXRhU291cmNlOyBfaSA8IGRhdGFTb3VyY2VfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRhdGFTb3VyY2VfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgIGNlbGwuaW5kZXggPSBpbmRleCArIGxldmVsO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5rZXksXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogZ09iai5nZXRDb2x1bW5CeUZpZWxkKGl0ZW0uZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gaXRlbS5maWVsZCArICc6ICcgKyB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyLmZvcm1hdENlbGxWYWx1ZShhcmdzKSArICcgLSAnO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNvdW50ID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlICs9IGl0ZW0uY291bnQgKyAnIGl0ZW1zJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgKz0gaXRlbS5jb3VudCArICcgaXRlbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgIHZhciBjYXB0aW9uTW9kZWxHZW4gPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5DYXB0aW9uU3VtbWFyeU1vZGVsR2VuZXJhdG9yKGdPYmopO1xuICAgICAgICAgICAgICAgIHZhciBncm91cENhcHRpb25TdW1tYXJ5Um93cyA9IGNhcHRpb25Nb2RlbEdlbi5nZW5lcmF0ZVJvd3MoaXRlbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsQWdncmVnYXRlcyhnT2JqLCBncm91cENhcHRpb25TdW1tYXJ5Um93cywgZGF0YVNvdXJjZS5sZXZlbCArIGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMsIHRoaXMucm93TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBjZWxscy5wdXNoKGNlbGwpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd3NbdGhpcy5yb3dMZW5ndGggLSAxXS5jZWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsSW5kZXggPSBkYXRhU291cmNlLmxldmVsICsgZGF0YVNvdXJjZS5jaGlsZExldmVscyArIGdyb3VwQ2FwdGlvblN1bW1hcnlSb3dzWzBdLmNlbGxzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSB0aGlzLnJvd3NbdGhpcy5yb3dMZW5ndGggLSAxXS5jZWxsczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0Q2VsbCA9IF9iW19hXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Q2VsbC5pbmRleCA8IGxJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxJbmRleCA9IHRDZWxsLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRDZWxsLmluZGV4ID4gaEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaEluZGV4ID0gdENlbGwuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0Q2VsbC5zdHlsZSA9IHRoaXMuZ2V0Q2FwdGlvblRoZW1lU3R5bGUodGhpcy50aGVtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKHRDZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKGxJbmRleCAtIGNlbGwuaW5kZXgpID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2xTcGFuID0gbEluZGV4IC0gY2VsbC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaEluZGV4IDwgKGhlYWRlclJvdy5jb2x1bW5zLmxlbmd0aCArIGluZGV4ICsgbGV2ZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc0NlbGwgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhU291cmNlLmNoaWxkTGV2ZWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc0NlbGwuaW5kZXggPSAoaEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNDZWxsLmluZGV4ID0gKGhJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc0NlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHMucHVzaChzQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoSW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW4gPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYyA9IDAsIF9kID0gaGVhZGVyUm93LmNvbHVtbnM7IF9jIDwgX2QubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2RbX2NdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY29sU3BhbiA9IChkYXRhU291cmNlLmNoaWxkTGV2ZWxzICsgc3Bhbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93c1t0aGlzLnJvd0xlbmd0aCAtIDFdLmNlbGxzID0gY2VsbHM7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5jaGlsZExldmVscyAhPT0gdW5kZWZpbmVkICYmIGRhdGFTb3VyY2UuY2hpbGRMZXZlbHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0dyb3VwZWRSb3dzKGdPYmosIGl0ZW0uaXRlbXMsIGhlYWRlclJvdywgaXRlbS5pdGVtcy5sZXZlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmRSb3dzKGdPYmosIGl0ZW0uaXRlbXMsIGhlYWRlclJvdywgKGxldmVsKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoZ09iaiwgaXRlbSwgdW5kZWZpbmVkLCAobGV2ZWwpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzUmVjb3JkUm93cyA9IGZ1bmN0aW9uIChnT2JqLCByZWNvcmQsIGhlYWRlclJvdywgbGV2ZWwpIHtcbiAgICAgICAgICAgIHZhciByTGVuID0gT2JqZWN0LmtleXMocmVjb3JkKS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAxO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IHJMZW47IHIrKykge1xuICAgICAgICAgICAgICAgIGNlbGxzID0gW107XG4gICAgICAgICAgICAgICAgaW5kZXggPSAxO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBsZW4gPSBoZWFkZXJSb3cuY29sdW1ucy5sZW5ndGg7IGMgPCBsZW47IGMrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSByZWNvcmRbcl1baGVhZGVyUm93LmNvbHVtbnNbY10uZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGhlYWRlclJvdy5jb2x1bW5zW2NdLCB2YWx1ZTogdmFsdWUsIHN0eWxlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmV4Y2VsUXVlcnlDZWxsSW5mbywgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5pbmRleCA9IGluZGV4ICsgbGV2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gYXJncy52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3R5bGVJbmRleCA9IHRoaXMuZ2V0Q29sdW1uU3R5bGUoZ09iaiwgaW5kZXggKyBsZXZlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZSA9IHRoaXMubWVyZ2VPcHRpb25zKHRoaXMuc3R5bGVzW3N0eWxlSW5kZXhdLCBhcmdzLnN0eWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUgPSB7IG5hbWU6IGdPYmouZWxlbWVudC5pZCArICdjb2x1bW4nICsgKGluZGV4ICsgbGV2ZWwpIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKGNlbGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKHsgaW5kZXg6IHRoaXMucm93TGVuZ3RoKyssIGNlbGxzOiBjZWxscyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NBZ2dyZWdhdGVzID0gZnVuY3Rpb24gKGdPYmosIHJlYywgY3VycmVudFZpZXdSZWNvcmRzLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBzdW1tYXJ5TW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5TdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Vmlld1JlY29yZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBjdXJyZW50Vmlld1JlY29yZHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gcmVjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluZGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaW5kZW50ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwU3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwU3VtbWFyeVJvd3MgPSBncm91cFN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YSwgeyBsZXZlbDogZGF0YS5sZXZlbCB9KTtcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBTdW1tYXJ5Um93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsbEFnZ3JlZ2F0ZXMoZ09iaiwgZ3JvdXBTdW1tYXJ5Um93cywgaW5kZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc1Jvd3MgPSBzdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGEsIHJlYy5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgIGlmIChzUm93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxsQWdncmVnYXRlcyhnT2JqLCBzUm93cywgaW5kZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmZpbGxBZ2dyZWdhdGVzID0gZnVuY3Rpb24gKGdPYmosIGNlbGxzLCBpbmRlbnQsIGN1c3RvbUluZGV4KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNlbGxzXzEgPSBjZWxsczsgX2kgPCBjZWxsc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBjZWxsc18xW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbHNfMiA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBfYiA9IHJvdy5jZWxsczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBfYltfYV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBlQ2VsbCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGNlbGwudmlzaWJsZSB8fCB0aGlzLmluY2x1ZGVIaWRkZW5Db2x1bW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuaXNEYXRhQ2VsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLmluZGV4ID0gaW5kZXggKyBpbmRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlRm4gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC5jb2x1bW4uZm9vdGVyVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLlN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjZWxsLmNvbHVtbi5mb290ZXJUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eHQgPSAodGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGNlbGwuY2VsbFR5cGUpXShyb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSB0eHRbMF0ud2hvbGVUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjZWxsLmNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5Hcm91cFN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjZWxsLmNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dCA9ICh0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgY2VsbC5jZWxsVHlwZSldKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHR4dFswXS53aG9sZVRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNlbGwuY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKGNlbGwuY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dCA9ICh0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgY2VsbC5jZWxsVHlwZSldKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHR4dFswXS53aG9sZVRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYyA9IDAsIF9kID0gT2JqZWN0LmtleXMocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdKTsgX2MgPCBfZC5sZW5ndGg7IF9jKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfZFtfY107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBjZWxsLmNvbHVtbi50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5zdW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5zdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5hdmVyYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uYXZlcmFnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLm1heDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLm1pbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLm1pbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uY291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS50cnVlY291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC52YWx1ZSA9IHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS50cnVlY291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXS5mYWxzZWNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwudmFsdWUgPSByb3cuZGF0YVtjZWxsLmNvbHVtbi5maWVsZF0uZmFsc2Vjb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmN1c3RvbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVDZWxsLnZhbHVlID0gcm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdLmN1c3RvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNlbGwuc3R5bGUgPSB0aGlzLmdldENhcHRpb25UaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzXzIucHVzaChlQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tSW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC5pbmRleCA9IGluZGV4ICsgaW5kZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlQ2VsbC5zdHlsZSA9IHRoaXMuZ2V0Q2FwdGlvblRoZW1lU3R5bGUodGhpcy50aGVtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzXzIucHVzaChlQ2VsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjdXN0b21JbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKHsgaW5kZXg6IGN1c3RvbUluZGV4LCBjZWxsczogY2VsbHNfMiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKHsgaW5kZXg6IHRoaXMucm93TGVuZ3RoKyssIGNlbGxzOiBjZWxsc18yIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLm1lcmdlT3B0aW9ucyA9IGZ1bmN0aW9uIChKU09OMSwgSlNPTjIpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgICAgIHZhciBhdHRybmFtZSA9IE9iamVjdC5rZXlzKEpTT04xKTtcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBhdHRybmFtZS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cm5hbWVbaW5kZXhdICE9PSAnbmFtZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2F0dHJuYW1lW2luZGV4XV0gPSBKU09OMVthdHRybmFtZVtpbmRleF1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHJuYW1lID0gT2JqZWN0LmtleXMoSlNPTjIpO1xuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGF0dHJuYW1lLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGlmIChhdHRybmFtZVtpbmRleF0gIT09ICduYW1lJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbYXR0cm5hbWVbaW5kZXhdXSA9IEpTT04yW2F0dHJuYW1lW2luZGV4XV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLmdldENvbHVtblN0eWxlID0gZnVuY3Rpb24gKGdPYmosIGNvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuc3R5bGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUubmFtZSA9PT0gZ09iai5lbGVtZW50LmlkICsgJ2NvbHVtbicgKyBjb2x1bW5JbmRleCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0hlYWRlckNvbnRlbnQgPSBmdW5jdGlvbiAoZ09iaiwgaGVhZGVyUm93LCBleHBvcnRQcm9wZXJ0aWVzLCBpbmRlbnQpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBnT2JqLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgcm93SW5kZXggPSAxO1xuICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlID0gaGVhZGVyUm93O1xuICAgICAgICAgICAgdmFyIGdyaWRSb3dzID0gcmV0dXJuVmFsdWUucm93cztcbiAgICAgICAgICAgIHZhciBncmlkQ29sdW1ucyA9IHJldHVyblZhbHVlLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgc3Bhbm5lZENlbGxzID0gW107XG4gICAgICAgICAgICBpZiAoaW5kZW50ID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGluZGV4ICE9PSBpbmRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zLnB1c2goeyBpbmRleDogaW5kZXggKyAxLCB3aWR0aDogMzAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgZ3JpZFJvd3MubGVuZ3RoOyByb3crKykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q2VsbEluZGV4ID0gMSArIGluZGVudDtcbiAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2x1bW5fMSA9IDA7IGNvbHVtbl8xIDwgZ3JpZFJvd3Nbcm93XS5jZWxscy5sZW5ndGg7IGNvbHVtbl8xKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBncmlkQ2VsbCA9IGdyaWRSb3dzW3Jvd10uY2VsbHNbY29sdW1uXzFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0geyBjb250YWluczogdHJ1ZSwgaW5kZXg6IDEgfTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlc3VsdC5jb250YWlucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5nZXRJbmRleChzcGFubmVkQ2VsbHMsIHJvd0luZGV4LCBjdXJyZW50Q2VsbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsSW5kZXggPSByZXN1bHQuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5jb250YWlucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuaW5kZXggPSByZXN1bHQuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdyaWRDZWxsLnJvd1NwYW4gIT09IHVuZGVmaW5lZCAmJiBncmlkQ2VsbC5yb3dTcGFuICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnJvd1NwYW4gPSBncmlkQ2VsbC5yb3dTcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHJvd0luZGV4OyBpIDwgZ3JpZENlbGwucm93U3BhbiArIHJvd0luZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Bhbm5lZENlbGwgPSB7IHJvd0luZGV4OiAwLCBjb2x1bW5JbmRleDogMCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5uZWRDZWxsLnJvd0luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFubmVkQ2VsbC5jb2x1bW5JbmRleCA9IGN1cnJlbnRDZWxsSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbm5lZENlbGxzLnB1c2goc3Bhbm5lZENlbGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChncmlkQ2VsbC5jb2xTcGFuICE9PSB1bmRlZmluZWQgJiYgZ3JpZENlbGwuY29sU3BhbiAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2xTcGFuID0gZ3JpZENlbGwuY29sU3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDZWxsSW5kZXggPSBjdXJyZW50Q2VsbEluZGV4ICsgY2VsbC5jb2xTcGFuIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gZ3JpZENlbGwuY29sdW1uLmhlYWRlclRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgZXhwb3J0UHJvcGVydGllcy50aGVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRoZW1lID0gZXhwb3J0UHJvcGVydGllcy50aGVtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlID0gdGhpcy5nZXRIZWFkZXJUaGVtZVN0eWxlKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JpZENlbGwuY29sdW1uLnRleHRBbGlnbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS5oQWxpZ24gPSBncmlkQ2VsbC5jb2x1bW4udGV4dEFsaWduO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChncmlkQ2VsbC5jb2x1bW4uaGVhZGVyVGV4dEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLmhBbGlnbiA9IGdyaWRDZWxsLmNvbHVtbi5oZWFkZXJUZXh0QWxpZ247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZSA9IHN0eWxlO1xuICAgICAgICAgICAgICAgICAgICBjZWxscy5wdXNoKGNlbGwpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2VsbEluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKHsgaW5kZXg6IHRoaXMucm93TGVuZ3RoKyssIGNlbGxzOiBjZWxscyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IGdyaWRDb2x1bW5zLmxlbmd0aDsgY29sKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlU3R5bGVzKGdPYmosIGdyaWRDb2x1bW5zW2NvbF0sIHRoaXMuZ2V0UmVjb3JkVGhlbWVTdHlsZSh0aGlzLnRoZW1lKSwgaW5kZW50ICsgY29sICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRIZWFkZXJUaGVtZVN0eWxlID0gZnVuY3Rpb24gKHRoZW1lKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhlbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdmYWJyaWMnOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250Q29sb3IgPSAnIzY2NjY2Nic7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnROYW1lID0gJ1NlZ29lIFVJJztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udFNpemUgPSAxNDtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRUFFQUVBJyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250Q29sb3IgPSAnIzMzMzMwRic7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTQ7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib3JkZXJzID0geyBjb2xvcjogJyMzMzMzMEYnIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTI7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvcmRlcnMgPSB7IGNvbG9yOiAnI0UwRTBFMCcgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRDYXB0aW9uVGhlbWVTdHlsZSA9IGZ1bmN0aW9uICh0aGVtZSkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgICAgICBzd2l0Y2ggKHRoZW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmFicmljJzpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udENvbG9yID0gJyMzMzMzMEYnO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250TmFtZSA9ICdTZWdvZSBVSSc7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTQ7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJhY2tDb2xvciA9ICcjRjZGNkY2JztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRUFFQUVBJyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250Q29sb3IgPSAnIzMzMzMwRic7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTQ7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5ib3JkZXJzID0geyBjb2xvcjogJyNFQUVBRUEnIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTM7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJhY2tDb2xvciA9ICcjRjZGNkY2JztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5nZXRSZWNvcmRUaGVtZVN0eWxlID0gZnVuY3Rpb24gKHRoZW1lKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhlbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdmYWJyaWMnOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250Q29sb3IgPSAnIzMzMzMzMyc7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnROYW1lID0gJ1NlZ29lIFVJJztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udFNpemUgPSAxMztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRUFFQUVBJyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5mb250Q29sb3IgPSAnIzMzMzMwRic7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRTaXplID0gMTQ7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmJvcmRlcnMgPSB7IGNvbG9yOiAnI0RERERERCcgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZm9udFNpemUgPSAxMztcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuYm9yZGVycyA9IHsgY29sb3I6ICcjRTBFMEUwJyB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhjZWxFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NFeGNlbEhlYWRlciA9IGZ1bmN0aW9uIChoZWFkZXIpIHtcbiAgICAgICAgICAgIGlmIChoZWFkZXIucm93cyAhPT0gdW5kZWZpbmVkICYmICh0aGlzLmV4cFR5cGUgPT09ICduZXdzaGVldCcgfHwgdGhpcy5yb3dMZW5ndGggPT09IDEpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vUm93cyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyLmhlYWRlclJvd3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0xlbmd0aCA9IGhlYWRlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoID0gaGVhZGVyLmhlYWRlclJvd3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvd0xlbmd0aCA8IGhlYWRlci5yb3dzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBub1Jvd3MgPSB0aGlzLnJvd0xlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IGhlYWRlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGgrKztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBub1Jvd3M7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gaGVhZGVyLnJvd3Nbcm93XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoanNvbi5pbmRleCAhPT0gbnVsbCAmJiBqc29uLmluZGV4ICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmluZGV4ID0gKHJvdyArIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlZENlbGxJbmRleChqc29uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS51cGRhdGVkQ2VsbEluZGV4ID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgIHZhciBjZWxsc0xlbmd0aCA9IGpzb24uY2VsbHMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgY2VsbElkID0gMDsgY2VsbElkIDwgY2VsbHNMZW5ndGg7IGNlbGxJZCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25DZWxsID0ganNvbi5jZWxsc1tjZWxsSWRdO1xuICAgICAgICAgICAgICAgIGlmICghKGpzb25DZWxsLmluZGV4ICE9PSBudWxsICYmIGpzb25DZWxsLmluZGV4ICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGpzb25DZWxsLmluZGV4ID0gKGNlbGxJZCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93cy5wdXNoKGpzb24pO1xuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUucHJvY2Vzc0V4Y2VsRm9vdGVyID0gZnVuY3Rpb24gKGZvb3Rlcikge1xuICAgICAgICAgICAgaWYgKGZvb3Rlci5yb3dzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9Sb3dzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChmb290ZXIuZm9vdGVyUm93cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93TGVuZ3RoICs9IGZvb3Rlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb290ZXIuZm9vdGVyUm93cyA+IGZvb3Rlci5yb3dzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dMZW5ndGggKz0gKGZvb3Rlci5mb290ZXJSb3dzIC0gZm9vdGVyLnJvd3MubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IGZvb3Rlci5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vUm93cyA9IGZvb3Rlci5mb290ZXJSb3dzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG5vUm93czsgcm93KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpzb24gPSBmb290ZXIucm93c1tyb3ddO1xuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5pbmRleCA9PT0gbnVsbCB8fCBqc29uLmluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uaW5kZXggPSB0aGlzLnJvd0xlbmd0aCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pbmRleCArPSB0aGlzLnJvd0xlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZWRDZWxsSW5kZXgoanNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZ2V0SW5kZXggPSBmdW5jdGlvbiAoc3Bhbm5lZENlbGxzLCByb3dJbmRleCwgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgc3Bhbm5lZENlbGxzXzEgPSBzcGFubmVkQ2VsbHM7IF9pIDwgc3Bhbm5lZENlbGxzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwYW5uZWRDZWxsID0gc3Bhbm5lZENlbGxzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICgoc3Bhbm5lZENlbGwucm93SW5kZXggPT09IHJvd0luZGV4KSAmJiAoc3Bhbm5lZENlbGwuY29sdW1uSW5kZXggPT09IGNvbHVtbkluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5JbmRleCA9IGNvbHVtbkluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgY29udGFpbnM6IHRydWUsIGluZGV4OiBjb2x1bW5JbmRleCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGNvbnRhaW5zOiBmYWxzZSwgaW5kZXg6IGNvbHVtbkluZGV4IH07XG4gICAgICAgIH07XG4gICAgICAgIEV4Y2VsRXhwb3J0LnByb3RvdHlwZS5wYXJzZVN0eWxlcyA9IGZ1bmN0aW9uIChnT2JqLCBjb2wsIHN0eWxlLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKGNvbC5mb3JtYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChjb2wuZm9ybWF0LnNrZWxldG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUubnVtYmVyRm9ybWF0ID0gY29sLmZvcm1hdC5za2VsZXRvbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5mb3JtYXQudHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS50eXBlID0gY29sLmZvcm1hdC50eXBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5udW1iZXJGb3JtYXQgPSBjb2wuZm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS50eXBlID0gY29sLnR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbC50ZXh0QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHN0eWxlLmhBbGlnbiA9IGNvbC50ZXh0QWxpZ247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3R5bGUpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5uYW1lID0gZ09iai5lbGVtZW50LmlkICsgJ2NvbHVtbicgKyBpbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlcy5wdXNoKHN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2wud2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsgaW5kZXg6IGluZGV4LCB3aWR0aDogY29sLndpZHRoIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFeGNlbEV4cG9ydC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV4Y2VsRXhwb3J0O1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FeGNlbEV4cG9ydCA9IEV4Y2VsRXhwb3J0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZXhjZWwtZXhwb3J0LmpzXG4vLyBtb2R1bGUgaWQgPSA4NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfODVfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1leGNlbC1leHBvcnRcIlxuLy8gbW9kdWxlIGlkID0gODVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi8uLi9tb2RlbHMvcm93XCIsIFwiLi4vYmFzZS9lbnVtXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9tb2RlbHMvY2VsbFwiLCBcIi4vLi4vc2VydmljZXMvdmFsdWUtZm9ybWF0dGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcm93XzEsIGVudW1fMSwgZWoyX2Jhc2VfMSwgY2VsbF8xLCB2YWx1ZV9mb3JtYXR0ZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRXhwb3J0SGVscGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRXhwb3J0SGVscGVyKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5nZXRIZWFkZXJzID0gZnVuY3Rpb24gKGNvbHVtbiwgaXNIaWRlQ29sdW1uSW5jbHVkZSkge1xuICAgICAgICAgICAgaWYgKGlzSGlkZUNvbHVtbkluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2xzID0gY29sdW1uO1xuICAgICAgICAgICAgdGhpcy5jb2xEZXB0aCA9IHRoaXMubWVhc3VyZUNvbHVtbkRlcHRoKGNvbHMpO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBhY3R1YWxDb2x1bW5zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29sRGVwdGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3NbaV0gPSBuZXcgcm93XzEuUm93KHt9KTtcbiAgICAgICAgICAgICAgICByb3dzW2ldLmNlbGxzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dzID0gdGhpcy5wcm9jZXNzQ29sdW1ucyhyb3dzKTtcbiAgICAgICAgICAgIHJvd3MgPSB0aGlzLnByb2Nlc3NIZWFkZXJDZWxscyhyb3dzKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcm93c18xID0gcm93czsgX2kgPCByb3dzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHJvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3cuY2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSByb3cuY2VsbHNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnZpc2libGUgPT09IHVuZGVmaW5lZCAmJiBjZWxsLmNlbGxUeXBlICE9PSA5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMgPSB0aGlzLnJlbW92ZUNlbGxGcm9tUm93KHJvdy5jZWxscywgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCghaXNIaWRlQ29sdW1uSW5jbHVkZSkgJiYgY2VsbC52aXNpYmxlICE9PSB1bmRlZmluZWQgJiYgKCFjZWxsLnZpc2libGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMgPSB0aGlzLnJlbW92ZUNlbGxGcm9tUm93KHJvdy5jZWxscywgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQWN0dWFsQ29sdW1ucyhjb2xzW2ldLCBhY3R1YWxDb2x1bW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHJvd3M6IHJvd3MsIGNvbHVtbnM6IGFjdHVhbENvbHVtbnMgfTtcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5nZW5lcmF0ZUFjdHVhbENvbHVtbnMgPSBmdW5jdGlvbiAoY29sdW1uLCBhY3R1YWxDb2x1bW5zKSB7XG4gICAgICAgICAgICBpZiAoIWNvbHVtbi5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlIHx8IHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsQ29sdW1ucy5wdXNoKGNvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlIHx8IHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbFNwYW4gPSB0aGlzLmdldENlbGxDb3VudChjb2x1bW4sIDApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sU3BhbiAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW4uY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVBY3R1YWxDb2x1bW5zKGNvbHVtbi5jb2x1bW5zW2ldLCBhY3R1YWxDb2x1bW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5yZW1vdmVDZWxsRnJvbVJvdyA9IGZ1bmN0aW9uIChjZWxscywgY2VsbEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0Q2VsbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2VsbEluZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHRDZWxscy5wdXNoKGNlbGxzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAoY2VsbEluZGV4ICsgMSk7IGkgPCBjZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdENlbGxzLnB1c2goY2VsbHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdENlbGxzO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLnByb2Nlc3NIZWFkZXJDZWxscyA9IGZ1bmN0aW9uIChyb3dzKSB7XG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMucGFyZW50LmVuYWJsZUNvbHVtblZpcnR1YWxpemF0aW9uID8gdGhpcy5wYXJlbnQuZ2V0Q29sdW1ucygpIDogdGhpcy5wYXJlbnQuY29sdW1ucztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJvd3MgPSB0aGlzLmFwcGVuZEdyaWRDZWxscyhjb2x1bW5zW2ldLCByb3dzLCAwLCBpID09PSAwLCBmYWxzZSwgaSA9PT0gKGNvbHVtbnMubGVuZ3RoIC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUuYXBwZW5kR3JpZENlbGxzID0gZnVuY3Rpb24gKGNvbHMsIGdyaWRSb3dzLCBpbmRleCwgaXNGaXJzdE9iaiwgaXNGaXJzdENvbHVtbiwgaXNMYXN0Q29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgbGFzdENvbCA9IGlzTGFzdENvbHVtbiA/ICdlLWxhc3RjZWxsJyA6ICcnO1xuICAgICAgICAgICAgaWYgKCFjb2xzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBncmlkUm93c1tpbmRleF0uY2VsbHMucHVzaCh0aGlzLmdlbmVyYXRlQ2VsbChjb2xzLCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVyLCB0aGlzLmNvbERlcHRoIC0gaW5kZXgsIChpc0ZpcnN0T2JqID8gJycgOiAoaXNGaXJzdENvbHVtbiA/ICdlLWZpcnN0Y2VsbCcgOiAnJykpICsgbGFzdENvbCwgaW5kZXgsIHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4QnlVaWQoY29scy51aWQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sU3BhbiA9IHRoaXMuZ2V0Q2VsbENvdW50KGNvbHMsIDApO1xuICAgICAgICAgICAgICAgIGlmIChjb2xTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIGdyaWRSb3dzW2luZGV4XS5jZWxscy5wdXNoKG5ldyBjZWxsXzEuQ2VsbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsVHlwZTogZW51bV8xLkNlbGxUeXBlLlN0YWNrZWRIZWFkZXIsIGNvbHVtbjogY29scywgY29sU3BhbjogY29sU3BhblxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpc0ZpcnN0Q2VsbCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgaXNJZ25vcmVGaXJzdENlbGwgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbHMuY29sdW1ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpc0ZpcnN0Q2VsbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29scy5jb2x1bW5zW2ldLnZpc2libGUgJiYgIWlzSWdub3JlRmlyc3RDZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0ZpcnN0Q2VsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0lnbm9yZUZpcnN0Q2VsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZ3JpZFJvd3MgPSB0aGlzLmFwcGVuZEdyaWRDZWxscyhjb2xzLmNvbHVtbnNbaV0sIGdyaWRSb3dzLCBpbmRleCArIDEsIGlzRmlyc3RPYmosIGkgPT09IDAsIGkgPT09IChsZW4gLSAxKSAmJiBpc0xhc3RDb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBncmlkUm93cztcbiAgICAgICAgfTtcbiAgICAgICAgRXhwb3J0SGVscGVyLnByb3RvdHlwZS5nZW5lcmF0ZUNlbGwgPSBmdW5jdGlvbiAoZ3JpZENvbHVtbiwgY2VsbFR5cGUsIHJvd1NwYW4sIGNsYXNzTmFtZSwgcm93SW5kZXgsIGNvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uID0ge1xuICAgICAgICAgICAgICAgICd2aXNpYmxlJzogZ3JpZENvbHVtbi52aXNpYmxlLFxuICAgICAgICAgICAgICAgICdpc0RhdGFDZWxsJzogZmFsc2UsXG4gICAgICAgICAgICAgICAgJ2lzVGVtcGxhdGUnOiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChncmlkQ29sdW1uLmhlYWRlclRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICAncm93SUQnOiAnJyxcbiAgICAgICAgICAgICAgICAnY29sdW1uJzogZ3JpZENvbHVtbixcbiAgICAgICAgICAgICAgICAnY2VsbFR5cGUnOiBjZWxsVHlwZSxcbiAgICAgICAgICAgICAgICAncm93U3Bhbic6IHJvd1NwYW4sXG4gICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6IGNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAnaW5kZXgnOiByb3dJbmRleCxcbiAgICAgICAgICAgICAgICAnY29sSW5kZXgnOiBjb2x1bW5JbmRleFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghb3B0aW9uLnJvd1NwYW4gfHwgb3B0aW9uLnJvd1NwYW4gPCAyKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbi5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBjZWxsXzEuQ2VsbChvcHRpb24pO1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLnByb2Nlc3NDb2x1bW5zID0gZnVuY3Rpb24gKHJvd3MpIHtcbiAgICAgICAgICAgIHZhciBncmlkT2JqID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uSW5kZXhlcyA9IHRoaXMucGFyZW50LmdldENvbHVtbkluZGV4ZXNJblZpZXcoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyaWRPYmouYWxsb3dHcm91cGluZykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuXzEgPSBncmlkT2JqLmdyb3VwU2V0dGluZ3MuY29sdW1ucy5sZW5ndGg7IGogPCBsZW5fMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuZW5hYmxlQ29sdW1uVmlydHVhbGl6YXRpb24gJiYgY29sdW1uSW5kZXhlcy5pbmRleE9mKGopID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBlbnVtXzEuQ2VsbFR5cGUuSGVhZGVySW5kZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdyaWRPYmouZGV0YWlsVGVtcGxhdGUgfHwgZ3JpZE9iai5jaGlsZEdyaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93c1tpXS5jZWxscy5wdXNoKHRoaXMuZ2VuZXJhdGVDZWxsKHt9LCBlbnVtXzEuQ2VsbFR5cGUuRGV0YWlsSGVhZGVyKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUuZ2V0Q2VsbENvdW50ID0gZnVuY3Rpb24gKGNvbHVtbiwgY291bnQpIHtcbiAgICAgICAgICAgIGlmIChjb2x1bW4uY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sdW1uLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSB0aGlzLmdldENlbGxDb3VudChjb2x1bW4uY29sdW1uc1tpXSwgY291bnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udmlzaWJsZSB8fCB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9O1xuICAgICAgICBFeHBvcnRIZWxwZXIucHJvdG90eXBlLm1lYXN1cmVDb2x1bW5EZXB0aCA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBtYXggPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVwdGggPSB0aGlzLmNoZWNrRGVwdGgoY29sdW1uW2ldLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAobWF4IDwgZGVwdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gZGVwdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1heCArIDE7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydEhlbHBlci5wcm90b3R5cGUuY2hlY2tEZXB0aCA9IGZ1bmN0aW9uIChjb2wsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoY29sLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sLmNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLmNoZWNrRGVwdGgoY29sLmNvbHVtbnNbaV0sIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH07XG4gICAgICAgIDtcbiAgICAgICAgcmV0dXJuIEV4cG9ydEhlbHBlcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRXhwb3J0SGVscGVyID0gRXhwb3J0SGVscGVyO1xuICAgIHZhciBFeHBvcnRWYWx1ZUZvcm1hdHRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEV4cG9ydFZhbHVlRm9ybWF0dGVyKCkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZUZvcm1hdHRlciA9IG5ldyB2YWx1ZV9mb3JtYXR0ZXJfMS5WYWx1ZUZvcm1hdHRlcigpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcm5hdGlvbmFsaXphdGlvbiA9IG5ldyBlajJfYmFzZV8xLkludGVybmF0aW9uYWxpemF0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgRXhwb3J0VmFsdWVGb3JtYXR0ZXIucHJvdG90eXBlLmZvcm1hdENlbGxWYWx1ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ251bWJlcicgJiYgYXJncy5jb2x1bW4uZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgYXJncy5jb2x1bW4uZm9ybWF0ICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVybmF0aW9uYWxpemF0aW9uLmdldE51bWJlckZvcm1hdCh7IGZvcm1hdDogYXJncy5jb2x1bW4uZm9ybWF0IH0pKGFyZ3MudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3MudmFsdWUgPyAndHJ1ZScgOiAnZmFsc2UnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKGFyZ3MuY29sdW1uLnR5cGUgPT09ICdkYXRlJyB8fCBhcmdzLmNvbHVtbi50eXBlID09PSAnZGF0ZXRpbWUnIHx8IGFyZ3MuY29sdW1uLnR5cGUgPT09ICd0aW1lJykgJiYgYXJncy5jb2x1bW4uZm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3MuY29sdW1uLmZvcm1hdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uLnR5cGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0geyB0eXBlOiAnZGF0ZScsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmdzLmNvbHVtbi50eXBlID09PSAndGltZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IHsgdHlwZTogJ3RpbWUnLCBza2VsZXRvbjogYXJncy5jb2x1bW4uZm9ybWF0IH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSB7IHR5cGU6ICdkYXRlVGltZScsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUZvcm1hdHRlci5nZXRGb3JtYXRGdW5jdGlvbihmb3JtYXQpKGFyZ3MudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uLmZvcm1hdCBpbnN0YW5jZW9mIE9iamVjdCAmJiBhcmdzLmNvbHVtbi5mb3JtYXQudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGFyZ3MudmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VzdG9tRm9ybWF0ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuY29sdW1uLnR5cGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUZvcm1hdCA9IHsgdHlwZTogYXJncy5jb2x1bW4uZm9ybWF0LnR5cGUsIGZvcm1hdDogYXJncy5jb2x1bW4uZm9ybWF0LmZvcm1hdCwgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdC5za2VsZXRvbiB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gJ3RpbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tRm9ybWF0ID0geyB0eXBlOiAndGltZScsIGZvcm1hdDogYXJncy5jb2x1bW4uZm9ybWF0LmZvcm1hdCwgc2tlbGV0b246IGFyZ3MuY29sdW1uLmZvcm1hdC5za2VsZXRvbiB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tRm9ybWF0ID0geyB0eXBlOiAnZGF0ZVRpbWUnLCBmb3JtYXQ6IGFyZ3MuY29sdW1uLmZvcm1hdC5mb3JtYXQsIHNrZWxldG9uOiBhcmdzLmNvbHVtbi5mb3JtYXQuc2tlbGV0b24gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlRm9ybWF0dGVyLmdldEZvcm1hdEZ1bmN0aW9uKGN1c3RvbUZvcm1hdCkoYXJncy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5jb2x1bW4udHlwZSA9PT0gdW5kZWZpbmVkIHx8IGFyZ3MuY29sdW1uLnR5cGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhcmdzLnZhbHVlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEV4cG9ydFZhbHVlRm9ybWF0dGVyO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5FeHBvcnRWYWx1ZUZvcm1hdHRlciA9IEV4cG9ydFZhbHVlRm9ybWF0dGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvZXhwb3J0LWhlbHBlci5qc1xuLy8gbW9kdWxlIGlkID0gODZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vYmFzZS9jb25zdGFudFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiLCBcIkBzeW5jZnVzaW9uL2VqMi1wZGYtZXhwb3J0XCIsIFwiQHN5bmNmdXNpb24vZWoyLXBkZi1leHBvcnRcIiwgXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiLCBcIi4vZXhwb3J0LWhlbHBlclwiLCBcIi4uL2FjdGlvbnMvZGF0YVwiLCBcIi4uL3NlcnZpY2VzL3N1bW1hcnktbW9kZWwtZ2VuZXJhdG9yXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi9iYXNlL2VudW1cIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGV2ZW50cywgZWoyX3BkZl9leHBvcnRfMSwgZWoyX3BkZl9leHBvcnRfMiwgZWoyX3BkZl9leHBvcnRfMywgZWoyX3BkZl9leHBvcnRfNCwgZWoyX3BkZl9leHBvcnRfNSwgZWoyX3BkZl9leHBvcnRfNiwgZXhwb3J0X2hlbHBlcl8xLCBkYXRhXzEsIHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEsIGVqMl9iYXNlXzEsIGVudW1fMSwgZWoyX2RhdGFfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUGRmRXhwb3J0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUGRmRXhwb3J0KHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uSW5jbHVkZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tRGF0YVNvdXJjZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5ncmlkVGhlbWUgPSAnbWF0ZXJpYWwnO1xuICAgICAgICAgICAgdGhpcy5pc0dyb3VwaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBkYXRhXzEuRGF0YShwYXJlbnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnUGRmRXhwb3J0JztcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5leHBvcnRWYWx1ZUZvcm1hdHRlciA9IG5ldyBleHBvcnRfaGVscGVyXzEuRXhwb3J0VmFsdWVGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIHRoaXMucGRmRG9jdW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmhpZGVDb2x1bW5JbmNsdWRlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICB2YXIgZ09iaiA9IHBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuZ3JpZFRoZW1lID0gJ21hdGVyaWFsJztcbiAgICAgICAgICAgIHRoaXMuaXNHcm91cGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0V4cG9ydGluZyA9IHRydWU7XG4gICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLmJlZm9yZVBkZkV4cG9ydCk7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuTWFwID0gZnVuY3Rpb24gKHBhcmVudCwgcGRmRXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCwgcGRmRG9jKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3IGRhdGFfMS5EYXRhKHRoaXMucGFyZW50KTtcbiAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYgcGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlICE9PSB1bmRlZmluZWQgJiYgcGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlIGluc3RhbmNlb2YgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgZWoyX2RhdGFfMS5EYXRhTWFuYWdlcih7IHVybDogcGRmRXhwb3J0UHJvcGVydGllcy5kYXRhU291cmNlLmRhdGFTb3VyY2UudXJsLCBhZGFwdG9yOiBwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UuYWRhcHRvciB9KS5leGVjdXRlUXVlcnkobmV3IGVqMl9kYXRhXzEuUXVlcnkoKSkudGhlbihmdW5jdGlvbiAocmV0dXJuVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdChwYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBkZkRvYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGRmRG9jdW1lbnQgPSBwZGZEb2M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZGZEb2N1bWVudCA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZkRvY3VtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzRXhwb3J0KHBhcmVudCwgcmV0dXJuVHlwZSwgcGRmRXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc0V4cG9ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnRyaWdnZXIoZXZlbnRzLnBkZkV4cG9ydENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMucGRmRG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YU1hbmFnZXIgPSBfdGhpcy5kYXRhLmdldERhdGEoe30sIF90aGlzLmRhdGEuZ2VuZXJhdGVRdWVyeSh0cnVlKS5yZXF1aXJlc0NvdW50KCkpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhTWFuYWdlci50aGVuKGZ1bmN0aW9uIChyZXR1cm5UeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0KHBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGRmRG9jICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZGZEb2N1bWVudCA9IHBkZkRvYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBkZkRvY3VtZW50ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmRG9jdW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb2Nlc3NFeHBvcnQocGFyZW50LCByZXR1cm5UeXBlLCBwZGZFeHBvcnRQcm9wZXJ0aWVzLCBpc011bHRpcGxlRXhwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzRXhwb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQudHJpZ2dlcihldmVudHMucGRmRXhwb3J0Q29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5wZGZEb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NFeHBvcnQgPSBmdW5jdGlvbiAoZ09iaiwgcmV0dXJuVHlwZSwgcGRmRXhwb3J0UHJvcGVydGllcywgaXNNdWx0aXBsZUV4cG9ydCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBnT2JqLmNvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZGF0YVNvdXJjZSA9IHJldHVyblR5cGUucmVzdWx0O1xuICAgICAgICAgICAgdmFyIHNlY3Rpb24gPSB0aGlzLnBkZkRvY3VtZW50LnNlY3Rpb25zLmFkZCgpO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMucHJvY2Vzc0V4cG9ydFByb3BlcnRpZXMocGRmRXhwb3J0UHJvcGVydGllcywgZGF0YVNvdXJjZSwgc2VjdGlvbik7XG4gICAgICAgICAgICBkYXRhU291cmNlID0gcmVzdWx0LmRhdGFTb3VyY2U7XG4gICAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5Hcm91cEd1aWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNHcm91cGluZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWN0aW9uID0gcmVzdWx0LnNlY3Rpb247XG4gICAgICAgICAgICB2YXIgcGRmUGFnZSA9IHNlY3Rpb24ucGFnZXMuYWRkKCk7XG4gICAgICAgICAgICB2YXIgcGRmR3JpZCA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZkdyaWQoKTtcbiAgICAgICAgICAgIHZhciBoZWFkZXJUaGVtZVN0eWxlID0gdGhpcy5nZXRIZWFkZXJUaGVtZVN0eWxlKCk7XG4gICAgICAgICAgICB2YXIgYm9yZGVyID0gaGVhZGVyVGhlbWVTdHlsZS5ib3JkZXI7XG4gICAgICAgICAgICB2YXIgaGVhZGVyRm9udCA9IGhlYWRlclRoZW1lU3R5bGUuZm9udDtcbiAgICAgICAgICAgIHZhciBoZWFkZXJCcnVzaCA9IGhlYWRlclRoZW1lU3R5bGUuYnJ1c2g7XG4gICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWUgPSAobmV3IGV4cG9ydF9oZWxwZXJfMS5FeHBvcnRIZWxwZXIodGhpcy5wYXJlbnQpKS5nZXRIZWFkZXJzKGNvbHVtbnMsIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUpO1xuICAgICAgICAgICAgdmFyIHJvd3MgPSByZXR1cm5WYWx1ZS5yb3dzO1xuICAgICAgICAgICAgdmFyIGdyaWRDb2x1bW5zID0gcmV0dXJuVmFsdWUuY29sdW1ucztcbiAgICAgICAgICAgIHBkZkdyaWQgPSB0aGlzLnByb2Nlc3NHcmlkSGVhZGVycyhkYXRhU291cmNlLmNoaWxkTGV2ZWxzLCBwZGZHcmlkLCByb3dzLCBncmlkQ29sdW1ucywgYm9yZGVyLCBoZWFkZXJGb250LCBoZWFkZXJCcnVzaCk7XG4gICAgICAgICAgICB0aGlzLnNldENvbHVtblByb3BlcnRpZXMoZ3JpZENvbHVtbnMsIHBkZkdyaWQpO1xuICAgICAgICAgICAgdmFyIGNhcHRpb25UaGVtZVN0eWxlID0gdGhpcy5nZXRTdW1tYXJ5Q2FwdGlvblRoZW1lU3R5bGUoKTtcbiAgICAgICAgICAgIGlmIChkYXRhU291cmNlICE9PSB1bmRlZmluZWQgJiYgZGF0YVNvdXJjZSAhPT0gbnVsbCAmJiBkYXRhU291cmNlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0dyb3VwZWRSZWNvcmRzKHBkZkdyaWQsIGRhdGFTb3VyY2UsIGdyaWRDb2x1bW5zLCBnT2JqLCBib3JkZXIsIDAsIGNhcHRpb25UaGVtZVN0eWxlLmZvbnQsIGNhcHRpb25UaGVtZVN0eWxlLmJydXNoLCBjYXB0aW9uVGhlbWVTdHlsZS5iYWNrZ3JvdW5kQnJ1c2gsIHJldHVyblR5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkKGJvcmRlciwgZ3JpZENvbHVtbnMsIGdPYmosIGRhdGFTb3VyY2UsIHBkZkdyaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmV0dXJuVHlwZS5hZ2dyZWdhdGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1bW1hcnlNb2RlbCA9IG5ldyBzdW1tYXJ5X21vZGVsX2dlbmVyYXRvcl8xLlN1bW1hcnlNb2RlbEdlbmVyYXRvcihnT2JqKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNSb3dzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21EYXRhU291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzUm93cyA9IHN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YVNvdXJjZSwgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmN1cnJlbnRWaWV3RGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBzdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKHRoaXMucGFyZW50LmdldEN1cnJlbnRWaWV3UmVjb3JkcygpLCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNHcm91cGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBzdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2UucmVjb3JkcywgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNSb3dzID0gc3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhyZXR1cm5UeXBlLnJlc3VsdCwgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NBZ2dyZWdhdGVzKHNSb3dzLCBwZGZHcmlkLCBib3JkZXIsIGNhcHRpb25UaGVtZVN0eWxlLmZvbnQsIGNhcHRpb25UaGVtZVN0eWxlLmJydXNoLCBjYXB0aW9uVGhlbWVTdHlsZS5iYWNrZ3JvdW5kQnJ1c2gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gcGRmR3JpZC5yb3dzLmFkZFJvdygpO1xuICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRCb3JkZXIoYm9yZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBkZkdyaWQuZHJhdyhwZGZQYWdlLCAyMCwgMjApO1xuICAgICAgICAgICAgaWYgKCFpc011bHRpcGxlRXhwb3J0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZGZEb2N1bWVudC5zYXZlKCdFeHBvcnQucGRmJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0U3VtbWFyeUNhcHRpb25UaGVtZVN0eWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmdyaWRUaGVtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb3RzdHJhcCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGZvbnQ6IG5ldyBlajJfcGRmX2V4cG9ydF8yLlBkZlN0YW5kYXJkRm9udChlajJfcGRmX2V4cG9ydF8yLlBkZkZvbnRGYW1pbHkuSGVsdmV0aWNhLCAxMC41KSwgYnJ1c2g6IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoNTEsIDUxLCA1MSkpLCBiYWNrZ3JvdW5kQnJ1c2g6IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMjU1LCAyNTUsIDI1NSkpIH07XG4gICAgICAgICAgICAgICAgY2FzZSAnZmFicmljJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZm9udDogbmV3IGVqMl9wZGZfZXhwb3J0XzIuUGRmU3RhbmRhcmRGb250KGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udEZhbWlseS5IZWx2ZXRpY2EsIDEwLjUpLCBicnVzaDogbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcig1MSwgNTEsIDUxKSksIGJhY2tncm91bmRCcnVzaDogbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigyNDYsIDI0NiwgMjQ2KSkgfTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBmb250OiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl9leHBvcnRfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgOS43NSksIGJydXNoOiBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDAsIDAsIDApKSwgYmFja2dyb3VuZEJydXNoOiBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDI0NiwgMjQ2LCAyNDYpKSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldEhlYWRlclRoZW1lU3R5bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYm9yZGVyID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmQm9yZGVycygpO1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmdyaWRUaGVtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb3RzdHJhcCc6XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci5hbGwgPSBuZXcgZWoyX3BkZl9leHBvcnRfMS5QZGZQZW4obmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMjIxLCAyMjEsIDIyMSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBib3JkZXI6IGJvcmRlciwgZm9udDogbmV3IGVqMl9wZGZfZXhwb3J0XzIuUGRmU3RhbmRhcmRGb250KGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udEZhbWlseS5IZWx2ZXRpY2EsIDEwLjUpLCBicnVzaDogbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcig1MSwgNTEsIDUxKSkgfTtcbiAgICAgICAgICAgICAgICBjYXNlICdmYWJyaWMnOlxuICAgICAgICAgICAgICAgICAgICBib3JkZXIuYWxsID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmUGVuKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDIyNCwgMjI0LCAyMjQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYm9yZGVyOiBib3JkZXIsIGZvbnQ6IG5ldyBlajJfcGRmX2V4cG9ydF8yLlBkZlN0YW5kYXJkRm9udChlajJfcGRmX2V4cG9ydF8yLlBkZkZvbnRGYW1pbHkuSGVsdmV0aWNhLCA5KSwgYnJ1c2g6IG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoMCwgMCwgMC41NCkpIH07XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLmFsbCA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigyMzQsIDIzNCwgMjM0KSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGJvcmRlcjogYm9yZGVyLCBmb250OiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZWoyX3BkZl9leHBvcnRfMi5QZGZGb250RmFtaWx5LkhlbHZldGljYSwgMTAuNSksIGJydXNoOiBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDEwMiwgMTAyLCAxMDIpKSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NHcm91cGVkUmVjb3JkcyA9IGZ1bmN0aW9uIChwZGZHcmlkLCBkYXRhU291cmNlLCBncmlkQ29sdW1ucywgZ09iaiwgYm9yZGVyLCBsZXZlbCwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgcmV0dXJuVHlwZSkge1xuICAgICAgICAgICAgdmFyIGdyb3VwSW5kZXggPSBsZXZlbDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZGF0YVNvdXJjZV8xID0gZGF0YVNvdXJjZTsgX2kgPCBkYXRhU291cmNlXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFTb3VyY2VJdGVtcyA9IGRhdGFTb3VyY2VfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHBkZkdyaWQucm93cy5hZGRSb3coKTtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGFTb3VyY2VJdGVtcy5rZXksXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbjogZ09iai5nZXRDb2x1bW5CeUZpZWxkKGRhdGFTb3VyY2VJdGVtcy5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGRhdGFTb3VyY2VJdGVtcy5maWVsZCArICc6ICcgKyB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyLmZvcm1hdENlbGxWYWx1ZShhcmdzKSArICcgLSAnICsgZGF0YVNvdXJjZUl0ZW1zLmNvdW50ICsgKGRhdGFTb3VyY2UuY291bnQgPiAxID8gJyBpdGVtcycgOiAnIGl0ZW0nKTtcbiAgICAgICAgICAgICAgICByb3cuY2VsbHMuZ2V0Q2VsbChncm91cEluZGV4KS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRCb3JkZXIoYm9yZGVyKTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0Rm9udChmb250KTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0VGV4dEJydXNoKGJydXNoKTtcbiAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0QmFja2dyb3VuZEJydXNoKGJhY2tncm91bmRCcnVzaCk7XG4gICAgICAgICAgICAgICAgdmFyIHNSb3dzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBjYXB0aW9uU3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuQ2FwdGlvblN1bW1hcnlNb2RlbEdlbmVyYXRvcihnT2JqKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLnJlY29yZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzUm93cyA9IGNhcHRpb25TdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2VJdGVtcy5pdGVtcy5yZWNvcmRzLCByZXR1cm5UeXBlLmFnZ3JlZ2F0ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBjYXB0aW9uU3VtbWFyeU1vZGVsLmdlbmVyYXRlUm93cyhkYXRhU291cmNlSXRlbXMuaXRlbXMsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzUm93cyAhPT0gdW5kZWZpbmVkICYmIHNSb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByb3cuY2VsbHMuZ2V0Q2VsbChncm91cEluZGV4ICsgMSkuY29sdW1uU3BhbiA9IHBkZkdyaWQuY29sdW1ucy5jb3VudCAtIChncm91cEluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhU291cmNlLmNoaWxkTGV2ZWxzICE9PSB1bmRlZmluZWQgJiYgZGF0YVNvdXJjZS5jaGlsZExldmVscyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCB0cnVlLCByb3csIGdyb3VwSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NHcm91cGVkUmVjb3JkcyhwZGZHcmlkLCBkYXRhU291cmNlSXRlbXMuaXRlbXMsIGdyaWRDb2x1bW5zLCBnT2JqLCBib3JkZXIsIChncm91cEluZGV4ICsgMSksIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIHJldHVyblR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXBTdW1tYXJ5TW9kZWwgPSBuZXcgc3VtbWFyeV9tb2RlbF9nZW5lcmF0b3JfMS5Hcm91cFN1bW1hcnlNb2RlbEdlbmVyYXRvcihnT2JqKTtcbiAgICAgICAgICAgICAgICAgICAgc1Jvd3MgPSBncm91cFN1bW1hcnlNb2RlbC5nZW5lcmF0ZVJvd3MoZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLnJlY29yZHMsIHJldHVyblR5cGUuYWdncmVnYXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0FnZ3JlZ2F0ZXMoc1Jvd3MsIHBkZkdyaWQsIGJvcmRlciwgZm9udCwgYnJ1c2gsIGJhY2tncm91bmRCcnVzaCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCB0cnVlLCByb3csIGdyb3VwSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNvcmQoYm9yZGVyLCBncmlkQ29sdW1ucywgZ09iaiwgZGF0YVNvdXJjZUl0ZW1zLml0ZW1zLCBwZGZHcmlkLCAoZ3JvdXBJbmRleCArIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwU3VtbWFyeU1vZGVsID0gbmV3IHN1bW1hcnlfbW9kZWxfZ2VuZXJhdG9yXzEuR3JvdXBTdW1tYXJ5TW9kZWxHZW5lcmF0b3IoZ09iaik7XG4gICAgICAgICAgICAgICAgICAgIHNSb3dzID0gZ3JvdXBTdW1tYXJ5TW9kZWwuZ2VuZXJhdGVSb3dzKGRhdGFTb3VyY2VJdGVtcy5pdGVtcywgcmV0dXJuVHlwZS5hZ2dyZWdhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQWdncmVnYXRlcyhzUm93cywgcGRmR3JpZCwgYm9yZGVyLCBmb250LCBicnVzaCwgYmFja2dyb3VuZEJydXNoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NHcmlkSGVhZGVycyA9IGZ1bmN0aW9uIChjaGlsZExldmVscywgcGRmR3JpZCwgcm93cywgZ3JpZENvbHVtbnMsIGJvcmRlciwgaGVhZGVyRm9udCwgaGVhZGVyQnJ1c2gpIHtcbiAgICAgICAgICAgIHZhciBjb2x1bW5Db3VudCA9IGdyaWRDb2x1bW5zLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzR3JvdXBpbmcpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5Db3VudCArPSAoY2hpbGRMZXZlbHMgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBkZkdyaWQuY29sdW1ucy5hZGQoY29sdW1uQ291bnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNHcm91cGluZykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKGNoaWxkTGV2ZWxzICsgMSk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBwZGZHcmlkLmNvbHVtbnMuZ2V0Q29sdW1uKGkpLndpZHRoID0gMjA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGRmR3JpZC5oZWFkZXJzLmFkZChyb3dzLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZ3JpZEhlYWRlciA9IHBkZkdyaWQuaGVhZGVycy5nZXRIZWFkZXIoaSk7XG4gICAgICAgICAgICAgICAgZ3JpZEhlYWRlci5zdHlsZS5zZXRCb3JkZXIoYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBncmlkSGVhZGVyLnN0eWxlLnNldEZvbnQoaGVhZGVyRm9udCk7XG4gICAgICAgICAgICAgICAgZ3JpZEhlYWRlci5zdHlsZS5zZXRUZXh0QnJ1c2goaGVhZGVyQnJ1c2gpO1xuICAgICAgICAgICAgICAgIHZhciBjZWxsSW5kZXggPSB0aGlzLmlzR3JvdXBpbmcgPyAoY2hpbGRMZXZlbHMgKyAxKSA6IDA7XG4gICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2VsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZ3JpZEhlYWRlci5jZWxscy5jb3VudDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGdyaWRIZWFkZXIuY2VsbHMuZ2V0Q2VsbChqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjZWxsSW5kZXg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBncmlkSGVhZGVyLmNlbGxzLmdldENlbGwoaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3dzW2ldLmNlbGxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGdyaWRIZWFkZXIuY2VsbHMuZ2V0Q2VsbChjZWxsSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gcm93c1tpXS5jZWxsc1tqXS5jb2x1bW4uaGVhZGVyVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jZWxsc1tqXS5jb2x1bW4uaGVhZGVyVGV4dEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQgPSB0aGlzLmdldEhvcml6b250YWxBbGlnbm1lbnQocm93c1tpXS5jZWxsc1tqXS5jb2x1bW4uaGVhZGVyVGV4dEFsaWduKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3NbaV0uY2VsbHNbal0ucm93U3BhbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwucm93U3BhbiA9IHJvd3NbaV0uY2VsbHNbal0ucm93U3BhbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQgPSB0aGlzLmdldFZlcnRpY2FsQWxpZ25tZW50KCdib3R0b20nLCBjZWxsLnN0eWxlLnN0cmluZ0Zvcm1hdCwgcm93c1tpXS5jZWxsc1tqXS5jb2x1bW4udGV4dEFsaWduKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDE7IGsgPCByb3dzW2ldLmNlbGxzW2pdLnJvd1NwYW47IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5oZWFkZXJzLmdldEhlYWRlcihpICsgaykuY2VsbHMuZ2V0Q2VsbChjZWxsSW5kZXgpLnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93c1tpXS5jZWxsc1tqXS5jb2xTcGFuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2x1bW5TcGFuID0gcm93c1tpXS5jZWxsc1tqXS5jb2xTcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsSW5kZXggKz0gY2VsbC5jb2x1bW5TcGFuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleCArPSBjZWxsLmNvbHVtblNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IGogLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBkZkdyaWQuY29sdW1ucy5jb3VudCA+PSA2KSB7XG4gICAgICAgICAgICAgICAgcGRmR3JpZC5zdHlsZS5hbGxvd0hvcml6b250YWxPdmVyZmxvdyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGRmR3JpZDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5wcm9jZXNzRXhwb3J0UHJvcGVydGllcyA9IGZ1bmN0aW9uIChwZGZFeHBvcnRQcm9wZXJ0aWVzLCBkYXRhU291cmNlLCBzZWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBkZkV4cG9ydFByb3BlcnRpZXMudGhlbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyaWRUaGVtZSA9IHBkZkV4cG9ydFByb3BlcnRpZXMudGhlbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLnBhZ2VPcmllbnRhdGlvbiAhPT0gdW5kZWZpbmVkIHx8IHBkZkV4cG9ydFByb3BlcnRpZXMucGFnZVNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGRmUGFnZVNldHRpbmdzID0gbmV3IGVqMl9wZGZfZXhwb3J0XzYuUGRmUGFnZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHBkZlBhZ2VTZXR0aW5ncy5vcmllbnRhdGlvbiA9IChwZGZFeHBvcnRQcm9wZXJ0aWVzLnBhZ2VPcmllbnRhdGlvbiA9PT0gJ0xhbmRzY2FwZScpID8gZWoyX3BkZl9leHBvcnRfNi5QZGZQYWdlT3JpZW50YXRpb24uTGFuZHNjYXBlIDogZWoyX3BkZl9leHBvcnRfNi5QZGZQYWdlT3JpZW50YXRpb24uUG9ydHJhaXQ7XG4gICAgICAgICAgICAgICAgICAgIHBkZlBhZ2VTZXR0aW5ncy5zaXplID0gdGhpcy5nZXRQYWdlU2l6ZShwZGZFeHBvcnRQcm9wZXJ0aWVzLnBhZ2VTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5zZXRQYWdlU2V0dGluZ3MocGRmUGFnZVNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNsaWVudFNpemUgPSB0aGlzLnBkZkRvY3VtZW50LnBhZ2VTZXR0aW5ncy5zaXplO1xuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmhlYWRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXIgPSBwZGZFeHBvcnRQcm9wZXJ0aWVzLmhlYWRlcjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gbmV3IGVqMl9wZGZfZXhwb3J0XzUuUG9pbnRGKDAsIGhlYWRlci5mcm9tVG9wKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNpemUgPSBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigoY2xpZW50U2l6ZS53aWR0aCAtIDgwKSwgKGhlYWRlci5oZWlnaHQgKiAwLjc1KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgZWoyX3BkZl9leHBvcnRfNC5SZWN0YW5nbGVGKHBvc2l0aW9uLCBzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZGZEb2N1bWVudC50ZW1wbGF0ZS50b3AgPSB0aGlzLmRyYXdQYWdlVGVtcGxhdGUobmV3IGVqMl9wZGZfZXhwb3J0XzQuUGRmUGFnZVRlbXBsYXRlRWxlbWVudChib3VuZHMpLCBoZWFkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5mb290ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9vdGVyID0gcGRmRXhwb3J0UHJvcGVydGllcy5mb290ZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBvaW50RigwLCAoKGNsaWVudFNpemUud2lkdGggLSA4MCkgLSAoZm9vdGVyLmZyb21Cb3R0b20gKiAwLjc1KSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKChjbGllbnRTaXplLndpZHRoIC0gODApLCAoZm9vdGVyLmhlaWdodCAqIDAuNzUpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG5ldyBlajJfcGRmX2V4cG9ydF80LlJlY3RhbmdsZUYocG9zaXRpb24sIHNpemUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBkZkRvY3VtZW50LnRlbXBsYXRlLmJvdHRvbSA9IHRoaXMuZHJhd1BhZ2VUZW1wbGF0ZShuZXcgZWoyX3BkZl9leHBvcnRfNC5QZGZQYWdlVGVtcGxhdGVFbGVtZW50KGJvdW5kcyksIGZvb3Rlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmluY2x1ZGVIaWRkZW5Db2x1bW4gIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5pc0dyb3VwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNvbHVtbkluY2x1ZGUgPSBwZGZFeHBvcnRQcm9wZXJ0aWVzLmluY2x1ZGVIaWRkZW5Db2x1bW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShwZGZFeHBvcnRQcm9wZXJ0aWVzLmRhdGFTb3VyY2UgaW5zdGFuY2VvZiBlajJfZGF0YV8xLkRhdGFNYW5hZ2VyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZSA9IHBkZkV4cG9ydFByb3BlcnRpZXMuZGF0YVNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwZGZFeHBvcnRQcm9wZXJ0aWVzLmV4cG9ydFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGRmRXhwb3J0UHJvcGVydGllcy5leHBvcnRUeXBlID09PSAnY3VycmVudHZpZXcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlID0gdGhpcy5wYXJlbnQuZ2V0Q3VycmVudFZpZXdSZWNvcmRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3RGF0YSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21EYXRhU291cmNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbURhdGFTb3VyY2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UsIHNlY3Rpb246IHNlY3Rpb24gfTtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5kcmF3UGFnZVRlbXBsYXRlID0gZnVuY3Rpb24gKHRlbXBsYXRlLCBlbGVtZW50KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZWxlbWVudC5jb250ZW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NDb250ZW50VmFsaWRhdGlvbihjb250ZW50KTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnZhbHVlID09PSAnJyB8fCBjb250ZW50LnZhbHVlID09PSB1bmRlZmluZWQgfHwgY29udGVudC52YWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgY29udGVudC52YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB0aGUgdmFsaWQgaW5wdXQgdmFsdWUgaW4gdGV4dCBjb250ZW50Li4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdUZXh0KHRlbXBsYXRlLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlTnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1BhZ2VOdW1iZXIodGVtcGxhdGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ltYWdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnNyYyA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQuc3JjID09PSBudWxsIHx8IGNvbnRlbnQuc3JjID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHRoZSB2YWxpZCBiYXNlNjQgc3RyaW5nIGluIGltYWdlIGNvbnRlbnQuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0ltYWdlKHRlbXBsYXRlLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsaW5lJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0xpbmUodGVtcGxhdGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBzZXQgdmFsaWQgY29udGVudCB0eXBlLi4uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NDb250ZW50VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnJyB8fCBjb250ZW50LnR5cGUgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnR5cGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBzZXQgdmFsaWQgY29udGVudCB0eXBlLi4uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnbGluZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzID09PSAnJyB8fCBjb250ZW50LnBvaW50cyA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9pbnRzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCBwb2ludHMgaW4gJyArIGNvbnRlbnQudHlwZSArICcgY29udGVudC4uLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLngxID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueDEgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLngxICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHgxIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLnkxID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueTEgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLnkxICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHkxIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLngyID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueDIgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLngyICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHgyIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucG9pbnRzLnkyID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb2ludHMueTIgPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9pbnRzLnkyICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHkyIGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvaW50cy4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb3NpdGlvbiA9PT0gJycgfHwgY29udGVudC5wb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQucG9zaXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGxlYXNlIGVudGVyIHZhbGlkIHBvc2l0aW9uIGluICcgKyBjb250ZW50LnR5cGUgKyAnIGNvbnRlbnQuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBvc2l0aW9uLnggPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBvc2l0aW9uLnggPT09IG51bGwgfHwgdHlwZW9mIGNvbnRlbnQucG9zaXRpb24ueCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsZWFzZSBlbnRlciB2YWxpZCB4IGNvLW9yZGluYXRlIGluICcgKyBjb250ZW50LnR5cGUgKyAnIHBvc2l0aW9uLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5wb3NpdGlvbi55ID09PSB1bmRlZmluZWQgfHwgY29udGVudC5wb3NpdGlvbi55ID09PSBudWxsIHx8IHR5cGVvZiBjb250ZW50LnBvc2l0aW9uLnkgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2UgZW50ZXIgdmFsaWQgeSBjby1vcmRpbmF0ZSBpbiAnICsgY29udGVudC50eXBlICsgJyBwb3NpdGlvbi4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdUZXh0ID0gZnVuY3Rpb24gKHBhZ2VUZW1wbGF0ZSwgY29udGVudCkge1xuICAgICAgICAgICAgdmFyIGZvbnQgPSB0aGlzLmdldEZvbnQoY29udGVudCk7XG4gICAgICAgICAgICB2YXIgYnJ1c2ggPSB0aGlzLmdldEJydXNoRnJvbUNvbnRlbnQoY29udGVudCk7XG4gICAgICAgICAgICB2YXIgcGVuID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnRleHRQZW5Db2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBlbkNvbG9yID0gdGhpcy5oZXhUb1JnYihjb250ZW50LnN0eWxlLnRleHRQZW5Db2xvcik7XG4gICAgICAgICAgICAgICAgcGVuID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmUGVuKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKHBlbkNvbG9yLnIsIHBlbkNvbG9yLmcsIHBlbkNvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChicnVzaCA9PSBudWxsICYmIHBlbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDAsIDAsIDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbnRlbnQudmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHZhciB4ID0gY29udGVudC5wb3NpdGlvbi54ICogMC43NTtcbiAgICAgICAgICAgIHZhciB5ID0gY29udGVudC5wb3NpdGlvbi55ICogMC43NTtcbiAgICAgICAgICAgIHZhciBmb3JtYXQ7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zZXRDb250ZW50Rm9ybWF0KGNvbnRlbnQsIGZvcm1hdCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ICE9PSBudWxsICYmIHJlc3VsdC5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiByZXN1bHQuc2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcGFnZVRlbXBsYXRlLmdyYXBoaWNzLmRyYXdTdHJpbmcodmFsdWUsIGZvbnQsIHBlbiwgYnJ1c2gsIHgsIHksIHJlc3VsdC5zaXplLndpZHRoLCByZXN1bHQuc2l6ZS5oZWlnaHQsIHJlc3VsdC5mb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFnZVRlbXBsYXRlLmdyYXBoaWNzLmRyYXdTdHJpbmcodmFsdWUsIGZvbnQsIHBlbiwgYnJ1c2gsIHgsIHksIGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZHJhd1BhZ2VOdW1iZXIgPSBmdW5jdGlvbiAoZG9jdW1lbnRIZWFkZXIsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBmb250ID0gdGhpcy5nZXRGb250KGNvbnRlbnQpO1xuICAgICAgICAgICAgdmFyIGJydXNoID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnRleHRCcnVzaENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IoY29udGVudC5zdHlsZS50ZXh0QnJ1c2hDb2xvcik7XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKGJydXNoQ29sb3IuciwgYnJ1c2hDb2xvci5nLCBicnVzaENvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJydXNoID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigwLCAwLCAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGFnZU51bWJlciA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBkZlBhZ2VOdW1iZXJGaWVsZChmb250LCBicnVzaCk7XG4gICAgICAgICAgICBwYWdlTnVtYmVyLm51bWJlclN0eWxlID0gdGhpcy5nZXRQYWdlTnVtYmVyU3R5bGUoY29udGVudC5wYWdlTnVtYmVyVHlwZSk7XG4gICAgICAgICAgICB2YXIgY29tcG9zaXRlRmllbGQ7XG4gICAgICAgICAgICB2YXIgZm9ybWF0O1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQuZm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5mb3JtYXQuaW5kZXhPZignJHRvdGFsJykgIT09IC0xICYmIGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyRjdXJyZW50JykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYWdlQ291bnQgPSBuZXcgZWoyX3BkZl9leHBvcnRfNi5QZGZQYWdlQ291bnRGaWVsZChmb250KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyR0b3RhbCcpID4gY29udGVudC5mb3JtYXQuaW5kZXhPZignJGN1cnJlbnQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gY29udGVudC5mb3JtYXQucmVwbGFjZSgnJGN1cnJlbnQnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoJyR0b3RhbCcsICcxJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBjb250ZW50LmZvcm1hdC5yZXBsYWNlKCckY3VycmVudCcsICcxJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgnJHRvdGFsJywgJzAnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZCA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBkZkNvbXBvc2l0ZUZpZWxkKGZvbnQsIGJydXNoLCBmb3JtYXQsIHBhZ2VOdW1iZXIsIHBhZ2VDb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyRjdXJyZW50JykgIT09IC0xICYmIGNvbnRlbnQuZm9ybWF0LmluZGV4T2YoJyR0b3RhbCcpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBjb250ZW50LmZvcm1hdC5yZXBsYWNlKCckY3VycmVudCcsICcwJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkID0gbmV3IGVqMl9wZGZfZXhwb3J0XzUuUGRmQ29tcG9zaXRlRmllbGQoZm9udCwgYnJ1c2gsIGZvcm1hdCwgcGFnZU51bWJlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFnZUNvdW50ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzYuUGRmUGFnZUNvdW50RmllbGQoZm9udCk7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9IGNvbnRlbnQuZm9ybWF0LnJlcGxhY2UoJyR0b3RhbCcsICcwJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkID0gbmV3IGVqMl9wZGZfZXhwb3J0XzUuUGRmQ29tcG9zaXRlRmllbGQoZm9udCwgYnJ1c2gsIGZvcm1hdCwgcGFnZUNvdW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSAnezB9JztcbiAgICAgICAgICAgICAgICBjb21wb3NpdGVGaWVsZCA9IG5ldyBlajJfcGRmX2V4cG9ydF81LlBkZkNvbXBvc2l0ZUZpZWxkKGZvbnQsIGJydXNoLCBmb3JtYXQsIHBhZ2VOdW1iZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHggPSBjb250ZW50LnBvc2l0aW9uLnggKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHkgPSBjb250ZW50LnBvc2l0aW9uLnkgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuc2V0Q29udGVudEZvcm1hdChjb250ZW50LCBjb21wb3NpdGVGaWVsZC5zdHJpbmdGb3JtYXQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCAmJiByZXN1bHQuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgcmVzdWx0LnNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkLnN0cmluZ0Zvcm1hdCA9IHJlc3VsdC5mb3JtYXQ7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlRmllbGQuYm91bmRzID0gbmV3IGVqMl9wZGZfZXhwb3J0XzQuUmVjdGFuZ2xlRih4LCB5LCByZXN1bHQuc2l6ZS53aWR0aCwgcmVzdWx0LnNpemUuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBvc2l0ZUZpZWxkLmRyYXcoZG9jdW1lbnRIZWFkZXIuZ3JhcGhpY3MsIHgsIHkpO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdJbWFnZSA9IGZ1bmN0aW9uIChkb2N1bWVudEhlYWRlciwgY29udGVudCkge1xuICAgICAgICAgICAgdmFyIHggPSBjb250ZW50LnBvc2l0aW9uLnggKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHkgPSBjb250ZW50LnBvc2l0aW9uLnkgKiAwLjc1O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gKGNvbnRlbnQuc2l6ZSAhPT0gdW5kZWZpbmVkKSA/IChjb250ZW50LnNpemUud2lkdGggKiAwLjc1KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAoY29udGVudC5zaXplICE9PSB1bmRlZmluZWQpID8gKGNvbnRlbnQuc2l6ZS5oZWlnaHQgKiAwLjc1KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHZhciBpbWFnZSA9IG5ldyBlajJfcGRmX2V4cG9ydF8yLlBkZkJpdG1hcChjb250ZW50LnNyYyk7XG4gICAgICAgICAgICBpZiAod2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50SGVhZGVyLmdyYXBoaWNzLmRyYXdJbWFnZShpbWFnZSwgeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudEhlYWRlci5ncmFwaGljcy5kcmF3SW1hZ2UoaW1hZ2UsIHgsIHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmRyYXdMaW5lID0gZnVuY3Rpb24gKGRvY3VtZW50SGVhZGVyLCBjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgeDEgPSBjb250ZW50LnBvaW50cy54MSAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeTEgPSBjb250ZW50LnBvaW50cy55MSAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeDIgPSBjb250ZW50LnBvaW50cy54MiAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgeTIgPSBjb250ZW50LnBvaW50cy55MiAqIDAuNzU7XG4gICAgICAgICAgICB2YXIgcGVuID0gdGhpcy5nZXRQZW5Gcm9tQ29udGVudChjb250ZW50KTtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnBlblNpemUgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLnBlblNpemUgIT09IG51bGwgJiYgdHlwZW9mIGNvbnRlbnQuc3R5bGUucGVuU2l6ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuLndpZHRoID0gY29udGVudC5zdHlsZS5wZW5TaXplICogMC43NTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGVuLmRhc2hTdHlsZSA9IHRoaXMuZ2V0RGFzaFN0eWxlKGNvbnRlbnQuc3R5bGUuZGFzaFN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvY3VtZW50SGVhZGVyLmdyYXBoaWNzLmRyYXdMaW5lKHBlbiwgeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NBZ2dyZWdhdGVzID0gZnVuY3Rpb24gKHNSb3dzLCBwZGZHcmlkLCBib3JkZXIsIGZvbnQsIGJydXNoLCBiYWNrZ3JvdW5kQnJ1c2gsIGlzQ2FwdGlvbiwgY2FwdGlvblJvdywgZ3JvdXBJbmRleCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzUm93c18xID0gc1Jvd3M7IF9pIDwgc1Jvd3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gc1Jvd3NfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHZhciBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXggPSAtMTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHZhciBpc0VtcHR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBkZkdyaWQuY29sdW1ucy5jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gcm93LmNlbGxzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhpZGVDb2x1bW5JbmNsdWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2VsbC52aXNpYmxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FwdGlvblJvdyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKGNhcHRpb25Sb3cuY2VsbHMuZ2V0Q2VsbChpKS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsID0gcm93LmNlbGxzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjZWxsLnZpc2libGUgIT09IHVuZGVmaW5lZCAmJiAhY2VsbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCA9IHJvdy5jZWxsc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuaXNEYXRhQ2VsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlRm4gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLmNvbHVtbi5mb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkIHx8IGNlbGwuY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQgfHwgY2VsbC5jb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZ2V0VGVtcGxhdGVGdW5jdGlvbih0ZW1wbGF0ZUZuLCBpLCBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXgsIGNlbGwuY29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuID0gcmVzdWx0LnRlbXBsYXRlRnVuY3Rpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID0gcmVzdWx0LmxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHh0ID0gKHRlbXBsYXRlRm5bZWoyX2Jhc2VfMS5nZXRFbnVtVmFsdWUoZW51bV8xLkNlbGxUeXBlLCBjZWxsLmNlbGxUeXBlKV0ocm93LmRhdGFbY2VsbC5jb2x1bW4uZmllbGRdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCh0eHRbMF0ud2hvbGVUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5nZXRTdW1tYXJ5V2l0aG91dFRlbXBsYXRlKHJvdy5kYXRhW2NlbGwuY29sdW1uLmZpZWxkXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFbXB0eSAmJiB2YWx1ZVtpXSAhPT0gJycgJiYgdmFsdWVbaV0gIT09IHVuZGVmaW5lZCAmJiB2YWx1ZVtpXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ2FwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyaWRSb3cgPSBwZGZHcmlkLnJvd3MuYWRkUm93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkUm93LnN0eWxlLnNldEJvcmRlcihib3JkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRGb250KGZvbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRUZXh0QnJ1c2goYnJ1c2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZFJvdy5zdHlsZS5zZXRCYWNrZ3JvdW5kQnJ1c2goYmFja2dyb3VuZEJydXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGRmR3JpZC5jb2x1bW5zLmNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkUm93LmNlbGxzLmdldENlbGwoaSkudmFsdWUgPSB2YWx1ZVtpXS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZGZHcmlkLmNvbHVtbnMuY291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHRpb25Sb3cuY2VsbHMuZ2V0Q2VsbChpKS52YWx1ZSA9IHZhbHVlW2ldLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IChncm91cEluZGV4ICsgMSkgJiYgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkuY29sdW1uU3BhbiA9IGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCAtIChncm91cEluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgPT09IChncm91cEluZGV4ICsgMSkgJiYgbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uUm93LmNlbGxzLmdldENlbGwoaSkuY29sdW1uU3BhbiA9IHBkZkdyaWQuY29sdW1ucy5jb3VudCAtIChncm91cEluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFRlbXBsYXRlRnVuY3Rpb24gPSBmdW5jdGlvbiAodGVtcGxhdGVGbiwgaW5kZXgsIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleCwgY29sdW1uKSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uLmZvb3RlclRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLlN1bW1hcnkpXSA9IGVqMl9iYXNlXzEuY29tcGlsZShjb2x1bW4uZm9vdGVyVGVtcGxhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29sdW1uLmdyb3VwQ2FwdGlvblRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAobGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsZWFzdENhcHRpb25TdW1tYXJ5SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVGbltlajJfYmFzZV8xLmdldEVudW1WYWx1ZShlbnVtXzEuQ2VsbFR5cGUsIGVudW1fMS5DZWxsVHlwZS5DYXB0aW9uU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKGNvbHVtbi5ncm91cENhcHRpb25UZW1wbGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuW2VqMl9iYXNlXzEuZ2V0RW51bVZhbHVlKGVudW1fMS5DZWxsVHlwZSwgZW51bV8xLkNlbGxUeXBlLkdyb3VwU3VtbWFyeSldID0gZWoyX2Jhc2VfMS5jb21waWxlKGNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHRlbXBsYXRlRnVuY3Rpb246IHRlbXBsYXRlRm4sIGxlYXN0Q2FwdGlvblN1bW1hcnlJbmRleDogbGVhc3RDYXB0aW9uU3VtbWFyeUluZGV4IH07XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0U3VtbWFyeVdpdGhvdXRUZW1wbGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5zdW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLnN1bTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuYXZlcmFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuYXZlcmFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEubWF4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5tYXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLm1pbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubWluO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5jb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuY291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLnRydWVjb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEudHJ1ZWNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5mYWxzZWNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5mYWxzZWNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5jdXN0b20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmN1c3RvbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5zZXRDb2x1bW5Qcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGdyaWRDb2x1bW5zLCBwZGZHcmlkKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IHRoaXMuaXNHcm91cGluZyA/IChwZGZHcmlkLmNvbHVtbnMuY291bnQgLSBncmlkQ29sdW1ucy5sZW5ndGgpIDogMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JpZENvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ3JpZENvbHVtbnNbaV0udGV4dEFsaWduICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5jb2x1bW5zLmdldENvbHVtbihpICsgc3RhcnRJbmRleCkuZm9ybWF0ID0gdGhpcy5nZXRIb3Jpem9udGFsQWxpZ25tZW50KGdyaWRDb2x1bW5zW2ldLnRleHRBbGlnbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwZGZHcmlkLnN0eWxlLmFsbG93SG9yaXpvbnRhbE92ZXJmbG93ICYmIGdyaWRDb2x1bW5zW2ldLndpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGRmR3JpZC5jb2x1bW5zLmdldENvbHVtbihpICsgc3RhcnRJbmRleCkud2lkdGggPSAoZ3JpZENvbHVtbnNbaV0ud2lkdGggKiAwLjc1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuc2V0UmVjb3JkVGhlbWVTdHlsZSA9IGZ1bmN0aW9uIChyb3csIGJvcmRlcikge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmdyaWRUaGVtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb3RzdHJhcCc6XG4gICAgICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5zZXRUZXh0QnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcig1MSwgNTEsIDUxKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmYWJyaWMnOlxuICAgICAgICAgICAgICAgICAgICByb3cuc3R5bGUuc2V0VGV4dEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZlNvbGlkQnJ1c2gobmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmQ29sb3IoNTEsIDUxLCA1MSkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcm93LnN0eWxlLnNldFRleHRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDAsIDAsIDApKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3cuc3R5bGUuc2V0Qm9yZGVyKGJvcmRlcik7XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NSZWNvcmQgPSBmdW5jdGlvbiAoYm9yZGVyLCBjb2x1bW5zLCBnT2JqLCBkYXRhU291cmNlLCBwZGZHcmlkLCBncm91cEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IHRoaXMuaXNHcm91cGluZyA/IGdyb3VwSW5kZXggOiAwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGRhdGFTb3VyY2U7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBncmlkUm93ID0gdGhpcy5zZXRSZWNvcmRUaGVtZVN0eWxlKHBkZkdyaWQucm93cy5hZGRSb3coKSwgYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvbHVtbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gaXRlbXNbY29sdW1uc1tqXS5maWVsZF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW5zW2pdLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBnT2JqLnRyaWdnZXIoZXZlbnRzLnBkZlF1ZXJ5Q2VsbEluZm8sIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGdyaWRSb3cuY2VsbHMuZ2V0Q2VsbChqICsgc3RhcnRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSB0aGlzLmV4cG9ydFZhbHVlRm9ybWF0dGVyLmZvcm1hdENlbGxWYWx1ZShhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQ2VsbFN0eWxlKGNlbGwsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnByb2Nlc3NDZWxsU3R5bGUgPSBmdW5jdGlvbiAoY2VsbCwgYXJncykge1xuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUuYmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYmFja0NvbG9yID0gdGhpcy5oZXhUb1JnYihhcmdzLnN0eWxlLmJhY2tncm91bmRDb2xvcik7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQnJ1c2ggPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKGJhY2tDb2xvci5yLCBiYWNrQ29sb3IuZywgYmFja0NvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLnRleHRBbGlnbm1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuc3RyaW5nRm9ybWF0ID0gdGhpcy5nZXRIb3Jpem9udGFsQWxpZ25tZW50KGFyZ3Muc3R5bGUudGV4dEFsaWdubWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS52ZXJ0aWNhbEFsaWdubWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5zdHJpbmdGb3JtYXQgPSB0aGlzLmdldFZlcnRpY2FsQWxpZ25tZW50KGFyZ3Muc3R5bGUudmVydGljYWxBbGlnbm1lbnQsIGNlbGwuc3R5bGUuc3RyaW5nRm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLnRleHRCcnVzaENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dEJydXNoQ29sb3IgPSB0aGlzLmhleFRvUmdiKGFyZ3Muc3R5bGUudGV4dEJydXNoQ29sb3IpO1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUudGV4dEJydXNoID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU29saWRCcnVzaChuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcih0ZXh0QnJ1c2hDb2xvci5yLCB0ZXh0QnJ1c2hDb2xvci5nLCB0ZXh0QnJ1c2hDb2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS50ZXh0UGVuQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUudGV4dFBlbiA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihhcmdzLnN0eWxlLnRleHRQZW5Db2xvci5yLCBhcmdzLnN0eWxlLnRleHRQZW5Db2xvci5nLCBhcmdzLnN0eWxlLnRleHRQZW5Db2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJncy5zdHlsZS5mb250RmFtaWx5ICE9PSB1bmRlZmluZWQgfHwgYXJncy5zdHlsZS5mb250U2l6ZSAhPT0gdW5kZWZpbmVkIHx8IGFyZ3Muc3R5bGUuYm9sZCAhPT0gdW5kZWZpbmVkIHx8IGFyZ3Muc3R5bGUuaXRhbGljICE9PSB1bmRlZmluZWQgfHwgYXJncy5zdHlsZS51bmRlcmxpbmUgIT09IHVuZGVmaW5lZCB8fCBhcmdzLnN0eWxlLnN0cmlrZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5mb250ID0gdGhpcy5nZXRGb250KGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFyZ3Muc3R5bGUuYm9yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYm9yZGVyID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmQm9yZGVycygpO1xuICAgICAgICAgICAgICAgIHZhciBib3JkZXJXaWR0aCA9IGFyZ3Muc3R5bGUuYm9yZGVyLndpZHRoO1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IChib3JkZXJXaWR0aCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBib3JkZXJXaWR0aCA9PT0gJ251bWJlcicpID8gKGJvcmRlcldpZHRoICogMC43NSkgOiAodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcigxOTYsIDE5NiwgMTk2KTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5zdHlsZS5ib3JkZXIuY29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYm9yZGVyQ29sb3IgPSB0aGlzLmhleFRvUmdiKGFyZ3Muc3R5bGUuYm9yZGVyLmNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihib3JkZXJDb2xvci5yLCBib3JkZXJDb2xvci5nLCBib3JkZXJDb2xvci5iKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBlbiA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihjb2xvciwgd2lkdGgpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLnN0eWxlLmJvcmRlci5kYXNoU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBwZW4uZGFzaFN0eWxlID0gdGhpcy5nZXREYXNoU3R5bGUoYXJncy5zdHlsZS5ib3JkZXIuZGFzaFN0eWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYm9yZGVyLmFsbCA9IHBlbjtcbiAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmJvcmRlcnMgPSBib3JkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0SG9yaXpvbnRhbEFsaWdubWVudCA9IGZ1bmN0aW9uICh0ZXh0QWxpZ24sIGZvcm1hdCkge1xuICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU3RyaW5nRm9ybWF0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKHRleHRBbGlnbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5SaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5DZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2p1c3RpZnknOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50Lkp1c3RpZnk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50LkxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRWZXJ0aWNhbEFsaWdubWVudCA9IGZ1bmN0aW9uICh2ZXJ0aWNhbEFsaWduLCBmb3JtYXQsIHRleHRBbGlnbikge1xuICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gbmV3IGVqMl9wZGZfZXhwb3J0XzMuUGRmU3RyaW5nRm9ybWF0KCk7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gdGhpcy5nZXRIb3Jpem9udGFsQWxpZ25tZW50KHRleHRBbGlnbiwgZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAodmVydGljYWxBbGlnbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5saW5lQWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfNC5QZGZWZXJ0aWNhbEFsaWdubWVudC5Cb3R0b207XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21pZGRsZSc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5saW5lQWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfNC5QZGZWZXJ0aWNhbEFsaWdubWVudC5NaWRkbGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdC5saW5lQWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfNC5QZGZWZXJ0aWNhbEFsaWdubWVudC5Ub3A7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRGb250RmFtaWx5ID0gZnVuY3Rpb24gKGZvbnRGYW1pbHkpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZm9udEZhbWlseSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ1RpbWVzUm9tYW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgICAgICBjYXNlICdDb3VyaWVyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgY2FzZSAnU3ltYm9sJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgICAgICAgICAgY2FzZSAnWmFwZkRpbmdiYXRzJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0Rm9udCA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgZm9udFNpemUgPSAoY29udGVudC5zdHlsZS5mb250U2l6ZSAhPT0gdW5kZWZpbmVkKSA/IChjb250ZW50LnN0eWxlLmZvbnRTaXplICogMC43NSkgOiA5Ljc1O1xuICAgICAgICAgICAgdmFyIGZvbnRGYW1pbHkgPSAoY29udGVudC5zdHlsZS5mb250RmFtaWx5ICE9PSB1bmRlZmluZWQpID8gKHRoaXMuZ2V0Rm9udEZhbWlseShjb250ZW50LnN0eWxlLmZvbnRGYW1pbHkpKSA6IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udEZhbWlseS5IZWx2ZXRpY2E7XG4gICAgICAgICAgICB2YXIgZm9udFN0eWxlID0gZWoyX3BkZl9leHBvcnRfMi5QZGZGb250U3R5bGUuUmVndWxhcjtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLmJvbGQgIT09IHVuZGVmaW5lZCAmJiBjb250ZW50LnN0eWxlLmJvbGQpIHtcbiAgICAgICAgICAgICAgICBmb250U3R5bGUgfD0gZWoyX3BkZl9leHBvcnRfMi5QZGZGb250U3R5bGUuQm9sZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLml0YWxpYyAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUuaXRhbGljKSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udFN0eWxlLkl0YWxpYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnVuZGVybGluZSAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUudW5kZXJsaW5lKSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udFN0eWxlLlVuZGVybGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnN0cmlrZW91dCAhPT0gdW5kZWZpbmVkICYmIGNvbnRlbnQuc3R5bGUuc3RyaWtlb3V0KSB7XG4gICAgICAgICAgICAgICAgZm9udFN0eWxlIHw9IGVqMl9wZGZfZXhwb3J0XzIuUGRmRm9udFN0eWxlLlN0cmlrZW91dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfMi5QZGZTdGFuZGFyZEZvbnQoZm9udEZhbWlseSwgZm9udFNpemUsIGZvbnRTdHlsZSk7XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0UGFnZU51bWJlclN0eWxlID0gZnVuY3Rpb24gKHBhZ2VOdW1iZXJUeXBlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHBhZ2VOdW1iZXJUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnTG93ZXJMYXRpbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0xvd2VyUm9tYW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMztcbiAgICAgICAgICAgICAgICBjYXNlICdVcHBlckxhdGluJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICAgICAgY2FzZSAnVXBwZXJSb21hbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA1O1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLnNldENvbnRlbnRGb3JtYXQgPSBmdW5jdGlvbiAoY29udGVudCwgZm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAoY29udGVudC5zaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBjb250ZW50LnNpemUud2lkdGggKiAwLjc1O1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBjb250ZW50LnNpemUuaGVpZ2h0ICogMC43NTtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTdHJpbmdGb3JtYXQoZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50LkxlZnQsIGVqMl9wZGZfZXhwb3J0XzQuUGRmVmVydGljYWxBbGlnbm1lbnQuTWlkZGxlKTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS5oQWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnRlbnQuc3R5bGUuaEFsaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5SaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0LmFsaWdubWVudCA9IGVqMl9wZGZfZXhwb3J0XzMuUGRmVGV4dEFsaWdubWVudC5DZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdqdXN0aWZ5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQuYWxpZ25tZW50ID0gZWoyX3BkZl9leHBvcnRfMy5QZGZUZXh0QWxpZ25tZW50Lkp1c3RpZnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdC5hbGlnbm1lbnQgPSBlajJfcGRmX2V4cG9ydF8zLlBkZlRleHRBbGlnbm1lbnQuTGVmdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5zdHlsZS52QWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSB0aGlzLmdldFZlcnRpY2FsQWxpZ25tZW50KGNvbnRlbnQuc3R5bGUudkFsaWduLCBmb3JtYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBmb3JtYXQ6IGZvcm1hdCwgc2l6ZTogbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYod2lkdGgsIGhlaWdodCkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldFBhZ2VTaXplID0gZnVuY3Rpb24gKHBhZ2VTaXplKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHBhZ2VTaXplKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnTGV0dGVyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDYxMiwgNzkyKTtcbiAgICAgICAgICAgICAgICBjYXNlICdOb3RlJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDU0MCwgNzIwKTtcbiAgICAgICAgICAgICAgICBjYXNlICdMZWdhbCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig2MTIsIDEwMDgpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0EwJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDIzODAsIDMzNjgpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0ExJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDE2ODQsIDIzODApO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0EyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDExOTAsIDE2ODQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0EzJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDg0MiwgMTE5MCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQTUnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoNDIxLCA1OTUpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0E2JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDI5NywgNDIxKTtcbiAgICAgICAgICAgICAgICBjYXNlICdBNyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyMTAsIDI5Nyk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQTgnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoMTQ4LCAyMTApO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0E5JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDEwNSwgMTQ4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdCMCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyODM2LCA0MDA4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdCMSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyMDA0LCAyODM2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdCMic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxNDE4LCAyMDA0KTtcbiAgICAgICAgICAgICAgICBjYXNlICdCMyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxMDAyLCAxNDE4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdCNCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig3MDksIDEwMDIpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0I1JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDUwMSwgNzA5KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBcmNoQSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig2NDgsIDg2NCk7XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJjaEInOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVqMl9wZGZfZXhwb3J0XzYuU2l6ZUYoODY0LCAxMjk2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBcmNoQyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxMjk2LCAxNzI4KTtcbiAgICAgICAgICAgICAgICBjYXNlICdBcmNoRCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxNzI4LCAyNTkyKTtcbiAgICAgICAgICAgICAgICBjYXNlICdBcmNoRSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigyNTkyLCAzNDU2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdGbHNhJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDYxMiwgOTM2KTtcbiAgICAgICAgICAgICAgICBjYXNlICdIYWxmTGV0dGVyJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlajJfcGRmX2V4cG9ydF82LlNpemVGKDM5NiwgNjEyKTtcbiAgICAgICAgICAgICAgICBjYXNlICdMZXR0ZXIxMXgxNyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig3OTIsIDEyMjQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0xlZGdlcic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRigxMjI0LCA3OTIpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWoyX3BkZl9leHBvcnRfNi5TaXplRig1OTUsIDg0Mik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZ2V0RGFzaFN0eWxlID0gZnVuY3Rpb24gKGRhc2hTdHlsZSkge1xuICAgICAgICAgICAgc3dpdGNoIChkYXNoU3R5bGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdEYXNoJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgY2FzZSAnRG90JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICAgICAgY2FzZSAnRGFzaERvdCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0Rhc2hEb3REb3QnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5nZXRQZW5Gcm9tQ29udGVudCA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgcGVuID0gbmV3IGVqMl9wZGZfZXhwb3J0XzEuUGRmUGVuKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKDAsIDAsIDApKTtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlICE9PSB1bmRlZmluZWQgJiYgY29udGVudC5zdHlsZSAhPT0gbnVsbCAmJiBjb250ZW50LnN0eWxlLnBlbkNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGVuQ29sb3IgPSB0aGlzLmhleFRvUmdiKGNvbnRlbnQuc3R5bGUucGVuQ29sb3IpO1xuICAgICAgICAgICAgICAgIHBlbiA9IG5ldyBlajJfcGRmX2V4cG9ydF8xLlBkZlBlbihuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZDb2xvcihwZW5Db2xvci5yLCBwZW5Db2xvci5nLCBwZW5Db2xvci5iKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGVuO1xuICAgICAgICB9O1xuICAgICAgICBQZGZFeHBvcnQucHJvdG90eXBlLmdldEJydXNoRnJvbUNvbnRlbnQgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAgICAgdmFyIGJydXNoID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0eWxlLnRleHRCcnVzaENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnJ1c2hDb2xvciA9IHRoaXMuaGV4VG9SZ2IoY29udGVudC5zdHlsZS50ZXh0QnJ1c2hDb2xvcik7XG4gICAgICAgICAgICAgICAgYnJ1c2ggPSBuZXcgZWoyX3BkZl9leHBvcnRfMy5QZGZTb2xpZEJydXNoKG5ldyBlajJfcGRmX2V4cG9ydF8zLlBkZkNvbG9yKGJydXNoQ29sb3IuciwgYnJ1c2hDb2xvci5nLCBicnVzaENvbG9yLmIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBicnVzaDtcbiAgICAgICAgfTtcbiAgICAgICAgUGRmRXhwb3J0LnByb3RvdHlwZS5oZXhUb1JnYiA9IGZ1bmN0aW9uIChoZXgpIHtcbiAgICAgICAgICAgIGlmIChoZXggPT09IG51bGwgfHwgaGV4ID09PSAnJyB8fCBoZXgubGVuZ3RoICE9PSA3KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwbGVhc2Ugc2V0IHZhbGlkIGhleCB2YWx1ZSBmb3IgY29sb3IuLi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhleCA9IGhleC5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICB2YXIgYmlnaW50ID0gcGFyc2VJbnQoaGV4LCAxNik7XG4gICAgICAgICAgICB2YXIgciA9IChiaWdpbnQgPj4gMTYpICYgMjU1O1xuICAgICAgICAgICAgdmFyIGcgPSAoYmlnaW50ID4+IDgpICYgMjU1O1xuICAgICAgICAgICAgdmFyIGIgPSBiaWdpbnQgJiAyNTU7XG4gICAgICAgICAgICByZXR1cm4geyByOiByLCBnOiBnLCBiOiBiIH07XG4gICAgICAgIH07XG4gICAgICAgIFBkZkV4cG9ydC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBkZkV4cG9ydDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUGRmRXhwb3J0ID0gUGRmRXhwb3J0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL2FjdGlvbnMvcGRmLWV4cG9ydC5qc1xuLy8gbW9kdWxlIGlkID0gODdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzg4X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItcGRmLWV4cG9ydFwiXG4vLyBtb2R1bGUgaWQgPSA4OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL21vZGVscy9jb2x1bW5cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBjb2x1bW5fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoY29sdW1uXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL21vZGVscy5qc1xuLy8gbW9kdWxlIGlkID0gODlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9yZW5kZXJlci9oZWFkZXItcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2NvbnRlbnQtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL3Jvdy1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvY2VsbC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvaGVhZGVyLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2ZpbHRlci1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9zdGFja2VkLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL3JlbmRlclwiLCBcIi4vcmVuZGVyZXIvZmlsdGVyLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2luZGVudC1jZWxsLXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9jYXB0aW9uLWNlbGwtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2JhdGNoLWVkaXQtcmVuZGVyZXJcIiwgXCIuL3JlbmRlcmVyL2RpYWxvZy1lZGl0LXJlbmRlcmVyXCIsIFwiLi9yZW5kZXJlci9pbmxpbmUtZWRpdC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvZWRpdC1yZW5kZXJlclwiLCBcIi4vcmVuZGVyZXIvYm9vbGVhbi1lZGl0LWNlbGxcIiwgXCIuL3JlbmRlcmVyL2RlZmF1bHQtZWRpdC1jZWxsXCIsIFwiLi9yZW5kZXJlci9kcm9wZG93bi1lZGl0LWNlbGxcIiwgXCIuL3JlbmRlcmVyL251bWVyaWMtZWRpdC1jZWxsXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVhZGVyX3JlbmRlcmVyXzEsIGNvbnRlbnRfcmVuZGVyZXJfMSwgcm93X3JlbmRlcmVyXzEsIGNlbGxfcmVuZGVyZXJfMSwgaGVhZGVyX2NlbGxfcmVuZGVyZXJfMSwgZmlsdGVyX2NlbGxfcmVuZGVyZXJfMSwgc3RhY2tlZF9jZWxsX3JlbmRlcmVyXzEsIHJlbmRlcl8xLCBmaWx0ZXJfY2VsbF9yZW5kZXJlcl8yLCBpbmRlbnRfY2VsbF9yZW5kZXJlcl8xLCBjYXB0aW9uX2NlbGxfcmVuZGVyZXJfMSwgYmF0Y2hfZWRpdF9yZW5kZXJlcl8xLCBkaWFsb2dfZWRpdF9yZW5kZXJlcl8xLCBpbmxpbmVfZWRpdF9yZW5kZXJlcl8xLCBlZGl0X3JlbmRlcmVyXzEsIGJvb2xlYW5fZWRpdF9jZWxsXzEsIGRlZmF1bHRfZWRpdF9jZWxsXzEsIGRyb3Bkb3duX2VkaXRfY2VsbF8xLCBudW1lcmljX2VkaXRfY2VsbF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChoZWFkZXJfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoY29udGVudF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChyb3dfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChoZWFkZXJfY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChmaWx0ZXJfY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChzdGFja2VkX2NlbGxfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQocmVuZGVyXzEpO1xuICAgIF9fZXhwb3J0KGZpbHRlcl9jZWxsX3JlbmRlcmVyXzIpO1xuICAgIF9fZXhwb3J0KGluZGVudF9jZWxsX3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGNhcHRpb25fY2VsbF9yZW5kZXJlcl8xKTtcbiAgICBfX2V4cG9ydChiYXRjaF9lZGl0X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGRpYWxvZ19lZGl0X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGlubGluZV9lZGl0X3JlbmRlcmVyXzEpO1xuICAgIF9fZXhwb3J0KGVkaXRfcmVuZGVyZXJfMSk7XG4gICAgX19leHBvcnQoYm9vbGVhbl9lZGl0X2NlbGxfMSk7XG4gICAgX19leHBvcnQoZGVmYXVsdF9lZGl0X2NlbGxfMSk7XG4gICAgX19leHBvcnQoZHJvcGRvd25fZWRpdF9jZWxsXzEpO1xuICAgIF9fZXhwb3J0KG51bWVyaWNfZWRpdF9jZWxsXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ncmlkL3JlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL3NlcnZpY2VzL2NlbGwtcmVuZGVyLWZhY3RvcnlcIiwgXCIuL3NlcnZpY2VzL3NlcnZpY2UtbG9jYXRvclwiLCBcIi4vc2VydmljZXMvcm93LW1vZGVsLWdlbmVyYXRvclwiLCBcIi4vc2VydmljZXMvZ3JvdXAtbW9kZWwtZ2VuZXJhdG9yXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY2VsbF9yZW5kZXJfZmFjdG9yeV8xLCBzZXJ2aWNlX2xvY2F0b3JfMSwgcm93X21vZGVsX2dlbmVyYXRvcl8xLCBncm91cF9tb2RlbF9nZW5lcmF0b3JfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgX19leHBvcnQoY2VsbF9yZW5kZXJfZmFjdG9yeV8xKTtcbiAgICBfX2V4cG9ydChzZXJ2aWNlX2xvY2F0b3JfMSk7XG4gICAgX19leHBvcnQocm93X21vZGVsX2dlbmVyYXRvcl8xKTtcbiAgICBfX2V4cG9ydChncm91cF9tb2RlbF9nZW5lcmF0b3JfMSk7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyaWQvc2VydmljZXMuanNcbi8vIG1vZHVsZSBpZCA9IDkxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vcGFnZXJcIiwgXCIuL2V4dGVybmFsLW1lc3NhZ2VcIiwgXCIuL251bWVyaWMtY29udGFpbmVyXCIsIFwiLi9wYWdlci1tZXNzYWdlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgcGFnZXJfMSwgZXh0ZXJuYWxfbWVzc2FnZV8xLCBudW1lcmljX2NvbnRhaW5lcl8xLCBwYWdlcl9tZXNzYWdlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIF9fZXhwb3J0KHBhZ2VyXzEpO1xuICAgIF9fZXhwb3J0KGV4dGVybmFsX21lc3NhZ2VfMSk7XG4gICAgX19leHBvcnQobnVtZXJpY19jb250YWluZXJfMSk7XG4gICAgX19leHBvcnQocGFnZXJfbWVzc2FnZV8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGFnZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDkyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0="]}