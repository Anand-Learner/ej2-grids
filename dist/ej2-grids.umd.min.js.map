{"version":3,"file":"ej2-grids.umd.min.js","sources":["src/es5/grid/base/util.js","src/es5/grid/services/aria-service.js","src/es5/grid/actions/aggregate.js","src/es5/grid/services/value-formatter.js","src/es5/grid/models/column.js","src/es5/grid/base/constant.js","src/es5/grid/base/enum.js","src/es5/grid/actions/checkbox-filter.js","src/es5/grid/actions/data.js","src/es5/grid/models/row.js","src/es5/grid/models/cell.js","src/es5/grid/renderer/cell-merge-renderer.js","src/es5/grid/renderer/row-renderer.js","src/es5/grid/services/row-model-generator.js","src/es5/grid/services/summary-model-generator.js","src/es5/grid/services/group-model-generator.js","src/es5/grid/renderer/content-renderer.js","src/es5/grid/renderer/header-renderer.js","src/es5/grid/renderer/cell-renderer.js","src/es5/grid/renderer/header-cell-renderer.js","src/es5/grid/renderer/stacked-cell-renderer.js","src/es5/grid/renderer/indent-cell-renderer.js","src/es5/grid/renderer/caption-cell-renderer.js","src/es5/grid/renderer/expand-cell-renderer.js","src/es5/grid/renderer/header-indent-renderer.js","src/es5/grid/renderer/detail-header-indent-renderer.js","src/es5/grid/renderer/detail-expand-cell-renderer.js","src/es5/grid/renderer/render.js","src/es5/grid/services/cell-render-factory.js","src/es5/grid/services/service-locator.js","src/es5/grid/services/renderer-factory.js","src/es5/grid/services/width-controller.js","src/es5/grid/services/focus-strategy.js","src/es5/grid/models/page-settings.js","src/es5/grid/actions/selection.js","src/es5/grid/actions/search.js","src/es5/grid/actions/show-hide.js","src/es5/grid/actions/scroll.js","src/es5/grid/actions/print.js","src/es5/grid/models/aggregate.js","src/es5/grid/actions/clipboard.js","src/es5/grid/base/grid.js","src/es5/grid/actions/sort.js","src/es5/pager/numeric-container.js","src/es5/pager/pager-message.js","src/es5/pager/pager.js","src/es5/pager/pager-dropdown.js","src/es5/pager/external-message.js","src/es5/grid/actions/page.js","src/es5/grid/renderer/filter-cell-renderer.js","src/es5/grid/renderer/filter-menu-operator.js","src/es5/grid/renderer/string-filter-ui.js","src/es5/grid/renderer/number-filter-ui.js","src/es5/grid/renderer/boolean-filter-ui.js","src/es5/grid/renderer/date-filter-ui.js","src/es5/grid/renderer/filter-menu-renderer.js","src/es5/grid/actions/excel-filter.js","src/es5/grid/actions/filter.js","src/es5/grid/actions/resize.js","src/es5/grid/actions/reorder.js","src/es5/grid/actions/row-reorder.js","src/es5/grid/actions/group.js","src/es5/grid/actions/detail-row.js","src/es5/grid/actions/toolbar.js","src/es5/grid/renderer/footer-renderer.js","src/es5/grid/renderer/summary-cell-renderer.js","src/es5/grid/services/intersection-observer.js","src/es5/grid/services/virtual-row-model-generator.js","src/es5/grid/renderer/virtual-content-renderer.js","src/es5/grid/actions/virtual-scroll.js","src/es5/grid/renderer/inline-edit-renderer.js","src/es5/grid/renderer/batch-edit-renderer.js","src/es5/grid/renderer/dialog-edit-renderer.js","src/es5/grid/renderer/edit-renderer.js","src/es5/grid/renderer/boolean-edit-cell.js","src/es5/grid/renderer/dropdown-edit-cell.js","src/es5/grid/renderer/numeric-edit-cell.js","src/es5/grid/renderer/default-edit-cell.js","src/es5/grid/actions/normal-edit.js","src/es5/grid/actions/inline-edit.js","src/es5/grid/actions/batch-edit.js","src/es5/grid/actions/dialog-edit.js","src/es5/grid/renderer/datepicker-edit-cell.js","src/es5/grid/actions/edit.js","src/es5/grid/actions/column-chooser.js","src/es5/grid/actions/export-helper.js","src/es5/grid/actions/excel-export.js","src/es5/grid/actions/pdf-export.js","src/es5/grid/renderer/command-column-renderer.js","src/es5/grid/actions/command-column.js","src/es5/grid/actions/context-menu.js","src/es5/grid/services/freeze-row-model-generator.js","src/es5/grid/renderer/freeze-renderer.js","src/es5/grid/actions/freeze.js","src/es5/grid/actions/column-menu.js","src/es5/grid/actions/foreign-key.js"],"sourcesContent":["import { ChildProperty, compile as baseTemplateComplier, setValue } from '@syncfusion/ej2-base';\nimport { extend as baseExtend, isNullOrUndefined, getValue, classList } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, addClass, attributes, remove, createElement, removeClass } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Column } from '../models/column';\nimport { calculateRelativeBasedPosition, calculatePosition } from '@syncfusion/ej2-popups';\n//https://typescript.codeplex.com/discussions/401501\n/**\n * Function to check whether target object implement specific interface\n * @param  {Object} target\n * @param  {string} checkFor\n * @returns no\n * @hidden\n */\nexport function doesImplementInterface(target, checkFor) {\n    /* tslint:disable:no-any */\n    return target.prototype && checkFor in target.prototype;\n}\n/**\n * Function to get value from provided data\n * @param  {string} field\n * @param  {Object} data\n * @param  {IColumn} column\n * @hidden\n */\nexport function valueAccessor(field, data, column) {\n    field = isNullOrUndefined(field) ? '' : field;\n    return getValue(field, data);\n}\n/**\n * The function used to update Dom using requestAnimationFrame.\n * @param  {Function} fn - Function that contains the actual action\n * @return {Promise<T>}\n * @hidden\n */\nexport function getUpdateUsingRaf(updateFunction, callBack) {\n    requestAnimationFrame(function () {\n        try {\n            callBack(null, updateFunction());\n        }\n        catch (e) {\n            callBack(e);\n        }\n    });\n}\n/**\n * @hidden\n */\nexport function iterateArrayOrObject(collection, predicate) {\n    var result = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        var pred = predicate(collection[i], i);\n        if (!isNullOrUndefined(pred)) {\n            result.push(pred);\n        }\n    }\n    return result;\n}\n/** @hidden */\nexport function templateCompiler(template) {\n    if (template) {\n        var e = void 0;\n        try {\n            if (document.querySelectorAll(template).length) {\n                return baseTemplateComplier(document.querySelector(template).innerHTML.trim());\n            }\n        }\n        catch (e) {\n            return baseTemplateComplier(template);\n        }\n    }\n    return undefined;\n}\n/** @hidden */\nexport function setStyleAndAttributes(node, customAttributes) {\n    var copyAttr = {};\n    var literals = ['style', 'class'];\n    //Dont touch the original object - make a copy\n    baseExtend(copyAttr, customAttributes, {});\n    if ('style' in copyAttr) {\n        setStyleAttribute(node, copyAttr[literals[0]]);\n        delete copyAttr[literals[0]];\n    }\n    if ('class' in copyAttr) {\n        addClass([node], copyAttr[literals[1]]);\n        delete copyAttr[literals[1]];\n    }\n    attributes(node, copyAttr);\n}\n/** @hidden */\nexport function extend(copied, first, second, exclude) {\n    var moved = baseExtend(copied, first, second);\n    Object.keys(moved).forEach(function (value, index) {\n        if (exclude.indexOf(value) !== -1) {\n            delete moved[value];\n        }\n    });\n    return moved;\n}\n/** @hidden */\nexport function prepareColumns(columns, autoWidth) {\n    for (var c = 0, len = columns.length; c < len; c++) {\n        var column = void 0;\n        if (typeof columns[c] === 'string') {\n            column = new Column({ field: columns[c] });\n        }\n        else if (!(columns[c] instanceof Column)) {\n            if (!columns[c].columns) {\n                column = new Column(columns[c]);\n            }\n            else {\n                column = new Column(columns[c]);\n                columns[c].columns = prepareColumns(columns[c].columns);\n            }\n        }\n        else {\n            column = columns[c];\n        }\n        column.headerText = isNullOrUndefined(column.headerText) ? column.foreignKeyValue || column.field || '' : column.headerText;\n        column.foreignKeyField = column.foreignKeyField || column.field;\n        column.valueAccessor = column.valueAccessor || valueAccessor;\n        column.width = autoWidth && isNullOrUndefined(column.width) ? 200 : column.width;\n        if (isNullOrUndefined(column.visible)) {\n            column.visible = true;\n        }\n        columns[c] = column;\n    }\n    return columns;\n}\n/** @hidden */\nexport function setCssInGridPopUp(popUp, e, className) {\n    var popUpSpan = popUp.querySelector('span');\n    var position = popUp.parentElement.getBoundingClientRect();\n    var targetPosition = e.target.getBoundingClientRect();\n    var isBottomTail;\n    popUpSpan.className = className;\n    popUp.style.display = '';\n    isBottomTail = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY) > popUp.offsetHeight + 10;\n    popUp.style.top = targetPosition.top - position.top +\n        (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px'; //10px for tail element\n    popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n    if (isBottomTail) {\n        popUp.querySelector('.e-downtail').style.display = '';\n        popUp.querySelector('.e-uptail').style.display = 'none';\n    }\n    else {\n        popUp.querySelector('.e-downtail').style.display = 'none';\n        popUp.querySelector('.e-uptail').style.display = '';\n    }\n}\n/** @hidden */\nfunction getPopupLeftPosition(popup, e, targetPosition, left) {\n    var width = popup.offsetWidth / 2;\n    var x = getPosition(e).x;\n    if (x - targetPosition.left < width) {\n        return targetPosition.left - left;\n    }\n    else if (targetPosition.right - x < width) {\n        return targetPosition.right - left - width * 2;\n    }\n    else {\n        return x - left - width;\n    }\n}\n/** @hidden */\nexport function getActualProperties(obj) {\n    if (obj instanceof ChildProperty) {\n        return getValue('properties', obj);\n    }\n    else {\n        return obj;\n    }\n}\n/** @hidden */\nexport function parentsUntil(elem, selector, isID) {\n    var parent = elem;\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            break;\n        }\n        parent = parent.parentElement;\n    }\n    return parent;\n}\n/** @hidden */\nexport function getElementIndex(element, elements) {\n    var index = -1;\n    for (var i = 0, len = elements.length; i < len; i++) {\n        if (elements[i].isEqualNode(element)) {\n            index = i;\n            break;\n        }\n    }\n    return index;\n}\n/** @hidden */\nexport function inArray(value, collection) {\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i] === value) {\n            return i;\n        }\n    }\n    return -1;\n}\n/** @hidden */\nexport function getActualPropFromColl(collection) {\n    var coll = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i].hasOwnProperty('properties')) {\n            coll.push(collection[i].properties);\n        }\n        else {\n            coll.push(collection[i]);\n        }\n    }\n    return coll;\n}\n/** @hidden */\nexport function removeElement(target, selector) {\n    var elements = [].slice.call(target.querySelectorAll(selector));\n    for (var i = 0; i < elements.length; i++) {\n        remove(elements[i]);\n    }\n}\n/** @hidden */\nexport function getPosition(e) {\n    var position = {};\n    position.x = (isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n        e.clientX);\n    position.y = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY);\n    return position;\n}\nvar uid = 0;\n/** @hidden */\nexport function getUid(prefix) {\n    return prefix + uid++;\n}\n/** @hidden */\nexport function appendChildren(elem, children) {\n    for (var i = 0, len = children.length; i < len; i++) {\n        if (len === children.length) {\n            elem.appendChild(children[i]);\n        }\n        else {\n            elem.appendChild(children[0]);\n        }\n    }\n    return elem;\n}\n/** @hidden */\nexport function parents(elem, selector, isID) {\n    var parent = elem;\n    var parents = [];\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            parents.push(parent);\n        }\n        parent = parent.parentElement;\n    }\n    return parents;\n}\n/** @hidden */\nexport function calculateAggregate(type, data, column, context) {\n    if (type === 'Custom') {\n        return column.customAggregate ? column.customAggregate.call(context, data, column) : '';\n    }\n    return column.field in data ? DataUtil.aggregates[type.toLowerCase()](data, column.field) : null;\n}\n/** @hidden */\nvar scrollWidth = null;\n/** @hidden */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    var divNode = document.createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\n/** @hidden */\nvar rowHeight;\n/** @hidden */\nexport function getRowHeight(element) {\n    if (rowHeight !== undefined) {\n        return rowHeight;\n    }\n    var table = createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n    table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n    element.appendChild(table);\n    var rect = table.querySelector('td').getBoundingClientRect();\n    element.removeChild(table);\n    rowHeight = Math.ceil(rect.height);\n    return rowHeight;\n}\n/** @hidden */\nexport function isComplexField(field) {\n    return field.split('.').length > 1;\n}\n/** @hidden */\nexport function getComplexFieldID(field) {\n    var length = field.split('.').length;\n    var splits = field.split('.');\n    var fieldName = '';\n    for (var i = 0; i < length; i++) {\n        fieldName = fieldName + splits[i];\n    }\n    return fieldName;\n}\n/** @hidden */\nexport function getComplexValue(rowData, field) {\n    var length = field.split('.').length;\n    var splits = field.split('.');\n    var complexData = rowData[splits[0]];\n    var complexValue = complexData[splits[1]];\n    for (var i = 2; i < length; i++) {\n        complexValue = complexValue[splits[i]];\n    }\n    return complexValue;\n}\n/** @hidden */\nexport function isEditable(col, type, elem) {\n    var row = parentsUntil(elem, 'e-row');\n    var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n    if (type === 'beginEdit' && isOldRow) {\n        if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n            return false;\n        }\n        return true;\n    }\n    else if (type === 'add' && col.isIdentity && col.isPrimaryKey) {\n        return false;\n    }\n    else {\n        if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n            return false;\n        }\n        return true;\n    }\n}\n/** @hidden */\nexport function isActionPrevent(inst) {\n    var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n    return inst.editSettings.mode === 'Batch' &&\n        (inst.element.querySelectorAll('.e-updatedtd').length) && inst.editSettings.showConfirmDialog &&\n        (dlg ? dlg.classList.contains('e-popup-close') : true);\n}\n/** @hidden */\nexport function wrap(elem, action) {\n    var clName = 'e-wrap';\n    elem = elem instanceof Array ? elem : [elem];\n    for (var i = 0; i < elem.length; i++) {\n        action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n    }\n}\nexport function changeButtonType(target) {\n    var elements = [].slice.call(target.querySelectorAll('button'));\n    for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n        var button = elements_1[_i];\n        attributes(button, { type: 'button' });\n    }\n}\n/** @hidden */\nexport function setFormatter(serviceLocator, column) {\n    var fmtr = serviceLocator.getService('valueFormatter');\n    switch (column.type) {\n        case 'date':\n            column.setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: column.format }));\n            column.setParser(fmtr.getParserFunction({ type: 'date', skeleton: column.format }));\n            break;\n        case 'datetime':\n            column.setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: column.format }));\n            column.setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: column.format }));\n            break;\n        case 'number':\n            column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            column.setParser(fmtr.getParserFunction({ format: column.format }));\n            break;\n    }\n}\n/** @hidden */\nexport function addRemoveActiveClasses(cells, add) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    for (var i = 0, len = cells.length; i < len; i++) {\n        if (add) {\n            classList(cells[i], args.slice(), []);\n            cells[i].setAttribute('aria-selected', 'true');\n        }\n        else {\n            classList(cells[i], [], args.slice());\n            cells[i].removeAttribute('aria-selected');\n        }\n    }\n}\n/** @hidden */\nexport function distinctStringValues(result) {\n    var temp = {};\n    var res = [];\n    for (var i = 0; i < result.length; i++) {\n        if (!(result[i] in temp)) {\n            res.push(result[i].toString());\n            temp[result[i]] = 1;\n        }\n    }\n    return res;\n}\n/** @hidden */\nexport function getFilterMenuPostion(target, dialogObj, grid) {\n    var elementVisible = dialogObj.element.style.display;\n    dialogObj.element.style.display = 'block';\n    var dlgWidth = dialogObj.width;\n    var newpos;\n    if (!grid.enableRtl) {\n        newpos = calculateRelativeBasedPosition(target, dialogObj.element);\n        dialogObj.element.style.display = elementVisible;\n        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 5 + 'px';\n        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n        if (leftPos < 1) {\n            dialogObj.element.style.left = (dlgWidth + leftPos) - 16 + 'px'; // right calculation\n        }\n        else {\n            dialogObj.element.style.left = leftPos + -4 + 'px';\n        }\n    }\n    else {\n        newpos = calculatePosition(target, 'left', 'bottom');\n        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 35 + 'px';\n        dialogObj.element.style.display = elementVisible;\n        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n        if (leftPos < 1) {\n            dialogObj.element.style.left = (dlgWidth + leftPos) + -16 + 'px';\n        }\n        else {\n            dialogObj.element.style.left = leftPos - 16 + 'px';\n        }\n    }\n}\n/** @hidden */\nexport function getZIndexCalcualtion(args, dialogObj) {\n    args.popup.element.style.zIndex = (dialogObj.zIndex + 1).toString();\n}\n/** @hidden */\nexport function toogleCheckbox(elem) {\n    var span = elem.querySelector('.e-frame');\n    span.classList.contains('e-check') ? classList(span, ['e-uncheck'], ['e-check']) :\n        classList(span, ['e-check'], ['e-uncheck']);\n}\n/** @hidden */\nexport function createCboxWithWrap(uid, elem, className) {\n    var div = createElement('div', { className: className });\n    div.appendChild(elem);\n    div.setAttribute('uid', uid);\n    return div;\n}\n/** @hidden */\nexport function removeAddCboxClasses(elem, checked) {\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    if (checked) {\n        elem.classList.add('e-check');\n    }\n    else {\n        elem.classList.add('e-uncheck');\n    }\n}\n/**\n * Refresh the Row model's foreign data.\n * @param row - Grid Row model object.\n * @param columns - Foreign columns array.\n * @param data - Updated Row data.\n * @hidden\n */\nexport function refreshForeignData(row, columns, data) {\n    columns.forEach(function (col) {\n        setValue(col.field, getForeignData(col, data), row.foreignKeyData);\n    });\n    row.cells.forEach(function (cell) {\n        if (cell.isForeignKey) {\n            setValue('foreignKeyData', getValue(cell.column.field, row.foreignKeyData), cell);\n        }\n    });\n}\n/**\n * Get the foreign data for the corresponding cell value.\n * @param column - Foreign Key column\n * @param data - Row data.\n * @param lValue - cell value.\n * @param foreignData - foreign data source.\n * @hidden\n */\nexport function getForeignData(column, data, lValue, foreignKeyData) {\n    var fField = column.foreignKeyField;\n    var key = (lValue || valueAccessor(column.field, data, column));\n    key = isNullOrUndefined(key) ? '' : key;\n    var query = new Query();\n    var fdata = foreignKeyData || (column.dataSource instanceof DataManager) && column.dataSource.dataSource.offline ?\n        column.dataSource.dataSource.json : column.columnData;\n    if (key.getDay) {\n        query.where(getDatePredicate({ field: fField, operator: 'equal', value: key, matchCase: false }));\n    }\n    else {\n        query.where(fField, '==', key, false);\n    }\n    return new DataManager(fdata).executeLocal(query);\n}\n/**\n * To use to get the column's object by the foreign key value.\n * @param foreignKeyValue - Defines ForeignKeyValue.\n * @param columns - Array of column object.\n * @hidden\n */\nexport function getColumnByForeignKeyValue(foreignKeyValue, columns) {\n    var column;\n    return columns.some(function (col) {\n        column = col;\n        return col.foreignKeyValue === foreignKeyValue;\n    }) && column;\n}\n/**\n * @hidden\n * @param filterObject - Defines predicate model object\n */\nexport function getDatePredicate(filterObject, type) {\n    var datePredicate;\n    var prevDate;\n    var nextDate;\n    var prevObj = baseExtend({}, getActualProperties(filterObject));\n    var nextObj = baseExtend({}, getActualProperties(filterObject));\n    var value = new Date(filterObject.value);\n    if (filterObject.operator === 'equal' || filterObject.operator === 'notequal') {\n        if (type === 'datetime') {\n            prevDate = new Date(value.setSeconds(value.getSeconds() - 1));\n            nextDate = new Date(value.setSeconds(value.getSeconds() + 2));\n            filterObject.value = new Date(value.setSeconds(nextDate.getSeconds() - 1));\n        }\n        else {\n            prevDate = new Date(value.setHours(0) - 1);\n            nextDate = new Date(value.setHours(24));\n        }\n        prevObj.value = prevDate;\n        nextObj.value = nextDate;\n        if (filterObject.operator === 'equal') {\n            prevObj.operator = 'greaterthan';\n            nextObj.operator = 'lessthan';\n        }\n        else if (filterObject.operator === 'notequal') {\n            prevObj.operator = 'lessthanorequal';\n            nextObj.operator = 'greaterthanorequal';\n        }\n        var predicateSt = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        var predicateEnd = new Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n        datePredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n    }\n    else {\n        if (typeof (prevObj.value) === 'string') {\n            prevObj.value = new Date(prevObj.value);\n        }\n        var predicates = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        datePredicate = predicates;\n    }\n    if (filterObject.setProperties) {\n        filterObject.setProperties({ ejpredicate: datePredicate }, true);\n    }\n    else {\n        filterObject.ejpredicate = datePredicate;\n    }\n    return datePredicate;\n}\n/**\n * @hidden\n */\nexport function renderMovable(ele, frzCols) {\n    var mEle = ele.cloneNode(true);\n    for (var i = 0; i < frzCols; i++) {\n        mEle.removeChild(mEle.children[0]);\n    }\n    for (var i = frzCols, len = ele.childElementCount; i < len; i++) {\n        ele.removeChild(ele.children[ele.childElementCount - 1]);\n    }\n    return mEle;\n}\n","/**\n * AriaService\n * @hidden\n */\nvar AriaService = /** @class */ (function () {\n    function AriaService() {\n    }\n    AriaService.prototype.setOptions = function (target, options) {\n        var props = Object.keys(options);\n        props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n    };\n    AriaService.prototype.setExpand = function (target, expand) {\n        setStateAndProperties(target, config.expand, expand);\n    };\n    AriaService.prototype.setSort = function (target, direction) {\n        setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n    };\n    AriaService.prototype.setBusy = function (target, isBusy) {\n        setStateAndProperties(target, config.busy, isBusy);\n        setStateAndProperties(target, config.invalid, null, true);\n    };\n    AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n        setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n    };\n    AriaService.prototype.setDropTarget = function (target, isTarget) {\n        setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n    };\n    return AriaService;\n}());\nexport { AriaService };\n/**\n * @hidden\n */\nfunction setStateAndProperties(target, attribute, value, remove) {\n    if (remove) {\n        target.removeAttribute(attribute);\n        return;\n    }\n    if (target) {\n        target.setAttribute(attribute, value);\n    }\n}\nvar config = {\n    expand: 'aria-expanded',\n    role: 'role',\n    selected: 'aria-selected',\n    multiselectable: 'aria-multiselectable',\n    sort: 'aria-sort',\n    busy: 'aria-busy',\n    invalid: 'aria-invalid',\n    grabbed: 'aria-grabbed',\n    dropeffect: 'aria-dropeffect',\n    haspopup: 'aria-haspopup',\n    level: 'aria-level',\n    colcount: 'aria-colcount'\n};\n","import { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { uiUpdate, initialEnd, dataReady, modelChanged } from '../base/constant';\nimport { FooterRenderer } from '../renderer/footer-renderer';\nimport { SummaryCellRenderer } from '../renderer/summary-cell-renderer';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\n/**\n * Summary Action controller.\n */\nvar Aggregate = /** @class */ (function () {\n    function Aggregate(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Aggregate.prototype.getModuleName = function () {\n        return 'aggregate';\n    };\n    Aggregate.prototype.initiateRender = function () {\n        var _this = this;\n        var cellFac = this.locator.getService('cellRendererFactory');\n        var instance = new SummaryCellRenderer(this.parent, this.locator);\n        [CellType.Summary, CellType.CaptionSummary, CellType.GroupSummary].forEach(function (type) {\n            return cellFac.addCellRenderer(type, instance);\n        });\n        this.footerRenderer = new FooterRenderer(this.parent, this.locator);\n        this.footerRenderer.renderPanel();\n        this.footerRenderer.renderTable();\n        this.locator.register('footerRenderer', this.footerRenderer);\n        var fn = function () {\n            _this.prepareSummaryInfo();\n            _this.parent.off(dataReady, fn);\n        };\n        this.parent.on(dataReady, fn, this);\n        this.parent.on(dataReady, this.footerRenderer.refresh, this.footerRenderer);\n    };\n    Aggregate.prototype.prepareSummaryInfo = function () {\n        var _this = this;\n        summaryIterator(this.parent.aggregates, function (column) {\n            var dataColumn = _this.parent.getColumnByField(column.field) || {};\n            var type = dataColumn.type;\n            column.setPropertiesSilent({ format: _this.getFormatFromType(column.format, type) });\n            column.setFormatter();\n            column.setPropertiesSilent({ columnName: column.columnName || column.field });\n        });\n    };\n    Aggregate.prototype.getFormatFromType = function (format, type) {\n        if (isNullOrUndefined(type) || typeof format !== 'string') {\n            return format;\n        }\n        var obj;\n        switch (type) {\n            case 'number':\n                obj = { format: format };\n                break;\n            case 'date':\n                obj = { type: type, skeleton: format };\n                break;\n            case 'datetime':\n                obj = { type: 'dateTime', skeleton: format };\n                break;\n        }\n        return obj;\n    };\n    Aggregate.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (isNullOrUndefined(this.footerRenderer)) {\n            this.initiateRender();\n        }\n        this.prepareSummaryInfo();\n        this.footerRenderer.refresh();\n        var cModel = new CaptionSummaryModelGenerator(this.parent);\n        var gModel = new GroupSummaryModelGenerator(this.parent);\n        if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n            this.parent.notify(modelChanged, {});\n        }\n    };\n    Aggregate.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    };\n    Aggregate.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.footerRenderer.removeEventListener();\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(dataReady, this.footerRenderer.refresh);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n    };\n    Aggregate.prototype.destroy = function () {\n        this.removeEventListener();\n        remove(this.parent.element.querySelector('.e-gridfooter'));\n    };\n    return Aggregate;\n}());\nexport { Aggregate };\n/**\n * @private\n */\nexport function summaryIterator(aggregates, callback) {\n    aggregates.forEach(function (row) {\n        row.columns.forEach(function (column) {\n            callback(column, row);\n        });\n    });\n}\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Internationalization, setCulture } from '@syncfusion/ej2-base';\n/**\n * ValueFormatter class to globalize the value.\n * @hidden\n */\nvar ValueFormatter = /** @class */ (function () {\n    function ValueFormatter(cultureName) {\n        this.intl = new Internationalization();\n        if (!isNullOrUndefined(cultureName)) {\n            this.intl.culture = cultureName;\n        }\n    }\n    ValueFormatter.prototype.getFormatFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateFormat(format);\n        }\n        else {\n            return this.intl.getNumberFormat(format);\n        }\n    };\n    ValueFormatter.prototype.getParserFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateParser(format);\n        }\n        else {\n            return this.intl.getNumberParser(format);\n        }\n    };\n    ValueFormatter.prototype.fromView = function (value, format, type) {\n        if (type === 'date' || type === 'datetime' || type === 'number') {\n            return format(value);\n        }\n        else {\n            return value;\n        }\n    };\n    ValueFormatter.prototype.toView = function (value, format) {\n        var result = value;\n        if (!isNullOrUndefined(format) && !isNullOrUndefined(value)) {\n            result = format(value);\n        }\n        return result;\n    };\n    ValueFormatter.prototype.setCulture = function (cultureName) {\n        if (!isNullOrUndefined(cultureName)) {\n            setCulture(cultureName);\n        }\n    };\n    return ValueFormatter;\n}());\nexport { ValueFormatter };\n","import { merge, isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\nimport { Query, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getUid, templateCompiler, getForeignData } from '../base/util';\n/**\n * Represents Grid `Column` model class.\n */\nvar Column = /** @class */ (function () {\n    function Column(options) {\n        var _this = this;\n        /**\n         * If `allowSorting` set to false, then it disables sorting option of a particular column.\n         * By default all columns are sortable.\n         * @default true\n         */\n        this.allowSorting = true;\n        /**\n         * If `allowResizing` is set to false, it disables resize option of a particular column.\n         * By default all the columns can be resized.\n         * @default true\n         */\n        this.allowResizing = true;\n        /**\n         * If `allowFiltering` set to false, then it disables filtering option and filter bar element of a particular column.\n         * By default all columns are filterable.\n         * @default true\n         */\n        this.allowFiltering = true;\n        /**\n         * If `allowGrouping` set to false, then it disables grouping of a particular column.\n         * By default all columns are groupable.\n         * @default true\n         */\n        this.allowGrouping = true;\n        /**\n         * If `allowReordering` set to false, then it disables reorder of a particular column.\n         * By default all columns can be reorder.\n         * @default true\n         */\n        this.allowReordering = true;\n        /**\n         * If `showColumnMenu` set to false, then it disable the column menu of a particular column.\n         * By default column menu will show for all columns\n         * @default true\n         */\n        this.showColumnMenu = true;\n        /**\n         * If `enableGroupByFormat` set to true, then it groups the particular column by formatted values.\n         * @default true\n         */\n        this.enableGroupByFormat = false;\n        /**\n         * If `allowEditing` set to false, then it disables editing of a particular column.\n         * By default all columns are editable.\n         * @default true\n         */\n        this.allowEditing = true;\n        /**\n         *  It is used to customize the default filter options for a specific columns.\n         * * type -  Specifies the filter type as menu or checkbox.\n         * * ui - to render custom component for specific column it has following functions.\n         * * ui.create – It is used for creating custom components.\n         * * ui.read -  It is used for read the value from the component.\n         * * ui.write - It is used to apply component model as dynamically.\n         * {% codeBlock src=\"grid/filter-menu-api/index.ts\" %}{% endcodeBlock %}\n         *\n         * > Check the [`Filter UI`](./filtering.html#custom-component-in-filter-menu) for its customization.\n         *  @default null\n         */\n        this.filter = {};\n        /**\n         * If `showInColumnChooser` set to false, then hide the particular column in column chooser.\n         *  By default all columns are displayed in column Chooser.\n         * @default true\n         */\n        this.showInColumnChooser = true;\n        /**\n         * Defines the `IEditCell` object to customize default edit cell.\n         * @default {}\n         */\n        this.edit = {};\n        this.sortDirection = 'Descending';\n        merge(this, options);\n        this.uid = getUid('grid-column');\n        var valueFormatter = new ValueFormatter();\n        if (options.format && (options.format.skeleton || options.format.format)) {\n            this.setFormatter(valueFormatter.getFormatFunction(options.format));\n            this.setParser(valueFormatter.getParserFunction(options.format));\n        }\n        if (!this.field) {\n            this.allowFiltering = false;\n            this.allowGrouping = false;\n            this.allowSorting = false;\n        }\n        if (this.commands && !this.textAlign) {\n            this.textAlign = 'Right';\n        }\n        if (this.template || this.commandsTemplate) {\n            this.templateFn = templateCompiler(this.template || this.commandsTemplate);\n        }\n        if (this.headerTemplate) {\n            this.headerTemplateFn = templateCompiler(this.headerTemplate);\n        }\n        if (this.filter.itemTemplate) {\n            this.fltrTemplateFn = templateCompiler(this.filter.itemTemplate);\n        }\n        if (this.isForeignColumn() && (isNullOrUndefined(this.editType) || this.editType === 'dropdownedit')) {\n            this.editType = 'dropdownedit';\n            this.edit.params = {\n                dataSource: this.dataSource,\n                query: new Query(), fields: { value: this.foreignKeyField || this.field, text: this.foreignKeyValue }\n            };\n        }\n        if (this.sortComparer) {\n            var a_1 = this.sortComparer;\n            this.sortComparer = function comparer(x, y) {\n                if (this.sortDirection === 'Descending') {\n                    var z = x;\n                    x = y;\n                    y = z;\n                }\n                return a_1(x, y);\n            };\n        }\n        if (!this.sortComparer && this.isForeignColumn()) {\n            this.sortComparer = function (x, y) {\n                x = getValue(_this.foreignKeyValue, getForeignData(_this, {}, x)[0]);\n                y = getValue(_this.foreignKeyValue, getForeignData(_this, {}, y)[0]);\n                return _this.sortDirection === 'Descending' ? DataUtil.fnDescending(x, y) : DataUtil.fnAscending(x, y);\n            };\n        }\n    }\n    /** @hidden */\n    Column.prototype.getSortDirection = function () {\n        return this.sortDirection;\n    };\n    /** @hidden */\n    Column.prototype.setSortDirection = function (direction) {\n        this.sortDirection = direction;\n    };\n    /** @hidden */\n    Column.prototype.setProperties = function (column) {\n        //Angular two way binding\n        var keys = Object.keys(column);\n        for (var i = 0; i < keys.length; i++) {\n            this[keys[i]] = column[keys[i]];\n        }\n    };\n    /**\n     * @hidden\n     * It defines the column is foreign key column or not.\n     */\n    Column.prototype.isForeignColumn = function () {\n        return !!(this.dataSource && this.foreignKeyValue);\n    };\n    /** @hidden */\n    Column.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /** @hidden */\n    Column.prototype.setFormatter = function (value) {\n        this.formatFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getParser = function () {\n        return this.parserFn;\n    };\n    /** @hidden */\n    Column.prototype.setParser = function (value) {\n        this.parserFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getColumnTemplate = function () {\n        return this.templateFn;\n    };\n    /** @hidden */\n    Column.prototype.getHeaderTemplate = function () {\n        return this.headerTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getFilterItemTemplate = function () {\n        return this.fltrTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getDomSetter = function () {\n        return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n    };\n    return Column;\n}());\nexport { Column };\n","/** @hidden */\nexport var created = 'create';\n/** @hidden */\nexport var destroyed = 'destroy';\n/** @hidden */\nexport var load = 'load';\n/** @hidden */\nexport var rowDataBound = 'rowDataBound';\n/** @hidden */\nexport var queryCellInfo = 'queryCellInfo';\n/** @hidden */\nexport var headerCellInfo = 'headerCellInfo';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionFailure = 'actionFailure';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var rowSelecting = 'rowSelecting';\n/** @hidden */\nexport var rowSelected = 'rowSelected';\n/** @hidden */\nexport var rowDeselecting = 'rowDeselecting';\n/** @hidden */\nexport var rowDeselected = 'rowDeselected';\n/** @hidden */\nexport var cellSelecting = 'cellSelecting';\n/** @hidden */\nexport var cellSelected = 'cellSelected';\n/** @hidden */\nexport var cellDeselecting = 'cellDeselecting';\n/** @hidden */\nexport var cellDeselected = 'cellDeselected';\n/** @hidden */\nexport var columnDragStart = 'columnDragStart';\n/** @hidden */\nexport var columnDrag = 'columnDrag';\n/** @hidden */\nexport var columnDrop = 'columnDrop';\n/** @hidden */\nexport var rowDragStart = 'rowDragStart';\n/** @hidden */\nexport var rowDrag = 'rowDrag';\n/** @hidden */\nexport var rowDrop = 'rowDrop';\n/** @hidden */\nexport var beforePrint = 'beforePrint';\n/** @hidden */\nexport var printComplete = 'printComplete';\n/** @hidden */\nexport var detailDataBound = 'detailDataBound';\n/** @hidden */\nexport var toolbarClick = 'toolbarClick';\n/** @hidden */\nexport var batchAdd = 'batchAdd';\n/** @hidden */\nexport var batchCancel = 'batchCancel';\n/** @hidden */\nexport var batchDelete = 'batchDelete';\n/** @hidden */\nexport var beforeBatchAdd = 'beforeBatchAdd';\n/** @hidden */\nexport var beforeBatchDelete = 'beforeBatchDelete';\n/** @hidden */\nexport var beforeBatchSave = 'beforeBatchSave';\n/** @hidden */\nexport var beginEdit = 'beginEdit';\n/** @hidden */\nexport var cellEdit = 'cellEdit';\n/** @hidden */\nexport var cellSave = 'cellSave';\n/** @hidden */\nexport var cellSaved = 'cellSaved';\n/** @hidden */\nexport var endAdd = 'endAdd';\n/** @hidden */\nexport var endDelete = 'endDelete';\n/** @hidden */\nexport var endEdit = 'endEdit';\n/** @hidden */\nexport var recordDoubleClick = 'recordDoubleClick';\n/** @hidden */\nexport var recordClick = 'recordClick';\n/** @hidden */\nexport var beforeDataBound = 'beforeDataBound';\n/** @hidden */\nexport var beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var onResize = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var checkBoxChange = 'checkBoxChange';\n/** @hidden */\nexport var beforeCopy = 'beforeCopy';\n/** @hidden */\nexport var filterChoiceRequest = 'filterchoicerequest';\n/** @hidden */\nexport var filterAfterOpen = 'filterafteropen';\n/** @hidden */\nexport var filterBeforeOpen = 'filterbeforeopen';\n/** @hidden */\nexport var filterSearchBegin = 'filtersearchbegin';\n/**\n * Specifies grid internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var onEmpty = 'on-empty';\n/** @hidden */\nexport var inBoundModelChanged = 'inbound-model-changed';\n/** @hidden */\nexport var modelChanged = 'model-changed';\n/** @hidden */\nexport var colGroupRefresh = 'colgroup-refresh';\n/** @hidden */\nexport var headerRefreshed = 'header-refreshed';\n/** @hidden */\nexport var pageBegin = 'paging-begin';\n/** @hidden */\nexport var pageComplete = 'paging-complete';\n/** @hidden */\nexport var sortBegin = 'sorting-begin';\n/** @hidden */\nexport var sortComplete = 'sorting-complete';\n/** @hidden */\nexport var filterBegin = 'filtering-begin';\n/** @hidden */\nexport var filterComplete = 'filtering-complete';\n/** @hidden */\nexport var searchBegin = 'searching-begin';\n/** @hidden */\nexport var searchComplete = 'searching-complete';\n/** @hidden */\nexport var reorderBegin = 'reorder-begin';\n/** @hidden */\nexport var reorderComplete = 'reorder-complete';\n/** @hidden */\nexport var rowDragAndDropBegin = 'rowdraganddrop-begin';\n/** @hidden */\nexport var rowDragAndDropComplete = 'rowdraganddrop-complete';\n/** @hidden */\nexport var groupBegin = 'grouping-begin';\n/** @hidden */\nexport var groupComplete = 'grouping-complete';\n/** @hidden */\nexport var ungroupBegin = 'ungrouping-begin';\n/** @hidden */\nexport var ungroupComplete = 'ungrouping-complete';\n/** @hidden */\nexport var rowSelectionBegin = 'rowselecting';\n/** @hidden */\nexport var rowSelectionComplete = 'rowselected';\n/** @hidden */\nexport var columnSelectionBegin = 'columnselecting';\n/** @hidden */\nexport var columnSelectionComplete = 'columnselected';\n/** @hidden */\nexport var cellSelectionBegin = 'cellselecting';\n/** @hidden */\nexport var cellSelectionComplete = 'cellselected';\n/** @hidden */\nexport var beforeCellFocused = 'beforecellfocused';\n/** @hidden */\nexport var cellFocused = 'cellfocused';\n/** @hidden */\nexport var keyPressed = 'key-pressed';\n/** @hidden */\nexport var click = 'click';\n/** @hidden */\nexport var destroy = 'destroy';\n/** @hidden */\nexport var columnVisibilityChanged = 'column-visible-changed';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var columnWidthChanged = 'column-width-changed';\n/** @hidden */\nexport var columnPositionChanged = 'column-position-changed';\n/** @hidden */\nexport var rowDragAndDrop = 'row-drag-and-drop';\n/** @hidden */\nexport var rowsAdded = 'rows-added';\n/** @hidden */\nexport var rowsRemoved = 'rows-removed';\n/** @hidden */\nexport var columnDragStop = 'column-drag-stop';\n/** @hidden */\nexport var headerDrop = 'header-drop';\n/** @hidden */\nexport var dataSourceModified = 'datasource-modified';\n/** @hidden */\nexport var refreshComplete = 'refresh-complete';\n/** @hidden */\nexport var refreshVirtualBlock = 'refresh-virtual-block';\n/** @hidden */\nexport var dblclick = 'dblclick';\n/** @hidden */\nexport var toolbarRefresh = 'toolbar-refresh';\n/** @hidden */\nexport var bulkSave = 'bulk-save';\n/** @hidden */\nexport var autoCol = 'auto-col';\n/** @hidden */\nexport var tooltipDestroy = 'tooltip-destroy';\n/** @hidden */\nexport var updateData = 'update-data';\n/** @hidden */\nexport var editBegin = 'edit-begin';\n/** @hidden */\nexport var editComplete = 'edit-complete';\n/** @hidden */\nexport var addBegin = 'add-begin';\n/** @hidden */\nexport var addComplete = 'add-complete';\n/** @hidden */\nexport var saveComplete = 'save-complete';\n/** @hidden */\nexport var deleteBegin = 'delete-begin';\n/** @hidden */\nexport var deleteComplete = 'delete-complete';\n/** @hidden */\nexport var preventBatch = 'prevent-batch';\n/** @hidden */\nexport var dialogDestroy = 'dialog-destroy';\n/** @hidden */\nexport var crudAction = 'crud-Action';\n/** @hidden */\nexport var addDeleteAction = 'add-delete-Action';\n/** @hidden */\nexport var destroyForm = 'destroy-form';\n/** @hidden */\nexport var doubleTap = 'double-tap';\n/** @hidden */\nexport var beforeExcelExport = 'beforeExcelExport';\n/** @hidden */\nexport var excelExportComplete = 'excelExportComplete';\n/** @hidden */\nexport var excelQueryCellInfo = 'excelQueryCellInfo';\n/** @hidden */\nexport var excelHeaderQueryCellInfo = 'excelHeaderQueryCellInfo';\n/** @hidden */\nexport var beforePdfExport = 'beforePdfExport';\n/** @hidden */\nexport var pdfExportComplete = 'pdfExportComplete';\n/** @hidden */\nexport var pdfQueryCellInfo = 'pdfQueryCellInfo';\n/** @hidden */\nexport var pdfHeaderQueryCellInfo = 'pdfHeaderQueryCellInfo';\n/** @hidden */\nexport var accessPredicate = 'access-predicate';\n/** @hidden */\nexport var contextMenuClick = 'contextMenuClick';\n/** @hidden */\nexport var freezeRender = 'freezerender';\n/** @hidden */\nexport var freezeRefresh = 'freezerefresh';\n/** @hidden */\nexport var contextMenuOpen = 'contextMenuOpen';\n/** @hidden */\nexport var columnMenuClick = 'columnMenuClick';\n/** @hidden */\nexport var columnMenuOpen = 'columnMenuOpen';\n/** @hidden */\nexport var filterOpen = 'filterOpen';\n/** @hidden */\nexport var filterDialogCreated = 'filterDialogCreated';\n/** @hidden */\nexport var filterMenuClose = 'filter-menu-close';\n/** @hidden */\nexport var initForeignKeyColumn = 'initForeignKeyColumn';\n/** @hidden */\nexport var getForeignKeyData = 'getForeignKeyData';\n/** @hidden */\nexport var generateQuery = 'generateQuery';\n/** @hidden */\nexport var showEmptyGrid = 'showEmptyGrid';\n/** @hidden */\nexport var foreignKeyData = 'foreignKeyData';\n/** @hidden */\nexport var dataStateChange = 'dataStateChange';\n/** @hidden */\nexport var dataSourceChanged = 'dataSourceChanged';\n/** @hidden */\nexport var rtlUpdated = 'rtl-updated';\n/** @hidden */\nexport var beforeFragAppend = 'beforeFragAppend';\n/** @hidden */\nexport var frozenHeight = 'frozenHeight';\n","/**\n * Defines types of Cell\n * @hidden\n */\nexport var CellType;\n(function (CellType) {\n    /**  Defines CellType as Data */\n    CellType[CellType[\"Data\"] = 0] = \"Data\";\n    /**  Defines CellType as Header */\n    CellType[CellType[\"Header\"] = 1] = \"Header\";\n    /**  Defines CellType as Summary */\n    CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n    /**  Defines CellType as GroupSummary */\n    CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n    /**  Defines CellType as CaptionSummary */\n    CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n    /**  Defines CellType as Filter */\n    CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n    /**  Defines CellType as Indent */\n    CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n    /**  Defines CellType as GroupCaption */\n    CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n    /**  Defines CellType as GroupCaptionEmpty */\n    CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n    /**  Defines CellType as Expand */\n    CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n    /**  Defines CellType as HeaderIndent */\n    CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n    /**  Defines CellType as StackedHeader */\n    CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n    /**  Defines CellType as DetailHeader */\n    CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n    /**  Defines CellType as DetailExpand */\n    CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n    /**  Defines CellType as CommandColumn */\n    CellType[CellType[\"CommandColumn\"] = 14] = \"CommandColumn\";\n})(CellType || (CellType = {}));\n/**\n * Defines types of Render\n * @hidden\n */\nexport var RenderType;\n(function (RenderType) {\n    /**  Defines RenderType as Header */\n    RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /**  Defines RenderType as Summary */\n    RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n})(RenderType || (RenderType = {}));\n/**\n * Defines Predefined toolbar items.\n * @hidden\n */\nexport var ToolbarItem;\n(function (ToolbarItem) {\n    ToolbarItem[ToolbarItem[\"Add\"] = 0] = \"Add\";\n    ToolbarItem[ToolbarItem[\"Edit\"] = 1] = \"Edit\";\n    ToolbarItem[ToolbarItem[\"Update\"] = 2] = \"Update\";\n    ToolbarItem[ToolbarItem[\"Delete\"] = 3] = \"Delete\";\n    ToolbarItem[ToolbarItem[\"Cancel\"] = 4] = \"Cancel\";\n    ToolbarItem[ToolbarItem[\"Print\"] = 5] = \"Print\";\n    ToolbarItem[ToolbarItem[\"Search\"] = 6] = \"Search\";\n    ToolbarItem[ToolbarItem[\"ColumnChooser\"] = 7] = \"ColumnChooser\";\n    ToolbarItem[ToolbarItem[\"PdfExport\"] = 8] = \"PdfExport\";\n    ToolbarItem[ToolbarItem[\"ExcelExport\"] = 9] = \"ExcelExport\";\n    ToolbarItem[ToolbarItem[\"CsvExport\"] = 10] = \"CsvExport\";\n    ToolbarItem[ToolbarItem[\"WordExport\"] = 11] = \"WordExport\";\n})(ToolbarItem || (ToolbarItem = {}));\n","/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, isActionPrevent, appendChildren, getDatePredicate } from '../base/util';\nimport { remove, createElement, debounce } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate, UrlAdaptor, Deferred } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilter` module is used to handle filtering action.\n */\nvar CheckBoxFilter = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     * @hidden\n     */\n    function CheckBoxFilter(parent, filterSettings, serviceLocator) {\n        this.existingPredicate = {};\n        this.filterState = true;\n        this.values = {};\n        this.cBoxTrue = createCheckBox(false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(false, { checked: false, label: ' ' });\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.cBoxTrue.insertBefore(createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    CheckBoxFilter.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilter.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n        EventHandler.add(this.dlg.querySelector('.e-searchinput'), 'keyup', this.searchHandler, this);\n    };\n    CheckBoxFilter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        var elem = this.dlg.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchHandler);\n        }\n    };\n    CheckBoxFilter.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = '';\n            this.refreshCheckboxes();\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    CheckBoxFilter.prototype.searchBoxKeyUp = function (e) {\n        this.refreshCheckboxes();\n        this.updateSearchIcon();\n    };\n    CheckBoxFilter.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    CheckBoxFilter.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilter.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                if (typeof dataSource !== 'object') {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[i];\n                    dataSource[i] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilter.prototype.updateModel = function (options) {\n        this.options = options;\n        this.existingPredicate = options.actualPredicate || {};\n        this.options.dataSource = options.dataSource;\n        this.updateDataSource();\n        this.options.type = options.type || 'string';\n        this.options.format = options.format || '';\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.sortedColumns = options.sortedColumns || this.parent.sortSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.values = {};\n        this.localeObj = options.localeObj;\n        this.isFiltered = options.filteredColumns.length;\n    };\n    CheckBoxFilter.prototype.getAndSetChkElem = function (options) {\n        this.dlg = createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons e-input-group-icon', attrs: {\n                    type: 'text', title: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            Input.createInput({\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilter.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen, filterModel: this,\n            columnName: this.options.field, columnType: this.options.type, cancel: false\n        };\n        this.parent.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 255,\n            target: this.parent.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: {\n                        content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n                        cssClass: 'e-primary', isPrimary: true\n                    }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this)\n        });\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = '800px';\n        this.dialogObj.show();\n        this.wireEvents();\n        createSpinner({ target: this.spinner });\n        showSpinner(this.spinner);\n        this.getAllData();\n    };\n    CheckBoxFilter.prototype.dialogCreated = function (e) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(this.options.target, this.dialogObj, this.parent);\n        }\n        else {\n            this.dialogObj.position = { X: 'center', Y: 'center' };\n        }\n        this.parent.notify(events.filterDialogCreated, e);\n    };\n    CheckBoxFilter.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilter.prototype.closeDialog = function () {\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.dialogObj.destroy();\n            this.unWireEvents();\n            remove(this.dlg);\n            this.dlg = null;\n        }\n    };\n    CheckBoxFilter.prototype.clearFilter = function () {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFilter });\n            return;\n        }\n        this.options.handler({ action: 'clear-filter', field: this.options.field });\n    };\n    CheckBoxFilter.prototype.btnClick = function (e) {\n        if (this.filterState) {\n            if (e.target.tagName.toLowerCase() === 'input') {\n                var args = {\n                    action: 'filtering', filterCollection: {\n                        field: this.options.field,\n                        operator: this.options.column.type === 'date' || this.options.column.type === 'datetime' ? 'equal' : 'contains',\n                        value: e.target.value, matchCase: false, type: this.options.column.type\n                    },\n                    field: this.options.field\n                };\n                e.target.value ? this.options.handler(args) : this.closeDialog();\n            }\n            else {\n                var text = e.target.firstChild.textContent.toLowerCase();\n                if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n                    this.fltrBtnHandler();\n                }\n                else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n                    this.clearFilter();\n                }\n            }\n            this.closeDialog();\n        }\n        else if (!(e.target.tagName.toLowerCase() === 'input')) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    CheckBoxFilter.prototype.fltrBtnHandler = function () {\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n        var optr = 'equal';\n        var caseSen = this.options.type === 'string' ?\n            this.options.allowCaseSensitive : true;\n        var defaults = {\n            field: this.options.field, predicate: 'or',\n            operator: optr, matchCase: caseSen, ignoreAccent: this.parent.filterSettings.ignoreAccent\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual) {\n            optr = 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = 'and';\n            defaults.operator = 'notequal';\n        }\n        var value;\n        var fObj;\n        var coll = [];\n        var searchInput = this.searchBox.querySelector('.e-searchinput');\n        if (checked.length !== this.itemsCnt || (searchInput.value && searchInput.value !== '')) {\n            for (var i = 0; i < checked.length; i++) {\n                value = this.values[parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n                fObj = extend({}, { value: value }, defaults);\n                if (value && !value.toString().length) {\n                    fObj.operator = isNotEqual ? 'notequal' : 'equal';\n                }\n                coll.push(fObj);\n                if (isActionPrevent(this.parent)) {\n                    this.parent.notify(events.preventBatch, {\n                        instance: this, handler: this.fltrBtnHandler, arg1: fObj.field, arg2: fObj.predicate, arg3: fObj.operator,\n                        arg4: fObj.matchCase, arg5: fObj.ignoreAccent, arg6: fObj.value\n                    });\n                    return;\n                }\n            }\n            this.initiateFilter(coll);\n        }\n        else {\n            this.clearFilter();\n        }\n    };\n    CheckBoxFilter.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[j].ejpredicate !== undefined ?\n                    predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n                    predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchCase, fColl[j].ignoreAccent);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilter.prototype.refreshCheckboxes = function () {\n        var val = this.sInput.value;\n        var query = this.options.query.clone();\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = this.options.type ? 'startswith' : 'contains';\n        var matchCase = true;\n        var ignoreAccent = this.parent.filterSettings.ignoreAccent;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        var predicte;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'false';\n            }\n            parsed = parsed === 'true';\n            operator = 'equal';\n        }\n        var args = {\n            requestType: events.filterSearchBegin,\n            filterModel: this, columnName: this.options.field, column: this.options.column,\n            operator: operator, matchCase: matchCase, ignoreAccent: ignoreAccent, filterChoiceCount: null,\n            query: query\n        };\n        this.parent.trigger(events.actionBegin, args);\n        predicte = new Predicate(this.options.field, args.operator, parsed, args.matchCase, args.ignoreAccent);\n        if (this.options.type === 'date' || this.options.type === 'datetime') {\n            parsed = this.valueFormatter.fromView(val, this.options.parserFn, this.options.type);\n            operator = 'equal';\n            if (isNullOrUndefined(parsed) && val.length) {\n                return;\n            }\n            var filterObj = {\n                field: this.options.field, operator: operator, value: parsed, matchCase: matchCase,\n                ignoreAccent: ignoreAccent\n            };\n            predicte = getDatePredicate(filterObj, this.options.type);\n        }\n        if (val.length) {\n            query.where(predicte);\n        }\n        args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n        query.take(args.filterChoiceCount);\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processSearch(query);\n        }\n    };\n    CheckBoxFilter.prototype.getPredicateFromCols = function (columns) {\n        var predicate;\n        var predicates = CheckBoxFilter.getPredicate(columns);\n        var predicateList = [];\n        var fPredicate = {};\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var col = getColumnByForeignKeyValue(prop, foreignColumn);\n            if (col) {\n                this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n                if (fPredicate.predicate.predicates.length) {\n                    predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n                }\n            }\n            else {\n                predicateList.push(predicates[prop]);\n            }\n        }\n        return predicateList.length && Predicate.and(predicateList);\n    };\n    CheckBoxFilter.prototype.getAllData = function () {\n        var query = new Query();\n        query = this.parent.query.clone();\n        query.requiresCount(); //consider take query\n        var args = {\n            requestType: events.filterChoiceRequest, filterModel: this, query: query, filterChoiceCount: null\n        };\n        this.parent.trigger(events.actionBegin, args);\n        args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n        query.take(args.filterChoiceCount);\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processDataOperation(query);\n        }\n    };\n    CheckBoxFilter.prototype.filterEvent = function (args, query) {\n        var _this = this;\n        var def = this.eventPromise(args, query);\n        def.promise.then(function (e) {\n            _this.dataSuccess(e);\n        });\n    };\n    CheckBoxFilter.prototype.eventPromise = function (args, query) {\n        var state;\n        state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        state.dataSource = def.resolve;\n        state.action = args;\n        this.parent.trigger(events.dataStateChange, state);\n        return def;\n    };\n    ;\n    CheckBoxFilter.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return data;\n    };\n    ;\n    CheckBoxFilter.prototype.processDataOperation = function (query) {\n        var _this = this;\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var allPromise = [];\n        var runArray = [];\n        if (this.options.column.isForeignColumn()) {\n            allPromise.push(this.options.column.dataSource.executeQuery(new Query()));\n            runArray.push(function (data) { return _this.foreignKeyData = data; });\n        }\n        allPromise.push(this.options.dataSource.executeQuery(query));\n        runArray.push(this.dataSuccess.bind(this));\n        var i = 0;\n        Promise.all(allPromise).then(function (e) {\n            e.forEach(function (data) {\n                runArray[i++](data.result);\n            });\n        });\n    };\n    CheckBoxFilter.prototype.dataSuccess = function (e) {\n        this.fullData = e;\n        var query = new Query();\n        if ((this.options.filteredColumns.length)) {\n            var cols = [];\n            for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                if (!(this.options.filteredColumns[i].field === this.options.field ||\n                    this.options.filteredColumns[i].field === this.options.foreignKeyValue)) {\n                    cols.push(this.options.filteredColumns[i]);\n                }\n            }\n            var predicate = this.getPredicateFromCols(cols);\n            if (predicate) {\n                query.where(predicate);\n            }\n        }\n        // query.select(this.options.field);\n        var result = new DataManager(this.fullData).executeLocal(query);\n        var col = this.options.column;\n        var res = CheckBoxFilter.getDistinct(result, this.options.field, col, this.foreignKeyData);\n        this.filteredData = res.records || [];\n        this.processDataSource(null, true, this.filteredData);\n        this.sInput.focus();\n        var args = {\n            requestType: events.filterAfterOpen,\n            filterModel: this, columnName: this.options.field, columnType: this.options.type\n        };\n        this.parent.trigger(events.actionComplete, args);\n    };\n    CheckBoxFilter.prototype.processDataSource = function (query, isInitial, dataSource) {\n        showSpinner(this.spinner);\n        // query = query ? query : this.options.query.clone();\n        // query.requiresCount();\n        // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n        // let res: { result: Object[] } = result as { result: Object[] };\n        this.updateResult();\n        this.createFilterItems(dataSource, isInitial);\n    };\n    CheckBoxFilter.prototype.processSearch = function (query) {\n        this.processDataOperation(query);\n    };\n    CheckBoxFilter.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getValue(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilter.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n    };\n    CheckBoxFilter.prototype.updateAllCBoxes = function (checked) {\n        var cBoxes = [].slice.call(this.cBox.querySelectorAll('.e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    CheckBoxFilter.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            this.dialogObj.element.querySelector('.e-btn').focus();\n        }\n    };\n    CheckBoxFilter.prototype.createCheckbox = function (value, checked) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        var label = elem.querySelector('.e-label');\n        label.innerHTML = !isNullOrUndefined(value) && value.toString().length ? value :\n            this.getLocalizedLabel('Blanks');\n        if (this.options.template) {\n            label.innerHTML = '';\n            var args = {};\n            args[this.options.field] = value;\n            appendChildren(label, this.options.template(args));\n        }\n        return elem;\n    };\n    CheckBoxFilter.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.cBox.children.length - 1;\n        var className = [];\n        var elem = this.cBox.querySelector('.e-selectall');\n        var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dialogObj.btnObj[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        this.filterState = !btn.disabled;\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    CheckBoxFilter.prototype.createFilterItems = function (data, isInitial) {\n        var cBoxes = createElement('div');\n        var btn = this.dialogObj.btnObj[0];\n        this.itemsCnt = data.length;\n        if (data.length) {\n            var selectAll = createCboxWithWrap(getUid('cbox'), this.createCheckbox(this.getLocalizedLabel('SelectAll'), false), 'e-ftrchk');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            cBoxes.appendChild(selectAll);\n            var predicate = new Predicate('field', 'equal', this.options.field);\n            if (this.options.foreignKeyValue) {\n                predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n            }\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[uid] = getValue('ejValue', data[i]);\n                var value = this.valueFormatter.toView(getValue(this.options.field, data[i]), this.options.formatFn);\n                cBoxes.appendChild(createCboxWithWrap(uid, this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid])), 'e-ftrchk'));\n            }\n            this.cBox.innerHTML = cBoxes.innerHTML;\n            this.updateIndeterminatenBtn();\n            btn.disabled = false;\n        }\n        else {\n            cBoxes.appendChild(createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = cBoxes.innerHTML;\n            btn.disabled = true;\n        }\n        this.filterState = !btn.disabled;\n        btn.dataBind();\n        var args = { requestType: events.filterChoiceRequest, filterModel: this, dataSource: data };\n        this.parent.trigger(events.actionComplete, args);\n        hideSpinner(this.spinner);\n    };\n    CheckBoxFilter.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            return this.result[value];\n        }\n    };\n    CheckBoxFilter.getDistinct = function (json, field, column, foreignKeyData) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        var isForeignKey = column && column.isForeignColumn();\n        while (len--) {\n            value = json[len];\n            value = getValue(field, value); //local remote diff, check with mdu           \n            if (!isNullOrUndefined(value)) {\n                if (!(value in lookup)) {\n                    var obj = {};\n                    obj[ejValue] = value;\n                    lookup[value] = true;\n                    value = isForeignKey ? getValue(column.foreignKeyValue, getForeignData(column, {}, value, foreignKeyData)[0]) : value;\n                    setValue(field, isNullOrUndefined(value) ? null : value, obj);\n                    result.push(obj);\n                }\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilter.getPredicate = function (columns) {\n        var cols = CheckBoxFilter.getDistinct(columns, 'field').records || [];\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[i].field));\n            if (collection.length !== 0) {\n                pred[cols[i].field] = CheckBoxFilter.generatePredicate(collection);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilter.generatePredicate = function (cols) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var first;\n        first = CheckBoxFilter.updateDateFilter(cols[0]);\n        first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n        if (first.type === 'date' || first.type === 'datetime') {\n            predicate = getDatePredicate(first, first.type);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, !CheckBoxFilter.getCaseValue(first), first.ignoreAccent);\n        }\n        for (var p = 1; p < len; p++) {\n            cols[p] = CheckBoxFilter.updateDateFilter(cols[p]);\n            if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate.predicates.push(getDatePredicate(cols[p], cols[p].type));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilter.getCaseValue(cols[p]), cols[p].ignoreAccent));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate = predicate[(cols[p].predicate)](getDatePredicate(cols[p], cols[p].type), cols[p].ignoreAccent);\n                }\n                else {\n                    predicate = cols[p].ejpredicate ?\n                        predicate[cols[p].predicate](cols[p].ejpredicate) :\n                        predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilter.getCaseValue(cols[p]), cols[p].ignoreAccent);\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilter.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.matchCase)) {\n            return true;\n        }\n        else {\n            return filter.matchCase;\n        }\n    };\n    CheckBoxFilter.updateDateFilter = function (filter) {\n        if ((filter.type === 'date' || filter.type === 'datetime' || filter.value instanceof Date)) {\n            filter.type = filter.type || 'date';\n        }\n        return filter;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    CheckBoxFilter.prototype.getModuleName = function () {\n        return 'checkboxFilter';\n    };\n    return CheckBoxFilter;\n}());\nexport { CheckBoxFilter };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate, Deferred, UrlAdaptor } from '@syncfusion/ej2-data';\nimport { setFormatter, getDatePredicate, getColumnByForeignKeyValue } from '../base/util';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\n/**\n * Grid data module is used to generate query and data source.\n * @hidden\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module.\n     * @hidden\n     */\n    function Data(parent, serviceLocator) {\n        this.dataState = { isPending: false, resolver: null, group: [] };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.initDataManager();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.rowsAdded, this.addRows, this);\n        this.parent.on(events.rowsRemoved, this.removeRows, this);\n        this.parent.on(events.dataSourceModified, this.initDataManager, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.updateData, this.crudActions, this);\n        this.parent.on(events.addDeleteAction, this.getData, this);\n    }\n    /**\n     * The function used to initialize dataManager and external query\n     * @return {void}\n     */\n    Data.prototype.initDataManager = function () {\n        var gObj = this.parent;\n        this.dataManager = gObj.dataSource instanceof DataManager ? gObj.dataSource :\n            (isNullOrUndefined(gObj.dataSource) ? new DataManager() : new DataManager(gObj.dataSource));\n        gObj.query = gObj.query instanceof Query ? gObj.query : new Query();\n    };\n    /**\n     * The function is used to generate updated Query from Grid model.\n     * @return {Query}\n     * @hidden\n     */\n    Data.prototype.generateQuery = function (skipPage) {\n        var gObj = this.parent;\n        var query = gObj.query.clone();\n        this.filterQuery(query);\n        this.searchQuery(query);\n        this.aggregateQuery(query);\n        this.sortQuery(query);\n        this.pageQuery(query, skipPage);\n        this.groupQuery(query);\n        return query;\n    };\n    Data.prototype.aggregateQuery = function (query, isForeign) {\n        this.parent.aggregates.forEach(function (row) {\n            row.columns.forEach(function (column) {\n                var types = column.type instanceof Array ? column.type : [column.type];\n                types.forEach(function (type) { return query.aggregate(type.toLowerCase(), column.field); });\n            });\n        });\n        return query;\n    };\n    Data.prototype.pageQuery = function (query, skipPage) {\n        var gObj = this.parent;\n        if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n            gObj.pageSettings.currentPage = Math.max(1, gObj.pageSettings.currentPage);\n            if (gObj.pageSettings.pageCount <= 0) {\n                gObj.pageSettings.pageCount = 8;\n            }\n            if (gObj.pageSettings.pageSize <= 0) {\n                gObj.pageSettings.pageSize = 12;\n            }\n            query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n        }\n        return query;\n    };\n    Data.prototype.groupQuery = function (query) {\n        var gObj = this.parent;\n        if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n            var columns = gObj.groupSettings.columns;\n            for (var i = 0, len = columns.length; i < len; i++) {\n                var column = this.getColumnByField(columns[i]);\n                var isGrpFmt = column.enableGroupByFormat;\n                var format = column.format;\n                if (isGrpFmt) {\n                    query.group(columns[i], this.formatGroupColumn.bind(this), format);\n                }\n                else {\n                    query.group(columns[i], null);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.sortQuery = function (query) {\n        var gObj = this.parent;\n        if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n            var columns = gObj.sortSettings.columns;\n            var sortGrp = [];\n            for (var i = columns.length - 1; i > -1; i--) {\n                var col = this.getColumnByField(columns[i].field);\n                if (col) {\n                    col.setSortDirection(columns[i].direction);\n                }\n                var fn = col.sortComparer && !this.isRemote() ? col.sortComparer.bind(col) : columns[i].direction;\n                if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n                    query.sortBy(col.field, fn);\n                }\n                else {\n                    sortGrp.push({ direction: fn, field: col.field });\n                }\n            }\n            for (var i = 0, len = sortGrp.length; i < len; i++) {\n                query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n            }\n        }\n        return query;\n    };\n    Data.prototype.searchQuery = function (query) {\n        var _this = this;\n        var sSettings = this.parent.searchSettings;\n        var fields = sSettings.fields.length ? sSettings.fields : this.parent.getColumns().map(function (f) { return f.field; });\n        var predicateList = [];\n        if (this.parent.searchSettings.key.length) {\n            var predicate = void 0;\n            if (this.parent.getForeignKeyColumns().length) {\n                fields.forEach(function (columnName) {\n                    var column = _this.getColumnByField(columnName);\n                    var sQuery = new Query();\n                    if (column.isForeignColumn()) {\n                        predicateList = _this.fGeneratePredicate(column, predicateList);\n                    }\n                    else {\n                        predicateList.push(new Predicate(column.field, sSettings.operator, sSettings.key, sSettings.ignoreCase, sSettings.ignoreAccent));\n                    }\n                });\n                query.where(Predicate.or(predicateList));\n            }\n            else {\n                query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n            }\n        }\n        return query;\n    };\n    Data.prototype.filterQuery = function (query, column, skipFoerign) {\n        var gObj = this.parent;\n        var predicateList = [];\n        var fPredicate = {};\n        var actualFilter = [];\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n            var columns = column ? column : gObj.filterSettings.columns;\n            var colType = {};\n            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                colType[col.field] = col.filter.type ? col.filter.type : gObj.filterSettings.type;\n            }\n            var checkBoxCols = [];\n            var defaultFltrCols = [];\n            for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                var col = columns_1[_b];\n                if (colType[col.field] === 'CheckBox' || colType[col.field] === 'Excel') {\n                    checkBoxCols.push(col);\n                }\n                else {\n                    defaultFltrCols.push(col);\n                }\n            }\n            if (checkBoxCols.length) {\n                var excelPredicate = CheckBoxFilter.getPredicate(checkBoxCols);\n                for (var _c = 0, _d = Object.keys(excelPredicate); _c < _d.length; _c++) {\n                    var prop = _d[_c];\n                    var col = getColumnByForeignKeyValue(prop, foreignColumn);\n                    if (col && !skipFoerign) {\n                        predicateList = this.fGeneratePredicate(col, predicateList);\n                        actualFilter.push(col);\n                    }\n                    else {\n                        predicateList.push(excelPredicate[prop]);\n                    }\n                }\n            }\n            if (defaultFltrCols.length) {\n                for (var _e = 0, defaultFltrCols_1 = defaultFltrCols; _e < defaultFltrCols_1.length; _e++) {\n                    var col = defaultFltrCols_1[_e];\n                    var column_1 = this.getColumnByField(col.field) ||\n                        getColumnByForeignKeyValue(col.field, this.parent.getForeignKeyColumns());\n                    var sType = column_1.type;\n                    if (getColumnByForeignKeyValue(col.field, foreignColumn) && !skipFoerign) {\n                        actualFilter.push(col);\n                        predicateList = this.fGeneratePredicate(column_1, predicateList);\n                    }\n                    else {\n                        if (sType !== 'date' && sType !== 'datetime') {\n                            predicateList.push(new Predicate(col.field, col.operator, col.value, !col.matchCase, this.parent.filterSettings.ignoreAccent));\n                        }\n                        else {\n                            predicateList.push(getDatePredicate(col, sType));\n                        }\n                    }\n                }\n            }\n            if (predicateList.length) {\n                query.where(Predicate.and(predicateList));\n            }\n            else {\n                this.parent.notify(events.showEmptyGrid, {});\n            }\n        }\n        return query;\n    };\n    Data.prototype.fGeneratePredicate = function (col, predicateList) {\n        var fPredicate = {};\n        if (col) {\n            this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n            if (fPredicate.predicate.predicates.length) {\n                predicateList.push(fPredicate.predicate);\n            }\n        }\n        return predicateList;\n    };\n    /**\n     * The function is used to get dataManager promise by executing given Query.\n     * @param  {Query} query - Defines the query which will execute along with data processing.\n     * @return {Promise<Object>}\n     * @hidden\n     */\n    Data.prototype.getData = function (args, query) {\n        var _this = this;\n        if (args === void 0) { args = { requestType: '' }; }\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ?\n            args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise(args, query, key);\n            return def.promise;\n        }\n        else {\n            var crud = void 0;\n            switch (args.requestType) {\n                case 'delete':\n                    query = query ? query : this.generateQuery();\n                    var len = Object.keys(args.data).length;\n                    if (len === 1) {\n                        crud = this.dataManager.remove(key, args.data[0], null, query);\n                    }\n                    else {\n                        var changes = {\n                            addedRecords: [],\n                            deletedRecords: [],\n                            changedRecords: []\n                        };\n                        changes.deletedRecords = args.data;\n                        crud = this.dataManager.saveChanges(changes, key, null, query.requiresCount());\n                    }\n                    break;\n                case 'save':\n                    query = query ? query : this.generateQuery();\n                    args.index = isNullOrUndefined(args.index) ? 0 : args.index;\n                    crud = this.dataManager.insert(args.data, null, query, args.index);\n                    break;\n            }\n            if (crud && !Array.isArray(crud) && !crud.hasOwnProperty('deletedRecords')) {\n                return crud.then(function (result) {\n                    return _this.executeQuery(query);\n                });\n            }\n            else {\n                return this.executeQuery(query);\n            }\n        }\n    };\n    Data.prototype.executeQuery = function (query) {\n        var _this = this;\n        if (this.dataManager.ready) {\n            var deferred_1 = new Deferred();\n            var ready = this.dataManager.ready;\n            ready.then(function (e) {\n                _this.dataManager.executeQuery(query).then(function (result) {\n                    deferred_1.resolve(result);\n                });\n            }).catch(function (e) {\n                deferred_1.reject(e);\n            });\n            return deferred_1.promise;\n        }\n        else {\n            return this.dataManager.executeQuery(query);\n        }\n    };\n    Data.prototype.formatGroupColumn = function (value, field) {\n        var gObj = this.parent;\n        var serviceLocator = this.serviceLocator;\n        var column = this.getColumnByField(field);\n        var date = value;\n        if (!column.type) {\n            column.type = date.getDay ? (date.getHours() > 0 || date.getMinutes() > 0 ||\n                date.getSeconds() > 0 || date.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n        }\n        if (isNullOrUndefined(column.getFormatter())) {\n            setFormatter(serviceLocator, column);\n        }\n        var formatVal = ValueFormatter.prototype.toView(value, column.getFormatter());\n        return formatVal;\n    };\n    Data.prototype.crudActions = function (args) {\n        var query = this.generateQuery();\n        var promise = null;\n        var pr = 'promise';\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n            this.parent.getPrimaryKeyFieldNames());\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.eventPromise(args, query, key);\n        }\n        switch (args.requestType) {\n            case 'save':\n                promise = this.dataManager.update(key, args.data, null, this.generateQuery());\n                break;\n        }\n        args[pr] = promise;\n        this.parent.notify(events.crudAction, args);\n    };\n    /** @hidden */\n    Data.prototype.saveChanges = function (changes, key) {\n        var query = this.generateQuery().requiresCount();\n        if ('result' in this.parent.dataSource) {\n            var state = void 0;\n            state = this.getStateEventArgument(query);\n            var deff = new Deferred();\n            var args = {\n                requestType: 'batchsave', changes: changes, key: key, query: query,\n                endEdit: deff.resolve\n            };\n            this.setState({ isPending: true, resolver: deff.resolve });\n            this.parent.trigger(events.dataSourceChanged, args);\n            return deff.promise;\n        }\n        else {\n            var promise = this.dataManager.saveChanges(changes, key, null, this.generateQuery().requiresCount());\n            return promise;\n        }\n    };\n    Data.prototype.getKey = function (keys) {\n        if (keys && keys.length) {\n            return keys[0];\n        }\n        return undefined;\n    };\n    /** @hidden */\n    Data.prototype.isRemote = function () {\n        return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined;\n    };\n    Data.prototype.addRows = function (e) {\n        for (var i = e.records.length; i > 0; i--) {\n            this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n        }\n    };\n    Data.prototype.removeRows = function (e) {\n        var json = this.dataManager.dataSource.json;\n        this.dataManager.dataSource.json = json.filter(function (value, index) { return e.records.indexOf(value) === -1; });\n    };\n    Data.prototype.getColumnByField = function (field) {\n        var col;\n        return (this.parent.columnModel).some(function (column) {\n            col = column;\n            return column.field === field;\n        }) && col;\n    };\n    Data.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.rowsAdded, this.addRows);\n        this.parent.off(events.rowsRemoved, this.removeRows);\n        this.parent.off(events.dataSourceModified, this.initDataManager);\n        this.parent.off(events.dataSourceModified, this.destroy);\n        this.parent.off(events.updateData, this.crudActions);\n        this.parent.off(events.addDeleteAction, this.getData);\n    };\n    Data.prototype.getState = function () {\n        return this.dataState;\n    };\n    Data.prototype.setState = function (state) {\n        return this.dataState = state;\n    };\n    Data.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    Data.prototype.eventPromise = function (args, query, key) {\n        var _this = this;\n        var state;\n        var dataArgs = args;\n        state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        if (args.requestType !== undefined && this.dataState.isDataChanged !== false) {\n            state.action = args;\n            if (args.requestType === 'save' || args.requestType === 'delete') {\n                var editArgs = args;\n                editArgs.key = key;\n                editArgs.state = state;\n                this.setState({ isPending: true, resolver: deff.resolve });\n                dataArgs.endEdit = deff.resolve;\n                this.parent.trigger(events.dataSourceChanged, editArgs);\n                deff.promise.then(function (e) {\n                    _this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                    _this.parent.trigger(events.dataStateChange, state);\n                });\n            }\n            else {\n                this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                this.parent.trigger(events.dataStateChange, state);\n            }\n        }\n        else {\n            this.setState({});\n            def.resolve(this.parent.dataSource);\n        }\n        return def;\n    };\n    return Data;\n}());\nexport { Data };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Row\n * @hidden\n */\nvar Row = /** @class */ (function () {\n    function Row(options) {\n        merge(this, options);\n    }\n    Row.prototype.clone = function () {\n        var row = new Row({});\n        merge(row, this);\n        row.cells = this.cells.map(function (cell) { return cell.clone(); });\n        return row;\n    };\n    return Row;\n}());\nexport { Row };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Cell\n * @hidden\n */\nvar Cell = /** @class */ (function () {\n    function Cell(options) {\n        this.isSpanned = false;\n        merge(this, options);\n    }\n    Cell.prototype.clone = function () {\n        var cell = new Cell({});\n        merge(cell, this);\n        return cell;\n    };\n    return Cell;\n}());\nexport { Cell };\n","import { isNullOrUndefined, attributes } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject } from '../base/util';\nimport { CellType } from '../base/enum';\n/**\n * `CellMergeRender` module.\n * @hidden\n */\nvar CellMergeRender = /** @class */ (function () {\n    function CellMergeRender(serviceLocator, parent) {\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n    }\n    CellMergeRender.prototype.render = function (cellArgs, row, i, td) {\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n        var span = row.cells[i].cellSpan ? row.cells[i].cellSpan :\n            (cellArgs.colSpan + i) <= row.cells.length ? cellArgs.colSpan : row.cells.length - i;\n        var visible = 0;\n        for (var j = i + 1; j < i + span && j < row.cells.length; j++) {\n            if (row.cells[j].visible === false) {\n                visible++;\n            }\n            else {\n                row.cells[j].isSpanned = true;\n            }\n        }\n        if (visible > 0) {\n            for (var j = i + span; j < i + span + visible && j < row.cells.length; j++) {\n                row.cells[j].isSpanned = true;\n            }\n            if (i + span + visible >= row.cells.length) {\n                span -= (i + span + visible) - row.cells.length;\n            }\n        }\n        if (row.cells[i].cellSpan) {\n            row.data[cellArgs.column.field] = row.cells[i].spanText;\n            td = cellRenderer.render(row.cells[i], row.data, { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' });\n        }\n        if (span > 1) {\n            attributes(td, { 'colSpan': span.toString(), 'aria-colSpan': span.toString() });\n        }\n        if (this.parent.enableColumnVirtualization && !row.cells[i].cellSpan &&\n            !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {\n            this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);\n        }\n        return td;\n    };\n    CellMergeRender.prototype.backupMergeCells = function (fName, data, span) {\n        this.setMergeCells(this.generteKey(fName, data), span);\n    };\n    CellMergeRender.prototype.generteKey = function (fname, data) {\n        return fname + '__' + data.toString();\n    };\n    CellMergeRender.prototype.splitKey = function (key) {\n        return key.split('__');\n    };\n    CellMergeRender.prototype.containsKey = function (fname, data) {\n        return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));\n    };\n    CellMergeRender.prototype.getMergeCells = function () {\n        return this.parent.mergeCells;\n    };\n    CellMergeRender.prototype.setMergeCells = function (key, span) {\n        this.parent.mergeCells[key] = span;\n    };\n    CellMergeRender.prototype.updateVirtualCells = function (rows) {\n        var mCells = this.getMergeCells();\n        for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {\n            var key = _a[_i];\n            var value = mCells[key];\n            var merge = this.splitKey(key);\n            var columnIndex = this.getIndexFromAllColumns(merge[0]);\n            var vColumnIndices = this.parent.getColumnIndexesInView();\n            var span = value - (vColumnIndices[0] - columnIndex);\n            if (columnIndex < vColumnIndices[0] && span > 1) {\n                for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {\n                    var row = rows_1[_b];\n                    if (row.data[merge[0]].toString() === merge[1].toString()) {\n                        row.cells[0].cellSpan = span;\n                        row.cells[0].spanText = merge[1];\n                        break;\n                    }\n                }\n            }\n        }\n        return rows;\n    };\n    CellMergeRender.prototype.getIndexFromAllColumns = function (field) {\n        var index = iterateArrayOrObject(this.parent.getVisibleColumns(), function (item, index) {\n            if (item.field === field) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return index;\n    };\n    return CellMergeRender;\n}());\nexport { CellMergeRender };\n","import { isNullOrUndefined, extend, getValue, addClass } from '@syncfusion/ej2-base';\nimport { createElement, attributes as addAttributes } from '@syncfusion/ej2-base';\nimport { rowDataBound, queryCellInfo } from '../base/constant';\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { CellMergeRender } from './cell-merge-renderer';\n/**\n * RowRenderer class which responsible for building row content.\n * @hidden\n */\nvar RowRenderer = /** @class */ (function () {\n    function RowRenderer(serviceLocator, cellType, parent) {\n        this.element = createElement('tr', { attrs: { role: 'row' } });\n        this.cellType = cellType;\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n    }\n    /**\n     * Function to render the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate, cloneNode) {\n        return this.refreshRow(row, columns, attributes, rowTemplate, cloneNode);\n    };\n    /**\n     * Function to refresh the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n        if (isChanged) {\n            row.data = extend({}, row.changes);\n            this.refreshMergeCells(row);\n        }\n        var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n        var tr = this.refreshRow(row, columns, attributes, rowTemplate);\n        var cells = [].slice.call(tr.cells);\n        node.innerHTML = '';\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            node.appendChild(cell);\n        }\n    };\n    RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate, cloneNode) {\n        var tr = !isNullOrUndefined(cloneNode) ? cloneNode : this.element.cloneNode();\n        var rowArgs = { data: row.data };\n        var cellArgs = { data: row.data };\n        var attrCopy = extend({}, attributes, {});\n        var chekBoxEnable = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox' && col.field; })[0];\n        var value = false;\n        if (chekBoxEnable) {\n            value = getValue(chekBoxEnable.field, rowArgs.data);\n        }\n        if (row.isDataRow) {\n            row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1 || value;\n        }\n        if (row.isDataRow && this.parent.isCheckBoxSelection\n            && this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            row.isSelected = true;\n            if (this.parent.getSelectedRowIndexes().indexOf(row.index) === -1) {\n                this.parent.getSelectedRowIndexes().push(row.index);\n            }\n        }\n        this.buildAttributeFromRow(tr, row);\n        addAttributes(tr, attrCopy);\n        setStyleAndAttributes(tr, row.attributes);\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        for (var i = 0, len = row.cells.length; i < len; i++) {\n            var cell = row.cells[i];\n            cell.isSelected = row.isSelected;\n            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n            var attrs = { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' };\n            if (row.isExpand && row.cells[i].cellType === CellType.DetailExpand) {\n                attrs['class'] = 'e-detailrowexpand';\n            }\n            var td = cellRenderer.render(row.cells[i], row.data, attrs);\n            if (row.cells[i].cellType !== CellType.Filter) {\n                if (row.cells[i].cellType === CellType.Data || row.cells[i].cellType === CellType.CommandColumn) {\n                    this.parent.trigger(queryCellInfo, extend(cellArgs, {\n                        cell: td, column: cell.column, colSpan: 1,\n                        foreignKeyData: row.cells[i].foreignKeyData\n                    }));\n                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1) {\n                        var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n                        td = cellMerge.render(cellArgs, row, i, td);\n                    }\n                }\n                if (!row.cells[i].isSpanned) {\n                    tr.appendChild(td);\n                }\n            }\n        }\n        var args = { row: tr, rowHeight: this.parent.rowHeight };\n        if (row.isDataRow) {\n            this.parent.trigger(rowDataBound, extend(rowArgs, args));\n        }\n        if (this.parent.enableVirtualization) {\n            rowArgs.rowHeight = this.parent.rowHeight;\n        }\n        if (rowArgs.rowHeight) {\n            tr.style.height = rowArgs.rowHeight + 'px';\n        }\n        else if (this.parent.rowHeight && tr.querySelector('.e-headercell')) {\n            tr.style.height = this.parent.rowHeight + 'px';\n        }\n        if (row.cssClass) {\n            tr.classList.add(row.cssClass);\n        }\n        if (this.parent.element.scrollHeight > this.parent.height && this.parent.aggregates.length) {\n            for (var i = 0; i < this.parent.aggregates.length; i++) {\n                var property = 'properties';\n                var column = 'columns';\n                if (this.parent.aggregates[i][property][column][0].footerTemplate) {\n                    var summarycell = tr.querySelectorAll('.e-summarycell');\n                    if (summarycell.length) {\n                        var lastSummaryCell = (summarycell[summarycell.length - 1]);\n                        addClass([lastSummaryCell], ['e-lastsummarycell']);\n                    }\n                }\n            }\n        }\n        return tr;\n    };\n    RowRenderer.prototype.refreshMergeCells = function (row) {\n        for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            cell.isSpanned = false;\n        }\n        return row;\n    };\n    /**\n     * Function to check and add alternative row css class.\n     * @param  {Element} tr\n     * @param  {{[x:string]:Object}} attr\n     */\n    RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n        var attr = {};\n        var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n        var classes = [];\n        if (row.isDataRow) {\n            classes.push('e-row');\n        }\n        if (row.isAltRow) {\n            classes.push('e-altrow');\n        }\n        if (!isNullOrUndefined(row.index)) {\n            attr[prop.rowindex] = row.index;\n        }\n        if (row.rowSpan) {\n            attr.rowSpan = row.rowSpan;\n        }\n        if (row.uid) {\n            attr[prop.dataUID] = row.uid;\n        }\n        if (row.isSelected) {\n            attr[prop.ariaSelected] = true;\n        }\n        if (row.visible === false) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(tr, attr);\n    };\n    return RowRenderer;\n}());\nexport { RowRenderer };\n","import { isNullOrUndefined, getValue, setValue } from '@syncfusion/ej2-base';\nimport { Row } from '../models/row';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\nimport { getUid } from '../base/util';\nimport { getForeignData } from '../../grid/base/util';\n/**\n * RowModelGenerator is used to generate grid data rows.\n * @hidden\n */\nvar RowModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function RowModelGenerator(parent) {\n        this.parent = parent;\n    }\n    RowModelGenerator.prototype.generateRows = function (data, args) {\n        var rows = [];\n        var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n        for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n            rows[i] = this.generateRow(data[i], startIndex);\n        }\n        return rows;\n    };\n    RowModelGenerator.prototype.ensureColumns = function () {\n        //TODO: generate dummy column for group, detail here;\n        var cols = [];\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cols.push(this.generateCell({}, null, CellType.DetailExpand));\n        }\n        return cols;\n    };\n    RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent) {\n        var options = {};\n        options.foreignKeyData = {};\n        options.uid = getUid('grid-row');\n        options.data = data;\n        options.index = index;\n        options.indent = indent;\n        options.isDataRow = true;\n        options.isExpand = false;\n        options.cssClass = cssClass;\n        options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n        this.refreshForeignKeyRow(options);\n        var cells = this.ensureColumns();\n        var row = new Row(options);\n        row.cells = cells.concat(this.generateCells(options));\n        return row;\n    };\n    RowModelGenerator.prototype.refreshForeignKeyRow = function (options) {\n        this.parent.getForeignKeyColumns().forEach(function (col) {\n            setValue(col.field, getForeignData(col, options.data), options.foreignKeyData);\n        });\n    };\n    RowModelGenerator.prototype.generateCells = function (options) {\n        var _this = this;\n        var dummies = this.parent.getColumns();\n        var tmp = [];\n        dummies.forEach(function (dummy, index) {\n            return tmp.push(_this.generateCell(dummy, options.uid, isNullOrUndefined(dummy.commands) ? undefined : CellType.CommandColumn, null, index, options.foreignKeyData));\n        });\n        return tmp;\n    };\n    RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex, foreignKeyData) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(column.field || column.template),\n            'isTemplate': !isNullOrUndefined(column.template),\n            'rowID': rowId,\n            'column': column,\n            'cellType': !isNullOrUndefined(cellType) ? cellType : CellType.Data,\n            'colSpan': colSpan,\n            'commands': column.commands,\n            'isForeignKey': column.isForeignColumn && column.isForeignColumn(),\n            'foreignKeyData': column.isForeignColumn && column.isForeignColumn() && getValue(column.field, foreignKeyData)\n        };\n        if (opt.isDataCell || opt.column.type === 'checkbox') {\n            opt.index = this.parent.getColumnIndexByField(column.field);\n        }\n        return new Cell(opt);\n    };\n    RowModelGenerator.prototype.refreshRows = function (input) {\n        var _this = this;\n        input.forEach(function (row) {\n            _this.refreshForeignKeyRow(row);\n            row.cells = _this.generateCells(row);\n        });\n        return input;\n    };\n    return RowModelGenerator;\n}());\nexport { RowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { calculateAggregate } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n * @hidden\n */\nvar SummaryModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for Summary row model generator\n     */\n    function SummaryModelGenerator(parent) {\n        this.parent = parent;\n    }\n    SummaryModelGenerator.prototype.getData = function () {\n        var _this = this;\n        var rows = [];\n        this.parent.aggregates.slice().forEach(function (row) {\n            var columns = row.columns.filter(function (column) {\n                return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n                    || _this.columnSelector(column);\n            });\n            if (columns.length) {\n                rows.push({ columns: columns });\n            }\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.footerTemplate !== undefined;\n    };\n    SummaryModelGenerator.prototype.getColumns = function (start, end) {\n        var columns = [];\n        if (this.parent.allowGrouping) {\n            this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new Column({})); });\n        }\n        if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid)) {\n            columns.push(new Column({}));\n        }\n        columns.push.apply(columns, this.parent.getColumns());\n        return isNullOrUndefined(start) ? columns : columns.slice(start, end);\n    };\n    SummaryModelGenerator.prototype.generateRows = function (input, args, start, end) {\n        var _this = this;\n        if (this.parent.currentViewData.length === 0) {\n            return [];\n        }\n        var data = this.buildSummaryData(input, args);\n        var rows = [];\n        this.getData().forEach(function (row, index) {\n            rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined, start, end));\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw, start, end) {\n        var _this = this;\n        var tmp = [];\n        var indents = this.getIndentByLevel(raw);\n        var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);\n        var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ||\n            !isNullOrUndefined(this.parent.childGrid) ? 1 : 0);\n        this.getColumns(start, end).forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() : CellType.Indent, indents[index], isDetailGridAlone)); });\n        var row = new Row({ data: data, attributes: { class: 'e-summaryrow' } });\n        row.cells = tmp;\n        row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n        return row;\n    };\n    SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent, isDetailGridAlone) {\n        //Get the summary column by display\n        var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n        var attrs = { 'style': { 'textAlign': column.textAlign } };\n        if (indent) {\n            attrs.class = indent;\n        }\n        if (isNullOrUndefined(indent) && isDetailGridAlone) {\n            attrs.class = 'e-detailindentcelltop';\n        }\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(sColumn),\n            'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate\n                || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n            'column': sColumn || {},\n            'attributes': attrs,\n            'cellType': cellType\n        };\n        return new Cell(opt);\n    };\n    SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n        var _this = this;\n        var dummy = [];\n        var summaryRows = this.getData();\n        var single = {};\n        var key = '';\n        summaryRows.forEach(function (row) {\n            single = {};\n            row.columns.forEach(function (column) {\n                single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n            });\n            dummy.push(single);\n        });\n        return dummy;\n    };\n    SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n        return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n    };\n    SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n        var _this = this;\n        var types = column.type;\n        var helper = {};\n        var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n        var group = data;\n        if (!(types instanceof Array)) {\n            types = [column.type];\n        }\n        types.forEach(function (type) {\n            var key = column.field + ' - ' + type.toLowerCase();\n            var disp = column.columnName;\n            var val = type !== 'Custom' && group.aggregates && key in group.aggregates ? group.aggregates[key] :\n                calculateAggregate(type, group.aggregates ? group : data, column, _this.parent);\n            single[disp] = single[disp] || {};\n            single[disp][key] = val;\n            single[disp][type] = !isNullOrUndefined(val) ? formatFn(val) : ' ';\n            if (group.field) {\n                single[disp].field = group.field;\n                single[disp].key = group.key;\n            }\n        });\n        helper.format = column.getFormatter();\n        column.setTemplate(helper);\n        return single;\n    };\n    SummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.Summary;\n    };\n    return SummaryModelGenerator;\n}());\nexport { SummaryModelGenerator };\nvar GroupSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupSummaryModelGenerator, _super);\n    function GroupSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupFooterTemplate !== undefined;\n    };\n    GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n        if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n        return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n    };\n    GroupSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.GroupSummary;\n    };\n    return GroupSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { GroupSummaryModelGenerator };\nvar CaptionSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(CaptionSummaryModelGenerator, _super);\n    function CaptionSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupCaptionTemplate !== undefined;\n    };\n    CaptionSummaryModelGenerator.prototype.getData = function () {\n        var initVal = { columns: [] };\n        return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n                prev.columns = prev.columns.concat(cur.columns);\n                return prev;\n            }, initVal)];\n    };\n    CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n        return (this.getData()[0].columns || []).length === 0;\n    };\n    CaptionSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.CaptionSummary;\n    };\n    return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { CaptionSummaryModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { isNullOrUndefined, extend, setValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { getForeignData } from '../../grid/base/util';\n/**\n * GroupModelGenerator is used to generate group caption rows and data rows.\n * @hidden\n */\nvar GroupModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupModelGenerator, _super);\n    function GroupModelGenerator(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.rows = [];\n        _this.index = 0;\n        _this.parent = parent;\n        _this.summaryModelGen = new GroupSummaryModelGenerator(parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(parent);\n        return _this;\n    }\n    GroupModelGenerator.prototype.generateRows = function (data, args) {\n        if (this.parent.groupSettings.columns.length === 0) {\n            return _super.prototype.generateRows.call(this, data, args);\n        }\n        this.rows = [];\n        this.index = this.parent.enableVirtualization ? args.startIndex : 0;\n        for (var i = 0, len = data.length; i < len; i++) {\n            this.getGroupedRecords(0, data[i], data.level);\n        }\n        this.index = 0;\n        return this.rows;\n    };\n    GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw) {\n        var level = raw;\n        if (isNullOrUndefined(data.items)) {\n            if (isNullOrUndefined(data.GroupGuid)) {\n                this.rows = this.rows.concat(this.generateDataRows(data, index));\n            }\n            else {\n                for (var j = 0, len = data.length; j < len; j++) {\n                    this.getGroupedRecords(index, data[j], data.level);\n                }\n            }\n        }\n        else {\n            this.rows = this.rows.concat(this.generateCaptionRow(data, index));\n            if (data.items && data.items.length) {\n                this.getGroupedRecords(index + 1, data.items, data.items.level);\n            }\n            if (this.parent.aggregates.length) {\n                (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n            }\n        }\n        var _a;\n    };\n    GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n        var _this = this;\n        var cells = [];\n        var visibles = [];\n        var column = this.parent.getColumnByField(field);\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization) {\n            column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n        }\n        var groupedLen = this.parent.groupSettings.columns.length;\n        var gObj = this.parent;\n        if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n            for (var i = 0; i < indent; i++) {\n                cells.push(this.generateIndentCell());\n            }\n            cells.push(this.generateCell({}, null, CellType.Expand));\n        }\n        indent = this.parent.enableColumnVirtualization ? 1 :\n            (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n                indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n        //Captionsummary cells will be added here.    \n        if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n            var captionCells = this.captionModelGen.generateRows(data)[0];\n            extend(data, captionCells.data);\n            var cIndex_1 = 0;\n            captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n            visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n            if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n                visibles = visibles.slice(1);\n            }\n            if (this.parent.getVisibleColumns().length === 1) {\n                visibles = [];\n            }\n            indent = indent - visibles.length;\n        }\n        var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n        var wFlag = true;\n        cols.forEach(function (col, index) {\n            var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n            if (tmpFlag) {\n                wFlag = false;\n            }\n            var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n                CellType.GroupCaption : CellType.GroupCaptionEmpty;\n            indent = _this.parent.enableColumnVirtualization && cellType === CellType.GroupCaption ? indent + groupedLen : indent;\n            cells.push(_this.generateCell(column, null, cellType, indent));\n        });\n        cells.push.apply(cells, visibles);\n        return cells;\n    };\n    GroupModelGenerator.prototype.generateCaptionRow = function (data, indent) {\n        var options = {};\n        var tmp = [];\n        var col = this.parent.getColumnByField(data.field);\n        options.data = extend({}, data);\n        if (col) {\n            options.data.field = data.field;\n        }\n        options.isDataRow = false;\n        var row = new Row(options);\n        row.indent = indent;\n        this.getForeignKeyData(row);\n        row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n        return row;\n    };\n    GroupModelGenerator.prototype.getForeignKeyData = function (row) {\n        var data = row.data;\n        var col = this.parent.getColumnByField(data.field);\n        if (col && col.isForeignColumn && col.isForeignColumn()) {\n            setValue('foreignKey', col.valueAccessor(col.foreignKeyValue, getForeignData(col, {}, data.key)[0], col), row.data);\n        }\n    };\n    GroupModelGenerator.prototype.generateDataRows = function (data, indent) {\n        var rows = [];\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = data.length; i < len; i++) {\n            rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent);\n            for (var j = 0; j < indent; j++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n                    continue;\n                }\n                rows[i].cells.unshift(this.generateIndentCell());\n            }\n            this.index++;\n        }\n        return rows;\n    };\n    GroupModelGenerator.prototype.generateIndentCell = function () {\n        return this.generateCell({}, null, CellType.Indent);\n    };\n    GroupModelGenerator.prototype.refreshRows = function (input) {\n        var _this = this;\n        var indexes = this.parent.getColumnIndexesInView();\n        input.forEach(function (row) {\n            if (row.isDataRow) {\n                row.cells = _this.generateCells(row);\n                for (var j = 0; j < row.indent; j++) {\n                    if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n                        continue;\n                    }\n                    row.cells.unshift(_this.generateIndentCell());\n                }\n            }\n            else {\n                var cRow = _this.generateCaptionRow(row.data, row.indent);\n                row.cells = cRow.cells;\n            }\n        });\n        return input;\n    };\n    return GroupModelGenerator;\n}(RowModelGenerator));\nexport { GroupModelGenerator };\n","import { Droppable } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { createElement, setStyleAttribute, remove } from '@syncfusion/ej2-base';\nimport { getUpdateUsingRaf, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from './row-renderer';\nimport { CellMergeRender } from './cell-merge-renderer';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { getScrollBarWidth } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function ContentRender(parent, serviceLocator) {\n        var _this = this;\n        this.rows = [];\n        this.freezeRows = [];\n        this.movableRows = [];\n        this.isLoaded = true;\n        this.drop = function (e) {\n            _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n            remove(e.droppedElement);\n        };\n        this.rafCallback = function (args) {\n            var arg = args;\n            return function () {\n                _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                var rows = _this.rows.slice(0);\n                if (_this.parent.getFrozenColumns() !== 0) {\n                    rows = args.isFrozen ? _this.freezeRows : _this.movableRows;\n                }\n                _this.parent.notify(events.contentReady, { rows: rows, args: arg });\n                if (_this.isLoaded) {\n                    _this.parent.trigger(events.dataBound, {});\n                    if (_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                    }\n                }\n                if (arg) {\n                    var action = (arg.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, arg);\n                }\n                if (_this.isLoaded) {\n                    _this.parent.hideSpinner();\n                }\n            };\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.generator = this.getModelGenerator();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    /**\n     * The function is used to render grid content div\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var gObj = this.parent;\n        var div = createElement('div', { className: 'e-gridcontent' });\n        var innerDiv = createElement('div', {\n            className: 'e-content'\n        });\n        this.ariaService.setOptions(innerDiv, { busy: false });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        gObj.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid content table\n     */\n    ContentRender.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        contentDiv.appendChild(this.createContentTable('_content_table'));\n        this.setTable(contentDiv.querySelector('.e-table'));\n        this.ariaService.setOptions(this.getTable(), {\n            multiselectable: this.parent.selectionSettings.type === 'Multiple'\n        });\n        this.initializeContentDrop();\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n        }\n    };\n    /**\n     * The function is used to create content table elements\n     * @return {Element}\n     * @hidden\n     */\n    ContentRender.prototype.createContentTable = function (id) {\n        var innerDiv = this.getPanel().firstChild;\n        var table = createElement('table', {\n            className: 'e-table', attrs: {\n                cellspacing: '0.25px', role: 'grid',\n                id: this.parent.element.id + id\n            }\n        });\n        this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n        table.appendChild(this.getColGroup());\n        table.appendChild(createElement('tbody'));\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    ContentRender.prototype.splitRows = function (idx) {\n        if (this.parent.getFrozenColumns()) {\n            if (idx === 0) {\n                this.freezeRows = this.rows;\n                this.freezeRowElements = this.rowElements;\n            }\n            else {\n                this.movableRows = this.rows;\n            }\n        }\n    };\n    /**\n     * Refresh the content of the Grid.\n     * @return {void}\n     */\n    // tslint:disable-next-line:max-func-body-length\n    ContentRender.prototype.refreshContentRows = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        if (gObj.currentViewData.length === 0) {\n            return;\n        }\n        var dataSource = gObj.currentViewData;\n        var frag = document.createDocumentFragment();\n        var hdrfrag = document.createDocumentFragment();\n        var columns = gObj.getColumns();\n        var tr;\n        var hdrTbody;\n        var frzCols = gObj.getFrozenColumns();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        this.rowElements = [];\n        this.rows = [];\n        var fCont = this.getPanel().querySelector('.e-frozencontent');\n        var mCont = this.getPanel().querySelector('.e-movablecontent');\n        var cont = this.getPanel().querySelector('.e-content');\n        var modelData = this.generator.generateRows(dataSource, args);\n        if (isNullOrUndefined(modelData[0].cells[0])) {\n            mCont.querySelector('tbody').innerHTML = '';\n        }\n        var idx = modelData[0].cells[0].index;\n        // tslint:disable-next-line:no-any\n        if (this.parent.registeredTemplate && this.parent.registeredTemplate.template) {\n            this.parent.destroyTemplate(['template']);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n            cellMerge.updateVirtualCells(modelData);\n        }\n        if (frzCols && idx >= frzCols) {\n            this.tbody = mCont.querySelector('tbody');\n        }\n        else {\n            this.tbody = this.getTable().querySelector('tbody');\n        }\n        for (var i = 0, len = modelData.length; i < len; i++) {\n            if (!gObj.rowTemplate) {\n                tr = row.render(modelData[i], columns);\n                if (gObj.frozenRows && i < gObj.frozenRows) {\n                    hdrfrag.appendChild(tr);\n                }\n                else {\n                    frag.appendChild(tr);\n                }\n            }\n            else {\n                var elements = gObj.getRowTemplate()(extend({ index: i }, dataSource[i]), gObj, 'rowTemplate');\n                if (elements[0].tagName === 'TBODY') {\n                    for (var j = 0; j < elements.length; j++) {\n                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n                        }\n                    }\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        hdrfrag.appendChild(tr);\n                    }\n                    else {\n                        frag.appendChild(tr);\n                    }\n                }\n                else {\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        tr = appendChildren(hdrfrag, elements);\n                    }\n                    else {\n                        // frag.appendChild(tr);\n                        tr = appendChildren(frag, elements);\n                    }\n                }\n            }\n            this.rows.push(modelData[i]);\n            if (modelData[i].isDataRow) {\n                //detailrowvisible \n                var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n                if (td) {\n                    td.classList.add('e-detailrowvisible');\n                }\n                this.rowElements.push(tr);\n            }\n            this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n        }\n        this.splitRows(idx);\n        if (gObj.frozenRows) {\n            hdrTbody = frzCols ? gObj.getHeaderContent().querySelector(idx === 0 ? '.e-frozenheader'\n                : '.e-movableheader').querySelector('tbody') : gObj.getHeaderTable().querySelector('tbody');\n            hdrTbody.innerHTML = '';\n            hdrTbody.appendChild(hdrfrag);\n        }\n        if (gObj.frozenRows && idx === 0 && cont.offsetHeight === Number(gObj.height)) {\n            cont.style.height = (cont.offsetHeight - hdrTbody.offsetHeight) + 'px';\n        }\n        if (frzCols && idx === 0) {\n            this.getPanel().firstChild.style.overflowY = 'hidden';\n        }\n        args.rows = this.rows.slice(0);\n        args.isFrozen = this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n        this.index = idx;\n        getUpdateUsingRaf(function () {\n            _this.parent.notify(events.beforeFragAppend, {});\n            if (!_this.parent.enableVirtualization) {\n                remove(_this.tbody);\n                _this.tbody = createElement('tbody');\n            }\n            if (frzCols) {\n                _this.tbody.appendChild(frag);\n                if (_this.index === 0) {\n                    _this.isLoaded = false;\n                    fCont.querySelector('table').appendChild(_this.tbody);\n                }\n                else {\n                    if (_this.tbody.childElementCount < 1) {\n                        _this.tbody.appendChild(createElement('tr').appendChild(createElement('td')));\n                    }\n                    _this.isLoaded = true;\n                    mCont.querySelector('table').appendChild(_this.tbody);\n                    fCont.style.height = ((mCont.offsetHeight) - getScrollBarWidth()) + 'px';\n                    mCont.style.overflowY = _this.parent.height !== 'auto' ? 'scroll' : 'auto';\n                    fCont.style.borderRightWidth = '1px';\n                }\n            }\n            else {\n                _this.appendContent(_this.tbody, frag, args);\n            }\n            if (frzCols && idx === 0) {\n                _this.refreshContentRows(extend({}, args));\n            }\n            frag = null;\n        }, this.rafCallback(extend({}, args)));\n    };\n    ContentRender.prototype.appendContent = function (tbody, frag, args) {\n        tbody.appendChild(frag);\n        this.getTable().appendChild(tbody);\n    };\n    /**\n     * Get the content div element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Set the content div element of grid\n     * @param  {Element} panel\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the content table element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getTable = function () {\n        return this.contentTable;\n    };\n    /**\n     * Set the content table element of grid\n     * @param  {Element} table\n     */\n    ContentRender.prototype.setTable = function (table) {\n        this.contentTable = table;\n    };\n    /**\n     * Get the Row collection in the Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getRows = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRows : this.rows;\n    };\n    /**\n     * Get the Movable Row collection in the Freeze pane Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getMovableRows = function () {\n        return this.movableRows;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getRowElements = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRowElements : this.rowElements;\n    };\n    /**\n     * Get the Freeze pane movable content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getMovableRowElements = function () {\n        return this.rowElements;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.setRowElements = function (elements) {\n        this.rowElements = elements;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    ContentRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    ContentRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Function to hide content table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    ContentRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        var rows = [];\n        if (frzCols) {\n            var fRows = this.freezeRows;\n            var mRows = this.movableRows;\n            var rowLen = fRows.length;\n            var cellLen = void 0;\n            for (var i = 0, row = void 0; i < rowLen; i++) {\n                cellLen = mRows[i].cells.length;\n                row = fRows[i].clone();\n                for (var j = 0; j < cellLen; j++) {\n                    row.cells.push(mRows[i].cells[j]);\n                }\n                rows.push(row);\n            }\n        }\n        else {\n            rows = this.getRows();\n        }\n        var element;\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var tasks = [];\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            //used canSkip method to skip unwanted visible toggle operation. \n            if (this.canSkip(column, testRow, idx)) {\n                continue;\n            }\n            var displayVal = column.visible === true ? '' : 'none';\n            if (frzCols) {\n                if (idx < frzCols) {\n                    setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                }\n                else {\n                    var mTable = gObj.getContent().querySelector('.e-movablecontent').querySelector('colgroup');\n                    setStyleAttribute(mTable.childNodes[idx - frzCols], { 'display': displayVal });\n                }\n            }\n            else {\n                setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n            }\n        }\n        this.refreshContentRows({ requestType: 'refresh' });\n    };\n    ContentRender.prototype.colGroupRefresh = function () {\n        if (this.getColGroup()) {\n            var colGroup = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n            this.getTable().replaceChild(colGroup, this.getColGroup());\n            this.setColGroup(colGroup);\n        }\n    };\n    ContentRender.prototype.initializeContentDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    ContentRender.prototype.canSkip = function (column, row, index) {\n        /**\n         * Skip the toggle visiblity operation when one of the following success\n         * 1. Grid has empty records\n         * 2. column visible property is unchanged\n         * 3. cell`s isVisible property is same as column`s visible property.\n         */\n        return isNullOrUndefined(row) || //(1)\n            isNullOrUndefined(column.visible) || //(2)    \n            row.cells[index].visible === column.visible; //(3)\n    };\n    ContentRender.prototype.getModelGenerator = function () {\n        return this.generator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    };\n    ContentRender.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('tbody').innerHTML = '';\n        }\n    };\n    ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n        if (this.parent.getFrozenColumns()) {\n            this.getMovableRows().filter(function (row) { return clearAll || uid === row.uid; }).forEach(function (row) { return row.isSelected = set; });\n        }\n        this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n            .forEach(function (row) {\n            row.isSelected = set;\n            row.cells.forEach(function (cell) { return cell.isSelected = set; });\n        });\n    };\n    ContentRender.prototype.getRowByIndex = function (index) {\n        return this.parent.getDataRows()[index];\n    };\n    ContentRender.prototype.getVirtualRowIndex = function (index) {\n        return index;\n    };\n    ContentRender.prototype.getMovableRowByIndex = function (index) {\n        return this.parent.getMovableDataRows()[index];\n    };\n    ContentRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'group' && e.enable) {\n            this.generator = this.getModelGenerator();\n        }\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement, setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { parentsUntil, wrap } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.frzIdx = 0;\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.querySelectorAll('.e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element || (!gObj.allowReordering && element.classList.contains('e-stackedheadercell'))) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n            var col;\n            if (headercelldiv) {\n                if (element.querySelector('.e-stackedheadercelldiv')) {\n                    col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n                }\n                else {\n                    col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n                }\n                _this.column = col;\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            if (col && !isNullOrUndefined(col.headerTemplate)) {\n                if (col.headerTemplate.indexOf('#') !== -1) {\n                    visualElement.innerHTML = document.querySelector(col.headerTemplate).innerHTML.trim();\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n            }\n            else {\n                visualElement.textContent = headercelldiv ?\n                    col.headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    return;\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n    }\n    /**\n     * The function is used to render grid header div\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = createElement('div', { className: 'e-gridheader' });\n        var innerDiv = createElement('div', { className: 'e-headercontent' });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        this.parent.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid header table\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.e-table'));\n        if (!this.parent.getFrozenColumns()) {\n            this.initializeHeaderDrag();\n            this.initializeHeaderDrop();\n        }\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.getFrozenColumns() !== 0 } });\n    };\n    /**\n     * Get the header content div element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     * @param  {Element} panel\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     * @param  {Element} table\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     * @return {Element[]}\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     * @return {Element}\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var table = this.createTable();\n        var innerDiv = this.getPanel().firstChild;\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function () {\n        var gObj = this.parent;\n        var columns = gObj.getColumns();\n        var table = createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n        var innerDiv = this.getPanel().firstChild;\n        var findHeaderRow = this.createHeaderContent();\n        var thead = findHeaderRow.thead;\n        var tbody = createElement('tbody', { className: this.parent.frozenRows ? '' : 'e-hide' });\n        this.caption = createElement('caption', { innerHTML: this.parent.element.id + '_header_table', className: 'e-hide' });\n        var colGroup = createElement('colgroup');\n        var rowBody = createElement('tr');\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header);\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n                var cell = rows[i].cells[j];\n                bodyCell = createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        tbody.appendChild(rowBody);\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        table.appendChild(tbody);\n        table.appendChild(this.caption);\n        this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n        return table;\n    };\n    HeaderRender.prototype.createHeaderContent = function () {\n        var gObj = this.parent;\n        var columns = gObj.getColumns();\n        var thead = createElement('thead');\n        var colHeader = createElement('tr', { className: 'e-columnheader' });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = this.getObjDepth();\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[i] = this.generateRow(i);\n            rows[i].cells = [];\n        }\n        rows = this.ensureColumns(rows);\n        rows = this.getHeaderCells(rows);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[i], columns);\n            if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n                headerRow.style.height = this.parent.rowHeight + 'px';\n            }\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = createElement('col');\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = createElement('col');\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = createElement('col');\n            if (cols[i].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                rows[i].cells.push(this.generateCell({}, CellType.DetailHeader));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows) {\n        var column;\n        var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n        var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n        this.frzIdx = 0;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1), thead);\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable) {\n        var lastCol = isLastCol ? 'e-lastcell' : '';\n        var frzCols = this.parent.getFrozenColumns();\n        if (!cols.columns) {\n            if (!frzCols || (frzCols\n                && ((!isMovable && (this.frzIdx < this.parent.frozenColumns || cols.isFrozen))\n                    || (isMovable && this.frzIdx >= this.parent.frozenColumns && !cols.isFrozen)))) {\n                rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n            }\n            this.frzIdx++;\n        }\n        else {\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                var frzObj = this.refreshFrozenHdr(cols.columns, { isPartial: false, isComp: true, cnt: 0 });\n                if (!frzCols || (frzCols\n                    && ((!isMovable && (this.parent.frozenColumns - this.frzIdx > 0 || (frzObj.isPartial)))\n                        || (isMovable && (colSpan + this.frzIdx > this.parent.frozenColumns && !frzObj.isComp))))) {\n                    rows[index].cells.push(new Cell({\n                        cellType: CellType.StackedHeader, column: cols,\n                        colSpan: this.getColSpan(colSpan, isMovable, frzObj.cnt)\n                    }));\n                }\n            }\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol, isMovable);\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.refreshFrozenHdr = function (cols, frzObj) {\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].columns) {\n                frzObj = this.refreshFrozenHdr(cols[i].columns, frzObj);\n            }\n            else {\n                if (cols[i].isFrozen) {\n                    frzObj.isPartial = true;\n                    frzObj.cnt++;\n                }\n                frzObj.isComp = frzObj.isComp && (cols[i].isFrozen ||\n                    this.parent.getColumnIndexByField(cols[i].field) < this.parent.frozenColumns);\n            }\n        }\n        return frzObj;\n    };\n    HeaderRender.prototype.getColSpan = function (colSpan, isMovable, frozenCnt) {\n        var frzCol = this.parent.frozenColumns;\n        if (this.parent.getFrozenColumns() && this.frzIdx + colSpan > frzCol) {\n            if (isMovable) {\n                colSpan = colSpan - (frzCol > this.frzIdx ? frzCol - this.frzIdx : 0) - frozenCnt;\n            }\n            else {\n                colSpan = colSpan - (colSpan - (frzCol > this.frzIdx ? frzCol + frozenCnt - this.frzIdx : frozenCnt));\n            }\n        }\n        return colSpan;\n    };\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = [].slice.call(this.getRows()); //NodeList -> Array        \n        var displayVal = '';\n        var idx;\n        var className;\n        var element;\n        var frzCols = gObj.getFrozenColumns();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            if (column.visible === false) {\n                displayVal = 'none';\n            }\n            if (frzCols) {\n                if (idx < frzCols) {\n                    setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n                }\n                else {\n                    var mTblColGrp = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup');\n                    setStyleAttribute(mTblColGrp.children[idx - frzCols], { 'display': displayVal });\n                }\n            }\n            else {\n                setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            }\n            this.refreshUI();\n        }\n    };\n    HeaderRender.prototype.colPosRefresh = function () {\n        this.refreshUI();\n    };\n    /**\n     * Refresh the header of the Grid.\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var headerDiv = this.getPanel();\n        var table = this.getTable();\n        var frzCols = this.parent.getFrozenColumns();\n        remove(this.getTable());\n        table.removeChild(table.firstChild);\n        table.removeChild(table.childNodes[0]);\n        var colGroup = createElement('colgroup');\n        var findHeaderRow = this.createHeaderContent();\n        this.rows = findHeaderRow.rows;\n        table.insertBefore(findHeaderRow.thead, table.firstChild);\n        this.updateColGroup(colGroup);\n        table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n        this.setTable(table);\n        this.appendContent(table);\n        this.parent.notify(events.colGroupRefresh, {});\n        this.widthService.setWidthToColumns();\n        this.parent.updateDefaultCursor();\n        if (!frzCols) {\n            this.initializeHeaderDrag();\n        }\n        var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            var gCells = [].slice.call(row.querySelectorAll('.e-grouptopleftcell'));\n            if (gCells.length) {\n                gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n            }\n        }\n        if (!frzCols) {\n            this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.getFrozenColumns() !== 0 } });\n        }\n        if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n            wrap(rows, true);\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().firstChild.appendChild(table);\n    };\n    HeaderRender.prototype.getObjDepth = function () {\n        var max = 0;\n        var cols = this.parent.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var depth = this.checkDepth(cols[i], 0);\n            if (max < depth) {\n                max = depth;\n            }\n        }\n        return max + 1;\n    };\n    HeaderRender.prototype.checkDepth = function (col, index) {\n        var max = index;\n        var indices = [];\n        if (col.columns) {\n            index++;\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                indices[i] = this.checkDepth(col.columns[i], index);\n            }\n            for (var j = 0; j < indices.length; j++) {\n                if (max < indices[j]) {\n                    max = indices[j];\n                }\n            }\n            index = max;\n        }\n        return index;\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[i], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n        for (var i = 0, len = headerRows.length; i < len; i++) {\n            var drag = new Draggable(headerRows[i], {\n                dragTarget: '.e-headercell',\n                distance: 5,\n                helper: this.helper,\n                dragStart: this.dragStart,\n                drag: this.drag,\n                dragStop: this.dragStop,\n                abort: '.e-rhandler'\n            });\n        }\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { doesImplementInterface, setStyleAndAttributes, appendChildren } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { foreignKeyData } from '../base/constant';\n/**\n * CellRenderer class which responsible for building cell content.\n * @hidden\n */\nvar CellRenderer = /** @class */ (function () {\n    function CellRenderer(parent, locator) {\n        this.element = createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        this.rowChkBox = createElement('input', { className: 'e-checkselect', attrs: { 'type': 'checkbox' } });\n        this.localizer = locator.getService('localization');\n        this.formatter = locator.getService('valueFormatter');\n        this.parent = parent;\n    }\n    /**\n     * Function to return the wrapper for the TD content\n     * @returns string\n     */\n    CellRenderer.prototype.getGui = function () {\n        return '';\n    };\n    /**\n     * Function to format the cell value.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.format = function (column, value, data) {\n        if (!isNullOrUndefined(column.format)) {\n            value = this.formatter.toView(value, column.getFormatter());\n        }\n        return isNullOrUndefined(value) ? '' : value.toString();\n    };\n    CellRenderer.prototype.evaluate = function (node, cell, data, attributes, fData) {\n        var result;\n        if (cell.column.template) {\n            var literals = ['index'];\n            var dummyData = extend({}, data, (_a = {}, _a[foreignKeyData] = fData, _a));\n            result = cell.column.getColumnTemplate()(extend({ 'index': attributes[literals[0]] }, dummyData), this.parent, 'template');\n            appendChildren(node, result);\n            result = null;\n            node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n                cell.column.headerText);\n            return false;\n        }\n        return true;\n        var _a;\n    };\n    /**\n     * Function to invoke the custom formatter available in the column object.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n        if (!isNullOrUndefined(column.formatter)) {\n            if (doesImplementInterface(column.formatter, 'getValue')) {\n                var formatter = column.formatter;\n                value = new formatter().getValue(column, data);\n            }\n            else if (typeof column.formatter === 'function') {\n                value = column.formatter(column, data);\n            }\n            else {\n                value = column.formatter.getValue(column, data);\n            }\n        }\n        return value;\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.render = function (cell, data, attributes) {\n        return this.refreshCell(cell, data, attributes);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n        var node = this.refreshCell(cell, data, attributes);\n        td.innerHTML = '';\n        var elements = [].slice.call(node.childNodes);\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            td.appendChild(elem);\n        }\n    };\n    CellRenderer.prototype.refreshCell = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var column = cell.column;\n        var fData;\n        if (cell.isForeignKey) {\n            fData = cell.foreignKeyData[0] || (_a = {}, _a[column.foreignKeyValue] = column.format ? null : '', _a);\n        }\n        //Prepare innerHtml\n        var innerHtml = this.getGui();\n        var value = cell.isForeignKey ? this.getValue(column.foreignKeyValue, fData, column) :\n            this.getValue(column.field, data, column);\n        if (column.type === 'date' && !isNullOrUndefined(value)) {\n            value = new Date(value);\n        }\n        value = this.format(column, value, data);\n        innerHtml = value.toString();\n        if (column.type === 'boolean' && !column.displayAsCheckBox) {\n            var localeStr = (value !== 'true' && value !== 'false') ? null : value === 'true' ? 'True' : 'False';\n            innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n        }\n        var fromFormatter = this.invokeFormatter(column, value, data);\n        innerHtml = !isNullOrUndefined(column.formatter) ? isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n        node.setAttribute('aria-label', (innerHtml === '' ? 'empty' : innerHtml) + ' column header ' + cell.column.headerText);\n        if (!isNullOrUndefined(cell.column.headerText)) {\n            node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n        }\n        if (this.evaluate(node, cell, data, attributes, fData) && column.type !== 'checkbox') {\n            this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n        }\n        else if (column.type === 'checkbox') {\n            node.classList.add('e-gridchkbox');\n            node.setAttribute('aria-label', 'checkbox');\n            if (this.parent.selectionSettings.persistSelection) {\n                value = value === 'true';\n            }\n            else {\n                value = false;\n            }\n            var checkWrap = createCheckBox(false, { checked: value, label: ' ' });\n            checkWrap.insertBefore(this.rowChkBox.cloneNode(), checkWrap.firstChild);\n            node.appendChild(checkWrap);\n        }\n        if (this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            cell.isSelected = true;\n        }\n        this.setAttributes(node, cell, attributes);\n        if (column.type === 'boolean' && column.displayAsCheckBox) {\n            var checked = isNaN(parseInt(value.toString(), 10)) ? value === 'true' : parseInt(value.toString(), 10) > 0;\n            var checkWrap = createCheckBox(false, { checked: checked, label: ' ' });\n            node.innerHTML = '';\n            checkWrap.classList.add('e-checkbox-disabled');\n            node.appendChild(checkWrap);\n            node.setAttribute('aria-label', checked + ' column header ' + cell.column.headerText);\n        }\n        return node;\n        var _a;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n        if (property === void 0) { property = 'innerHTML'; }\n        node[property] = innerHtml;\n        return node;\n    };\n    /**\n     * @hidden\n     */\n    CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n        var column = cell.column;\n        this.buildAttributeFromCell(node, cell, column.type === 'checkbox');\n        setStyleAndAttributes(node, attributes);\n        setStyleAndAttributes(node, cell.attributes);\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.textAlign) {\n            node.style.textAlign = column.textAlign;\n        }\n        if (column.clipMode === 'Clip') {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip') {\n            node.classList.add('e-ellipsistooltip');\n        }\n    };\n    CellRenderer.prototype.buildAttributeFromCell = function (node, cell, isCheckBoxType) {\n        var attr = {};\n        var prop = { 'colindex': 'aria-colindex' };\n        var classes = [];\n        if (cell.colSpan) {\n            attr.colSpan = cell.colSpan;\n        }\n        if (cell.rowSpan) {\n            attr.rowSpan = cell.rowSpan;\n        }\n        if (cell.isTemplate) {\n            classes.push('e-templatecell');\n        }\n        if (cell.isSelected) {\n            classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n            if (isCheckBoxType) {\n                node.querySelector('.e-frame').classList.add('e-check');\n            }\n        }\n        if (!isNullOrUndefined(cell.index)) {\n            attr[prop.colindex] = cell.index;\n        }\n        if (!cell.visible) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(node, attr);\n    };\n    CellRenderer.prototype.getValue = function (field, data, column) {\n        return column.valueAccessor(field, data, column);\n    };\n    return CellRenderer;\n}());\nexport { CellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { createElement, attributes } from '@syncfusion/ej2-base';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { AriaService } from '../services/aria-service';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { headerCellInfo } from '../base/constant';\n/**\n * HeaderCellRenderer class which responsible for building header cell content.\n * @hidden\n */\nvar HeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderCellRenderer, _super);\n    function HeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n        _this.ariaService = new AriaService();\n        _this.hTxtEle = createElement('span', { className: 'e-headertext' });\n        _this.sortEle = createElement('div', { className: 'e-sortfilterdiv e-icons' });\n        _this.gui = createElement('div');\n        _this.chkAllBox = createElement('input', { className: 'e-checkselectall', attrs: { 'type': 'checkbox' } });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    HeaderCellRenderer.prototype.getGui = function () {\n        return this.gui.cloneNode();\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var fltrMenuEle = createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Element} node\n     */\n    HeaderCellRenderer.prototype.refresh = function (cell, node) {\n        this.clean(node);\n        var fltrMenuEle = createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    HeaderCellRenderer.prototype.clean = function (node) {\n        node.innerHTML = '';\n    };\n    HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n        var column = cell.column;\n        var ariaAttr = {};\n        //Prepare innerHtml\n        var innerDIV = this.getGui();\n        attributes(innerDIV, {\n            'e-mappinguid': column.uid,\n            'class': 'e-headercelldiv'\n        });\n        if (column.type !== 'checkbox') {\n            var value = column.headerText;\n            var headerText = this.hTxtEle.cloneNode();\n            headerText[column.getDomSetter()] = value;\n            innerDIV.appendChild(headerText);\n        }\n        else {\n            column.editType = 'booleanedit';\n            var checkAllWrap = createCheckBox(false, { checked: false, label: ' ' });\n            checkAllWrap.insertBefore(this.chkAllBox.cloneNode(), checkAllWrap.firstChild);\n            innerDIV.appendChild(checkAllWrap);\n            innerDIV.classList.add('e-headerchkcelldiv');\n        }\n        this.buildAttributeFromCell(node, cell);\n        this.appendHtml(node, innerDIV);\n        node.appendChild(this.sortEle.cloneNode());\n        if ((this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') &&\n            (column.allowFiltering && !isNullOrUndefined(column.field)) &&\n            !(this.parent.showColumnMenu && column.showColumnMenu)) {\n            attributes(fltrMenuEle, {\n                'e-mappinguid': 'e-flmenu-' + column.uid,\n            });\n            node.classList.add('e-fltr-icon');\n            var matchFlColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n                for (var index = 0; index < this.parent.columns.length; index++) {\n                    for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n                        if (this.parent.filterSettings.columns[count].field === column.field) {\n                            fltrMenuEle.classList.add('e-filtered');\n                            matchFlColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.appendChild(fltrMenuEle.cloneNode());\n        }\n        if (cell.className) {\n            node.classList.add(cell.className);\n        }\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.allowSorting) {\n            ariaAttr.sort = 'none';\n        }\n        if (column.allowGrouping) {\n            ariaAttr.grabbed = false;\n        }\n        node = this.extendPrepareHeader(column, node);\n        var result;\n        var gridObj = this.parent;\n        var colIndex = gridObj.getColumnIndexByField(column.field);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            result = column.getHeaderTemplate()(extend({ 'index': colIndex }, column), gridObj, 'headerTemplate');\n            node.firstElementChild.innerHTML = '';\n            appendChildren(node.firstElementChild, result);\n        }\n        this.ariaService.setOptions(node, ariaAttr);\n        if (!isNullOrUndefined(column.headerTextAlign) || !isNullOrUndefined(column.textAlign)) {\n            var alignment = column.headerTextAlign || column.textAlign;\n            innerDIV.style.textAlign = alignment;\n            if (alignment === 'Right' || alignment === 'Left') {\n                node.classList.add(alignment === 'Right' ? 'e-rightalign' : 'e-leftalign');\n            }\n            else if (alignment === 'Center') {\n                node.classList.add('e-centeralign');\n            }\n        }\n        if (column.clipMode === 'Clip') {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip') {\n            node.classList.add('e-ellipsistooltip');\n        }\n        node.setAttribute('aria-rowspan', (!isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n        node.setAttribute('aria-colspan', '1');\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n        if (this.parent.showColumnMenu && column.showColumnMenu && !isNullOrUndefined(column.field)) {\n            var element = (createElement('div', { className: 'e-icons e-columnmenu' }));\n            var matchFilteredColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n                for (var i = 0; i < this.parent.columns.length; i++) {\n                    for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n                        if (this.parent.filterSettings.columns[j].field === column.field) {\n                            element.classList.add('e-filtered');\n                            matchFilteredColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.classList.add('e-fltr-icon');\n            node.appendChild(element);\n        }\n        if (this.parent.allowResizing) {\n            var handler = createElement('div');\n            handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return HeaderCellRenderer;\n}(CellRenderer));\nexport { HeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { headerCellInfo } from '../base/constant';\n/**\n * StackedHeaderCellRenderer class which responsible for building stacked header cell content.\n * @hidden\n */\nvar StackedHeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(StackedHeaderCellRenderer, _super);\n    function StackedHeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TH', {\n            className: 'e-headercell e-stackedheadercell', attrs: {\n                role: 'columnheader',\n                tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var div = createElement('div', { className: 'e-stackedheadercelldiv' });\n        node.appendChild(div);\n        div.innerHTML = cell.column.headerText;\n        if (cell.column.toolTip) {\n            node.setAttribute('title', cell.column.toolTip);\n        }\n        if (!isNullOrUndefined(cell.column.textAlign)) {\n            div.style.textAlign = cell.column.textAlign;\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-colspan', cell.colSpan.toString());\n        node.setAttribute('aria-rowspan', '1');\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    return StackedHeaderCellRenderer;\n}(CellRenderer));\nexport { StackedHeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\n/**\n * IndentCellRenderer class which responsible for building group indent cell.\n * @hidden\n */\nvar IndentCellRenderer = /** @class */ (function (_super) {\n    __extends(IndentCellRenderer, _super);\n    function IndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TD', { className: 'e-indentcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    IndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        setStyleAndAttributes(node, cell.attributes);\n        return node;\n    };\n    return IndentCellRenderer;\n}(CellRenderer));\nexport { IndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren, templateCompiler } from '../base/util';\n/**\n * GroupCaptionCellRenderer class which responsible for building group caption cell.\n * @hidden\n */\nvar GroupCaptionCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionCellRenderer, _super);\n    function GroupCaptionCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TD', { className: 'e-groupcaption', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        var gObj = this.parent;\n        var result;\n        var helper = {};\n        var fKeyValue;\n        if (cell.isForeignKey) {\n            fKeyValue = this.format(cell.column, cell.column.valueAccessor('foreignKey', data, cell.column));\n        }\n        var value = cell.isForeignKey ? fKeyValue : cell.column.enableGroupByFormat ? data.key :\n            this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n        if (!isNullOrUndefined(gObj.groupSettings.captionTemplate)) {\n            if (gObj.groupSettings.captionTemplate.indexOf('#') !== -1) {\n                result = templateCompiler(document.querySelector(gObj.groupSettings.captionTemplate).innerHTML.trim())(data);\n            }\n            else {\n                result = templateCompiler(gObj.groupSettings.captionTemplate)(data);\n            }\n            appendChildren(node, result);\n        }\n        else {\n            node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n                (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n        node.setAttribute('title', node.innerHTML);\n        return node;\n    };\n    return GroupCaptionCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionCellRenderer };\n/**\n * GroupCaptionEmptyCellRenderer class which responsible for building group caption empty cell.\n * @hidden\n */\nvar GroupCaptionEmptyCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionEmptyCellRenderer, _super);\n    function GroupCaptionEmptyCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TD', { className: 'e-groupcaption' });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.innerHTML = '&nbsp;';\n        node.setAttribute('colspan', cell.colSpan.toString());\n        return node;\n    };\n    return GroupCaptionEmptyCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionEmptyCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { IndentCellRenderer } from './indent-cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar ExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(ExpandCellRenderer, _super);\n    function ExpandCellRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Function to render the expand cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    ExpandCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.className = 'e-recordplusexpand';\n        node.setAttribute('ej-mappingname', data.field);\n        node.setAttribute('ej-mappingvalue', data.key);\n        node.setAttribute('aria-expanded', 'true');\n        node.setAttribute('tabindex', '-1');\n        node.appendChild(createElement('div', { className: 'e-icons e-gdiagonaldown e-icon-gdownarrow' }));\n        return node;\n    };\n    return ExpandCellRenderer;\n}(IndentCellRenderer));\nexport { ExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * HeaderIndentCellRenderer class which responsible for building header indent cell.\n * @hidden\n */\nvar HeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderIndentCellRenderer, _super);\n    function HeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TH', { className: 'e-grouptopleftcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '' }));\n        return node;\n    };\n    return HeaderIndentCellRenderer;\n}(CellRenderer));\nexport { HeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n * @hidden\n */\nvar DetailHeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailHeaderIndentCellRenderer, _super);\n    function DetailHeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TH', { className: 'e-detailheadercell' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return DetailHeaderIndentCellRenderer;\n}(CellRenderer));\nexport { DetailHeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar DetailExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailExpandCellRenderer, _super);\n    function DetailExpandCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TD', {\n            className: 'e-detailrowcollapse',\n            attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     */\n    DetailExpandCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        if (attributes && !isNullOrUndefined(attributes['class'])) {\n            node.className = '';\n            node.className = attributes['class'];\n            node.appendChild(createElement('div', { className: 'e-icons e-dtdiagonaldown e-icon-gdownarrow' }));\n        }\n        else {\n            node.appendChild(createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n        }\n        return node;\n    };\n    return DetailExpandCellRenderer;\n}(CellRenderer));\nexport { DetailExpandCellRenderer };\n","import { createElement, remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, setFormatter, getDatePredicate } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function Render(parent, locator) {\n        this.emptyGrid = false;\n        this.parent = parent;\n        this.locator = locator;\n        this.data = new Data(parent, locator);\n        this.l10n = locator.getService('localization');\n        this.ariaService = this.locator.getService('ariaService');\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize grid header, content and footer rendering\n     */\n    Render.prototype.render = function () {\n        var gObj = this.parent;\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer.renderPanel();\n        this.contentRenderer.renderPanel();\n        if (gObj.getColumns().length) {\n            this.headerRenderer.renderTable();\n            this.contentRenderer.renderTable();\n            this.emptyRow(false);\n        }\n        this.refreshDataManager();\n    };\n    /**\n     * Refresh the entire Grid.\n     * @return {void}\n     */\n    Render.prototype.refresh = function (e) {\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        this.parent.notify(e.requestType + \"-begin\", e);\n        this.parent.trigger(events.actionBegin, e);\n        if (e.cancel) {\n            return;\n        }\n        this.refreshDataManager(e);\n    };\n    Render.prototype.refreshComplete = function (e) {\n        this.parent.trigger(events.actionComplete, e);\n    };\n    /**\n     * The function is used to refresh the dataManager\n     * @return {void}\n     */\n    Render.prototype.refreshDataManager = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        if (args.requestType !== 'virtualscroll') {\n            this.parent.showSpinner();\n        }\n        this.emptyGrid = false;\n        var dataManager;\n        var isFActon = this.isNeedForeignAction();\n        this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n        if (isFActon) {\n            var deffered = new Deferred();\n            dataManager = this.getFData(deffered);\n        }\n        if (!dataManager) {\n            dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n        }\n        else {\n            dataManager = dataManager.then(function (e) {\n                var query = _this.data.generateQuery().requiresCount();\n                if (_this.emptyGrid) {\n                    var def = new Deferred();\n                    def.resolve({ result: [], count: 0 });\n                    return def.promise;\n                }\n                return _this.data.getData(args, query);\n            });\n        }\n        if (this.parent.getForeignKeyColumns().length && (!isFActon || this.parent.searchSettings.key.length)) {\n            var deffered_1 = new Deferred();\n            dataManager = dataManager.then(function (e) {\n                _this.parent.notify(events.getForeignKeyData, { dataManager: dataManager, result: e, promise: deffered_1 });\n                return deffered_1.promise;\n            });\n        }\n        if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n            dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n        }\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n            .catch(function (e) { return _this.dataManagerFailure(e, args); });\n    };\n    Render.prototype.getFData = function (deferred) {\n        this.parent.notify(events.getForeignKeyData, { isComplex: true, promise: deferred });\n        return deferred.promise;\n    };\n    Render.prototype.isNeedForeignAction = function () {\n        var gObj = this.parent;\n        return !!((gObj.allowFiltering && gObj.filterSettings.columns.length) ||\n            (gObj.searchSettings.key.length)) && this.foreignKey(this.parent.getForeignKeyColumns());\n    };\n    Render.prototype.foreignKey = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            var fbool = false;\n            fbool = _this.parent.filterSettings.columns.some(function (value) {\n                return col.foreignKeyValue === value.field;\n            });\n            return !!(fbool || _this.parent.searchSettings.key.length);\n        });\n    };\n    Render.prototype.sendBulkRequest = function (args) {\n        var _this = this;\n        var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0]);\n        var query = this.data.generateQuery().requiresCount();\n        if (this.data.dataManager.dataSource.offline) {\n            this.refreshDataManager({ requestType: 'batchsave' });\n            return;\n        }\n        else {\n            promise.then(function (e) {\n                _this.data.getData(args, query)\n                    .then(function (e) { return _this.dmSuccess(e, args); })\n                    .catch(function (e) { return _this.dmFailure(e, args); });\n            })\n                .catch(function (e) { return _this.dmFailure(e, args); });\n        }\n    };\n    Render.prototype.dmSuccess = function (e, args) {\n        this.dataManagerSuccess(e, args);\n    };\n    Render.prototype.dmFailure = function (e, args) {\n        this.dataManagerFailure(e, args);\n    };\n    /**\n     * Render empty row to Grid which is used at the time to represent to no records.\n     * @return {void}\n     * @hidden\n     */\n    Render.prototype.renderEmptyRow = function () {\n        this.emptyRow(true);\n    };\n    Render.prototype.emptyRow = function (isTrigger) {\n        var gObj = this.parent;\n        var tbody = this.contentRenderer.getTable().querySelector('tbody');\n        var tr;\n        remove(tbody);\n        tbody = createElement('tbody');\n        tr = createElement('tr', { className: 'e-emptyrow' });\n        tr.appendChild(createElement('td', {\n            innerHTML: this.l10n.getConstant('EmptyRecord'),\n            attrs: { colspan: gObj.getColumns().length.toString() }\n        }));\n        tbody.appendChild(tr);\n        this.contentRenderer.renderEmpty(tbody);\n        if (isTrigger) {\n            this.parent.trigger(events.dataBound, {});\n            this.parent.notify(events.onEmpty, { rows: [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })] });\n        }\n    };\n    Render.prototype.dynamicColumnChange = function () {\n        if (this.parent.getCurrentViewRecords().length) {\n            this.updateColumnType(this.parent.getCurrentViewRecords()[0]);\n        }\n    };\n    Render.prototype.updateColumnType = function (record) {\n        var columns = this.parent.getColumns();\n        var value;\n        var data = record && record.items ? record.items[0] : record;\n        var fmtr = this.locator.getService('valueFormatter');\n        for (var i = 0, len = columns.length; i < len; i++) {\n            value = DataUtil.getObject(columns[i].field || '', data);\n            if (columns[i].isForeignColumn() && columns[i].columnData) {\n                value = DataUtil.getObject(columns[i].foreignKeyValue || '', columns[i].columnData[0]);\n            }\n            if (!isNullOrUndefined(value)) {\n                this.isColTypeDef = true;\n                if (!columns[i].type) {\n                    columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n                        value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n                }\n            }\n            else {\n                columns[i].type = columns[i].type || null;\n            }\n            var valueFormatter = new ValueFormatter();\n            if (columns[i].format && (columns[i].format.skeleton || columns[i].format.format)) {\n                columns[i].setFormatter(valueFormatter.getFormatFunction(columns[i].format));\n                columns[i].setParser(valueFormatter.getParserFunction(columns[i].format));\n            }\n            if (typeof (columns[i].format) === 'string') {\n                setFormatter(this.locator, columns[i]);\n            }\n            else if (!columns[i].format && columns[i].type === 'number') {\n                columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n            }\n        }\n    };\n    Render.prototype.dataManagerSuccess = function (e, args) {\n        var gObj = this.parent;\n        gObj.trigger(events.beforeDataBound, e);\n        var len = Object.keys(e.result).length;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.isEdit = false;\n        this.parent.notify(events.tooltipDestroy, {});\n        gObj.currentViewData = e.result;\n        if (!len && e.count && gObj.allowPaging) {\n            gObj.prevPageMoving = true;\n            gObj.pageSettings.totalRecordsCount = e.count;\n            gObj.pageSettings.currentPage = Math.ceil(e.count / gObj.pageSettings.pageSize);\n            gObj.dataBind();\n            return;\n        }\n        if (!gObj.getColumns().length && len) {\n            this.updatesOnInitialRender(e);\n        }\n        if (!this.isColTypeDef && gObj.getCurrentViewRecords()) {\n            this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n        }\n        this.parent.notify(events.dataReady, extend({ count: e.count, result: e.result, aggregates: e.aggregates }, args));\n        if (gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping')) {\n            this.headerRenderer.refreshUI();\n        }\n        if (len) {\n            this.contentRenderer.refreshContentRows(args);\n        }\n        else {\n            if (!gObj.getColumns().length) {\n                gObj.element.innerHTML = '';\n                alert(this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n                return;\n            }\n            this.contentRenderer.setRowElements([]);\n            this.renderEmptyRow();\n            if (args) {\n                var action = (args.requestType || '').toLowerCase() + '-complete';\n                this.parent.notify(action, args);\n            }\n            this.parent.hideSpinner();\n        }\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    Render.prototype.dataManagerFailure = function (e, args) {\n        this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.hideSpinner();\n        if (args.requestType === 'save' || args.requestType === 'delete'\n            || args.name === 'bulk-save') {\n            return;\n        }\n        this.parent.currentViewData = [];\n        this.renderEmptyRow();\n    };\n    Render.prototype.updatesOnInitialRender = function (e) {\n        this.buildColumns(e.result[0]);\n        prepareColumns(this.parent.columns);\n        this.headerRenderer.renderTable();\n        this.contentRenderer.renderTable();\n        this.parent.notify(events.autoCol, {});\n    };\n    Render.prototype.buildColumns = function (record) {\n        var columns = Object.keys(record);\n        var cols = [];\n        for (var i = 0, len = columns.length; i < len; i++) {\n            cols[i] = { 'field': columns[i] };\n            if (this.parent.enableColumnVirtualization) {\n                cols[i].width = !isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n            }\n        }\n        this.parent.columns = cols;\n    };\n    Render.prototype.instantiateRenderer = function () {\n        this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n        this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        var cellrender = this.locator.getService('cellRendererFactory');\n        cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n    };\n    Render.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.refreshComplete, this.refreshComplete, this);\n        this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n        this.parent.on(events.showEmptyGrid, function () { _this.emptyGrid = true; }, this);\n        this.parent.on(events.autoCol, this.dynamicColumnChange, this);\n    };\n    /** @hidden */\n    Render.prototype.validateGroupRecords = function (e) {\n        var _this = this;\n        var index = e.result.length - 1;\n        if (index < 0) {\n            return Promise.resolve(e);\n        }\n        var group0 = e.result[0];\n        var groupN = e.result[index];\n        var predicate = [];\n        var addWhere = function (input) {\n            [group0, groupN].forEach(function (group) {\n                return predicate.push(new Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n            });\n            input.where(Predicate.or(predicate));\n        };\n        var query = new Query();\n        addWhere(query);\n        var curDm = new DataManager(e.result);\n        var curFilter = curDm.executeLocal(query);\n        var newQuery = this.data.generateQuery(true);\n        var rPredicate = [];\n        if (this.data.isRemote()) {\n            [group0, groupN].forEach(function (group) {\n                return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n            });\n            newQuery.where(Predicate.or(rPredicate));\n        }\n        else {\n            addWhere(newQuery);\n        }\n        var deferred = new Deferred();\n        this.data.getData({}, newQuery).then(function (r) {\n            _this.updateGroupInfo(curFilter, r.result);\n            deferred.resolve(e);\n        }).catch(function (e) { return deferred.reject(e); });\n        return deferred.promise;\n    };\n    Render.prototype.getPredicate = function (key, operator, value) {\n        if (value instanceof Date) {\n            return getDatePredicate({ field: key, operator: operator, value: value });\n        }\n        return new Predicate(key, operator, value);\n    };\n    Render.prototype.updateGroupInfo = function (current, untouched) {\n        var _this = this;\n        var dm = new DataManager(untouched);\n        current.forEach(function (element, index, array) {\n            var uGroup = dm.executeLocal(new Query()\n                .where(new Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n            element.count = uGroup.count;\n            var itemGroup = element.items;\n            var uGroupItem = uGroup.items;\n            if (itemGroup.GroupGuid) {\n                element.items = _this.updateGroupInfo(element.items, uGroup.items);\n            }\n            _this.parent.aggregates.forEach(function (row) {\n                return row.columns.forEach(function (column) {\n                    var types = column.type instanceof Array ? column.type : [column.type];\n                    types.forEach(function (type) {\n                        var key = column.field + ' - ' + type.toLowerCase();\n                        var data = itemGroup.level ? uGroupItem.records : uGroup.items;\n                        var context = _this.parent;\n                        if (type === 'Custom') {\n                            element.aggregates[key] = column.customAggregate ? column.customAggregate.call(context, data, column) : '';\n                        }\n                        else {\n                            element.aggregates[key] = DataUtil.aggregates[type.toLowerCase()](data, column.field);\n                        }\n                    });\n                });\n            });\n        });\n        return current;\n    };\n    return Render;\n}());\nexport { Render };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\n/**\n * CellRendererFactory\n * @hidden\n */\nvar CellRendererFactory = /** @class */ (function () {\n    function CellRendererFactory() {\n        this.cellRenderMap = {};\n    }\n    CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            this.cellRenderMap[name] = type;\n        }\n    };\n    CellRendererFactory.prototype.getCellRenderer = function (name) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            throw \"The cellRenderer \" + name + \" is not found\";\n        }\n        else {\n            return this.cellRenderMap[name];\n        }\n    };\n    return CellRendererFactory;\n}());\nexport { CellRendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * ServiceLocator\n * @hidden\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[name])) {\n            this.services[name] = type;\n        }\n    };\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[name])) {\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[name];\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n * @hidden\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            this.rendererMap[rName] = type;\n        }\n    };\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { columnWidthChanged } from '../base/constant';\nimport { Column } from '../models/column';\n/**\n * ColumnWidthService\n * @hidden\n */\nvar ColumnWidthService = /** @class */ (function () {\n    function ColumnWidthService(parent) {\n        this.parent = parent;\n    }\n    ColumnWidthService.prototype.setWidthToColumns = function () {\n        var _this = this;\n        var i = 0;\n        var indexes = this.parent.getColumnIndexesInView();\n        var wFlag = true;\n        if (this.parent.allowGrouping) {\n            for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    wFlag = false;\n                    continue;\n                }\n                this.setColumnWidth(new Column({ width: '30px' }), i);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n        }\n        this.parent.getColumns().forEach(function (column, index) {\n            _this.setColumnWidth(column, wFlag ? undefined : index);\n        });\n    };\n    ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n        var columnIndex = isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n        var cWidth = this.getWidth(column);\n        if (cWidth !== null) {\n            this.setWidth(cWidth, columnIndex);\n            if ((this.parent.allowResizing && module === 'resize') || (this.parent.getFrozenColumns() && this.parent.allowResizing)) {\n                this.setWidthToTable();\n            }\n            this.parent.notify(columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n        }\n    };\n    ColumnWidthService.prototype.setWidth = function (width, index) {\n        if (typeof (width) === 'string' && width.indexOf('%') !== -1) {\n            var elementWidth = this.parent.element.offsetWidth;\n            width = parseInt(width, 10) / 100 * (elementWidth);\n        }\n        var header = this.parent.getHeaderTable();\n        var content = this.parent.getContentTable();\n        var fWidth = formatUnit(width);\n        var headerCol;\n        var frzCols = this.parent.getFrozenColumns();\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        if (frzCols && index >= frzCols && mHdr && mHdr.querySelector('colgroup')) {\n            headerCol = mHdr.querySelector('colgroup').children[index - frzCols];\n        }\n        else {\n            headerCol = header.querySelector('colgroup').children[index];\n        }\n        if (headerCol) {\n            headerCol.style.width = fWidth;\n        }\n        var contentCol;\n        if (frzCols && index >= frzCols) {\n            contentCol = this.parent.getContent().querySelector('.e-movablecontent')\n                .querySelector('colgroup').children[index - frzCols];\n        }\n        else {\n            contentCol = content.querySelector('colgroup').children[index];\n        }\n        if (contentCol) {\n            contentCol.style.width = fWidth;\n        }\n        var edit = content.querySelector('.e-table.e-inline-edit');\n        if (edit) {\n            if (edit.querySelector('colgroup').children[index]) {\n                edit.querySelector('colgroup').children[index].style.width = fWidth;\n            }\n        }\n    };\n    ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n        var previous = this.getHeightFromDirection(element, 'previous');\n        var next = this.getHeightFromDirection(element, 'next');\n        return previous + next;\n    };\n    ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n        var sibling = element[direction + 'ElementSibling'];\n        var result = 0;\n        var classList = ['e-gridheader', 'e-gridfooter', 'e-groupdroparea', 'e-gridpager', 'e-toolbar'];\n        while (sibling) {\n            if (classList.some(function (value) { return sibling.classList.contains(value); })) {\n                result += sibling.offsetHeight;\n            }\n            sibling = sibling[direction + 'ElementSibling'];\n        }\n        return result;\n    };\n    ColumnWidthService.prototype.getWidth = function (column) {\n        if (isNullOrUndefined(column.width) && this.parent.allowResizing) {\n            column.width = 200;\n        }\n        if (!column.width) {\n            return null;\n        }\n        var width = parseInt(column.width.toString(), 10);\n        if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n            return column.minWidth;\n        }\n        else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n            return column.maxWidth;\n        }\n        else {\n            return column.width;\n        }\n    };\n    ColumnWidthService.prototype.getTableWidth = function (columns) {\n        var tWidth = 0;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            var cWidth = this.getWidth(column);\n            if (column.visible !== false && cWidth !== null) {\n                tWidth += parseInt(cWidth.toString(), 10);\n            }\n        }\n        return tWidth;\n    };\n    ColumnWidthService.prototype.setWidthToFrozenTable = function () {\n        var columns = this.parent.getColumns();\n        columns.splice(this.parent.getFrozenColumns(), columns.length);\n        var freezeWidth = formatUnit(this.getTableWidth(columns));\n        this.parent.getHeaderTable().style.width = freezeWidth;\n        this.parent.getContentTable().style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableTable = function () {\n        var columns = this.parent.getColumns();\n        columns.splice(0, this.parent.getFrozenColumns());\n        var movableWidth = formatUnit(this.getTableWidth(columns));\n        if (this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild) {\n            this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild.style.width\n                = movableWidth;\n        }\n        this.parent.getContent().querySelector('.e-movablecontent').firstElementChild.style.width =\n            movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToTable = function () {\n        var tWidth = formatUnit(this.getTableWidth(this.parent.getColumns()));\n        if (this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenTable();\n            this.setWidthToMovableTable();\n        }\n        else {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.setColumnWidth(new Column({ width: '30px' }));\n            }\n            this.parent.getHeaderTable().style.width = tWidth;\n            this.parent.getContentTable().style.width = tWidth;\n        }\n        var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n        if (edit) {\n            edit.style.width = tWidth;\n        }\n    };\n    return ColumnWidthService;\n}());\nexport { ColumnWidthService };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, getValue, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, extend, Browser } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport * as event from '../base/constant';\n/**\n * FocusStrategy class\n * @hidden\n */\nvar FocusStrategy = /** @class */ (function () {\n    function FocusStrategy(parent) {\n        this.currentInfo = {};\n        this.oneTime = true;\n        this.swap = {};\n        this.forget = true;\n        this.skipFocus = true;\n        this.focusByClick = false;\n        this.prevIndexes = {};\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FocusStrategy.prototype.focusCheck = function (e) {\n        var target = e.target;\n        this.focusByClick = true;\n        this.skipFocus = target.classList.contains('e-grid');\n    };\n    FocusStrategy.prototype.onFocus = function () {\n        if (this.parent.isDestroyed || Browser.isDevice || this.parent.enableVirtualization) {\n            return;\n        }\n        this.setActive(this.parent.frozenRows === 0, this.parent.frozenColumns !== 0);\n        var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n        this.getContent().matrix.select(current[0], current[1]);\n        if (this.skipFocus) {\n            this.focus();\n            this.skipFocus = false;\n        }\n    };\n    FocusStrategy.prototype.passiveFocus = function (e) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (e.target && e.target.classList.contains('e-detailcell')) {\n            this.currentInfo.skipAction = false;\n            addClass([this.currentInfo.element], ['e-focused', 'e-focus']);\n        }\n    };\n    FocusStrategy.prototype.onBlur = function (e) {\n        if ((this.parent.isEdit || e && (!e.relatedTarget || closest(e.relatedTarget, '.e-grid')))) {\n            return;\n        }\n        this.removeFocus();\n        this.skipFocus = false;\n        this.currentInfo.skipAction = false;\n        if (this.getContent().getFocusInfo().elementToFocus) {\n            this.getContent().getFocusInfo().elementToFocus.tabIndex = 0;\n        }\n    };\n    FocusStrategy.prototype.onClick = function (e, force) {\n        var isContent = !isNullOrUndefined(closest(e.target, '.e-gridcontent'));\n        var isHeader = !isNullOrUndefined(closest(e.target, '.e-gridheader'));\n        isContent = isContent && isHeader ? !isContent : isContent;\n        var isFrozen = !isNullOrUndefined(closest(e.target, '.e-frozencontent')) ||\n            !isNullOrUndefined(closest(e.target, '.e-frozenheader'));\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-content')) {\n            return;\n        }\n        this.setActive(isContent, isFrozen);\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-filtermenudiv')) {\n            this.clearOutline();\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: false, byClick: !isNullOrUndefined(e.target), clickArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel || closest(e.target, '.e-inline-edit')) {\n            return;\n        }\n        this.setActive(isContent, isFrozen);\n        if (this.getContent()) {\n            var returnVal = this.getContent().onClick(e, force);\n            if (returnVal === false) {\n                return;\n            }\n            this.focus();\n        }\n    };\n    FocusStrategy.prototype.onKeyPress = function (e) {\n        if (this.skipOn(e)) {\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel) {\n            return;\n        }\n        var bValue = this.getContent().matrix.current;\n        this.currentInfo.outline = true;\n        var swapInfo = this.getContent().jump(e.action, bValue);\n        this.swap = swapInfo;\n        if (swapInfo.swap) {\n            this.setActive(!swapInfo.toHeader, swapInfo.toFrozen);\n            this.getContent().matrix.current = this.getContent().getNextCurrent(bValue, swapInfo, this.active, e.action);\n            this.prevIndexes = {};\n        }\n        this.setActiveByKey(e.action, this.getContent());\n        var returnVal = this.getContent().onKeyPress(e);\n        if (returnVal === false) {\n            this.clearIndicator();\n            return;\n        }\n        e.preventDefault();\n        this.focus(e);\n    };\n    FocusStrategy.prototype.skipOn = function (e) {\n        var target = e.target;\n        if (!target) {\n            return false;\n        }\n        if (this.currentInfo.skipAction) {\n            this.clearIndicator();\n            return true;\n        }\n        if (['pageUp', 'pageDown'].indexOf(e.action) > -1) {\n            this.clearIndicator();\n            return true;\n        }\n        return (e.action === 'delete'\n            || (this.parent.editSettings.mode !== 'Batch' && (this.parent.isEdit || ['insert', 'f2'].indexOf(e.action) > -1))\n            || (closest(document.activeElement, '.e-filterbarcell') !== null ||\n                closest(document.activeElement, '#' + this.parent.element.id + '_searchbar') !== null\n                    && ['enter', 'leftArrow', 'rightArrow',\n                        'shiftLeft', 'shiftRight', 'ctrlPlusA'].indexOf(e.action) > -1)\n            || (closest(target, '.e-gridcontent') === null && closest(target, '.e-gridheader') === null)\n            || (e.action === 'space' && (!target.classList.contains('e-gridchkbox') && closest(target, '.e-gridchkbox') === null\n                && closest(target, '.e-headerchkcelldiv') === null)));\n    };\n    FocusStrategy.prototype.getFocusedElement = function () {\n        return this.currentInfo.elementToFocus;\n    };\n    FocusStrategy.prototype.getContent = function () {\n        return this.active || this.content;\n    };\n    FocusStrategy.prototype.setActive = function (content, isFrozen) {\n        this.active = content ? isFrozen ? this.fContent : this.content :\n            isFrozen ? this.fHeader : this.header;\n    };\n    FocusStrategy.prototype.setFocusedElement = function (element) {\n        var _this = this;\n        this.currentInfo.elementToFocus = element;\n        setTimeout(function () { return _this.currentInfo.elementToFocus.focus(); }, 0);\n    };\n    FocusStrategy.prototype.focus = function (e) {\n        this.removeFocus();\n        this.addFocus(this.getContent().getFocusInfo(), e);\n    };\n    FocusStrategy.prototype.removeFocus = function (e) {\n        if (!this.currentInfo.element) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focused', 'e-focus']);\n        this.currentInfo.element.tabIndex = -1;\n    };\n    FocusStrategy.prototype.addFocus = function (info, e) {\n        this.currentInfo = info;\n        this.currentInfo.outline = info.outline && !isNullOrUndefined(e);\n        if (!info.element) {\n            return;\n        }\n        var isFocused = info.elementToFocus.classList.contains('e-focus');\n        if (isFocused) {\n            return;\n        }\n        if (this.currentInfo.outline) {\n            addClass([info.element], ['e-focused']);\n        }\n        addClass([info.elementToFocus], ['e-focus']);\n        info.element.tabIndex = 0;\n        if (!isFocused) {\n            this.setFocusedElement(info.elementToFocus);\n        }\n        this.parent.notify(event.cellFocused, {\n            element: info.elementToFocus,\n            parent: info.element,\n            indexes: this.getContent().matrix.current,\n            byKey: !isNullOrUndefined(e),\n            byClick: isNullOrUndefined(e),\n            keyArgs: e,\n            isJump: this.swap.swap,\n            container: this.getContent().getInfo(e),\n            outline: !isNullOrUndefined(e),\n            swapInfo: this.swap\n        });\n        var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];\n        this.prevIndexes = { rowIndex: rowIndex, cellIndex: cellIndex };\n        this.focusedColumnUid = this.parent.getColumnByIndex(cellIndex).uid;\n        this.focusByClick = false;\n    };\n    FocusStrategy.prototype.refreshMatrix = function (content) {\n        var _this = this;\n        return function (e) {\n            if (content && (e.args && e.args.isFrozen) && !_this.fContent) {\n                _this.fContent = new FixedContentFocus(_this.parent);\n            }\n            else if (content && !_this.content) {\n                _this.content = new ContentFocus(_this.parent);\n            }\n            if (!content && (e.args && e.args.isFrozen) && !_this.fHeader) {\n                _this.fHeader = new FixedHeaderFocus(_this.parent);\n            }\n            else if (!content && !_this.header) {\n                _this.header = new HeaderFocus(_this.parent);\n            }\n            var cFocus = content ? (e.args && e.args.isFrozen) ? _this.fContent : _this.content :\n                (e.args && e.args.isFrozen) ? _this.fHeader : _this.header;\n            var rows = content ? e.rows.slice(_this.parent.frozenRows) : e.rows;\n            var updateRow = content ? e.rows.slice(0, _this.parent.frozenRows) : e.rows;\n            var matrix = cFocus.matrix.generate(updateRow, cFocus.selector);\n            cFocus.matrix.generate(rows, cFocus.selector);\n            cFocus.generateRows(updateRow, { matrix: matrix, handlerInstance: (e.args && e.args.isFrozen) ? _this.fHeader : _this.header });\n            if (!Browser.isDevice && !_this.focusByClick && e && e.args && e.args.requestType === 'paging') {\n                _this.skipFocus = false;\n                _this.parent.element.focus();\n            }\n            if (e && e.args && e.args.requestType === 'virtualscroll') {\n                if (_this.currentInfo.uid) {\n                    var index_1;\n                    var bool = e.rows.some(function (row, i) {\n                        index_1 = i;\n                        return row.uid === _this.currentInfo.uid;\n                    });\n                    if (bool) {\n                        _this.content.matrix.current[0] = index_1;\n                        _this.content.matrix.current[1] = _this.parent.getColumnIndexByUid(_this.focusedColumnUid) || 0;\n                        _this.focus();\n                    }\n                }\n            }\n        };\n    };\n    FocusStrategy.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.parent.element, 'mousedown', this.focusCheck, this);\n        EventHandler.add(this.parent.element, 'focus', this.onFocus, this);\n        this.parent.element.addEventListener('focus', this.passiveHandler = function (e) { return _this.passiveFocus(e); }, true);\n        EventHandler.add(this.parent.element, 'focusout', this.onBlur, this);\n        this.parent.on(event.keyPressed, this.onKeyPress, this);\n        this.parent.on(event.click, this.onClick, this);\n        this.parent.on(event.contentReady, this.refreshMatrix(true), this);\n        this.parent.on(event.headerRefreshed, this.refreshMatrix(), this);\n        this.parent.on('close-edit', this.restoreFocus, this);\n        ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.on(evt, _this.clearIndicator, _this); });\n        ['sorting'].forEach(function (action) { return _this.parent.on(action + \"-complete\", _this.restoreFocus, _this); });\n        this.parent.on(event.batchAdd, this.refreshMatrix(true), this);\n        this.parent.on(event.batchCancel, this.refreshMatrix(true), this);\n        this.parent.on(event.batchDelete, this.refreshMatrix(true), this);\n        this.parent.on(event.detailDataBound, this.refreshMatrix(true), this);\n        this.parent.on(event.onEmpty, this.refreshMatrix(true), this);\n        this.parent.on(event.cellFocused, this.internalCellFocus, this);\n    };\n    FocusStrategy.prototype.removeEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, 'mousedown', this.focusCheck);\n        EventHandler.remove(this.parent.element, 'focus', this.onFocus);\n        EventHandler.remove(this.parent.element, 'focusout', this.onBlur);\n        this.parent.element.removeEventListener('focus', this.passiveHandler, true);\n        this.parent.off(event.keyPressed, this.onKeyPress);\n        this.parent.off(event.click, this.onClick);\n        this.parent.off(event.contentReady, this.refreshMatrix(true));\n        this.parent.off(event.headerRefreshed, this.refreshMatrix());\n        this.parent.off('close-edit', this.restoreFocus);\n        ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.off(evt, _this.clearOutline); });\n        ['sorting'].forEach(function (action) { return _this.parent.off(action + \"-complete\", _this.restoreFocus); });\n        this.parent.off(event.batchAdd, this.refreshMatrix(true));\n        this.parent.off(event.batchDelete, this.refreshMatrix(true));\n        this.parent.off(event.batchCancel, this.refreshMatrix(true));\n        this.parent.off(event.detailDataBound, this.refreshMatrix(true));\n        this.parent.off(event.onEmpty, this.refreshMatrix(true));\n        this.parent.off(event.cellFocused, this.internalCellFocus);\n    };\n    FocusStrategy.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    FocusStrategy.prototype.restoreFocus = function () {\n        this.addFocus(this.getContent().getFocusInfo());\n    };\n    FocusStrategy.prototype.clearOutline = function () {\n        this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], 'downArrow', this.getContent().validator());\n        this.clearIndicator();\n    };\n    FocusStrategy.prototype.clearIndicator = function () {\n        if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focus', 'e-focused']);\n    };\n    FocusStrategy.prototype.getPrevIndexes = function () {\n        var forget = this.forget;\n        this.forget = false;\n        return forget ? { rowIndex: null, cellIndex: null } : this.prevIndexes;\n    };\n    FocusStrategy.prototype.forgetPrevious = function () {\n        this.forget = true;\n    };\n    FocusStrategy.prototype.setActiveByKey = function (action, active) {\n        var _this = this;\n        if (this.parent.frozenColumns === 0 && this.parent.frozenRows === 0) {\n            return;\n        }\n        var info;\n        var actions = {\n            'home': function () { return ({ toHeader: !info.isContent, toFrozen: true }); },\n            'end': function () { return ({ toHeader: !info.isContent, toFrozen: false }); },\n            'ctrlHome': function () { return ({ toHeader: true, toFrozen: _this.parent.frozenColumns !== 0 }); },\n            'ctrlEnd': function () { return ({ toHeader: false, toFrozen: false }); }\n        };\n        if (!(action in actions)) {\n            return;\n        }\n        info = active.getInfo();\n        var swap = actions[action]();\n        this.setActive(!swap.toHeader, swap.toFrozen);\n        this.getContent().matrix.current = active.matrix.current;\n    };\n    FocusStrategy.prototype.internalCellFocus = function (e) {\n        if (!(e.byKey && e.container.isContent && e.keyArgs.action === 'enter'\n            && (e.parent.classList.contains('e-detailcell') ||\n                e.parent.classList.contains('e-unboundcell') || e.parent.classList.contains('e-templatecell')))) {\n            return;\n        }\n        this.clearIndicator();\n        var focusEle = this.getContent().getFocusable(this.getFocusedElement());\n        this.setFocusedElement(focusEle);\n        this.currentInfo.skipAction = true;\n    };\n    return FocusStrategy;\n}());\nexport { FocusStrategy };\n/**\n * Create matrix from row collection which act as mental model for cell navigation\n * @hidden\n */\nvar Matrix = /** @class */ (function () {\n    function Matrix() {\n        this.matrix = [];\n        this.current = [];\n    }\n    Matrix.prototype.set = function (rowIndex, columnIndex, allow) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.columns));\n        this.matrix[rowIndex] = this.matrix[rowIndex] || [];\n        this.matrix[rowIndex][columnIndex] = allow ? 1 : 0;\n    };\n    Matrix.prototype.get = function (rowIndex, columnIndex, navigator, action, validator) {\n        var tmp = columnIndex;\n        if (rowIndex + navigator[0] < 0) {\n            return [rowIndex, columnIndex];\n        }\n        rowIndex = Math.max(0, Math.min(rowIndex + navigator[0], this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex + navigator[1], this.matrix[rowIndex].length - 1));\n        if (tmp + navigator[1] > this.matrix[rowIndex].length - 1 && validator(rowIndex, columnIndex, action)) {\n            return [rowIndex, tmp];\n        }\n        var first = this.first(this.matrix[rowIndex], columnIndex, navigator, true, action);\n        columnIndex = first === null ? tmp : first;\n        var val = getValue(rowIndex + \".\" + columnIndex, this.matrix);\n        return this.inValid(val) || !validator(rowIndex, columnIndex, action) ?\n            this.get(rowIndex, tmp, navigator, action, validator) : [rowIndex, columnIndex];\n    };\n    Matrix.prototype.first = function (vector, index, navigator, moveTo, action) {\n        if (((index < 0 || index === vector.length) && this.inValid(vector[index])\n            && (action !== 'upArrow' && action !== 'downArrow')) || !vector.some(function (v) { return v === 1; })) {\n            return null;\n        }\n        return !this.inValid(vector[index]) ? index :\n            this.first(vector, (['upArrow', 'downArrow', 'shiftUp', 'shiftDown'].indexOf(action) !== -1) ? moveTo ? 0 : ++index : index + navigator[1], navigator, false, action);\n    };\n    Matrix.prototype.select = function (rowIndex, columnIndex) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[rowIndex].length - 1));\n        this.current = [rowIndex, columnIndex];\n    };\n    Matrix.prototype.generate = function (rows, selector) {\n        var _this = this;\n        this.rows = rows.length - 1;\n        this.matrix = [];\n        rows.forEach(function (row, rIndex) {\n            var cells = row.cells.filter(function (c) { return c.isSpanned !== true; });\n            _this.columns = Math.max(cells.length - 1, _this.columns | 0);\n            cells.forEach(function (cell, cIndex) {\n                _this.set(rIndex, cIndex, selector(row, cell));\n            });\n        });\n        return this.matrix;\n    };\n    Matrix.prototype.inValid = function (value) {\n        return value === 0 || value === undefined;\n    };\n    return Matrix;\n}());\nexport { Matrix };\n/**\n * @hidden\n */\nvar ContentFocus = /** @class */ (function () {\n    function ContentFocus(parent) {\n        var _this = this;\n        this.matrix = new Matrix();\n        this.parent = parent;\n        this.keyActions = {\n            'rightArrow': [0, 1],\n            'tab': [0, 1],\n            'leftArrow': [0, -1],\n            'shiftTab': [0, -1],\n            'upArrow': [-1, 0],\n            'downArrow': [1, 0],\n            'shiftUp': [-1, 0],\n            'shiftDown': [1, 0],\n            'shiftRight': [0, 1],\n            'shiftLeft': [0, -1],\n            'enter': [1, 0],\n            'shiftEnter': [-1, 0]\n        };\n        this.indexesByKey = function (action) {\n            var opt = {\n                'home': [_this.matrix.current[0], -1, 0, 1],\n                'end': [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],\n                'ctrlHome': [0, -1, 0, 1],\n                'ctrlEnd': [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]\n            };\n            return opt[action] || null;\n        };\n    }\n    ContentFocus.prototype.getTable = function () {\n        return (this.parent.frozenColumns ?\n            this.parent.getContent().querySelector('.e-movablecontent .e-table') :\n            this.parent.getContentTable());\n    };\n    ContentFocus.prototype.onKeyPress = function (e) {\n        var navigator = this.keyActions[e.action];\n        var current = this.getCurrentFromAction(e.action, navigator, e.action in this.keyActions, e);\n        if (!current) {\n            return;\n        }\n        if ((['tab', 'shiftTab'].indexOf(e.action) > -1 && this.matrix.current || []).toString() === current.toString()) {\n            if (current.toString() === [this.matrix.rows, this.matrix.columns].toString() ||\n                current.toString() === [0, 0].toString()) {\n                return false;\n            }\n        }\n        this.matrix.select(current[0], current[1]);\n    };\n    ContentFocus.prototype.getCurrentFromAction = function (action, navigator, isPresent, e) {\n        if (navigator === void 0) { navigator = [0, 0]; }\n        if (!isPresent && !this.indexesByKey(action)) {\n            return null;\n        }\n        if (!this.shouldFocusChange(e)) {\n            return this.matrix.current;\n        }\n        var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];\n        var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator());\n        return current;\n    };\n    ContentFocus.prototype.onClick = function (e, force) {\n        var target = e.target;\n        target = (target.classList.contains('e-rowcell') ? target : closest(target, 'td'));\n        target = target ? target : closest(e.target, 'td.e-detailrowcollapse')\n            || closest(e.target, 'td.e-detailrowexpand');\n        target = closest(e.target, 'td.e-detailcell') ?\n            isNullOrUndefined(closest(closest(e.target, '.e-grid'), 'td.e-detailcell')) ? null : target : target;\n        target = target && closest(target, 'table').classList.contains('e-table') ? target : null;\n        if (!target) {\n            return false;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val) || (!force && oRowIndex === rowIndex && oCellIndex === cellIndex)) {\n            return false;\n        }\n        this.matrix.select(rowIndex, cellIndex);\n    };\n    ContentFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        this.matrix.current = [rowIndex, cellIndex];\n        info.element = !isNullOrUndefined(this.getTable().rows[rowIndex]) ? this.getTable().rows[rowIndex].cells[cellIndex] : null;\n        if (!info.element) {\n            return info;\n        }\n        info.elementToFocus = !info.element.classList.contains('e-unboundcell') && !info.element.classList.contains('e-detailcell')\n            ? this.getFocusable(info.element) : info.element;\n        info.outline = true;\n        info.uid = info.element.parentElement.getAttribute('data-uid');\n        return info;\n    };\n    ContentFocus.prototype.getFocusable = function (element) {\n        var query = 'button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])';\n        if (this.parent.isEdit) {\n            query = 'input:not([type=\"hidden\"]), select:not([aria-hidden=\"true\"]), textarea';\n        }\n        var child = [].slice.call(element.querySelectorAll(query));\n        /* Select the first focusable child element\n         * if no child found then select the cell itself.\n         * if Grid is in editable state, check for editable control inside child.\n         */\n        return child.length ? child[0] : element;\n    };\n    ContentFocus.prototype.selector = function (row, cell) {\n        var types = [CellType.Expand, CellType.GroupCaption, CellType.CaptionSummary, CellType.GroupSummary];\n        return ((row.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate))\n            || (row.isDataRow && cell.cellType === CellType.DetailExpand)\n            || (!row.isDataRow && types.indexOf(cell.cellType) > -1)\n            || (cell.column && cell.column.type === 'checkbox')\n            || (cell.cellType === CellType.CommandColumn))\n            && !(row.edit === 'delete' && row.isDirty);\n    };\n    ContentFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.frozenColumns > 0 &&\n            ((action === 'leftArrow' || action === 'shiftTab') && current[1] === 0);\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        var info = {\n            swap: ((action === 'upArrow' || enterFrozen) && current[0] === 0) || frozenSwap,\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: frozenSwap\n        };\n        return info;\n    };\n    ContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current = [];\n        if (action === 'rightArrow' || action === 'tab') {\n            current[0] = previous[0];\n            current[1] = -1;\n        }\n        else if (action === 'downArrow' || action === 'enter') {\n            current[0] = -1;\n            current[1] = previous[1];\n        }\n        return current;\n    };\n    ContentFocus.prototype.generateRows = function (rows, optionals) {\n        var matrix = optionals.matrix, handlerInstance = optionals.handlerInstance;\n        var len = handlerInstance.matrix.matrix.length;\n        var defaultLen = this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar' ? len + 1 : len;\n        handlerInstance.matrix.matrix = handlerInstance.matrix.matrix.slice(0, defaultLen); //Header matrix update.\n        handlerInstance.matrix.rows = defaultLen;\n        (_a = handlerInstance.matrix.matrix).push.apply(_a, matrix);\n        handlerInstance.matrix.rows += matrix.length;\n        var _a;\n    };\n    ContentFocus.prototype.getInfo = function (e) {\n        var info = this.getFocusInfo();\n        var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n        var isData = info.element.classList.contains('e-rowcell');\n        var isSelectable = isData || (e && e.action !== 'enter' && (info.element.classList.contains('e-detailrowcollapse')\n            || info.element.classList.contains('e-detailrowexpand')));\n        var _b = [Math.min(parseInt(info.element.parentElement.getAttribute('aria-rowindex'), 10), rIndex),\n            Math.min(parseInt(info.element.getAttribute('aria-colindex'), 10), cIndex)], rowIndex = _b[0], cellIndex = _b[1];\n        return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable: isSelectable };\n    };\n    ContentFocus.prototype.validator = function () {\n        var table = this.getTable();\n        return function (rowIndex, cellIndex, action) {\n            var cell = table.rows[rowIndex].cells[cellIndex];\n            if (action === 'enter' || action === 'shiftEnter') {\n                return cell.classList.contains('e-rowcell');\n            }\n            if ((action === 'shiftUp' || action === 'shiftDown') && cell.classList.contains('e-rowcell')) {\n                return true;\n            }\n            else if (action !== 'shiftUp' && action !== 'shiftDown') {\n                return cell.getBoundingClientRect().width !== 0;\n            }\n            return false;\n        };\n    };\n    ContentFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;\n        if (rIndex < 0 || cIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rIndex + \".cells.\" + cIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'shiftEnter' ?\n            cell.classList.contains('e-rowcell') && !cell.classList.contains('e-unboundcell')\n                && !cell.classList.contains('e-templatecell') && !cell.classList.contains('e-detailcell') : true;\n    };\n    return ContentFocus;\n}());\nexport { ContentFocus };\n/**\n * @hidden\n */\nvar HeaderFocus = /** @class */ (function (_super) {\n    __extends(HeaderFocus, _super);\n    function HeaderFocus(parent) {\n        return _super.call(this, parent) || this;\n    }\n    HeaderFocus.prototype.getTable = function () {\n        return (this.parent.frozenColumns ? this.parent.getHeaderContent().querySelector('.e-movableheader .e-table') :\n            this.parent.getHeaderTable());\n    };\n    HeaderFocus.prototype.onClick = function (e) {\n        var target = e.target;\n        target = (target.classList.contains('e-headercell') ? target : closest(target, 'th'));\n        if (!target && this.parent.frozenRows !== 0) {\n            target = (e.target.classList.contains('e-rowcell') ? e.target :\n                closest(e.target, 'td'));\n        }\n        if (!target) {\n            return;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val)) {\n            return false;\n        }\n        this.matrix.select(target.parentElement.rowIndex, target.cellIndex);\n    };\n    HeaderFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        info.element = this.getTable().rows[rowIndex].cells[cellIndex];\n        info.elementToFocus = this.getFocusable(info.element);\n        info.outline = !info.element.classList.contains('e-filterbarcell');\n        return info;\n    };\n    HeaderFocus.prototype.selector = function (row, cell) {\n        return (cell.visible && (cell.column.field !== undefined || cell.isTemplate)) || cell.column.type === 'checkbox' ||\n            cell.cellType === CellType.StackedHeader;\n    };\n    HeaderFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.frozenColumns > 0 &&\n            (action === 'leftArrow' || action === 'shiftTab') && current[1] === 0;\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        return {\n            swap: ((action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1) ||\n                frozenSwap,\n            toHeader: frozenSwap,\n            toFrozen: frozenSwap\n        };\n    };\n    HeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current1 = [];\n        if (action === 'upArrow' || action === 'shiftEnter') {\n            current1[0] = this.matrix.matrix.length;\n            current1[1] = previous[1];\n        }\n        else if (action === 'rightArrow' || action === 'tab') {\n            current1[0] = previous[0];\n            current1[1] = -1;\n        }\n        return current1;\n    };\n    HeaderFocus.prototype.generateRows = function (rows) {\n        var _this = this;\n        var length = this.matrix.matrix.length;\n        if (this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar') {\n            this.matrix.rows = ++this.matrix.rows;\n            rows[0].cells.forEach(function (cell, cIndex) {\n                return _this.matrix.set(length, cIndex, cell.visible && cell.column.allowFiltering !== false);\n            });\n        }\n    };\n    HeaderFocus.prototype.getInfo = function (e) {\n        return extend(_super.prototype.getInfo.call(this, e), { isContent: false, isHeader: true });\n    };\n    HeaderFocus.prototype.validator = function () {\n        return function () { return true; };\n    };\n    HeaderFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n        if (rIndex < 0 || cIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rIndex + \".cells.\" + cIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'altDownArrow' ? !cell.classList.contains('e-headercell') : true;\n    };\n    return HeaderFocus;\n}(ContentFocus));\nexport { HeaderFocus };\nvar FixedContentFocus = /** @class */ (function (_super) {\n    __extends(FixedContentFocus, _super);\n    function FixedContentFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedContentFocus.prototype.getTable = function () {\n        return this.parent.getContent().querySelector('.e-frozencontent .e-table');\n    };\n    FixedContentFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        return {\n            swap: (action === 'upArrow' || enterFrozen) && current[0] === 0\n                || ((action === 'tab' || action === 'rightArrow') && current[1] === this.matrix.columns),\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: (action === 'upArrow' || enterFrozen) && current[0] === 0\n        };\n    };\n    FixedContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current2 = [];\n        if (action === 'leftArrow' || action === 'shiftTab') {\n            current2[0] = previous[0];\n            current2[1] = active.matrix.columns + 1;\n        }\n        else if (action === 'downArrow' || action === 'enter') {\n            current2[0] = -1;\n            current2[1] = previous[1];\n        }\n        return current2;\n    };\n    return FixedContentFocus;\n}(ContentFocus));\nexport { FixedContentFocus };\nvar FixedHeaderFocus = /** @class */ (function (_super) {\n    __extends(FixedHeaderFocus, _super);\n    function FixedHeaderFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedHeaderFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        return {\n            swap: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n                || ((action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns),\n            toHeader: (action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns,\n            toFrozen: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n        };\n    };\n    FixedHeaderFocus.prototype.getTable = function () {\n        return (this.parent.getHeaderContent().querySelector('.e-frozenheader .e-table'));\n    };\n    FixedHeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current3 = [];\n        if (action === 'leftArrow' || action === 'shiftTab') {\n            current3[0] = previous[0];\n            current3[1] = active.matrix.columns + 1;\n        }\n        else if (action === 'upArrow' || action === 'shiftEnter') {\n            current3[0] = this.matrix.matrix.length;\n            current3[1] = previous[1];\n        }\n        return current3;\n    };\n    return FixedHeaderFocus;\n}(HeaderFocus));\nexport { FixedHeaderFocus };\n/** @hidden */\nvar SearchBox = /** @class */ (function () {\n    function SearchBox(searchBox) {\n        this.searchBox = searchBox;\n    }\n    SearchBox.prototype.searchFocus = function (args) {\n        args.target.parentElement.classList.add('e-input-focus');\n    };\n    SearchBox.prototype.searchBlur = function (args) {\n        args.target.parentElement.classList.remove('e-input-focus');\n    };\n    SearchBox.prototype.wireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.add(this.searchBox, 'focus', this.searchFocus, this);\n            EventHandler.add(this.searchBox, 'blur', this.searchBlur, this);\n        }\n    };\n    SearchBox.prototype.unWireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.remove(this.searchBox, 'focus', this.searchFocus);\n            EventHandler.remove(this.searchBox, 'blur', this.searchBlur);\n        }\n    };\n    return SearchBox;\n}());\nexport { SearchBox };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the paging behavior of the Grid.\n */\nvar PageSettings = /** @class */ (function (_super) {\n    __extends(PageSettings, _super);\n    function PageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(12)\n    ], PageSettings.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(8)\n    ], PageSettings.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], PageSettings.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property(null)\n    ], PageSettings.prototype, \"template\", void 0);\n    return PageSettings;\n}(ChildProperty));\nexport { PageSettings };\n","var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nimport { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, isUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { remove, createElement, closest } from '@syncfusion/ej2-base';\nimport { Query } from '@syncfusion/ej2-data';\nimport { setCssInGridPopUp, getPosition, parentsUntil, addRemoveActiveClasses, removeAddCboxClasses } from '../base/util';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\n/**\n * The `Selection` module is used to handle cell and row selection.\n */\nvar Selection = /** @class */ (function () {\n    /**\n     * Constructor for the Grid selection module\n     * @hidden\n     */\n    function Selection(parent, selectionSettings, locator) {\n        //Internal variables       \n        /**\n         * @hidden\n         */\n        this.selectedRowIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRowCellIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRecords = [];\n        this.preventFocus = false;\n        this.isMultiShiftRequest = false;\n        this.isMultiCtrlRequest = false;\n        this.enableSelectMultiTouch = false;\n        this.selectedRowState = {};\n        this.totalRecordsCount = 0;\n        this.chkAllCollec = [];\n        this.isCheckedOnAdd = false;\n        this.persistSelectedData = [];\n        this.isCancelDeSelect = false;\n        this.isPreventCellSelect = false;\n        this.disableUI = false;\n        this.parent = parent;\n        this.selectionSettings = selectionSettings;\n        this.factory = locator.getService('rendererFactory');\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    Selection.prototype.initializeSelection = function () {\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    /**\n     * The function used to trigger onActionBegin\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionBegin = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    Selection.prototype.fDataUpdate = function (args) {\n        if (args.cellIndex || args.rowIndex) {\n            var rowObj = this.getRowObj(isNullOrUndefined(args.rowIndex) ? isNullOrUndefined(args.cellIndex) ?\n                this.currentIndex : args.cellIndex.rowIndex : args.rowIndex);\n            args.foreignKeyData = rowObj.foreignKeyData;\n        }\n        return args;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionComplete = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Selection.prototype.getModuleName = function () {\n        return 'selection';\n    };\n    /**\n     * To destroy the selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.hidePopUp();\n        this.clearSelection();\n        this.removeEventListener();\n        EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n    };\n    Selection.prototype.isEditing = function () {\n        return (this.parent.editSettings.mode === 'Normal' || (this.parent.editSettings.mode === 'Batch' &&\n            this.parent.editModule.formObj && !this.parent.editModule.formObj.validate())) &&\n            this.parent.isEdit && !this.parent.isPersistSelection;\n    };\n    Selection.prototype.getSelectedMovableRow = function (index) {\n        var gObj = this.parent;\n        if (gObj.getFrozenColumns()) {\n            return gObj.getMovableRowByIndex(index);\n        }\n        return null;\n    };\n    /**\n     * Selects a row by the given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectRow = function (index, isToggle) {\n        var gObj = this.parent;\n        var selectedRow = gObj.getRowByIndex(index);\n        var selectedMovableRow = this.getSelectedMovableRow(index);\n        var selectData = gObj.getCurrentViewRecords()[index];\n        if (!this.isRowType() || !selectedRow || this.isEditing()) {\n            // if (this.isEditing()) {\n            //     gObj.selectedRowIndex = index;\n            // }\n            return;\n        }\n        var isRowSelected = selectedRow.hasAttribute('aria-selected');\n        isToggle = !isToggle ? isToggle :\n            !this.selectedRowIndexes.length ? false :\n                (this.selectedRowIndexes.length === 1 ? (index === this.selectedRowIndexes[0]) : false);\n        var args;\n        var can = 'cancel';\n        if (!isToggle) {\n            args = {\n                data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n                isShiftPressed: this.isMultiShiftRequest, row: selectedRow,\n                previousRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex, target: this.target, cancel: false\n            };\n            args = this.addMovableArgs(args, selectedMovableRow);\n            this.onActionBegin(args, events.rowSelecting);\n        }\n        if (!isNullOrUndefined(args) && args[can] === true) {\n            return;\n        }\n        this.clearRow();\n        if (!isToggle) {\n            this.updateRowSelection(selectedRow, index);\n            if (gObj.getFrozenColumns()) {\n                this.updateRowSelection(selectedMovableRow, index);\n            }\n            gObj.selectedRowIndex = index;\n        }\n        this.updateRowProps(index);\n        if (!isToggle) {\n            args = {\n                data: selectData, rowIndex: index,\n                row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n                previousRowIndex: this.prevRowIndex, target: this.target\n            };\n            args = this.addMovableArgs(args, selectedMovableRow);\n            this.onActionComplete(args, events.rowSelected);\n        }\n    };\n    Selection.prototype.addMovableArgs = function (targetObj, mRow) {\n        if (this.parent.getFrozenColumns()) {\n            var mObj = { mRow: mRow, previousMovRow: this.parent.getMovableRows()[this.prevRowIndex] };\n            targetObj = __assign({}, targetObj, mObj);\n        }\n        return targetObj;\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @return {void}\n     */\n    Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n        this.parent.selectedRowIndex = endIndex;\n    };\n    /**\n     * Selects a collection of rows by index.\n     * @param  {number[]} rowIndexes - Specifies an array of row indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectRows = function (rowIndexes) {\n        var gObj = this.parent;\n        var rowIndex = !this.isSingleSel() ? rowIndexes[0] : rowIndexes[rowIndexes.length - 1];\n        var selectedRow = gObj.getRowByIndex(rowIndex);\n        var selectedMovableRow = this.getSelectedMovableRow(rowIndex);\n        var frzCols = gObj.getFrozenColumns();\n        var can = 'cancel';\n        var selectedData = gObj.getCurrentViewRecords()[rowIndexes[0]];\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndex, target: this.target,\n            prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n            data: selectedData\n        };\n        args = this.addMovableArgs(args, selectedMovableRow);\n        this.onActionBegin(args, events.rowSelecting);\n        if (!isNullOrUndefined(args) && args[can] === true) {\n            return;\n        }\n        this.clearRow();\n        gObj.selectedRowIndex = rowIndexes.slice(-1)[0];\n        if (!this.isSingleSel()) {\n            for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n                var rowIdx = rowIndexes_1[_i];\n                this.updateRowSelection(gObj.getRowByIndex(rowIdx), rowIdx);\n                if (frzCols) {\n                    this.updateRowSelection(gObj.getMovableRowByIndex(rowIdx), rowIdx);\n                }\n                this.updateRowProps(rowIndex);\n            }\n        }\n        else {\n            this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n            if (frzCols) {\n                this.updateRowSelection(gObj.getMovableRowByIndex(rowIndex), rowIndex);\n            }\n            this.updateRowProps(rowIndex);\n        }\n        args = {\n            rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndex, target: this.target,\n            prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n            data: selectedData\n        };\n        args = this.addMovableArgs(args, selectedMovableRow);\n        this.onActionComplete(args, events.rowSelected);\n    };\n    /**\n     * Select rows with existing row selection by passing row indexes.\n     * @param  {number} startIndex - Specifies the row indexes.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addRowsToSelection = function (rowIndexes) {\n        var gObj = this.parent;\n        var can = 'cancel';\n        var selectedRow = !this.isSingleSel() ? gObj.getRowByIndex(rowIndexes[0]) :\n            gObj.getRowByIndex(rowIndexes[rowIndexes.length - 1]);\n        var selectedMovableRow = !this.isSingleSel() ? this.getSelectedMovableRow(rowIndexes[0]) :\n            this.getSelectedMovableRow(rowIndexes[rowIndexes.length - 1]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        var args;\n        for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n            var rowIndex = rowIndexes_2[_i];\n            var rowObj = this.getRowObj(rowIndex);\n            var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n            gObj.selectedRowIndex = rowIndex;\n            if (isUnSelected) {\n                this.rowDeselect(events.rowDeselecting, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData]);\n                this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n                this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n                selectedRow.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n                if (selectedMovableRow) {\n                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedMovableRow), 1);\n                    selectedMovableRow.removeAttribute('aria-selected');\n                    this.addRemoveClassesForRow(selectedMovableRow, false, null, 'e-selectionbackground', 'e-active');\n                }\n                this.rowDeselect(events.rowDeselected, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], [selectedMovableRow]);\n            }\n            else {\n                args = {\n                    data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n                    prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                    foreignKeyData: rowObj.foreignKeyData\n                };\n                args = this.addMovableArgs(args, selectedMovableRow);\n                this.onActionBegin(args, events.rowSelecting);\n                if (!isNullOrUndefined(args) && args[can] === true) {\n                    return;\n                }\n                if (this.isSingleSel()) {\n                    this.clearRow();\n                }\n                this.updateRowSelection(selectedRow, rowIndex);\n                if (frzCols) {\n                    this.updateRowSelection(selectedMovableRow, rowIndex);\n                }\n            }\n            this.updateRowProps(rowIndex);\n            if (!isUnSelected) {\n                args = {\n                    data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n                    prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                    foreignKeyData: rowObj.foreignKeyData\n                };\n                args = this.addMovableArgs(args, selectedMovableRow);\n                this.onActionComplete(args, events.rowSelected);\n            }\n            if (this.isSingleSel()) {\n                break;\n            }\n        }\n    };\n    Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n        var indexes = [];\n        var _a = (startIndex < endIndex) ?\n            { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n        for (; i <= max; i++) {\n            indexes.push(i);\n        }\n        if (startIndex > endIndex) {\n            indexes.reverse();\n        }\n        return indexes;\n    };\n    Selection.prototype.clearRow = function () {\n        this.clearRowSelection();\n        this.selectedRowIndexes = [];\n        this.selectedRecords = [];\n        this.parent.selectedRowIndex = -1;\n        if (this.isSingleSel() && this.parent.isPersistSelection) {\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.updateRowProps = function (startIndex) {\n        this.prevRowIndex = startIndex;\n        this.isRowSelected = this.selectedRowIndexes.length && true;\n    };\n    Selection.prototype.updatePersistCollection = function (selectedRow, chkState) {\n        var _this = this;\n        if (this.parent.isPersistSelection && !isNullOrUndefined(selectedRow)) {\n            var rowObj = this.getRowObj(selectedRow);\n            var pKey_1 = rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (pKey_1 === null) {\n                return;\n            }\n            rowObj.isSelected = chkState;\n            if (chkState) {\n                this.selectedRowState[pKey_1] = chkState;\n                if (!this.persistSelectedData.some(function (data) { return data[_this.primaryKey] === pKey_1; })) {\n                    this.persistSelectedData.push(rowObj.data);\n                }\n            }\n            else {\n                this.updatePersistDelete(pKey_1);\n            }\n        }\n    };\n    Selection.prototype.updatePersistDelete = function (pKey) {\n        var _this = this;\n        delete (this.selectedRowState[pKey]);\n        var index;\n        var isPresent = this.persistSelectedData.some(function (data, i) {\n            index = i;\n            return data[_this.primaryKey] === pKey;\n        });\n        if (isPresent) {\n            this.persistSelectedData.splice(index, 1);\n        }\n    };\n    Selection.prototype.updateCheckBoxes = function (row, chkState) {\n        if (!isNullOrUndefined(row)) {\n            var chkBox = row.querySelector('.e-checkselect');\n            if (!isNullOrUndefined(chkBox)) {\n                removeAddCboxClasses(chkBox.nextElementSibling, chkState);\n                if (isNullOrUndefined(this.checkedTarget) || (!isNullOrUndefined(this.checkedTarget)\n                    && !this.checkedTarget.classList.contains('e-checkselectall'))) {\n                    this.setCheckAllState(parseInt(row.getAttribute('aria-rowindex'), 10));\n                }\n            }\n        }\n    };\n    Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n        if (!selectedRow) {\n            return;\n        }\n        this.selectedRowIndexes.push(startIndex);\n        var len = this.selectedRowIndexes.length;\n        if (this.parent.getFrozenColumns() && len > 1) {\n            if ((this.selectedRowIndexes[len - 2] === this.selectedRowIndexes[len - 1])) {\n                this.selectedRowIndexes.pop();\n            }\n        }\n        this.selectedRecords.push(selectedRow);\n        selectedRow.setAttribute('aria-selected', 'true');\n        this.updatePersistCollection(selectedRow, true);\n        this.updateCheckBoxes(selectedRow, true);\n        this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n        if (!this.preventFocus) {\n            var target = this.focus.getPrevIndexes().cellIndex ?\n                selectedRow.cells[this.focus.getPrevIndexes().cellIndex] :\n                selectedRow.querySelector('.e-selectionbackground:not(.e-hide)');\n            if (!target) {\n                return;\n            }\n            this.focus.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * Deselects the currently selected rows and cells.\n     * @return {void}\n     */\n    Selection.prototype.clearSelection = function () {\n        if (!this.parent.isPersistSelection || (this.parent.isPersistSelection && !this.parent.isEdit) ||\n            (!isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains('e-checkselectall'))) {\n            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n            if (span.classList.contains('e-rowselect')) {\n                span.classList.remove('e-spanclicked');\n            }\n            this.clearRowSelection();\n            this.clearCellSelection();\n            this.enableSelectMultiTouch = false;\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     * @return {void}\n     */\n    Selection.prototype.clearRowSelection = function () {\n        var _this = this;\n        if (this.isRowSelected) {\n            var gObj = this.parent;\n            var rows = this.parent.getDataRows();\n            var data = [];\n            var row = [];\n            var mRow = [];\n            var rowIndex = [];\n            var frzCols = gObj.getFrozenColumns();\n            var foreignKeyData = [];\n            var currentViewData = this.parent.getCurrentViewRecords();\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var currentRow = this.parent.getDataRows()[this.selectedRowIndexes[i]];\n                var rowObj = this.getRowObj(currentRow);\n                if (rowObj) {\n                    data.push(rowObj.data);\n                    row.push(currentRow);\n                    rowIndex.push(this.selectedRowIndexes[i]);\n                    foreignKeyData.push(rowObj.foreignKeyData);\n                }\n                if (frzCols) {\n                    mRow.push(gObj.getMovableRows()[this.selectedRowIndexes[i]]);\n                }\n            }\n            this.rowDeselect(events.rowDeselecting, rowIndex, data, row, foreignKeyData, mRow);\n            if (this.isCancelDeSelect === true) {\n                return;\n            }\n            rows.filter(function (record) { return record.hasAttribute('aria-selected'); }).forEach(function (ele) {\n                if (!_this.disableUI) {\n                    ele.removeAttribute('aria-selected');\n                    _this.addRemoveClassesForRow(ele, false, true, 'e-selectionbackground', 'e-active');\n                }\n                _this.updatePersistCollection(ele, false);\n                _this.updateCheckBoxes(ele);\n            });\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var movableRow = this.getSelectedMovableRow(this.selectedRowIndexes[i]);\n                if (movableRow) {\n                    if (!this.disableUI) {\n                        movableRow.removeAttribute('aria-selected');\n                        this.addRemoveClassesForRow(movableRow, false, true, 'e-selectionbackground', 'e-active');\n                    }\n                    this.updatePersistCollection(movableRow, false);\n                }\n            }\n            this.selectedRowIndexes = [];\n            this.selectedRecords = [];\n            this.isRowSelected = false;\n            this.parent.selectedRowIndex = -1;\n            this.rowDeselect(events.rowDeselected, rowIndex, data, row, foreignKeyData, mRow);\n        }\n    };\n    Selection.prototype.rowDeselect = function (type, rowIndex, data, row, foreignKeyData, mRow) {\n        var cancl = 'cancel';\n        this.updatePersistCollection(row[0], false);\n        var rowDeselectObj = { rowIndex: rowIndex, data: data, row: row, foreignKeyData: foreignKeyData, cancel: false };\n        this.parent.trigger(type, this.parent.getFrozenColumns() ? __assign({}, rowDeselectObj, { mRow: mRow }) : rowDeselectObj);\n        this.isCancelDeSelect = rowDeselectObj[cancl];\n        this.updateCheckBoxes(row[0]);\n    };\n    Selection.prototype.getRowObj = function (row) {\n        if (row === void 0) { row = this.currentIndex; }\n        if (isNullOrUndefined(row)) {\n            return {};\n        }\n        if (typeof row === 'number') {\n            row = this.parent.getRowByIndex(row);\n        }\n        if (row) {\n            return this.parent.getRowObjectFromUID(row.getAttribute('data-uid')) || {};\n        }\n        return {};\n    };\n    Selection.prototype.getSelectedMovableCell = function (cellIndex) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        if (frzCols) {\n            if (cellIndex.cellIndex >= frzCols) {\n                return gObj.getMovableCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            return null;\n        }\n        return null;\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectCell = function (cellIndex, isToggle) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(cellIndex);\n        var args;\n        var cncl = 'cancel';\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n        }\n        var selectedTable;\n        var cIdx;\n        this.currentIndex = cellIndex.rowIndex;\n        var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n        if (!this.isCellType() || !selectedCell || this.isEditing()) {\n            return;\n        }\n        var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n        isToggle = !isToggle ? isToggle : (!isUndefined(this.prevCIdxs) &&\n            cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n            isCellSelected);\n        if (!isToggle) {\n            args = {\n                data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n                previousRowCell: this.prevECIdxs ?\n                    this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n                cancel: false\n            };\n            this.onActionBegin(args, events.cellSelecting);\n        }\n        if (!isNullOrUndefined(args) && args[cncl] === true) {\n            return;\n        }\n        this.clearCell();\n        if (!isToggle) {\n            this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n        }\n        this.updateCellProps(cellIndex, cellIndex);\n        if (!isToggle) {\n            this.onActionComplete({\n                data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n                previousRowCell: this.prevECIdxs ?\n                    this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n            }, events.cellSelected);\n        }\n    };\n    Selection.prototype.getCellIndex = function (rIdx, cIdx) {\n        return (this.parent.getFrozenColumns() ? (cIdx >= this.parent.getFrozenColumns() ? this.parent.getMovableCellFromIndex(rIdx, cIdx)\n            : this.parent.getCellFromIndex(rIdx, cIdx)) : this.parent.getCellFromIndex(rIdx, cIdx));\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @return {void}\n     */\n    Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(startIndex);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n        }\n        var min;\n        var max;\n        var stIndex = startIndex;\n        var edIndex = endIndex = endIndex ? endIndex : startIndex;\n        var cellIndexes;\n        this.currentIndex = startIndex.rowIndex;\n        var cncl = 'cancel';\n        var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        };\n        this.onActionBegin(args, events.cellSelecting);\n        if (!isNullOrUndefined(args) && args[cncl] === true) {\n            return;\n        }\n        this.clearCell();\n        if (startIndex.rowIndex > endIndex.rowIndex) {\n            var temp = startIndex;\n            startIndex = endIndex;\n            endIndex = temp;\n        }\n        for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n            if (this.selectionSettings.cellSelectionMode !== 'Box') {\n                min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n                max = i === endIndex.rowIndex ? (endIndex.cellIndex) : this.getLastColIndex(i);\n            }\n            else {\n                min = startIndex.cellIndex;\n                max = endIndex.cellIndex;\n            }\n            cellIndexes = [];\n            for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n                if (frzCols) {\n                    if (j < frzCols) {\n                        selectedCell = gObj.getCellFromIndex(i, j);\n                    }\n                    else {\n                        selectedCell = gObj.getMovableCellFromIndex(i, j);\n                    }\n                }\n                else {\n                    selectedCell = gObj.getCellFromIndex(i, j);\n                }\n                if (!selectedCell) {\n                    continue;\n                }\n                cellIndexes.push(j);\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n            }\n            this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n        }\n        this.updateCellProps(stIndex, edIndex);\n        this.onActionComplete({\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelected);\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectCells = function (rowCellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(rowCellIndexes[0]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n        }\n        this.currentIndex = rowCellIndexes[0].rowIndex;\n        var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        this.onActionBegin({\n            data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n            currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n            isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelecting);\n        for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n            for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n                if (frzCols) {\n                    if (rowCellIndexes[i].cellIndexes[j] < frzCols) {\n                        selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                    else {\n                        selectedCell = gObj.getMovableCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                }\n                else {\n                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                }\n                if (!selectedCell) {\n                    continue;\n                }\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n                this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n            }\n        }\n        this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n        this.onActionComplete({\n            data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n            currentCell: selectedCell,\n            previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelected);\n    };\n    /**\n     * Select cells with existing cell selection by passing row and column index.\n     * @param  {IIndex} startIndex - Defines the collection of row and column index.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addCellsToSelection = function (cellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedTable;\n        var cIdx;\n        var selectedCell;\n        var frzCols = gObj.getFrozenColumns();\n        var index;\n        this.currentIndex = cellIndexes[0].rowIndex;\n        var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var rowObj;\n        if (frzCols && cellIndexes[0].cellIndex >= frzCols) {\n            rowObj = gObj.getMovableRowsObject()[cellIndexes[0].rowIndex];\n        }\n        else {\n            rowObj = this.getRowObj(cellIndexes[0].rowIndex);\n        }\n        var foreignKeyData = [];\n        for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n            var cellIndex = cellIndexes_1[_i];\n            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n                if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n                    index = i;\n                    break;\n                }\n            }\n            selectedCell = this.getSelectedMovableCell(cellIndex);\n            if (!selectedCell) {\n                selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            foreignKeyData.push(rowObj.cells[frzCols && cellIndexes[0].cellIndex >= frzCols\n                ? cellIndex.cellIndex - frzCols : cellIndex.cellIndex].foreignKeyData);\n            var args = {\n                data: selectedData, cellIndex: cellIndexes[0],\n                isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n                previousRowCell: this.prevECIdxs ?\n                    gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n            };\n            var isUnSelected = index > -1;\n            if (isUnSelected) {\n                var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n                if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n                    this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                    selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n                    selectedCell.classList.remove('e-cellselectionbackground');\n                    selectedCell.removeAttribute('aria-selected');\n                    this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                }\n                else {\n                    isUnSelected = false;\n                    this.onActionBegin(args, events.cellSelecting);\n                    this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n                    this.updateCellSelection(selectedCell);\n                    this.addAttribute(selectedCell);\n                }\n            }\n            else {\n                this.onActionBegin(args, events.cellSelecting);\n                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            this.updateCellProps(cellIndex, cellIndex);\n            if (!isUnSelected) {\n                this.onActionComplete({\n                    data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n                    previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n                        undefined, previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes\n                }, events.cellSelected);\n            }\n        }\n    };\n    Selection.prototype.getColIndex = function (rowIndex, index) {\n        var cells;\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (index >= frzCols) {\n                cells = this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n            }\n        }\n        if (!cells) {\n            cells = this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        }\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n            if (colIndex === index) {\n                if (frzCols) {\n                    if (index >= frzCols) {\n                        m += frzCols;\n                    }\n                }\n                return m;\n            }\n        }\n        return -1;\n    };\n    Selection.prototype.getLastColIndex = function (rowIndex) {\n        var cells = this.parent.getFrozenColumns() ? this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell')\n            : this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        return parseInt(cells[cells.length - 1].getAttribute('aria-colindex'), 10);\n    };\n    Selection.prototype.clearCell = function () {\n        this.clearCellSelection();\n    };\n    Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells, foreignKeyData) {\n        var cancl = 'cancel';\n        if (cells[0] && cells[0].classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(cells[0], 'tr'));\n        }\n        var args = {\n            cells: cells, data: data, cellIndexes: cellIndexes, foreignKeyData: foreignKeyData, cancel: false\n        };\n        this.parent.trigger(type, args);\n        this.isPreventCellSelect = args[cancl];\n    };\n    Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n        if (!isNullOrUndefined(rowIndex)) {\n            this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        selectedCell.classList.add('e-cellselectionbackground');\n        if (selectedCell.classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(selectedCell, 'tr'), true);\n        }\n        this.addAttribute(selectedCell);\n    };\n    Selection.prototype.addAttribute = function (cell) {\n        this.target = cell;\n        if (!isNullOrUndefined(cell)) {\n            cell.setAttribute('aria-selected', 'true');\n            if (!this.preventFocus) {\n                this.focus.onClick({ target: cell }, true);\n            }\n        }\n    };\n    Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n        this.prevCIdxs = startIndex;\n        this.prevECIdxs = endIndex;\n        this.isCellSelected = this.selectedRowCellIndexes.length && true;\n    };\n    Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n        var isRowAvail;\n        var index;\n        for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n            if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n                isRowAvail = true;\n                index = i;\n                break;\n            }\n        }\n        if (isRowAvail) {\n            if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n                this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n            }\n        }\n        else {\n            this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     * @return {void}\n     */\n    Selection.prototype.clearCellSelection = function () {\n        if (this.isCellSelected) {\n            var gObj = this.parent;\n            var selectedCells = this.getSelectedCellsElement();\n            var rowCell = this.selectedRowCellIndexes;\n            var data = [];\n            var cells = [];\n            var foreignKeyData = [];\n            var currentViewData = gObj.getCurrentViewRecords();\n            var selectedTable = void 0;\n            var frzCols = gObj.getFrozenColumns();\n            for (var i = 0, len = rowCell.length; i < len; i++) {\n                data.push(currentViewData[rowCell[i].rowIndex]);\n                var rowObj = this.getRowObj(rowCell[i].rowIndex);\n                for (var j = 0, cLen = rowCell[i].cellIndexes.length; j < cLen; j++) {\n                    if (frzCols) {\n                        if (rowCell[i].cellIndexes[j] < frzCols) {\n                            cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                        }\n                        else {\n                            cells.push(gObj.getMovableCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                        }\n                    }\n                    else {\n                        foreignKeyData.push(rowObj.cells[rowCell[i].cellIndexes[j]].foreignKeyData);\n                        cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                    }\n                }\n            }\n            this.cellDeselect(events.cellDeselecting, rowCell, data, cells, foreignKeyData);\n            if (this.isPreventCellSelect === true) {\n                return;\n            }\n            for (var i = 0, len = selectedCells.length; i < len; i++) {\n                selectedCells[i].classList.remove('e-cellselectionbackground');\n                selectedCells[i].removeAttribute('aria-selected');\n            }\n            this.selectedRowCellIndexes = [];\n            this.isCellSelected = false;\n            this.cellDeselect(events.cellDeselected, rowCell, data, cells, foreignKeyData);\n        }\n    };\n    Selection.prototype.getSelectedCellsElement = function () {\n        var gObj = this.parent;\n        var rows = gObj.getDataRows();\n        var mRows;\n        if (gObj.getFrozenColumns()) {\n            mRows = gObj.getMovableDataRows();\n            rows = gObj.addMovableRows(rows, mRows);\n        }\n        var cells = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n        }\n        return cells;\n    };\n    Selection.prototype.mouseMoveHandler = function (e) {\n        e.preventDefault();\n        var gBRect = this.parent.element.getBoundingClientRect();\n        var x1 = this.x;\n        var y1 = this.y;\n        var position = getPosition(e);\n        var x2 = position.x - gBRect.left;\n        var y2 = position.y - gBRect.top;\n        var tmp;\n        var target = closest(e.target, 'tr');\n        this.isDragged = true;\n        if (!this.isCellDrag) {\n            if (!target) {\n                target = closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n            }\n            if (x1 > x2) {\n                tmp = x2;\n                x2 = x1;\n                x1 = tmp;\n            }\n            if (y1 > y2) {\n                tmp = y2;\n                y2 = y1;\n                y1 = tmp;\n            }\n            this.element.style.left = x1 + 'px';\n            this.element.style.top = y1 + 'px';\n            this.element.style.width = x2 - x1 + 'px';\n            this.element.style.height = y2 - y1 + 'px';\n        }\n        if (target && !e.ctrlKey && !e.shiftKey) {\n            var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n            if (!this.isCellDrag) {\n                this.selectRowsByRange(this.startIndex, rowIndex);\n            }\n            else {\n                var td = parentsUntil(e.target, 'e-rowcell');\n                if (td) {\n                    this.selectLikeExcel(rowIndex, parseInt(td.getAttribute('aria-colindex'), 10));\n                }\n            }\n        }\n    };\n    Selection.prototype.selectLikeExcel = function (rowIndex, cellIndex) {\n        this.clearCellSelection();\n        this.selectCellsByRange({ rowIndex: this.startIndex, cellIndex: this.startCellIndex }, { rowIndex: rowIndex, cellIndex: cellIndex });\n    };\n    Selection.prototype.mouseUpHandler = function (e) {\n        document.body.classList.remove('e-disableuserselect');\n        if (this.element) {\n            remove(this.element);\n        }\n        EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n        this.isDragged = false;\n    };\n    Selection.prototype.mouseDownHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        var isDrag;\n        var gridElement = parentsUntil(target, 'e-grid');\n        if (gridElement && gridElement.id !== gObj.element.id) {\n            return;\n        }\n        if (e.shiftKey || e.ctrlKey) {\n            e.preventDefault();\n        }\n        if (target.classList.contains('e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n            if (gObj.selectionSettings.cellSelectionMode === 'Box' && !this.isRowType() && !this.isSingleSel()) {\n                this.isCellDrag = true;\n                isDrag = true;\n            }\n            else if (gObj.allowRowDragAndDrop) {\n                if (!this.isRowType() || this.isSingleSel() || closest(target, 'td').classList.contains('e-selectionbackground')) {\n                    this.isDragged = false;\n                    return;\n                }\n                isDrag = true;\n                this.element = createElement('div', { className: 'e-griddragarea' });\n                gObj.getContent().appendChild(this.element);\n            }\n            if (isDrag) {\n                var tr = closest(e.target, 'tr');\n                this.startIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n                this.startCellIndex = parseInt(parentsUntil(target, 'e-rowcell').getAttribute('aria-colindex'), 10);\n                document.body.classList.add('e-disableuserselect');\n                var gBRect = gObj.element.getBoundingClientRect();\n                var postion = getPosition(e);\n                this.x = postion.x - gBRect.left;\n                this.y = postion.y - gBRect.top;\n                EventHandler.add(gObj.getContent(), 'mousemove', this.mouseMoveHandler, this);\n                EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n            }\n        }\n    };\n    Selection.prototype.clearSelAfterRefresh = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.initialEnd, this.initializeSelection, this);\n        this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.parent.on(events.beforeFragAppend, this.clearSelAfterRefresh, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.actionBeginFunction = this.actionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.rowsRemoved, this.rowsRemoved, this);\n        this.parent.on(events.headerRefreshed, this.refreshHeader, this);\n        this.addEventListener_checkbox();\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.initialEnd, this.initializeSelection);\n        this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n        this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.off(events.beforeFragAppend, this.clearSelAfterRefresh);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.off(events.rowsRemoved, this.rowsRemoved);\n        this.parent.off(events.headerRefreshed, this.refreshHeader);\n        this.removeEventListener_checkbox();\n    };\n    Selection.prototype.columnPositionChanged = function () {\n        if (!this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    Selection.prototype.refreshHeader = function () {\n        this.setCheckAllState();\n    };\n    Selection.prototype.rowsRemoved = function (e) {\n        for (var i = 0; i < e.records.length; i++) {\n            delete (this.selectedRowState[e.records[i][this.primaryKey]]);\n            --this.totalRecordsCount;\n        }\n        this.setCheckAllState();\n    };\n    ;\n    Selection.prototype.beforeFragAppend = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    ;\n    Selection.prototype.getCheckAllBox = function () {\n        return this.parent.getHeaderContent().querySelector('.e-checkselectall');\n    };\n    Selection.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    Selection.prototype.render = function (e) {\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    Selection.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        if (!isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'Single') {\n            if (this.selectedRowCellIndexes.length > 1) {\n                this.clearCellSelection();\n            }\n            if (this.selectedRowIndexes.length > 1) {\n                this.clearRowSelection();\n            }\n            this.enableSelectMultiTouch = false;\n            this.hidePopUp();\n        }\n        if (!isNullOrUndefined(e.properties.mode) ||\n            !isNullOrUndefined(e.properties.cellSelectionMode)) {\n            this.clearSelection();\n        }\n        this.checkBoxSelectionChanged();\n        this.initPerisistSelection();\n    };\n    Selection.prototype.hidePopUp = function () {\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.selectRow(this.parent.selectedRowIndex);\n    };\n    Selection.prototype.checkBoxSelectionChanged = function () {\n        this.parent.off(events.contentReady, this.checkBoxSelectionChanged);\n        var gobj = this.parent;\n        var checkboxColumn = gobj.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length > 0) {\n            gobj.isCheckBoxSelection = true;\n            this.chkField = checkboxColumn[0].field;\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n            if (isNullOrUndefined(this.totalRecordsCount)) {\n                this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n            }\n            if (this.isSingleSel()) {\n                gobj.selectionSettings.type = 'Multiple';\n                gobj.dataBind();\n            }\n            else {\n                this.initPerisistSelection();\n            }\n        }\n        if (!gobj.isCheckBoxSelection) {\n            this.chkField = null;\n            this.initPerisistSelection();\n        }\n    };\n    Selection.prototype.initPerisistSelection = function () {\n        var gobj = this.parent;\n        if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = true;\n            this.ensureCheckboxFieldSelection();\n        }\n        else if (this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = false;\n            this.ensureCheckboxFieldSelection();\n        }\n        else {\n            gobj.isPersistSelection = false;\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.ensureCheckboxFieldSelection = function () {\n        var gobj = this.parent;\n        this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n        if (!gobj.enableVirtualization && this.chkField\n            && ((gobj.isPersistSelection && Object.keys(this.selectedRowState).length === 0) ||\n                !gobj.isPersistSelection)) {\n            var data = this.parent.getDataModule();\n            var query = new Query().where(this.chkField, 'equal', true);\n            var dataManager = data.getData({}, query);\n            var proxy_1 = this;\n            this.parent.showSpinner();\n            dataManager.then(function (e) {\n                proxy_1.dataSuccess(e.result);\n                proxy_1.refreshPersistSelection();\n                proxy_1.parent.hideSpinner();\n            });\n        }\n    };\n    Selection.prototype.dataSuccess = function (res) {\n        for (var i = 0; i < res.length; i++) {\n            if (isNullOrUndefined(this.selectedRowState[res[i][this.primaryKey]]) && res[i][this.chkField]) {\n                this.selectedRowState[res[i][this.primaryKey]] = res[i][this.chkField];\n            }\n        }\n        this.persistSelectedData = res;\n    };\n    Selection.prototype.setRowSelection = function (state) {\n        if (!this.parent.getDataModule().isRemote()) {\n            if (state) {\n                for (var _i = 0, _a = this.getData(); _i < _a.length; _i++) {\n                    var data = _a[_i];\n                    this.selectedRowState[data[this.primaryKey]] = true;\n                }\n            }\n            else {\n                this.selectedRowState = {};\n            }\n            // (this.getData()).forEach(function (data) {\n            //     this.selectedRowState[data[this.primaryKey]] = true;\n            // })\n        }\n    };\n    Selection.prototype.getData = function () {\n        return this.parent.getDataModule().dataManager.dataSource.json;\n    };\n    Selection.prototype.refreshPersistSelection = function () {\n        var rows = this.parent.getRows();\n        if (rows.length > 0 && (this.parent.isPersistSelection || this.chkField)) {\n            var indexes = [];\n            for (var j = 0; j < rows.length; j++) {\n                var rowObj = this.getRowObj(rows[j]);\n                var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n                if (pKey === null) {\n                    return;\n                }\n                var checkState = void 0;\n                var chkBox = rows[j].querySelector('.e-checkselect');\n                if (this.selectedRowState[pKey] || (this.parent.checkAllRows === 'Check' && this.chkAllCollec.indexOf(pKey) < 0)\n                    || (this.parent.checkAllRows === 'Uncheck' && this.chkAllCollec.indexOf(pKey) > 0)\n                    || (this.parent.checkAllRows === 'Intermediate' && !isNullOrUndefined(this.chkField) && rowObj.data[this.chkField])) {\n                    indexes.push(parseInt(rows[j].getAttribute('aria-rowindex'), 10));\n                    checkState = true;\n                }\n                else {\n                    checkState = false;\n                    if (this.checkedTarget !== chkBox && this.parent.isCheckBoxSelection) {\n                        removeAddCboxClasses(chkBox.nextElementSibling, checkState);\n                    }\n                }\n                this.updatePersistCollection(rows[j], checkState);\n            }\n            this.isSingleSel() && indexes.length > 0 ? this.selectRow(indexes[0], true) : this.selectRows(indexes);\n        }\n        if (this.parent.isCheckBoxSelection && this.parent.getCurrentViewRecords().length > 0) {\n            this.setCheckAllState();\n        }\n    };\n    Selection.prototype.actionBegin = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            var editChkBox = this.parent.element.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                var row = closest(editChkBox, '.e-editedrow');\n                if (row) {\n                    if (this.parent.editSettings.mode === 'Dialog') {\n                        row = this.parent.element.querySelector('.e-dlgeditrow');\n                    }\n                    var rowObj = this.getRowObj(row);\n                    if (!rowObj) {\n                        return;\n                    }\n                    this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = editChkBox.checked;\n                }\n                else {\n                    this.isCheckedOnAdd = editChkBox.checked;\n                }\n            }\n        }\n    };\n    Selection.prototype.actionComplete = function (e) {\n        var _this = this;\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            if (e.action === 'add' && this.isCheckedOnAdd) {\n                var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute('data-uid'));\n                this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = this.isCheckedOnAdd;\n            }\n            this.refreshPersistSelection();\n        }\n        if (e.requestType === 'delete' && this.parent.isPersistSelection) {\n            e.data.slice().forEach(function (data) {\n                if (!isNullOrUndefined(data[_this.primaryKey])) {\n                    _this.updatePersistDelete(data[_this.primaryKey]);\n                }\n            });\n            this.setCheckAllState();\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n    };\n    Selection.prototype.onDataBound = function () {\n        if (!this.parent.enableVirtualization && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    Selection.prototype.checkSelectAllAction = function (checkState) {\n        var cRenderer = this.getRenderer();\n        var editForm = this.parent.element.querySelector('.e-gridform');\n        this.checkedTarget = this.getCheckAllBox();\n        if (checkState && this.parent.getCurrentViewRecords().length) {\n            this.selectRowsByRange(cRenderer.getVirtualRowIndex(0), cRenderer.getVirtualRowIndex(this.parent.getCurrentViewRecords().length));\n            this.parent.checkAllRows = 'Check';\n        }\n        else {\n            this.clearSelection();\n            this.parent.checkAllRows = 'Uncheck';\n        }\n        this.chkAllCollec = [];\n        if (this.parent.isPersistSelection) {\n            var rows = this.parent.getRows();\n            for (var i = 0; i < rows.length; i++) {\n                this.updatePersistCollection(rows[i], checkState);\n            }\n            if (this.parent.checkAllRows === 'Uncheck') {\n                this.setRowSelection(false);\n                this.persistSelectedData = this.parent.getDataModule().isRemote() ? this.persistSelectedData : [];\n            }\n            else if (this.parent.checkAllRows === 'Check') {\n                this.setRowSelection(true);\n                this.persistSelectedData = !this.parent.getDataModule().isRemote() ? this.getData().slice() : this.persistSelectedData;\n            }\n        }\n        if (!isNullOrUndefined(editForm)) {\n            var editChkBox = editForm.querySelector('.e-edit-checkselect');\n            removeAddCboxClasses(editChkBox.nextElementSibling, checkState);\n        }\n    };\n    Selection.prototype.checkSelectAll = function (checkBox) {\n        var _this = this;\n        var stateStr = this.getCheckAllStatus(checkBox);\n        var state = stateStr === 'Check';\n        if (stateStr === 'Intermediate') {\n            state = this.parent.getCurrentViewRecords().some(function (data) {\n                return data[_this.primaryKey] in _this.selectedRowState;\n            });\n        }\n        this.checkSelectAllAction(!state);\n        this.target = null;\n        if (this.parent.getCurrentViewRecords().length > 0) {\n            this.setCheckAllState();\n        }\n        this.triggerChkChangeEvent(checkBox, !state);\n    };\n    Selection.prototype.getCheckAllStatus = function (ele) {\n        var classes = ele ? ele.nextElementSibling.classList :\n            this.getCheckAllBox().nextElementSibling.classList;\n        var status;\n        if (classes.contains('e-check')) {\n            status = 'Check';\n        }\n        else if (classes.contains('e-uncheck')) {\n            status = 'Uncheck';\n        }\n        else if (classes.contains('e-stop')) {\n            status = 'Intermediate';\n        }\n        else {\n            status = 'None';\n        }\n        return status;\n    };\n    Selection.prototype.checkSelect = function (checkBox) {\n        var target = closest(this.checkedTarget, '.e-rowcell');\n        var checkObj = checkBox;\n        this.isMultiCtrlRequest = true;\n        var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n        if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n            ++rIndex;\n        }\n        this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n        this.moveIntoUncheckCollection(closest(target, '.e-row'));\n        this.setCheckAllState();\n        this.isMultiCtrlRequest = false;\n        this.triggerChkChangeEvent(checkBox, checkBox.nextElementSibling.classList.contains('e-check'));\n    };\n    Selection.prototype.moveIntoUncheckCollection = function (row) {\n        if (this.parent.checkAllRows === 'Check' || this.parent.checkAllRows === 'Uncheck') {\n            var rowObj = this.getRowObj(row);\n            var pKey = rowObj && rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (!pKey) {\n                return;\n            }\n            if (this.chkAllCollec.indexOf(pKey) < 0) {\n                this.chkAllCollec.push(pKey);\n            }\n            else {\n                this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);\n            }\n        }\n    };\n    Selection.prototype.triggerChkChangeEvent = function (checkBox, checkState) {\n        this.parent.trigger(events.checkBoxChange, {\n            checked: checkState, selectedRowIndexes: this.parent.getSelectedRowIndexes(),\n            target: checkBox\n        });\n        if (!this.parent.isEdit) {\n            this.checkedTarget = null;\n        }\n    };\n    Selection.prototype.updateSelectedRowIndex = function (index) {\n        if (this.parent.isCheckBoxSelection && this.parent.enableVirtualization && !this.parent.getDataModule().isRemote()) {\n            if (this.parent.checkAllRows === 'Check') {\n                this.selectedRowIndexes = [];\n                for (var data = 0; data < this.getData().length; data++) {\n                    this.selectedRowIndexes.push(data);\n                }\n            }\n            else if (this.parent.checkAllRows === 'Uncheck') {\n                this.selectedRowIndexes = [];\n            }\n            else {\n                if (index && this.parent.getRowByIndex(index).getAttribute('aria-selected') === 'false') {\n                    var selectedVal = this.selectedRowIndexes.indexOf(index);\n                    this.selectedRowIndexes.splice(selectedVal, 1);\n                }\n            }\n        }\n    };\n    ;\n    Selection.prototype.setCheckAllState = function (index, isInteraction) {\n        if (this.parent.isCheckBoxSelection) {\n            var checkedLen = Object.keys(this.selectedRowState).length;\n            if (!this.parent.isPersistSelection) {\n                checkedLen = this.selectedRecords.length;\n                this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n            }\n            if (this.getCheckAllBox()) {\n                var spanEle = this.getCheckAllBox().nextElementSibling;\n                removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n                if (checkedLen === this.totalRecordsCount && this.totalRecordsCount || (this.parent.enableVirtualization\n                    && !this.parent.allowPaging && !this.parent.getDataModule().isRemote() && checkedLen === this.getData().length)) {\n                    addClass([spanEle], ['e-check']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, true, true);\n                    }\n                    this.parent.checkAllRows = 'Check';\n                }\n                else if (checkedLen === 0 || this.parent.getCurrentViewRecords().length === 0) {\n                    addClass([spanEle], ['e-uncheck']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, false, true);\n                    }\n                    this.parent.checkAllRows = 'Uncheck';\n                    if (checkedLen === 0 && this.parent.getCurrentViewRecords().length === 0) {\n                        addClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                    else {\n                        removeClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                }\n                else {\n                    addClass([spanEle], ['e-stop']);\n                    this.parent.checkAllRows = 'Intermediate';\n                }\n                if (this.parent.enableVirtualization && !this.parent.allowPaging && !this.parent.getDataModule().isRemote()) {\n                    this.updateSelectedRowIndex(index);\n                }\n            }\n        }\n    };\n    Selection.prototype.clickHandler = function (e) {\n        var target = e.target;\n        this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch;\n        this.isMultiShiftRequest = e.shiftKey;\n        this.popUpClickHandler(e);\n        var chkSelect = false;\n        this.preventFocus = true;\n        var checkBox;\n        var checkWrap = parentsUntil(target, 'e-checkbox-wrapper');\n        if (checkWrap && checkWrap.querySelectorAll('.e-checkselect,.e-checkselectall').length > 0) {\n            checkBox = checkWrap.querySelector('input[type=\"checkbox\"]');\n            chkSelect = true;\n        }\n        target = parentsUntil(target, 'e-rowcell');\n        if ((target && target.parentElement.classList.contains('e-row') && !this.parent.selectionSettings.checkboxOnly) || chkSelect) {\n            if (this.parent.isCheckBoxSelection) {\n                this.isMultiCtrlRequest = true;\n            }\n            this.target = target;\n            if (!isNullOrUndefined(checkBox)) {\n                this.checkedTarget = checkBox;\n                if (checkBox.classList.contains('e-checkselectall')) {\n                    this.checkSelectAll(checkBox);\n                }\n                else {\n                    this.checkSelect(checkBox);\n                    this.target = closest(target, '.e-rowcell');\n                }\n            }\n            else {\n                var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n                if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n                    ++rIndex;\n                }\n                this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n                if (this.parent.isCheckBoxSelection) {\n                    this.moveIntoUncheckCollection(closest(target, '.e-row'));\n                    this.setCheckAllState();\n                }\n            }\n            if (!this.parent.isCheckBoxSelection && Browser.isDevice && !this.isSingleSel()) {\n                this.showPopup(e);\n            }\n        }\n        this.isMultiCtrlRequest = false;\n        this.isMultiShiftRequest = false;\n        this.preventFocus = false;\n    };\n    Selection.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-rowselect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSelectMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSelectMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.showPopup = function (e) {\n        setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n            (!this.isSingleSel() && (this.selectedRecords.length > (this.parent.getFrozenColumns() ? 2 : 1)\n                || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n    };\n    Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n        if ((!this.isMultiCtrlRequest && !this.isMultiShiftRequest) || this.isSingleSel()) {\n            if (!this.isDragged) {\n                this.selectRow(rowIndex, true);\n            }\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else if (this.isMultiShiftRequest) {\n            this.selectRowsByRange(isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n            this.selectCellsByRange(isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        else {\n            this.addRowsToSelection([rowIndex]);\n            this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n        }\n        this.isDragged = false;\n    };\n    Selection.prototype.onCellFocused = function (e) {\n        if (this.parent.frozenRows && e.container.isHeader && e.byKey) {\n            if (e.keyArgs.action === 'upArrow') {\n                if (this.parent.allowFiltering) {\n                    e.isJump = e.element.tagName === 'INPUT' ? true : false;\n                }\n                else {\n                    e.isJump = e.element.tagName === 'TH' ? true : false;\n                }\n            }\n            else {\n                if (e.keyArgs.action === 'downArrow') {\n                    var rIdx = Number(e.element.parentElement.getAttribute('aria-rowindex'));\n                    e.isJump = rIdx === 0 ? true : false;\n                }\n                else {\n                    if (e.keyArgs.action === 'ctrlHome') {\n                        e.isJump = true;\n                    }\n                }\n            }\n        }\n        var clear = this.parent.getFrozenColumns() ? (((e.container.isHeader && e.element.tagName !== 'TD' && e.isJump) ||\n            ((e.container.isContent || e.element.tagName === 'TD') && !(e.container.isSelectable || e.element.tagName === 'TD')))\n            && !(e.byKey && e.keyArgs.action === 'space')) : ((e.container.isHeader && e.isJump) ||\n            (e.container.isContent && !e.container.isSelectable)) && !(e.byKey && e.keyArgs.action === 'space');\n        var headerAction = (e.container.isHeader && e.element.tagName !== 'TD' && !closest(e.element, '.e-rowcell'))\n            && !(e.byKey && e.keyArgs.action === 'space');\n        if (!e.byKey || clear) {\n            if (clear && !this.parent.isCheckBoxSelection) {\n                this.clearSelection();\n            }\n            return;\n        }\n        var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        var prev = this.focus.getPrevIndexes();\n        if (this.parent.frozenRows) {\n            if (e.container.isHeader && (e.element.tagName === 'TD' || closest(e.element, '.e-rowcell'))) {\n                var thLen = this.parent.getHeaderTable().querySelector('thead').childElementCount;\n                rowIndex -= thLen;\n                prev.rowIndex = prev.rowIndex ? prev.rowIndex - thLen : null;\n            }\n            else {\n                rowIndex += this.parent.frozenRows;\n                prev.rowIndex = prev.rowIndex === 0 || !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex + this.parent.frozenRows : null;\n            }\n            if (this.parent.getFrozenColumns()) {\n                var cIdx = Number(e.element.getAttribute('aria-colindex'));\n                prev.cellIndex = prev.cellIndex ? (prev.cellIndex === cellIndex ? cIdx : cIdx - 1) : null;\n                cellIndex = cIdx;\n            }\n        }\n        if (headerAction || (['ctrlPlusA', 'escape'].indexOf(e.keyArgs.action) === -1 && e.keyArgs.action !== 'space' &&\n            rowIndex === prev.rowIndex && cellIndex === prev.cellIndex)) {\n            return;\n        }\n        this.preventFocus = true;\n        switch (e.keyArgs.action) {\n            case 'downArrow':\n            case 'upArrow':\n            case 'enter':\n            case 'shiftEnter':\n                this.applyDownUpKey(rowIndex, cellIndex);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.applyRightLeftKey(rowIndex, cellIndex);\n                break;\n            case 'shiftDown':\n            case 'shiftUp':\n                this.shiftDownKey(rowIndex, cellIndex);\n                break;\n            case 'shiftLeft':\n            case 'shiftRight':\n                this.applyShiftLeftRightKey(rowIndex, cellIndex);\n                break;\n            case 'home':\n            case 'end':\n                cellIndex = e.keyArgs.action === 'end' ? this.getLastColIndex(rowIndex) : 0;\n                this.applyHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'ctrlHome':\n            case 'ctrlEnd':\n                this.applyCtrlHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'escape':\n                this.clearSelection();\n                break;\n            case 'ctrlPlusA':\n                this.ctrlPlusA();\n                break;\n            case 'space':\n                this.applySpaceSelection(e.element);\n                break;\n        }\n        this.preventFocus = false;\n    };\n    /**\n     * Apply ctrl + A key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.ctrlPlusA = function () {\n        if (this.isRowType() && !this.isSingleSel()) {\n            this.selectRowsByRange(0, this.parent.getRows().length - 1);\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n        }\n    };\n    Selection.prototype.applySpaceSelection = function (target) {\n        if (target.classList.contains('e-checkselectall')) {\n            this.checkedTarget = target;\n            this.checkSelectAll(this.checkedTarget);\n        }\n        else {\n            if (target.classList.contains('e-checkselect')) {\n                this.checkedTarget = target;\n                this.checkSelect(this.checkedTarget);\n            }\n        }\n    };\n    Selection.prototype.applyDownUpKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.parent.isCheckBoxSelection && this.parent.checkAllRows === 'Check') {\n            this.checkSelectAllAction(false);\n            this.checkedTarget = null;\n        }\n        if (this.isRowType()) {\n            if (this.parent.frozenRows) {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n            else {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.applyUpDown = function (rowIndex) {\n        if (rowIndex < 0) {\n            return;\n        }\n        if (!this.target) {\n            this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];\n        }\n        var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (cIndex >= frzCols) {\n                this.target =\n                    this.contentRenderer.getMovableRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex - frzCols];\n            }\n            else {\n                this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n            }\n        }\n        else {\n            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n        }\n        this.addAttribute(this.target);\n    };\n    Selection.prototype.applyRightLeftKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n            this.addAttribute(this.target);\n        }\n    };\n    Selection.prototype.applyHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else {\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n    };\n    /**\n     * Apply shift+down key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.shiftDownKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        if (this.isRowType() && !this.isSingleSel()) {\n            if (!isUndefined(this.prevRowIndex)) {\n                this.selectRowsByRange(this.prevRowIndex, rowIndex);\n                this.applyUpDown(rowIndex);\n            }\n            else {\n                this.selectRow(0, true);\n            }\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyShiftLeftRightKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        this.selectCellsByRange(this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isRowType()) {\n            this.selectRow(rowIndex, true);\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        if (row) {\n            var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n            var cell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n            if (cell) {\n                cells.push(cell);\n            }\n            addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));\n        }\n        this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n    };\n    Selection.prototype.isRowType = function () {\n        return this.selectionSettings.mode === 'Row' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isCellType = function () {\n        return this.selectionSettings.mode === 'Cell' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isSingleSel = function () {\n        return this.selectionSettings.type === 'Single';\n    };\n    Selection.prototype.getRenderer = function () {\n        if (isNullOrUndefined(this.contentRenderer)) {\n            this.contentRenderer = this.factory.getRenderer(RenderType.Content);\n        }\n        return this.contentRenderer;\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     */\n    Selection.prototype.getSelectedRecords = function () {\n        var selectedData = [];\n        if (!this.selectionSettings.persistSelection) {\n            selectedData = this.parent.getRowsObject().filter(function (row) { return row.isSelected; })\n                .map(function (m) { return m.data; });\n        }\n        else {\n            selectedData = this.persistSelectedData;\n        }\n        return selectedData;\n    };\n    Selection.prototype.addEventListener_checkbox = function () {\n        this.parent.on(events.dataReady, this.dataReady, this);\n        this.onDataBoundFunction = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.on(events.contentReady, this.checkBoxSelectionChanged, this);\n        this.actionCompleteFunc = this.actionCompleteHandler.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.click, this.clickHandler, this);\n    };\n    Selection.prototype.removeEventListener_checkbox = function () {\n        this.parent.off(events.dataReady, this.dataReady);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.click, this.clickHandler);\n    };\n    Selection.prototype.dataReady = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.disableUI = true;\n            this.clearSelection();\n            this.disableUI = false;\n        }\n    };\n    Selection.prototype.actionCompleteHandler = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    return Selection;\n}());\nexport { Selection };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { isActionPrevent } from '../base/util';\n/**\n * The `Search` module is used to handle search action.\n */\nvar Search = /** @class */ (function () {\n    /**\n     * Constructor for Grid search module.\n     * @hidden\n     */\n    function Search(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * Searches Grid records by given key.\n     *\n     * > You can customize the default search action by using [`searchSettings`](./api-grid.html#searchsettings-searchsettingsmodel).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Search.prototype.search = function (searchString) {\n        var gObj = this.parent;\n        searchString = isNullOrUndefined(searchString) ? '' : searchString;\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n            return;\n        }\n        if (searchString !== gObj.searchSettings.key) {\n            gObj.searchSettings.key = searchString.toString();\n            gObj.dataBind();\n        }\n        else if (this.refreshSearch) {\n            gObj.refresh();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.searchComplete, this.onSearchComplete, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.actionCompleteFunc = this.onActionComplete.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.searchComplete, this.onSearchComplete);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (!isNullOrUndefined(e.properties.key)) {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n            });\n        }\n        else {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin\n            });\n        }\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.onSearchComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n        }));\n    };\n    Search.prototype.onActionComplete = function (e) {\n        this.refreshSearch = e.requestType !== 'searching';\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Search.prototype.getModuleName = function () {\n        return 'search';\n    };\n    return Search;\n}());\nexport { Search };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `ShowHide` module is used to control column visibility.\n */\nvar ShowHide = /** @class */ (function () {\n    /**\n     * Constructor for the show hide module.\n     * @hidden\n     */\n    function ShowHide(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Shows a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to show.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.show = function (columnName, showBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, showBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        columns.forEach(function (value) {\n            value.visible = true;\n        });\n        this.setVisible(columns);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to hide.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.hide = function (columnName, hideBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, hideBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        columns.forEach(function (value) {\n            value.visible = false;\n        });\n        this.setVisible(columns);\n    };\n    ShowHide.prototype.getToggleFields = function (key) {\n        var finalized = [];\n        if (typeof key === 'string') {\n            finalized = [key];\n        }\n        else {\n            finalized = key;\n        }\n        return finalized;\n    };\n    ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n        var _this = this;\n        var columns = iterateArrayOrObject(keys, function (key, index) {\n            return iterateArrayOrObject(_this.parent.getColumns(), function (item, index) {\n                if (item[getKeyBy] === key) {\n                    return item;\n                }\n                return undefined;\n            })[0];\n        });\n        return columns;\n    };\n    /**\n     * Shows or hides columns by given column collection.\n     * @private\n     * @param  {Column[]} columns - Specifies the columns.\n     * @return {void}\n     */\n    ShowHide.prototype.setVisible = function (columns) {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, {\n                instance: this, handler: this.setVisible,\n                arg1: columns\n            });\n            return;\n        }\n        columns = isNullOrUndefined(columns) ? this.parent.getColumns() : columns;\n        if (this.parent.allowSelection && this.parent.getSelectedRecords().length) {\n            this.parent.clearSelection();\n        }\n        this.parent.notify(events.columnVisibilityChanged, columns);\n    };\n    return ShowHide;\n}());\nexport { ShowHide };\n","import { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport { formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollBarWidth, getUpdateUsingRaf } from '../base/util';\nimport { scroll, contentReady, uiUpdate, onEmpty, headerRefreshed } from '../base/constant';\nimport { ColumnWidthService } from '../services/width-controller';\n/**\n * The `Scroll` module is used to handle scrolling behaviour.\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid scrolling.\n     * @hidden\n     */\n    function Scroll(parent) {\n        this.lastScrollTop = 0;\n        //To maintain scroll state on grid actions.\n        this.previousValues = { top: 0, left: 0 };\n        this.oneTimeReady = true;\n        this.parent = parent;\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setWidth = function () {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n        if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n            this.parent.toolbarModule.toolbar.element) {\n            this.parent.toolbarModule.toolbar.refreshOverflow();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setHeight = function () {\n        var mHdrHeight = 0;\n        var content = this.parent.getContent().firstChild;\n        if (this.parent.frozenRows && this.parent.height !== 'auto') {\n            mHdrHeight =\n                this.parent.getHeaderContent().querySelector('tbody').offsetHeight;\n            content.style.height = formatUnit(this.parent.height - mHdrHeight);\n        }\n        else {\n            content.style.height = formatUnit(this.parent.height);\n        }\n        this.ensureOverflow(content);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setPadding = function () {\n        var content = this.parent.getHeaderContent();\n        var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n        var cssProps = this.getCssProperties();\n        content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n        content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removePadding = function (rtl) {\n        var cssProps = this.getCssProperties(rtl);\n        this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n        this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n    };\n    /**\n     * Refresh makes the Grid adoptable with the height of parent container.\n     *\n     * > The [`height`](./api-grid.html#height) must be set to 100%.\n     * @return\n     */\n    Scroll.prototype.refresh = function () {\n        if (this.parent.height !== '100%') {\n            return;\n        }\n        var content = this.parent.getContent();\n        this.parent.element.style.height = '100%';\n        var height = this.widthService.getSiblingsHeight(content);\n        content.style.height = 'calc(100% - ' + height + 'px)'; //Set the height to the '.e-gridcontent';\n    };\n    Scroll.prototype.getThreshold = function () {\n        /* Some browsers places the scroller outside the content,\n         * hence the padding should be adjusted.*/\n        var appName = Browser.info.name;\n        if (appName === 'mozilla') {\n            return 0.5;\n        }\n        return 1;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(onEmpty, this.wireEvents, this);\n        this.parent.on(contentReady, this.wireEvents, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(headerRefreshed, this.setScrollLeft, this);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(onEmpty, this.wireEvents);\n        this.parent.off(contentReady, this.wireEvents);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(headerRefreshed, this.setScrollLeft);\n    };\n    Scroll.prototype.setScrollLeft = function () {\n        if (this.parent.frozenColumns) {\n            this.parent.headerModule.getMovableHeader().scrollLeft = this.previousValues.left;\n        }\n    };\n    Scroll.prototype.onContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        var isHeader = element.classList.contains('e-headercontent');\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null || _this.parent.isPreventScrollEvent) {\n                return;\n            }\n            var target = e.target;\n            var left = target.scrollLeft;\n            var sLimit = target.scrollWidth;\n            var isFooter = target.classList.contains('e-summarycontent');\n            if (_this.previousValues.left === left) {\n                _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n                return;\n            }\n            element.scrollLeft = left;\n            if (isFooter) {\n                _this.header.scrollLeft = left;\n            }\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n        };\n    };\n    Scroll.prototype.onFreezeContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var target = e.target;\n            var top = target.scrollTop;\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n        };\n    };\n    Scroll.prototype.onWheelScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var top = element.scrollTop + (e.deltaMode === 1 ? e.deltaY * 30 : e.deltaY);\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            e.preventDefault();\n            _this.parent.getContent().querySelector('.e-frozencontent').scrollTop = top;\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n        };\n    };\n    Scroll.prototype.onTouchScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var cont;\n            var mHdr;\n            var pageXY = _this.getPointXY(e);\n            var top = element.scrollTop + (_this.pageXY.y - pageXY.y);\n            var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n            if (_this.parent.getHeaderContent().contains(e.target)) {\n                mHdr = _this.parent.getFrozenColumns() ?\n                    _this.parent.getHeaderContent().querySelector('.e-movableheader') : _this.parent.getHeaderContent().firstChild;\n                if (_this.previousValues.left === left || (left < 0 || (mHdr.scrollWidth - mHdr.clientWidth) < left)) {\n                    return;\n                }\n                e.preventDefault();\n                mHdr.scrollLeft = left;\n                element.scrollLeft = left;\n                _this.pageXY.x = pageXY.x;\n                _this.previousValues.left = left;\n            }\n            else {\n                cont = _this.parent.getContent().querySelector('.e-frozencontent');\n                if (_this.previousValues.top === top || (top < 0 || (cont.scrollHeight - cont.clientHeight) < top)) {\n                    return;\n                }\n                e.preventDefault();\n                cont.scrollTop = top;\n                element.scrollTop = top;\n                _this.pageXY.y = pageXY.y;\n                _this.previousValues.top = top;\n            }\n        };\n    };\n    Scroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    Scroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (e.touches && e.touches.length) {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        else {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        return pageXY;\n    };\n    Scroll.prototype.wireEvents = function () {\n        var _this = this;\n        if (this.oneTimeReady) {\n            var frzCols = this.parent.getFrozenColumns();\n            this.content = this.parent.getContent().firstChild;\n            this.header = this.parent.getHeaderContent().firstChild;\n            var mCont = this.content.querySelector('.e-movablecontent');\n            var fCont = this.content.querySelector('.e-frozencontent');\n            var mHdr = this.header.querySelector('.e-movableheader');\n            if (this.parent.frozenRows) {\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchmove pointermove', this.onTouchScroll(frzCols ? mCont : this.content), this);\n            }\n            if (frzCols) {\n                EventHandler.add(mCont, 'scroll', this.onContentScroll(mHdr), this);\n                EventHandler.add(mCont, 'scroll', this.onFreezeContentScroll(fCont), this);\n                EventHandler.add(fCont, 'scroll', this.onFreezeContentScroll(mCont), this);\n                EventHandler.add(mHdr, 'scroll', this.onContentScroll(mCont), this);\n                EventHandler.add(fCont, 'wheel', this.onWheelScroll(mCont), this);\n                EventHandler.add(fCont, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(fCont, 'touchmove pointermove', this.onTouchScroll(mCont), this);\n            }\n            else {\n                EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n                EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n            }\n            if (this.parent.aggregates.length) {\n                EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n            }\n            this.refresh();\n            this.oneTimeReady = false;\n        }\n        var table = this.parent.getContentTable();\n        var sLeft;\n        var sHeight;\n        var clientHeight;\n        getUpdateUsingRaf(function () {\n            sLeft = _this.header.scrollLeft;\n            sHeight = table.scrollHeight;\n            clientHeight = _this.parent.getContent().clientHeight;\n        }, function () {\n            if (!_this.parent.enableVirtualization) {\n                if (sHeight < clientHeight) {\n                    addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    if (_this.parent.getFrozenColumns()) {\n                        addClass(_this.parent.getContent().querySelector('.e-movablecontent').querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    }\n                }\n                if ((_this.parent.frozenRows > 0 || _this.parent.frozenColumns > 0) && _this.header.querySelector('.e-movableheader')) {\n                    _this.header.querySelector('.e-movableheader').scrollLeft = _this.previousValues.left;\n                }\n                else {\n                    _this.header.scrollLeft = _this.previousValues.left;\n                }\n                _this.content.scrollLeft = _this.previousValues.left;\n                _this.content.scrollTop = _this.previousValues.top;\n            }\n            if (!_this.parent.enableColumnVirtualization) {\n                _this.content.scrollLeft = sLeft;\n            }\n            if (_this.parent.frozenColumns) {\n                _this.header.querySelector('.e-movableheader').scrollLeft =\n                    _this.content.querySelector('.e-movablecontent').scrollLeft;\n            }\n        });\n        this.parent.isPreventScrollEvent = false;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.getCssProperties = function (rtl) {\n        var css = {};\n        var enableRtl = isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n        css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n        css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n        return css;\n    };\n    Scroll.prototype.ensureOverflow = function (content) {\n        if (this.parent.getFrozenColumns()) {\n            content.querySelector('.e-movablecontent').style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n        }\n        else {\n            content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n        }\n    };\n    Scroll.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.setPadding();\n        this.oneTimeReady = true;\n        if (this.parent.height === 'auto') {\n            this.removePadding();\n        }\n        this.wireEvents();\n        this.setHeight();\n        this.setWidth();\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        //Remove padding\n        this.removePadding();\n        removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n        removeClass([this.parent.getContent().firstChild], 'e-content');\n        //Remove height\n        this.parent.getContent().firstChild.style.height = '';\n        //Remove width\n        this.parent.element.style.width = '';\n        //Remove Dom event\n        EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n    };\n    /**\n     * Function to get the scrollbar width of the browser.\n     * @return {number}\n     * @hidden\n     */\n    Scroll.getScrollBarWidth = function () {\n        return getScrollBarWidth();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","import { print as printWindow, createElement, detach } from '@syncfusion/ej2-base';\nimport { removeElement, getActualProperties, getActualPropFromColl } from '../base/util';\nimport { Grid } from '../base/grid';\nimport * as events from '../base/constant';\n/**\n *\n * The `Print` module is used to handle print action.\n */\nvar Print = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function Print(parent, scrollModule) {\n        this.isAsyncPrint = false;\n        this.printing = 'isPrinting';\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.contentReady.bind(this));\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.on(events.onEmpty, this.onEmpty.bind(this));\n        this.scrollModule = scrollModule;\n    }\n    /**\n     * By default, prints all the Grid pages and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./api-grid.html#printmode-string).\n     * @return {void}\n     */\n    Print.prototype.print = function () {\n        this.renderPrintGrid();\n        this.printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWind.moveTo(0, 0);\n        this.printWind.resizeTo(screen.availWidth, screen.availHeight);\n    };\n    Print.prototype.onEmpty = function () {\n        if (this.isPrintGrid()) {\n            this.contentReady();\n        }\n    };\n    Print.prototype.actionBegin = function () {\n        if (this.isPrintGrid()) {\n            this.isAsyncPrint = true;\n        }\n    };\n    Print.prototype.renderPrintGrid = function () {\n        var gObj = this.parent;\n        var elem = 'element';\n        var printGridModel = {};\n        var element = createElement('div', {\n            id: this.parent.element.id + '_print', className: gObj.element.className + ' e-print-grid'\n        });\n        document.body.appendChild(element);\n        for (var _i = 0, _a = Print.printGridProp; _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (key === 'columns') {\n                printGridModel[key] = getActualPropFromColl(gObj[key]);\n            }\n            else if (key === 'allowPaging') {\n                printGridModel[key] = this.parent.printMode === 'CurrentPage';\n            }\n            else {\n                printGridModel[key] = getActualProperties(gObj[key]);\n            }\n        }\n        var printGrid = new Grid(printGridModel);\n        printGrid.appendTo(element);\n        printGrid[this.printing] = true;\n        printGrid.trigger = gObj.trigger;\n    };\n    Print.prototype.contentReady = function () {\n        if (this.isPrintGrid()) {\n            var gObj = this.parent;\n            if (this.isAsyncPrint) {\n                this.printGrid();\n                return;\n            }\n            var args = {\n                requestType: 'print',\n                element: gObj.element,\n                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]'),\n                cancel: false\n            };\n            if (!this.isAsyncPrint) {\n                gObj.trigger(events.beforePrint, args);\n            }\n            if (args.cancel) {\n                detach(gObj.element);\n                return;\n            }\n            else if (!this.isAsyncPrint) {\n                this.printGrid();\n            }\n        }\n    };\n    Print.prototype.printGrid = function () {\n        var gObj = this.parent;\n        // Pager eleement process based on primt mode\n        if (gObj.allowPaging && gObj.printMode === 'CurrentPage') {\n            gObj.element.querySelector('.e-gridpager').style.display = 'none';\n        }\n        // Height adjustment on print grid\n        if (gObj.height !== 'auto') {\n            var cssProps = this.scrollModule.getCssProperties();\n            var contentDiv = gObj.element.querySelector('.e-content');\n            var headerDiv = gObj.element.querySelector('.e-gridheader');\n            contentDiv.style.height = 'auto';\n            contentDiv.style.overflowY = 'auto';\n            headerDiv.style[cssProps.padding] = '';\n            headerDiv.firstElementChild.style[cssProps.border] = '';\n        }\n        // Grid alignment adjustment on grouping\n        if (gObj.allowGrouping) {\n            if (!gObj.groupSettings.columns.length) {\n                gObj.element.querySelector('.e-groupdroparea').style.display = 'none';\n            }\n            else {\n                this.removeColGroup(gObj.groupSettings.columns.length, gObj.element);\n                removeElement(gObj.element, '.e-grouptopleftcell');\n                removeElement(gObj.element, '.e-recordpluscollapse');\n                removeElement(gObj.element, '.e-indentcell');\n                removeElement(gObj.element, '.e-recordplusexpand');\n            }\n        }\n        // hide horizontal scroll\n        gObj.element.querySelector('.e-content').style.overflowX = 'hidden';\n        //hide filter bar in print grid\n        if (gObj.allowFiltering && gObj.filterSettings.type === 'FilterBar') {\n            gObj.element.querySelector('.e-filterbar').style.display = 'none';\n        }\n        // Hide the waiting popup\n        var waitingPop = gObj.element.querySelectorAll('.e-spin-show');\n        if (waitingPop.length > 0) {\n            waitingPop[0].classList.add('e-spin-hide');\n            waitingPop[0].classList.remove('e-spin-show');\n        }\n        if (gObj[this.printing]) {\n            detach(gObj.element);\n        }\n        gObj.element.classList.remove('e-print-grid');\n        this.printWind = printWindow(gObj.element, this.printWind);\n        gObj[this.printing] = false;\n        var args = {\n            element: gObj.element\n        };\n        gObj.trigger(events.printComplete, args);\n    };\n    Print.prototype.removeColGroup = function (depth, element) {\n        var groupCaption = element.querySelectorAll('.e-groupcaption');\n        var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n        for (var i = 0; i < groupCaption.length; i++) {\n            groupCaption[i].setAttribute('colspan', colSpan);\n        }\n        var colGroups = element.querySelectorAll('colgroup');\n        for (var i = 0; i < colGroups.length; i++) {\n            for (var j = 0; j < depth; j++) {\n                colGroups[i].childNodes[j].style.display = 'none';\n            }\n        }\n    };\n    Print.prototype.isPrintGrid = function () {\n        return this.parent.element.id.indexOf('_print') > 0 && this.parent[this.printing];\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Print.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.contentReady, this.contentReady.bind(this));\n        this.parent.removeEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.off(events.onEmpty, this.onEmpty.bind(this));\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    Print.printGridProp = [\n        'aggregates', 'allowGrouping', 'allowFiltering', 'allowMultiSorting', 'allowReordering', 'allowSorting',\n        'allowTextWrap', 'childGrid', 'columns', 'currentViewData', 'dataSource', 'detailTemplate', 'enableAltRow',\n        'enableColumnVirtualization', 'filterSettings', 'gridLines',\n        'groupSettings', 'height', 'locale', 'pageSettings', 'printMode', 'query', 'queryString',\n        'rowHeight', 'rowTemplate', 'sortSettings', 'textWrapSettings', 'allowPaging',\n        events.beforePrint, events.printComplete\n    ];\n    return Print;\n}());\nexport { Print };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { compile } from '@syncfusion/ej2-base';\nimport { getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { Property, Collection, ChildProperty } from '@syncfusion/ej2-base';\nimport { ValueFormatter } from '../services/value-formatter';\n/**\n * Configures the Grid's aggregate column.\n */\nvar AggregateColumn = /** @class */ (function (_super) {\n    __extends(AggregateColumn, _super);\n    function AggregateColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.templateFn = {};\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setFormatter = function () {\n        var valueFormatter = new ValueFormatter();\n        if (this.format && (this.format.skeleton || this.format.format)) {\n            this.formatFn = valueFormatter.getFormatFunction(this.format);\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setTemplate = function (helper) {\n        if (helper === void 0) { helper = {}; }\n        if (this.footerTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.Summary)] = { fn: compile(this.footerTemplate, helper),\n                property: 'footerTemplate' };\n        }\n        if (this.groupFooterTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.GroupSummary)] = { fn: compile(this.groupFooterTemplate, helper),\n                property: 'groupFooterTemplate' };\n        }\n        if (this.groupCaptionTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = { fn: compile(this.groupCaptionTemplate, helper),\n                property: 'groupCaptionTemplate' };\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getTemplate = function (type) {\n        return this.templateFn[getEnumValue(CellType, type)];\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setPropertiesSilent = function (prop) {\n        this.setProperties(prop, true);\n    };\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"columnName\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"format\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n    return AggregateColumn;\n}(ChildProperty));\nexport { AggregateColumn };\n/**\n * Configures the aggregate rows.\n */\nvar AggregateRow = /** @class */ (function (_super) {\n    __extends(AggregateRow, _super);\n    function AggregateRow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], AggregateColumn)\n    ], AggregateRow.prototype, \"columns\", void 0);\n    return AggregateRow;\n}(ChildProperty));\nexport { AggregateRow };\n","import { Browser, createElement, remove } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\n/**\n * The `Clipboard` module is used to handle clipboard copy action.\n */\nvar Clipboard = /** @class */ (function () {\n    /**\n     * Constructor for the Grid clipboard module\n     * @hidden\n     */\n    function Clipboard(parent) {\n        this.copyContent = '';\n        this.isSelect = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n    };\n    Clipboard.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.clipBoardTextArea = createElement('textarea', {\n            className: 'e-clipboard',\n            styles: 'opacity: 0',\n            attrs: { readonly: 'true', tabindex: '-1', 'aria-label': 'clipboard' }\n        });\n        this.parent.element.appendChild(this.clipBoardTextArea);\n    };\n    Clipboard.prototype.keyDownHandler = function (e) {\n        if (e.action === 'ctrlPlusC') {\n            this.copy();\n        }\n        else if (e.action === 'ctrlShiftPlusH') {\n            this.copy(true);\n        }\n    };\n    Clipboard.prototype.setCopyData = function (withHeader) {\n        if (window.getSelection().toString() === '') {\n            var isFrozen = this.parent.getFrozenColumns();\n            this.clipBoardTextArea.value = this.copyContent = '';\n            var mRows = void 0;\n            var rows = this.parent.getRows();\n            if (isFrozen) {\n                mRows = this.parent.getMovableDataRows();\n            }\n            if (this.parent.selectionSettings.mode !== 'Cell') {\n                var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function (a, b) { return a - b; });\n                if (withHeader) {\n                    var headerTextArray = [];\n                    for (var i = 0; i < this.parent.getVisibleColumns().length; i++) {\n                        headerTextArray[i] = this.parent.getVisibleColumns()[i].headerText;\n                    }\n                    this.getCopyData(headerTextArray, false, '\\t', withHeader);\n                    this.copyContent += '\\n';\n                }\n                for (var i = 0; i < selectedIndexes.length; i++) {\n                    if (i > 0) {\n                        this.copyContent += '\\n';\n                    }\n                    var cells = [].slice.call(rows[selectedIndexes[i]].querySelectorAll('.e-rowcell'));\n                    if (isFrozen) {\n                        cells.push.apply(cells, [].slice.call(mRows[selectedIndexes[i]].querySelectorAll('.e-rowcell')));\n                    }\n                    this.getCopyData(cells, false, '\\t', withHeader);\n                }\n            }\n            else {\n                var obj = this.checkBoxSelection();\n                if (obj.status) {\n                    if (withHeader) {\n                        var headers = [];\n                        for (var i = 0; i < obj.colIndexes.length; i++) {\n                            headers.push(this.parent.getColumnHeaderByIndex(obj.colIndexes[i]));\n                        }\n                        this.getCopyData(headers, false, '\\t', withHeader);\n                        this.copyContent += '\\n';\n                    }\n                    for (var i = 0; i < obj.rowIndexes.length; i++) {\n                        if (i > 0) {\n                            this.copyContent += '\\n';\n                        }\n                        var cells = [].slice.call(rows[obj.rowIndexes[i]].\n                            querySelectorAll('.e-cellselectionbackground'));\n                        if (isFrozen) {\n                            cells.push.apply(cells, [].slice.call(mRows[obj.rowIndexes[i]].querySelectorAll('.e-cellselectionbackground')));\n                        }\n                        this.getCopyData(cells, false, '\\t', withHeader);\n                    }\n                }\n                else {\n                    this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground')), true, '\\n', withHeader);\n                }\n            }\n            var args = {\n                data: this.copyContent,\n                cancel: false,\n            };\n            this.parent.trigger(events.beforeCopy, args);\n            if (args.cancel) {\n                return;\n            }\n            this.clipBoardTextArea.value = this.copyContent = args.data;\n            if (!Browser.userAgent.match(/ipad|ipod|iphone/i)) {\n                this.clipBoardTextArea.select();\n            }\n            else {\n                this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n            }\n            this.isSelect = true;\n        }\n    };\n    Clipboard.prototype.getCopyData = function (cells, isCell, splitKey, withHeader) {\n        var isElement = typeof cells[0] !== 'string';\n        for (var j = 0; j < cells.length; j++) {\n            if (withHeader && isCell) {\n                this.copyContent += this.parent.getColumns()[parseInt(cells[j].getAttribute('aria-colindex'), 10)].headerText + '\\n';\n            }\n            if (isElement) {\n                if (!cells[j].classList.contains('e-hide')) {\n                    this.copyContent += cells[j].textContent;\n                }\n            }\n            else {\n                this.copyContent += cells[j];\n            }\n            if (j < cells.length - 1) {\n                this.copyContent += splitKey;\n            }\n        }\n    };\n    /**\n     * Copy selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header data need to be copied or not.\n     */\n    Clipboard.prototype.copy = function (withHeader) {\n        if (document.queryCommandSupported('copy')) {\n            this.setCopyData(withHeader);\n            document.execCommand('copy');\n            this.clipBoardTextArea.blur();\n        }\n        if (this.isSelect) {\n            window.getSelection().removeAllRanges();\n            this.isSelect = false;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Clipboard.prototype.getModuleName = function () {\n        return 'clipboard';\n    };\n    /**\n     * To destroy the clipboard\n     * @return {void}\n     * @hidden\n     */\n    Clipboard.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.clipBoardTextArea) {\n            remove(this.clipBoardTextArea);\n        }\n    };\n    Clipboard.prototype.checkBoxSelection = function () {\n        var gridObj = this.parent;\n        var obj = { status: false };\n        if (gridObj.selectionSettings.mode === 'Cell') {\n            var rowCellIndxes = gridObj.getSelectedRowCellIndexes();\n            var str = void 0;\n            var isBox = void 0;\n            var rowIndexes = [];\n            var i = void 0;\n            for (i = 0; i < rowCellIndxes.length; i++) {\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    rowIndexes.push(rowCellIndxes[i].rowIndex);\n                }\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    if (!str) {\n                        str = JSON.stringify(rowCellIndxes[i].cellIndexes.sort());\n                    }\n                    if (str !== JSON.stringify(rowCellIndxes[i].cellIndexes.sort())) {\n                        break;\n                    }\n                }\n            }\n            rowIndexes.sort();\n            if (i === rowCellIndxes.length && rowIndexes[rowIndexes.length - 1] - rowIndexes[0] === rowIndexes.length - 1) {\n                obj = { status: true, rowIndexes: rowIndexes, colIndexes: rowCellIndxes[0].cellIndexes };\n            }\n        }\n        return obj;\n    };\n    return Clipboard;\n}());\nexport { Clipboard };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, ChildProperty, Browser, closest, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setValue, getValue } from '@syncfusion/ej2-base';\nimport { createElement, addClass, removeClass, append, classList } from '@syncfusion/ej2-base';\nimport { Property, Collection, Complex, Event, NotifyPropertyChanges, L10n } from '@syncfusion/ej2-base';\nimport { EventHandler, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport { createSpinner, hideSpinner, showSpinner, Tooltip } from '@syncfusion/ej2-popups';\nimport { iterateArrayOrObject, prepareColumns, parentsUntil, wrap, templateCompiler, refreshForeignData, getRowHeight } from './util';\nimport * as events from '../base/constant';\nimport { Render } from '../renderer/render';\nimport { RenderType } from './enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { CellRendererFactory } from '../services/cell-render-factory';\nimport { ServiceLocator } from '../services/service-locator';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { ColumnWidthService } from '../services/width-controller';\nimport { AriaService } from '../services/aria-service';\nimport { FocusStrategy } from '../services/focus-strategy';\nimport { PageSettings } from '../models/page-settings';\nimport { Selection } from '../actions/selection';\nimport { Search } from '../actions/search';\nimport { ShowHide } from '../actions/show-hide';\nimport { Scroll } from '../actions/scroll';\nimport { Print } from '../actions/print';\nimport { AggregateRow } from '../models/aggregate';\nimport { Clipboard } from '../actions/clipboard';\n/**\n * Represents the field name and direction of sort column.\n */\nvar SortDescriptor = /** @class */ (function (_super) {\n    __extends(SortDescriptor, _super);\n    function SortDescriptor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"direction\", void 0);\n    return SortDescriptor;\n}(ChildProperty));\nexport { SortDescriptor };\n/**\n * Configures the sorting behavior of Grid.\n */\nvar SortSettings = /** @class */ (function (_super) {\n    __extends(SortSettings, _super);\n    function SortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], SortDescriptor)\n    ], SortSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], SortSettings.prototype, \"allowUnsort\", void 0);\n    return SortSettings;\n}(ChildProperty));\nexport { SortSettings };\n/**\n * Represents the predicate for the filter column.\n */\nvar Predicate = /** @class */ (function (_super) {\n    __extends(Predicate, _super);\n    function Predicate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"operator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"matchCase\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"predicate\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualFilterValue\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualOperator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ejpredicate\", void 0);\n    return Predicate;\n}(ChildProperty));\nexport { Predicate };\n/**\n * Configures the filtering behavior of the Grid.\n */\nvar FilterSettings = /** @class */ (function (_super) {\n    __extends(FilterSettings, _super);\n    function FilterSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], Predicate)\n    ], FilterSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property('FilterBar')\n    ], FilterSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n    __decorate([\n        Property(1500)\n    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"operators\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"ignoreAccent\", void 0);\n    return FilterSettings;\n}(ChildProperty));\nexport { FilterSettings };\n/**\n * Configures the selection behavior of the Grid.\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Row')\n    ], SelectionSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property('Flow')\n    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n    __decorate([\n        Property('Single')\n    ], SelectionSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"checkboxOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"persistSelection\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * Configures the search behavior of the Grid.\n */\nvar SearchSettings = /** @class */ (function (_super) {\n    __extends(SearchSettings, _super);\n    function SearchSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], SearchSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property('')\n    ], SearchSettings.prototype, \"key\", void 0);\n    __decorate([\n        Property('contains')\n    ], SearchSettings.prototype, \"operator\", void 0);\n    __decorate([\n        Property(true)\n    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(false)\n    ], SearchSettings.prototype, \"ignoreAccent\", void 0);\n    return SearchSettings;\n}(ChildProperty));\nexport { SearchSettings };\n/**\n * Configures the row drop settings of the Grid.\n */\nvar RowDropSettings = /** @class */ (function (_super) {\n    __extends(RowDropSettings, _super);\n    function RowDropSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], RowDropSettings.prototype, \"targetID\", void 0);\n    return RowDropSettings;\n}(ChildProperty));\nexport { RowDropSettings };\n/**\n * Configures the text wrap settings of the Grid.\n */\nvar TextWrapSettings = /** @class */ (function (_super) {\n    __extends(TextWrapSettings, _super);\n    function TextWrapSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n    return TextWrapSettings;\n}(ChildProperty));\nexport { TextWrapSettings };\n/**\n * Configures the group behavior of the Grid.\n */\nvar GroupSettings = /** @class */ (function (_super) {\n    __extends(GroupSettings, _super);\n    function GroupSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showDropArea\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n    __decorate([\n        Property([])\n    ], GroupSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property()\n    ], GroupSettings.prototype, \"captionTemplate\", void 0);\n    return GroupSettings;\n}(ChildProperty));\nexport { GroupSettings };\n/**\n * Configures the edit behavior of the Grid.\n */\nvar EditSettings = /** @class */ (function (_super) {\n    __extends(EditSettings, _super);\n    function EditSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property('Normal')\n    ], EditSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n    return EditSettings;\n}(ChildProperty));\nexport { EditSettings };\n/**\n * Represents the Grid component.\n * ```html\n * <div id=\"grid\"></div>\n * <script>\n *  var gridObj = new Grid({ allowPaging: true });\n *  gridObj.appendTo(\"#grid\");\n * </script>\n * ```\n */\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function Grid(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isPreventScrollEvent = false;\n        _this.inViewIndexes = [];\n        _this.freezeRefresh = Component.prototype.refresh;\n        /**\n         * Gets the currently visible records of the Grid.\n         */\n        _this.currentViewData = [];\n        /** @hidden */\n        _this.prevPageMoving = false;\n        _this.needsID = true;\n        setValue('mergePersistData', _this.mergePersistGridData, _this);\n        return _this;\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @return {string}\n     * @hidden\n     */\n    Grid.prototype.getPersistData = function () {\n        var _this = this;\n        var keyEntity = ['pageSettings', 'sortSettings',\n            'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex'];\n        var ignoreOnPersist = {\n            pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n            filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay', 'ignoreAccent'],\n            groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n                'disablePageWiseAggregates', 'hideCaptionCount'],\n            searchSettings: ['fields', 'operator', 'ignoreCase'],\n            sortSettings: [], columns: [], selectedRowIndex: []\n        };\n        var ignoreOnColumn = ['filter', 'edit', 'filterBarTemplate', 'headerTemplate', 'template',\n            'commandTemplate', 'commands', 'dataSource'];\n        keyEntity.forEach(function (value) {\n            var currentObject = _this[value];\n            for (var _i = 0, _a = ignoreOnPersist[value]; _i < _a.length; _i++) {\n                var val = _a[_i];\n                delete currentObject[val];\n            }\n        });\n        this.ignoreInArrays(ignoreOnColumn, this.columns);\n        return this.addOnPersist(keyEntity);\n    };\n    Grid.prototype.ignoreInArrays = function (ignoreOnColumn, columns) {\n        var _this = this;\n        columns.forEach(function (column) {\n            if (column.columns) {\n                _this.ignoreInColumn(ignoreOnColumn, column);\n                _this.ignoreInArrays(ignoreOnColumn, column.columns);\n            }\n            else {\n                _this.ignoreInColumn(ignoreOnColumn, column);\n            }\n        });\n    };\n    Grid.prototype.ignoreInColumn = function (ignoreOnColumn, column) {\n        ignoreOnColumn.forEach(function (val) {\n            delete column[val];\n        });\n    };\n    /**\n     * To provide the array of modules needed for component rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    Grid.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.isDestroyed) {\n            return modules;\n        }\n        if (this.allowFiltering) {\n            modules.push({\n                member: 'filter',\n                args: [this, this.filterSettings, this.serviceLocator]\n            });\n        }\n        if (this.allowExcelExport) {\n            modules.push({\n                member: 'ExcelExport',\n                args: [this]\n            });\n        }\n        if (this.allowPdfExport) {\n            modules.push({\n                member: 'PdfExport',\n                args: [this]\n            });\n        }\n        if (this.allowSorting) {\n            modules.push({\n                member: 'sort',\n                args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.allowPaging) {\n            modules.push({\n                member: 'pager',\n                args: [this, this.pageSettings]\n            });\n        }\n        if (this.allowSelection) {\n            modules.push({\n                member: 'selection',\n                args: [this, this.selectionSettings, this.serviceLocator]\n            });\n        }\n        modules.push({\n            member: 'resize',\n            args: [this]\n        });\n        if (this.allowReordering) {\n            modules.push({\n                member: 'reorder',\n                args: [this]\n            });\n        }\n        if (this.allowRowDragAndDrop) {\n            modules.push({\n                member: 'rowDragAndDrop',\n                args: [this]\n            });\n        }\n        if (this.allowGrouping) {\n            modules.push({\n                member: 'group',\n                args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.aggregates.length) {\n            modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n        }\n        if (this.isDetail()) {\n            modules.push({\n                member: 'detailRow',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.toolbar || this.toolbarTemplate) {\n            modules.push({\n                member: 'toolbar',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.enableVirtualization || this.enableColumnVirtualization) {\n            modules.push({\n                member: 'virtualscroll',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.getFrozenColumns() || this.frozenRows) {\n            modules.push({ member: 'freeze', args: [this, this.serviceLocator] });\n        }\n        if (this.isCommandColumn(this.columns)) {\n            modules.push({\n                member: 'commandColumn',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n            modules.push({\n                member: 'edit',\n                args: [this, this.serviceLocator]\n            });\n        }\n        this.extendRequiredModules(modules);\n        return modules;\n    };\n    Grid.prototype.extendRequiredModules = function (modules) {\n        if (this.contextMenuItems) {\n            modules.push({\n                member: 'contextMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnMenu) {\n            modules.push({\n                member: 'columnMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnChooser) {\n            modules.push({\n                member: 'columnChooser',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.isForeignKeyEnabled(this.columns)) {\n            modules.push({ member: 'foreignKey', args: [this, this.serviceLocator] });\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    Grid.prototype.preRender = function () {\n        this.serviceLocator = new ServiceLocator;\n        this.initProperties();\n        this.initializeServices();\n    };\n    Grid.prototype.initProperties = function () {\n        /* tslint:disable */\n        this.isInitial = true;\n        this.sortedColumns = [];\n        this.inViewIndexes = [];\n        this.mediaCol = [];\n        this.isInitialLoad = false;\n        this.mergeCells = {};\n        this.isEdit = false;\n        this.checkAllRows = 'None';\n        this.isCheckBoxSelection = false;\n        this.isPersistSelection = false;\n        this.freezeRefresh = Component.prototype.refresh;\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.defaultLocale = {\n            EmptyRecord: 'No records to display',\n            True: 'true',\n            False: 'false',\n            InvalidFilterMessage: 'Invalid Filter Data',\n            GroupDropArea: 'Drag a column header here to group its column',\n            UnGroup: 'Click here to ungroup',\n            GroupDisable: 'Grouping is disabled for this column',\n            FilterbarTitle: '\\'s filter bar cell',\n            EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n            // Toolbar Items\n            Add: 'Add',\n            Edit: 'Edit',\n            Cancel: 'Cancel',\n            Update: 'Update',\n            Delete: 'Delete',\n            Print: 'Print',\n            Pdfexport: 'PDF Export',\n            Excelexport: 'Excel Export',\n            Wordexport: 'Word Export',\n            Csvexport: 'CSV Export',\n            Search: 'Search',\n            Columnchooser: 'Columns',\n            Save: 'Save',\n            Item: 'item',\n            Items: 'items',\n            EditOperationAlert: 'No records selected for edit operation',\n            DeleteOperationAlert: 'No records selected for delete operation',\n            SaveButton: 'Save',\n            OKButton: 'OK',\n            CancelButton: 'Cancel',\n            EditFormTitle: 'Details of ',\n            AddFormTitle: 'Add New Record',\n            BatchSaveConfirm: 'Are you sure you want to save changes?',\n            BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n            ConfirmDelete: 'Are you sure you want to Delete Record?',\n            CancelEdit: 'Are you sure you want to Cancel the changes?',\n            ChooseColumns: 'Choose Column',\n            SearchColumns: 'search columns',\n            Matchs: 'No Matches Found',\n            FilterButton: 'Filter',\n            ClearButton: 'Clear',\n            StartsWith: 'Starts With',\n            EndsWith: 'Ends With',\n            Contains: 'Contains',\n            Equal: 'Equal',\n            NotEqual: 'Not Equal',\n            LessThan: 'Less Than',\n            LessThanOrEqual: 'Less Than Or Equal',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqual: 'Greater Than Or Equal',\n            ChooseDate: 'Choose a Date',\n            EnterValue: 'Enter the value',\n            Copy: 'Copy',\n            Group: 'Group by this column',\n            Ungroup: 'Ungroup by this column',\n            autoFitAll: 'Auto Fit all columns',\n            autoFit: 'Auto Fit this column',\n            Export: 'Export',\n            FirstPage: 'First Page',\n            LastPage: 'Last Page',\n            PreviousPage: 'Previous Page',\n            NextPage: 'Next Page',\n            SortAscending: 'Sort Ascending',\n            SortDescending: 'Sort Descending',\n            EditRecord: 'Edit Record',\n            DeleteRecord: 'Delete Record',\n            FilterMenu: 'Filter',\n            SelectAll: 'Select All',\n            Blanks: 'Blanks',\n            FilterTrue: 'True',\n            FilterFalse: 'False',\n            NoResult: 'No Matches Found',\n            ClearFilter: 'Clear Filter',\n            NumberFilter: 'Number Filters',\n            TextFilter: 'Text Filters',\n            DateFilter: 'Date Filters',\n            MatchCase: 'Match Case',\n            Between: 'Between',\n            CustomFilter: 'Custom Filter',\n            CustomFilterPlaceHolder: 'Enter the value',\n            CustomFilterDatePlaceHolder: 'Choose a date',\n            AND: 'AND',\n            OR: 'OR',\n            ShowRowsWhere: 'Show rows where:'\n        };\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftRight: 'shift+rightarrow',\n            shiftLeft: 'shift+leftarrow',\n            home: 'home',\n            end: 'end',\n            escape: 'escape',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            ctrlAltPageUp: 'ctrl+alt+pageup',\n            ctrlAltPageDown: 'ctrl+alt+pagedown',\n            altPageUp: 'alt+pageup',\n            altPageDown: 'alt+pagedown',\n            altDownArrow: 'alt+downarrow',\n            altUpArrow: 'alt+uparrow',\n            ctrlDownArrow: 'ctrl+downarrow',\n            ctrlUpArrow: 'ctrl+uparrow',\n            ctrlPlusA: 'ctrl+A',\n            ctrlPlusP: 'ctrl+P',\n            insert: 'insert',\n            delete: 'delete',\n            f2: 'f2',\n            enter: 'enter',\n            ctrlEnter: 'ctrl+enter',\n            shiftEnter: 'shift+enter',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            space: 'space',\n            ctrlPlusC: 'ctrl+C',\n            ctrlShiftPlusH: 'ctrl+shift+H'\n        };\n        /* tslint:enable */\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     * @private\n     */\n    Grid.prototype.render = function () {\n        this.ariaService.setOptions(this.element, { role: 'grid' });\n        createSpinner({ target: this.element });\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.getMediaColumns();\n        this.searchModule = new Search(this);\n        this.scrollModule = new Scroll(this);\n        this.notify(events.initialLoad, {});\n        this.trigger(events.load);\n        prepareColumns(this.columns, this.enableColumnVirtualization);\n        this.getColumns();\n        this.processModel();\n        this.gridRender();\n        this.wireEvents();\n        this.addListener();\n        this.updateDefaultCursor();\n        this.updateStackedFilter();\n        this.showSpinner();\n        this.notify(events.initialEnd, {});\n    };\n    /**\n     * By default, grid shows the spinner for all its actions. You can use this method to show spinner at your needed time.\n     */\n    Grid.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * Manually showed spinner needs to hide by `hideSpinnner`.\n     */\n    Grid.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    Grid.prototype.updateStackedFilter = function () {\n        if (this.allowFiltering && this.filterSettings.type === 'FilterBar' &&\n            this.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n            this.getHeaderContent().classList.add('e-stackedfilter');\n        }\n        else {\n            this.getHeaderContent().classList.remove('e-stackedfilter');\n        }\n    };\n    Grid.prototype.getMediaColumns = function () {\n        if (!this.enableColumnVirtualization) {\n            var gcol = this.getColumns();\n            this.getShowHideService = this.serviceLocator.getService('showHideService');\n            if (!isNullOrUndefined(gcol)) {\n                for (var index = 0; index < gcol.length; index++) {\n                    if (!isNullOrUndefined(gcol[index].hideAtMedia)) {\n                        this.mediaCol.push(gcol[index]);\n                        var media = window.matchMedia(gcol[index].hideAtMedia);\n                        this.mediaQueryUpdate(index, media);\n                        media.addListener(this.mediaQueryUpdate.bind(this, index));\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n        var col = this.getColumns()[columnIndex];\n        col.visible = e.matches;\n        if (this.isInitialLoad) {\n            if (col.visible) {\n                this.showHider.show(col.headerText, 'headerText');\n            }\n            else {\n                this.showHider.hide(col.headerText, 'headerText');\n            }\n        }\n    };\n    Grid.prototype.refreshMediaCol = function () {\n        this.isInitialLoad = true;\n        if (this.aggregates.length && this.element.scrollHeight > this.height) {\n            var footerContent = this.element.querySelector('.e-gridfooter');\n            addClass([footerContent], ['e-footerpadding']);\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     * @private\n     */\n    Grid.prototype.eventInitializer = function () {\n        //eventInitializer\n    };\n    /**\n     * Destroys the component (detaches/removes all event handlers, attributes, classes, and empties the component element).\n     * @method destroy\n     * @return {void}\n     */\n    Grid.prototype.destroy = function () {\n        var gridElement = this.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.unwireEvents();\n        }\n        this.removeListener();\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        if (hasGridChild) {\n            _super.prototype.destroy.call(this);\n        }\n        this.toolTipObj.destroy();\n        var modules = ['renderModule', 'headerModule', 'contentModule', 'valueFormatterService',\n            'serviceLocator', 'ariaService', 'keyboardModule', 'widthService', 'searchModule', 'showHider',\n            'scrollModule', 'printModule', 'clipboardModule', 'focusModule'];\n        for (var i = 0; i < modules.length; i++) {\n            if (this[modules[i]]) {\n                this[modules[i]] = null;\n            }\n        }\n        this.element.innerHTML = '';\n        classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device', 'e-grid-min-height']);\n    };\n    Grid.prototype.destroyDependentModules = function () {\n        var gridElement = this.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.scrollModule.destroy();\n        this.keyboardModule.destroy();\n        this.focusModule.destroy();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Grid.prototype.getModuleName = function () {\n        return 'grid';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    /* tslint:disable-next-line:max-line-length */\n    Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        var requireGridRefresh = false;\n        var checkCursor;\n        var args = { requestType: 'refresh' };\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        if (properties.indexOf('columns') > -1) {\n            this.updateColumnObject();\n            requireGridRefresh = true;\n        }\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'allowPaging':\n                    this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n                    requireRefresh = true;\n                    break;\n                case 'pageSettings':\n                    this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n                    if (isNullOrUndefined(newProp.pageSettings.currentPage) && isNullOrUndefined(newProp.pageSettings.totalRecordsCount)\n                        || ((newProp.pageSettings.currentPage !== oldProp.pageSettings.currentPage)\n                            && !this.enableColumnVirtualization && !this.enableVirtualization\n                            && this.pageSettings.totalRecordsCount <= this.pageSettings.pageSize)) {\n                        requireRefresh = true;\n                    }\n                    break;\n                case 'currencyCode':\n                case 'locale':\n                    _super.prototype.refresh.call(this);\n                    break;\n                case 'allowSorting':\n                    this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'allowFiltering':\n                    this.updateStackedFilter();\n                    this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n                    requireRefresh = true;\n                    if (this.filterSettings.type !== 'FilterBar') {\n                        this.refreshHeader();\n                    }\n                    break;\n                case 'height':\n                case 'width':\n                    this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                    break;\n                case 'allowReordering':\n                    this.headerModule.refreshUI();\n                    checkCursor = true;\n                    break;\n                case 'allowRowDragAndDrop':\n                    this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n                    break;\n                case 'allowSelection':\n                    this.notify(events.uiUpdate, { module: 'selection', enable: this.allowSelection });\n                    break;\n                case 'rowTemplate':\n                    this.rowTemplateFn = templateCompiler(this.rowTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'detailTemplate':\n                    this.detailTemplateFn = templateCompiler(this.detailTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'allowGrouping':\n                    this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n                    this.headerModule.refreshUI();\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'childGrid':\n                    requireRefresh = true;\n                    break;\n                case 'toolbar':\n                    this.notify(events.uiUpdate, { module: 'toolbar' });\n                    break;\n                case 'groupSettings':\n                    if (!(isNullOrUndefined(newProp.groupSettings.showDropArea))) {\n                        this.headerModule.refreshUI();\n                        requireRefresh = true;\n                        checkCursor = true;\n                    }\n                    this.notify(events.inBoundModelChanged, {\n                        module: 'group', properties: newProp.groupSettings,\n                        oldProperties: oldProp.groupSettings\n                    });\n                    break;\n                case 'aggregates':\n                    if (!this.aggregates.length && this.allowGrouping && this.groupSettings.columns.length) {\n                        requireRefresh = true;\n                    }\n                    this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n                    break;\n                case 'frozenColumns':\n                case 'frozenRows':\n                    this.freezeRefresh();\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp);\n            }\n        }\n        if (checkCursor) {\n            this.updateDefaultCursor();\n        }\n        if (requireGridRefresh) {\n            this.refresh();\n            if (this.frozenColumns || this.frozenRows) {\n                this.freezeRefresh();\n            }\n        }\n        else if (requireRefresh) {\n            this.notify(events.modelChanged, args);\n            requireRefresh = false;\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    Grid.prototype.extendedPropertyChange = function (prop, newProp) {\n        switch (prop) {\n            case 'enableRtl':\n                this.updateRTL();\n                if (this.allowPaging) {\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n                }\n                if (this.height !== 'auto') {\n                    this.scrollModule.removePadding(!newProp.enableRtl);\n                    this.scrollModule.setPadding();\n                }\n                if (this.toolbar) {\n                    this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n                }\n                if (this.contextMenuItems) {\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();\n                }\n                if (this.showColumnMenu) {\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();\n                }\n                this.notify(events.rtlUpdated, {});\n                break;\n            case 'enableAltRow':\n                this.renderModule.refresh();\n                break;\n            case 'allowResizing':\n                this.headerModule.refreshUI();\n                this.updateResizeLines();\n                break;\n            case 'rowHeight':\n                if (this.rowHeight) {\n                    addClass([this.element], 'e-grid-min-height');\n                }\n                else {\n                    removeClass([this.element], 'e-grid-min-height');\n                }\n                this.renderModule.refresh();\n                this.headerModule.refreshUI();\n                break;\n            case 'gridLines':\n                this.updateGridLines();\n                break;\n            case 'showColumnMenu':\n                this.headerModule.refreshUI();\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: true });\n                break;\n            case 'columnMenuItems':\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: this.columnMenuItems });\n                break;\n            case 'contextMenuItems':\n                this.notify(events.uiUpdate, { module: 'contextMenu', enable: this.contextMenuItems });\n                break;\n            case 'showColumnChooser':\n                this.notify(events.uiUpdate, { module: 'columnChooser', enable: this.showColumnChooser });\n                break;\n            case 'filterSettings':\n                this.updateStackedFilter();\n                this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n                break;\n            case 'searchSettings':\n                this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n                break;\n            case 'sortSettings':\n                this.notify(events.inBoundModelChanged, { module: 'sort' });\n                break;\n            case 'selectionSettings':\n                this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n                break;\n            case 'editSettings':\n                this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n                break;\n            case 'allowTextWrap':\n            case 'textWrapSettings':\n                if (this.allowTextWrap) {\n                    this.applyTextWrap();\n                }\n                else {\n                    this.removeTextWrap();\n                }\n                this.notify(events.freezeRender, { case: 'textwrap', isModeChg: (prop === 'textWrapSettings') });\n                break;\n            case 'dataSource':\n                var pending_1 = this.getDataModule().getState();\n                if (pending_1.isPending) {\n                    var gResult_1 = !isNullOrUndefined(this.dataSource) ? this.dataSource.result : [];\n                    (pending_1.group || []).forEach(function (name) {\n                        gResult_1 = DataUtil.group(gResult_1, name, pending_1.aggregates || []);\n                    });\n                    this.dataSource = {\n                        result: gResult_1, count: this.dataSource.count,\n                        aggregates: this.dataSource.aggregates\n                    };\n                    pending_1.resolver(this.dataSource);\n                }\n                else {\n                    this.getDataModule().setState({ isDataChanged: false });\n                    this.notify(events.dataSourceModified, {});\n                    this.renderModule.refresh();\n                }\n                break;\n            case 'enableHover':\n                var action = newProp.enableHover ? addClass : removeClass;\n                action([this.element], 'e-gridhover');\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setProperties = function (prop, muteOnChange) {\n        _super.prototype.setProperties.call(this, prop, muteOnChange);\n        if (this.filterModule && muteOnChange) {\n            this.filterModule.refreshFilter();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.updateDefaultCursor = function () {\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            if (this.allowSorting || (this.allowGrouping && this.groupSettings.showDropArea) || this.allowReordering) {\n                row.classList.remove('e-defaultcursor');\n            }\n            else {\n                row.classList.add('e-defaultcursor');\n            }\n        }\n    };\n    Grid.prototype.updateColumnModel = function (columns) {\n        for (var i = 0, len = columns.length; i < len; i++) {\n            if (columns[i].columns) {\n                this.updateColumnModel(columns[i].columns);\n            }\n            else {\n                this.columnModel.push(columns[i]);\n            }\n        }\n        this.updateFrozenColumns();\n    };\n    Grid.prototype.updateFrozenColumns = function () {\n        var cols = this.columnModel;\n        var count = 0;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].isFrozen) {\n                cols.splice(this.frozenColumns + count, 0, cols.splice(i, 1)[0]);\n                count++;\n            }\n        }\n    };\n    /**\n     * Gets the columns from the Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getColumns = function (isRefresh) {\n        var _this = this;\n        var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n        var vLen = inview.length;\n        if (!this.enableColumnVirtualization || isNullOrUndefined(this.columnModel) || this.columnModel.length === 0 || isRefresh) {\n            this.columnModel = [];\n            this.updateColumnModel(this.columns);\n        }\n        var columns = vLen === 0 ? this.columnModel :\n            this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n        return columns;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getStackedHeaderColumnByHeaderText = function (stackedHeader, col) {\n        for (var i = 0; i < col.length; i++) {\n            var individualColumn = col[i];\n            if (individualColumn.field === stackedHeader || individualColumn.headerText === stackedHeader) {\n                this.stackedColumn = individualColumn;\n                break;\n            }\n            else if (individualColumn.columns) {\n                this.getStackedHeaderColumnByHeaderText(stackedHeader, individualColumn.columns);\n            }\n        }\n        return this.stackedColumn;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getColumnIndexesInView = function () {\n        return this.inViewIndexes;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setColumnIndexesInView = function (indexes) {\n        this.inViewIndexes = indexes;\n    };\n    /**\n     * Gets the visible columns from the Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getVisibleColumns = function () {\n        var cols = [];\n        for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible) {\n                cols.push(col);\n            }\n        }\n        return cols;\n    };\n    /**\n     * Gets the header div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderContent = function () {\n        return this.headerModule.getPanel();\n    };\n    /**\n     * Sets the header div of the Grid to replace the old header.\n     * @param  {Element} element - Specifies the Grid header.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderContent = function (element) {\n        this.headerModule.setPanel(element);\n    };\n    /**\n     * Gets the content table of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContentTable = function () {\n        return this.contentModule.getTable();\n    };\n    /**\n     * Sets the content table of the Grid to replace the old content table.\n     * @param  {Element} element - Specifies the Grid content table.\n     * @return {void}\n     */\n    Grid.prototype.setGridContentTable = function (element) {\n        this.contentModule.setTable(element);\n    };\n    /**\n     * Gets the content div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Sets the content div of the Grid to replace the old Grid content.\n     * @param  {Element} element - Specifies the Grid content.\n     * @return {void}\n     */\n    Grid.prototype.setGridContent = function (element) {\n        this.contentModule.setPanel(element);\n    };\n    /**\n     * Gets the header table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderTable = function () {\n        return this.headerModule.getTable();\n    };\n    /**\n     * Sets the header table of the Grid to replace the old one.\n     * @param  {Element} element - Specifies the Grid header table.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderTable = function (element) {\n        this.headerModule.setTable(element);\n    };\n    /**\n     * Gets the footer div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContent = function () {\n        if (isNullOrUndefined(this.footerElement)) {\n            this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        }\n        return this.footerElement;\n    };\n    /**\n     * Gets the footer table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContentTable = function () {\n        if (isNullOrUndefined(this.footerElement)) {\n            this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        }\n        return this.footerElement.firstChild.firstChild;\n    };\n    /**\n     * Gets the pager of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getPager = function () {\n        return this.gridPager; //get element from pager\n    };\n    /**\n     * Sets the pager of the Grid to replace the old pager.\n     * @param  {Element} element - Specifies the Grid pager.\n     * @return {void}\n     */\n    Grid.prototype.setGridPager = function (element) {\n        this.gridPager = element;\n    };\n    /**\n     * Gets a row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getRowByIndex = function (index) {\n        return this.contentModule.getRowByIndex(index);\n    };\n    /**\n     * Gets a movable tables row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableRowByIndex = function (index) {\n        return this.contentModule.getMovableRowByIndex(index);\n    };\n    /**\n     * Gets all the data rows of the Grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getRows = function () {\n        return this.contentModule.getRowElements();\n    };\n    /**\n     * Get a row information based on cell\n     * @param {Element}\n     * @return RowInfo\n     */\n    Grid.prototype.getRowInfo = function (target) {\n        var ele = target;\n        var args = { target: target };\n        if (!isNullOrUndefined(target) && isNullOrUndefined(parentsUntil(ele, 'e-detailrowcollapse')\n            && isNullOrUndefined(parentsUntil(ele, 'e-recordplusexpand'))) && !this.isEdit) {\n            var cell = closest(ele, '.e-rowcell');\n            if (!cell) {\n                return args;\n            }\n            var cellIndex = parseInt(cell.getAttribute('aria-colindex'), 10);\n            if (!isNullOrUndefined(cell) && !isNaN(cellIndex)) {\n                var row_1 = closest(cell, '.e-row');\n                var rowIndex = parseInt(row_1.getAttribute('aria-rowindex'), 10);\n                var frzCols = this.getFrozenColumns();\n                var isMovable = frzCols ? cellIndex >= frzCols : false;\n                var rows = (isMovable ?\n                    this.contentModule.getMovableRows() : this.contentModule.getRows());\n                var rowsObject = rows.filter(function (r) { return r.uid === row_1.getAttribute('data-uid'); });\n                var rowData = rowsObject[0].data;\n                var column = rowsObject[0].cells[isMovable ? cellIndex - frzCols : cellIndex].column;\n                args = { cell: cell, cellIndex: cellIndex, row: row_1, rowIndex: rowIndex, rowData: rowData, column: column, target: target };\n            }\n        }\n        return args;\n    };\n    /**\n     * Gets the Grid's movable content rows from frozen grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableRows = function () {\n        return this.contentModule.getMovableRowElements();\n    };\n    /**\n     * Gets all the Grid's data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getDataRows = function () {\n        var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderTable().querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addMovableRows = function (fRows, mrows) {\n        for (var i = 0, len = mrows.length; i < len; i++) {\n            fRows.push(mrows[i]);\n        }\n        return fRows;\n    };\n    Grid.prototype.generateDataRows = function (rows) {\n        var dRows = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                dRows.push(rows[i]);\n            }\n        }\n        return dRows;\n    };\n    /**\n     * Gets all the Grid's movable table data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableDataRows = function () {\n        var rows = [].slice.call(this.getContent().querySelector('.e-movablecontent').querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * Updates particular cell value based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     * @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     * @param {string } field - Specifies the field name which you want to update.\n     * @param {string | number | boolean | Date} value - To update new value for the particular cell.\n     */\n    Grid.prototype.setCellValue = function (key, field, value) {\n        var cells = 'cells';\n        var rowData = 'data';\n        var rowIdx = 'index';\n        var rowuID = 'uid';\n        var fieldIdx;\n        var col;\n        var tr;\n        var mTr;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var cell = new CellRenderer(this, this.serviceLocator);\n        var selectedRow = {};\n        var movableSelectedRow = {};\n        var selectedMovableRow = {};\n        var rowObjects = this.contentModule.getRows();\n        var movableRowObjects = this.contentModule.getMovableRows();\n        fieldIdx = this.getColumnIndexByField(field);\n        col = this.getColumnByField(field);\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        movableSelectedRow = movableRowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        tr = !isNullOrUndefined(selectedRow) ? this.element.querySelector('[data-uid=' + selectedRow[rowuID] + ']') : null;\n        mTr = !isNullOrUndefined(movableSelectedRow) ? this.element.querySelector('[data-uid=' + movableSelectedRow[rowuID] + ']') : null;\n        if (!isNullOrUndefined(tr)) {\n            setValue(field, value, selectedRow[rowData]);\n            var td = !isNullOrUndefined(tr.childNodes[fieldIdx]) ?\n                tr.childNodes[fieldIdx] : mTr.childNodes[fieldIdx - this.frozenColumns];\n            if (!isNullOrUndefined(td)) {\n                var sRow = selectedRow[cells][fieldIdx];\n                var mRow = movableSelectedRow[cells][fieldIdx - this.frozenColumns];\n                cell.refreshTD(td, !isNullOrUndefined(sRow) ? sRow : mRow, selectedRow[rowData]);\n                this.trigger(events.queryCellInfo, {\n                    cell: td, column: col, data: selectedRow[rowData]\n                });\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Updates and refresh the particular row values based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     *  @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     *  @param {Object} rowData - To update new data for the particular row.\n     */\n    Grid.prototype.setRowData = function (key, rowData) {\n        var rwdata = 'data';\n        var rowuID = 'uid';\n        var rowObjects = this.contentModule.getRows();\n        var selectedRow;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this);\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        if (!isNullOrUndefined(selectedRow) && this.element.querySelectorAll('[data-uid=' + selectedRow[rowuID] + ']').length) {\n            selectedRow.changes = rowData;\n            refreshForeignData(selectedRow, this.getForeignKeyColumns(), selectedRow.changes);\n            rowRenderer.refresh(selectedRow, this.getColumns(), true);\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Gets a cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n        return this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n    };\n    /**\n     * Gets a movable table cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableCellFromIndex = function (rowIndex, columnIndex) {\n        return this.getMovableDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex - this.getFrozenColumns()];\n    };\n    /**\n     * Gets a column header by column index.\n     * @param  {number} index - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByIndex = function (index) {\n        return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowObjectFromUID = function (uid) {\n        var rows = this.contentModule.getRows();\n        var row = this.rowObject(rows, uid);\n        if (this.getFrozenColumns()) {\n            if (!row) {\n                row = this.rowObject(this.contentModule.getMovableRows(), uid);\n                return row;\n            }\n        }\n        return row;\n    };\n    Grid.prototype.rowObject = function (rows, uid) {\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (row.uid === uid) {\n                return row;\n            }\n        }\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowsObject = function () {\n        return this.contentModule.getRows();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableRowsObject = function () {\n        return this.contentModule.getMovableRows();\n    };\n    /**\n     * Gets a column header by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByField = function (field) {\n        return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n    };\n    /**\n     * Gets a column header by UID.\n     * @param  {string} field - Specifies the column uid.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByUid = function (uid) {\n        return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getColumnByIndex = function (index) {\n        var column;\n        this.getColumns().some(function (col, i) {\n            column = col;\n            return i === index;\n        });\n        return column;\n    };\n    /**\n     * Gets a Column by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Column}\n     */\n    Grid.prototype.getColumnByField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByField = function (field) {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * Gets a column by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {Column}\n     */\n    Grid.prototype.getColumnByUid = function (uid) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByUid = function (uid) {\n        var index = iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return !isNullOrUndefined(index) ? index : -1;\n    };\n    /**\n     * Gets UID by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {string}\n     */\n    Grid.prototype.getUidByColumnField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item.uid;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets TH index by column uid value.\n     * @private\n     * @param  {string} uid - Specifies the column uid.\n     * @return {number}\n     */\n    Grid.prototype.getNormalizedColumnIndex = function (uid) {\n        var index = this.getColumnIndexByUid(uid);\n        if (this.allowGrouping) {\n            index += this.groupSettings.columns.length;\n        }\n        if (this.isDetail()) {\n            index++;\n        }\n        /**\n         * TODO: index normalization based on the stacked header, grouping and detailTemplate\n         * and frozen should be handled here\n         */\n        return index;\n    };\n    /**\n     * Gets the collection of column fields.\n     * @return {string[]}\n     */\n    Grid.prototype.getColumnFieldNames = function () {\n        var columnNames = [];\n        var column;\n        for (var i = 0, len = this.getColumns().length; i < len; i++) {\n            column = this.getColumns()[i];\n            if (column.visible) {\n                columnNames.push(column.field);\n            }\n        }\n        return columnNames;\n    };\n    /**\n     * Gets a compiled row template.\n     * @return {Function}\n     * @private\n     */\n    Grid.prototype.getRowTemplate = function () {\n        return this.rowTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getDetailTemplate = function () {\n        return this.detailTemplateFn;\n    };\n    /**\n     * Get the names of the primary key columns of the Grid.\n     * @return {string[]}\n     */\n    Grid.prototype.getPrimaryKeyFieldNames = function () {\n        var keys = [];\n        this.columnModel.forEach(function (column) {\n            if (column.isPrimaryKey) {\n                keys.push(column.field);\n            }\n        });\n        return keys;\n    };\n    /**\n     * Refreshes the Grid header and content.\n     */\n    Grid.prototype.refresh = function () {\n        this.headerModule.refreshUI();\n        this.updateStackedFilter();\n        this.renderModule.refresh();\n    };\n    /**\n     * Refreshes the Grid header.\n     */\n    Grid.prototype.refreshHeader = function () {\n        this.headerModule.refreshUI();\n    };\n    /**\n     * Gets the collection of selected rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getSelectedRows = function () {\n        return this.selectionModule ? this.selectionModule.selectedRecords : [];\n    };\n    /**\n     * Gets the collection of selected row indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n    };\n    /**\n     * Gets the collection of selected row and cell indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowCellIndexes = function () {\n        return this.selectionModule.selectedRowCellIndexes;\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     */\n    Grid.prototype.getSelectedRecords = function () {\n        return this.selectionModule.getSelectedRecords();\n    };\n    /**\n     * Gets the data module.\n     * @return {Data}\n     */\n    Grid.prototype.getDataModule = function () {\n        return this.renderModule.data;\n    };\n    /**\n     * Shows a column by its column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.showColumns = function (keys, showBy) {\n        showBy = showBy ? showBy : 'headerText';\n        this.showHider.show(keys, showBy);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.hideColumns = function (keys, hideBy) {\n        hideBy = hideBy ? hideBy : 'headerText';\n        this.showHider.hide(keys, hideBy);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenColumns = function () {\n        return this.frozenColumns + this.getFrozenCount(this.columns, 0);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getVisibleFrozenColumns = function () {\n        return this.getVisibleFrozenColumnsCount() + this.getVisibleFrozenCount(this.columns, 0);\n    };\n    Grid.prototype.getVisibleFrozenColumnsCount = function () {\n        var visibleFrozenColumns = 0;\n        var col = this.columns;\n        for (var i = 0; i < this.frozenColumns; i++) {\n            if (col[i].visible) {\n                visibleFrozenColumns++;\n            }\n        }\n        return visibleFrozenColumns;\n    };\n    Grid.prototype.getVisibleFrozenCount = function (cols, cnt) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getVisibleFrozenCount(cols[i].columns, cnt);\n            }\n            else {\n                if (cols[i].isFrozen && cols[i].visible) {\n                    cnt++;\n                }\n            }\n        }\n        return cnt;\n    };\n    Grid.prototype.getFrozenCount = function (cols, cnt) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getFrozenCount(cols[i].columns, cnt);\n            }\n            else {\n                if (cols[i].isFrozen) {\n                    cnt++;\n                }\n            }\n        }\n        return cnt;\n    };\n    /**\n     * Navigates to the specified target page.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Grid.prototype.goToPage = function (pageNo) {\n        this.pagerModule.goToPage(pageNo);\n    };\n    /**\n     * Defines the text of external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Grid.prototype.updateExternalMessage = function (message) {\n        this.pagerModule.updateExternalMessage(message);\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to be sorted.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previous sorted columns are to be maintained.\n     * @return {void}\n     */\n    Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        this.sortModule.sortColumn(columnName, direction, isMultiSort);\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearSorting = function () {\n        this.sortModule.clearSorting();\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeSortColumn = function (field) {\n        this.sortModule.removeSortColumn(field);\n    };\n    /**\n     * Filters grid row by column name with the given options.\n     * @param  {string} fieldName - Defines the field name of the column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query and another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, the grid filters the records with exact match. if false, it filters case\n     * insensitive records (uppercase and lowercase letters treated the same).\n     * @param  {boolean} ignoreAccent - If ignoreAccent set to true,\n     * then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator);\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearFiltering = function () {\n        this.filterModule.clearFiltering();\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n    };\n    /**\n     * Selects a row by given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectRow = function (index, isToggle) {\n        this.selectionModule.selectRow(index, isToggle);\n    };\n    /**\n     * Selects a collection of rows by indexes.\n     * @param  {number[]} rowIndexes - Specifies the row indexes.\n     * @return {void}\n     */\n    Grid.prototype.selectRows = function (rowIndexes) {\n        this.selectionModule.selectRows(rowIndexes);\n    };\n    /**\n     * Deselects the current selected rows and cells.\n     * @return {void}\n     */\n    Grid.prototype.clearSelection = function () {\n        this.selectionModule.clearSelection();\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectCell = function (cellIndex, isToggle) {\n        this.selectionModule.selectCell(cellIndex, isToggle);\n    };\n    /**\n     * Searches Grid records using the given key.\n     * You can customize the default search option by using the\n     * [`searchSettings`](./api-searchSettings.html).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Grid.prototype.search = function (searchString) {\n        this.searchModule.search(searchString);\n    };\n    /**\n     * By default, prints all the pages of the Grid and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./api-grid.html#printmode-string).\n     * @return {void}\n     */\n    Grid.prototype.print = function () {\n        this.printModule.print();\n    };\n    /**\n     * Delete a record with Given options. If fieldname and data is not given then grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field, 'Name of the column'.\n     * @param {Object} data - Defines the JSON data of the record to be deleted.\n     */\n    Grid.prototype.deleteRecord = function (fieldname, data) {\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * To edit any particular row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     */\n    Grid.prototype.startEdit = function () {\n        this.editModule.startEdit();\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Grid.prototype.endEdit = function () {\n        this.editModule.endEdit();\n    };\n    /**\n     * Cancels edited state.\n     */\n    Grid.prototype.closeEdit = function () {\n        this.editModule.closeEdit();\n    };\n    /**\n     * Adds a new record to the Grid. Without passing parameters, it adds empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Grid.prototype.addRecord = function (data, index) {\n        this.editModule.addRecord(data, index);\n    };\n    /**\n     * Delete any visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Grid.prototype.deleteRow = function (tr) {\n        this.editModule.deleteRow(tr);\n    };\n    /**\n     * Copy the selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header text needs to be copied along with rows or cells.\n     */\n    Grid.prototype.copy = function (withHeader) {\n        this.clipboardModule.copy(withHeader);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.recalcIndentWidth = function () {\n        if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n            return;\n        }\n        if ((!this.groupSettings.columns.length && !this.isDetail()) ||\n            this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n            !this.getContentTable()) {\n            return;\n        }\n        var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n        var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n        var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n        var perPixel = indentWidth / 30;\n        var i = 0;\n        if (perPixel >= 1) {\n            indentWidth = (30 / perPixel);\n        }\n        if (this.enableColumnVirtualization) {\n            indentWidth = 30;\n        }\n        while (i < this.groupSettings.columns.length) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n            i++;\n        }\n        if (this.isDetail()) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n        }\n        this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n    };\n    /**\n     * Changes the Grid column positions by field names.\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumns = function (fromFName, toFName) {\n        this.reorderModule.reorderColumns(fromFName, toFName);\n    };\n    /**\n     * Changes the column width to automatically fit its content to ensure that the width shows the content without wrapping/hiding.\n     * > * This method ignores the hidden columns.\n     * > * Uses the `autoFitColumns` method in the `dataBound` event to resize at initial rendering.\n     * @param  {string |string[]} fieldNames - Defines the column names.\n     * @return {void}\n     *\n     *\n     * ```typescript\n     * <div id=\"Grid\"></div>\n     * <script>\n     * let gridObj: Grid = new Grid({\n     *     dataSource: employeeData,\n     *     columns: [\n     *         { field: 'OrderID', headerText: 'Order ID', width:100 },\n     *         { field: 'EmployeeID', headerText: 'Employee ID' }],\n     *     dataBound: () => gridObj.autoFitColumns('EmployeeID')\n     * });\n     * gridObj.appendTo('#Grid');\n     * </script>\n     * ```\n     *\n     */\n    Grid.prototype.autoFitColumns = function (fieldNames) {\n        this.resizeModule.autoFitColumns(fieldNames);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.createColumnchooser = function (x, y, target) {\n        this.columnChooserModule.renderColumnChooser(x, y, target);\n    };\n    Grid.prototype.initializeServices = function () {\n        this.serviceLocator.register('widthService', this.widthService = new ColumnWidthService(this));\n        this.serviceLocator.register('cellRendererFactory', new CellRendererFactory);\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('localization', this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale));\n        this.serviceLocator.register('valueFormatter', this.valueFormatterService = new ValueFormatter(this.locale));\n        this.serviceLocator.register('showHideService', this.showHider = new ShowHide(this));\n        this.serviceLocator.register('ariaService', this.ariaService = new AriaService());\n        this.serviceLocator.register('focus', this.focusModule = new FocusStrategy(this));\n    };\n    Grid.prototype.processModel = function () {\n        var _this = this;\n        var gCols = this.groupSettings.columns;\n        var sCols = this.sortSettings.columns;\n        var flag;\n        var j;\n        if (this.allowGrouping) {\n            var _loop_1 = function (i, len) {\n                j = 0;\n                for (var sLen = sCols.length; j < sLen; j++) {\n                    if (sCols[j].field === gCols[i]) {\n                        flag = true;\n                        break;\n                    }\n                }\n                if (!flag) {\n                    sCols.push({ field: gCols[i], direction: 'Ascending' });\n                }\n                else {\n                    if (this_1.allowSorting) {\n                        this_1.sortedColumns.push(sCols[j].field);\n                    }\n                    else {\n                        sCols[j].direction = 'Ascending';\n                    }\n                }\n                if (!this_1.groupSettings.showGroupedColumn) {\n                    var column = this_1.enableColumnVirtualization ?\n                        this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n                    column.visible = false;\n                }\n            };\n            var this_1 = this;\n            for (var i = 0, len = gCols.length; i < len; i++) {\n                _loop_1(i, len);\n            }\n        }\n        if (!gCols.length) {\n            sCols.forEach(function (col) {\n                _this.sortedColumns.push(col.field);\n            });\n        }\n        this.rowTemplateFn = templateCompiler(this.rowTemplate);\n        this.detailTemplateFn = templateCompiler(this.detailTemplate);\n        if (!isNullOrUndefined(this.parentDetails)) {\n            var value = isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n                this.parentDetails.parentKeyFieldValue;\n            this.query.where(this.queryString, 'equal', value, true);\n        }\n        this.initForeignColumn();\n    };\n    Grid.prototype.initForeignColumn = function () {\n        if (this.isForeignKeyEnabled(this.getColumns())) {\n            this.notify(events.initForeignKeyColumn, this.getForeignKeyColumns());\n        }\n    };\n    Grid.prototype.gridRender = function () {\n        this.updateRTL();\n        if (this.enableHover) {\n            this.element.classList.add('e-gridhover');\n        }\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        if (this.rowHeight) {\n            this.element.classList.add('e-grid-min-height');\n        }\n        classList(this.element, ['e-responsive', 'e-default'], []);\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.headerModule = rendererFactory.getRenderer(RenderType.Header);\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.printModule = new Print(this, this.scrollModule);\n        this.clipboardModule = new Clipboard(this);\n        this.renderModule.render();\n        this.eventInitializer();\n        this.createGridPopUpElement();\n        this.widthService.setWidthToColumns();\n        this.updateGridLines();\n        this.applyTextWrap();\n        this.createTooltip(); //for clip mode ellipsis\n    };\n    Grid.prototype.dataReady = function () {\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        if (this.height !== 'auto') {\n            this.scrollModule.setPadding();\n        }\n    };\n    Grid.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Grid.prototype.createGridPopUpElement = function () {\n        var popup = createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n        var content = createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n        append([content, createElement('div', { className: 'e-uptail e-tail' })], popup);\n        content.appendChild(createElement('span'));\n        append([content, createElement('div', { className: 'e-downtail e-tail' })], popup);\n        this.element.appendChild(popup);\n    };\n    Grid.prototype.updateGridLines = function () {\n        classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n        switch (this.gridLines) {\n            case 'Horizontal':\n                this.element.classList.add('e-horizontallines');\n                break;\n            case 'Vertical':\n                this.element.classList.add('e-verticallines');\n                break;\n            case 'None':\n                this.element.classList.add('e-hidelines');\n                break;\n            case 'Both':\n                this.element.classList.add('e-bothlines');\n                break;\n        }\n        this.updateResizeLines();\n    };\n    Grid.prototype.updateResizeLines = function () {\n        if (this.allowResizing &&\n            !(this.gridLines === 'Vertical' || this.gridLines === 'Both')) {\n            this.element.classList.add('e-resize-lines');\n        }\n        else {\n            this.element.classList.remove('e-resize-lines');\n        }\n    };\n    /**\n     * The function is used to apply text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.applyTextWrap = function () {\n        if (this.allowTextWrap) {\n            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n            switch (this.textWrapSettings.wrapMode) {\n                case 'Header':\n                    wrap(this.element, false);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, true);\n                    break;\n                case 'Content':\n                    wrap(this.getContent(), true);\n                    wrap(this.element, false);\n                    wrap(headerRows, false);\n                    break;\n                default:\n                    wrap(this.element, true);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, false);\n            }\n        }\n    };\n    /**\n     * The function is used to remove text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeTextWrap = function () {\n        wrap(this.element, false);\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        wrap(headerRows, false);\n        wrap(this.getContent(), false);\n    };\n    /**\n     * The function is used to add Tooltip to the grid cell that has ellipsiswithtooltip clip mode.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.createTooltip = function () {\n        this.toolTipObj = new Tooltip({ opensOn: 'custom', content: '' }, this.element);\n    };\n    Grid.prototype.getTooltipStatus = function (element) {\n        var width;\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var htable = this.createTable(headerTable, headerDivTag, 'header');\n        var ctable = this.createTable(headerTable, headerDivTag, 'content');\n        var td = element;\n        var table = headerTable.contains(element) ? htable : ctable;\n        var ele = headerTable.contains(element) ? 'th' : 'tr';\n        table.querySelector(ele).className = element.className;\n        table.querySelector(ele).innerHTML = element.innerHTML;\n        width = table.querySelector(ele).getBoundingClientRect().width;\n        document.body.removeChild(htable);\n        document.body.removeChild(ctable);\n        if (width > element.getBoundingClientRect().width) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mouseMoveHandler = function (e) {\n        if (this.isEllipsisTooltip()) {\n            var element = parentsUntil(e.target, 'e-ellipsistooltip');\n            if (element) {\n                if (element.getAttribute('aria-describedby')) {\n                    return;\n                }\n                if (this.getTooltipStatus(element)) {\n                    if (element.getElementsByClassName('e-headertext').length) {\n                        this.toolTipObj.content = element.getElementsByClassName('e-headertext')[0].innerText;\n                    }\n                    else {\n                        this.toolTipObj.content = element.innerText;\n                    }\n                    this.toolTipObj.open(element);\n                }\n                else {\n                    this.toolTipObj.close();\n                }\n            }\n            else {\n                this.toolTipObj.close();\n            }\n        }\n    };\n    Grid.prototype.isEllipsisTooltip = function () {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].clipMode === 'EllipsisWithTooltip') {\n                return true;\n            }\n        }\n        return false;\n    };\n    Grid.prototype.scrollHandler = function () {\n        if (this.isEllipsisTooltip()) {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * To create table for ellipsiswithtooltip\n     * @hidden\n     */\n    Grid.prototype.createTable = function (table, tag, type) {\n        var myTableDiv = createElement('div');\n        myTableDiv.className = this.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = createElement('div');\n        mySubDiv.className = tag;\n        var myTable = createElement('table');\n        myTable.className = table.className;\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var ele = (type === 'header') ? 'th' : 'td';\n        var myTr = createElement('tr');\n        var mytd = createElement(ele);\n        myTr.appendChild(mytd);\n        myTable.appendChild(myTr);\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        return myTableDiv;\n    };\n    /**\n     * Binding events to the element while component creation.\n     * @hidden\n     */\n    Grid.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n        EventHandler.add(this.getContent(), 'dblclick', this.dblClickHandler, this);\n        if (this.allowKeyboard) {\n            this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n        }\n        this.keyboardModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        EventHandler.add(this.getContent().firstElementChild, 'scroll', this.scrollHandler, this);\n        EventHandler.add(this.element, 'mousemove', this.mouseMoveHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy.\n     * @hidden\n     */\n    Grid.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n        EventHandler.remove(this.getContent().firstElementChild, 'scroll', this.scrollHandler);\n        EventHandler.remove(this.element, 'mousemove', this.mouseMoveHandler);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.on(events.dataReady, this.dataReady, this);\n        this.on(events.contentReady, this.recalcIndentWidth, this);\n        this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n        this.dataBoundFunction = this.refreshMediaCol.bind(this);\n        this.addEventListener(events.dataBound, this.dataBoundFunction);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.removeListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.off(events.dataReady, this.dataReady);\n        this.off(events.contentReady, this.recalcIndentWidth);\n        this.off(events.headerRefreshed, this.recalcIndentWidth);\n        this.removeEventListener(events.dataBound, this.dataBoundFunction);\n    };\n    /**\n     * Get current visible data of grid.\n     * @return {Object[]}\n     * @hidden\n     */\n    Grid.prototype.getCurrentViewRecords = function () {\n        return (this.allowGrouping && this.groupSettings.columns.length && this.currentViewData.length) ?\n            this.currentViewData.records : this.currentViewData;\n    };\n    Grid.prototype.mouseClickHandler = function (e) {\n        if (this.isChildGrid(e) || (parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n            this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n            return;\n        }\n        if (((!this.allowRowDragAndDrop && (parentsUntil(e.target, 'e-gridcontent') ||\n            e.target.tagName === 'TD')) || (!(this.allowGrouping || this.allowReordering) &&\n            parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n            return;\n        }\n        if (parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n            e.preventDefault();\n        }\n        this.notify(events.click, e);\n    };\n    Grid.prototype.checkEdit = function (e) {\n        var tr = parentsUntil(e.target, 'e-row');\n        var isEdit = this.editSettings.mode !== 'Batch' &&\n            this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n        return !parentsUntil(e.target, 'e-unboundcelldiv') && (isEdit || (parentsUntil(e.target, 'e-rowcell') &&\n            parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell')));\n    };\n    Grid.prototype.dblClickHandler = function (e) {\n        var grid = parentsUntil(e.target, 'e-grid');\n        if (isNullOrUndefined(grid) || grid.id !== this.element.id || closest(e.target, '.e-unboundcelldiv')) {\n            return;\n        }\n        var args = this.getRowInfo(e.target);\n        args.target = e.target;\n        this.trigger(events.recordDoubleClick, args);\n        this.notify(events.dblclick, e);\n    };\n    Grid.prototype.focusOutHandler = function (e) {\n        if (this.isChildGrid(e)) {\n            return;\n        }\n        if (!parentsUntil(e.target, 'e-grid')) {\n            this.element.querySelector('.e-gridpopup').style.display = 'None';\n        }\n        var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n        if (filterClear) {\n            filterClear.classList.add('e-hide');\n        }\n        if ((!e.relatedTarget || !parentsUntil(e.relatedTarget, 'e-grid'))\n            && !this.keyPress && this.editSettings.mode === 'Batch' && this.isEdit && !Browser.isDevice) {\n            this.editModule.saveCell();\n        }\n        this.keyPress = false;\n    };\n    Grid.prototype.isChildGrid = function (e) {\n        var gridElement = parentsUntil(e.target, 'e-grid');\n        if (gridElement && gridElement.id !== this.element.id) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mergePersistGridData = function () {\n        var data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n        if (!(isNullOrUndefined(data) || (data === ''))) {\n            var dataObj = JSON.parse(data);\n            var keys = Object.keys(dataObj);\n            this.isProtectedOnChange = true;\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                if ((typeof this[key] === 'object') && !isNullOrUndefined(this[key])) {\n                    if (Array.isArray(this[key]) && key === 'columns') {\n                        this.mergeColumns(dataObj[key], this[key]);\n                        this[key] = dataObj[key];\n                    }\n                    else {\n                        extend(this[key], dataObj[key]);\n                    }\n                }\n                else {\n                    this[key] = dataObj[key];\n                }\n            }\n            this.isProtectedOnChange = false;\n        }\n    };\n    Grid.prototype.mergeColumns = function (storedColumn, columns) {\n        var _this = this;\n        storedColumn.forEach(function (col, index, arr) {\n            var ind;\n            var localCol = _this.getColumnByField(col.field) ||\n                columns.some(function (element, i) {\n                    ind = i;\n                    return element.headerText === col.headerText;\n                }) && columns[ind];\n            if (!isNullOrUndefined(localCol)) {\n                if (localCol.columns && localCol.columns.length) {\n                    _this.mergeColumns(col.columns, localCol.columns);\n                }\n                else {\n                    arr[index] = extend({}, localCol, col, true);\n                }\n            }\n        });\n    };\n    Grid.prototype.isDetail = function () {\n        return !isNullOrUndefined(this.detailTemplate) || !isNullOrUndefined(this.childGrid);\n    };\n    Grid.prototype.isCommandColumn = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isCommandColumn(col.columns);\n            }\n            return !!(col.commands || col.commandsTemplate);\n        });\n    };\n    Grid.prototype.isForeignKeyEnabled = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isForeignKeyEnabled(col.columns);\n            }\n            return !!(col.dataSource && col.foreignKeyValue);\n        });\n    };\n    Grid.prototype.keyActionHandler = function (e) {\n        this.keyPress = true;\n        if (this.isChildGrid(e) ||\n            (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'shiftEnter'\n                && e.action !== 'tab' && e.action !== 'shiftTab')) {\n            return;\n        }\n        if (this.allowKeyboard) {\n            if (e.action === 'ctrlPlusP') {\n                e.preventDefault();\n                this.print();\n            }\n            this.notify(events.keyPressed, e);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setInjectedModules = function (modules) {\n        this.injectedModules = modules;\n    };\n    Grid.prototype.updateColumnObject = function () {\n        prepareColumns(this.columns, this.enableColumnVirtualization);\n        this.initForeignColumn();\n        this.notify(events.autoCol, {});\n    };\n    /**\n     * Gets the foreign columns from Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getForeignKeyColumns = function () {\n        return this.getColumns().filter(function (col) {\n            return col.isForeignColumn();\n        });\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowHeight = function () {\n        return this.rowHeight ? this.rowHeight : getRowHeight(this.element);\n    };\n    /**\n     * Refreshes the Grid column changes.\n     */\n    Grid.prototype.refreshColumns = function () {\n        this.isPreventScrollEvent = true;\n        this.updateColumnObject();\n        this.refresh();\n    };\n    /**\n     * Export Grid data to Excel file(.xlsx).\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     */\n    Grid.prototype.excelExport = function (excelExportProperties, isMultipleExport, \n        /* tslint:disable-next-line:no-any */\n        workbook, isBlob) {\n        return this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, false, isBlob);\n    };\n    /**\n     * Export Grid data to CSV file.\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     *\n     */\n    Grid.prototype.csvExport = function (excelExportProperties, \n        /* tslint:disable-next-line:no-any */\n        isMultipleExport, workbook, isBlob) {\n        return this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, true, isBlob);\n    };\n    /**\n     * Export Grid data to PDF document.\n     * @param  {pdfExportProperties} PdfExportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param  {pdfDoc} pdfDoc - Defined the Pdf Document if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     *\n     */\n    Grid.prototype.pdfExport = function (pdfExportProperties, \n        /* tslint:disable-next-line:no-any */\n        isMultipleExport, pdfDoc, isBlob) {\n        return this.pdfExportModule.Map(this, pdfExportProperties, isMultipleExport, pdfDoc, isBlob);\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Grid.prototype.groupColumn = function (columnName) {\n        this.groupModule.groupColumn(columnName);\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Grid.prototype.ungroupColumn = function (columnName) {\n        this.groupModule.ungroupColumn(columnName);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isContextMenuOpen = function () {\n        return this.contextMenuModule && this.contextMenuModule.isOpen;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    /**\n     * Destroys the given template reference.\n     * @param {string[]} propertyNames - Defines the collection of template name.\n     */\n    Grid.prototype.destroyTemplate = function (propertyNames) {\n        this.clearTemplate(propertyNames);\n    };\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableAltRow\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableHover\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowTextWrap\", void 0);\n    __decorate([\n        Complex({}, TextWrapSettings)\n    ], Grid.prototype, \"textWrapSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPaging\", void 0);\n    __decorate([\n        Complex({}, PageSettings)\n    ], Grid.prototype, \"pageSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n    __decorate([\n        Complex({}, SearchSettings)\n    ], Grid.prototype, \"searchSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowSorting\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowMultiSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowExcelExport\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Complex({}, SortSettings)\n    ], Grid.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowSelection\", void 0);\n    __decorate([\n        Property(-1)\n    ], Grid.prototype, \"selectedRowIndex\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], Grid.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowFiltering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n    __decorate([\n        Complex({}, RowDropSettings)\n    ], Grid.prototype, \"rowDropSettings\", void 0);\n    __decorate([\n        Complex({}, FilterSettings)\n    ], Grid.prototype, \"filterSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowGrouping\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnMenu\", void 0);\n    __decorate([\n        Complex({}, GroupSettings)\n    ], Grid.prototype, \"groupSettings\", void 0);\n    __decorate([\n        Complex({}, EditSettings)\n    ], Grid.prototype, \"editSettings\", void 0);\n    __decorate([\n        Collection([], AggregateRow)\n    ], Grid.prototype, \"aggregates\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnChooser\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"width\", void 0);\n    __decorate([\n        Property('Default')\n    ], Grid.prototype, \"gridLines\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"rowTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"detailTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"childGrid\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"queryString\", void 0);\n    __decorate([\n        Property('AllPages')\n    ], Grid.prototype, \"printMode\", void 0);\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], Grid.prototype, \"rowHeight\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"query\", void 0);\n    __decorate([\n        Property('USD')\n    ], Grid.prototype, \"currencyCode\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"contextMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"columnMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"pagerTemplate\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenRows\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenColumns\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"headerCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"recordDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"printComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeExcelExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePdfExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"detailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchCancel\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beginEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSaved\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"checkBoxChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeCopy\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataSourceChanged\", void 0);\n    Grid = __decorate([\n        NotifyPropertyChanges\n    ], Grid);\n    return Grid;\n}(Component));\nexport { Grid };\nGrid.Inject(Selection);\n","import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement, closest, classList } from '@syncfusion/ej2-base';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\n/**\n *\n * The `Sort` module is used to handle sorting action.\n */\nvar Sort = /** @class */ (function () {\n    /**\n     * Constructor for Grid sorting module\n     * @hidden\n     */\n    function Sort(parent, sortSettings, sortedColumns, locator) {\n        this.contentRefresh = true;\n        this.isModelChanged = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.sortSettings = sortSettings;\n        this.sortedColumns = sortedColumns;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * The function used to update sortSettings\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.updateModel = function () {\n        var sortedColumn = { field: this.columnName, direction: this.direction };\n        var index;\n        var gCols = this.parent.groupSettings.columns;\n        var flag = false;\n        if (!this.isMultiSort) {\n            if (!gCols.length) {\n                this.sortSettings.columns = [sortedColumn];\n            }\n            else {\n                var sortedCols = [];\n                for (var i = 0, len = gCols.length; i < len; i++) {\n                    index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n                    if (this.columnName === gCols[i]) {\n                        flag = true;\n                        sortedCols.push(sortedColumn);\n                    }\n                    else {\n                        var sCol = this.getSortColumnFromField(gCols[i]);\n                        sortedCols.push({ field: sCol.field, direction: sCol.direction });\n                    }\n                }\n                if (!flag) {\n                    sortedCols.push(sortedColumn);\n                }\n                this.sortSettings.columns = sortedCols;\n            }\n        }\n        else {\n            index = this.getSortedColsIndexByField(this.columnName);\n            if (index > -1) {\n                this.sortSettings.columns.splice(index, 1);\n            }\n            this.sortSettings.columns.push(sortedColumn);\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n        this.parent.dataBind();\n        this.lastSortedCol = this.columnName;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n        } : { requestType: 'sorting', type: events.actionComplete };\n        this.isRemove = false;\n        this.parent.trigger(events.actionComplete, extend(e, args));\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to sort.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previously sorted columns are to be maintained.\n     * @return {void}\n     */\n    Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        var gObj = this.parent;\n        if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n            return;\n        }\n        if (!gObj.allowMultiSorting) {\n            isMultiSort = gObj.allowMultiSorting;\n        }\n        if (this.isActionPrevent()) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.sortColumn,\n                arg1: columnName, arg2: direction, arg3: isMultiSort\n            });\n            return;\n        }\n        this.columnName = columnName;\n        this.direction = direction;\n        this.isMultiSort = isMultiSort;\n        this.removeSortIcons();\n        var column = gObj.getColumnHeaderByField(columnName);\n        this.updateSortedCols(columnName, isMultiSort);\n        this.updateModel();\n    };\n    Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n        if (!isMultiSort) {\n            if (this.parent.allowGrouping) {\n                for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n                    if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n                        this.sortedColumns.splice(i, 1);\n                        len--;\n                        i--;\n                    }\n                }\n            }\n            else {\n                this.sortedColumns.splice(0, this.sortedColumns.length);\n            }\n        }\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            this.sortedColumns.push(columnName);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.contentRefresh) {\n            var args = this.sortSettings.columns.length ? {\n                columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionBegin\n            } : { requestType: 'sorting', type: events.actionBegin };\n            this.parent.notify(events.modelChanged, args);\n        }\n        this.refreshSortSettings();\n        this.removeSortIcons();\n        this.addSortIcons();\n    };\n    Sort.prototype.refreshSortSettings = function () {\n        var _this = this;\n        this.sortedColumns = [];\n        this.sortSettings.columns.forEach(function (e) {\n            _this.sortedColumns.push(e.field);\n        });\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Sort.prototype.clearSorting = function () {\n        var cols = getActualPropFromColl(this.sortSettings.columns);\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeSortColumn(cols[i].field);\n        }\n    };\n    Sort.prototype.isActionPrevent = function () {\n        return isActionPrevent(this.parent);\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.removeSortColumn = function (field) {\n        var gObj = this.parent;\n        var cols = this.sortSettings.columns;\n        if (this.sortedColumns.indexOf(field) < 0) {\n            return;\n        }\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n            return;\n        }\n        this.removeSortIcons();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n                    continue;\n                }\n                this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n                cols.splice(i, 1);\n                this.isRemove = true;\n                if (this.isModelChanged) {\n                    this.parent.notify(events.modelChanged, {\n                        requestType: 'sorting', type: events.actionBegin\n                    });\n                }\n                break;\n            }\n        }\n        this.addSortIcons();\n    };\n    Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n        var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Sort.prototype.getModuleName = function () {\n        return 'sort';\n    };\n    Sort.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.isMultiSort = this.sortSettings.columns.length > 1;\n            for (var _i = 0, _a = gObj.sortSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                if (this.sortedColumns.indexOf(col.field) > -1) {\n                    this.sortColumn(col.field, col.direction, true);\n                }\n            }\n            this.isMultiSort = false;\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.sortComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressed, this);\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.sortComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressed);\n    };\n    /**\n     * To destroy the sorting\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.destroy = function () {\n        this.isModelChanged = false;\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n        this.clearSorting();\n        this.isModelChanged = true;\n        this.removeEventListener();\n    };\n    Sort.prototype.clickHandler = function (e) {\n        this.popUpClickHandler(e);\n        var target = closest(e.target, '.e-headercell');\n        if (target && !e.target.classList.contains('e-grptogglebtn') &&\n            !e.target.classList.contains('e-stackedheadercell') &&\n            !e.target.classList.contains('e-stackedheadercelldiv') &&\n            !(target.classList.contains('e-resized')) &&\n            !e.target.classList.contains('e-rhandler') &&\n            !e.target.classList.contains('e-columnmenu') &&\n            !e.target.classList.contains('e-filtermenudiv')) {\n            var gObj = this.parent;\n            var colObj = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n                'Descending';\n            if (colObj.type !== 'checkbox') {\n                this.initiateSort(target, e, colObj);\n                if (Browser.isDevice) {\n                    this.showPopUp(e);\n                }\n            }\n        }\n        if (target) {\n            target.classList.remove('e-resized');\n        }\n    };\n    Sort.prototype.keyPressed = function (e) {\n        var ele = e.target;\n        if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')\n            && closest(ele, '.e-headercell')) {\n            var target = this.focus.getFocusedElement();\n            if (isNullOrUndefined(target) || !target.classList.contains('e-headercell')\n                || !target.querySelector('.e-headercelldiv')) {\n                return;\n            }\n            var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            this.initiateSort(target, e, col);\n        }\n    };\n    Sort.prototype.initiateSort = function (target, e, column) {\n        var gObj = this.parent;\n        var field = column.field;\n        var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n            'Descending';\n        if (e.shiftKey || (this.sortSettings.allowUnsort && target.querySelectorAll('.e-descending').length)\n            && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n            this.removeSortColumn(field);\n        }\n        else {\n            this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n        }\n    };\n    Sort.prototype.showPopUp = function (e) {\n        var target = closest(e.target, '.e-headercell');\n        if (!isNullOrUndefined(target) || this.parent.isContextMenuOpen()) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n        }\n    };\n    Sort.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-sortdirect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSortMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSortMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Sort.prototype.addSortIcons = function () {\n        var gObj = this.parent;\n        var header;\n        var filterElement;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            this.aria.setSort(header, cols[i].direction);\n            if (this.isMultiSort && cols.length > 1) {\n                header.querySelector('.e-headercelldiv').insertBefore(createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n            }\n            filterElement = header.querySelector('.e-sortfilterdiv');\n            if (cols[i].direction === 'Ascending') {\n                classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n            }\n            else {\n                classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n            }\n        }\n    };\n    Sort.prototype.removeSortIcons = function (position) {\n        var gObj = this.parent;\n        var header;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1 &&\n                (isNullOrUndefined(header) || !header.querySelector('.e-sortfilterdiv'))) {\n                continue;\n            }\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            this.aria.setSort(header, 'none');\n            classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n            if (header.querySelector('.e-sortnumber')) {\n                header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n            }\n        }\n    };\n    Sort.prototype.getSortColumnFromField = function (field) {\n        for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n            if (this.sortSettings.columns[i].field === field) {\n                return this.sortSettings.columns[i];\n            }\n        }\n        return false;\n    };\n    Sort.prototype.updateAriaAttr = function () {\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (fieldNames.indexOf(col) === -1) {\n                continue;\n            }\n            var header = this.parent.getColumnHeaderByField(col);\n            this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n        }\n    };\n    Sort.prototype.refreshSortIcons = function () {\n        this.removeSortIcons();\n        this.isMultiSort = true;\n        this.removeSortIcons();\n        this.addSortIcons();\n        this.isMultiSort = false;\n        this.updateAriaAttr();\n    };\n    return Sort;\n}());\nexport { Sort };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { createElement, classList, append } from '@syncfusion/ej2-base';\n/**\n * `NumericContainer` module handles rendering and refreshing numeric container.\n */\nvar NumericContainer = /** @class */ (function () {\n    /**\n     * Constructor for numericContainer module\n     * @hidden\n     */\n    function NumericContainer(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render numericContainer\n     * @hidden\n     */\n    NumericContainer.prototype.render = function () {\n        this.pagerElement = this.pagerModule.element;\n        this.renderNumericContainer();\n        this.refreshNumericLinks();\n        this.wireEvents();\n    };\n    /**\n     * Refreshes the numeric container of Pager.\n     */\n    NumericContainer.prototype.refresh = function () {\n        this.pagerModule.updateTotalPages();\n        if (this.links.length) {\n            this.updateLinksHtml();\n        }\n        this.updateStyles();\n    };\n    /**\n     * The function is used to refresh refreshNumericLinks\n     * @hidden\n     */\n    NumericContainer.prototype.refreshNumericLinks = function () {\n        var link;\n        var pagerObj = this.pagerModule;\n        var div = pagerObj.element.querySelector('.e-numericcontainer');\n        var frag = document.createDocumentFragment();\n        div.innerHTML = '';\n        for (var i = 1; i <= pagerObj.pageCount; i++) {\n            link = createElement('a', {\n                className: 'e-link e-numericitem e-spacing e-pager-default',\n                attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i,\n                    href: 'javascript:void(0);', name: 'Goto page' + i }\n            });\n            if (pagerObj.currentPage === i) {\n                classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n            }\n            frag.appendChild(link);\n        }\n        div.appendChild(frag);\n        this.links = [].slice.call(div.childNodes);\n    };\n    /**\n     * Binding events to the element while component creation\n     * @hidden\n     */\n    NumericContainer.prototype.wireEvents = function () {\n        EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy\n     * @hidden\n     */\n    NumericContainer.prototype.unwireEvents = function () {\n        EventHandler.remove(this.pagerElement, 'click', this.clickHandler);\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    NumericContainer.prototype.destroy = function () {\n        this.unwireEvents();\n    };\n    NumericContainer.prototype.renderNumericContainer = function () {\n        this.element = createElement('div', {\n            className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n        });\n        this.renderFirstNPrev(this.element);\n        this.renderPrevPagerSet(this.element);\n        this.element.appendChild(createElement('div', { className: 'e-numericcontainer' }));\n        this.renderNextPagerSet(this.element);\n        this.renderNextNLast(this.element);\n        this.pagerModule.element.appendChild(this.element);\n    };\n    NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n        this.first = createElement('div', {\n            className: 'e-first e-icons e-icon-first',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.prev = createElement('div', {\n            className: 'e-prev e-icons e-icon-prev',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.first, this.prev], pagerContainer);\n    };\n    NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n        var prevPager = createElement('div');\n        this.PP = createElement('a', {\n            className: 'e-link e-pp e-spacing', innerHTML: '...',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n                'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                tabindex: '-1',\n                name: this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        prevPager.appendChild(this.PP);\n        pagerContainer.appendChild(prevPager);\n    };\n    NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n        var nextPager = createElement('div');\n        this.NP = createElement('a', {\n            className: 'e-link e-np e-spacing',\n            innerHTML: '...', attrs: {\n                title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n                'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                tabindex: '-1',\n                name: this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        nextPager.appendChild(this.NP);\n        pagerContainer.appendChild(nextPager);\n    };\n    NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n        this.next = createElement('div', {\n            className: 'e-next e-icons e-icon-next',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.last = createElement('div', {\n            className: 'e-last e-icons e-icon-last',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.next, this.last], pagerContainer);\n    };\n    NumericContainer.prototype.clickHandler = function (e) {\n        var pagerObj = this.pagerModule;\n        var target = e.target;\n        pagerObj.previousPageNo = pagerObj.currentPage;\n        if (!target.classList.contains('e-disable') && !isNullOrUndefined(target.getAttribute('index'))) {\n            pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n            pagerObj.dataBind();\n        }\n        return false;\n    };\n    NumericContainer.prototype.updateLinksHtml = function () {\n        var pagerObj = this.pagerModule;\n        var currentPageSet;\n        var pageNo;\n        pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n        if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n            pagerObj.currentPage = pagerObj.totalPages;\n        }\n        currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n        if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n            currentPageSet = currentPageSet - 1;\n        }\n        for (var i = 0; i < pagerObj.pageCount; i++) {\n            pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n            if (pageNo <= pagerObj.totalPages) {\n                this.links[i].style.display = '';\n                this.links[i].setAttribute('index', pageNo.toString());\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                if (pagerObj.currentPage !== pageNo) {\n                    this.links[i].classList.add('e-pager-default');\n                }\n                else {\n                    this.links[i].classList.remove('e-pager-default');\n                }\n            }\n            else {\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                this.links[i].style.display = 'none';\n            }\n            classList(this.links[i], [], ['e-currentitem', 'e-active']);\n        }\n        this.first.setAttribute('index', '1');\n        this.last.setAttribute('index', pagerObj.totalPages.toString());\n        this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n        this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n        this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n        this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n    };\n    NumericContainer.prototype.updateStyles = function () {\n        this.updateFirstNPrevStyles();\n        this.updatePrevPagerSetStyles();\n        this.updateNextPagerSetStyles();\n        this.updateNextNLastStyles();\n        if (this.links.length) {\n            classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n        }\n    };\n    NumericContainer.prototype.updateFirstNPrevStyles = function () {\n        var firstPage = ['e-firstpage', 'e-pager-default'];\n        var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n        var prevPage = ['e-prevpage', 'e-pager-default'];\n        var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n        if (this.pagerModule.totalPages > 0 && this.pagerModule.currentPage > 1) {\n            classList(this.prev, prevPage, prevPageDisabled);\n            classList(this.first, firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n        }\n        else {\n            classList(this.prev, prevPageDisabled, prevPage);\n            classList(this.first, firstPageDisabled, firstPage);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n        }\n    };\n    NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n        if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n            classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n        else {\n            classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n    };\n    NumericContainer.prototype.updateNextPagerSetStyles = function () {\n        var pagerObj = this.pagerModule;\n        var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n        if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n            classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n        else {\n            classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n    };\n    NumericContainer.prototype.updateNextNLastStyles = function () {\n        var lastPage = ['e-lastpage', 'e-pager-default'];\n        var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n        var nextPage = ['e-nextpage', 'e-pager-default'];\n        var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n        var pagerObj = this.pagerModule;\n        if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n            classList(this.last, lastPageDisabled, lastPage);\n            classList(this.next, nextPageDisabled, nextPage);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n        }\n        else {\n            classList(this.last, lastPage, lastPageDisabled);\n            classList(this.next, nextPage, nextPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n        }\n    };\n    return NumericContainer;\n}());\nexport { NumericContainer };\n","import { createElement, append } from '@syncfusion/ej2-base';\n/**\n * `PagerMessage` module is used to display pager information.\n */\nvar PagerMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @hidden\n     */\n    function PagerMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render pager message\n     * @hidden\n     */\n    PagerMessage.prototype.render = function () {\n        var div = createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n        this.pageNoMsgElem = createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n        this.pageCountMsgElem = createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n        append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n        this.pagerModule.element.appendChild(div);\n        this.refresh();\n    };\n    /**\n     * Refreshes the pager information.\n     */\n    PagerMessage.prototype.refresh = function () {\n        var pagerObj = this.pagerModule;\n        this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n                pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n        this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n        this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n    };\n    /**\n     * Hides the Pager information.\n     */\n    PagerMessage.prototype.hideMessage = function () {\n        if (this.pageNoMsgElem) {\n            this.pageNoMsgElem.style.display = 'none';\n        }\n        if (this.pageCountMsgElem) {\n            this.pageCountMsgElem.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the Pager information.\n     */\n    PagerMessage.prototype.showMessage = function () {\n        if (!this.pageNoMsgElem) {\n            this.render();\n        }\n        this.pageNoMsgElem.style.display = '';\n        this.pageCountMsgElem.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerMessage.prototype.destroy = function () {\n        //destroy\n    };\n    PagerMessage.prototype.format = function (str, args) {\n        var regx;\n        for (var i = 0; i < args.length; i++) {\n            regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n            str = str.replace(regx, args[i].toString());\n        }\n        return str;\n    };\n    return PagerMessage;\n}());\nexport { PagerMessage };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, L10n, Browser } from '@syncfusion/ej2-base';\nimport { createElement, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Property, Event, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { NumericContainer } from './numeric-container';\nimport { PagerMessage } from './pager-message';\nimport { appendChildren } from '../grid/base/util';\n/**\n * Represents the `Pager` component.\n * ```html\n * <div id=\"pager\"/>\n * ```\n * ```typescript\n * <script>\n *   var pagerObj = new Pager({ totalRecordsCount: 50, pageSize:10 });\n *   pagerObj.appendTo(\"#pager\");\n * </script>\n * ```\n */\nvar Pager = /** @class */ (function (_super) {\n    __extends(Pager, _super);\n    /**\n     * Constructor for creating the component.\n     * @hidden\n     */\n    function Pager(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.defaultConstants = {\n            currentPageInfo: '{0} of {1} pages',\n            totalItemsInfo: '({0} items)',\n            firstPageTooltip: 'Go to first page',\n            lastPageTooltip: 'Go to last page',\n            nextPageTooltip: 'Go to next page',\n            previousPageTooltip: 'Go to previous page',\n            nextPagerTooltip: 'Go to next pager',\n            previousPagerTooltip: 'Go to previous pager',\n            pagerDropDown: 'Items per page'\n        };\n        /**\n         * `containerModule` is used to manipulate numeric container behavior of Pager.\n         */\n        _this.containerModule = new NumericContainer(_this);\n        /**\n         * `pagerMessageModule` is used to manipulate pager message of Pager.\n         */\n        _this.pagerMessageModule = new PagerMessage(_this);\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     * @hidden\n     */\n    Pager.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableExternalMessage) {\n            modules.push({\n                member: 'externalMessage',\n                args: [this]\n            });\n        }\n        if (this.checkpagesizes()) {\n            modules.push({\n                member: 'pagerdropdown',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Initialize the event handler\n     * @hidden\n     */\n    Pager.prototype.preRender = function () {\n        //preRender\n    };\n    /**\n     * To Initialize the component rendering\n     */\n    Pager.prototype.render = function () {\n        if (this.template) {\n            this.pagerTemplate();\n        }\n        else {\n            this.initLocalization();\n            this.updateRTL();\n            this.totalRecordsCount = this.totalRecordsCount || 0;\n            this.renderFirstPrevDivForDevice();\n            this.containerModule.render();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.render();\n            }\n            this.renderNextLastDivForDevice();\n            if (this.checkpagesizes()) {\n                this.pagerdropdownModule.render();\n            }\n            this.addAriaLabel();\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.render();\n            }\n            this.refresh();\n            this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @hidden\n     */\n    Pager.prototype.getPersistData = function () {\n        var keyEntity = ['currentPage', 'pageSize'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To destroy the Pager component.\n     * @method destroy\n     * @return {void}\n     */\n    Pager.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.containerModule.destroy();\n        this.pagerMessageModule.destroy();\n        this.element.innerHTML = '';\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Pager.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (newProp.pageCount !== oldProp.pageCount) {\n            this.containerModule.refreshNumericLinks();\n            this.containerModule.refresh();\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'currentPage':\n                    if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n                        this.currentPageChanged();\n                    }\n                    break;\n                case 'pageSize':\n                case 'totalRecordsCount':\n                case 'customText':\n                    if (this.checkpagesizes()) {\n                        this.pagerdropdownModule.setDropDownValue('value', this.pageSize);\n                    }\n                    this.refresh();\n                    break;\n                case 'pageSizes':\n                    if (this.checkpagesizes()) {\n                        this.pagerdropdownModule.destroy();\n                        this.pagerdropdownModule.render();\n                    }\n                    this.refresh();\n                    break;\n                case 'template':\n                    this.templateFn = this.compile(this.template);\n                    this.refresh();\n                    break;\n                case 'locale':\n                    this.initLocalization();\n                    this.refresh();\n                    break;\n                case 'enableExternalMessage':\n                    if (this.enableExternalMessage) {\n                        this.externalMessageModule.render();\n                    }\n                    break;\n                case 'externalMessage':\n                    if (this.externalMessageModule) {\n                        this.externalMessageModule.refresh();\n                    }\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'enablePagerMessage':\n                    if (this.enablePagerMessage) {\n                        this.pagerMessageModule.showMessage();\n                    }\n                    else {\n                        this.pagerMessageModule.hideMessage();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    Pager.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    /**\n     * Navigate to target page by given number.\n     * @param  {number} pageNo - Defines page number.\n     * @return {void}\n     */\n    Pager.prototype.goToPage = function (pageNo) {\n        if (this.checkGoToPage(pageNo)) {\n            this.currentPage = pageNo;\n            this.dataBind();\n        }\n    };\n    Pager.prototype.checkpagesizes = function () {\n        if (this.pageSizes === true || this.pageSizes.length) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n        if (newPageNo !== this.currentPage) {\n            this.previousPageNo = this.currentPage;\n        }\n        if (!isNullOrUndefined(oldPageNo)) {\n            this.previousPageNo = oldPageNo;\n        }\n        if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.currentPageChanged = function () {\n        if (this.enableQueryString) {\n            this.updateQueryString(this.currentPage);\n        }\n        var args = { currentPage: this.currentPage, cancel: false };\n        this.trigger('click', args);\n        if (!args.cancel) {\n            this.refresh();\n        }\n    };\n    Pager.prototype.pagerTemplate = function () {\n        var result;\n        this.element.classList.add('e-pagertemplate');\n        this.compile(this.template);\n        var data = {\n            currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n            totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n        };\n        result = this.getPagerTemplate()(data);\n        appendChildren(this.element, result);\n    };\n    /** @hidden */\n    Pager.prototype.updateTotalPages = function () {\n        this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n            (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n    };\n    /** @hidden */\n    Pager.prototype.getPagerTemplate = function () {\n        return this.templateFn;\n    };\n    Pager.prototype.compile = function (template) {\n        if (template) {\n            var e = void 0;\n            try {\n                if (document.querySelectorAll(template).length) {\n                    this.templateFn = templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (e) {\n                this.templateFn = templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Refreshes page count, pager information and external message.\n     * @return {void}\n     */\n    Pager.prototype.refresh = function () {\n        if (this.template) {\n            this.element.innerHTML = '';\n            this.updateTotalPages();\n            this.pagerTemplate();\n        }\n        else {\n            this.updateRTL();\n            this.containerModule.refresh();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.refresh();\n            }\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.refresh();\n            }\n        }\n    };\n    Pager.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Pager.prototype.initLocalization = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultConstants, this.locale);\n    };\n    Pager.prototype.updateQueryString = function (value) {\n        var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n        window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n    };\n    Pager.prototype.getUpdatedURL = function (uri, key, value) {\n        var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n        if (uri.match(regx)) {\n            return uri.replace(regx, '$1' + key + '=' + value + '$2');\n        }\n        else {\n            var hash = '';\n            if (uri.indexOf('#') !== -1) {\n                hash = uri.replace(/.*#/, '#');\n                uri = uri.replace(/#.*/, '');\n            }\n            return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n        }\n    };\n    Pager.prototype.renderFirstPrevDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mfirst e-icons e-icon-first',\n            attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mprev e-icons e-icon-prev',\n            attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.renderNextLastDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mnext e-icons e-icon-next',\n            attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mlast e-icons e-icon-last',\n            attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.addAriaLabel = function () {\n        var _this = this;\n        var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n        if (!Browser.isDevice) {\n            classList.forEach(function (value) {\n                var element = _this.element.querySelector(value);\n                element.setAttribute('aria-label', element.getAttribute('title'));\n            });\n        }\n    };\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableExternalMessage\", void 0);\n    __decorate([\n        Property(true)\n    ], Pager.prototype, \"enablePagerMessage\", void 0);\n    __decorate([\n        Property(12)\n    ], Pager.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(10)\n    ], Pager.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], Pager.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"externalMessage\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"template\", void 0);\n    __decorate([\n        Property('')\n    ], Pager.prototype, \"customText\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"dropDownChanged\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"created\", void 0);\n    Pager = __decorate([\n        NotifyPropertyChanges\n    ], Pager);\n    return Pager;\n}(Component));\nexport { Pager };\n","import { createElement, remove } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\n/**\n * `PagerDropDown` module handles selected pageSize from DropDownList.\n */\nvar PagerDropDown = /** @class */ (function () {\n    /**\n     * Constructor for pager module\n     * @hidden\n     */\n    function PagerDropDown(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.getModuleName = function () {\n        return 'pagerdropdown';\n    };\n    /**\n     * The function is used to render pager dropdown\n     * @hidden\n     */\n    PagerDropDown.prototype.render = function () {\n        var pagerObj = this.pagerModule;\n        this.pagerDropDownDiv = createElement('div', { className: 'e-pagesizes' });\n        var dropDownDiv = createElement('div', { className: 'e-pagerdropdown' });\n        var defaultTextDiv = createElement('div', { className: 'e-pagerconstant' });\n        var input = createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n        this.pagerCons = createElement('span', { className: 'e-constant', innerHTML: this.pagerModule.getLocalizedLabel('pagerDropDown') });\n        dropDownDiv.appendChild(input);\n        defaultTextDiv.appendChild(this.pagerCons);\n        this.pagerDropDownDiv.appendChild(dropDownDiv);\n        this.pagerDropDownDiv.appendChild(defaultTextDiv);\n        this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n        var pageSizesModule = this.pagerModule.pageSizes;\n        var pageSizesArray = (pageSizesModule.length ? pageSizesModule : [5, 10, 12, 20]);\n        var defaultValue = (pageSizesArray).indexOf(this.pagerModule.pageSize) > -1 ? this.pagerModule.pageSize : pageSizesArray[0];\n        this.dropDownListObject = new DropDownList({\n            dataSource: pageSizesArray,\n            value: defaultValue,\n            change: this.onChange.bind(this)\n        });\n        this.dropDownListObject.appendTo(input);\n        pagerObj.pageSize = defaultValue;\n        pagerObj.dataBind();\n        pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n    };\n    /**\n     * For internal use only - Get the pagesize.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.onChange = function (e) {\n        this.pagerModule.pageSize = this.dropDownListObject.value;\n        this.pagerModule.dataBind();\n        this.pagerModule.trigger('dropDownChanged', { pageSize: this.dropDownListObject.value });\n    };\n    PagerDropDown.prototype.setDropDownValue = function (prop, value) {\n        if (this.dropDownListObject) {\n            this.dropDownListObject[prop] = value;\n        }\n    };\n    /**\n     * To destroy the Pagerdropdown\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerDropDown.prototype.destroy = function (args) {\n        if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n            this.dropDownListObject.destroy();\n            remove(this.pagerDropDownDiv);\n        }\n    };\n    return PagerDropDown;\n}());\nexport { PagerDropDown };\n","import { createElement, remove } from '@syncfusion/ej2-base';\n/**\n * `ExternalMessage` module is used to display user provided message.\n */\nvar ExternalMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @param  {Pager} pagerModule?\n     * @returns defaultType\n     * @hidden\n     */\n    function ExternalMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExternalMessage.prototype.getModuleName = function () {\n        return 'externalMessage';\n    };\n    /**\n     * The function is used to render pager externalMessage\n     * @hidden\n     */\n    ExternalMessage.prototype.render = function () {\n        this.element = createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n        this.pagerModule.element.appendChild(this.element);\n        this.refresh();\n    };\n    /**\n     * Refreshes the external message of Pager.\n     */\n    ExternalMessage.prototype.refresh = function () {\n        if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n            this.showMessage();\n            this.element.innerHTML = this.pagerModule.externalMessage;\n        }\n        else {\n            this.hideMessage();\n        }\n    };\n    /**\n     * Hides the external message of Pager.\n     */\n    ExternalMessage.prototype.hideMessage = function () {\n        this.element.style.display = 'none';\n    };\n    /**\n     * Shows the external message of the Pager.\n     */\n    ExternalMessage.prototype.showMessage = function () {\n        this.element.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ExternalMessage.prototype.destroy = function () {\n        remove(this.element);\n    };\n    return ExternalMessage;\n}());\nexport { ExternalMessage };\n","import { extend } from '@syncfusion/ej2-base';\nimport { remove, createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Pager } from '../../pager/pager';\nimport { PagerDropDown } from '../../pager/pager-dropdown';\nimport { ExternalMessage } from '../../pager/external-message';\nimport { extend as gridExtend, getActualProperties, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nPager.Inject(ExternalMessage, PagerDropDown);\n/**\n * The `Page` module is used to render pager and handle paging action.\n */\nvar Page = /** @class */ (function () {\n    /**\n     * Constructor for the Grid paging module\n     * @hidden\n     */\n    function Page(parent, pageSettings) {\n        this.parent = parent;\n        this.pageSettings = pageSettings;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Page.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * The function used to render pager from grid pageSettings\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.render = function () {\n        var gObj = this.parent;\n        var pagerObj;\n        this.pagerDestroy();\n        if (!isNullOrUndefined(this.parent.pagerTemplate)) {\n            this.pageSettings.template = this.parent.pagerTemplate;\n        }\n        this.element = createElement('div', { className: 'e-gridpager' });\n        pagerObj = gridExtend({}, extend({}, getActualProperties(this.pageSettings)), {\n            click: this.clickHandler.bind(this),\n            dropDownChanged: this.onSelect.bind(this),\n            enableRtl: gObj.enableRtl, locale: gObj.locale,\n            created: this.addAriaAttr.bind(this)\n        }, ['parentObj', 'propName']);\n        this.pagerObj = new Pager(pagerObj);\n    };\n    Page.prototype.onSelect = function (e) {\n        this.pageSettings.pageSize = e.pageSize;\n        this.pageSettings.currentPage = 1;\n    };\n    Page.prototype.addAriaAttr = function () {\n        var _this = this;\n        if (!(this.pageSettings.template)) {\n            var numericContainerNew = createElement('div', { className: 'e-numericcontainer' });\n            var pagerContainer = this.element.querySelector('.e-pagercontainer');\n            var frag = document.createDocumentFragment();\n            var numericContainer = this.element.querySelector('.e-numericcontainer');\n            var links = numericContainer.querySelectorAll('a');\n            for (var i = 0; i < links.length; i++) {\n                if (this.parent.getContentTable()) {\n                    links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n                }\n                else {\n                    links[i].setAttribute('aria-owns', this.parent.element.getAttribute('id') + '_content_table');\n                }\n                var numericContainerDiv = createElement('div');\n                numericContainerDiv.appendChild(links[i]);\n                frag.appendChild(numericContainerDiv);\n            }\n            numericContainerNew.appendChild(frag);\n            pagerContainer.replaceChild(numericContainerNew, numericContainer);\n            var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n            classList.forEach(function (value) {\n                var element = _this.element.querySelector(value);\n                if (_this.parent.getContentTable()) {\n                    element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n                }\n            });\n        }\n    };\n    Page.prototype.dataReady = function (e) {\n        this.updateModel(e);\n    };\n    /**\n     * Refreshes the page count, pager information, and external message.\n     * @return {void}\n     */\n    Page.prototype.refresh = function () {\n        this.pagerObj.refresh();\n    };\n    /**\n     * Navigates to the target page according to the given number.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Page.prototype.goToPage = function (pageNo) {\n        this.pagerObj.goToPage(pageNo);\n    };\n    /**\n     * The function used to update pageSettings model\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.updateModel = function (e) {\n        this.parent.pageSettings.totalRecordsCount = e.count;\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n            type: events.actionComplete\n        }));\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            this.pagerObj[prop] = newProp[prop];\n        }\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        if (this.isForceCancel || isActionPrevent(gObj) && !gObj.prevPageMoving) {\n            if (!this.isForceCancel) {\n                gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n                this.isForceCancel = true;\n                this.pagerObj.currentPage = gObj.pageSettings.currentPage;\n                this.pagerObj.dataBind();\n            }\n            else {\n                this.isForceCancel = false;\n            }\n            e.cancel = true;\n            return;\n        }\n        gObj.prevPageMoving = false;\n        var prevPage = this.pageSettings.currentPage;\n        this.pageSettings.currentPage = e.currentPage;\n        this.parent.notify(events.modelChanged, {\n            requestType: 'paging',\n            previousPage: prevPage,\n            currentPage: e.currentPage,\n            type: events.actionBegin\n        });\n    };\n    Page.prototype.keyPressHandler = function (e) {\n        if (e.action in keyActions) {\n            e.preventDefault();\n            this.element.querySelector(keyActions[e.action]).click();\n        }\n    };\n    /**\n     * Defines the text of the external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Page.prototype.updateExternalMessage = function (message) {\n        if (!this.pagerObj.enableExternalMessage) {\n            this.pagerObj.enableExternalMessage = true;\n            this.pagerObj.dataBind();\n        }\n        this.pagerObj.externalMessage = message;\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.appendToElement = function (e) {\n        this.parent.element.appendChild(this.element);\n        this.parent.setGridPager(this.element);\n        this.pagerObj.appendTo(this.element);\n    };\n    Page.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n            this.appendToElement();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.render,\n            end: this.appendToElement,\n            ready: this.dataReady,\n            complete: this.onActionComplete,\n            updateLayout: this.enableAfterRender,\n            inboundChange: this.onPropertyChanged,\n            keyPress: this.keyPressHandler\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.handlers.load, this);\n        this.parent.on(events.initialEnd, this.handlers.end, this); //For initial rendering\n        this.parent.on(events.dataReady, this.handlers.ready, this);\n        this.parent.on(events.pageComplete, this.handlers.complete, this);\n        this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n        this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n        this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.handlers.load);\n        this.parent.off(events.initialEnd, this.handlers.end); //For initial rendering\n        this.parent.off(events.dataReady, this.handlers.ready);\n        this.parent.off(events.pageComplete, this.handlers.complete);\n        this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n        this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n        this.parent.off(events.keyPressed, this.handlers.keyPress);\n    };\n    /**\n     * To destroy the pager\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.destroy = function () {\n        this.removeEventListener();\n        this.pagerDestroy();\n    };\n    Page.prototype.pagerDestroy = function () {\n        if (this.pagerObj && !this.pagerObj.isDestroyed) {\n            this.pagerObj.destroy();\n            remove(this.element);\n        }\n    };\n    return Page;\n}());\nexport { Page };\n/**\n * @hidden\n */\nvar keyActions = {\n    pageUp: '.e-prev',\n    pageDown: '.e-next',\n    ctrlAltPageDown: '.e-last',\n    ctrlAltPageUp: '.e-first',\n    altPageUp: '.e-pp',\n    altPageDown: '.e-np'\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\nimport { createElement, attributes } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { Input } from '@syncfusion/ej2-inputs';\n/**\n * FilterCellRenderer class which responsible for building filter cell.\n * @hidden\n */\nvar FilterCellRenderer = /** @class */ (function (_super) {\n    __extends(FilterCellRenderer, _super);\n    function FilterCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TH', { className: 'e-filterbarcell' });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    FilterCellRenderer.prototype.getGui = function () {\n        return createElement('div');\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    FilterCellRenderer.prototype.render = function (cell, data) {\n        var tr = this.parent.element.querySelector('.e-filterbar');\n        var node = this.element.cloneNode();\n        var innerDIV = this.getGui();\n        var input;\n        var column = cell.column;\n        tr.appendChild(node);\n        node.setAttribute('e-mappinguid', column.uid);\n        if (column.type !== 'checkbox') {\n            if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                node.classList.add('e-fltrtemp');\n                attributes(innerDIV, {\n                    'class': 'e-fltrtempdiv'\n                });\n                if (isNullOrUndefined(column.filterBarTemplate.create)) {\n                    input = createElement('input', {\n                        id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n                        attrs: { type: 'search', title: column.headerText }\n                    });\n                    innerDIV.appendChild(input);\n                }\n                else {\n                    var args = { column: column, node: Element };\n                    var temp = column.filterBarTemplate.create;\n                    if (typeof temp === 'string') {\n                        temp = getValue(temp, window);\n                    }\n                    input = temp(args);\n                    if (typeof input === 'string') {\n                        var div = createElement('div');\n                        div.innerHTML = input;\n                        input = div.firstChild;\n                    }\n                    attributes(innerDIV, {\n                        class: 'e-filterUi_input e-filtertext e-fltrTemp',\n                        title: column.headerText,\n                        id: column.field + '_filterBarcell',\n                    });\n                    innerDIV.appendChild(input);\n                }\n            }\n            else {\n                attributes(innerDIV, {\n                    'class': 'e-filterdiv e-fltrinputdiv'\n                });\n                input = createElement('input', {\n                    id: column.field + '_filterBarcell', className: 'e-filtertext',\n                    attrs: {\n                        type: 'search', title: column.headerText + cell.attributes.title,\n                        value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n                    }\n                });\n                innerDIV.appendChild(input);\n                Input.createInput({\n                    element: input, floatLabelType: 'Never',\n                    properties: {\n                        enableRtl: this.parent.enableRtl, showClearButton: true\n                    }\n                });\n            }\n            //TODO: apply intial filtering\n            if (column.allowFiltering === false || column.field === '' || isNullOrUndefined(column.field)) {\n                input.setAttribute('disabled', 'true');\n                input.classList.add('e-disable');\n            }\n            if (!column.visible) {\n                node.classList.add('e-hide');\n            }\n            this.appendHtml(node, innerDIV);\n            if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                var templateWrite = column.filterBarTemplate.write;\n                var args = { element: input, column: column };\n                if (typeof templateWrite === 'string') {\n                    templateWrite = getValue(templateWrite, window);\n                }\n                templateWrite.call(this, args);\n            }\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHTML\n     * @returns Element\n     */\n    FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return FilterCellRenderer;\n}(CellRenderer));\nexport { FilterCellRenderer };\n","import { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * `filter operators` render boolean column.\n * @hidden\n */\nvar FlMenuOptrUI = /** @class */ (function () {\n    function FlMenuOptrUI(parent, customFltrOperators, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.customFilterOperators = customFltrOperators;\n    }\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.renderOperatorUI = function (dlgConetntEle, target, column, dlgObj) {\n        this.dialogObj = dlgObj;\n        var optr = column.type + 'Operator';\n        this.optrData = this.customOptr = (!isNullOrUndefined(this.parent.filterSettings.operators) &&\n            !isNullOrUndefined(this.parent.filterSettings.operators[optr])) ?\n            this.parent.filterSettings.operators[optr] : this.customFilterOperators[optr];\n        var dropDatasource = this.customOptr;\n        var selectedValue = this.dropSelectedVal(column, optr);\n        var optrDiv = createElement('div', { className: 'e-flm_optrdiv' });\n        dlgConetntEle.appendChild(optrDiv);\n        var optrInput = createElement('input', { id: column.uid + '-floptr' });\n        optrDiv.appendChild(optrInput);\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            open: this.dropDownOpen.bind(this),\n            text: selectedValue\n        });\n        this.dropOptr.appendTo('#' + column.uid + '-floptr');\n    };\n    FlMenuOptrUI.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    FlMenuOptrUI.prototype.dropSelectedVal = function (col, optr) {\n        var selValue = '';\n        var columns = this.parent.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field || (col.isForeignColumn() && col.foreignKeyValue === column.field)) {\n                var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', column.operator));\n                selValue = !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n            }\n        }\n        if (selValue === '') {\n            selValue = this.optrData[0].text;\n        }\n        return selValue;\n    };\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.getFlOperator = function () {\n        return this.dropOptr.value;\n    };\n    return FlMenuOptrUI;\n}());\nexport { FlMenuOptrUI };\n","import { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { createElement, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getZIndexCalcualtion } from '../base/util';\n/**\n * `string filterui` render string column.\n * @hidden\n */\nvar StringFilterUI = /** @class */ (function () {\n    function StringFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    StringFilterUI.prototype.create = function (args) {\n        var data;\n        var floptr;\n        this.instance = createElement('input', { className: 'e-flmenu-input', id: 'strui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.dialogObj = args.dialogObj;\n        this.actObj = new AutoComplete(this.getAutoCompleteOptions(args));\n        this.actObj.appendTo(this.instance);\n    };\n    StringFilterUI.prototype.getAutoCompleteOptions = function (args) {\n        var _this = this;\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = { value: isForeignColumn ? args.column.foreignKeyValue : args.column.field };\n        return {\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            query: this.parent.query.clone(),\n            sortOrder: 'Ascending',\n            open: this.openPopup.bind(this),\n            cssClass: 'e-popup-flmenu',\n            focus: function () {\n                _this.actObj.filterType = args.getOptrInstance.getFlOperator();\n            },\n            autofill: true,\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            actionComplete: function (e) {\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObj) {\n                        return mapObj[_this.actObj.fields.value];\n                    }).indexOf(obj[_this.actObj.fields.value]) === index;\n                });\n            }\n        };\n    };\n    StringFilterUI.prototype.write = function (args) {\n        var columns = this.filterSettings.columns;\n        if (args.filteredValue !== '' && !isNullOrUndefined(args.filteredValue)) {\n            var struiObj = document.querySelector('#strui-' + args.column.uid).ej2_instances[0];\n            struiObj.value = args.filteredValue;\n        }\n    };\n    StringFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var actuiObj = document.querySelector('#strui-' + column.uid).ej2_instances[0];\n        if (Browser.isDevice) {\n            actuiObj.hidePopup();\n            actuiObj.focusOut();\n        }\n        var filterValue = actuiObj.value;\n        if (isNullOrUndefined(filterValue) || filterValue === '') {\n            filterValue = null;\n        }\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    StringFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return StringFilterUI;\n}());\nexport { StringFilterUI };\n","import { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * `numberfilterui` render number column.\n * @hidden\n */\nvar NumberFilterUI = /** @class */ (function () {\n    function NumberFilterUI(parent, serviceLocator, filterSettings) {\n        this.filterSettings = filterSettings;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    NumberFilterUI.prototype.create = function (args) {\n        this.instance = createElement('input', { className: 'e-flmenu-input', id: 'numberui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.numericTxtObj = new NumericTextBox({\n            format: args.column.format,\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            enableRtl: this.parent.enableRtl,\n        });\n        this.numericTxtObj.appendTo(this.instance);\n    };\n    NumberFilterUI.prototype.write = function (args) {\n        var numberuiObj = document.querySelector('#numberui-' + args.column.uid).ej2_instances[0];\n        numberuiObj.value = args.filteredValue;\n    };\n    NumberFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var numberuiObj = document.querySelector('#numberui-' + column.uid).ej2_instances[0];\n        var filterValue = numberuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    return NumberFilterUI;\n}());\nexport { NumberFilterUI };\n","import { getZIndexCalcualtion } from '../base/util';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `boolfilterui` render boolean column.\n * @hidden\n */\nvar BooleanFilterUI = /** @class */ (function () {\n    function BooleanFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    BooleanFilterUI.prototype.create = function (args) {\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = isForeignColumn ? args.column.foreignKeyValue : args.column.field;\n        this.elem = createElement('input', { className: 'e-flmenu-input', id: 'bool-ui-' + args.column.uid });\n        args.target.appendChild(this.elem);\n        this.dialogObj = args.dialogObj;\n        this.dropInstance = new DropDownList({\n            dataSource: dataSource instanceof DataManager ?\n                dataSource : new DataManager(dataSource),\n            query: new Query().select(fields),\n            fields: { text: fields, value: fields },\n            placeholder: args.localizeText.getConstant('SelectValue'),\n            cssClass: 'e-popup-flmenu',\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            open: this.openPopup.bind(this),\n            actionComplete: function (e) {\n                e.result = DataUtil.distinct(e.result, fields, true);\n            }\n        });\n        this.dropInstance.appendTo(this.elem);\n    };\n    BooleanFilterUI.prototype.write = function (args) {\n        var drpuiObj = document.querySelector('#bool-ui-' + args.column.uid).ej2_instances[0];\n        if (!isNullOrUndefined(args.filteredValue)) {\n            drpuiObj.text = args.filteredValue;\n        }\n    };\n    BooleanFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var drpuiObj = document.querySelector('#bool-ui-' + column.uid).ej2_instances[0];\n        var filterValue = drpuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    BooleanFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return BooleanFilterUI;\n}());\nexport { BooleanFilterUI };\n","import { DatePicker } from '@syncfusion/ej2-calendars';\nimport { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Internationalization } from '@syncfusion/ej2-base';\n/**\n * `datefilterui` render date column.\n * @hidden\n */\nvar DateFilterUI = /** @class */ (function () {\n    function DateFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.fltrSettings = filterSettings;\n    }\n    DateFilterUI.prototype.create = function (args) {\n        var intl = new Internationalization();\n        var colFormat = args.column.format;\n        var format = intl.getDatePattern({ type: 'date', skeleton: colFormat }, false);\n        this.dialogObj = args.dialogObj;\n        this.inputElem = createElement('input', { className: 'e-flmenu-input', id: 'dateui-' + args.column.uid });\n        args.target.appendChild(this.inputElem);\n        this.datePickerObj = new DatePicker({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: args.localizeText.getConstant('ChooseDate'),\n            width: '100%',\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            open: this.openPopup.bind(this),\n        });\n        this.datePickerObj.appendTo(this.inputElem);\n    };\n    DateFilterUI.prototype.write = function (args) {\n        var columns = this.fltrSettings.columns;\n        var dateuiObj = document.querySelector('#dateui-' + args.column.uid).ej2_instances[0];\n        dateuiObj.value = !isNullOrUndefined(args.filteredValue) ? new Date(args.filteredValue) : null;\n    };\n    DateFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var dateuiObj = document.querySelector('#dateui-' + column.uid).ej2_instances[0];\n        var filterValue = dateuiObj.value;\n        filterValue = isNullOrUndefined(filterValue) ? null : filterValue;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    DateFilterUI.prototype.openPopup = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    return DateFilterUI;\n}());\nexport { DateFilterUI };\n","import { isNullOrUndefined, getValue, remove } from '@syncfusion/ej2-base';\nimport { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { FlMenuOptrUI } from './filter-menu-operator';\nimport { StringFilterUI } from './string-filter-ui';\nimport { NumberFilterUI } from './number-filter-ui';\nimport { BooleanFilterUI } from './boolean-filter-ui';\nimport { DateFilterUI } from './date-filter-ui';\nimport { getFilterMenuPostion, parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * `filter menu` render boolean column.\n * @hidden\n */\nvar FilterMenuRenderer = /** @class */ (function () {\n    function FilterMenuRenderer(parent, filterSettings, serviceLocator, customFltrOperators, fltrObj) {\n        this.isDialogOpen = false;\n        this.colTypes = {\n            'string': StringFilterUI, 'number': NumberFilterUI, 'date': DateFilterUI, 'boolean': BooleanFilterUI, 'datetime': DateFilterUI\n        };\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.customFilterOperators = customFltrOperators;\n        this.filterObj = fltrObj;\n        this.flMuiObj = new FlMenuOptrUI(this.parent, this.customFilterOperators, this.serviceLocator);\n        this.l10n = this.serviceLocator.getService('localization');\n    }\n    FilterMenuRenderer.prototype.openDialog = function (args) {\n        this.col = this.parent.getColumnByField(args.field);\n        if (isNullOrUndefined(this.col.filter) || (isNullOrUndefined(this.col.filter.type) || this.col.filter.type === 'Menu')) {\n            this.renderDlgContent(args.target, this.col);\n        }\n    };\n    FilterMenuRenderer.prototype.closeDialog = function () {\n        if (!this.dlgObj) {\n            return;\n        }\n        var elem = document.getElementById(this.dlgObj.element.id);\n        if (this.dlgObj && !this.dlgObj.isDestroyed && elem) {\n            this.parent.notify(events.filterMenuClose, { field: this.col.field });\n            this.isDialogOpen = false;\n            this.dlgObj.destroy();\n            remove(elem);\n        }\n    };\n    FilterMenuRenderer.prototype.renderDlgContent = function (target, column) {\n        var args = {\n            requestType: events.filterBeforeOpen, filterModel: this,\n            columnName: column.field, columnType: column.type\n        };\n        this.parent.trigger(events.actionBegin, args);\n        var mainDiv = createElement('div', { className: 'e-flmenu-maindiv', id: column.uid + '-flmenu' });\n        this.dlgDiv = createElement('div', { className: 'e-flmenu', id: column.uid + '-flmdlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            created: this.dialogCreated.bind(this, target, column),\n            position: this.parent.element.classList.contains('e-device') ? { X: 'center', Y: 'center' } : { X: '', Y: '' },\n            target: this.parent.element.classList.contains('e-device') ? document.body : this.parent.element,\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.l10n.getConstant('FilterButton'), isPrimary: true, cssClass: 'e-flmenu-okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this, column),\n                    buttonModel: { content: this.l10n.getConstant('ClearButton'), cssClass: 'e-flmenu-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: (!isNullOrUndefined(parentsUntil(target, 'e-bigger'))) || this.parent.element.classList.contains('e-device') ? 260 : 250,\n            animationSettings: { effect: 'None' },\n            cssClass: 'e-filter-popup'\n        });\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    FilterMenuRenderer.prototype.dialogCreated = function (target, column) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(target, this.dlgObj, this.parent);\n        }\n        this.renderFilterUI(target, column);\n        this.parent.notify(events.filterDialogCreated, {});\n        this.dlgObj.element.style.maxHeight = '350px';\n        this.dlgObj.show();\n        this.writeMethod(column, this.dlgObj.element.querySelector('#' + column.uid + '-flmenu'));\n        var args = {\n            requestType: events.filterAfterOpen,\n            filterModel: this, columnName: column.field, columnType: column.type\n        };\n        this.isDialogOpen = true;\n        this.parent.trigger(events.actionComplete, args);\n    };\n    FilterMenuRenderer.prototype.renderFilterUI = function (target, col) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-flmenu-maindiv');\n        this.renderOperatorUI(dlgConetntEle, target, col);\n        this.renderFlValueUI(dlgConetntEle, target, col);\n    };\n    FilterMenuRenderer.prototype.renderOperatorUI = function (dlgConetntEle, target, column) {\n        this.flMuiObj.renderOperatorUI(dlgConetntEle, target, column, this.dlgObj);\n    };\n    FilterMenuRenderer.prototype.renderFlValueUI = function (dlgConetntEle, target, column) {\n        var valueDiv = createElement('div', { className: 'e-flmenu-valuediv' });\n        dlgConetntEle.appendChild(valueDiv);\n        var args = { target: valueDiv, column: column, getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj };\n        var instanceofFilterUI = new this.colTypes[column.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (!isNullOrUndefined(column.filter) && !isNullOrUndefined(column.filter.ui)\n            && !isNullOrUndefined(column.filter.ui.create)) {\n            var temp = column.filter.ui.create;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            temp({\n                column: column, target: valueDiv,\n                getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj\n            });\n        }\n        else {\n            instanceofFilterUI.create({\n                column: column, target: valueDiv,\n                getOptrInstance: this.flMuiObj, localizeText: this.l10n, dialogObj: this.dlgObj\n            });\n        }\n    };\n    FilterMenuRenderer.prototype.writeMethod = function (col, dlgContentEle) {\n        var flValue;\n        var target = dlgContentEle.querySelector('.e-flmenu-valinput');\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field || col.foreignKeyValue === column.field) {\n                flValue = column.value;\n            }\n        }\n        if (!isNullOrUndefined(col.filter) && !isNullOrUndefined(col.filter.ui)\n            && !isNullOrUndefined(col.filter.ui.write)) {\n            var temp = col.filter.ui.write;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            temp({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n        else {\n            instanceofFilterUI.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n    };\n    FilterMenuRenderer.prototype.filterBtnClick = function (col) {\n        var flValue;\n        var flOptrValue;\n        var targ = this.dlgObj.element.querySelector('.e-flmenu-valuediv input');\n        flOptrValue = this.flMuiObj.getFlOperator();\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (!isNullOrUndefined(col.filter) &&\n            !isNullOrUndefined(col.filter.ui) && !isNullOrUndefined(col.filter.ui.read)) {\n            var temp = col.filter.ui.read;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            flValue = temp({ element: targ, column: col, operator: flOptrValue, fltrObj: this.filterObj });\n        }\n        else {\n            instanceofFilterUI.read(targ, col, flOptrValue, this.filterObj);\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var column = this.parent.element.querySelector('[e-mappinguid=\"' + col.uid + '\"]').parentElement;\n        var flIcon = column.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.add('e-filtered');\n        }\n        this.closeDialog();\n    };\n    FilterMenuRenderer.prototype.clearBtnClick = function (column) {\n        this.filterObj.removeFilteredColsByField(column.field);\n        this.closeDialog();\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var col = this.parent.element.querySelector('[e-mappinguid=\"' + column.uid + '\"]').parentElement;\n        var flIcon = col.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.remove('e-filtered');\n        }\n    };\n    FilterMenuRenderer.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    return FilterMenuRenderer;\n}());\nexport { FilterMenuRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, EventHandler, remove, Browser } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { isNullOrUndefined, } from '@syncfusion/ej2-base';\nimport { Internationalization } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { distinctStringValues, isComplexField, getComplexFieldID } from '../base/util';\nimport { generateQuery } from '../base/constant';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilter = /** @class */ (function (_super) {\n    __extends(ExcelFilter, _super);\n    /**\n     * Constructor for excel filtering module\n     * @hidden\n     */\n    function ExcelFilter(parent, filterSettings, serviceLocator, customFltrOperators) {\n        var _this = _super.call(this, parent, filterSettings, serviceLocator) || this;\n        _this.customFilterOperators = customFltrOperators;\n        _this.isExcel = true;\n        return _this;\n    }\n    ExcelFilter.prototype.getCMenuDS = function (type, operator) {\n        var options = {\n            number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n                'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n            string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter'],\n        };\n        options.date = options.number;\n        options.datetime = options.number;\n        var model = [];\n        for (var i = 0; i < options[type].length; i++) {\n            if (options[type][i].length) {\n                if (operator) {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...',\n                        iconCss: 'e-icons e-icon-check ' + (operator === options[type][i].toLowerCase() ? '' : 'e-emptyicon')\n                    });\n                }\n                else {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...'\n                    });\n                }\n            }\n            else {\n                model.push({ separator: true });\n            }\n        }\n        return model;\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    ExcelFilter.prototype.destroy = function () {\n        if (this.dlg) {\n            this.unwireExEvents();\n            _super.prototype.destroy.call(this);\n        }\n        if (this.cmenu && this.cmenu.parentElement) {\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilter.prototype.createMenu = function (type, isFiltered, isCheckIcon) {\n        var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateFilter', number: 'NumberFilter' };\n        this.menu = createElement('div', { className: 'e-contextmenu-wrapper' });\n        if (this.parent.enableRtl) {\n            this.menu.classList.add('e-rtl');\n        }\n        else {\n            this.menu.classList.remove('e-rtl');\n        }\n        var ul = createElement('ul');\n        var icon = isFiltered ? 'e-excl-filter-icon e-filtered' : 'e-excl-filter-icon';\n        ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n        if (type !== 'boolean') {\n            ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isCheckIcon && this.ensureTextFilter() ? 'e-icon-check' : icon + ' e-emptyicon', true));\n        }\n        this.menu.appendChild(ul);\n    };\n    ExcelFilter.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n        var li = createElement('li', { className: className + ' e-menu-item' });\n        li.innerHTML = val;\n        li.insertBefore(createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n        if (isSubMenu) {\n            li.appendChild(createElement('span', { className: 'e-icons e-caret' }));\n        }\n        return li;\n    };\n    ExcelFilter.prototype.wireExEvents = function () {\n        EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n    };\n    ExcelFilter.prototype.unwireExEvents = function () {\n        EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n    };\n    ExcelFilter.prototype.clickExHandler = function (e) {\n        var menuItem = parentsUntil(e.target, 'e-menu-item');\n        if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText.trim()) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    ExcelFilter.prototype.destroyCMenu = function () {\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilter.prototype.hoverHandler = function (e) {\n        var target = e.target.querySelector('.e-contextmenu');\n        var li = parentsUntil(e.target, 'e-menu-item');\n        var focused = this.menu.querySelector('.e-focused');\n        var isSubMenu;\n        if (focused) {\n            focused.classList.remove('e-focused');\n        }\n        if (li) {\n            li.classList.add('e-focused');\n            isSubMenu = li.classList.contains('e-submenu');\n        }\n        if (target) {\n            return;\n        }\n        if (!isSubMenu) {\n            var submenu = this.menu.querySelector('.e-submenu');\n            if (!isNullOrUndefined(submenu)) {\n                submenu.classList.remove('e-selected');\n            }\n            this.isCMenuOpen = false;\n            this.destroyCMenu();\n        }\n        var selectedMenu = this.ensureTextFilter();\n        if (!this.isCMenuOpen && isSubMenu) {\n            li.classList.add('e-selected');\n            this.isCMenuOpen = true;\n            var menuOptions = {\n                items: this.getCMenuDS(this.options.type, selectedMenu ? selectedMenu.replace(/\\s/g, '') : undefined),\n                select: this.selectHandler.bind(this),\n                onClose: this.destroyCMenu.bind(this),\n                enableRtl: this.parent.enableRtl,\n                beforeClose: this.preventClose\n            };\n            this.parent.element.appendChild(this.cmenu);\n            this.menuObj = new ContextMenu(menuOptions, this.cmenu);\n            var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n            var pos = { top: 0, left: 0 };\n            if (Browser.isDevice) {\n                var contextRect = this.getContextBounds(this.menuObj);\n                pos.top = (window.innerHeight - contextRect.height) / 2;\n                pos.left = (window.innerWidth - contextRect.width) / 2;\n                this.closeDialog();\n            }\n            else {\n                pos.top = client.top;\n                pos.left = this.getCMenuYPosition(this.dlg, this.menuObj);\n            }\n            this.menuObj.open(pos.top, pos.left);\n        }\n    };\n    ExcelFilter.prototype.ensureTextFilter = function () {\n        var selectedMenu;\n        var predicates = this.existingPredicate[this.options.field];\n        if (predicates && predicates.length === 2) {\n            if (predicates[0].operator === 'greaterThanOrEqual' && predicates[1].operator === 'lessThanOrEqual') {\n                selectedMenu = 'Between';\n            }\n            else {\n                selectedMenu = 'CustomFilter';\n            }\n        }\n        else {\n            if (predicates && predicates.length === 1) {\n                this.optrData = this.customFilterOperators[this.options.type + 'Operator'];\n                selectedMenu = predicates[0].operator;\n            }\n        }\n        return selectedMenu;\n    };\n    ExcelFilter.prototype.preventClose = function (args) {\n        if (args.event instanceof MouseEvent && args.event.target.classList.contains('e-submenu')) {\n            args.cancel = true;\n        }\n    };\n    ExcelFilter.prototype.getContextBounds = function (context) {\n        var elementVisible = this.menuObj.element.style.display;\n        this.menuObj.element.style.display = 'block';\n        return this.menuObj.element.getBoundingClientRect();\n    };\n    ExcelFilter.prototype.getCMenuYPosition = function (target, context) {\n        var contextWidth = this.getContextBounds(context).width;\n        var targetPosition = target.getBoundingClientRect();\n        var leftPos = targetPosition.right + contextWidth - this.parent.element.clientWidth;\n        return (leftPos < 1) ? (targetPosition.right + 1) : (targetPosition.left - contextWidth - 1);\n    };\n    ExcelFilter.prototype.openDialog = function (options) {\n        var _this = this;\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n        this.dialogObj.dataBind();\n        var filterLength = (this.existingPredicate[options.field] && this.existingPredicate[options.field].length) ||\n            this.options.filteredColumns.filter(function (col) {\n                return _this.options.field === col.field;\n            }).length;\n        this.createMenu(options.type, filterLength > 0, (filterLength === 1 || filterLength === 2));\n        this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n        this.dlg.classList.add('e-excelfilter');\n        this.dlg.classList.remove('e-checkboxfilter');\n        this.cmenu = createElement('ul', { className: 'e-excel-menu' });\n        this.wireExEvents();\n    };\n    ExcelFilter.prototype.closeDialog = function () {\n        _super.prototype.closeDialog.call(this);\n    };\n    ExcelFilter.prototype.selectHandler = function (e) {\n        if (e.item) {\n            this.menuItem = e.item;\n            this.renderDialogue(e);\n        }\n    };\n    ExcelFilter.prototype.renderDialogue = function (e) {\n        var _this = this;\n        var target = e.element;\n        var column = this.options.field;\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var mainDiv = createElement('div', { className: 'e-xlfl-maindiv',\n            id: isComplex ? complexFieldName + '-xlflmenu' : column + '-xlflmenu' });\n        this.dlgDiv = createElement('div', { className: 'e-xlflmenu',\n            id: isComplex ? complexFieldName + '-xlfldlg' : column + '-xlfldlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            header: this.getLocalizedLabel('CustomFilter'),\n            isModal: true,\n            overlayClick: this.removeDialog.bind(this),\n            showCloseIcon: true,\n            closeOnEscape: false,\n            target: document.body,\n            // target: this.parent.element,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            open: function () {\n                var row = _this.dlgObj.element.querySelector('table.e-xlfl-table>tr');\n                row.cells[1].querySelector('input:not([type=hidden])').focus();\n            },\n            close: this.removeDialog.bind(this),\n            created: this.createdDialog.bind(this, target, column),\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.getLocalizedLabel('OKButton'), isPrimary: true, cssClass: 'e-xlfl-okbtn'\n                    }\n                },\n                {\n                    click: this.removeDialog.bind(this),\n                    buttonModel: { content: this.getLocalizedLabel('CancelButton'), cssClass: 'e-xlfl-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: 430,\n            animationSettings: { effect: 'None' },\n        });\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    ExcelFilter.prototype.removeDialog = function () {\n        this.removeObjects([this.dropOptr, this.datePicker, this.actObj, this.numericTxtObj, this.dlgObj]);\n        remove(this.dlgDiv);\n    };\n    ExcelFilter.prototype.clearBtnClick = function (field) {\n        this.clearFilter();\n        this.removeDialog();\n    };\n    ExcelFilter.prototype.createdDialog = function (target, column) {\n        this.renderCustomFilter(target, column);\n        this.dlgObj.element.style.left = '0px';\n        this.dlgObj.element.style.top = '0px';\n        if (Browser.isDevice && window.innerWidth < 440) {\n            this.dlgObj.element.style.width = '90%';\n        }\n        this.dlgObj.show();\n    };\n    ExcelFilter.prototype.renderCustomFilter = function (target, column) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-xlfl-maindiv');\n        /* tslint:disable-next-line:max-line-length */\n        var dlgFields = createElement('div', { innerHTML: this.getLocalizedLabel('ShowRowsWhere'), className: 'e-xlfl-dlgfields' });\n        dlgConetntEle.appendChild(dlgFields);\n        //column name\n        var fieldSet = createElement('div', { innerHTML: this.options.displayName, className: 'e-xlfl-fieldset' });\n        dlgConetntEle.appendChild(fieldSet);\n        this.renderFilterUI(column, dlgConetntEle);\n    };\n    ExcelFilter.prototype.filterBtnClick = function (col) {\n        var isComplex = !isNullOrUndefined(col) && isComplexField(col);\n        var complexFieldName = !isNullOrUndefined(col) && getComplexFieldID(col);\n        var colValue = isComplex ? complexFieldName : col;\n        var fValue = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstvalue').ej2_instances[0];\n        var fOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstoptr').ej2_instances[0];\n        var sValue = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndvalue').ej2_instances[0];\n        var sOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndoptr').ej2_instances[0];\n        var checkBoxValue;\n        if (this.options.type === 'string') {\n            var checkBox = this.dlgDiv.querySelector('#' + colValue + '-xlflmtcase').ej2_instances[0];\n            checkBoxValue = checkBox.checked;\n        }\n        var andRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-frstpredicate').ej2_instances[0];\n        var orRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-secndpredicate').ej2_instances[0];\n        var predicate = (andRadio.checked ? 'and' : 'or');\n        if (sValue.value === null) {\n            predicate = 'or';\n        }\n        this.filterByColumn(this.options.field, fOperator.value, fValue.value, predicate, checkBoxValue, this.parent.filterSettings.ignoreAccent, sOperator.value, sValue.value);\n        this.removeDialog();\n    };\n    /**\n     * Filters grid row by column name with given options.\n     * @param {string} fieldName - Defines the field name of the filter column.\n     * @param {string} firstOperator - Defines the first operator by how to filter records.\n     * @param {string | number | Date | boolean} firstValue - Defines the first value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n     * @param {boolean} matchCase - If ignore case set to true, then filter records with exact match or else\n     * filter records with case insensitive(uppercase and lowercase letters treated as same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then ignores the diacritic characters or accents when filtering.\n     * @param {string} secondOperator - Defines the second operator by how to filter records.\n     * @param {string | number | Date | boolean} secondValue - Defines the first value which is used to filter records.\n     */\n    ExcelFilter.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n        var _this = this;\n        var col = this.parent.getColumnByField(fieldName);\n        var field = col.isForeignColumn() ? col.foreignKeyValue : fieldName;\n        var fColl = [];\n        var mPredicate;\n        fColl.push({\n            field: field,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: firstOperator,\n            value: firstValue,\n            type: this.options.type\n        });\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: firstOperator, arg3: firstValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: secondOperator, arg8: secondValue\n            });\n            return;\n        }\n        mPredicate = new Predicate(field, firstOperator.toLowerCase(), firstValue, !matchCase, ignoreAccent);\n        if (secondValue) {\n            secondOperator = !isNullOrUndefined(secondOperator) ? secondOperator : 'equal';\n            fColl.push({\n                field: field,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: secondOperator,\n                value: secondValue,\n                type: this.options.type\n            });\n            /* tslint:disable-next-line:max-line-length */\n            mPredicate = mPredicate[predicate](field, secondOperator.toLowerCase(), secondValue, !matchCase, ignoreAccent);\n        }\n        var args = {\n            action: 'filtering', filterCollection: fColl, field: this.options.field,\n            ejpredicate: mPredicate, actualPredicate: fColl\n        };\n        var fPredicate = {};\n        var filterCollection = [];\n        if (col.isForeignColumn()) {\n            this.options.column.dataSource.\n                executeQuery(new Query().where(mPredicate)).then(function (e) {\n                _this.options.column.columnData = e.result;\n                _this.parent.notify(generateQuery, { predicate: fPredicate, column: col });\n                args.ejpredicate = fPredicate.predicate.predicates;\n                fPredicate.predicate.predicates.forEach(function (fpred) {\n                    filterCollection.push({\n                        field: fpred.field,\n                        predicate: 'or',\n                        matchCase: fpred.ignoreCase,\n                        ignoreAccent: fpred.ignoreAccent,\n                        operator: fpred.operator,\n                        value: fpred.value,\n                        type: _this.options.type\n                    });\n                });\n                args.filterCollection = filterCollection.length ? filterCollection :\n                    fColl.filter(function (col) { return col.field = _this.options.field; });\n                _this.options.handler(args);\n            });\n        }\n        else {\n            this.options.handler(args);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderOperatorUI = function (column, table, elementID, predicates, isFirst) {\n        var fieldElement = createElement('tr', { className: 'e-xlfl-fields' });\n        table.appendChild(fieldElement);\n        var xlfloptr = createElement('td', { className: 'e-xlfl-optr' });\n        fieldElement.appendChild(xlfloptr);\n        var optrDiv = createElement('div', { className: 'e-xlfl-optrdiv' });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var optrInput = createElement('input', { id: isComplex ? complexFieldName + elementID : column + elementID });\n        optrDiv.appendChild(optrInput);\n        xlfloptr.appendChild(optrDiv);\n        var optr = this.options.type + 'Operator';\n        var dropDatasource = this.customFilterOperators[optr];\n        this.optrData = dropDatasource;\n        var selectedValue = this.dropSelectedVal(column, predicates, isFirst);\n        //Trailing three dots are sliced.\n        var menuText = '';\n        if (this.menuItem) {\n            menuText = this.menuItem.text.slice(0, -3);\n            if (menuText !== this.getLocalizedLabel('CustomFilter')) {\n                selectedValue = isFirst ? menuText : undefined;\n            }\n            if (menuText === this.getLocalizedLabel('Between')) {\n                selectedValue = this.getLocalizedLabel(isFirst ? 'GreaterThanOrEqual' : 'LessThanOrEqual');\n            }\n        }\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            text: selectedValue,\n            open: this.dropDownOpen.bind(this),\n            enableRtl: this.parent.enableRtl\n        });\n        this.dropOptr.appendTo(optrInput);\n        var operator = this.getSelectedValue(selectedValue);\n        return { fieldElement: fieldElement, operator: operator };\n    };\n    ExcelFilter.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    ExcelFilter.prototype.getSelectedValue = function (text) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('text', 'equal', text));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].value : '';\n    };\n    ExcelFilter.prototype.dropSelectedVal = function (col, predicates, isFirst) {\n        var operator;\n        if (predicates && predicates.length > 0) {\n            operator = predicates.length === 2 ?\n                (isFirst ? predicates[0].operator : predicates[1].operator) :\n                (isFirst ? predicates[0].operator : undefined);\n        }\n        else {\n            operator = isFirst ? 'equal' : undefined;\n        }\n        return this.getSelectedText(operator);\n    };\n    ExcelFilter.prototype.getSelectedText = function (operator) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', operator));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n    };\n    ExcelFilter.prototype.renderFilterUI = function (column, dlgConetntEle) {\n        var predicates = this.existingPredicate[column];\n        var table = createElement('table', { className: 'e-xlfl-table' });\n        dlgConetntEle.appendChild(table);\n        var colGroup = createElement('colGroup');\n        colGroup.innerHTML = '<col style=\"width: 50%\"></col><col style=\"width: 50%\"></col>';\n        table.appendChild(colGroup);\n        //Renders first dropdown\n        /* tslint:disable-next-line:max-line-length */\n        var optr = this.renderOperatorUI(column, table, '-xlfl-frstoptr', predicates, true);\n        //Renders first value\n        this.renderFlValueUI(column, optr, '-xlfl-frstvalue', predicates, true);\n        var predicate = createElement('tr', { className: 'e-xlfl-predicate' });\n        table.appendChild(predicate);\n        //Renders first radion button\n        this.renderRadioButton(column, predicate, predicates);\n        //Renders second dropdown\n        optr = this.renderOperatorUI(column, table, '-xlfl-secndoptr', predicates, false);\n        //Renders second text box\n        this.renderFlValueUI(column, optr, '-xlfl-secndvalue', predicates, false);\n    };\n    ExcelFilter.prototype.renderRadioButton = function (column, tr, predicates) {\n        var td = createElement('td', { className: 'e-xlfl-radio', attrs: { 'colSpan': '2' } });\n        tr.appendChild(td);\n        var radioDiv = createElement('div', { className: 'e-xlfl-radiodiv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        /* tslint:disable-next-line:max-line-length */\n        var frstpredicate = createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-frstpredicate' : column + 'e-xlfl-frstpredicate', attrs: { 'type': 'radio' } });\n        /* tslint:disable-next-line:max-line-length */\n        var secndpredicate = createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-secndpredicate' : column + 'e-xlfl-secndpredicate', attrs: { 'type': 'radio' } });\n        //appends into div\n        radioDiv.appendChild(frstpredicate);\n        radioDiv.appendChild(secndpredicate);\n        td.appendChild(radioDiv);\n        if (this.options.type === 'string') {\n            this.renderMatchCase(column, tr, td, '-xlflmtcase', predicates);\n        }\n        // Initialize AND RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var andRadio = new RadioButton({ label: this.getLocalizedLabel('AND'), name: 'default', cssClass: 'e-xlfl-radio-and', checked: true, enableRtl: this.parent.enableRtl });\n        // Initialize OR RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var orRadio = new RadioButton({ label: this.getLocalizedLabel('OR'), name: 'default', cssClass: 'e-xlfl-radio-or', enableRtl: this.parent.enableRtl });\n        var flValue = predicates && predicates.length === 2 ? predicates[1].predicate : 'and';\n        if (flValue === 'and') {\n            andRadio.checked = true;\n            orRadio.checked = false;\n        }\n        else {\n            orRadio.checked = true;\n            andRadio.checked = false;\n        }\n        // Render initialized RadioButton.\n        andRadio.appendTo(frstpredicate);\n        orRadio.appendTo(secndpredicate);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelFilter.prototype.removeObjects = function (elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var obj = elements_1[_i];\n            if (obj && !obj.isDestroyed) {\n                obj.destroy();\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderFlValueUI = function (column, optr, elementId, predicates, isFirst) {\n        var value = createElement('td', { className: 'e-xlfl-value' });\n        optr.fieldElement.appendChild(value);\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var valueDiv = createElement('div', { className: 'e-xlfl-valuediv' });\n        var valueInput = createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId });\n        valueDiv.appendChild(valueInput);\n        value.appendChild(valueDiv);\n        var flValue;\n        var predicate;\n        if (predicates && predicates.length > 0) {\n            predicate = predicates.length === 2 ?\n                (isFirst ? predicates[0] : predicates[1]) :\n                (isFirst ? predicates[0] : undefined);\n            flValue = (predicate && predicate.operator === optr.operator) ? predicate.value : undefined;\n        }\n        var types = {\n            'string': this.renderAutoComplete.bind(this),\n            'number': this.renderNumericTextBox.bind(this),\n            'date': this.renderDate.bind(this),\n            'datetime': this.renderDate.bind(this)\n        };\n        types[this.options.type](this.options, column, valueInput, flValue, this.parent.enableRtl);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderMatchCase = function (column, tr, matchCase, elementId, predicates) {\n        /* tslint:disable-next-line:max-line-length */\n        var matchCaseDiv = createElement('div', { className: 'e-xlfl-matchcasediv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var matchCaseInput = createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId, attrs: { 'type': 'checkbox' } });\n        matchCaseDiv.appendChild(matchCaseInput);\n        matchCase.appendChild(matchCaseDiv);\n        var flValue = predicates && predicates.length > 0 ?\n            (predicates && predicates.length === 2 ? predicates[1].matchCase : predicates[0].matchCase) :\n            false;\n        // Initialize Match Case check box.\n        var checkbox = new CheckBox({ label: this.getLocalizedLabel('MatchCase'),\n            enableRtl: this.parent.enableRtl, checked: flValue });\n        // Render initialized CheckBox.\n        checkbox.appendTo(matchCaseInput);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderDate = function (options, column, inputValue, fValue, isRtl) {\n        var intl = new Internationalization();\n        var format = intl.getDatePattern({ type: 'date', skeleton: options.format }, false);\n        this.datePicker = new DatePicker({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n        });\n        this.datePicker.appendTo(inputValue);\n    };\n    ExcelFilter.prototype.completeAction = function (e) {\n        e.result = distinctStringValues(e.result);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderNumericTextBox = function (options, column, inputValue, fValue, isRtl) {\n        this.numericTxtObj = new NumericTextBox({\n            format: options.format,\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            value: fValue\n        });\n        this.numericTxtObj.appendTo(inputValue);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderAutoComplete = function (options, column, inputValue, fValue, isRtl) {\n        var _this = this;\n        var colObj = this.parent.getColumnByField(column);\n        var isForeignColumn = colObj.isForeignColumn();\n        var dataSource = isForeignColumn ? colObj.dataSource : options.dataSource;\n        var fields = { value: isForeignColumn ? colObj.foreignKeyValue : column };\n        var actObj = new AutoComplete({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            query: this.parent.query.clone(),\n            sortOrder: 'Ascending',\n            locale: this.parent.locale,\n            autofill: true,\n            focus: function () {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n                var columnvalue = isComplex ? complexFieldName : column;\n                actObj.filterType = _this.dlgDiv.querySelector('#' + columnvalue +\n                    (inputValue.id === (columnvalue + '-xlfl-frstvalue') ?\n                        '-xlfl-frstoptr' :\n                        '-xlfl-secndoptr')).ej2_instances[0].value;\n                actObj.ignoreCase = options.type === 'string' ?\n                    !_this.dlgDiv.querySelector('#' + columnvalue + '-xlflmtcase').ej2_instances[0].checked :\n                    true;\n                actObj.filterType = !isNullOrUndefined(actObj.filterType) ? actObj.filterType :\n                    'equal';\n            },\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            actionComplete: function (e) {\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObject) {\n                        return mapObject[actObj.fields.value];\n                    }).indexOf(obj[_this.actObj.fields.value]) === index;\n                });\n            },\n            value: fValue\n        });\n        actObj.appendTo(inputValue);\n        this.actObj = actObj;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExcelFilter.prototype.getModuleName = function () {\n        return 'excelFilter';\n    };\n    return ExcelFilter;\n}(CheckBoxFilter));\nexport { ExcelFilter };\n","import { EventHandler, isNullOrUndefined, extend, closest, getValue } from '@syncfusion/ej2-base';\nimport { getActualPropFromColl, isActionPrevent, getColumnByForeignKeyValue } from '../base/util';\nimport { remove, createElement, matches } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport { FilterCellRenderer } from '../renderer/filter-cell-renderer';\nimport { parentsUntil } from '../base/util';\nimport { FilterMenuRenderer } from '../renderer/filter-menu-renderer';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { ExcelFilter } from '../actions/excel-filter';\n/**\n *\n * The `Filter` module is used to handle filtering action.\n */\nvar Filter = /** @class */ (function () {\n    /**\n     * Constructor for Grid filtering module\n     * @hidden\n     */\n    function Filter(parent, filterSettings, serviceLocator) {\n        this.predicate = 'and';\n        this.contentRefresh = true;\n        this.values = {};\n        this.nextFlMenuOpen = '';\n        this.type = { 'Menu': FilterMenuRenderer, 'CheckBox': CheckBoxFilter, 'Excel': ExcelFilter };\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.fltrDlgDetails = { field: '', isOpen: false };\n        this.actualPredicate = {};\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * To render filter bar when filtering enabled.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.render = function (e) {\n        if (DataUtil.getObject('args.isFrozen', e)) {\n            return;\n        }\n        var gObj = this.parent;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.getLocalizedCustomOperators();\n        if (this.parent.filterSettings.type === 'FilterBar') {\n            if (gObj.columns.length) {\n                var fltrElem = this.parent.element.querySelector('.e-filterbar');\n                if (fltrElem) {\n                    remove(fltrElem);\n                }\n                var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Filter, gObj);\n                var row = void 0;\n                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n                cellrender.addCellRenderer(CellType.Filter, new FilterCellRenderer(this.parent, this.serviceLocator));\n                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n                rowRenderer.element = createElement('tr', { className: 'e-filterbar' });\n                row = this.generateRow();\n                row.data = this.values;\n                this.parent.getHeaderContent().querySelector('thead').appendChild(rowRenderer.element);\n                this.element = rowRenderer.render(row, gObj.getColumns(), null, null, rowRenderer.element);\n                var detail = this.element.querySelector('.e-detailheadercell');\n                if (detail) {\n                    detail.className = 'e-filterbarcell e-mastercell';\n                }\n                var gCells = [].slice.call(this.element.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n                this.wireEvents();\n                this.parent.notify(events.freezeRender, { case: 'filter' });\n            }\n        }\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.filterModule) {\n            this.filterModule.destroy();\n        }\n        this.filterSettings.columns = [];\n        this.updateFilterMsg();\n        this.removeEventListener();\n        this.unWireEvents();\n        if (this.element) {\n            remove(this.element);\n            var filterBarElement = this.parent.getHeaderContent().querySelector('.e-filterbar');\n            if (this.parent.getFrozenColumns() && filterBarElement) {\n                remove(filterBarElement);\n            }\n        }\n    };\n    Filter.prototype.generateRow = function (index) {\n        var options = {};\n        var row = new Row(options);\n        row.cells = this.generateCells();\n        return row;\n    };\n    Filter.prototype.generateCells = function () {\n        //TODO: generate dummy column for group, detail, stacked row here for filtering;\n        var cells = [];\n        if (this.parent.allowGrouping) {\n            for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n                cells.push(this.generateCell({}, CellType.HeaderIndent));\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cells.push(this.generateCell({}, CellType.DetailHeader));\n        }\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var dummy = _a[_i];\n            cells.push(this.generateCell(dummy));\n        }\n        return cells;\n    };\n    Filter.prototype.generateCell = function (column, cellType) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'rowId': '',\n            'column': column,\n            'cellType': cellType ? cellType : CellType.Filter,\n            'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n        };\n        return new Cell(opt);\n    };\n    /**\n     * To update filterSettings when applying filter.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.updateModel = function () {\n        var col = this.parent.getColumnByField(this.fieldName);\n        var field = col.isForeignColumn() ? col.foreignKeyValue : this.fieldName;\n        this.currentFilterObject = {\n            field: field, operator: this.operator, value: this.value, predicate: this.predicate,\n            matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n        };\n        var index = this.getFilteredColsIndexByField(col);\n        if (index > -1) {\n            this.filterSettings.columns[index] = this.currentFilterObject;\n        }\n        else {\n            this.filterSettings.columns.push(this.currentFilterObject);\n        }\n        this.filterSettings.columns = this.filterSettings.columns;\n        this.parent.dataBind();\n    };\n    Filter.prototype.getFilteredColsIndexByField = function (col) {\n        var cols = this.filterSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === col.field || (col.isForeignColumn() && cols[i].field === col.foreignKeyValue)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * To trigger action complete event.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column.field,\n            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n        } : {\n            requestType: 'filtering', type: events.actionComplete\n        };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.isRemove = false;\n    };\n    Filter.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n    };\n    Filter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n    };\n    Filter.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    Filter.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.ignoreAccent, col.actualFilterValue, col.actualOperator);\n            }\n            this.updateFilterMsg();\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.filterComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.headerRefreshed, this.render, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n        this.parent.on(events.click, this.filterIconClickHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.removeEventListener = function () {\n        EventHandler.remove(document, 'click', this.clickHandler);\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.filterComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.keyPressed, this.keyUpHandler);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.off(events.headerRefreshed, this.render);\n        this.parent.off(events.filterOpen, this.columnMenuFilter);\n        this.parent.off(events.filterMenuClose, this.filterMenuClose);\n        this.parent.off(events.click, this.filterIconClickHandler);\n    };\n    Filter.prototype.filterMenuClose = function (args) {\n        this.fltrDlgDetails.isOpen = false;\n    };\n    /**\n     * Filters the Grid row by fieldName, filterOperator, and filterValue.\n     * @param  {string} fieldName - Defines the field name of the filter column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship of one filter query with another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, then the filter records\n     * the exact match or <br> filters records that are case insensitive (uppercase and lowercase letters treated the same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        var gObj = this.parent;\n        var filterCell;\n        this.column = gObj.getColumnByField(fieldName);\n        if (this.filterSettings.type === 'FilterBar') {\n            filterCell = gObj.getHeaderContent().querySelector('[id=\\'' + this.column.field + '_filterBarcell\\']');\n        }\n        if (!isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: actualFilterValue, arg8: actualOperator\n            });\n            return;\n        }\n        this.value = filterValue;\n        this.matchCase = matchCase || false;\n        this.ignoreAccent = this.ignoreAccent = !isNullOrUndefined(ignoreAccent) ? ignoreAccent : this.parent.filterSettings.ignoreAccent;\n        this.fieldName = fieldName;\n        this.predicate = predicate || 'and';\n        this.operator = filterOperator;\n        filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n        if (this.column.type === 'number' || this.column.type === 'date') {\n            this.matchCase = true;\n        }\n        gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n        if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n            this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n            this.updateFilterMsg();\n            return;\n        }\n        if (this.filterSettings.type === 'FilterBar' && filterCell.value !== filterValue) {\n            filterCell.value = filterValue;\n        }\n        if (!isNullOrUndefined(this.column.format)) {\n            this.applyColumnFormat(filterValue);\n        }\n        else {\n            this.values[this.column.field] = filterValue; //this line should be above updateModel\n        }\n        this.actualPredicate[this.fieldName] = [{\n                field: this.fieldName,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: this.operator,\n                value: this.value,\n                type: this.column.type\n            }];\n        this.addFilteredClass(this.fieldName);\n        if (this.checkAlreadyColFiltered(this.column.field)) {\n            return;\n        }\n        this.updateModel();\n    };\n    Filter.prototype.applyColumnFormat = function (filterValue) {\n        var getFlvalue = (this.column.type === 'date' || this.column.type === 'datetime') ?\n            new Date(filterValue) : parseFloat(filterValue);\n        this.values[this.column.field] = this.setFormatForFlColumn(getFlvalue, this.column);\n    };\n    Filter.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    if (this.contentRefresh) {\n                        this.parent.notify(events.modelChanged, {\n                            currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n                                this.column.field : undefined,\n                            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n                        });\n                        this.refreshFilterSettings();\n                        this.updateFilterMsg();\n                        this.updateFilter();\n                    }\n                    break;\n                case 'showFilterBarStatus':\n                    if (e.properties[prop]) {\n                        this.updateFilterMsg();\n                    }\n                    else if (this.parent.allowPaging) {\n                        this.parent.updateExternalMessage('');\n                    }\n                    break;\n                case 'type':\n                    this.parent.refreshHeader();\n                    this.refreshFilterSettings();\n                    break;\n            }\n        }\n    };\n    Filter.prototype.refreshFilterSettings = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            for (var i = 0; i < this.filterSettings.columns.length; i++) {\n                this.column = this.parent.getColumnByField(this.filterSettings.columns[i].field) ||\n                    getColumnByForeignKeyValue(this.filterSettings.columns[i].field, this.parent.getForeignKeyColumns());\n                var filterValue = this.filterSettings.columns[i].value;\n                filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n                if (!isNullOrUndefined(this.column.format)) {\n                    this.applyColumnFormat(filterValue);\n                }\n                else {\n                    var key = this.filterSettings.columns[i].field;\n                    this.values[key] = this.filterSettings.columns[i].value;\n                }\n                var filterElement = this.getFilterBarElement(this.filterSettings.columns[i].field);\n                if (filterElement) {\n                    filterElement.value = this.filterSettings.columns[i].value;\n                }\n            }\n            if (this.filterSettings.columns.length === 0) {\n                var col = this.parent.getColumns();\n                for (var i = 0; i < col.length; i++) {\n                    var filterElement = this.getFilterBarElement(col[i].field);\n                    if (filterElement && filterElement.value !== '') {\n                        filterElement.value = '';\n                        delete this.values[col[i].field];\n                    }\n                }\n            }\n        }\n    };\n    Filter.prototype.getFilterBarElement = function (col) {\n        var selector = '[id=\\'' + col + '_filterBarcell\\']';\n        var filterElement;\n        if (selector && !isNullOrUndefined(this.element)) {\n            filterElement = this.element.querySelector(selector);\n        }\n        return filterElement;\n    };\n    /**\n     * @private\n     */\n    Filter.prototype.refreshFilter = function () {\n        this.refreshFilterSettings();\n        this.updateFilterMsg();\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Filter.prototype.clearFiltering = function () {\n        var cols = getActualPropFromColl(this.filterSettings.columns);\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeFilteredColsByField(cols[i].field, false);\n        }\n        if (this.parent.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n            var fltrElement = [].slice.call(this.parent.element.querySelectorAll('.e-filtered'));\n            for (var i = 0, len = fltrElement.length; i < len; i++) {\n                fltrElement[0].removeAttribute('aria-filtered');\n                fltrElement[0].classList.remove('e-filtered');\n            }\n        }\n        this.isRemove = true;\n        this.filterStatusMsg = '';\n        this.updateFilterMsg();\n    };\n    Filter.prototype.checkAlreadyColFiltered = function (field) {\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            if (col.field === field && col.value === this.value &&\n                col.operator === this.operator && col.predicate === this.predicate) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Filter.prototype.columnMenuFilter = function (args) {\n        this.column = args.col;\n        var ele = closest(args.target, '#' + args.id);\n        if (args.isClose && !ele) {\n            this.filterModule.closeDialog();\n        }\n        else if (ele) {\n            this.filterDialogOpen(this.column, args.target);\n        }\n    };\n    Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n        var gObj = this.parent;\n        if (this.filterModule) {\n            this.filterModule.closeDialog();\n        }\n        this.filterModule = new this.type[col.filter.type || this.parent.filterSettings.type](this.parent, gObj.filterSettings, this.serviceLocator, this.customOperators, this);\n        var dataSource = col.filter.dataSource || gObj.getDataModule().dataManager;\n        this.filterModule.openDialog({\n            type: col.type, field: col.field, displayName: col.headerText,\n            dataSource: dataSource, format: col.format,\n            filteredColumns: gObj.filterSettings.columns, target: target,\n            sortedColumns: gObj.sortSettings.columns, formatFn: col.getFormatter(),\n            parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n            hideSearchbox: isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n            handler: this.filterHandler.bind(this), localizedStrings: gObj.getLocaleConstants(),\n            position: { X: left, Y: top }, column: col, foreignKeyValue: col.foreignKeyValue,\n            actualPredicate: this.actualPredicate, localeObj: this.parent.localeObj\n        });\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        var fCell;\n        var cols = this.filterSettings.columns;\n        if (isActionPrevent(this.parent)) {\n            var args = { instance: this, handler: this.removeFilteredColsByField, arg1: field, arg2: isClearFilterBar };\n            this.parent.notify(events.preventBatch, args);\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var column = this.parent.getColumnByField(field) ||\n                getColumnByForeignKeyValue(field, this.parent.getForeignKeyColumns());\n            if (cols[i].field === field || cols[i].field === column.foreignKeyValue) {\n                if (this.filterSettings.type === 'FilterBar' && !isClearFilterBar) {\n                    var selector = '[id=\\'' + cols[i].field + '_filterBarcell\\']';\n                    fCell = this.parent.getHeaderContent().querySelector(selector);\n                    fCell.value = '';\n                    delete this.values[field];\n                }\n                cols.splice(i, 1);\n                var fltrElement = this.parent.getColumnHeaderByField(column.field);\n                fltrElement.removeAttribute('aria-filtered');\n                if (this.filterSettings.type !== 'FilterBar') {\n                    var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                    fltrElement.querySelector(iconClass).classList.remove('e-filtered');\n                }\n                this.isRemove = true;\n                if (this.actualPredicate[field]) {\n                    delete this.actualPredicate[field];\n                }\n                if (this.values[field]) {\n                    delete this.values[field];\n                }\n                this.parent.notify(events.modelChanged, {\n                    requestType: 'filtering', type: events.actionBegin, currentFilterObject: {\n                        field: column.field, operator: this.operator, value: this.value, predicate: this.predicate,\n                        matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n                    }, currentFilterColumn: column\n                });\n                break;\n            }\n        }\n        this.updateFilterMsg();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.keyUpHandler = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (target && matches(target, '.e-filterbar input')) {\n            var closeHeaderEle = closest(target, 'th.e-filterbarcell');\n            this.column = gObj.getColumnByUid(closeHeaderEle.getAttribute('e-mappinguid'));\n            if (!this.column) {\n                return;\n            }\n            if ((this.filterSettings.mode === 'Immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n                this.value = target.value.trim();\n                this.processFilter(e);\n            }\n        }\n    };\n    Filter.prototype.updateCrossIcon = function (element) {\n        if (element.value.length) {\n            element.nextElementSibling.classList.remove('e-hide');\n        }\n    };\n    Filter.prototype.updateFilterMsg = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            var gObj = this.parent;\n            var getFormatFlValue = void 0;\n            var columns = this.filterSettings.columns;\n            var formater = this.serviceLocator.getService('valueFormatter');\n            var column = void 0;\n            var value = void 0;\n            if (!this.filterSettings.showFilterBarStatus) {\n                return;\n            }\n            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n                this.filterStatusMsg = '';\n                for (var index = 0; index < columns.length; index++) {\n                    column = gObj.getColumnByField(columns[index].field) ||\n                        getColumnByForeignKeyValue(columns[index].field, this.parent.getForeignKeyColumns());\n                    if (index) {\n                        this.filterStatusMsg += ' && ';\n                    }\n                    if (!isNullOrUndefined(column.format)) {\n                        var flValue = (column.type === 'date' || column.type === 'datetime') ?\n                            new Date(this.values[column.field]) :\n                            this.values[column.field];\n                        if (!(column.type === 'date' || column.type === 'datetime')) {\n                            var formater_1 = this.serviceLocator.getService('valueFormatter');\n                            getFormatFlValue = formater_1.toView(flValue, column.getParser()).toString();\n                        }\n                        else {\n                            getFormatFlValue = this.setFormatForFlColumn(flValue, column);\n                        }\n                        this.filterStatusMsg += column.headerText + ': ' + getFormatFlValue;\n                    }\n                    else {\n                        this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n                    }\n                }\n            }\n            if (gObj.allowPaging) {\n                gObj.updateExternalMessage(this.filterStatusMsg);\n            }\n            //TODO: virtual paging       \n            this.filterStatusMsg = '';\n        }\n    };\n    Filter.prototype.setFormatForFlColumn = function (value, column) {\n        var formater = this.serviceLocator.getService('valueFormatter');\n        return formater.toView(value, column.getFormatter()).toString();\n    };\n    Filter.prototype.checkForSkipInput = function (column, value) {\n        var isSkip;\n        var skipInput;\n        if (column.type === 'number') {\n            skipInput = ['=', ' ', '!'];\n            if (DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n                isSkip = true;\n            }\n        }\n        else if (column.type === 'string') {\n            skipInput = ['>', '<', '=', '!'];\n            for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n                var val = value_1[_i];\n                if (skipInput.indexOf(val) > -1) {\n                    isSkip = true;\n                }\n            }\n        }\n        return isSkip;\n    };\n    Filter.prototype.processFilter = function (e) {\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    Filter.prototype.startTimer = function (e) {\n        var _this = this;\n        this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n    };\n    Filter.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Filter.prototype.onTimerTick = function () {\n        var selector = '[id=\\'' + this.column.field + '_filterBarcell\\']';\n        var filterElement = this.element.querySelector(selector);\n        if (!filterElement && this.parent.getFrozenColumns()) {\n            filterElement = this.parent.getHeaderContent().querySelector(selector);\n        }\n        var filterValue;\n        this.stopTimer();\n        if (!isNullOrUndefined(this.column.filterBarTemplate)) {\n            var templateRead = this.column.filterBarTemplate.read;\n            if (typeof templateRead === 'string') {\n                templateRead = getValue(templateRead, window);\n            }\n            if (!isNullOrUndefined(templateRead)) {\n                this.value = templateRead.call(this, filterElement);\n            }\n        }\n        else {\n            filterValue = JSON.parse(JSON.stringify(filterElement.value));\n        }\n        if (isNullOrUndefined(this.value) || this.value === '') {\n            this.removeFilteredColsByField(this.column.field);\n            return;\n        }\n        this.validateFilterValue(this.value);\n        this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase, this.ignoreAccent);\n        filterElement.value = filterValue;\n        this.updateFilterMsg();\n    };\n    Filter.prototype.validateFilterValue = function (value) {\n        var gObj = this.parent;\n        var skipInput;\n        var index;\n        this.matchCase = true;\n        switch (this.column.type) {\n            case 'number':\n                this.operator = this.filterOperators.equal;\n                skipInput = ['>', '<', '=', '!'];\n                for (var i = 0; i < value.length; i++) {\n                    if (skipInput.indexOf(value[i]) > -1) {\n                        index = i;\n                        break;\n                    }\n                }\n                this.getOperator(value.substring(index));\n                if (index !== 0) {\n                    this.value = value.substring(0, index);\n                }\n                if (this.value !== '' && value.length >= 1) {\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                }\n                if (isNaN(this.value)) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                this.operator = this.filterOperators.equal;\n                if (this.value !== '' && !(this.value instanceof Date)) {\n                    this.getOperator(value);\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                    if (isNullOrUndefined(this.value)) {\n                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                    }\n                }\n                break;\n            case 'string':\n                this.matchCase = false;\n                if (value.charAt(0) === '*') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(value.length - 1) === '%') {\n                    this.value = this.value.slice(0, -1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(0) === '%') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.endsWith;\n                }\n                else {\n                    this.operator = this.filterOperators.startsWith;\n                }\n                break;\n            case 'boolean':\n                if (value.toLowerCase() === 'true' || value === '1') {\n                    this.value = true;\n                }\n                else if (value.toLowerCase() === 'false' || value === '0') {\n                    this.value = false;\n                }\n                else if (value.length) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                this.operator = this.filterOperators.equal;\n                break;\n            default:\n                this.operator = this.filterOperators.equal;\n        }\n    };\n    Filter.prototype.getOperator = function (value) {\n        var singleOp = value.charAt(0);\n        var multipleOp = value.slice(0, 2);\n        var operators = extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, DataUtil.operatorSymbols);\n        if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n            this.operator = operators[singleOp];\n            this.value = value.substring(1);\n            if (!this.operator) {\n                this.operator = operators[multipleOp];\n                this.value = value.substring(2);\n            }\n        }\n        if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n            if (this.value.charAt(0) === '=') {\n                this.operator = this.operator + 'orequal';\n                this.value = this.value.substring(1);\n            }\n        }\n    };\n    Filter.prototype.columnPositionChanged = function (e) {\n        if (this.parent.filterSettings.type !== 'FilterBar') {\n            return;\n        }\n    };\n    Filter.prototype.getLocalizedCustomOperators = function () {\n        var numOptr = [\n            { value: 'equal', text: this.l10n.getConstant('Equal') },\n            { value: 'greaterthan', text: this.l10n.getConstant('GreaterThan') },\n            { value: 'greaterthanorequal', text: this.l10n.getConstant('GreaterThanOrEqual') },\n            { value: 'lessthan', text: this.l10n.getConstant('LessThan') },\n            { value: 'lessthanorequal', text: this.l10n.getConstant('LessThanOrEqual') },\n            { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n        ];\n        this.customOperators = {\n            stringOperator: [\n                { value: 'startswith', text: this.l10n.getConstant('StartsWith') },\n                { value: 'endswith', text: this.l10n.getConstant('EndsWith') },\n                { value: 'contains', text: this.l10n.getConstant('Contains') },\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ],\n            numberOperator: numOptr,\n            dateOperator: numOptr,\n            datetimeOperator: numOptr,\n            booleanOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ]\n        };\n    };\n    ;\n    Filter.prototype.filterIconClickHandler = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel')) {\n            var gObj = this.parent;\n            var col = gObj.getColumnByUid(parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n            var gClient = gObj.element.getBoundingClientRect();\n            var fClient = target.getBoundingClientRect();\n            this.column = col;\n            if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n                return;\n            }\n            if (this.filterModule) {\n                this.filterModule.closeDialog();\n            }\n            this.fltrDlgDetails = { field: col.field, isOpen: true };\n            this.filterDialogOpen(this.column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n        }\n    };\n    Filter.prototype.clickHandler = function (e) {\n        if (this.filterSettings.mode === 'Immediate' || this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel') {\n            var gObj = this.parent;\n            var target = e.target;\n            var datepickerEle = target.classList.contains('e-day'); // due to datepicker popup cause\n            if (parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n                return;\n            }\n            else if (this.filterModule &&\n                (!parentsUntil(target, 'e-popup-wrapper')\n                    && (!closest(target, '.e-filter-item.e-menu-item'))\n                    && (!parentsUntil(target, 'e-popup'))) && !datepickerEle) {\n                this.filterModule.closeDialog(target);\n            }\n            if (this.filterSettings.mode === 'Immediate' && target.classList.contains('e-clear-icon')) {\n                var targetText = target.previousElementSibling;\n                this.removeFilteredColsByField(targetText.id.slice(0, -14)); //Length of _filterBarcell = 14\n            }\n        }\n    };\n    Filter.prototype.filterHandler = function (args) {\n        var filterIconElement;\n        this.actualPredicate[args.field] = args.actualPredicate;\n        var dataManager = new DataManager(this.filterSettings.columns);\n        var query = new Query().where('field', this.filterOperators.equal, args.field);\n        var result = dataManager.executeLocal(query);\n        for (var i = 0; i < result.length; i++) {\n            var index = -1;\n            for (var j = 0; j < this.filterSettings.columns.length; j++) {\n                if (result[i].field === this.filterSettings.columns[j].field) {\n                    index = j;\n                    break;\n                }\n            }\n            if (index !== -1) {\n                this.filterSettings.columns.splice(index, 1);\n            }\n        }\n        if (this.values[args.field]) {\n            delete this.values[args.field];\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n        if (args.action === 'filtering') {\n            this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n            if (this.filterSettings.columns.length && filterIconElement) {\n                filterIconElement.classList.add('e-filtered');\n            }\n        }\n        else {\n            if (filterIconElement) {\n                filterIconElement.classList.remove('e-filtered');\n            }\n            this.parent.renderModule.refresh(); //hot-fix onpropertychanged not working for object { array }           \n        }\n        this.parent.dataBind();\n    };\n    Filter.prototype.updateFilter = function () {\n        var cols = this.filterSettings.columns;\n        for (var i = 0; i < cols.length; i++) {\n            this.column = this.parent.getColumnByField(cols[i].field) ||\n                getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns());\n            var fieldName = cols[i].field;\n            if (!this.parent.getColumnByField(cols[i].field)) {\n                fieldName = getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns()).field;\n            }\n            /* tslint:disable-next-line:max-line-length */\n            this.refreshFilterIcon(fieldName, cols[i].operator, cols[i].value, cols[i].type, cols[i].predicate, cols[i].matchCase, cols[i].ignoreAccent);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    Filter.prototype.refreshFilterIcon = function (fieldName, operator, value, type, predicate, matchCase, ignoreAccent) {\n        this.actualPredicate[fieldName] = [{\n                field: fieldName,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: operator,\n                value: value,\n                type: type\n            }];\n        this.addFilteredClass(fieldName);\n    };\n    Filter.prototype.addFilteredClass = function (fieldName) {\n        var filterIconElement;\n        filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-icon-filter');\n        if (filterIconElement) {\n            filterIconElement.classList.add('e-filtered');\n        }\n    };\n    return Filter;\n}());\nexport { Filter };\n","import { EventHandler, createElement, detach, formatUnit, Browser, closest } from '@syncfusion/ej2-base';\nimport { Column } from '../models/column';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, parentsUntil } from '../base/util';\nexport var resizeClassList = {\n    root: 'e-rhandler',\n    suppress: 'e-rsuppress',\n    icon: 'e-ricon',\n    helper: 'e-rhelper',\n    header: 'th.e-headercell',\n    cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n * @hidden\n * @private\n */\nvar Resize = /** @class */ (function () {\n    /**\n     * Constructor for the Grid resize module\n     * @hidden\n     */\n    function Resize(parent) {\n        this.tapped = false;\n        this.isDblClk = true;\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * Resize by field names.\n     * @param  {string|string[]} fName - Defines the field name.\n     * @return {void}\n     */\n    Resize.prototype.autoFitColumns = function (fName) {\n        var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n            this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n        this.findColumn(columnName);\n    };\n    Resize.prototype.resizeColumn = function (fName, index, id) {\n        var gObj = this.parent;\n        var tWidth = 0;\n        var headerTable;\n        var contentTable;\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var indentWidth = 0;\n        var uid = id ? id : this.parent.getUidByColumnField(fName);\n        var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n        var headerTextClone;\n        var contentTextClone;\n        var frzCols = gObj.getFrozenColumns();\n        if (frzCols) {\n            if (index < frzCols) {\n                headerTable = gObj.getHeaderTable();\n                contentTable = gObj.getContentTable();\n                headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n            }\n            else {\n                headerTable = gObj.getHeaderContent().querySelector('.e-movableheader').children[0];\n                contentTable = gObj.getContent().querySelector('.e-movablecontent').children[0];\n                headerTextClone = headerTable.querySelectorAll('th')[columnIndex - frzCols].cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - frzCols) + 1) + \")\");\n            }\n        }\n        else {\n            headerTable = gObj.getHeaderTable();\n            contentTable = gObj.getContentTable();\n            headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n            contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n        }\n        var indentWidthClone = headerTable.querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n        if (indentWidthClone.length > 0) {\n            for (var i = 0; i < indentWidthClone.length; i++) {\n                indentWidth += indentWidthClone[i].offsetWidth;\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            indentWidth += contentTable.querySelector('.e-detailrowcollapse').offsetWidth;\n        }\n        var headerText = [headerTextClone];\n        var contentText = [];\n        for (var i = 0; i < contentTextClone.length; i++) {\n            contentText[i] = contentTextClone[i].cloneNode(true);\n        }\n        var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n        var wContent = this.createTable(contentTable, contentText, contentDivTag);\n        var columnbyindex = gObj.getColumns()[index];\n        var result;\n        var width = (wHeader > wContent) ? columnbyindex.width = formatUnit(wHeader) : columnbyindex.width = formatUnit(wContent);\n        this.widthService.setColumnWidth(gObj.getColumns()[index]);\n        result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n        if (result === false) {\n            gObj.getColumns().forEach(function (element) {\n                if (element.visible) {\n                    tWidth = tWidth + parseInt(element.width, 10);\n                }\n            });\n        }\n        var calcTableWidth = tWidth + indentWidth;\n        if (tWidth > 0 && !gObj.getFrozenColumns()) {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.widthService.setColumnWidth(new Column({ width: '30px' }));\n            }\n            headerTable.style.width = formatUnit(calcTableWidth);\n            contentTable.style.width = formatUnit(calcTableWidth);\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = (gObj.getContent().scrollWidth);\n        if (contentwidth > tableWidth) {\n            headerTable.classList.add('e-tableborder');\n            contentTable.classList.add('e-tableborder');\n        }\n        else {\n            headerTable.classList.remove('e-tableborder');\n            contentTable.classList.remove('e-tableborder');\n        }\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    Resize.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.widthService = null;\n        this.unwireEvents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    Resize.prototype.findColumn = function (fName) {\n        var _this = this;\n        fName.forEach(function (element) {\n            var fieldName = element;\n            var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n            if (_this.parent.getColumns()[columnIndex].visible === true) {\n                _this.resizeColumn(fieldName, columnIndex);\n            }\n        });\n    };\n    /**\n     * To create table for autofit\n     * @hidden\n     */\n    Resize.prototype.createTable = function (table, text, tag) {\n        var myTableDiv = createElement('div');\n        myTableDiv.className = this.parent.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = createElement('div');\n        mySubDiv.className = tag;\n        var myTable = createElement('table');\n        myTable.className = table.className;\n        myTable.classList.add('e-resizetable');\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var myTr = createElement('tr');\n        text.forEach(function (element) {\n            var tr = myTr.cloneNode();\n            tr.className = table.querySelector('tr').className;\n            tr.appendChild(element);\n            myTable.appendChild(tr);\n        });\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        var offsetWidthValue = myTable.getBoundingClientRect().width;\n        document.body.removeChild(myTableDiv);\n        return Math.ceil(offsetWidthValue);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.refreshHeight, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.refreshHeight);\n        this.parent.off(events.initialEnd, this.wireEvents);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.render = function () {\n        this.unwireEvents();\n        this.wireEvents();\n        this.setHandlerHeight();\n    };\n    Resize.prototype.refreshHeight = function () {\n        this.getResizeHandlers().forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n        });\n    };\n    Resize.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), Browser.touchStartEvent, this.resizeStart, this);\n        EventHandler.add(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit, this);\n    };\n    Resize.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), Browser.touchStartEvent, this.resizeStart);\n        EventHandler.remove(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit);\n    };\n    Resize.prototype.getResizeHandlers = function () {\n        return this.parent.getFrozenColumns() ?\n            [].slice.call(this.parent.getHeaderContent().querySelectorAll('.' + resizeClassList.root))\n            : [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.root));\n    };\n    Resize.prototype.setHandlerHeight = function () {\n        [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.suppress)).forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n        });\n    };\n    Resize.prototype.callAutoFit = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            var col = this.getTargetColumn(e);\n            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n            var header = closest(e.target, resizeClassList.header);\n            header.classList.add('e-resized');\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            if (!this.helper) {\n                if (this.getScrollBarWidth() === 0) {\n                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n                        var col = _a[_i];\n                        this.widthService.setColumnWidth(col);\n                    }\n                    this.widthService.setWidthToTable();\n                }\n                this.element = e.target;\n                this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n                this.appendHelper();\n                this.column = this.getTargetColumn(e);\n                this.pageX = this.getPointX(e);\n                if (this.parent.enableRtl) {\n                    this.minMove = parseInt(this.column.width.toString(), 10)\n                        - (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0);\n                }\n                else {\n                    this.minMove = (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0)\n                        - parseInt(this.column.width.toString(), 10);\n                }\n                this.minMove += this.pageX;\n            }\n            if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n                this.helper.classList.add(resizeClassList.icon);\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = {\n                    e: e,\n                    column: this.column\n                };\n                this.parent.trigger(events.resizeStart, args);\n                if (args.cancel) {\n                    this.cancelResizeAction();\n                    return;\n                }\n                EventHandler.add(document, Browser.touchEndEvent, this.resizeEnd, this);\n                EventHandler.add(this.parent.element, Browser.touchMoveEvent, this.resizing, this);\n                this.updateCursor('add');\n            }\n        }\n    };\n    Resize.prototype.cancelResizeAction = function (removeEvents) {\n        if (removeEvents) {\n            EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n            EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n            this.updateCursor('remove');\n        }\n        if (Browser.isDevice) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n        }\n        detach(this.helper);\n        this.refresh();\n    };\n    Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n        if (minWidth && width < minWidth) {\n            return minWidth;\n        }\n        else if ((maxWidth && width > maxWidth)) {\n            return maxWidth;\n        }\n        else {\n            return width;\n        }\n    };\n    Resize.prototype.resizing = function (e) {\n        if (this.parent.allowTextWrap) {\n            if (this.parent.getFrozenColumns()) {\n                if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                    this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                }\n            }\n            this.element.style.height = this.element.parentElement.offsetHeight + 'px';\n            this.setHelperHeight();\n        }\n        var pageX = this.getPointX(e);\n        var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var colData = {\n            width: parseInt(this.widthService.getWidth(this.column).toString(), 10) + mousemove,\n            minWidth: this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : null,\n            maxWidth: this.column.maxWidth ? parseInt(this.column.maxWidth.toString(), 10) : null\n        };\n        var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n        if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n            width = this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0;\n            this.pageX = pageX = this.minMove;\n        }\n        if (width !== parseInt(this.column.width.toString(), 10)) {\n            this.pageX = pageX;\n            this.column.width = formatUnit(width);\n            var args = {\n                e: e,\n                column: this.column\n            };\n            this.parent.trigger(events.onResize, args);\n            if (args.cancel) {\n                this.cancelResizeAction(true);\n                return;\n            }\n            this.widthService.setColumnWidth(this.column, null, 'resize');\n            this.updateHelper();\n        }\n        this.isDblClk = false;\n    };\n    Resize.prototype.resizeEnd = function (e) {\n        if (!this.helper || this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n        this.updateCursor('remove');\n        detach(this.helper);\n        var args = {\n            e: e,\n            column: this.column\n        };\n        this.parent.trigger(events.resizeStop, args);\n        closest(this.element, '.e-headercell').classList.add('e-resized');\n        if (parentsUntil(this.element, 'e-frozenheader')) {\n            this.isFrozenColResized = true;\n        }\n        else {\n            this.isFrozenColResized = false;\n        }\n        if (this.parent.getFrozenColumns()) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n        this.refresh();\n        this.doubleTapEvent(e);\n        this.isDblClk = true;\n    };\n    Resize.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Resize.prototype.refreshColumnWidth = function () {\n        var columns = this.parent.getColumns();\n        for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderTable().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                var column = columns_1[_b];\n                if (ele.querySelector('[e-mappinguid]') &&\n                    ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n                    column.width = ele.getBoundingClientRect().width;\n                    break;\n                }\n            }\n        }\n        return columns;\n    };\n    Resize.prototype.getTargetColumn = function (e) {\n        var cell = closest(e.target, resizeClassList.header);\n        var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.updateCursor = function (action) {\n        var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n        headerRows.push(this.parent.element);\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            row.classList[action](resizeClassList.cursor);\n        }\n    };\n    Resize.prototype.refresh = function () {\n        this.column = null;\n        this.pageX = null;\n        this.element = null;\n        this.helper = null;\n    };\n    Resize.prototype.appendHelper = function () {\n        this.helper = createElement('div', {\n            className: resizeClassList.helper\n        });\n        this.parent.element.appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Resize.prototype.setHelperHeight = function () {\n        var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n        var rect = closest(this.element, resizeClassList.header);\n        var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (rect.parentElement.children.length !== frzCols) {\n                tr.splice(0, tr.length / 2);\n            }\n            else {\n                tr.splice(tr.length / 2, tr.length / 2);\n            }\n        }\n        for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n            height += tr[i].offsetHeight;\n        }\n        var pos = this.calcPos(rect);\n        pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n        this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n    };\n    Resize.prototype.getScrollBarWidth = function (height) {\n        var ele = this.parent.getFrozenColumns() ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstChild;\n        return (ele.scrollHeight > ele.clientHeight && height) ||\n            ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n    };\n    Resize.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            detach(this.helper);\n            this.refresh();\n        }\n    };\n    Resize.prototype.updateHelper = function () {\n        var rect = closest(this.element, resizeClassList.header);\n        var left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n        var borderWidth = 2; // to maintain the helper inside of grid element.\n        if (left > this.parentElementWidth) {\n            left = this.parentElementWidth - borderWidth;\n        }\n        if (this.parent.getFrozenColumns()) {\n            var table = closest(rect, '.e-table');\n            var fLeft = table.offsetLeft;\n            if (left < fLeft) {\n                left = fLeft;\n            }\n        }\n        this.helper.style.left = left + 'px';\n    };\n    Resize.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Resize.prototype.doubleTapEvent = function (e) {\n        if (this.getUserAgent() && this.isDblClk) {\n            if (!this.tapped) {\n                this.tapped = setTimeout(this.timeoutHandler(), 300);\n            }\n            else {\n                clearTimeout(this.tapped);\n                this.callAutoFit(e);\n                this.tapped = null;\n            }\n        }\n    };\n    Resize.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    Resize.prototype.timeoutHandler = function () {\n        this.tapped = null;\n    };\n    return Resize;\n}());\nexport { Resize };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, createElement, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * The `Reorder` module is used for reordering columns.\n */\nvar Reorder = /** @class */ (function () {\n    /**\n     * Constructor for the Grid reorder module\n     * @hidden\n     */\n    function Reorder(parent) {\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.reorderComplete, this.onActionComplete, this);\n        this.parent.on(events.columnDrag, this.drag, this);\n        this.parent.on(events.columnDragStart, this.dragStart, this);\n        this.parent.on(events.columnDragStop, this.dragStop, this);\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n    }\n    Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n        return (srcElem.parentElement.isEqualNode(destElem.parentElement) || (this.parent.getFrozenColumns()\n            && Array.prototype.indexOf.call(closestElement(srcElem, 'thead').children, srcElem.parentElement)\n                === Array.prototype.indexOf.call(closestElement(destElem, 'thead').children, destElem.parentElement)))\n            && this.targetParentContainerIndex(srcElem, destElem) > -1;\n    };\n    Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n        var isFound;\n        var headers = this.getHeaderCells();\n        var header;\n        while (!isFound && headers.length > 0) {\n            header = headers.pop();\n            isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n        }\n        return isFound;\n    };\n    Reorder.prototype.findColParent = function (col, cols, parent) {\n        parent = parent;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (col === cols[i]) {\n                return true;\n            }\n            else if (cols[i].columns) {\n                var cnt = parent.length;\n                parent.push(cols[i]);\n                if (!this.findColParent(col, cols[i].columns, parent)) {\n                    parent.splice(cnt, parent.length - cnt);\n                }\n                else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Reorder.prototype.getColumnsModel = function (cols) {\n        var columnModel = [];\n        var subCols = [];\n        for (var i = 0, len = cols.length; i < len; i++) {\n            columnModel.push(cols[i]);\n            if (cols[i].columns) {\n                subCols = subCols.concat(cols[i].columns);\n            }\n        }\n        if (subCols.length) {\n            columnModel = columnModel.concat(this.getColumnsModel(subCols));\n        }\n        return columnModel;\n    };\n    Reorder.prototype.headerDrop = function (e) {\n        var gObj = this.parent;\n        var dropElement = this.element.querySelector('.e-headercelldiv') || this.element.querySelector('.e-stackedheadercelldiv');\n        var uId = dropElement.getAttribute('e-mappinguid');\n        var column = gObj.getColumnByUid(uId);\n        if (!closestElement(e.target, 'th') || (!isNullOrUndefined(column) && column.allowReordering === false)) {\n            return;\n        }\n        var destElem = closestElement(e.target, '.e-headercell');\n        var destElemDiv = destElem.querySelector('.e-headercelldiv') || destElem.querySelector('.e-stackedheadercelldiv');\n        var destElemUid = destElemDiv.getAttribute('e-mappinguid');\n        var destColumn = gObj.getColumnByUid(destElemUid);\n        if (isNullOrUndefined(destColumn) || destColumn.allowReordering === false) {\n            return;\n        }\n        if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n            if (this.parent.enableColumnVirtualization) {\n                var columns = this.parent.columns;\n                var sourceUid_1 = this.element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var col = this.parent.getColumns(true).filter(function (col) { return col.uid === sourceUid_1; });\n                var colMatchIndex_1 = null;\n                var column_1 = col[0];\n                var destUid_1 = destElem.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var bool = columns.some(function (col, index) {\n                    if (col.uid === destUid_1) {\n                        colMatchIndex_1 = index;\n                        return col.uid === destUid_1;\n                    }\n                    return false;\n                });\n                if (!isNullOrUndefined(colMatchIndex_1)) {\n                    this.moveColumns(colMatchIndex_1, column_1);\n                }\n            }\n            else {\n                var headers = this.getHeaderCells();\n                var oldIdx = getElementIndex(this.element, headers);\n                var columns = this.getColumnsModel(this.parent.columns);\n                var column_2 = columns[oldIdx];\n                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n                this.moveColumns(newIndex, column_2);\n            }\n        }\n    };\n    Reorder.prototype.isActionPrevent = function (gObj) {\n        return isActionPrevent(gObj);\n    };\n    Reorder.prototype.moveColumns = function (destIndex, column) {\n        var gObj = this.parent;\n        if (this.isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n            return;\n        }\n        var parent = this.getColParent(column, this.parent.columns);\n        var cols = parent ? parent.columns : this.parent.columns;\n        var srcIdx = inArray(column, cols);\n        if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n            return;\n        }\n        cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n        gObj.getColumns(true);\n        gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n        gObj.notify(events.modelChanged, {\n            type: events.actionBegin, requestType: 'reorder'\n        });\n    };\n    Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n        var headers = this.getHeaderCells();\n        var cols = this.parent.columns;\n        var flatColumns = this.getColumnsModel(cols);\n        var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n        cols = parent ? parent.columns : cols;\n        return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n    };\n    Reorder.prototype.getHeaderCells = function () {\n        if (this.parent.getFrozenColumns()) {\n            var fTh = void 0;\n            var mTh = void 0;\n            var fHeaders = [];\n            var fRows = [].slice.call(this.parent.getHeaderTable().querySelectorAll('.e-columnheader'));\n            var mRows = [].slice.call(this.parent.getHeaderContent()\n                .querySelector('.e-movableheader').querySelectorAll('.e-columnheader'));\n            for (var i = 0; i < fRows.length; i++) {\n                fTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                mTh = [].slice.call(mRows[i].getElementsByClassName('e-headercell'));\n                fHeaders = fHeaders.concat(fTh);\n                for (var j = 0; j < mTh.length; j++) {\n                    if (!fTh.length || j !== 0 || fTh[fTh.length - 1].innerText !== mTh[0].innerText) {\n                        fHeaders.push(mTh[j]);\n                    }\n                }\n            }\n            return fHeaders;\n        }\n        else {\n            return [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n        }\n    };\n    Reorder.prototype.getColParent = function (column, columns) {\n        var parents = [];\n        this.findColParent(column, columns, parents);\n        return parents[parents.length - 1];\n    };\n    /**\n     * Changes the position of the Grid columns by field names.\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n        var fColumn = this.parent.getColumnByField(fromFName);\n        var toColumn = this.parent.getColumnByField(toFName);\n        if ((!isNullOrUndefined(fColumn) && !fColumn.allowReordering) || (!isNullOrUndefined(toColumn) && !toColumn.allowReordering)) {\n            return;\n        }\n        var column = this.parent.getColumnByField(toFName);\n        var parent = this.getColParent(column, this.parent.columns);\n        var columns = parent ? parent.columns : this.parent.columns;\n        var destIndex = inArray(column, columns);\n        if (destIndex > -1) {\n            this.moveColumns(destIndex, this.parent.getColumnByField(fromFName));\n        }\n    };\n    Reorder.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.createReorderElement();\n        }\n    };\n    Reorder.prototype.createReorderElement = function () {\n        var header = this.parent.element.querySelector('.e-headercontent');\n        this.upArrow = header.appendChild(createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n        this.downArrow = header.appendChild(createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        remove(this.upArrow);\n        remove(this.downArrow);\n        this.parent.off(events.headerDrop, this.headerDrop);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.reorderComplete, this.onActionComplete);\n        this.parent.off(events.columnDrag, this.drag);\n        this.parent.off(events.columnDragStart, this.dragStart);\n        this.parent.off(events.columnDragStop, this.dragStop);\n        this.parent.off(events.headerRefreshed, this.createReorderElement);\n        //call ejdrag and drop destroy\n    };\n    Reorder.prototype.drag = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (e.column.allowReordering === false) {\n            return;\n        }\n        var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n        var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n        var isLeft = this.x > getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n        this.setDisplay('none');\n        this.stopTimer();\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        this.updateScrollPostion(e.event);\n        if (closest && !closest.isEqualNode(this.element)) {\n            target = closest;\n            //consider stacked, detail header cell \n            if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n                this.updateArrowPosition(target, isLeft);\n                classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n            }\n            else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        }\n        gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n    };\n    Reorder.prototype.updateScrollPostion = function (e) {\n        var _this = this;\n        var frzCols = this.parent.getFrozenColumns();\n        var x = getPosition(e).x;\n        var cliRect = this.parent.element.getBoundingClientRect();\n        var cliRectBaseLeft = frzCols ? this.parent.element.querySelector('.e-movableheader')\n            .getBoundingClientRect().left : cliRect.left;\n        var cliRectBaseRight = cliRect.right;\n        var scrollElem = frzCols ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstElementChild;\n        if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n        }\n        else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n        }\n    };\n    Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n        var scrollLeft = scrollElem.scrollLeft;\n        scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n        if (scrollLeft !== scrollElem.scrollLeft) {\n            this.setDisplay('none');\n        }\n    };\n    Reorder.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n        var cliRect = target.getBoundingClientRect();\n        var cliRectBase = this.parent.element.getBoundingClientRect();\n        if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n            return;\n        }\n        this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n        this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n        this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n        this.setDisplay('');\n    };\n    Reorder.prototype.dragStart = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        this.element = target.classList.contains('e-headercell') ? target :\n            parentsUntil(target, 'e-headercell');\n        if (e.column.allowReordering === false) {\n            return;\n        }\n        this.x = getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n        gObj.trigger(events.columnDragStart, {\n            target: target, draggableType: 'headercell', column: e.column\n        });\n    };\n    Reorder.prototype.dragStop = function (e) {\n        var gObj = this.parent;\n        this.setDisplay('none');\n        this.stopTimer();\n        if (!e.cancel) {\n            gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n        }\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n    };\n    Reorder.prototype.setDisplay = function (display) {\n        this.upArrow.style.display = display;\n        this.downArrow.style.display = display;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Reorder.prototype.getModuleName = function () {\n        return 'reorder';\n    };\n    return Reorder;\n}());\nexport { Reorder };\n","import { Draggable } from '@syncfusion/ej2-base';\nimport { extend } from '@syncfusion/ej2-base';\nimport { remove, createElement, closest as closestElement, classList } from '@syncfusion/ej2-base';\nimport { parentsUntil, removeElement, getPosition } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * Reorder module is used to handle row reordering.\n * @hidden\n */\nvar RowDD = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function RowDD(parent) {\n        var _this = this;\n        //Internal variables    \n        this.selectedRows = [];\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length ||\n                (!e.sender.target.classList.contains('e-selectionbackground') && gObj.selectionSettings.type !== 'Single')) {\n                return false;\n            }\n            var visualElement = createElement('div', {\n                className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n                styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n            });\n            var table = createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n            var tbody = createElement('tbody');\n            if (gObj.selectionSettings.mode === 'Row' && gObj.selectionSettings.type === 'Single') {\n                var index = parseInt(e.sender.target.parentElement.getAttribute('aria-rowindex'), 10);\n                gObj.selectRow(index);\n            }\n            var selectedRows = gObj.getSelectedRows();\n            for (var i = 0, len = selectedRows.length; i < len; i++) {\n                var selectedRow = selectedRows[i].cloneNode(true);\n                removeElement(selectedRow, '.e-indentcell');\n                removeElement(selectedRow, '.e-detailrowcollapse');\n                removeElement(selectedRow, '.e-detailrowexpand');\n                tbody.appendChild(selectedRow);\n            }\n            table.appendChild(tbody);\n            visualElement.appendChild(table);\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length) {\n                return;\n            }\n            gObj.trigger(events.rowDragStart, {\n                rows: gObj.getSelectedRows(),\n                target: e.target, draggableType: 'rows', data: gObj.getSelectedRecords()\n            });\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n                dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n            }\n            _this.isDragStop = false;\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            var target = _this.getElementFromPosition(cloneElement, e.event);\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n            gObj.trigger(events.rowDrag, {\n                rows: gObj.getSelectedRows(),\n                target: target, draggableType: 'rows', data: gObj.getSelectedRecords()\n            });\n            gObj.element.classList.add('e-rowdrag');\n            if (!parentsUntil(target, 'e-gridcontent') ||\n                parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(target, 'e-grid').id) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            var target = _this.getElementFromPosition(e.helper, e.event);\n            gObj.element.classList.remove('e-rowdrag');\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n                dropElem.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n            }\n            gObj.trigger(events.rowDrop, {\n                target: target, draggableType: 'rows',\n                rows: gObj.getSelectedRows(), data: gObj.getSelectedRecords()\n            });\n            if (!parentsUntil(target, 'e-gridcontent')) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeDrag, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.rowDragAndDropComplete, this.onActionComplete, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    RowDD.prototype.initializeDrag = function () {\n        var gObj = this.parent;\n        var column;\n        var drag;\n        drag = new Draggable(gObj.getContent(), {\n            dragTarget: '.e-rowcell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    RowDD.prototype.getElementFromPosition = function (element, event) {\n        var target;\n        var position = getPosition(event);\n        element.style.display = 'none';\n        target = document.elementFromPoint(position.x, position.y);\n        element.style.display = '';\n        return target;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    RowDD.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n    };\n    RowDD.prototype.getTargetIdx = function (targetRow) {\n        return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n    };\n    RowDD.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') !== 'grouping') {\n            var targetRow = closestElement(e.target, 'tr');\n            var srcControl = void 0;\n            var currentIndex = void 0;\n            if (e.droppedElement.parentElement.id !== gObj.element.id) {\n                srcControl = e.droppedElement.parentElement.ej2_instances[0];\n            }\n            else {\n                return;\n            }\n            if (srcControl.element.id !== gObj.element.id && srcControl.rowDropSettings.targetID !== gObj.element.id) {\n                return;\n            }\n            var records = srcControl.getSelectedRecords();\n            var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n            var count = 0;\n            if (isNaN(targetIndex)) {\n                targetIndex = currentIndex = 0;\n            }\n            if (gObj.allowPaging) {\n                targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n            }\n            //Todo: drag and drop mapper & BatchChanges                   \n            gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n            gObj.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n            var selectedRows = srcControl.getSelectedRowIndexes();\n            var skip = srcControl.allowPaging ?\n                (srcControl.pageSettings.currentPage * srcControl.pageSettings.pageSize) - srcControl.pageSettings.pageSize : 0;\n            this.selectedRows = [];\n            for (var i = 0, len = records.length; i < len; i++) {\n                this.selectedRows.push(skip + selectedRows[i]);\n            }\n            srcControl.notify(events.rowsRemoved, { indexes: this.selectedRows, records: records });\n            srcControl.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }\n    };\n    RowDD.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.initializeDrag();\n        }\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    RowDD.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.initializeDrag);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.rowDragAndDropComplete, this.onActionComplete);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        //destory ejdrag and drop\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    RowDD.prototype.getModuleName = function () {\n        return 'rowDragAndDrop';\n    };\n    return RowDD;\n}());\nexport { RowDD };\n","import { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { createElement, closest, remove, classList, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\n/**\n *\n * The `Group` module is used to handle group action.\n */\nvar Group = /** @class */ (function () {\n    /**\n     * Constructor for Grid group module\n     * @hidden\n     */\n    function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n        var _this = this;\n        this.isAppliedGroup = false;\n        this.isAppliedUnGroup = false;\n        this.visualElement = createElement('div', {\n            className: 'e-cloneproperties e-dragclone e-gdclone',\n            styles: 'line-height:23px', attrs: { action: 'grouping' }\n        });\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var element = target.classList.contains('e-groupheadercell') ? target :\n                parentsUntil(target, 'e-groupheadercell');\n            if (!element) {\n                return false;\n            }\n            _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n            _this.visualElement.textContent = element.textContent;\n            _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n            _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n            _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            gObj.element.appendChild(_this.visualElement);\n            return _this.visualElement;\n        };\n        this.dragStart = function () {\n            _this.parent.element.classList.add('e-ungroupdrag');\n        };\n        this.drag = function (e) {\n            var target = e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n            if (!(parentsUntil(target, 'e-gridcontent') || parentsUntil(target, 'e-headercell'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        };\n        this.dragStop = function (e) {\n            _this.parent.element.classList.remove('e-ungroupdrag');\n            if (!(parentsUntil(e.target, 'e-gridcontent') || parentsUntil(e.target, 'e-gridheader'))) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            _this.element.classList.remove('e-hover');\n            remove(e.droppedElement);\n            _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n            _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            _this.groupColumn(column.field);\n        };\n        this.contentRefresh = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.groupSettings = groupSettings;\n        this.serviceLocator = serviceLocator;\n        this.sortedColumns = sortedColumns;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n    }\n    Group.prototype.columnDrag = function (e) {\n        var gObj = this.parent;\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        if (!parentsUntil(e.target, 'e-groupdroparea') &&\n            !(this.parent.allowReordering && parentsUntil(e.target, 'e-headercell'))) {\n            classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n        }\n        e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n    };\n    Group.prototype.columnDragStart = function (e) {\n        if (e.target.classList.contains('e-stackedheadercell')) {\n            return;\n        }\n        var gObj = this.parent;\n        var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n        this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n        var element = e.target.classList.contains('e-headercell') ? e.target : parentsUntil(e.target, 'e-headercell');\n        this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n    };\n    Group.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') === 'grouping') {\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            this.ungroupColumn(column.field);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.groupComplete, this.onActionComplete, this);\n        this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.columnDrag, this.columnDrag, this);\n        this.parent.on(events.columnDragStart, this.columnDragStart, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.onEmpty, this.initialEnd, this);\n        this.parent.on(events.initialEnd, this.render, this);\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.groupComplete, this.onActionComplete);\n        this.parent.off(events.ungroupComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.columnDrag, this.columnDrag);\n        this.parent.off(events.columnDragStart, this.columnDragStart);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.sortComplete, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n    };\n    Group.prototype.initialEnd = function () {\n        var gObj = this.parent;\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.parent.off(events.onEmpty, this.initialEnd);\n        if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.groupColumn(col);\n            }\n            this.contentRefresh = true;\n        }\n    };\n    Group.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if ((!this.groupSettings.columns.length ||\n            ['altDownArrow', 'altUpArrow', 'ctrlDownArrow', 'ctrlUpArrow', 'enter'].indexOf(e.action) === -1)) {\n            return;\n        }\n        e.preventDefault();\n        switch (e.action) {\n            case 'altDownArrow':\n            case 'altUpArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var rows = gObj.getContentTable().querySelector('tbody').children;\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var grpRow = void 0;\n                    for (var i = dataRow.rowIndex; i >= 0; i--) {\n                        if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n                            grpRow = rows[i];\n                            break;\n                        }\n                    }\n                    this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n                        '.e-recordplusexpand' : '.e-recordpluscollapse'));\n                }\n                break;\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'enter':\n                if (this.parent.isEdit || (closest(e.target, '#' + this.parent.element.id + '_searchbar') !== null)) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                var row = element ? element.parentElement.querySelector('[class^=\"e-record\"]') : null;\n                if (!row) {\n                    break;\n                }\n                this.expandCollapseRows(row);\n                break;\n        }\n    };\n    Group.prototype.clickHandler = function (e) {\n        this.expandCollapseRows(e.target);\n        this.applySortFromTarget(e.target);\n        this.unGroupFromTarget(e.target);\n        this.toogleGroupFromHeader(e.target);\n    };\n    Group.prototype.unGroupFromTarget = function (target) {\n        if (target.classList.contains('e-ungroupbutton')) {\n            this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n        }\n    };\n    Group.prototype.toogleGroupFromHeader = function (target) {\n        if (this.groupSettings.showToggleButton) {\n            if (target.classList.contains('e-grptogglebtn')) {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n                else {\n                    this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n            }\n            else {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n                }\n            }\n        }\n    };\n    Group.prototype.applySortFromTarget = function (target) {\n        var gObj = this.parent;\n        var gHeader = closest(target, '.e-groupheadercell');\n        if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n            !target.classList.contains('e-toggleungroup')) {\n            var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n            if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n                gObj.sortColumn(field, 'Descending', true);\n            }\n            else {\n                gObj.sortColumn(field, 'Ascending', true);\n            }\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @return {void}\n     */\n    Group.prototype.expandCollapseRows = function (target) {\n        var trgt = parentsUntil(target, 'e-recordplusexpand') ||\n            parentsUntil(target, 'e-recordpluscollapse');\n        if (trgt) {\n            var cellIdx = trgt.cellIndex;\n            var rowIdx = trgt.parentElement.rowIndex;\n            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n            var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n            var isHide = void 0;\n            var expandElem = void 0;\n            var toExpand = [];\n            var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n            var expand = false;\n            if (trgt.classList.contains('e-recordpluscollapse')) {\n                addClass([trgt], 'e-recordplusexpand');\n                removeClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n                expand = true;\n            }\n            else {\n                isHide = true;\n                removeClass([trgt], 'e-recordplusexpand');\n                addClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n            }\n            this.aria.setExpand(trgt, expand);\n            for (var i = 0, len = rows.length; i < len; i++) {\n                if (rows[i].querySelectorAll('td')[cellIdx] &&\n                    rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n                    if (isHide) {\n                        rows[i].style.display = 'none';\n                    }\n                    else {\n                        if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n                            rows[i].style.display = '';\n                            expandElem = rows[i].querySelector('.e-recordplusexpand');\n                            if (expandElem) {\n                                toExpand.push(expandElem);\n                            }\n                            if (rows[i].classList.contains('e-detailrow')) {\n                                if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n                                    rows[i].style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n            for (var i = 0, len = toExpand.length; i < len; i++) {\n                removeClass([toExpand[i]], 'e-recordplusexpand');\n                addClass([toExpand[i]], 'e-recordpluscollapse');\n                toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                this.expandCollapseRows(toExpand[i]);\n            }\n        }\n    };\n    Group.prototype.expandCollapse = function (isExpand) {\n        var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n        var row;\n        for (var i = 0, len = rowNodes.length; i < len; i++) {\n            if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n                row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n                if (row) {\n                    row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n                    row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n                        'e-icons e-gnextforward e-icon-grightarrow';\n                }\n                if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n                    rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n                    rowNodes[i].style.display = isExpand ? '' : 'none';\n                }\n            }\n            else {\n                rowNodes[i].style.display = isExpand ? '' : 'none';\n            }\n        }\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    /**\n     * The function is used to render grouping\n     * @return {Element}\n     * @hidden\n     */\n    Group.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderGroupDropArea();\n        this.initDragAndDrop();\n        this.refreshToggleBtn();\n    };\n    Group.prototype.renderGroupDropArea = function () {\n        var groupElem = this.parent.element.querySelector('.e-groupdroparea');\n        if (groupElem) {\n            remove(groupElem);\n        }\n        this.element = createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n        this.updateGroupDropArea();\n        this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n        if (!this.groupSettings.showDropArea) {\n            this.element.style.display = 'none';\n        }\n    };\n    Group.prototype.updateGroupDropArea = function (clear) {\n        if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n            var dragLabel = this.l10n.getConstant('GroupDropArea');\n            this.element.innerHTML = dragLabel;\n            this.element.classList.remove('e-grouped');\n        }\n        else {\n            if ((this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && (this.groupSettings.columns.length === 1\n                || !this.isAppliedGroup && !this.isAppliedUnGroup)) || clear) {\n                this.element.innerHTML = '';\n            }\n            this.element.classList.add('e-grouped');\n        }\n    };\n    Group.prototype.initDragAndDrop = function () {\n        this.initializeGHeaderDrop();\n        this.initializeGHeaderDrag();\n    };\n    Group.prototype.initializeGHeaderDrag = function () {\n        var drag = new Draggable(this.element, {\n            dragTarget: '.e-groupheadercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    Group.prototype.initializeGHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(this.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Group.prototype.groupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false ||\n            (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = gObj.groupSettings.showGroupedColumn;\n        this.colName = columnName;\n        this.isAppliedGroup = true;\n        if (this.contentRefresh) {\n            this.updateModel();\n        }\n        else {\n            this.addColToGroupDrop(columnName);\n        }\n        this.updateGroupDropArea();\n        this.isAppliedGroup = false;\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Group.prototype.ungroupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = true;\n        this.colName = column.field;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.splice(columns.indexOf(this.colName), 1);\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n                if (columnName === gObj.sortSettings.columns[i].field) {\n                    gObj.sortSettings.columns.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this.groupSettings.columns = columns;\n        if (gObj.allowGrouping) {\n            this.isAppliedUnGroup = true;\n            this.parent.dataBind();\n        }\n    };\n    /**\n     * The function used to update groupSettings\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.updateModel = function () {\n        var gObj = this.parent;\n        var i = 0;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.push(this.colName);\n        this.groupSettings.columns = columns;\n        this.groupAddSortingQuery(this.colName);\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.onActionComplete = function (e) {\n        var gObj = this.parent;\n        if (e.requestType === 'grouping') {\n            this.addColToGroupDrop(this.colName);\n        }\n        else {\n            this.removeColFromGroupDrop(this.colName);\n        }\n        var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n            columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n        } : { requestType: 'ungrouping', type: events.actionComplete };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.colName = null;\n    };\n    Group.prototype.groupAddSortingQuery = function (colName) {\n        var i = 0;\n        while (i < this.parent.sortSettings.columns.length) {\n            if (this.parent.sortSettings.columns[i].field === colName) {\n                break;\n            }\n            i++;\n        }\n        if (this.parent.sortSettings.columns.length === i) {\n            this.parent.sortSettings.columns.push({ field: colName, direction: 'Ascending' });\n        }\n        else if (!this.parent.allowSorting) {\n            this.parent.sortSettings.columns[i].direction = 'Ascending';\n        }\n    };\n    Group.prototype.addColToGroupDrop = function (field) {\n        var gObj = this.parent;\n        var direction = 'Ascending';\n        var groupedColumn = createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n        var childDiv = createElement('div', { attrs: { 'ej-mappingname': field } });\n        var column = this.parent.getColumnByField(field);\n        if (isNullOrUndefined(column)) {\n            return;\n        }\n        //Todo headerTemplateID for grouped column, disableHtmlEncode                          \n        var headerCell = gObj.getColumnHeaderByUid(column.uid);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            if (column.headerTemplate.indexOf('#') !== -1) {\n                childDiv.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n            }\n            else {\n                childDiv.innerHTML = column.headerTemplate;\n            }\n            childDiv.firstElementChild.classList.add('e-grouptext');\n        }\n        else {\n            childDiv.appendChild(createElement('span', {\n                className: 'e-grouptext', innerHTML: column.headerText,\n                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n            }));\n        }\n        if (this.groupSettings.showToggleButton) {\n            childDiv.appendChild(createElement('span', {\n                className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n                attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n            }));\n        }\n        if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n            direction = headerCell.querySelector('.e-ascending') ? 'Ascending' : 'Descending';\n        }\n        childDiv.appendChild(createElement('span', {\n            className: 'e-groupsort e-icons ' +\n                ('e-' + direction.toLowerCase() + ' e-icon-' + direction.toLowerCase()), innerHTML: '&nbsp;',\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        childDiv.appendChild(createElement('span', {\n            className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n            attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n            styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n        }));\n        groupedColumn.appendChild(childDiv);\n        this.element.appendChild(groupedColumn);\n        //Todo:  rtl \n    };\n    Group.prototype.refreshToggleBtn = function (isRemove) {\n        if (this.groupSettings.showToggleButton) {\n            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n            for (var i = 0, len = headers.length; i < len; i++) {\n                if (!((headers[i].classList.contains('e-emptycell')) || (headers[i].classList.contains('e-headerchkcelldiv')))) {\n                    var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n                    if (!this.parent.showColumnMenu || (this.parent.showColumnMenu && !column.showColumnMenu)) {\n                        if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n                            remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n                        }\n                        if (!isRemove) {\n                            headers[i].appendChild(createElement('span', {\n                                className: 'e-grptogglebtn e-icons ' +\n                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n                            }));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Group.prototype.removeColFromGroupDrop = function (field) {\n        if (!isNullOrUndefined(this.getGHeaderCell(field))) {\n            remove(this.getGHeaderCell(field));\n            this.updateGroupDropArea();\n        }\n        this.isAppliedUnGroup = false;\n    };\n    Group.prototype.onPropertyChanged = function (e) {\n        var _this = this;\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'columns':\n                    var args = void 0;\n                    if (this_1.contentRefresh) {\n                        if (!this_1.isAppliedUnGroup) {\n                            if (!this_1.isAppliedGroup) {\n                                this_1.updateGroupDropArea(true);\n                                for (var i = 0; i < this_1.groupSettings.columns.length; i++) {\n                                    this_1.colName = this_1.groupSettings.columns[i];\n                                    var col = this_1.parent.getColumnByField(this_1.colName);\n                                    col.visible = this_1.parent.groupSettings.showGroupedColumn;\n                                    this_1.groupAddSortingQuery(this_1.colName);\n                                    if (i < this_1.groupSettings.columns.length - 1) {\n                                        this_1.addColToGroupDrop(this_1.groupSettings.columns[i]);\n                                    }\n                                }\n                            }\n                            args = { columnName: this_1.colName, requestType: e.properties[prop].length ? 'grouping' : 'ungrouping',\n                                type: events.actionBegin };\n                        }\n                        else {\n                            args = { requestType: 'ungrouping', type: events.actionBegin };\n                        }\n                        if (!this_1.groupSettings.showGroupedColumn) {\n                            e.oldProperties[prop].forEach(function (column) {\n                                if (e.properties[prop].indexOf(column) === -1) {\n                                    _this.parent.getColumnByField(column).visible = true;\n                                }\n                            });\n                        }\n                        this_1.parent.notify(events.modelChanged, args);\n                    }\n                    break;\n                case 'showDropArea':\n                    this_1.updateGroupDropArea();\n                    this_1.groupSettings.showDropArea ? this_1.element.style.display = '' : this_1.element.style.display = 'none';\n                    break;\n                case 'showGroupedColumn':\n                    this_1.updateGroupedColumn(this_1.groupSettings.showGroupedColumn);\n                    this_1.parent.notify(events.modelChanged, { requestType: 'refresh' });\n                    break;\n                case 'showUngroupButton':\n                    this_1.updateButtonVisibility(this_1.groupSettings.showUngroupButton, 'e-ungroupbutton');\n                    break;\n                case 'showToggleButton':\n                    this_1.updateButtonVisibility(this_1.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n                    this_1.parent.refreshHeader();\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    Group.prototype.updateGroupedColumn = function (isVisible) {\n        for (var i = 0; i < this.groupSettings.columns.length; i++) {\n            this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n        }\n    };\n    Group.prototype.updateButtonVisibility = function (isVisible, className) {\n        var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n        for (var i = 0; i < gHeader.length; i++) {\n            gHeader[i].style.display = isVisible ? '' : 'none';\n        }\n    };\n    Group.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (!this.parent.isDestroyed) {\n            this.clearGrouping();\n        }\n        this.removeEventListener();\n        this.refreshToggleBtn(true);\n        remove(this.element);\n        //call ejdrag and drop destroy\n    };\n    /**\n     * Clears all the grouped columns of the Grid.\n     * @return {void}\n     */\n    Group.prototype.clearGrouping = function () {\n        var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        this.contentRefresh = false;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.ungroupColumn(cols[i]);\n        }\n        this.contentRefresh = true;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Group.prototype.getModuleName = function () {\n        return 'group';\n    };\n    Group.prototype.refreshSortIcons = function (e) {\n        var gObj = this.parent;\n        var header;\n        var cols = gObj.sortSettings.columns;\n        var gCols = gObj.groupSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        this.refreshToggleBtn();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n                this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n                classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n                if (cols.length > 1) {\n                    header.querySelector('.e-headercelldiv').appendChild(createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n                }\n            }\n            else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n                if (cols[i].direction === 'Ascending') {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n                }\n                else {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n                }\n            }\n        }\n        for (var i = 0, len = gCols.length; i < len; i++) {\n            if (fieldNames.indexOf(gCols[i]) === -1) {\n                continue;\n            }\n            gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n        }\n    };\n    Group.prototype.getGHeaderCell = function (field) {\n        if (this.element && this.element.querySelector('[ej-mappingname=\"' + field + '\"]')) {\n            return this.element.querySelector('[ej-mappingname=\"' + field + '\"]').parentElement;\n        }\n        return null;\n    };\n    return Group;\n}());\nexport { Group };\n","import { createElement, closest, classList } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */ (function () {\n    /**\n     * Constructor for the Grid detail template module\n     * @hidden\n     */\n    function DetailRow(parent, locator) {\n        //Internal variables\n        this.aria = new AriaService();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.focus = locator.getService('focus');\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    }\n    DetailRow.prototype.clickHandler = function (e) {\n        this.toogleExpandcollapse(closest(e.target, 'td'));\n    };\n    DetailRow.prototype.toogleExpandcollapse = function (target) {\n        var gObj = this.parent;\n        var parent = 'parentDetails';\n        if (target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) {\n            var tr = target.parentElement;\n            var uid_1 = tr.getAttribute('data-uid');\n            var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n            if (target.classList.contains('e-detailrowcollapse')) {\n                var key = 'records';\n                var currentViewData = gObj.allowGrouping && gObj.groupSettings.columns.length ?\n                    gObj.currentViewData[key] : gObj.currentViewData;\n                var data = currentViewData[tr.getAttribute('aria-rowindex')];\n                if (this.isDetailRow(nextRow)) {\n                    nextRow.style.display = '';\n                }\n                else if (gObj.getDetailTemplate() || gObj.childGrid) {\n                    var detailRow = createElement('tr', { className: 'e-detailrow' });\n                    var detailCell = createElement('td', { className: 'e-detailcell' });\n                    detailCell.setAttribute('colspan', this.parent.getVisibleColumns().length.toString());\n                    var row = new Row({\n                        isDataRow: true,\n                        isExpand: true,\n                        cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n                    });\n                    for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n                        detailRow.appendChild(createElement('td', { className: 'e-indentcell' }));\n                        row.cells.unshift(new Cell({ cellType: CellType.Indent }));\n                    }\n                    detailRow.appendChild(createElement('td', { className: 'e-detailindentcell' }));\n                    detailRow.appendChild(detailCell);\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                    if (gObj.detailTemplate) {\n                        appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate'));\n                    }\n                    else {\n                        gObj.childGrid[parent] = {\n                            parentID: gObj.element.id,\n                            parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n                            parentKeyField: gObj.childGrid.queryString,\n                            parentKeyFieldValue: data[gObj.childGrid.queryString],\n                            parentRowData: data\n                        };\n                        var grid = new Grid(gObj.childGrid);\n                        var modules = grid.getInjectedModules();\n                        var injectedModues = gObj.getInjectedModules();\n                        if (!modules || modules.length !== injectedModues.length) {\n                            grid.setInjectedModules(injectedModues);\n                        }\n                        var gridElem = createElement('div', {\n                            id: 'child' + parents(tr, 'e-grid').length +\n                                '_grid' + tr.rowIndex + getUid('')\n                        });\n                        detailCell.appendChild(gridElem);\n                        grid.appendTo(gridElem);\n                    }\n                    detailRow.appendChild(detailCell);\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                    var idx_1;\n                    this.parent.getRowsObject().some(function (r, rIndex) { idx_1 = rIndex; return r.uid === uid_1; });\n                    gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n                    this.parent.getRowsObject().splice(idx_1 + 1, 0, row);\n                    gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data });\n                    gObj.notify(events.detailDataBound, { rows: this.parent.getRowsObject() });\n                }\n                classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n                classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n                this.parent.getRowsObject()[tr.rowIndex].isExpand = true;\n                this.aria.setExpand(target, true);\n            }\n            else {\n                if (this.isDetailRow(nextRow)) {\n                    nextRow.style.display = 'none';\n                }\n                classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n                classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n                this.parent.getRowsObject()[tr.rowIndex].isExpand = false;\n                this.aria.setExpand(target, false);\n            }\n        }\n    };\n    DetailRow.prototype.isDetailRow = function (row) {\n        return row && row.classList.contains('e-detailrow');\n    };\n    DetailRow.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n    };\n    DetailRow.prototype.getTDfromIndex = function (index, className) {\n        var tr = this.parent.getDataRows()[index];\n        if (tr && tr.querySelector(className)) {\n            return tr.querySelector(className);\n        }\n        return null;\n    };\n    /**\n     * Expands a detail row with the given target.\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @return {void}\n     */\n    DetailRow.prototype.expand = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n        }\n        if (target && target.classList.contains('e-detailrowcollapse')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @return {void}\n     */\n    DetailRow.prototype.collapse = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowexpand');\n        }\n        if (target && target.classList.contains('e-detailrowexpand')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Expands all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    DetailRow.prototype.expandCollapse = function (isExpand) {\n        var td;\n        var rows = this.parent.getDataRows();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n            isExpand ? this.expand(td) : this.collapse(td);\n        }\n    };\n    DetailRow.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'altUpArrow':\n            case 'altDownArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n                    e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n                }\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                if (!e.target.classList.contains('e-detailrowcollapse') &&\n                    !e.target.classList.contains('e-detailrowexpand')) {\n                    break;\n                }\n                this.toogleExpandcollapse(element);\n                break;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n","import { EventHandler, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement, remove } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { templateCompiler, appendChildren } from '../base/util';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `Toolbar` module is used to handle ToolBar actions.\n * @hidden\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.predefinedItems = {};\n        this.items = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print', 'Search',\n            'ColumnChooser', 'PdfExport', 'ExcelExport', 'CsvExport', 'WordExport'];\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    Toolbar.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        var preItems = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print',\n            'PdfExport', 'ExcelExport', 'WordExport', 'CsvExport'];\n        for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n            var item = preItems_1[_i];\n            var itemStr = item.toLowerCase();\n            var localeName = itemStr[0].toUpperCase() + itemStr.slice(1);\n            this.predefinedItems[item] = {\n                id: this.gridID + '_' + itemStr, prefixIcon: 'e-' + itemStr,\n                text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n            };\n        }\n        this.predefinedItems.Search = {\n            id: this.gridID + '_search',\n            template: '<div class=\"e-input-group e-search\" role=\"search\">\\\n            <input id=\"' + this.gridID + '_searchbar\" class=\"e-input\" name=\"input\" type=\"search\" \\\n            placeholder= \\\"' + this.l10n.getConstant('Search') + '\\\"/>\\\n            <span id=\"' + this.gridID + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n            tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n            </div>',\n            tooltipText: this.l10n.getConstant('Search'), align: 'Right', cssClass: 'e-search-wrapper'\n        };\n        this.predefinedItems.ColumnChooser = {\n            id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n            text: this.l10n.getConstant('Columnchooser'), tooltipText: this.l10n.getConstant('Columnchooser'), align: 'Right',\n        };\n        this.createToolbar();\n    };\n    /**\n     * Gets the toolbar of the Grid.\n     * @return {Element}\n     * @hidden\n     */\n    Toolbar.prototype.getToolbar = function () {\n        return this.toolbar.element;\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.toolbar && !this.toolbar.isDestroyed) {\n            if (!this.toolbar.element) {\n                this.parent.destroyTemplate(['toolbarTemplate']);\n            }\n            else {\n                this.toolbar.destroy();\n            }\n            this.unWireEvent();\n            this.removeEventListener();\n            remove(this.element);\n        }\n    };\n    Toolbar.prototype.createToolbar = function () {\n        var items = this.getItems();\n        this.toolbar = new tool({\n            items: items,\n            clicked: this.toolbarClickHandler.bind(this),\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl\n        });\n        var viewStr = 'viewContainerRef';\n        var registerTemp = 'registeredTemplate';\n        if (this.parent[viewStr]) {\n            this.toolbar[registerTemp] = {};\n            this.toolbar[viewStr] = this.parent[viewStr];\n        }\n        this.element = createElement('div', { id: this.gridID + '_toolbarItems' });\n        if (this.parent.toolbarTemplate) {\n            if (typeof (this.parent.toolbarTemplate) === 'string') {\n                this.toolbar.appendTo(this.parent.toolbarTemplate);\n                this.element = this.toolbar.element;\n            }\n            else {\n                appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n            }\n        }\n        else {\n            this.toolbar.appendTo(this.element);\n        }\n        this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n        this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n        this.wireEvent();\n        this.refreshToolbarItems();\n        if (this.parent.searchSettings) {\n            this.updateSearchBox();\n        }\n    };\n    Toolbar.prototype.refreshToolbarItems = function (args) {\n        var gObj = this.parent;\n        var enableItems = [];\n        var disableItems = [];\n        var edit = gObj.editSettings;\n        var hasData = gObj.currentViewData && gObj.currentViewData.length;\n        edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n        edit.allowEditing && hasData ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n        edit.allowDeleting && hasData ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n        if (gObj.editSettings.mode === 'Batch') {\n            if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n                enableItems.push(this.gridID + '_update');\n                enableItems.push(this.gridID + '_cancel');\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        else {\n            if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n                enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n                disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        this.enableItems(enableItems, true);\n        this.enableItems(disableItems, false);\n    };\n    Toolbar.prototype.getItems = function () {\n        var items = [];\n        var toolbarItems = this.parent.toolbar || [];\n        if (typeof (this.parent.toolbar) === 'string') {\n            return [];\n        }\n        for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n            var item = toolbarItems_1[_i];\n            switch (typeof item) {\n                case 'number':\n                    items.push(this.getItemObject(this.items[item]));\n                    break;\n                case 'string':\n                    items.push(this.getItemObject(item));\n                    break;\n                default:\n                    items.push(this.getItem(item));\n            }\n        }\n        return items;\n    };\n    Toolbar.prototype.getItem = function (itemObject) {\n        var item = this.predefinedItems[itemObject.text];\n        return item ? extend(item, item, itemObject) : itemObject;\n    };\n    Toolbar.prototype.getItemObject = function (itemName) {\n        return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n    };\n    /**\n     * Enables or disables ToolBar items.\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @return {void}\n     * @hidden\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            var element = this.element.querySelector('#' + item);\n            if (element) {\n                this.toolbar.enableItems(element.parentElement, isEnable);\n            }\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (args) {\n        var gObj = this.parent;\n        var gID = this.gridID;\n        extend(args, { cancel: false });\n        gObj.trigger(events.toolbarClick, args);\n        if (args.cancel) {\n            return;\n        }\n        switch (!isNullOrUndefined(args.item) && args.item.id) {\n            case gID + '_print':\n                gObj.print();\n                break;\n            case gID + '_edit':\n                gObj.startEdit();\n                break;\n            case gID + '_update':\n                gObj.endEdit();\n                break;\n            case gID + '_cancel':\n                gObj.closeEdit();\n                break;\n            case gID + '_add':\n                gObj.addRecord();\n                break;\n            case gID + '_delete':\n                gObj.deleteRecord();\n                break;\n            case gID + '_search':\n                if (args.originalEvent.target.id === gID + '_searchbutton') {\n                    this.search();\n                }\n                break;\n            case gID + '_columnchooser':\n                var tarElement = this.parent.element.querySelector('.e-ccdiv');\n                var y = tarElement.getBoundingClientRect().top;\n                var x = tarElement.getBoundingClientRect().left;\n                var targetEle = args.originalEvent.target;\n                y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n                gObj.createColumnchooser(x, y, targetEle);\n                break;\n        }\n    };\n    Toolbar.prototype.modelChanged = function (e) {\n        if (e.module === 'edit') {\n            this.refreshToolbarItems();\n        }\n    };\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n            return;\n        }\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.keyUpHandler = function (e) {\n        if (e.keyCode === 13) {\n            this.search();\n        }\n    };\n    Toolbar.prototype.search = function () {\n        this.parent.search(this.searchElement.value);\n    };\n    Toolbar.prototype.updateSearchBox = function () {\n        if (this.searchElement) {\n            this.searchElement.value = this.parent.searchSettings.key;\n        }\n    };\n    Toolbar.prototype.wireEvent = function () {\n        if (this.searchElement) {\n            this.searchBoxObj = new SearchBox(this.searchElement);\n            EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n            this.searchBoxObj.wireEvent();\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        if (this.searchElement) {\n            EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n            this.searchBoxObj.unWireEvent();\n        }\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n        this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n        this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n        this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n        this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.onPropertyChanged);\n        this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n        this.parent.off(events.modelChanged, this.refreshToolbarItems);\n        this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n        this.parent.off(events.inBoundModelChanged, this.modelChanged);\n        this.parent.off(events.dataBound, this.refreshToolbarItems);\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { renderMovable } from '../base/util';\n/**\n * Footer module is used to render grid content\n * @hidden\n */\nvar FooterRenderer = /** @class */ (function (_super) {\n    __extends(FooterRenderer, _super);\n    function FooterRenderer(gridModule, serviceLocator) {\n        var _this = _super.call(this, gridModule, serviceLocator) || this;\n        _this.aggregates = {};\n        _this.parent = gridModule;\n        _this.locator = serviceLocator;\n        _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * The function is used to render grid footer div\n     */\n    FooterRenderer.prototype.renderPanel = function () {\n        var div = createElement('div', { className: 'e-gridfooter' });\n        var innerDiv = createElement('div', { className: 'e-summarycontent' });\n        var movableContent = innerDiv;\n        if (this.parent.getFrozenColumns()) {\n            var fDiv = createElement('div', { className: 'e-frozenfootercontent' });\n            var mDiv = createElement('div', { className: 'e-movablefootercontent' });\n            innerDiv.appendChild(fDiv);\n            innerDiv.appendChild(mDiv);\n            this.frozenContent = fDiv;\n            this.movableContent = mDiv;\n            movableContent = mDiv;\n        }\n        if (Browser.isDevice) {\n            movableContent.style.overflowX = 'scroll';\n        }\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (this.parent.getPager() != null) {\n            this.parent.element.insertBefore(div, this.parent.getPager());\n        }\n        else {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid footer table\n     */\n    FooterRenderer.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var innerDiv = this.createContentTable('_footer_table');\n        var table = innerDiv.querySelector('.e-table');\n        var tFoot = createElement('tfoot');\n        table.appendChild(tFoot);\n        if (this.parent.getFrozenColumns()) {\n            var freezeTable = table.cloneNode(true);\n            this.frozenContent.appendChild(freezeTable);\n            this.freezeTable = freezeTable;\n            this.movableContent.appendChild(table);\n            remove(table.querySelector('colgroup'));\n            var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n            table.insertBefore(colGroup, table.querySelector('tbody'));\n            this.setColGroup(colGroup);\n        }\n        this.setTable(table);\n    };\n    FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n        var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n        var summaries = this.modelGenerator.getData();\n        var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() :\n            this.modelGenerator.getColumns(cStart, cEnd);\n        var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) :\n            this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n        var fragment = document.createDocumentFragment();\n        var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n        rowrenderer.element = createElement('TR', { className: 'e-summaryrow' });\n        for (var srow = 0, len = summaries.length; srow < len; srow++) {\n            var row = rows[srow];\n            if (!row) {\n                continue;\n            }\n            var tr = rowrenderer.render(row, dummies);\n            fragment.appendChild(tr);\n        }\n        table.tFoot.appendChild(fragment);\n        this.aggregates = e;\n    };\n    FooterRenderer.prototype.refresh = function (e) {\n        if (this.parent.getFrozenColumns()) {\n            remove(this.getPanel());\n            this.renderPanel();\n            this.renderTable();\n            this.freezeTable.tFoot.innerHTML = '';\n            this.renderSummaryContent(e, this.freezeTable, 0, this.parent.getFrozenColumns());\n        }\n        this.getTable().tFoot.innerHTML = '';\n        this.renderSummaryContent(e, this.getTable(), this.parent.getFrozenColumns());\n        // check freeze content have no row case\n        if (this.parent.getFrozenColumns()) {\n            var frozenDiv = this.frozenContent;\n            if (!frozenDiv.offsetHeight) {\n                frozenDiv.style.height = this.getTable().offsetHeight + 'px';\n            }\n        }\n        this.onScroll();\n    };\n    FooterRenderer.prototype.refreshCol = function () {\n        // frozen table \n        var mheaderCol;\n        var fheaderCol = mheaderCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n        if (this.parent.getFrozenColumns()) {\n            mheaderCol = renderMovable(fheaderCol, this.parent.getFrozenColumns());\n            this.freezeTable.replaceChild(fheaderCol, this.freezeTable.querySelector('colGroup'));\n        }\n        this.getTable().replaceChild(mheaderCol, this.getColGroup());\n        this.setColGroup(mheaderCol);\n    };\n    FooterRenderer.prototype.onWidthChange = function (args) {\n        this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n        if (this.parent.allowResizing && args.module === 'resize') {\n            this.updateFooterTableWidth(this.getTable());\n        }\n    };\n    FooterRenderer.prototype.onScroll = function (e) {\n        if (e === void 0) { e = { left: this.parent.getContent().firstChild.scrollLeft }; }\n        this.getTable().parentElement.scrollLeft = e.left;\n    };\n    FooterRenderer.prototype.getColFromIndex = function (index) {\n        var fCol = this.parent.getFrozenColumns();\n        if (fCol && fCol > index) {\n            return this.freezeTable.querySelector('colGroup').children[index];\n        }\n        return this.getColGroup().children[index - fCol];\n    };\n    FooterRenderer.prototype.columnVisibilityChanged = function () {\n        this.refresh();\n    };\n    FooterRenderer.prototype.addEventListener = function () {\n        this.parent.on(colGroupRefresh, this.refreshCol, this);\n        this.parent.on(columnWidthChanged, this.onWidthChange, this);\n        this.parent.on(scroll, this.onScroll, this);\n        this.parent.on(columnVisibilityChanged, this.columnVisibilityChanged, this);\n    };\n    FooterRenderer.prototype.removeEventListener = function () {\n        this.parent.off(colGroupRefresh, this.refreshCol);\n        this.parent.off(columnWidthChanged, this.onWidthChange);\n        this.parent.off(scroll, this.onScroll);\n        this.parent.off(columnVisibilityChanged, this.columnVisibilityChanged);\n    };\n    FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n        var tHead = this.parent.getHeaderTable();\n        if (tHead && tFoot) {\n            tFoot.style.width = tHead.style.width;\n        }\n    };\n    return FooterRenderer;\n}(ContentRender));\nexport { FooterRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\n/**\n * SummaryCellRenderer class which responsible for building summary cell content.\n * @hidden\n */\nvar SummaryCellRenderer = /** @class */ (function (_super) {\n    __extends(SummaryCellRenderer, _super);\n    function SummaryCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n        var key;\n        key = !isNullOrUndefined(column.type) ?\n            column.field + ' - ' + (typeof column.type === 'string' ? column.type.toLowerCase() : '') : column.columnName;\n        return data[column.columnName] ? data[column.columnName][key] : '';\n    };\n    SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n        var column = cell.column;\n        if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n            return true;\n        }\n        var tempObj = column.getTemplate(cell.cellType);\n        appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property));\n        return false;\n    };\n    return SummaryCellRenderer;\n}(CellRenderer));\nexport { SummaryCellRenderer };\n","import { EventHandler } from '@syncfusion/ej2-base';\nimport { debounce } from '@syncfusion/ej2-base';\n/**\n * InterSectionObserver - class watch whether it enters the viewport.\n * @hidden\n */\nvar InterSectionObserver = /** @class */ (function () {\n    function InterSectionObserver(element, options) {\n        var _this = this;\n        this.fromWheel = false;\n        this.touchMove = false;\n        this.options = {};\n        this.sentinelInfo = {\n            'up': {\n                check: function (rect, info) {\n                    var top = rect.top - _this.containerRect.top;\n                    info.entered = top >= 0;\n                    return top + (_this.options.pageHeight / 2) >= 0;\n                },\n                axis: 'Y'\n            },\n            'down': {\n                check: function (rect, info) {\n                    var cHeight = _this.options.container.clientHeight;\n                    var top = rect.bottom;\n                    info.entered = rect.bottom <= _this.containerRect.bottom;\n                    return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n                }, axis: 'Y'\n            },\n            'right': {\n                check: function (rect, info) {\n                    var right = rect.right;\n                    info.entered = right < _this.containerRect.right;\n                    return right - _this.containerRect.width <= _this.containerRect.right;\n                }, axis: 'X'\n            },\n            'left': {\n                check: function (rect, info) {\n                    var left = rect.left;\n                    info.entered = left > 0;\n                    return left + _this.containerRect.width >= _this.containerRect.left;\n                }, axis: 'X'\n            }\n        };\n        this.element = element;\n        this.options = options;\n    }\n    InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n        var _this = this;\n        this.containerRect = this.options.container.getBoundingClientRect();\n        EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n        EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n    };\n    InterSectionObserver.prototype.check = function (direction) {\n        var info = this.sentinelInfo[direction];\n        return info.check(this.element.getBoundingClientRect(), info);\n    };\n    InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n        var _this = this;\n        var prevTop = 0;\n        var prevLeft = 0;\n        var debounced100 = debounce(callback, 100);\n        var debounced50 = debounce(callback, 50);\n        return function (e) {\n            var top = e.target.scrollTop;\n            var left = e.target.scrollLeft;\n            var direction = prevTop < top ? 'down' : 'up';\n            direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n            prevTop = top;\n            prevLeft = left;\n            var current = _this.sentinelInfo[direction];\n            if (_this.options.axes.indexOf(current.axis) === -1) {\n                return;\n            }\n            var check = _this.check(direction);\n            if (current.entered) {\n                onEnterCallback(_this.element, current, direction, { top: top, left: left });\n            }\n            if (check) {\n                var fn = debounced100; //this.fromWheel ? this.options.debounceEvent ? debounced100 : callback : debounced100;\n                if (current.axis === 'X') {\n                    fn = debounced50;\n                }\n                fn({ direction: direction, sentinel: current, offset: { top: top, left: left } });\n            }\n            _this.fromWheel = false;\n        };\n    };\n    InterSectionObserver.prototype.setPageHeight = function (value) {\n        this.options.pageHeight = value;\n    };\n    return InterSectionObserver;\n}());\nexport { InterSectionObserver };\n","import { Browser } from '@syncfusion/ej2-base';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\n/**\n * Content module is used to render grid content\n */\nvar VirtualRowModelGenerator = /** @class */ (function () {\n    function VirtualRowModelGenerator(parent) {\n        this.cOffsets = {};\n        this.cache = {};\n        this.data = {};\n        this.groups = {};\n        this.parent = parent;\n        this.model = this.parent.pageSettings;\n        this.rowModelGenerator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    }\n    VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var _this = this;\n        var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n        var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n        var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n        var result = [];\n        var center = ~~(this.model.pageSize / 2);\n        var indexes = this.getBlockIndexes(page);\n        var loadedBlocks = [];\n        this.checkAndResetCache(notifyArgs.requestType);\n        if (this.parent.enableColumnVirtualization) {\n            info.blockIndexes.forEach(function (value) {\n                if (_this.isBlockAvailable(value)) {\n                    _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n                }\n            });\n        }\n        info.blockIndexes.forEach(function (value) {\n            if (!_this.isBlockAvailable(value)) {\n                var rows = _this.rowModelGenerator.generateRows(data, {\n                    virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n                });\n                var median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n                if (!_this.isBlockAvailable(indexes[0])) {\n                    _this.cache[indexes[0]] = rows.slice(0, median);\n                }\n                if (!_this.isBlockAvailable(indexes[1])) {\n                    _this.cache[indexes[1]] = rows.slice(median);\n                }\n            }\n            if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n                _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n            }\n            result.push.apply(result, _this.cache[value]);\n            if (_this.isBlockAvailable(value)) {\n                loadedBlocks.push(value);\n            }\n        });\n        info.blockIndexes = loadedBlocks;\n        var grouping = 'records';\n        if (this.parent.allowGrouping) {\n            this.parent.currentViewData[grouping] = result.map(function (m) { return m.data; });\n        }\n        else {\n            this.parent.currentViewData = result.map(function (m) { return m.data; });\n        }\n        return result;\n    };\n    VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualRowModelGenerator.prototype.getPage = function (block) {\n        return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n    };\n    VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n        return value in this.cache;\n    };\n    VirtualRowModelGenerator.prototype.getData = function () {\n        return {\n            page: this.model.currentPage,\n            blockIndexes: this.getBlockIndexes(this.model.currentPage),\n            direction: 'down',\n            columnIndexes: this.parent.getColumnIndexesInView()\n        };\n    };\n    VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n        if (full === void 0) { full = true; }\n        var page = this.getPage(blk);\n        var even = blk % 2 === 0;\n        var index = (page - 1) * this.model.pageSize;\n        return full || !even ? index : index + ~~(this.model.pageSize / 2);\n    };\n    VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n        var _this = this;\n        if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n        var indexes = [];\n        var sLeft = content.scrollLeft | 0;\n        var keys = Object.keys(this.cOffsets);\n        var cWidth = content.getBoundingClientRect().width;\n        sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n        var calWidth = Browser.isDevice ? 2 * cWidth : cWidth / 2;\n        var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n        keys.some(function (offset, indx, input) {\n            var iOffset = Number(offset);\n            var offsetVal = _this.cOffsets[offset];\n            var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n            if (border) {\n                indexes.push(iOffset);\n            }\n            return left + calWidth < offsetVal;\n        });\n        return indexes;\n    };\n    VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n        var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder']\n            .some(function (value) { return action === value; });\n        if (clear) {\n            this.cache = {};\n            this.data = {};\n            this.groups = {};\n        }\n        return clear;\n    };\n    VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n        var _this = this;\n        var col = 0;\n        this.cOffsets = {};\n        var gLen = this.parent.groupSettings.columns.length;\n        var cols = this.parent.columns;\n        var cLen = cols.length;\n        var isVisible = function (column) { return column.visible &&\n            (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n        this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n        Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n            block = block + gLen;\n            _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n        });\n    };\n    VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n        var _this = this;\n        var currentFirst = current[0];\n        var rows = [];\n        Object.keys(this.cache).forEach(function (key) {\n            if (Number(key) < block) {\n                rows = rows.concat(_this.cache[key]);\n            }\n        });\n        if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n            return current;\n        }\n        return this.iterateGroup(current, rows);\n    };\n    VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n        var currentFirst = current[0];\n        var offset = 0;\n        if (currentFirst && currentFirst.isDataRow) {\n            return current;\n        }\n        var isPresent = current.some(function (row) {\n            return rows.some(function (oRow, index) {\n                var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n                    oRow.data.key === row.data.key;\n                if (res) {\n                    offset = index;\n                }\n                return res;\n            });\n        });\n        if (isPresent) {\n            current.shift();\n            current = this.iterateGroup(current, rows.slice(offset));\n        }\n        return current;\n    };\n    VirtualRowModelGenerator.prototype.getRows = function () {\n        var _this = this;\n        var rows = [];\n        Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n        return rows;\n    };\n    return VirtualRowModelGenerator;\n}());\nexport { VirtualRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, createElement, closest, formatUnit } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\n/**\n * VirtualContentRenderer\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */ (function (_super) {\n    __extends(VirtualContentRenderer, _super);\n    function VirtualContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.prevHeight = 0;\n        _this.currentInfo = {};\n        _this.preventEvent = false;\n        _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n        _this.offsets = {};\n        _this.tmpOffsets = {};\n        _this.virtualEle = new VirtualElementHandler();\n        _this.offsetKeys = [];\n        _this.isFocused = false;\n        _this.locator = locator;\n        _this.eventListener('on');\n        _this.vgenerator = _this.generator;\n        return _this;\n    }\n    VirtualContentRenderer.prototype.renderTable = function () {\n        this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.content = this.getPanel().firstChild;\n        this.virtualEle.renderWrapper(this.parent.height);\n        this.virtualEle.renderPlaceHolder();\n        this.virtualEle.wrapper.style.position = 'absolute';\n        var debounceEvent = (this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline);\n        var opt = {\n            container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n            axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n        };\n        this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n    };\n    VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        this.virtualEle.adjustTable(0, 0);\n    };\n    VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n        if (this.preventEvent || this.parent.isDestroyed) {\n            this.preventEvent = false;\n            return;\n        }\n        this.isFocused = this.content === closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n        var info = scrollArgs.sentinel;\n        var viewInfo = this.currentInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n        if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n            || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n            return;\n        }\n        this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n        this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n        this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo });\n    };\n    VirtualContentRenderer.prototype.block = function (blk) {\n        return this.vgenerator.isBlockAvailable(blk);\n    };\n    VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n        var tempBlocks = [];\n        var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n        infoType.page = this.getPageFromTop(e.top, infoType);\n        infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n        infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n        var blocks = this.ensureBlocks(infoType);\n        infoType.blockIndexes = blocks;\n        infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n            .every(this.block.bind(this));\n        infoType.event = (infoType.loadNext || infoType.loadSelf) ? modelChanged : refreshVirtualBlock;\n        infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n        infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n            infoType.event = refreshVirtualBlock;\n        }\n        return infoType;\n    };\n    VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n        var _this = this;\n        var index = info.blockIndexes[info.block];\n        var mIdx;\n        var old = index;\n        var max = Math.max;\n        var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n        indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n        if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n            return indexes;\n        }\n        if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n            indexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        indexes.some(function (val, ind) {\n            var result = val === _this.getTotalBlocks();\n            if (result) {\n                mIdx = ind;\n            }\n            return result;\n        });\n        if (mIdx !== undefined) {\n            indexes = indexes.slice(0, mIdx + 1);\n            if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n                indexes = [indexes[0] - 1, indexes[0]];\n            }\n        }\n        return indexes;\n    };\n    VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n        // currentInfo value will be used if there are multiple dom updates happened due to mousewheel\n        var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page &&\n            this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo;\n        this.prevInfo = this.prevInfo || e.virtualInfo;\n        var cBlock = (info.columnIndexes[0]) - 1;\n        var cOffset = this.getColumnOffset(cBlock);\n        var width;\n        var blocks = info.blockIndexes;\n        if (this.parent.groupSettings.columns.length) {\n            this.refreshOffsets();\n        }\n        var translate = this.getTranslateY(this.content.scrollTop, this.content.getBoundingClientRect().height, info);\n        this.virtualEle.adjustTable(cOffset, translate);\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.adjustTable(cOffset, 0);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cIndex = info.columnIndexes;\n            width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n            this.header.virtualEle.setWrapperWidth(width);\n        }\n        this.virtualEle.setWrapperWidth(width, this.parent.enableColumnVirtualization);\n        remove(target);\n        target = createElement('tbody');\n        target.appendChild(newChild);\n        this.getTable().appendChild(target);\n        if (this.parent.groupSettings.columns.length) {\n            if (info.direction === 'up') {\n                var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n                this.preventEvent = true;\n                var sTop = this.content.scrollTop;\n                this.content.scrollTop = sTop + blk;\n            }\n            this.setVirtualHeight();\n            this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n        }\n        this.prevInfo = info;\n        if (this.isFocused) {\n            this.content.focus();\n        }\n    };\n    VirtualContentRenderer.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.count = e.count;\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n        this.vgenerator.checkAndResetCache(e.requestType);\n        if (['refresh', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', undefined]\n            .some(function (value) { return e.requestType === value; })) {\n            this.refreshOffsets();\n        }\n        this.setVirtualHeight();\n        this.resetScrollPosition(e.requestType);\n    };\n    VirtualContentRenderer.prototype.setVirtualHeight = function () {\n        var width = this.parent.enableColumnVirtualization ?\n            this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n        this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()], width);\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.setVirtualHeight(1, width);\n        }\n    };\n    VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n        var _this = this;\n        var total = this.getTotalBlocks();\n        var page = 0;\n        var extra = this.offsets[total] - this.prevHeight;\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = sTop < _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n            if (border) {\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n        if (info === undefined) {\n            info = { page: this.getPageFromTop(sTop, {}) };\n            info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        var block = (info.blockIndexes[0] || 1) - 1;\n        var translate = this.getOffset(block);\n        var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n        if (isOnenter) {\n            info = this.prevInfo;\n        }\n        var result = translate > sTop ?\n            this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n        var blockHeight = this.offsets[info.blockIndexes[info.blockIndexes.length - 1]] -\n            this.tmpOffsets[info.blockIndexes[0]];\n        if (result + blockHeight > this.offsets[this.getTotalBlocks()]) {\n            result -= (result + blockHeight) - this.offsets[this.getTotalBlocks()];\n        }\n        return result;\n    };\n    VirtualContentRenderer.prototype.getOffset = function (block) {\n        return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock] | 0);\n    };\n    VirtualContentRenderer.prototype.onEntered = function () {\n        var _this = this;\n        return function (element, current, direction, e) {\n            var xAxis = current.axis === 'X';\n            var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n            var height = _this.content.getBoundingClientRect().height;\n            var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n            var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined, true);\n            _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n            if (_this.parent.enableColumnVirtualization) {\n                _this.header.virtualEle.adjustTable(x, 0);\n            }\n        };\n    };\n    VirtualContentRenderer.prototype.eventListener = function (action) {\n        var _this = this;\n        this.parent[action](dataReady, this.onDataReady, this);\n        this.parent[action](refreshVirtualBlock, this.refreshContentRows, this);\n        this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n        var fn = function () {\n            _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n            _this.parent.off(contentReady, fn);\n        };\n        this.parent.on(contentReady, fn, this);\n    };\n    VirtualContentRenderer.prototype.getBlockSize = function () {\n        return this.parent.pageSettings.pageSize >> 1;\n    };\n    VirtualContentRenderer.prototype.getBlockHeight = function () {\n        return this.getBlockSize() * this.parent.getRowHeight();\n    };\n    VirtualContentRenderer.prototype.isEndBlock = function (index) {\n        var totalBlocks = this.getTotalBlocks();\n        return index >= totalBlocks || index === totalBlocks - 1;\n    };\n    VirtualContentRenderer.prototype.getTotalBlocks = function () {\n        return Math.ceil(this.count / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n        return this.vgenerator.cOffsets[block] | 0;\n    };\n    VirtualContentRenderer.prototype.getModelGenerator = function () {\n        return new VirtualRowModelGenerator(this.parent);\n    };\n    VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n        if (this.actions.some(function (value) { return value === action; })) {\n            this.preventEvent = this.content.scrollTop !== 0;\n            this.content.scrollTop = 0;\n        }\n    };\n    VirtualContentRenderer.prototype.onActionBegin = function (e) {\n        //Update property silently..\n        this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n    };\n    VirtualContentRenderer.prototype.getRows = function () {\n        return this.vgenerator.getRows();\n    };\n    VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return this.parent.getDataRows()[index - startIdx];\n    };\n    VirtualContentRenderer.prototype.getVirtualRowIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return startIdx + index;\n    };\n    VirtualContentRenderer.prototype.refreshOffsets = function () {\n        var _this = this;\n        var row = 0;\n        var bSize = this.getBlockSize();\n        var total = this.getTotalBlocks();\n        this.prevHeight = this.offsets[total];\n        this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n        this.offsets = {};\n        //Row offset update\n        Array.apply(null, Array(total)).map(function () { return ++row; })\n            .forEach(function (block) {\n            var tmp = (_this.vgenerator.cache[block] || []).length;\n            var rem = _this.count % bSize;\n            var size = block in _this.vgenerator.cache ?\n                tmp * _this.parent.getRowHeight() : rem && block === total ? rem * _this.parent.getRowHeight() : _this.getBlockHeight();\n            // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n            // tmp * getRowHeight() : this.getBlockHeight();\n            _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n            _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n        });\n        this.offsetKeys = Object.keys(this.offsets);\n        //Column offset update\n        if (this.parent.enableColumnVirtualization) {\n            this.vgenerator.refreshColOffsets();\n        }\n    };\n    VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n        this.vgenerator.refreshColOffsets();\n        this.setVirtualHeight();\n    };\n    return VirtualContentRenderer;\n}(ContentRender));\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */ (function (_super) {\n    __extends(VirtualHeaderRenderer, _super);\n    function VirtualHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.virtualEle = new VirtualElementHandler();\n        _this.gen = new VirtualRowModelGenerator(_this.parent);\n        _this.parent.on(refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n        return _this;\n    }\n    VirtualHeaderRenderer.prototype.renderTable = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.getPanel().firstChild;\n        this.virtualEle.content.style.position = 'relative';\n        this.virtualEle.renderWrapper();\n        this.virtualEle.renderPlaceHolder('absolute');\n    };\n    VirtualHeaderRenderer.prototype.appendContent = function (table) {\n        this.virtualEle.wrapper.appendChild(table);\n    };\n    VirtualHeaderRenderer.prototype.refreshUI = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n        _super.prototype.refreshUI.call(this);\n    };\n    return VirtualHeaderRenderer;\n}(HeaderRender));\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */ (function () {\n    function VirtualElementHandler() {\n    }\n    VirtualElementHandler.prototype.renderWrapper = function (height) {\n        this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        this.wrapper.appendChild(this.table);\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n        if (position === void 0) { position = 'relative'; }\n        this.placeholder = createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n        this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n        this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n        this.placeholder.style.height = height + \"px\";\n        this.placeholder.style.width = width;\n    };\n    return VirtualElementHandler;\n}());\nexport { VirtualElementHandler };\n","import { initialLoad } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from '../renderer/virtual-content-renderer';\nimport * as events from '../base/constant';\n/**\n * Virtual Scrolling class\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.instantiateRenderer = function () {\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.enableColumnVirtualization) {\n            renderer.addRenderer(RenderType.Header, new VirtualHeaderRenderer(this.parent, this.locator));\n        }\n        renderer.addRenderer(RenderType.Content, new VirtualContentRenderer(this.parent, this.locator));\n        this.ensurePageSize();\n    };\n    VirtualScroll.prototype.ensurePageSize = function () {\n        var rowHeight = this.parent.getRowHeight();\n        this.blockSize = ~~(this.parent.height / rowHeight);\n        var height = this.blockSize * 2;\n        var size = this.parent.pageSettings.pageSize;\n        this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n    };\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initialLoad, this.instantiateRenderer);\n        this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n    };\n    VirtualScroll.prototype.refreshVirtualElement = function (args) {\n        if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n            var renderer = this.locator.getService('rendererFactory');\n            renderer.getRenderer(RenderType.Content).refreshVirtualElement();\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { createElement, isNullOrUndefined, addClass } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar InlineEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function InlineEditRender(parent) {\n        this.parent = parent;\n    }\n    InlineEditRender.prototype.addNew = function (elements, args) {\n        var mTbody;\n        var tbody;\n        if (this.parent.frozenRows) {\n            tbody = this.parent.getHeaderContent().querySelector('tbody');\n        }\n        else {\n            tbody = this.parent.getContentTable().querySelector('tbody');\n        }\n        args.row = createElement('tr', { className: 'e-row e-addedrow' });\n        if (tbody.querySelector('.e-emptyrow')) {\n            tbody.querySelector('.e-emptyrow').classList.add('e-hide');\n        }\n        tbody.insertBefore(args.row, tbody.firstChild);\n        args.row.appendChild(this.getEditElement(elements, false));\n        if (this.parent.getFrozenColumns()) {\n            var mEle = this.renderMovableform(args.row);\n            if (this.parent.frozenRows) {\n                mTbody = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            }\n            else {\n                mTbody = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            }\n            mTbody.insertBefore(mEle, mTbody.firstChild);\n            args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n            mEle.setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n    };\n    InlineEditRender.prototype.renderMovableform = function (ele) {\n        var mEle = ele.cloneNode(true);\n        this.renderMovable(ele, mEle);\n        mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        return mEle;\n    };\n    InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n        if (this.parent.getFrozenColumns()) {\n            var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n            var fCont = this.parent.getContent().querySelector('.e-frozencontent').querySelector('tbody');\n            var mCont = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            var fHdr = this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody');\n            var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            if (this.parent.frozenRows && idx >= this.parent.frozenRows) {\n                idx -= this.parent.frozenRows;\n            }\n            if (fCont.contains(row)) {\n                td = td.concat([].slice.call(mCont.children[idx].querySelectorAll('td.e-rowcell')));\n            }\n            else if (mCont.contains(row)) {\n                td = td.concat([].slice.call(fCont.children[idx].querySelectorAll('td.e-rowcell')));\n            }\n            else if (fHdr.contains(row)) {\n                td = td.concat([].slice.call(mHdr.children[idx].querySelectorAll('td.e-rowcell')));\n            }\n            else if (mHdr.contains(row)) {\n                td = td.concat([].slice.call(fHdr.children[idx].querySelectorAll('td.e-rowcell')));\n            }\n        }\n        return td;\n    };\n    InlineEditRender.prototype.update = function (elements, args) {\n        var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n        args.row.innerHTML = '';\n        tdElement = this.updateFreezeEdit(args.row, tdElement);\n        args.row.appendChild(this.getEditElement(elements, true, tdElement));\n        args.row.classList.add('e-editedrow');\n        this.refreshFreezeEdit(args.row);\n    };\n    InlineEditRender.prototype.refreshFreezeEdit = function (row) {\n        var td = row.firstChild;\n        var fCls;\n        var cont;\n        var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n        if (this.parent.getFrozenColumns()) {\n            if (idx < this.parent.frozenRows) {\n                cont = this.parent.getHeaderContent();\n                fCls = '.e-frozenheader';\n            }\n            else {\n                cont = this.parent.getContent();\n                fCls = '.e-frozencontent';\n            }\n            var mTd = td.cloneNode(true);\n            var fRows = void 0;\n            if (cont.querySelector(fCls).contains(row)) {\n                fRows = this.parent.getMovableRowByIndex(idx);\n                this.updateFrozenCont(fRows, td, mTd);\n            }\n            else {\n                fRows = this.parent.getRowByIndex(idx);\n                this.updateFrozenCont(fRows, mTd, td);\n            }\n            fRows.appendChild(mTd);\n            fRows.classList.add('e-editedrow');\n        }\n    };\n    InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n        row.innerHTML = '';\n        this.renderMovable(ele, mEle);\n        mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n        mEle.setAttribute('colspan', this.parent.getColumns().length - this.parent.getFrozenColumns() + '');\n    };\n    InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n        var frzCols = this.parent.getFrozenColumns();\n        for (var i = 0; i < frzCols; i++) {\n            mEle.querySelector('tr').removeChild(mEle.querySelector('tr').children[0]);\n        }\n        for (var i = frzCols, len = ele.querySelector('tr').childElementCount; i < len; i++) {\n            ele.querySelector('tr').removeChild(ele.querySelector('tr').children[ele.querySelector('tr').childElementCount - 1]);\n        }\n    };\n    InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement) {\n        var gObj = this.parent;\n        var gLen = 0;\n        var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n        if (gObj.allowGrouping) {\n            gLen = gObj.groupSettings.columns.length;\n        }\n        var td = createElement('td', {\n            className: 'e-editcell e-normaledit',\n            attrs: { colspan: (gObj.getVisibleColumns().length - gObj.getVisibleFrozenColumns() + gLen + isDetail).toString() }\n        });\n        var form = createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        var table = createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n        table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n        var tbody = createElement('tbody');\n        var tr = createElement('tr');\n        var i = 0;\n        if (isDetail) {\n            tr.insertBefore(createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n        }\n        while (i < gLen) {\n            tr.appendChild(createElement('td', { className: 'e-indentcell' }));\n            i++;\n        }\n        var m = 0;\n        i = 0;\n        while ((isEdit && m < tdElement.length && i < gObj.getColumns().length) || i < gObj.getColumns().length) {\n            var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n            var col = gObj.getColumns()[i];\n            var td_1 = createElement('td', {\n                className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n            });\n            if (col.visible) {\n                td_1.appendChild(elements[col.uid]);\n                if (col.editType === 'booleanedit') {\n                    td_1.classList.add('e-boolcell');\n                }\n                else if (col.commands || col.commandsTemplate) {\n                    addClass([td_1], 'e-unboundcell');\n                }\n            }\n            else {\n                td_1.classList.add('e-hide');\n            }\n            tr.appendChild(td_1);\n            i = span ? i + parseInt(span, 10) : i + 1;\n            m++;\n        }\n        tbody.appendChild(tr);\n        table.appendChild(tbody);\n        form.appendChild(table);\n        td.appendChild(form);\n        return td;\n    };\n    InlineEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    return InlineEditRender;\n}());\nexport { InlineEditRender };\n","import { createElement, classList } from '@syncfusion/ej2-base';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar BatchEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function BatchEditRender(parent) {\n        this.parent = parent;\n    }\n    BatchEditRender.prototype.update = function (elements, args) {\n        args.cell.innerHTML = '';\n        args.cell.appendChild(this.getEditElement(elements, args));\n        args.cell.classList.add('e-editedbatchcell');\n        classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n    };\n    BatchEditRender.prototype.getEditElement = function (elements, args) {\n        var gObj = this.parent;\n        var form = createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        form.appendChild(elements[args.columnObject.uid]);\n        if (args.columnObject.editType === 'booleanedit') {\n            args.cell.classList.add('e-boolcell');\n        }\n        if (!args.columnObject.editType) {\n            args.cell.classList.add('e-inputbox');\n        }\n        return form;\n    };\n    BatchEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    return BatchEditRender;\n}());\nexport { BatchEditRender };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { remove, createElement } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { changeButtonType } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar DialogEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function DialogEditRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.dialogDestroy, this.destroy, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    }\n    DialogEditRender.prototype.setLocaleObj = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n    };\n    DialogEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.createDialog = function (elements, args) {\n        var gObj = this.parent;\n        this.dialog = createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper' });\n        gObj.element.appendChild(this.dialog);\n        this.setLocaleObj();\n        var position = this.parent.element.getBoundingClientRect().height < 400 ?\n            { X: 'center', Y: 'top' } : { X: 'center', Y: 'center' };\n        this.dialogObj = new Dialog({\n            header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n                this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n            content: this.getEditElement(elements),\n            showCloseIcon: true,\n            allowDragging: true,\n            position: position,\n            close: this.dialogClose.bind(this),\n            closeOnEscape: true, width: '330px', target: gObj.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n                },\n                { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n        });\n        this.dialogObj.appendTo(this.dialog);\n        changeButtonType(this.dialogObj.element);\n    };\n    DialogEditRender.prototype.btnClick = function (e) {\n        if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.trim().toLowerCase()) {\n            this.dialogClose();\n        }\n        else {\n            this.parent.endEdit();\n        }\n    };\n    DialogEditRender.prototype.dialogClose = function () {\n        this.parent.closeEdit();\n        this.destroy();\n    };\n    DialogEditRender.prototype.destroy = function (args) {\n        this.parent.notify(events.destroyForm, {});\n        this.parent.isEdit = false;\n        this.parent.notify(events.toolbarRefresh, {});\n        if (this.dialog && !this.dialogObj.isDestroyed) {\n            this.dialogObj.destroy();\n            remove(this.dialog);\n        }\n    };\n    DialogEditRender.prototype.getEditElement = function (elements) {\n        var gObj = this.parent;\n        var div = createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n        var form = createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        var table = createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n        var tbody = createElement('tbody');\n        var cols = gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (!cols[i].visible || cols[i].commands || cols[i].commandsTemplate) {\n                continue;\n            }\n            var tr = createElement('tr');\n            var dataCell = createElement('td', {\n                className: 'e-rowcell', attrs: {\n                    style: 'text-align:' + (this.parent.enableRtl ? 'right' : 'left') + ';width:190px'\n                }\n            });\n            var label = createElement('label', { innerHTML: cols[i].field });\n            elements[cols[i].uid].classList.remove('e-input');\n            dataCell.appendChild(elements[cols[i].uid]);\n            tr.appendChild(dataCell);\n            tbody.appendChild(tr);\n        }\n        table.appendChild(tbody);\n        form.appendChild(table);\n        div.appendChild(form);\n        return div;\n    };\n    DialogEditRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.dialogDestroy, this.destroy);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    return DialogEditRender;\n}());\nexport { DialogEditRender };\n","import { isNullOrUndefined, closest, getValue } from '@syncfusion/ej2-base';\nimport { InlineEditRender } from './inline-edit-renderer';\nimport { BatchEditRender } from './batch-edit-renderer';\nimport { DialogEditRender } from './dialog-edit-renderer';\nimport { createElement, attributes, classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { isComplexField, getComplexFieldID } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar EditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function EditRender(parent, serviceLocator) {\n        //Internal variables               \n        this.editType = {\n            'Inline': InlineEditRender,\n            'Normal': InlineEditRender, 'Batch': BatchEditRender, 'Dialog': DialogEditRender\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n        this.focus = serviceLocator.getService('focus');\n    }\n    EditRender.prototype.addNew = function (args) {\n        this.renderer.addNew(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.update = function (args) {\n        this.renderer.update(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.convertWidget = function (args) {\n        var gObj = this.parent;\n        var isFocused;\n        var cell;\n        var value;\n        var fForm;\n        var frzCols = gObj.getFrozenColumns();\n        var form = gObj.element.querySelector('.e-gridform');\n        if (frzCols && gObj.editSettings.mode === 'Normal') {\n            var rowIndex = parseInt(args.row.getAttribute('aria-rowindex'), 10);\n            if (gObj.frozenRows && (args.requestType === 'add' || rowIndex < gObj.frozenRows)) {\n                fForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n            }\n            else {\n                fForm = gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform');\n            }\n        }\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (!col.visible || col.commands) {\n                continue;\n            }\n            value = col.valueAccessor(col.field, args.rowData, col);\n            if (frzCols && cols.indexOf(col) >= frzCols && gObj.editSettings.mode === 'Normal') {\n                cell = fForm.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            else {\n                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            var temp = col.edit.write;\n            if (!isNullOrUndefined(cell)) {\n                col.edit.write({\n                    rowData: args.rowData, element: cell, column: col, requestType: args.requestType, type: args.type, row: args.row,\n                    foreignKeyData: col.isForeignColumn() && getValue(col.field, args.foreignKeyData)\n                });\n                if (!isFocused && !cell.getAttribute('disabled')) {\n                    this.focusElement(cell, args.type);\n                    isFocused = true;\n                }\n            }\n        }\n    };\n    EditRender.prototype.focusElement = function (elem, type) {\n        var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n        if (!isNullOrUndefined(chkBox)) {\n            chkBox.nextElementSibling.classList.add('e-focus');\n        }\n        if (this.parent.editSettings.mode === 'Batch') {\n            this.focus.onClick({ target: closest(elem, 'td') }, true);\n        }\n        else {\n            elem.focus();\n        }\n        if (elem.classList.contains('e-defaultcell')) {\n            elem.setSelectionRange(elem.value.length, elem.value.length);\n        }\n    };\n    EditRender.prototype.getEditElements = function (args) {\n        var gObj = this.parent;\n        var elements = {};\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var col = cols[i];\n            if (!col.visible) {\n                continue;\n            }\n            if (col.commands || col.commandsTemplate) {\n                var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n                var model = new RowModelGenerator(this.parent);\n                var cellRenderer = cellRendererFact.getCellRenderer(CellType.CommandColumn);\n                var cells = model.generateRows(args.rowData)[0].cells;\n                var td = cellRenderer.render(cells[i], args.rowData, { 'index': args.row ? args.row.getAttribute('aria-rowindex') : 0 });\n                var div = td.firstElementChild;\n                div.setAttribute('textAlign', td.getAttribute('textAlign'));\n                elements[col.uid] = div;\n                continue;\n            }\n            var value = col.valueAccessor(col.field, args.rowData, col);\n            var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n            var temp = col.edit.create;\n            var input = void 0;\n            input = col.edit.create(tArgs);\n            if (typeof input === 'string') {\n                var div = createElement('div');\n                div.innerHTML = input;\n                input = div.firstChild;\n            }\n            var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n            var isComplex = !isNullOrUndefined(col.field) && isComplexField(col.field);\n            var complexFieldName = !isNullOrUndefined(col.field) && getComplexFieldID(col.field);\n            attributes(isInput ? input.querySelector('input') : input, {\n                name: isComplex ? complexFieldName : col.field, 'e-mappinguid': col.uid,\n                id: isComplex ? gObj.element.id + complexFieldName : gObj.element.id + col.field\n            });\n            classList(input, ['e-input', 'e-field'], []);\n            if (col.textAlign === 'Right') {\n                input.classList.add('e-ralign');\n            }\n            if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit' ||\n                (col.isIdentity && args.requestType === 'add')) {\n                input.setAttribute('disabled', 'true');\n            }\n            elements[col.uid] = input;\n        }\n        return elements;\n    };\n    EditRender.prototype.destroy = function () {\n        this.renderer.removeEventListener();\n    };\n    return EditRender;\n}());\nexport { EditRender };\n","import { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, getComplexValue, addRemoveActiveClasses, isComplexField, getComplexFieldID } from '../base/util';\n/**\n * `BooleanEditCell` is used to handle boolean cell type editing.\n * @hidden\n */\nvar BooleanEditCell = /** @class */ (function () {\n    function BooleanEditCell(parent) {\n        this.activeClasses = ['e-selectionbackground', 'e-active'];\n        this.parent = parent;\n    }\n    BooleanEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        var isComplex = !isNullOrUndefined(args.column.field) && isComplexField(args.column.field);\n        var complexFieldName = !isNullOrUndefined(args.column.field) && getComplexFieldID(args.column.field);\n        return createElement('input', {\n            className: classNames, attrs: {\n                type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n                id: isComplex ? this.parent.element.id + complexFieldName : this.parent.element.id + col.field,\n                name: isComplex ? complexFieldName : col.field\n            }\n        });\n    };\n    BooleanEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    BooleanEditCell.prototype.write = function (args) {\n        var selectChkBox;\n        var chkState;\n        var isComplex = !isNullOrUndefined(args.column.field) && isComplexField(args.column.field);\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        if (!isNullOrUndefined(args.row)) {\n            selectChkBox = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (!isComplex && args.rowData[args.column.field]) {\n            chkState = JSON.parse(args.rowData[args.column.field].toString().toLowerCase());\n        }\n        if (isComplex && !isAddRow && getComplexValue(args.rowData, args.column.field)) {\n            chkState = JSON.parse(getComplexValue(args.rowData, args.column.field).toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(selectChkBox)) {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                chkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), chkState].concat(this.activeClasses));\n        }\n        this.obj = new CheckBox(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? '' : args.column.headerText,\n            checked: chkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.checkBoxChange.bind(this)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    BooleanEditCell.prototype.checkBoxChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var add = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                add = true;\n                this.editRow.setAttribute('aria-selected', add.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), add].concat(this.activeClasses));\n        }\n    };\n    BooleanEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return BooleanEditCell;\n}());\nexport { BooleanEditCell };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getComplexValue, isComplexField } from '../base/util';\nimport { parentsUntil } from '../base/util';\n/**\n * `DropDownEditCell` is used to handle dropdown cell type editing.\n * @hidden\n */\nvar DropDownEditCell = /** @class */ (function () {\n    function DropDownEditCell(parent) {\n        //constructor\n        this.parent = parent;\n    }\n    DropDownEditCell.prototype.create = function (args) {\n        //create\n        /* tslint:disable-next-line:no-any */\n        var complexFieldName = getComplexFieldID(args.column.field);\n        /* tslint:disable-next-line:no-any */\n        var isComplex = isComplexField(args.column.field);\n        return createElement('input', {\n            className: 'e-field', attrs: {\n                /* tslint:disable-next-line:no-any */\n                id: isComplex ? this.parent.element.id + complexFieldName : this.parent.element.id + args.column.field,\n                /* tslint:disable-next-line:no-any */\n                name: isComplex ? complexFieldName : args.column.field, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    DropDownEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        /* tslint:disable-next-line:no-any */\n        var complexFieldName = getComplexFieldID(args.column.field);\n        var isComplex = isComplexField(args.column.field);\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        this.obj = new DropDownList(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: isComplex && !isAddRow ?\n                getComplexValue(args.rowData, args.column.field) : args.rowData[args.column.field],\n            enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete.bind(this),\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n            sortOrder: 'Ascending'\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', isComplex ? complexFieldName : args.column.field);\n    };\n    DropDownEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DropDownEditCell.prototype.ddActionComplete = function (e) {\n        e.result = DataUtil.distinct(e.result, this.column.isForeignColumn() ? this.column.foreignKeyField : this.column.field, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = e.result;\n        }\n    };\n    DropDownEditCell.prototype.dropDownOpen = function (args) {\n        var dlgElement = parentsUntil(this.obj.element, 'e-dialog');\n        var targetElement = !isNullOrUndefined(dlgElement) && dlgElement.id !== '' ?\n            this.parent.element.querySelector('#' + dlgElement.id) : null;\n        if (!isNullOrUndefined(targetElement)) {\n            var dlgObj = this.parent.element.querySelector('#' + dlgElement.id).ej2_instances[0];\n            args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n        }\n    };\n    DropDownEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DropDownEditCell;\n}());\nexport { DropDownEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, isComplexField, getComplexFieldID, getComplexValue } from '../base/util';\n/**\n * `NumericEditCell` is used to handle numeric cell type editing.\n * @hidden\n */\nvar NumericEditCell = /** @class */ (function () {\n    function NumericEditCell(parent) {\n        this.parent = parent;\n    }\n    NumericEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var isComplex = isComplexField(args.column.field);\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return createElement('input', {\n            className: 'e-field', attrs: {\n                /* tslint:disable-next-line:no-any */\n                id: isComplex ? this.parent.element.id + complexFieldName : this.parent.element.id + args.column.field,\n                name: isComplex ? complexFieldName : args.column.field, 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    NumericEditCell.prototype.read = function (element) {\n        element.blur();\n        return element.ej2_instances[0].value;\n    };\n    NumericEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var isComplex = isComplexField(args.column.field);\n        var complexFieldName = getComplexFieldID(args.column.field);\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        this.obj = new NumericTextBox(extend({\n            value: isComplex && !isAddRow ?\n                parseFloat(getComplexValue(args.rowData, args.column.field)) : parseFloat(args.rowData[col.field]),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText,\n            enabled: isEditable(args.column, args.requestType, args.element),\n            floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n        }, col.edit.params));\n        this.obj.appendTo(args.element);\n        args.element.setAttribute('name', isComplex ? complexFieldName : args.column.field);\n    };\n    NumericEditCell.prototype.destroy = function () {\n        if (this.obj && !this.obj.isDestroyed) {\n            this.obj.destroy();\n        }\n    };\n    return NumericEditCell;\n}());\nexport { NumericEditCell };\n","import { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { isEditable } from '../base/util';\n/**\n * `DefaultEditCell` is used to handle default cell type editing.\n * @hidden\n */\nvar DefaultEditCell = /** @class */ (function () {\n    function DefaultEditCell(parent) {\n        this.parent = parent;\n    }\n    DefaultEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var input = createElement('input', {\n            className: 'e-field e-input e-defaultcell', attrs: {\n                type: 'text', value: !isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n                id: this.parent.element.id + col.field, name: col.field, style: 'text-align:' + col.textAlign,\n            }\n        });\n        return input;\n    };\n    DefaultEditCell.prototype.read = function (element) {\n        return element.value;\n    };\n    DefaultEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        Input.createInput({\n            element: args.element, floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl, enabled: isEditable(args.column, args.requestType, args.element),\n                placeholder: isInline ? '' : args.column.headerText\n            }\n        });\n    };\n    return DefaultEditCell;\n}());\nexport { DefaultEditCell };\n","import { extend, getValue } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { parentsUntil, refreshForeignData } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n * @hidden\n */\nvar NormalEdit = /** @class */ (function () {\n    function NormalEdit(parent, serviceLocator, renderer) {\n        this.parent = parent;\n        this.renderer = renderer;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    NormalEdit.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        if ((((parentsUntil(target, 'e-gridcontent') &&\n            parentsUntil(parentsUntil(target, 'e-gridcontent'), 'e-grid').id === gObj.element.id)) || (gObj.frozenRows\n            && parentsUntil(target, 'e-headercontent'))) && !parentsUntil(target, 'e-unboundcelldiv')) {\n            this.rowIndex = parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n            if (gObj.isEdit) {\n                gObj.editModule.endEdit();\n            }\n        }\n    };\n    NormalEdit.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n            this.parent.editModule.startEdit(parentsUntil(e.target, 'e-row'));\n        }\n    };\n    /**\n     * The function used to trigger editComplete\n     * @return {void}\n     * @hidden\n     */\n    NormalEdit.prototype.editComplete = function (e) {\n        this.parent.isEdit = false;\n        switch (e.requestType) {\n            case 'save':\n                if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n                    || (!this.parent.isPersistSelection)) {\n                    this.parent.selectRow(0);\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'save',\n                    type: events.actionComplete\n                }));\n                break;\n            case 'delete':\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'delete',\n                    type: events.actionComplete\n                }));\n                this.parent.selectRow(this.editRowIndex);\n                break;\n        }\n    };\n    NormalEdit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        var primaryKeys = gObj.getPrimaryKeyFieldNames();\n        var primaryKeyValues = [];\n        this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n        this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n        for (var i = 0; i < primaryKeys.length; i++) {\n            primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n        }\n        this.uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(this.uid);\n        var args = {\n            row: tr, primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n            rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData\n        };\n        gObj.trigger(events.beginEdit, args);\n        args.type = 'actionBegin';\n        gObj.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.isEdit = true;\n        gObj.clearSelection();\n        if (gObj.editSettings.mode === 'Dialog') {\n            args.row.classList.add('e-dlgeditrow');\n        }\n        this.renderer.update(args);\n        this.uid = tr.getAttribute('data-uid');\n        gObj.editModule.applyFormValidation();\n        args.type = 'actionComplete';\n        gObj.trigger(events.actionComplete, args);\n        if (this.parent.allowTextWrap) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n    };\n    NormalEdit.prototype.updateRow = function (index, data) {\n        var gObj = this.parent;\n        var args = {\n            requestType: 'save', type: events.actionBegin, data: data, cancel: false,\n            previousData: gObj.getCurrentViewRecords()[index]\n        };\n        gObj.showSpinner();\n        gObj.notify(events.updateData, args);\n        gObj.refresh();\n    };\n    NormalEdit.prototype.endEdit = function () {\n        var gObj = this.parent;\n        if (!this.parent.isEdit || !gObj.editModule.formObj.validate() ||\n            (gObj.editModule.mFormObj && !gObj.editModule.mFormObj.validate())) {\n            return;\n        }\n        var editedData = extend({}, this.previousData);\n        var args = {\n            requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n            previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n        };\n        editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-gridform'), editedData);\n        if (gObj.getFrozenColumns() && gObj.editSettings.mode === 'Normal') {\n            var mForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n            if (gObj.frozenRows && mForm) {\n                editedData = gObj.editModule.getCurrentEditedData(mForm, editedData);\n            }\n            else {\n                editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform'), editedData);\n            }\n        }\n        if (gObj.element.querySelectorAll('.e-editedrow').length) {\n            args.action = 'edit';\n            gObj.trigger(events.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            gObj.showSpinner();\n            gObj.notify(events.updateData, args);\n        }\n        else {\n            args.action = 'add';\n            args.selectedRow = 0;\n            args.index = this.addedRowIndex;\n            gObj.notify(events.modelChanged, args);\n            this.addedRowIndex = null;\n            if (args.cancel) {\n                return;\n            }\n        }\n    };\n    NormalEdit.prototype.destroyElements = function () {\n        var gObj = this.parent;\n        gObj.editModule.destroyWidgets();\n        gObj.editModule.destroyForm();\n        gObj.notify(events.dialogDestroy, {});\n    };\n    NormalEdit.prototype.editHandler = function (args) {\n        var _this = this;\n        if (args.promise) {\n            args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            this.editSuccess(args.data, args);\n        }\n    };\n    NormalEdit.prototype.edSucc = function (e, args) {\n        this.editSuccess(e, args);\n    };\n    NormalEdit.prototype.edFail = function (e) {\n        this.editFailure(e);\n    };\n    NormalEdit.prototype.updateCurrentViewData = function (data) {\n        this.parent.getCurrentViewRecords()[this.editRowIndex] = data;\n    };\n    NormalEdit.prototype.editSuccess = function (e, args) {\n        var gObj = this.parent;\n        if (!isNullOrUndefined(e)) {\n            args.data = e;\n        }\n        this.destroyElements();\n        this.stopEditStatus();\n        if (gObj.editSettings.mode === 'Dialog' && args.action !== 'add') {\n            gObj.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n        }\n        this.parent.trigger(events.beforeDataBound, args);\n        args.type = events.actionComplete;\n        this.parent.isEdit = false;\n        this.refreshRow(args.data);\n        this.updateCurrentViewData(args.data);\n        this.parent.trigger(events.actionComplete, args);\n        if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n            || (!this.parent.isPersistSelection)) {\n            this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n        }\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.editFailure = function (e) {\n        this.parent.trigger(events.actionFailure, e);\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.refreshRow = function (data) {\n        var frzCols = this.parent.getFrozenColumns();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var rowObj = this.parent.getRowObjectFromUID(this.uid);\n        if (rowObj) {\n            rowObj.changes = data;\n            refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n            row.refresh(rowObj, this.parent.getColumns(), true);\n            if (frzCols) {\n                var uid = void 0;\n                var tr = this.parent.element.querySelector('[data-uid=' + rowObj.uid + ']');\n                if ((parentsUntil(tr, 'e-frozencontent')) || (parentsUntil(tr, 'e-frozenheader'))) {\n                    uid = this.parent.getMovableRows()[rowObj.index].getAttribute('data-uid');\n                }\n                else {\n                    uid = this.parent.getRows()[rowObj.index].getAttribute('data-uid');\n                }\n                rowObj = this.parent.getRowObjectFromUID(uid);\n                rowObj.changes = data;\n                row.refresh(rowObj, this.parent.columns, true);\n            }\n        }\n    };\n    NormalEdit.prototype.closeEdit = function () {\n        if (!this.parent.isEdit) {\n            return;\n        }\n        var gObj = this.parent;\n        var args = {\n            requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n        };\n        gObj.trigger(events.actionBegin, args);\n        if (this.parent.editSettings.mode === 'Dialog') {\n            this.parent.notify(events.dialogDestroy, {});\n        }\n        gObj.isEdit = false;\n        this.stopEditStatus();\n        args.type = events.actionComplete;\n        if (gObj.editSettings.mode !== 'Dialog') {\n            this.refreshRow(args.data);\n        }\n        if (gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n            !gObj.getContentTable().querySelector('tr.e-row')) {\n            gObj.getContentTable().querySelector('tr.e-emptyrow').classList.remove('e-hide');\n        }\n        gObj.selectRow(this.rowIndex);\n        gObj.trigger(events.actionComplete, args);\n    };\n    NormalEdit.prototype.addRecord = function (data, index) {\n        var gObj = this.parent;\n        this.addedRowIndex = !isNullOrUndefined(index) ? index : 0;\n        if (data) {\n            gObj.notify(events.modelChanged, {\n                requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add', index: index\n            });\n            return;\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.previousData = {};\n        this.uid = '';\n        for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            this.previousData[col.field] = data && data[col.field] ? data[col.field] : col.defaultValue;\n        }\n        var args = {\n            cancel: false, foreignKeyData: {},\n            requestType: 'add', data: this.previousData, type: events.actionBegin, index: index\n        };\n        gObj.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.isEdit = true;\n        gObj.clearSelection();\n        this.renderer.addNew({ rowData: args.data, requestType: 'add' });\n        gObj.editModule.applyFormValidation();\n        args.type = events.actionComplete;\n        args.row = gObj.element.querySelector('.e-addedrow');\n        gObj.trigger(events.actionComplete, args);\n    };\n    NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.editRowIndex = this.parent.selectedRowIndex;\n        if (data) {\n            data = (data instanceof Array) ? data : [data];\n            var gObj = this.parent;\n            var index = 0;\n            var dataLen = Object.keys(data).length;\n            fieldname = fieldname || this.parent.getPrimaryKeyFieldNames()[0];\n            var _loop_1 = function (i) {\n                var tmpRecord;\n                var contained = gObj.currentViewData.some(function (record) {\n                    tmpRecord = record;\n                    return data[i] === getValue(fieldname, record) || data[i] === record;\n                });\n                data[i] = contained ? tmpRecord : (_a = {}, _a[fieldname] = data[i], _a);\n                var _a;\n            };\n            for (var i = 0; i < dataLen; i++) {\n                _loop_1(i);\n            }\n        }\n        this.parent.notify(events.modelChanged, {\n            requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n            data: data ? data : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n        });\n    };\n    NormalEdit.prototype.stopEditStatus = function () {\n        var gObj = this.parent;\n        var elem = gObj.element.querySelector('.e-addedrow');\n        var mElem;\n        var editMElem;\n        if (gObj.getFrozenColumns()) {\n            mElem = gObj.element.querySelectorAll('.e-addedrow')[1];\n            editMElem = gObj.element.querySelectorAll('.e-editedrow')[1];\n            if (mElem) {\n                remove(mElem);\n            }\n            if (editMElem) {\n                editMElem.classList.remove('e-editedrow');\n            }\n        }\n        if (elem) {\n            remove(elem);\n        }\n        elem = gObj.element.querySelector('.e-editedrow');\n        if (elem) {\n            elem.classList.remove('e-editedrow');\n        }\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.crudAction, this.editHandler, this);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.deleteComplete, this.editComplete, this);\n        this.parent.on(events.saveComplete, this.editComplete, this);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.crudAction, this.editHandler);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.deleteComplete, this.editComplete);\n        this.parent.off(events.saveComplete, this.editComplete);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.destroy = function () {\n        this.removeEventListener();\n        this.renderer.destroy();\n    };\n    return NormalEdit;\n}());\nexport { NormalEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `InlineEdit` module is used to handle inline editing actions.\n * @hidden\n */\nvar InlineEdit = /** @class */ (function (_super) {\n    __extends(InlineEdit, _super);\n    function InlineEdit(parent, serviceLocator, renderer) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    InlineEdit.prototype.closeEdit = function () {\n        _super.prototype.closeEdit.call(this);\n    };\n    InlineEdit.prototype.addRecord = function (data, index) {\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    InlineEdit.prototype.endEdit = function () {\n        _super.prototype.endEdit.call(this);\n    };\n    InlineEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    InlineEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return InlineEdit;\n}(NormalEdit));\nexport { InlineEdit };\n","import { extend, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { remove, classList, createElement } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { parentsUntil, inArray, refreshForeignData, getComplexValue, isComplexField } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { RowModelGenerator } from '../services/row-model-generator';\n/**\n * `BatchEdit` module is used to handle batch editing actions.\n * @hidden\n */\nvar BatchEdit = /** @class */ (function () {\n    function BatchEdit(parent, serviceLocator, renderer) {\n        this.cellDetails = {};\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = renderer;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.beforeCellFocused, this.onBeforeCellFocused, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.dataBoundFunction = this.dataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.beforeCellFocused, this.onBeforeCellFocused);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n    };\n    BatchEdit.prototype.dataBound = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    BatchEdit.prototype.clickHandler = function (e) {\n        if (!parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n            this.saveCell();\n            if (parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n                this.setCellIdx(e.target);\n            }\n        }\n    };\n    BatchEdit.prototype.dblClickHandler = function (e) {\n        var target = parentsUntil(e.target, 'e-rowcell');\n        var tr = parentsUntil(e.target, 'e-row');\n        if (target && tr && !isNaN(parseInt(target.getAttribute('aria-colindex'), 10))\n            && !target.parentElement.classList.contains('e-editedrow')) {\n            this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(target.getAttribute('aria-colindex'), 10)].field, this.isAddRow(parseInt(tr.getAttribute('aria-rowindex'), 10)));\n        }\n    };\n    BatchEdit.prototype.onBeforeCellFocused = function (e) {\n        if (this.parent.isEdit && this.validateFormObj() &&\n            (e.byClick || (['tab', 'shiftTab', 'enter', 'shiftEnter'].indexOf(e.keyArgs.action) > -1))) {\n            e.cancel = true;\n            if (e.byClick) {\n                e.clickArgs.preventDefault();\n            }\n            else {\n                e.keyArgs.preventDefault();\n            }\n        }\n    };\n    BatchEdit.prototype.onCellFocused = function (e) {\n        var frzCols = this.parent.getFrozenColumns();\n        var mCont = this.parent.getContent().querySelector('.e-movablecontent');\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        var clear = (!e.container.isContent || !e.container.isDataCell) && !(this.parent.frozenRows && e.container.isHeader);\n        if (!e.byKey || clear) {\n            return;\n        }\n        var _a = e.container.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        if (frzCols && (mCont.contains(e.element) || (this.parent.frozenRows && mHdr.contains(e.element)))) {\n            cellIndex += frzCols;\n        }\n        if (this.parent.frozenRows && e.container.isContent) {\n            rowIndex += this.parent.frozenRows;\n        }\n        var isEdit = this.parent.isEdit;\n        if (!document.querySelectorAll('.e-popup-open').length) {\n            isEdit = isEdit && !this.validateFormObj();\n            switch (e.keyArgs.action) {\n                case 'tab':\n                case 'shiftTab':\n                    if (isEdit) {\n                        this.editCellFromIndex(rowIndex, cellIndex);\n                    }\n                    break;\n                case 'enter':\n                case 'shiftEnter':\n                    e.keyArgs.preventDefault();\n                    if (isEdit) {\n                        this.editCell(rowIndex, this.cellDetails.column.field);\n                    }\n                    break;\n                case 'f2':\n                    this.editCellFromIndex(rowIndex, cellIndex);\n                    this.focus.focus();\n                    break;\n            }\n        }\n    };\n    BatchEdit.prototype.isAddRow = function (index) {\n        return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n    };\n    BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n        this.cellDetails.rowIndex = rowIdx;\n        this.cellDetails.cellIndex = cellIdx;\n        this.editCell(rowIdx, this.parent.getColumns()[cellIdx].field, this.isAddRow(rowIdx));\n    };\n    BatchEdit.prototype.closeEdit = function () {\n        var gObj = this.parent;\n        var rows = this.parent.getRowsObject();\n        if (gObj.frozenColumns && rows.length < this.parent.currentViewData.length * 2) {\n            rows.push.apply(rows, this.parent.getMovableRowsObject());\n        }\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this.parent);\n        var tr;\n        var mTr;\n        var movObj;\n        if (gObj.isEdit) {\n            this.saveCell(true);\n        }\n        gObj.clearSelection();\n        for (var i = 0; i < rows.length; i++) {\n            if (rows[i].isDirty) {\n                if (gObj.frozenColumns) {\n                    movObj = gObj.getMovableRowsObject()[rows[i].index];\n                    movObj.isDirty = true;\n                }\n                tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n                if (gObj.frozenRows) {\n                    tr = gObj.getHeaderContent().querySelector('[data-uid=' + rows[i].uid + ']');\n                }\n                if (gObj.frozenColumns) {\n                    if (gObj.frozenRows) {\n                        mTr = gObj.getHeaderContent().querySelector('.e-movableheader')\n                            .querySelector('[data-uid=' + rows[i].uid + ']');\n                    }\n                    else {\n                        mTr = gObj.getContent().querySelector('.e-movablecontent')\n                            .querySelector('[data-uid=' + rows[i].uid + ']');\n                    }\n                }\n                if (tr || mTr) {\n                    if (tr && tr.classList.contains('e-insertedrow') || mTr && mTr.classList.contains('e-insertedrow')) {\n                        if (tr) {\n                            remove(tr);\n                        }\n                        if (mTr && (gObj.frozenColumns || gObj.frozenRows)) {\n                            remove(mTr);\n                        }\n                        this.removeRowObjectFromUID(rows[i].uid);\n                        i--;\n                    }\n                    else {\n                        refreshForeignData(rows[i], this.parent.getForeignKeyColumns(), rows[i].data);\n                        delete rows[i].changes;\n                        rows[i].isDirty = false;\n                        var ftr = mTr ? mTr : tr;\n                        classList(ftr, [], ['e-hiddenrow', 'e-updatedtd']);\n                        rowRenderer.refresh(rows[i], gObj.getColumns(), false);\n                    }\n                }\n            }\n        }\n        if (gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n            !gObj.getContentTable().querySelector('tr.e-row')) {\n            gObj.getContentTable().querySelector('tr.e-emptyrow').classList.remove('e-hide');\n        }\n        var args = {\n            requestType: 'batchCancel', rows: this.parent.getRowsObject()\n        };\n        gObj.notify(events.batchCancel, {\n            rows: this.parent.getRowsObject().length ? this.parent.getRowsObject() :\n                [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })]\n        });\n        gObj.selectRow(this.cellDetails.rowIndex);\n        this.refreshRowIdx();\n        gObj.notify(events.toolbarRefresh, {});\n        this.parent.notify(events.tooltipDestroy, {});\n        args = { requestType: 'batchCancel', rows: this.parent.getRowsObject() };\n        gObj.trigger(events.batchCancel, args);\n    };\n    BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.saveCell();\n        if (this.validateFormObj()) {\n            this.saveCell(true);\n        }\n        this.bulkDelete(fieldname, data);\n    };\n    BatchEdit.prototype.addRecord = function (data) {\n        this.bulkAddRow(data);\n    };\n    BatchEdit.prototype.endEdit = function (data) {\n        if (this.parent.isEdit && this.validateFormObj()) {\n            return;\n        }\n        this.batchSave();\n    };\n    BatchEdit.prototype.validateFormObj = function () {\n        return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n    };\n    BatchEdit.prototype.batchSave = function () {\n        var gObj = this.parent;\n        this.saveCell();\n        if (gObj.isEdit) {\n            return;\n        }\n        var changes = this.getBatchChanges();\n        var args = { batchChanges: changes, cancel: false };\n        gObj.trigger(events.beforeBatchSave, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.showSpinner();\n        gObj.notify(events.bulkSave, { changes: changes });\n    };\n    BatchEdit.prototype.getBatchChanges = function () {\n        var changes = {\n            addedRecords: [],\n            deletedRecords: [],\n            changedRecords: []\n        };\n        var rows = this.parent.getRowsObject();\n        var mRows = this.parent.getMovableRowsObject();\n        var frzCols = this.parent.getFrozenColumns();\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (frzCols) {\n                this.mergeBatchChanges(row, mRows[row.index], frzCols);\n            }\n            if (row.isDirty) {\n                switch (row.edit) {\n                    case 'add':\n                        changes.addedRecords.push(row.changes);\n                        break;\n                    case 'delete':\n                        changes.deletedRecords.push(row.data);\n                        break;\n                    default:\n                        changes.changedRecords.push(row.changes);\n                }\n            }\n        }\n        return changes;\n    };\n    BatchEdit.prototype.mergeBatchChanges = function (row, mRow, frzCols) {\n        if (row.isDirty) {\n            if (mRow.isDirty) {\n                var i_1 = 0;\n                Object.keys(row.changes).forEach(function (key) {\n                    if (i_1 < frzCols) {\n                        delete mRow.changes[key];\n                    }\n                    i_1++;\n                });\n                extend(row.changes, mRow.changes);\n            }\n        }\n        else if (mRow.isDirty) {\n            extend(row.changes, mRow.changes);\n        }\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n        var rows = this.parent.getRowsObject();\n        var i = 0;\n        for (var len = rows.length; i < len; i++) {\n            if (rows[i].uid === uid) {\n                break;\n            }\n        }\n        rows.splice(i, 1);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addRowObject = function (row) {\n        this.parent.getRowsObject().unshift(row);\n    };\n    BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n        var gObj = this.parent;\n        var index = data ? this.getIndexFromData(data) : gObj.selectedRowIndex;\n        var selectedRows = gObj.getSelectedRows();\n        var args = {\n            primaryKey: this.parent.getPrimaryKeyFieldNames(),\n            rowIndex: index,\n            rowData: data ? data : gObj.getSelectedRecords()[0],\n            row: data ? gObj.getRows()[index] : selectedRows[0], cancel: false\n        };\n        if (!args.row) {\n            return;\n        }\n        gObj.trigger(events.beforeBatchDelete, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.clearSelection();\n        var uid = args.row.getAttribute('data-uid');\n        if (args.row.classList.contains('e-insertedrow')) {\n            this.removeRowObjectFromUID(uid);\n            remove(args.row);\n        }\n        else {\n            var rowObj = gObj.getRowObjectFromUID(uid);\n            rowObj.isDirty = true;\n            rowObj.edit = 'delete';\n            classList(args.row, ['e-hiddenrow', 'e-updatedtd'], []);\n            if (gObj.getFrozenColumns()) {\n                classList(data ? gObj.getMovableRows()[index] : selectedRows[1], ['e-hiddenrow', 'e-updatedtd'], []);\n                if (gObj.frozenRows && index < gObj.frozenRows) {\n                    gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody')\n                        .appendChild(gObj.getMovableRowByIndex(gObj.frozenRows - 1));\n                    gObj.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody')\n                        .appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                }\n            }\n            else if (gObj.frozenRows && index < gObj.frozenRows) {\n                gObj.getHeaderContent().querySelector('tbody').appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n            }\n        }\n        this.refreshRowIdx();\n        gObj.selectRow(index);\n        delete args.row;\n        gObj.trigger(events.batchDelete, args);\n        gObj.notify(events.batchDelete, { rows: this.parent.getRowsObject() });\n        gObj.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.refreshRowIdx = function () {\n        var rows = [];\n        var mRows = [];\n        var nonMovableRows = [];\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.parent.frozenRows) {\n            rows = [].slice.call(this.parent.getHeaderTable().querySelector('tbody').children);\n            if (frzCols) {\n                mRows = [].slice.call(this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n                for (var i = 0; i < mRows.length; i++) {\n                    nonMovableRows[i] = createElement('tr', { className: 'emptynonmv' });\n                }\n            }\n        }\n        if (frzCols) {\n            mRows = mRows.concat([].slice.call(this.parent.getContentTable().querySelector('tbody').children));\n            nonMovableRows = nonMovableRows.concat([].slice.call(this.parent.element.querySelector('.e-movablecontent').querySelector('tbody').children));\n        }\n        rows = rows.concat([].slice.call(this.parent.getContentTable().querySelector('tbody').children));\n        for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                rows[i].setAttribute('aria-rowindex', j.toString());\n                if (frzCols) {\n                    mRows[i].setAttribute('aria-rowindex', j.toString());\n                    if (nonMovableRows[i].classList.contains('e-row')) {\n                        nonMovableRows[i].setAttribute('aria-rowindex', j.toString());\n                    }\n                }\n                j++;\n            }\n            else {\n                rows[i].removeAttribute('aria-rowindex');\n                if (frzCols) {\n                    mRows[i].removeAttribute('aria-rowindex');\n                }\n            }\n        }\n    };\n    BatchEdit.prototype.getIndexFromData = function (data) {\n        return inArray(data, this.parent.getCurrentViewRecords());\n    };\n    BatchEdit.prototype.bulkAddRow = function (data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowAdding) {\n            return;\n        }\n        if (gObj.isEdit) {\n            this.saveCell();\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        var defaultData = data ? data : this.getDefaultData();\n        var args = {\n            defaultData: defaultData,\n            primaryKey: gObj.getPrimaryKeyFieldNames(),\n            cancel: false\n        };\n        gObj.trigger(events.beforeBatchAdd, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.clearSelection();\n        var mTr;\n        var mTbody;\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var model = new RowModelGenerator(this.parent);\n        var modelData = model.generateRows([args.defaultData]);\n        var tr = row.render(modelData[0], gObj.getColumns());\n        var col;\n        var index;\n        for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n            tr.insertBefore(createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n            modelData[0].cells.unshift(new Cell({ cellType: CellType.Indent }));\n        }\n        var tbody = gObj.getContentTable().querySelector('tbody');\n        tr.classList.add('e-insertedrow');\n        if (tbody.querySelector('.e-emptyrow')) {\n            tbody.querySelector('.e-emptyrow').classList.add('e-hide');\n        }\n        if (gObj.getFrozenColumns()) {\n            mTr = this.renderMovable(tr);\n            if (gObj.frozenRows) {\n                mTbody = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            }\n            else {\n                mTbody = gObj.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            }\n            mTbody.insertBefore(mTr, mTbody.firstChild);\n            addClass(mTr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n        if (gObj.frozenRows) {\n            tbody = gObj.getHeaderContent().querySelector('tbody');\n        }\n        tbody.insertBefore(tr, tbody.firstChild);\n        addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n        modelData[0].isDirty = true;\n        modelData[0].changes = extend({}, modelData[0].data);\n        modelData[0].edit = 'add';\n        this.addRowObject(modelData[0]);\n        this.refreshRowIdx();\n        this.focus.forgetPrevious();\n        gObj.notify(events.batchAdd, { rows: this.parent.getRowsObject() });\n        gObj.selectRow(0);\n        if (!data) {\n            index = this.findNextEditableCell(0, true);\n            col = gObj.getColumns()[index];\n            this.editCell(0, col.field, true);\n        }\n        var args1 = {\n            defaultData: args.defaultData, row: tr,\n            columnObject: col, columnIndex: index, primaryKey: args.primaryKey, cell: tr.cells[index]\n        };\n        gObj.trigger(events.batchAdd, args1);\n    };\n    BatchEdit.prototype.renderMovable = function (ele) {\n        var mEle = ele.cloneNode(true);\n        for (var i = 0; i < this.parent.frozenColumns; i++) {\n            mEle.removeChild(mEle.children[0]);\n        }\n        for (var i = this.parent.frozenColumns, len = ele.childElementCount; i < len; i++) {\n            ele.removeChild(ele.children[ele.childElementCount - 1]);\n        }\n        return mEle;\n    };\n    BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd) {\n        var cols = this.parent.getColumns();\n        var endIndex = cols.length;\n        for (var i = columnIndex; i < endIndex; i++) {\n            if (!isAdd && this.checkNPCell(cols[i])) {\n                return i;\n            }\n            else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing &&\n                !(cols[i].isIdentity && cols[i].isPrimaryKey)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.checkNPCell = function (col) {\n        return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n    };\n    BatchEdit.prototype.getDefaultData = function () {\n        var gObj = this.parent;\n        var data = {};\n        var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n        for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (!isNullOrUndefined(col.field) && !isComplexField(col.field)) {\n                data[col.field] = col.defaultValue ? col.defaultValue : dValues[col.type];\n            }\n            if (!isNullOrUndefined(col.field) && isComplexField(col.field)) {\n                var splits = col.field.split('.');\n                data[splits[0]] = !isNullOrUndefined(data[splits[0]]) ? data[splits[0]] : {};\n                col.defaultValue ? data[splits[0]][splits[1]] = col.defaultValue : data[splits[0]][splits[1]] = dValues[col.type];\n            }\n        }\n        return data;\n    };\n    BatchEdit.prototype.setCellIdx = function (target) {\n        var gLen = 0;\n        if (this.parent.allowGrouping) {\n            gLen = this.parent.groupSettings.columns.length;\n        }\n        this.cellDetails.cellIndex = target.cellIndex - gLen;\n        this.cellDetails.rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n    };\n    BatchEdit.prototype.editCell = function (index, field, isAdd) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        var keys = gObj.getPrimaryKeyFieldNames();\n        if (gObj.editSettings.allowEditing && col.allowEditing) {\n            if (gObj.isEdit && !(this.cellDetails.column.field === field\n                && (this.cellDetails.rowIndex === index && this.parent.getDataRows().length - 1 !== index))) {\n                this.saveCell();\n                if (this.cellDetails.rowIndex === index && this.cellDetails.column.field === field) {\n                    return;\n                }\n            }\n            if (gObj.isEdit) {\n                return;\n            }\n            var row = void 0;\n            var rowData = void 0;\n            var mRowData = void 0;\n            var colIdx = gObj.getColumnIndexByField(field);\n            var frzCols = gObj.getFrozenColumns();\n            if (frzCols && colIdx >= frzCols) {\n                row = gObj.getMovableDataRows()[index];\n                mRowData = this.parent.getRowObjectFromUID(this.parent.getMovableDataRows()[index].getAttribute('data-uid'));\n                rowData = mRowData.changes ? extend({}, mRowData.changes) : extend({}, this.getDataByIndex(index));\n            }\n            else {\n                row = gObj.getDataRows()[index];\n                rowData = extend({}, this.getDataByIndex(index));\n            }\n            if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.template || col.columns ||\n                (col.isPrimaryKey && col.isIdentity)) {\n                return;\n            }\n            var rowObj = gObj.getRowObjectFromUID(row.getAttribute('data-uid'));\n            var cells = [].slice.apply(row.cells);\n            var isComplex = !isNullOrUndefined(col.field) && isComplexField(col.field);\n            var args = {\n                cell: cells[this.getColIndex(cells, this.getCellIdx(col.uid))], row: row,\n                columnName: col.field, columnObject: col, isForeignKey: !isNullOrUndefined(col.foreignKeyValue),\n                primaryKey: keys, rowData: rowData,\n                validationRules: extend({}, col.validationRules ? col.validationRules : {}),\n                value: isComplex && !isAdd ? getComplexValue(rowData, col.field) : rowData[col.field],\n                type: !isAdd ? 'edit' : 'add', cancel: false,\n                foreignKeyData: rowObj && rowObj.foreignKeyData\n            };\n            if (!args.cell) {\n                return;\n            }\n            gObj.trigger(events.cellEdit, args);\n            if (args.cancel) {\n                return;\n            }\n            this.cellDetails = {\n                rowData: rowData, column: col, value: args.value, isForeignKey: args.isForeignKey, rowIndex: index,\n                cellIndex: parseInt(args.cell.getAttribute('aria-colindex'), 10),\n                foreignKeyData: args.foreignKeyData\n            };\n            if (args.cell.classList.contains('e-updatedtd')) {\n                this.isColored = true;\n                args.cell.classList.remove('e-updatedtd');\n            }\n            gObj.isEdit = true;\n            gObj.clearSelection();\n            if (!gObj.isCheckBoxSelection || !gObj.isPersistSelection) {\n                gObj.selectRow(this.cellDetails.rowIndex, true);\n            }\n            this.renderer.update(args);\n            this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n            gObj.editModule.applyFormValidation([col]);\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n        var col = this.parent.getColumnByField(field);\n        if (col && !col.isPrimaryKey) {\n            var td = this.parent.getDataRows()[rowIndex].cells[this.parent.getColumnIndexByField(field)];\n            var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n            this.refreshTD(td, col, rowObj, value);\n            this.parent.trigger(events.queryCellInfo, {\n                cell: td, column: col, data: rowObj.changes\n            });\n        }\n    };\n    BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n        var isComplex = !isNullOrUndefined(field) && isComplexField(field);\n        if (!rowObj.changes) {\n            rowObj.changes = extend({}, rowObj.data);\n        }\n        if (isComplex) {\n            rowObj.changes[field.split('.')[0]] = extend({}, rowObj.data[field.split('.')[0]]);\n            rowObj.changes[field.split('.')[0]][field.split('.')[1]] = value;\n        }\n        else {\n            rowObj.changes[field] = value;\n        }\n        if (rowObj.data[field] !== value) {\n            rowObj.isDirty = true;\n        }\n    };\n    BatchEdit.prototype.updateRow = function (index, data) {\n        var keys = Object.keys(data);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var col = keys_1[_i];\n            this.updateCell(index, col, data[col]);\n        }\n    };\n    BatchEdit.prototype.getCellIdx = function (uid) {\n        var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        return cIdx;\n    };\n    BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n        var cell = new CellRenderer(this.parent, this.serviceLocator);\n        var rowcell;\n        this.setChanges(rowObj, column.field, value);\n        var frzCols = this.parent.getFrozenColumns();\n        refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n        if (frzCols && this.getCellIdx(column.uid) >= frzCols && this.parent.getColumns().length === rowObj.cells.length) {\n            rowcell = rowObj.cells.slice(frzCols, rowObj.cells.length);\n        }\n        else {\n            rowcell = rowObj.cells;\n        }\n        cell.refreshTD(td, rowcell[this.getCellIdx(column.uid) - (this.getCellIdx(column.uid) >= frzCols ? frzCols : 0)], rowObj.changes);\n        td.classList.add('e-updatedtd');\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.getColIndex = function (cells, index) {\n        var cIdx = 0;\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns) {\n            cIdx = this.parent.groupSettings.columns.length;\n        }\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n            if (colIndex === index - cIdx) {\n                return m;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.saveCell = function (isForceSave) {\n        var gObj = this.parent;\n        if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n            return;\n        }\n        var tr = parentsUntil(this.form, 'e-row');\n        var column = this.cellDetails.column;\n        var editedData = gObj.editModule.getCurrentEditedData(this.form, {});\n        var isComplex = !isNullOrUndefined(column.field) && isComplexField(column.field);\n        var cloneEditedData = extend({}, editedData);\n        editedData = extend({}, editedData, this.cellDetails.rowData);\n        if (isComplex) {\n            var splits = column.field.split('.');\n            var cloneComplexData = extend({}, this.cellDetails.rowData[splits[0]]);\n            editedData[splits[0]] = extend({}, editedData[splits[0]], this.cellDetails.rowData[splits[0]]);\n            this.cellDetails.rowData[splits[0]][splits[1]] = cloneComplexData[splits[1]];\n            editedData[splits[0]][splits[1]] = cloneEditedData[splits[0]][splits[1]];\n        }\n        else {\n            editedData[column.field] = cloneEditedData[column.field];\n        }\n        var args = {\n            columnName: column.field,\n            value: isComplex ? getComplexValue(editedData, column.field) : editedData[column.field],\n            rowData: this.cellDetails.rowData,\n            previousValue: this.cellDetails.value,\n            columnObject: column,\n            cell: this.form.parentElement,\n            isForeignKey: this.cellDetails.isForeignKey, cancel: false\n        };\n        if (!isForceSave) {\n            gObj.trigger(events.cellSave, args);\n        }\n        if (args.cancel) {\n            return;\n        }\n        gObj.editModule.destroyForm();\n        gObj.isEdit = false;\n        gObj.editModule.destroyWidgets([column]);\n        this.parent.notify(events.tooltipDestroy, {});\n        this.refreshTD(args.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), args.value);\n        removeClass([tr], ['e-editedrow', 'e-batchrow']);\n        removeClass([args.cell], ['e-editedbatchcell', 'e-boolcell']);\n        if (!isNullOrUndefined(args.value) && args.value.toString() ===\n            (!isNullOrUndefined(this.cellDetails.value) ? this.cellDetails.value : '').toString() && !this.isColored\n            || (isNullOrUndefined(args.value) && isNullOrUndefined(this.cellDetails.value) &&\n                !args.cell.parentElement.classList.contains('e-insertedrow'))) {\n            args.cell.classList.remove('e-updatedtd');\n        }\n        gObj.trigger(events.cellSaved, args);\n        gObj.notify(events.toolbarRefresh, {});\n        this.isColored = false;\n    };\n    BatchEdit.prototype.getDataByIndex = function (index) {\n        var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n        return row.changes ? row.changes : row.data;\n    };\n    BatchEdit.prototype.keyDownHandler = function (e) {\n        if (e.action === 'tab' && this.parent.isEdit) {\n            var rowcell = parentsUntil(e.target, 'e-rowcell');\n            if (rowcell) {\n                var cell = rowcell.querySelector('.e-field');\n                if (cell) {\n                    var visibleColumns = this.parent.getVisibleColumns();\n                    if (visibleColumns[visibleColumns.length - 1].field === cell.getAttribute('name')) {\n                        this.saveCell();\n                    }\n                }\n            }\n        }\n    };\n    return BatchEdit;\n}());\nexport { BatchEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `DialogEdit` module is used to handle dialog editing actions.\n * @hidden\n */\nvar DialogEdit = /** @class */ (function (_super) {\n    __extends(DialogEdit, _super);\n    function DialogEdit(parent, serviceLocator, renderer) {\n        var _this = \n        //constructor\n        _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    DialogEdit.prototype.closeEdit = function () {\n        //closeEdit\n        _super.prototype.closeEdit.call(this);\n    };\n    DialogEdit.prototype.addRecord = function (data, index) {\n        //addRecord\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    DialogEdit.prototype.endEdit = function () {\n        //endEdit\n        _super.prototype.endEdit.call(this);\n    };\n    DialogEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n        //deleteRecord\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    DialogEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return DialogEdit;\n}(NormalEdit));\nexport { DialogEdit };\n","import { extend } from '@syncfusion/ej2-base';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, isComplexField, getComplexFieldID, getComplexValue } from '../base/util';\n/**\n * `DatePickerEditCell` is used to handle datepicker cell type editing.\n * @hidden\n */\nvar DatePickerEditCell = /** @class */ (function () {\n    function DatePickerEditCell(parent) {\n        this.parent = parent;\n    }\n    DatePickerEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var complexFieldName = getComplexFieldID(args.column.field);\n        var isComplex = isComplexField(args.column.field);\n        return createElement('input', {\n            className: 'e-field', attrs: {\n                id: isComplex ? this.parent.element.id + complexFieldName : this.parent.element.id + args.column.field,\n                name: isComplex ? complexFieldName : args.column.field, type: 'text', 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    DatePickerEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DatePickerEditCell.prototype.write = function (args) {\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        /* tslint:disable-next-line:no-any */\n        var isComplex = isComplexField(args.column.field);\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        var value = isComplex && !isAddRow ?\n            getComplexValue(args.rowData, args.column.field) : args.rowData[args.column.field];\n        value = value ? new Date(value) : null;\n        this.obj = new DatePicker(extend({\n            floatLabelType: isInline ? 'Never' : 'Always',\n            value: value,\n            placeholder: isInline ?\n                '' : args.column.headerText, enableRtl: this.parent.enableRtl,\n            enabled: isEditable(args.column, args.type, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    DatePickerEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DatePickerEditCell;\n}());\nexport { DatePickerEditCell };\n","import { EventHandler, closest } from '@syncfusion/ej2-base';\nimport { extend, getValue } from '@syncfusion/ej2-base';\nimport { remove, createElement } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setValue } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { EditRender } from '../renderer/edit-renderer';\nimport { BooleanEditCell } from '../renderer/boolean-edit-cell';\nimport { DropDownEditCell } from '../renderer/dropdown-edit-cell';\nimport { NumericEditCell } from '../renderer/numeric-edit-cell';\nimport { DefaultEditCell } from '../renderer/default-edit-cell';\nimport { InlineEdit } from './inline-edit';\nimport { BatchEdit } from './batch-edit';\nimport { DialogEdit } from './dialog-edit';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { parentsUntil, changeButtonType } from '../base/util';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport { DatePickerEditCell } from '../renderer/datepicker-edit-cell';\nimport { calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\n/**\n * The `Edit` module is used to handle editing actions.\n */\nvar Edit = /** @class */ (function () {\n    /**\n     * Constructor for the Grid editing module\n     * @hidden\n     */\n    function Edit(parent, serviceLocator) {\n        this.editCellType = {\n            'dropdownedit': DropDownEditCell, 'numericedit': NumericEditCell,\n            'datepickeredit': DatePickerEditCell, 'booleanedit': BooleanEditCell, 'defaultedit': DefaultEditCell\n        };\n        this.editType = { 'Inline': InlineEdit, 'Normal': InlineEdit, 'Batch': BatchEdit, 'Dialog': DialogEdit };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.addEventListener();\n        this.updateEditObj();\n        this.createAlertDlg();\n        this.createConfirmDlg();\n    }\n    Edit.prototype.updateColTypeObj = function () {\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            col.edit = extend(new this.editCellType[col.editType && this.editCellType[col.editType] ?\n                col.editType : 'defaultedit'](this.parent, this.serviceLocator), col.edit || {});\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Edit.prototype.getModuleName = function () {\n        return 'edit';\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowAdding':\n                case 'allowDeleting':\n                case 'allowEditing':\n                    if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n                        this.initialEnd();\n                    }\n                    break;\n                case 'mode':\n                    this.updateEditObj();\n                    gObj.isEdit = false;\n                    gObj.refresh();\n                    break;\n            }\n        }\n    };\n    Edit.prototype.updateEditObj = function () {\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n        this.renderer = new EditRender(this.parent, this.serviceLocator);\n        this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n    };\n    Edit.prototype.initialEnd = function () {\n        this.updateColTypeObj();\n    };\n    Edit.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n    };\n    Edit.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n    };\n    Edit.prototype.tapEvent = function (e) {\n        if (this.getUserAgent()) {\n            if (!Global.timer) {\n                Global.timer = setTimeout(function () {\n                    Global.timer = null;\n                }, 300);\n            }\n            else {\n                clearTimeout(Global.timer);\n                Global.timer = null;\n                this.parent.notify(events.doubleTap, e);\n            }\n        }\n    };\n    Edit.prototype.getUserAgent = function () {\n        var userAgent = window.navigator.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    /**\n     * Edits any bound record in the Grid by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     */\n    Edit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'Batch') {\n            return;\n        }\n        if (!gObj.getSelectedRows().length) {\n            if (!tr) {\n                this.showDialog('EditOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        else if (!tr) {\n            tr = gObj.getSelectedRows()[0];\n        }\n        if (tr.style.display === 'none') {\n            return;\n        }\n        this.editModule.startEdit(tr);\n        this.refreshToolbar();\n        gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n        this.parent.notify('start-edit', {});\n    };\n    /**\n     * Cancels edited state.\n     */\n    Edit.prototype.closeEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog\n            && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n            this.showDialog('CancelEdit', this.dialogObj);\n            return;\n        }\n        this.editModule.closeEdit();\n        this.refreshToolbar();\n        this.parent.notify('close-edit', {});\n    };\n    Edit.prototype.refreshToolbar = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * To adds a new row at the top with the given data. When data is not passed, it will add empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Edit.prototype.addRecord = function (data, index) {\n        if (!this.parent.editSettings.allowAdding) {\n            return;\n        }\n        this.editModule.addRecord(data, index);\n        this.refreshToolbar();\n        this.parent.notify('start-add', {});\n    };\n    /**\n     * Deletes a record with the given options. If fieldname and data are not given, the Grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field name of the column.\n     * @param {Object} data - Defines the JSON data record to be deleted.\n     */\n    Edit.prototype.deleteRecord = function (fieldname, data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowDeleting) {\n            return;\n        }\n        if (!data) {\n            if (!gObj.getSelectedRecords().length) {\n                this.showDialog('DeleteOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        if (gObj.editSettings.showDeleteConfirmDialog) {\n            this.showDialog('ConfirmDelete', this.dialogObj);\n            return;\n        }\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * Deletes a visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Edit.prototype.deleteRow = function (tr) {\n        this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Edit.prototype.endEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog &&\n            (isNullOrUndefined(this.formObj) || this.formObj.validate())) {\n            this.showDialog('BatchSaveConfirm', this.dialogObj);\n            return;\n        }\n        this.endEditing();\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     */\n    Edit.prototype.updateCell = function (rowIndex, field, value) {\n        this.editModule.updateCell(rowIndex, field, value);\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     */\n    Edit.prototype.updateRow = function (index, data) {\n        this.editModule.updateRow(index, data);\n    };\n    /**\n     * Resets added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchCancel = function () {\n        this.closeEdit();\n    };\n    /**\n     * Bulk saves added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchSave = function () {\n        this.endEdit();\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     */\n    Edit.prototype.editCell = function (index, field) {\n        this.editModule.editCell(index, field);\n    };\n    /**\n     * Checks the status of validation at the time of editing. If validation is passed, it returns true.\n     * @return {boolean}\n     */\n    Edit.prototype.editFormValidate = function () {\n        if (this.formObj) {\n            return this.formObj.validate();\n        }\n        return false;\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     * @return {Object}\n     */\n    Edit.prototype.getBatchChanges = function () {\n        return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n    };\n    /**\n     * Gets the current value of the edited component.\n     */\n    Edit.prototype.getCurrentEditCellData = function () {\n        var obj = this.getCurrentEditedData(this.formObj.element, {});\n        return obj[Object.keys(obj)[0]];\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     */\n    Edit.prototype.saveCell = function () {\n        this.editModule.saveCell();\n    };\n    Edit.prototype.endEditing = function () {\n        this.editModule.endEdit();\n        this.refreshToolbar();\n    };\n    Edit.prototype.showDialog = function (content, obj) {\n        obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n        obj.dataBind();\n        obj.show();\n    };\n    Edit.prototype.getValueFromType = function (col, value) {\n        var val = value;\n        switch (col.type) {\n            case 'number':\n                val = !isNaN(parseFloat(value)) ? parseFloat(value) : null;\n                break;\n            case 'boolean':\n                if (col.editType !== 'booleanedit') {\n                    val = value === this.l10n.getConstant('True') ? true : false;\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                if (col.editType !== 'datepicker' && value && value.length) {\n                    val = new Date(value);\n                }\n                break;\n        }\n        return val;\n    };\n    Edit.prototype.destroyToolTip = function () {\n        var elements = [].slice.call(this.parent.element.querySelectorAll('.e-griderror'));\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            remove(elem);\n        }\n        this.parent.getContent().firstElementChild.style.position = 'relative';\n    };\n    Edit.prototype.createConfirmDlg = function () {\n        this.dialogObj = this.dlgWidget([\n            {\n                click: this.dlgOk.bind(this),\n                buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n            },\n            {\n                click: this.dlgCancel.bind(this),\n                buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n            }\n        ], 'EditConfirm');\n    };\n    Edit.prototype.createAlertDlg = function () {\n        this.alertDObj = this.dlgWidget([\n            {\n                click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n            }\n        ], 'EditAlert');\n    };\n    Edit.prototype.alertClick = function () {\n        this.alertDObj.hide();\n    };\n    Edit.prototype.dlgWidget = function (btnOptions, name) {\n        var div = createElement('div', { id: this.parent.element.id + name });\n        this.parent.element.appendChild(div);\n        var options = {\n            showCloseIcon: false,\n            isModal: true,\n            visible: false,\n            closeOnEscape: true,\n            target: this.parent.element,\n            width: '320px',\n            animationSettings: { effect: 'None' }\n        };\n        options.buttons = btnOptions;\n        var obj = new Dialog(options);\n        obj.appendTo(div);\n        changeButtonType(obj.element);\n        return obj;\n    };\n    Edit.prototype.dlgCancel = function () {\n        this.dialogObj.hide();\n    };\n    Edit.prototype.dlgOk = function (e) {\n        switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n            case this.l10n.getConstant('ConfirmDelete'):\n                this.editModule.deleteRecord();\n                break;\n            case this.l10n.getConstant('CancelEdit'):\n                this.editModule.closeEdit();\n                break;\n            case this.l10n.getConstant('BatchSaveConfirm'):\n                this.endEditing();\n                break;\n            case this.l10n.getConstant('BatchSaveLostChanges'):\n                this.executeAction();\n                break;\n        }\n        this.dlgCancel();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.initialEnd, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.autoCol, this.updateColTypeObj, this);\n        this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n        this.parent.on(events.preventBatch, this.preventBatch, this);\n        this.parent.on(events.destroyForm, this.destroyForm, this);\n        this.actionBeginFunction = this.onActionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.initialEnd, this.initialEnd);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.autoCol, this.updateColTypeObj);\n        this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n        this.parent.off(events.preventBatch, this.preventBatch);\n        this.parent.off(events.destroyForm, this.destroyForm);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.off(events.initialEnd, this.unwireEvents);\n    };\n    Edit.prototype.actionComplete = function (e) {\n        var actions = ['add', 'beginEdit', 'save', 'delete', 'cancel'];\n        if (actions.indexOf(e.requestType) < 0) {\n            this.parent.isEdit = false;\n        }\n        this.refreshToolbar();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.getCurrentEditedData = function (form, editedData) {\n        var gObj = this.parent;\n        var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n        for (var i = 0, len = inputs.length; i < len; i++) {\n            var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n            var value = void 0;\n            if (col && col.field) {\n                var temp = col.edit.read;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                if (col.type !== 'checkbox') {\n                    value = gObj.editModule.getValueFromType(col, col.edit.read(inputs[i]));\n                }\n                else {\n                    value = inputs[i].checked;\n                }\n                setValue(col.field, value, editedData);\n            }\n        }\n        return editedData;\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onActionBegin = function (e) {\n        var restrictedRequestTypes = ['filterafteropen', 'filterbeforeopen', 'filterchoicerequest', 'save'];\n        if (this.parent.editSettings.mode !== 'Batch' && this.formObj && !this.formObj.isDestroyed\n            && restrictedRequestTypes.indexOf(e.requestType) === -1) {\n            this.destroyForm();\n            this.destroyWidgets();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyWidgets = function (cols) {\n        cols = cols ? cols : this.parent.getColumns();\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (col.edit.destroy) {\n                col.edit.destroy();\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyForm = function () {\n        this.destroyToolTip();\n        if (this.formObj && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n        this.destroyToolTip();\n    };\n    /**\n     * To destroy the editing.\n     * @return {void}\n     * @hidden\n     */\n    Edit.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.destroyForm();\n        }\n        this.removeEventListener();\n        var elem = this.dialogObj.element;\n        if (elem.childElementCount > 0) {\n            this.dialogObj.destroy();\n            remove(elem);\n        }\n        elem = this.alertDObj.element;\n        if (elem.childElementCount > 0) {\n            this.alertDObj.destroy();\n            remove(elem);\n        }\n        if (!hasGridChild) {\n            return;\n        }\n        this.unwireEvents();\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n    };\n    Edit.prototype.keyPressHandler = function (e) {\n        switch (e.action) {\n            case 'insert':\n                this.addRecord();\n                break;\n            case 'delete':\n                if ((e.target.tagName !== 'INPUT' || e.target.classList.contains('e-checkselect'))\n                    && !document.querySelector('.e-popup-open')) {\n                    this.deleteRecord();\n                }\n                break;\n            case 'f2':\n                this.startEdit();\n                break;\n            case 'enter':\n                if (!parentsUntil(e.target, '.e-unboundcelldiv') && this.parent.editSettings.mode !== 'Batch' &&\n                    (parentsUntil(e.target, 'e-gridcontent') || (this.parent.frozenRows\n                        && parentsUntil(e.target, 'e-headercontent')))\n                    && !document.querySelectorAll('.e-popup-open').length) {\n                    e.preventDefault();\n                    this.endEdit();\n                }\n                break;\n            case 'escape':\n                this.closeEdit();\n                break;\n        }\n    };\n    Edit.prototype.preventBatch = function (args) {\n        this.preventObj = args;\n        this.showDialog('BatchSaveLostChanges', this.dialogObj);\n    };\n    Edit.prototype.executeAction = function () {\n        this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7, this.preventObj.arg8);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.applyFormValidation = function (cols) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        var form = gObj.element.querySelector('.e-gridform');\n        var mForm = gObj.element.querySelectorAll('.e-gridform')[1];\n        var rules = {};\n        var mRules = {};\n        cols = cols ? cols : gObj.columns;\n        for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n            var col = cols_2[_i];\n            if (col.validationRules && form.querySelectorAll('#' + gObj.element.id + col.field).length) {\n                rules[col.field] = col.validationRules;\n            }\n            else if (frzCols && col.validationRules\n                && mForm.querySelectorAll('#' + gObj.element.id + col.field).length) {\n                mRules[col.field] = col.validationRules;\n            }\n        }\n        this.parent.editModule.formObj = this.createFormObj(form, rules);\n        if (frzCols && this.parent.editSettings.mode !== 'Dialog') {\n            this.parent.editModule.mFormObj = this.createFormObj(mForm, mRules);\n        }\n    };\n    Edit.prototype.createFormObj = function (form, rules) {\n        var _this = this;\n        return new FormValidator(form, {\n            rules: rules,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            customPlacement: function (inputElement, error) {\n                _this.valErrorPlacement(inputElement, error);\n            }\n        });\n    };\n    Edit.prototype.valErrorPlacement = function (inputElement, error) {\n        if (this.parent.isEdit) {\n            var id = error.getAttribute('for');\n            var elem = this.getElemTable(inputElement).querySelector('#' + id + '_Error');\n            if (!elem) {\n                this.createTooltip(inputElement, error, id, '');\n            }\n            else {\n                elem.querySelector('.e-tip-content').innerHTML = error.innerHTML;\n            }\n        }\n    };\n    Edit.prototype.getElemTable = function (inputElement) {\n        var isFHdr;\n        if (this.parent.editSettings.mode !== 'Dialog') {\n            isFHdr = (this.parent.frozenRows && this.parent.frozenRows\n                > (parseInt(closest(inputElement, '.e-row').getAttribute('aria-rowindex'), 10) || 0));\n        }\n        return this.parent.editSettings.mode !== 'Dialog' ? isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable() :\n            this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n    };\n    Edit.prototype.validationComplete = function (args) {\n        if (this.parent.isEdit) {\n            var elem = this.getElemTable(args.element).querySelector('#' + args.inputName + '_Error');\n            if (elem) {\n                if (args.status === 'failure') {\n                    elem.style.display = '';\n                }\n                else {\n                    elem.style.display = 'none';\n                }\n            }\n        }\n    };\n    Edit.prototype.createTooltip = function (element, error, name, display) {\n        var gcontent = this.parent.getContent().firstElementChild;\n        var isScroll = gcontent.scrollHeight > gcontent.clientHeight;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var isFHdr;\n        if (isInline) {\n            isFHdr = (this.parent.frozenRows && this.parent.frozenRows\n                > (parseInt(closest(element, '.e-row').getAttribute('aria-rowindex'), 10) || 0));\n        }\n        var fCont = this.parent.getContent().querySelector('.e-frozencontent');\n        var table = isInline ?\n            (isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable()) :\n            this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper').querySelector('.e-dlg-content');\n        var client = table.getBoundingClientRect();\n        var left = isInline ?\n            this.parent.element.getBoundingClientRect().left : client.left;\n        var input = parentsUntil(element, 'e-rowcell');\n        var inputClient = input.getBoundingClientRect();\n        var td = closest(element, 'td').getBoundingClientRect();\n        var div = createElement('div', {\n            className: 'e-tooltip-wrap e-control e-popup e-griderror',\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                ((isFHdr ? inputClient.top + inputClient.height : inputClient.bottom - client.top\n                    - (this.parent.getFrozenColumns() ? fCont.scrollTop : 0)) + table.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - left + table.scrollLeft + inputClient.width / 2) + 'px;' +\n                'max-width:' + td.width + 'px;text-align:center;'\n        });\n        var content = createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        table.appendChild(div);\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(div, null).getPropertyValue('font-size'), 10);\n        if (div.getBoundingClientRect().width < td.width &&\n            div.querySelector('label').getBoundingClientRect().height / (lineHeight * 1.2) >= 2) {\n            div.style.width = div.style.maxWidth;\n        }\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n        if (!isScroll && isInline && !this.parent.allowPaging) {\n            gcontent.style.position = 'static';\n            var pos = calculateRelativeBasedPosition(input, div);\n            div.style.top = pos.top + inputClient.height + 9 + 'px';\n        }\n    };\n    return Edit;\n}());\nexport { Edit };\n/** @hidden */\nexport var Global;\n(function (Global) {\n    Global.timer = null;\n})(Global || (Global = {}));\n","import { createElement, classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { changeButtonType, createCboxWithWrap, toogleCheckbox, parentsUntil } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.isDlgOpen = false;\n        this.dlghide = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.cBoxTrue = createCheckBox(true, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(true, { checked: false, label: ' ' });\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.cBoxTrue.insertBefore(createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        this.unWireEvents();\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n            this.dlgObj.destroy();\n        }\n    };\n    ColumnChooser.prototype.rtlUpdate = function () {\n        if (this.parent.enableRtl) {\n            addClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n        else {\n            removeClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n        this.parent.off(events.rtlUpdated, this.rtlUpdate);\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderDlgContent();\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('');\n                    this.removeCancelIcon();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.clearActions();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n        }\n        this.rtlUpdate();\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            this.dlgObj.hide();\n            // this.unWireEvents();\n            this.isDlgOpen = false;\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     * @return {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible) {\n            var pos = { X: null, Y: null };\n            var args1 = {\n                requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n                columns: this.getColumns(), cancel: false\n            };\n            this.parent.trigger(events.beforeOpenColumnChooser, args1);\n            if (args1.cancel) {\n                return;\n            }\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            this.dlgObj.element.style.display = 'block';\n            var newpos = calculateRelativeBasedPosition(closest(target, '.e-toolbar-item'), this.dlgObj.element);\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 258;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.target = document.body;\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            this.dlgObj.show();\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n        }\n        this.rtlUpdate();\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            this.dlgObj.position = { X: 'center', Y: 'center' };\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        this.dlgObj.show();\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.getColumns = function () {\n        var columns = this.parent.getColumns().filter(function (column) { return (column.type !== 'checkbox'\n            && column.showInColumnChooser === true) || (column.type === 'checkbox' && column.field !== undefined); });\n        return columns;\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        var y;\n        this.dlgDiv = createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        var xpos = this.parent.element.getBoundingClientRect().width - 250;\n        var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n        var tarElement = this.parent.element.querySelector('.e-ccdiv');\n        if (!isNullOrUndefined(tarElement)) {\n            y = tarElement.getBoundingClientRect().top;\n        }\n        var pos = { X: null, Y: null };\n        this.dlgObj = new Dialog({\n            header: this.l10n.getConstant('ChooseColumns'),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            buttons: [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: 'e-cc e-cc_okbtn',\n                    }\n                },\n                {\n                    click: this.clearActions.bind(this),\n                    buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n                }],\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: 'e-cc',\n            animationSettings: { effect: 'None' },\n        });\n        this.dlgObj.appendTo(this.dlgDiv);\n        changeButtonType(this.dlgObj.element);\n        this.wireEvents();\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search') }\n        });\n        var ccsearchicon = createElement('span', { className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n            attrs: { title: this.l10n.getConstant('Search') } });\n        var conDiv = createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        this.searchBoxObj = new SearchBox(ccsearchele);\n        var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n        this.innerDiv.appendChild(innerDivContent);\n        conDiv.appendChild(this.innerDiv);\n        this.mainDiv.appendChild(searchDiv);\n        this.mainDiv.appendChild(conDiv);\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        this.stateChangeColumns = [];\n        if (!isNullOrUndefined(args)) {\n            if (this.hideColumn.length) {\n                this.columnStateChange(this.hideColumn, false);\n            }\n            if (this.showColumn.length) {\n                this.columnStateChange(this.showColumn, true);\n            }\n            var params = {\n                requestType: 'columnstate', element: this.parent.element,\n                columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n            };\n            this.parent.trigger(events.actionComplete, params);\n            this.getShowHideService.setVisible(this.stateChangeColumns);\n            this.clearActions();\n            this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            currentCol.visible = state;\n            this.stateChangeColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.hideColumn = [];\n        this.showColumn = [];\n        // this.unWireEvents();\n        this.hideDialog();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid) {\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1) {\n                this.hideColumn.push(coluid);\n            }\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n        var clearSearch = false;\n        var fltrCol;\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            fltrCol = this.getColumns();\n            clearSearch = true;\n        }\n        else {\n            fltrCol = new DataManager(this.getColumns()).executeLocal(new Query()\n                .where('headerText', 'startswith', searchVal, true));\n        }\n        if (fltrCol.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n            if (!clearSearch) {\n                this.addcancelIcon();\n            }\n        }\n        else {\n            var nMatchele = createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n        }\n        this.flag = true;\n        this.stopTimer();\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n        this.searchBoxObj.wireEvent();\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n        }\n        EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n        this.searchBoxObj.unWireEvent();\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        var checkstate;\n        var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n        if (elem) {\n            toogleCheckbox(elem.parentElement);\n            elem.querySelector('.e-chk-hidden').focus();\n            if (elem.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (elem.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            else {\n                return;\n            }\n            var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n            this.checkstatecolumn(checkstate, columnUid);\n            this.refreshCheckboxButton();\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxButton = function () {\n        var searchValue = this.dlgObj.element.querySelector('.e-cc.e-input').value;\n        var selected = this.innerDiv.querySelectorAll('.e-check').length;\n        var btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n        btn.disabled = false;\n        if (selected === 0 && searchValue === '') {\n            btn.disabled = true;\n        }\n        btn.dataBind();\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n        this.ulElement = createElement('ul', { className: 'e-ccul-ele e-cc' });\n        for (var i = 0; i < gdCol.length; i++) {\n            var columns = gdCol[i];\n            this.renderCheckbox(columns);\n        }\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('');\n        for (var i = 0; i < this.parent.element.querySelectorAll('.e-cc-chbox').length; i++) {\n            var element = this.parent.element.querySelectorAll('.e-cc-chbox')[i];\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            var column = this.parent.getColumnByUid(columnUID);\n            if (column.visible) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        state ? classList(element, ['e-check'], ['e-uncheck']) : classList(element, ['e-uncheck'], ['e-check']);\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        cbox.querySelector('.e-label').innerHTML = label;\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (column) {\n        var cclist;\n        var hideColState;\n        var showColState;\n        var checkBoxObj;\n        if (column.showInColumnChooser) {\n            cclist = createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n            hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n            showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n            var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n            cclist.appendChild(cccheckboxlist);\n            this.ulElement.appendChild(cclist);\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        var proxy = this;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n","import { Row } from './../models/row';\nimport { CellType } from '../base/enum';\nimport { isNullOrUndefined, Internationalization, getValue } from '@syncfusion/ej2-base';\nimport { Cell } from '../models/cell';\nimport { ValueFormatter } from './../services/value-formatter';\nimport { Query } from '@syncfusion/ej2-data';\nimport { getForeignData } from '../base/util';\n/**\n * @hidden\n * `ExportHelper` for `PdfExport` & `ExcelExport`\n */\nvar ExportHelper = /** @class */ (function () {\n    function ExportHelper(parent) {\n        this.hideColumnInclude = false;\n        this.foreignKeyData = {};\n        this.parent = parent;\n    }\n    ExportHelper.getQuery = function (parent, data) {\n        return data.isRemote() ?\n            data.generateQuery(true).requiresCount().take(parent.pageSettings.totalRecordsCount) :\n            data.generateQuery(true).requiresCount();\n    };\n    ExportHelper.prototype.getFData = function (value, column) {\n        var foreignKeyData = getForeignData(column, {}, value, this.foreignKeyData[column.field])[0];\n        return foreignKeyData;\n    };\n    ExportHelper.prototype.getColumnData = function (gridObj) {\n        var _this = this;\n        var columnPromise = [];\n        var promise;\n        var fColumns = gridObj.getForeignKeyColumns();\n        if (fColumns.length) {\n            fColumns.forEach(function (col) {\n                columnPromise.push(col.dataSource.executeQuery(new Query()));\n            });\n            promise = Promise.all(columnPromise).then(function (e) {\n                fColumns.forEach(function (col, index) {\n                    _this.foreignKeyData[col.field] = e[index].result;\n                });\n                // tslint:disable-next-line:no-any\n            });\n        }\n        return promise;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.getHeaders = function (column, isHideColumnInclude) {\n        if (isHideColumnInclude) {\n            this.hideColumnInclude = true;\n        }\n        else {\n            this.hideColumnInclude = false;\n        }\n        var cols = column;\n        this.colDepth = this.measureColumnDepth(cols);\n        var rows = [];\n        var actualColumns = [];\n        for (var i = 0; i < this.colDepth; i++) {\n            rows[i] = new Row({});\n            rows[i].cells = [];\n        }\n        rows = this.processColumns(rows);\n        rows = this.processHeaderCells(rows);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            for (var i = 0; i < row.cells.length; i++) {\n                var cell = row.cells[i];\n                if (cell.visible === undefined && cell.cellType !== CellType.StackedHeader) {\n                    row.cells = this.removeCellFromRow(row.cells, i);\n                    i = i - 1;\n                }\n                if ((!isHideColumnInclude) && cell.visible !== undefined && (!cell.visible)) {\n                    row.cells = this.removeCellFromRow(row.cells, i);\n                    i = i - 1;\n                }\n            }\n        }\n        for (var i = 0; i < cols.length; i++) {\n            this.generateActualColumns(cols[i], actualColumns);\n        }\n        return { rows: rows, columns: actualColumns };\n    };\n    ExportHelper.prototype.getConvertedWidth = function (input) {\n        var value = parseFloat(input);\n        /* tslint:disable-next-line:max-line-length */\n        return (input.indexOf('%') !== -1) ? (this.parent.element.getBoundingClientRect().width * value / 100) : value;\n    };\n    ExportHelper.prototype.generateActualColumns = function (column, actualColumns) {\n        if (column.commands) {\n            return;\n        }\n        if (!column.columns) {\n            if (column.visible || this.hideColumnInclude) {\n                actualColumns.push(column);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                var colSpan = this.getCellCount(column, 0);\n                if (colSpan !== 0) {\n                    for (var i = 0; i < column.columns.length; i++) {\n                        /* tslint:disable-next-line:max-line-length */\n                        this.generateActualColumns(column.columns[i], actualColumns);\n                    }\n                }\n            }\n        }\n    };\n    ExportHelper.prototype.removeCellFromRow = function (cells, cellIndex) {\n        var resultCells = [];\n        for (var i = 0; i < cellIndex; i++) {\n            resultCells.push(cells[i]);\n        }\n        for (var i = (cellIndex + 1); i < cells.length; i++) {\n            resultCells.push(cells[i]);\n        }\n        return resultCells;\n    };\n    ExportHelper.prototype.processHeaderCells = function (rows) {\n        var columns = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n        for (var i = 0; i < columns.length; i++) {\n            if (!columns[i].commands) {\n                rows = this.appendGridCells(columns[i], rows, 0, i === 0, false, i === (columns.length - 1));\n            }\n        }\n        return rows;\n    };\n    /* tslint:disable */\n    ExportHelper.prototype.appendGridCells = function (cols, gridRows, index, isFirstObj, isFirstColumn, isLastColumn) {\n        /* tslint:enable */\n        var lastCol = isLastColumn ? 'e-lastcell' : '';\n        if (!cols.columns) {\n            gridRows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstColumn ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n        }\n        else {\n            var colSpan = this.getCellCount(cols, 0);\n            if (colSpan) {\n                gridRows[index].cells.push(new Cell({\n                    cellType: CellType.StackedHeader, column: cols, colSpan: colSpan\n                }));\n            }\n            var isFirstCell = void 0;\n            var isIgnoreFirstCell = void 0;\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                isFirstCell = false;\n                if (cols.columns[i].visible && !isIgnoreFirstCell) {\n                    isFirstCell = true;\n                    isIgnoreFirstCell = true;\n                }\n                /* tslint:disable-next-line:max-line-length */\n                gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastColumn);\n            }\n        }\n        return gridRows;\n    };\n    ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, className, rowIndex, columnIndex) {\n        var option = {\n            'visible': gridColumn.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(gridColumn.headerTemplate),\n            'rowID': '',\n            'column': gridColumn,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': columnIndex\n        };\n        if (!option.rowSpan || option.rowSpan < 2) {\n            delete option.rowSpan;\n        }\n        return new Cell(option);\n    };\n    ExportHelper.prototype.processColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gridObj = this.parent;\n        var columnIndexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gridObj.allowGrouping) {\n                for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n                    if (this.parent.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gridObj.detailTemplate || gridObj.childGrid) {\n                rows[i].cells.push(this.generateCell({}, CellType.DetailHeader));\n            }\n        }\n        return rows;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.getCellCount = function (column, count) {\n        if (column.columns) {\n            for (var i = 0; i < column.columns.length; i++) {\n                count = this.getCellCount(column.columns[i], count);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                count++;\n            }\n        }\n        return count;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.measureColumnDepth = function (column) {\n        var max = 0;\n        for (var i = 0; i < column.length; i++) {\n            var depth = this.checkDepth(column[i], 0);\n            if (max < depth) {\n                max = depth;\n            }\n        }\n        return max + 1;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.checkDepth = function (col, index) {\n        var max = index;\n        var indices = [];\n        if (col.columns) {\n            index++;\n            for (var i = 0; i < col.columns.length; i++) {\n                indices[i] = this.checkDepth(col.columns[i], index);\n            }\n            for (var j = 0; j < indices.length; j++) {\n                if (max < indices[j]) {\n                    max = indices[j];\n                }\n            }\n            index = max;\n        }\n        return index;\n    };\n    ;\n    return ExportHelper;\n}());\nexport { ExportHelper };\n/**\n * @hidden\n * `ExportValueFormatter` for `PdfExport` & `ExcelExport`\n */\nvar ExportValueFormatter = /** @class */ (function () {\n    function ExportValueFormatter(culture) {\n        this.valueFormatter = new ValueFormatter(culture);\n        this.internationalization = new Internationalization(culture);\n    }\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.returnFormattedValue = function (args, customFormat) {\n        if (!isNullOrUndefined(args.value) && args.value) {\n            return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n        }\n        else {\n            return '';\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.formatCellValue = function (args) {\n        if (args.isForeignKey) {\n            args.value = getValue(args.column.foreignKeyValue, getForeignData(args.column, {}, args.value)[0]);\n        }\n        if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n            return args.value ? this.internationalization.getNumberFormat({ format: args.column.format })(args.value) : '';\n        }\n        else if (args.column.type === 'boolean') {\n            return args.value ? 'true' : 'false';\n            /* tslint:disable-next-line:max-line-length */\n        }\n        else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n            if (typeof args.column.format === 'string') {\n                var format = void 0;\n                if (args.column.type === 'date') {\n                    format = { type: 'date', skeleton: args.column.format };\n                }\n                else if (args.column.type === 'time') {\n                    format = { type: 'time', skeleton: args.column.format };\n                }\n                else {\n                    format = { type: 'dateTime', skeleton: args.column.format };\n                }\n                return this.returnFormattedValue(args, format);\n            }\n            else {\n                if (args.column.format instanceof Object && args.column.format.type === undefined) {\n                    return (args.value.toString());\n                }\n                else {\n                    /* tslint:disable-next-line:max-line-length */\n                    var customFormat = void 0;\n                    if (args.column.type === 'date') {\n                        /* tslint:disable-next-line:max-line-length */\n                        customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else if (args.column.type === 'time') {\n                        customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else {\n                        customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    return this.returnFormattedValue(args, customFormat);\n                }\n            }\n        }\n        else {\n            if ((!isNullOrUndefined(args.column.type) && !isNullOrUndefined(args.value)) || !isNullOrUndefined(args.value)) {\n                return (args.value).toString();\n            }\n            else {\n                return '';\n            }\n        }\n    };\n    return ExportValueFormatter;\n}());\nexport { ExportValueFormatter };\n","import * as events from '../base/constant';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\nimport { isNullOrUndefined, getEnumValue, compile, extend, getValue } from '@syncfusion/ej2-base';\nimport { Data } from '../actions/data';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { CellType } from '../base/enum';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * @hidden\n * `ExcelExport` module is used to handle the Excel export action.\n */\nvar ExcelExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid Excel Export module.\n     * @hidden\n     */\n    function ExcelExport(parent) {\n        /* tslint:disable-next-line:no-any */\n        this.book = {};\n        /* tslint:disable-next-line:no-any */\n        this.workSheet = [];\n        /* tslint:disable-next-line:no-any */\n        this.rows = [];\n        /* tslint:disable-next-line:no-any */\n        this.columns = [];\n        /* tslint:disable-next-line:no-any */\n        this.styles = [];\n        this.rowLength = 1;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.isCsvExport = false;\n        this.isElementIdChanged = false;\n        this.foreignKeyData = {};\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    ExcelExport.prototype.getModuleName = function () {\n        return 'ExcelExport';\n    };\n    ExcelExport.prototype.init = function (gObj) {\n        if (gObj.element !== null && gObj.element.id === '') {\n            gObj.element.id = new Date().toISOString();\n            this.isElementIdChanged = true;\n        }\n        this.parent = gObj;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.isExporting = undefined;\n        this.book = {};\n        /* tslint:disable-next-line:no-any */\n        this.workSheet = [];\n        /* tslint:disable-next-line:no-any */\n        this.rows = [];\n        /* tslint:disable-next-line:no-any */\n        this.columns = [];\n        /* tslint:disable-next-line:no-any */\n        this.styles = [];\n        this.rowLength = 1;\n        /* tslint:disable-next-line:no-any */\n        this.footer = undefined;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.exportValueFormatter = new ExportValueFormatter(gObj.locale);\n    };\n    /**\n     * Export Grid to Excel file.\n     * @param  {exportProperties} exportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Defines is multiple Grid's are exported.\n     * @param  {workbook} workbook - Defined the Workbook if multiple Grid is exported.\n     * @param  {isCsv} isCsv - true if export to CSV.\n     * @return {Promise<any>}\n     */\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv, isBlob) {\n        var gObj = grid;\n        gObj.trigger(events.beforeExcelExport);\n        this.data = new Data(gObj);\n        this.isExporting = true;\n        this.isBlob = isBlob;\n        if (isCsv) {\n            this.isCsvExport = isCsv;\n        }\n        else {\n            this.isCsvExport = false;\n        }\n        return this.processRecords(gObj, exportProperties, isMultipleExport, workbook);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n        var _this = this;\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) &&\n            exportProperties.dataSource instanceof DataManager) {\n            /* tslint:disable-next-line:no-any */\n            return new Promise(function (resolve, reject) {\n                /* tslint:disable-next-line:max-line-length */\n                /* tslint:disable-next-line:no-any */\n                var dataManager = exportProperties.dataSource.executeQuery(new Query());\n                dataManager.then(function (r) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n                    resolve(_this.book);\n                });\n            });\n        }\n        else {\n            /* tslint:disable-next-line:no-any */\n            var allPromise = [];\n            allPromise.push(this.data.getData({}, ExportHelper.getQuery(gObj, this.data)));\n            allPromise.push(this.helper.getColumnData(gObj));\n            return Promise.all(allPromise).then(function (e) {\n                _this.init(gObj);\n                _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, e[0]);\n                return _this.book;\n            }).catch(function (e) {\n                _this.parent.trigger(events.actionFailure, e);\n            });\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, isMultipleExport, workbook, r) {\n        var blankRows = 5;\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.multipleExport)) {\n            /* tslint:disable-next-line:max-line-length */\n            this.expType = (!isNullOrUndefined(exportProperties.multipleExport.type) ? exportProperties.multipleExport.type : 'AppendToSheet');\n            if (!isNullOrUndefined(exportProperties.multipleExport.blankRows)) {\n                blankRows = exportProperties.multipleExport.blankRows;\n            }\n        }\n        if (isNullOrUndefined(workbook)) {\n            this.workSheet = [];\n            this.rows = [];\n            this.columns = [];\n            this.styles = [];\n        }\n        else if (this.expType === 'NewSheet') {\n            this.workSheet = workbook.worksheets;\n            this.rows = [];\n            this.columns = [];\n            this.styles = workbook.styles;\n        }\n        else {\n            this.workSheet = [];\n            this.rows = workbook.worksheets[0].rows;\n            this.columns = workbook.worksheets[0].columns;\n            this.styles = workbook.styles;\n            this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n            this.rowLength++;\n        }\n        if (!isNullOrUndefined(exportProperties)) {\n            if (!isNullOrUndefined(isMultipleExport)) {\n                if (!isNullOrUndefined(exportProperties.header) && (isMultipleExport || this.expType === 'NewSheet')) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    if (this.expType === 'AppendToSheet') {\n                        if (!isMultipleExport) {\n                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                        }\n                    }\n                    else {\n                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                    }\n                }\n            }\n            else {\n                if (!isNullOrUndefined(exportProperties.header)) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                }\n            }\n        }\n        this.includeHiddenColumn = (!isNullOrUndefined(exportProperties) ? exportProperties.includeHiddenColumn : false);\n        /* tslint:disable-next-line:max-line-length */\n        /* tslint:disable-next-line:no-any */\n        var headerRow = this.helper.getHeaders(gObj.columns, this.includeHiddenColumn);\n        var groupIndent = 0;\n        /* tslint:disable:no-any */\n        if (!isNullOrUndefined((r.result).level)) {\n            groupIndent += (r.result).level;\n            groupIndent += (r.result).childLevels;\n        }\n        /* tslint:enable:no-any */\n        this.processHeaderContent(gObj, headerRow, exportProperties, groupIndent);\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) && !(exportProperties.dataSource instanceof DataManager)) {\n            this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties, exportProperties.dataSource);\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties, gObj.getCurrentViewRecords());\n        }\n        else {\n            this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties);\n        }\n        this.isExporting = false;\n        gObj.trigger(events.excelExportComplete, this.isBlob ? { promise: this.blobPromise } : {});\n    };\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, isMultipleExport, exportProperties, currentViewRecords) {\n        /* tslint:disable-next-line:no-any */\n        var column = gObj.columns;\n        /* tslint:disable-next-line:no-any */\n        var record = undefined;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            record = currentViewRecords;\n        }\n        else {\n            record = returnType.result;\n        }\n        if (!isNullOrUndefined(record.level)) {\n            this.processGroupedRows(gObj, record, headerRow, record.level);\n        }\n        else {\n            this.processRecordRows(gObj, record, headerRow, 0);\n        }\n        if (!isNullOrUndefined(returnType.aggregates)) {\n            if (!isNullOrUndefined(currentViewRecords)) {\n                this.processAggregates(gObj, returnType.result, currentViewRecords);\n            }\n            else {\n                this.processAggregates(gObj, returnType.result);\n            }\n        }\n        //footer template add\n        if (!isNullOrUndefined(this.footer)) {\n            if ((this.expType === 'AppendToSheet' && !isMultipleExport) || (this.expType === 'NewSheet')) {\n                this.processExcelFooter(this.footer);\n            }\n        }\n        /* tslint:disable-next-line:no-any */\n        var sheet = {};\n        if (this.columns.length > 0) {\n            sheet.columns = this.columns;\n        }\n        sheet.rows = this.rows;\n        this.workSheet.push(sheet);\n        this.book.worksheets = this.workSheet;\n        this.book.styles = this.styles;\n        if (!isMultipleExport) {\n            if (this.isCsvExport) {\n                var book = new Workbook(this.book, 'csv', gObj.locale);\n                if (!this.isBlob) {\n                    if (!isNullOrUndefined(exportProperties) && exportProperties.fileName) {\n                        book.save(exportProperties.fileName);\n                    }\n                    else {\n                        book.save('Export.csv');\n                    }\n                }\n                else {\n                    this.blobPromise = book.saveAsBlob('text/csv');\n                }\n            }\n            else {\n                var book = new Workbook(this.book, 'xlsx', gObj.locale);\n                if (!this.isBlob) {\n                    if (!isNullOrUndefined(exportProperties) && exportProperties.fileName) {\n                        book.save(exportProperties.fileName);\n                    }\n                    else {\n                        book.save('Export.xlsx');\n                    }\n                }\n                else {\n                    this.blobPromise = book.saveAsBlob('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n                }\n            }\n            if (this.isElementIdChanged) {\n                gObj.element.id = '';\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level) {\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var item = dataSource_1[_i];\n            /* tslint:disable-next-line:no-any */\n            var cells = [];\n            var index = 1;\n            /* tslint:disable-next-line:no-any */\n            var cell = {};\n            cell.index = index + level;\n            var col = gObj.getColumnByField(item.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: item.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            cell.value = this.parent.getColumnByField(item.field).headerText +\n                ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ';\n            if (item.count > 1) {\n                cell.value += item.count + ' items';\n            }\n            else {\n                cell.value += item.count + ' item';\n            }\n            cell.style = this.getCaptionThemeStyle(this.theme);\n            var captionModelGen = new CaptionSummaryModelGenerator(gObj);\n            var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n            this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, this.rowLength);\n            cells.push(cell);\n            if (this.rows[this.rows.length - 1].cells.length > 0) {\n                var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n                var hIndex = 0;\n                for (var _a = 0, _b = this.rows[this.rows.length - 1].cells; _a < _b.length; _a++) {\n                    var tCell = _b[_a];\n                    if (tCell.index < lIndex) {\n                        lIndex = tCell.index;\n                    }\n                    if (tCell.index > hIndex) {\n                        hIndex = tCell.index;\n                    }\n                    tCell.style = this.getCaptionThemeStyle(this.theme);\n                    if (cells[cells.length - 1].index !== tCell.index) {\n                        cells.push(tCell);\n                    }\n                }\n                if ((lIndex - cell.index) > 1) {\n                    cell.colSpan = lIndex - cell.index;\n                }\n                while (hIndex < (headerRow.columns.length + level)) {\n                    /* tslint:disable-next-line:no-any */\n                    var sCell = {};\n                    if (dataSource.childLevels === 0) {\n                        sCell.index = (hIndex);\n                    }\n                    else {\n                        sCell.index = (hIndex + 1);\n                    }\n                    sCell.style = this.getCaptionThemeStyle(this.theme);\n                    cells.push(sCell);\n                    hIndex++;\n                }\n            }\n            else {\n                var span = 0;\n                //Calculation for column span when group caption dont have aggregates\n                for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n                    var col_1 = _d[_c];\n                    if (col_1.visible) {\n                        span++;\n                    }\n                }\n                cell.colSpan = (dataSource.childLevels + span);\n            }\n            this.rows[this.rows.length - 1].cells = cells;\n            this.rowLength++;\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processGroupedRows(gObj, item.items, headerRow, item.items.level);\n            }\n            else {\n                this.processRecordRows(gObj, item.items, headerRow, (level));\n                this.processAggregates(gObj, item, undefined, (level), true);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level) {\n        var rLen = Object.keys(record).length;\n        var index = 1;\n        /* tslint:disable-next-line:no-any */\n        var cells = [];\n        for (var r = 0; r < rLen; r++) {\n            cells = [];\n            index = 1;\n            for (var c = 0, len = headerRow.columns.length; c < len; c++) {\n                /* tslint:disable-next-line:no-any */\n                var value = !isNullOrUndefined(headerRow.columns[c].field) ? getValue(headerRow.columns[c].field, record[r]) : '';\n                var column = headerRow.columns[c];\n                var foreignKeyData = void 0;\n                // tslint:disable-next-line:max-line-length\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = this.helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                if (!isNullOrUndefined(value)) {\n                    /* tslint:disable-next-line:no-any */\n                    var excelCellArgs = { data: record[r], column: headerRow.columns[c], foreignKeyData: foreignKeyData };\n                    gObj.trigger(events.excelQueryCellInfo, extend(excelCellArgs, {\n                        column: headerRow.columns[c], data: record[r],\n                        value: value, style: undefined, colSpan: 1\n                    }));\n                    /* tslint:disable-next-line:no-any */\n                    var cell = {};\n                    cell.index = index + level;\n                    cell.value = excelCellArgs.value;\n                    if (excelCellArgs.colSpan > 1) {\n                        cell.colSpan = excelCellArgs.colSpan;\n                    }\n                    if (!isNullOrUndefined(excelCellArgs.style)) {\n                        var styleIndex = this.getColumnStyle(gObj, index + level);\n                        cell.style = this.mergeOptions(this.styles[styleIndex], excelCellArgs.style);\n                    }\n                    else {\n                        cell.style = { name: gObj.element.id + 'column' + (index + level) };\n                    }\n                    cells.push(cell);\n                }\n                index++;\n            }\n            this.rows.push({ index: this.rowLength++, cells: cells });\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processAggregates = function (gObj, rec, currentViewRecords, indent, byGroup) {\n        var summaryModel = new SummaryModelGenerator(gObj);\n        /* tslint:disable-next-line:no-any */\n        var data = undefined;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            data = currentViewRecords;\n        }\n        else {\n            data = rec;\n        }\n        if (indent === undefined) {\n            indent = 0;\n        }\n        if (gObj.groupSettings.columns.length > 0 && byGroup) {\n            var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n            var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n            if (groupSummaryRows.length > 0) {\n                this.fillAggregates(gObj, groupSummaryRows, indent);\n            }\n        }\n        else {\n            indent = gObj.groupSettings.columns.length > 0 && !byGroup ? gObj.groupSettings.columns.length : indent;\n            var sRows = summaryModel.generateRows(data, rec.aggregates);\n            if (sRows.length > 0 && !byGroup) {\n                this.fillAggregates(gObj, sRows, indent);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.fillAggregates = function (gObj, cells, indent, customIndex) {\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var row = cells_1[_i];\n            /* tslint:disable-next-line:no-any */\n            var cells_2 = [];\n            var index = 0;\n            for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n                var cell = _b[_a];\n                /* tslint:disable-next-line:no-any */\n                var eCell = {};\n                if ((cell.visible || this.includeHiddenColumn)) {\n                    index++;\n                    if (cell.isDataCell) {\n                        eCell.index = index + indent;\n                        if (!isNullOrUndefined(cell.column.footerTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.Summary, cell.column.footerTemplate, cell, row);\n                        }\n                        else if (!isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.GroupSummary, cell.column.groupFooterTemplate, cell, row);\n                        }\n                        else if (!isNullOrUndefined(cell.column.groupCaptionTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.CaptionSummary, cell.column.groupCaptionTemplate, cell, row);\n                        }\n                        else {\n                            for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n                                var key = _d[_c];\n                                if (key === cell.column.type) {\n                                    if (!isNullOrUndefined(row.data[cell.column.field].Sum)) {\n                                        eCell.value = row.data[cell.column.field].Sum;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Average)) {\n                                        eCell.value = row.data[cell.column.field].Average;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Max)) {\n                                        eCell.value = row.data[cell.column.field].Max;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Min)) {\n                                        eCell.value = row.data[cell.column.field].Min;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Count)) {\n                                        eCell.value = row.data[cell.column.field].Count;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].TrueCount)) {\n                                        eCell.value = row.data[cell.column.field].TrueCount;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].FalseCount)) {\n                                        eCell.value = row.data[cell.column.field].FalseCount;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Custom)) {\n                                        eCell.value = row.data[cell.column.field].Custom;\n                                    }\n                                }\n                            }\n                        }\n                        eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                        if (cell.attributes.style.textAlign) {\n                            eCell.style.hAlign = cell.attributes.style.textAlign;\n                        }\n                        cells_2.push(eCell);\n                    }\n                    else {\n                        if (customIndex === undefined) {\n                            eCell.index = index + indent;\n                            eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                            cells_2.push(eCell);\n                        }\n                    }\n                }\n            }\n            if (!isNullOrUndefined(customIndex)) {\n                this.rows.push({ index: customIndex, cells: cells_2 });\n            }\n            else {\n                this.rows.push({ index: this.rowLength++, cells: cells_2 });\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getAggreateValue = function (cellType, template, cell, row) {\n        var templateFn = {};\n        templateFn[getEnumValue(CellType, cell.cellType)] = compile(template);\n        /* tslint:disable-next-line:max-line-length */\n        var txt = (templateFn[getEnumValue(CellType, cell.cellType)](row.data[cell.column.field ? cell.column.field : cell.column.columnName]));\n        return txt[0].wholeText;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n        /* tslint:disable-next-line:no-any */\n        var result = {};\n        /* tslint:disable-next-line:no-any */\n        var attrname = Object.keys(JSON1);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON1[attrname[index]];\n            }\n        }\n        attrname = Object.keys(JSON2);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON2[attrname[index]];\n            }\n        }\n        return result;\n    };\n    ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n        var index = 0;\n        for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n            var style = _a[_i];\n            if (style.name === gObj.element.id + 'column' + columnIndex) {\n                return index;\n            }\n            index++;\n        }\n        return undefined;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, exportProperties, indent) {\n        /* tslint:disable-next-line:no-any */\n        var column = gObj.columns;\n        var rowIndex = 1;\n        /* tslint:disable-next-line:no-any */\n        var returnValue = headerRow;\n        /* tslint:enable:no-any */\n        var gridRows = returnValue.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        /* tslint:disable-next-line:no-any */\n        var spannedCells = [];\n        if (indent > 0) {\n            var index = 0;\n            while (index !== indent) {\n                this.columns.push({ index: index + 1, width: 30 });\n                index++;\n            }\n        }\n        for (var row = 0; row < gridRows.length; row++) {\n            var currentCellIndex = 1 + indent;\n            /* tslint:disable-next-line:no-any */\n            var cells = [];\n            for (var column_1 = 0; column_1 < gridRows[row].cells.length; column_1++) {\n                /* tslint:disable-next-line:no-any */\n                var style = {};\n                /* tslint:disable-next-line:no-any */\n                var cell = {};\n                /* tslint:disable-next-line:no-any */\n                var gridCell = gridRows[row].cells[column_1];\n                /* tslint:disable-next-line:no-any */\n                var result = { contains: true, index: 1 };\n                while (result.contains) {\n                    result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n                    currentCellIndex = result.index;\n                    if (!result.contains) {\n                        cell.index = result.index;\n                        break;\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.rowSpan) && gridCell.rowSpan !== 1) {\n                    cell.rowSpan = gridCell.rowSpan;\n                    for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n                        /* tslint:disable-next-line:no-any */\n                        var spannedCell = { rowIndex: 0, columnIndex: 0 };\n                        spannedCell.rowIndex = i;\n                        spannedCell.columnIndex = currentCellIndex;\n                        spannedCells.push(spannedCell);\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.colSpan) && gridCell.colSpan !== 1) {\n                    cell.colSpan = gridCell.colSpan;\n                    currentCellIndex = currentCellIndex + cell.colSpan - 1;\n                }\n                cell.value = gridCell.column.headerText;\n                if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.theme)) {\n                    this.theme = exportProperties.theme;\n                }\n                style = this.getHeaderThemeStyle(this.theme);\n                if (!isNullOrUndefined(gridCell.column.textAlign)) {\n                    style.hAlign = gridCell.column.textAlign;\n                }\n                if (!isNullOrUndefined(gridCell.column.headerTextAlign)) {\n                    style.hAlign = gridCell.column.headerTextAlign;\n                }\n                /* tslint:disable-next-line:no-any */\n                var excelHeaderCellArgs = { cell: cell, gridCell: gridCell, setStyle: style };\n                gObj.trigger(events.excelHeaderQueryCellInfo, extend(excelHeaderCellArgs, {\n                    cell: cell, setStyle: style\n                }));\n                cell.style = style;\n                cells.push(cell);\n                currentCellIndex++;\n            }\n            this.rows.push({ index: this.rowLength++, cells: cells });\n        }\n        for (var col = 0; col < gridColumns.length; col++) {\n            this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n        /* tslint:disable-next-line:no-any */\n        var style = {};\n        style.fontSize = 12;\n        style.borders = { color: '#E0E0E0' };\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.header)) {\n            style = this.updateThemeStyle(theme.header, style);\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.updateThemeStyle = function (themestyle, style) {\n        if (!isNullOrUndefined(themestyle.fontColor)) {\n            style.fontColor = themestyle.fontColor;\n        }\n        if (!isNullOrUndefined(themestyle.fontName)) {\n            style.fontName = themestyle.fontName;\n        }\n        if (!isNullOrUndefined(themestyle.fontSize)) {\n            style.fontSize = themestyle.fontSize;\n        }\n        if (!isNullOrUndefined(themestyle.borders)) {\n            if (!isNullOrUndefined(themestyle.borders.color)) {\n                style.borders.color = themestyle.borders.color;\n            }\n            if (!isNullOrUndefined(themestyle.borders.lineStyle)) {\n                style.borders.lineStyle = themestyle.borders.lineStyle;\n            }\n        }\n        if (themestyle.bold !== false) {\n            style.bold = themestyle.bold;\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n        /* tslint:disable-next-line:no-any */\n        var style = {};\n        style.fontSize = 13;\n        style.backColor = '#F6F6F6';\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.caption)) {\n            style = this.updateThemeStyle(theme.caption, style);\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n        /* tslint:disable-next-line:no-any */\n        var style = {};\n        style.fontSize = 13;\n        style.borders = { color: '#E0E0E0' };\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.record)) {\n            style = this.updateThemeStyle(theme.record, style);\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processExcelHeader = function (header) {\n        if (!isNullOrUndefined(header.rows) && (this.expType === 'NewSheet' || this.rowLength === 1)) {\n            var noRows = void 0;\n            if (header.headerRows === undefined) {\n                this.rowLength = header.rows.length;\n            }\n            else {\n                this.rowLength = header.headerRows;\n            }\n            if (this.rowLength < header.rows.length) {\n                noRows = this.rowLength;\n            }\n            else {\n                noRows = header.rows.length;\n            }\n            this.rowLength++;\n            for (var row = 0; row < noRows; row++) {\n                /* tslint:disable-next-line:no-any */\n                var json = header.rows[row];\n                //Row index\n                if (!(json.index !== null && !isNullOrUndefined(json.index))) {\n                    json.index = (row + 1);\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.updatedCellIndex = function (json) {\n        var cellsLength = json.cells.length;\n        for (var cellId = 0; cellId < cellsLength; cellId++) {\n            /* tslint:disable-next-line:no-any */\n            var jsonCell = json.cells[cellId];\n            //cell index\n            if (!(jsonCell.index !== null && !isNullOrUndefined(jsonCell.index))) {\n                jsonCell.index = (cellId + 1);\n            }\n        }\n        this.rows.push(json);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processExcelFooter = function (footer) {\n        if (!isNullOrUndefined(footer.rows)) {\n            var noRows = void 0;\n            if (footer.footerRows === undefined) {\n                this.rowLength += footer.rows.length;\n            }\n            else {\n                if (footer.footerRows > footer.rows.length) {\n                    this.rowLength += (footer.footerRows - footer.rows.length);\n                    noRows = footer.rows.length;\n                }\n                else {\n                    noRows = footer.footerRows;\n                }\n            }\n            for (var row = 0; row < noRows; row++) {\n                /* tslint:disable-next-line:no-any */\n                var json = footer.rows[row];\n                //Row index\n                if (json.index === null || json.index === undefined) {\n                    json.index = this.rowLength++;\n                }\n                else {\n                    json.index += this.rowLength;\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n        for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n            var spannedCell = spannedCells_1[_i];\n            if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n                columnIndex = columnIndex + 1;\n                return { contains: true, index: columnIndex };\n            }\n        }\n        return { contains: false, index: columnIndex };\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n        if (!isNullOrUndefined(col.format)) {\n            if (!isNullOrUndefined(col.format.skeleton)) {\n                style.numberFormat = col.format.skeleton;\n                if (!isNullOrUndefined(col.format.type)) {\n                    style.type = col.format.type;\n                }\n            }\n            else {\n                style.numberFormat = col.format;\n                style.type = col.type;\n            }\n        }\n        if (!isNullOrUndefined(col.textAlign)) {\n            style.hAlign = col.textAlign;\n        }\n        if (Object.keys(style).length > 0) {\n            style.name = gObj.element.id + 'column' + index;\n            this.styles.push(style);\n        }\n        if (!isNullOrUndefined(col.width)) {\n            /* tslint:disable-next-line:max-line-length */\n            this.columns.push({ index: index, width: typeof col.width === 'number' ? col.width : this.helper.getConvertedWidth(col.width) });\n        }\n    };\n    /**\n     * To destroy the excel export\n     * @return {void}\n     * @hidden\n     */\n    ExcelExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getValue } from '@syncfusion/ej2-base';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n * @hidden\n */\nvar PdfExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid PDF Export module\n     * @hidden\n     */\n    function PdfExport(parent) {\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.customDataSource = false;\n        this.isGrouping = false;\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    PdfExport.prototype.getModuleName = function () {\n        return 'PdfExport';\n    };\n    PdfExport.prototype.init = function (parent) {\n        this.exportValueFormatter = new ExportValueFormatter(parent.locale);\n        this.pdfDocument = undefined;\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.parent = parent;\n        var gObj = parent;\n        this.isGrouping = false;\n        this.isExporting = true;\n        gObj.trigger(events.beforePdfExport);\n    };\n    /**\n     * Used to map the input data\n     * @return {void}\n     */\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        var _this = this;\n        this.data = new Data(this.parent);\n        this.isBlob = isBlob;\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.dataSource) && pdfExportProperties.dataSource instanceof DataManager) {\n            return new Promise(function (resolve, reject) {\n                /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n                new DataManager({ url: pdfExportProperties.dataSource.dataSource.url, adaptor: pdfExportProperties.dataSource.adaptor }).executeQuery(new Query()).then(function (returnType) {\n                    _this.init(parent);\n                    if (!isNullOrUndefined(pdfDoc)) {\n                        _this.pdfDocument = pdfDoc;\n                    }\n                    else {\n                        _this.pdfDocument = new PdfDocument();\n                    }\n                    _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n                    _this.isExporting = false;\n                    parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n                    resolve(_this.pdfDocument);\n                });\n            });\n        }\n        else {\n            var allPromise = [];\n            allPromise.push(this.data.getData({}, ExportHelper.getQuery(parent, this.data)));\n            allPromise.push(this.helper.getColumnData(parent));\n            return Promise.all(allPromise).then(function (e) {\n                _this.init(parent);\n                if (!isNullOrUndefined(pdfDoc)) {\n                    _this.pdfDocument = pdfDoc;\n                }\n                else {\n                    _this.pdfDocument = new PdfDocument();\n                }\n                _this.processExport(parent, e[0], pdfExportProperties, isMultipleExport);\n                _this.isExporting = false;\n                parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n                return _this.pdfDocument;\n                // tslint:disable-next-line:no-any\n            });\n        }\n    };\n    /* tslint:disable:no-any */\n    PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            this.gridTheme = pdfExportProperties.theme;\n        }\n        var columns = gObj.columns;\n        var dataSource = returnType.result;\n        /* tslint:enable:no-any */\n        var section = this.pdfDocument.sections.add();\n        /* tslint:disable-next-line:no-any */\n        var result = this.processExportProperties(pdfExportProperties, dataSource, section);\n        dataSource = result.dataSource;\n        /* tslint:disable-next-line:no-any */\n        if (!isNullOrUndefined(dataSource.GroupGuid)) {\n            this.isGrouping = true;\n        }\n        section = result.section;\n        var pdfPage = section.pages.add();\n        // create a grid\n        var pdfGrid = new PdfGrid();\n        // get header theme style\n        /* tslint:disable-next-line:no-any */\n        var headerThemeStyle = this.getHeaderThemeStyle();\n        var border = headerThemeStyle.border;\n        var headerFont = headerThemeStyle.font;\n        var headerBrush = headerThemeStyle.brush;\n        /* tslint:disable-next-line:no-any */\n        var returnValue = this.helper.getHeaders(columns, this.hideColumnInclude);\n        var rows = returnValue.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        // process grid header content\n        pdfGrid = this.processGridHeaders(dataSource.childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush);\n        // set alignment, width and type of the values of the column\n        this.setColumnProperties(gridColumns, pdfGrid);\n        /* tslint:disable-next-line:no-any */\n        var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n        if (!isNullOrUndefined(dataSource) && dataSource.length > 0) {\n            if (this.isGrouping) {\n                /* tslint:disable-next-line:max-line-length */\n                this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, returnType);\n            }\n            else {\n                this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid);\n            }\n            if (!isNullOrUndefined(returnType.aggregates)) {\n                var summaryModel = new SummaryModelGenerator(gObj);\n                var sRows = void 0;\n                if (this.customDataSource) {\n                    sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n                }\n                else if (this.currentViewData) {\n                    sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n                }\n                else if (this.isGrouping) {\n                    sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n                }\n                else {\n                    sRows = summaryModel.generateRows(returnType.result, returnType.aggregates);\n                }\n                /* tslint:disable-next-line:max-line-length */\n                this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n            }\n        }\n        else {\n            var row = pdfGrid.rows.addRow();\n            row.style.setBorder(border);\n        }\n        // draw the grid\n        pdfGrid.draw(pdfPage, 20, 20);\n        if (!isMultipleExport) {\n            // save the PDF\n            if (!this.isBlob) {\n                if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.fileName) {\n                    this.pdfDocument.save(pdfExportProperties.fileName);\n                }\n                else {\n                    this.pdfDocument.save('Export.pdf');\n                }\n            }\n            else {\n                this.blobPromise = this.pdfDocument.save();\n            }\n            this.pdfDocument.destroy();\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.caption) && this.gridTheme.caption !== null) {\n            var fontSize = !isNullOrUndefined(this.gridTheme.caption.fontSize) ? this.gridTheme.caption.fontSize : 9.75;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.caption.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            /* tslint:disable-next-line:max-line-length */\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5), brush: new PdfSolidBrush(new PdfColor(pdfColor)), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n        else {\n            //Material theme\n            /* tslint:disable-next-line:max-line-length */\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75), brush: new PdfSolidBrush(new PdfColor(0, 0, 0)), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getHeaderThemeStyle = function () {\n        var border = new PdfBorders();\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.header)) {\n            if (!isNullOrUndefined(this.gridTheme.header.borders) && !isNullOrUndefined(this.gridTheme.header.borders.color)) {\n                var borderColor = this.hexToRgb(this.gridTheme.header.borders.color);\n                border.all = new PdfPen(new PdfColor(borderColor.r, borderColor.g, borderColor.b));\n            }\n            var fontSize = !isNullOrUndefined(this.gridTheme.header.fontSize) ? this.gridTheme.header.fontSize : 10.5;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.header.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            /* tslint:disable-next-line:max-line-length */\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, fontSize), brush: new PdfSolidBrush(pdfColor) };\n        }\n        else {\n            //Material theme\n            border.all = new PdfPen(new PdfColor(234, 234, 234));\n            /* tslint:disable-next-line:max-line-length */\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5), brush: new PdfSolidBrush(new PdfColor(102, 102, 102)) };\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType) {\n        var groupIndex = level;\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var dataSourceItems = dataSource_1[_i];\n            var row = pdfGrid.rows.addRow();\n            var col = gObj.getColumnByField(dataSourceItems.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: dataSourceItems.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            /* tslint:disable-next-line:max-line-length */\n            var value = dataSourceItems.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n            row.cells.getCell(groupIndex).value = value;\n            row.cells.getCell(groupIndex + 1).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n            row.style.setBorder(border);\n            row.style.setFont(font);\n            row.style.setTextBrush(brush);\n            row.style.setBackgroundBrush(backgroundBrush);\n            var sRows = void 0;\n            var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n            if (!isNullOrUndefined(dataSourceItems.items.records)) {\n                sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n            }\n            else {\n                sRows = captionSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n            }\n            if (!isNullOrUndefined(sRows) && sRows.length === 0) {\n                row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n            }\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                /* tslint:disable-next-line:max-line-length */\n                this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType);\n                var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n            }\n            else {\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1));\n                var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                sRows = groupSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush) {\n        var columnCount = gridColumns.length;\n        var gObj = this.parent;\n        if (this.isGrouping) {\n            columnCount += (childLevels + 1);\n        }\n        // add columns\n        pdfGrid.columns.add(columnCount);\n        if (this.isGrouping) {\n            for (var i = 0; i < (childLevels + 1); i++) {\n                pdfGrid.columns.getColumn(i).width = 20;\n            }\n        }\n        // add header\n        pdfGrid.headers.add(rows.length);\n        // set cell values of each rows in the header\n        for (var i = 0; i < rows.length; i++) {\n            var gridHeader = pdfGrid.headers.getHeader(i);\n            gridHeader.style.setBorder(border);\n            gridHeader.style.setFont(headerFont);\n            gridHeader.style.setTextBrush(headerBrush);\n            var cellIndex = this.isGrouping ? (childLevels + 1) : 0;\n            if (rows[i].cells.length === 0) {\n                for (var j = 0; j < gridHeader.cells.count; j++) {\n                    var cell = gridHeader.cells.getCell(j);\n                    cell.value = '';\n                }\n            }\n            else {\n                for (var j = 0; j < cellIndex; j++) {\n                    var cell = gridHeader.cells.getCell(j);\n                    cell.value = '';\n                }\n                for (var j = 0; j < rows[i].cells.length; j++) {\n                    var cell = gridHeader.cells.getCell(cellIndex);\n                    /* tslint:disable-next-line:no-any */\n                    var args = {\n                        cell: cell,\n                        gridCell: rows[i].cells[j],\n                        style: cell.style\n                    };\n                    /* tslint:enable:no-any */\n                    gObj.trigger(events.pdfHeaderQueryCellInfo, args);\n                    if (cell.value !== null) {\n                        cell.value = rows[i].cells[j].column.headerText;\n                        if (!isNullOrUndefined(rows[i].cells[j].column.headerTextAlign)) {\n                            cell.style.stringFormat = this.getHorizontalAlignment(rows[i].cells[j].column.headerTextAlign);\n                        }\n                        if (!isNullOrUndefined(rows[i].cells[j].rowSpan)) {\n                            cell.rowSpan = rows[i].cells[j].rowSpan;\n                            /* tslint:disable-next-line:max-line-length */\n                            cell.style.stringFormat = this.getVerticalAlignment('Bottom', cell.style.stringFormat, rows[i].cells[j].column.textAlign);\n                            for (var k = 1; k < rows[i].cells[j].rowSpan; k++) {\n                                pdfGrid.headers.getHeader(i + k).cells.getCell(cellIndex).value = null;\n                            }\n                        }\n                        if (!isNullOrUndefined(rows[i].cells[j].colSpan)) {\n                            cell.columnSpan = rows[i].cells[j].colSpan;\n                        }\n                        cellIndex += cell.columnSpan;\n                    }\n                    else {\n                        cell.value = '';\n                        cellIndex += cell.columnSpan;\n                        j = j - 1;\n                    }\n                }\n            }\n        }\n        if (pdfGrid.columns.count >= 6) {\n            pdfGrid.style.allowHorizontalOverflow = true;\n        }\n        return pdfGrid;\n    };\n    /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource, section) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            if (!isNullOrUndefined(pdfExportProperties.theme)) {\n                this.gridTheme = pdfExportProperties.theme;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.pageOrientation) || !isNullOrUndefined(pdfExportProperties.pageSize)) {\n                var pdfPageSettings = new PdfPageSettings();\n                /* tslint:disable-next-line:max-line-length */\n                pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ? PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n                pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n                section.setPageSettings(pdfPageSettings);\n            }\n            var clientSize = this.pdfDocument.pageSettings.size;\n            if (!isNullOrUndefined(pdfExportProperties.header)) {\n                /* tslint:disable-next-line:no-any */\n                var header = pdfExportProperties.header;\n                var position = new PointF(0, header.fromTop);\n                var size = new SizeF((clientSize.width - 80), (header.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.footer)) {\n                /* tslint:disable-next-line:no-any */\n                var footer = pdfExportProperties.footer;\n                var position = new PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n                var size = new SizeF((clientSize.width - 80), (footer.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.includeHiddenColumn) && !this.isGrouping) {\n                this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.dataSource)) {\n                if (!(pdfExportProperties.dataSource instanceof DataManager)) {\n                    dataSource = pdfExportProperties.dataSource;\n                }\n                this.customDataSource = true;\n                this.currentViewData = false;\n            }\n            else if (!isNullOrUndefined(pdfExportProperties.exportType)) {\n                if (pdfExportProperties.exportType === 'CurrentPage') {\n                    dataSource = this.parent.getCurrentViewRecords();\n                    this.currentViewData = true;\n                    this.customDataSource = false;\n                }\n                else {\n                    this.currentViewData = false;\n                    this.customDataSource = false;\n                }\n            }\n            else {\n                this.currentViewData = false;\n                this.customDataSource = false;\n            }\n        }\n        else {\n            this.currentViewData = false;\n            this.customDataSource = false;\n        }\n        return { dataSource: dataSource, section: section };\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawPageTemplate = function (template, element) {\n        for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n            var content = _a[_i];\n            this.processContentValidation(content);\n            switch (content.type) {\n                case 'Text':\n                    /* tslint:disable-next-line:max-line-length */\n                    if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n                        throw new Error('please enter the valid input value in text content...');\n                    }\n                    this.drawText(template, content);\n                    break;\n                case 'PageNumber':\n                    this.drawPageNumber(template, content);\n                    break;\n                case 'Image':\n                    if (content.src === undefined || content.src === null || content.src === '') {\n                        throw new Error('please enter the valid base64 string in image content...');\n                    }\n                    this.drawImage(template, content);\n                    break;\n                case 'Line':\n                    this.drawLine(template, content);\n                    break;\n                default:\n                    throw new Error('Please set valid content type...');\n            }\n        }\n        return template;\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processContentValidation = function (content) {\n        if (content.type === undefined || content.type === null) {\n            throw new Error('please set valid content type...');\n        }\n        else {\n            if (content.type === 'Line') {\n                if (content.points === undefined || content.points === null) {\n                    throw new Error('please enter valid points in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n                        throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n                        throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n                        throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n                        throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n                    }\n                }\n            }\n            else {\n                if (content.position === undefined || content.position === null) {\n                    throw new Error('please enter valid position in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n                        throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n                    }\n                    if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n                        throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawText = function (pageTemplate, content) {\n        var font = this.getFont(content);\n        var brush = this.getBrushFromContent(content);\n        var pen = null;\n        if (!isNullOrUndefined(content.style.textPenColor)) {\n            var penColor = this.hexToRgb(content.style.textPenColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        if (brush == null && pen == null) {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var value = content.value.toString();\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var format;\n        var result = this.setContentFormat(content, format);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n        }\n        else {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n        var font = this.getFont(content);\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        else {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var pageNumber = new PdfPageNumberField(font, brush);\n        pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n        var compositeField;\n        var format;\n        if (!isNullOrUndefined(content.format)) {\n            if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n                var pageCount = new PdfPageCountField(font);\n                if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n                    format = content.format.replace('$current', '0');\n                    format = format.replace('$total', '1');\n                }\n                else {\n                    format = content.format.replace('$current', '1');\n                    format = format.replace('$total', '0');\n                }\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n            }\n            else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n                format = content.format.replace('$current', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n            }\n            else {\n                var pageCount = new PdfPageCountField(font);\n                format = content.format.replace('$total', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageCount);\n            }\n        }\n        else {\n            format = '{0}';\n            compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n        }\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var result = this.setContentFormat(content, compositeField.stringFormat);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            compositeField.stringFormat = result.format;\n            compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n        }\n        compositeField.draw(documentHeader.graphics, x, y);\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawImage = function (documentHeader, content) {\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var width = (!isNullOrUndefined(content.size)) ? (content.size.width * 0.75) : undefined;\n        var height = (!isNullOrUndefined(content.size)) ? (content.size.height * 0.75) : undefined;\n        var image = new PdfBitmap(content.src);\n        if (!isNullOrUndefined(width)) {\n            documentHeader.graphics.drawImage(image, x, y, width, height);\n        }\n        else {\n            documentHeader.graphics.drawImage(image, x, y);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawLine = function (documentHeader, content) {\n        var x1 = content.points.x1 * 0.75;\n        var y1 = content.points.y1 * 0.75;\n        var x2 = content.points.x2 * 0.75;\n        var y2 = content.points.y2 * 0.75;\n        var pen = this.getPenFromContent(content);\n        if (!isNullOrUndefined(content.style) && content.style !== null) {\n            if (!isNullOrUndefined(content.style.penSize) && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n                pen.width = content.style.penSize * 0.75;\n            }\n            pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n        }\n        documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n    };\n    /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex) {\n        for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n            var row = sRows_1[_i];\n            var startIndex = 0;\n            var leastCaptionSummaryIndex = -1;\n            var index = 0;\n            var isEmpty = true;\n            /* tslint:disable-next-line:no-any */\n            var value = [];\n            for (var i = 0; i < pdfGrid.columns.count; i++) {\n                /* tslint:disable-next-line:no-any */\n                var cell = row.cells[index];\n                if (!this.hideColumnInclude) {\n                    while (cell.visible === undefined) {\n                        if (!isNullOrUndefined(captionRow)) {\n                            if (!isNullOrUndefined(captionRow.cells.getCell(i).value)) {\n                                value.push('');\n                                value.push(captionRow.cells.getCell(i).value);\n                                isEmpty = false;\n                                i += 1;\n                            }\n                            else {\n                                value.push('');\n                            }\n                        }\n                        else {\n                            value.push('');\n                        }\n                        i += 1;\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                    while (!isNullOrUndefined(cell.visible) && !cell.visible) {\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                }\n                if (cell.isDataCell) {\n                    var templateFn = {};\n                    /* tslint:disable-next-line:max-line-length */\n                    if (!isNullOrUndefined(cell.column.footerTemplate) || !isNullOrUndefined(cell.column.groupCaptionTemplate) || !isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell.column);\n                        templateFn = result.templateFunction;\n                        leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n                        /* tslint:disable-next-line:max-line-length */\n                        var txt = (templateFn[getEnumValue(CellType, cell.cellType)](row.data[cell.column.field ? cell.column.field : cell.column.columnName]));\n                        value.push(txt[0].wholeText);\n                        isEmpty = false;\n                    }\n                    else {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n                        if (!isNullOrUndefined(result)) {\n                            value.push(result);\n                        }\n                    }\n                }\n                else {\n                    value.push('');\n                }\n                if (isEmpty && value[i] !== '' && !isNullOrUndefined(value[i]) && value[i] !== null) {\n                    isEmpty = false;\n                }\n                index += 1;\n            }\n            if (!isEmpty) {\n                if (!isCaption) {\n                    var gridRow = pdfGrid.rows.addRow();\n                    gridRow.style.setBorder(border);\n                    gridRow.style.setFont(font);\n                    gridRow.style.setTextBrush(brush);\n                    gridRow.style.setBackgroundBrush(backgroundBrush);\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        gridRow.cells.getCell(i).value = value[i].toString();\n                    }\n                }\n                else {\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        captionRow.cells.getCell(i).value = value[i].toString();\n                        if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1) {\n                            captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n                        }\n                        else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n                            captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, column) {\n        if (!isNullOrUndefined(column.footerTemplate)) {\n            templateFn[getEnumValue(CellType, CellType.Summary)] = compile(column.footerTemplate);\n        }\n        else if (!isNullOrUndefined(column.groupCaptionTemplate)) {\n            if (leastCaptionSummaryIndex === -1) {\n                leastCaptionSummaryIndex = index;\n            }\n            templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(column.groupCaptionTemplate);\n        }\n        else {\n            templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(column.groupFooterTemplate);\n        }\n        return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n        if (!isNullOrUndefined(data.Sum)) {\n            return data.Sum;\n        }\n        else if (!isNullOrUndefined(data.Average)) {\n            return data.Average;\n        }\n        else if (!isNullOrUndefined(data.Max)) {\n            return data.Max;\n        }\n        else if (!isNullOrUndefined(data.Min)) {\n            return data.Min;\n        }\n        else if (!isNullOrUndefined(data.Count)) {\n            return data.Count;\n        }\n        else if (!isNullOrUndefined(data.TrueCount)) {\n            return data.TrueCount;\n        }\n        else if (!isNullOrUndefined(data.FalseCount)) {\n            return data.FalseCount;\n        }\n        else if (!isNullOrUndefined(data.Custom)) {\n            return data.Custom;\n        }\n    };\n    // Set alignment, width and type of the values of the column\n    /* tslint:disable:no-any */\n    /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid) {\n        var startIndex = this.isGrouping ? (pdfGrid.columns.count - gridColumns.length) : 0;\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (!isNullOrUndefined(gridColumns[i].textAlign)) {\n                pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n            }\n            // Need to add width consideration with % value\n            if (pdfGrid.style.allowHorizontalOverflow && !isNullOrUndefined(gridColumns[i].width)) {\n                /* tslint:disable-next-line:max-line-length */\n                pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[i].width === 'number' ? gridColumns[i].width * 0.75 : this.helper.getConvertedWidth(gridColumns[i].width) * 0.75;\n            }\n        }\n    };\n    /**\n     * set default style properties of each rows in exporting grid\n     * @private\n     */\n    PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.record) && this.gridTheme.record !== null) {\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.record.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n        }\n        else {\n            row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n        }\n        row.style.setBorder(border);\n        return row;\n    };\n    /**\n     * generate the formatted cell values\n     * @private\n     */\n    /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, groupIndex) {\n        var startIndex = this.isGrouping ? groupIndex : 0;\n        for (var _i = 0, _a = dataSource; _i < _a.length; _i++) {\n            var items = _a[_i];\n            // create a new row and set default style properties\n            var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n            for (var j = 0; j < columns.length; j++) {\n                /* tslint:disable:no-any */\n                var value = (!isNullOrUndefined(columns[j].field) && getValue(columns[j].field, items)) || '';\n                var column = columns[j];\n                var foreignKeyData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = this.helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                var data = items;\n                var args = {\n                    data: data,\n                    value: value,\n                    column: column,\n                    style: undefined,\n                    colSpan: 1\n                };\n                /* tslint:enable:no-any */\n                gObj.trigger(events.pdfQueryCellInfo, args);\n                var cell = gridRow.cells.getCell(j + startIndex);\n                cell.value = this.exportValueFormatter.formatCellValue(args);\n                if (!isNullOrUndefined(args.style)) {\n                    this.processCellStyle(cell, args);\n                }\n                if (args.colSpan > 1) {\n                    if ((j + startIndex + 1 + args.colSpan) > gridRow.cells.count) {\n                        args.colSpan = gridRow.cells.count - (j + startIndex + 1);\n                    }\n                    cell.columnSpan = args.colSpan;\n                    for (var i = 1; i < cell.columnSpan; i++) {\n                        var spanCell = gridRow.cells.getCell(j + startIndex + i);\n                        spanCell.value = '';\n                    }\n                    j += (args.colSpan - 1);\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processCellStyle = function (cell, args) {\n        if (!isNullOrUndefined(args.style.backgroundColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var backColor = this.hexToRgb(args.style.backgroundColor);\n            cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textAlignment)) {\n            cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n        }\n        if (!isNullOrUndefined(args.style.verticalAlignment)) {\n            cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n        }\n        if (!isNullOrUndefined(args.style.textBrushColor)) {\n            var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n            cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textPenColor)) {\n            var textPenColor = this.hexToRgb(args.style.textPenColor);\n            cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n        }\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(args.style.fontFamily) || !isNullOrUndefined(args.style.fontSize) || !isNullOrUndefined(args.style.bold) || !isNullOrUndefined(args.style.italic) || !isNullOrUndefined(args.style.underline) || !isNullOrUndefined(args.style.strikeout)) {\n            cell.style.font = this.getFont(args);\n        }\n        if (!isNullOrUndefined(args.style.border)) {\n            var border = new PdfBorders();\n            var borderWidth = args.style.border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(args.style.border.color)) {\n                var borderColor = this.hexToRgb(args.style.border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(args.style.border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n            }\n            border.all = pen;\n            cell.style.borders = border;\n        }\n        if (!isNullOrUndefined(args.style.paragraphIndent)) {\n            cell.style.stringFormat = new PdfStringFormat();\n            cell.style.stringFormat.paragraphIndent = args.style.paragraphIndent;\n        }\n    };\n    /**\n     * set text alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n        }\n        switch (textAlign) {\n            case 'Right':\n                format.alignment = PdfTextAlignment.Right;\n                break;\n            case 'Center':\n                format.alignment = PdfTextAlignment.Center;\n                break;\n            case 'Justify':\n                format.alignment = PdfTextAlignment.Justify;\n                break;\n            case 'Left':\n                format.alignment = PdfTextAlignment.Left;\n                break;\n        }\n        return format;\n    };\n    /**\n     * set vertical alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n            format = this.getHorizontalAlignment(textAlign, format);\n        }\n        switch (verticalAlign) {\n            case 'Bottom':\n                format.lineAlignment = PdfVerticalAlignment.Bottom;\n                break;\n            case 'Middle':\n                format.lineAlignment = PdfVerticalAlignment.Middle;\n                break;\n            case 'Top':\n                format.lineAlignment = PdfVerticalAlignment.Top;\n                break;\n        }\n        return format;\n    };\n    PdfExport.prototype.getFontFamily = function (fontFamily) {\n        switch (fontFamily) {\n            case 'TimesRoman':\n                return 2;\n            case 'Courier':\n                return 1;\n            case 'Symbol':\n                return 3;\n            case 'ZapfDingbats':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getFont = function (content) {\n        var fontSize = (!isNullOrUndefined(content.style.fontSize)) ? (content.style.fontSize * 0.75) : 9.75;\n        /* tslint:disable-next-line:max-line-length */\n        var fontFamily = (!isNullOrUndefined(content.style.fontFamily)) ? (this.getFontFamily(content.style.fontFamily)) : PdfFontFamily.Helvetica;\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(content.style.bold) && content.style.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(content.style.italic) && content.style.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(content.style.underline) && content.style.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(content.style.strikeout) && content.style.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n    };\n    PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n        switch (pageNumberType) {\n            case 'LowerLatin':\n                return 2;\n            case 'LowerRoman':\n                return 3;\n            case 'UpperLatin':\n                return 4;\n            case 'UpperRoman':\n                return 5;\n            default:\n                return 1;\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.setContentFormat = function (content, format) {\n        if (!isNullOrUndefined(content.size)) {\n            var width = content.size.width * 0.75;\n            var height = content.size.height * 0.75;\n            format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n            if (!isNullOrUndefined(content.style.hAlign)) {\n                switch (content.style.hAlign) {\n                    case 'Right':\n                        format.alignment = PdfTextAlignment.Right;\n                        break;\n                    case 'Center':\n                        format.alignment = PdfTextAlignment.Center;\n                        break;\n                    case 'Justify':\n                        format.alignment = PdfTextAlignment.Justify;\n                        break;\n                    default:\n                        format.alignment = PdfTextAlignment.Left;\n                }\n            }\n            if (!isNullOrUndefined(content.style.vAlign)) {\n                format = this.getVerticalAlignment(content.style.vAlign, format);\n            }\n            return { format: format, size: new SizeF(width, height) };\n        }\n        return null;\n    };\n    PdfExport.prototype.getPageSize = function (pageSize) {\n        switch (pageSize) {\n            case 'Letter':\n                return new SizeF(612, 792);\n            case 'Note':\n                return new SizeF(540, 720);\n            case 'Legal':\n                return new SizeF(612, 1008);\n            case 'A0':\n                return new SizeF(2380, 3368);\n            case 'A1':\n                return new SizeF(1684, 2380);\n            case 'A2':\n                return new SizeF(1190, 1684);\n            case 'A3':\n                return new SizeF(842, 1190);\n            case 'A5':\n                return new SizeF(421, 595);\n            case 'A6':\n                return new SizeF(297, 421);\n            case 'A7':\n                return new SizeF(210, 297);\n            case 'A8':\n                return new SizeF(148, 210);\n            case 'A9':\n                return new SizeF(105, 148);\n            // case 'A10':\n            //     return new SizeF(74, 105);\n            case 'B0':\n                return new SizeF(2836, 4008);\n            case 'B1':\n                return new SizeF(2004, 2836);\n            case 'B2':\n                return new SizeF(1418, 2004);\n            case 'B3':\n                return new SizeF(1002, 1418);\n            case 'B4':\n                return new SizeF(709, 1002);\n            case 'B5':\n                return new SizeF(501, 709);\n            case 'Archa':\n                return new SizeF(648, 864);\n            case 'Archb':\n                return new SizeF(864, 1296);\n            case 'Archc':\n                return new SizeF(1296, 1728);\n            case 'Archd':\n                return new SizeF(1728, 2592);\n            case 'Arche':\n                return new SizeF(2592, 3456);\n            case 'Flsa':\n                return new SizeF(612, 936);\n            case 'HalfLetter':\n                return new SizeF(396, 612);\n            case 'Letter11x17':\n                return new SizeF(792, 1224);\n            case 'Ledger':\n                return new SizeF(1224, 792);\n            default:\n                return new SizeF(595, 842);\n        }\n    };\n    PdfExport.prototype.getDashStyle = function (dashStyle) {\n        switch (dashStyle) {\n            case 'Dash':\n                return 1;\n            case 'Dot':\n                return 2;\n            case 'DashDot':\n                return 3;\n            case 'DashDotDot':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getPenFromContent = function (content) {\n        var pen = new PdfPen(new PdfColor(0, 0, 0));\n        if (!isNullOrUndefined(content.style) && content.style !== null && !isNullOrUndefined(content.style.penColor)) {\n            var penColor = this.hexToRgb(content.style.penColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        return pen;\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getBrushFromContent = function (content) {\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        return brush;\n    };\n    PdfExport.prototype.hexToRgb = function (hex) {\n        if (hex === null || hex === '' || hex.length !== 7) {\n            throw new Error('please set valid hex value for color...');\n        }\n        hex = hex.substring(1);\n        var bigint = parseInt(hex, 16);\n        var r = (bigint >> 16) & 255;\n        var g = (bigint >> 8) & 255;\n        var b = bigint & 255;\n        return { r: r, g: g, b: b };\n    };\n    /**\n     * To destroy the pdf export\n     * @return {void}\n     * @hidden\n     */\n    PdfExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return PdfExport;\n}());\nexport { PdfExport };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, addClass, removeClass, attributes } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren } from '../base/util';\n/**\n * `CommandColumn` used to render command column in grid\n * @hidden\n */\nvar CommandColumnRenderer = /** @class */ (function (_super) {\n    __extends(CommandColumnRenderer, _super);\n    function CommandColumnRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.buttonElement = createElement('button', {});\n        _this.unbounDiv = createElement('div', { className: 'e-unboundcelldiv', styles: 'display: inline-block' });\n        _this.element = createElement('TD', {\n            className: 'e-rowcell e-unboundcell', attrs: {\n                role: 'gridcell', tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CommandColumnRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.unbounDiv.cloneNode());\n        node.setAttribute('aria-label', 'is Command column column header ' + cell.column.headerText);\n        if (cell.column.commandsTemplate) {\n            appendChildren(node.firstElementChild, cell.column.getColumnTemplate()(data));\n        }\n        else {\n            for (var _i = 0, _a = cell.commands; _i < _a.length; _i++) {\n                var command = _a[_i];\n                node = this.renderButton(node, command, attributes.index);\n            }\n        }\n        this.setAttributes(node, cell, attributes);\n        if (this.parent.isEdit) {\n            addClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n        }\n        else {\n            addClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n        }\n        return node;\n    };\n    CommandColumnRenderer.prototype.renderButton = function (node, buttonOption, index) {\n        var button = this.buttonElement.cloneNode();\n        attributes(button, {\n            'id': this.parent.element.id + (buttonOption.type || '') + '_' + index, 'type': 'button',\n            title: buttonOption.buttonOption.content || this.localizer.getConstant(buttonOption.type) || buttonOption.type\n        });\n        button.onclick = buttonOption.buttonOption.click;\n        var buttonObj = new Button(buttonOption.buttonOption, button);\n        buttonObj.commandType = buttonOption.type;\n        node.firstElementChild.appendChild(buttonObj.element);\n        switch (buttonOption.type) {\n            case 'Edit':\n            case 'Delete':\n                addClass([button], ['e-edit-delete', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n            case 'Cancel':\n            case 'Save':\n                addClass([button], ['e-save-cancel', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n        }\n        return node;\n    };\n    return CommandColumnRenderer;\n}(CellRenderer));\nexport { CommandColumnRenderer };\n","import { closest } from '@syncfusion/ej2-base';\nimport { initialEnd, click, keyPressed } from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { CommandColumnRenderer } from '../renderer/command-column-renderer';\n/**\n * `CommandColumn` used to handle the command column actions.\n * @hidden\n */\nvar CommandColumn = /** @class */ (function () {\n    function CommandColumn(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    CommandColumn.prototype.initiateRender = function () {\n        var cellFac = this.locator.getService('cellRendererFactory');\n        cellFac.addCellRenderer(CellType.CommandColumn, new CommandColumnRenderer(this.parent, this.locator));\n    };\n    CommandColumn.prototype.commandClickHandler = function (e) {\n        var gObj = this.parent;\n        var gID = gObj.element.id;\n        var target = closest(e.target, 'button');\n        if (!target || !gObj.editModule || !closest(e.target, '.e-unboundcell')) {\n            return;\n        }\n        var buttonObj = target.ej2_instances[0];\n        var type = buttonObj.commandType;\n        if (buttonObj.disabled) {\n            return;\n        }\n        switch (type) {\n            case 'Edit':\n                gObj.editModule.endEdit();\n                gObj.editModule.startEdit(closest(target, 'tr'));\n                break;\n            case 'Cancel':\n                gObj.editModule.closeEdit();\n                break;\n            case 'Save':\n                gObj.editModule.endEdit();\n                break;\n            case 'Delete':\n                gObj.editModule.endEdit();\n                gObj.clearSelection();\n                //for toogle issue when dbl click\n                gObj.selectRow(parseInt(closest(target, 'tr').getAttribute('aria-rowindex'), 10), false);\n                gObj.editModule.deleteRecord();\n                break;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    CommandColumn.prototype.getModuleName = function () {\n        return 'commandColumn';\n    };\n    /**\n     * To destroy CommandColumn.\n     * @method destroy\n     * @return {void}\n     */\n    CommandColumn.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    CommandColumn.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(click, this.commandClickHandler);\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(keyPressed, this.keyPressHandler);\n    };\n    CommandColumn.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(click, this.commandClickHandler, this);\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(keyPressed, this.keyPressHandler, this);\n    };\n    CommandColumn.prototype.keyPressHandler = function (e) {\n        if (e.action === 'enter' && closest(e.target, '.e-unboundcelldiv')) {\n            this.commandClickHandler(e);\n            e.preventDefault();\n        }\n    };\n    return CommandColumn;\n}());\nexport { CommandColumn };\n","import { closest, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport { createElement, remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { Resize } from '../actions/resize';\nimport { Page } from '../actions/page';\nimport { parentsUntil } from '../base/util';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { PdfExport } from '../actions/pdf-export';\nimport { ExcelExport } from '../actions/excel-export';\nexport var menuClass = {\n    header: '.e-gridheader',\n    content: '.e-gridcontent',\n    edit: '.e-inline-edit',\n    batchEdit: '.e-editedbatchcell',\n    editIcon: 'e-edit',\n    pager: '.e-gridpager',\n    delete: 'e-delete',\n    save: 'e-save',\n    cancel: 'e-cancel',\n    copy: 'e-copy',\n    pdf: 'e-pdfexport',\n    group: 'e-icon-group',\n    ungroup: 'e-icon-ungroup',\n    csv: 'e-csvexport',\n    excel: 'e-excelexport',\n    fPage: 'e-icon-first',\n    nPage: 'e-icon-next',\n    lPage: 'e-icon-last',\n    pPage: 'e-icon-prev',\n    ascending: 'e-icon-ascending',\n    descending: 'e-icon-descending',\n    groupHeader: 'e-groupdroparea',\n    touchPop: 'e-gridpopup'\n};\n/**\n * The `ContextMenu` module is used to handle context menu actions.\n */\nvar ContextMenu = /** @class */ (function () {\n    function ContextMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.localeText = this.setLocaleKey();\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialLoad, this.render, this);\n    };\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        EventHandler.remove(this.element, 'keydown', this.keyDownHandler.bind(this));\n    };\n    ContextMenu.prototype.keyDownHandler = function (e) {\n        if (e.code === 'Tab' || e.which === 9) {\n            this.contextMenu.close();\n        }\n    };\n    ContextMenu.prototype.render = function () {\n        this.parent.element.classList.add('e-noselect');\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = createElement('ul', { id: this.gridID + '_cmenu' });\n        EventHandler.add(this.element, 'keydown', this.keyDownHandler.bind(this));\n        this.parent.element.appendChild(this.element);\n        var target = '#' + this.gridID;\n        this.contextMenu = new Menu({\n            items: this.getMenuItems(),\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            target: target,\n            select: this.contextMenuItemClick.bind(this),\n            beforeOpen: this.contextMenuBeforeOpen.bind(this),\n            onOpen: this.contextMenuOpen.bind(this),\n            onClose: this.contextMenuOnClose.bind(this),\n            cssClass: 'e-grid-menu'\n        });\n        this.contextMenu.appendTo(this.element);\n    };\n    ContextMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.contextMenu) {\n                this.contextMenu.destroy();\n                remove(this.element);\n                this.parent.element.classList.remove('e-noselect');\n            }\n            this.render();\n        }\n    };\n    ContextMenu.prototype.getMenuItems = function () {\n        var menuItems = [];\n        var exportItems = [];\n        for (var _i = 0, _a = this.parent.contextMenuItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n                if (item.toLocaleLowerCase().indexOf('export') !== -1) {\n                    exportItems.push(this.buildDefaultItems(item));\n                }\n                else {\n                    menuItems.push(this.buildDefaultItems(item));\n                }\n            }\n            else if (typeof item !== 'string') {\n                menuItems.push(item);\n            }\n        }\n        if (exportItems.length > 0) {\n            var exportGroup = this.buildDefaultItems('export');\n            exportGroup.items = exportItems;\n            menuItems.push(exportGroup);\n        }\n        return menuItems;\n    };\n    ContextMenu.prototype.getLastPage = function () {\n        var totalpage = Math.floor(this.parent.pageSettings.totalRecordsCount / this.parent.pageSettings.pageSize);\n        if (this.parent.pageSettings.totalRecordsCount % this.parent.pageSettings.pageSize) {\n            totalpage += 1;\n        }\n        return totalpage;\n    };\n    ContextMenu.prototype.contextMenuOpen = function () {\n        this.isOpen = true;\n    };\n    ContextMenu.prototype.contextMenuItemClick = function (args) {\n        var item = this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Edit':\n                if (this.parent.editSettings.mode === 'Batch') {\n                    if (this.row && this.cell && !isNaN(parseInt(this.cell.getAttribute('aria-colindex'), 10))) {\n                        this.parent.editModule.editCell(parseInt(this.row.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(this.cell.getAttribute('aria-colindex'), 10)].field);\n                    }\n                }\n                else {\n                    this.parent.editModule.endEdit();\n                    this.parent.editModule.startEdit(this.row);\n                }\n                break;\n            case 'Delete':\n                if (this.parent.editSettings.mode !== 'Batch') {\n                    this.parent.editModule.endEdit();\n                }\n                if (this.parent.getSelectedRecords().length === 1) {\n                    this.parent.editModule.deleteRow(this.row);\n                }\n                else {\n                    this.parent.deleteRecord();\n                }\n                break;\n            case 'Save':\n                this.parent.editModule.endEdit();\n                break;\n            case 'Cancel':\n                this.parent.editModule.closeEdit();\n                break;\n            case 'Copy':\n                this.parent.copy();\n                break;\n            case 'PdfExport':\n                this.parent.pdfExport();\n                break;\n            case 'ExcelExport':\n                this.parent.excelExport();\n                break;\n            case 'CsvExport':\n                this.parent.csvExport();\n                break;\n            case 'SortAscending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'FirstPage':\n                this.parent.goToPage(1);\n                break;\n            case 'PrevPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage - 1);\n                break;\n            case 'LastPage':\n                this.parent.goToPage(this.getLastPage());\n                break;\n            case 'NextPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage + 1);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.contextMenuClick, args);\n    };\n    ContextMenu.prototype.contextMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.updateItemStatus();\n        }\n    };\n    ContextMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ContextMenu.prototype.updateItemStatus = function () {\n        this.contextMenu.showItems(this.hiddenItems);\n        this.contextMenu.enableItems(this.disableItems);\n        this.hiddenItems = [];\n        this.disableItems = [];\n        this.isOpen = false;\n    };\n    ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n        var changedRecords = 'changedRecords';\n        var addedRecords = 'addedRecords';\n        var deletedRecords = 'deletedRecords';\n        var closestGrid = closest(args.event.target, '.e-grid');\n        if (args.event && closestGrid && closestGrid !== this.parent.element) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + menuClass.groupHeader)\n            || closest(args.event.target, '.' + menuClass.touchPop) ||\n            closest(args.event.target, '.e-summarycell') ||\n            closest(args.event.target, '.e-groupcaption') ||\n            closest(args.event.target, '.e-filterbarcell'))) {\n            args.cancel = true;\n        }\n        else {\n            this.targetColumn = this.getColumn(args.event);\n            this.selectRow(args.event, this.parent.selectionSettings.type !== 'Multiple');\n            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var key = this.getKeyFromId(item.id);\n                var dItem = this.defaultItems[key];\n                if (this.getDefaultItems().indexOf(key) !== -1) {\n                    if (this.ensureDisabledStatus(key)) {\n                        this.disableItems.push(item.text);\n                    }\n                    if (args.event && (this.ensureTarget(args.event.target, menuClass.edit) ||\n                        this.ensureTarget(args.event.target, menuClass.batchEdit))) {\n                        if (key !== 'Save' && key !== 'Cancel') {\n                            this.hiddenItems.push(item.text);\n                        }\n                    }\n                    else if (this.parent.editSettings.mode === 'Batch' && ((closest(args.event.target, '.e-gridform')) ||\n                        this.parent.editModule.getBatchChanges()[changedRecords].length ||\n                        this.parent.editModule.getBatchChanges()[addedRecords].length ||\n                        this.parent.editModule.getBatchChanges()[deletedRecords].length) && (key === 'Save' || key === 'Cancel')) {\n                        continue;\n                    }\n                    else if (isNullOrUndefined(args.parentItem) && args.event\n                        && !this.ensureTarget(args.event.target, dItem.target)) {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (item.target && args.event &&\n                    !this.ensureTarget(args.event.target, item.target)) {\n                    this.hiddenItems.push(item.text);\n                }\n            }\n            this.contextMenu.enableItems(this.disableItems, false);\n            this.contextMenu.hideItems(this.hiddenItems);\n            this.eventArgs = args.event;\n            args.column = this.targetColumn;\n            this.parent.trigger(events.contextMenuOpen, args);\n            if (this.hiddenItems.length === args.items.length) {\n                this.updateItemStatus();\n                args.cancel = true;\n            }\n        }\n    };\n    ContextMenu.prototype.ensureTarget = function (targetElement, selector) {\n        var target = targetElement;\n        if (this.ensureFrozenHeader(targetElement) && (selector === menuClass.header || selector === menuClass.content)) {\n            target = closest(targetElement, selector === menuClass.header ? 'thead' : 'tbody');\n        }\n        else if (selector === menuClass.content || selector === menuClass.header) {\n            target = parentsUntil(closest(targetElement, '.e-table'), selector.substr(1, selector.length));\n        }\n        else {\n            target = closest(targetElement, selector);\n        }\n        return target && parentsUntil(target, 'e-grid') === this.parent.element;\n    };\n    ContextMenu.prototype.ensureFrozenHeader = function (targetElement) {\n        return (this.parent.getFrozenColumns() || this.parent.frozenRows)\n            && closest(targetElement, menuClass.header) ? true : false;\n    };\n    ContextMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !(this.parent.ensureModuleInjected(Resize) && !this.parent.isEdit);\n                break;\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n                    status = true;\n                }\n                break;\n            case 'Ungroup':\n                if (!this.parent.allowGrouping || !this.parent.ensureModuleInjected(Group)\n                    || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'Edit':\n            case 'Delete':\n            case 'Save':\n            case 'Cancel':\n                if (!this.parent.editModule || (this.parent.getDataRows().length === 0)) {\n                    status = true;\n                }\n                break;\n            case 'Copy':\n                if (this.parent.getSelectedRowIndexes().length === 0 ||\n                    this.parent.getCurrentViewRecords().length === 0) {\n                    status = true;\n                }\n                break;\n            case 'export':\n                if ((!this.parent.allowExcelExport || !this.parent.excelExport) ||\n                    !this.parent.ensureModuleInjected(PdfExport) && !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'PdfExport':\n                if (!(this.parent.allowPdfExport) || !this.parent.ensureModuleInjected(PdfExport)) {\n                    status = true;\n                }\n                break;\n            case 'ExcelExport':\n            case 'CsvExport':\n                if (!(this.parent.allowExcelExport) || !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'SortAscending':\n            case 'SortDescending':\n                if ((!this.parent.allowSorting) || !this.parent.ensureModuleInjected(Sort)) {\n                    status = true;\n                }\n                else if (this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    this.parent.sortSettings.columns.forEach(function (element) {\n                        if (element.field === _this.targetColumn.field\n                            && element.direction.toLowerCase() === item.toLowerCase().replace('sort', '').toLocaleLowerCase()) {\n                            status = true;\n                        }\n                    });\n                }\n                break;\n            case 'FirstPage':\n            case 'PrevPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === 1)) {\n                    status = true;\n                }\n                break;\n            case 'LastPage':\n            case 'NextPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === this.getLastPage())) {\n                    status = true;\n                }\n                break;\n        }\n        return status;\n    };\n    /**\n     * Gets the context menu element from the Grid.\n     * @return {Element}\n     */\n    ContextMenu.prototype.getContextMenu = function () {\n        return this.element;\n    };\n    /**\n     * Destroys the context menu component in the Grid.\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ContextMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.contextMenu.destroy();\n        remove(this.element);\n        this.removeEventListener();\n        this.parent.element.classList.remove('e-noselect');\n    };\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextMenu';\n    };\n    ContextMenu.prototype.generateID = function (item) {\n        return this.gridID + '_cmenu_' + item;\n    };\n    ContextMenu.prototype.getKeyFromId = function (id) {\n        return id.replace(this.gridID + '_cmenu_', '');\n    };\n    ContextMenu.prototype.buildDefaultItems = function (item) {\n        var menuItem;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                menuItem = { target: menuClass.header };\n                break;\n            case 'Group':\n                menuItem = { target: menuClass.header, iconCss: menuClass.group };\n                break;\n            case 'Ungroup':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ungroup };\n                break;\n            case 'Edit':\n                menuItem = { target: menuClass.content, iconCss: menuClass.editIcon };\n                break;\n            case 'Delete':\n                menuItem = { target: menuClass.content, iconCss: menuClass.delete };\n                break;\n            case 'Save':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.save };\n                break;\n            case 'Cancel':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.cancel };\n                break;\n            case 'Copy':\n                menuItem = { target: menuClass.content, iconCss: menuClass.copy };\n                break;\n            case 'export':\n                menuItem = { target: menuClass.content };\n                break;\n            case 'PdfExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.pdf };\n                break;\n            case 'ExcelExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.excel };\n                break;\n            case 'CsvExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.csv };\n                break;\n            case 'SortAscending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ascending };\n                break;\n            case 'SortDescending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.descending };\n                break;\n            case 'FirstPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.fPage };\n                break;\n            case 'PrevPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.pPage };\n                break;\n            case 'LastPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.lPage };\n                break;\n            case 'NextPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.nPage };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n        };\n        return this.defaultItems[item];\n    };\n    ContextMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit',\n            'Group', 'Ungroup', 'Edit', 'Delete', 'Save', 'Cancel', 'Copy', 'export',\n            'PdfExport', 'ExcelExport', 'CsvExport', 'SortAscending', 'SortDescending',\n            'FirstPage', 'PrevPage', 'LastPage', 'NextPage'];\n    };\n    ContextMenu.prototype.setLocaleKey = function () {\n        return {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Copy': 'Copy',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'Edit': 'EditRecord',\n            'Delete': 'DeleteRecord',\n            'Save': 'Save',\n            'Cancel': 'CancelButton',\n            'PdfExport': 'Pdfexport',\n            'ExcelExport': 'Excelexport',\n            'CsvExport': 'Csvexport',\n            'export': 'Export',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'FirstPage': 'FirstPage',\n            'LastPage': 'LastPage',\n            'PrevPage': 'PreviousPage',\n            'NextPage': 'NextPage'\n        };\n    };\n    ContextMenu.prototype.getColumn = function (e) {\n        var cell = closest(e.target, 'th.e-headercell');\n        if (cell) {\n            cell.classList.add('e-resized');\n            var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ContextMenu.prototype.selectRow = function (e, isSelectable) {\n        this.cell = e.target;\n        this.row = closest(e.target, 'tr.e-row') || this.row;\n        if (this.row && isSelectable && !parentsUntil(e.target, 'e-gridpager')) {\n            this.parent.selectRow(parseInt(this.row.getAttribute('aria-rowindex'), 10));\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { RowModelGenerator } from '../services/row-model-generator';\n/**\n * FreezeRowModelGenerator is used to generate grid data rows with freeze row and column.\n * @hidden\n */\nvar FreezeRowModelGenerator = /** @class */ (function () {\n    function FreezeRowModelGenerator(parent) {\n        this.isFrzLoad = 1;\n        this.parent = parent;\n        this.rowModelGenerator = new RowModelGenerator(this.parent);\n    }\n    FreezeRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var frzCols = this.parent.getFrozenColumns();\n        var row = this.rowModelGenerator.generateRows(data, notifyArgs);\n        for (var i = 0, len = row.length; i < len; i++) {\n            if (this.isFrzLoad % 2 === 0) {\n                row[i].cells = row[i].cells.slice(frzCols, row[i].cells.length);\n            }\n            else {\n                row[i].cells = row[i].cells.slice(0, frzCols);\n            }\n        }\n        this.isFrzLoad++;\n        return row;\n    };\n    return FreezeRowModelGenerator;\n}());\nexport { FreezeRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, remove, addClass } from '@syncfusion/ej2-base';\nimport { HeaderRender } from './header-renderer';\nimport { ContentRender } from './content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\nimport { renderMovable, getScrollBarWidth } from '../base/util';\n/**\n * Freeze module is used to render grid content with frozen rows and columns\n * @hidden\n */\nvar FreezeContentRender = /** @class */ (function (_super) {\n    __extends(FreezeContentRender, _super);\n    function FreezeContentRender(parent, locator) {\n        return _super.call(this, parent, locator) || this;\n    }\n    FreezeContentRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = createElement('div', { className: 'e-frozencontent' });\n        var mDiv = createElement('div', { className: 'e-movablecontent' });\n        this.getPanel().firstChild.appendChild(fDiv);\n        this.getPanel().firstChild.appendChild(mDiv);\n        this.setFrozenContent(fDiv);\n        this.setMovableContent(mDiv);\n    };\n    FreezeContentRender.prototype.renderEmpty = function (tbody) {\n        _super.prototype.renderEmpty.call(this, tbody);\n        this.getMovableContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n        this.getFrozenContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getFrozenColumns();\n        this.getFrozenContent().style.borderRightWidth = '0px';\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n            this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n        }\n    };\n    FreezeContentRender.prototype.setFrozenContent = function (ele) {\n        this.frozenContent = ele;\n    };\n    FreezeContentRender.prototype.setMovableContent = function (ele) {\n        this.movableContent = ele;\n    };\n    FreezeContentRender.prototype.getFrozenContent = function () {\n        return this.frozenContent;\n    };\n    FreezeContentRender.prototype.getMovableContent = function () {\n        return this.movableContent;\n    };\n    FreezeContentRender.prototype.getModelGenerator = function () {\n        return new FreezeRowModelGenerator(this.parent);\n    };\n    FreezeContentRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        this.getFrozenContent().appendChild(this.getTable());\n        var mTbl = this.getTable().cloneNode(true);\n        this.getMovableContent().appendChild(mTbl);\n        remove(this.getMovableContent().querySelector('colgroup'));\n        var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n        mTbl.insertBefore(colGroup, mTbl.querySelector('tbody'));\n    };\n    return FreezeContentRender;\n}(ContentRender));\nexport { FreezeContentRender };\nvar FreezeRender = /** @class */ (function (_super) {\n    __extends(FreezeRender, _super);\n    function FreezeRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeRender.prototype.addEventListener = function () {\n        this.parent.on(events.freezeRender, this.refreshFreeze, this);\n        this.parent.on(events.frozenHeight, this.setFrozenHeight, this);\n    };\n    FreezeRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.frozenHeight, this.setFrozenHeight);\n    };\n    FreezeRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        this.rfshMovable();\n        this.updateColgroup();\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = createElement('div', { className: 'e-frozenheader' });\n        var mDiv = createElement('div', { className: 'e-movableheader' });\n        this.getPanel().firstChild.appendChild(fDiv);\n        this.getPanel().firstChild.appendChild(mDiv);\n        this.setFrozenHeader(fDiv);\n        this.setMovableHeader(mDiv);\n    };\n    FreezeRender.prototype.refreshUI = function () {\n        var tbody = this.getMovableHeader().querySelector('tbody');\n        remove(this.getMovableHeader().querySelector('table'));\n        _super.prototype.refreshUI.call(this);\n        this.rfshMovable();\n        this.getMovableHeader().querySelector('tbody').innerHTML = tbody.innerHTML;\n        this.updateColgroup();\n        renderMovable(this.parent.getContentTable().querySelector('colgroup'), this.parent.getFrozenColumns());\n        this.initializeHeaderDrag();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.rfshMovable = function () {\n        this.getFrozenHeader().appendChild(this.getTable());\n        this.getMovableHeader().appendChild(this.createTable());\n        this.refreshStackedHdrHgt();\n        this.addMovableFirstCls();\n    };\n    FreezeRender.prototype.addMovableFirstCls = function () {\n        if (this.parent.getVisibleFrozenColumns()) {\n            var movablefirstcell = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader');\n            var len = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader').length;\n            for (var i = 0; i < len; i++) {\n                var cells = 'cells';\n                var element = movablefirstcell[i][cells][0];\n                if (element) {\n                    addClass([element], ['e-movablefirst']);\n                    if (movablefirstcell[i][cells][0].rowSpan > 1) {\n                        i = i + (movablefirstcell[i][cells][0].rowSpan - 1);\n                    }\n                }\n            }\n        }\n    };\n    FreezeRender.prototype.refreshFreeze = function (obj) {\n        if (obj.case === 'filter') {\n            var filterRow = this.getTable().querySelector('.e-filterbar');\n            if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n                this.getMovableHeader().querySelector('thead')\n                    .appendChild(renderMovable(filterRow, this.parent.getFrozenColumns()));\n            }\n        }\n        else if (obj.case === 'textwrap') {\n            var fRows = void 0;\n            var mRows = void 0;\n            var fHdr = this.getFrozenHeader();\n            var mHdr = this.getMovableHeader();\n            var cont = this.parent.getContent();\n            var wrapMode = this.parent.textWrapSettings.wrapMode;\n            var hdrClassList = this.parent.getHeaderContent().firstChild.classList;\n            if (wrapMode !== 'Header' || obj.isModeChg) {\n                fRows = cont.querySelector('.e-frozencontent').querySelectorAll('tr');\n                mRows = cont.querySelector('.e-movablecontent').querySelectorAll('tr');\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, true);\n            }\n            if (wrapMode === 'Content' && this.parent.allowTextWrap) {\n                hdrClassList.add('e-wrap');\n            }\n            else {\n                hdrClassList.remove('e-wrap');\n            }\n            if (wrapMode === 'Both' || obj.isModeChg) {\n                fRows = fHdr.querySelectorAll('tr');\n                mRows = mHdr.querySelectorAll('tr');\n            }\n            else {\n                fRows = fHdr.querySelector(wrapMode === 'Content' ? 'tbody' : 'thead').querySelectorAll('tr');\n                mRows = mHdr.querySelector(wrapMode === 'Content' ? 'tbody' : 'thead').querySelectorAll('tr');\n            }\n            if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, false, this.colDepth > 1);\n            }\n            this.refreshStackedHdrHgt();\n        }\n    };\n    FreezeRender.prototype.updateResizeHandler = function () {\n        [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-rhandler')).forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n        });\n    };\n    FreezeRender.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset, isStackedHdr) {\n        var fRowHgt;\n        var mRowHgt;\n        var isWrap = this.parent.allowTextWrap;\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var tHead = this.parent.getHeaderContent().querySelector('thead');\n        var tBody = this.parent.getHeaderContent().querySelector('tbody');\n        var height = [];\n        var width = [];\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            height[i] = fRows[i].offsetHeight; //https://pagebuildersandwich.com/increased-plugins-performance-200/\n            width[i] = mRows[i].offsetHeight;\n        }\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            if (isModeChg && ((wrapMode === 'Header' && isContReset) || ((wrapMode === 'Content' && tHead.contains(fRows[i]))\n                || (wrapMode === 'Header' && tBody.contains(fRows[i])))) || isStackedHdr) {\n                fRows[i].style.height = null;\n                mRows[i].style.height = null;\n            }\n            fRowHgt = height[i];\n            mRowHgt = width[i];\n            if (fRows[i].childElementCount && ((isWrap && fRowHgt < mRowHgt) || (!isWrap && fRowHgt > mRowHgt) ||\n                (this.parent.allowResizing && !this.parent.resizeModule.isFrozenColResized))) {\n                if (!this.parent.allowResizing || (this.parent.allowResizing && !this.parent.resizeModule.isFrozenColResized)) {\n                    fRows[i].style.height = mRowHgt + 'px';\n                }\n            }\n            if (mRows[i].childElementCount && ((isWrap && fRowHgt > mRowHgt) || (!isWrap && fRowHgt < mRowHgt) ||\n                (this.parent.allowResizing && this.parent.resizeModule.isFrozenColResized))) {\n                if (!this.parent.allowResizing || (this.parent.allowResizing && this.parent.resizeModule.isFrozenColResized)) {\n                    mRows[i].style.height = fRowHgt + 'px';\n                }\n            }\n        }\n        if (isWrap) {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.setFrozenHeight = function () {\n        var movableContentHeight = this.parent.element.querySelector('.e-movablecontent').getBoundingClientRect().height;\n        var frozenContentHeight = this.parent.element.querySelector('.e-frozencontent').getBoundingClientRect().height;\n        if (movableContentHeight > frozenContentHeight) {\n            this.parent.element.querySelector('.e-frozencontent').style.height = movableContentHeight -\n                getScrollBarWidth() + 'px';\n        }\n    };\n    FreezeRender.prototype.refreshStackedHdrHgt = function () {\n        var fRowSpan;\n        var mRowSpan;\n        var fTr = this.getFrozenHeader().querySelectorAll('.e-columnheader');\n        var mTr = this.getMovableHeader().querySelectorAll('.e-columnheader');\n        for (var i = 0, len = fTr.length; i < len; i++) {\n            fRowSpan = this.getRowSpan(fTr[i]);\n            mRowSpan = this.getRowSpan(mTr[i]);\n            if (fRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, fRowSpan.max, fTr[i], mTr);\n            }\n            else if (mRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, mRowSpan.max, mTr[i], fTr);\n            }\n        }\n        if (this.parent.allowResizing) {\n            this.updateResizeHandler();\n        }\n    };\n    FreezeRender.prototype.getRowSpan = function (row) {\n        var rSpan;\n        var minRowSpan;\n        var maxRowSpan;\n        for (var i = 0, len = row.childElementCount; i < len; i++) {\n            if (i === 0) {\n                minRowSpan = row.children[0].rowSpan;\n            }\n            rSpan = row.children[i].rowSpan;\n            minRowSpan = Math.min(rSpan, minRowSpan);\n            maxRowSpan = Math.max(rSpan, minRowSpan);\n        }\n        return { min: minRowSpan, max: maxRowSpan };\n    };\n    FreezeRender.prototype.updateStackedHdrRowHgt = function (idx, maxRowSpan, row, rows) {\n        var height = 0;\n        for (var i = 0; i < maxRowSpan; i++) {\n            height += rows[idx + i].style.height ?\n                parseInt(rows[idx + i].style.height, 10) : rows[idx + i].offsetHeight;\n        }\n        row.style.height = height + 'px';\n    };\n    FreezeRender.prototype.setFrozenHeader = function (ele) {\n        this.frozenHeader = ele;\n    };\n    FreezeRender.prototype.setMovableHeader = function (ele) {\n        this.movableHeader = ele;\n    };\n    FreezeRender.prototype.getFrozenHeader = function () {\n        return this.frozenHeader;\n    };\n    FreezeRender.prototype.getMovableHeader = function () {\n        return this.movableHeader;\n    };\n    FreezeRender.prototype.updateColgroup = function () {\n        var mTable = this.getMovableHeader().querySelector('table');\n        remove(this.getMovableHeader().querySelector('colgroup'));\n        mTable.insertBefore(renderMovable(this.getFrozenHeader().querySelector('colgroup'), this.parent.getFrozenColumns()), mTable.querySelector('thead'));\n    };\n    return FreezeRender;\n}(HeaderRender));\nexport { FreezeRender };\n","import * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { parentsUntil } from '../base/util';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { FreezeRender, FreezeContentRender } from '../renderer/freeze-renderer';\n/**\n * `Freeze` module is used to handle Frozen rows and columns.\n * @hidden\n */\nvar Freeze = /** @class */ (function () {\n    function Freeze(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Freeze.prototype.getModuleName = function () {\n        return 'freeze';\n    };\n    Freeze.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n    };\n    Freeze.prototype.wireEvents = function () {\n        if (this.parent.frozenRows) {\n            EventHandler.add(this.parent.getHeaderContent(), 'dblclick', this.dblClickHandler, this);\n        }\n    };\n    Freeze.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-grid').id !== this.parent.element.id) {\n            return;\n        }\n        this.parent.notify(events.dblclick, e);\n    };\n    Freeze.prototype.instantiateRenderer = function () {\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.getFrozenColumns()) {\n            renderer.addRenderer(RenderType.Header, new FreezeRender(this.parent, this.locator));\n            renderer.addRenderer(RenderType.Content, new FreezeContentRender(this.parent, this.locator));\n        }\n    };\n    Freeze.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n    };\n    Freeze.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Freeze;\n}());\nexport { Freeze };\n","import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement, remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\n/**\n * 'column menu module used to handle column menu actions'\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.add(ele, 'mousedown', _this.columnMenuHandlerDown, _this);\n        });\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.remove(ele, 'mousedown', _this.columnMenuHandlerDown);\n        });\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.columnMenu.destroy();\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        remove(this.element);\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                this.columnMenu.close();\n                this.openColumnMenu(e);\n            }\n            else if (!this.isOpen) {\n                this.openColumnMenu(e);\n            }\n            else {\n                this.columnMenu.close();\n            }\n        }\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (Browser.isDevice) {\n            pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n            pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n        }\n        else {\n            if (this.parent.enableRtl) {\n                pos = calculatePosition(this.headerCell, 'left', 'bottom');\n            }\n            else {\n                pos = calculatePosition(this.headerCell, 'right', 'bottom');\n                pos.left -= elePos.width;\n            }\n        }\n        this.columnMenu.open(pos.top, pos.left);\n        e.preventDefault();\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            this.render();\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        if (this.isChooserItem(args.item)) {\n            var field = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.getColumnByField(field);\n            var check = createCheckBox(false, {\n                label: args.item.text,\n                checked: column.visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || parentsUntil(args.event.target, 'e-popup') ||\n            (parentsUntil(args.event.target, 'e-popup-wrapper')))) {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[key];\n            if (this.getDefaultItems().indexOf(key) !== -1) {\n                if (this.ensureDisabledStatus(key) && !dItem.hide) {\n                    this.disableItems.push(item.text);\n                }\n                else if (item.hide) {\n                    this.hiddenItems.push(item.text);\n                }\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    this.parent.sortSettings.columns.forEach(function (ele) {\n                        if (ele.field === _this.targetColumn.field\n                            && ele.direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    });\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort)) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                status = !(this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter));\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        return {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function (e) {\n        var filterPopup = this.getFilterPop();\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        return this.parent.element.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { initForeignKeyColumn, getForeignKeyData, generateQuery } from '../base/constant';\nimport { getDatePredicate } from '../base/util';\nimport { Data } from './data';\n/**\n * `ForeignKey` module is used to handle foreign key column's actions.\n */\nvar ForeignKey = /** @class */ (function (_super) {\n    __extends(ForeignKey, _super);\n    function ForeignKey(parent, serviceLocator) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.initEvent();\n        return _this;\n    }\n    ForeignKey.prototype.initEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initForeignKeyColumn, this.initForeignKeyColumns, this);\n        this.parent.on(getForeignKeyData, this.getForeignKeyData, this);\n        this.parent.on(generateQuery, this.generateQueryFormData, this);\n    };\n    ForeignKey.prototype.initForeignKeyColumns = function (columns) {\n        columns.forEach(function (column) {\n            column.dataSource = (column.dataSource instanceof DataManager ? column.dataSource :\n                (isNullOrUndefined(column.dataSource) ? new DataManager() : new DataManager(column.dataSource)));\n        });\n    };\n    ForeignKey.prototype.getForeignKeyData = function (args) {\n        var _this = this;\n        var foreignColumns = args.column ? [args.column] : this.parent.getForeignKeyColumns();\n        var allPromise = [];\n        foreignColumns.forEach(function (col) {\n            var promise;\n            var query = args.isComplex ? _this.genarateColumnQuery(col) :\n                _this.genarateQuery(col, args.result.result, false, true);\n            var dataSource = col.dataSource;\n            if (!dataSource.ready || dataSource.dataSource.offline) {\n                promise = dataSource.executeQuery(query);\n            }\n            else {\n                promise = dataSource.ready.then(function () {\n                    return dataSource.executeQuery(query);\n                });\n            }\n            allPromise.push(promise);\n        });\n        Promise.all(allPromise).then(function (responses) {\n            responses.forEach(function (data, index) {\n                foreignColumns[index].columnData = data.result;\n            });\n            args.promise.resolve(args.result);\n        }).catch(function (e) {\n            if (args.promise && args.promise.reject) {\n                args.promise.reject(e);\n            }\n            return e;\n        });\n    };\n    ForeignKey.prototype.generateQueryFormData = function (args) {\n        args.predicate.predicate = this.genarateQuery(args.column, args.column.columnData, true);\n    };\n    ForeignKey.prototype.genarateQuery = function (column, e, fromData, needQuery) {\n        var gObj = this.parent;\n        var predicates = [];\n        var predicate;\n        var query = new Query();\n        var field = fromData ? column.foreignKeyField : column.field;\n        if (gObj.allowPaging || gObj.enableVirtualization || fromData) {\n            e = new DataManager(((gObj.allowGrouping && gObj.groupSettings.columns.length) ?\n                e.records : e)).executeLocal(new Query().select(field));\n            var filteredValue = DataUtil.distinct(e, field, false);\n            field = fromData ? column.field : column.foreignKeyField;\n            filteredValue.forEach(function (obj) {\n                if (obj && obj.getDay) {\n                    predicates.push(getDatePredicate({ field: field, operator: 'equal', value: obj, matchCase: false }));\n                }\n                else {\n                    predicates.push(new Predicate(field, 'equal', obj, false));\n                }\n            });\n        }\n        if (needQuery) {\n            return predicates.length ? query.where(Predicate.or(predicates)) : query;\n        }\n        predicate = (predicates.length ? Predicate.or(predicates) : { predicates: [] });\n        return predicate;\n    };\n    ForeignKey.prototype.genarateColumnQuery = function (column) {\n        var gObj = this.parent;\n        var query = gObj.query.clone();\n        var predicate = [];\n        var queryColumn = this.isFiltered(column);\n        if (queryColumn.isTrue) {\n            query = this.filterQuery(query, queryColumn.column, true);\n        }\n        if (gObj.searchSettings.key.length) {\n            var sSettings = gObj.searchSettings;\n            query.search(sSettings.key, column.foreignKeyValue, sSettings.operator, sSettings.ignoreCase);\n        }\n        return query;\n    };\n    ForeignKey.prototype.isFiltered = function (column) {\n        var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n            return (fColumn.field === column.foreignKeyValue);\n        });\n        return {\n            column: filterColumn, isTrue: !!filterColumn.length\n        };\n    };\n    ForeignKey.prototype.getModuleName = function () {\n        return 'foreignKey';\n    };\n    ForeignKey.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.destroyEvent();\n    };\n    ForeignKey.prototype.destroyEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initForeignKeyColumn, this.initForeignKeyColumns);\n        this.parent.off(getForeignKeyData, this.getForeignKeyData);\n        this.parent.off(generateQuery, this.generateQueryFormData);\n    };\n    return ForeignKey;\n}(Data));\nexport { ForeignKey };\n"],"names":["doesImplementInterface","target","checkFor","prototype","valueAccessor","field","data","column","isNullOrUndefined","getValue","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","e","iterateArrayOrObject","collection","predicate","result","i","len","length","pred","push","templateCompiler","template","document","querySelectorAll","baseTemplateComplier","querySelector","innerHTML","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","baseExtend","setStyleAttribute","addClass","attributes","extend","copied","first","second","exclude","moved","Object","keys","forEach","value","index","indexOf","prepareColumns","columns","autoWidth","c","Column","headerText","foreignKeyValue","foreignKeyField","width","visible","setCssInGridPopUp","popUp","className","isBottomTail","popUpSpan","position","parentElement","getBoundingClientRect","targetPosition","style","display","clientY","changedTouches","offsetHeight","top","left","popup","offsetWidth","x","getPosition","right","getPopupLeftPosition","getActualProperties","obj","ChildProperty","parentsUntil","elem","selector","isID","parent","id","classList","contains","getElementIndex","element","elements","isEqualNode","inArray","getActualPropFromColl","coll","hasOwnProperty","properties","removeElement","slice","call","remove","clientX","y","getUid","prefix","uid","appendChildren","children","appendChild","parents","calculateAggregate","type","context","customAggregate","DataUtil","aggregates","toLowerCase","getScrollBarWidth","scrollWidth","divNode","createElement","cssText","body","clientWidth","removeChild","getRowHeight","undefined","rowHeight","table","styles","rect","Math","ceil","height","isComplexField","split","getComplexFieldID","splits","fieldName","getComplexValue","rowData","complexValue","isEditable","col","row","isOldRow","isIdentity","isPrimaryKey","allowEditing","isActionPrevent","inst","dlg","editSettings","mode","showConfirmDialog","wrap","action","Array","add","changeButtonType","_i","elements_1","button","setFormatter","serviceLocator","fmtr","getService","getFormatFunction","skeleton","format","setParser","getParserFunction","addRemoveActiveClasses","cells","args","arguments","setAttribute","removeAttribute","distinctStringValues","temp","res","toString","getFilterMenuPostion","dialogObj","grid","elementVisible","newpos","dlgWidth","enableRtl","calculatePosition","leftPos","calculateRelativeBasedPosition","getZIndexCalcualtion","zIndex","toogleCheckbox","span","createCboxWithWrap","div","removeAddCboxClasses","checked","removeClass","refreshForeignData","setValue","getForeignData","foreignKeyData","cell","isForeignKey","lValue","fField","key","query","Query","fdata","dataSource","DataManager","offline","json","columnData","getDay","where","getDatePredicate","operator","matchCase","executeLocal","getColumnByForeignKeyValue","some","filterObject","datePredicate","prevDate","nextDate","prevObj","nextObj","Date","setSeconds","getSeconds","setHours","predicateSt","Predicate","predicateEnd","and","or","setProperties","ejpredicate","renderMovable","ele","frzCols","mEle","cloneNode","childElementCount","setStateAndProperties","attribute","summaryIterator","callback","ValueFormatter","cultureName","this","intl","Internationalization","culture","getDateFormat","getNumberFormat","getDateParser","getNumberParser","fromView","toView","setCulture","options","_this","allowSorting","allowResizing","allowFiltering","allowGrouping","allowReordering","showColumnMenu","enableGroupByFormat","filter","showInColumnChooser","edit","sortDirection","merge","valueFormatter","commands","textAlign","commandsTemplate","templateFn","headerTemplate","headerTemplateFn","itemTemplate","fltrTemplateFn","isForeignColumn","editType","params","fields","text","sortComparer","a_1","z","fnDescending","fnAscending","getSortDirection","setSortDirection","direction","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getHeaderTemplate","getFilterItemTemplate","getDomSetter","disableHtmlEncode","queryCellInfo","headerCellInfo","actionBegin","actionComplete","actionFailure","dataBound","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDragStart","columnDrag","columnDrop","rowDragStart","rowDrag","rowDrop","beforePrint","printComplete","detailDataBound","batchAdd","batchCancel","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","recordDoubleClick","beforeDataBound","beforeOpenColumnChooser","checkBoxChange","filterChoiceRequest","filterAfterOpen","filterBeforeOpen","filterSearchBegin","initialLoad","initialEnd","dataReady","contentReady","uiUpdate","onEmpty","inBoundModelChanged","modelChanged","colGroupRefresh","headerRefreshed","pageComplete","sortComplete","filterComplete","searchComplete","reorderComplete","rowDragAndDropComplete","groupComplete","ungroupComplete","rowSelectionComplete","cellSelectionComplete","beforeCellFocused","cellFocused","keyPressed","click","destroy","columnVisibilityChanged","scroll","columnWidthChanged","columnPositionChanged","rowsAdded","rowsRemoved","columnDragStop","headerDrop","dataSourceModified","refreshComplete","refreshVirtualBlock","dblclick","toolbarRefresh","bulkSave","autoCol","tooltipDestroy","updateData","saveComplete","deleteComplete","preventBatch","dialogDestroy","crudAction","addDeleteAction","destroyForm","doubleTap","beforeExcelExport","excelExportComplete","excelQueryCellInfo","excelHeaderQueryCellInfo","beforePdfExport","pdfExportComplete","pdfQueryCellInfo","pdfHeaderQueryCellInfo","contextMenuClick","freezeRender","contextMenuOpen","columnMenuClick","columnMenuOpen","filterOpen","filterDialogCreated","filterMenuClose","initForeignKeyColumn","getForeignKeyData","generateQuery","showEmptyGrid","dataStateChange","dataSourceChanged","rtlUpdated","beforeFragAppend","frozenHeight","CellType","RenderType","ToolbarItem","CheckBoxFilter","filterSettings","existingPredicate","filterState","values","cBoxTrue","createCheckBox","label","cBoxFalse","locale","insertBefore","attrs","firstChild","closeDialog","wireEvents","EventHandler","clickHandler","searchHandler","debounce","searchBoxKeyUp","unWireEvents","searchBoxClick","sInput","refreshCheckboxes","updateSearchIcon","focus","sIcon","getLocalizedLabel","localeObj","getConstant","updateDataSource","updateModel","actualPredicate","filteredColumns","sortedColumns","sortSettings","allowCaseSensitive","isFiltered","getAndSetChkElem","sBox","hideSearchbox","title","searchBox","Input","createInput","floatLabelType","placeholder","spinner","cBox","showDialog","requestType","events.filterBeforeOpen","filterModel","columnName","columnType","cancel","trigger","events.actionBegin","Dialog","content","close","bind","animationSettings","effect","buttons","btnClick","buttonModel","isExcel","cssClass","isPrimary","created","dialogCreated","open","dialogOpen","appendTo","maxHeight","show","createSpinner","showSpinner","getAllData","Browser","isDevice","X","Y","notify","events.filterDialogCreated","openDialog","isDestroyed","events.filterMenuClose","clearFilter","events.preventBatch","instance","handler","tagName","filterCollection","textContent","fltrBtnHandler","optr","caseSen","defaults","ignoreAccent","isNotEqual","itemsCnt","fObj","searchInput","getAttribute","arg1","arg2","arg3","arg4","arg5","arg6","initiateFilter","fColl","firstVal","j","val","clone","parsed","parseFloat","predicte","events.filterSearchBegin","filterChoiceCount","take","filterEvent","processSearch","getPredicateFromCols","predicates","getPredicate","predicateList","fPredicate","foreignColumn","getForeignKeyColumns","_a","prop","events.generateQuery","requiresCount","events.filterChoiceRequest","processDataOperation","eventPromise","promise","then","dataSuccess","state","getStateEventArgument","def","Deferred","resolve","events.dataStateChange","adaptr","UrlAdaptor","dm","url","adaptor","processQuery","JSON","parse","allPromise","runArray","executeQuery","Promise","all","fullData","cols","getDistinct","filteredData","records","processDataSource","events.filterAfterOpen","events.actionComplete","isInitial","updateResult","createFilterItems","result_1","selectAll","updateAllCBoxes","updateIndeterminatenBtn","cBoxes_1","createCheckbox","cnt","selected","btn","btnObj","disabled","dataBind","cBoxes","isColFiltered","getCheckedState","hideSpinner","lookup","group","sort","generatePredicate","updateDateFilter","getCaseValue","p","getModuleName","Data","dataState","isPending","resolver","initDataManager","on","events.rowsAdded","addRows","events.rowsRemoved","removeRows","events.dataSourceModified","events.destroy","events.updateData","crudActions","events.addDeleteAction","getData","gObj","dataManager","skipPage","filterQuery","searchQuery","aggregateQuery","sortQuery","pageQuery","groupQuery","isForeign","aggregate","allowPaging","enableVirtualization","pageSettings","currentPage","max","pageCount","pageSize","page","groupSettings","getColumnByField","isGrpFmt","formatGroupColumn","sortGrp","fn","isRemote","sortBy","sSettings","searchSettings","getColumns","map","f","fGeneratePredicate","ignoreCase","search","skipFoerign","actualFilter","colType","checkBoxCols","defaultFltrCols","_b","columns_1","excelPredicate","_c","_d","_e","defaultFltrCols_1","column_1","sType","events.showEmptyGrid","getKey","getPrimaryKeyFieldNames","crud","changes","addedRecords","deletedRecords","changedRecords","saveChanges","insert","isArray","ready","deferred_1","catch","reject","date","getHours","getMinutes","getMilliseconds","update","events.crudAction","deff","endEdit","setState","events.dataSourceChanged","splice","toIndex","off","getState","pvtData","dataArgs","isDataChanged","editArgs","Row","Cell","isSpanned","CellMergeRender","render","cellArgs","td","cellRenderer","getCellRenderer","cellType","cellSpan","colSpan","spanText","aria-colSpan","enableColumnVirtualization","containsKey","backupMergeCells","fName","setMergeCells","generteKey","fname","splitKey","getMergeCells","mergeCells","updateVirtualCells","rows","mCells","columnIndex","getIndexFromAllColumns","vColumnIndices","getColumnIndexesInView","rows_1","getVisibleColumns","item","RowRenderer","role","rowTemplate","refreshRow","refresh","isChanged","refreshMergeCells","tr","cells_1","rowArgs","attrCopy","chekBoxEnable","isDataRow","isSelected","getSelectedRowIndexes","isCheckBoxSelection","checkAllRows","buildAttributeFromRow","addAttributes","cellRendererFact","isExpand","DetailExpand","Filter","CommandColumn","scrollHeight","footerTemplate","summarycell","lastSummaryCell","attr","classes","isAltRow","rowSpan","class","RowModelGenerator","generateRows","startIndex","generateRow","ensureColumns","detailTemplate","childGrid","generateCell","indent","enableAltRow","refreshForeignKeyRow","concat","generateCells","tmp","dummy","rowId","oIndex","opt","isDataCell","isTemplate","rowID","getColumnIndexByField","refreshRows","input","__extends","extendStatics","setPrototypeOf","__proto__","d","b","__","constructor","create","SummaryModelGenerator","groupFooterTemplate","groupCaptionTemplate","columnSelector","start","end","apply","currentViewData","buildSummaryData","getGeneratedRow","level","summaryRow","raw","indents","getIndentByLevel","isDetailGridAlone","indentLength","getGeneratedCell","getCellType","Indent","sColumn","scolumn","single","setTemplate","types","helper","a","disp","Summary","GroupSummaryModelGenerator","_super","v","indx","GroupSummary","CaptionSummaryModelGenerator","reduce","prev","cur","isEmpty","CaptionSummary","GroupModelGenerator","summaryModelGen","captionModelGen","getGroupedRecords","items","GroupGuid","generateDataRows","generateCaptionRow","getCaptionRowCells","visibles","indexes","groupedLen","generateIndentCell","Expand","captionCells","cIndex_1","wFlag","tmpFlag","GroupCaption","GroupCaptionEmpty","unshift","cRow","ContentRender","freezeRows","movableRows","isLoaded","drop","events.columnDrop","droppedElement","rafCallback","arg","ariaService","setBusy","getPanel","getFrozenColumns","isFrozen","events.contentReady","events.dataBound","allowTextWrap","events.freezeRender","case","generator","getModelGenerator","events.columnVisibilityChanged","setVisible","events.colGroupRefresh","events.uiUpdate","enableAfterRender","renderPanel","innerDiv","setOptions","busy","setPanel","renderTable","contentDiv","createContentTable","setTable","getTable","multiselectable","selectionSettings","initializeContentDrop","frozenRows","getHeaderContent","cellspacing","setColGroup","getColGroup","splitRows","idx","freezeRowElements","rowElements","refreshContentRows","hdrTbody","frag","createDocumentFragment","hdrfrag","fCont","mCont","cont","modelData","registeredTemplate","destroyTemplate","tbody","getRowTemplate","isTR","nodeName","colcount","getHeaderTable","Number","overflowY","events.beforeFragAppend","borderRightWidth","appendContent","contentPanel","panel","contentTable","getRows","getMovableRows","getRowElements","getMovableRowElements","setRowElements","colgroup","colGroup","fRows","mRows","rowLen","cellLen","testRow","r","clen","getNormalizedColumnIndex","canSkip","displayVal","childNodes","mTable","getContent","replaceChild","Droppable","accept","renderEmpty","setSelection","set","clearAll","getRowByIndex","getDataRows","getVirtualRowIndex","getMovableRowByIndex","getMovableDataRows","module","enable","HeaderRender","frzIdx","sender","parentEle","visualElement","headercelldiv","getStackedHeaderColumnByHeaderText","innerText","getColumnByUid","firstElementChild","lineHeight","dragStart","events.columnDragStart","event","drag","closest","getClosest","cloneElement","events.columnDrag","dragStop","events.columnDragStop","events.headerDrop","widthService","events.columnPositionChanged","colPosRefresh","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","events.headerRefreshed","headerPanel","headerTable","tHead","createTable","findHeaderRow","createHeaderContent","thead","caption","bodyCell","rowBody","Header","len_1","updateColGroup","colHeader","rowRenderer","headerRow","colDepth","getObjDepth","getHeaderCells","len_2","HeaderIndent","DetailHeader","appendCells","isFirstObj","isFirstCol","isLastCol","isMovable","lastCol","getCellCnt","frzObj","refreshFrozenHdr","isPartial","isComp","frozenColumns","StackedHeader","getColSpan","getColumnIndexByUid","frozenCnt","frzCol","rowIndex","colIndex","mTblColGrp","refreshUI","setWidthToColumns","updateDefaultCursor","gCells","textWrapSettings","wrapMode","depth","checkDepth","indices","showDropArea","headerRows","Draggable","dragTarget","distance","abort","CellRenderer","locator","tabindex","rowChkBox","localizer","formatter","getGui","evaluate","fData","dummyData","invokeFormatter","refreshCell","refreshTD","innerHtml","displayAsCheckBox","localeStr","fromFormatter","appendHtml","persistSelection","checkWrap","setAttributes","isNaN","parseInt","property","buildAttributeFromCell","clipMode","isCheckBoxType","AriaService","name","config","setExpand","expand","setSort","isBusy","invalid","setGrabbed","isGrabbed","grabbed","setDropTarget","isTarget","dropeffect","haspopup","HeaderCellRenderer","hTxtEle","sortEle","gui","chkAllBox","fltrMenuEle","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","checkAllWrap","matchFlColumns","count","extendPrepareHeader","gridObj","headerTextAlign","alignment","matchFilteredColumns","StackedHeaderCellRenderer","toolTip","IndentCellRenderer","GroupCaptionCellRenderer","fKeyValue","captionTemplate","GroupCaptionEmptyCellRenderer","ExpandCellRenderer","HeaderIndentCellRenderer","DetailHeaderIndentCellRenderer","DetailExpandCellRenderer","aria-expanded","Render","emptyGrid","l10n","renderer","addEventListener","headerRenderer","getRenderer","contentRenderer","Content","emptyRow","refreshDataManager","isFActon","isNeedForeignAction","deffered","getFData","deffered_1","events.getForeignKeyData","disablePageWiseAggregates","validateGroupRecords","dataManagerSuccess","dataManagerFailure","deferred","isComplex","foreignKey","sendBulkRequest","dmSuccess","dmFailure","renderEmptyRow","isTrigger","colspan","events.onEmpty","dynamicColumnChange","getCurrentViewRecords","updateColumnType","record","getObject","isColTypeDef","events.beforeDataBound","isEdit","events.tooltipDestroy","prevPageMoving","totalRecordsCount","updatesOnInitialRender","events.dataReady","alert","events.toolbarRefresh","events.actionFailure","error","buildColumns","events.autoCol","instantiateRenderer","addRenderer","cellrender","addCellRenderer","events.initialLoad","events.modelChanged","events.refreshComplete","events.bulkSave","group0","groupN","addWhere","curFilter","newQuery","rPredicate","updateGroupInfo","current","untouched","array","uGroup","itemGroup","uGroupItem","CellRendererFactory","cellRenderMap","getEnumValue","ServiceLocator","services","register","RendererFactory","rendererMap","rName","ColumnWidthService","setColumnWidth","cWidth","getWidth","setWidth","setWidthToTable","elementWidth","headerCol","header","getContentTable","fWidth","formatUnit","mHdr","contentCol","getSiblingsHeight","getHeightFromDirection","sibling","minWidth","maxWidth","getTableWidth","tWidth","setWidthToFrozenTable","freezeWidth","setWidthToMovableTable","movableWidth","FocusStrategy","currentInfo","oneTime","swap","forget","skipFocus","focusByClick","prevIndexes","focusCheck","onFocus","setActive","matrix","get","validator","select","passiveFocus","skipAction","onBlur","relatedTarget","removeFocus","getFocusInfo","elementToFocus","tabIndex","onClick","force","isContent","isHeader","clearOutline","beforeArgs","byKey","byClick","clickArgs","event.beforeCellFocused","onKeyPress","skipOn","keyArgs","bValue","outline","swapInfo","jump","toHeader","toFrozen","getNextCurrent","active","setActiveByKey","preventDefault","clearIndicator","activeElement","getFocusedElement","fContent","fHeader","setFocusedElement","setTimeout","addFocus","info","isFocused","event.cellFocused","isJump","container","getInfo","cellIndex","focusedColumnUid","getColumnByIndex","refreshMatrix","FixedContentFocus","ContentFocus","FixedHeaderFocus","HeaderFocus","cFocus","updateRow","generate","handlerInstance","index_1","passiveHandler","event.keyPressed","event.click","event.contentReady","event.headerRefreshed","restoreFocus","evt","event.batchAdd","event.batchCancel","event.batchDelete","event.detailDataBound","event.onEmpty","internalCellFocus","removeEventListener","getPrevIndexes","forgetPrevious","actions","home","ctrlHome","ctrlEnd","focusEle","getFocusable","Matrix","allow","min","navigator","inValid","vector","moveTo","rIndex","cIndex","keyActions","rightArrow","tab","leftArrow","shiftTab","upArrow","downArrow","shiftUp","shiftDown","shiftRight","shiftLeft","enter","shiftEnter","indexesByKey","getCurrentFromAction","isPresent","shouldFocusChange","rN","cN","oRowIndex","oCellIndex","child","isDirty","frozenSwap","enterFrozen","previous","optionals","defaultLen","isData","isSelectable","current1","current2","current3","SearchBox","searchFocus","searchBlur","wireEvent","unWireEvent","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","PageSettings","Property","__assign","assign","t","s","n","Selection","selectedRowIndexes","selectedRowCellIndexes","selectedRecords","preventFocus","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","selectedRowState","chkAllCollec","isCheckedOnAdd","persistSelectedData","isCancelDeSelect","isPreventCellSelect","disableUI","factory","initializeSelection","mouseDownHandler","onActionBegin","fDataUpdate","rowObj","getRowObj","currentIndex","onActionComplete","gridElement","hidePopUp","clearSelection","isEditing","editModule","formObj","validate","isPersistSelection","getSelectedMovableRow","selectRow","isToggle","selectedRow","selectedMovableRow","selectData","isRowType","hasAttribute","isCtrlPressed","isShiftPressed","previousRow","prevRowIndex","previousRowIndex","addMovableArgs","events.rowSelecting","clearRow","updateRowSelection","selectedRowIndex","updateRowProps","events.rowSelected","targetObj","mRow","mObj","previousMovRow","selectRowsByRange","endIndex","selectRows","getCollectionFromIndexes","rowIndexes","isSingleSel","selectedData","prevRow","rowIndexes_1","rowIdx","addRowsToSelection","rowIndexes_2","isUnSelected","rowDeselect","events.rowDeselecting","addRemoveClassesForRow","events.rowDeselected","reverse","clearRowSelection","isRowSelected","updatePersistCollection","chkState","pKey_1","primaryKey","updatePersistDelete","pKey","updateCheckBoxes","chkBox","nextElementSibling","checkedTarget","setCheckAllState","pop","clearCellSelection","currentRow","movableRow","rowDeselectObj","getRowObjectFromUID","getSelectedMovableCell","getMovableCellFromIndex","getColIndex","selectCell","isCellType","selectedCell","getCellFromIndex","isCellSelected","isUndefined","prevCIdxs","currentCell","previousRowCellIndex","prevECIdxs","previousRowCell","getCellIndex","events.cellSelecting","clearCell","updateCellSelection","updateCellProps","selectedRowCellIndex","events.cellSelected","rIdx","cIdx","selectCellsByRange","cellIndexes","stIndex","edIndex","cellSelectionMode","getLastColIndex","addAttribute","selectCells","rowCellIndexes","addRowCellIndex","addCellsToSelection","getMovableRowsObject","cellIndexes_1","selectedCellIdx","cellDeselect","events.cellDeselecting","events.cellDeselected","m","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","cLen","addMovableRows","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","isCellDrag","elementFromPoint","offsetLeft","ctrlKey","shiftKey","selectLikeExcel","startCellIndex","mouseUpHandler","isDrag","allowRowDragAndDrop","postion","clearSelAfterRefresh","events.initialEnd","events.rowSelectionComplete","events.cellSelectionComplete","events.inBoundModelChanged","onPropertyChanged","events.cellFocused","onCellFocused","actionBeginFunction","actionCompleteFunction","refreshHeader","addEventListener_checkbox","removeEventListener_checkbox","getCheckAllBox","checkBoxSelectionChanged","initPerisistSelection","gobj","checkboxColumn","chkField","ensureCheckboxFieldSelection","getDataModule","proxy_1","refreshPersistSelection","setRowSelection","checkState","editChkBox","onDataBound","checkSelectAllAction","cRenderer","editForm","checkSelectAll","checkBox","stateStr","getCheckAllStatus","triggerChkChangeEvent","checkSelect","rowCellSelectionHandler","moveIntoUncheckCollection","events.checkBoxChange","updateSelectedRowIndex","selectedVal","isInteraction","checkedLen","spanEle","popUpClickHandler","chkSelect","checkboxOnly","showPopup","clear","headerAction","thLen","applyDownUpKey","applyRightLeftKey","shiftDownKey","applyShiftLeftRightKey","applyHomeEndKey","applyCtrlHomeEndKey","ctrlPlusA","applySpaceSelection","applyUpDown","isAdd","getSelectedRecords","getRowsObject","onDataBoundFunction","actionCompleteFunc","actionCompleteHandler","events.click","Search","searchString","refreshSearch","events.searchComplete","onSearchComplete","ShowHide","showBy","getToggleFields","hide","hideBy","getKeyBy","allowSelection","Scroll","lastScrollTop","previousValues","oneTimeReady","toolbarModule","toolbar","refreshOverflow","setHeight","mHdrHeight","ensureOverflow","setPadding","getThreshold","cssProps","getCssProperties","border","padding","removePadding","rtl","setScrollLeft","headerModule","getMovableHeader","scrollLeft","onContentScroll","scrollTarget","isPreventScrollEvent","isFooter","scrollTop","onFreezeContentScroll","onWheelScroll","deltaMode","deltaY","onTouchScroll","pointerType","pageXY","getPointXY","clientHeight","setPageXY","touches","pageX","pageY","getFooterContent","sLeft","sHeight","css","Print","scrollModule","isAsyncPrint","printing","print","renderPrintGrid","printWind","window","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","isPrintGrid","printGridModel","printGridProp","printMode","printGrid","Grid","selectedRows","events.beforePrint","detach","removeColGroup","overflowX","waitingPop","printWindow","events.printComplete","groupCaption","colGroups","AggregateColumn","compile","getTemplate","setPropertiesSilent","AggregateRow","Collection","Clipboard","copyContent","isSelect","events.keyPressed","keyDownHandler","clipBoardTextArea","readonly","aria-label","copy","setCopyData","withHeader","getSelection","selectedIndexes","headerTextArray","getCopyData","checkBoxSelection","status","headers","colIndexes","getColumnHeaderByIndex","userAgent","match","setSelectionRange","isCell","isElement","queryCommandSupported","execCommand","blur","removeAllRanges","rowCellIndxes","getSelectedRowCellIndexes","str","stringify","SortDescriptor","SortSettings","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","inViewIndexes","freezeRefresh","Component","needsID","mergePersistGridData","getPersistData","keyEntity","ignoreOnPersist","currentObject","ignoreInArrays","addOnPersist","ignoreOnColumn","ignoreInColumn","requiredModules","modules","member","allowExcelExport","allowPdfExport","isDetail","toolbarTemplate","isCommandColumn","allowAdding","allowDeleting","extendRequiredModules","contextMenuItems","showColumnChooser","isForeignKeyEnabled","preRender","initProperties","initializeServices","mediaCol","isInitialLoad","filterOperators","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Pdfexport","Excelexport","Wordexport","Csvexport","Columnchooser","Save","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","FilterButton","ClearButton","StartsWith","EndsWith","Contains","Equal","NotEqual","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","ChooseDate","EnterValue","Copy","Group","Ungroup","autoFitAll","autoFit","Export","FirstPage","LastPage","PreviousPage","NextPage","SortAscending","SortDescending","EditRecord","DeleteRecord","FilterMenu","SelectAll","Blanks","FilterTrue","FilterFalse","NoResult","ClearFilter","NumberFilter","TextFilter","DateFilter","MatchCase","Between","CustomFilter","CustomFilterPlaceHolder","CustomFilterDatePlaceHolder","AND","OR","ShowRowsWhere","keyConfigs","escape","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusP","delete","f2","ctrlEnter","space","ctrlPlusC","ctrlShiftPlusH","renderModule","getMediaColumns","searchModule","processModel","gridRender","addListener","updateStackedFilter","gcol","getShowHideService","hideAtMedia","media","matchMedia","mediaQueryUpdate","matches","showHider","refreshMediaCol","footerContent","eventInitializer","hasGridChild","unwireEvents","removeListener","destroyDependentModules","toolTipObj","keyboardModule","focusModule","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","updateColumnObject","properties_1","rowTemplateFn","detailTemplateFn","oldProperties","extendedPropertyChange","updateRTL","ej2_instances","getToolbar","contextMenuModule","getContextMenu","columnMenuModule","getColumnMenu","events.rtlUpdated","updateResizeLines","updateGridLines","columnMenuItems","applyTextWrap","removeTextWrap","isModeChg","pending_1","gResult_1","enableHover","muteOnChange","filterModule","refreshFilter","headerRows_1","updateColumnModel","columnModel","updateFrozenColumns","isRefresh","inview","vLen","stackedHeader","individualColumn","stackedColumn","getLocaleConstants","setColumnIndexesInView","setGridHeaderContent","contentModule","setGridContentTable","setGridContent","setGridHeaderTable","footerElement","getElementsByClassName","getFooterContentTable","getPager","gridPager","setGridPager","getRowInfo","row_1","rowsObject","mrows","dRows","setCellValue","fieldIdx","mTr","pkName","movableSelectedRow","rowObjects","movableRowObjects","sRow","events.queryCellInfo","setRowData","rowObject","getColumnHeaderByField","getColumnHeaderByUid","getUidByColumnField","getColumnFieldNames","columnNames","getDetailTemplate","getSelectedRows","selectionModule","showColumns","hideColumns","getFrozenCount","getVisibleFrozenColumns","getVisibleFrozenColumnsCount","getVisibleFrozenCount","visibleFrozenColumns","goToPage","pageNo","pagerModule","updateExternalMessage","message","sortColumn","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","filterOperator","filterValue","actualFilterValue","actualOperator","clearFiltering","removeFilteredColsByField","isClearFilterBar","printModule","deleteRecord","fieldname","startEdit","closeEdit","addRecord","deleteRow","clipboardModule","recalcIndentWidth","indentWidth","perPixel","events.columnWidthChanged","reorderColumns","fromFName","toFName","reorderModule","autoFitColumns","fieldNames","resizeModule","createColumnchooser","columnChooserModule","renderColumnChooser","L10n","valueFormatterService","flag","gCols","sCols","_loop_1","sLen","this_1","showGroupedColumn","parentDetails","parentKeyFieldValue","queryString","initForeignColumn","events.initForeignKeyColumn","rendererFactory","createGridPopUpElement","createTooltip","append","gridLines","Tooltip","opensOn","getTooltipStatus","htable","ctable","isEllipsisTooltip","scrollHandler","tag","myTableDiv","mySubDiv","myTable","myTr","mytd","mouseClickHandler","focusOutHandler","dblClickHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","dataBoundFunction","isChildGrid","checkEdit","events.recordDoubleClick","events.dblclick","filterClear","keyPress","saveCell","localStorage","getItem","dataObj","isProtectedOnChange","keys_1","mergeColumns","storedColumn","arr","ind","localCol","setInjectedModules","injectedModules","refreshColumns","excelExport","excelExportProperties","isMultipleExport","workbook","isBlob","excelExportModule","Map","csvExport","pdfExport","pdfExportProperties","pdfDoc","pdfExportModule","groupColumn","groupModule","ungroupColumn","isContextMenuOpen","isOpen","ensureModuleInjected","getInjectedModules","propertyNames","clearTemplate","Complex","Event","NotifyPropertyChanges","Inject","Sort","contentRefresh","isModelChanged","aria","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","lastSortedCol","isRemove","allowMultiSorting","removeSortIcons","updateSortedCols","refreshSortSettings","addSortIcons","events.sortComplete","refreshSortIcons","colObj","initiateSort","showPopUp","allowUnsort","enableSortMultiTouch","filterElement","updateAriaAttr","NumericContainer","pagerElement","renderNumericContainer","refreshNumericLinks","updateTotalPages","links","updateLinksHtml","updateStyles","link","pagerObj","href","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","prevPager","PP","nextPager","NP","next","last","previousPageNo","currentPageSet","totalPages","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPage","prevPageDisabled","replace","lastPage","lastPageDisabled","nextPage","nextPageDisabled","PagerMessage","pageNoMsgElem","pageCountMsgElem","hideMessage","showMessage","regx","RegExp","Pager","defaultConstants","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","containerModule","pagerMessageModule","enableExternalMessage","checkpagesizes","pagerTemplate","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","checkGoToPage","currentPageChanged","setDropDownValue","pageSizes","newPageNo","oldPageNo","enableQueryString","updateQueryString","getPagerTemplate","updatedUrl","getUpdatedURL","location","history","pushState","path","uri","hash","PagerDropDown","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","defaultValue","dropDownListObject","DropDownList","change","onChange","ExternalMessage","externalMessage","Page","pagerDestroy","gridExtend","dropDownChanged","onSelect","addAriaAttr","numericContainerNew","numericContainer","numericContainerDiv","isForceCancel","previousPage","keyPressHandler","appendToElement","handlers","load","complete","updateLayout","inboundChange","events.pageComplete","FilterCellRenderer","filterBarTemplate","showClearButton","Element","templateWrite","write","FlMenuOptrUI","customFltrOperators","customFilterOperators","renderOperatorUI","dlgConetntEle","dlgObj","optrData","customOptr","operators","dropDatasource","selectedValue","dropSelectedVal","optrDiv","optrInput","dropOptr","dropDownOpen","selValue","selectedField","getFlOperator","StringFilterUI","serLocator","actObj","AutoComplete","getAutoCompleteOptions","sortOrder","openPopup","filterType","getOptrInstance","autofill","localizeText","mapObj","filteredValue","read","filterOptr","filterObj","actuiObj","hidePopup","focusOut","NumberFilterUI","numericTxtObj","NumericTextBox","BooleanFilterUI","dropInstance","distinct","drpuiObj","DateFilterUI","fltrSettings","colFormat","getDatePattern","inputElem","datePickerObj","DatePicker","FilterMenuRenderer","fltrObj","isDialogOpen","colTypes","string","number","boolean","datetime","flMuiObj","renderDlgContent","getElementById","mainDiv","dlgDiv","showCloseIcon","closeOnEscape","filterBtnClick","clearBtnClick","renderFilterUI","writeMethod","renderFlValueUI","valueDiv","instanceofFilterUI","ui","dlgContentEle","flValue","flOptrValue","targ","iconClass","flIcon","ExcelFilter","getCMenuDS","model","iconCss","separator","unwireExEvents","cmenu","createMenu","isCheckIcon","menu","ul","icon","createMenuElem","ensureTextFilter","iconName","isSubMenu","li","wireExEvents","hoverHandler","clickExHandler","menuItem","destroyCMenu","menuObj","focused","submenu","isCMenuOpen","selectedMenu","menuOptions","selectHandler","onClose","beforeClose","preventClose","ContextMenu","client","pos","contextRect","getContextBounds","innerHeight","innerWidth","getCMenuYPosition","MouseEvent","contextWidth","filterLength","renderDialogue","complexFieldName","isModal","overlayClick","removeDialog","createdDialog","removeObjects","datePicker","renderCustomFilter","dlgFields","fieldSet","displayName","checkBoxValue","colValue","fValue","fOperator","sValue","sOperator","andRadio","firstOperator","firstValue","secondOperator","secondValue","mPredicate","arg7","arg8","fpred","elementID","isFirst","fieldElement","xlfloptr","menuText","getSelectedValue","getSelectedText","renderRadioButton","radioDiv","frstpredicate","secndpredicate","renderMatchCase","RadioButton","orRadio","elementId","valueInput","renderAutoComplete","renderNumericTextBox","renderDate","matchCaseDiv","matchCaseInput","CheckBox","inputValue","isRtl","completeAction","columnvalue","mapObject","nextFlMenuOpen","Menu","Excel","fltrDlgDetails","getLocalizedCustomOperators","fltrElem","detail","updateFilterMsg","filterBarElement","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","keyUpHandler","events.filterComplete","events.filterOpen","columnMenuFilter","filterIconClickHandler","filterCell","checkForSkipInput","filterStatusMsg","applyColumnFormat","addFilteredClass","checkAlreadyColFiltered","getFlvalue","setFormatForFlColumn","refreshFilterSettings","updateFilter","getFilterBarElement","fltrElement","isClose","filterDialogOpen","customOperators","filterHandler","localizedStrings","currentFilterColumn","closeHeaderEle","keyCode","processFilter","updateCrossIcon","getFormatFlValue","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","stopTimer","startTimer","timer","setInterval","onTimerTick","immediateModeDelay","clearInterval","templateRead","validateFilterValue","getOperator","substring","charAt","singleOp","multipleOp","=","!","numOptr","stringOperator","numberOperator","dateOperator","datetimeOperator","booleanOperator","gClient","fClient","bottom","datepickerEle","targetText","previousElementSibling","filterIconElement","refreshFilterIcon","resizeClassList","root","suppress","cursor","Resize","tapped","isDblClk","findColumn","resizeColumn","headerTextClone","contentTextClone","indentWidthClone","contentText","wHeader","wContent","columnbyindex","calcTableWidth","tableWidth","offsetWidthValue","refreshHeight","setHandlerHeight","getResizeHandlers","touchStartEvent","resizeStart","callAutoFit","getTargetColumn","refreshColumnWidth","parentElementWidth","appendHelper","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","setHelperHeight","mousemove","colData","updateHelper","isFrozenColResized","doubleTapEvent","calcPos","floor","cls","fLeft","parentOffset","offset","doc","ownerDocument","offsetParent","documentElement","parentNode","nodeType","getUserAgent","clearTimeout","timeoutHandler","test","Reorder","events.reorderComplete","createReorderElement","chkDropPosition","srcElem","destElem","closestElement","targetParentContainerIndex","chkDropAllCols","isFound","findColParent","getColumnsModel","subCols","uId","destElemUid","destColumn","sourceUid_1","colMatchIndex_1","destUid_1","moveColumns","oldIdx","column_2","newIndex","destIndex","getColParent","srcIdx","fromIndex","flatColumns","fTh","mTh","fHeaders","fColumn","toColumn","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","draggableType","cliRect","cliRectBaseLeft","cliRectBaseRight","scrollElem","cliRectBase","RowDD","events.rowDragStart","dropElem","rowDropSettings","targetID","isDragStop","getElementFromPosition","events.rowDrag","events.rowDrop","initializeDrag","events.rowDragAndDropComplete","getTargetIdx","targetRow","srcControl","targetIndex","skip","isAppliedGroup","isAppliedUnGroup","dropArea","events.groupComplete","events.ungroupComplete","grpRow","expandCollapseRows","expandAll","collapseAll","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","cellIdx","rowNodes","isHide","expandElem","toExpand","expandCollapse","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","groupElem","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","addColToGroupDrop","groupAddSortingQuery","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","clearGrouping","DetailRow","toogleExpandcollapse","uid_1","nextRow","isDetailRow","detailRow","detailCell","nextSibling","parentID","parentPrimaryKeys","parentKeyField","parentRowData","injectedModues","gridElem","idx_1","events.detailDataBound","detailElement","getTDfromIndex","collapse","Toolbar","predefinedItems","gridID","preItems_1","itemStr","localeName","toUpperCase","prefixIcon","tooltipText","align","ColumnChooser","suffixIcon","createToolbar","getItems","tool","clicked","toolbarClickHandler","enablePersistence","viewStr","searchElement","refreshToolbarItems","updateSearchBox","enableItems","disableItems","hasData","toolbarItems","toolbarItems_1","getItemObject","itemObject","itemName","isEnable","items_1","gID","originalEvent","tarElement","targetEle","offsetTop","searchBoxObj","FooterRenderer","gridModule","modelGenerator","movableContent","fDiv","mDiv","frozenContent","tFoot","freezeTable","renderSummaryContent","cStart","cEnd","summaries","dummies","fragment","rowrenderer","srow","frozenDiv","onScroll","refreshCol","mheaderCol","fheaderCol","onWidthChange","getColFromIndex","updateFooterTableWidth","fCol","SummaryCellRenderer","tempObj","Aggregate","initiateRender","cellFac","footerRenderer","prepareSummaryInfo","getFormatFromType","cModel","InterSectionObserver","fromWheel","touchMove","sentinelInfo","up","check","containerRect","entered","pageHeight","axis","down","observe","onEnterCallback","virtualScrollHandler","prevTop","prevLeft","debounced100","debounced50","axes","sentinel","setPageHeight","VirtualRowModelGenerator","cOffsets","cache","groups","rowModelGenerator","notifyArgs","virtualInfo","xAxis","loadNext","loadSelf","nextInfo","getBlockIndexes","loadedBlocks","checkAndResetCache","blockIndexes","isBlockAvailable","getStartIndex","median","updateGroupRow","getPage","block","columnIndexes","blk","full","even","getColumnIndexes","calWidth","iOffset","offsetVal","refreshColOffsets","gLen","currentFirst","iterateGroup","oRow","shift","VirtualContentRenderer","prevHeight","preventEvent","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","getBlockHeight","observer","adjustTable","scrollListener","scrollArgs","viewInfo","getInfoFromView","prevInfo","tempBlocks","infoType","getPageFromTop","blocks","ensureBlocks","every","mIdx","old","isEndBlock","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","sTop","setVirtualHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","cHeight","isOnenter","endTranslate","blockHeight","maxBlock","onEntered","getBlockSize","totalBlocks","startIdx","bSize","rem","size","refreshVirtualElement","VirtualHeaderRenderer","gen","xValue","yValue","transform","VirtualScroll","ensurePageSize","blockSize","InlineEditRender","addNew","mTbody","getEditElement","renderMovableform","events.frozenHeight","updateFreezeEdit","fHdr","tdElement","refreshFreezeEdit","fCls","mTd","updateFrozenCont","form","td_1","BatchEditRender","columnObject","DialogEditRender","events.dialogDestroy","setLocaleObj","createDialog","dialog","primaryKeyValue","allowDragging","dialogClose","events.destroyForm","dataCell","EditRender","Inline","Normal","Batch","getEditElements","convertWidget","fForm","cols_1","focusElement","tArgs","isInput","BooleanEditCell","activeClasses","classNames","selectChkBox","isAddRow","editRow","DropDownEditCell","isInline","enabled","ddActionComplete","popupHeight","dlgElement","targetElement","NumericEditCell","DefaultEditCell","NormalEdit","allowEditOnDblClick","editComplete","editRowIndex","primaryKeys","primaryKeyValues","previousData","applyFormValidation","mFormObj","editedData","getCurrentEditedData","mForm","addedRowIndex","destroyElements","destroyWidgets","editHandler","edSucc","edFail","editSuccess","editFailure","updateCurrentViewData","stopEditStatus","dataLen","tmpRecord","contained","mElem","editMElem","events.doubleTap","events.deleteComplete","events.saveComplete","InlineEdit","BatchEdit","cellDetails","events.beforeCellFocused","onBeforeCellFocused","setCellIdx","editCell","validateFormObj","editCellFromIndex","removeRowObjectFromUID","ftr","events.batchCancel","refreshRowIdx","bulkDelete","bulkAddRow","batchSave","getBatchChanges","batchChanges","events.beforeBatchSave","mergeBatchChanges","i_1","addRowObject","getIndexFromData","events.beforeBatchDelete","events.batchDelete","nonMovableRows","defaultData","getDefaultData","events.beforeBatchAdd","events.batchAdd","findNextEditableCell","args1","checkNPCell","dValues","mRowData","colIdx","getDataByIndex","getCellIdx","validationRules","isColored","updateCell","setChanges","rowcell","isForceSave","cloneEditedData","cloneComplexData","previousValue","visibleColumns","DialogEdit","DatePickerEditCell","editCellType","dropdownedit","numericedit","datepickeredit","booleanedit","defaultedit","updateEditObj","createAlertDlg","createConfirmDlg","updateColTypeObj","tapEvent","Global","alertDObj","refreshToolbar","showDeleteConfirmDialog","endEditing","editFormValidate","getCurrentEditCellData","getValueFromType","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","executeAction","inputs","preventObj","rules","mRules","cols_2","createFormObj","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","getElemTable","isFHdr","inputName","gcontent","isScroll","inputClient","arrow","defaultView","getComputedStyle","getPropertyValue","showColumn","hideColumn","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","isCustomizeOpenCC","rtlUpdate","enableAfterRenderEle","hideDialog","clearActions","refreshCheckboxState","columnChooserSearch","removeCancelIcon","addcancelIcon","events.beforeOpenColumnChooser","refreshPosition","mOpenDlg","openColumnChooser","renderChooserList","beforeOpen","customDialogOpen","customDialogClose","columnChooserManualSearch","confirmDlgBtnClick","searchDiv","ccsearchele","ccsearchicon","conDiv","innerDivContent","refreshCheckboxList","columnStateChange","dialogInstance","stateColumns","colUid","currentCol","checkstatecolumn","isChecked","coluid","searchVal","fltrCol","clearSearch","nMatchele","checkBoxClickHandler","checkstate","columnUid","refreshCheckboxButton","searchValue","gdCol","ulElement","renderCheckbox","columnUID","cbox","cclist","hideColState","showColState","cccheckboxlist","proxy","interval","ExportHelper","hideColumnInclude","getQuery","getColumnData","columnPromise","fColumns","getHeaders","isHideColumnInclude","measureColumnDepth","actualColumns","processColumns","processHeaderCells","removeCellFromRow","generateActualColumns","getConvertedWidth","getCellCount","resultCells","appendGridCells","gridRows","isFirstColumn","isLastColumn","isIgnoreFirstCell","gridColumn","option","ExportValueFormatter","internationalization","returnFormattedValue","customFormat","formatCellValue","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","isElementIdChanged","init","toISOString","isExporting","footer","exportValueFormatter","exportProperties","isCsv","events.beforeExcelExport","processRecords","processInnerRecords","blankRows","multipleExport","worksheets","processExcelHeader","groupIndent","childLevels","processHeaderContent","exportType","processRecordContent","events.excelExportComplete","blobPromise","returnType","currentViewRecords","processRecordRows","processGroupedRows","processAggregates","processExcelFooter","sheet","Workbook","saveAsBlob","fileName","save","dataSource_1","getCaptionThemeStyle","theme","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","rLen","excelCellArgs","events.excelQueryCellInfo","styleIndex","getColumnStyle","mergeOptions","rec","byGroup","summaryModel","groupSummaryRows","sRows","customIndex","cells_2","eCell","Sum","Average","Max","Min","Count","TrueCount","FalseCount","Custom","getAggreateValue","hAlign","wholeText","JSON1","JSON2","attrname","returnValue","gridColumns","spannedCells","currentCellIndex","gridCell","getIndex","spannedCell","getHeaderThemeStyle","excelHeaderCellArgs","setStyle","events.excelHeaderQueryCellInfo","parseStyles","getRecordThemeStyle","fontSize","borders","color","updateThemeStyle","themestyle","fontColor","fontName","lineStyle","bold","backColor","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","numberFormat","PdfExport","customDataSource","isGrouping","pdfDocument","events.beforePdfExport","PdfDocument","processExport","events.pdfExportComplete","gridTheme","section","sections","processExportProperties","pdfPage","pages","pdfGrid","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","setBorder","draw","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfColor","pdfColor","penBrushColor","hexToRgb","g","PdfBorders","PdfPen","borderColor","groupIndex","dataSourceItems","getCell","stringFormat","PdfStringFormat","PdfTextAlignment","Left","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","columnCount","getColumn","gridHeader","getHeader","events.pdfHeaderQueryCellInfo","getHorizontalAlignment","getVerticalAlignment","k","allowHorizontalOverflow","pageOrientation","pdfPageSettings","PdfPageSettings","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","clientSize","PointF","fromTop","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromBottom","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","setContentFormat","graphics","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfCompositeField","PdfPageCountField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","sRows_1","leastCaptionSummaryIndex","getSummaryWithoutTemplate","getTemplateFunction","templateFunction","txt","gridRow","setRecordThemeStyle","events.pdfQueryCellInfo","processCellStyle","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","fontFamily","italic","underline","strikeout","borderWidth","paragraphIndent","Right","Center","Justify","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","getFontFamily","fontStyle","PdfFontStyle","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","CommandColumnRenderer","buttonElement","unbounDiv","command","renderButton","buttonOption","onclick","buttonObj","Button","commandType","commandClickHandler","menuClass","batchEdit","editIcon","pager","pdf","ungroup","csv","excel","fPage","nPage","lPage","pPage","ascending","descending","groupHeader","touchPop","defaultItems","hiddenItems","localeText","setLocaleKey","enableAfterRenderMenu","code","which","contextMenu","getMenuItems","contextMenuItemClick","contextMenuBeforeOpen","onOpen","contextMenuOnClose","menuItems","exportItems","getDefaultItems","toLocaleLowerCase","buildDefaultItems","exportGroup","getLastPage","totalpage","getKeyFromId","targetColumn","events.contextMenuClick","updateItemStatus","getLocaleText","showItems","closestGrid","dItem","ensureDisabledStatus","ensureTarget","parentItem","hideItems","eventArgs","events.contextMenuOpen","ensureFrozenHeader","substr","generateID","AutoFitAll","AutoFit","CsvExport","export","PrevPage","FreezeRowModelGenerator","isFrzLoad","FreezeContentRender","setFrozenContent","setMovableContent","getMovableContent","getFrozenContent","mTbl","FreezeRender","refreshFreeze","setFrozenHeight","rfshMovable","updateColgroup","setFrozenHeader","setMovableHeader","getFrozenHeader","refreshStackedHdrHgt","addMovableFirstCls","movablefirstcell","filterRow","hdrClassList","setWrapHeight","updateResizeHandler","isContReset","isStackedHdr","fRowHgt","mRowHgt","isWrap","tBody","movableContentHeight","fRowSpan","mRowSpan","fTr","getRowSpan","updateStackedHdrRowHgt","rSpan","minRowSpan","maxRowSpan","frozenHeader","movableHeader","Freeze","ColumnMenu","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","getColumnMenuHandlers","columnMenuHandlerDown","columnMenu","unwireFilterEvents","columnMenuHandlerClick","getHeaderCell","openColumnMenu","elePos","isFilterItemAdded","filterPosition","columnMenuItemClick","columnMenuBeforeOpen","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","columnMenuBeforeClose","wireFilterEvents","appendFilter","isChooserItem","colChooser","currentTarget","events.columnMenuOpen","checkbox","getFilter","events.columnMenuClick","isFilterPopupOpen","defultItems_1","getDefault","getDefaultItem","createChooserItems","filterPopup","getFilterPop","setPosition","gridPos","liPos","ForeignKey","initEvent","initForeignKeyColumns","generateQueryFormData","foreignColumns","genarateColumnQuery","genarateQuery","responses","fromData","needQuery","queryColumn","isTrue","filterColumn","destroyEvent"],"mappings":"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"}