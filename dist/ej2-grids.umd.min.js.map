/*!
*  filename: ej2-grids.umd.min.js.map
*  version : 15.4.22
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"file":"ej2-grids.umd.min.js","sources":["src/es5/grid/base/util.js","src/es5/grid/services/aria-service.js","src/es5/grid/actions/aggregate.js","src/es5/grid/services/value-formatter.js","src/es5/grid/models/column.js","src/es5/grid/base/constant.js","src/es5/grid/base/enum.js","src/es5/grid/actions/checkbox-filter.js","src/es5/grid/actions/data.js","src/es5/grid/models/row.js","src/es5/grid/models/cell.js","src/es5/grid/renderer/cell-merge-renderer.js","src/es5/grid/renderer/row-renderer.js","src/es5/grid/services/row-model-generator.js","src/es5/grid/services/summary-model-generator.js","src/es5/grid/services/group-model-generator.js","src/es5/grid/renderer/content-renderer.js","src/es5/grid/renderer/header-renderer.js","src/es5/grid/renderer/cell-renderer.js","src/es5/grid/renderer/header-cell-renderer.js","src/es5/grid/renderer/stacked-cell-renderer.js","src/es5/grid/renderer/indent-cell-renderer.js","src/es5/grid/renderer/caption-cell-renderer.js","src/es5/grid/renderer/expand-cell-renderer.js","src/es5/grid/renderer/header-indent-renderer.js","src/es5/grid/renderer/detail-header-indent-renderer.js","src/es5/grid/renderer/detail-expand-cell-renderer.js","src/es5/grid/renderer/render.js","src/es5/grid/services/cell-render-factory.js","src/es5/grid/services/service-locator.js","src/es5/grid/services/renderer-factory.js","src/es5/grid/services/width-controller.js","src/es5/grid/services/focus-strategy.js","src/es5/grid/models/page-settings.js","src/es5/grid/actions/selection.js","src/es5/grid/actions/search.js","src/es5/grid/actions/show-hide.js","src/es5/grid/actions/scroll.js","src/es5/grid/actions/print.js","src/es5/grid/models/aggregate.js","src/es5/grid/actions/clipboard.js","src/es5/grid/base/grid.js","src/es5/grid/actions/sort.js","src/es5/pager/numeric-container.js","src/es5/pager/pager-message.js","src/es5/pager/pager.js","src/es5/pager/pager-dropdown.js","src/es5/pager/external-message.js","src/es5/grid/actions/page.js","src/es5/grid/renderer/filter-cell-renderer.js","src/es5/grid/renderer/filter-menu-operator.js","src/es5/grid/renderer/string-filter-ui.js","src/es5/grid/renderer/number-filter-ui.js","src/es5/grid/renderer/boolean-filter-ui.js","src/es5/grid/renderer/date-filter-ui.js","src/es5/grid/renderer/filter-menu-renderer.js","src/es5/grid/actions/excel-filter.js","src/es5/grid/actions/filter.js","src/es5/grid/actions/resize.js","src/es5/grid/actions/reorder.js","src/es5/grid/actions/row-reorder.js","src/es5/grid/actions/group.js","src/es5/grid/actions/detail-row.js","src/es5/grid/actions/toolbar.js","src/es5/grid/renderer/footer-renderer.js","src/es5/grid/renderer/summary-cell-renderer.js","src/es5/grid/services/intersection-observer.js","src/es5/grid/services/virtual-row-model-generator.js","src/es5/grid/renderer/virtual-content-renderer.js","src/es5/grid/actions/virtual-scroll.js","src/es5/grid/renderer/inline-edit-renderer.js","src/es5/grid/renderer/batch-edit-renderer.js","src/es5/grid/renderer/dialog-edit-renderer.js","src/es5/grid/renderer/edit-renderer.js","src/es5/grid/renderer/boolean-edit-cell.js","src/es5/grid/renderer/dropdown-edit-cell.js","src/es5/grid/renderer/numeric-edit-cell.js","src/es5/grid/renderer/default-edit-cell.js","src/es5/grid/actions/normal-edit.js","src/es5/grid/actions/inline-edit.js","src/es5/grid/actions/batch-edit.js","src/es5/grid/actions/dialog-edit.js","src/es5/grid/renderer/datepicker-edit-cell.js","src/es5/grid/actions/edit.js","src/es5/grid/actions/column-chooser.js","src/es5/grid/actions/export-helper.js","src/es5/grid/actions/excel-export.js","src/es5/grid/actions/pdf-export.js","src/es5/grid/renderer/command-column-renderer.js","src/es5/grid/actions/command-column.js","src/es5/grid/actions/context-menu.js","src/es5/grid/services/freeze-row-model-generator.js","src/es5/grid/renderer/freeze-renderer.js","src/es5/grid/actions/freeze.js","src/es5/grid/actions/column-menu.js"],"sourcesContent":["import { ChildProperty, compile as baseTemplateComplier, classList } from '@syncfusion/ej2-base';\nimport { extend as baseExtend, isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, addClass, attributes, createElement, remove, removeClass } from '@syncfusion/ej2-base';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport { Column } from '../models/column';\nimport { calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\n//https://typescript.codeplex.com/discussions/401501\n/**\n * Function to check whether target object implement specific interface\n * @param  {Object} target\n * @param  {string} checkFor\n * @returns no\n * @hidden\n */\nexport function doesImplementInterface(target, checkFor) {\n    /* tslint:disable:no-any */\n    return target.prototype && checkFor in target.prototype;\n}\n/**\n * Function to get value from provided data\n * @param  {string} field\n * @param  {Object} data\n * @param  {IColumn} column\n * @hidden\n */\nexport function valueAccessor(field, data, column) {\n    field = isNullOrUndefined(field) ? '' : field;\n    return getValue(field, data);\n}\n/**\n * The function used to update Dom using requestAnimationFrame.\n * @param  {Function} fn - Function that contains the actual action\n * @return {Promise<T>}\n * @hidden\n */\nexport function getUpdateUsingRaf(updateFunction, callBack) {\n    requestAnimationFrame(function () {\n        try {\n            callBack(null, updateFunction());\n        }\n        catch (e) {\n            callBack(e);\n        }\n    });\n}\n/**\n * @hidden\n */\nexport function iterateArrayOrObject(collection, predicate) {\n    var result = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        var pred = predicate(collection[i], i);\n        if (!isNullOrUndefined(pred)) {\n            result.push(pred);\n        }\n    }\n    return result;\n}\n/** @hidden */\nexport function templateCompiler(template) {\n    if (template) {\n        var e = void 0;\n        try {\n            if (document.querySelectorAll(template).length) {\n                return baseTemplateComplier(document.querySelector(template).innerHTML.trim());\n            }\n        }\n        catch (e) {\n            return baseTemplateComplier(template);\n        }\n    }\n    return undefined;\n}\n/** @hidden */\nexport function setStyleAndAttributes(node, customAttributes) {\n    var copyAttr = {};\n    var literals = ['style', 'class'];\n    //Dont touch the original object - make a copy\n    baseExtend(copyAttr, customAttributes, {});\n    if ('style' in copyAttr) {\n        setStyleAttribute(node, copyAttr[literals[0]]);\n        delete copyAttr[literals[0]];\n    }\n    if ('class' in copyAttr) {\n        addClass([node], copyAttr[literals[1]]);\n        delete copyAttr[literals[1]];\n    }\n    attributes(node, copyAttr);\n}\n/** @hidden */\nexport function extend(copied, first, second, exclude) {\n    var moved = baseExtend(copied, first, second);\n    Object.keys(moved).forEach(function (value, index) {\n        if (exclude.indexOf(value) !== -1) {\n            delete moved[value];\n        }\n    });\n    return moved;\n}\n/** @hidden */\nexport function prepareColumns(columns, autoWidth) {\n    for (var c = 0, len = columns.length; c < len; c++) {\n        var column = void 0;\n        if (typeof columns[c] === 'string') {\n            column = new Column({ field: columns[c] });\n        }\n        else if (!(columns[c] instanceof Column)) {\n            if (!columns[c].columns) {\n                column = new Column(columns[c]);\n            }\n            else {\n                column = new Column(columns[c]);\n                columns[c].columns = prepareColumns(columns[c].columns);\n            }\n        }\n        else {\n            column = columns[c];\n        }\n        column.headerText = isNullOrUndefined(column.headerText) ? column.field || '' : column.headerText;\n        column.valueAccessor = column.valueAccessor || valueAccessor;\n        column.width = autoWidth && isNullOrUndefined(column.width) ? 200 : column.width;\n        if (isNullOrUndefined(column.visible)) {\n            column.visible = true;\n        }\n        columns[c] = column;\n    }\n    return columns;\n}\n/** @hidden */\nexport function setCssInGridPopUp(popUp, e, className) {\n    var popUpSpan = popUp.querySelector('span');\n    var position = popUp.parentElement.getBoundingClientRect();\n    var targetPosition = e.target.getBoundingClientRect();\n    var isBottomTail;\n    popUpSpan.className = className;\n    popUp.style.display = '';\n    isBottomTail = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY) > popUp.offsetHeight + 10;\n    popUp.style.top = targetPosition.top - position.top +\n        (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px'; //10px for tail element\n    popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n    if (isBottomTail) {\n        popUp.querySelector('.e-downtail').style.display = '';\n        popUp.querySelector('.e-uptail').style.display = 'none';\n    }\n    else {\n        popUp.querySelector('.e-downtail').style.display = 'none';\n        popUp.querySelector('.e-uptail').style.display = '';\n    }\n}\n/** @hidden */\nfunction getPopupLeftPosition(popup, e, targetPosition, left) {\n    var width = popup.offsetWidth / 2;\n    var x = getPosition(e).x;\n    if (x - targetPosition.left < width) {\n        return targetPosition.left - left;\n    }\n    else if (targetPosition.right - x < width) {\n        return targetPosition.right - left - width * 2;\n    }\n    else {\n        return x - left - width;\n    }\n}\n/** @hidden */\nexport function getActualProperties(obj) {\n    if (obj instanceof ChildProperty) {\n        return getValue('properties', obj);\n    }\n    else {\n        return obj;\n    }\n}\n/** @hidden */\nexport function parentsUntil(elem, selector, isID) {\n    var parent = elem;\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            break;\n        }\n        parent = parent.parentElement;\n    }\n    return parent;\n}\n/** @hidden */\nexport function getElementIndex(element, elements) {\n    var index = -1;\n    for (var i = 0, len = elements.length; i < len; i++) {\n        if (elements[i].isEqualNode(element)) {\n            index = i;\n            break;\n        }\n    }\n    return index;\n}\n/** @hidden */\nexport function inArray(value, collection) {\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i] === value) {\n            return i;\n        }\n    }\n    return -1;\n}\n/** @hidden */\nexport function getActualPropFromColl(collection) {\n    var coll = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i].hasOwnProperty('properties')) {\n            coll.push(collection[i].properties);\n        }\n        else {\n            coll.push(collection[i]);\n        }\n    }\n    return coll;\n}\n/** @hidden */\nexport function removeElement(target, selector) {\n    var elements = [].slice.call(target.querySelectorAll(selector));\n    for (var i = 0; i < elements.length; i++) {\n        remove(elements[i]);\n    }\n}\n/** @hidden */\nexport function getPosition(e) {\n    var position = {};\n    position.x = (isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n        e.clientX);\n    position.y = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY);\n    return position;\n}\nvar uid = 0;\n/** @hidden */\nexport function getUid(prefix) {\n    return prefix + uid++;\n}\n/** @hidden */\nexport function appendChildren(elem, children) {\n    for (var i = 0, len = children.length; i < len; i++) {\n        if (len === children.length) {\n            elem.appendChild(children[i]);\n        }\n        else {\n            elem.appendChild(children[0]);\n        }\n    }\n    return elem;\n}\n/** @hidden */\nexport function parents(elem, selector, isID) {\n    var parent = elem;\n    var parents = [];\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            parents.push(parent);\n        }\n        parent = parent.parentElement;\n    }\n    return parents;\n}\n/** @hidden */\nexport function calculateAggregate(type, data, column, context) {\n    if (type === 'custom') {\n        return column.customAggregate ? column.customAggregate.call(context, data, column) : '';\n    }\n    return DataUtil.aggregates[type](data, column.field);\n}\n/** @hidden */\nvar scrollWidth = null;\n/** @hidden */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    var divNode = document.createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\n/** @hidden */\nvar rowHeight;\n/** @hidden */\nexport function getRowHeight(element) {\n    if (rowHeight !== undefined) {\n        return rowHeight;\n    }\n    var table = createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n    table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n    element.appendChild(table);\n    var rect = table.querySelector('td').getBoundingClientRect();\n    element.removeChild(table);\n    rowHeight = Math.ceil(rect.height);\n    return rowHeight;\n}\n/** @hidden */\nexport function isEditable(col, type, elem) {\n    var row = parentsUntil(elem, 'e-row');\n    var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n    if (type === 'beginEdit' && isOldRow) {\n        if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n            return false;\n        }\n        return true;\n    }\n    else {\n        if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n            return false;\n        }\n        return true;\n    }\n}\n/** @hidden */\nexport function isActionPrevent(inst) {\n    var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n    return inst.editSettings.mode === 'batch' &&\n        (inst.element.querySelectorAll('.e-updatedtd').length) && inst.editSettings.showConfirmDialog &&\n        (dlg ? dlg.classList.contains('e-popup-close') : true);\n}\n/** @hidden */\nexport function wrap(elem, action) {\n    var clName = 'e-wrap';\n    elem = elem instanceof Array ? elem : [elem];\n    for (var i = 0; i < elem.length; i++) {\n        action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n    }\n}\nexport function changeButtonType(target) {\n    var elements = [].slice.call(target.querySelectorAll('button'));\n    for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n        var button = elements_1[_i];\n        attributes(button, { type: 'button' });\n    }\n}\n/** @hidden */\nexport function setFormatter(serviceLocator, column) {\n    var fmtr = serviceLocator.getService('valueFormatter');\n    switch (column.type) {\n        case 'date':\n            column.setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: column.format }));\n            column.setParser(fmtr.getParserFunction({ type: 'date', skeleton: column.format }));\n            break;\n        case 'datetime':\n            column.setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: column.format }));\n            column.setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: column.format }));\n            break;\n        case 'number':\n            column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            column.setParser(fmtr.getParserFunction({ format: column.format }));\n            break;\n    }\n}\n/** @hidden */\nexport function addRemoveActiveClasses(cells, add) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    for (var i = 0, len = cells.length; i < len; i++) {\n        if (add) {\n            classList(cells[i], args.slice(), []);\n            cells[i].setAttribute('aria-selected', 'true');\n        }\n        else {\n            classList(cells[i], [], args.slice());\n            cells[i].removeAttribute('aria-selected');\n        }\n    }\n}\n/** @hidden */\nexport function distinctStringValues(result) {\n    var temp = {};\n    var res = [];\n    for (var i = 0; i < result.length; i++) {\n        if (!(result[i] in temp)) {\n            res.push(result[i].toString());\n            temp[result[i]] = 1;\n        }\n    }\n    return res;\n}\n/** @hidden */\nexport function getFilterMenuPostion(target, dialogObj) {\n    var elementVisible = dialogObj.element.style.display;\n    dialogObj.element.style.display = 'block';\n    var dlgWidth = dialogObj.width;\n    var newpos = calculateRelativeBasedPosition(target, dialogObj.element);\n    dialogObj.element.style.display = elementVisible;\n    dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 5 + 'px';\n    var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n    if (leftPos < 1) {\n        dialogObj.element.style.left = (dlgWidth + leftPos) - 16 + 'px'; // right calculation\n    }\n    else {\n        dialogObj.element.style.left = leftPos + -4 + 'px';\n    }\n}\n/** @hidden */\nexport function getZIndexCalcualtion(args, dialogObj) {\n    args.popup.element.style.zIndex = (dialogObj.zIndex + 1).toString();\n}\n/** @hidden */\nexport function toogleCheckbox(elem) {\n    var span = elem.querySelector('.e-frame');\n    span.classList.contains('e-check') ? classList(span, ['e-uncheck'], ['e-check']) :\n        classList(span, ['e-check'], ['e-uncheck']);\n}\n/** @hidden */\nexport function createCboxWithWrap(uid, elem, className) {\n    var div = createElement('div', { className: className });\n    div.appendChild(elem);\n    div.setAttribute('uid', uid);\n    return div;\n}\n/** @hidden */\nexport function removeAddCboxClasses(elem, checked) {\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    if (checked) {\n        elem.classList.add('e-check');\n    }\n    else {\n        elem.classList.add('e-uncheck');\n    }\n}\n","/**\n * AriaService\n * @hidden\n */\nvar AriaService = /** @class */ (function () {\n    function AriaService() {\n    }\n    AriaService.prototype.setOptions = function (target, options) {\n        var props = Object.keys(options);\n        props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n    };\n    AriaService.prototype.setExpand = function (target, expand) {\n        setStateAndProperties(target, config.expand, expand);\n    };\n    AriaService.prototype.setSort = function (target, direction) {\n        setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n    };\n    AriaService.prototype.setBusy = function (target, isBusy) {\n        setStateAndProperties(target, config.busy, isBusy);\n        setStateAndProperties(target, config.invalid, null, true);\n    };\n    AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n        setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n    };\n    AriaService.prototype.setDropTarget = function (target, isTarget) {\n        setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n    };\n    return AriaService;\n}());\nexport { AriaService };\n/**\n * @hidden\n */\nfunction setStateAndProperties(target, attribute, value, remove) {\n    if (remove) {\n        target.removeAttribute(attribute);\n        return;\n    }\n    if (target) {\n        target.setAttribute(attribute, value);\n    }\n}\nvar config = {\n    expand: 'aria-expanded',\n    role: 'role',\n    selected: 'aria-selected',\n    multiselectable: 'aria-multiselectable',\n    sort: 'aria-sort',\n    busy: 'aria-busy',\n    invalid: 'aria-invalid',\n    grabbed: 'aria-grabbed',\n    dropeffect: 'aria-dropeffect',\n    haspopup: 'aria-haspopup',\n    level: 'aria-level',\n    colcount: 'aria-colcount'\n};\n","import { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { uiUpdate, initialEnd, dataReady, modelChanged } from '../base/constant';\nimport { FooterRenderer } from '../renderer/footer-renderer';\nimport { SummaryCellRenderer } from '../renderer/summary-cell-renderer';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\n/**\n * Summary Action controller.\n */\nvar Aggregate = /** @class */ (function () {\n    function Aggregate(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Aggregate.prototype.getModuleName = function () {\n        return 'aggregate';\n    };\n    Aggregate.prototype.initiateRender = function () {\n        var _this = this;\n        var cellFac = this.locator.getService('cellRendererFactory');\n        var instance = new SummaryCellRenderer(this.parent, this.locator);\n        [CellType.Summary, CellType.CaptionSummary, CellType.GroupSummary].forEach(function (type) {\n            return cellFac.addCellRenderer(type, instance);\n        });\n        this.footerRenderer = new FooterRenderer(this.parent, this.locator);\n        this.footerRenderer.renderPanel();\n        this.footerRenderer.renderTable();\n        this.locator.register('footerRenderer', this.footerRenderer);\n        var fn = function () {\n            _this.prepareSummaryInfo();\n            _this.parent.off(dataReady, fn);\n        };\n        this.parent.on(dataReady, fn, this);\n        this.parent.on(dataReady, this.footerRenderer.refresh, this.footerRenderer);\n    };\n    Aggregate.prototype.prepareSummaryInfo = function () {\n        var _this = this;\n        summaryIterator(this.parent.aggregates, function (column) {\n            var dataColumn = _this.parent.getColumnByField(column.field) || {};\n            var type = dataColumn.type;\n            column.format = _this.getFormatFromType(column.format, type);\n            column.setFormatter();\n            column.columnName = column.columnName || column.field;\n        });\n    };\n    Aggregate.prototype.getFormatFromType = function (format, type) {\n        if (isNullOrUndefined(type) || typeof format !== 'string') {\n            return format;\n        }\n        var obj;\n        switch (type) {\n            case 'number':\n                obj = { format: format };\n                break;\n            case 'date':\n                obj = { type: type, skeleton: format };\n                break;\n            case 'datetime':\n                obj = { type: 'dateTime', skeleton: format };\n                break;\n        }\n        return obj;\n    };\n    Aggregate.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (isNullOrUndefined(this.footerRenderer)) {\n            this.initiateRender();\n        }\n        this.prepareSummaryInfo();\n        this.footerRenderer.refresh();\n        var cModel = new CaptionSummaryModelGenerator(this.parent);\n        var gModel = new GroupSummaryModelGenerator(this.parent);\n        if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n            this.parent.notify(modelChanged, {});\n        }\n    };\n    Aggregate.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    };\n    Aggregate.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.footerRenderer.removeEventListener();\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(dataReady, this.footerRenderer.refresh);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n    };\n    Aggregate.prototype.destroy = function () {\n        this.removeEventListener();\n        remove(this.parent.element.querySelector('.e-gridfooter'));\n    };\n    return Aggregate;\n}());\nexport { Aggregate };\n/**\n * @private\n */\nexport function summaryIterator(aggregates, callback) {\n    aggregates.forEach(function (row) {\n        row.columns.forEach(function (column) {\n            callback(column, row);\n        });\n    });\n}\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Internationalization, setCulture } from '@syncfusion/ej2-base';\n/**\n * ValueFormatter class to globalize the value.\n * @hidden\n */\nvar ValueFormatter = /** @class */ (function () {\n    function ValueFormatter(cultureName) {\n        this.intl = new Internationalization();\n        if (!isNullOrUndefined(cultureName)) {\n            this.intl.culture = cultureName;\n        }\n    }\n    ValueFormatter.prototype.getFormatFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateFormat(format);\n        }\n        else {\n            return this.intl.getNumberFormat(format);\n        }\n    };\n    ValueFormatter.prototype.getParserFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateParser(format);\n        }\n        else {\n            return this.intl.getNumberParser(format);\n        }\n    };\n    ValueFormatter.prototype.fromView = function (value, format, type) {\n        if (type === 'date' || type === 'datetime' || type === 'number') {\n            return format(value);\n        }\n        else {\n            return value;\n        }\n    };\n    ValueFormatter.prototype.toView = function (value, format) {\n        var result = value;\n        if (!isNullOrUndefined(format) && !isNullOrUndefined(value)) {\n            result = format(value);\n        }\n        return result;\n    };\n    ValueFormatter.prototype.setCulture = function (cultureName) {\n        if (!isNullOrUndefined(cultureName)) {\n            setCulture(cultureName);\n        }\n    };\n    return ValueFormatter;\n}());\nexport { ValueFormatter };\n","import { merge } from '@syncfusion/ej2-base';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getUid, templateCompiler } from '../base/util';\n/**\n * Represents Grid `Column` model class.\n */\nvar Column = /** @class */ (function () {\n    function Column(options) {\n        /**\n         * If `allowSorting` set to false, then it disables sorting option of a particular column.\n         * By default all columns are sortable.\n         * @default true\n         */\n        this.allowSorting = true;\n        /**\n         * If `allowResizing` set to false, then it disables resize option of a particular column.\n         * By default all columns can be resized.\n         * @default true\n         */\n        this.allowResizing = true;\n        /**\n         * If `allowFiltering` set to false, then it disables filtering option and filter bar element of a particular column.\n         * By default all columns are filterable.\n         * @default true\n         */\n        this.allowFiltering = true;\n        /**\n         * If `allowGrouping` set to false, then it disables grouping of a particular column.\n         * By default all columns are groupable.\n         * @default true\n         */\n        this.allowGrouping = true;\n        /**\n         * If `showColumnMenu` set to false, then it disable the column menu of a particular column.\n         * By default column menu will show for all columns\n         * @default true\n         */\n        this.showColumnMenu = true;\n        /**\n         * If `enableGroupByFormat` set to true, then it groups the particular column by formatted values.\n         * @default true\n         */\n        this.enableGroupByFormat = false;\n        /**\n         * If `allowEditing` set to false, then it disables editing of a particular column.\n         * By default all columns are editable.\n         * @default true\n         */\n        this.allowEditing = true;\n        /**\n         *  It is used to customize the default filter options for a specific columns.\n         * * type -  Specifies the filter type as menu or checkbox.\n         * * ui - to render custom component for specific column it has following functions.\n         * * create – It is used for creating custom components.\n         * * read -  It is used for read the value from the component.\n         * * write - It is used to apply component model as dynamically.\n         *\n         *  ``` html\n         * <div id=\"Grid\"></div>\n         * ```\n         * ```typescript\n         * let gridObj: Grid = new Grid({\n         * dataSource: filterData,\n         * allowFiltering: true,\n         * filterSettings: { type: 'menu'},\n         *  columns: [\n         *      {\n         *          field: 'OrderID', headerText: 'Order ID', width: 120, textAlign: 'right', filter: {\n         *              ui: {\n         *                  create: (args: { target: Element, column: Object }) => {\n         *                      let db: Object = new DataManager(data);\n         *                      let flValInput: HTMLElement = createElement('input', { className: 'flm-input' });\n         *                      args.target.appendChild(flValInput);\n         *                      this.dropInstance = new DropDownList({\n         *                          dataSource: new DataManager(data),\n         *                          fields: { text: 'OrderID', value: 'OrderID' },\n         *                          placeholder: 'Select a value',\n         *                          popupHeight: '200px'\n         *                      });\n         *                      this.dropInstance.appendTo(flValInput);\n         *                  },\n         *                  write: (args: {\n         *                      column: Object, target: Element, parent: any,\n         *                      filteredValue: number | string\n         *                  }) => {\n         *                      this.dropInstance.value = args.filteredValue;\n         *                  },\n         *                  read: (args: { target: Element, column: any, operator: string, fltrObj: Filter }) => {\n         *                      args.fltrObj.filterByColumn(args.column.field, args.operator, this.dropInstance.value);\n         *\n         *                  }\n         *              }\n         *          }\n         *      },\n         *      { field: 'CustomerID', headerText: 'Customer Name', width: 150 },\n         *      { field: 'EmployeeID', headerText: 'Employee ID', width: 150 },\n         *      {\n         *          field: 'ShipCountry', headerText: 'Ship Country', filter: {\n         *              type: 'checkbox'\n         *          }, width: 150\n         *      }\n         *  ]\n         * });\n         * gridObj.appendTo('#Grid');\n         * ```\n         *\n         *  @default null\n         */\n        this.filter = {};\n        /**\n         * If `showInColumnChooser` set to false, then hide the particular column in column chooser.\n         *  By default all columns are displayed in column Chooser.\n         * @default true\n         */\n        this.showInColumnChooser = true;\n        merge(this, options);\n        this.uid = getUid('grid-column');\n        var valueFormatter = new ValueFormatter();\n        if (options.format && (options.format.skeleton || options.format.format)) {\n            this.setFormatter(valueFormatter.getFormatFunction(options.format));\n            this.setParser(valueFormatter.getParserFunction(options.format));\n        }\n        if (!this.field) {\n            this.allowFiltering = false;\n            this.allowGrouping = false;\n            this.allowSorting = false;\n        }\n        if (this.commands && !this.textAlign) {\n            this.textAlign = 'right';\n        }\n        if (this.template || this.commandsTemplate) {\n            this.templateFn = templateCompiler(this.template || this.commandsTemplate);\n        }\n        if (this.filter.itemTemplate) {\n            this.fltrTemplateFn = templateCompiler(this.filter.itemTemplate);\n        }\n    }\n    /** @hidden */\n    Column.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /** @hidden */\n    Column.prototype.setFormatter = function (value) {\n        this.formatFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getParser = function () {\n        return this.parserFn;\n    };\n    /** @hidden */\n    Column.prototype.setParser = function (value) {\n        this.parserFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getColumnTemplate = function () {\n        return this.templateFn;\n    };\n    /** @hidden */\n    Column.prototype.getFilterItemTemplate = function () {\n        return this.fltrTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getDomSetter = function () {\n        return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n    };\n    return Column;\n}());\nexport { Column };\n","/** @hidden */\nexport var created = 'create';\n/** @hidden */\nexport var destroyed = 'destroy';\n/** @hidden */\nexport var load = 'load';\n/** @hidden */\nexport var rowDataBound = 'rowDataBound';\n/** @hidden */\nexport var queryCellInfo = 'queryCellInfo';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionFailure = 'actionFailure';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var rowSelecting = 'rowSelecting';\n/** @hidden */\nexport var rowSelected = 'rowSelected';\n/** @hidden */\nexport var rowDeselecting = 'rowDeselecting';\n/** @hidden */\nexport var rowDeselected = 'rowDeselected';\n/** @hidden */\nexport var cellSelecting = 'cellSelecting';\n/** @hidden */\nexport var cellSelected = 'cellSelected';\n/** @hidden */\nexport var cellDeselecting = 'cellDeselecting';\n/** @hidden */\nexport var cellDeselected = 'cellDeselected';\n/** @hidden */\nexport var columnDragStart = 'columnDragStart';\n/** @hidden */\nexport var columnDrag = 'columnDrag';\n/** @hidden */\nexport var columnDrop = 'columnDrop';\n/** @hidden */\nexport var rowDragStart = 'rowDragStart';\n/** @hidden */\nexport var rowDrag = 'rowDrag';\n/** @hidden */\nexport var rowDrop = 'rowDrop';\n/** @hidden */\nexport var beforePrint = 'beforePrint';\n/** @hidden */\nexport var printComplete = 'printComplete';\n/** @hidden */\nexport var detailDataBound = 'detailDataBound';\n/** @hidden */\nexport var toolbarClick = 'toolbarClick';\n/** @hidden */\nexport var batchAdd = 'batchAdd';\n/** @hidden */\nexport var batchDelete = 'batchDelete';\n/** @hidden */\nexport var beforeBatchAdd = 'beforeBatchAdd';\n/** @hidden */\nexport var beforeBatchDelete = 'beforeBatchDelete';\n/** @hidden */\nexport var beforeBatchSave = 'beforeBatchSave';\n/** @hidden */\nexport var beginEdit = 'beginEdit';\n/** @hidden */\nexport var cellEdit = 'cellEdit';\n/** @hidden */\nexport var cellSave = 'cellSave';\n/** @hidden */\nexport var endAdd = 'endAdd';\n/** @hidden */\nexport var endDelete = 'endDelete';\n/** @hidden */\nexport var endEdit = 'endEdit';\n/** @hidden */\nexport var recordDoubleClick = 'recordDoubleClick';\n/** @hidden */\nexport var recordClick = 'recordClick';\n/** @hidden */\nexport var beforeDataBound = 'beforeDataBound';\n/** @hidden */\nexport var beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var onResize = 'onResize';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var checkBoxChange = 'checkBoxChange';\n/** @hidden */\nexport var beforeCopy = 'beforeCopy';\n/** @hidden */\nexport var filterChoiceRequest = 'filterchoicerequest';\n/** @hidden */\nexport var filterAfterOpen = 'filterafteropen';\n/** @hidden */\nexport var filterBeforeOpen = 'filterbeforeopen';\n/**\n * Specifies grid internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var onEmpty = 'on-empty';\n/** @hidden */\nexport var inBoundModelChanged = 'inbound-model-changed';\n/** @hidden */\nexport var modelChanged = 'model-changed';\n/** @hidden */\nexport var colGroupRefresh = 'colgroup-refresh';\n/** @hidden */\nexport var headerRefreshed = 'header-refreshed';\n/** @hidden */\nexport var pageBegin = 'paging-begin';\n/** @hidden */\nexport var pageComplete = 'paging-complete';\n/** @hidden */\nexport var sortBegin = 'sorting-begin';\n/** @hidden */\nexport var sortComplete = 'sorting-complete';\n/** @hidden */\nexport var filterBegin = 'filtering-begin';\n/** @hidden */\nexport var filterComplete = 'filtering-complete';\n/** @hidden */\nexport var searchBegin = 'searching-begin';\n/** @hidden */\nexport var searchComplete = 'searching-complete';\n/** @hidden */\nexport var reorderBegin = 'reorder-begin';\n/** @hidden */\nexport var reorderComplete = 'reorder-complete';\n/** @hidden */\nexport var rowDragAndDropBegin = 'rowdraganddrop-begin';\n/** @hidden */\nexport var rowDragAndDropComplete = 'rowdraganddrop-complete';\n/** @hidden */\nexport var groupBegin = 'grouping-begin';\n/** @hidden */\nexport var groupComplete = 'grouping-complete';\n/** @hidden */\nexport var ungroupBegin = 'ungrouping-begin';\n/** @hidden */\nexport var ungroupComplete = 'ungrouping-complete';\n/** @hidden */\nexport var rowSelectionBegin = 'rowselecting';\n/** @hidden */\nexport var rowSelectionComplete = 'rowselected';\n/** @hidden */\nexport var columnSelectionBegin = 'columnselecting';\n/** @hidden */\nexport var columnSelectionComplete = 'columnselected';\n/** @hidden */\nexport var cellSelectionBegin = 'cellselecting';\n/** @hidden */\nexport var cellSelectionComplete = 'cellselected';\n/** @hidden */\nexport var beforeCellFocused = 'beforecellfocused';\n/** @hidden */\nexport var cellFocused = 'cellfocused';\n/** @hidden */\nexport var keyPressed = 'key-pressed';\n/** @hidden */\nexport var click = 'click';\n/** @hidden */\nexport var destroy = 'destroy';\n/** @hidden */\nexport var columnVisibilityChanged = 'column-visible-changed';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var columnWidthChanged = 'column-width-changed';\n/** @hidden */\nexport var columnPositionChanged = 'column-position-changed';\n/** @hidden */\nexport var rowDragAndDrop = 'row-drag-and-drop';\n/** @hidden */\nexport var rowsAdded = 'rows-added';\n/** @hidden */\nexport var rowsRemoved = 'rows-removed';\n/** @hidden */\nexport var columnDragStop = 'column-drag-stop';\n/** @hidden */\nexport var headerDrop = 'header-drop';\n/** @hidden */\nexport var dataSourceModified = 'datasource-modified';\n/** @hidden */\nexport var refreshComplete = 'refresh-complete';\n/** @hidden */\nexport var refreshVirtualBlock = 'refresh-virtual-block';\n/** @hidden */\nexport var dblclick = 'dblclick';\n/** @hidden */\nexport var toolbarRefresh = 'toolbar-refresh';\n/** @hidden */\nexport var bulkSave = 'bulk-save';\n/** @hidden */\nexport var autoCol = 'auto-col';\n/** @hidden */\nexport var tooltipDestroy = 'tooltip-destroy';\n/** @hidden */\nexport var updateData = 'update-data';\n/** @hidden */\nexport var editBegin = 'edit-begin';\n/** @hidden */\nexport var editComplete = 'edit-complete';\n/** @hidden */\nexport var addBegin = 'add-begin';\n/** @hidden */\nexport var addComplete = 'add-complete';\n/** @hidden */\nexport var saveComplete = 'save-complete';\n/** @hidden */\nexport var deleteBegin = 'delete-begin';\n/** @hidden */\nexport var deleteComplete = 'delete-complete';\n/** @hidden */\nexport var preventBatch = 'prevent-batch';\n/** @hidden */\nexport var dialogDestroy = 'dialog-destroy';\n/** @hidden */\nexport var crudAction = 'crud-Action';\n/** @hidden */\nexport var addDeleteAction = 'add-delete-Action';\n/** @hidden */\nexport var destroyForm = 'destroy-form';\n/** @hidden */\nexport var doubleTap = 'double-tap';\n/** @hidden */\nexport var beforeExcelExport = 'beforeExcelExport';\n/** @hidden */\nexport var excelExportComplete = 'excelExportComplete';\n/** @hidden */\nexport var excelQueryCellInfo = 'excelQueryCellInfo';\n/** @hidden */\nexport var beforePdfExport = 'beforePdfExport';\n/** @hidden */\nexport var pdfExportComplete = 'pdfExportComplete';\n/** @hidden */\nexport var pdfQueryCellInfo = 'pdfQueryCellInfo';\n/** @hidden */\nexport var accessPredicate = 'access-predicate';\n/** @hidden */\nexport var contextMenuClick = 'contextMenuClick';\n/** @hidden */\nexport var freezeRefresh = 'freezerefresh';\n/** @hidden */\nexport var freezeRender = 'freezerender';\n/** @hidden */\nexport var contextMenuOpen = 'contextMenuOpen';\n/** @hidden */\nexport var columnMenuClick = 'contextMenuClick';\n/** @hidden */\nexport var columnMenuOpen = 'columnMenuOpen';\n/** @hidden */\nexport var filterOpen = 'filterOpen';\n/** @hidden */\nexport var filterDialogCreated = 'filterDialogCreated';\n/** @hidden */\nexport var filterMenuClose = 'filter-menu-close';\n","/**\n * Defines types of Cell\n * @hidden\n */\nexport var CellType;\n(function (CellType) {\n    /**  Defines CellType as Data */\n    CellType[CellType[\"Data\"] = 0] = \"Data\";\n    /**  Defines CellType as Header */\n    CellType[CellType[\"Header\"] = 1] = \"Header\";\n    /**  Defines CellType as Summary */\n    CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n    /**  Defines CellType as GroupSummary */\n    CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n    /**  Defines CellType as CaptionSummary */\n    CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n    /**  Defines CellType as Filter */\n    CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n    /**  Defines CellType as Indent */\n    CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n    /**  Defines CellType as GroupCaption */\n    CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n    /**  Defines CellType as GroupCaptionEmpty */\n    CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n    /**  Defines CellType as Expand */\n    CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n    /**  Defines CellType as HeaderIndent */\n    CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n    /**  Defines CellType as StackedHeader */\n    CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n    /**  Defines CellType as DetailHeader */\n    CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n    /**  Defines CellType as DetailExpand */\n    CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n    /**  Defines CellType as CommandColumn */\n    CellType[CellType[\"CommandColumn\"] = 14] = \"CommandColumn\";\n})(CellType || (CellType = {}));\n/**\n * Defines types of Render\n * @hidden\n */\nexport var RenderType;\n(function (RenderType) {\n    /**  Defines RenderType as Header */\n    RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /**  Defines RenderType as Summary */\n    RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n})(RenderType || (RenderType = {}));\n/**\n * Defines Predefined toolbar items.\n */\nexport var ToolbarItem;\n(function (ToolbarItem) {\n    ToolbarItem[ToolbarItem[\"Add\"] = 0] = \"Add\";\n    ToolbarItem[ToolbarItem[\"Edit\"] = 1] = \"Edit\";\n    ToolbarItem[ToolbarItem[\"Update\"] = 2] = \"Update\";\n    ToolbarItem[ToolbarItem[\"Delete\"] = 3] = \"Delete\";\n    ToolbarItem[ToolbarItem[\"Cancel\"] = 4] = \"Cancel\";\n    ToolbarItem[ToolbarItem[\"Print\"] = 5] = \"Print\";\n    ToolbarItem[ToolbarItem[\"Search\"] = 6] = \"Search\";\n    ToolbarItem[ToolbarItem[\"ColumnChooser\"] = 7] = \"ColumnChooser\";\n    ToolbarItem[ToolbarItem[\"PdfExport\"] = 8] = \"PdfExport\";\n    ToolbarItem[ToolbarItem[\"ExcelExport\"] = 9] = \"ExcelExport\";\n    ToolbarItem[ToolbarItem[\"CsvExport\"] = 10] = \"CsvExport\";\n    ToolbarItem[ToolbarItem[\"WordExport\"] = 11] = \"WordExport\";\n})(ToolbarItem || (ToolbarItem = {}));\n","/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, L10n, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, appendChildren } from '../base/util';\nimport { remove, createElement } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getActualProperties } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilter` module is used to handle filtering action.\n */\nvar CheckBoxFilter = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     * @hidden\n     */\n    function CheckBoxFilter(parent, filterSettings, serviceLocator) {\n        this.defaultConstants = {\n            Search: 'Search',\n            OK: 'OK',\n            Cancel: 'Cancel',\n            Filter: 'Filter',\n            Clear: 'Clear',\n            SelectAll: 'Select All',\n            Blanks: 'Blanks',\n            True: 'True',\n            False: 'False',\n            NoResult: 'No Matches Found'\n        };\n        this.values = {};\n        this.cBoxTrue = createCheckBox(false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(false, { checked: false, label: ' ' });\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.initLocale(this.defaultConstants);\n        this.cBoxTrue.insertBefore(createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    CheckBoxFilter.prototype.initLocale = function (constants) {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultConstants, this.parent.locale || 'en-US');\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    CheckBoxFilter.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilter.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        EventHandler.add(this.dlg.querySelector('.e-searchinput'), 'keyup', this.searchBoxKeyUp, this);\n    };\n    CheckBoxFilter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        var elem = this.dlg.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchBoxKeyUp);\n        }\n    };\n    CheckBoxFilter.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = '';\n            this.refreshCheckboxes();\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    CheckBoxFilter.prototype.searchBoxKeyUp = function (e) {\n        this.refreshCheckboxes();\n        this.updateSearchIcon();\n    };\n    CheckBoxFilter.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    CheckBoxFilter.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilter.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                if (typeof dataSource !== 'object') {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[i];\n                    dataSource[i] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilter.prototype.updateModel = function (options) {\n        this.options = options;\n        this.options.dataSource = options.dataSource;\n        this.updateDataSource();\n        this.options.type = options.type || 'string';\n        this.options.format = options.format || '';\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.sortedColumns = options.sortedColumns || this.parent.sortSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.values = {};\n        this.isFiltered = options.filteredColumns.length;\n        extend(this.defaultConstants, options.localizedStrings);\n    };\n    CheckBoxFilter.prototype.getAndSetChkElem = function (options) {\n        this.dlg = createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons', attrs: {\n                    type: 'text', placeholder: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            Input.createInput({\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilter.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen, filterModel: this,\n            columnName: this.options.field, columnType: this.options.type\n        };\n        this.parent.trigger(events.actionBegin, args);\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 250,\n            target: this.parent.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: { content: this.getLocalizedLabel(this.isExcel ? 'OK' : 'Filter'), cssClass: 'e-primary', isPrimary: true }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'Cancel' : 'Clear') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this)\n        });\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = '800px';\n        this.dialogObj.show();\n        this.wireEvents();\n        createSpinner({ target: this.spinner });\n        showSpinner(this.spinner);\n        this.getAllData();\n    };\n    CheckBoxFilter.prototype.dialogCreated = function (e) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(this.options.target, this.dialogObj);\n        }\n        else {\n            this.dialogObj.position = { X: 'center', Y: 'center' };\n        }\n        this.parent.notify(events.filterDialogCreated, e);\n    };\n    CheckBoxFilter.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilter.prototype.closeDialog = function () {\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.dialogObj.destroy();\n            this.unWireEvents();\n            remove(this.dlg);\n            this.dlg = null;\n        }\n    };\n    CheckBoxFilter.prototype.clearFilter = function () {\n        this.options.handler({ action: 'clear-filter', field: this.options.field });\n    };\n    CheckBoxFilter.prototype.btnClick = function (e) {\n        var text = e.target.firstChild.textContent.toLowerCase();\n        if (this.getLocalizedLabel(this.isExcel ? 'OK' : 'Filter').toLowerCase() === text) {\n            this.fltrBtnHandler();\n        }\n        else if (this.getLocalizedLabel('Clear').toLowerCase() === text) {\n            this.clearFilter();\n        }\n        this.closeDialog();\n    };\n    CheckBoxFilter.prototype.fltrBtnHandler = function () {\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n        var optr = 'equal';\n        var caseSen = this.options.type === 'string' ?\n            this.options.allowCaseSensitive : true;\n        var defaults = {\n            field: this.options.field, predicate: 'or',\n            operator: optr, matchcase: caseSen\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual) {\n            optr = 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = 'and';\n            defaults.operator = 'notequal';\n        }\n        var value;\n        var fObj;\n        var coll = [];\n        for (var i = 0; i < checked.length; i++) {\n            value = this.values[parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n            fObj = extend({}, { value: value }, defaults);\n            if (value && !value.toString().length) {\n                fObj.operator = isNotEqual ? 'notequal' : 'equal';\n            }\n            coll.push(this.options.type === 'date' ? CheckBoxFilter.setDateObject(fObj) : fObj);\n        }\n        this.initiateFilter(coll);\n    };\n    CheckBoxFilter.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[j].ejpredicate !== undefined ?\n                    predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n                    predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchCase);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilter.prototype.refreshCheckboxes = function () {\n        var val = this.sInput.value;\n        var query = this.options.query.clone();\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = 'contains';\n        var matchcase = true;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('True').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('False').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'false';\n            }\n        }\n        if (this.options.type === 'date' || this.options.type === 'datetime') {\n            parsed = this.valueFormatter.fromView(val, this.options.parserFn, this.options.type);\n            operator = 'equal';\n            if (isNullOrUndefined(parsed) && val.length) {\n                return;\n            }\n        }\n        if (val.length) {\n            query.where(this.options.field, operator, parsed, matchcase);\n        }\n        this.processDataSource(query);\n    };\n    CheckBoxFilter.prototype.getPredicateFromCols = function (columns) {\n        var predicate;\n        var predicates = CheckBoxFilter.getPredicate(columns);\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var and = 'and';\n            var obj = predicates[prop];\n            predicate = !isNullOrUndefined(predicate) ?\n                predicate[and](obj) :\n                obj;\n        }\n        return predicate;\n    };\n    CheckBoxFilter.prototype.getAllData = function () {\n        var _this = this;\n        var query = new Query();\n        query.requiresCount(); //consider take query\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var promise = this.options.dataSource.executeQuery(query);\n        promise.then(function (e) { return _this.dataSuccess(e); });\n    };\n    CheckBoxFilter.prototype.dataSuccess = function (e) {\n        this.fullData = e.result;\n        var query = new Query();\n        if ((this.options.filteredColumns.length)) {\n            var cols = [];\n            for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                if (this.options.filteredColumns[i].field !== this.options.field) {\n                    cols.push(this.options.filteredColumns[i]);\n                }\n            }\n            var predicate = this.getPredicateFromCols(cols);\n            if (predicate) {\n                query.where(predicate);\n            }\n        }\n        // query.select(this.options.field);\n        var result = new DataManager(this.fullData).executeLocal(query);\n        var res = CheckBoxFilter.getDistinct(result, this.options.field);\n        this.filteredData = res.records;\n        this.processDataSource(null, true);\n        var args = {\n            requestType: events.filterAfterOpen,\n            filterModel: this, columnName: this.options.field, columnType: this.options.type\n        };\n        this.parent.trigger(events.actionComplete, args);\n    };\n    CheckBoxFilter.prototype.processDataSource = function (query, isInitial) {\n        showSpinner(this.spinner);\n        query = query ? query : this.options.query.clone();\n        query.requiresCount();\n        var args = {\n            requestType: events.filterChoiceRequest, filterModel: this, query: query,\n            dataSource: this.filteredData\n        };\n        this.parent.trigger(events.actionBegin, args);\n        var result = new DataManager(args.dataSource).executeLocal(args.query);\n        var res = result;\n        this.updateResult();\n        this.createFilterItems(res.result, isInitial);\n    };\n    CheckBoxFilter.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getValue(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilter.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n    };\n    CheckBoxFilter.prototype.updateAllCBoxes = function (checked) {\n        var cBoxes = [].slice.call(this.cBox.querySelectorAll('.e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    CheckBoxFilter.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            this.dialogObj.element.querySelector('.e-btn').focus();\n        }\n    };\n    CheckBoxFilter.prototype.createCheckbox = function (value, checked) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        var label = elem.querySelector('.e-label');\n        label.innerHTML = !isNullOrUndefined(value) && value.toString().length ? value :\n            this.getLocalizedLabel('Blanks');\n        if (this.options.template) {\n            label.innerHTML = '';\n            var args = {};\n            args[this.options.field] = value;\n            appendChildren(label, this.options.template(args));\n        }\n        return elem;\n    };\n    CheckBoxFilter.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.cBox.children.length - 1;\n        var className = [];\n        var elem = this.cBox.querySelector('.e-selectall');\n        var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dlg.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    CheckBoxFilter.prototype.createFilterItems = function (data, isInitial) {\n        var cBoxes = createElement('div');\n        this.itemsCnt = data.length;\n        if (data.length) {\n            var selectAll = createCboxWithWrap(getUid('cbox'), this.createCheckbox(this.getLocalizedLabel('SelectAll'), false), 'e-ftrchk');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            cBoxes.appendChild(selectAll);\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where('field', 'equal', this.options.field)).length;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[uid] = getValue(this.options.field, data[i]);\n                var value = this.valueFormatter.toView(getValue(this.options.field, data[i]), this.options.formatFn);\n                cBoxes.appendChild(createCboxWithWrap(uid, this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid])), 'e-ftrchk'));\n            }\n            this.cBox.innerHTML = cBoxes.innerHTML;\n            this.updateIndeterminatenBtn();\n        }\n        else {\n            cBoxes.appendChild(createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = cBoxes.innerHTML;\n        }\n        var args = { requestType: events.filterChoiceRequest, filterModel: this, dataSource: data };\n        this.parent.trigger(events.actionComplete, args);\n        hideSpinner(this.spinner);\n    };\n    CheckBoxFilter.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            return this.result[value];\n        }\n    };\n    CheckBoxFilter.getDistinct = function (json, field) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        while (len--) {\n            value = json[len];\n            value = getValue(field, value); //local remote diff, check with mdu           \n            if (!isNullOrUndefined(value)) {\n                if (!(value in lookup)) {\n                    var obj = {};\n                    obj[ejValue] = value;\n                    setValue(field, value, obj);\n                    result.push(obj);\n                }\n                lookup[value] = true;\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilter.setDateObject = function (filterObject) {\n        var prevObj = extend({}, getActualProperties(filterObject));\n        var nextObj = extend({}, getActualProperties(filterObject));\n        var value = new Date(filterObject.value);\n        var prevDate = new Date(value.setDate(value.getDate() - 1));\n        var nextDate = new Date(value.setDate(value.getDate() + 2));\n        prevObj.value = prevDate;\n        nextObj.value = nextDate;\n        if (filterObject.operator === 'equal') {\n            nextObj.operator = 'lessthan';\n            nextObj.predicate = 'and';\n            prevObj.operator = 'greaterthan';\n            prevObj.predicate = 'and';\n        }\n        else if (filterObject.operator === 'notequal') {\n            nextObj.operator = 'greaterthanorequal';\n            nextObj.predicate = 'or';\n            prevObj.operator = 'lessthanorequal';\n            prevObj.predicate = 'or';\n        }\n        var predicateSt = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        var predicateEnd = new Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n        filterObject.ejpredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) :\n            predicateSt.or(predicateEnd);\n        filterObject.type = 'date';\n        return filterObject;\n    };\n    CheckBoxFilter.getPredicate = function (columns) {\n        var cols = CheckBoxFilter.getDistinct(columns, 'field').records;\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[i].field));\n            if (collection.length !== 0) {\n                pred[cols[i].field] = CheckBoxFilter.generatePredicate(collection);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilter.generatePredicate = function (cols) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var first;\n        first = CheckBoxFilter.updateDateFilter(cols[0]);\n        if (first.type === 'date' || first.type === 'datetime') {\n            predicate = CheckBoxFilter.getDatePredicate(first);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, CheckBoxFilter.getCaseValue(first));\n        }\n        for (var p = 1; p < len; p++) {\n            cols[p] = CheckBoxFilter.updateDateFilter(cols[p]);\n            if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate.predicates.push(CheckBoxFilter.getDatePredicate(cols[p]));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[p].operator, cols[p].value, CheckBoxFilter.getCaseValue(cols[p])));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate = predicate[(cols[p].predicate)](CheckBoxFilter.getDatePredicate(cols[p]));\n                }\n                else {\n                    predicate = cols[p].ejpredicate ?\n                        predicate[cols[p].predicate](cols[p].ejpredicate) :\n                        predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, CheckBoxFilter.getCaseValue(cols[p]));\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilter.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.ignoreCase) && isNullOrUndefined(filter.matchCase)) {\n            return false;\n        }\n        else if (isNullOrUndefined(filter.ignoreCase)) {\n            return !filter.matchCase;\n        }\n        else {\n            return filter.ignoreCase;\n        }\n    };\n    CheckBoxFilter.getDatePredicate = function (predicate) {\n        if (predicate.value instanceof Date) {\n            predicate.ignoreCase = (['equal', 'notequal'].indexOf(predicate.operator) === -1) ? false : true;\n        }\n        return new Predicate(predicate.field, predicate.operator, predicate.value, predicate.ignoreCase);\n    };\n    CheckBoxFilter.updateDateFilter = function (filter) {\n        if (filter.type !== 'date' && !(filter.value instanceof Date)) {\n            return filter;\n        }\n        return ['equal', 'notequal'].indexOf(filter.operator) === -1 ? filter :\n            CheckBoxFilter.setDateObject(filter);\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    CheckBoxFilter.prototype.getModuleName = function () {\n        return 'checkboxFilter';\n    };\n    return CheckBoxFilter;\n}());\nexport { CheckBoxFilter };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate, Deferred } from '@syncfusion/ej2-data';\nimport { getActualProperties, setFormatter } from '../base/util';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\n/**\n * Grid data module is used to generate query and data source.\n * @hidden\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module.\n     * @hidden\n     */\n    function Data(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.initDataManager();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.rowsAdded, this.addRows, this);\n        this.parent.on(events.rowsRemoved, this.removeRows, this);\n        this.parent.on(events.dataSourceModified, this.initDataManager, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.updateData, this.crudActions, this);\n        this.parent.on(events.addDeleteAction, this.getData, this);\n    }\n    /**\n     * The function used to initialize dataManager and external query\n     * @return {void}\n     */\n    Data.prototype.initDataManager = function () {\n        var gObj = this.parent;\n        this.dataManager = gObj.dataSource instanceof DataManager ? gObj.dataSource :\n            (isNullOrUndefined(gObj.dataSource) ? new DataManager() : new DataManager(gObj.dataSource));\n        gObj.query = gObj.query instanceof Query ? gObj.query : new Query();\n    };\n    /**\n     * The function is used to generate updated Query from Grid model.\n     * @return {Query}\n     * @hidden\n     */\n    Data.prototype.generateQuery = function (skipPage) {\n        var gObj = this.parent;\n        var query = gObj.query.clone();\n        if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n            var columns = gObj.filterSettings.columns;\n            var predicate = void 0;\n            if (gObj.filterSettings.type === 'checkbox' || gObj.filterSettings.type === 'excel') {\n                var excelPredicate = CheckBoxFilter.getPredicate(gObj.filterSettings.columns);\n                for (var _i = 0, _a = Object.keys(excelPredicate); _i < _a.length; _i++) {\n                    var prop = _a[_i];\n                    var and = 'and';\n                    var obj = excelPredicate[prop];\n                    predicate = !isNullOrUndefined(predicate) ?\n                        predicate[and](obj) :\n                        obj;\n                }\n                if (predicate !== undefined) {\n                    query.where(predicate);\n                }\n            }\n            else {\n                for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                    var col = columns_1[_b];\n                    var sType = gObj.getColumnByField(col.field).type;\n                    if (sType !== 'date' && sType !== 'datetime') {\n                        query.where(col.field, col.operator, col.value, !col.matchCase);\n                    }\n                    else {\n                        query.where(this.getDatePredicate(col));\n                    }\n                }\n            }\n        }\n        if (gObj.searchSettings.key.length) {\n            var sSettings = gObj.searchSettings;\n            sSettings.fields = sSettings.fields.length ? sSettings.fields : gObj.getColumnFieldNames();\n            query.search(sSettings.key, sSettings.fields, sSettings.operator, sSettings.ignoreCase);\n        }\n        gObj.aggregates.forEach(function (row) {\n            row.columns.forEach(function (column) {\n                var types = column.type instanceof Array ? column.type : [column.type];\n                types.forEach(function (type) { return query.aggregate(type, column.field); });\n            });\n        });\n        if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n            var columns = gObj.sortSettings.columns;\n            var sortGrp = [];\n            for (var i = columns.length - 1; i > -1; i--) {\n                if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n                    query.sortBy(columns[i].field, columns[i].direction);\n                }\n                else {\n                    sortGrp.push(columns[i]);\n                }\n            }\n            for (var i = 0, len = sortGrp.length; i < len; i++) {\n                query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n            }\n        }\n        if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n            gObj.pageSettings.currentPage = Math.max(1, gObj.pageSettings.currentPage);\n            if (gObj.pageSettings.pageCount <= 0) {\n                gObj.pageSettings.pageCount = 8;\n            }\n            if (gObj.pageSettings.pageSize <= 0) {\n                gObj.pageSettings.pageSize = 12;\n            }\n            query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n        }\n        if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n            var columns = gObj.groupSettings.columns;\n            for (var i = 0, len = columns.length; i < len; i++) {\n                var isGrpFmt = gObj.getColumnByField(columns[i]).enableGroupByFormat;\n                var format = gObj.getColumnByField(columns[i]).format;\n                if (isGrpFmt) {\n                    query.group(columns[i], this.formatGroupColumn.bind(this), format);\n                }\n                else {\n                    query.group(columns[i], null);\n                }\n            }\n        }\n        return query;\n    };\n    /**\n     * The function is used to get dataManager promise by executing given Query.\n     * @param  {Query} query - Defines the query which will execute along with data processing.\n     * @return {Promise<Object>}\n     * @hidden\n     */\n    Data.prototype.getData = function (args, query) {\n        var _this = this;\n        if (args === void 0) { args = { requestType: '' }; }\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ?\n            args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n        switch (args.requestType) {\n            case 'delete':\n                query = query ? query : this.generateQuery();\n                this.dataManager.remove(key, args.data[0], null, query);\n                break;\n            case 'save':\n                query = query ? query : this.generateQuery();\n                this.dataManager.insert(args.data, null, query, 0);\n                break;\n        }\n        if (this.dataManager.ready) {\n            var deferred_1 = new Deferred();\n            var ready = this.dataManager.ready;\n            ready.then(function (e) {\n                _this.dataManager.executeQuery(query).then(function (result) {\n                    deferred_1.resolve(result);\n                });\n            }).catch(function (e) {\n                deferred_1.reject(e);\n            });\n            return deferred_1.promise;\n        }\n        else {\n            return this.dataManager.executeQuery(query);\n        }\n    };\n    Data.prototype.formatGroupColumn = function (value, field) {\n        var gObj = this.parent;\n        var serviceLocator = this.serviceLocator;\n        var column = gObj.getColumnByField(field);\n        var date = value;\n        if (!column.type) {\n            column.type = date.getDay ? (date.getHours() > 0 || date.getMinutes() > 0 ||\n                date.getSeconds() > 0 || date.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n        }\n        if (isNullOrUndefined(column.getFormatter())) {\n            setFormatter(serviceLocator, column);\n        }\n        var formatVal = ValueFormatter.prototype.toView(value, column.getFormatter());\n        return formatVal;\n    };\n    Data.prototype.crudActions = function (args) {\n        this.generateQuery();\n        var promise = null;\n        var pr = 'promise';\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n            this.parent.getPrimaryKeyFieldNames());\n        switch (args.requestType) {\n            case 'save':\n                promise = this.dataManager.update(key, args.data, null, this.generateQuery());\n                break;\n        }\n        args[pr] = promise;\n        this.parent.notify(events.crudAction, args);\n    };\n    /** @hidden */\n    Data.prototype.saveChanges = function (changes, key) {\n        var promise = this.dataManager.saveChanges(changes, key, null, this.generateQuery().requiresCount());\n        return promise;\n    };\n    Data.prototype.getKey = function (keys) {\n        if (keys && keys.length) {\n            return keys[0];\n        }\n        return undefined;\n    };\n    /** @hidden */\n    Data.prototype.isRemote = function () {\n        return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined;\n    };\n    /** @hidden */\n    Data.prototype.getDatePredicate = function (filterObject) {\n        var datePredicate;\n        var prevDate;\n        var nextDate;\n        var prevObj = extend({}, getActualProperties(filterObject));\n        var nextObj = extend({}, getActualProperties(filterObject));\n        var value = new Date(filterObject.value);\n        if (filterObject.operator === 'equal' || filterObject.operator === 'notEqual') {\n            prevDate = new Date(value.setDate(value.getDate() - 1));\n            nextDate = new Date(value.setDate(value.getDate() + 2));\n            prevObj.value = prevDate;\n            nextObj.value = nextDate;\n            if (filterObject.operator === 'equal') {\n                prevObj.operator = 'greaterthan';\n                nextObj.operator = 'lessthan';\n            }\n            else if (filterObject.operator === 'notEqual') {\n                prevObj.operator = 'lessthanorequal';\n                nextObj.operator = 'greaterthanorequal';\n            }\n            var predicateSt = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n            var predicateEnd = new Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n            datePredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n        }\n        else {\n            var predicates = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n            datePredicate = predicates;\n        }\n        return datePredicate;\n    };\n    Data.prototype.addRows = function (e) {\n        for (var i = e.records.length; i > 0; i--) {\n            this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n        }\n    };\n    Data.prototype.removeRows = function (e) {\n        var json = this.dataManager.dataSource.json;\n        this.dataManager.dataSource.json = json.filter(function (value, index) { return e.records.indexOf(value) === -1; });\n    };\n    Data.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.rowsAdded, this.addRows);\n        this.parent.off(events.rowsRemoved, this.removeRows);\n        this.parent.off(events.dataSourceModified, this.initDataManager);\n        this.parent.off(events.dataSourceModified, this.destroy);\n        this.parent.off(events.updateData, this.crudActions);\n        this.parent.off(events.addDeleteAction, this.getData);\n    };\n    return Data;\n}());\nexport { Data };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Row\n * @hidden\n */\nvar Row = /** @class */ (function () {\n    function Row(options) {\n        merge(this, options);\n    }\n    return Row;\n}());\nexport { Row };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Cell\n * @hidden\n */\nvar Cell = /** @class */ (function () {\n    function Cell(options) {\n        this.isSpanned = false;\n        merge(this, options);\n    }\n    return Cell;\n}());\nexport { Cell };\n","import { isNullOrUndefined, attributes } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject } from '../base/util';\nimport { CellType } from '../base/enum';\n/**\n * `CellMergeRender` module.\n * @hidden\n */\nvar CellMergeRender = /** @class */ (function () {\n    function CellMergeRender(serviceLocator, parent) {\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n    }\n    CellMergeRender.prototype.render = function (cellArgs, row, i, td) {\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n        var span = row.cells[i].cellSpan ? row.cells[i].cellSpan :\n            (cellArgs.colSpan + i) <= row.cells.length ? cellArgs.colSpan : row.cells.length - i;\n        var visible = 0;\n        for (var j = i + 1; j < i + span && j < row.cells.length; j++) {\n            if (row.cells[j].visible === false) {\n                visible++;\n            }\n            else {\n                row.cells[j].isSpanned = true;\n            }\n        }\n        if (visible > 0) {\n            for (var j = i + span; j < i + span + visible && j < row.cells.length; j++) {\n                row.cells[j].isSpanned = true;\n            }\n            if (i + span + visible >= row.cells.length) {\n                span -= (i + span + visible) - row.cells.length;\n            }\n        }\n        if (row.cells[i].cellSpan) {\n            row.data[cellArgs.column.field] = row.cells[i].spanText;\n            td = cellRenderer.render(row.cells[i], row.data, { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' });\n        }\n        if (span > 1) {\n            attributes(td, { 'colSpan': span.toString(), 'aria-colSpan': span.toString() });\n        }\n        if (this.parent.enableColumnVirtualization && !row.cells[i].cellSpan &&\n            !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {\n            this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);\n        }\n        return td;\n    };\n    CellMergeRender.prototype.backupMergeCells = function (fName, data, span) {\n        this.setMergeCells(this.generteKey(fName, data), span);\n    };\n    CellMergeRender.prototype.generteKey = function (fname, data) {\n        return fname + '__' + data.toString();\n    };\n    CellMergeRender.prototype.splitKey = function (key) {\n        return key.split('__');\n    };\n    CellMergeRender.prototype.containsKey = function (fname, data) {\n        return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));\n    };\n    CellMergeRender.prototype.getMergeCells = function () {\n        return this.parent.mergeCells;\n    };\n    CellMergeRender.prototype.setMergeCells = function (key, span) {\n        this.parent.mergeCells[key] = span;\n    };\n    CellMergeRender.prototype.updateVirtualCells = function (rows) {\n        var mCells = this.getMergeCells();\n        for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {\n            var key = _a[_i];\n            var value = mCells[key];\n            var merge = this.splitKey(key);\n            var columnIndex = this.getIndexFromAllColumns(merge[0]);\n            var vColumnIndices = this.parent.getColumnIndexesInView();\n            var span = value - (vColumnIndices[0] - columnIndex);\n            if (columnIndex < vColumnIndices[0] && span > 1) {\n                for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {\n                    var row = rows_1[_b];\n                    if (row.data[merge[0]].toString() === merge[1].toString()) {\n                        row.cells[0].cellSpan = span;\n                        row.cells[0].spanText = merge[1];\n                        break;\n                    }\n                }\n            }\n        }\n        return rows;\n    };\n    CellMergeRender.prototype.getIndexFromAllColumns = function (field) {\n        var index = iterateArrayOrObject(this.parent.getVisibleColumns(), function (item, index) {\n            if (item.field === field) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return index;\n    };\n    return CellMergeRender;\n}());\nexport { CellMergeRender };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { createElement, attributes as addAttributes } from '@syncfusion/ej2-base';\nimport { rowDataBound, queryCellInfo } from '../base/constant';\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { CellMergeRender } from './cell-merge-renderer';\n/**\n * RowRenderer class which responsible for building row content.\n * @hidden\n */\nvar RowRenderer = /** @class */ (function () {\n    function RowRenderer(serviceLocator, cellType, parent) {\n        this.element = createElement('tr', { attrs: { role: 'row' } });\n        this.cellType = cellType;\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n    }\n    /**\n     * Function to render the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate, cloneNode) {\n        return this.refreshRow(row, columns, attributes, rowTemplate, cloneNode);\n    };\n    /**\n     * Function to refresh the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n        if (isChanged) {\n            row.data = extend({}, row.changes);\n            this.refreshMergeCells(row);\n        }\n        var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n        var tr = this.refreshRow(row, columns, attributes, rowTemplate);\n        var cells = [].slice.call(tr.cells);\n        node.innerHTML = '';\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            node.appendChild(cell);\n        }\n    };\n    RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate, cloneNode) {\n        var tr = !isNullOrUndefined(cloneNode) ? cloneNode : this.element.cloneNode();\n        var rowArgs = { data: row.data };\n        var cellArgs = { data: row.data };\n        var attrCopy = extend({}, attributes, {});\n        if (row.isDataRow) {\n            row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1;\n        }\n        this.buildAttributeFromRow(tr, row);\n        addAttributes(tr, attrCopy);\n        setStyleAndAttributes(tr, row.attributes);\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        for (var i = 0, len = row.cells.length; i < len; i++) {\n            var cell = row.cells[i];\n            cell.isSelected = row.isSelected;\n            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n            var td = cellRenderer.render(row.cells[i], row.data, { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' });\n            if (row.cells[i].cellType !== CellType.Filter) {\n                if (row.cells[i].cellType === CellType.Data) {\n                    this.parent.trigger(queryCellInfo, extend(cellArgs, { cell: td, column: cell.column, colSpan: 1 }));\n                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1) {\n                        var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n                        td = cellMerge.render(cellArgs, row, i, td);\n                    }\n                }\n                if (!row.cells[i].isSpanned) {\n                    tr.appendChild(td);\n                }\n            }\n        }\n        if (row.isDataRow) {\n            this.parent.trigger(rowDataBound, extend(rowArgs, { row: tr }));\n        }\n        if (row.cssClass) {\n            tr.classList.add(row.cssClass);\n        }\n        return tr;\n    };\n    RowRenderer.prototype.refreshMergeCells = function (row) {\n        for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            cell.isSpanned = false;\n        }\n        return row;\n    };\n    /**\n     * Function to check and add alternative row css class.\n     * @param  {Element} tr\n     * @param  {{[x:string]:Object}} attr\n     */\n    RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n        var attr = {};\n        var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n        var classes = [];\n        if (row.isDataRow) {\n            classes.push('e-row');\n        }\n        if (row.isAltRow) {\n            classes.push('e-altrow');\n        }\n        if (!isNullOrUndefined(row.index)) {\n            attr[prop.rowindex] = row.index;\n        }\n        if (row.rowSpan) {\n            attr.rowSpan = row.rowSpan;\n        }\n        if (row.uid) {\n            attr[prop.dataUID] = row.uid;\n        }\n        if (row.isSelected) {\n            attr[prop.ariaSelected] = true;\n        }\n        if (row.visible === false) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(tr, attr);\n    };\n    return RowRenderer;\n}());\nexport { RowRenderer };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Row } from '../models/row';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\nimport { getUid } from '../base/util';\n/**\n * RowModelGenerator is used to generate grid data rows.\n * @hidden\n */\nvar RowModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function RowModelGenerator(parent) {\n        this.parent = parent;\n    }\n    RowModelGenerator.prototype.generateRows = function (data, args) {\n        var rows = [];\n        var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n        for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n            rows[i] = this.generateRow(data[i], startIndex);\n        }\n        return rows;\n    };\n    RowModelGenerator.prototype.ensureColumns = function () {\n        //TODO: generate dummy column for group, detail here;\n        var cols = [];\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cols.push(this.generateCell({}, null, CellType.DetailExpand));\n        }\n        return cols;\n    };\n    RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent) {\n        var options = {};\n        var tmp = [];\n        options.uid = getUid('grid-row');\n        options.data = data;\n        options.index = index;\n        options.indent = indent;\n        options.isDataRow = true;\n        options.cssClass = cssClass;\n        options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n        var cells = this.ensureColumns();\n        var row = new Row(options);\n        row.cells = cells.concat(this.generateCells(options));\n        return row;\n    };\n    RowModelGenerator.prototype.generateCells = function (options) {\n        var _this = this;\n        var dummies = this.parent.getColumns();\n        var tmp = [];\n        dummies.forEach(function (dummy, index) {\n            return tmp.push(_this.generateCell(dummy, options.uid, isNullOrUndefined(dummy.commands) ? undefined : CellType.CommandColumn, null, index));\n        });\n        return tmp;\n    };\n    RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(column.field || column.template),\n            'isTemplate': !isNullOrUndefined(column.template),\n            'rowID': rowId,\n            'column': column,\n            'cellType': !isNullOrUndefined(cellType) ? cellType : CellType.Data,\n            'colSpan': colSpan,\n            'commands': column.commands\n        };\n        if (opt.isDataCell || opt.column.type === 'checkbox') {\n            opt.index = this.parent.getColumnIndexByField(column.field);\n        }\n        return new Cell(opt);\n    };\n    RowModelGenerator.prototype.refreshRows = function (input) {\n        var _this = this;\n        input.forEach(function (row) { return row.cells = _this.generateCells(row); });\n        return input;\n    };\n    return RowModelGenerator;\n}());\nexport { RowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { calculateAggregate } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n * @hidden\n */\nvar SummaryModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for Summary row model generator\n     */\n    function SummaryModelGenerator(parent) {\n        this.parent = parent;\n    }\n    SummaryModelGenerator.prototype.getData = function () {\n        var _this = this;\n        var rows = [];\n        this.parent.aggregates.slice().forEach(function (row) {\n            var columns = row.columns.filter(function (column) {\n                return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n                    || _this.columnSelector(column);\n            });\n            if (columns.length) {\n                rows.push({ columns: columns });\n            }\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.footerTemplate !== undefined;\n    };\n    SummaryModelGenerator.prototype.getColumns = function () {\n        var columns = [];\n        if (this.parent.allowGrouping) {\n            this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new Column({})); });\n        }\n        if (this.parent.detailTemplate) {\n            columns.push(new Column({}));\n        }\n        columns.push.apply(columns, this.parent.getColumns());\n        return columns;\n    };\n    SummaryModelGenerator.prototype.generateRows = function (input, args) {\n        var _this = this;\n        if (this.parent.currentViewData.length === 0) {\n            return [];\n        }\n        var data = this.buildSummaryData(input, args);\n        var rows = [];\n        this.getData().forEach(function (row, index) {\n            rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined));\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw) {\n        var _this = this;\n        var tmp = [];\n        var indents = this.getIndentByLevel(raw);\n        var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ? 1 : 0);\n        this.getColumns().forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() : CellType.Indent, indents[index])); });\n        var row = new Row({ data: data, attributes: { class: 'e-summaryrow' } });\n        row.cells = tmp;\n        row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n        return row;\n    };\n    SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent) {\n        //Get the summary column by display\n        var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n        var attrs = { 'style': { 'textAlign': column.textAlign } };\n        if (indent) {\n            attrs.class = indent;\n        }\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(sColumn),\n            'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate\n                || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n            'column': sColumn || {},\n            'attributes': attrs,\n            'cellType': cellType\n        };\n        return new Cell(opt);\n    };\n    SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n        var _this = this;\n        var dummy = [];\n        var summaryRows = this.getData();\n        var single = {};\n        var key = '';\n        summaryRows.forEach(function (row) {\n            single = {};\n            row.columns.forEach(function (column) {\n                single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n            });\n            dummy.push(single);\n        });\n        return dummy;\n    };\n    SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n        return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n    };\n    SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n        var _this = this;\n        var types = column.type;\n        var helper = {};\n        var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n        var group = data;\n        if (!(types instanceof Array)) {\n            types = [column.type];\n        }\n        types.forEach(function (type) {\n            var key = column.field + ' - ' + type;\n            var disp = column.columnName;\n            var val = group.aggregates && !isNullOrUndefined(group.aggregates[key]) ? group.aggregates[key] :\n                calculateAggregate(type, group.aggregates ? group.result : data, column, _this.parent);\n            single[disp] = single[disp] || {};\n            single[disp][key] = val;\n            single[disp][type] = formatFn(val);\n            if (group.field) {\n                single[disp].field = group.field;\n                single[disp].key = group.key;\n            }\n        });\n        helper.format = column.getFormatter();\n        column.setTemplate(helper);\n        return single;\n    };\n    SummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.Summary;\n    };\n    return SummaryModelGenerator;\n}());\nexport { SummaryModelGenerator };\nvar GroupSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupSummaryModelGenerator, _super);\n    function GroupSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupFooterTemplate !== undefined;\n    };\n    GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n        if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n        return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n    };\n    GroupSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.GroupSummary;\n    };\n    return GroupSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { GroupSummaryModelGenerator };\nvar CaptionSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(CaptionSummaryModelGenerator, _super);\n    function CaptionSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupCaptionTemplate !== undefined;\n    };\n    CaptionSummaryModelGenerator.prototype.getData = function () {\n        var initVal = { columns: [] };\n        return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n                prev.columns = prev.columns.concat(cur.columns);\n                return prev;\n            }, initVal)];\n    };\n    CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n        return (this.getData()[0].columns || []).length === 0;\n    };\n    CaptionSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.CaptionSummary;\n    };\n    return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { CaptionSummaryModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\n/**\n * GroupModelGenerator is used to generate group caption rows and data rows.\n * @hidden\n */\nvar GroupModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupModelGenerator, _super);\n    function GroupModelGenerator(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.rows = [];\n        _this.index = 0;\n        _this.parent = parent;\n        _this.summaryModelGen = new GroupSummaryModelGenerator(parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(parent);\n        return _this;\n    }\n    GroupModelGenerator.prototype.generateRows = function (data, args) {\n        if (this.parent.groupSettings.columns.length === 0) {\n            return _super.prototype.generateRows.call(this, data, args);\n        }\n        this.rows = [];\n        this.index = this.parent.enableVirtualization ? (this.parent.pageSettings.currentPage - 1) * data.records.length : 0;\n        for (var i = 0, len = data.length; i < len; i++) {\n            this.getGroupedRecords(0, data[i], data.level);\n        }\n        this.index = 0;\n        return this.rows;\n    };\n    GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw) {\n        var level = raw;\n        if (isNullOrUndefined(data.items)) {\n            if (isNullOrUndefined(data.GroupGuid)) {\n                this.rows = this.rows.concat(this.generateDataRows(data, index));\n            }\n            else {\n                for (var j = 0, len = data.length; j < len; j++) {\n                    this.getGroupedRecords(index, data[j], data.level);\n                }\n            }\n        }\n        else {\n            this.rows = this.rows.concat(this.generateCaptionRow(data, index));\n            if (data.items && data.items.length) {\n                this.getGroupedRecords(index + 1, data.items, data.items.level);\n            }\n            if (this.parent.aggregates.length) {\n                (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n            }\n        }\n        var _a;\n    };\n    GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n        var _this = this;\n        var cells = [];\n        var visibles = [];\n        var column = this.parent.getColumnByField(field);\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization) {\n            column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n        }\n        var groupedLen = this.parent.groupSettings.columns.length;\n        var gObj = this.parent;\n        if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n            for (var i = 0; i < indent; i++) {\n                cells.push(this.generateIndentCell());\n            }\n            cells.push(this.generateCell({}, null, CellType.Expand));\n        }\n        indent = this.parent.enableColumnVirtualization ? 1 :\n            (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n                indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n        //Captionsummary cells will be added here.    \n        if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n            var captionCells = this.captionModelGen.generateRows(data)[0];\n            extend(data, captionCells.data);\n            var cIndex_1 = 0;\n            captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n            visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n            if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n                visibles = visibles.slice(1);\n            }\n            if (this.parent.getVisibleColumns().length === 1) {\n                visibles = [];\n            }\n            indent = indent - visibles.length;\n        }\n        var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n        var wFlag = true;\n        cols.forEach(function (col, index) {\n            var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n            if (tmpFlag) {\n                wFlag = false;\n            }\n            var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n                CellType.GroupCaption : CellType.GroupCaptionEmpty;\n            indent = _this.parent.enableColumnVirtualization && cellType === CellType.GroupCaption ? indent + groupedLen : indent;\n            cells.push(_this.generateCell(column, null, cellType, indent));\n        });\n        cells.push.apply(cells, visibles);\n        return cells;\n    };\n    GroupModelGenerator.prototype.generateCaptionRow = function (data, indent) {\n        var options = {};\n        var tmp = [];\n        var col = this.parent.getColumnByField(data.field);\n        options.data = extend({}, data);\n        if (col) {\n            options.data.field = data.field;\n        }\n        options.isDataRow = false;\n        var row = new Row(options);\n        row.indent = indent;\n        row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n        return row;\n    };\n    GroupModelGenerator.prototype.generateDataRows = function (data, indent) {\n        var rows = [];\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = data.length; i < len; i++) {\n            rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent);\n            for (var j = 0; j < indent; j++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n                    continue;\n                }\n                rows[i].cells.unshift(this.generateIndentCell());\n            }\n            this.index++;\n        }\n        return rows;\n    };\n    GroupModelGenerator.prototype.generateIndentCell = function () {\n        return this.generateCell({}, null, CellType.Indent);\n    };\n    GroupModelGenerator.prototype.refreshRows = function (input) {\n        var _this = this;\n        var indexes = this.parent.getColumnIndexesInView();\n        input.forEach(function (row) {\n            if (row.isDataRow) {\n                row.cells = _this.generateCells(row);\n                for (var j = 0; j < row.indent; j++) {\n                    if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n                        continue;\n                    }\n                    row.cells.unshift(_this.generateIndentCell());\n                }\n            }\n            else {\n                var cRow = _this.generateCaptionRow(row.data, row.indent);\n                row.cells = cRow.cells;\n            }\n        });\n        return input;\n    };\n    return GroupModelGenerator;\n}(RowModelGenerator));\nexport { GroupModelGenerator };\n","import { Droppable, Browser } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { createElement, setStyleAttribute, remove } from '@syncfusion/ej2-base';\nimport { getUpdateUsingRaf } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from './row-renderer';\nimport { CellMergeRender } from './cell-merge-renderer';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { getScrollBarWidth } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function ContentRender(parent, serviceLocator) {\n        var _this = this;\n        this.rows = [];\n        this.isLoaded = true;\n        this.drop = function (e) {\n            _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n            remove(e.droppedElement);\n        };\n        this.rafCallback = function (args) { return function () {\n            _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            _this.parent.notify(events.contentReady, { rows: _this.rows, args: args });\n            if (_this.isLoaded) {\n                _this.parent.trigger(events.dataBound, {});\n                if (_this.parent.allowTextWrap) {\n                    _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                }\n            }\n            if (args) {\n                var action = (args.requestType || '').toLowerCase() + '-complete';\n                _this.parent.notify(action, args);\n            }\n            _this.parent.hideSpinner();\n        }; };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.generator = this.getModelGenerator();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n    }\n    /**\n     * The function is used to render grid content div\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var gObj = this.parent;\n        var div = createElement('div', { className: 'e-gridcontent' });\n        var innerDiv = createElement('div', {\n            className: 'e-content'\n        });\n        if (!Browser.isDevice) {\n            innerDiv.setAttribute('tabindex', '0');\n        }\n        this.ariaService.setOptions(innerDiv, { busy: false });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        gObj.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid content table\n     */\n    ContentRender.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        contentDiv.appendChild(this.createContentTable());\n        this.setTable(contentDiv.querySelector('.e-table'));\n        this.ariaService.setOptions(this.getTable(), {\n            multiselectable: this.parent.selectionSettings.type === 'multiple'\n        });\n        this.initializeContentDrop();\n    };\n    /**\n     * The function is used to create content table elements\n     * @return {Element}\n     * @hidden\n     */\n    ContentRender.prototype.createContentTable = function () {\n        var innerDiv = this.getPanel().firstChild;\n        var table = createElement('table', {\n            className: 'e-table', attrs: {\n                cellspacing: '0.25px', role: 'grid',\n                id: this.parent.element.id + '_content_table'\n            }\n        });\n        this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n        table.appendChild(this.getColGroup());\n        table.appendChild(createElement('tbody'));\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * Refresh the content of the Grid.\n     * @return {void}\n     */\n    ContentRender.prototype.refreshContentRows = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        if (gObj.currentViewData.length === 0) {\n            return;\n        }\n        var dataSource = gObj.currentViewData;\n        var frag = document.createDocumentFragment();\n        var hdrfrag = document.createDocumentFragment();\n        var columns = gObj.getColumns();\n        var tr;\n        var hdrTbody;\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        this.rowElements = [];\n        this.rows = [];\n        var modelData = this.generator.generateRows(dataSource, args);\n        var idx = modelData[0].cells[0].index;\n        var fCont = this.getPanel().querySelector('.e-frozencontent');\n        var mCont = this.getPanel().querySelector('.e-movablecontent');\n        var cont = this.getPanel().querySelector('.e-content');\n        if (this.parent.enableColumnVirtualization) {\n            var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n            cellMerge.updateVirtualCells(modelData);\n        }\n        if (this.parent.frozenColumns && idx >= this.parent.frozenColumns) {\n            this.tbody = mCont.querySelector('tbody');\n        }\n        else {\n            this.tbody = this.getTable().querySelector('tbody');\n        }\n        for (var i = 0, len = modelData.length; i < len; i++) {\n            if (!gObj.rowTemplate) {\n                tr = row.render(modelData[i], columns);\n            }\n            else {\n                var elements = gObj.getRowTemplate()(extend({ index: i }, dataSource[i]), gObj, 'rowTemplate');\n                for (var j = 0; j < elements.length; j++) {\n                    var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n                    if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n                        tr = isTR ? elements[j] : elements[j].querySelector('tr');\n                    }\n                }\n            }\n            if (gObj.frozenRows && i < gObj.frozenRows) {\n                hdrfrag.appendChild(tr);\n            }\n            else {\n                frag.appendChild(tr);\n            }\n            this.rows.push(modelData[i]);\n            if (modelData[i].isDataRow) {\n                //detailrowvisible \n                var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n                if (td) {\n                    td.classList.add('e-detailrowvisible');\n                }\n                this.rowElements.push(tr);\n            }\n            this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n        }\n        if (gObj.frozenRows) {\n            hdrTbody = gObj.frozenColumns ? gObj.getHeaderContent().querySelector(idx === 0 ? '.e-frozenheader'\n                : '.e-movableheader').querySelector('tbody') : gObj.getHeaderTable().querySelector('tbody');\n            hdrTbody.innerHTML = '';\n            hdrTbody.appendChild(hdrfrag);\n        }\n        if (gObj.frozenRows && idx === 0 && cont.offsetHeight === Number(gObj.height)) {\n            cont.style.height = (cont.offsetHeight - hdrTbody.offsetHeight) + 'px';\n        }\n        if (gObj.frozenColumns && idx === 0) {\n            this.getPanel().firstChild.style.overflowY = 'hidden';\n        }\n        this.args = args;\n        getUpdateUsingRaf(function () {\n            remove(_this.tbody);\n            _this.tbody = createElement('tbody');\n            if (gObj.frozenColumns) {\n                _this.tbody.appendChild(frag);\n                if (idx === 0) {\n                    _this.isLoaded = false;\n                    fCont.querySelector('table').appendChild(_this.tbody);\n                }\n                else {\n                    if (_this.tbody.childElementCount < 1) {\n                        _this.tbody.appendChild(createElement('tr').appendChild(createElement('td')));\n                    }\n                    _this.isLoaded = true;\n                    mCont.querySelector('table').appendChild(_this.tbody);\n                    fCont.style.height = ((mCont.offsetHeight) - getScrollBarWidth()) + 'px';\n                    mCont.style.overflow = 'scroll';\n                }\n            }\n            else {\n                _this.appendContent(_this.tbody, frag, args);\n            }\n            if (gObj.frozenColumns && idx === 0) {\n                _this.refreshContentRows(args);\n            }\n        }, this.rafCallback(args));\n    };\n    ContentRender.prototype.appendContent = function (tbody, frag, args) {\n        tbody.appendChild(frag);\n        this.getTable().appendChild(tbody);\n    };\n    /**\n     * Get the content div element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Set the content div element of grid\n     * @param  {Element} panel\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the content table element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getTable = function () {\n        return this.contentTable;\n    };\n    /**\n     * Set the content table element of grid\n     * @param  {Element} table\n     */\n    ContentRender.prototype.setTable = function (table) {\n        this.contentTable = table;\n    };\n    /**\n     * Get the Row collection in the Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getRows = function () {\n        return this.rows;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getRowElements = function () {\n        return this.rowElements;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.setRowElements = function (elements) {\n        this.rowElements = elements;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    ContentRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    ContentRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Function to hide content table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    ContentRender.prototype.setVisible = function (columns) {\n        var rows = this.getRows();\n        var element;\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var tasks = [];\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            //used canSkip method to skip unwanted visible toggle operation. \n            if (this.canSkip(column, testRow, idx)) {\n                continue;\n            }\n            var displayVal = column.visible === true ? '' : 'none';\n            setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n        }\n        this.refreshContentRows({ requestType: 'refresh' });\n    };\n    ContentRender.prototype.colGroupRefresh = function () {\n        if (this.getColGroup()) {\n            var colGroup = this.getColGroup();\n            colGroup.innerHTML = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').innerHTML;\n            this.setColGroup(colGroup);\n        }\n    };\n    ContentRender.prototype.initializeContentDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    ContentRender.prototype.canSkip = function (column, row, index) {\n        /**\n         * Skip the toggle visiblity operation when one of the following success\n         * 1. Grid has empty records\n         * 2. column visible property is unchanged\n         * 3. cell`s isVisible property is same as column`s visible property.\n         */\n        return isNullOrUndefined(row) || //(1)\n            isNullOrUndefined(column.visible) || //(2)    \n            row.cells[index].visible === column.visible; //(3)\n    };\n    ContentRender.prototype.getModelGenerator = function () {\n        return this.generator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    };\n    ContentRender.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n    };\n    ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n        this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n            .forEach(function (row) { return row.isSelected = set; });\n    };\n    ContentRender.prototype.getRowByIndex = function (index) {\n        return this.parent.getDataRows()[index];\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement, setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { parentsUntil, wrap } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.querySelectorAll('.e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv');\n            var col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n            if (!isNullOrUndefined(col.headerTemplate)) {\n                if (col.headerTemplate.indexOf('#') !== -1) {\n                    visualElement.innerHTML = document.querySelector(col.headerTemplate).innerHTML.trim();\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n            }\n            else {\n                visualElement.textContent = headercelldiv ?\n                    gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid')).headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            if (element.querySelector('.e-headercelldiv')) {\n                _this.column = gObj.getColumnByUid(element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    return;\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.columnPositionChanged, this.refreshUI, this);\n    }\n    /**\n     * The function is used to render grid header div\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = createElement('div', { className: 'e-gridheader' });\n        var innerDiv = createElement('div', { className: 'e-headercontent' });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        this.parent.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid header table\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.e-table'));\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows });\n    };\n    /**\n     * Get the header content div element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     * @param  {Element} panel\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     * @param  {Element} table\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     * @return {Element[]}\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     * @return {Element}\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var table = this.createTable();\n        var innerDiv = this.getPanel().firstChild;\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function () {\n        var gObj = this.parent;\n        var columns = gObj.getColumns();\n        var table = createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n        var innerDiv = this.getPanel().firstChild;\n        var findHeaderRow = this.createHeaderContent();\n        var thead = findHeaderRow.thead;\n        var tbody = createElement('tbody', { className: this.parent.frozenRows ? '' : 'e-hide' });\n        var colGroup = createElement('colgroup');\n        var rowBody = createElement('tr');\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header);\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n                var cell = rows[i].cells[j];\n                bodyCell = createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        tbody.appendChild(rowBody);\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        table.appendChild(tbody);\n        this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n        return table;\n    };\n    HeaderRender.prototype.createHeaderContent = function () {\n        var gObj = this.parent;\n        var columns = gObj.getColumns();\n        var thead = createElement('thead');\n        var colHeader = createElement('tr', { className: 'e-columnheader' });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = this.getObjDepth();\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[i] = this.generateRow(i);\n            rows[i].cells = [];\n        }\n        rows = this.ensureColumns(rows);\n        rows = this.getHeaderCells(rows);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[i], columns);\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = createElement('col');\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = createElement('col');\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = createElement('col');\n            if (cols[i].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                rows[i].cells.push(this.generateCell({}, CellType.DetailHeader));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows) {\n        var column;\n        if (this.parent.frozenColumns) {\n            if (this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead')) {\n                column = this.parent.columns.slice(this.parent.frozenColumns, this.parent.columns.length);\n            }\n            else {\n                column = this.parent.columns.slice(0, this.parent.frozenColumns);\n            }\n        }\n        var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns()\n            : (this.parent.frozenColumns ? column : this.parent.columns);\n        for (var i = 0, len = cols.length; i < len; i++) {\n            rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1));\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol) {\n        var lastCol = isLastCol ? 'e-lastcell' : '';\n        if (!cols.columns) {\n            rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n        }\n        else {\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                rows[index].cells.push(new Cell({\n                    cellType: CellType.StackedHeader, column: cols, colSpan: colSpan\n                }));\n            }\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol);\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var rows = [].slice.call(this.getRows()); //NodeList -> Array        \n        var displayVal = '';\n        var idx;\n        var className;\n        var element;\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = this.parent.getNormalizedColumnIndex(column.uid);\n            if (column.visible === false) {\n                displayVal = 'none';\n            }\n            setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n            this.refreshUI();\n        }\n    };\n    /**\n     * Refresh the header of the Grid.\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var headerDiv = this.getPanel();\n        var table = this.getTable();\n        remove(this.getTable());\n        table.removeChild(table.firstChild);\n        table.removeChild(table.childNodes[0]);\n        var colGroup = createElement('colgroup');\n        var findHeaderRow = this.createHeaderContent();\n        this.rows = findHeaderRow.rows;\n        table.insertBefore(findHeaderRow.thead, table.firstChild);\n        this.updateColGroup(colGroup);\n        table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n        this.setTable(table);\n        this.appendContent(table);\n        this.parent.notify(events.colGroupRefresh, {});\n        this.widthService.setWidthToColumns();\n        this.initializeHeaderDrag();\n        var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            var gCells = [].slice.call(row.querySelectorAll('.e-grouptopleftcell'));\n            if (gCells.length) {\n                gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n            }\n        }\n        this.parent.notify(events.headerRefreshed, { rows: this.rows });\n        if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'header') {\n            wrap(rows, true);\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().firstChild.appendChild(table);\n    };\n    HeaderRender.prototype.getObjDepth = function () {\n        var max = 0;\n        var cols = this.parent.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var depth = this.checkDepth(cols[i], 0);\n            if (max < depth) {\n                max = depth;\n            }\n        }\n        return max + 1;\n    };\n    HeaderRender.prototype.checkDepth = function (col, index) {\n        if (col.columns) {\n            index++;\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                index = this.checkDepth(col.columns[i], index);\n            }\n        }\n        return index;\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[i], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n        for (var i = 0, len = headerRows.length; i < len; i++) {\n            var drag = new Draggable(headerRows[i], {\n                dragTarget: '.e-headercell',\n                distance: 5,\n                helper: this.helper,\n                dragStart: this.dragStart,\n                drag: this.drag,\n                dragStop: this.dragStop,\n                abort: '.e-rhandler'\n            });\n        }\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { doesImplementInterface, setStyleAndAttributes, appendChildren } from '../base/util';\nimport { CheckBox, createCheckBox } from '@syncfusion/ej2-buttons';\n/**\n * CellRenderer class which responsible for building cell content.\n * @hidden\n */\nvar CellRenderer = /** @class */ (function () {\n    function CellRenderer(parent, locator) {\n        this.element = createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        this.rowChkBox = createElement('input', { className: 'e-checkselect', attrs: { 'type': 'checkbox' } });\n        this.localizer = locator.getService('localization');\n        this.formatter = locator.getService('valueFormatter');\n        this.parent = parent;\n    }\n    /**\n     * Function to return the wrapper for the TD content\n     * @returns string\n     */\n    CellRenderer.prototype.getGui = function () {\n        return '';\n    };\n    /**\n     * Function to format the cell value.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.format = function (column, value, data) {\n        if (!isNullOrUndefined(column.format)) {\n            value = this.formatter.toView(value, column.getFormatter());\n        }\n        return isNullOrUndefined(value) ? '' : value.toString();\n    };\n    CellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n        var result;\n        if (cell.column.template) {\n            var literals = ['index'];\n            result = cell.column.getColumnTemplate()(extend({ 'index': attributes[literals[0]] }, data), this.parent, 'template');\n            appendChildren(node, result);\n            node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n                cell.column.headerText);\n            return false;\n        }\n        return true;\n    };\n    /**\n     * Function to invoke the custom formatter available in the column object.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n        if (!isNullOrUndefined(column.formatter)) {\n            if (doesImplementInterface(column.formatter, 'getValue')) {\n                var formatter = column.formatter;\n                value = new formatter().getValue(column, data);\n            }\n            else if (typeof column.formatter === 'function') {\n                value = column.formatter(column, data);\n            }\n            else {\n                value = column.formatter.getValue(column, data);\n            }\n        }\n        return value;\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.render = function (cell, data, attributes) {\n        return this.refreshCell(cell, data, attributes);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n        var node = this.refreshCell(cell, data, attributes);\n        td.innerHTML = '';\n        var elements = [].slice.call(node.childNodes);\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            td.appendChild(elem);\n        }\n    };\n    CellRenderer.prototype.refreshCell = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var column = cell.column;\n        //Prepare innerHtml\n        var innerHtml = this.getGui();\n        var value = this.getValue(column.field, data, column);\n        if (column.type === 'date' && !isNullOrUndefined(value)) {\n            value = new Date(value);\n        }\n        value = this.format(column, value, data);\n        innerHtml = value.toString();\n        if (column.type === 'boolean') {\n            if (column.displayAsCheckBox) {\n                node.classList.add('e-checkbox');\n                innerHtml = '<input type=\"checkbox\" disabled ' + '/>';\n            }\n            else {\n                var localeStr = (value !== 'true' && value !== 'false') ? null : value === 'true' ? 'True' : 'False';\n                innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n            }\n        }\n        var fromFormatter = this.invokeFormatter(column, value, data);\n        innerHtml = !isNullOrUndefined(column.formatter) ? isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n        node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n        if (this.evaluate(node, cell, data, attributes) && column.type !== 'checkbox') {\n            this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n        }\n        else if (column.type === 'checkbox') {\n            node.classList.add('e-gridchkbox');\n            node.setAttribute('aria-label', 'column header ' + cell.column.headerText);\n            if (this.parent.selectionSettings.persistSelection) {\n                value = value === 'true';\n            }\n            else {\n                value = false;\n            }\n            var checkWrap = createCheckBox(false, { checked: value, label: ' ' });\n            checkWrap.insertBefore(this.rowChkBox.cloneNode(), checkWrap.firstChild);\n            node.appendChild(checkWrap);\n        }\n        this.setAttributes(node, cell, attributes);\n        if (column.type === 'boolean') {\n            var obj = new CheckBox({\n                disabled: true,\n                checked: isNaN(parseInt(value, 10)) ? value === 'true' : parseInt(value, 10) > 0\n            });\n            obj.appendTo(node.firstElementChild);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n        if (property === void 0) { property = 'innerHTML'; }\n        node[property] = innerHtml;\n        return node;\n    };\n    /**\n     * @hidden\n     */\n    CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n        var column = cell.column;\n        this.buildAttributeFromCell(node, cell);\n        setStyleAndAttributes(node, attributes);\n        setStyleAndAttributes(node, cell.attributes);\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.textAlign) {\n            node.style.textAlign = column.textAlign;\n        }\n        if (column.clipMode === 'clip') {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'ellipsiswithtooltip') {\n            node.classList.add('e-ellipsistooltip');\n        }\n    };\n    CellRenderer.prototype.buildAttributeFromCell = function (node, cell) {\n        var attr = {};\n        var prop = { 'colindex': 'aria-colindex' };\n        var classes = [];\n        if (cell.colSpan) {\n            attr.colSpan = cell.colSpan;\n        }\n        if (cell.rowSpan) {\n            attr.rowSpan = cell.rowSpan;\n        }\n        if (cell.isTemplate) {\n            classes.push('e-templatecell');\n        }\n        if (cell.isSelected) {\n            classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n        }\n        if (!isNullOrUndefined(cell.index)) {\n            attr[prop.colindex] = cell.index;\n        }\n        if (!cell.visible) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(node, attr);\n    };\n    CellRenderer.prototype.getValue = function (field, data, column) {\n        return column.valueAccessor(column.field, data, column);\n    };\n    return CellRenderer;\n}());\nexport { CellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement, attributes } from '@syncfusion/ej2-base';\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { AriaService } from '../services/aria-service';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\n/**\n * HeaderCellRenderer class which responsible for building header cell content.\n * @hidden\n */\nvar HeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderCellRenderer, _super);\n    function HeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n        _this.ariaService = new AriaService();\n        _this.hTxtEle = createElement('span', { className: 'e-headertext' });\n        _this.sortEle = createElement('div', { className: 'e-sortfilterdiv e-icons' });\n        _this.gui = createElement('div');\n        _this.chkAllBox = createElement('input', { className: 'e-checkselectall', attrs: { 'type': 'checkbox' } });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    HeaderCellRenderer.prototype.getGui = function () {\n        return this.gui.cloneNode();\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var fltrMenuEle = createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Element} node\n     */\n    HeaderCellRenderer.prototype.refresh = function (cell, node) {\n        this.clean(node);\n        var fltrMenuEle = createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    HeaderCellRenderer.prototype.clean = function (node) {\n        node.innerHTML = '';\n    };\n    HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n        var column = cell.column;\n        var ariaAttr = {};\n        //Prepare innerHtml\n        var innerDIV = this.getGui();\n        attributes(innerDIV, {\n            'e-mappinguid': column.uid,\n            'class': 'e-headercelldiv'\n        });\n        if (column.type !== 'checkbox') {\n            var value = column.headerText;\n            var headerText = this.hTxtEle.cloneNode();\n            //TODO: Header Template support.\n            headerText[column.getDomSetter()] = value;\n            innerDIV.appendChild(headerText);\n        }\n        else {\n            column.editType = 'booleanedit';\n            var checkAllWrap = createCheckBox(false, { checked: false, label: ' ' });\n            checkAllWrap.insertBefore(this.chkAllBox.cloneNode(), checkAllWrap.firstChild);\n            innerDIV.appendChild(checkAllWrap);\n            innerDIV.classList.add('e-headerchkcelldiv');\n        }\n        this.buildAttributeFromCell(node, cell);\n        this.appendHtml(node, innerDIV);\n        node.appendChild(this.sortEle.cloneNode());\n        if ((this.parent.allowFiltering && this.parent.filterSettings.type !== 'filterbar') &&\n            (column.allowFiltering && !isNullOrUndefined(column.field)) &&\n            !(this.parent.showColumnMenu && column.showColumnMenu)) {\n            attributes(fltrMenuEle, {\n                'e-mappinguid': 'e-flmenu-' + column.uid,\n            });\n            node.classList.add('e-fltr-icon');\n            var matchFlColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n                for (var index = 0; index < this.parent.columns.length; index++) {\n                    for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n                        if (this.parent.filterSettings.columns[count].field === column.field) {\n                            fltrMenuEle.classList.add('e-filtered');\n                            matchFlColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.appendChild(fltrMenuEle.cloneNode());\n        }\n        if (cell.className) {\n            node.classList.add(cell.className);\n        }\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.allowSorting) {\n            ariaAttr.sort = 'none';\n        }\n        if (column.allowGrouping) {\n            ariaAttr.grabbed = false;\n        }\n        node = this.extendPrepareHeader(column, node);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            if (column.headerTemplate.indexOf('#') !== -1) {\n                innerDIV.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n            }\n            else {\n                innerDIV.innerHTML = column.headerTemplate;\n            }\n        }\n        this.ariaService.setOptions(node, ariaAttr);\n        if (!isNullOrUndefined(column.headerTextAlign) || !isNullOrUndefined(column.textAlign)) {\n            var alignment = column.headerTextAlign || column.textAlign;\n            innerDIV.style.textAlign = alignment;\n            if (alignment === 'right' || alignment === 'left') {\n                node.classList.add(alignment === 'right' ? 'e-rightalign' : 'e-leftalign');\n            }\n            else if (alignment === 'center') {\n                node.classList.add('e-centeralign');\n            }\n        }\n        if (column.clipMode === 'clip') {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'ellipsiswithtooltip') {\n            node.classList.add('e-ellipsistooltip');\n        }\n        node.setAttribute('aria-rowspan', (!isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n        node.setAttribute('aria-colspan', '1');\n        return node;\n    };\n    HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n        if (this.parent.showColumnMenu && column.showColumnMenu) {\n            var element = (createElement('div', { className: 'e-icons e-columnmenu' }));\n            var matchFilteredColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n                for (var i = 0; i < this.parent.columns.length; i++) {\n                    for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n                        if (this.parent.filterSettings.columns[j].field === column.field) {\n                            element.classList.add('e-filtered');\n                            matchFilteredColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.classList.add('e-fltr-icon');\n            node.appendChild(element);\n        }\n        if (this.parent.allowResizing) {\n            var handler = createElement('div');\n            handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return HeaderCellRenderer;\n}(CellRenderer));\nexport { HeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * StackedHeaderCellRenderer class which responsible for building stacked header cell content.\n * @hidden\n */\nvar StackedHeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(StackedHeaderCellRenderer, _super);\n    function StackedHeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TH', {\n            className: 'e-headercell e-stackedheadercell', attrs: {\n                role: 'columnheader',\n                tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var div = createElement('div', { className: 'e-stackedheadercelldiv' });\n        node.appendChild(div);\n        div.innerHTML = cell.column.headerText;\n        if (cell.column.toolTip) {\n            node.setAttribute('title', cell.column.toolTip);\n        }\n        if (!isNullOrUndefined(cell.column.textAlign)) {\n            div.style.textAlign = cell.column.textAlign;\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-colspan', cell.colSpan.toString());\n        node.setAttribute('aria-rowspan', '1');\n        return node;\n    };\n    return StackedHeaderCellRenderer;\n}(CellRenderer));\nexport { StackedHeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\n/**\n * IndentCellRenderer class which responsible for building group indent cell.\n * @hidden\n */\nvar IndentCellRenderer = /** @class */ (function (_super) {\n    __extends(IndentCellRenderer, _super);\n    function IndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TD', { className: 'e-indentcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    IndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        setStyleAndAttributes(node, cell.attributes);\n        return node;\n    };\n    return IndentCellRenderer;\n}(CellRenderer));\nexport { IndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren, templateCompiler } from '../base/util';\n/**\n * GroupCaptionCellRenderer class which responsible for building group caption cell.\n * @hidden\n */\nvar GroupCaptionCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionCellRenderer, _super);\n    function GroupCaptionCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TD', { className: 'e-groupcaption', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        var gObj = this.parent;\n        var result;\n        var helper = {};\n        var value = cell.column.enableGroupByFormat ? data.key :\n            this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n        if (!isNullOrUndefined(gObj.groupSettings.captionTemplate)) {\n            if (gObj.groupSettings.captionTemplate.indexOf('#') !== -1) {\n                result = templateCompiler(document.querySelector(gObj.groupSettings.captionTemplate).innerHTML.trim())(data);\n            }\n            else {\n                result = templateCompiler(gObj.groupSettings.captionTemplate)(data);\n            }\n            appendChildren(node, result);\n        }\n        else {\n            node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n                (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n        return node;\n    };\n    return GroupCaptionCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionCellRenderer };\n/**\n * GroupCaptionEmptyCellRenderer class which responsible for building group caption empty cell.\n * @hidden\n */\nvar GroupCaptionEmptyCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionEmptyCellRenderer, _super);\n    function GroupCaptionEmptyCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TD', { className: 'e-groupcaption' });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.innerHTML = '&nbsp;';\n        node.setAttribute('colspan', cell.colSpan.toString());\n        return node;\n    };\n    return GroupCaptionEmptyCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionEmptyCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { IndentCellRenderer } from './indent-cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar ExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(ExpandCellRenderer, _super);\n    function ExpandCellRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Function to render the expand cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    ExpandCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.className = 'e-recordplusexpand';\n        node.setAttribute('ej-mappingname', data.field);\n        node.setAttribute('ej-mappingvalue', data.key);\n        node.setAttribute('aria-expanded', 'true');\n        node.setAttribute('tabindex', '-1');\n        node.appendChild(createElement('div', { className: 'e-icons e-gdiagonaldown e-icon-gdownarrow' }));\n        return node;\n    };\n    return ExpandCellRenderer;\n}(IndentCellRenderer));\nexport { ExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * HeaderIndentCellRenderer class which responsible for building header indent cell.\n * @hidden\n */\nvar HeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderIndentCellRenderer, _super);\n    function HeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TH', { className: 'e-grouptopleftcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '&nbsp;' }));\n        return node;\n    };\n    return HeaderIndentCellRenderer;\n}(CellRenderer));\nexport { HeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n * @hidden\n */\nvar DetailHeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailHeaderIndentCellRenderer, _super);\n    function DetailHeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TH', { className: 'e-detailheadercell' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return DetailHeaderIndentCellRenderer;\n}(CellRenderer));\nexport { DetailHeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar DetailExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailExpandCellRenderer, _super);\n    function DetailExpandCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TD', {\n            className: 'e-detailrowcollapse',\n            attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     */\n    DetailExpandCellRenderer.prototype.render = function () {\n        var node = this.element.cloneNode();\n        node.appendChild(createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n        return node;\n    };\n    return DetailExpandCellRenderer;\n}(CellRenderer));\nexport { DetailExpandCellRenderer };\n","import { createElement, remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, getValue, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, calculateAggregate, setFormatter } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function Render(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.data = new Data(parent, locator);\n        this.l10n = locator.getService('localization');\n        this.ariaService = this.locator.getService('ariaService');\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize grid header, content and footer rendering\n     */\n    Render.prototype.render = function () {\n        var gObj = this.parent;\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer.renderPanel();\n        this.contentRenderer.renderPanel();\n        if (gObj.getColumns().length) {\n            this.headerRenderer.renderTable();\n            this.contentRenderer.renderTable();\n            this.emptyRow(false);\n        }\n        this.refreshDataManager();\n    };\n    /**\n     * Refresh the entire Grid.\n     * @return {void}\n     */\n    Render.prototype.refresh = function (e) {\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        this.parent.notify(e.requestType + \"-begin\", e);\n        this.parent.trigger(events.actionBegin, e);\n        if (e.cancel) {\n            return;\n        }\n        this.refreshDataManager(e);\n    };\n    Render.prototype.refreshComplete = function (e) {\n        this.parent.trigger(events.actionComplete, e);\n    };\n    /**\n     * The function is used to refresh the dataManager\n     * @return {void}\n     */\n    Render.prototype.refreshDataManager = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        if (args.requestType !== 'virtualscroll') {\n            this.parent.showSpinner();\n        }\n        this.parent.isEdit = false;\n        this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n        var dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n        if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n            dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n        }\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n            .catch(function (e) { return _this.dataManagerFailure(e); });\n    };\n    Render.prototype.sendBulkRequest = function (args) {\n        var _this = this;\n        var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0]);\n        if (this.data.dataManager.dataSource.offline) {\n            this.refreshDataManager({ requestType: 'batchsave' });\n            return;\n        }\n        else {\n            promise.then(function (e) { return _this.dmSuccess(e, args); })\n                .catch(function (e) { return _this.dmFailure(e); });\n        }\n    };\n    Render.prototype.dmSuccess = function (e, args) {\n        this.dataManagerSuccess(e, args);\n    };\n    Render.prototype.dmFailure = function (e) {\n        this.dataManagerFailure(e);\n    };\n    /**\n     * Render empty row to Grid which is used at the time to represent to no records.\n     * @return {void}\n     * @hidden\n     */\n    Render.prototype.renderEmptyRow = function () {\n        this.emptyRow(true);\n    };\n    Render.prototype.emptyRow = function (isTrigger) {\n        var gObj = this.parent;\n        var tbody = this.contentRenderer.getTable().querySelector('tbody');\n        var tr;\n        remove(tbody);\n        tbody = createElement('tbody');\n        tr = createElement('tr', { className: 'e-emptyrow' });\n        tr.appendChild(createElement('td', {\n            innerHTML: this.l10n.getConstant('EmptyRecord'),\n            attrs: { colspan: gObj.getColumns().length.toString() }\n        }));\n        tbody.appendChild(tr);\n        this.contentRenderer.renderEmpty(tbody);\n        if (isTrigger) {\n            this.parent.trigger(events.dataBound, {});\n            this.parent.notify(events.onEmpty, { rows: [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })] });\n        }\n    };\n    Render.prototype.updateColumnType = function (record) {\n        var columns = this.parent.getColumns();\n        var value;\n        var data = record && record.items ? record.items[0] : record;\n        var fmtr = this.locator.getService('valueFormatter');\n        for (var i = 0, len = columns.length; i < len; i++) {\n            value = getValue(columns[i].field || '', data);\n            if (!isNullOrUndefined(value)) {\n                this.isColTypeDef = true;\n                if (!columns[i].type) {\n                    columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n                        value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n                }\n            }\n            else {\n                columns[i].type = columns[i].type || null;\n            }\n            var valueFormatter = new ValueFormatter();\n            if (columns[i].format && (columns[i].format.skeleton || columns[i].format.format)) {\n                columns[i].setFormatter(valueFormatter.getFormatFunction(columns[i].format));\n                columns[i].setParser(valueFormatter.getParserFunction(columns[i].format));\n            }\n            if (typeof (columns[i].format) === 'string') {\n                setFormatter(this.locator, columns[i]);\n            }\n            else if (!columns[i].format && columns[i].type === 'number') {\n                columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n            }\n        }\n    };\n    Render.prototype.dataManagerSuccess = function (e, args) {\n        var gObj = this.parent;\n        gObj.trigger(events.beforeDataBound, e);\n        var len = Object.keys(e.result).length;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.notify(events.tooltipDestroy, {});\n        gObj.currentViewData = e.result;\n        if (!len && e.count && gObj.allowPaging) {\n            gObj.pageSettings.currentPage = Math.ceil(e.count / gObj.pageSettings.pageSize);\n            gObj.dataBind();\n            return;\n        }\n        if (!gObj.getColumns().length && len) {\n            this.updatesOnInitialRender(e);\n        }\n        if (!this.isColTypeDef) {\n            this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n        }\n        this.parent.notify(events.dataReady, extend({ count: e.count, result: e.result, aggregates: e.aggregates }, args));\n        if (gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping')) {\n            this.headerRenderer.refreshUI();\n        }\n        if (len) {\n            this.contentRenderer.refreshContentRows(args);\n        }\n        else {\n            if (!gObj.getColumns().length) {\n                gObj.element.innerHTML = '';\n                alert(this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n                return;\n            }\n            this.contentRenderer.setRowElements([]);\n            this.renderEmptyRow();\n            if (args) {\n                var action = (args.requestType || '').toLowerCase() + '-complete';\n                this.parent.notify(action, args);\n            }\n            this.parent.hideSpinner();\n        }\n    };\n    Render.prototype.dataManagerFailure = function (e) {\n        this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.currentViewData = [];\n        this.renderEmptyRow();\n        this.parent.hideSpinner();\n    };\n    Render.prototype.updatesOnInitialRender = function (e) {\n        this.buildColumns(e.result[0]);\n        prepareColumns(this.parent.columns);\n        this.headerRenderer.renderTable();\n        this.contentRenderer.renderTable();\n        this.parent.notify(events.autoCol, {});\n    };\n    Render.prototype.buildColumns = function (record) {\n        var columns = Object.keys(record);\n        var cols = [];\n        for (var i = 0, len = columns.length; i < len; i++) {\n            cols[i] = { 'field': columns[i] };\n            if (this.parent.enableColumnVirtualization) {\n                cols[i].width = !isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n            }\n        }\n        this.parent.columns = cols;\n    };\n    Render.prototype.instantiateRenderer = function () {\n        this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n        this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        var cellrender = this.locator.getService('cellRendererFactory');\n        cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n    };\n    Render.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.refreshComplete, this.refreshComplete, this);\n        this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n    };\n    /** @hidden */\n    Render.prototype.validateGroupRecords = function (e) {\n        var _this = this;\n        var index = e.result.length - 1;\n        if (index < 0) {\n            return Promise.resolve(e);\n        }\n        var group0 = e.result[0];\n        var groupN = e.result[index];\n        var predicate = [];\n        var addWhere = function (input) {\n            [group0, groupN].forEach(function (group) {\n                return predicate.push(new Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n            });\n            input.where(Predicate.or(predicate));\n        };\n        var query = new Query();\n        addWhere(query);\n        var curDm = new DataManager(e.result);\n        var curFilter = curDm.executeLocal(query);\n        var newQuery = this.data.generateQuery(true);\n        var rPredicate = [];\n        if (this.data.isRemote()) {\n            [group0, groupN].forEach(function (group) {\n                return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n            });\n            newQuery.where(Predicate.or(rPredicate));\n        }\n        else {\n            addWhere(newQuery);\n        }\n        var deferred = new Deferred();\n        this.data.getData({}, newQuery).then(function (r) {\n            _this.updateGroupInfo(curFilter, r.result);\n            deferred.resolve(e);\n        }).catch(function (e) { return deferred.reject(e); });\n        return deferred.promise;\n    };\n    Render.prototype.getPredicate = function (key, operator, value) {\n        if (value instanceof Date) {\n            return this.data.getDatePredicate({ field: key, operator: operator, value: value });\n        }\n        return new Predicate(key, operator, value);\n    };\n    Render.prototype.updateGroupInfo = function (current, untouched) {\n        var _this = this;\n        var dm = new DataManager(untouched);\n        current.forEach(function (element, index, array) {\n            var uGroup = dm.executeLocal(new Query()\n                .where(new Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n            element.count = uGroup.count;\n            var itemGroup = element.items;\n            var uGroupItem = uGroup.items;\n            if (itemGroup.GroupGuid) {\n                element.items = _this.updateGroupInfo(element.items, uGroup.items);\n            }\n            _this.parent.aggregates.forEach(function (row) {\n                return row.columns.forEach(function (column) {\n                    var types = column.type instanceof Array ? column.type : [column.type];\n                    types.forEach(function (type) {\n                        var key = column.field + ' - ' + type;\n                        element.aggregates[key] = calculateAggregate(type, itemGroup.level ? uGroupItem.records : uGroup.items, column);\n                    });\n                });\n            });\n        });\n        return current;\n    };\n    return Render;\n}());\nexport { Render };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\n/**\n * CellRendererFactory\n * @hidden\n */\nvar CellRendererFactory = /** @class */ (function () {\n    function CellRendererFactory() {\n        this.cellRenderMap = {};\n    }\n    CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            this.cellRenderMap[name] = type;\n        }\n    };\n    CellRendererFactory.prototype.getCellRenderer = function (name) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            throw \"The cellRenderer \" + name + \" is not found\";\n        }\n        else {\n            return this.cellRenderMap[name];\n        }\n    };\n    return CellRendererFactory;\n}());\nexport { CellRendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * ServiceLocator\n * @hidden\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[name])) {\n            this.services[name] = type;\n        }\n    };\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[name])) {\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[name];\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n * @hidden\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            this.rendererMap[rName] = type;\n        }\n    };\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined, select } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { columnWidthChanged } from '../base/constant';\nimport { Column } from '../models/column';\n/**\n * ColumnWidthService\n * @hidden\n */\nvar ColumnWidthService = /** @class */ (function () {\n    function ColumnWidthService(parent) {\n        this.parent = parent;\n    }\n    ColumnWidthService.prototype.setWidthToColumns = function () {\n        var _this = this;\n        var i = 0;\n        var indexes = this.parent.getColumnIndexesInView();\n        var wFlag = true;\n        if (this.parent.allowGrouping) {\n            for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    wFlag = false;\n                    continue;\n                }\n                this.setColumnWidth(new Column({ width: '30px' }), i);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n        }\n        this.parent.getColumns().forEach(function (column, index) {\n            _this.setColumnWidth(column, wFlag ? undefined : index);\n        });\n    };\n    ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n        var columnIndex = isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n        var cWidth = this.getWidth(column);\n        if (cWidth !== null) {\n            this.setWidth(cWidth, columnIndex);\n            if (this.parent.allowResizing && module === 'resize') {\n                this.setWidthToTable();\n            }\n            this.parent.notify(columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n        }\n    };\n    ColumnWidthService.prototype.setWidth = function (width, index) {\n        var header = this.parent.getHeaderTable();\n        var content = this.parent.getContentTable();\n        var fWidth = formatUnit(width);\n        var headerCol;\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        if (this.parent.frozenColumns && index >= this.parent.frozenColumns && mHdr && mHdr.querySelector('colgroup')) {\n            headerCol = mHdr.querySelector('colgroup').children[index - this.parent.frozenColumns];\n        }\n        else {\n            headerCol = header.querySelector('colgroup').children[index];\n        }\n        if (headerCol) {\n            headerCol.style.width = fWidth;\n        }\n        var contentCol;\n        if (this.parent.frozenColumns && index >= this.parent.frozenColumns) {\n            contentCol = this.parent.getContent().querySelector('.e-movablecontent')\n                .querySelector('colgroup').children[index - this.parent.frozenColumns];\n        }\n        else {\n            contentCol = content.querySelector('colgroup').children[index];\n        }\n        if (contentCol) {\n            contentCol.style.width = fWidth;\n        }\n        var edit = content.querySelector('.e-table.e-inline-edit');\n        if (edit) {\n            edit.querySelector('colgroup').children[index].style.width = fWidth;\n        }\n    };\n    ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n        var previous = this.getHeightFromDirection(element, 'previous');\n        var next = this.getHeightFromDirection(element, 'next');\n        return previous + next;\n    };\n    ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n        var sibling = element[direction + 'ElementSibling'];\n        var result = 0;\n        var classList = ['e-gridheader', 'e-gridfooter', 'e-groupdroparea', 'e-gridpager', 'e-toolbar'];\n        while (sibling) {\n            if (classList.some(function (value) { return sibling.classList.contains(value); })) {\n                result += sibling.offsetHeight;\n            }\n            sibling = sibling[direction + 'ElementSibling'];\n        }\n        return result;\n    };\n    ColumnWidthService.prototype.getWidth = function (column) {\n        if (isNullOrUndefined(column.width) && this.parent.allowResizing) {\n            column.width = 200;\n        }\n        if (!column.width) {\n            return null;\n        }\n        var width = parseInt(column.width.toString(), 10);\n        if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n            return column.minWidth;\n        }\n        else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n            return column.maxWidth;\n        }\n        else {\n            return column.width;\n        }\n    };\n    ColumnWidthService.prototype.getTableWidth = function (columns) {\n        var tWidth = 0;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            var cWidth = this.getWidth(column);\n            if (column.visible !== false && cWidth !== null) {\n                tWidth += parseInt(cWidth.toString(), 10);\n            }\n        }\n        return tWidth;\n    };\n    ColumnWidthService.prototype.setWidthToTable = function () {\n        var tWidth = null;\n        if (this.parent.frozenColumns) {\n            var freezeWidth = 0;\n            var colGrp = this.parent.getContentTable().querySelector('colgroup');\n            var mColGrp = select('.e-movablecontent');\n            for (var i = 0; i < this.parent.getHeaderTable().querySelector('.e-columnheader').children.length; i++) {\n                freezeWidth += parseInt(colGrp.children[i].style.width, 10);\n            }\n            tWidth = formatUnit(freezeWidth);\n            this.parent.getHeaderTable().style.width = tWidth;\n            this.parent.getContentTable().style.width = tWidth;\n            freezeWidth = 0;\n            for (var i = 0; i < select('.e-movableheader').querySelector('.e-columnheader').children.length; i++) {\n                freezeWidth += parseInt(mColGrp.children[0].querySelector('colgroup').children[i].style.width, 10);\n            }\n            tWidth = formatUnit(freezeWidth);\n            select('.e-movableheader').firstElementChild.style.width = tWidth;\n            select('.e-movablecontent').firstElementChild.style.width = tWidth;\n        }\n        else {\n            tWidth = formatUnit(this.getTableWidth(this.parent.getColumns()));\n            this.parent.getHeaderTable().style.width = tWidth;\n            this.parent.getContentTable().style.width = tWidth;\n        }\n        var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n        if (edit) {\n            edit.style.width = tWidth;\n        }\n    };\n    return ColumnWidthService;\n}());\nexport { ColumnWidthService };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, getValue, closest, isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport * as event from '../base/constant';\n/**\n * FocusStrategy class\n * @hidden\n */\nvar FocusStrategy = /** @class */ (function () {\n    function FocusStrategy(parent) {\n        this.currentInfo = {};\n        this.oneTime = true;\n        this.forget = true;\n        this.skipFocus = false;\n        this.prevIndexes = {};\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FocusStrategy.prototype.focusCheck = function (e) {\n        var target = e.target;\n        this.skipFocus = closest(target, 'e-pager') !== null;\n    };\n    FocusStrategy.prototype.onFocus = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.setActive(true);\n        var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n        this.getContent().matrix.select(current[0], current[1]);\n        if (this.skipFocus) {\n            this.focus();\n            this.skipFocus = false;\n        }\n    };\n    FocusStrategy.prototype.onClick = function (e, force) {\n        var isContent = !isNullOrUndefined(closest(e.target, '.e-gridcontent'));\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-filtermenudiv')) {\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: false, byClick: !isNullOrUndefined(e.target), clickArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel) {\n            return;\n        }\n        this.setActive(isContent);\n        var returnVal = this.getContent().onClick(e, force);\n        if (returnVal === false) {\n            return;\n        }\n        this.focus();\n    };\n    FocusStrategy.prototype.onKeyPress = function (e) {\n        if (this.skipOn(e)) {\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel) {\n            return;\n        }\n        var bValue = this.getContent().matrix.current;\n        this.currentInfo.outline = true;\n        this.swap = this.getContent().jump(e.action, bValue);\n        if (this.swap) {\n            var isHeader = this.header === this.getContent();\n            this.setActive(isHeader);\n            var rowInitVal = isHeader ? -1 : this.header.matrix.matrix.length;\n            var current = this.getContent().matrix.get(rowInitVal, bValue[1], [0, 0], e.action, this.getContent().validator());\n            this.getContent().matrix.current = [rowInitVal, current[1]];\n            this.prevIndexes = {};\n        }\n        e.preventDefault();\n        this.getContent().onKeyPress(e);\n        this.focus(e);\n    };\n    FocusStrategy.prototype.skipOn = function (e) {\n        var target = e.target;\n        if (!target) {\n            return false;\n        }\n        return (this.parent.editSettings.mode !== 'batch' && (this.parent.isEdit || ['insert', 'f2', 'delete'].indexOf(e.action) > -1)\n            || (closest(document.activeElement, '.e-filterbarcell') !== null && ['leftArrow', 'rightArrow'].indexOf(e.action) > -1)\n            || (closest(target, '.e-gridcontent') === null && closest(target, '.e-gridheader') === null)\n            || (e.action === 'space' && (!target.classList.contains('e-gridchkbox') && closest(target, '.e-gridchkbox') === null\n                && closest(target, '.e-headerchkcelldiv') === null)));\n    };\n    FocusStrategy.prototype.getFocusedElement = function () {\n        return this.currentInfo.elementToFocus;\n    };\n    FocusStrategy.prototype.getContent = function () {\n        return this.active || this.content;\n    };\n    FocusStrategy.prototype.setActive = function (content) {\n        this.active = content ? this.content : this.header;\n    };\n    FocusStrategy.prototype.setFocusedElement = function (element) {\n        var _this = this;\n        this.currentInfo.elementToFocus = element;\n        setTimeout(function () { return _this.currentInfo.elementToFocus.focus(); }, 0);\n    };\n    FocusStrategy.prototype.focus = function (e) {\n        this.removeFocus();\n        this.addFocus(this.getContent().getFocusInfo(), e);\n    };\n    FocusStrategy.prototype.removeFocus = function () {\n        if (!this.currentInfo.element) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focused', 'e-focus']);\n        this.currentInfo.elementToFocus.tabIndex = -1;\n    };\n    FocusStrategy.prototype.addFocus = function (info, e) {\n        this.currentInfo = info;\n        this.currentInfo.outline = info.outline && !isNullOrUndefined(e);\n        if (!info.element) {\n            return;\n        }\n        var isFocused = info.elementToFocus.classList.contains('e-focus');\n        if (isFocused) {\n            return;\n        }\n        if (this.currentInfo.outline) {\n            addClass([info.element], ['e-focused']);\n        }\n        addClass([info.elementToFocus], ['e-focus']);\n        info.element.tabIndex = 0;\n        if (!isFocused) {\n            this.setFocusedElement(info.elementToFocus);\n        }\n        this.parent.notify(event.cellFocused, {\n            element: info.elementToFocus,\n            parent: info.element,\n            indexes: this.getContent().matrix.current,\n            byKey: !isNullOrUndefined(e),\n            byClick: isNullOrUndefined(e),\n            keyArgs: e,\n            isJump: this.swap,\n            container: this.getContent().getInfo(e),\n            outline: !isNullOrUndefined(e)\n        });\n        var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];\n        this.prevIndexes = { rowIndex: rowIndex, cellIndex: cellIndex };\n    };\n    FocusStrategy.prototype.refreshMatrix = function (content) {\n        var _this = this;\n        return function (e) {\n            if (content && !_this.content) {\n                _this.content = new ContentFocus(_this.parent);\n            }\n            if (!content && !_this.header) {\n                _this.header = new HeaderFocus(_this.parent);\n            }\n            var cFocus = content ? _this.content : _this.header;\n            cFocus.matrix.generate(e.rows, cFocus.selector);\n            cFocus.generateRows(e.rows);\n            var actions = ['paging', 'grouping'];\n            if (e.args && actions.indexOf(e.args.requestType) > -1) {\n                _this.skipFocus = true;\n                _this.onFocus();\n            }\n        };\n    };\n    FocusStrategy.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed || this.parent.frozenColumns || this.parent.frozenRows) {\n            return;\n        }\n        EventHandler.add(this.parent.element, 'mousedown', this.focusCheck, this);\n        EventHandler.add(this.parent.element, 'focus', this.onFocus, this);\n        this.parent.on(event.keyPressed, this.onKeyPress, this);\n        this.parent.on(event.click, this.onClick, this);\n        this.parent.on(event.contentReady, this.refreshMatrix(true), this);\n        this.parent.on(event.headerRefreshed, this.refreshMatrix(), this);\n        this.parent.on('close-edit', this.restoreFocus, this);\n        ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.on(evt, _this.clearOutline, _this); });\n        ['sorting'].forEach(function (action) { return _this.parent.on(action + \"-complete\", _this.restoreFocus, _this); });\n        this.parent.on(event.batchAdd, this.refreshMatrix(true), this);\n        this.parent.on(event.batchDelete, this.refreshMatrix(true), this);\n        this.parent.on(event.detailDataBound, this.refreshMatrix(true), this);\n        this.parent.on(event.onEmpty, this.refreshMatrix(true), this);\n    };\n    FocusStrategy.prototype.removeEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, 'mousedown', this.focusCheck);\n        EventHandler.remove(this.parent.element, 'focus', this.onFocus);\n        this.parent.off(event.keyPressed, this.onKeyPress);\n        this.parent.off(event.click, this.onClick);\n        this.parent.off(event.contentReady, this.refreshMatrix(true));\n        this.parent.off(event.headerRefreshed, this.refreshMatrix());\n        this.parent.off('close-edit', this.restoreFocus);\n        ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.off(evt, _this.clearOutline); });\n        ['sorting'].forEach(function (action) { return _this.parent.off(action + \"-complete\", _this.restoreFocus); });\n        this.parent.off(event.batchAdd, this.refreshMatrix(true));\n        this.parent.off(event.batchDelete, this.refreshMatrix(true));\n        this.parent.off(event.detailDataBound, this.refreshMatrix(true));\n        this.parent.off(event.onEmpty, this.refreshMatrix(true));\n    };\n    FocusStrategy.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    FocusStrategy.prototype.restoreFocus = function () {\n        this.addFocus(this.getContent().getFocusInfo());\n    };\n    FocusStrategy.prototype.clearOutline = function () {\n        this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], 'downArrow', this.getContent().validator());\n        if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focus', 'e-focused']);\n    };\n    FocusStrategy.prototype.getPrevIndexes = function () {\n        var forget = this.forget;\n        this.forget = false;\n        return forget ? { rowIndex: null, cellIndex: null } : this.prevIndexes;\n    };\n    FocusStrategy.prototype.forgetPrevious = function () {\n        this.forget = true;\n    };\n    return FocusStrategy;\n}());\nexport { FocusStrategy };\n/**\n * Create matrix from row collection which act as mental model for cell navigation\n * @hidden\n */\nvar Matrix = /** @class */ (function () {\n    function Matrix() {\n        this.matrix = [];\n        this.current = [];\n    }\n    Matrix.prototype.set = function (rowIndex, columnIndex, allow) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.columns));\n        this.matrix[rowIndex] = this.matrix[rowIndex] || [];\n        this.matrix[rowIndex][columnIndex] = allow ? 1 : 0;\n    };\n    Matrix.prototype.get = function (rowIndex, columnIndex, navigator, action, validator) {\n        var tmp = columnIndex;\n        if (rowIndex + navigator[0] < 0) {\n            return [rowIndex, columnIndex];\n        }\n        rowIndex = Math.max(0, Math.min(rowIndex + navigator[0], this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex + navigator[1], this.matrix[rowIndex].length - 1));\n        var first = this.first(this.matrix[rowIndex], columnIndex, navigator, true, action);\n        columnIndex = first === null ? tmp : first; //console.log(`${rowIndex} ${columnIndex}`);\n        var val = getValue(rowIndex + \".\" + columnIndex, this.matrix);\n        return this.inValid(val) || !validator(rowIndex, columnIndex, action) ?\n            this.get(rowIndex, tmp, navigator, action, validator) : [rowIndex, columnIndex];\n    };\n    Matrix.prototype.first = function (vector, index, navigator, moveTo, action) {\n        if (((index < 0 || index === vector.length) && this.inValid(vector[index])\n            && (action !== 'upArrow' && action !== 'downArrow')) || !vector.some(function (v) { return v === 1; })) {\n            return null;\n        }\n        return !this.inValid(vector[index]) ? index :\n            this.first(vector, (['upArrow', 'downArrow', 'shiftUp', 'shiftDown'].indexOf(action) !== -1) ? moveTo ? 0 : ++index : index + navigator[1], navigator, false, action);\n    };\n    Matrix.prototype.select = function (rowIndex, columnIndex) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[rowIndex].length - 1));\n        this.current = [rowIndex, columnIndex];\n    };\n    Matrix.prototype.generate = function (rows, selector) {\n        var _this = this;\n        this.rows = rows.length - 1;\n        this.matrix = [];\n        rows.forEach(function (row, rIndex) {\n            var cells = row.cells.filter(function (c) { return c.isSpanned !== true; });\n            _this.columns = Math.max(cells.length - 1, _this.columns | 0);\n            cells.forEach(function (cell, cIndex) {\n                _this.set(rIndex, cIndex, selector(row, cell));\n            });\n        });\n        return this.matrix;\n    };\n    Matrix.prototype.inValid = function (value) {\n        return value === 0 || value === undefined;\n    };\n    return Matrix;\n}());\nexport { Matrix };\n/**\n * @hidden\n */\nvar ContentFocus = /** @class */ (function () {\n    function ContentFocus(parent) {\n        var _this = this;\n        this.matrix = new Matrix();\n        this.parent = parent;\n        this.keyActions = {\n            'rightArrow': [0, 1],\n            'tab': [0, 1],\n            'leftArrow': [0, -1],\n            'shiftTab': [0, -1],\n            'upArrow': [-1, 0],\n            'downArrow': [1, 0],\n            'shiftUp': [-1, 0],\n            'shiftDown': [1, 0],\n            'shiftRight': [0, 1],\n            'shiftLeft': [0, -1],\n            'enter': [1, 0],\n            'shiftEnter': [-1, 0]\n        };\n        this.indexesByKey = function (action) {\n            var opt = {\n                'home': [_this.matrix.current[0], -1, 0, 1],\n                'end': [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],\n                'ctrlHome': [0, -1, 0, 1],\n                'ctrlEnd': [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]\n            };\n            return opt[action] || null;\n        };\n    }\n    ContentFocus.prototype.onKeyPress = function (e) {\n        var navigator = this.keyActions[e.action];\n        var current = this.getCurrentFromAction(e.action, navigator, e.action in this.keyActions, e);\n        if (!current) {\n            return;\n        }\n        this.matrix.select(current[0], current[1]);\n    };\n    ContentFocus.prototype.getCurrentFromAction = function (action, navigator, isPresent, e) {\n        if (navigator === void 0) { navigator = [0, 0]; }\n        if (!isPresent && !this.indexesByKey(action)) {\n            return null;\n        }\n        if (!this.shouldFocusChange(e)) {\n            return this.matrix.current;\n        }\n        var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];\n        var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator());\n        return current;\n    };\n    ContentFocus.prototype.onClick = function (e, force) {\n        var target = e.target;\n        target = (target.classList.contains('e-rowcell') ? target : closest(target, 'td.e-rowcell'));\n        if (!target) {\n            return;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val) || (!force && oRowIndex === rowIndex && oCellIndex === cellIndex)) {\n            return false;\n        }\n        this.matrix.select(rowIndex, cellIndex);\n    };\n    ContentFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        this.matrix.current = [rowIndex, cellIndex];\n        info.element = this.parent.getContentTable()\n            .rows[rowIndex].cells[cellIndex];\n        info.elementToFocus = this.getFocusable(info.element);\n        info.outline = !info.element.classList.contains('e-detailcell');\n        return info;\n    };\n    ContentFocus.prototype.getFocusable = function (element) {\n        var child = [].slice\n            .call(element.querySelectorAll('button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])'));\n        /* Select the first focusable child element\n         * if no child found then select the cell itself.\n         */\n        return child.length ? child[0] : element;\n    };\n    ContentFocus.prototype.selector = function (row, cell) {\n        var types = [CellType.Expand, CellType.GroupCaption, CellType.CaptionSummary, CellType.GroupSummary];\n        return ((row.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate))\n            || (row.isDataRow && cell.cellType === CellType.DetailExpand)\n            || (!row.isDataRow && types.indexOf(cell.cellType) > -1)\n            || (cell.column && cell.column.type === 'checkbox'))\n            && !(row.edit === 'delete' && row.isDirty);\n    };\n    ContentFocus.prototype.jump = function (action, current) {\n        return action === 'upArrow' && current[0] === 0;\n    };\n    ContentFocus.prototype.generateRows = function (rows) {\n        //extend in headerFocus \n    };\n    ContentFocus.prototype.getInfo = function (e) {\n        var info = this.getFocusInfo();\n        var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n        var isData = info.element.classList.contains('e-rowcell');\n        var isSelectable = isData || (e && e.action !== 'enter' && (info.element.classList.contains('e-detailrowcollapse')\n            || info.element.classList.contains('e-detailrowexpand')));\n        var _b = [Math.min(parseInt(info.element.parentElement.getAttribute('aria-rowindex'), 10), rIndex),\n            Math.min(parseInt(info.element.getAttribute('aria-colindex'), 10), cIndex)], rowIndex = _b[0], cellIndex = _b[1];\n        return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable: isSelectable };\n    };\n    ContentFocus.prototype.validator = function () {\n        var table = this.parent.getContentTable();\n        return function (rowIndex, cellIndex, action) {\n            var cell = table.rows[rowIndex].cells[cellIndex];\n            if (action === 'enter' || action === 'shiftEnter') {\n                return cell.classList.contains('e-rowcell');\n            }\n            if ((action === 'shiftUp' || action === 'shiftDown') && cell.classList.contains('e-rowcell')) {\n                return true;\n            }\n            else if (action !== 'shiftUp' && action !== 'shiftDown') {\n                return cell.getBoundingClientRect().width !== 0;\n            }\n            return false;\n        };\n    };\n    ContentFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;\n        if (rIndex < 0 || cIndex < 0) {\n            return true;\n        }\n        var cell = this.parent.getContentTable().rows[rIndex].cells[cIndex];\n        return e.action === 'enter' || e.action === 'shiftEnter' ? cell.classList.contains('e-rowcell') : true;\n    };\n    return ContentFocus;\n}());\nexport { ContentFocus };\n/**\n * @hidden\n */\nvar HeaderFocus = /** @class */ (function (_super) {\n    __extends(HeaderFocus, _super);\n    function HeaderFocus(parent) {\n        return _super.call(this, parent) || this;\n    }\n    HeaderFocus.prototype.onClick = function (e) {\n        var target = e.target;\n        target = (target.classList.contains('e-headercell') ? target : closest(target, 'th'));\n        if (!target) {\n            return;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val)) {\n            return false;\n        }\n        this.matrix.select(target.parentElement.rowIndex, target.cellIndex);\n    };\n    HeaderFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        info.element = this.parent.getHeaderTable()\n            .rows[rowIndex].cells[cellIndex];\n        info.elementToFocus = this.getFocusable(info.element);\n        info.outline = !info.element.classList.contains('e-filterbarcell');\n        return info;\n    };\n    HeaderFocus.prototype.selector = function (row, cell) {\n        return (cell.visible && (cell.column.field !== undefined || cell.isTemplate)) || cell.column.type === 'checkbox';\n    };\n    HeaderFocus.prototype.jump = function (action, current) {\n        return action === 'downArrow' && current[0] === this.matrix.matrix.length - 1;\n    };\n    HeaderFocus.prototype.generateRows = function (rows) {\n        var _this = this;\n        var length = this.matrix.matrix.length;\n        if (this.parent.allowFiltering && this.parent.filterSettings.type === 'filterbar') {\n            this.matrix.rows = ++this.matrix.rows;\n            rows[0].cells.forEach(function (cell, cIndex) {\n                return _this.matrix.set(length, cIndex, cell.visible && cell.column.allowFiltering !== false);\n            });\n        }\n    };\n    HeaderFocus.prototype.getInfo = function () {\n        return { isContent: false, isHeader: true };\n    };\n    HeaderFocus.prototype.validator = function () {\n        return function () { return true; };\n    };\n    HeaderFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n        if (rIndex < 0 || cIndex < 0) {\n            return true;\n        }\n        var cell = this.parent.getHeaderTable().rows[rIndex].cells[cIndex];\n        return e.action === 'enter' ? !cell.classList.contains('e-headercell') : true;\n    };\n    return HeaderFocus;\n}(ContentFocus));\nexport { HeaderFocus };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the paging behavior of Grid.\n */\nvar PageSettings = /** @class */ (function (_super) {\n    __extends(PageSettings, _super);\n    function PageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(12)\n    ], PageSettings.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(8)\n    ], PageSettings.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], PageSettings.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property(null)\n    ], PageSettings.prototype, \"template\", void 0);\n    return PageSettings;\n}(ChildProperty));\nexport { PageSettings };\n","import { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, isUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { remove, createElement, closest } from '@syncfusion/ej2-base';\nimport { Query } from '@syncfusion/ej2-data';\nimport { setCssInGridPopUp, getPosition, parentsUntil, addRemoveActiveClasses, removeAddCboxClasses } from '../base/util';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\n/**\n * `Selection` module is used to handle cell and row selection.\n */\nvar Selection = /** @class */ (function () {\n    /**\n     * Constructor for the Grid selection module\n     * @hidden\n     */\n    function Selection(parent, selectionSettings, locator) {\n        //Internal variables       \n        /**\n         * @hidden\n         */\n        this.selectedRowIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRowCellIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRecords = [];\n        this.preventFocus = false;\n        this.isMultiShiftRequest = false;\n        this.isMultiCtrlRequest = false;\n        this.enableSelectMultiTouch = false;\n        this.persistSelection = false;\n        this.selectedRowState = {};\n        this.isBatchEdit = false;\n        this.prevKey = 0;\n        this.totalRecordsCount = 0;\n        this.isChkAll = false;\n        this.isUnChkAll = false;\n        this.chkAllCollec = [];\n        this.isCheckedOnAdd = false;\n        this.persistSelectedData = [];\n        this.selectionRequest = false;\n        this.parent = parent;\n        this.selectionSettings = selectionSettings;\n        this.factory = locator.getService('rendererFactory');\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    Selection.prototype.initializeSelection = function () {\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    /**\n     * The function used to trigger onActionBegin\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionBegin = function (args, type) {\n        this.parent.trigger(type, args);\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionComplete = function (args, type) {\n        this.parent.trigger(type, args);\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Selection.prototype.getModuleName = function () {\n        return 'selection';\n    };\n    /**\n     * To destroy the selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.destroy = function () {\n        this.hidePopUp();\n        this.clearSelection();\n        this.removeEventListener();\n        EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n    };\n    Selection.prototype.isEditing = function () {\n        return (this.parent.editSettings.mode === 'inline' || (this.parent.editSettings.mode === 'batch' &&\n            this.parent.editModule.formObj && !this.parent.editModule.formObj.validate())) &&\n            this.parent.isEdit && !this.persistSelection;\n    };\n    /**\n     * Selects a row by given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectRow = function (index, isToggle) {\n        var gObj = this.parent;\n        var selectedRow = gObj.getRowByIndex(index);\n        var selectData = gObj.getCurrentViewRecords()[index];\n        if (!this.isRowType() || !selectedRow || this.isEditing()) {\n            // if (this.isEditing()) {\n            //     gObj.selectedRowIndex = index;\n            // }\n            return;\n        }\n        var isRowSelected = selectedRow.hasAttribute('aria-selected');\n        isToggle = !isToggle ? isToggle : index === this.prevRowIndex && isRowSelected;\n        if (!isToggle) {\n            this.onActionBegin({\n                data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n                isShiftPressed: this.isMultiShiftRequest, row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n                previousRowIndex: this.prevRowIndex, target: this.target\n            }, events.rowSelecting);\n        }\n        this.clearRow();\n        if (!isToggle) {\n            this.updateRowSelection(selectedRow, index);\n            this.parent.selectedRowIndex = index;\n        }\n        this.updateRowProps(index);\n        if (!isToggle) {\n            this.onActionComplete({\n                data: selectData, rowIndex: index,\n                row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n                previousRowIndex: this.prevRowIndex, target: this.target\n            }, events.rowSelected);\n        }\n    };\n    /**\n     * Selects a range of rows from start and end row index.\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @return {void}\n     */\n    Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n        this.parent.selectedRowIndex = endIndex;\n    };\n    /**\n     * Selects a collection of rows by indexes.\n     * @param  {number[]} rowIndexes - Specifies the row indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectRows = function (rowIndexes) {\n        var gObj = this.parent;\n        var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n        var selectedData = gObj.getCurrentViewRecords()[rowIndexes[0]];\n        if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n            return;\n        }\n        this.onActionBegin({\n            rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n            prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n            data: selectedData\n        }, events.rowSelecting);\n        this.clearRow();\n        for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n            var rowIndex = rowIndexes_1[_i];\n            this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n        }\n        this.updateRowProps(rowIndexes[0]);\n        this.onActionComplete({\n            rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndexes[0], target: this.target,\n            prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n            data: selectedData\n        }, events.rowSelected);\n    };\n    /**\n     * Select rows with existing row selection by passing row indexes.\n     * @param  {number} startIndex - Specifies the row indexes.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addRowsToSelection = function (rowIndexes) {\n        var gObj = this.parent;\n        var selectedRow = gObj.getRowByIndex(rowIndexes[0]);\n        if (this.isSingleSel() || !this.isRowType() || this.isEditing()) {\n            return;\n        }\n        for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n            var rowIndex = rowIndexes_2[_i];\n            var data = gObj.getCurrentViewRecords()[rowIndex];\n            var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n            gObj.selectedRowIndex = rowIndex;\n            if (isUnSelected) {\n                this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n                this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n                this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n                selectedRow.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n                this.rowDeselect(events.rowDeselecting, [rowIndex], data, [selectedRow]);\n            }\n            else {\n                this.onActionBegin({\n                    data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n                    prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n                }, events.rowSelecting);\n                this.updateRowSelection(selectedRow, rowIndex);\n            }\n            this.updateRowProps(rowIndex);\n            if (!isUnSelected) {\n                this.onActionComplete({\n                    data: data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n                    prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex\n                }, events.rowSelected);\n            }\n        }\n    };\n    Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n        var indexes = [];\n        var _a = (startIndex < endIndex) ?\n            { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n        for (; i <= max; i++) {\n            indexes.push(i);\n        }\n        if (startIndex > endIndex) {\n            indexes.reverse();\n        }\n        return indexes;\n    };\n    Selection.prototype.clearRow = function () {\n        this.clearRowSelection();\n        this.selectedRowIndexes = [];\n        this.selectedRecords = [];\n        this.parent.selectedRowIndex = -1;\n        if (this.selectionSettings.type === 'single' && this.persistSelection) {\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.updateRowProps = function (startIndex) {\n        this.prevRowIndex = startIndex;\n        this.isRowSelected = this.selectedRowIndexes.length && true;\n    };\n    Selection.prototype.updatePersistCollection = function (selectedRow, chkState) {\n        if (this.persistSelection && !isNullOrUndefined(selectedRow)) {\n            var rowObj = this.parent.getRowObjectFromUID(selectedRow.getAttribute('data-uid'));\n            var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n            if (pKey === null) {\n                return;\n            }\n            rowObj.isSelected = chkState;\n            if (chkState) {\n                this.selectedRowState[pKey] = chkState;\n                if (this.selectionRequest && this.persistSelectedData.indexOf(rowObj.data) < 0) {\n                    this.persistSelectedData.push(rowObj.data);\n                }\n            }\n            else {\n                delete (this.selectedRowState[pKey]);\n                if (this.selectionRequest && this.persistSelectedData.indexOf(rowObj.data) >= 0) {\n                    this.persistSelectedData.splice(this.persistSelectedData.indexOf(rowObj.data), 1);\n                }\n            }\n        }\n    };\n    Selection.prototype.updateCheckBoxes = function (row, chkState) {\n        if (!isNullOrUndefined(row)) {\n            var chkBox = row.querySelector('.e-checkselect');\n            if (!isNullOrUndefined(chkBox)) {\n                removeAddCboxClasses(chkBox.nextElementSibling, chkState);\n                if (isNullOrUndefined(this.checkedTarget) || (!isNullOrUndefined(this.checkedTarget)\n                    && !this.checkedTarget.classList.contains('e-checkselectall'))) {\n                    this.setCheckAllState();\n                }\n            }\n        }\n    };\n    Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n        if (!selectedRow) {\n            return;\n        }\n        this.selectedRowIndexes.push(startIndex);\n        this.selectedRecords.push(selectedRow);\n        selectedRow.setAttribute('aria-selected', 'true');\n        this.updatePersistCollection(selectedRow, true);\n        this.updateCheckBoxes(selectedRow, true);\n        this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n        if (!this.preventFocus) {\n            var target = this.focus.getPrevIndexes().cellIndex ?\n                selectedRow.cells[this.focus.getPrevIndexes().cellIndex] :\n                selectedRow.querySelector('.e-selectionbackground:not(.e-hide)');\n            if (!target) {\n                return;\n            }\n            this.focus.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * Deselects the current selected rows and cells.\n     * @return {void}\n     */\n    Selection.prototype.clearSelection = function () {\n        if (!this.persistSelection || (this.persistSelection && !this.parent.isEdit) ||\n            (!isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains('e-checkselectall'))) {\n            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n            if (span.classList.contains('e-rowselect')) {\n                span.classList.remove('e-spanclicked');\n            }\n            this.clearRowSelection();\n            this.clearCellSelection();\n            this.enableSelectMultiTouch = false;\n        }\n    };\n    /**\n     * Deselects the current selected rows.\n     * @return {void}\n     */\n    Selection.prototype.clearRowSelection = function () {\n        if (this.isRowSelected) {\n            var rows = this.parent.getDataRows();\n            var data = [];\n            var row = [];\n            var rowIndex = [];\n            var currentViewData = this.parent.getCurrentViewRecords();\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                data.push(currentViewData[this.selectedRowIndexes[i]]);\n                row.push(this.parent.getRows()[this.selectedRowIndexes[i]]);\n                rowIndex.push(this.selectedRowIndexes[i]);\n            }\n            this.rowDeselect(events.rowDeselecting, rowIndex, data, row);\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var row_1 = this.parent.getRowByIndex(this.selectedRowIndexes[i]);\n                if (row_1) {\n                    row_1.removeAttribute('aria-selected');\n                }\n                this.addRemoveClassesForRow(row_1, false, true, 'e-selectionbackground', 'e-active');\n                this.updatePersistCollection(row_1, false);\n                this.updateCheckBoxes(row_1);\n            }\n            this.selectedRowIndexes = [];\n            this.selectedRecords = [];\n            this.isRowSelected = false;\n            this.parent.selectedRowIndex = undefined;\n            this.rowDeselect(events.rowDeselected, rowIndex, data, row);\n        }\n    };\n    Selection.prototype.rowDeselect = function (type, rowIndex, data, row) {\n        this.updatePersistCollection(row[0], false);\n        this.parent.trigger(type, {\n            rowIndex: rowIndex, data: data, row: row\n        });\n        this.updateCheckBoxes(row[0]);\n    };\n    /**\n     * Selects a cell by given index.\n     * @param  {IIndex} cellIndex - Defines the row and column index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectCell = function (cellIndex, isToggle) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n        this.currentIndex = cellIndex.rowIndex;\n        var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n        if (!this.isCellType() || !selectedCell || this.isEditing()) {\n            return;\n        }\n        var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n        isToggle = !isToggle ? isToggle : !(!isUndefined(this.prevCIdxs) &&\n            cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n            isCellSelected);\n        if (isToggle) {\n            this.onActionBegin({\n                data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n                previousRowCell: this.prevECIdxs ?\n                    gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n            }, events.cellSelecting);\n        }\n        this.clearCell();\n        if (isToggle) {\n            this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n        }\n        this.updateCellProps(cellIndex, cellIndex);\n        if (isToggle) {\n            this.onActionComplete({\n                data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n                previousRowCell: this.prevECIdxs ?\n                    gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n            }, events.cellSelected);\n        }\n    };\n    /**\n     * Selects a range of cells from start and end index.\n     * @param  {IIndex} startIndex - Specifies the row and column index of start index.\n     * @param  {IIndex} endIndex - Specifies the row and column index of end index.\n     * @return {void}\n     */\n    Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n        var min;\n        var max;\n        var stIndex = startIndex;\n        var edIndex = endIndex = endIndex ? endIndex : startIndex;\n        var cellIndexes;\n        this.currentIndex = startIndex.rowIndex;\n        var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        this.onActionBegin({\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n            previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelecting);\n        this.clearCell();\n        if (startIndex.rowIndex > endIndex.rowIndex) {\n            var temp = startIndex;\n            startIndex = endIndex;\n            endIndex = temp;\n        }\n        for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n            if (this.selectionSettings.cellSelectionMode !== 'box') {\n                min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n                max = i === endIndex.rowIndex ? (endIndex.cellIndex) : this.getLastColIndex(i);\n            }\n            else {\n                min = startIndex.cellIndex;\n                max = endIndex.cellIndex;\n            }\n            cellIndexes = [];\n            for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n                selectedCell = gObj.getCellFromIndex(i, j);\n                if (!selectedCell) {\n                    continue;\n                }\n                cellIndexes.push(j);\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n            }\n            this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n        }\n        this.updateCellProps(stIndex, edIndex);\n        this.onActionComplete({\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n            previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelected);\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     * @param  {{ rowIndex: number, cellIndexes: number[] }[]} rowCellIndexes - Specifies the row and column indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectCells = function (rowCellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n        this.currentIndex = rowCellIndexes[0].rowIndex;\n        var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        this.onActionBegin({\n            data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n            currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n            isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n            previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelecting);\n        for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n            for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n                selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                if (!selectedCell) {\n                    continue;\n                }\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n                this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n            }\n        }\n        this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n        this.onActionComplete({\n            data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n            currentCell: selectedCell,\n            previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n            previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelected);\n    };\n    /**\n     * Select cells with existing cell selection by passing row and column index.\n     * @param  {IIndex} startIndex - Defines the collection of row and column index.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addCellsToSelection = function (cellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = gObj.getCellFromIndex(cellIndexes[0].rowIndex, this.getColIndex(cellIndexes[0].rowIndex, cellIndexes[0].cellIndex));\n        var index;\n        this.currentIndex = cellIndexes[0].rowIndex;\n        var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n            var cellIndex = cellIndexes_1[_i];\n            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n                if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n                    index = i;\n                    break;\n                }\n            }\n            var args = {\n                data: selectedData, cellIndex: cellIndexes[0],\n                isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n                previousRowCell: this.prevECIdxs ?\n                    gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n            };\n            var isUnSelected = index > -1;\n            if (isUnSelected) {\n                var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n                if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n                    this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n                    selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n                    selectedCell.classList.remove('e-cellselectionbackground');\n                    selectedCell.removeAttribute('aria-selected');\n                    this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell]);\n                }\n                else {\n                    isUnSelected = false;\n                    this.onActionBegin(args, events.cellSelecting);\n                    this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n                    this.updateCellSelection(selectedCell);\n                    this.addAttribute(selectedCell);\n                }\n            }\n            else {\n                this.onActionBegin(args, events.cellSelecting);\n                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            this.updateCellProps(cellIndex, cellIndex);\n            if (!isUnSelected) {\n                this.onActionComplete({\n                    data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n                    previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n                        undefined, previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes\n                }, events.cellSelected);\n            }\n        }\n    };\n    Selection.prototype.getColIndex = function (rowIndex, index) {\n        var cells = this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n            if (colIndex === index) {\n                return m;\n            }\n        }\n        return -1;\n    };\n    Selection.prototype.getLastColIndex = function (rowIndex) {\n        var cells = this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        return parseInt(cells[cells.length - 1].getAttribute('aria-colindex'), 10);\n    };\n    Selection.prototype.clearCell = function () {\n        this.clearCellSelection();\n    };\n    Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells) {\n        if (cells[0] && cells[0].classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(cells[0], 'tr'));\n        }\n        this.parent.trigger(type, {\n            cells: cells, data: data, cellIndexes: cellIndexes\n        });\n    };\n    Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n        if (!isNullOrUndefined(rowIndex)) {\n            this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        selectedCell.classList.add('e-cellselectionbackground');\n        if (selectedCell.classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(selectedCell, 'tr'), true);\n        }\n        this.addAttribute(selectedCell);\n    };\n    Selection.prototype.addAttribute = function (cell) {\n        this.target = cell;\n        if (!isNullOrUndefined(cell)) {\n            cell.setAttribute('aria-selected', 'true');\n            if (!this.preventFocus) {\n                this.focus.onClick({ target: cell }, true);\n            }\n        }\n    };\n    Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n        this.prevCIdxs = startIndex;\n        this.prevECIdxs = endIndex;\n        this.isCellSelected = this.selectedRowCellIndexes.length && true;\n    };\n    Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n        var isRowAvail;\n        var index;\n        for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n            if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n                isRowAvail = true;\n                index = i;\n                break;\n            }\n        }\n        if (isRowAvail) {\n            if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n                this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n            }\n        }\n        else {\n            this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n        }\n    };\n    /**\n     * Deselects the current selected cells.\n     * @return {void}\n     */\n    Selection.prototype.clearCellSelection = function () {\n        if (this.isCellSelected) {\n            var gObj = this.parent;\n            var selectedCells = this.getSelectedCellsElement();\n            var rowCell = this.selectedRowCellIndexes;\n            var data = [];\n            var cells = [];\n            var currentViewData = gObj.getCurrentViewRecords();\n            for (var i = 0, len = rowCell.length; i < len; i++) {\n                data.push(currentViewData[rowCell[i].rowIndex]);\n                for (var j = 0, cLen = rowCell.length; j < cLen; j++) {\n                    cells.push(this.parent.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                }\n            }\n            this.cellDeselect(events.cellDeselecting, rowCell, data, cells);\n            for (var i = 0, len = selectedCells.length; i < len; i++) {\n                selectedCells[i].classList.remove('e-cellselectionbackground');\n                selectedCells[i].removeAttribute('aria-selected');\n            }\n            this.selectedRowCellIndexes = [];\n            this.isCellSelected = false;\n            this.cellDeselect(events.cellDeselected, rowCell, data, cells);\n        }\n    };\n    Selection.prototype.getSelectedCellsElement = function () {\n        var rows = this.parent.getDataRows();\n        var cells = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n        }\n        return cells;\n    };\n    Selection.prototype.mouseMoveHandler = function (e) {\n        e.preventDefault();\n        var gBRect = this.parent.element.getBoundingClientRect();\n        var x1 = this.x;\n        var y1 = this.y;\n        var position = getPosition(e);\n        var x2 = position.x - gBRect.left;\n        var y2 = position.y - gBRect.top;\n        var tmp;\n        var target = closest(e.target, 'tr');\n        this.isDragged = true;\n        if (!target) {\n            target = closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n        }\n        if (x1 > x2) {\n            tmp = x2;\n            x2 = x1;\n            x1 = tmp;\n        }\n        if (y1 > y2) {\n            tmp = y2;\n            y2 = y1;\n            y1 = tmp;\n        }\n        this.element.style.left = x1 + 'px';\n        this.element.style.top = y1 + 'px';\n        this.element.style.width = x2 - x1 + 'px';\n        this.element.style.height = y2 - y1 + 'px';\n        if (target && !e.ctrlKey && !e.shiftKey) {\n            var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n            this.selectRowsByRange(this.startIndex, rowIndex);\n        }\n    };\n    Selection.prototype.mouseUpHandler = function (e) {\n        document.body.classList.remove('e-disableuserselect');\n        remove(this.element);\n        EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n        this.isDragged = false;\n    };\n    Selection.prototype.mouseDownHandler = function (e) {\n        var target = e.target;\n        var gridElement = parentsUntil(target, 'e-grid');\n        if (gridElement && gridElement.id !== this.parent.element.id) {\n            return;\n        }\n        if (e.shiftKey || e.ctrlKey) {\n            e.preventDefault();\n        }\n        if (this.parent.allowRowDragAndDrop && target.classList.contains('e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n            if (!this.isRowType() || this.isSingleSel() || closest(target, 'td').classList.contains('e-selectionbackground')) {\n                this.isDragged = false;\n                return;\n            }\n            document.body.classList.add('e-disableuserselect');\n            var tr = closest(e.target, 'tr');\n            var gBRect = this.parent.element.getBoundingClientRect();\n            var postion = getPosition(e);\n            this.startIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n            this.x = postion.x - gBRect.left;\n            this.y = postion.y - gBRect.top;\n            this.element = createElement('div', { className: 'e-griddragarea' });\n            this.parent.getContent().appendChild(this.element);\n            EventHandler.add(this.parent.getContent(), 'mousemove', this.mouseMoveHandler, this);\n            EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n        }\n    };\n    Selection.prototype.clearSelAfterRefresh = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.persistSelection) {\n            this.clearSelection();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeSelection, this);\n        this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.parent.on(events.dataReady, this.dataReady, this);\n        this.parent.on(events.dataReady, this.clearSelAfterRefresh, this);\n        this.parent.on(events.columnPositionChanged, this.clearSelection, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.addEventListener(events.dataBound, this.onDataBound.bind(this));\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.on(events.rowsRemoved, this.rowsRemoved, this);\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.initializeSelection);\n        this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n        this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.off(events.dataReady, this.dataReady);\n        this.parent.off(events.dataReady, this.clearSelAfterRefresh);\n        this.parent.off(events.columnPositionChanged, this.clearSelection);\n        this.parent.removeEventListener(events.dataBound, this.onDataBound);\n        this.parent.removeEventListener(events.actionBegin, this.actionBegin);\n        this.parent.removeEventListener(events.actionComplete, this.actionComplete);\n        this.parent.off(events.rowsRemoved, this.rowsRemoved);\n    };\n    Selection.prototype.rowsRemoved = function (e) {\n        for (var i = 0; i < e.records.length; i++) {\n            delete (this.selectedRowState[e.records[i][this.primaryKey]]);\n            --this.totalRecordsCount;\n        }\n        this.setCheckAllState();\n    };\n    ;\n    Selection.prototype.dataReady = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.persistSelection) {\n            this.clearSelection();\n        }\n    };\n    ;\n    Selection.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        if (!isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'single') {\n            if (this.selectedRowCellIndexes.length > 1) {\n                this.clearCellSelection();\n            }\n            if (this.selectedRowIndexes.length > 1) {\n                this.clearRowSelection();\n            }\n            this.enableSelectMultiTouch = false;\n            this.hidePopUp();\n        }\n        if (!isNullOrUndefined(e.properties.mode) ||\n            !isNullOrUndefined(e.properties.cellSelectionMode)) {\n            this.clearSelection();\n        }\n        this.checkBoxSelectionChanged();\n    };\n    Selection.prototype.hidePopUp = function () {\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.selectRow(this.parent.selectedRowIndex);\n        this.checkBoxSelectionChanged();\n    };\n    Selection.prototype.checkBoxSelectionChanged = function () {\n        var isCheckColumn = false;\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.type === 'checkbox') {\n                this.isChkSelection = true;\n                this.parent.selectionSettings.type = 'multiple';\n                this.chkField = col.field;\n                this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n                if (isNullOrUndefined(this.totalRecordsCount)) {\n                    this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n                }\n                this.chkAllBox = this.parent.element.querySelector('.e-checkselectall');\n                this.chkAllObj = this.chkAllBox;\n                isCheckColumn = true;\n                this.parent.element.classList.add('e-checkboxselection');\n                break;\n            }\n        }\n        if (!isCheckColumn) {\n            this.isChkSelection = false;\n            this.chkField = '';\n            this.chkAllBox = this.chkAllObj = null;\n            this.parent.element.classList.remove('e-checkboxselection');\n        }\n        if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {\n            this.persistSelection = true;\n            this.parent.element.classList.add('e-persistselection');\n            this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n            if (!this.parent.enableVirtualization && this.chkField && Object.keys(this.selectedRowState).length === 0) {\n                var data = this.parent.getDataModule();\n                var query = new Query().where(this.chkField, 'equal', true);\n                var dataManager = data.getData({}, query);\n                var proxy_1 = this;\n                this.parent.showSpinner();\n                dataManager.then(function (e) {\n                    proxy_1.dataSuccess(e.result);\n                    proxy_1.refreshPersistSelection();\n                    proxy_1.parent.hideSpinner();\n                });\n            }\n        }\n        else {\n            this.persistSelection = false;\n            this.parent.element.classList.remove('e-persistselection');\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.dataSuccess = function (res) {\n        for (var i = 0; i < res.length; i++) {\n            if (isNullOrUndefined(this.selectedRowState[res[i][this.primaryKey]]) && res[i][this.chkField]) {\n                this.selectedRowState[res[i][this.primaryKey]] = res[i][this.chkField];\n            }\n        }\n        this.persistSelectedData = res;\n    };\n    Selection.prototype.refreshPersistSelection = function () {\n        this.chkAllBox = this.parent.element.querySelector('.e-checkselectall');\n        this.chkAllObj = this.chkAllBox;\n        var rows = this.parent.getRows();\n        if (rows.length > 0 && (this.persistSelection || this.chkField)) {\n            var indexes = [];\n            for (var j = 0; j < rows.length; j++) {\n                var rowObj = this.parent.getRowObjectFromUID(rows[j].getAttribute('data-uid'));\n                var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n                if (pKey === null) {\n                    return;\n                }\n                var checkState = void 0;\n                var chkBox = rows[j].querySelector('.e-checkselect');\n                if (this.selectedRowState[pKey] || (this.isChkAll && this.chkAllCollec.indexOf(pKey) < 0)\n                    || (this.isUnChkAll && this.chkAllCollec.indexOf(pKey) > 0)\n                    || (!this.isChkAll && !this.isUnChkAll && this.chkField && rowObj.data[this.chkField]\n                        && chkBox.checked)) {\n                    indexes.push(parseInt(rows[j].getAttribute('aria-rowindex'), 10));\n                    checkState = true;\n                }\n                else {\n                    checkState = false;\n                    if (this.checkedTarget !== chkBox && this.isChkSelection) {\n                        removeAddCboxClasses(chkBox.nextElementSibling, checkState);\n                    }\n                }\n                this.updatePersistCollection(rows[j], checkState);\n            }\n            if (this.selectionSettings.type === 'multiple') {\n                this.selectRows(indexes);\n            }\n            else {\n                this.clearSelection();\n                if (indexes.length > 0) {\n                    this.selectRow(indexes[0], true);\n                }\n            }\n        }\n        if (this.isChkSelection) {\n            this.setCheckAllState();\n        }\n    };\n    Selection.prototype.actionBegin = function (e) {\n        if (e.requestType === 'save' && this.persistSelection) {\n            var editChkBox = this.parent.element.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                var row = closest(editChkBox, '.e-editedrow');\n                if (row) {\n                    if (this.parent.editSettings.mode === 'dialog') {\n                        row = this.parent.element.querySelector('.e-dlgeditrow');\n                    }\n                    var rowObj = this.parent.getRowObjectFromUID(row.getAttribute('data-uid'));\n                    if (!rowObj) {\n                        return;\n                    }\n                    this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = editChkBox.checked;\n                }\n                else {\n                    this.isCheckedOnAdd = editChkBox.checked;\n                }\n            }\n        }\n    };\n    Selection.prototype.actionComplete = function (e) {\n        if (e.requestType === 'save' && this.persistSelection) {\n            if (e.action === 'add' && this.isCheckedOnAdd) {\n                var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute('data-uid'));\n                this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = this.isCheckedOnAdd;\n            }\n            this.refreshPersistSelection();\n        }\n    };\n    Selection.prototype.onDataBound = function () {\n        if (this.persistSelection || this.chkField) {\n            if (this.parent.enableVirtualization) {\n                var records = this.parent.getCurrentViewRecords();\n                this.dataSuccess(records);\n            }\n            this.refreshPersistSelection();\n        }\n    };\n    Selection.prototype.checkSelectAllAction = function (checkState) {\n        var editForm = this.parent.element.querySelector('.e-gridform');\n        this.checkedTarget = this.chkAllBox;\n        if (checkState) {\n            this.selectRowsByRange(0, this.parent.getCurrentViewRecords().length);\n            this.isChkAll = true;\n            this.isUnChkAll = false;\n        }\n        else {\n            this.clearSelection();\n            this.isUnChkAll = true;\n            this.isChkAll = false;\n        }\n        this.chkAllCollec = [];\n        if (this.persistSelection) {\n            var rows = this.parent.getRows();\n            for (var i = 0; i < rows.length; i++) {\n                this.updatePersistCollection(rows[i], checkState);\n            }\n            if (this.isUnChkAll) {\n                this.selectedRowState = {};\n                this.persistSelectedData = [];\n            }\n        }\n        if (!isNullOrUndefined(editForm)) {\n            var editChkBox = editForm.querySelector('.e-edit-checkselect');\n            removeAddCboxClasses(editChkBox.nextElementSibling, checkState);\n        }\n    };\n    Selection.prototype.checkSelectAll = function (checkBox) {\n        var checkObj = checkBox;\n        var state = checkBox.nextElementSibling.classList.contains('e-check');\n        this.checkSelectAllAction(!state);\n        this.target = null;\n        this.setCheckAllState();\n        this.triggerChkChangeEvent(checkBox, !state);\n    };\n    Selection.prototype.checkSelect = function (checkBox) {\n        var target = closest(this.checkedTarget, '.e-rowcell');\n        var checkObj = checkBox;\n        this.isMultiCtrlRequest = true;\n        var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n        if (this.persistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n            ++rIndex;\n        }\n        this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n        this.moveIntoUncheckCollection(closest(target, '.e-row'));\n        this.setCheckAllState();\n        this.isMultiCtrlRequest = false;\n        this.triggerChkChangeEvent(checkBox, checkBox.nextElementSibling.classList.contains('e-check'));\n    };\n    Selection.prototype.moveIntoUncheckCollection = function (row) {\n        if (this.isChkAll || this.isUnChkAll) {\n            var rowObj = this.parent.getRowObjectFromUID(row.getAttribute('data-uid'));\n            var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n            if (!pKey) {\n                return;\n            }\n            if (this.chkAllCollec.indexOf(pKey) < 0) {\n                this.chkAllCollec.push(pKey);\n            }\n            else {\n                this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);\n            }\n        }\n    };\n    Selection.prototype.triggerChkChangeEvent = function (checkBox, checkState) {\n        this.parent.trigger(events.checkBoxChange, {\n            checked: checkState, selectedRowIndexes: this.parent.getSelectedRowIndexes(),\n            target: checkBox\n        });\n        if (!this.parent.isEdit) {\n            this.checkedTarget = null;\n        }\n    };\n    Selection.prototype.setCheckAllState = function () {\n        if (this.isChkSelection) {\n            var checkedLen = Object.keys(this.selectedRowState).length;\n            if (!this.persistSelection) {\n                checkedLen = this.selectedRecords.length;\n                this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n            }\n            var spanEle = this.chkAllBox.nextElementSibling;\n            removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n            if (checkedLen === this.totalRecordsCount || (this.persistSelection && this.parent.allowPaging\n                && this.isChkAll && this.chkAllCollec.length === 0)) {\n                addClass([spanEle], ['e-check']);\n            }\n            else if (checkedLen === 0 || this.parent.getCurrentViewRecords().length === 0) {\n                addClass([spanEle], ['e-uncheck']);\n            }\n            else {\n                addClass([spanEle], ['e-stop']);\n            }\n        }\n    };\n    Selection.prototype.clickHandler = function (e) {\n        var target = e.target;\n        this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch;\n        this.isMultiShiftRequest = e.shiftKey;\n        this.popUpClickHandler(e);\n        var chkSelect = false;\n        this.preventFocus = true;\n        var checkBox;\n        this.selectionRequest = true;\n        var checkWrap = parentsUntil(target, 'e-checkbox-wrapper');\n        if (checkWrap && checkWrap.querySelectorAll('.e-checkselect,.e-checkselectall').length > 0) {\n            target = checkWrap.querySelector('input[type=\"checkbox\"]');\n            checkBox = target;\n            chkSelect = true;\n        }\n        if (target && (target.classList.contains('e-rowcell') && !this.parent.selectionSettings.checkboxOnly) || chkSelect) {\n            if (this.isChkSelection) {\n                this.isMultiCtrlRequest = true;\n            }\n            this.target = target;\n            if (!isNullOrUndefined(checkBox)) {\n                this.checkedTarget = checkBox;\n                if (checkBox.classList.contains('e-checkselectall')) {\n                    this.checkSelectAll(checkBox);\n                }\n                else {\n                    this.checkSelect(checkBox);\n                    this.target = closest(target, '.e-rowcell');\n                }\n            }\n            else {\n                var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n                if (this.persistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n                    ++rIndex;\n                }\n                this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n                if (this.isChkSelection) {\n                    this.moveIntoUncheckCollection(closest(target, '.e-row'));\n                    this.setCheckAllState();\n                }\n            }\n            if (!this.isChkSelection && Browser.isDevice && this.parent.selectionSettings.type === 'multiple') {\n                this.showPopup(e);\n            }\n        }\n        this.isMultiCtrlRequest = false;\n        this.isMultiShiftRequest = false;\n        this.selectionRequest = false;\n        this.preventFocus = false;\n    };\n    Selection.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-rowselect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSelectMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSelectMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.showPopup = function (e) {\n        setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n            (this.selectionSettings.type === 'multiple' &&\n                (this.selectedRecords.length > 1 || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n    };\n    Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n        if (!this.isMultiCtrlRequest && !this.isMultiShiftRequest) {\n            if (!this.isDragged) {\n                this.selectRow(rowIndex, true);\n            }\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else if (this.isMultiShiftRequest) {\n            this.selectRowsByRange(isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n            this.selectCellsByRange(isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        else {\n            this.addRowsToSelection([rowIndex]);\n            this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n        }\n        this.isDragged = false;\n    };\n    Selection.prototype.onCellFocused = function (e) {\n        var clear = ((e.container.isHeader && e.isJump) || (e.container.isContent && !e.container.isSelectable)) &&\n            !(e.byKey && e.keyArgs.action === 'space');\n        var headerAction = e.container.isHeader && !(e.byKey && e.keyArgs.action === 'space');\n        if (!e.byKey || clear) {\n            if (clear) {\n                this.clearSelection();\n            }\n            return;\n        }\n        var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        var prev = this.focus.getPrevIndexes();\n        if (headerAction || (['ctrlPlusA', 'escape'].indexOf(e.keyArgs.action) === -1 && e.keyArgs.action !== 'space' &&\n            rowIndex === prev.rowIndex && cellIndex === prev.cellIndex)) {\n            return;\n        }\n        this.preventFocus = true;\n        switch (e.keyArgs.action) {\n            case 'downArrow':\n            case 'upArrow':\n            case 'enter':\n            case 'shiftEnter':\n                this.applyDownUpKey(rowIndex, cellIndex);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.applyRightLeftKey(rowIndex, cellIndex);\n                break;\n            case 'shiftDown':\n            case 'shiftUp':\n                this.shiftDownKey(rowIndex, cellIndex);\n                break;\n            case 'shiftLeft':\n            case 'shiftRight':\n                this.applyShiftLeftRightKey(rowIndex, cellIndex);\n                break;\n            case 'home':\n            case 'end':\n                this.applyHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'ctrlHome':\n            case 'ctrlEnd':\n                this.applyCtrlHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'escape':\n                this.clearSelection();\n                break;\n            case 'ctrlPlusA':\n                this.ctrlPlusA();\n                break;\n            case 'space':\n                this.selectionRequest = true;\n                var target = e.element;\n                if (target.classList.contains('e-checkselectall')) {\n                    this.checkedTarget = target;\n                    this.checkSelectAll(this.checkedTarget);\n                }\n                else {\n                    if (target.classList.contains('e-checkselect')) {\n                        this.checkedTarget = target;\n                        this.checkSelect(this.checkedTarget);\n                    }\n                }\n                this.selectionRequest = false;\n                break;\n        }\n        this.preventFocus = false;\n    };\n    /**\n     * Apply ctrl + A key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.ctrlPlusA = function () {\n        if (this.isRowType() && !this.isSingleSel()) {\n            this.selectRowsByRange(0, this.parent.getRows().length - 1);\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n        }\n    };\n    Selection.prototype.applyDownUpKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.isChkSelection && this.isChkAll) {\n            this.checkSelectAllAction(false);\n            this.checkedTarget = null;\n        }\n        if (this.isRowType()) {\n            this.selectRow(rowIndex, true);\n            this.applyUpDown(gObj.selectedRowIndex);\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.applyUpDown = function (rowIndex) {\n        if (rowIndex < 0) {\n            return;\n        }\n        if (!this.target) {\n            this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];\n        }\n        var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n        this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n        this.addAttribute(this.target);\n    };\n    Selection.prototype.applyRightLeftKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n            this.addAttribute(this.target);\n        }\n    };\n    Selection.prototype.applyHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else {\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n    };\n    /**\n     * Apply shift+down key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.shiftDownKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        if (this.isRowType() && !this.isSingleSel()) {\n            if (!isUndefined(this.prevRowIndex)) {\n                this.selectRowsByRange(this.prevRowIndex, rowIndex);\n                this.applyUpDown(rowIndex);\n            }\n            else {\n                this.selectRow(0, true);\n            }\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyShiftLeftRightKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        this.selectCellsByRange(this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isRowType()) {\n            this.selectRow(rowIndex, true);\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        if (row) {\n            var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n            var cell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n            if (cell) {\n                cells.push(cell);\n            }\n            addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));\n        }\n        this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n    };\n    Selection.prototype.isRowType = function () {\n        return this.selectionSettings.mode === 'row' || this.selectionSettings.mode === 'both';\n    };\n    Selection.prototype.isCellType = function () {\n        return this.selectionSettings.mode === 'cell' || this.selectionSettings.mode === 'both';\n    };\n    Selection.prototype.isSingleSel = function () {\n        return this.selectionSettings.type === 'single';\n    };\n    Selection.prototype.getRenderer = function () {\n        if (isNullOrUndefined(this.contentRenderer)) {\n            this.contentRenderer = this.factory.getRenderer(RenderType.Content);\n        }\n        return this.contentRenderer;\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     */\n    Selection.prototype.getSelectedRecords = function () {\n        var selectedData = [];\n        if (!this.selectionSettings.persistSelection) {\n            selectedData = this.parent.getRowsObject().filter(function (row) { return row.isSelected; })\n                .map(function (m) { return m.data; });\n        }\n        else {\n            selectedData = this.persistSelectedData;\n        }\n        return selectedData;\n    };\n    return Selection;\n}());\nexport { Selection };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { isActionPrevent } from '../base/util';\n/**\n *\n * `Search` module is used to handle search action.\n */\nvar Search = /** @class */ (function () {\n    /**\n     * Constructor for Grid search module.\n     * @hidden\n     */\n    function Search(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * Searches Grid records by given key.\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Search.prototype.search = function (searchString) {\n        var gObj = this.parent;\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n            return;\n        }\n        searchString = searchString.toLowerCase();\n        if (searchString !== gObj.searchSettings.key) {\n            gObj.searchSettings.key = searchString;\n            gObj.dataBind();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.searchComplete, this.onActionComplete, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.searchComplete, this.onActionComplete);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (!isNullOrUndefined(e.properties.key)) {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n            });\n        }\n        else {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin\n            });\n        }\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n        }));\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Search.prototype.getModuleName = function () {\n        return 'search';\n    };\n    return Search;\n}());\nexport { Search };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * `ShowHide` module is used to control column visibility.\n */\nvar ShowHide = /** @class */ (function () {\n    /**\n     * Constructor for the show hide module.\n     * @hidden\n     */\n    function ShowHide(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Shows a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to show.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.show = function (columnName, showBy) {\n        if (this.batchChanges(this.show, columnName, showBy)) {\n            return;\n        }\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, showBy);\n        columns.forEach(function (value) {\n            value.visible = true;\n        });\n        this.setVisible(columns);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to hide.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.hide = function (columnName, hideBy) {\n        if (this.batchChanges(this.hide, columnName, hideBy)) {\n            return;\n        }\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, hideBy);\n        columns.forEach(function (value) {\n            value.visible = false;\n        });\n        this.setVisible(columns);\n    };\n    ShowHide.prototype.batchChanges = function (handler, columnName, showHide) {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, {\n                instance: this, handler: handler,\n                arg1: columnName, arg2: showHide\n            });\n            return true;\n        }\n        return false;\n    };\n    ShowHide.prototype.getToggleFields = function (key) {\n        var finalized = [];\n        if (typeof key === 'string') {\n            finalized = [key];\n        }\n        else {\n            finalized = key;\n        }\n        return finalized;\n    };\n    ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n        var _this = this;\n        var columns = iterateArrayOrObject(keys, function (key, index) {\n            return iterateArrayOrObject(_this.parent.getColumns(), function (item, index) {\n                if (item[getKeyBy] === key) {\n                    return item;\n                }\n                return undefined;\n            })[0];\n        });\n        return columns;\n    };\n    /**\n     * Shows or hides columns by given column collection.\n     * @private\n     * @param  {Column[]} columns - Specifies the columns.\n     * @return {void}\n     */\n    ShowHide.prototype.setVisible = function (columns) {\n        columns = isNullOrUndefined(columns) ? this.parent.getColumns() : columns;\n        this.parent.notify(events.columnVisibilityChanged, columns);\n    };\n    return ShowHide;\n}());\nexport { ShowHide };\n","import { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport { formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollBarWidth } from '../base/util';\nimport { scroll, contentReady, uiUpdate, onEmpty } from '../base/constant';\nimport { ColumnWidthService } from '../services/width-controller';\n/**\n * `Scroll` module is used to handle scrolling behaviour.\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid scrolling.\n     * @hidden\n     */\n    function Scroll(parent) {\n        this.lastScrollTop = 0;\n        //To maintain scroll state on grid actions.\n        this.previousValues = { top: 0, left: 0 };\n        this.oneTimeReady = true;\n        this.parent = parent;\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setWidth = function () {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n        if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n            this.parent.toolbarModule.toolbar.element) {\n            this.parent.toolbarModule.toolbar.refreshOverflow();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setHeight = function () {\n        var mHdrHeight = 0;\n        var content = this.parent.getContent().firstChild;\n        if (this.parent.frozenRows) {\n            mHdrHeight =\n                this.parent.getHeaderContent().querySelector('tbody').offsetHeight;\n            content.style.height = formatUnit(this.parent.height - mHdrHeight);\n        }\n        else {\n            content.style.height = formatUnit(this.parent.height);\n        }\n        this.ensureOverflow(content);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setPadding = function () {\n        var content = this.parent.getHeaderContent();\n        var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n        var cssProps = this.getCssProperties();\n        content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n        content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removePadding = function (rtl) {\n        var cssProps = this.getCssProperties(rtl);\n        this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n        this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n    };\n    /**\n     * Refresh makes the Grid to adopt with height of parent container.\n     * > The `height` must be set to 100%.\n     * @return\n     */\n    Scroll.prototype.refresh = function () {\n        if (this.parent.height !== '100%') {\n            return;\n        }\n        var content = this.parent.getContent();\n        this.parent.element.style.height = '100%';\n        var height = this.widthService.getSiblingsHeight(content);\n        content.style.height = 'calc(100% - ' + height + 'px)'; //Set the height to the '.e-gridcontent';\n    };\n    Scroll.prototype.getThreshold = function () {\n        /* Some browsers places the scroller outside the content,\n         * hence the padding should be adjusted.*/\n        var appName = Browser.info.name;\n        if (appName === 'mozilla') {\n            return 0.5;\n        }\n        return 1;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(onEmpty, this.wireEvents, this);\n        this.parent.on(contentReady, this.wireEvents, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(onEmpty, this.wireEvents);\n        this.parent.off(contentReady, this.wireEvents);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n    };\n    Scroll.prototype.onContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        var isHeader = element.classList.contains('e-headercontent');\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var target = e.target;\n            var left = target.scrollLeft;\n            var sLimit = target.scrollWidth;\n            var isFooter = target.classList.contains('e-summarycontent');\n            if (_this.previousValues.left === left) {\n                _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n                return;\n            }\n            element.scrollLeft = left;\n            if (isFooter) {\n                _this.header.scrollLeft = left;\n            }\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n        };\n    };\n    Scroll.prototype.onFreezeContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var target = e.target;\n            var top = target.scrollTop;\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n        };\n    };\n    Scroll.prototype.onWheelScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var top = element.scrollTop + e.deltaMode === 1 ? e.deltaY * 30 : e.deltaY;\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            e.preventDefault();\n            _this.parent.getContent().querySelector('.e-frozencontent').scrollTop = top;\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n        };\n    };\n    Scroll.prototype.onTouchScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var cont;\n            var mHdr;\n            var pageXY = _this.getPointXY(e);\n            var top = element.scrollTop + (_this.pageXY.y - pageXY.y);\n            var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n            if (_this.parent.getHeaderContent().contains(e.target)) {\n                mHdr = _this.parent.frozenColumns ?\n                    _this.parent.getHeaderContent().querySelector('.e-movableheader') : _this.parent.getHeaderContent().firstChild;\n                if (_this.previousValues.left === left || (left < 0 || (mHdr.scrollWidth - mHdr.clientWidth) < left)) {\n                    return;\n                }\n                e.preventDefault();\n                mHdr.scrollLeft = left;\n                element.scrollLeft = left;\n                _this.pageXY.x = pageXY.x;\n                _this.previousValues.left = left;\n            }\n            else {\n                cont = _this.parent.getContent().querySelector('.e-frozencontent');\n                if (_this.previousValues.top === top || (top < 0 || (cont.scrollHeight - cont.clientHeight) < top)) {\n                    return;\n                }\n                e.preventDefault();\n                cont.scrollTop = top;\n                element.scrollTop = top;\n                _this.pageXY.y = pageXY.y;\n                _this.previousValues.top = top;\n            }\n        };\n    };\n    Scroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    Scroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (e.touches && e.touches.length) {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        else {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        return pageXY;\n    };\n    Scroll.prototype.wireEvents = function () {\n        if (this.oneTimeReady) {\n            this.content = this.parent.getContent().firstChild;\n            this.header = this.parent.getHeaderContent().firstChild;\n            var mCont = this.content.querySelector('.e-movablecontent');\n            var fCont = this.content.querySelector('.e-frozencontent');\n            var mHdr = this.header.querySelector('.e-movableheader');\n            if (this.parent.frozenRows) {\n                EventHandler.add(this.parent.frozenColumns ? mHdr : this.header, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(this.parent.frozenColumns ? mHdr : this.header, 'touchmove pointermove', this.onTouchScroll(this.parent.frozenColumns ? mCont : this.content), this);\n            }\n            if (this.parent.frozenColumns) {\n                EventHandler.add(mCont, 'scroll', this.onContentScroll(mHdr), this);\n                EventHandler.add(mCont, 'scroll', this.onFreezeContentScroll(fCont), this);\n                EventHandler.add(fCont, 'scroll', this.onFreezeContentScroll(mCont), this);\n                EventHandler.add(mHdr, 'scroll', this.onContentScroll(mCont), this);\n                EventHandler.add(fCont, 'wheel', this.onWheelScroll(mCont), this);\n                EventHandler.add(fCont, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(fCont, 'touchmove pointermove', this.onTouchScroll(mCont), this);\n            }\n            else {\n                EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n                EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n            }\n            if (this.parent.aggregates.length) {\n                EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n            }\n            this.refresh();\n            this.oneTimeReady = false;\n        }\n        var table = this.parent.getContentTable();\n        if (table.scrollHeight < this.parent.getContent().clientHeight) {\n            addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n            if (this.parent.frozenColumns) {\n                addClass(this.parent.getContent().querySelector('.e-movablecontent').querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n            }\n        }\n        if (!this.parent.enableVirtualization) {\n            this.content.scrollLeft = this.header.scrollLeft;\n            this.content.scrollTop = this.previousValues.top;\n        }\n        if (!this.parent.enableColumnVirtualization) {\n            this.content.scrollLeft = this.header.scrollLeft;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.getCssProperties = function (rtl) {\n        var css = {};\n        var enableRtl = isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n        css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n        css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n        return css;\n    };\n    Scroll.prototype.ensureOverflow = function (content) {\n        if (this.parent.frozenColumns) {\n            content.querySelector('.e-movablecontent').style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n        }\n        else {\n            content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n        }\n    };\n    Scroll.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.setPadding();\n        this.oneTimeReady = true;\n        if (this.parent.height === 'auto') {\n            this.removePadding();\n        }\n        this.wireEvents();\n        this.setHeight();\n        this.setWidth();\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.destroy = function () {\n        this.removeEventListener();\n        //Remove padding\n        this.removePadding();\n        removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n        removeClass([this.parent.getContent().firstChild], 'e-content');\n        //Remove height\n        this.parent.getContent().firstChild.style.height = '';\n        //Remove width\n        this.parent.element.style.width = '';\n        //Remove Dom event\n        EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n    };\n    /**\n     * Function to get the scrollbar width of the browser.\n     * @return {number}\n     * @hidden\n     */\n    Scroll.getScrollBarWidth = function () {\n        return getScrollBarWidth();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","import { removeClass } from '@syncfusion/ej2-base';\nimport { print as printWindow } from '@syncfusion/ej2-base';\nimport { removeElement } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * `Print` module is used to handle the print action.\n */\nvar Print = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function Print(parent, scrollModule) {\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.contentReady.bind(this));\n        this.scrollModule = scrollModule;\n    }\n    /**\n     * By default, it prints all the pages of Grid and hides pager.\n     * > Customize print options using [`printMode`](http://ej2.syncfusion.com/documentation/grid/api-grid.html#printmode-string).\n     * @return {void}\n     */\n    Print.prototype.print = function () {\n        var gObj = this.parent;\n        this.isPrinting = true;\n        //Todo: close dialog if opened\n        this.element = gObj.element.cloneNode(true);\n        this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWindow.moveTo(0, 0);\n        this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n        if (gObj.allowPaging) {\n            if (gObj.printMode === 'currentpage') {\n                this.element.querySelector('.e-gridpager').style.display = 'none';\n                this.contentReady();\n            }\n            else {\n                this.isPagerDisabled = true;\n                gObj.allowPaging = false;\n                gObj.dataBind();\n            }\n        }\n        else {\n            this.contentReady();\n        }\n    };\n    Print.prototype.contentReady = function () {\n        var gObj = this.parent;\n        if (!this.isPrinting) {\n            return;\n        }\n        if (this.isPagerDisabled) {\n            this.element = gObj.element.cloneNode(true);\n            this.isPagerDisabled = false;\n            gObj.allowPaging = true;\n            //  gObj.dataBind();\n        }\n        if (gObj.height !== 'auto') {\n            var cssProps = this.scrollModule.getCssProperties();\n            var contentDiv = this.element.querySelector('.e-content');\n            var headerDiv = this.element.querySelector('.e-gridheader');\n            contentDiv.style.height = 'auto';\n            contentDiv.style.overflowY = 'auto';\n            headerDiv.style[cssProps.padding] = '';\n            headerDiv.firstElementChild.style[cssProps.border] = '';\n        }\n        if (gObj.allowGrouping) {\n            if (!gObj.groupSettings.columns.length) {\n                this.element.querySelector('.e-groupdroparea').style.display = 'none';\n            }\n            else {\n                this.removeColGroup(gObj.groupSettings.columns.length);\n                removeElement(this.element, '.e-grouptopleftcell');\n                removeElement(this.element, '.e-recordpluscollapse');\n                removeElement(this.element, '.e-indentcell');\n                removeElement(this.element, '.e-recordplusexpand');\n            }\n        }\n        //Todo: consider scrolling, toolbar     \n        if (gObj.toolbar) {\n            this.element.querySelector('.e-toolbar').style.display = 'none';\n        }\n        if (gObj.allowFiltering && gObj.filterSettings.type === 'filterbar') {\n            this.element.querySelector('.e-filterbar').style.display = 'none';\n        }\n        if (gObj.allowSelection) {\n            removeClass(this.element.querySelectorAll('.e-active'), 'e-active');\n            removeClass(this.element.querySelectorAll('.e-cellselection1background'), 'e-cellselection1background');\n        }\n        var args = {\n            requestType: 'print', element: this.element,\n            selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]')\n        };\n        gObj.trigger(events.beforePrint, args);\n        printWindow(this.element, this.printWindow);\n        this.isPrinting = false;\n        gObj.trigger(events.printComplete, args);\n    };\n    Print.prototype.removeColGroup = function (depth) {\n        var groupCaption = this.element.querySelectorAll('.e-groupcaption');\n        var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n        for (var i = 0; i < groupCaption.length; i++) {\n            groupCaption[i].setAttribute('colspan', colSpan);\n        }\n        var colGroups = this.element.querySelectorAll('colgroup');\n        for (var i = 0; i < colGroups.length; i++) {\n            for (var j = 0; j < depth; j++) {\n                colGroups[i].childNodes[j].style.display = 'none';\n            }\n        }\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Print.prototype.destroy = function () {\n        //destroy\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    return Print;\n}());\nexport { Print };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { compile } from '@syncfusion/ej2-base';\nimport { getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { Property, Collection, ChildProperty } from '@syncfusion/ej2-base';\nimport { ValueFormatter } from '../services/value-formatter';\n/**\n * Configures the Grid aggregate column.\n */\nvar AggregateColumn = /** @class */ (function (_super) {\n    __extends(AggregateColumn, _super);\n    function AggregateColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.templateFn = {};\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setFormatter = function () {\n        var valueFormatter = new ValueFormatter();\n        if (this.format && (this.format.skeleton || this.format.format)) {\n            this.formatFn = valueFormatter.getFormatFunction(this.format);\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setTemplate = function (helper) {\n        if (helper === void 0) { helper = {}; }\n        if (this.footerTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.Summary)] = { fn: compile(this.footerTemplate, helper),\n                property: 'footerTemplate' };\n        }\n        if (this.groupFooterTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.GroupSummary)] = { fn: compile(this.groupFooterTemplate, helper),\n                property: 'groupFooterTemplate' };\n        }\n        if (this.groupCaptionTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = { fn: compile(this.groupCaptionTemplate, helper),\n                property: 'groupCaptionTemplate' };\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getTemplate = function (type) {\n        return this.templateFn[getEnumValue(CellType, type)];\n    };\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"columnName\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"format\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n    return AggregateColumn;\n}(ChildProperty));\nexport { AggregateColumn };\n/**\n * Configures the aggregate row.\n */\nvar AggregateRow = /** @class */ (function (_super) {\n    __extends(AggregateRow, _super);\n    function AggregateRow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], AggregateColumn)\n    ], AggregateRow.prototype, \"columns\", void 0);\n    return AggregateRow;\n}(ChildProperty));\nexport { AggregateRow };\n","import { Browser, createElement, remove } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\n/**\n * `Clipboard` module is used to handle clipboard copy action.\n */\nvar Clipboard = /** @class */ (function () {\n    /**\n     * Constructor for the Grid clipboard module\n     * @hidden\n     */\n    function Clipboard(parent) {\n        this.copyContent = '';\n        this.isSelect = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n    };\n    Clipboard.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.clipBoardTextArea = createElement('textarea', {\n            className: 'e-clipboard',\n            styles: 'opacity: 0',\n            attrs: { readonly: 'true' }\n        });\n        this.parent.element.appendChild(this.clipBoardTextArea);\n    };\n    Clipboard.prototype.keyDownHandler = function (e) {\n        if (e.action === 'ctrlPlusC') {\n            this.copy();\n        }\n        else if (e.action === 'ctrlShiftPlusH') {\n            this.copy(true);\n        }\n    };\n    Clipboard.prototype.setCopyData = function (withHeader) {\n        if (window.getSelection().toString() === '') {\n            this.clipBoardTextArea.value = this.copyContent = '';\n            if (this.parent.selectionSettings.mode !== 'cell') {\n                var rows = this.parent.getRows();\n                var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function (a, b) { return a - b; });\n                if (withHeader) {\n                    this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-headercell')), false, '\\t', withHeader);\n                    this.copyContent += '\\n';\n                }\n                for (var i = 0; i < selectedIndexes.length; i++) {\n                    if (i > 0) {\n                        this.copyContent += '\\n';\n                    }\n                    this.getCopyData([].slice.call(rows[selectedIndexes[i]].querySelectorAll('.e-rowcell')), false, '\\t', withHeader);\n                }\n            }\n            else {\n                this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground')), true, '\\n', withHeader);\n            }\n            var args = {\n                data: this.copyContent,\n                cancel: false,\n            };\n            this.parent.trigger(events.beforeCopy, args);\n            if (args.cancel) {\n                return;\n            }\n            this.clipBoardTextArea.value = this.copyContent = args.data;\n            if (!Browser.userAgent.match(/ipad|ipod|iphone/i)) {\n                this.clipBoardTextArea.select();\n            }\n            else {\n                this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n            }\n            this.isSelect = true;\n        }\n    };\n    Clipboard.prototype.getCopyData = function (cells, isCell, splitKey, withHeader) {\n        for (var j = 0; j < cells.length; j++) {\n            if (withHeader && isCell) {\n                this.copyContent += this.parent.getVisibleColumns()[parseInt(cells[j].getAttribute('aria-colindex'), 10)].headerText + '\\n';\n            }\n            this.copyContent += cells[j].textContent;\n            if (j < cells.length - 1) {\n                this.copyContent += splitKey;\n            }\n        }\n    };\n    /**\n     * Copy selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header data need to be copied or not.\n     */\n    Clipboard.prototype.copy = function (withHeader) {\n        if (document.queryCommandSupported('copy')) {\n            this.setCopyData(withHeader);\n            document.execCommand('copy');\n            this.clipBoardTextArea.blur();\n        }\n        if (this.isSelect) {\n            window.getSelection().removeAllRanges();\n            this.isSelect = false;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Clipboard.prototype.getModuleName = function () {\n        return 'clipboard';\n    };\n    /**\n     * To destroy the clipboard\n     * @return {void}\n     * @hidden\n     */\n    Clipboard.prototype.destroy = function () {\n        this.removeEventListener();\n        remove(this.clipBoardTextArea);\n    };\n    return Clipboard;\n}());\nexport { Clipboard };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, ChildProperty, Browser, closest, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setValue } from '@syncfusion/ej2-base';\nimport { createElement, addClass, removeClass, append, classList } from '@syncfusion/ej2-base';\nimport { Property, Collection, Complex, Event, NotifyPropertyChanges, L10n } from '@syncfusion/ej2-base';\nimport { EventHandler, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { createSpinner, hideSpinner, showSpinner, Tooltip } from '@syncfusion/ej2-popups';\nimport { iterateArrayOrObject, prepareColumns, parentsUntil, wrap, templateCompiler } from './util';\nimport * as events from '../base/constant';\nimport { Render } from '../renderer/render';\nimport { RenderType } from './enum';\nimport { CellRendererFactory } from '../services/cell-render-factory';\nimport { ServiceLocator } from '../services/service-locator';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { ColumnWidthService } from '../services/width-controller';\nimport { AriaService } from '../services/aria-service';\nimport { FocusStrategy } from '../services/focus-strategy';\nimport { PageSettings } from '../models/page-settings';\nimport { Selection } from '../actions/selection';\nimport { Search } from '../actions/search';\nimport { ShowHide } from '../actions/show-hide';\nimport { Scroll } from '../actions/scroll';\nimport { Print } from '../actions/print';\nimport { AggregateRow } from '../models/aggregate';\nimport { Clipboard } from '../actions/clipboard';\n/**\n * Represents the field name and direction of sort column.\n */\nvar SortDescriptor = /** @class */ (function (_super) {\n    __extends(SortDescriptor, _super);\n    function SortDescriptor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"direction\", void 0);\n    return SortDescriptor;\n}(ChildProperty));\nexport { SortDescriptor };\n/**\n * Configures the sorting behavior of Grid.\n */\nvar SortSettings = /** @class */ (function (_super) {\n    __extends(SortSettings, _super);\n    function SortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], SortDescriptor)\n    ], SortSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], SortSettings.prototype, \"allowUnsort\", void 0);\n    return SortSettings;\n}(ChildProperty));\nexport { SortSettings };\n/**\n * Represents the predicate for filter column.\n */\nvar Predicate = /** @class */ (function (_super) {\n    __extends(Predicate, _super);\n    function Predicate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"operator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"matchCase\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"predicate\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualFilterValue\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualOperator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ejpredicate\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"matchcase\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ignoreCase\", void 0);\n    return Predicate;\n}(ChildProperty));\nexport { Predicate };\n/**\n * Configures the filtering behavior of Grid..\n */\nvar FilterSettings = /** @class */ (function (_super) {\n    __extends(FilterSettings, _super);\n    function FilterSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], Predicate)\n    ], FilterSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property('filterbar')\n    ], FilterSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n    __decorate([\n        Property(1500)\n    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"operators\", void 0);\n    return FilterSettings;\n}(ChildProperty));\nexport { FilterSettings };\n/**\n * Configures the selection behavior of Grid.\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('row')\n    ], SelectionSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property('flow')\n    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n    __decorate([\n        Property('single')\n    ], SelectionSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"checkboxOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"persistSelection\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * Configures the search behavior of Grid.\n */\nvar SearchSettings = /** @class */ (function (_super) {\n    __extends(SearchSettings, _super);\n    function SearchSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], SearchSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property('')\n    ], SearchSettings.prototype, \"key\", void 0);\n    __decorate([\n        Property('contains')\n    ], SearchSettings.prototype, \"operator\", void 0);\n    __decorate([\n        Property(true)\n    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n    return SearchSettings;\n}(ChildProperty));\nexport { SearchSettings };\n/**\n * Configures the row drop settings of the Grid.\n */\nvar RowDropSettings = /** @class */ (function (_super) {\n    __extends(RowDropSettings, _super);\n    function RowDropSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], RowDropSettings.prototype, \"targetID\", void 0);\n    return RowDropSettings;\n}(ChildProperty));\nexport { RowDropSettings };\n/**\n * Configures the text wrap settings of the Grid.\n */\nvar TextWrapSettings = /** @class */ (function (_super) {\n    __extends(TextWrapSettings, _super);\n    function TextWrapSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('both')\n    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n    return TextWrapSettings;\n}(ChildProperty));\nexport { TextWrapSettings };\n/**\n * Configures the group behavior of the Grid.\n */\nvar GroupSettings = /** @class */ (function (_super) {\n    __extends(GroupSettings, _super);\n    function GroupSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showDropArea\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n    __decorate([\n        Property([])\n    ], GroupSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property()\n    ], GroupSettings.prototype, \"captionTemplate\", void 0);\n    return GroupSettings;\n}(ChildProperty));\nexport { GroupSettings };\n/**\n * Configures the edit behavior of the Grid.\n */\nvar EditSettings = /** @class */ (function (_super) {\n    __extends(EditSettings, _super);\n    function EditSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property('normal')\n    ], EditSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n    return EditSettings;\n}(ChildProperty));\nexport { EditSettings };\n/**\n * Represents the Grid component.\n * ```html\n * <div id=\"grid\"></div>\n * <script>\n *  var gridObj = new Grid({ allowPaging: true });\n *  gridObj.appendTo(\"#grid\");\n * </script>\n * ```\n */\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function Grid(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isInitial = true;\n        _this.sortedColumns = [];\n        _this.inViewIndexes = [];\n        _this.mediaCol = [];\n        _this.isMediaQuery = false;\n        _this.isInitialLoad = false;\n        _this.freezeRefresh = Component.prototype.refresh;\n        /**\n         * @hidden\n         */\n        _this.mergeCells = {};\n        /** @hidden */\n        _this.isEdit = false;\n        /** @hidden */\n        _this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        _this.defaultLocale = {\n            EmptyRecord: 'No records to display',\n            True: 'true',\n            False: 'false',\n            InvalidFilterMessage: 'Invalid Filter Data',\n            GroupDropArea: 'Drag a column header here to group its column',\n            UnGroup: 'Click here to ungroup',\n            GroupDisable: 'Grouping is disabled for this column',\n            FilterbarTitle: '\\'s filter bar cell',\n            EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n            // Toolbar Items\n            Add: 'Add',\n            Edit: 'Edit',\n            Cancel: 'Cancel',\n            Update: 'Update',\n            Delete: 'Delete',\n            Print: 'Print',\n            Pdfexport: 'PDF Export',\n            Excelexport: 'Excel Export',\n            Wordexport: 'Word Export',\n            Csvexport: 'CSV Export',\n            Search: 'Search',\n            Save: 'Save',\n            Item: 'item',\n            Items: 'items',\n            EditOperationAlert: 'No records selected for edit operation',\n            DeleteOperationAlert: 'No records selected for delete operation',\n            SaveButton: 'Save',\n            OKButton: 'OK',\n            CancelButton: 'Cancel',\n            EditFormTitle: 'Details of ',\n            AddFormTitle: 'Add New Record',\n            BatchSaveConfirm: 'Are you sure you want to save changes?',\n            BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n            ConfirmDelete: 'Are you sure you want to Delete Record?',\n            CancelEdit: 'Are you sure you want to Cancel the changes?',\n            ChooseColumns: 'Choose Column',\n            SearchColumns: 'search columns',\n            Matchs: 'No Matches Found',\n            FilterButton: 'Filter',\n            ClearButton: 'Clear',\n            StartsWith: 'Starts With',\n            EndsWith: 'Ends With',\n            Contains: 'Contains',\n            Equal: 'Equal',\n            NotEqual: 'Not Equal',\n            LessThan: 'Less Than',\n            LessThanOrEqual: 'Less Than Or Equal',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqual: 'Greater Than Or Equal',\n            ChooseDate: 'Choose a Date',\n            EnterValue: 'Enter the value',\n            Copy: 'Copy',\n            Group: 'Group by this column',\n            Ungroup: 'Ungroup by this column',\n            autoFitAll: 'Auto Fit all columns',\n            autoFit: 'Auto Fit this column',\n            Export: 'Export',\n            FirstPage: 'First Page',\n            LastPage: 'Last Page',\n            PreviousPage: 'Previous Page',\n            NextPage: 'Next Page',\n            SortAscending: 'Sort Ascending',\n            SortDescending: 'Sort Descending',\n            EditRecord: 'Edit Record',\n            DeleteRecord: 'Delete Record',\n            FilterMenu: 'Filter',\n            Columnchooser: 'Columns'\n        };\n        _this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftRight: 'shift+rightarrow',\n            shiftLeft: 'shift+leftarrow',\n            home: 'home',\n            end: 'end',\n            escape: 'escape',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            ctrlAltPageUp: 'ctrl+alt+pageup',\n            ctrlAltPageDown: 'ctrl+alt+pagedown',\n            altPageUp: 'alt+pageup',\n            altPageDown: 'alt+pagedown',\n            altDownArrow: 'alt+downarrow',\n            altUpArrow: 'alt+uparrow',\n            ctrlDownArrow: 'ctrl+downarrow',\n            ctrlUpArrow: 'ctrl+uparrow',\n            ctrlPlusA: 'ctrl+A',\n            ctrlPlusP: 'ctrl+P',\n            insert: 'insert',\n            delete: 'delete',\n            f2: 'f2',\n            enter: 'enter',\n            ctrlEnter: 'ctrl+enter',\n            shiftEnter: 'shift+enter',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            space: 'space',\n            ctrlPlusC: 'ctrl+C',\n            ctrlShiftPlusH: 'ctrl+shift+H'\n        };\n        setValue('mergePersistData', _this.mergePersistGridData, _this);\n        return _this;\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @return {string}\n     * @hidden\n     */\n    Grid.prototype.getPersistData = function () {\n        var _this = this;\n        var keyEntity = ['pageSettings', 'sortSettings',\n            'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex'];\n        var ignoreOnPersist = {\n            pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n            filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay'],\n            groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n                'disablePageWiseAggregates', 'hideCaptionCount'],\n            searchSettings: ['fields', 'operator', 'ignoreCase'],\n            sortSettings: [], columns: [], selectedRowIndex: []\n        };\n        var ignoreOnColumn = ['filter', 'edit', 'filterBarTemplate', 'headerTemplate', 'template',\n            'commandTemplate', 'commands'];\n        keyEntity.forEach(function (value) {\n            var currentObject = _this[value];\n            for (var _i = 0, _a = ignoreOnPersist[value]; _i < _a.length; _i++) {\n                var val = _a[_i];\n                delete currentObject[val];\n            }\n        });\n        this.ignoreInArrays(ignoreOnColumn, this.columns);\n        return this.addOnPersist(keyEntity);\n    };\n    Grid.prototype.ignoreInArrays = function (ignoreOnColumn, columns) {\n        var _this = this;\n        columns.forEach(function (column) {\n            if (column.columns) {\n                _this.ignoreInColumn(ignoreOnColumn, column);\n                _this.ignoreInArrays(ignoreOnColumn, column.columns);\n            }\n            else {\n                _this.ignoreInColumn(ignoreOnColumn, column);\n            }\n        });\n    };\n    Grid.prototype.ignoreInColumn = function (ignoreOnColumn, column) {\n        ignoreOnColumn.forEach(function (val) {\n            delete column[val];\n        });\n    };\n    /**\n     * To provide the array of modules needed for component rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    Grid.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.allowFiltering) {\n            modules.push({\n                member: 'filter',\n                args: [this, this.filterSettings, this.serviceLocator]\n            });\n        }\n        if (this.allowExcelExport) {\n            modules.push({\n                member: 'ExcelExport',\n                args: [this]\n            });\n        }\n        if (this.allowPdfExport) {\n            modules.push({\n                member: 'PdfExport',\n                args: [this]\n            });\n        }\n        if (this.allowSorting) {\n            modules.push({\n                member: 'sort',\n                args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.allowPaging) {\n            modules.push({\n                member: 'pager',\n                args: [this, this.pageSettings]\n            });\n        }\n        if (this.allowSelection) {\n            modules.push({\n                member: 'selection',\n                args: [this, this.selectionSettings, this.serviceLocator]\n            });\n        }\n        modules.push({\n            member: 'resize',\n            args: [this]\n        });\n        if (this.allowReordering) {\n            modules.push({\n                member: 'reorder',\n                args: [this]\n            });\n        }\n        if (this.allowRowDragAndDrop) {\n            modules.push({\n                member: 'rowDragAndDrop',\n                args: [this]\n            });\n        }\n        if (this.allowGrouping) {\n            modules.push({\n                member: 'group',\n                args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.aggregates.length) {\n            modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n        }\n        if (this.isDetail()) {\n            modules.push({\n                member: 'detailRow',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.toolbar || this.toolbarTemplate) {\n            modules.push({\n                member: 'toolbar',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.enableVirtualization || this.enableColumnVirtualization) {\n            modules.push({\n                member: 'virtualscroll',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.frozenColumns || this.frozenRows) {\n            modules.push({ member: 'freeze', args: [this, this.serviceLocator] });\n        }\n        if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n            modules.push({\n                member: 'edit',\n                args: [this, this.serviceLocator]\n            });\n        }\n        this.extendRequiredModules(modules);\n        return modules;\n    };\n    Grid.prototype.extendRequiredModules = function (modules) {\n        if (this.isCommandColumn(this.columns)) {\n            modules.push({\n                member: 'commandColumn',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.contextMenuItems) {\n            modules.push({\n                member: 'contextMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnMenu) {\n            modules.push({\n                member: 'columnMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnChooser) {\n            modules.push({\n                member: 'columnChooser',\n                args: [this, this.serviceLocator]\n            });\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    Grid.prototype.preRender = function () {\n        this.serviceLocator = new ServiceLocator;\n        this.initializeServices();\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     * @private\n     */\n    Grid.prototype.render = function () {\n        this.ariaService.setOptions(this.element, { role: 'grid' });\n        createSpinner({ target: this.element });\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.getMediaColumns();\n        this.searchModule = new Search(this);\n        this.scrollModule = new Scroll(this);\n        this.notify(events.initialLoad, {});\n        this.trigger(events.load);\n        prepareColumns(this.columns, this.enableColumnVirtualization);\n        this.getColumns();\n        this.processModel();\n        this.gridRender();\n        this.wireEvents();\n        this.addListener();\n        this.updateDefaultCursor();\n        this.showSpinner();\n        this.notify(events.initialEnd, {});\n    };\n    /**\n     * Method used to show the spinner.\n     */\n    Grid.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * Method used to hide the spinner.\n     */\n    Grid.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    Grid.prototype.getMediaColumns = function () {\n        if (!this.enableColumnVirtualization) {\n            var gcol = this.getColumns();\n            this.getShowHideService = this.serviceLocator.getService('showHideService');\n            if (!isNullOrUndefined(gcol)) {\n                for (var index = 0; index < gcol.length; index++) {\n                    if (!isNullOrUndefined(gcol[index].hideAtMedia)) {\n                        this.mediaCol.push(gcol[index]);\n                        var media = window.matchMedia(gcol[index].hideAtMedia);\n                        this.mediaQueryUpdate(index, media);\n                        media.addListener(this.mediaQueryUpdate.bind(this, index));\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n        this.isMediaQuery = true;\n        var col = this.getColumns()[columnIndex];\n        col.visible = e.matches;\n        if (this.isInitialLoad) {\n            if (col.visible) {\n                this.showHider.show(col.headerText, 'headerText');\n            }\n            else {\n                this.showHider.hide(col.headerText, 'headerText');\n            }\n        }\n    };\n    Grid.prototype.refreshMediaCol = function () {\n        if (this.isMediaQuery) {\n            this.refresh();\n            this.isMediaQuery = false;\n        }\n        this.isInitialLoad = true;\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     * @private\n     */\n    Grid.prototype.eventInitializer = function () {\n        //eventInitializer\n    };\n    /**\n     * To destroy the component(Detaches/removes all event handlers, attributes, classes and empty the component element).\n     * @method destroy\n     * @return {void}\n     */\n    Grid.prototype.destroy = function () {\n        this.unwireEvents();\n        this.removeListener();\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        _super.prototype.destroy.call(this);\n        this.element.innerHTML = '';\n        classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device']);\n    };\n    Grid.prototype.destroyDependentModules = function () {\n        this.scrollModule.destroy();\n        this.keyboardModule.destroy();\n        this.focusModule.destroy();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Grid.prototype.getModuleName = function () {\n        return 'grid';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        var requireGridRefresh = false;\n        var checkCursor;\n        var args = { requestType: 'refresh' };\n        if (this.isDestroyed) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowPaging':\n                    this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n                    requireRefresh = true;\n                    break;\n                case 'pageSettings':\n                    this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n                    if (isNullOrUndefined(newProp.pageSettings.currentPage) && isNullOrUndefined(newProp.pageSettings.totalRecordsCount)) {\n                        requireRefresh = true;\n                    }\n                    break;\n                case 'currencyCode':\n                case 'locale':\n                    _super.prototype.refresh.call(this);\n                    break;\n                case 'allowSorting':\n                    this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'allowFiltering':\n                    this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n                    requireRefresh = true;\n                    break;\n                case 'height':\n                case 'width':\n                    this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                    break;\n                case 'allowReordering':\n                    this.notify(events.uiUpdate, { module: 'reorder', enable: this.allowReordering });\n                    checkCursor = true;\n                    break;\n                case 'allowRowDragAndDrop':\n                    this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n                    break;\n                case 'rowTemplate':\n                    this.rowTemplateFn = templateCompiler(this.rowTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'detailTemplate':\n                    this.detailTemplateFn = templateCompiler(this.detailTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'allowGrouping':\n                    this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n                    this.headerModule.refreshUI();\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'childGrid':\n                    requireRefresh = true;\n                    break;\n                case 'toolbar':\n                    this.notify(events.uiUpdate, { module: 'toolbar' });\n                    break;\n                case 'groupSettings':\n                    if (!(isNullOrUndefined(newProp.groupSettings.showDropArea))) {\n                        this.headerModule.refreshUI();\n                        requireRefresh = true;\n                        checkCursor = true;\n                    }\n                    this.notify(events.inBoundModelChanged, { module: 'group', properties: newProp.groupSettings });\n                    break;\n                case 'aggregates':\n                    this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n                    break;\n                case 'columns':\n                    this.updateColumnObject();\n                    requireGridRefresh = true;\n                    break;\n                case 'frozenColumns':\n                case 'frozenRows':\n                    this.freezeRefresh();\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp);\n            }\n        }\n        if (checkCursor) {\n            this.updateDefaultCursor();\n        }\n        if (requireGridRefresh) {\n            this.refresh();\n        }\n        else if (requireRefresh) {\n            this.notify(events.modelChanged, args);\n            requireRefresh = false;\n        }\n    };\n    Grid.prototype.extendedPropertyChange = function (prop, newProp) {\n        switch (prop) {\n            case 'enableRtl':\n                this.updateRTL();\n                if (this.allowPaging) {\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n                }\n                if (this.height !== 'auto') {\n                    this.scrollModule.removePadding(!newProp.enableRtl);\n                    this.scrollModule.setPadding();\n                }\n                if (this.toolbar) {\n                    this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n                }\n                if (this.contextMenuItems) {\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();\n                }\n                if (this.showColumnMenu) {\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();\n                }\n                break;\n            case 'enableAltRow':\n                this.renderModule.refresh();\n                break;\n            case 'allowResizing':\n                this.headerModule.refreshUI();\n                break;\n            case 'gridLines':\n                this.updateGridLines();\n                break;\n            case 'filterSettings':\n                this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n                break;\n            case 'searchSettings':\n                this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n                break;\n            case 'sortSettings':\n                this.notify(events.inBoundModelChanged, { module: 'sort' });\n                break;\n            case 'selectionSettings':\n                this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n                break;\n            case 'editSettings':\n                this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n                break;\n            case 'allowTextWrap':\n            case 'textWrapSettings':\n                if (this.allowTextWrap) {\n                    this.applyTextWrap();\n                }\n                else {\n                    this.removeTextWrap();\n                }\n                this.notify(events.freezeRender, { case: 'textwrap', isModeChg: (prop === 'textWrapSettings') });\n                break;\n            case 'dataSource':\n                this.notify(events.dataSourceModified, {});\n                this.renderModule.refresh();\n                break;\n            case 'enableHover':\n                var action = newProp.enableHover ? addClass : removeClass;\n                action([this.element], 'e-gridhover');\n                break;\n        }\n    };\n    Grid.prototype.updateDefaultCursor = function () {\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            if (this.allowSorting || this.allowGrouping || this.allowReordering) {\n                row.classList.remove('e-defaultcursor');\n            }\n            else {\n                row.classList.add('e-defaultcursor');\n            }\n        }\n    };\n    Grid.prototype.updateColumnModel = function (columns) {\n        for (var i = 0, len = columns.length; i < len; i++) {\n            if (columns[i].columns) {\n                this.updateColumnModel(columns[i].columns);\n            }\n            else {\n                this.columnModel.push(columns[i]);\n            }\n        }\n    };\n    /**\n     * Gets the columns from Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getColumns = function () {\n        var _this = this;\n        var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n        var vLen = inview.length;\n        if (!this.enableColumnVirtualization || isNullOrUndefined(this.columnModel) || this.columnModel.length === 0) {\n            this.columnModel = [];\n            this.updateColumnModel(this.columns);\n        }\n        var columns = vLen === 0 ? this.columnModel :\n            this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n        return columns;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getColumnIndexesInView = function () {\n        return this.inViewIndexes;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setColumnIndexesInView = function (indexes) {\n        this.inViewIndexes = indexes;\n    };\n    /**\n     * Gets the visible columns from Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getVisibleColumns = function () {\n        var cols = [];\n        for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible) {\n                cols.push(col);\n            }\n        }\n        return cols;\n    };\n    /**\n     * Gets the header div of Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderContent = function () {\n        return this.headerModule.getPanel();\n    };\n    /**\n     * Sets the header div of Grid to replace the old header.\n     * @param  {Element} element - Specifies the Grid header.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderContent = function (element) {\n        this.headerModule.setPanel(element);\n    };\n    /**\n     * Gets the content table of Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContentTable = function () {\n        return this.contentModule.getTable();\n    };\n    /**\n     * Sets the content table of Grid to replace old content table.\n     * @param  {Element} element - Specifies the Grid content table.\n     * @return {void}\n     */\n    Grid.prototype.setGridContentTable = function (element) {\n        this.contentModule.setTable(element);\n    };\n    /**\n     * Gets the content div of Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Sets the content div of Grid to replace the old Grid content.\n     * @param  {Element} element - Specifies the Grid content.\n     * @return {void}\n     */\n    Grid.prototype.setGridContent = function (element) {\n        this.contentModule.setPanel(element);\n    };\n    /**\n     * Gets the header table element of Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderTable = function () {\n        return this.headerModule.getTable();\n    };\n    /**\n     * Sets the header table of Grid to replace old header table.\n     * @param  {Element} element - Specifies the Grid header table.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderTable = function (element) {\n        this.headerModule.setTable(element);\n    };\n    /**\n     * Gets the footer div of Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContent = function () {\n        if (isNullOrUndefined(this.footerElement)) {\n            this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        }\n        return this.footerElement;\n    };\n    /**\n     * Gets the footer table element of Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContentTable = function () {\n        if (isNullOrUndefined(this.footerElement)) {\n            this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        }\n        return this.footerElement.firstChild.firstChild;\n    };\n    /**\n     * Gets the pager of Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getPager = function () {\n        return this.gridPager; //get element from pager\n    };\n    /**\n     * Sets the pager of Grid to replace old pager.\n     * @param  {Element} element - Specifies the Grid pager.\n     * @return {void}\n     */\n    Grid.prototype.setGridPager = function (element) {\n        this.gridPager = element;\n    };\n    /**\n     * Gets a row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getRowByIndex = function (index) {\n        return this.contentModule.getRowByIndex(index);\n    };\n    /**\n     * Gets all the Grid's content rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getRows = function () {\n        return this.contentModule.getRowElements();\n    };\n    /**\n     * Get a row information based on cell\n     * @param {Element}\n     * @return RowInfo\n     */\n    Grid.prototype.getRowInfo = function (target) {\n        var ele = target;\n        var args = {};\n        if (!isNullOrUndefined(target) && isNullOrUndefined(parentsUntil(ele, 'e-detailrowcollapse')\n            && isNullOrUndefined(parentsUntil(ele, 'e-recordplusexpand')))) {\n            var cell = closest(ele, '.e-rowcell');\n            if (!isNullOrUndefined(cell)) {\n                var cellIndex = parseInt(cell.getAttribute('aria-colindex'), 10);\n                var row_1 = closest(cell, '.e-row');\n                var rowIndex = parseInt(row_1.getAttribute('aria-rowindex'), 10);\n                var rowsObject = this.contentModule.getRows().filter(function (r) {\n                    return r.uid === row_1.getAttribute('data-uid');\n                });\n                var rowData = rowsObject[0].data;\n                var column = rowsObject[0].cells[cellIndex].column;\n                args = { cell: cell, cellIndex: cellIndex, row: row_1, rowIndex: rowIndex, rowData: rowData, column: column };\n            }\n        }\n        return args;\n    };\n    /**\n     * Gets all the Grid's data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getDataRows = function () {\n        var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n        var dataRows = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                dataRows.push(rows[i]);\n            }\n        }\n        return dataRows;\n    };\n    /**\n     * Gets a cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n        return this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n    };\n    /**\n     * Gets a column header by column index.\n     * @param  {number} index - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByIndex = function (index) {\n        return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowObjectFromUID = function (uid) {\n        for (var _i = 0, _a = this.contentModule.getRows(); _i < _a.length; _i++) {\n            var row = _a[_i];\n            if (row.uid === uid) {\n                return row;\n            }\n        }\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowsObject = function () {\n        return this.contentModule.getRows();\n    };\n    /**\n     * Gets a column header by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByField = function (field) {\n        return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n    };\n    /**\n     * Gets a column header by uid.\n     * @param  {string} field - Specifies the column uid.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByUid = function (uid) {\n        return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n    };\n    /**\n     * Gets a Column by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Column}\n     */\n    Grid.prototype.getColumnByField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByField = function (field) {\n        var index = iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return !isNullOrUndefined(index) ? index : -1;\n    };\n    /**\n     * Gets a column by uid.\n     * @param  {string} uid - Specifies the column uid.\n     * @return {Column}\n     */\n    Grid.prototype.getColumnByUid = function (uid) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by uid.\n     * @param  {string} uid - Specifies the column uid.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByUid = function (uid) {\n        var index = iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return !isNullOrUndefined(index) ? index : -1;\n    };\n    /**\n     * Gets uid by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {string}\n     */\n    Grid.prototype.getUidByColumnField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item.uid;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets TH index by column uid value.\n     * @private\n     * @param  {string} uid - Specifies the column uid.\n     * @return {number}\n     */\n    Grid.prototype.getNormalizedColumnIndex = function (uid) {\n        var index = this.getColumnIndexByUid(uid);\n        if (this.allowGrouping) {\n            index += this.groupSettings.columns.length;\n        }\n        if (this.isDetail()) {\n            index++;\n        }\n        /**\n         * TODO: index normalization based on the stacked header, grouping and detailTemplate\n         * and frozen should be handled here\n         */\n        return index;\n    };\n    /**\n     * Gets the collection of column fields.\n     * @return {string[]}\n     */\n    Grid.prototype.getColumnFieldNames = function () {\n        var columnNames = [];\n        var column;\n        for (var i = 0, len = this.getColumns().length; i < len; i++) {\n            column = this.getColumns()[i];\n            if (column.visible) {\n                columnNames.push(column.field);\n            }\n        }\n        return columnNames;\n    };\n    /**\n     * Gets a compiled row template.\n     * @return {Function}\n     * @private\n     */\n    Grid.prototype.getRowTemplate = function () {\n        return this.rowTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getDetailTemplate = function () {\n        return this.detailTemplateFn;\n    };\n    /**\n     * Get the names of primary key columns in Grid.\n     * @return {string[]}\n     */\n    Grid.prototype.getPrimaryKeyFieldNames = function () {\n        var keys = [];\n        for (var key = 0, col = this.columns, cLen = col.length; key < cLen; key++) {\n            if (col[key].isPrimaryKey) {\n                keys.push(col[key].field);\n            }\n        }\n        return keys;\n    };\n    /**\n     * Refreshes the Grid header and content.\n     */\n    Grid.prototype.refresh = function () {\n        this.headerModule.refreshUI();\n        this.renderModule.refresh();\n    };\n    /**\n     * Refreshes the Grid header.\n     */\n    Grid.prototype.refreshHeader = function () {\n        this.headerModule.refreshUI();\n    };\n    /**\n     * Gets the collection of selected rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getSelectedRows = function () {\n        return this.selectionModule ? this.selectionModule.selectedRecords : [];\n    };\n    /**\n     * Gets the collection of selected row indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n    };\n    /**\n     * Gets the collection of selected row and cell indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowCellIndexes = function () {\n        return this.selectionModule.selectedRowCellIndexes;\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     */\n    Grid.prototype.getSelectedRecords = function () {\n        return this.selectionModule.getSelectedRecords();\n    };\n    /**\n     * Gets the Grid's data.\n     * @return {Data}\n     */\n    Grid.prototype.getDataModule = function () {\n        return this.renderModule.data;\n    };\n    /**\n     * Shows a column by column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.showColumns = function (keys, showBy) {\n        showBy = showBy ? showBy : 'headerText';\n        this.showHider.show(keys, showBy);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.hideColumns = function (keys, hideBy) {\n        hideBy = hideBy ? hideBy : 'headerText';\n        this.showHider.hide(keys, hideBy);\n    };\n    /**\n     * Navigate to target page by given number.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Grid.prototype.goToPage = function (pageNo) {\n        this.pagerModule.goToPage(pageNo);\n    };\n    /**\n     * Defines the text of external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Grid.prototype.updateExternalMessage = function (message) {\n        this.pagerModule.updateExternalMessage(message);\n    };\n    /**\n     * Sorts a column with given options.\n     * @param {string} columnName - Defines the column name to sort.\n     * @param {SortDirection} direction - Defines the direction of sorting for field.\n     * @param {boolean} isMultiSort - Specifies whether the previous sorted columns to be maintained.\n     * @return {void}\n     */\n    Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        this.sortModule.sortColumn(columnName, direction, isMultiSort);\n    };\n    /**\n     * Clears all the sorted columns of Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearSorting = function () {\n        this.sortModule.clearSorting();\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeSortColumn = function (field) {\n        this.sortModule.removeSortColumn(field);\n    };\n    /**\n     * Filters grid row by column name with given options.\n     * @param  {string} fieldName - Defines the field name of the filter column.\n     * @param  {string} filterOperator - Defines the operator by how to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case set to true, then filter records with exact match or else\n     * filter records with case insensitive(uppercase and lowercase letters treated as same).\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n        this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator);\n    };\n    /**\n     * Clears all the filtered rows of Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearFiltering = function () {\n        this.filterModule.clearFiltering();\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n    };\n    /**\n     * Selects a row by given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectRow = function (index, isToggle) {\n        this.selectionModule.selectRow(index, isToggle);\n    };\n    /**\n     * Selects a collection of rows by indexes.\n     * @param  {number[]} rowIndexes - Specifies the row indexes.\n     * @return {void}\n     */\n    Grid.prototype.selectRows = function (rowIndexes) {\n        this.selectionModule.selectRows(rowIndexes);\n    };\n    /**\n     * Deselects the current selected rows and cells.\n     * @return {void}\n     */\n    Grid.prototype.clearSelection = function () {\n        this.selectionModule.clearSelection();\n    };\n    /**\n     * Selects a cell by given index.\n     * @param  {IIndex} cellIndex - Defines the row and column index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectCell = function (cellIndex, isToggle) {\n        this.selectionModule.selectCell(cellIndex, isToggle);\n    };\n    /**\n     * Searches Grid records by given key.\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Grid.prototype.search = function (searchString) {\n        this.searchModule.search(searchString);\n    };\n    /**\n     * By default, it prints all the pages of Grid and hides pager.\n     * > Customize print options using [`printMode`](http://ej2.syncfusion.com/documentation/grid/api-grid.html#printmode-string).\n     * @return {void}\n     */\n    Grid.prototype.print = function () {\n        this.printModule.print();\n    };\n    /**\n     * Delete a record with Given options. If fieldname and data is not given then grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field Name of the column.\n     * @param {Object} data - Defines the JSON data of record need to be delete.\n     */\n    Grid.prototype.deleteRecord = function (fieldname, data) {\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * To edit any particular row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     */\n    Grid.prototype.startEdit = function () {\n        this.editModule.startEdit();\n    };\n    /**\n     * If Grid is in editable state, then you can save a record by invoking endEdit.\n     */\n    Grid.prototype.endEdit = function () {\n        this.editModule.endEdit();\n    };\n    /**\n     * Cancel edited state.\n     */\n    Grid.prototype.closeEdit = function () {\n        this.editModule.closeEdit();\n    };\n    /**\n     * To add a new row at top of rows with given data. If data is not passed then it will render empty row.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     */\n    Grid.prototype.addRecord = function (data) {\n        this.editModule.addRecord(data);\n    };\n    /**\n     * Delete any visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Grid.prototype.deleteRow = function (tr) {\n        this.editModule.deleteRow(tr);\n    };\n    /**\n     * Copy selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header data need to be copied or not.\n     */\n    Grid.prototype.copy = function (withHeader) {\n        this.clipboardModule.copy(withHeader);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.recalcIndentWidth = function () {\n        if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n            return;\n        }\n        if ((!this.groupSettings.columns.length && !this.isDetail()) ||\n            this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n            !this.getContentTable()) {\n            return;\n        }\n        var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n        var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n        var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n        var perPixel = indentWidth / 30;\n        var i = 0;\n        if (perPixel >= 1) {\n            indentWidth = (30 / perPixel);\n        }\n        if (this.enableColumnVirtualization) {\n            indentWidth = 30;\n        }\n        while (i < this.groupSettings.columns.length) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n            i++;\n        }\n        if (this.isDetail()) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n        }\n        this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n    };\n    /**\n     * Changes the Grid column positions by field names.\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumns = function (fromFName, toFName) {\n        this.reorderModule.reorderColumns(fromFName, toFName);\n    };\n    /**\n     * Change the column width to automatically fit its content\n     * which ensures that the width is wide enough to show the content without wrapping/hiding.\n     * > * This method ignores the hidden columns.\n     * > * Use the `autoFitColumns` method in the `dataBound` event to resize at the initial rendering\n     * @param  {string |string[]} fieldNames - Defines the column names.\n     * @return {void}\n     *\n     *\n     * ```typescript\n     * <div id=\"Grid\"></div>\n     * <script>\n     * let gridObj: Grid = new Grid({\n     *     dataSource: employeeData,\n     *     columns: [\n     *         { field: 'OrderID', headerText: 'Order ID', width:100 },\n     *         { field: 'EmployeeID', headerText: 'Employee ID' }],\n     *     dataBound: () => gridObj.autoFitColumns('EmployeeID')\n     * });\n     * gridObj.appendTo('#Grid');\n     * </script>\n     * ```\n     *\n     */\n    Grid.prototype.autoFitColumns = function (fieldNames) {\n        this.resizeModule.autoFitColumns(fieldNames);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.createColumnchooser = function (x, y, target) {\n        this.columnChooserModule.renderColumnChooser(x, y, target);\n    };\n    Grid.prototype.initializeServices = function () {\n        this.serviceLocator.register('widthService', this.widthService = new ColumnWidthService(this));\n        this.serviceLocator.register('cellRendererFactory', new CellRendererFactory);\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('localization', this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale));\n        this.serviceLocator.register('valueFormatter', this.valueFormatterService = new ValueFormatter(this.locale));\n        this.serviceLocator.register('showHideService', this.showHider = new ShowHide(this));\n        this.serviceLocator.register('ariaService', this.ariaService = new AriaService());\n        this.serviceLocator.register('focus', this.focusModule = new FocusStrategy(this));\n    };\n    Grid.prototype.processModel = function () {\n        var gCols = this.groupSettings.columns;\n        var sCols = this.sortSettings.columns;\n        var flag;\n        var j;\n        if (this.allowGrouping) {\n            var _loop_1 = function (i, len) {\n                j = 0;\n                for (var sLen = sCols.length; j < sLen; j++) {\n                    if (sCols[j].field === gCols[i]) {\n                        flag = true;\n                        break;\n                    }\n                }\n                if (!flag) {\n                    sCols.push({ field: gCols[i], direction: 'ascending' });\n                }\n                else {\n                    if (this_1.allowSorting) {\n                        this_1.sortedColumns.push(sCols[j].field);\n                    }\n                    else {\n                        sCols[j].direction = 'ascending';\n                    }\n                }\n                if (!this_1.groupSettings.showGroupedColumn) {\n                    var column = this_1.enableColumnVirtualization ?\n                        this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n                    column.visible = false;\n                }\n            };\n            var this_1 = this;\n            for (var i = 0, len = gCols.length; i < len; i++) {\n                _loop_1(i, len);\n            }\n        }\n        this.rowTemplateFn = templateCompiler(this.rowTemplate);\n        this.detailTemplateFn = templateCompiler(this.detailTemplate);\n        if (!isNullOrUndefined(this.parentDetails)) {\n            var value = isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n                this.parentDetails.parentKeyFieldValue;\n            this.query.where(this.queryString, 'equal', value, true);\n        }\n    };\n    Grid.prototype.gridRender = function () {\n        this.updateRTL();\n        if (this.enableHover) {\n            this.element.classList.add('e-gridhover');\n        }\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        classList(this.element, ['e-responsive', 'e-default'], []);\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.headerModule = rendererFactory.getRenderer(RenderType.Header);\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.printModule = new Print(this, this.scrollModule);\n        this.clipboardModule = new Clipboard(this);\n        this.renderModule.render();\n        this.eventInitializer();\n        this.createGridPopUpElement();\n        this.widthService.setWidthToColumns();\n        this.updateGridLines();\n        this.applyTextWrap();\n    };\n    Grid.prototype.dataReady = function () {\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        if (this.height !== 'auto') {\n            this.scrollModule.setPadding();\n        }\n    };\n    Grid.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Grid.prototype.createGridPopUpElement = function () {\n        var popup = createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n        var content = createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n        append([content, createElement('div', { className: 'e-uptail e-tail' })], popup);\n        content.appendChild(createElement('span'));\n        append([content, createElement('div', { className: 'e-downtail e-tail' })], popup);\n        this.element.appendChild(popup);\n    };\n    Grid.prototype.updateGridLines = function () {\n        classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n        switch (this.gridLines) {\n            case 'horizontal':\n                this.element.classList.add('e-horizontallines');\n                break;\n            case 'vertical':\n                this.element.classList.add('e-verticallines');\n                break;\n            case 'none':\n                this.element.classList.add('e-hidelines');\n                break;\n            case 'both':\n                this.element.classList.add('e-bothlines');\n                break;\n        }\n        this.updateResizeLines();\n    };\n    Grid.prototype.updateResizeLines = function () {\n        if (this.allowResizing &&\n            !(this.gridLines === 'vertical' || this.gridLines === 'both')) {\n            this.element.classList.add('e-resize-lines');\n        }\n        else {\n            this.element.classList.remove('e-resize-lines');\n        }\n    };\n    /**\n     * The function is used to apply text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.applyTextWrap = function () {\n        if (this.allowTextWrap) {\n            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n            switch (this.textWrapSettings.wrapMode) {\n                case 'header':\n                    wrap(this.element, false);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, true);\n                    break;\n                case 'content':\n                    wrap(this.getContent(), true);\n                    wrap(this.element, false);\n                    wrap(headerRows, false);\n                    break;\n                default:\n                    wrap(this.element, true);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, false);\n            }\n        }\n    };\n    /**\n     * The function is used to remove text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeTextWrap = function () {\n        wrap(this.element, false);\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        wrap(headerRows, false);\n        wrap(this.getContent(), false);\n    };\n    /**\n     * The function is used to add Tooltip to the grid cell that has ellipsiswithtooltip clip mode.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.refreshTooltip = function () {\n        var width;\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var htable = this.createTable(headerTable, headerDivTag, 'header');\n        var ctable = this.createTable(headerTable, headerDivTag, 'content');\n        var all = this.element.querySelectorAll('.e-ellipsistooltip');\n        var allele = [];\n        for (var i = 0; i < all.length; i++) {\n            allele[i] = all[i];\n        }\n        allele.forEach(function (element) {\n            var td = element;\n            var table = headerTable.contains(element) ? htable : ctable;\n            var ele = headerTable.contains(element) ? 'th' : 'tr';\n            table.querySelector(ele).className = element.className;\n            table.querySelector(ele).innerHTML = element.innerHTML;\n            width = table.querySelector(ele).getBoundingClientRect().width;\n            if (width > element.getBoundingClientRect().width && !element.classList.contains('e-tooltip')) {\n                var tooltip = new Tooltip({ content: element.innerHTML }, element);\n            }\n            else if (width < element.getBoundingClientRect().width && element.classList.contains('e-tooltip')) {\n                element.ej2_instances[0].destroy();\n            }\n        });\n        document.body.removeChild(htable);\n        document.body.removeChild(ctable);\n    };\n    /**\n     * To create table for ellipsiswithtooltip\n     * @hidden\n     */\n    Grid.prototype.createTable = function (table, tag, type) {\n        var myTableDiv = createElement('div');\n        myTableDiv.className = this.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = createElement('div');\n        mySubDiv.className = tag;\n        var myTable = createElement('table');\n        myTable.className = table.className;\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var ele = (type === 'header') ? 'th' : 'td';\n        var myTr = createElement('tr');\n        var mytd = createElement(ele);\n        myTr.appendChild(mytd);\n        myTable.appendChild(myTr);\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        return myTableDiv;\n    };\n    /**\n     * Binding events to the element while component creation.\n     * @hidden\n     */\n    Grid.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n        EventHandler.add(this.getContent(), 'dblclick', this.dblClickHandler, this);\n        if (this.allowKeyboard) {\n            this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n        }\n        this.keyboardModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    /**\n     * Unbinding events from the element while component destroy.\n     * @hidden\n     */\n    Grid.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addListener = function () {\n        var _this = this;\n        if (this.isDestroyed) {\n            return;\n        }\n        this.on(events.dataReady, this.dataReady, this);\n        this.on(events.contentReady, this.recalcIndentWidth, this);\n        [events.updateData, events.modelChanged, events.contentReady, events.columnWidthChanged].forEach(function (event) {\n            return _this.on(event, _this.refreshTooltip, _this);\n        });\n        this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n        this.dataBoundFunction = this.refreshMediaCol.bind(this);\n        this.addEventListener(events.dataBound, this.dataBoundFunction);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.removeListener = function () {\n        var _this = this;\n        if (this.isDestroyed) {\n            return;\n        }\n        this.off(events.dataReady, this.dataReady);\n        this.off(events.contentReady, this.recalcIndentWidth);\n        [events.updateData, events.modelChanged, events.contentReady, events.columnWidthChanged].forEach(function (event) {\n            return _this.off(event, _this.refreshTooltip);\n        });\n        this.off(events.headerRefreshed, this.recalcIndentWidth);\n        this.removeEventListener(events.dataBound, this.dataBoundFunction);\n    };\n    /**\n     * Get current visible data of grid.\n     * @return {Object[]}\n     * @hidden\n     */\n    Grid.prototype.getCurrentViewRecords = function () {\n        return (this.allowGrouping && this.groupSettings.columns.length) ?\n            this.currentViewData.records : this.currentViewData;\n    };\n    Grid.prototype.mouseClickHandler = function (e) {\n        if (this.isChildGrid(e) || (parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n            this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n            return;\n        }\n        if (((!this.allowRowDragAndDrop && parentsUntil(e.target, 'e-gridcontent')) ||\n            (!(this.allowGrouping || this.allowReordering) && parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n            return;\n        }\n        if (parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n            e.preventDefault();\n        }\n        this.notify(events.click, e);\n    };\n    Grid.prototype.checkEdit = function (e) {\n        var tr = parentsUntil(e.target, 'e-row');\n        var isEdit = this.editSettings.mode !== 'batch' &&\n            this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n        return !parentsUntil(e.target, 'e-unboundcelldiv') && (isEdit || (parentsUntil(e.target, 'e-rowcell') &&\n            parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell')));\n    };\n    Grid.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-grid').id !== this.element.id || closest(e.target, '.e-unboundcelldiv')) {\n            return;\n        }\n        var args = this.getRowInfo(e.target);\n        args.target = e.target;\n        this.trigger(events.recordDoubleClick, args);\n        this.notify(events.dblclick, e);\n    };\n    Grid.prototype.focusOutHandler = function (e) {\n        if (this.isChildGrid(e)) {\n            return;\n        }\n        if (!parentsUntil(e.target, 'e-grid')) {\n            this.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n        var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n        if (filterClear) {\n            filterClear.classList.add('e-hide');\n        }\n    };\n    Grid.prototype.isChildGrid = function (e) {\n        var gridElement = parentsUntil(e.target, 'e-grid');\n        if (gridElement && gridElement.id !== this.element.id) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mergePersistGridData = function () {\n        var data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n        if (!(isNullOrUndefined(data) || (data === ''))) {\n            var dataObj_1 = JSON.parse(data);\n            var keys = Object.keys(dataObj_1);\n            this.isProtectedOnChange = true;\n            var _loop_2 = function (key) {\n                if ((typeof this_2[key] === 'object') && !isNullOrUndefined(this_2[key])) {\n                    if (Array.isArray(this_2[key])) {\n                        this_2[key].forEach(function (element, index) {\n                            extend(element, dataObj_1[key][index]);\n                        });\n                    }\n                    else {\n                        extend(this_2[key], dataObj_1[key]);\n                    }\n                }\n                else {\n                    this_2[key] = dataObj_1[key];\n                }\n            };\n            var this_2 = this;\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                _loop_2(key);\n            }\n            this.isProtectedOnChange = false;\n        }\n    };\n    Grid.prototype.isDetail = function () {\n        return !isNullOrUndefined(this.detailTemplate) || !isNullOrUndefined(this.childGrid);\n    };\n    Grid.prototype.keyActionHandler = function (e) {\n        if (this.isChildGrid(e) ||\n            (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'shiftEnter'\n                && e.action !== 'tab' && e.action !== 'shiftTab')) {\n            return;\n        }\n        if (this.allowKeyboard) {\n            if (e.action === 'ctrlPlusP') {\n                e.preventDefault();\n                this.print();\n            }\n            this.notify(events.keyPressed, e);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setInjectedModules = function (modules) {\n        this.injectedModules = modules;\n    };\n    Grid.prototype.updateColumnObject = function () {\n        prepareColumns(this.columns, this.enableColumnVirtualization);\n        if (this.editSettings.allowEditing || this.editSettings.allowAdding || this.editSettings.allowDeleting) {\n            this.notify(events.autoCol, {});\n        }\n    };\n    /**\n     * Refreshes the Grid column changes\n     */\n    Grid.prototype.refreshColumns = function () {\n        this.updateColumnObject();\n        this.refresh();\n    };\n    /**\n     * Export Grid data to Excel file(.xlsx).\n     * @param  {exportProperties} exportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @return {Promise<any>}\n     */\n    /* tslint:disable-next-line:no-any */\n    Grid.prototype.excelExport = function (exportProperties, isMultipleExport, workbook) {\n        return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, false);\n    };\n    /**\n     * Export Grid data to CSV file.\n     * @param  {exportProperties} exportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @return {Promise<any>}\n     */\n    /* tslint:disable-next-line:no-any */\n    Grid.prototype.csvExport = function (exportProperties, isMultipleExport, workbook) {\n        return this.excelExportModule.Map(this, exportProperties, isMultipleExport, workbook, true);\n    };\n    /**\n     * Export Grid data to PDF document.\n     * @param  {exportProperties} exportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param  {pdfDoc} pdfDoc - Defined the Pdf Document if multiple export is enabled.\n     * @return {Promise<any>}\n     */\n    /* tslint:disable-next-line:no-any */\n    Grid.prototype.pdfExport = function (exportProperties, isMultipleExport, pdfDoc) {\n        return this.pdfExportModule.Map(this, exportProperties, isMultipleExport, pdfDoc);\n    };\n    Grid.prototype.isCommandColumn = function (columns) {\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (column.columns) {\n                if (this.isCommandColumn(column.columns)) {\n                    return true;\n                }\n            }\n            else if (column.commands || column.commandsTemplate) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Grid.prototype.groupColumn = function (columnName) {\n        this.groupModule.groupColumn(columnName);\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Grid.prototype.ungroupColumn = function (columnName) {\n        this.groupModule.ungroupColumn(columnName);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isContextMenuOpen = function () {\n        return this.contextMenuModule && this.contextMenuModule.isOpen;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    /**\n     * Shows a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to show.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.showColumn = function (columnName, showBy) {\n        this.showHider.show(columnName, showBy);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to hide.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.hideColumn = function (columnName, hideBy) {\n        this.showHider.hide(columnName, hideBy);\n    };\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableAltRow\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableHover\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowTextWrap\", void 0);\n    __decorate([\n        Complex({}, TextWrapSettings)\n    ], Grid.prototype, \"textWrapSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPaging\", void 0);\n    __decorate([\n        Complex({}, PageSettings)\n    ], Grid.prototype, \"pageSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n    __decorate([\n        Complex({}, SearchSettings)\n    ], Grid.prototype, \"searchSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowSorting\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowMultiSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowExcelExport\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Complex({}, SortSettings)\n    ], Grid.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowSelection\", void 0);\n    __decorate([\n        Property(-1)\n    ], Grid.prototype, \"selectedRowIndex\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], Grid.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowFiltering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n    __decorate([\n        Complex({}, RowDropSettings)\n    ], Grid.prototype, \"rowDropSettings\", void 0);\n    __decorate([\n        Complex({}, FilterSettings)\n    ], Grid.prototype, \"filterSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowGrouping\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnMenu\", void 0);\n    __decorate([\n        Complex({}, GroupSettings)\n    ], Grid.prototype, \"groupSettings\", void 0);\n    __decorate([\n        Complex({}, EditSettings)\n    ], Grid.prototype, \"editSettings\", void 0);\n    __decorate([\n        Collection([], AggregateRow)\n    ], Grid.prototype, \"aggregates\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnChooser\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"width\", void 0);\n    __decorate([\n        Property('default')\n    ], Grid.prototype, \"gridLines\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"rowTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"detailTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"childGrid\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"queryString\", void 0);\n    __decorate([\n        Property('allpages')\n    ], Grid.prototype, \"printMode\", void 0);\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"query\", void 0);\n    __decorate([\n        Property('USD')\n    ], Grid.prototype, \"currencyCode\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"contextMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"columnMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"pagerTemplate\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenRows\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenColumns\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"recordDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"printComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeExcelExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePdfExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"detailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beginEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"onResize\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"checkBoxChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeCopy\", void 0);\n    Grid = __decorate([\n        NotifyPropertyChanges\n    ], Grid);\n    return Grid;\n}(Component));\nexport { Grid };\nGrid.Inject(Selection);\n","import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement, closest, classList } from '@syncfusion/ej2-base';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\n/**\n *\n * `Sort` module is used to handle sorting action.\n */\nvar Sort = /** @class */ (function () {\n    /**\n     * Constructor for Grid sorting module\n     * @hidden\n     */\n    function Sort(parent, sortSettings, sortedColumns, locator) {\n        this.contentRefresh = true;\n        this.isModelChanged = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.sortSettings = sortSettings;\n        this.sortedColumns = sortedColumns;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * The function used to update sortSettings\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.updateModel = function () {\n        var sortedColumn = { field: this.columnName, direction: this.direction };\n        var index;\n        var gCols = this.parent.groupSettings.columns;\n        var flag = false;\n        if (!this.isMultiSort) {\n            if (!gCols.length) {\n                this.sortSettings.columns = [sortedColumn];\n            }\n            else {\n                var sortedCols = [];\n                for (var i = 0, len = gCols.length; i < len; i++) {\n                    index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n                    if (this.columnName === gCols[i]) {\n                        flag = true;\n                        sortedCols.push(sortedColumn);\n                    }\n                    else {\n                        var sCol = this.getSortColumnFromField(gCols[i]);\n                        sortedCols.push({ field: sCol.field, direction: sCol.direction });\n                    }\n                }\n                if (!flag) {\n                    sortedCols.push(sortedColumn);\n                }\n                this.sortSettings.columns = sortedCols;\n            }\n        }\n        else {\n            index = this.getSortedColsIndexByField(this.columnName);\n            if (index > -1) {\n                this.sortSettings.columns.splice(index, 1);\n            }\n            this.sortSettings.columns.push(sortedColumn);\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n        this.parent.dataBind();\n        this.lastSortedCol = this.columnName;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n        } : { requestType: 'sorting', type: events.actionComplete };\n        this.isRemove = false;\n        this.parent.trigger(events.actionComplete, extend(e, args));\n    };\n    /**\n     * Sorts a column with given options.\n     * @param {string} columnName - Defines the column name to sort.\n     * @param {SortDirection} direction - Defines the direction of sorting for field.\n     * @param {boolean} isMultiSort - Specifies whether the previous sorted columns to be maintained.\n     * @return {void}\n     */\n    Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        var gObj = this.parent;\n        if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n            return;\n        }\n        if (!gObj.allowMultiSorting) {\n            isMultiSort = gObj.allowMultiSorting;\n        }\n        if (this.isActionPrevent()) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.sortColumn,\n                arg1: columnName, arg2: direction, arg3: isMultiSort\n            });\n            return;\n        }\n        this.columnName = columnName;\n        this.direction = direction;\n        this.isMultiSort = isMultiSort;\n        this.removeSortIcons();\n        var column = gObj.getColumnHeaderByField(columnName);\n        this.updateSortedCols(columnName, isMultiSort);\n        this.updateModel();\n    };\n    Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n        if (!isMultiSort) {\n            if (this.parent.allowGrouping) {\n                for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n                    if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n                        this.sortedColumns.splice(i, 1);\n                        len--;\n                        i--;\n                    }\n                }\n            }\n            else {\n                this.sortedColumns.splice(0, this.sortedColumns.length);\n            }\n        }\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            this.sortedColumns.push(columnName);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.contentRefresh) {\n            var args = this.sortSettings.columns.length ? {\n                columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionBegin\n            } : { requestType: 'sorting', type: events.actionBegin };\n            this.parent.notify(events.modelChanged, args);\n        }\n        this.removeSortIcons();\n        this.addSortIcons();\n    };\n    /**\n     * Clears all the sorted columns of Grid.\n     * @return {void}\n     */\n    Sort.prototype.clearSorting = function () {\n        var cols = getActualPropFromColl(this.sortSettings.columns);\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeSortColumn(cols[i].field);\n        }\n    };\n    Sort.prototype.isActionPrevent = function () {\n        return isActionPrevent(this.parent);\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.removeSortColumn = function (field) {\n        var gObj = this.parent;\n        var cols = this.sortSettings.columns;\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n            return;\n        }\n        this.removeSortIcons();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n                    continue;\n                }\n                this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n                cols.splice(i, 1);\n                this.isRemove = true;\n                if (this.isModelChanged) {\n                    this.parent.notify(events.modelChanged, {\n                        requestType: 'sorting', type: events.actionBegin\n                    });\n                }\n                break;\n            }\n        }\n        this.addSortIcons();\n    };\n    Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n        var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Sort.prototype.getModuleName = function () {\n        return 'sort';\n    };\n    Sort.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.isMultiSort = this.sortSettings.columns.length > 1;\n            for (var _i = 0, _a = gObj.sortSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                if (this.sortedColumns.indexOf(col.field) > -1) {\n                    this.sortColumn(col.field, col.direction, true);\n                }\n            }\n            this.isMultiSort = false;\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.sortComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressed, this);\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.sortComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressed);\n    };\n    /**\n     * To destroy the sorting\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.destroy = function () {\n        this.isModelChanged = false;\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n        this.clearSorting();\n        this.isModelChanged = true;\n        this.removeEventListener();\n    };\n    Sort.prototype.clickHandler = function (e) {\n        this.popUpClickHandler(e);\n        var target = closest(e.target, '.e-headercell');\n        if (target && !e.target.classList.contains('e-grptogglebtn') &&\n            !e.target.classList.contains('e-stackedheadercell') &&\n            !e.target.classList.contains('e-stackedheadercelldiv') &&\n            !(target.classList.contains('e-resized')) &&\n            !e.target.classList.contains('e-columnmenu') &&\n            !e.target.classList.contains('e-filtermenudiv')) {\n            var gObj = this.parent;\n            var colObj = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            var direction = !target.querySelectorAll('.e-ascending').length ? 'ascending' :\n                'descending';\n            if (colObj.type !== 'checkbox') {\n                this.initiateSort(target, e, colObj);\n                if (Browser.isDevice) {\n                    this.showPopUp(e);\n                }\n            }\n        }\n        if (target) {\n            target.classList.remove('e-resized');\n        }\n    };\n    Sort.prototype.keyPressed = function (e) {\n        if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')) {\n            var target = this.focus.getFocusedElement();\n            if (!target || !target.classList.contains('e-headercell') || (this.parent.frozenColumns || this.parent.frozenRows)) {\n                return;\n            }\n            var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            this.initiateSort(target, e, col);\n        }\n    };\n    Sort.prototype.initiateSort = function (target, e, column) {\n        var gObj = this.parent;\n        var field = column.field;\n        var direction = !target.querySelectorAll('.e-ascending').length ? 'ascending' :\n            'descending';\n        if (e.shiftKey || (this.sortSettings.allowUnsort && target.querySelectorAll('.e-descending').length)\n            && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n            this.removeSortColumn(field);\n        }\n        else {\n            this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n        }\n    };\n    Sort.prototype.showPopUp = function (e) {\n        var target = closest(e.target, '.e-headercell');\n        if (!isNullOrUndefined(target) || this.parent.isContextMenuOpen()) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n        }\n    };\n    Sort.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-sortdirect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSortMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSortMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Sort.prototype.addSortIcons = function () {\n        var gObj = this.parent;\n        var header;\n        var filterElement;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            this.aria.setSort(header, cols[i].direction);\n            if (this.isMultiSort && cols.length > 1) {\n                header.querySelector('.e-headercelldiv').insertBefore(createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n            }\n            filterElement = header.querySelector('.e-sortfilterdiv');\n            if (cols[i].direction === 'ascending') {\n                classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n            }\n            else {\n                classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n            }\n        }\n    };\n    Sort.prototype.removeSortIcons = function (position) {\n        var gObj = this.parent;\n        var header;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n            if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n                continue;\n            }\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            this.aria.setSort(header, 'none');\n            classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n            if (header.querySelector('.e-sortnumber')) {\n                header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n            }\n        }\n    };\n    Sort.prototype.getSortColumnFromField = function (field) {\n        for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n            if (this.sortSettings.columns[i].field === field) {\n                return this.sortSettings.columns[i];\n            }\n        }\n        return false;\n    };\n    Sort.prototype.updateAriaAttr = function () {\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (fieldNames.indexOf(col) === -1) {\n                continue;\n            }\n            var header = this.parent.getColumnHeaderByField(col);\n            this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n        }\n    };\n    Sort.prototype.refreshSortIcons = function () {\n        this.removeSortIcons();\n        this.isMultiSort = true;\n        this.removeSortIcons();\n        this.addSortIcons();\n        this.isMultiSort = false;\n        this.updateAriaAttr();\n    };\n    return Sort;\n}());\nexport { Sort };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { createElement, classList, append } from '@syncfusion/ej2-base';\n/**\n * `NumericContainer` module handles rendering and refreshing numeric container.\n */\nvar NumericContainer = /** @class */ (function () {\n    /**\n     * Constructor for numericContainer module\n     * @hidden\n     */\n    function NumericContainer(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render numericContainer\n     * @hidden\n     */\n    NumericContainer.prototype.render = function () {\n        this.pagerElement = this.pagerModule.element;\n        this.renderNumericContainer();\n        this.refreshNumericLinks();\n        this.wireEvents();\n    };\n    /**\n     * Refreshes the numeric container of Pager.\n     */\n    NumericContainer.prototype.refresh = function () {\n        this.pagerModule.updateTotalPages();\n        if (this.links.length) {\n            this.updateLinksHtml();\n        }\n        this.updateStyles();\n    };\n    /**\n     * The function is used to refresh refreshNumericLinks\n     * @hidden\n     */\n    NumericContainer.prototype.refreshNumericLinks = function () {\n        var link;\n        var pagerObj = this.pagerModule;\n        var div = pagerObj.element.querySelector('.e-numericcontainer');\n        var frag = document.createDocumentFragment();\n        div.innerHTML = '';\n        for (var i = 1; i <= pagerObj.pageCount; i++) {\n            link = createElement('a', {\n                className: 'e-link e-numericitem e-spacing e-pager-default',\n                attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i }\n            });\n            if (pagerObj.currentPage === i) {\n                classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n            }\n            frag.appendChild(link);\n        }\n        div.appendChild(frag);\n        this.links = [].slice.call(div.childNodes);\n    };\n    /**\n     * Binding events to the element while component creation\n     * @hidden\n     */\n    NumericContainer.prototype.wireEvents = function () {\n        EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy\n     * @hidden\n     */\n    NumericContainer.prototype.unwireEvents = function () {\n        EventHandler.remove(this.pagerElement, 'click', this.clickHandler);\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    NumericContainer.prototype.destroy = function () {\n        this.unwireEvents();\n    };\n    NumericContainer.prototype.renderNumericContainer = function () {\n        this.element = createElement('div', {\n            className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n        });\n        this.renderFirstNPrev(this.element);\n        this.renderPrevPagerSet(this.element);\n        this.element.appendChild(createElement('div', { className: 'e-numericcontainer' }));\n        this.renderNextPagerSet(this.element);\n        this.renderNextNLast(this.element);\n        this.pagerModule.element.appendChild(this.element);\n    };\n    NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n        this.first = createElement('div', {\n            className: 'e-first e-icons e-icon-first',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.prev = createElement('div', {\n            className: 'e-prev e-icons e-icon-prev',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.first, this.prev], pagerContainer);\n    };\n    NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n        this.PP = createElement('a', {\n            className: 'e-link e-pp e-spacing', innerHTML: '...',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n                'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                tabindex: '-1'\n            }\n        });\n        pagerContainer.appendChild(this.PP);\n    };\n    NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n        this.NP = createElement('a', {\n            className: 'e-link e-np e-spacing',\n            innerHTML: '...', attrs: {\n                title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n                'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                tabindex: '-1'\n            }\n        });\n        pagerContainer.appendChild(this.NP);\n    };\n    NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n        this.next = createElement('div', {\n            className: 'e-next e-icons e-icon-next',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.last = createElement('div', {\n            className: 'e-last e-icons e-icon-last',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.next, this.last], pagerContainer);\n    };\n    NumericContainer.prototype.clickHandler = function (e) {\n        var pagerObj = this.pagerModule;\n        var target = e.target;\n        pagerObj.previousPageNo = pagerObj.currentPage;\n        if (!target.classList.contains('e-disable') && !isNullOrUndefined(target.getAttribute('index'))) {\n            pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n            pagerObj.dataBind();\n        }\n        return false;\n    };\n    NumericContainer.prototype.updateLinksHtml = function () {\n        var pagerObj = this.pagerModule;\n        var currentPageSet;\n        var pageNo;\n        pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n        if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n            pagerObj.currentPage = pagerObj.totalPages;\n        }\n        currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n        if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n            currentPageSet = currentPageSet - 1;\n        }\n        for (var i = 0; i < pagerObj.pageCount; i++) {\n            pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n            if (pageNo <= pagerObj.totalPages) {\n                this.links[i].style.display = '';\n                this.links[i].setAttribute('index', pageNo.toString());\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                if (pagerObj.currentPage !== pageNo) {\n                    this.links[i].classList.add('e-pager-default');\n                }\n                else {\n                    this.links[i].classList.remove('e-pager-default');\n                }\n            }\n            else {\n                this.links[i].style.display = 'none';\n            }\n            classList(this.links[i], [], ['e-currentitem', 'e-active']);\n        }\n        this.first.setAttribute('index', '1');\n        this.last.setAttribute('index', pagerObj.totalPages.toString());\n        this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n        this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n        this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n        this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n    };\n    NumericContainer.prototype.updateStyles = function () {\n        this.updateFirstNPrevStyles();\n        this.updatePrevPagerSetStyles();\n        this.updateNextPagerSetStyles();\n        this.updateNextNLastStyles();\n        if (this.links.length) {\n            classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n        }\n    };\n    NumericContainer.prototype.updateFirstNPrevStyles = function () {\n        var firstPage = ['e-firstpage', 'e-pager-default'];\n        var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n        var prevPage = ['e-prevpage', 'e-pager-default'];\n        var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n        if (this.pagerModule.currentPage > 1) {\n            classList(this.prev, prevPage, prevPageDisabled);\n            classList(this.first, firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n        }\n        else {\n            classList(this.prev, prevPageDisabled, prevPage);\n            classList(this.first, firstPageDisabled, firstPage);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n        }\n    };\n    NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n        if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n            classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n        else {\n            classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n    };\n    NumericContainer.prototype.updateNextPagerSetStyles = function () {\n        var pagerObj = this.pagerModule;\n        var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n        if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n            classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n        else {\n            classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n    };\n    NumericContainer.prototype.updateNextNLastStyles = function () {\n        var lastPage = ['e-lastpage', 'e-pager-default'];\n        var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n        var nextPage = ['e-nextpage', 'e-pager-default'];\n        var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n        var pagerObj = this.pagerModule;\n        if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n            classList(this.last, lastPageDisabled, lastPage);\n            classList(this.next, nextPageDisabled, nextPage);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n        }\n        else {\n            classList(this.last, lastPage, lastPageDisabled);\n            classList(this.next, nextPage, nextPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n        }\n    };\n    return NumericContainer;\n}());\nexport { NumericContainer };\n","import { createElement, append } from '@syncfusion/ej2-base';\n/**\n * `PagerMessage` module is used to display pager information.\n */\nvar PagerMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @hidden\n     */\n    function PagerMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render pager message\n     * @hidden\n     */\n    PagerMessage.prototype.render = function () {\n        var div = createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n        this.pageNoMsgElem = createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n        this.pageCountMsgElem = createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n        append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n        this.pagerModule.element.appendChild(div);\n        this.refresh();\n    };\n    /**\n     * Refreshes the pager information.\n     */\n    PagerMessage.prototype.refresh = function () {\n        var pagerObj = this.pagerModule;\n        this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n                pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n        this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n        this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n    };\n    /**\n     * Hides the Pager information.\n     */\n    PagerMessage.prototype.hideMessage = function () {\n        if (this.pageNoMsgElem) {\n            this.pageNoMsgElem.style.display = 'none';\n        }\n        if (this.pageCountMsgElem) {\n            this.pageCountMsgElem.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the Pager information.\n     */\n    PagerMessage.prototype.showMessage = function () {\n        if (!this.pageNoMsgElem) {\n            this.render();\n        }\n        this.pageNoMsgElem.style.display = '';\n        this.pageCountMsgElem.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerMessage.prototype.destroy = function () {\n        //destroy\n    };\n    PagerMessage.prototype.format = function (str, args) {\n        var regx;\n        for (var i = 0; i < args.length; i++) {\n            regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n            str = str.replace(regx, args[i].toString());\n        }\n        return str;\n    };\n    return PagerMessage;\n}());\nexport { PagerMessage };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, L10n, Browser } from '@syncfusion/ej2-base';\nimport { createElement, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Property, Event, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { NumericContainer } from './numeric-container';\nimport { PagerMessage } from './pager-message';\nimport { appendChildren } from '../grid/base/util';\n/**\n * Represents the `Pager` component.\n * ```html\n * <div id=\"pager\"/>\n * ```\n * ```typescript\n * <script>\n *   var pagerObj = new Pager({ totalRecordsCount: 50, pageSize:10 });\n *   pagerObj.appendTo(\"#pager\");\n * </script>\n * ```\n */\nvar Pager = /** @class */ (function (_super) {\n    __extends(Pager, _super);\n    /**\n     * Constructor for creating the component.\n     * @hidden\n     */\n    function Pager(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.defaultConstants = {\n            currentPageInfo: '{0} of {1} pages',\n            totalItemsInfo: '({0} items)',\n            firstPageTooltip: 'Go to first page',\n            lastPageTooltip: 'Go to last page',\n            nextPageTooltip: 'Go to next page',\n            previousPageTooltip: 'Go to previous page',\n            nextPagerTooltip: 'Go to next pager',\n            previousPagerTooltip: 'Go to previous pager',\n            pagerDropDown: 'Items per page'\n        };\n        /**\n         * `containerModule` is used to manipulate numeric container behavior of Pager.\n         */\n        _this.containerModule = new NumericContainer(_this);\n        /**\n         * `pagerMessageModule` is used to manipulate pager message of Pager.\n         */\n        _this.pagerMessageModule = new PagerMessage(_this);\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     * @hidden\n     */\n    Pager.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableExternalMessage) {\n            modules.push({\n                member: 'externalMessage',\n                args: [this]\n            });\n        }\n        if (this.checkpagesizes()) {\n            modules.push({\n                member: 'pagerdropdown',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Initialize the event handler\n     * @hidden\n     */\n    Pager.prototype.preRender = function () {\n        //preRender\n    };\n    /**\n     * To Initialize the component rendering\n     */\n    Pager.prototype.render = function () {\n        if (this.template) {\n            this.pagerTemplate();\n        }\n        else {\n            this.initLocalization();\n            this.updateRTL();\n            this.totalRecordsCount = this.totalRecordsCount || 0;\n            this.renderFirstPrevDivForDevice();\n            this.containerModule.render();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.render();\n            }\n            this.renderNextLastDivForDevice();\n            if (this.checkpagesizes()) {\n                this.pagerdropdownModule.render();\n            }\n            this.addAriaLabel();\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.render();\n            }\n            this.refresh();\n            this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @hidden\n     */\n    Pager.prototype.getPersistData = function () {\n        var keyEntity = ['currentPage', 'pageSize'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To destroy the Pager component.\n     * @method destroy\n     * @return {void}\n     */\n    Pager.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.containerModule.destroy();\n        this.pagerMessageModule.destroy();\n        this.element.innerHTML = '';\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Pager.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.isDestroyed) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'pageCount':\n                    this.containerModule.refreshNumericLinks();\n                    this.containerModule.refresh();\n                    break;\n                case 'currentPage':\n                    if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n                        this.currentPageChanged();\n                    }\n                    break;\n                case 'pageSize':\n                case 'totalRecordsCount':\n                case 'customText':\n                    this.refresh();\n                    break;\n                case 'pageSizes':\n                    if (this.checkpagesizes()) {\n                        this.pagerdropdownModule.destroy();\n                        this.pagerdropdownModule.render();\n                    }\n                    this.refresh();\n                    break;\n                case 'template':\n                    this.templateFn = this.compile(this.template);\n                    this.refresh();\n                    break;\n                case 'locale':\n                    this.initLocalization();\n                    this.refresh();\n                    break;\n                case 'enableExternalMessage':\n                    if (this.enableExternalMessage) {\n                        this.externalMessageModule.render();\n                    }\n                    break;\n                case 'externalMessage':\n                    if (this.externalMessageModule) {\n                        this.externalMessageModule.refresh();\n                    }\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'enablePagerMessage':\n                    if (this.enablePagerMessage) {\n                        this.pagerMessageModule.showMessage();\n                    }\n                    else {\n                        this.pagerMessageModule.hideMessage();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    Pager.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    /**\n     * Navigate to target page by given number.\n     * @param  {number} pageNo - Defines page number.\n     * @return {void}\n     */\n    Pager.prototype.goToPage = function (pageNo) {\n        if (this.checkGoToPage(pageNo)) {\n            this.currentPage = pageNo;\n            this.dataBind();\n        }\n    };\n    Pager.prototype.checkpagesizes = function () {\n        if (this.pageSizes === true || this.pageSizes.length) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n        if (newPageNo !== this.currentPage) {\n            this.previousPageNo = this.currentPage;\n        }\n        if (!isNullOrUndefined(oldPageNo)) {\n            this.previousPageNo = oldPageNo;\n        }\n        if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.currentPageChanged = function () {\n        if (this.enableQueryString) {\n            this.updateQueryString(this.currentPage);\n        }\n        var args = { currentPage: this.currentPage, cancel: false };\n        this.trigger('click', args);\n        if (!args.cancel) {\n            this.refresh();\n        }\n    };\n    Pager.prototype.pagerTemplate = function () {\n        var result;\n        this.element.classList.add('e-pagertemplate');\n        this.compile(this.template);\n        var data = {\n            currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n            totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n        };\n        result = this.getPagerTemplate()(data);\n        appendChildren(this.element, result);\n    };\n    /** @hidden */\n    Pager.prototype.updateTotalPages = function () {\n        this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n            (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n    };\n    /** @hidden */\n    Pager.prototype.getPagerTemplate = function () {\n        return this.templateFn;\n    };\n    Pager.prototype.compile = function (template) {\n        if (template) {\n            var e = void 0;\n            try {\n                if (document.querySelectorAll(template).length) {\n                    this.templateFn = templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (e) {\n                this.templateFn = templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Refreshes page count, pager information and external message.\n     * @return {void}\n     */\n    Pager.prototype.refresh = function () {\n        if (this.template) {\n            this.element.innerHTML = '';\n            this.updateTotalPages();\n            this.pagerTemplate();\n        }\n        else {\n            this.updateRTL();\n            this.containerModule.refresh();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.refresh();\n            }\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.refresh();\n            }\n        }\n    };\n    Pager.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Pager.prototype.initLocalization = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultConstants, this.locale);\n    };\n    Pager.prototype.updateQueryString = function (value) {\n        var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n        window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n    };\n    Pager.prototype.getUpdatedURL = function (uri, key, value) {\n        var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n        if (uri.match(regx)) {\n            return uri.replace(regx, '$1' + key + '=' + value + '$2');\n        }\n        else {\n            var hash = '';\n            if (uri.indexOf('#') !== -1) {\n                hash = uri.replace(/.*#/, '#');\n                uri = uri.replace(/#.*/, '');\n            }\n            return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n        }\n    };\n    Pager.prototype.renderFirstPrevDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mfirst e-icons e-icon-first',\n            attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mprev e-icons e-icon-prev',\n            attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.renderNextLastDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mnext e-icons e-icon-next',\n            attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mlast e-icons e-icon-last',\n            attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.addAriaLabel = function () {\n        var _this = this;\n        var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n        if (!Browser.isDevice) {\n            classList.forEach(function (value) {\n                var element = _this.element.querySelector(value);\n                element.setAttribute('aria-label', element.getAttribute('title'));\n            });\n        }\n    };\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableExternalMessage\", void 0);\n    __decorate([\n        Property(true)\n    ], Pager.prototype, \"enablePagerMessage\", void 0);\n    __decorate([\n        Property(12)\n    ], Pager.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(10)\n    ], Pager.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], Pager.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"externalMessage\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"template\", void 0);\n    __decorate([\n        Property('')\n    ], Pager.prototype, \"customText\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"dropDownChanged\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"created\", void 0);\n    Pager = __decorate([\n        NotifyPropertyChanges\n    ], Pager);\n    return Pager;\n}(Component));\nexport { Pager };\n","import { createElement, remove } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\n/**\n * `PagerDropDown` module handles selected pageSize from DropDownList.\n */\nvar PagerDropDown = /** @class */ (function () {\n    /**\n     * Constructor for pager module\n     * @hidden\n     */\n    function PagerDropDown(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.getModuleName = function () {\n        return 'pagerdropdown';\n    };\n    /**\n     * The function is used to render pager dropdown\n     * @hidden\n     */\n    PagerDropDown.prototype.render = function () {\n        var pagerObj = this.pagerModule;\n        this.pagerDropDownDiv = createElement('div', { className: 'e-pagesizes' });\n        var dropDownDiv = createElement('div', { className: 'e-pagerdropdown' });\n        var defaultTextDiv = createElement('div', { className: 'e-pagerconstant' });\n        var input = createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n        this.pagerCons = createElement('span', { className: 'e-constant', innerHTML: this.pagerModule.getLocalizedLabel('pagerDropDown') });\n        dropDownDiv.appendChild(input);\n        defaultTextDiv.appendChild(this.pagerCons);\n        this.pagerDropDownDiv.appendChild(dropDownDiv);\n        this.pagerDropDownDiv.appendChild(defaultTextDiv);\n        this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n        var pageSizesModule = this.pagerModule.pageSizes;\n        var pageSizesArray = (pageSizesModule.length ? pageSizesModule : [5, 10, 12, 20]);\n        var defaultValue = (pageSizesArray).indexOf(this.pagerModule.pageSize) > -1 ? this.pagerModule.pageSize : pageSizesArray[0];\n        this.dropDownListObject = new DropDownList({\n            dataSource: pageSizesArray,\n            value: defaultValue,\n            change: this.onChange.bind(this)\n        });\n        this.dropDownListObject.appendTo(input);\n        pagerObj.pageSize = defaultValue;\n        pagerObj.dataBind();\n        pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n    };\n    /**\n     * For internal use only - Get the pagesize.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.onChange = function (e) {\n        this.pagerModule.pageSize = this.dropDownListObject.value;\n        this.pagerModule.dataBind();\n        this.pagerModule.trigger('dropDownChanged', { pageSize: this.dropDownListObject.value });\n    };\n    /**\n     * To destroy the Pagerdropdown\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerDropDown.prototype.destroy = function (args) {\n        if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n            this.dropDownListObject.destroy();\n            remove(this.pagerDropDownDiv);\n        }\n    };\n    return PagerDropDown;\n}());\nexport { PagerDropDown };\n","import { createElement, remove } from '@syncfusion/ej2-base';\n/**\n * `ExternalMessage` module is used to display user provided message.\n */\nvar ExternalMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @param  {Pager} pagerModule?\n     * @returns defaultType\n     * @hidden\n     */\n    function ExternalMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExternalMessage.prototype.getModuleName = function () {\n        return 'externalMessage';\n    };\n    /**\n     * The function is used to render pager externalMessage\n     * @hidden\n     */\n    ExternalMessage.prototype.render = function () {\n        this.element = createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n        this.pagerModule.element.appendChild(this.element);\n        this.refresh();\n    };\n    /**\n     * Refreshes the external message of Pager.\n     */\n    ExternalMessage.prototype.refresh = function () {\n        if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n            this.showMessage();\n            this.element.innerHTML = this.pagerModule.externalMessage;\n        }\n        else {\n            this.hideMessage();\n        }\n    };\n    /**\n     * Hides the external message of Pager.\n     */\n    ExternalMessage.prototype.hideMessage = function () {\n        this.element.style.display = 'none';\n    };\n    /**\n     * Shows the external message of the Pager.\n     */\n    ExternalMessage.prototype.showMessage = function () {\n        this.element.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ExternalMessage.prototype.destroy = function () {\n        remove(this.element);\n    };\n    return ExternalMessage;\n}());\nexport { ExternalMessage };\n","import { extend } from '@syncfusion/ej2-base';\nimport { remove, createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Pager } from '../../pager/pager';\nimport { PagerDropDown } from '../../pager/pager-dropdown';\nimport { ExternalMessage } from '../../pager/external-message';\nimport { extend as gridExtend, getActualProperties, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nPager.Inject(ExternalMessage, PagerDropDown);\n/**\n * `Page` module is used to render pager and handle paging action.\n */\nvar Page = /** @class */ (function () {\n    /**\n     * Constructor for the Grid paging module\n     * @hidden\n     */\n    function Page(parent, pageSettings) {\n        this.parent = parent;\n        this.pageSettings = pageSettings;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Page.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * The function used to render pager from grid pageSettings\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.render = function () {\n        var gObj = this.parent;\n        var pagerObj;\n        this.pagerDestroy();\n        if (!isNullOrUndefined(this.parent.pagerTemplate)) {\n            this.pageSettings.template = this.parent.pagerTemplate;\n        }\n        this.element = createElement('div', { className: 'e-gridpager' });\n        pagerObj = gridExtend({}, extend({}, getActualProperties(this.pageSettings)), {\n            click: this.clickHandler.bind(this),\n            dropDownChanged: this.onSelect.bind(this),\n            enableRtl: gObj.enableRtl, locale: gObj.locale,\n            created: this.addAriaAttr.bind(this)\n        }, ['parentObj', 'propName']);\n        this.pagerObj = new Pager(pagerObj);\n    };\n    Page.prototype.onSelect = function (e) {\n        this.pageSettings.pageSize = e.pageSize;\n        this.pageSettings.currentPage = 1;\n    };\n    Page.prototype.addAriaAttr = function () {\n        var _this = this;\n        if (!(this.pageSettings.template)) {\n            var numericContainer = this.element.querySelector('.e-numericcontainer');\n            var links = numericContainer.querySelectorAll('a');\n            for (var i = 0; i < links.length; i++) {\n                if (this.parent.getContentTable()) {\n                    links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n                }\n            }\n            var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n            classList.forEach(function (value) {\n                var element = _this.element.querySelector(value);\n                if (_this.parent.getContentTable()) {\n                    element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n                }\n            });\n        }\n    };\n    Page.prototype.dataReady = function (e) {\n        this.updateModel(e);\n    };\n    /**\n     * Refreshes the page count, pager information and external message.\n     * @return {void}\n     */\n    Page.prototype.refresh = function () {\n        this.pagerObj.refresh();\n    };\n    /**\n     * Navigate to target page by given number.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Page.prototype.goToPage = function (pageNo) {\n        this.pagerObj.goToPage(pageNo);\n    };\n    /**\n     * The function used to update pageSettings model\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.updateModel = function (e) {\n        this.parent.pageSettings.totalRecordsCount = e.count;\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n            type: events.actionComplete\n        }));\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            this.pagerObj[prop] = newProp[prop];\n        }\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        if (this.isForceCancel || isActionPrevent(gObj)) {\n            if (!this.isForceCancel) {\n                gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n                this.isForceCancel = true;\n                this.pagerObj.currentPage = gObj.pageSettings.currentPage;\n                this.pagerObj.dataBind();\n            }\n            else {\n                this.isForceCancel = false;\n            }\n            e.cancel = true;\n            return;\n        }\n        var prevPage = this.pageSettings.currentPage;\n        this.pageSettings.currentPage = e.currentPage;\n        this.parent.notify(events.modelChanged, {\n            requestType: 'paging',\n            previousPage: prevPage,\n            currentPage: e.currentPage,\n            type: events.actionBegin\n        });\n    };\n    Page.prototype.keyPressHandler = function (e) {\n        if (this.canSkipAction(e.action)) {\n            return;\n        }\n        if (e.action in keyActions) {\n            e.preventDefault();\n            this.element.querySelector(keyActions[e.action]).click();\n        }\n    };\n    Page.prototype.canSkipAction = function (action) {\n        var page = {\n            pageUp: function (el) { return el.scrollTop !== 0; },\n            pageDown: function (el) { return !(el.scrollTop >= el.scrollHeight - el.clientHeight); }\n        };\n        var activeElement = document.activeElement;\n        if (activeElement.classList.contains('e-content') &&\n            activeElement.isEqualNode(this.parent.getContent().firstElementChild) && ['pageUp', 'pageDown'].indexOf(action) !== -1) {\n            return page[action](this.parent.getContent().firstChild);\n        }\n        return false;\n    };\n    /**\n     * Defines the text of external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Page.prototype.updateExternalMessage = function (message) {\n        if (!this.pagerObj.enableExternalMessage) {\n            this.pagerObj.enableExternalMessage = true;\n            this.pagerObj.dataBind();\n        }\n        this.pagerObj.externalMessage = message;\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.appendToElement = function (e) {\n        this.parent.element.appendChild(this.element);\n        this.parent.setGridPager(this.element);\n        this.pagerObj.appendTo(this.element);\n    };\n    Page.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n            this.appendToElement();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.render,\n            end: this.appendToElement,\n            ready: this.dataReady,\n            complete: this.onActionComplete,\n            updateLayout: this.enableAfterRender,\n            inboundChange: this.onPropertyChanged,\n            keyPress: this.keyPressHandler\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.handlers.load, this);\n        this.parent.on(events.initialEnd, this.handlers.end, this); //For initial rendering\n        this.parent.on(events.dataReady, this.handlers.ready, this);\n        this.parent.on(events.pageComplete, this.handlers.complete, this);\n        this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n        this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n        this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.handlers.load);\n        this.parent.off(events.initialEnd, this.handlers.end); //For initial rendering\n        this.parent.off(events.dataReady, this.handlers.ready);\n        this.parent.off(events.pageComplete, this.handlers.complete);\n        this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n        this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n        this.parent.off(events.keyPressed, this.handlers.keyPress);\n    };\n    /**\n     * To destroy the pager\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.destroy = function () {\n        this.removeEventListener();\n        this.pagerDestroy();\n    };\n    Page.prototype.pagerDestroy = function () {\n        if (this.pagerObj && !this.pagerObj.isDestroyed) {\n            this.pagerObj.destroy();\n            remove(this.element);\n        }\n    };\n    return Page;\n}());\nexport { Page };\n/**\n * @hidden\n */\nvar keyActions = {\n    pageUp: '.e-prev',\n    pageDown: '.e-next',\n    ctrlAltPageDown: '.e-last',\n    ctrlAltPageUp: '.e-first',\n    altPageUp: '.e-pp',\n    altPageDown: '.e-np'\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\nimport { createElement, attributes } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * FilterCellRenderer class which responsible for building filter cell.\n * @hidden\n */\nvar FilterCellRenderer = /** @class */ (function (_super) {\n    __extends(FilterCellRenderer, _super);\n    function FilterCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TH', { className: 'e-filterbarcell' });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    FilterCellRenderer.prototype.getGui = function () {\n        return createElement('div');\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    FilterCellRenderer.prototype.render = function (cell, data) {\n        var tr = this.parent.element.querySelector('.e-filterbar');\n        var node = this.element.cloneNode();\n        var innerDIV = this.getGui();\n        var input;\n        var column = cell.column;\n        if (column.type !== 'checkbox') {\n            tr.appendChild(node);\n            if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                node.classList.add('e-fltrtemp');\n                attributes(innerDIV, {\n                    'class': 'e-fltrtempdiv'\n                });\n                if (isNullOrUndefined(column.filterBarTemplate.create)) {\n                    input = createElement('input', {\n                        id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n                        attrs: { type: 'search', title: column.headerText }\n                    });\n                    innerDIV.appendChild(input);\n                }\n                else {\n                    var args = { column: column, node: Element };\n                    var temp = column.filterBarTemplate.create;\n                    if (typeof temp === 'string') {\n                        temp = getValue(temp, window);\n                    }\n                    input = temp(args);\n                    if (typeof input === 'string') {\n                        var div = createElement('div');\n                        div.innerHTML = input;\n                        input = div.firstChild;\n                    }\n                    attributes(innerDIV, {\n                        class: 'e-filterUi_input e-filtertext e-fltrTemp',\n                        title: column.headerText,\n                        id: column.field + '_filterBarcell',\n                    });\n                    innerDIV.appendChild(input);\n                }\n            }\n            else {\n                attributes(innerDIV, {\n                    'class': 'e-filterdiv e-fltrinputdiv'\n                });\n                input = createElement('input', {\n                    id: column.field + '_filterBarcell', className: 'e-filtertext',\n                    attrs: {\n                        type: 'search', title: column.headerText + cell.attributes.title,\n                        value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n                    }\n                });\n                innerDIV.appendChild(input);\n                innerDIV.appendChild(createElement('span', {\n                    className: 'e-cancel e-hide e-icons e-icon-hide',\n                    attrs: { 'aria-label': 'clear filter cell', tabindex: '-1' }\n                }));\n            }\n            //TODO: apply intial filtering\n            if (column.allowFiltering === false || column.field === '' || isNullOrUndefined(column.field)) {\n                input.setAttribute('disabled', 'true');\n                input.classList.add('e-disable');\n            }\n            if (!column.visible) {\n                node.classList.add('e-hide');\n            }\n            this.appendHtml(node, innerDIV);\n            if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                var templateWrite = column.filterBarTemplate.write;\n                var args = { element: input, column: column };\n                if (typeof templateWrite === 'string') {\n                    templateWrite = getValue(templateWrite, window);\n                }\n                templateWrite.call(this, args);\n            }\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHTML\n     * @returns Element\n     */\n    FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return FilterCellRenderer;\n}(CellRenderer));\nexport { FilterCellRenderer };\n","import { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * `filter operators` render boolean column.\n * @hidden\n */\nvar FlMenuOptrUI = /** @class */ (function () {\n    function FlMenuOptrUI(parent, customFltrOperators, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.customFilterOperators = customFltrOperators;\n    }\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.renderOperatorUI = function (dlgConetntEle, target, column, dlgObj) {\n        this.dialogObj = dlgObj;\n        var optr = column.type + 'Operator';\n        this.optrData = this.customOptr = (!isNullOrUndefined(this.parent.filterSettings.operators) &&\n            !isNullOrUndefined(this.parent.filterSettings.operators[optr])) ?\n            this.parent.filterSettings.operators[optr] : this.customFilterOperators[optr];\n        var dropDatasource = this.customOptr;\n        var selectedValue = this.dropSelectedVal(column, optr);\n        var optrDiv = createElement('div', { className: 'e-flm_optrdiv' });\n        dlgConetntEle.appendChild(optrDiv);\n        var optrInput = createElement('input', { id: column.uid + '-floptr' });\n        optrDiv.appendChild(optrInput);\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            open: this.dropDownOpen.bind(this),\n            text: selectedValue\n        });\n        this.dropOptr.appendTo('#' + column.uid + '-floptr');\n    };\n    FlMenuOptrUI.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    FlMenuOptrUI.prototype.dropSelectedVal = function (col, optr) {\n        var selValue = '';\n        var columns = this.parent.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field) {\n                var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', column.operator));\n                selValue = !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n            }\n        }\n        if (selValue === '') {\n            selValue = this.optrData[0].text;\n        }\n        return selValue;\n    };\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.getFlOperator = function () {\n        return this.dropOptr.value;\n    };\n    return FlMenuOptrUI;\n}());\nexport { FlMenuOptrUI };\n","import { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { getZIndexCalcualtion } from '../base/util';\n/**\n * `string filterui` render string column.\n * @hidden\n */\nvar StringFilterUI = /** @class */ (function () {\n    function StringFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    StringFilterUI.prototype.create = function (args) {\n        var _this = this;\n        var data;\n        var floptr;\n        this.instance = createElement('input', { className: 'e-flmenu-input', id: 'strui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.dialogObj = args.dialogObj;\n        this.actObj = new AutoComplete({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            fields: { value: args.column.field },\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            sortOrder: 'Ascending',\n            open: this.openPopup.bind(this),\n            cssClass: 'e-popup-flmenu',\n            focus: function () {\n                _this.actObj.filterType = args.getOptrInstance.getFlOperator();\n            },\n            autofill: true,\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            actionComplete: function (e) {\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObj) {\n                        return mapObj[_this.actObj.fields.value];\n                    }).indexOf(obj[_this.actObj.fields.value]) === index;\n                });\n            }\n        });\n        this.actObj.appendTo(this.instance);\n    };\n    StringFilterUI.prototype.write = function (args) {\n        var columns = this.filterSettings.columns;\n        if (args.filteredValue !== '') {\n            var struiObj = document.querySelector('#strui-' + args.column.uid).ej2_instances[0];\n            struiObj.value = args.filteredValue;\n        }\n    };\n    StringFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var actuiObj = document.querySelector('#strui-' + column.uid).ej2_instances[0];\n        var filterValue = actuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    StringFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return StringFilterUI;\n}());\nexport { StringFilterUI };\n","import { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * `numberfilterui` render number column.\n * @hidden\n */\nvar NumberFilterUI = /** @class */ (function () {\n    function NumberFilterUI(parent, serviceLocator, filterSettings) {\n        this.filterSettings = filterSettings;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    NumberFilterUI.prototype.create = function (args) {\n        this.instance = createElement('input', { className: 'e-flmenu-input', id: 'numberui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.numericTxtObj = new NumericTextBox({\n            format: args.column.format,\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            enableRtl: this.parent.enableRtl,\n        });\n        this.numericTxtObj.appendTo(this.instance);\n    };\n    NumberFilterUI.prototype.write = function (args) {\n        var numberuiObj = document.querySelector('#numberui-' + args.column.uid).ej2_instances[0];\n        numberuiObj.value = args.filteredValue;\n    };\n    NumberFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var numberuiObj = document.querySelector('#numberui-' + column.uid).ej2_instances[0];\n        var filterValue = numberuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    return NumberFilterUI;\n}());\nexport { NumberFilterUI };\n","import { distinctStringValues, getZIndexCalcualtion } from '../base/util';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `boolfilterui` render boolean column.\n * @hidden\n */\nvar BooleanFilterUI = /** @class */ (function () {\n    function BooleanFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    BooleanFilterUI.prototype.create = function (args) {\n        var data;\n        this.elem = createElement('input', { className: 'e-flmenu-input', id: 'bool-ui-' + args.column.uid });\n        args.target.appendChild(this.elem);\n        this.dialogObj = args.dialogObj;\n        this.dropInstance = new DropDownList({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field),\n            fields: { text: args.column.field, value: args.column.field },\n            placeholder: args.localizeText.getConstant('SelectValue'),\n            cssClass: 'e-popup-flmenu',\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            open: this.openPopup.bind(this),\n            actionComplete: this.ddActionComplete\n        });\n        this.dropInstance.appendTo(this.elem);\n    };\n    BooleanFilterUI.prototype.write = function (args) {\n        var drpuiObj = document.querySelector('#bool-ui-' + args.column.uid).ej2_instances[0];\n        drpuiObj.text = !isNullOrUndefined(args.filteredValue) ? args.filteredValue : '';\n    };\n    BooleanFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var drpuiObj = document.querySelector('#bool-ui-' + column.uid).ej2_instances[0];\n        var filterValue = drpuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    BooleanFilterUI.prototype.ddActionComplete = function (e) {\n        e.result = distinctStringValues(e.result);\n    };\n    BooleanFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return BooleanFilterUI;\n}());\nexport { BooleanFilterUI };\n","import { DatePicker } from '@syncfusion/ej2-calendars';\nimport { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Internationalization } from '@syncfusion/ej2-base';\n/**\n * `datefilterui` render date column.\n * @hidden\n */\nvar DateFilterUI = /** @class */ (function () {\n    function DateFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.fltrSettings = filterSettings;\n    }\n    DateFilterUI.prototype.create = function (args) {\n        var intl = new Internationalization();\n        var colFormat = args.column.format;\n        var format = intl.getDatePattern({ type: 'date', skeleton: colFormat }, false);\n        this.dialogObj = args.dialogObj;\n        this.inputElem = createElement('input', { className: 'e-flmenu-input', id: 'dateui-' + args.column.uid });\n        args.target.appendChild(this.inputElem);\n        this.datePickerObj = new DatePicker({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: args.localizeText.getConstant('ChooseDate'),\n            width: '100%',\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            open: this.openPopup.bind(this),\n        });\n        this.datePickerObj.appendTo(this.inputElem);\n    };\n    DateFilterUI.prototype.write = function (args) {\n        var columns = this.fltrSettings.columns;\n        var dateuiObj = document.querySelector('#dateui-' + args.column.uid).ej2_instances[0];\n        dateuiObj.value = !isNullOrUndefined(args.filteredValue) ? new Date(args.filteredValue) : null;\n    };\n    DateFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var dateuiObj = document.querySelector('#dateui-' + column.uid).ej2_instances[0];\n        var filterValue = dateuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    DateFilterUI.prototype.openPopup = function (args) {\n        args.popupElement.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    return DateFilterUI;\n}());\nexport { DateFilterUI };\n","import { isNullOrUndefined, getValue, remove } from '@syncfusion/ej2-base';\nimport { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { FlMenuOptrUI } from './filter-menu-operator';\nimport { StringFilterUI } from './string-filter-ui';\nimport { NumberFilterUI } from './number-filter-ui';\nimport { BooleanFilterUI } from './boolean-filter-ui';\nimport { DateFilterUI } from './date-filter-ui';\nimport { getFilterMenuPostion, parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * `filter menu` render boolean column.\n * @hidden\n */\nvar FilterMenuRenderer = /** @class */ (function () {\n    function FilterMenuRenderer(parent, filterSettings, serviceLocator, customFltrOperators, fltrObj) {\n        this.colTypes = {\n            'string': StringFilterUI, 'number': NumberFilterUI, 'date': DateFilterUI, 'boolean': BooleanFilterUI, 'datetime': DateFilterUI\n        };\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.customFilterOperators = customFltrOperators;\n        this.filterObj = fltrObj;\n        this.flMuiObj = new FlMenuOptrUI(this.parent, this.customFilterOperators, this.serviceLocator);\n        this.l10n = this.serviceLocator.getService('localization');\n    }\n    FilterMenuRenderer.prototype.openDialog = function (args) {\n        this.col = this.parent.getColumnByField(args.field);\n        if (isNullOrUndefined(this.col.filter) || (isNullOrUndefined(this.col.filter.type) || this.col.filter.type === 'menu')) {\n            this.renderDlgContent(args.target, this.col);\n        }\n    };\n    FilterMenuRenderer.prototype.closeDialog = function () {\n        var elem = document.getElementById(this.dlgObj.element.id);\n        if (this.dlgObj && !this.dlgObj.isDestroyed && elem) {\n            this.parent.notify(events.filterMenuClose, { field: this.col.field });\n            this.dlgObj.destroy();\n            remove(elem);\n        }\n    };\n    FilterMenuRenderer.prototype.renderDlgContent = function (target, column) {\n        var mainDiv = createElement('div', { className: 'e-flmenu-maindiv', id: column.uid + '-flmenu' });\n        this.dlgDiv = createElement('div', { className: 'e-flmenu', id: column.uid + '-flmdlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            created: this.dialogCreated.bind(this, target, column),\n            position: this.parent.element.classList.contains('e-device') ? { X: 'center', Y: 'center' } : { X: '', Y: '' },\n            target: this.parent.element.classList.contains('e-device') ? document.body : this.parent.element,\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.l10n.getConstant('FilterButton'), isPrimary: true, cssClass: 'e-flmenu-okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this, column),\n                    buttonModel: { content: this.l10n.getConstant('ClearButton'), cssClass: 'e-flmenu-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: (!isNullOrUndefined(parentsUntil(target, 'e-bigger'))) || this.parent.element.classList.contains('e-device') ? 260 : 250,\n            animationSettings: { effect: 'None' },\n            cssClass: 'e-filter-popup'\n        });\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    FilterMenuRenderer.prototype.dialogCreated = function (target, column) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(target, this.dlgObj);\n        }\n        this.renderFilterUI(target, column);\n        this.parent.notify(events.filterDialogCreated, {});\n        this.dlgObj.element.style.maxHeight = '350px';\n        this.dlgObj.show();\n        this.writeMethod(column, this.dlgObj.element.querySelector('#' + column.uid + '-flmenu'));\n    };\n    FilterMenuRenderer.prototype.renderFilterUI = function (target, col) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-flmenu-maindiv');\n        this.renderOperatorUI(dlgConetntEle, target, col);\n        this.renderFlValueUI(dlgConetntEle, target, col);\n    };\n    FilterMenuRenderer.prototype.renderOperatorUI = function (dlgConetntEle, target, column) {\n        this.flMuiObj.renderOperatorUI(dlgConetntEle, target, column, this.dlgObj);\n    };\n    FilterMenuRenderer.prototype.renderFlValueUI = function (dlgConetntEle, target, column) {\n        var valueDiv = createElement('div', { className: 'e-flmenu-valuediv' });\n        dlgConetntEle.appendChild(valueDiv);\n        var args = { target: valueDiv, column: column, getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj };\n        var instanceofFilterUI = new this.colTypes[column.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (!isNullOrUndefined(column.filter) && !isNullOrUndefined(column.filter.ui)\n            && !isNullOrUndefined(column.filter.ui.create)) {\n            var temp = column.filter.ui.create;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            column.filter.ui.create({\n                column: column, target: valueDiv,\n                getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj\n            });\n        }\n        else {\n            instanceofFilterUI.create({\n                column: column, target: valueDiv,\n                getOptrInstance: this.flMuiObj, localizeText: this.l10n, dialogObj: this.dlgObj\n            });\n        }\n    };\n    FilterMenuRenderer.prototype.writeMethod = function (col, dlgContentEle) {\n        var flValue;\n        var target = dlgContentEle.querySelector('.e-flmenu-valinput');\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field) {\n                flValue = column.value;\n            }\n        }\n        if (!isNullOrUndefined(col.filter) && !isNullOrUndefined(col.filter.ui)\n            && !isNullOrUndefined(col.filter.ui.write)) {\n            var temp = col.filter.ui.write;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            col.filter.ui.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n        else {\n            instanceofFilterUI.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n    };\n    FilterMenuRenderer.prototype.filterBtnClick = function (col) {\n        var flValue;\n        var flOptrValue;\n        var targ = this.dlgObj.element.querySelector('.e-flmenu-valuediv input');\n        flOptrValue = this.flMuiObj.getFlOperator();\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (!isNullOrUndefined(col.filter) &&\n            !isNullOrUndefined(col.filter.ui) && !isNullOrUndefined(col.filter.ui.read)) {\n            var temp = col.filter.ui.read;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            flValue = col.filter.ui.read({ element: targ, column: col, operator: flOptrValue, fltrObj: this.filterObj });\n        }\n        else {\n            instanceofFilterUI.read(targ, col, flOptrValue, this.filterObj);\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var column = this.parent.element.querySelector('[e-mappinguid=\"' + col.uid + '\"]').parentElement;\n        var flIcon = column.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.add('e-filtered');\n        }\n        this.closeDialog();\n    };\n    FilterMenuRenderer.prototype.clearBtnClick = function (column) {\n        this.filterObj.removeFilteredColsByField(column.field);\n        this.closeDialog();\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var col = this.parent.element.querySelector('[e-mappinguid=\"' + column.uid + '\"]').parentElement;\n        var flIcon = col.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.remove('e-filtered');\n        }\n    };\n    FilterMenuRenderer.prototype.destroy = function () {\n        //destroy\n    };\n    return FilterMenuRenderer;\n}());\nexport { FilterMenuRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, createElement, EventHandler, remove, Browser } from '@syncfusion/ej2-base';\nimport { parentsUntil } from '../base/util';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { isNullOrUndefined, } from '@syncfusion/ej2-base';\nimport { Internationalization } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { distinctStringValues } from '../base/util';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilter = /** @class */ (function (_super) {\n    __extends(ExcelFilter, _super);\n    /**\n     * Constructor for excel filtering module\n     * @hidden\n     */\n    function ExcelFilter(parent, filterSettings, serviceLocator, customFltrOperators) {\n        var _this = _super.call(this, parent, filterSettings, serviceLocator) || this;\n        _this.localeConstants = {\n            ClearFilter: 'Clear Filter',\n            NumberFilter: 'Number Filters',\n            TextFilter: 'Text Filters',\n            DateFilter: 'Date Filters',\n            MatchCase: 'Match Case',\n            Equal: 'Equal',\n            NotEqual: 'Not Equal',\n            LessThan: 'Less Than',\n            LessThanOrEqual: 'Less Than Or Equal',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqual: 'Greater Than Or Equal',\n            Between: 'Between',\n            CustomFilter: 'Custom Filter',\n            StartsWith: 'Starts With',\n            EndsWith: 'Ends With',\n            Contains: 'Contains',\n            OK: 'OK',\n            Cancel: 'Cancel',\n            CustomFilterPlaceHolder: 'Enter the value',\n            CustomFilterDatePlaceHolder: 'Choose a date',\n            AND: 'AND',\n            OR: 'OR',\n            ShowRowsWhere: 'Show rows where:'\n        };\n        _this.customFilterOperators = customFltrOperators;\n        extend(_this.defaultConstants, _this.localeConstants);\n        _this.isExcel = true;\n        _this.initLocale(_this.defaultConstants);\n        return _this;\n    }\n    ExcelFilter.prototype.getCMenuDS = function (type, operator) {\n        var options = {\n            number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n                'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n            string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter'],\n        };\n        options.date = options.number;\n        options.datetime = options.number;\n        var model = [];\n        for (var i = 0; i < options[type].length; i++) {\n            if (options[type][i].length) {\n                if (operator) {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...',\n                        iconCss: 'e-icons e-icon-check ' + (operator === options[type][i] ? '' : 'e-emptyicon')\n                    });\n                }\n                else {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...'\n                    });\n                }\n            }\n            else {\n                model.push({ separator: true });\n            }\n        }\n        return model;\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    ExcelFilter.prototype.destroy = function () {\n        if (this.dlg) {\n            _super.prototype.destroy.call(this);\n            this.unwireExEvents();\n        }\n        remove(this.cmenu);\n    };\n    ExcelFilter.prototype.createMenu = function (type, isFiltered, isCheckIcon) {\n        var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateFilter', number: 'NumberFilter' };\n        this.menu = createElement('div', { className: 'e-contextmenu-wrapper' });\n        var ul = createElement('ul');\n        var icon = isFiltered ? 'e-icon-filter e-filtered' : 'e-icon-filter';\n        ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n        if (type !== 'boolean') {\n            ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isCheckIcon ? 'e-icon-check' : icon + ' e-emptyicon', true));\n        }\n        this.menu.appendChild(ul);\n    };\n    ExcelFilter.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n        var li = createElement('li', { className: className + ' e-menu-item' });\n        li.innerHTML = val;\n        li.insertBefore(createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n        if (isSubMenu) {\n            li.appendChild(createElement('span', { className: 'e-icons e-caret' }));\n        }\n        return li;\n    };\n    ExcelFilter.prototype.wireExEvents = function () {\n        EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n    };\n    ExcelFilter.prototype.unwireExEvents = function () {\n        EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n    };\n    ExcelFilter.prototype.clickExHandler = function (e) {\n        var menuItem = parentsUntil(e.target, 'e-menu-item');\n        if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    ExcelFilter.prototype.destroyCMenu = function () {\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n        }\n    };\n    ExcelFilter.prototype.hoverHandler = function (e) {\n        var target = e.target.querySelector('.e-contextmenu');\n        var li = parentsUntil(e.target, 'e-menu-item');\n        var focused = this.menu.querySelector('.e-focused');\n        var isSubMenu;\n        if (focused) {\n            focused.classList.remove('e-focused');\n        }\n        if (li) {\n            li.classList.add('e-focused');\n            isSubMenu = li.classList.contains('e-submenu');\n        }\n        if (target) {\n            return;\n        }\n        if (!isSubMenu) {\n            var submenu = this.menu.querySelector('.e-submenu');\n            submenu.classList.remove('e-selected');\n            this.isCMenuOpen = false;\n            this.destroyCMenu();\n        }\n        var selectedMenu;\n        var predicates = this.getExistingPredicate(this.options.field);\n        if (predicates.length === 2) {\n            if (predicates[0].operator === 'greaterThanOrEqual' && predicates[1].operator === 'lessThanOrEqual') {\n                selectedMenu = 'Between';\n            }\n            else {\n                selectedMenu = 'CustomFilter';\n            }\n        }\n        else {\n            if (predicates.length === 1) {\n                this.optrData = this.customFilterOperators[this.options.type + 'Operator'];\n                selectedMenu = this.getSelectedText(predicates[0].operator);\n            }\n        }\n        if (!this.isCMenuOpen && isSubMenu) {\n            li.classList.add('e-selected');\n            this.isCMenuOpen = true;\n            var menuOptions = {\n                items: this.getCMenuDS(this.options.type, selectedMenu ? selectedMenu.replace(/\\s/g, '') : undefined),\n                select: this.selectHandler.bind(this),\n                onClose: this.destroyCMenu.bind(this)\n            };\n            this.parent.element.appendChild(this.cmenu);\n            this.menuObj = new ContextMenu(menuOptions, this.cmenu);\n            var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n            var pos = { top: 0, left: 0 };\n            if (Browser.isDevice) {\n                var contextRect = this.getContextBounds(this.menuObj);\n                pos.top = (window.innerHeight - contextRect.height) / 2;\n                pos.left = (window.innerWidth - contextRect.width) / 2;\n                this.closeDialog();\n            }\n            else {\n                pos.top = client.top;\n                pos.left = this.getCMenuYPosition(this.dlg, this.menuObj);\n            }\n            this.menuObj.open(pos.top, pos.left);\n        }\n    };\n    ExcelFilter.prototype.getContextBounds = function (context) {\n        var elementVisible = this.menuObj.element.style.display;\n        this.menuObj.element.style.display = 'block';\n        return this.menuObj.element.getBoundingClientRect();\n    };\n    ExcelFilter.prototype.getCMenuYPosition = function (target, context) {\n        var contextWidth = this.getContextBounds(context).width;\n        var targetPosition = target.getBoundingClientRect();\n        var leftPos = targetPosition.right + contextWidth - this.parent.element.clientWidth;\n        return (leftPos < 1) ? (targetPosition.right + 1) : (targetPosition.left - contextWidth - 1);\n    };\n    ExcelFilter.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n        this.dialogObj.dataBind();\n        var filterLength = this.getExistingPredicate(options.field).length;\n        this.createMenu(options.type, filterLength > 0, (filterLength === 1 || filterLength === 2));\n        this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n        this.dlg.classList.add('e-excelfilter');\n        this.dlg.classList.remove('e-checkboxfilter');\n        this.cmenu = createElement('ul', { className: 'e-excel-menu' });\n        this.wireExEvents();\n    };\n    ExcelFilter.prototype.closeDialog = function () {\n        _super.prototype.closeDialog.call(this);\n    };\n    ExcelFilter.prototype.selectHandler = function (e) {\n        if (e.item) {\n            this.menuItem = e.item;\n            this.renderDialogue(e);\n        }\n    };\n    ExcelFilter.prototype.renderDialogue = function (e) {\n        var target = e.element;\n        var column = this.options.field;\n        var mainDiv = createElement('div', { className: 'e-xlfl-maindiv', id: column + '-xlflmenu' });\n        this.dlgDiv = createElement('div', { className: 'e-xlflmenu', id: column + '-xlfldlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            header: 'Custom Filter',\n            isModal: true,\n            overlayClick: this.removeDialog.bind(this),\n            showCloseIcon: true,\n            closeOnEscape: false,\n            target: document.body,\n            // target: this.parent.element,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            close: this.removeDialog.bind(this),\n            created: this.createdDialog.bind(this, target, column),\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.getLocalizedLabel('OK'), isPrimary: true, cssClass: 'e-xlfl-okbtn'\n                    }\n                },\n                {\n                    click: this.removeDialog.bind(this),\n                    buttonModel: { content: this.getLocalizedLabel('Cancel'), cssClass: 'e-xlfl-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: 370,\n            animationSettings: { effect: 'None' },\n        });\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    ExcelFilter.prototype.removeDialog = function () {\n        this.removeObjects([this.dropOptr, this.datePicker, this.actObj, this.numericTxtObj, this.dlgObj]);\n        remove(this.dlgDiv);\n    };\n    ExcelFilter.prototype.clearBtnClick = function (field) {\n        this.clearFilter();\n        this.removeDialog();\n    };\n    ExcelFilter.prototype.createdDialog = function (target, column) {\n        this.renderCustomFilter(target, column);\n        this.dlgObj.element.style.left = '0px';\n        this.dlgObj.element.style.top = '0px';\n        this.dlgObj.show();\n    };\n    ExcelFilter.prototype.renderCustomFilter = function (target, column) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-xlfl-maindiv');\n        /* tslint:disable-next-line:max-line-length */\n        var dlgFields = createElement('div', { innerHTML: this.getLocalizedLabel('ShowRowsWhere'), className: 'e-xlfl-dlgfields' });\n        dlgConetntEle.appendChild(dlgFields);\n        //column name\n        var fieldSet = createElement('div', { innerHTML: column, className: 'e-xlfl-fieldset' });\n        dlgConetntEle.appendChild(fieldSet);\n        this.renderFilterUI(column, dlgConetntEle);\n    };\n    ExcelFilter.prototype.filterBtnClick = function (col) {\n        var fValue = this.dlgDiv.querySelector('#' + col + '-xlfl-frstvalue').ej2_instances[0];\n        var fOperator = this.dlgDiv.querySelector('#' + col + '-xlfl-frstoptr').ej2_instances[0];\n        var sValue = this.dlgDiv.querySelector('#' + col + '-xlfl-secndvalue').ej2_instances[0];\n        var sOperator = this.dlgDiv.querySelector('#' + col + '-xlfl-secndoptr').ej2_instances[0];\n        var checkBoxValue;\n        if (this.options.type === 'string') {\n            var checkBox = this.dlgDiv.querySelector('#' + col + '-xlflmtcase').ej2_instances[0];\n            checkBoxValue = checkBox.checked;\n        }\n        var andRadio = this.dlgDiv.querySelector('#' + col + 'e-xlfl-frstpredicate').ej2_instances[0];\n        var orRadio = this.dlgDiv.querySelector('#' + col + 'e-xlfl-secndpredicate').ej2_instances[0];\n        var predicate = (andRadio.checked ? 'and' : 'or');\n        if (sValue.value === null) {\n            predicate = 'or';\n        }\n        this.filterByColumn(this.options.field, fOperator.value, fValue.value ? fValue.value : fValue.getText(), predicate, checkBoxValue, sOperator.value, sValue.value);\n        this.removeDialog();\n    };\n    /**\n     * Filters grid row by column name with given options.\n     * @param {string} fieldName - Defines the field name of the filter column.\n     * @param {string} firstOperator - Defines the first operator by how to filter records.\n     * @param {string | number | Date | boolean} firstValue - Defines the first value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n     * @param {boolean} ignoreCase - If ignore case set to true, then filter records with exact match or else\n     * filter records with case insensitive(uppercase and lowercase letters treated as same).\n     * @param {string} secondOperator - Defines the second operator by how to filter records.\n     * @param {string | number | Date | boolean} secondValue - Defines the first value which is used to filter records.\n     */\n    ExcelFilter.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, ignoreCase, secondOperator, secondValue) {\n        var fColl = [];\n        var mPredicate;\n        if (firstValue) {\n            fColl.push({\n                field: this.options.field,\n                predicate: 'or',\n                matchcase: ignoreCase,\n                operator: firstOperator,\n                value: firstValue,\n                type: this.options.type\n            });\n            mPredicate = new Predicate(this.options.field, firstOperator.toLowerCase(), firstValue, ignoreCase);\n        }\n        if (secondValue) {\n            fColl.push({\n                field: this.options.field,\n                predicate: predicate,\n                matchcase: ignoreCase,\n                operator: secondOperator,\n                value: secondValue,\n                type: this.options.type\n            });\n            /* tslint:disable-next-line:max-line-length */\n            mPredicate = mPredicate[predicate](this.options.field, secondOperator.toLowerCase(), secondValue, ignoreCase);\n        }\n        var args = {\n            action: 'filtering', filterCollection: fColl, field: this.options.field,\n            ejpredicate: mPredicate\n        };\n        this.options.handler(args);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderOperatorUI = function (column, table, elementID, predicates, isFirst) {\n        var fieldElement = createElement('tr', { className: 'e-xlfl-fields' });\n        table.appendChild(fieldElement);\n        var xlfloptr = createElement('td', { className: 'e-xlfl-optr' });\n        fieldElement.appendChild(xlfloptr);\n        var optrDiv = createElement('div', { className: 'e-xlfl-optrdiv' });\n        var optrInput = createElement('input', { id: column + elementID });\n        optrDiv.appendChild(optrInput);\n        xlfloptr.appendChild(optrDiv);\n        var optr = this.options.type + 'Operator';\n        var dropDatasource = this.customFilterOperators[optr];\n        this.optrData = dropDatasource;\n        var selectedValue = this.dropSelectedVal(column, predicates, isFirst);\n        //Trailing three dots are sliced.\n        var menuText = '';\n        if (this.menuItem) {\n            menuText = this.menuItem.text.slice(0, -3);\n            if (menuText !== this.getLocalizedLabel('CustomFilter')) {\n                selectedValue = isFirst ? menuText : undefined;\n            }\n            if (menuText === this.getLocalizedLabel('Between')) {\n                selectedValue = this.getLocalizedLabel(isFirst ? 'GreaterThanOrEqual' : 'LessThanOrEqual');\n            }\n        }\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            text: selectedValue,\n            open: this.dropDownOpen.bind(this),\n            enableRtl: this.parent.enableRtl\n        });\n        this.dropOptr.appendTo(optrInput);\n        var operator = this.getSelectedValue(selectedValue);\n        return { fieldElement: fieldElement, operator: operator };\n    };\n    ExcelFilter.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    ExcelFilter.prototype.getSelectedValue = function (text) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('text', 'equal', text));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].value : '';\n    };\n    ExcelFilter.prototype.dropSelectedVal = function (col, predicates, isFirst) {\n        var operator;\n        if (predicates.length > 0) {\n            operator = predicates.length === 2 ?\n                (isFirst ? predicates[0].operator : predicates[1].operator) :\n                (isFirst ? predicates[0].operator : undefined);\n        }\n        else {\n            operator = isFirst ? 'equal' : undefined;\n        }\n        return this.getSelectedText(operator);\n    };\n    ExcelFilter.prototype.getSelectedText = function (operator) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', operator));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n    };\n    ExcelFilter.prototype.getExistingPredicate = function (column) {\n        var cols = CheckBoxFilter.getDistinct(this.options.filteredColumns, 'field').records;\n        var collection;\n        return new DataManager(this.options.filteredColumns).executeLocal(new Query().where('field', 'equal', column));\n    };\n    ExcelFilter.prototype.renderFilterUI = function (column, dlgConetntEle) {\n        var predicates = this.getExistingPredicate(column);\n        var table = createElement('table', { className: 'e-xlfl-tabel' });\n        dlgConetntEle.appendChild(table);\n        //Renders first dropdown\n        /* tslint:disable-next-line:max-line-length */\n        var optr = this.renderOperatorUI(column, table, '-xlfl-frstoptr', predicates, true);\n        //Renders first value\n        this.renderFlValueUI(column, optr, '-xlfl-frstvalue', predicates, true);\n        var predicate = createElement('tr', { className: 'e-xlfl-predicate' });\n        table.appendChild(predicate);\n        //Renders first radion button\n        this.renderRadioButton(column, predicate, predicates);\n        if (this.options.type === 'string') {\n            this.renderMatchCase(column, predicate, '-xlflmtcase', predicates);\n        }\n        //Renders second dropdown\n        optr = this.renderOperatorUI(column, table, '-xlfl-secndoptr', predicates, false);\n        //Renders second text box\n        this.renderFlValueUI(column, optr, '-xlfl-secndvalue', predicates, false);\n    };\n    ExcelFilter.prototype.renderRadioButton = function (column, tr, predicates) {\n        var td = createElement('td', { className: 'e-xlfl-radio' });\n        tr.appendChild(td);\n        var radioDiv = createElement('div', { className: 'e-xlfl-radiodiv' });\n        /* tslint:disable-next-line:max-line-length */\n        var frstpredicate = createElement('input', { id: column + 'e-xlfl-frstpredicate', attrs: { 'type': 'radio' } });\n        /* tslint:disable-next-line:max-line-length */\n        var secndpredicate = createElement('input', { id: column + 'e-xlfl-secndpredicate', attrs: { 'type': 'radio' } });\n        //appends into div\n        radioDiv.appendChild(frstpredicate);\n        radioDiv.appendChild(secndpredicate);\n        td.appendChild(radioDiv);\n        // Initialize AND RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var andRadio = new RadioButton({ label: this.getLocalizedLabel('AND'), name: 'default', cssClass: 'e-xlfl-radio-and', checked: true, enableRtl: this.parent.enableRtl });\n        // Initialize OR RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var orRadio = new RadioButton({ label: this.getLocalizedLabel('OR'), name: 'default', cssClass: 'e-xlfl-radio-or', enableRtl: this.parent.enableRtl });\n        var flValue = predicates.length === 2 ? predicates[1].predicate : 'and';\n        if (flValue === 'and') {\n            andRadio.checked = true;\n            orRadio.checked = false;\n        }\n        else {\n            orRadio.checked = true;\n            andRadio.checked = false;\n        }\n        // Render initialized RadioButton.\n        andRadio.appendTo(frstpredicate);\n        orRadio.appendTo(secndpredicate);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelFilter.prototype.removeObjects = function (elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var obj = elements_1[_i];\n            if (obj && !obj.isDestroyed) {\n                obj.destroy();\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderFlValueUI = function (column, optr, elementId, predicates, isFirst) {\n        var value = createElement('td', { className: 'e-xlfl-value' });\n        optr.fieldElement.appendChild(value);\n        var valueDiv = createElement('div', { className: 'e-xlfl-valuediv' });\n        var valueInput = createElement('input', { id: column + elementId });\n        valueDiv.appendChild(valueInput);\n        value.appendChild(valueDiv);\n        var flValue;\n        var predicate;\n        if (predicates.length > 0) {\n            predicate = predicates.length === 2 ?\n                (isFirst ? predicates[0] : predicates[1]) :\n                (isFirst ? predicates[0] : undefined);\n            flValue = (predicate && predicate.operator === optr.operator) ? predicate.value : undefined;\n        }\n        var types = {\n            'string': this.renderAutoComplete.bind(this),\n            'number': this.renderNumericTextBox.bind(this),\n            'date': this.renderDate.bind(this),\n            'datetime': this.renderDate.bind(this)\n        };\n        types[this.options.type](this.options, column, valueInput, flValue, this.parent.enableRtl);\n    };\n    ExcelFilter.prototype.renderMatchCase = function (column, tr, elementId, predicates) {\n        var matchCase = createElement('td', { className: 'e-xlfl-mtcase' });\n        tr.appendChild(matchCase);\n        var matchCaseDiv = createElement('div', { className: 'e-xlfl-matchcasediv' });\n        var matchCaseInput = createElement('input', { id: column + elementId, attrs: { 'type': 'checkbox' } });\n        matchCaseDiv.appendChild(matchCaseInput);\n        matchCase.appendChild(matchCaseDiv);\n        var flValue = predicates.length > 0 ?\n            (predicates.length === 2 ? predicates[1].matchcase : predicates[0].matchcase) :\n            false;\n        // Initialize Match Case check box.\n        var checkbox = new CheckBox({ label: 'Match Case', enableRtl: this.parent.enableRtl, checked: flValue });\n        // Render initialized CheckBox.\n        checkbox.appendTo(matchCaseInput);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderDate = function (options, column, inputValue, fValue, isRtl) {\n        var intl = new Internationalization();\n        var format = intl.getDatePattern({ type: 'date', skeleton: options.format }, false);\n        this.datePicker = new DatePicker({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n        });\n        this.datePicker.appendTo(inputValue);\n    };\n    ExcelFilter.prototype.completeAction = function (e) {\n        e.result = distinctStringValues(e.result);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderNumericTextBox = function (options, column, inputValue, fValue, isRtl) {\n        this.numericTxtObj = new NumericTextBox({\n            format: options.format,\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            value: fValue\n        });\n        this.numericTxtObj.appendTo(inputValue);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderAutoComplete = function (options, column, inputValue, fValue, isRtl) {\n        var _this = this;\n        var actObj = new AutoComplete({\n            dataSource: options.dataSource instanceof DataManager ?\n                options.dataSource : new DataManager(options.dataSource),\n            fields: { value: column },\n            sortOrder: 'Ascending',\n            autofill: true,\n            focus: function () {\n                actObj.filterType = _this.dlgDiv.querySelector('#' + column +\n                    (inputValue.id === (column + '-xlfl-frstvalue') ?\n                        '-xlfl-frstoptr' :\n                        '-xlfl-secndoptr')).ej2_instances[0].value;\n                actObj.ignoreCase = options.type === 'string' ?\n                    !_this.dlgDiv.querySelector('#' + column + '-xlflmtcase').ej2_instances[0].checked :\n                    true;\n            },\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            actionComplete: function (e) {\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObject) {\n                        return mapObject[actObj.fields.value];\n                    }).indexOf(obj[_this.actObj.fields.value]) === index;\n                });\n            },\n            value: fValue\n        });\n        actObj.appendTo(inputValue);\n        this.actObj = actObj;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExcelFilter.prototype.getModuleName = function () {\n        return 'excelFilter';\n    };\n    return ExcelFilter;\n}(CheckBoxFilter));\nexport { ExcelFilter };\n","import { EventHandler, isNullOrUndefined, extend, closest, getValue } from '@syncfusion/ej2-base';\nimport { getActualPropFromColl, isActionPrevent } from '../base/util';\nimport { remove, createElement, matches } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport { FilterCellRenderer } from '../renderer/filter-cell-renderer';\nimport { parentsUntil } from '../base/util';\nimport { FilterMenuRenderer } from '../renderer/filter-menu-renderer';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { ExcelFilter } from '../actions/excel-filter';\n/**\n *\n * `Filter` module is used to handle filtering action.\n */\nvar Filter = /** @class */ (function () {\n    /**\n     * Constructor for Grid filtering module\n     * @hidden\n     */\n    function Filter(parent, filterSettings, serviceLocator) {\n        this.predicate = 'and';\n        this.contentRefresh = true;\n        this.values = {};\n        this.nextFlMenuOpen = '';\n        this.type = { 'menu': FilterMenuRenderer, 'checkbox': CheckBoxFilter, 'excel': ExcelFilter };\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.fltrDlgDetails = { field: '', isOpen: false };\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * To render filter bar when filtering enabled.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.render = function () {\n        var gObj = this.parent;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.getLocalizedCustomOperators();\n        if (this.parent.filterSettings.type === 'filterbar') {\n            if (gObj.columns.length) {\n                var fltrElem = this.parent.element.querySelector('.e-filterbar');\n                if (fltrElem) {\n                    remove(fltrElem);\n                }\n                var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Filter, gObj);\n                var row = void 0;\n                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n                cellrender.addCellRenderer(CellType.Filter, new FilterCellRenderer(this.parent, this.serviceLocator));\n                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n                rowRenderer.element = createElement('tr', { className: 'e-filterbar' });\n                row = this.generateRow();\n                row.data = this.values;\n                this.parent.getHeaderContent().querySelector('thead').appendChild(rowRenderer.element);\n                this.element = rowRenderer.render(row, gObj.getColumns(), null, null, rowRenderer.element);\n                var detail = this.element.querySelector('.e-detailheadercell');\n                if (detail) {\n                    detail.className = 'e-filterbarcell e-mastercell';\n                }\n                var gCells = [].slice.call(this.element.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n                this.wireEvents();\n                this.parent.notify(events.freezeRender, { case: 'filter' });\n            }\n        }\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.destroy = function () {\n        if (this.filterModule) {\n            this.filterModule.destroy();\n        }\n        this.filterSettings.columns = [];\n        this.updateFilterMsg();\n        this.removeEventListener();\n        this.unWireEvents();\n        if (this.element) {\n            remove(this.element);\n            if (this.parent.frozenColumns) {\n                remove(this.parent.getHeaderContent().querySelector('.e-filterbar'));\n            }\n        }\n    };\n    Filter.prototype.generateRow = function (index) {\n        var options = {};\n        var row = new Row(options);\n        row.cells = this.generateCells();\n        return row;\n    };\n    Filter.prototype.generateCells = function () {\n        //TODO: generate dummy column for group, detail, stacked row here for filtering;\n        var cells = [];\n        if (this.parent.allowGrouping) {\n            for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n                cells.push(this.generateCell({}, CellType.HeaderIndent));\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cells.push(this.generateCell({}, CellType.DetailHeader));\n        }\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var dummy = _a[_i];\n            cells.push(this.generateCell(dummy));\n        }\n        return cells;\n    };\n    Filter.prototype.generateCell = function (column, cellType) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'rowId': '',\n            'column': column,\n            'cellType': cellType ? cellType : CellType.Filter,\n            'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n        };\n        return new Cell(opt);\n    };\n    /**\n     * To update filterSettings when applying filter.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.updateModel = function () {\n        this.currentFilterObject = {\n            field: this.fieldName, operator: this.operator, value: this.value, predicate: this.predicate,\n            matchCase: this.matchCase, actualFilterValue: {}, actualOperator: {}\n        };\n        var index = this.getFilteredColsIndexByField(this.fieldName);\n        if (index > -1) {\n            this.filterSettings.columns[index] = this.currentFilterObject;\n        }\n        else {\n            this.filterSettings.columns.push(this.currentFilterObject);\n        }\n        this.filterSettings.columns = this.filterSettings.columns;\n        this.parent.dataBind();\n    };\n    Filter.prototype.getFilteredColsIndexByField = function (field) {\n        var cols = this.filterSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * To trigger action complete event.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column.field,\n            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n        } : {\n            requestType: 'filtering', type: events.actionComplete\n        };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.isRemove = false;\n    };\n    Filter.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass, this);\n        EventHandler.add(this.parent.element, 'focusin', this.updateSpanClass, this);\n        EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n    };\n    Filter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.parent.element, 'focusin', this.updateSpanClass);\n        EventHandler.remove(this.parent.getHeaderContent(), 'mousedown', this.updateSpanClass);\n        EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n    };\n    Filter.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    Filter.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.actualFilterValue, col.actualOperator);\n            }\n            this.updateFilterMsg();\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.filterComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        if (this.parent.frozenColumns) {\n            this.parent.on(events.freezeRefresh, this.render, this);\n        }\n        else {\n            this.parent.on(events.headerRefreshed, this.render, this);\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n        this.parent.on(events.click, this.filterIconClickHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.removeEventListener = function () {\n        EventHandler.remove(document, 'click', this.clickHandler);\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.filterComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.keyPressed, this.keyUpHandler);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.off(events.headerRefreshed, this.render);\n        this.parent.off(events.filterOpen, this.columnMenuFilter);\n        this.parent.off(events.filterMenuClose, this.filterMenuClose);\n        this.parent.off(events.click, this.filterIconClickHandler);\n    };\n    Filter.prototype.filterMenuClose = function (args) {\n        this.fltrDlgDetails.isOpen = false;\n    };\n    /**\n     * Filters grid row by column name with given options.\n     * @param  {string} fieldName - Defines the field name of the filter column.\n     * @param  {string} filterOperator - Defines the operator by how to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case set to true, then filter records with exact match or else\n     * filter records with case insensitive(uppercase and lowercase letters treated as same).\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, actualFilterValue, actualOperator) {\n        var gObj = this.parent;\n        var filterCell;\n        this.column = gObj.getColumnByField(fieldName);\n        if (this.filterSettings.type === 'filterbar') {\n            filterCell = gObj.getHeaderContent().querySelector('#' + this.column.field + '_filterBarcell');\n        }\n        if (!isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n                arg5: matchCase, arg6: actualFilterValue, arg7: actualOperator\n            });\n            return;\n        }\n        this.value = filterValue;\n        this.matchCase = matchCase || false;\n        this.fieldName = fieldName;\n        this.predicate = predicate || 'and';\n        this.operator = filterOperator;\n        filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n        if (this.column.type === 'number' || this.column.type === 'date') {\n            this.matchCase = true;\n        }\n        this.values[this.column.field] = filterValue;\n        gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n        if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n            this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n            this.updateFilterMsg();\n            return;\n        }\n        if (this.filterSettings.type === 'filterbar' && filterCell.value !== filterValue) {\n            filterCell.value = filterValue;\n        }\n        if (this.checkAlreadyColFiltered(this.column.field)) {\n            return;\n        }\n        this.updateModel();\n    };\n    Filter.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    if (this.contentRefresh) {\n                        this.parent.notify(events.modelChanged, {\n                            currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n                                this.column.field : undefined,\n                            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n                        });\n                        this.updateFilterMsg();\n                    }\n                    break;\n                case 'showFilterBarStatus':\n                    if (e.properties[prop]) {\n                        this.updateFilterMsg();\n                    }\n                    else if (this.parent.allowPaging) {\n                        this.parent.updateExternalMessage('');\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Clears all the filtered rows of Grid.\n     * @return {void}\n     */\n    Filter.prototype.clearFiltering = function () {\n        var cols = getActualPropFromColl(this.filterSettings.columns);\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeFilteredColsByField(cols[i].field, true);\n        }\n        this.isRemove = true;\n        this.filterStatusMsg = '';\n        this.updateFilterMsg();\n    };\n    Filter.prototype.checkAlreadyColFiltered = function (field) {\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            if (col.field === field && col.value === this.value &&\n                col.operator === this.operator && col.predicate === this.predicate) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Filter.prototype.columnMenuFilter = function (args) {\n        this.column = args.col;\n        var ele = closest(args.target, '#' + args.id);\n        if (args.isClose && !ele) {\n            this.filterModule.closeDialog();\n        }\n        else if (ele) {\n            this.filterDialogOpen(this.column, args.target);\n        }\n    };\n    Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n        var gObj = this.parent;\n        if (this.filterModule) {\n            this.filterModule.closeDialog();\n        }\n        this.filterModule = new this.type[col.filter.type || this.parent.filterSettings.type](this.parent, gObj.filterSettings, this.serviceLocator, this.customOperators, this);\n        this.filterModule.openDialog({\n            type: col.type, field: col.field, displayName: col.headerText,\n            dataSource: col.filter.dataSource || gObj.dataSource, format: col.format,\n            filteredColumns: gObj.filterSettings.columns, target: target,\n            sortedColumns: gObj.sortSettings.columns, formatFn: col.getFormatter(),\n            parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n            hideSearchbox: isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n            handler: this.filterHandler.bind(this), localizedStrings: gObj.getLocaleConstants(),\n            position: { X: left, Y: top }\n        });\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        var fCell;\n        var cols = this.filterSettings.columns;\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, {\n                instance: this, handler: this.removeFilteredColsByField,\n                arg1: field, arg2: isClearFilterBar\n            });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                if (this.filterSettings.type === 'filterbar' && !isClearFilterBar) {\n                    fCell = this.parent.getHeaderContent().querySelector('#' + cols[i].field + '_filterBarcell');\n                    delete this.values[field];\n                }\n                cols.splice(i, 1);\n                var fltrElement = this.parent.getColumnHeaderByField(field);\n                fltrElement.removeAttribute('aria-filtered');\n                if (this.filterSettings.type !== 'filterbar') {\n                    fltrElement.querySelector('.e-icon-filter').classList.remove('e-filtered');\n                }\n                this.isRemove = true;\n                this.parent.notify(events.modelChanged, {\n                    requestType: 'filtering', type: events.actionBegin\n                });\n                break;\n            }\n        }\n        this.updateFilterMsg();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.keyUpHandler = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (target && matches(target, '.e-filterbar input')) {\n            this.column = gObj.getColumnByField(target.id.split('_')[0]);\n            if (!this.column) {\n                return;\n            }\n            this.updateCrossIcon(target);\n            if ((this.filterSettings.mode === 'immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n                this.value = target.value.trim();\n                this.processFilter(e);\n            }\n        }\n    };\n    Filter.prototype.updateSpanClass = function (e) {\n        var target = e.target;\n        if (e.type === 'mousedown' && target.classList.contains('e-cancel')) {\n            var targetText = target.previousElementSibling;\n            targetText.value = '';\n            target.classList.add('e-hide');\n            targetText.focus();\n            e.preventDefault();\n        }\n        if (e.type === 'focusin' && target.classList.contains('e-filtertext') && !target.disabled) {\n            if (this.lastFilterElement) {\n                this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n            }\n            this.updateCrossIcon(target);\n            this.lastFilterElement = target;\n        }\n        if (e.type === 'focusin' && !target.classList.contains('e-filtertext') && this.lastFilterElement) {\n            this.lastFilterElement.nextElementSibling.classList.add('e-hide');\n        }\n        return false;\n    };\n    Filter.prototype.updateCrossIcon = function (element) {\n        if (element.value.length) {\n            element.nextElementSibling.classList.remove('e-hide');\n        }\n    };\n    Filter.prototype.updateFilterMsg = function () {\n        if (this.filterSettings.type === 'filterbar') {\n            var gObj = this.parent;\n            var columns = this.filterSettings.columns;\n            var formater = this.serviceLocator.getService('valueFormatter');\n            var column = void 0;\n            var value = void 0;\n            if (!this.filterSettings.showFilterBarStatus) {\n                return;\n            }\n            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n                this.filterStatusMsg = '';\n                for (var index = 0; index < columns.length; index++) {\n                    column = gObj.getColumnByField(columns[index].field);\n                    if (index) {\n                        this.filterStatusMsg += ' && ';\n                    }\n                    this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n                }\n            }\n            if (gObj.allowPaging) {\n                gObj.updateExternalMessage(this.filterStatusMsg);\n            }\n            //TODO: virtual paging       \n            this.filterStatusMsg = '';\n        }\n    };\n    Filter.prototype.checkForSkipInput = function (column, value) {\n        var isSkip;\n        var skipInput;\n        if (column.type === 'number') {\n            skipInput = ['=', ' ', '!'];\n            if (DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n                isSkip = true;\n            }\n        }\n        else if (column.type === 'string') {\n            skipInput = ['>', '<', '=', '!'];\n            for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n                var val = value_1[_i];\n                if (skipInput.indexOf(val) > -1) {\n                    isSkip = true;\n                }\n            }\n        }\n        return isSkip;\n    };\n    Filter.prototype.processFilter = function (e) {\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    Filter.prototype.startTimer = function (e) {\n        var _this = this;\n        this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n    };\n    Filter.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Filter.prototype.onTimerTick = function () {\n        var filterElement = this.element.querySelector('#' + this.column.field + '_filterBarcell');\n        if (!filterElement && this.parent.frozenColumns) {\n            filterElement = this.parent.getHeaderContent().querySelector('#' + this.column.field + '_filterBarcell');\n        }\n        var filterValue = JSON.parse(JSON.stringify(filterElement.value));\n        this.stopTimer();\n        if (!isNullOrUndefined(this.column.filterBarTemplate)) {\n            var templateRead = this.column.filterBarTemplate.read;\n            if (typeof templateRead === 'string') {\n                templateRead = getValue(templateRead, window);\n            }\n            this.value = templateRead.call(this, filterElement);\n        }\n        if (this.value === '') {\n            this.removeFilteredColsByField(this.column.field);\n            return;\n        }\n        this.validateFilterValue(this.value);\n        this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase);\n        this.values[this.column.field] = filterValue;\n        filterElement.value = filterValue;\n        this.updateFilterMsg();\n    };\n    Filter.prototype.validateFilterValue = function (value) {\n        var gObj = this.parent;\n        var skipInput;\n        var index;\n        this.matchCase = true;\n        switch (this.column.type) {\n            case 'number':\n                this.operator = this.filterOperators.equal;\n                skipInput = ['>', '<', '=', '!'];\n                for (var i = 0; i < value.length; i++) {\n                    if (skipInput.indexOf(value[i]) > -1) {\n                        index = i;\n                        break;\n                    }\n                }\n                this.getOperator(value.substring(index));\n                if (index !== 0) {\n                    this.value = value.substring(0, index);\n                }\n                if (this.value !== '' && value.length >= 1) {\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                }\n                if (isNaN(this.value)) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                this.operator = this.filterOperators.equal;\n                this.getOperator(value);\n                if (this.value !== '') {\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                    if (isNullOrUndefined(this.value)) {\n                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                    }\n                }\n                break;\n            case 'string':\n                this.matchCase = false;\n                if (value.charAt(0) === '*') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(value.length - 1) === '%') {\n                    this.value = this.value.slice(0, -1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(0) === '%') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.endsWith;\n                }\n                else {\n                    this.operator = this.filterOperators.startsWith;\n                }\n                break;\n            case 'boolean':\n                if (value.toLowerCase() === 'true' || value === '1') {\n                    this.value = true;\n                }\n                else if (value.toLowerCase() === 'false' || value === '0') {\n                    this.value = false;\n                }\n                else if (value.length) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                this.operator = this.filterOperators.equal;\n                break;\n            default:\n                this.operator = this.filterOperators.equal;\n        }\n    };\n    Filter.prototype.getOperator = function (value) {\n        var singleOp = value.charAt(0);\n        var multipleOp = value.slice(0, 2);\n        var operators = extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, DataUtil.operatorSymbols);\n        if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n            this.operator = operators[singleOp];\n            this.value = value.substring(1);\n            if (!this.operator) {\n                this.operator = operators[multipleOp];\n                this.value = value.substring(2);\n            }\n        }\n        if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n            if (this.value.charAt(0) === '=') {\n                this.operator = this.operator + 'orequal';\n                this.value = this.value.substring(1);\n            }\n        }\n    };\n    Filter.prototype.columnPositionChanged = function (e) {\n        if (this.parent.filterSettings.type !== 'filterbar') {\n            return;\n        }\n        var filterCells = [].slice.call(this.element.querySelectorAll('.e-filterbarcell'));\n        filterCells.splice(e.toIndex, 0, filterCells.splice(e.fromIndex, 1)[0]);\n        this.element.innerHTML = '';\n        for (var _i = 0, filterCells_1 = filterCells; _i < filterCells_1.length; _i++) {\n            var cell = filterCells_1[_i];\n            this.element.appendChild(cell);\n        }\n    };\n    Filter.prototype.getLocalizedCustomOperators = function () {\n        var numOptr = [\n            { value: 'equal', text: this.l10n.getConstant('Equal') },\n            { value: 'greaterThan', text: this.l10n.getConstant('GreaterThan') },\n            { value: 'greaterThanOrEqual', text: this.l10n.getConstant('GreaterThanOrEqual') },\n            { value: 'lessThan', text: this.l10n.getConstant('LessThan') },\n            { value: 'lessThanOrEqual', text: this.l10n.getConstant('LessThanOrEqual') },\n            { value: 'notEqual', text: this.l10n.getConstant('NotEqual') }\n        ];\n        this.customOperators = {\n            stringOperator: [\n                { value: 'startsWith', text: this.l10n.getConstant('StartsWith') },\n                { value: 'endsWith', text: this.l10n.getConstant('EndsWith') },\n                { value: 'contains', text: this.l10n.getConstant('Contains') },\n                { value: 'equal', text: this.l10n.getConstant('Equal') }, { value: 'notEqual', text: this.l10n.getConstant('NotEqual') }\n            ],\n            numberOperator: numOptr,\n            dateOperator: numOptr,\n            datetimeOperator: numOptr,\n            booleanOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') }, { value: 'notEqual', text: this.l10n.getConstant('NotEqual') }\n            ]\n        };\n    };\n    ;\n    Filter.prototype.filterIconClickHandler = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'menu' ||\n            this.parent.filterSettings.type === 'checkbox' || this.parent.filterSettings.type === 'excel')) {\n            var gObj = this.parent;\n            var col = gObj.getColumnByUid(parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n            var gClient = gObj.element.getBoundingClientRect();\n            var fClient = target.getBoundingClientRect();\n            this.column = col;\n            if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n                return;\n            }\n            if (this.filterModule) {\n                this.filterModule.closeDialog();\n            }\n            this.fltrDlgDetails = { field: col.field, isOpen: true };\n            this.filterDialogOpen(this.column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n        }\n    };\n    Filter.prototype.clickHandler = function (e) {\n        if (this.parent.filterSettings.type === 'menu' ||\n            this.parent.filterSettings.type === 'checkbox' || this.parent.filterSettings.type === 'excel') {\n            var gObj = this.parent;\n            var target = e.target;\n            var datepickerEle = target.classList.contains('e-day'); // due to datepicker popup cause\n            if (parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n                return;\n            }\n            else if (this.filterModule &&\n                (!parentsUntil(target, 'e-popup-wrapper')\n                    && (!closest(target, '.e-filter-item.e-menu-item'))\n                    && (!parentsUntil(target, 'e-popup'))) && !datepickerEle) {\n                this.filterModule.closeDialog(target);\n            }\n        }\n    };\n    Filter.prototype.filterHandler = function (args) {\n        var filterIconElement;\n        var dataManager = new DataManager(this.filterSettings.columns);\n        var query = new Query().where('field', this.filterOperators.equal, args.field);\n        var result = dataManager.executeLocal(query);\n        for (var i = 0; i < result.length; i++) {\n            var index = -1;\n            for (var j = 0; j < this.filterSettings.columns.length; j++) {\n                if (result[i].field === this.filterSettings.columns[j].field) {\n                    index = j;\n                    break;\n                }\n            }\n            if (index !== -1) {\n                this.filterSettings.columns.splice(index, 1);\n            }\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n        if (args.action === 'filtering') {\n            this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n            if (this.filterSettings.columns.length && filterIconElement) {\n                filterIconElement.classList.add('e-filtered');\n            }\n        }\n        else {\n            if (filterIconElement) {\n                filterIconElement.classList.remove('e-filtered');\n            }\n            this.parent.refresh(); //hot-fix onpropertychanged not working for object { array }           \n        }\n        this.parent.dataBind();\n    };\n    return Filter;\n}());\nexport { Filter };\n","import { EventHandler, createElement, detach, formatUnit, Browser, closest } from '@syncfusion/ej2-base';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth } from '../base/util';\nexport var resizeClassList = {\n    root: 'e-rhandler',\n    suppress: 'e-rsuppress',\n    icon: 'e-ricon',\n    helper: 'e-rhelper',\n    header: 'th.e-headercell',\n    cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n * @hidden\n * @private\n */\nvar Resize = /** @class */ (function () {\n    /**\n     * Constructor for the Grid resize module\n     * @hidden\n     */\n    function Resize(parent) {\n        this.tapped = false;\n        this.isDblClk = true;\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * Resize by field names.\n     * @param  {string|string[]} fName - Defines the field name.\n     * @return {void}\n     */\n    Resize.prototype.autoFitColumns = function (fName) {\n        var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n            this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n        this.findColumn(columnName);\n    };\n    Resize.prototype.resizeColumn = function (fName, index, id) {\n        var gObj = this.parent;\n        var tWidth = 0;\n        var headerTable = this.parent.getHeaderTable();\n        var contentTable = this.parent.getContentTable();\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var indentWidthClone = gObj.getHeaderTable().querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n        var indentWidth = 0;\n        if (indentWidthClone.length > 0) {\n            for (var i = 0; i < indentWidthClone.length; i++) {\n                indentWidth += indentWidthClone[i].offsetWidth;\n            }\n        }\n        var uid = id ? id : this.parent.getUidByColumnField(fName);\n        var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n        var headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n        var headerText = [headerTextClone];\n        var contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n        var contentText = [];\n        for (var i = 0; i < contentTextClone.length; i++) {\n            contentText[i] = contentTextClone[i].cloneNode(true);\n        }\n        var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n        var wContent = this.createTable(contentTable, contentText, contentDivTag);\n        var columnbyindex = gObj.getColumns()[index];\n        var result;\n        var width = (wHeader > wContent) ? columnbyindex.width = formatUnit(wHeader) : columnbyindex.width = formatUnit(wContent);\n        this.widthService.setColumnWidth(gObj.getColumns()[index]);\n        if (!this.parent.allowResizing) {\n            result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n            if (result === false) {\n                gObj.getColumns().forEach(function (element) {\n                    if (element.visible) {\n                        tWidth = tWidth + parseInt(element.width, 10);\n                    }\n                });\n            }\n            var tableWidth_1 = tWidth + indentWidth;\n            if (tWidth > 0) {\n                headerTable.style.width = formatUnit(tableWidth_1);\n                contentTable.style.width = formatUnit(tableWidth_1);\n            }\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = (gObj.getContent().scrollWidth);\n        if (contentwidth > tableWidth) {\n            headerTable.classList.add('e-tableborder');\n            contentTable.classList.add('e-tableborder');\n        }\n        else {\n            headerTable.classList.remove('e-tableborder');\n            contentTable.classList.remove('e-tableborder');\n        }\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    Resize.prototype.destroy = function () {\n        this.widthService = null;\n        this.unwireEvents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    Resize.prototype.findColumn = function (fName) {\n        var _this = this;\n        fName.forEach(function (element) {\n            var fieldName = element;\n            var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n            if (_this.parent.getColumns()[columnIndex].visible === true) {\n                _this.resizeColumn(fieldName, columnIndex);\n            }\n        });\n    };\n    /**\n     * To create table for autofit\n     * @hidden\n     */\n    Resize.prototype.createTable = function (table, text, tag) {\n        var myTableDiv = createElement('div');\n        myTableDiv.className = this.parent.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = createElement('div');\n        mySubDiv.className = tag;\n        var myTable = createElement('table');\n        myTable.className = table.className;\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var myTr = createElement('tr');\n        text.forEach(function (element) {\n            var tr = myTr.cloneNode();\n            tr.className = table.querySelector('tr').className;\n            tr.appendChild(element);\n            myTable.appendChild(tr);\n        });\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        var offsetWidthValue = myTable.getBoundingClientRect().width;\n        document.body.removeChild(myTableDiv);\n        return Math.ceil(offsetWidthValue);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.parent.frozenColumns) {\n            this.parent.on(events.freezeRefresh, this.render, this);\n        }\n        else {\n            this.parent.on(events.headerRefreshed, this.render, this);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.render);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.render = function () {\n        this.wireEvents();\n        this.setHandlerHeight();\n    };\n    Resize.prototype.wireEvents = function () {\n        var _this = this;\n        this.getResizeHandlers().forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n            EventHandler.add(ele, Browser.touchStartEvent, _this.resizeStart, _this);\n            EventHandler.add(ele, events.dblclick, _this.callAutoFit, _this);\n        });\n    };\n    Resize.prototype.unwireEvents = function () {\n        var _this = this;\n        this.getResizeHandlers().forEach(function (ele) {\n            EventHandler.remove(ele, Browser.touchStartEvent, _this.resizeStart);\n            EventHandler.remove(ele, events.dblclick, _this.callAutoFit);\n        });\n    };\n    Resize.prototype.getResizeHandlers = function () {\n        return this.parent.frozenColumns ?\n            [].slice.call(this.parent.getHeaderContent().querySelectorAll('.' + resizeClassList.root))\n            : [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.root));\n    };\n    Resize.prototype.setHandlerHeight = function () {\n        [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.suppress)).forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n        });\n    };\n    Resize.prototype.callAutoFit = function (e) {\n        var col = this.getTargetColumn(e);\n        this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n    };\n    Resize.prototype.resizeStart = function (e) {\n        if (!this.helper) {\n            if (this.getScrollBarWidth() === 0) {\n                for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n                    var col = _a[_i];\n                    this.widthService.setColumnWidth(col);\n                }\n                this.widthService.setWidthToTable();\n            }\n            this.element = e.target;\n            this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n            this.appendHelper();\n            this.column = this.getTargetColumn(e);\n            this.pageX = this.getPointX(e);\n            if (this.parent.enableRtl) {\n                this.minMove = parseInt(this.column.width.toString(), 10)\n                    - (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0);\n            }\n            else {\n                this.minMove = (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0)\n                    - parseInt(this.column.width.toString(), 10);\n            }\n            this.minMove += this.pageX;\n        }\n        if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n            this.helper.classList.add(resizeClassList.icon);\n            EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n            EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n        }\n        else {\n            var args = {\n                e: e,\n                column: this.column\n            };\n            this.parent.trigger(events.resizeStart, args);\n            if (args.cancel) {\n                this.cancelResizeAction();\n                return;\n            }\n            EventHandler.add(document, Browser.touchEndEvent, this.resizeEnd, this);\n            EventHandler.add(this.parent.element, Browser.touchMoveEvent, this.resizing, this);\n            this.updateCursor('add');\n        }\n    };\n    Resize.prototype.cancelResizeAction = function (removeEvents) {\n        if (removeEvents) {\n            EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n            EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n            this.updateCursor('remove');\n        }\n        if (Browser.isDevice) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n        }\n        detach(this.helper);\n        this.refresh();\n    };\n    Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n        if (minWidth && width < minWidth) {\n            return minWidth;\n        }\n        else if ((maxWidth && width > maxWidth)) {\n            return maxWidth;\n        }\n        else {\n            return width;\n        }\n    };\n    Resize.prototype.resizing = function (e) {\n        var pageX = this.getPointX(e);\n        var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var colData = {\n            width: parseInt(this.widthService.getWidth(this.column).toString(), 10) + mousemove,\n            minWidth: this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : null,\n            maxWidth: this.column.maxWidth ? parseInt(this.column.maxWidth.toString(), 10) : null\n        };\n        var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n        if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n            width = this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0;\n            this.pageX = pageX = this.minMove;\n        }\n        if (width !== parseInt(this.column.width.toString(), 10)) {\n            this.pageX = pageX;\n            this.column.width = formatUnit(width);\n            var args = {\n                e: e,\n                column: this.column\n            };\n            this.parent.trigger(events.onResize, args);\n            if (args.cancel) {\n                this.cancelResizeAction(true);\n                return;\n            }\n            this.widthService.setColumnWidth(this.column, null, 'resize');\n            this.updateHelper();\n        }\n        this.isDblClk = false;\n    };\n    Resize.prototype.resizeEnd = function (e) {\n        if (!this.helper || this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n        this.updateCursor('remove');\n        detach(this.helper);\n        var args = {\n            e: e,\n            column: this.column\n        };\n        this.parent.trigger(events.resizeStop, args);\n        closest(this.element, '.e-headercell').classList.add('e-resized');\n        this.refresh();\n        this.doubleTapEvent(e);\n        this.isDblClk = true;\n    };\n    Resize.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Resize.prototype.refreshColumnWidth = function () {\n        var columns = this.parent.getColumns();\n        for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderTable().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                var column = columns_1[_b];\n                if (ele.querySelector('[e-mappinguid]') &&\n                    ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n                    column.width = ele.getBoundingClientRect().width;\n                    break;\n                }\n            }\n        }\n        return columns;\n    };\n    Resize.prototype.getTargetColumn = function (e) {\n        var cell = closest(e.target, resizeClassList.header);\n        var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.updateCursor = function (action) {\n        var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n        headerRows.push(this.parent.element);\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            row.classList[action](resizeClassList.cursor);\n        }\n    };\n    Resize.prototype.refresh = function () {\n        this.column = null;\n        this.pageX = null;\n        this.element = null;\n        this.helper = null;\n    };\n    Resize.prototype.appendHelper = function () {\n        this.helper = createElement('div', {\n            className: resizeClassList.helper\n        });\n        this.parent.element.appendChild(this.helper);\n        var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n        var rect = closest(this.element, resizeClassList.header);\n        var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n        if (this.parent.frozenColumns) {\n            if (rect.parentElement.children.length !== this.parent.frozenColumns) {\n                tr.splice(0, tr.length / 2);\n            }\n            else {\n                tr.splice(tr.length / 2, tr.length / 2);\n            }\n        }\n        for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n            height += tr[i].offsetHeight;\n        }\n        var pos = this.calcPos(rect);\n        pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n        this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n    };\n    Resize.prototype.getScrollBarWidth = function (height) {\n        var ele = this.parent.frozenColumns ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstChild;\n        return (ele.scrollHeight > ele.clientHeight && height) ||\n            ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n    };\n    Resize.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            detach(this.helper);\n            this.refresh();\n        }\n    };\n    Resize.prototype.updateHelper = function () {\n        var rect = closest(this.element, resizeClassList.header);\n        var left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n        var borderWidth = 2; // to maintain the helper inside of grid element.\n        if (left > this.parentElementWidth) {\n            this.helper.style.left = this.parentElementWidth - borderWidth + 'px';\n        }\n        else {\n            this.helper.style.left = left + 'px';\n        }\n    };\n    Resize.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Resize.prototype.doubleTapEvent = function (e) {\n        if (this.getUserAgent() && this.isDblClk) {\n            if (!this.tapped) {\n                this.tapped = setTimeout(this.timeoutHandler(), 300);\n            }\n            else {\n                clearTimeout(this.tapped);\n                this.callAutoFit(e);\n                this.tapped = null;\n            }\n        }\n    };\n    Resize.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    Resize.prototype.timeoutHandler = function () {\n        this.tapped = null;\n    };\n    return Resize;\n}());\nexport { Resize };\n","import { extend } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, createElement, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * `Reorder` module is used to handle columns reorder.\n */\nvar Reorder = /** @class */ (function () {\n    /**\n     * Constructor for the Grid reorder module\n     * @hidden\n     */\n    function Reorder(parent) {\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.reorderComplete, this.onActionComplete, this);\n        this.parent.on(events.columnDrag, this.drag, this);\n        this.parent.on(events.columnDragStart, this.dragStart, this);\n        this.parent.on(events.columnDragStop, this.dragStop, this);\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n    }\n    Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n        return srcElem.parentElement.isEqualNode(destElem.parentElement) && this.targetParentContainerIndex(srcElem, destElem) > -1;\n    };\n    Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n        var isFound;\n        var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n        var header;\n        while (!isFound && headers.length > 0) {\n            header = headers.pop();\n            isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n        }\n        return isFound;\n    };\n    Reorder.prototype.findColParent = function (col, cols, parent) {\n        parent = parent;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (col === cols[i]) {\n                return true;\n            }\n            else if (cols[i].columns) {\n                var cnt = parent.length;\n                parent.push(cols[i]);\n                if (!this.findColParent(col, cols[i].columns, parent)) {\n                    parent.splice(cnt, parent.length - cnt);\n                }\n                else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Reorder.prototype.getColumnsModel = function (cols) {\n        var columnModel = [];\n        var subCols = [];\n        for (var i = 0, len = cols.length; i < len; i++) {\n            columnModel.push(cols[i]);\n            if (cols[i].columns) {\n                subCols = subCols.concat(cols[i].columns);\n            }\n        }\n        if (subCols.length) {\n            columnModel = columnModel.concat(this.getColumnsModel(subCols));\n        }\n        return columnModel;\n    };\n    Reorder.prototype.headerDrop = function (e) {\n        var gObj = this.parent;\n        if (!closestElement(e.target, 'th')) {\n            return;\n        }\n        var destElem = closestElement(e.target, '.e-headercell');\n        if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n            var oldIdx = getElementIndex(this.element, headers);\n            var columns = this.getColumnsModel(this.parent.columns);\n            var column = columns[oldIdx];\n            var newIndex = this.targetParentContainerIndex(this.element, destElem);\n            this.moveColumns(newIndex, column);\n        }\n    };\n    Reorder.prototype.isActionPrevent = function (gObj) {\n        return isActionPrevent(gObj);\n    };\n    Reorder.prototype.moveColumns = function (destIndex, column) {\n        var gObj = this.parent;\n        if (this.isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n            return;\n        }\n        var parent = this.getColParent(column, this.parent.columns);\n        var cols = parent ? parent.columns : this.parent.columns;\n        var srcIdx = inArray(column, cols);\n        if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n            return;\n        }\n        cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n        gObj.getColumns(true);\n        gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n        gObj.notify(events.modelChanged, {\n            type: events.actionBegin, requestType: 'reorder'\n        });\n    };\n    Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n        var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n        var cols = this.parent.columns;\n        var flatColumns = this.getColumnsModel(cols);\n        var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n        cols = parent ? parent.columns : cols;\n        return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n    };\n    Reorder.prototype.getColParent = function (column, columns) {\n        var parents = [];\n        this.findColParent(column, columns, parents);\n        return parents[parents.length - 1];\n    };\n    /**\n     * Changes the Grid column positions by field names.\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n        var column = this.parent.getColumnByField(toFName);\n        var parent = this.getColParent(column, this.parent.columns);\n        var columns = parent ? parent.columns : this.parent.columns;\n        var destIndex = inArray(column, columns);\n        if (destIndex > -1) {\n            this.moveColumns(destIndex, this.parent.getColumnByField(fromFName));\n        }\n    };\n    Reorder.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.createReorderElement();\n        }\n    };\n    Reorder.prototype.createReorderElement = function () {\n        var header = this.parent.element.querySelector('.e-headercontent');\n        this.upArrow = header.appendChild(createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n        this.downArrow = header.appendChild(createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        remove(this.upArrow);\n        remove(this.downArrow);\n        this.parent.off(events.headerDrop, this.headerDrop);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.reorderComplete, this.onActionComplete);\n        this.parent.off(events.columnDrag, this.drag);\n        this.parent.off(events.columnDragStart, this.dragStart);\n        this.parent.off(events.columnDragStop, this.dragStop);\n        this.parent.off(events.headerRefreshed, this.createReorderElement);\n        //call ejdrag and drop destroy\n    };\n    Reorder.prototype.drag = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n        var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n        var isLeft = this.x > getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n        this.setDisplay('none');\n        this.stopTimer();\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        this.updateScrollPostion(e.event);\n        if (closest && !closest.isEqualNode(this.element)) {\n            target = closest;\n            //consider stacked, detail header cell \n            if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n                this.updateArrowPosition(target, isLeft);\n                classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n            }\n            else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        }\n        gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n    };\n    Reorder.prototype.updateScrollPostion = function (e) {\n        var _this = this;\n        var x = getPosition(e).x;\n        var cliRectBase = this.parent.element.getBoundingClientRect();\n        var scrollElem = this.parent.getContent().firstElementChild;\n        if (x > cliRectBase.left && x < cliRectBase.left + 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n        }\n        else if (x < cliRectBase.right && x > cliRectBase.right - 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n        }\n    };\n    Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n        var scrollLeft = scrollElem.scrollLeft;\n        scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n        if (scrollLeft !== scrollElem.scrollLeft) {\n            this.setDisplay('none');\n        }\n    };\n    Reorder.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n        var cliRect = target.getBoundingClientRect();\n        var cliRectBase = this.parent.element.getBoundingClientRect();\n        if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n            return;\n        }\n        this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n        this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n        this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n        this.setDisplay('');\n    };\n    Reorder.prototype.dragStart = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        this.element = target.classList.contains('e-headercell') ? target :\n            parentsUntil(target, 'e-headercell');\n        this.x = getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n        gObj.trigger(events.columnDragStart, {\n            target: target, draggableType: 'headercell', column: e.column\n        });\n    };\n    Reorder.prototype.dragStop = function (e) {\n        var gObj = this.parent;\n        this.setDisplay('none');\n        this.stopTimer();\n        if (!e.cancel) {\n            gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n        }\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n    };\n    Reorder.prototype.setDisplay = function (display) {\n        this.upArrow.style.display = display;\n        this.downArrow.style.display = display;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Reorder.prototype.getModuleName = function () {\n        return 'reorder';\n    };\n    return Reorder;\n}());\nexport { Reorder };\n","import { Draggable } from '@syncfusion/ej2-base';\nimport { extend } from '@syncfusion/ej2-base';\nimport { remove, createElement, closest as closestElement, classList } from '@syncfusion/ej2-base';\nimport { parentsUntil, removeElement, getPosition } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * Reorder module is used to handle row reordering.\n * @hidden\n */\nvar RowDD = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function RowDD(parent) {\n        var _this = this;\n        //Internal variables    \n        this.selectedRows = [];\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length ||\n                (!e.sender.target.classList.contains('e-selectionbackground') && gObj.selectionSettings.type !== 'single')) {\n                return false;\n            }\n            var visualElement = createElement('div', {\n                className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n                styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n            });\n            var table = createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n            var tbody = createElement('tbody');\n            if (gObj.selectionSettings.mode === 'row' && gObj.selectionSettings.type === 'single') {\n                var index = parseInt(e.sender.target.parentElement.getAttribute('aria-rowindex'), 10);\n                gObj.selectRow(index);\n            }\n            var selectedRows = gObj.getSelectedRows();\n            for (var i = 0, len = selectedRows.length; i < len; i++) {\n                var selectedRow = selectedRows[i].cloneNode(true);\n                removeElement(selectedRow, '.e-indentcell');\n                removeElement(selectedRow, '.e-detailrowcollapse');\n                removeElement(selectedRow, '.e-detailrowexpand');\n                tbody.appendChild(selectedRow);\n            }\n            table.appendChild(tbody);\n            visualElement.appendChild(table);\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length) {\n                return;\n            }\n            gObj.trigger(events.rowDragStart, {\n                rows: gObj.getSelectedRows(),\n                target: e.target, draggableType: 'rows', data: gObj.getSelectedRecords()\n            });\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n                dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n            }\n            _this.isDragStop = false;\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            var target = _this.getElementFromPosition(cloneElement, e.event);\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n            gObj.trigger(events.rowDrag, {\n                rows: gObj.getSelectedRows(),\n                target: target, draggableType: 'rows', data: gObj.getSelectedRecords()\n            });\n            gObj.element.classList.add('e-rowdrag');\n            if (!parentsUntil(target, 'e-gridcontent') ||\n                parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(target, 'e-grid').id) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            var target = _this.getElementFromPosition(e.helper, e.event);\n            gObj.element.classList.remove('e-rowdrag');\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n                dropElem.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n            }\n            gObj.trigger(events.rowDrop, {\n                target: target, draggableType: 'rows',\n                rows: gObj.getSelectedRows(), data: gObj.getSelectedRecords()\n            });\n            if (!parentsUntil(target, 'e-gridcontent')) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeDrag, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.rowDragAndDropComplete, this.onActionComplete, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    RowDD.prototype.initializeDrag = function () {\n        var gObj = this.parent;\n        var column;\n        var drag;\n        drag = new Draggable(gObj.getContent(), {\n            dragTarget: '.e-rowcell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    RowDD.prototype.getElementFromPosition = function (element, event) {\n        var target;\n        var position = getPosition(event);\n        element.style.display = 'none';\n        target = document.elementFromPoint(position.x, position.y);\n        element.style.display = '';\n        return target;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    RowDD.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n    };\n    RowDD.prototype.getTargetIdx = function (targetRow) {\n        return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n    };\n    RowDD.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') !== 'grouping') {\n            var targetRow = closestElement(e.target, 'tr');\n            var srcControl = void 0;\n            var currentIndex = void 0;\n            if (e.droppedElement.parentElement.id !== gObj.element.id) {\n                srcControl = e.droppedElement.parentElement.ej2_instances[0];\n            }\n            else {\n                return;\n            }\n            if (srcControl.element.id !== gObj.element.id && srcControl.rowDropSettings.targetID !== gObj.element.id) {\n                return;\n            }\n            var records = srcControl.getSelectedRecords();\n            var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n            var count = 0;\n            if (isNaN(targetIndex)) {\n                targetIndex = currentIndex = 0;\n            }\n            if (gObj.allowPaging) {\n                targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n            }\n            //Todo: drag and drop mapper & BatchChanges                   \n            gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n            gObj.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n            var selectedRows = srcControl.getSelectedRowIndexes();\n            var skip = srcControl.allowPaging ?\n                (srcControl.pageSettings.currentPage * srcControl.pageSettings.pageSize) - srcControl.pageSettings.pageSize : 0;\n            this.selectedRows = [];\n            for (var i = 0, len = records.length; i < len; i++) {\n                this.selectedRows.push(skip + selectedRows[i]);\n            }\n            srcControl.notify(events.rowsRemoved, { indexes: this.selectedRows, records: records });\n            srcControl.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }\n    };\n    RowDD.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.initializeDrag();\n        }\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    RowDD.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.initializeDrag);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.rowDragAndDropComplete, this.onActionComplete);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        //destory ejdrag and drop\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    RowDD.prototype.getModuleName = function () {\n        return 'rowDragAndDrop';\n    };\n    return RowDD;\n}());\nexport { RowDD };\n","import { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { createElement, closest, remove, classList, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\n/**\n *\n * `Group` module is used to handle group action.\n */\nvar Group = /** @class */ (function () {\n    /**\n     * Constructor for Grid group module\n     * @hidden\n     */\n    function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n        var _this = this;\n        this.visualElement = createElement('div', {\n            className: 'e-cloneproperties e-dragclone e-gdclone',\n            styles: 'line-height:23px', attrs: { action: 'grouping' }\n        });\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var element = target.classList.contains('e-groupheadercell') ? target :\n                parentsUntil(target, 'e-groupheadercell');\n            if (!element) {\n                return false;\n            }\n            _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n            _this.visualElement.textContent = element.textContent;\n            _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n            _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n            _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            gObj.element.appendChild(_this.visualElement);\n            return _this.visualElement;\n        };\n        this.dragStart = function () {\n            _this.parent.element.classList.add('e-ungroupdrag');\n        };\n        this.drag = function (e) {\n            var target = e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n            if (!(parentsUntil(target, 'e-gridcontent') || parentsUntil(target, 'e-headercell'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        };\n        this.dragStop = function (e) {\n            _this.parent.element.classList.remove('e-ungroupdrag');\n            if (!(parentsUntil(e.target, 'e-gridcontent') || parentsUntil(e.target, 'e-gridheader'))) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            _this.element.classList.remove('e-hover');\n            remove(e.droppedElement);\n            _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n            _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            _this.groupColumn(column.field);\n        };\n        this.contentRefresh = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.groupSettings = groupSettings;\n        this.serviceLocator = serviceLocator;\n        this.sortedColumns = sortedColumns;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n    }\n    Group.prototype.columnDrag = function (e) {\n        var gObj = this.parent;\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        if (!parentsUntil(e.target, 'e-groupdroparea') &&\n            !(this.parent.allowReordering && parentsUntil(e.target, 'e-headercell'))) {\n            classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n        }\n        e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n    };\n    Group.prototype.columnDragStart = function (e) {\n        if (e.target.classList.contains('e-stackedheadercell')) {\n            return;\n        }\n        var gObj = this.parent;\n        var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n        this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n        var element = e.target.classList.contains('e-headercell') ? e.target : parentsUntil(e.target, 'e-headercell');\n        this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n    };\n    Group.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') === 'grouping') {\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            this.ungroupColumn(column.field);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.groupComplete, this.onActionComplete, this);\n        this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.columnDrag, this.columnDrag, this);\n        this.parent.on(events.columnDragStart, this.columnDragStart, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.initialEnd, this.render, this);\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.groupComplete, this.onActionComplete);\n        this.parent.off(events.ungroupComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.columnDrag, this.columnDrag);\n        this.parent.off(events.columnDragStart, this.columnDragStart);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.sortComplete, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n    };\n    Group.prototype.initialEnd = function () {\n        var gObj = this.parent;\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.groupColumn(col);\n            }\n            this.contentRefresh = true;\n        }\n    };\n    Group.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if (!this.groupSettings.columns.length) {\n            return;\n        }\n        e.preventDefault();\n        switch (e.action) {\n            case 'altDownArrow':\n            case 'altUpArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var rows = gObj.getContentTable().querySelector('tbody').children;\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var grpRow = void 0;\n                    for (var i = dataRow.rowIndex; i >= 0; i--) {\n                        if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n                            grpRow = rows[i];\n                            break;\n                        }\n                    }\n                    this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n                        '.e-recordplusexpand' : '.e-recordpluscollapse'));\n                }\n                break;\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                var row = element.parentElement.querySelector('[class^=\"e-record\"]');\n                if (!row) {\n                    break;\n                }\n                this.expandCollapseRows(row);\n                break;\n        }\n    };\n    Group.prototype.clickHandler = function (e) {\n        this.expandCollapseRows(e.target);\n        this.applySortFromTarget(e.target);\n        this.unGroupFromTarget(e.target);\n        this.toogleGroupFromHeader(e.target);\n    };\n    Group.prototype.unGroupFromTarget = function (target) {\n        if (target.classList.contains('e-ungroupbutton')) {\n            this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n        }\n    };\n    Group.prototype.toogleGroupFromHeader = function (target) {\n        if (this.groupSettings.showToggleButton) {\n            if (target.classList.contains('e-grptogglebtn')) {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n                else {\n                    this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n            }\n            else {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n                }\n            }\n        }\n    };\n    Group.prototype.applySortFromTarget = function (target) {\n        var gObj = this.parent;\n        var gHeader = closest(target, '.e-groupheadercell');\n        if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n            !target.classList.contains('e-toggleungroup')) {\n            var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n            if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n                gObj.sortColumn(field, 'descending', true);\n            }\n            else {\n                gObj.sortColumn(field, 'ascending', true);\n            }\n        }\n    };\n    /**\n     * Expand or collapse grouped rows by target element.\n     * @param  {Element} target - Defines the target element of grouped row.\n     * @return {void}\n     */\n    Group.prototype.expandCollapseRows = function (target) {\n        var trgt = parentsUntil(target, 'e-recordplusexpand') ||\n            parentsUntil(target, 'e-recordpluscollapse');\n        if (trgt) {\n            var cellIdx = trgt.cellIndex;\n            var rowIdx = trgt.parentElement.rowIndex;\n            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n            var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n            var isHide = void 0;\n            var expandElem = void 0;\n            var toExpand = [];\n            var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n            var expand = false;\n            if (trgt.classList.contains('e-recordpluscollapse')) {\n                addClass([trgt], 'e-recordplusexpand');\n                removeClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n                expand = true;\n            }\n            else {\n                isHide = true;\n                removeClass([trgt], 'e-recordplusexpand');\n                addClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n            }\n            this.aria.setExpand(trgt, expand);\n            for (var i = 0, len = rows.length; i < len; i++) {\n                if (rows[i].querySelectorAll('td')[cellIdx] &&\n                    rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n                    if (isHide) {\n                        rows[i].style.display = 'none';\n                    }\n                    else {\n                        if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n                            rows[i].style.display = '';\n                            expandElem = rows[i].querySelector('.e-recordplusexpand');\n                            if (expandElem) {\n                                toExpand.push(expandElem);\n                            }\n                            if (rows[i].classList.contains('e-detailrow')) {\n                                if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n                                    rows[i].style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n            for (var i = 0, len = toExpand.length; i < len; i++) {\n                removeClass([toExpand[i]], 'e-recordplusexpand');\n                addClass([toExpand[i]], 'e-recordpluscollapse');\n                toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                this.expandCollapseRows(toExpand[i]);\n            }\n        }\n    };\n    Group.prototype.expandCollapse = function (isExpand) {\n        var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n        var row;\n        for (var i = 0, len = rowNodes.length; i < len; i++) {\n            if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n                row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n                if (row) {\n                    row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n                    row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n                        'e-icons e-gnextforward e-icon-grightarrow';\n                }\n                if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n                    rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n                    rowNodes[i].style.display = isExpand ? '' : 'none';\n                }\n            }\n            else {\n                rowNodes[i].style.display = isExpand ? '' : 'none';\n            }\n        }\n    };\n    /**\n     * Expands all the grouped rows of Grid.\n     * @return {void}\n     */\n    Group.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the grouped rows of Grid.\n     * @return {void}\n     */\n    Group.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    /**\n     * The function is used to render grouping\n     * @return {Element}\n     * @hidden\n     */\n    Group.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderGroupDropArea();\n        this.initDragAndDrop();\n        this.refreshToggleBtn();\n    };\n    Group.prototype.renderGroupDropArea = function () {\n        var groupElem = this.parent.element.querySelector('.e-groupdroparea');\n        if (groupElem) {\n            remove(groupElem);\n        }\n        this.element = createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n        this.updateGroupDropArea();\n        this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n        if (!this.groupSettings.showDropArea) {\n            this.element.style.display = 'none';\n        }\n    };\n    Group.prototype.updateGroupDropArea = function () {\n        if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n            var dragLabel = this.l10n.getConstant('GroupDropArea');\n            this.element.innerHTML = dragLabel;\n            this.element.classList.remove('e-grouped');\n        }\n        else {\n            if (this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && this.groupSettings.columns.length === 1) {\n                this.element.innerHTML = '';\n            }\n            this.element.classList.add('e-grouped');\n        }\n    };\n    Group.prototype.initDragAndDrop = function () {\n        this.initializeGHeaderDrop();\n        this.initializeGHeaderDrag();\n    };\n    Group.prototype.initializeGHeaderDrag = function () {\n        var drag = new Draggable(this.element, {\n            dragTarget: '.e-groupheadercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    Group.prototype.initializeGHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(this.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Group.prototype.groupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false ||\n            (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = gObj.groupSettings.showGroupedColumn;\n        this.colName = columnName;\n        if (this.contentRefresh) {\n            this.updateModel();\n        }\n        else {\n            this.addColToGroupDrop(columnName);\n        }\n        this.updateGroupDropArea();\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Group.prototype.ungroupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = true;\n        this.colName = column.field;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.splice(columns.indexOf(this.colName), 1);\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n                if (columnName === gObj.sortSettings.columns[i].field) {\n                    gObj.sortSettings.columns.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this.groupSettings.columns = columns;\n        if (gObj.allowGrouping) {\n            this.parent.dataBind();\n        }\n    };\n    /**\n     * The function used to update groupSettings\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.updateModel = function () {\n        var gObj = this.parent;\n        var i = 0;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.push(this.colName);\n        this.groupSettings.columns = columns;\n        while (i < gObj.sortSettings.columns.length) {\n            if (gObj.sortSettings.columns[i].field === this.colName) {\n                break;\n            }\n            i++;\n        }\n        if (gObj.sortSettings.columns.length === i) {\n            gObj.sortSettings.columns.push({ field: this.colName, direction: 'ascending' });\n        }\n        else if (!gObj.allowSorting) {\n            gObj.sortSettings.columns[i].direction = 'ascending';\n        }\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.onActionComplete = function (e) {\n        var gObj = this.parent;\n        if (e.requestType === 'grouping') {\n            this.addColToGroupDrop(this.colName);\n        }\n        else {\n            this.removeColFromGroupDrop(this.colName);\n        }\n        var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n            columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n        } : { requestType: 'ungrouping', type: events.actionComplete };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n    };\n    Group.prototype.addColToGroupDrop = function (field) {\n        var gObj = this.parent;\n        var direction = 'ascending';\n        var groupedColumn = createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n        var childDiv = createElement('div', { attrs: { 'ej-mappingname': field } });\n        var column = this.parent.getColumnByField(field);\n        //Todo headerTemplateID for grouped column, disableHtmlEncode                          \n        var headerCell = gObj.getColumnHeaderByUid(column.uid);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            if (column.headerTemplate.indexOf('#') !== -1) {\n                childDiv.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n            }\n            else {\n                childDiv.innerHTML = column.headerTemplate;\n            }\n            childDiv.firstElementChild.classList.add('e-grouptext');\n        }\n        else {\n            childDiv.appendChild(createElement('span', {\n                className: 'e-grouptext', innerHTML: column.headerText,\n                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n            }));\n        }\n        if (this.groupSettings.showToggleButton) {\n            childDiv.appendChild(createElement('span', {\n                className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n                attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n            }));\n        }\n        if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n            direction = headerCell.querySelector('.e-ascending') ? 'ascending' : 'descending';\n        }\n        childDiv.appendChild(createElement('span', {\n            className: 'e-groupsort e-icons ' + ('e-' + direction + ' e-icon-' + direction), innerHTML: '&nbsp;',\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        childDiv.appendChild(createElement('span', {\n            className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n            attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n            styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n        }));\n        groupedColumn.appendChild(childDiv);\n        this.element.appendChild(groupedColumn);\n        //Todo:  rtl \n    };\n    Group.prototype.refreshToggleBtn = function (isRemove) {\n        if (this.groupSettings.showToggleButton) {\n            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n            for (var i = 0, len = headers.length; i < len; i++) {\n                if (!(headers[i].classList.contains('e-emptycell'))) {\n                    var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n                    if (!this.parent.showColumnMenu || (this.parent.showColumnMenu && !column.showColumnMenu)) {\n                        if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n                            remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n                        }\n                        if (!isRemove) {\n                            headers[i].appendChild(createElement('span', {\n                                className: 'e-grptogglebtn e-icons ' +\n                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n                            }));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Group.prototype.removeColFromGroupDrop = function (field) {\n        remove(this.getGHeaderCell(field));\n        this.updateGroupDropArea();\n    };\n    Group.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    if (this.contentRefresh) {\n                        var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n                            columnName: this.colName, requestType: 'grouping', type: events.actionBegin\n                        } : { requestType: 'ungrouping', type: events.actionBegin };\n                        this.parent.notify(events.modelChanged, args);\n                    }\n                    break;\n                case 'showDropArea':\n                    this.updateGroupDropArea();\n                    this.groupSettings.showDropArea ? this.element.style.display = '' : this.element.style.display = 'none';\n                    break;\n                case 'showGroupedColumn':\n                    this.updateGroupedColumn(this.groupSettings.showGroupedColumn);\n                    this.parent.notify(events.modelChanged, { requestType: 'refresh' });\n                    break;\n                case 'showUngroupButton':\n                    this.updateButtonVisibility(this.groupSettings.showUngroupButton, 'e-ungroupbutton');\n                    break;\n                case 'showToggleButton':\n                    this.updateButtonVisibility(this.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n                    this.parent.refreshHeader();\n                    break;\n            }\n        }\n    };\n    Group.prototype.updateGroupedColumn = function (isVisible) {\n        for (var i = 0; i < this.groupSettings.columns.length; i++) {\n            this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n        }\n    };\n    Group.prototype.updateButtonVisibility = function (isVisible, className) {\n        var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n        for (var i = 0; i < gHeader.length; i++) {\n            gHeader[i].style.display = isVisible ? '' : 'none';\n        }\n    };\n    Group.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.destroy = function () {\n        this.clearGrouping();\n        this.removeEventListener();\n        this.refreshToggleBtn(true);\n        remove(this.element);\n        //call ejdrag and drop destroy\n    };\n    /**\n     * Clears all the grouped columns of Grid.\n     * @return {void}\n     */\n    Group.prototype.clearGrouping = function () {\n        var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        this.contentRefresh = false;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.ungroupColumn(cols[i]);\n        }\n        this.contentRefresh = true;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Group.prototype.getModuleName = function () {\n        return 'group';\n    };\n    Group.prototype.refreshSortIcons = function (e) {\n        var gObj = this.parent;\n        var header;\n        var cols = gObj.sortSettings.columns;\n        var gCols = gObj.groupSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        this.refreshToggleBtn();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n                this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n                classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n                if (cols.length > 1) {\n                    header.querySelector('.e-headercelldiv').appendChild(createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n                }\n            }\n            else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n                if (cols[i].direction === 'ascending') {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n                }\n                else {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n                }\n            }\n        }\n        for (var i = 0, len = gCols.length; i < len; i++) {\n            if (fieldNames.indexOf(gCols[i]) === -1) {\n                continue;\n            }\n            gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n        }\n    };\n    Group.prototype.getGHeaderCell = function (field) {\n        if (this.element && this.element.querySelector('[ej-mappingname=' + field + ']')) {\n            return this.element.querySelector('[ej-mappingname=' + field + ']').parentElement;\n        }\n        return null;\n    };\n    return Group;\n}());\nexport { Group };\n","import { createElement, closest, classList } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\n/**\n * `DetailRow` module is used to handle Detail Template and Hierarchy Grid operations.\n */\nvar DetailRow = /** @class */ (function () {\n    /**\n     * Constructor for the Grid detail template module\n     * @hidden\n     */\n    function DetailRow(parent, locator) {\n        //Internal variables\n        this.aria = new AriaService();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.focus = locator.getService('focus');\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    }\n    DetailRow.prototype.clickHandler = function (e) {\n        this.toogleExpandcollapse(closest(e.target, 'td'));\n    };\n    DetailRow.prototype.toogleExpandcollapse = function (target) {\n        var gObj = this.parent;\n        var parent = 'parentDetails';\n        if (target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) {\n            var tr = target.parentElement;\n            var uid_1 = tr.getAttribute('data-uid');\n            var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n            if (target.classList.contains('e-detailrowcollapse')) {\n                var key = 'records';\n                var currentViewData = gObj.allowGrouping && gObj.groupSettings.columns.length ?\n                    gObj.currentViewData[key] : gObj.currentViewData;\n                var data = currentViewData[tr.getAttribute('aria-rowindex')];\n                if (this.isDetailRow(nextRow)) {\n                    nextRow.style.display = '';\n                }\n                else if (gObj.getDetailTemplate() || gObj.childGrid) {\n                    var detailRow = createElement('tr', { className: 'e-detailrow' });\n                    var detailCell = createElement('td', { className: 'e-detailcell' });\n                    detailCell.setAttribute('colspan', this.parent.getVisibleColumns().length.toString());\n                    var row = new Row({\n                        isDataRow: true,\n                        cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n                    });\n                    for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n                        detailRow.appendChild(createElement('td', { className: 'e-indentcell' }));\n                        row.cells.unshift(new Cell({ cellType: CellType.Indent }));\n                    }\n                    detailRow.appendChild(createElement('td', { className: 'e-detailindentcell' }));\n                    detailRow.appendChild(detailCell);\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                    if (gObj.detailTemplate) {\n                        appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate'));\n                    }\n                    else {\n                        gObj.childGrid[parent] = {\n                            parentID: gObj.element.id,\n                            parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n                            parentKeyField: gObj.childGrid.queryString,\n                            parentKeyFieldValue: data[gObj.childGrid.queryString],\n                            parentRowData: data\n                        };\n                        var grid = new Grid(gObj.childGrid);\n                        var modules = grid.getInjectedModules();\n                        var injectedModues = gObj.getInjectedModules();\n                        if (!modules || modules.length !== injectedModues.length) {\n                            grid.setInjectedModules(injectedModues);\n                        }\n                        var gridElem = createElement('div', {\n                            id: 'child' + parents(tr, 'e-grid').length +\n                                '_grid' + tr.rowIndex + getUid('')\n                        });\n                        detailCell.appendChild(gridElem);\n                        grid.appendTo(gridElem);\n                    }\n                    detailRow.appendChild(detailCell);\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                    var idx_1;\n                    this.parent.getRowsObject().some(function (r, rIndex) { idx_1 = rIndex; return r.uid === uid_1; });\n                    gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n                    this.parent.getRowsObject().splice(idx_1 + 1, 0, row);\n                    gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data });\n                    gObj.notify(events.detailDataBound, { rows: this.parent.getRowsObject() });\n                }\n                classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n                classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n                this.aria.setExpand(target, true);\n            }\n            else {\n                if (this.isDetailRow(nextRow)) {\n                    nextRow.style.display = 'none';\n                }\n                classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n                classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n                this.aria.setExpand(target, false);\n            }\n        }\n    };\n    DetailRow.prototype.isDetailRow = function (row) {\n        return row && row.classList.contains('e-detailrow');\n    };\n    DetailRow.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n    };\n    DetailRow.prototype.getTDfromIndex = function (index, className) {\n        var tr = this.parent.getDataRows()[index];\n        if (tr && tr.querySelector(className)) {\n            return tr.querySelector(className);\n        }\n        return null;\n    };\n    /**\n     * Expands a detail row with the given target.\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @return {void}\n     */\n    DetailRow.prototype.expand = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n        }\n        if (target && target.classList.contains('e-detailrowcollapse')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @return {void}\n     */\n    DetailRow.prototype.collapse = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowexpand');\n        }\n        if (target && target.classList.contains('e-detailrowexpand')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Expands all the detail rows of Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the detail rows of Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    DetailRow.prototype.expandCollapse = function (isExpand) {\n        var td;\n        var rows = this.parent.getDataRows();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n            isExpand ? this.expand(td) : this.collapse(td);\n        }\n    };\n    DetailRow.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'altUpArrow':\n            case 'altDownArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n                    e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n                }\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                if (!element.classList.contains('e-detailrowcollapse') && !element.classList.contains('e-detailrowexpand')) {\n                    break;\n                }\n                this.toogleExpandcollapse(element);\n                break;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n","import { EventHandler, extend } from '@syncfusion/ej2-base';\nimport { createElement, remove } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { templateCompiler, appendChildren } from '../base/util';\n/**\n * `Toolbar` module used to handle toolbar actions.\n * @hidden\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.predefinedItems = {};\n        this.items = ['add', 'edit', 'update', 'delete', 'cancel', 'print', 'search',\n            'columnchooser', 'pdfexport', 'excelexport', 'csvexport', 'wordexport'];\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    Toolbar.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        var preItems = ['add', 'edit', 'update', 'delete', 'cancel', 'print',\n            'pdfexport', 'excelexport', 'wordexport', 'csvexport'];\n        for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n            var item = preItems_1[_i];\n            var localeName = item[0].toUpperCase() + item.slice(1);\n            this.predefinedItems[item] = {\n                id: this.gridID + '_' + item, prefixIcon: 'e-' + item,\n                text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n            };\n        }\n        this.predefinedItems.search = {\n            id: this.gridID + '_search', template: '<div class=\"e-search\" role=\"search\" >\\\n                         <span id=\"' + this.gridID + '_searchbutton\" class=\"e-searchfind e-icons\" tabindex=\"-1\"\\\n                         role=\"button\" aria-label= \"search\"></span>\\\n                         <input id=\"' + this.gridID + '_searchbar\" aria-multiline= \"false\" type=\"search\"\\\n                         placeholder=' + this.l10n.getConstant('Search') + '>\\\n                         </input></div>', tooltipText: this.l10n.getConstant('Search'), align: 'right'\n        };\n        this.predefinedItems.columnchooser = {\n            id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n            text: 'Columns', tooltipText: 'columns', align: 'right',\n        };\n        this.createToolbar();\n    };\n    /**\n     * Gets the toolbar element of grid.\n     * @return {Element}\n     * @hidden\n     */\n    Toolbar.prototype.getToolbar = function () {\n        return this.toolbar.element;\n    };\n    /**\n     * To destroy the toolbar widget of the grid.\n     * @method destroy\n     * @return {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (!this.toolbar.isDestroyed) {\n            this.unWireEvent();\n            this.toolbar.destroy();\n            this.removeEventListener();\n            remove(this.element);\n        }\n    };\n    Toolbar.prototype.createToolbar = function () {\n        var items = this.getItems();\n        this.toolbar = new tool({\n            items: items,\n            clicked: this.toolbarClickHandler.bind(this),\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl\n        });\n        var viewStr = 'viewContainerRef';\n        var registerTemp = 'registeredTemplate';\n        if (this.parent[viewStr]) {\n            this.toolbar[registerTemp] = {};\n            this.toolbar[viewStr] = this.parent[viewStr];\n        }\n        this.element = createElement('div', { id: this.gridID + '_toolbarItems' });\n        if (this.parent.toolbarTemplate) {\n            if (typeof (this.parent.toolbarTemplate) === 'string') {\n                this.toolbar.appendTo(this.parent.toolbarTemplate);\n                this.element = this.toolbar.element;\n            }\n            else {\n                appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n            }\n        }\n        else {\n            this.toolbar.appendTo(this.element);\n        }\n        this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n        this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n        this.wireEvent();\n        this.refreshToolbarItems();\n        if (this.parent.searchSettings) {\n            this.updateSearchBox();\n        }\n    };\n    Toolbar.prototype.refreshToolbarItems = function (args) {\n        var gObj = this.parent;\n        var enableItems = [];\n        var disableItems = [];\n        var edit = gObj.editSettings;\n        edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n        edit.allowEditing ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n        edit.allowDeleting ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n        if (gObj.editSettings.mode === 'batch') {\n            if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n                enableItems.push(this.gridID + '_update');\n                enableItems.push(this.gridID + '_cancel');\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        else {\n            if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n                enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n                disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        this.enableItems(enableItems, true);\n        this.enableItems(disableItems, false);\n    };\n    Toolbar.prototype.getItems = function () {\n        var items = [];\n        var toolbarItems = this.parent.toolbar || [];\n        if (typeof (this.parent.toolbar) === 'string') {\n            return [];\n        }\n        for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n            var item = toolbarItems_1[_i];\n            switch (typeof item) {\n                case 'number':\n                    items.push(this.getItemObject(this.items[item]));\n                    break;\n                case 'string':\n                    items.push(this.getItemObject(item));\n                    break;\n                default:\n                    items.push(this.getItem(item));\n            }\n        }\n        return items;\n    };\n    Toolbar.prototype.getItem = function (itemObject) {\n        var item = this.predefinedItems[itemObject.text];\n        return item ? extend(item, item, itemObject) : itemObject;\n    };\n    Toolbar.prototype.getItemObject = function (itemName) {\n        return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n    };\n    /**\n     * Enable or disable toolbar items.\n     * @param {string[]} items - Define the collection of itemID of toolbar items.\n     * @param {boolean} isEnable - Define the items to be enable or disable.\n     * @return {void}\n     * @hidden\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            var element = this.element.querySelector('#' + item);\n            if (element) {\n                this.toolbar.enableItems(element.parentElement, isEnable);\n            }\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (args) {\n        var gObj = this.parent;\n        var gID = this.gridID;\n        if (!args.item) {\n            gObj.trigger(events.toolbarClick, args);\n            return;\n        }\n        switch (args.item.id) {\n            case gID + '_print':\n                gObj.print();\n                break;\n            case gID + '_edit':\n                gObj.startEdit();\n                break;\n            case gID + '_update':\n                gObj.endEdit();\n                break;\n            case gID + '_cancel':\n                gObj.closeEdit();\n                break;\n            case gID + '_add':\n                gObj.addRecord();\n                break;\n            case gID + '_delete':\n                gObj.deleteRecord();\n                break;\n            // case gID + '_pdfexport':\n            //     break;\n            // case gID + '_wordexport':\n            //     break;\n            // case gID + '_excelexport':\n            //     break;\n            // case gID + '_csvexport':\n            //     break;\n            case gID + '_search':\n                if (args.originalEvent.target.id === gID + '_searchbutton') {\n                    this.search();\n                }\n                break;\n            case gID + '_columnchooser':\n                var tarElement = this.parent.element.querySelector('.e-ccdiv');\n                var y = tarElement.getBoundingClientRect().top;\n                var x = tarElement.getBoundingClientRect().left;\n                var targetEle = args.originalEvent.target;\n                y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n                gObj.createColumnchooser(x, y, targetEle);\n                break;\n            default:\n                gObj.trigger(events.toolbarClick, args);\n        }\n    };\n    Toolbar.prototype.modelChanged = function (e) {\n        if (e.module === 'edit') {\n            this.refreshToolbarItems();\n        }\n    };\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n            return;\n        }\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.keyUpHandler = function (e) {\n        if (e.keyCode === 13) {\n            this.search();\n        }\n    };\n    Toolbar.prototype.search = function () {\n        this.parent.search(this.searchElement.value);\n    };\n    Toolbar.prototype.updateSearchBox = function () {\n        if (this.searchElement) {\n            this.searchElement.value = this.parent.searchSettings.key;\n        }\n    };\n    Toolbar.prototype.wireEvent = function () {\n        if (this.searchElement) {\n            EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        if (this.searchElement) {\n            EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n        }\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n        this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n        this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n        this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n        this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.onPropertyChanged);\n        this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n        this.parent.off(events.modelChanged, this.refreshToolbarItems);\n        this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n        this.parent.off(events.inBoundModelChanged, this.modelChanged);\n        this.parent.off(events.dataBound, this.refreshToolbarItems);\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\n/**\n * Footer module is used to render grid content\n * @hidden\n */\nvar FooterRenderer = /** @class */ (function (_super) {\n    __extends(FooterRenderer, _super);\n    function FooterRenderer(gridModule, serviceLocator) {\n        var _this = _super.call(this, gridModule, serviceLocator) || this;\n        _this.aggregates = {};\n        _this.parent = gridModule;\n        _this.locator = serviceLocator;\n        _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * The function is used to render grid footer div\n     */\n    FooterRenderer.prototype.renderPanel = function () {\n        var div = createElement('div', { className: 'e-gridfooter' });\n        var innerDiv = createElement('div', { className: 'e-summarycontent' });\n        if (Browser.isDevice) {\n            innerDiv.style.overflowX = 'scroll';\n        }\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (this.parent.getPager() != null) {\n            this.parent.element.insertBefore(div, this.parent.getPager());\n        }\n        else {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid footer table\n     */\n    FooterRenderer.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var innerDiv = this.createContentTable();\n        var table = innerDiv.querySelector('.e-table');\n        var tFoot = createElement('tfoot');\n        table.appendChild(tFoot);\n        this.setTable(table);\n    };\n    FooterRenderer.prototype.renderSummaryContent = function (e) {\n        var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n        var summaries = this.modelGenerator.getData();\n        var dummies = this.modelGenerator.getColumns();\n        var rows = this.modelGenerator.generateRows(input, e || this.aggregates);\n        var fragment = document.createDocumentFragment();\n        var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n        rowrenderer.element = createElement('TR', { className: 'e-summaryrow' });\n        for (var srow = 0, len = summaries.length; srow < len; srow++) {\n            var row = rows[srow];\n            if (!row) {\n                continue;\n            }\n            var tr = rowrenderer.render(row, dummies);\n            fragment.appendChild(tr);\n        }\n        this.getTable().tFoot.appendChild(fragment);\n        this.aggregates = e;\n    };\n    FooterRenderer.prototype.refresh = function (e) {\n        this.getTable().tFoot.innerHTML = '';\n        this.renderSummaryContent(e);\n        this.onScroll();\n    };\n    FooterRenderer.prototype.refreshCol = function () {\n        var headerCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n        this.getTable().replaceChild(headerCol, this.getColGroup());\n        this.setColGroup(headerCol);\n    };\n    FooterRenderer.prototype.onWidthChange = function (args) {\n        this.getColGroup().children[args.index].style.width = formatUnit(args.width);\n        if (this.parent.allowResizing && args.module === 'resize') {\n            this.updateFooterTableWidth(this.getTable());\n        }\n    };\n    FooterRenderer.prototype.onScroll = function (e) {\n        if (e === void 0) { e = { left: this.parent.getContent().firstChild.scrollLeft }; }\n        this.getPanel().firstChild.scrollLeft = e.left;\n    };\n    FooterRenderer.prototype.columnVisibilityChanged = function () {\n        this.refresh();\n    };\n    FooterRenderer.prototype.addEventListener = function () {\n        this.parent.on(colGroupRefresh, this.refreshCol, this);\n        this.parent.on(columnWidthChanged, this.onWidthChange, this);\n        this.parent.on(scroll, this.onScroll, this);\n        this.parent.on(columnVisibilityChanged, this.columnVisibilityChanged, this);\n    };\n    FooterRenderer.prototype.removeEventListener = function () {\n        this.parent.off(colGroupRefresh, this.refreshCol);\n        this.parent.off(columnWidthChanged, this.onWidthChange);\n        this.parent.off(scroll, this.onScroll);\n        this.parent.off(columnVisibilityChanged, this.columnVisibilityChanged);\n    };\n    FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n        var tHead = this.parent.getHeaderTable();\n        if (tHead && tFoot) {\n            tFoot.style.width = tHead.style.width;\n        }\n    };\n    return FooterRenderer;\n}(ContentRender));\nexport { FooterRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\n/**\n * SummaryCellRenderer class which responsible for building summary cell content.\n * @hidden\n */\nvar SummaryCellRenderer = /** @class */ (function (_super) {\n    __extends(SummaryCellRenderer, _super);\n    function SummaryCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n        var key;\n        key = !isNullOrUndefined(column.type) ? column.field + ' - ' + (column.type) : column.columnName;\n        return data[column.columnName] ? data[column.columnName][key] : '';\n    };\n    SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n        var column = cell.column;\n        if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n            return true;\n        }\n        var tempObj = column.getTemplate(cell.cellType);\n        appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property));\n        return false;\n    };\n    return SummaryCellRenderer;\n}(CellRenderer));\nexport { SummaryCellRenderer };\n","import { EventHandler } from '@syncfusion/ej2-base';\nimport { debounce } from '@syncfusion/ej2-base';\n/**\n * InterSectionObserver - class watch whether it enters the viewport.\n * @hidden\n */\nvar InterSectionObserver = /** @class */ (function () {\n    function InterSectionObserver(element, options) {\n        var _this = this;\n        this.fromWheel = false;\n        this.touchMove = false;\n        this.options = {};\n        this.sentinelInfo = {\n            'up': {\n                check: function (rect, info) {\n                    var top = rect.top - _this.containerRect.top;\n                    info.entered = top >= 0;\n                    return top + (_this.options.pageHeight / 2) >= 0;\n                },\n                axis: 'Y'\n            },\n            'down': {\n                check: function (rect, info) {\n                    var cHeight = _this.options.container.clientHeight;\n                    var top = rect.bottom;\n                    info.entered = rect.bottom <= _this.containerRect.bottom;\n                    return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n                }, axis: 'Y'\n            },\n            'right': {\n                check: function (rect, info) {\n                    var right = rect.right;\n                    info.entered = right < _this.containerRect.right;\n                    return right - _this.containerRect.width <= _this.containerRect.right;\n                }, axis: 'X'\n            },\n            'left': {\n                check: function (rect, info) {\n                    var left = rect.left;\n                    info.entered = left > 0;\n                    return left + _this.containerRect.width >= _this.containerRect.left;\n                }, axis: 'X'\n            }\n        };\n        this.element = element;\n        this.options = options;\n    }\n    InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n        var _this = this;\n        this.containerRect = this.options.container.getBoundingClientRect();\n        EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n        EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n    };\n    InterSectionObserver.prototype.check = function (direction) {\n        var info = this.sentinelInfo[direction];\n        return info.check(this.element.getBoundingClientRect(), info);\n    };\n    InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n        var _this = this;\n        var prevTop = 0;\n        var prevLeft = 0;\n        var debounced100 = debounce(callback, 100);\n        var debounced50 = debounce(callback, 50);\n        return function (e) {\n            var top = e.target.scrollTop;\n            var left = e.target.scrollLeft;\n            var direction = prevTop < top ? 'down' : 'up';\n            direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n            prevTop = top;\n            prevLeft = left;\n            var current = _this.sentinelInfo[direction];\n            if (_this.options.axes.indexOf(current.axis) === -1) {\n                return;\n            }\n            var check = _this.check(direction);\n            if (current.entered) {\n                onEnterCallback(_this.element, current, direction, { top: top, left: left });\n            }\n            if (check) {\n                var fn = _this.fromWheel ? _this.options.debounceEvent ? debounced100 : callback : debounced100;\n                if (current.axis === 'X') {\n                    fn = debounced50;\n                }\n                fn({ direction: direction, sentinel: current, offset: { top: top, left: left } });\n            }\n            _this.fromWheel = false;\n        };\n    };\n    InterSectionObserver.prototype.setPageHeight = function (value) {\n        this.options.pageHeight = value;\n    };\n    return InterSectionObserver;\n}());\nexport { InterSectionObserver };\n","import { Browser } from '@syncfusion/ej2-base';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\n/**\n * Content module is used to render grid content\n */\nvar VirtualRowModelGenerator = /** @class */ (function () {\n    function VirtualRowModelGenerator(parent) {\n        this.cOffsets = {};\n        this.cache = {};\n        this.data = {};\n        this.groups = {};\n        this.parent = parent;\n        this.model = this.parent.pageSettings;\n        this.rowModelGenerator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    }\n    VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var _this = this;\n        var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n        var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n        var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n        var result = [];\n        var center = ~~(this.model.pageSize / 2);\n        var indexes = this.getBlockIndexes(page);\n        var loadedBlocks = [];\n        this.checkAndResetCache(notifyArgs.requestType);\n        if (this.parent.enableColumnVirtualization) {\n            info.blockIndexes.forEach(function (value) {\n                if (_this.isBlockAvailable(value)) {\n                    _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n                }\n            });\n        }\n        info.blockIndexes.forEach(function (value) {\n            if (!_this.isBlockAvailable(value)) {\n                var rows = _this.rowModelGenerator.generateRows(data, {\n                    virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n                });\n                var median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n                if (!_this.isBlockAvailable(indexes[0])) {\n                    _this.cache[indexes[0]] = rows.slice(0, median);\n                }\n                if (!_this.isBlockAvailable(indexes[1])) {\n                    _this.cache[indexes[1]] = rows.slice(median);\n                }\n            }\n            if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n                _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n            }\n            result.push.apply(result, _this.cache[value]);\n            if (_this.isBlockAvailable(value)) {\n                loadedBlocks.push(value);\n            }\n        });\n        info.blockIndexes = loadedBlocks;\n        return result;\n    };\n    VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualRowModelGenerator.prototype.getPage = function (block) {\n        return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n    };\n    VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n        return value in this.cache;\n    };\n    VirtualRowModelGenerator.prototype.getData = function () {\n        return {\n            page: this.model.currentPage,\n            blockIndexes: this.getBlockIndexes(this.model.currentPage),\n            direction: 'down',\n            columnIndexes: this.parent.getColumnIndexesInView()\n        };\n    };\n    VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n        if (full === void 0) { full = true; }\n        var page = this.getPage(blk);\n        var even = blk % 2 === 0;\n        var index = (page - 1) * this.model.pageSize;\n        return full || !even ? index : index + ~~(this.model.pageSize / 2);\n    };\n    VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n        var _this = this;\n        if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n        var indexes = [];\n        var sLeft = content.scrollLeft | 0;\n        var keys = Object.keys(this.cOffsets);\n        var cWidth = content.getBoundingClientRect().width;\n        sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n        var calWidth = Browser.isDevice ? 2 * cWidth : cWidth / 2;\n        var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n        keys.some(function (offset, indx, input) {\n            var iOffset = Number(offset);\n            var offsetVal = _this.cOffsets[offset];\n            var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n            if (border) {\n                indexes.push(iOffset);\n            }\n            return left + calWidth < offsetVal;\n        });\n        return indexes;\n    };\n    VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n        var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping']\n            .some(function (value) { return action === value; });\n        if (clear) {\n            this.cache = {};\n            this.data = {};\n            this.groups = {};\n        }\n        return clear;\n    };\n    VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n        var _this = this;\n        var col = 0;\n        this.cOffsets = {};\n        var gLen = this.parent.groupSettings.columns.length;\n        var cols = this.parent.columns;\n        var cLen = cols.length;\n        var isVisible = function (column) { return column.visible &&\n            (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n        this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n        Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n            block = block + gLen;\n            _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n        });\n    };\n    VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n        var _this = this;\n        var currentFirst = current[0];\n        var rows = [];\n        Object.keys(this.cache).forEach(function (key) {\n            if (Number(key) < block) {\n                rows = rows.concat(_this.cache[key]);\n            }\n        });\n        if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n            return current;\n        }\n        return this.iterateGroup(current, rows);\n    };\n    VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n        var currentFirst = current[0];\n        var offset = 0;\n        if (currentFirst && currentFirst.isDataRow) {\n            return current;\n        }\n        var isPresent = current.some(function (row) {\n            return rows.some(function (oRow, index) {\n                var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n                    oRow.data.key === row.data.key;\n                if (res) {\n                    offset = index;\n                }\n                return res;\n            });\n        });\n        if (isPresent) {\n            current.shift();\n            current = this.iterateGroup(current, rows.slice(offset));\n        }\n        return current;\n    };\n    VirtualRowModelGenerator.prototype.getRows = function () {\n        var _this = this;\n        var rows = [];\n        Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n        return rows;\n    };\n    return VirtualRowModelGenerator;\n}());\nexport { VirtualRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, closest } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { getRowHeight } from '../base/util';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\n/**\n * VirtualContentRenderer\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */ (function (_super) {\n    __extends(VirtualContentRenderer, _super);\n    function VirtualContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.prevHeight = 0;\n        _this.preventEvent = false;\n        _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n        _this.offsets = {};\n        _this.tmpOffsets = {};\n        _this.virtualEle = new VirtualElementHandler();\n        _this.offsetKeys = [];\n        _this.isFocused = false;\n        _this.locator = locator;\n        _this.eventListener('on');\n        _this.vgenerator = _this.generator;\n        return _this;\n    }\n    VirtualContentRenderer.prototype.renderTable = function () {\n        this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.content = this.getPanel().firstChild;\n        this.virtualEle.renderWrapper();\n        this.virtualEle.renderPlaceHolder();\n        this.virtualEle.wrapper.style.position = 'absolute';\n        var debounceEvent = (this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline);\n        var opt = {\n            container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n            axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n        };\n        this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n    };\n    VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        this.virtualEle.adjustTable(0, 0);\n    };\n    VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n        if (this.preventEvent || this.parent.isDestroyed) {\n            this.preventEvent = false;\n            return;\n        }\n        this.isFocused = this.content === closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n        var info = scrollArgs.sentinel;\n        var viewInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n        if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n            || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n            return;\n        }\n        this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n        this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n        this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo });\n    };\n    VirtualContentRenderer.prototype.block = function (blk) {\n        return this.vgenerator.isBlockAvailable(blk);\n    };\n    VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n        var tempBlocks = [];\n        var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n        infoType.page = this.getPageFromTop(e.top, infoType);\n        infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n        infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n        var blocks = this.ensureBlocks(infoType);\n        infoType.blockIndexes = blocks;\n        infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n            .every(this.block.bind(this));\n        infoType.event = (infoType.loadNext || infoType.loadSelf) ? modelChanged : refreshVirtualBlock;\n        infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n        infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n            infoType.event = refreshVirtualBlock;\n        }\n        return infoType;\n    };\n    VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n        var _this = this;\n        var index = info.blockIndexes[info.block];\n        var mIdx;\n        var old = index;\n        var max = Math.max;\n        var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n        indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n        if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n            return indexes;\n        }\n        if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n            indexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        indexes.some(function (val, ind) {\n            var result = val === _this.getTotalBlocks();\n            if (result) {\n                mIdx = ind;\n            }\n            return result;\n        });\n        if (mIdx !== undefined) {\n            indexes = indexes.slice(0, mIdx + 1);\n            if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n                indexes = [indexes[0] - 1, indexes[0]];\n            }\n        }\n        return indexes;\n    };\n    VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n        var info = e.virtualInfo;\n        this.prevInfo = this.prevInfo || e.virtualInfo;\n        var cBlock = (info.columnIndexes[0]) - 1;\n        var cOffset = this.getColumnOffset(cBlock);\n        var width;\n        var blocks = info.blockIndexes;\n        if (this.parent.groupSettings.columns.length) {\n            this.refreshOffsets();\n        }\n        var translate = this.getTranslateY(this.content.scrollTop, this.content.getBoundingClientRect().height, info);\n        this.virtualEle.adjustTable(cOffset, translate);\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.adjustTable(cOffset, 0);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cIndex = info.columnIndexes;\n            width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n            this.header.virtualEle.setWrapperWidth(width);\n        }\n        this.virtualEle.setWrapperWidth(width, this.parent.enableColumnVirtualization || Browser.isIE);\n        target.appendChild(newChild);\n        this.getTable().appendChild(target);\n        if (this.parent.groupSettings.columns.length) {\n            if (info.direction === 'up') {\n                var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n                this.preventEvent = true;\n                var sTop = this.content.scrollTop;\n                this.content.scrollTop = sTop + blk;\n            }\n            this.setVirtualHeight();\n            this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n        }\n        this.prevInfo = info;\n        if (this.isFocused) {\n            this.content.focus();\n        }\n    };\n    VirtualContentRenderer.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.count = e.count;\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n        this.refreshOffsets();\n        this.setVirtualHeight();\n        this.resetScrollPosition(e.requestType);\n    };\n    VirtualContentRenderer.prototype.setVirtualHeight = function () {\n        var width = this.parent.enableColumnVirtualization ?\n            this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n        this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()], width);\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.setVirtualHeight(1, width);\n        }\n    };\n    VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n        var _this = this;\n        var total = this.getTotalBlocks();\n        var page = 0;\n        var extra = this.offsets[total] - this.prevHeight;\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = sTop < _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n            if (border) {\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info) {\n        if (info === undefined) {\n            info = { page: this.getPageFromTop(sTop, {}) };\n            info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        var block = (info.blockIndexes[0] || 1) - 1;\n        var translate = this.getOffset(block);\n        var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n        return translate > sTop ? this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n    };\n    VirtualContentRenderer.prototype.getOffset = function (block) {\n        return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock]);\n    };\n    VirtualContentRenderer.prototype.onEntered = function () {\n        var _this = this;\n        return function (element, current, direction, e) {\n            var xAxis = current.axis === 'X';\n            var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n            var height = _this.content.getBoundingClientRect().height;\n            var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n            var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined);\n            _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n            if (_this.parent.enableColumnVirtualization) {\n                _this.header.virtualEle.adjustTable(x, 0);\n            }\n        };\n    };\n    VirtualContentRenderer.prototype.eventListener = function (action) {\n        var _this = this;\n        this.parent[action](dataReady, this.onDataReady, this);\n        this.parent[action](refreshVirtualBlock, this.refreshContentRows, this);\n        this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n        var fn = function () {\n            _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n            _this.parent.off(contentReady, fn);\n        };\n        this.parent.on(contentReady, fn, this);\n    };\n    VirtualContentRenderer.prototype.getBlockSize = function () {\n        return this.parent.pageSettings.pageSize >> 1;\n    };\n    VirtualContentRenderer.prototype.getBlockHeight = function () {\n        return this.getBlockSize() * getRowHeight();\n    };\n    VirtualContentRenderer.prototype.isEndBlock = function (index) {\n        var totalBlocks = this.getTotalBlocks();\n        return index >= totalBlocks || index === totalBlocks - 1;\n    };\n    VirtualContentRenderer.prototype.getTotalBlocks = function () {\n        return Math.ceil(this.count / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n        return this.vgenerator.cOffsets[block] | 0;\n    };\n    VirtualContentRenderer.prototype.getModelGenerator = function () {\n        return new VirtualRowModelGenerator(this.parent);\n    };\n    VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n        if (this.actions.some(function (value) { return value === action; })) {\n            this.preventEvent = this.content.scrollTop !== 0;\n            this.content.scrollTop = 0;\n        }\n    };\n    VirtualContentRenderer.prototype.onActionBegin = function (e) {\n        //Update property silently..\n        this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n    };\n    VirtualContentRenderer.prototype.getRows = function () {\n        return this.vgenerator.getRows();\n    };\n    VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return this.parent.getDataRows()[index - startIdx];\n    };\n    VirtualContentRenderer.prototype.refreshOffsets = function () {\n        var _this = this;\n        var row = 0;\n        var bSize = this.getBlockSize();\n        var total = this.getTotalBlocks();\n        this.prevHeight = this.offsets[total];\n        this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n        this.offsets = {};\n        //Row offset update\n        Array.apply(null, Array(total)).map(function () { return ++row; })\n            .forEach(function (block) {\n            var tmp = (_this.vgenerator.cache[block] || []).length;\n            var rem = _this.count % bSize;\n            var size = block in _this.vgenerator.cache ?\n                tmp * getRowHeight() : rem && block === total ? rem * getRowHeight() : _this.getBlockHeight();\n            // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n            // tmp * getRowHeight() : this.getBlockHeight();\n            _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n            _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n        });\n        this.offsetKeys = Object.keys(this.offsets);\n        //Column offset update\n        if (this.parent.enableColumnVirtualization) {\n            this.vgenerator.refreshColOffsets();\n        }\n    };\n    VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n        this.vgenerator.refreshColOffsets();\n        this.setVirtualHeight();\n    };\n    return VirtualContentRenderer;\n}(ContentRender));\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */ (function (_super) {\n    __extends(VirtualHeaderRenderer, _super);\n    function VirtualHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.virtualEle = new VirtualElementHandler();\n        _this.gen = new VirtualRowModelGenerator(_this.parent);\n        _this.parent.on(refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n        return _this;\n    }\n    VirtualHeaderRenderer.prototype.renderTable = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.getPanel().firstChild;\n        this.virtualEle.content.style.position = 'relative';\n        this.virtualEle.renderWrapper();\n        this.virtualEle.renderPlaceHolder('absolute');\n    };\n    VirtualHeaderRenderer.prototype.appendContent = function (table) {\n        this.virtualEle.wrapper.appendChild(table);\n    };\n    VirtualHeaderRenderer.prototype.refreshUI = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n        _super.prototype.refreshUI.call(this);\n    };\n    return VirtualHeaderRenderer;\n}(HeaderRender));\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */ (function () {\n    function VirtualElementHandler() {\n    }\n    VirtualElementHandler.prototype.renderWrapper = function () {\n        this.wrapper = createElement('div', { className: 'e-virtualtable' });\n        this.wrapper.appendChild(this.table);\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n        if (position === void 0) { position = 'relative'; }\n        this.placeholder = createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n        this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n        this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n        this.placeholder.style.height = height + \"px\";\n        this.placeholder.style.width = width;\n    };\n    return VirtualElementHandler;\n}());\nexport { VirtualElementHandler };\n","import { getRowHeight } from '../base/util';\nimport { initialLoad } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from '../renderer/virtual-content-renderer';\nimport * as events from '../base/constant';\n/**\n * Virtual Scrolling class\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.instantiateRenderer = function () {\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.enableColumnVirtualization) {\n            renderer.addRenderer(RenderType.Header, new VirtualHeaderRenderer(this.parent, this.locator));\n        }\n        renderer.addRenderer(RenderType.Content, new VirtualContentRenderer(this.parent, this.locator));\n        this.ensurePageSize();\n    };\n    VirtualScroll.prototype.ensurePageSize = function () {\n        var rowHeight = getRowHeight(this.parent.element);\n        this.blockSize = ~~(this.parent.height / rowHeight);\n        var height = this.blockSize * 2;\n        var size = this.parent.pageSettings.pageSize;\n        this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n    };\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initialLoad, this.instantiateRenderer);\n        this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n    };\n    VirtualScroll.prototype.refreshVirtualElement = function (args) {\n        if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n            var renderer = this.locator.getService('rendererFactory');\n            renderer.getRenderer(RenderType.Content).refreshVirtualElement();\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { createElement, isNullOrUndefined, addClass } from '@syncfusion/ej2-base';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar InlineEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function InlineEditRender(parent) {\n        this.parent = parent;\n    }\n    InlineEditRender.prototype.addNew = function (elements, args) {\n        var tbody = this.parent.getContentTable().querySelector('tbody');\n        args.row = createElement('tr', { className: 'e-row e-addedrow' });\n        tbody.insertBefore(args.row, tbody.firstChild);\n        args.row.appendChild(this.getEditElement(elements, false));\n    };\n    InlineEditRender.prototype.update = function (elements, args) {\n        var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n        args.row.innerHTML = '';\n        args.row.appendChild(this.getEditElement(elements, true, tdElement));\n        args.row.classList.add('e-editedrow');\n    };\n    InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement) {\n        var gObj = this.parent;\n        var gLen = 0;\n        var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n        if (gObj.allowGrouping) {\n            gLen = gObj.groupSettings.columns.length;\n        }\n        var td = createElement('td', {\n            className: 'e-editcell e-normaledit',\n            attrs: { colspan: (gObj.getVisibleColumns().length + gLen + isDetail).toString() }\n        });\n        var form = createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        var table = createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n        table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n        var tbody = createElement('tbody');\n        var tr = createElement('tr');\n        var i = 0;\n        if (isDetail) {\n            tr.insertBefore(createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n        }\n        while (i < gLen) {\n            tr.appendChild(createElement('td', { className: 'e-indentcell' }));\n            i++;\n        }\n        var m = 0;\n        i = 0;\n        while ((isEdit && m < tdElement.length && i < gObj.getColumns().length) || i < gObj.getColumns().length) {\n            var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n            var col = gObj.getColumns()[i];\n            if (col.visible) {\n                var td_1 = createElement('td', {\n                    className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n                });\n                td_1.appendChild(elements[col.uid]);\n                if (col.editType === 'booleanedit') {\n                    td_1.classList.add('e-boolcell');\n                }\n                else if (col.commands || col.commandsTemplate) {\n                    addClass([td_1], 'e-unboundcell');\n                }\n                tr.appendChild(td_1);\n            }\n            i = span ? i + parseInt(span, 10) : i + 1;\n            m++;\n        }\n        tbody.appendChild(tr);\n        table.appendChild(tbody);\n        form.appendChild(table);\n        td.appendChild(form);\n        return td;\n    };\n    return InlineEditRender;\n}());\nexport { InlineEditRender };\n","import { createElement, classList } from '@syncfusion/ej2-base';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar BatchEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function BatchEditRender(parent) {\n        this.parent = parent;\n    }\n    BatchEditRender.prototype.update = function (elements, args) {\n        args.cell.innerHTML = '';\n        args.cell.appendChild(this.getEditElement(elements, args));\n        args.cell.classList.add('e-editedbatchcell');\n        classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n    };\n    BatchEditRender.prototype.getEditElement = function (elements, args) {\n        var gObj = this.parent;\n        var form = createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        form.appendChild(elements[args.columnObject.uid]);\n        if (args.columnObject.editType === 'booleanedit') {\n            args.cell.classList.add('e-boolcell');\n        }\n        if (!args.columnObject.editType) {\n            args.cell.classList.add('e-inputbox');\n        }\n        return form;\n    };\n    return BatchEditRender;\n}());\nexport { BatchEditRender };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { remove, createElement } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { changeButtonType } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar DialogEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function DialogEditRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.dialogDestroy, this.destroy, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    }\n    DialogEditRender.prototype.setLocaleObj = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n    };\n    DialogEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.createDialog = function (elements, args) {\n        var gObj = this.parent;\n        this.dialog = createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper' });\n        gObj.element.appendChild(this.dialog);\n        this.setLocaleObj();\n        this.dialogObj = new Dialog({\n            header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n                this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n            content: this.getEditElement(elements), showCloseIcon: true, allowDragging: true, close: this.destroy.bind(this),\n            closeOnEscape: true, width: '330px', target: gObj.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n                },\n                { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n        });\n        this.dialogObj.appendTo(this.dialog);\n        changeButtonType(this.dialogObj.element);\n    };\n    DialogEditRender.prototype.btnClick = function (e) {\n        if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.toLowerCase()) {\n            this.parent.closeEdit();\n            this.destroy();\n        }\n        else {\n            this.parent.endEdit();\n        }\n    };\n    DialogEditRender.prototype.destroy = function (args) {\n        this.parent.notify(events.destroyForm, {});\n        this.parent.isEdit = false;\n        this.parent.notify(events.toolbarRefresh, {});\n        if (this.dialog && !this.dialogObj.isDestroyed) {\n            this.dialogObj.destroy();\n            remove(this.dialog);\n        }\n    };\n    DialogEditRender.prototype.getEditElement = function (elements) {\n        var gObj = this.parent;\n        var div = createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n        var form = createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        var table = createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n        var tbody = createElement('tbody');\n        var cols = gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (!cols[i].visible || cols[i].commands || cols[i].commandsTemplate) {\n                continue;\n            }\n            var tr = createElement('tr');\n            var dataCell = createElement('td', { className: 'e-rowcell', attrs: { style: 'text-align:left;width:190px' } });\n            var label = createElement('label', { innerHTML: cols[i].field });\n            elements[cols[i].uid].classList.remove('e-input');\n            dataCell.appendChild(elements[cols[i].uid]);\n            tr.appendChild(dataCell);\n            tbody.appendChild(tr);\n        }\n        table.appendChild(tbody);\n        form.appendChild(table);\n        div.appendChild(form);\n        return div;\n    };\n    return DialogEditRender;\n}());\nexport { DialogEditRender };\n","import { isNullOrUndefined, closest } from '@syncfusion/ej2-base';\nimport { InlineEditRender } from './inline-edit-renderer';\nimport { BatchEditRender } from './batch-edit-renderer';\nimport { DialogEditRender } from './dialog-edit-renderer';\nimport { createElement, attributes, classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar EditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function EditRender(parent, serviceLocator) {\n        //Internal variables               \n        this.editType = {\n            'inline': InlineEditRender,\n            'normal': InlineEditRender, 'batch': BatchEditRender, 'dialog': DialogEditRender\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n        this.focus = serviceLocator.getService('focus');\n    }\n    EditRender.prototype.addNew = function (args) {\n        this.renderer.addNew(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.update = function (args) {\n        this.renderer.update(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.convertWidget = function (args) {\n        var gObj = this.parent;\n        var isFocused;\n        var cell;\n        var value;\n        var form = gObj.element.querySelector('.e-gridform');\n        var cols = gObj.editSettings.mode !== 'batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (!col.visible || col.commands) {\n                continue;\n            }\n            value = col.valueAccessor(col.field, args.rowData, col);\n            cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n            var temp = col.edit.write;\n            col.edit.write({\n                rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row\n            });\n            if (!isFocused && !cell.getAttribute('disabled')) {\n                this.focusElement(cell, args.type);\n                isFocused = true;\n            }\n        }\n    };\n    EditRender.prototype.focusElement = function (elem, type) {\n        var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n        if (!isNullOrUndefined(chkBox)) {\n            chkBox.nextElementSibling.classList.add('e-focus');\n        }\n        if (this.parent.editSettings.mode === 'batch') {\n            this.focus.onClick({ target: closest(elem, 'td') }, true);\n        }\n        else {\n            elem.focus();\n        }\n        if (elem.classList.contains('e-defaultcell')) {\n            elem.setSelectionRange(elem.value.length, elem.value.length);\n        }\n    };\n    EditRender.prototype.getEditElements = function (args) {\n        var gObj = this.parent;\n        var elements = {};\n        var cols = gObj.editSettings.mode !== 'batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var col = cols[i];\n            if (!col.visible) {\n                continue;\n            }\n            if (col.commands || col.commandsTemplate) {\n                var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n                var model = new RowModelGenerator(this.parent);\n                var cellRenderer = cellRendererFact.getCellRenderer(CellType.CommandColumn);\n                var cells = model.generateRows(args.rowData)[0].cells;\n                var td = cellRenderer.render(cells[i], args.rowData, { 'index': args.row ? args.row.getAttribute('aria-rowindex') : 0 });\n                var div = td.firstElementChild;\n                div.setAttribute('textAlign', td.getAttribute('textAlign'));\n                elements[col.uid] = div;\n                continue;\n            }\n            var value = col.valueAccessor(col.field, args.rowData, col);\n            var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n            var temp = col.edit.create;\n            var input = void 0;\n            input = col.edit.create(tArgs);\n            if (typeof input === 'string') {\n                var div = createElement('div');\n                div.innerHTML = input;\n                input = div.firstChild;\n            }\n            var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n            attributes(isInput ? input.querySelector('input') : input, {\n                name: col.field, 'e-mappinguid': col.uid,\n                id: gObj.element.id + col.field,\n            });\n            classList(input, ['e-input', 'e-field'], []);\n            if (col.textAlign === 'right') {\n                input.classList.add('e-ralign');\n            }\n            if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit') {\n                input.setAttribute('disabled', 'true');\n            }\n            elements[col.uid] = input;\n        }\n        return elements;\n    };\n    return EditRender;\n}());\nexport { EditRender };\n","import { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, addRemoveActiveClasses } from '../base/util';\n/**\n * `BooleanEditCell` is used to handle boolean cell type editing.\n * @hidden\n */\nvar BooleanEditCell = /** @class */ (function () {\n    function BooleanEditCell(parent) {\n        this.activeClasses = ['e-selectionbackground', 'e-active'];\n        this.parent = parent;\n    }\n    BooleanEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        return createElement('input', {\n            className: classNames, attrs: {\n                type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n                id: this.parent.element.id + col.field, name: col.field\n            }\n        });\n    };\n    BooleanEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    BooleanEditCell.prototype.write = function (args) {\n        var selectChkBox;\n        var chkState;\n        if (!isNullOrUndefined(args.row)) {\n            selectChkBox = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (args.rowData[args.column.field]) {\n            chkState = JSON.parse(args.rowData[args.column.field].toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(selectChkBox)) {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                chkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), chkState].concat(this.activeClasses));\n        }\n        this.obj = new CheckBox(extend({\n            label: this.parent.editSettings.mode !== 'dialog' ? '' : args.column.headerText,\n            checked: chkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.checkBoxChange.bind(this)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    BooleanEditCell.prototype.checkBoxChange = function (args) {\n        if (this.editRow && this.editType !== 'dialog') {\n            var add = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                add = true;\n                this.editRow.setAttribute('aria-selected', add.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), add].concat(this.activeClasses));\n        }\n    };\n    BooleanEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return BooleanEditCell;\n}());\nexport { BooleanEditCell };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { isEditable } from '../base/util';\nimport { parentsUntil } from '../base/util';\n/**\n * `DropDownEditCell` is used to handle dropdown cell type editing.\n * @hidden\n */\nvar DropDownEditCell = /** @class */ (function () {\n    function DropDownEditCell(parent) {\n        //constructor\n        this.parent = parent;\n    }\n    DropDownEditCell.prototype.create = function (args) {\n        //create\n        return createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + args.column.field, name: args.column.field, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    DropDownEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'dialog';\n        this.obj = new DropDownList(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field }, value: args.rowData[args.column.field],\n            enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete,\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n        args.element.setAttribute('name', args.column.field);\n    };\n    DropDownEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DropDownEditCell.prototype.ddActionComplete = function (e) {\n        e.result = e.result.filter(function (val, i, values) { return values.indexOf(val) === i; });\n        e.result.sort();\n    };\n    DropDownEditCell.prototype.dropDownOpen = function (args) {\n        var dlgElement = parentsUntil(this.obj.element, 'e-dialog');\n        if (!isNullOrUndefined(dlgElement)) {\n            var dlgObj = this.parent.element.querySelector('#' + dlgElement.id).ej2_instances[0];\n            args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n        }\n    };\n    DropDownEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DropDownEditCell;\n}());\nexport { DropDownEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable } from '../base/util';\n/**\n * `NumericEditCell` is used to handle numeric cell type editing.\n * @hidden\n */\nvar NumericEditCell = /** @class */ (function () {\n    function NumericEditCell(parent) {\n        this.parent = parent;\n    }\n    NumericEditCell.prototype.create = function (args) {\n        return createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + args.column.field, name: args.column.field, 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    NumericEditCell.prototype.read = function (element) {\n        element.ej2_instances[0].focusOut();\n        return element.ej2_instances[0].value;\n    };\n    NumericEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'dialog';\n        this.obj = new NumericTextBox(extend({\n            value: parseFloat(args.rowData[col.field]), enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText,\n            enabled: isEditable(args.column, args.requestType, args.element),\n            floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n        }, col.edit.params));\n        this.obj.appendTo(args.element);\n        args.element.setAttribute('name', col.field);\n    };\n    NumericEditCell.prototype.destroy = function () {\n        if (this.obj && !this.obj.isDestroyed) {\n            this.obj.destroy();\n        }\n    };\n    return NumericEditCell;\n}());\nexport { NumericEditCell };\n","import { createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { isEditable } from '../base/util';\n/**\n * `DefaultEditCell` is used to handle default cell type editing.\n * @hidden\n */\nvar DefaultEditCell = /** @class */ (function () {\n    function DefaultEditCell(parent) {\n        this.parent = parent;\n    }\n    DefaultEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var input = createElement('input', {\n            className: 'e-field e-input e-defaultcell', attrs: {\n                type: 'text', value: !isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n                id: this.parent.element.id + col.field, name: col.field, style: 'text-align:' + col.textAlign,\n            }\n        });\n        return input;\n    };\n    DefaultEditCell.prototype.read = function (element) {\n        return element.value;\n    };\n    DefaultEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'dialog';\n        Input.createInput({\n            element: args.element, floatLabelType: this.parent.editSettings.mode !== 'dialog' ? 'Never' : 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl, enabled: isEditable(args.column, args.requestType, args.element),\n                placeholder: isInline ? '' : args.column.headerText\n            }\n        });\n    };\n    return DefaultEditCell;\n}());\nexport { DefaultEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n * @hidden\n */\nvar NormalEdit = /** @class */ (function () {\n    function NormalEdit(parent, serviceLocator, renderer) {\n        this.parent = parent;\n        this.renderer = renderer;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    NormalEdit.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        if (parentsUntil(target, 'e-gridcontent') && !parentsUntil(target, 'e-unboundcelldiv')) {\n            this.rowIndex = parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n            if (gObj.isEdit) {\n                gObj.editModule.endEdit();\n            }\n        }\n    };\n    NormalEdit.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n            this.parent.editModule.startEdit(parentsUntil(e.target, 'e-row'));\n        }\n    };\n    /**\n     * The function used to trigger editComplete\n     * @return {void}\n     * @hidden\n     */\n    NormalEdit.prototype.editComplete = function (e) {\n        this.parent.isEdit = false;\n        switch (e.requestType) {\n            case 'save':\n                if (!this.parent.element.classList.contains('e-checkboxselection')\n                    || !this.parent.element.classList.contains('e-persistselection')) {\n                    this.parent.selectRow(0);\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'save',\n                    type: events.actionComplete\n                }));\n                break;\n            case 'delete':\n                this.parent.selectRow(this.editRowIndex);\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'delete',\n                    type: events.actionComplete\n                }));\n                break;\n        }\n    };\n    NormalEdit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        var primaryKeys = gObj.getPrimaryKeyFieldNames();\n        var primaryKeyValues = [];\n        this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n        this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n        for (var i = 0; i < primaryKeys.length; i++) {\n            primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n        }\n        var args = {\n            row: tr, primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n            rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false\n        };\n        gObj.trigger(events.beginEdit, args);\n        args.type = 'actionBegin';\n        gObj.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.isEdit = true;\n        gObj.clearSelection();\n        if (gObj.editSettings.mode === 'dialog') {\n            args.row.classList.add('e-dlgeditrow');\n        }\n        this.renderer.update(args);\n        this.uid = tr.getAttribute('data-uid');\n        gObj.editModule.applyFormValidation();\n        args.type = 'actionComplete';\n        gObj.trigger(events.actionComplete, args);\n    };\n    NormalEdit.prototype.endEdit = function () {\n        var gObj = this.parent;\n        if (!this.parent.isEdit || !gObj.editModule.formObj.validate()) {\n            return;\n        }\n        var editedData = extend({}, this.previousData);\n        var args = {\n            requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n            previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n        };\n        editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-gridform'), editedData);\n        if (gObj.element.querySelectorAll('.e-editedrow').length) {\n            args.action = 'edit';\n            gObj.trigger(events.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            gObj.showSpinner();\n            this.destroyElements();\n            gObj.notify(events.updateData, args);\n        }\n        else {\n            args.action = 'add';\n            args.selectedRow = 0;\n            gObj.notify(events.modelChanged, args);\n            if (args.cancel) {\n                return;\n            }\n            this.destroyElements();\n        }\n        this.stopEditStatus();\n        if (gObj.editSettings.mode === 'dialog' && args.action !== 'add') {\n            gObj.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n        }\n    };\n    NormalEdit.prototype.destroyElements = function () {\n        var gObj = this.parent;\n        gObj.editModule.destroyWidgets();\n        gObj.editModule.destroyForm();\n        gObj.notify(events.dialogDestroy, {});\n    };\n    NormalEdit.prototype.editHandler = function (args) {\n        var _this = this;\n        if (args.promise) {\n            args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            this.editSuccess({}, args);\n        }\n    };\n    NormalEdit.prototype.edSucc = function (e, args) {\n        this.editSuccess(e, args);\n    };\n    NormalEdit.prototype.edFail = function (e) {\n        this.editFailure(e);\n    };\n    NormalEdit.prototype.editSuccess = function (e, args) {\n        if (e.result) {\n            this.parent.trigger(events.beforeDataBound, e);\n            args.data = e.result;\n        }\n        else {\n            this.parent.trigger(events.beforeDataBound, args);\n        }\n        args.type = events.actionComplete;\n        this.parent.isEdit = false;\n        this.refreshRow(args.data);\n        this.parent.trigger(events.actionComplete, args);\n        if (!this.parent.element.classList.contains('e-checkboxselection')\n            || !this.parent.element.classList.contains('e-persistselection')) {\n            this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n        }\n        this.parent.element.focus();\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.editFailure = function (e) {\n        this.parent.trigger(events.actionFailure, e);\n    };\n    NormalEdit.prototype.refreshRow = function (data) {\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var rowObj = this.parent.getRowObjectFromUID(this.uid);\n        if (rowObj) {\n            rowObj.changes = data;\n            row.refresh(rowObj, this.parent.getColumns(), true);\n        }\n    };\n    NormalEdit.prototype.closeEdit = function () {\n        if (!this.parent.isEdit) {\n            return;\n        }\n        var gObj = this.parent;\n        var args = {\n            requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n        };\n        gObj.trigger(events.actionBegin, args);\n        gObj.isEdit = false;\n        this.stopEditStatus();\n        args.type = events.actionComplete;\n        if (gObj.editSettings.mode !== 'dialog') {\n            this.refreshRow(args.data);\n        }\n        gObj.selectRow(this.rowIndex);\n        gObj.trigger(events.actionComplete, args);\n    };\n    NormalEdit.prototype.addRecord = function (data) {\n        var gObj = this.parent;\n        if (data) {\n            gObj.notify(events.modelChanged, {\n                requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add'\n            });\n            return;\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.previousData = {};\n        this.uid = '';\n        for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            this.previousData[col.field] = data && data[col.field] ? data[col.field] : col.defaultValue;\n        }\n        var args = {\n            cancel: false, foreignKeyData: {},\n            requestType: 'add', data: this.previousData, type: events.actionBegin\n        };\n        gObj.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.isEdit = true;\n        gObj.clearSelection();\n        this.renderer.addNew({ rowData: args.data, requestType: 'add' });\n        gObj.editModule.applyFormValidation();\n        args.type = events.actionComplete;\n        args.row = gObj.element.querySelector('.e-addedrow');\n        gObj.trigger(events.actionComplete, args);\n    };\n    NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.editRowIndex = this.parent.selectedRowIndex;\n        this.parent.notify(events.modelChanged, {\n            requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n            data: data ? [data] : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n        });\n    };\n    NormalEdit.prototype.stopEditStatus = function () {\n        var gObj = this.parent;\n        var elem = gObj.element.querySelector('.e-addedrow');\n        if (elem) {\n            remove(elem);\n        }\n        elem = gObj.element.querySelector('.e-editedrow');\n        if (elem) {\n            elem.classList.remove('e-editedrow');\n        }\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.crudAction, this.editHandler, this);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.deleteComplete, this.editComplete, this);\n        this.parent.on(events.saveComplete, this.editComplete, this);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.crudAction, this.editHandler);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.deleteComplete, this.editComplete);\n        this.parent.off(events.saveComplete, this.editComplete);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return NormalEdit;\n}());\nexport { NormalEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `InlineEdit` module is used to handle inline editing actions.\n * @hidden\n */\nvar InlineEdit = /** @class */ (function (_super) {\n    __extends(InlineEdit, _super);\n    function InlineEdit(parent, serviceLocator, renderer) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    InlineEdit.prototype.closeEdit = function () {\n        _super.prototype.closeEdit.call(this);\n    };\n    InlineEdit.prototype.addRecord = function (data) {\n        _super.prototype.addRecord.call(this, data);\n    };\n    InlineEdit.prototype.endEdit = function () {\n        _super.prototype.endEdit.call(this);\n    };\n    InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    InlineEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return InlineEdit;\n}(NormalEdit));\nexport { InlineEdit };\n","import { extend, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { remove, classList, createElement } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { parentsUntil, inArray } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { Cell } from '../models/cell';\nimport { RowModelGenerator } from '../services/row-model-generator';\n/**\n * `BatchEdit` module is used to handle batch editing actions.\n * @hidden\n */\nvar BatchEdit = /** @class */ (function () {\n    function BatchEdit(parent, serviceLocator, renderer) {\n        this.cellDetails = {};\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = renderer;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.beforeCellFocused, this.onBeforeCellFocused, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.dataBoundFunction = this.dataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.beforeCellFocused, this.onBeforeCellFocused);\n        this.parent.on(events.cellFocused, this.onCellFocused);\n        this.parent.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n    };\n    BatchEdit.prototype.dataBound = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    BatchEdit.prototype.clickHandler = function (e) {\n        if (!parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n            this.saveCell();\n            if (parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n                this.setCellIdx(e.target);\n            }\n        }\n    };\n    BatchEdit.prototype.dblClickHandler = function (e) {\n        var target = parentsUntil(e.target, 'e-rowcell');\n        var tr = parentsUntil(e.target, 'e-row');\n        if (target && tr && !isNaN(parseInt(target.getAttribute('aria-colindex'), 10))) {\n            this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(target.getAttribute('aria-colindex'), 10)].field);\n        }\n    };\n    BatchEdit.prototype.onBeforeCellFocused = function (e) {\n        if (this.parent.isEdit && this.validateFormObj() &&\n            (e.byClick || (['tab', 'shiftTab', 'enter', 'shiftEnter'].indexOf(e.keyArgs.action) > -1))) {\n            e.cancel = true;\n            if (e.byClick) {\n                e.clickArgs.preventDefault();\n            }\n            else {\n                e.keyArgs.preventDefault();\n            }\n        }\n    };\n    BatchEdit.prototype.onCellFocused = function (e) {\n        var clear = !e.container.isContent || !e.container.isDataCell;\n        if (!e.byKey || clear) {\n            return;\n        }\n        var _a = e.container.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        var isEdit = this.parent.isEdit;\n        if (!document.querySelectorAll('.e-popup-open').length) {\n            isEdit = isEdit && !this.validateFormObj();\n            switch (e.keyArgs.action) {\n                case 'tab':\n                case 'shiftTab':\n                    if (isEdit) {\n                        this.editCellFromIndex(rowIndex, cellIndex);\n                    }\n                    break;\n                case 'enter':\n                case 'shiftEnter':\n                    e.keyArgs.preventDefault();\n                    if (isEdit) {\n                        this.editCell(rowIndex, this.cellDetails.column.field);\n                    }\n                    break;\n                case 'f2':\n                    this.editCellFromIndex(rowIndex, cellIndex);\n                    this.focus.focus();\n                    break;\n            }\n        }\n    };\n    BatchEdit.prototype.isAddRow = function (index) {\n        return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n    };\n    BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n        this.cellDetails.rowIndex = rowIdx;\n        this.cellDetails.cellIndex = cellIdx;\n        this.editCell(rowIdx, this.parent.getColumns()[cellIdx].field);\n    };\n    BatchEdit.prototype.closeEdit = function () {\n        var gObj = this.parent;\n        var rows = this.parent.getRowsObject();\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this.parent);\n        var tr;\n        if (gObj.isEdit) {\n            this.saveCell(true);\n        }\n        gObj.clearSelection();\n        for (var i = 0; i < rows.length; i++) {\n            if (rows[i].isDirty) {\n                tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n                if (tr) {\n                    if (tr.classList.contains('e-insertedrow')) {\n                        remove(tr);\n                        this.removeRowObjectFromUID(rows[i].uid);\n                        i--;\n                    }\n                    else {\n                        delete rows[i].changes;\n                        rows[i].isDirty = false;\n                        classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n                        rowRenderer.refresh(rows[i], gObj.getColumns(), false);\n                    }\n                }\n            }\n        }\n        gObj.selectRow(this.cellDetails.rowIndex);\n        this.refreshRowIdx();\n        gObj.notify(events.toolbarRefresh, {});\n        this.parent.notify(events.tooltipDestroy, {});\n    };\n    BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.saveCell();\n        if (!this.validateFormObj()) {\n            this.bulkDelete(fieldname, data);\n        }\n    };\n    BatchEdit.prototype.addRecord = function (data) {\n        this.bulkAddRow(data);\n    };\n    BatchEdit.prototype.endEdit = function (data) {\n        if (this.parent.isEdit && this.validateFormObj()) {\n            return;\n        }\n        this.batchSave();\n    };\n    BatchEdit.prototype.validateFormObj = function () {\n        return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n    };\n    BatchEdit.prototype.batchSave = function () {\n        var gObj = this.parent;\n        this.saveCell();\n        if (gObj.isEdit) {\n            return;\n        }\n        var changes = this.getBatchChanges();\n        var args = { batchChanges: changes, cancel: false };\n        gObj.trigger(events.beforeBatchSave, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.showSpinner();\n        gObj.notify(events.bulkSave, { changes: changes });\n    };\n    BatchEdit.prototype.getBatchChanges = function () {\n        var changes = {\n            addedRecords: [],\n            deletedRecords: [],\n            changedRecords: []\n        };\n        var rows = this.parent.getRowsObject();\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (row.isDirty) {\n                switch (row.edit) {\n                    case 'add':\n                        changes.addedRecords.push(row.changes);\n                        break;\n                    case 'delete':\n                        changes.deletedRecords.push(row.data);\n                        break;\n                    default:\n                        changes.changedRecords.push(row.changes);\n                }\n            }\n        }\n        return changes;\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n        var rows = this.parent.getRowsObject();\n        var i = 0;\n        for (var len = rows.length; i < len; i++) {\n            if (rows[i].uid === uid) {\n                break;\n            }\n        }\n        rows.splice(i, 1);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addRowObject = function (row) {\n        this.parent.getRowsObject().unshift(row);\n    };\n    BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n        var gObj = this.parent;\n        var index = data ? this.getIndexFromData(data) : gObj.selectedRowIndex;\n        var args = {\n            primaryKey: this.parent.getPrimaryKeyFieldNames(),\n            rowIndex: index,\n            rowData: data ? data : gObj.getSelectedRecords()[0],\n            row: data ? gObj.getRows()[index] : gObj.getSelectedRows()[0], cancel: false\n        };\n        if (!args.row) {\n            return;\n        }\n        gObj.trigger(events.beforeBatchDelete, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.clearSelection();\n        var uid = args.row.getAttribute('data-uid');\n        if (args.row.classList.contains('e-insertedrow')) {\n            this.removeRowObjectFromUID(uid);\n            remove(args.row);\n        }\n        else {\n            var rowObj = gObj.getRowObjectFromUID(uid);\n            rowObj.isDirty = true;\n            rowObj.edit = 'delete';\n            classList(args.row, ['e-hiddenrow', 'e-updatedtd'], []);\n        }\n        this.refreshRowIdx();\n        gObj.selectRow(index);\n        delete args.row;\n        gObj.trigger(events.batchDelete, args);\n        gObj.notify(events.batchDelete, { rows: this.parent.getRowsObject() });\n        gObj.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.refreshRowIdx = function () {\n        var rows = [].slice.call(this.parent.getContentTable().querySelector('tbody').children);\n        var dataRows = [];\n        for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                rows[i].setAttribute('aria-rowindex', j.toString());\n                j++;\n            }\n            else {\n                rows[i].removeAttribute('aria-rowindex');\n            }\n        }\n    };\n    BatchEdit.prototype.getIndexFromData = function (data) {\n        return inArray(data, this.parent.getCurrentViewRecords());\n    };\n    BatchEdit.prototype.bulkAddRow = function (data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowAdding) {\n            return;\n        }\n        if (gObj.isEdit) {\n            this.saveCell();\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        var defaultData = data ? data : this.getDefaultData();\n        var args = {\n            defaultData: defaultData,\n            primaryKey: gObj.getPrimaryKeyFieldNames(),\n            cancel: false\n        };\n        gObj.trigger(events.beforeBatchAdd, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.clearSelection();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var model = new RowModelGenerator(this.parent);\n        var modelData = model.generateRows([args.defaultData]);\n        var tr = row.render(modelData[0], gObj.getColumns());\n        var col;\n        var index;\n        for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n            tr.insertBefore(createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n            modelData[0].cells.unshift(new Cell({ cellType: CellType.Indent }));\n        }\n        var tbody = gObj.getContentTable().querySelector('tbody');\n        tr.classList.add('e-insertedrow');\n        tbody.insertBefore(tr, tbody.firstChild);\n        addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n        modelData[0].isDirty = true;\n        modelData[0].changes = extend({}, modelData[0].data);\n        modelData[0].edit = 'add';\n        this.addRowObject(modelData[0]);\n        this.refreshRowIdx();\n        this.focus.forgetPrevious();\n        gObj.selectRow(0);\n        if (!data) {\n            index = this.findNextEditableCell(0, true);\n            col = gObj.getColumns()[index];\n            this.editCell(0, col.field, true);\n        }\n        var args1 = {\n            defaultData: args.defaultData, row: tr,\n            columnObject: col, columnIndex: index, primaryKey: args.primaryKey, cell: tr.cells[index]\n        };\n        gObj.trigger(events.batchAdd, args1);\n        gObj.notify(events.batchAdd, { rows: this.parent.getRowsObject() });\n    };\n    BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd) {\n        var cols = this.parent.getColumns();\n        var endIndex = cols.length;\n        for (var i = columnIndex; i < endIndex; i++) {\n            if (!isAdd && this.checkNPCell(cols[i])) {\n                return i;\n            }\n            else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.checkNPCell = function (col) {\n        return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n    };\n    BatchEdit.prototype.getDefaultData = function () {\n        var gObj = this.parent;\n        var data = {};\n        var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n        for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            data[col.field] = col.defaultValue ? col.defaultValue : dValues[col.type];\n        }\n        return data;\n    };\n    BatchEdit.prototype.setCellIdx = function (target) {\n        var gLen = 0;\n        if (this.parent.allowGrouping) {\n            gLen = this.parent.groupSettings.columns.length;\n        }\n        this.cellDetails.cellIndex = target.cellIndex - gLen;\n        this.cellDetails.rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n    };\n    BatchEdit.prototype.editCell = function (index, field, isAdd) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        var keys = gObj.getPrimaryKeyFieldNames();\n        if (gObj.editSettings.allowEditing && col.allowEditing) {\n            if (gObj.isEdit && !(this.cellDetails.column.field === field && this.cellDetails.rowIndex === index)) {\n                this.saveCell();\n            }\n            if (gObj.isEdit) {\n                return;\n            }\n            var row = gObj.getDataRows()[index];\n            if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.template || col.columns) {\n                return;\n            }\n            var rowData = extend({}, this.getDataByIndex(index));\n            var cells = [].slice.apply(row.cells);\n            var args = {\n                cell: cells[this.getColIndex(cells, this.getCellIdx(col.uid))], row: row,\n                columnName: col.field, columnObject: col, isForeignKey: !isNullOrUndefined(col.foreignKeyValue),\n                primaryKey: keys, rowData: rowData,\n                validationRules: extend({}, col.validationRules ? col.validationRules : {}),\n                value: rowData[col.field], type: !isAdd ? 'edit' : 'add', cancel: false\n            };\n            if (!args.cell) {\n                return;\n            }\n            gObj.trigger(events.cellEdit, args);\n            if (args.cancel) {\n                return;\n            }\n            this.cellDetails = {\n                rowData: rowData, column: col, value: args.value, isForeignKey: args.isForeignKey, rowIndex: index,\n                cellIndex: parseInt(args.cell.getAttribute('aria-colindex'), 10)\n            };\n            if (args.cell.classList.contains('e-updatedtd')) {\n                this.isColored = true;\n                args.cell.classList.remove('e-updatedtd');\n            }\n            gObj.isEdit = true;\n            gObj.clearSelection();\n            if (!gObj.element.classList.contains('e-checkboxselection') || !gObj.element.classList.contains('e-persistselection')) {\n                gObj.selectRow(this.cellDetails.rowIndex, true);\n            }\n            this.renderer.update(args);\n            this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n            gObj.editModule.applyFormValidation([col]);\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n        var col = this.parent.getColumnByField(field);\n        if (col && !col.isPrimaryKey) {\n            var td = this.parent.getDataRows()[rowIndex].cells[this.parent.getColumnIndexByField(field)];\n            var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n            this.refreshTD(td, col, rowObj, value);\n            this.parent.trigger(events.queryCellInfo, {\n                cell: td, column: col, data: rowObj.changes\n            });\n        }\n    };\n    BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n        if (!rowObj.changes) {\n            rowObj.changes = extend({}, rowObj.data);\n        }\n        rowObj.changes[field] = value;\n        if (rowObj.data[field] !== value) {\n            rowObj.isDirty = true;\n        }\n    };\n    BatchEdit.prototype.updateRow = function (index, data) {\n        var keys = Object.keys(data);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var col = keys_1[_i];\n            this.updateCell(index, col, data[col]);\n        }\n    };\n    BatchEdit.prototype.getCellIdx = function (uid) {\n        var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        return cIdx;\n    };\n    BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n        var cell = new CellRenderer(this.parent, this.serviceLocator);\n        this.setChanges(rowObj, column.field, value);\n        cell.refreshTD(td, rowObj.cells[this.getCellIdx(column.uid)], rowObj.changes);\n        td.classList.add('e-updatedtd');\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.getColIndex = function (cells, index) {\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n            if (colIndex === index) {\n                return m;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.saveCell = function (isForceSave) {\n        var gObj = this.parent;\n        if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n            return;\n        }\n        var tr = parentsUntil(this.form, 'e-row');\n        var column = this.cellDetails.column;\n        var editedData = gObj.editModule.getCurrentEditedData(this.form, {});\n        editedData = extend(this.cellDetails.rowData, editedData);\n        var args = {\n            columnName: column.field,\n            value: editedData[column.field],\n            rowData: this.cellDetails.rowData,\n            previousValue: this.cellDetails.value,\n            columnObject: column,\n            cell: this.form.parentElement,\n            isForeignKey: this.cellDetails.isForeignKey, cancel: false\n        };\n        if (!isForceSave) {\n            gObj.trigger(events.cellSave, args);\n        }\n        if (args.cancel) {\n            return;\n        }\n        gObj.editModule.destroyForm();\n        gObj.editModule.destroyWidgets([column]);\n        this.parent.notify(events.tooltipDestroy, {});\n        this.refreshTD(args.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), args.value);\n        removeClass([tr], ['e-editedrow', 'e-batchrow']);\n        removeClass([args.cell], ['e-editedbatchcell', 'e-boolcell']);\n        gObj.isEdit = false;\n        if (!isNullOrUndefined(args.value) && args.value.toString() ===\n            (!isNullOrUndefined(this.cellDetails.value) ? this.cellDetails.value : '').toString() && !this.isColored) {\n            args.cell.classList.remove('e-updatedtd');\n        }\n        gObj.notify(events.toolbarRefresh, {});\n        this.isColored = false;\n    };\n    BatchEdit.prototype.getDataByIndex = function (index) {\n        var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n        return row.changes ? row.changes : row.data;\n    };\n    return BatchEdit;\n}());\nexport { BatchEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `DialogEdit` module is used to handle dialog editing actions.\n * @hidden\n */\nvar DialogEdit = /** @class */ (function (_super) {\n    __extends(DialogEdit, _super);\n    function DialogEdit(parent, serviceLocator, renderer) {\n        var _this = \n        //constructor\n        _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    DialogEdit.prototype.closeEdit = function () {\n        //closeEdit\n        _super.prototype.closeEdit.call(this);\n    };\n    DialogEdit.prototype.addRecord = function (data) {\n        //addRecord\n        _super.prototype.addRecord.call(this, data);\n    };\n    DialogEdit.prototype.endEdit = function () {\n        //endEdit\n        _super.prototype.endEdit.call(this);\n    };\n    DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n        //deleteRecord\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    DialogEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return DialogEdit;\n}(NormalEdit));\nexport { DialogEdit };\n","import { extend } from '@syncfusion/ej2-base';\nimport { createElement } from '@syncfusion/ej2-base';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable } from '../base/util';\n/**\n * `DatePickerEditCell` is used to handle datepicker cell type editing.\n * @hidden\n */\nvar DatePickerEditCell = /** @class */ (function () {\n    function DatePickerEditCell(parent) {\n        this.parent = parent;\n    }\n    DatePickerEditCell.prototype.create = function (args) {\n        return createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + args.column.field, name: args.column.field, type: 'text', 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    DatePickerEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DatePickerEditCell.prototype.write = function (args) {\n        var isInline = this.parent.editSettings.mode !== 'dialog';\n        this.obj = new DatePicker(extend({\n            floatLabelType: isInline ? 'Never' : 'Always',\n            value: new Date(args.rowData[args.column.field]), placeholder: isInline ?\n                '' : args.column.headerText, enableRtl: this.parent.enableRtl,\n            enabled: isEditable(args.column, args.type, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    DatePickerEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DatePickerEditCell;\n}());\nexport { DatePickerEditCell };\n","import { EventHandler } from '@syncfusion/ej2-base';\nimport { extend, getValue } from '@syncfusion/ej2-base';\nimport { remove, createElement } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setValue } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { EditRender } from '../renderer/edit-renderer';\nimport { BooleanEditCell } from '../renderer/boolean-edit-cell';\nimport { DropDownEditCell } from '../renderer/dropdown-edit-cell';\nimport { NumericEditCell } from '../renderer/numeric-edit-cell';\nimport { DefaultEditCell } from '../renderer/default-edit-cell';\nimport { InlineEdit } from './inline-edit';\nimport { BatchEdit } from './batch-edit';\nimport { DialogEdit } from './dialog-edit';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { parentsUntil, changeButtonType } from '../base/util';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport { DatePickerEditCell } from '../renderer/datepicker-edit-cell';\n/**\n * `Edit` module is used to handle editing actions.\n */\nvar Edit = /** @class */ (function () {\n    /**\n     * Constructor for the Grid editing module\n     * @hidden\n     */\n    function Edit(parent, serviceLocator) {\n        this.editCellType = {\n            'dropdownedit': DropDownEditCell, 'numericedit': NumericEditCell,\n            'datepickeredit': DatePickerEditCell, 'booleanedit': BooleanEditCell, 'defaultedit': DefaultEditCell\n        };\n        this.editType = { 'inline': InlineEdit, 'normal': InlineEdit, 'batch': BatchEdit, 'dialog': DialogEdit };\n        this.tapped = false;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.addEventListener();\n        this.updateEditObj();\n        this.createAlertDlg();\n        this.createConfirmDlg();\n    }\n    Edit.prototype.updateColTypeObj = function () {\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            col.edit = extend(new this.editCellType[col.editType && this.editCellType[col.editType] ?\n                col.editType : 'defaultedit'](this.parent, this.serviceLocator), col.edit || {});\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Edit.prototype.getModuleName = function () {\n        return 'edit';\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowAdding':\n                case 'allowDeleting':\n                case 'allowEditing':\n                    if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n                        this.initialEnd();\n                    }\n                    break;\n                case 'mode':\n                    this.updateEditObj();\n                    gObj.isEdit = false;\n                    gObj.refresh();\n                    break;\n            }\n        }\n    };\n    Edit.prototype.updateEditObj = function () {\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n        this.renderer = new EditRender(this.parent, this.serviceLocator);\n        this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n    };\n    Edit.prototype.initialEnd = function () {\n        this.updateColTypeObj();\n    };\n    Edit.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n    };\n    Edit.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n    };\n    Edit.prototype.tapEvent = function (e) {\n        if (this.getUserAgent()) {\n            if (!this.tapped) {\n                this.tapped = setTimeout(this.timeoutHandler(), 300);\n            }\n            else {\n                clearTimeout(this.tapped);\n                this.parent.notify(events.doubleTap, e);\n                this.tapped = null;\n            }\n        }\n    };\n    Edit.prototype.getUserAgent = function () {\n        var userAgent = window.navigator.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    Edit.prototype.timeoutHandler = function () {\n        this.tapped = null;\n    };\n    /**\n     * To edit any particular row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     */\n    Edit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'batch') {\n            return;\n        }\n        if (!gObj.getSelectedRows().length) {\n            if (!tr) {\n                this.showDialog('EditOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        else if (!tr) {\n            tr = gObj.getSelectedRows()[0];\n        }\n        if (tr.style.display === 'none') {\n            return;\n        }\n        this.editModule.startEdit(tr);\n        this.refreshToolbar();\n        gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n        this.parent.notify('start-edit', {});\n    };\n    /**\n     * Cancel edited state.\n     */\n    Edit.prototype.closeEdit = function () {\n        if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog\n            && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n            this.showDialog('CancelEdit', this.dialogObj);\n            return;\n        }\n        this.editModule.closeEdit();\n        this.refreshToolbar();\n        this.parent.notify('close-edit', {});\n    };\n    Edit.prototype.refreshToolbar = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * To add a new row at top of rows with given data. If data is not passed then it will render empty row.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     */\n    Edit.prototype.addRecord = function (data) {\n        if (!this.parent.editSettings.allowAdding) {\n            return;\n        }\n        this.editModule.addRecord(data);\n        this.refreshToolbar();\n        this.parent.notify('start-add', {});\n    };\n    /**\n     * Delete a record with Given options. If fieldname and data is not given then grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field Name of the column.\n     * @param {Object} data - Defines the JSON data of record need to be delete.\n     */\n    Edit.prototype.deleteRecord = function (fieldname, data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowDeleting) {\n            return;\n        }\n        if (!data) {\n            if (isNullOrUndefined(gObj.selectedRowIndex) || gObj.selectedRowIndex === -1) {\n                this.showDialog('DeleteOperationAlert', this.alertDObj);\n                return;\n            }\n            if (gObj.editSettings.showDeleteConfirmDialog) {\n                this.showDialog('ConfirmDelete', this.dialogObj);\n                return;\n            }\n        }\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * Delete any visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Edit.prototype.deleteRow = function (tr) {\n        this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n    };\n    /**\n     * If Grid is in editable state, then you can save a record by invoking endEdit.\n     */\n    Edit.prototype.endEdit = function () {\n        if (this.parent.editSettings.mode === 'batch' && this.parent.editSettings.showConfirmDialog) {\n            this.showDialog('BatchSaveConfirm', this.dialogObj);\n            return;\n        }\n        this.endEditing();\n    };\n    /**\n     * To update value of any cell without change into edit mode.\n     * @param {number} rowIndex - Defines the row index.\n     * @param {string} field - Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to change.\n     */\n    Edit.prototype.updateCell = function (rowIndex, field, value) {\n        this.editModule.updateCell(rowIndex, field, value);\n    };\n    /**\n     * To update values of a row without changing into edit mode.\n     * @param {number} index - Defines the row index.\n     * @param {Object} data - Defines the data object to update.\n     */\n    Edit.prototype.updateRow = function (index, data) {\n        this.editModule.updateRow(index, data);\n    };\n    /**\n     * To reset added, edited and deleted records in batch mode.\n     */\n    Edit.prototype.batchCancel = function () {\n        this.closeEdit();\n    };\n    /**\n     * To bulk Save added, edited and deleted records in batch mode.\n     */\n    Edit.prototype.batchSave = function () {\n        this.endEdit();\n    };\n    /**\n     * To turn any particular cell into edited state by row index and field name in batch mode.\n     * @param {number} index - Defines row index to edit particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     */\n    Edit.prototype.editCell = function (index, field) {\n        this.editModule.editCell(index, field);\n    };\n    /**\n     * To check current status of validation at the time of edited state. If validation passed then it will return true.\n     * @return {boolean}\n     */\n    Edit.prototype.editFormValidate = function () {\n        if (this.formObj) {\n            return this.formObj.validate();\n        }\n        return false;\n    };\n    /**\n     * To get added, edited and deleted data before bulk save to data source in batch mode.\n     * @return {Object}\n     */\n    Edit.prototype.getBatchChanges = function () {\n        return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n    };\n    /**\n     * To get current value of edited component.\n     */\n    Edit.prototype.getCurrentEditCellData = function () {\n        var obj = this.getCurrentEditedData(this.formObj.element, {});\n        return obj[Object.keys(obj)[0]];\n    };\n    /**\n     * To save current edited cell in batch. It does not save value to data source.\n     */\n    Edit.prototype.saveCell = function () {\n        this.editModule.saveCell();\n    };\n    Edit.prototype.endEditing = function () {\n        this.editModule.endEdit();\n        this.refreshToolbar();\n    };\n    Edit.prototype.showDialog = function (content, obj) {\n        obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n        obj.dataBind();\n        obj.show();\n    };\n    Edit.prototype.getValueFromType = function (col, value) {\n        var val = value;\n        switch (col.type) {\n            case 'number':\n                val = !isNaN(parseFloat(value)) ? parseFloat(value) : null;\n                break;\n            case 'boolean':\n                if (col.editType !== 'booleanedit') {\n                    val = value === this.l10n.getConstant('True') ? true : false;\n                }\n                break;\n            case 'date':\n                if (col.editType !== 'datepicker' && value && value.length) {\n                    val = new Date(value);\n                }\n                break;\n        }\n        return val;\n    };\n    Edit.prototype.destroyToolTip = function () {\n        var elements = [].slice.call(this.parent.getContentTable().querySelectorAll('.e-griderror'));\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            remove(elem);\n        }\n    };\n    Edit.prototype.createConfirmDlg = function () {\n        this.dialogObj = this.dlgWidget([\n            {\n                click: this.dlgOk.bind(this),\n                buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n            },\n            {\n                click: this.dlgCancel.bind(this),\n                buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n            }\n        ], 'EditConfirm');\n    };\n    Edit.prototype.createAlertDlg = function () {\n        this.alertDObj = this.dlgWidget([\n            {\n                click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n            }\n        ], 'EditAlert');\n    };\n    Edit.prototype.alertClick = function () {\n        this.alertDObj.hide();\n    };\n    Edit.prototype.dlgWidget = function (btnOptions, name) {\n        var div = createElement('div', { id: this.parent.element.id + name });\n        this.parent.element.appendChild(div);\n        var options = {\n            showCloseIcon: false,\n            isModal: true,\n            visible: false,\n            closeOnEscape: true,\n            target: this.parent.element,\n            width: '320px',\n            animationSettings: { effect: 'None' }\n        };\n        options.buttons = btnOptions;\n        var obj = new Dialog(options);\n        obj.appendTo(div);\n        changeButtonType(obj.element);\n        return obj;\n    };\n    Edit.prototype.dlgCancel = function () {\n        this.dialogObj.hide();\n    };\n    Edit.prototype.dlgOk = function (e) {\n        switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n            case this.l10n.getConstant('ConfirmDelete'):\n                this.editModule.deleteRecord();\n                break;\n            case this.l10n.getConstant('CancelEdit'):\n                this.editModule.closeEdit();\n                break;\n            case this.l10n.getConstant('BatchSaveConfirm'):\n                this.endEditing();\n                break;\n            case this.l10n.getConstant('BatchSaveLostChanges'):\n                this.executeAction();\n                break;\n        }\n        this.dlgCancel();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.initialEnd, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.autoCol, this.updateColTypeObj, this);\n        this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n        this.parent.on(events.preventBatch, this.preventBatch, this);\n        this.parent.on(events.destroyForm, this.destroyForm, this);\n        this.actionBeginFunction = this.onActionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.initialEnd, this.initialEnd);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.autoCol, this.updateColTypeObj);\n        this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n        this.parent.off(events.preventBatch, this.preventBatch);\n        this.parent.off(events.destroyForm, this.destroyForm);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.off(events.initialEnd, this.unwireEvents);\n    };\n    Edit.prototype.actionComplete = function (e) {\n        var actions = ['add', 'beginEdit', 'save', 'delete', 'cancel'];\n        if (actions.indexOf(e.requestType) < 0) {\n            this.parent.isEdit = false;\n        }\n        this.refreshToolbar();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.getCurrentEditedData = function (form, editedData) {\n        var gObj = this.parent;\n        var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n        for (var i = 0, len = inputs.length; i < len; i++) {\n            var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n            var value = void 0;\n            if (col && col.field) {\n                var temp = col.edit.read;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                if (col.type !== 'checkbox') {\n                    value = gObj.editModule.getValueFromType(col, col.edit.read(inputs[i]));\n                }\n                else {\n                    value = inputs[i].checked;\n                }\n                setValue(col.field, value, editedData);\n            }\n        }\n        return editedData;\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onActionBegin = function (e) {\n        if (this.parent.editSettings.mode !== 'batch' && e.requestType !== 'save' && this.formObj && !this.formObj.isDestroyed) {\n            this.destroyForm();\n            this.destroyWidgets();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyWidgets = function (cols) {\n        cols = cols ? cols : this.parent.getColumns();\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (col.edit.destroy) {\n                col.edit.destroy();\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyForm = function () {\n        this.destroyToolTip();\n        if (this.formObj && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n        this.destroyToolTip();\n    };\n    /**\n     * To destroy the editing.\n     * @return {void}\n     * @hidden\n     */\n    Edit.prototype.destroy = function () {\n        this.destroyForm();\n        this.removeEventListener();\n        var elem = this.dialogObj.element;\n        this.dialogObj.destroy();\n        remove(elem);\n        elem = this.alertDObj.element;\n        this.alertDObj.destroy();\n        remove(elem);\n        this.unwireEvents();\n    };\n    Edit.prototype.keyPressHandler = function (e) {\n        switch (e.action) {\n            case 'insert':\n                this.addRecord();\n                break;\n            case 'delete':\n                this.deleteRecord();\n                break;\n            case 'f2':\n                this.startEdit();\n                break;\n            case 'enter':\n                if (!parentsUntil(e.target, '.e-unboundcelldiv') && this.parent.editSettings.mode !== 'batch' &&\n                    parentsUntil(e.target, 'e-gridcontent') && !document.querySelectorAll('.e-popup-open').length) {\n                    e.preventDefault();\n                    this.endEdit();\n                }\n                break;\n            case 'escape':\n                this.closeEdit();\n                break;\n        }\n    };\n    Edit.prototype.preventBatch = function (args) {\n        this.preventObj = args;\n        this.showDialog('BatchSaveLostChanges', this.dialogObj);\n    };\n    Edit.prototype.executeAction = function () {\n        this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.applyFormValidation = function (cols) {\n        var _this = this;\n        var gObj = this.parent;\n        var form = gObj.element.querySelector('.e-gridform');\n        var rules = {};\n        cols = cols ? cols : gObj.columns;\n        for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n            var col = cols_2[_i];\n            if (col.validationRules && form.querySelectorAll('#' + gObj.element.id + col.field).length) {\n                rules[col.field] = col.validationRules;\n            }\n        }\n        this.parent.editModule.formObj = new FormValidator(form, {\n            rules: rules,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            customPlacement: function (inputElement, error) {\n                _this.valErrorPlacement(inputElement, error);\n            }\n        });\n    };\n    Edit.prototype.valErrorPlacement = function (inputElement, error) {\n        if (this.parent.isEdit) {\n            var id = error.getAttribute('for');\n            var parentElem = this.parent.editSettings.mode !== 'dialog' ? this.parent.getContentTable() :\n                this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n            var elem = parentElem.querySelector('#' + id + '_Error');\n            if (!elem) {\n                this.createTooltip(inputElement, error, id, '');\n            }\n            else {\n                elem.querySelector('.e-tip-content').innerHTML = error.innerHTML;\n            }\n        }\n    };\n    Edit.prototype.validationComplete = function (args) {\n        if (this.parent.isEdit) {\n            var parentElem = this.parent.editSettings.mode !== 'dialog' ? this.parent.getContentTable() :\n                this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n            var elem = parentElem.querySelector('#' + args.inputName + '_Error');\n            if (elem) {\n                if (args.status === 'failure') {\n                    elem.style.display = '';\n                }\n                else {\n                    elem.style.display = 'none';\n                }\n            }\n        }\n    };\n    Edit.prototype.createTooltip = function (element, error, name, display) {\n        var table = this.parent.editSettings.mode !== 'dialog' ? this.parent.getContentTable() :\n            this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper').querySelector('.e-dlg-content');\n        var client = table.getBoundingClientRect();\n        var inputClient = parentsUntil(element, 'e-rowcell').getBoundingClientRect();\n        var div = createElement('div', {\n            className: 'e-tooltip-wrap e-popup e-griderror',\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                (inputClient.bottom - client.top + table.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - client.left + table.scrollLeft + inputClient.width / 2) + 'px;'\n        });\n        var content = createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        table.appendChild(div);\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n    };\n    return Edit;\n}());\nexport { Edit };\n","import { createElement, classList, addClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { changeButtonType, createCboxWithWrap, toogleCheckbox, parentsUntil } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\n/**\n *\n * `ColumnChooser` module is used to show or hide the columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.isDlgOpen = false;\n        this.dlghide = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.cBoxTrue = createCheckBox(true, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(true, { checked: false, label: ' ' });\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.cBoxTrue.insertBefore(createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        this.removeEventListener();\n        this.unWireEvents();\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element) {\n            this.dlgObj.destroy();\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderDlgContent();\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('');\n                    this.removeCancelIcon();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n        }\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            this.dlgObj.hide();\n            // this.unWireEvents();\n            this.isDlgOpen = false;\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     * @return {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible) {\n            var pos = { X: null, Y: null };\n            var args1 = {\n                requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n                columns: this.parent.getColumns()\n            };\n            this.parent.trigger(events.beforeOpenColumnChooser, args1);\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            this.dlgObj.element.style.display = 'block';\n            var newpos = calculateRelativeBasedPosition(closest(target, '.e-toolbar-item'), this.dlgObj.element);\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 253;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.target = document.body;\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            this.dlgObj.show();\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n        }\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            this.dlgObj.position = { X: 'center', Y: 'center' };\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        this.dlgObj.show();\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        var y;\n        this.dlgDiv = createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        var xpos = this.parent.element.getBoundingClientRect().width - 250;\n        var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n        var tarElement = this.parent.element.querySelector('.e-ccdiv');\n        if (!isNullOrUndefined(tarElement)) {\n            y = tarElement.getBoundingClientRect().top;\n        }\n        var pos = { X: null, Y: null };\n        this.dlgObj = new Dialog({\n            header: this.l10n.getConstant('ChooseColumns'),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            buttons: [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: 'e-cc e-cc_okbtn',\n                    }\n                },\n                {\n                    click: this.clearActions.bind(this),\n                    buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n                }],\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: 'e-cc',\n            animationSettings: { effect: 'None' },\n        });\n        this.dlgObj.appendTo(this.dlgDiv);\n        changeButtonType(this.dlgObj.element);\n        this.wireEvents();\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search') }\n        });\n        var ccsearchicon = createElement('span', { className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon' });\n        var conDiv = createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        ccsearchele.addEventListener('focus', this.searchFocus.bind(this, ccsearchele));\n        ccsearchele.addEventListener('blur', this.searchBlur.bind(this, ccsearchele));\n        var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n        this.innerDiv.appendChild(innerDivContent);\n        conDiv.appendChild(this.innerDiv);\n        this.mainDiv.appendChild(searchDiv);\n        this.mainDiv.appendChild(conDiv);\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.searchFocus = function (targt) {\n        targt.parentElement.classList.add('e-input-focus');\n    };\n    ColumnChooser.prototype.searchBlur = function (targt) {\n        targt.parentElement.classList.remove('e-input-focus');\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        this.stateChangeColumns = [];\n        if (!isNullOrUndefined(args)) {\n            if (this.hideColumn.length) {\n                this.columnStateChange(this.hideColumn, false);\n            }\n            if (this.showColumn.length) {\n                this.columnStateChange(this.showColumn, true);\n            }\n            var params = {\n                requestType: 'columnstate', element: this.parent.element,\n                columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n            };\n            this.parent.trigger(events.actionComplete, params);\n            this.getShowHideService.setVisible(this.stateChangeColumns);\n            this.clearActions();\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            currentCol.visible = state;\n            this.stateChangeColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.hideColumn = [];\n        this.showColumn = [];\n        // this.unWireEvents();\n        this.hideDialog();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid) {\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1) {\n                this.hideColumn.push(coluid);\n            }\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n        var clearSearch = false;\n        var fltrCol;\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            fltrCol = this.parent.getColumns();\n            clearSearch = true;\n        }\n        else {\n            fltrCol = new DataManager(this.parent.getColumns()).executeLocal(new Query()\n                .where('headerText', 'startswith', searchVal, true));\n        }\n        if (fltrCol.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n            if (!clearSearch) {\n                this.addcancelIcon();\n            }\n        }\n        else {\n            var nMatchele = createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n        }\n        this.flag = true;\n        this.stopTimer();\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n        }\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        var checkstate;\n        var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n        if (elem) {\n            toogleCheckbox(elem.parentElement);\n            elem.querySelector('.e-chk-hidden').focus();\n            if (elem.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (elem.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            else {\n                return;\n            }\n            var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n            this.checkstatecolumn(checkstate, columnUid);\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n        this.ulElement = createElement('ul', { className: 'e-ccul-ele e-cc' });\n        for (var i = 0; i < gdCol.length; i++) {\n            var columns = gdCol[i];\n            this.renderCheckbox(columns);\n        }\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('');\n        for (var i = 0; i < this.parent.element.querySelectorAll('.e-cc-chbox').length; i++) {\n            var element = this.parent.element.querySelectorAll('.e-cc-chbox')[i];\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            var column = this.parent.getColumnByUid(columnUID);\n            if (column.visible) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        state ? classList(element, ['e-check'], ['e-uncheck']) : classList(element, ['e-uncheck'], ['e-check']);\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        cbox.querySelector('.e-label').innerHTML = label;\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (column) {\n        var cclist;\n        var hideColState;\n        var showColState;\n        var checkBoxObj;\n        if (column.showInColumnChooser) {\n            cclist = createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n            hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n            showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n            var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n            cclist.appendChild(cccheckboxlist);\n            this.ulElement.appendChild(cclist);\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        var proxy = this;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n","import { Row } from './../models/row';\nimport { CellType } from '../base/enum';\nimport { isNullOrUndefined, Internationalization } from '@syncfusion/ej2-base';\nimport { Cell } from '../models/cell';\nimport { ValueFormatter } from './../services/value-formatter';\n/**\n * @hidden\n * `ExportHelper` for `PdfExport` & `ExcelExport`\n */\nvar ExportHelper = /** @class */ (function () {\n    function ExportHelper(parent) {\n        this.hideColumnInclude = false;\n        this.parent = parent;\n    }\n    ExportHelper.getQuery = function (parent, data) {\n        return data.isRemote() ?\n            data.generateQuery(true).requiresCount().take(parent.pageSettings.totalRecordsCount) :\n            data.generateQuery(true).requiresCount();\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.getHeaders = function (column, isHideColumnInclude) {\n        if (isHideColumnInclude) {\n            this.hideColumnInclude = true;\n        }\n        else {\n            this.hideColumnInclude = false;\n        }\n        var cols = column;\n        this.colDepth = this.measureColumnDepth(cols);\n        var rows = [];\n        var actualColumns = [];\n        for (var i = 0; i < this.colDepth; i++) {\n            rows[i] = new Row({});\n            rows[i].cells = [];\n        }\n        rows = this.processColumns(rows);\n        rows = this.processHeaderCells(rows);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            for (var i = 0; i < row.cells.length; i++) {\n                var cell = row.cells[i];\n                if (cell.visible === undefined && cell.cellType !== CellType.StackedHeader) {\n                    row.cells = this.removeCellFromRow(row.cells, i);\n                    i = i - 1;\n                }\n                if ((!isHideColumnInclude) && cell.visible !== undefined && (!cell.visible)) {\n                    row.cells = this.removeCellFromRow(row.cells, i);\n                    i = i - 1;\n                }\n            }\n        }\n        for (var i = 0; i < cols.length; i++) {\n            this.generateActualColumns(cols[i], actualColumns);\n        }\n        return { rows: rows, columns: actualColumns };\n    };\n    ExportHelper.prototype.getConvertedWidth = function (input) {\n        var value = parseFloat(input);\n        /* tslint:disable-next-line:max-line-length */\n        return (input.indexOf('%') !== -1) ? (this.parent.element.getBoundingClientRect().width * value / 100) : value;\n    };\n    ExportHelper.prototype.generateActualColumns = function (column, actualColumns) {\n        if (!column.columns) {\n            if (column.visible || this.hideColumnInclude) {\n                actualColumns.push(column);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                var colSpan = this.getCellCount(column, 0);\n                if (colSpan !== 0) {\n                    for (var i = 0; i < column.columns.length; i++) {\n                        /* tslint:disable-next-line:max-line-length */\n                        this.generateActualColumns(column.columns[i], actualColumns);\n                    }\n                }\n            }\n        }\n    };\n    ExportHelper.prototype.removeCellFromRow = function (cells, cellIndex) {\n        var resultCells = [];\n        for (var i = 0; i < cellIndex; i++) {\n            resultCells.push(cells[i]);\n        }\n        for (var i = (cellIndex + 1); i < cells.length; i++) {\n            resultCells.push(cells[i]);\n        }\n        return resultCells;\n    };\n    ExportHelper.prototype.processHeaderCells = function (rows) {\n        var columns = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n        for (var i = 0; i < columns.length; i++) {\n            rows = this.appendGridCells(columns[i], rows, 0, i === 0, false, i === (columns.length - 1));\n        }\n        return rows;\n    };\n    /* tslint:disable */\n    ExportHelper.prototype.appendGridCells = function (cols, gridRows, index, isFirstObj, isFirstColumn, isLastColumn) {\n        /* tslint:enable */\n        var lastCol = isLastColumn ? 'e-lastcell' : '';\n        if (!cols.columns) {\n            gridRows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstColumn ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n        }\n        else {\n            var colSpan = this.getCellCount(cols, 0);\n            if (colSpan) {\n                gridRows[index].cells.push(new Cell({\n                    cellType: CellType.StackedHeader, column: cols, colSpan: colSpan\n                }));\n            }\n            var isFirstCell = void 0;\n            var isIgnoreFirstCell = void 0;\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                isFirstCell = false;\n                if (cols.columns[i].visible && !isIgnoreFirstCell) {\n                    isFirstCell = true;\n                    isIgnoreFirstCell = true;\n                }\n                /* tslint:disable-next-line:max-line-length */\n                gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastColumn);\n            }\n        }\n        return gridRows;\n    };\n    ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, className, rowIndex, columnIndex) {\n        var option = {\n            'visible': gridColumn.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(gridColumn.headerTemplate),\n            'rowID': '',\n            'column': gridColumn,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': columnIndex\n        };\n        if (!option.rowSpan || option.rowSpan < 2) {\n            delete option.rowSpan;\n        }\n        return new Cell(option);\n    };\n    ExportHelper.prototype.processColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gridObj = this.parent;\n        var columnIndexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gridObj.allowGrouping) {\n                for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n                    if (this.parent.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gridObj.detailTemplate || gridObj.childGrid) {\n                rows[i].cells.push(this.generateCell({}, CellType.DetailHeader));\n            }\n        }\n        return rows;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.getCellCount = function (column, count) {\n        if (column.columns) {\n            for (var i = 0; i < column.columns.length; i++) {\n                count = this.getCellCount(column.columns[i], count);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                count++;\n            }\n        }\n        return count;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.measureColumnDepth = function (column) {\n        var max = 0;\n        for (var i = 0; i < column.length; i++) {\n            var depth = this.checkDepth(column[i], 0);\n            if (max < depth) {\n                max = depth;\n            }\n        }\n        return max + 1;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.checkDepth = function (col, index) {\n        if (col.columns) {\n            index++;\n            for (var i = 0; i < col.columns.length; i++) {\n                index = this.checkDepth(col.columns[i], index);\n            }\n        }\n        return index;\n    };\n    ;\n    return ExportHelper;\n}());\nexport { ExportHelper };\n/**\n * @hidden\n * `ExportValueFormatter` for `PdfExport` & `ExcelExport`\n */\nvar ExportValueFormatter = /** @class */ (function () {\n    function ExportValueFormatter() {\n        this.valueFormatter = new ValueFormatter();\n        this.internationalization = new Internationalization();\n    }\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.returnFormattedValue = function (args, customFormat) {\n        if (!isNullOrUndefined(args.value) && args.value) {\n            return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n        }\n        else {\n            return '';\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.formatCellValue = function (args) {\n        if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n            return args.value ? this.internationalization.getNumberFormat({ format: args.column.format })(args.value) : '';\n        }\n        else if (args.column.type === 'boolean') {\n            return args.value ? 'true' : 'false';\n            /* tslint:disable-next-line:max-line-length */\n        }\n        else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n            if (typeof args.column.format === 'string') {\n                var format = void 0;\n                if (args.column.type === 'date') {\n                    format = { type: 'date', skeleton: args.column.format };\n                }\n                else if (args.column.type === 'time') {\n                    format = { type: 'time', skeleton: args.column.format };\n                }\n                else {\n                    format = { type: 'dateTime', skeleton: args.column.format };\n                }\n                return this.returnFormattedValue(args, format);\n            }\n            else {\n                if (args.column.format instanceof Object && args.column.format.type === undefined) {\n                    return (args.value.toString());\n                }\n                else {\n                    /* tslint:disable-next-line:max-line-length */\n                    var customFormat = void 0;\n                    if (args.column.type === 'date') {\n                        /* tslint:disable-next-line:max-line-length */\n                        customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else if (args.column.type === 'time') {\n                        customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else {\n                        customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    return this.returnFormattedValue(args, customFormat);\n                }\n            }\n        }\n        else {\n            if (args.column.type === undefined || args.column.type === null) {\n                return '';\n            }\n            else {\n                return (args.value).toString();\n            }\n        }\n    };\n    return ExportValueFormatter;\n}());\nexport { ExportValueFormatter };\n","import * as events from '../base/constant';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\nimport { isNullOrUndefined, getEnumValue, compile, extend } from '@syncfusion/ej2-base';\nimport { Data } from '../actions/data';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { CellType } from '../base/enum';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * @hidden\n * `ExcelExport` module is used to handle the Excel export action.\n */\nvar ExcelExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid Excel Export module.\n     * @hidden\n     */\n    function ExcelExport(parent) {\n        /* tslint:disable-next-line:no-any */\n        this.book = {};\n        /* tslint:disable-next-line:no-any */\n        this.workSheet = [];\n        /* tslint:disable-next-line:no-any */\n        this.rows = [];\n        /* tslint:disable-next-line:no-any */\n        this.columns = [];\n        /* tslint:disable-next-line:no-any */\n        this.styles = [];\n        this.rowLength = 1;\n        this.expType = 'appendtosheet';\n        this.includeHiddenColumn = false;\n        this.isCsvExport = false;\n        this.isElementIdChanged = false;\n        this.parent = parent;\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    ExcelExport.prototype.getModuleName = function () {\n        return 'ExcelExport';\n    };\n    ExcelExport.prototype.init = function (gObj) {\n        if (gObj.element !== null && gObj.element.id === '') {\n            gObj.element.id = new Date().toISOString();\n            this.isElementIdChanged = true;\n        }\n        this.parent = gObj;\n        this.helper = new ExportHelper(gObj);\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.isExporting = undefined;\n        this.book = {};\n        /* tslint:disable-next-line:no-any */\n        this.workSheet = [];\n        /* tslint:disable-next-line:no-any */\n        this.rows = [];\n        /* tslint:disable-next-line:no-any */\n        this.columns = [];\n        /* tslint:disable-next-line:no-any */\n        this.styles = [];\n        this.rowLength = 1;\n        /* tslint:disable-next-line:no-any */\n        this.footer = undefined;\n        this.expType = 'appendtosheet';\n        this.includeHiddenColumn = false;\n        this.exportValueFormatter = new ExportValueFormatter();\n    };\n    /**\n     * Export Grid to Excel file.\n     * @param  {exportProperties} exportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Defines is multiple Grid's are exported.\n     * @param  {workbook} workbook - Defined the Workbook if multiple Grid is exported.\n     * @param  {isCsv} isCsv - true if export to CSV.\n     * @return {Promise<any>}\n     */\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv) {\n        var gObj = grid;\n        gObj.trigger(events.beforeExcelExport);\n        this.data = new Data(gObj);\n        this.isExporting = true;\n        if (isCsv) {\n            this.isCsvExport = isCsv;\n        }\n        else {\n            this.isCsvExport = false;\n        }\n        return this.processRecords(gObj, exportProperties, isMultipleExport, workbook);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n        var _this = this;\n        if (exportProperties !== undefined && exportProperties.dataSource !== undefined &&\n            exportProperties.dataSource instanceof DataManager) {\n            /* tslint:disable-next-line:no-any */\n            var promise = void 0;\n            return promise = new Promise(function (resolve, reject) {\n                /* tslint:disable-next-line:max-line-length */\n                /* tslint:disable-next-line:no-any */\n                var dataManager = exportProperties.dataSource.executeQuery(new Query());\n                dataManager.then(function (r) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n                    resolve(_this.book);\n                });\n            });\n        }\n        else {\n            /* tslint:disable-next-line:no-any */\n            var promise = void 0;\n            return promise = new Promise(function (resolve, reject) {\n                var dataManager = _this.data.getData({}, ExportHelper.getQuery(gObj, _this.data));\n                dataManager.then(function (r) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n                    resolve(_this.book);\n                });\n            });\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, isMultipleExport, workbook, r) {\n        var blankRows = 5;\n        if (exportProperties !== undefined && exportProperties.multipleExport !== undefined) {\n            /* tslint:disable-next-line:max-line-length */\n            this.expType = (exportProperties.multipleExport.type !== undefined ? exportProperties.multipleExport.type : 'appendtosheet');\n            if (exportProperties.multipleExport.blankRows !== undefined) {\n                blankRows = exportProperties.multipleExport.blankRows;\n            }\n        }\n        if (workbook === undefined) {\n            this.workSheet = [];\n            this.rows = [];\n            this.columns = [];\n            this.styles = [];\n        }\n        else if (this.expType === 'newsheet') {\n            this.workSheet = workbook.worksheets;\n            this.rows = [];\n            this.columns = [];\n            this.styles = workbook.styles;\n        }\n        else {\n            this.workSheet = [];\n            this.rows = workbook.worksheets[0].rows;\n            this.columns = workbook.worksheets[0].columns;\n            this.styles = workbook.styles;\n            this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n            this.rowLength++;\n        }\n        if (exportProperties !== undefined) {\n            if (isMultipleExport !== undefined) {\n                if (exportProperties.header !== undefined && (isMultipleExport || this.expType === 'newsheet')) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (exportProperties.footer !== undefined) {\n                    if (this.expType === 'appendtosheet') {\n                        if (!isMultipleExport) {\n                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                        }\n                    }\n                    else {\n                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                    }\n                }\n            }\n            else {\n                if (exportProperties.header !== undefined) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (exportProperties.footer !== undefined) {\n                    this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                }\n            }\n        }\n        this.includeHiddenColumn = (exportProperties !== undefined ? exportProperties.includeHiddenColumn : false);\n        /* tslint:disable-next-line:max-line-length */\n        /* tslint:disable-next-line:no-any */\n        var headerRow = this.helper.getHeaders(gObj.columns, this.includeHiddenColumn);\n        var groupIndent = 0;\n        /* tslint:disable:no-any */\n        if ((r.result).level !== undefined) {\n            groupIndent += (r.result).level;\n            groupIndent += (r.result).childLevels;\n        }\n        /* tslint:enable:no-any */\n        this.processHeaderContent(gObj, headerRow, exportProperties, groupIndent);\n        /* tslint:disable-next-line:max-line-length */\n        if (exportProperties !== undefined && exportProperties.dataSource !== undefined && !(exportProperties.dataSource instanceof DataManager)) {\n            this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties.dataSource);\n        }\n        else if (exportProperties !== undefined && exportProperties.exportType === 'currentpage') {\n            this.processRecordContent(gObj, r, headerRow, isMultipleExport, gObj.getCurrentViewRecords());\n        }\n        else {\n            this.processRecordContent(gObj, r, headerRow, isMultipleExport);\n        }\n        this.isExporting = false;\n        gObj.trigger(events.excelExportComplete);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, isMultipleExport, currentViewRecords) {\n        /* tslint:disable-next-line:no-any */\n        var column = gObj.columns;\n        /* tslint:disable-next-line:no-any */\n        var record = undefined;\n        if (currentViewRecords !== undefined) {\n            record = currentViewRecords;\n        }\n        else {\n            record = returnType.result;\n        }\n        if (record.level !== undefined) {\n            this.processGroupedRows(gObj, record, headerRow, record.level);\n        }\n        else {\n            this.processRecordRows(gObj, record, headerRow, 0);\n            if (returnType.aggregates !== undefined) {\n                if (currentViewRecords !== undefined) {\n                    this.processAggregates(gObj, returnType.result, currentViewRecords);\n                }\n                else {\n                    this.processAggregates(gObj, returnType.result);\n                }\n            }\n        }\n        //footer template add\n        if (this.footer !== undefined) {\n            if ((this.expType === 'appendtosheet' && !isMultipleExport) || (this.expType === 'newsheet')) {\n                this.processExcelFooter(this.footer);\n            }\n        }\n        /* tslint:disable-next-line:no-any */\n        var sheet = {};\n        if (this.columns.length > 0) {\n            sheet.columns = this.columns;\n        }\n        sheet.rows = this.rows;\n        this.workSheet.push(sheet);\n        this.book.worksheets = this.workSheet;\n        this.book.styles = this.styles;\n        if (!isMultipleExport) {\n            if (this.isCsvExport) {\n                var book = new Workbook(this.book, 'csv');\n                book.save('Export.csv');\n            }\n            else {\n                var book = new Workbook(this.book, 'xlsx');\n                book.save('Export.xlsx');\n            }\n            if (this.isElementIdChanged) {\n                gObj.element.id = '';\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level) {\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var item = dataSource_1[_i];\n            /* tslint:disable-next-line:no-any */\n            var cells = [];\n            var index = 1;\n            /* tslint:disable-next-line:no-any */\n            var cell = {};\n            cell.index = index + level;\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: item.key,\n                column: gObj.getColumnByField(item.field),\n                style: undefined\n            };\n            cell.value = item.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ';\n            if (item.count > 1) {\n                cell.value += item.count + ' items';\n            }\n            else {\n                cell.value += item.count + ' item';\n            }\n            cell.style = this.getCaptionThemeStyle(this.theme);\n            var captionModelGen = new CaptionSummaryModelGenerator(gObj);\n            var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n            this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, this.rowLength);\n            cells.push(cell);\n            if (this.rows[this.rows.length - 1].cells.length > 0) {\n                var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n                var hIndex = 0;\n                for (var _a = 0, _b = this.rows[this.rows.length - 1].cells; _a < _b.length; _a++) {\n                    var tCell = _b[_a];\n                    if (tCell.index < lIndex) {\n                        lIndex = tCell.index;\n                    }\n                    if (tCell.index > hIndex) {\n                        hIndex = tCell.index;\n                    }\n                    tCell.style = this.getCaptionThemeStyle(this.theme);\n                    cells.push(tCell);\n                }\n                if ((lIndex - cell.index) > 1) {\n                    cell.colSpan = lIndex - cell.index;\n                }\n                while (hIndex < (headerRow.columns.length + index + level)) {\n                    /* tslint:disable-next-line:no-any */\n                    var sCell = {};\n                    if (dataSource.childLevels === 0) {\n                        sCell.index = (hIndex);\n                    }\n                    else {\n                        sCell.index = (hIndex + 1);\n                    }\n                    sCell.style = this.getCaptionThemeStyle(this.theme);\n                    cells.push(sCell);\n                    hIndex++;\n                }\n            }\n            else {\n                var span = 0;\n                //Calculation for column span when group caption dont have aggregates\n                for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n                    var col = _d[_c];\n                    if (col.visible) {\n                        span++;\n                    }\n                }\n                cell.colSpan = (dataSource.childLevels + span);\n            }\n            this.rows[this.rows.length - 1].cells = cells;\n            this.rowLength++;\n            if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n                this.processGroupedRows(gObj, item.items, headerRow, item.items.level);\n            }\n            else {\n                this.processRecordRows(gObj, item.items, headerRow, (level));\n                this.processAggregates(gObj, item, undefined, (level));\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level) {\n        var rLen = Object.keys(record).length;\n        var index = 1;\n        /* tslint:disable-next-line:no-any */\n        var cells = [];\n        for (var r = 0; r < rLen; r++) {\n            cells = [];\n            index = 1;\n            for (var c = 0, len = headerRow.columns.length; c < len; c++) {\n                /* tslint:disable-next-line:no-any */\n                var value = record[r][headerRow.columns[c].field];\n                if (!isNullOrUndefined(value)) {\n                    /* tslint:disable-next-line:no-any */\n                    var excelCellArgs = { data: record[r], column: headerRow.columns[c] };\n                    gObj.trigger(events.excelQueryCellInfo, extend(excelCellArgs, {\n                        column: headerRow.columns[c], data: record[r],\n                        value: value, style: undefined, colSpan: 1\n                    }));\n                    /* tslint:disable-next-line:no-any */\n                    var cell = {};\n                    cell.index = index + level;\n                    cell.value = excelCellArgs.value;\n                    if (excelCellArgs.colSpan > 1) {\n                        cell.colSpan = excelCellArgs.colSpan;\n                    }\n                    if (excelCellArgs.style !== undefined) {\n                        var styleIndex = this.getColumnStyle(gObj, index + level);\n                        cell.style = this.mergeOptions(this.styles[styleIndex], excelCellArgs.style);\n                    }\n                    else {\n                        cell.style = { name: gObj.element.id + 'column' + (index + level) };\n                    }\n                    cells.push(cell);\n                }\n                index++;\n            }\n            this.rows.push({ index: this.rowLength++, cells: cells });\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processAggregates = function (gObj, rec, currentViewRecords, indent) {\n        var summaryModel = new SummaryModelGenerator(gObj);\n        /* tslint:disable-next-line:no-any */\n        var data = undefined;\n        if (currentViewRecords !== undefined) {\n            data = currentViewRecords;\n        }\n        else {\n            data = rec;\n        }\n        if (indent === undefined) {\n            indent = 0;\n        }\n        if (gObj.groupSettings.columns.length > 0) {\n            var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n            var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n            if (groupSummaryRows.length > 0) {\n                this.fillAggregates(gObj, groupSummaryRows, indent);\n            }\n        }\n        var sRows = summaryModel.generateRows(data, rec.aggregates);\n        if (sRows.length > 0) {\n            this.fillAggregates(gObj, sRows, indent);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.fillAggregates = function (gObj, cells, indent, customIndex) {\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var row = cells_1[_i];\n            /* tslint:disable-next-line:no-any */\n            var cells_2 = [];\n            var index = 0;\n            for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n                var cell = _b[_a];\n                /* tslint:disable-next-line:no-any */\n                var eCell = {};\n                if ((cell.visible || this.includeHiddenColumn)) {\n                    index++;\n                    if (cell.isDataCell) {\n                        eCell.index = index + indent;\n                        if (cell.column.footerTemplate !== undefined) {\n                            eCell.value = this.getAggreateValue(CellType.Summary, cell.column.footerTemplate, cell, row);\n                        }\n                        else if (cell.column.groupFooterTemplate !== undefined) {\n                            eCell.value = this.getAggreateValue(CellType.GroupSummary, cell.column.groupFooterTemplate, cell, row);\n                        }\n                        else if (cell.column.groupCaptionTemplate !== undefined) {\n                            eCell.value = this.getAggreateValue(CellType.CaptionSummary, cell.column.groupCaptionTemplate, cell, row);\n                        }\n                        else {\n                            for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n                                var key = _d[_c];\n                                if (key === cell.column.type) {\n                                    if (row.data[cell.column.field].sum !== undefined) {\n                                        eCell.value = row.data[cell.column.field].sum;\n                                    }\n                                    else if (row.data[cell.column.field].average !== undefined) {\n                                        eCell.value = row.data[cell.column.field].average;\n                                    }\n                                    else if (row.data[cell.column.field].max !== undefined) {\n                                        eCell.value = row.data[cell.column.field].max;\n                                    }\n                                    else if (row.data[cell.column.field].min !== undefined) {\n                                        eCell.value = row.data[cell.column.field].min;\n                                    }\n                                    else if (row.data[cell.column.field].count !== undefined) {\n                                        eCell.value = row.data[cell.column.field].count;\n                                    }\n                                    else if (row.data[cell.column.field].truecount !== undefined) {\n                                        eCell.value = row.data[cell.column.field].truecount;\n                                    }\n                                    else if (row.data[cell.column.field].falsecount !== undefined) {\n                                        eCell.value = row.data[cell.column.field].falsecount;\n                                    }\n                                    else if (row.data[cell.column.field].custom !== undefined) {\n                                        eCell.value = row.data[cell.column.field].custom;\n                                    }\n                                }\n                            }\n                        }\n                        eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                        cells_2.push(eCell);\n                    }\n                    else {\n                        if (customIndex === undefined) {\n                            eCell.index = index + indent;\n                            eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                            cells_2.push(eCell);\n                        }\n                    }\n                }\n            }\n            if (customIndex !== undefined) {\n                this.rows.push({ index: customIndex, cells: cells_2 });\n            }\n            else {\n                this.rows.push({ index: this.rowLength++, cells: cells_2 });\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getAggreateValue = function (cellType, template, cell, row) {\n        var templateFn = {};\n        templateFn[getEnumValue(CellType, cell.cellType)] = compile(template);\n        /* tslint:disable-next-line:max-line-length */\n        var txt = (templateFn[getEnumValue(CellType, cell.cellType)](row.data[cell.column.field ? cell.column.field : cell.column.columnName]));\n        return txt[0].wholeText;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n        /* tslint:disable-next-line:no-any */\n        var result = {};\n        /* tslint:disable-next-line:no-any */\n        var attrname = Object.keys(JSON1);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON1[attrname[index]];\n            }\n        }\n        attrname = Object.keys(JSON2);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON2[attrname[index]];\n            }\n        }\n        return result;\n    };\n    ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n        var index = 0;\n        for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n            var style = _a[_i];\n            if (style.name === gObj.element.id + 'column' + columnIndex) {\n                return index;\n            }\n            index++;\n        }\n        return undefined;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, exportProperties, indent) {\n        /* tslint:disable-next-line:no-any */\n        var column = gObj.columns;\n        var rowIndex = 1;\n        /* tslint:disable-next-line:no-any */\n        var returnValue = headerRow;\n        /* tslint:enable:no-any */\n        var gridRows = returnValue.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        /* tslint:disable-next-line:no-any */\n        var spannedCells = [];\n        if (indent > 0) {\n            var index = 0;\n            while (index !== indent) {\n                this.columns.push({ index: index + 1, width: 30 });\n                index++;\n            }\n        }\n        for (var row = 0; row < gridRows.length; row++) {\n            var currentCellIndex = 1 + indent;\n            /* tslint:disable-next-line:no-any */\n            var cells = [];\n            for (var column_1 = 0; column_1 < gridRows[row].cells.length; column_1++) {\n                /* tslint:disable-next-line:no-any */\n                var style = {};\n                /* tslint:disable-next-line:no-any */\n                var cell = {};\n                /* tslint:disable-next-line:no-any */\n                var gridCell = gridRows[row].cells[column_1];\n                /* tslint:disable-next-line:no-any */\n                var result = { contains: true, index: 1 };\n                while (result.contains) {\n                    result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n                    currentCellIndex = result.index;\n                    if (!result.contains) {\n                        cell.index = result.index;\n                        break;\n                    }\n                }\n                if (gridCell.rowSpan !== undefined && gridCell.rowSpan !== 1) {\n                    cell.rowSpan = gridCell.rowSpan;\n                    for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n                        /* tslint:disable-next-line:no-any */\n                        var spannedCell = { rowIndex: 0, columnIndex: 0 };\n                        spannedCell.rowIndex = i;\n                        spannedCell.columnIndex = currentCellIndex;\n                        spannedCells.push(spannedCell);\n                    }\n                }\n                if (gridCell.colSpan !== undefined && gridCell.colSpan !== 1) {\n                    cell.colSpan = gridCell.colSpan;\n                    currentCellIndex = currentCellIndex + cell.colSpan - 1;\n                }\n                cell.value = gridCell.column.headerText;\n                if (exportProperties !== undefined && exportProperties.theme !== undefined) {\n                    this.theme = exportProperties.theme;\n                }\n                style = this.getHeaderThemeStyle(this.theme);\n                if (gridCell.column.textAlign !== undefined) {\n                    style.hAlign = gridCell.column.textAlign;\n                }\n                if (gridCell.column.headerTextAlign !== undefined) {\n                    style.hAlign = gridCell.column.headerTextAlign;\n                }\n                cell.style = style;\n                cells.push(cell);\n                currentCellIndex++;\n            }\n            this.rows.push({ index: this.rowLength++, cells: cells });\n        }\n        for (var col = 0; col < gridColumns.length; col++) {\n            this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n        /* tslint:disable-next-line:no-any */\n        var style = {};\n        style.fontSize = 12;\n        style.borders = { color: '#E0E0E0' };\n        if (theme !== undefined && theme.header !== undefined) {\n            style = this.updateThemeStyle(theme.header, style);\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.updateThemeStyle = function (themestyle, style) {\n        if (themestyle.fontColor !== undefined) {\n            style.fontColor = themestyle.fontColor;\n        }\n        if (themestyle.fontName !== undefined) {\n            style.fontName = themestyle.fontName;\n        }\n        if (themestyle.fontSize !== undefined) {\n            style.fontSize = themestyle.fontSize;\n        }\n        if (themestyle.borders !== undefined) {\n            if (themestyle.borders.color !== undefined) {\n                style.borders.color = themestyle.borders.color;\n            }\n            if (themestyle.borders.lineStyle !== undefined) {\n                style.borders.lineStyle = themestyle.borders.lineStyle;\n            }\n        }\n        if (themestyle.bold !== false) {\n            style.bold = themestyle.bold;\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n        /* tslint:disable-next-line:no-any */\n        var style = {};\n        style.fontSize = 13;\n        style.backColor = '#F6F6F6';\n        if (theme !== undefined && theme.caption !== undefined) {\n            style = this.updateThemeStyle(theme.caption, style);\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n        /* tslint:disable-next-line:no-any */\n        var style = {};\n        style.fontSize = 13;\n        style.borders = { color: '#E0E0E0' };\n        if (theme !== undefined && theme.record !== undefined) {\n            style = this.updateThemeStyle(theme.record, style);\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processExcelHeader = function (header) {\n        if (header.rows !== undefined && (this.expType === 'newsheet' || this.rowLength === 1)) {\n            var noRows = void 0;\n            if (header.headerRows === undefined) {\n                this.rowLength = header.rows.length;\n            }\n            else {\n                this.rowLength = header.headerRows;\n            }\n            if (this.rowLength < header.rows.length) {\n                noRows = this.rowLength;\n            }\n            else {\n                noRows = header.rows.length;\n            }\n            this.rowLength++;\n            for (var row = 0; row < noRows; row++) {\n                /* tslint:disable-next-line:no-any */\n                var json = header.rows[row];\n                //Row index\n                if (!(json.index !== null && json.index !== undefined)) {\n                    json.index = (row + 1);\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.updatedCellIndex = function (json) {\n        var cellsLength = json.cells.length;\n        for (var cellId = 0; cellId < cellsLength; cellId++) {\n            /* tslint:disable-next-line:no-any */\n            var jsonCell = json.cells[cellId];\n            //cell index\n            if (!(jsonCell.index !== null && jsonCell.index !== undefined)) {\n                jsonCell.index = (cellId + 1);\n            }\n        }\n        this.rows.push(json);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processExcelFooter = function (footer) {\n        if (footer.rows !== undefined) {\n            var noRows = void 0;\n            if (footer.footerRows === undefined) {\n                this.rowLength += footer.rows.length;\n            }\n            else {\n                if (footer.footerRows > footer.rows.length) {\n                    this.rowLength += (footer.footerRows - footer.rows.length);\n                    noRows = footer.rows.length;\n                }\n                else {\n                    noRows = footer.footerRows;\n                }\n            }\n            for (var row = 0; row < noRows; row++) {\n                /* tslint:disable-next-line:no-any */\n                var json = footer.rows[row];\n                //Row index\n                if (json.index === null || json.index === undefined) {\n                    json.index = this.rowLength++;\n                }\n                else {\n                    json.index += this.rowLength;\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n        for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n            var spannedCell = spannedCells_1[_i];\n            if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n                columnIndex = columnIndex + 1;\n                return { contains: true, index: columnIndex };\n            }\n        }\n        return { contains: false, index: columnIndex };\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n        if (col.format !== undefined) {\n            if (col.format.skeleton !== undefined) {\n                style.numberFormat = col.format.skeleton;\n                if (col.format.type !== undefined) {\n                    style.type = col.format.type;\n                }\n            }\n            else {\n                style.numberFormat = col.format;\n                style.type = col.type;\n            }\n        }\n        if (col.textAlign !== undefined) {\n            style.hAlign = col.textAlign;\n        }\n        if (Object.keys(style).length > 0) {\n            style.name = gObj.element.id + 'column' + index;\n            this.styles.push(style);\n        }\n        if (col.width !== undefined) {\n            /* tslint:disable-next-line:max-line-length */\n            this.columns.push({ index: index, width: typeof col.width === 'number' ? col.width : this.helper.getConvertedWidth(col.width) });\n        }\n    };\n    /**\n     * To destroy the excel export\n     * @return {void}\n     * @hidden\n     */\n    ExcelExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n * @hidden\n */\nvar PdfExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid PDF Export module\n     * @hidden\n     */\n    function PdfExport(parent) {\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.customDataSource = false;\n        this.isGrouping = false;\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    PdfExport.prototype.getModuleName = function () {\n        return 'PdfExport';\n    };\n    PdfExport.prototype.init = function (parent) {\n        this.exportValueFormatter = new ExportValueFormatter();\n        this.pdfDocument = undefined;\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.parent = parent;\n        var gObj = parent;\n        this.helper = new ExportHelper(gObj);\n        this.isGrouping = false;\n        this.isExporting = true;\n        gObj.trigger(events.beforePdfExport);\n    };\n    /**\n     * Used to map the input data\n     * @return {void}\n     */\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc) {\n        var _this = this;\n        this.data = new Data(this.parent);\n        /* tslint:disable-next-line:max-line-length */\n        if (pdfExportProperties !== undefined && pdfExportProperties.dataSource !== undefined && pdfExportProperties.dataSource instanceof DataManager) {\n            var promise = void 0;\n            return promise = new Promise(function (resolve, reject) {\n                /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n                new DataManager({ url: pdfExportProperties.dataSource.dataSource.url, adaptor: pdfExportProperties.dataSource.adaptor }).executeQuery(new Query()).then(function (returnType) {\n                    _this.init(parent);\n                    if (pdfDoc !== undefined) {\n                        _this.pdfDocument = pdfDoc;\n                    }\n                    else {\n                        _this.pdfDocument = new PdfDocument();\n                    }\n                    _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n                    _this.isExporting = false;\n                    parent.trigger(events.pdfExportComplete);\n                    resolve(_this.pdfDocument);\n                });\n            });\n        }\n        else {\n            var promise = void 0;\n            return promise = new Promise(function (resolve, reject) {\n                var dataManager = _this.data.getData({}, ExportHelper.getQuery(parent, _this.data));\n                dataManager.then(function (returnType) {\n                    _this.init(parent);\n                    if (pdfDoc !== undefined) {\n                        _this.pdfDocument = pdfDoc;\n                    }\n                    else {\n                        _this.pdfDocument = new PdfDocument();\n                    }\n                    _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n                    _this.isExporting = false;\n                    parent.trigger(events.pdfExportComplete);\n                    resolve(_this.pdfDocument);\n                });\n            });\n        }\n    };\n    /* tslint:disable:no-any */\n    PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n        if (pdfExportProperties !== undefined) {\n            this.gridTheme = pdfExportProperties.theme;\n        }\n        var columns = gObj.columns;\n        var dataSource = returnType.result;\n        /* tslint:enable:no-any */\n        var section = this.pdfDocument.sections.add();\n        /* tslint:disable-next-line:no-any */\n        var result = this.processExportProperties(pdfExportProperties, dataSource, section);\n        dataSource = result.dataSource;\n        /* tslint:disable-next-line:no-any */\n        if (dataSource.GroupGuid !== undefined) {\n            this.isGrouping = true;\n        }\n        section = result.section;\n        var pdfPage = section.pages.add();\n        // create a grid\n        var pdfGrid = new PdfGrid();\n        // get header theme style\n        /* tslint:disable-next-line:no-any */\n        var headerThemeStyle = this.getHeaderThemeStyle();\n        var border = headerThemeStyle.border;\n        var headerFont = headerThemeStyle.font;\n        var headerBrush = headerThemeStyle.brush;\n        /* tslint:disable-next-line:no-any */\n        var returnValue = this.helper.getHeaders(columns, this.hideColumnInclude);\n        var rows = returnValue.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        // process grid header content\n        pdfGrid = this.processGridHeaders(dataSource.childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush);\n        // set alignment, width and type of the values of the column\n        this.setColumnProperties(gridColumns, pdfGrid);\n        /* tslint:disable-next-line:no-any */\n        var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n        if (dataSource !== undefined && dataSource !== null && dataSource.length > 0) {\n            if (this.isGrouping) {\n                /* tslint:disable-next-line:max-line-length */\n                this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, returnType);\n            }\n            else {\n                this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid);\n            }\n            if (returnType.aggregates !== undefined) {\n                var summaryModel = new SummaryModelGenerator(gObj);\n                var sRows = void 0;\n                if (this.customDataSource) {\n                    sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n                }\n                else if (this.currentViewData) {\n                    sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n                }\n                else if (this.isGrouping) {\n                    sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n                }\n                else {\n                    sRows = summaryModel.generateRows(returnType.result, returnType.aggregates);\n                }\n                /* tslint:disable-next-line:max-line-length */\n                this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n            }\n        }\n        else {\n            var row = pdfGrid.rows.addRow();\n            row.style.setBorder(border);\n        }\n        // draw the grid\n        pdfGrid.draw(pdfPage, 20, 20);\n        if (!isMultipleExport) {\n            // save the PDF\n            this.pdfDocument.save('Export.pdf');\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n        if (this.gridTheme !== undefined && this.gridTheme.caption !== undefined && this.gridTheme.caption !== null) {\n            var fontSize = this.gridTheme.caption.fontSize !== undefined ? this.gridTheme.caption.fontSize : 9.75;\n            var pdfColor = new PdfColor();\n            if (this.gridTheme.caption.fontColor !== undefined) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            /* tslint:disable-next-line:max-line-length */\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5), brush: new PdfSolidBrush(new PdfColor(pdfColor)), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n        else {\n            //Material theme\n            /* tslint:disable-next-line:max-line-length */\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75), brush: new PdfSolidBrush(new PdfColor(0, 0, 0)), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getHeaderThemeStyle = function () {\n        var border = new PdfBorders();\n        if (this.gridTheme !== undefined && this.gridTheme.header !== undefined && this.gridTheme.header !== null) {\n            if (this.gridTheme.header.borders !== undefined && this.gridTheme.header.borders.color !== undefined) {\n                var borderColor = this.hexToRgb(this.gridTheme.header.borders.color);\n                border.all = new PdfPen(new PdfColor(borderColor.r, borderColor.g, borderColor.b));\n            }\n            var fontSize = this.gridTheme.header.fontSize !== undefined ? this.gridTheme.header.fontSize : 10.5;\n            var pdfColor = new PdfColor();\n            if (this.gridTheme.header.fontColor !== undefined) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            /* tslint:disable-next-line:max-line-length */\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, fontSize), brush: new PdfSolidBrush(pdfColor) };\n        }\n        else {\n            //Material theme\n            border.all = new PdfPen(new PdfColor(234, 234, 234));\n            /* tslint:disable-next-line:max-line-length */\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5), brush: new PdfSolidBrush(new PdfColor(102, 102, 102)) };\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType) {\n        var groupIndex = level;\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var dataSourceItems = dataSource_1[_i];\n            var row = pdfGrid.rows.addRow();\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: dataSourceItems.key,\n                column: gObj.getColumnByField(dataSourceItems.field),\n                style: undefined\n            };\n            /* tslint:disable-next-line:max-line-length */\n            var value = dataSourceItems.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n            row.cells.getCell(groupIndex).value = value;\n            row.cells.getCell(groupIndex + 1).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n            row.style.setBorder(border);\n            row.style.setFont(font);\n            row.style.setTextBrush(brush);\n            row.style.setBackgroundBrush(backgroundBrush);\n            var sRows = void 0;\n            var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n            if (dataSourceItems.items.records !== undefined) {\n                sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n            }\n            else {\n                sRows = captionSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n            }\n            if (sRows !== undefined && sRows.length === 0) {\n                row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n            }\n            if (dataSource.childLevels !== undefined && dataSource.childLevels > 0) {\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                /* tslint:disable-next-line:max-line-length */\n                this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType);\n                var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, returnType.aggregates);\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n            }\n            else {\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1));\n                var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                sRows = groupSummaryModel.generateRows(dataSourceItems.items, returnType.aggregates);\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush) {\n        var columnCount = gridColumns.length;\n        if (this.isGrouping) {\n            columnCount += (childLevels + 1);\n        }\n        // add columns\n        pdfGrid.columns.add(columnCount);\n        if (this.isGrouping) {\n            for (var i = 0; i < (childLevels + 1); i++) {\n                pdfGrid.columns.getColumn(i).width = 20;\n            }\n        }\n        // add header\n        pdfGrid.headers.add(rows.length);\n        // set cell values of each rows in the header\n        for (var i = 0; i < rows.length; i++) {\n            var gridHeader = pdfGrid.headers.getHeader(i);\n            gridHeader.style.setBorder(border);\n            gridHeader.style.setFont(headerFont);\n            gridHeader.style.setTextBrush(headerBrush);\n            var cellIndex = this.isGrouping ? (childLevels + 1) : 0;\n            if (rows[i].cells.length === 0) {\n                for (var j = 0; j < gridHeader.cells.count; j++) {\n                    var cell = gridHeader.cells.getCell(j);\n                    cell.value = '';\n                }\n            }\n            else {\n                for (var j = 0; j < cellIndex; j++) {\n                    var cell = gridHeader.cells.getCell(j);\n                    cell.value = '';\n                }\n                for (var j = 0; j < rows[i].cells.length; j++) {\n                    var cell = gridHeader.cells.getCell(cellIndex);\n                    if (cell.value !== null) {\n                        cell.value = rows[i].cells[j].column.headerText;\n                        if (rows[i].cells[j].column.headerTextAlign !== undefined) {\n                            cell.style.stringFormat = this.getHorizontalAlignment(rows[i].cells[j].column.headerTextAlign);\n                        }\n                        if (rows[i].cells[j].rowSpan !== undefined) {\n                            cell.rowSpan = rows[i].cells[j].rowSpan;\n                            /* tslint:disable-next-line:max-line-length */\n                            cell.style.stringFormat = this.getVerticalAlignment('bottom', cell.style.stringFormat, rows[i].cells[j].column.textAlign);\n                            for (var k = 1; k < rows[i].cells[j].rowSpan; k++) {\n                                pdfGrid.headers.getHeader(i + k).cells.getCell(cellIndex).value = null;\n                            }\n                        }\n                        if (rows[i].cells[j].colSpan !== undefined) {\n                            cell.columnSpan = rows[i].cells[j].colSpan;\n                        }\n                        cellIndex += cell.columnSpan;\n                    }\n                    else {\n                        cell.value = '';\n                        cellIndex += cell.columnSpan;\n                        j = j - 1;\n                    }\n                }\n            }\n        }\n        if (pdfGrid.columns.count >= 6) {\n            pdfGrid.style.allowHorizontalOverflow = true;\n        }\n        return pdfGrid;\n    };\n    /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource, section) {\n        if (pdfExportProperties !== undefined) {\n            if (pdfExportProperties.theme !== undefined) {\n                this.gridTheme = pdfExportProperties.theme;\n            }\n            if (pdfExportProperties.pageOrientation !== undefined || pdfExportProperties.pageSize !== undefined) {\n                var pdfPageSettings = new PdfPageSettings();\n                /* tslint:disable-next-line:max-line-length */\n                pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'landscape') ? PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n                pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n                section.setPageSettings(pdfPageSettings);\n            }\n            var clientSize = this.pdfDocument.pageSettings.size;\n            if (pdfExportProperties.header !== undefined) {\n                /* tslint:disable-next-line:no-any */\n                var header = pdfExportProperties.header;\n                var position = new PointF(0, header.fromTop);\n                var size = new SizeF((clientSize.width - 80), (header.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n            }\n            if (pdfExportProperties.footer !== undefined) {\n                /* tslint:disable-next-line:no-any */\n                var footer = pdfExportProperties.footer;\n                var position = new PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n                var size = new SizeF((clientSize.width - 80), (footer.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n            }\n            if (pdfExportProperties.includeHiddenColumn !== undefined && !this.isGrouping) {\n                this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n            }\n            if (pdfExportProperties.dataSource !== undefined) {\n                if (!(pdfExportProperties.dataSource instanceof DataManager)) {\n                    dataSource = pdfExportProperties.dataSource;\n                }\n                this.customDataSource = true;\n                this.currentViewData = false;\n            }\n            else if (pdfExportProperties.exportType !== undefined) {\n                if (pdfExportProperties.exportType === 'currentpage') {\n                    dataSource = this.parent.getCurrentViewRecords();\n                    this.currentViewData = true;\n                    this.customDataSource = false;\n                }\n                else {\n                    this.currentViewData = false;\n                    this.customDataSource = false;\n                }\n            }\n            else {\n                this.currentViewData = false;\n                this.customDataSource = false;\n            }\n        }\n        else {\n            this.currentViewData = false;\n            this.customDataSource = false;\n        }\n        return { dataSource: dataSource, section: section };\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawPageTemplate = function (template, element) {\n        for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n            var content = _a[_i];\n            this.processContentValidation(content);\n            switch (content.type) {\n                case 'text':\n                    /* tslint:disable-next-line:max-line-length */\n                    if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n                        throw new Error('please enter the valid input value in text content...');\n                    }\n                    this.drawText(template, content);\n                    break;\n                case 'pagenumber':\n                    this.drawPageNumber(template, content);\n                    break;\n                case 'image':\n                    if (content.src === undefined || content.src === null || content.src === '') {\n                        throw new Error('please enter the valid base64 string in image content...');\n                    }\n                    this.drawImage(template, content);\n                    break;\n                case 'line':\n                    this.drawLine(template, content);\n                    break;\n                default:\n                    throw new Error('Please set valid content type...');\n            }\n        }\n        return template;\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processContentValidation = function (content) {\n        if (content.type === undefined || content.type === null) {\n            throw new Error('please set valid content type...');\n        }\n        else {\n            if (content.type === 'line') {\n                if (content.points === undefined || content.points === null) {\n                    throw new Error('please enter valid points in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n                        throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n                        throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n                        throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n                        throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n                    }\n                }\n            }\n            else {\n                if (content.position === undefined || content.position === null) {\n                    throw new Error('please enter valid position in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n                        throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n                    }\n                    if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n                        throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawText = function (pageTemplate, content) {\n        var font = this.getFont(content);\n        var brush = this.getBrushFromContent(content);\n        var pen = null;\n        if (content.style.textPenColor !== undefined) {\n            var penColor = this.hexToRgb(content.style.textPenColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        if (brush == null && pen == null) {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var value = content.value.toString();\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var format;\n        var result = this.setContentFormat(content, format);\n        if (result !== null && result.format !== undefined && result.size !== undefined) {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n        }\n        else {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n        var font = this.getFont(content);\n        var brush = null;\n        if (content.style.textBrushColor !== undefined) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        else {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var pageNumber = new PdfPageNumberField(font, brush);\n        pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n        var compositeField;\n        var format;\n        if (content.format !== undefined) {\n            if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n                var pageCount = new PdfPageCountField(font);\n                if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n                    format = content.format.replace('$current', '0');\n                    format = format.replace('$total', '1');\n                }\n                else {\n                    format = content.format.replace('$current', '1');\n                    format = format.replace('$total', '0');\n                }\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n            }\n            else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n                format = content.format.replace('$current', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n            }\n            else {\n                var pageCount = new PdfPageCountField(font);\n                format = content.format.replace('$total', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageCount);\n            }\n        }\n        else {\n            format = '{0}';\n            compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n        }\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var result = this.setContentFormat(content, compositeField.stringFormat);\n        if (result !== null && result.format !== undefined && result.size !== undefined) {\n            compositeField.stringFormat = result.format;\n            compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n        }\n        compositeField.draw(documentHeader.graphics, x, y);\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawImage = function (documentHeader, content) {\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var width = (content.size !== undefined) ? (content.size.width * 0.75) : undefined;\n        var height = (content.size !== undefined) ? (content.size.height * 0.75) : undefined;\n        var image = new PdfBitmap(content.src);\n        if (width !== undefined) {\n            documentHeader.graphics.drawImage(image, x, y, width, height);\n        }\n        else {\n            documentHeader.graphics.drawImage(image, x, y);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawLine = function (documentHeader, content) {\n        var x1 = content.points.x1 * 0.75;\n        var y1 = content.points.y1 * 0.75;\n        var x2 = content.points.x2 * 0.75;\n        var y2 = content.points.y2 * 0.75;\n        var pen = this.getPenFromContent(content);\n        if (content.style !== undefined && content.style !== null) {\n            if (content.style.penSize !== undefined && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n                pen.width = content.style.penSize * 0.75;\n            }\n            pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n        }\n        documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n    };\n    /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex) {\n        for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n            var row = sRows_1[_i];\n            var startIndex = 0;\n            var leastCaptionSummaryIndex = -1;\n            var index = 0;\n            var isEmpty = true;\n            /* tslint:disable-next-line:no-any */\n            var value = [];\n            for (var i = 0; i < pdfGrid.columns.count; i++) {\n                /* tslint:disable-next-line:no-any */\n                var cell = row.cells[index];\n                if (!this.hideColumnInclude) {\n                    while (cell.visible === undefined) {\n                        if (captionRow !== undefined) {\n                            if (captionRow.cells.getCell(i).value !== undefined) {\n                                value.push('');\n                                value.push(captionRow.cells.getCell(i).value);\n                                isEmpty = false;\n                                i += 1;\n                            }\n                            else {\n                                value.push('');\n                            }\n                        }\n                        else {\n                            value.push('');\n                        }\n                        i += 1;\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                    while (cell.visible !== undefined && !cell.visible) {\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                }\n                if (cell.isDataCell) {\n                    var templateFn = {};\n                    /* tslint:disable-next-line:max-line-length */\n                    if (cell.column.footerTemplate !== undefined || cell.column.groupCaptionTemplate !== undefined || cell.column.groupFooterTemplate !== undefined) {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell.column);\n                        templateFn = result.templateFunction;\n                        leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n                        /* tslint:disable-next-line:max-line-length */\n                        var txt = (templateFn[getEnumValue(CellType, cell.cellType)](row.data[cell.column.field ? cell.column.field : cell.column.columnName]));\n                        value.push(txt[0].wholeText);\n                        isEmpty = false;\n                    }\n                    else {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n                        if (result !== undefined) {\n                            value.push(result);\n                        }\n                    }\n                }\n                else {\n                    value.push('');\n                }\n                if (isEmpty && value[i] !== '' && value[i] !== undefined && value[i] !== null) {\n                    isEmpty = false;\n                }\n                index += 1;\n            }\n            if (!isEmpty) {\n                if (!isCaption) {\n                    var gridRow = pdfGrid.rows.addRow();\n                    gridRow.style.setBorder(border);\n                    gridRow.style.setFont(font);\n                    gridRow.style.setTextBrush(brush);\n                    gridRow.style.setBackgroundBrush(backgroundBrush);\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        gridRow.cells.getCell(i).value = value[i].toString();\n                    }\n                }\n                else {\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        captionRow.cells.getCell(i).value = value[i].toString();\n                        if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1) {\n                            captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n                        }\n                        else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n                            captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, column) {\n        if (column.footerTemplate !== undefined) {\n            templateFn[getEnumValue(CellType, CellType.Summary)] = compile(column.footerTemplate);\n        }\n        else if (column.groupCaptionTemplate !== undefined) {\n            if (leastCaptionSummaryIndex === -1) {\n                leastCaptionSummaryIndex = index;\n            }\n            templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(column.groupCaptionTemplate);\n        }\n        else {\n            templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(column.groupFooterTemplate);\n        }\n        return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n        if (data.sum !== undefined) {\n            return data.sum;\n        }\n        else if (data.average !== undefined) {\n            return data.average;\n        }\n        else if (data.max !== undefined) {\n            return data.max;\n        }\n        else if (data.min !== undefined) {\n            return data.min;\n        }\n        else if (data.count !== undefined) {\n            return data.count;\n        }\n        else if (data.truecount !== undefined) {\n            return data.truecount;\n        }\n        else if (data.falsecount !== undefined) {\n            return data.falsecount;\n        }\n        else if (data.custom !== undefined) {\n            return data.custom;\n        }\n    };\n    // Set alignment, width and type of the values of the column\n    /* tslint:disable:no-any */\n    /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid) {\n        var startIndex = this.isGrouping ? (pdfGrid.columns.count - gridColumns.length) : 0;\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (gridColumns[i].textAlign !== undefined) {\n                pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n            }\n            // Need to add width consideration with % value\n            if (pdfGrid.style.allowHorizontalOverflow && gridColumns[i].width !== undefined) {\n                /* tslint:disable-next-line:max-line-length */\n                pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[i].width === 'number' ? gridColumns[i].width * 0.75 : this.helper.getConvertedWidth(gridColumns[i].width) * 0.75;\n            }\n        }\n    };\n    /**\n     * set default style properties of each rows in exporting grid\n     * @private\n     */\n    PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n        if (this.gridTheme !== undefined && this.gridTheme.record !== undefined && this.gridTheme.record !== null) {\n            var pdfColor = new PdfColor();\n            if (this.gridTheme.record.fontColor !== undefined) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n        }\n        else {\n            row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n        }\n        row.style.setBorder(border);\n        return row;\n    };\n    /**\n     * generate the formatted cell values\n     * @private\n     */\n    /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, groupIndex) {\n        var startIndex = this.isGrouping ? groupIndex : 0;\n        for (var _i = 0, _a = dataSource; _i < _a.length; _i++) {\n            var items = _a[_i];\n            // create a new row and set default style properties\n            var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n            for (var j = 0; j < columns.length; j++) {\n                /* tslint:disable:no-any */\n                var value = items[columns[j].field];\n                var data = items;\n                var args = {\n                    data: data,\n                    value: value,\n                    column: columns[j],\n                    style: undefined,\n                    colSpan: 1\n                };\n                /* tslint:enable:no-any */\n                gObj.trigger(events.pdfQueryCellInfo, args);\n                var cell = gridRow.cells.getCell(j + startIndex);\n                cell.value = this.exportValueFormatter.formatCellValue(args);\n                if (args.style !== undefined) {\n                    this.processCellStyle(cell, args);\n                }\n                if (args.colSpan > 1) {\n                    if ((j + startIndex + 1 + args.colSpan) > gridRow.cells.count) {\n                        args.colSpan = gridRow.cells.count - (j + startIndex + 1);\n                    }\n                    cell.columnSpan = args.colSpan;\n                    for (var i = 1; i < cell.columnSpan; i++) {\n                        var spanCell = gridRow.cells.getCell(j + startIndex + i);\n                        spanCell.value = '';\n                    }\n                    j += (args.colSpan - 1);\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processCellStyle = function (cell, args) {\n        if (args.style.backgroundColor !== undefined) {\n            /* tslint:disable-next-line:max-line-length */\n            var backColor = this.hexToRgb(args.style.backgroundColor);\n            cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n        }\n        if (args.style.textAlignment !== undefined) {\n            cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n        }\n        if (args.style.verticalAlignment !== undefined) {\n            cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n        }\n        if (args.style.textBrushColor !== undefined) {\n            var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n            cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n        }\n        if (args.style.textPenColor !== undefined) {\n            var textPenColor = this.hexToRgb(args.style.textPenColor);\n            cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n        }\n        /* tslint:disable-next-line:max-line-length */\n        if (args.style.fontFamily !== undefined || args.style.fontSize !== undefined || args.style.bold !== undefined || args.style.italic !== undefined || args.style.underline !== undefined || args.style.strikeout !== undefined) {\n            cell.style.font = this.getFont(args);\n        }\n        if (args.style.border !== undefined) {\n            var border = new PdfBorders();\n            var borderWidth = args.style.border.width;\n            // set border width\n            var width = (borderWidth !== undefined && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (args.style.border.color !== undefined) {\n                var borderColor = this.hexToRgb(args.style.border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (args.style.border.dashStyle !== undefined) {\n                pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n            }\n            border.all = pen;\n            cell.style.borders = border;\n        }\n    };\n    /**\n     * set text alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n        }\n        switch (textAlign) {\n            case 'right':\n                format.alignment = PdfTextAlignment.Right;\n                break;\n            case 'center':\n                format.alignment = PdfTextAlignment.Center;\n                break;\n            case 'justify':\n                format.alignment = PdfTextAlignment.Justify;\n                break;\n            case 'left':\n                format.alignment = PdfTextAlignment.Left;\n                break;\n        }\n        return format;\n    };\n    /**\n     * set vertical alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n            format = this.getHorizontalAlignment(textAlign, format);\n        }\n        switch (verticalAlign) {\n            case 'bottom':\n                format.lineAlignment = PdfVerticalAlignment.Bottom;\n                break;\n            case 'middle':\n                format.lineAlignment = PdfVerticalAlignment.Middle;\n                break;\n            case 'top':\n                format.lineAlignment = PdfVerticalAlignment.Top;\n                break;\n        }\n        return format;\n    };\n    PdfExport.prototype.getFontFamily = function (fontFamily) {\n        switch (fontFamily) {\n            case 'TimesRoman':\n                return 2;\n            case 'Courier':\n                return 1;\n            case 'Symbol':\n                return 3;\n            case 'ZapfDingbats':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getFont = function (content) {\n        var fontSize = (content.style.fontSize !== undefined) ? (content.style.fontSize * 0.75) : 9.75;\n        /* tslint:disable-next-line:max-line-length */\n        var fontFamily = (content.style.fontFamily !== undefined) ? (this.getFontFamily(content.style.fontFamily)) : PdfFontFamily.Helvetica;\n        var fontStyle = PdfFontStyle.Regular;\n        if (content.style.bold !== undefined && content.style.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (content.style.italic !== undefined && content.style.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (content.style.underline !== undefined && content.style.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (content.style.strikeout !== undefined && content.style.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n    };\n    PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n        switch (pageNumberType) {\n            case 'lowerlatin':\n                return 2;\n            case 'lowerroman':\n                return 3;\n            case 'upperlatin':\n                return 4;\n            case 'upperroman':\n                return 5;\n            default:\n                return 1;\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.setContentFormat = function (content, format) {\n        if (content.size !== undefined) {\n            var width = content.size.width * 0.75;\n            var height = content.size.height * 0.75;\n            format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n            if (content.style.hAlign !== undefined) {\n                switch (content.style.hAlign) {\n                    case 'right':\n                        format.alignment = PdfTextAlignment.Right;\n                        break;\n                    case 'center':\n                        format.alignment = PdfTextAlignment.Center;\n                        break;\n                    case 'justify':\n                        format.alignment = PdfTextAlignment.Justify;\n                        break;\n                    default:\n                        format.alignment = PdfTextAlignment.Left;\n                }\n            }\n            if (content.style.vAlign !== undefined) {\n                format = this.getVerticalAlignment(content.style.vAlign, format);\n            }\n            return { format: format, size: new SizeF(width, height) };\n        }\n        return null;\n    };\n    PdfExport.prototype.getPageSize = function (pageSize) {\n        switch (pageSize) {\n            case 'letter':\n                return new SizeF(612, 792);\n            case 'note':\n                return new SizeF(540, 720);\n            case 'legal':\n                return new SizeF(612, 1008);\n            case 'a0':\n                return new SizeF(2380, 3368);\n            case 'a1':\n                return new SizeF(1684, 2380);\n            case 'a2':\n                return new SizeF(1190, 1684);\n            case 'a3':\n                return new SizeF(842, 1190);\n            case 'a5':\n                return new SizeF(421, 595);\n            case 'a6':\n                return new SizeF(297, 421);\n            case 'a7':\n                return new SizeF(210, 297);\n            case 'a8':\n                return new SizeF(148, 210);\n            case 'a9':\n                return new SizeF(105, 148);\n            // case 'A10':\n            //     return new SizeF(74, 105);\n            case 'b0':\n                return new SizeF(2836, 4008);\n            case 'b1':\n                return new SizeF(2004, 2836);\n            case 'b2':\n                return new SizeF(1418, 2004);\n            case 'b3':\n                return new SizeF(1002, 1418);\n            case 'b4':\n                return new SizeF(709, 1002);\n            case 'b5':\n                return new SizeF(501, 709);\n            case 'archa':\n                return new SizeF(648, 864);\n            case 'archb':\n                return new SizeF(864, 1296);\n            case 'archc':\n                return new SizeF(1296, 1728);\n            case 'archd':\n                return new SizeF(1728, 2592);\n            case 'arche':\n                return new SizeF(2592, 3456);\n            case 'flsa':\n                return new SizeF(612, 936);\n            case 'halfletter':\n                return new SizeF(396, 612);\n            case 'letter11x17':\n                return new SizeF(792, 1224);\n            case 'ledger':\n                return new SizeF(1224, 792);\n            default:\n                return new SizeF(595, 842);\n        }\n    };\n    PdfExport.prototype.getDashStyle = function (dashStyle) {\n        switch (dashStyle) {\n            case 'dash':\n                return 1;\n            case 'dot':\n                return 2;\n            case 'dashdot':\n                return 3;\n            case 'dashdotdot':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getPenFromContent = function (content) {\n        var pen = new PdfPen(new PdfColor(0, 0, 0));\n        if (content.style !== undefined && content.style !== null && content.style.penColor !== undefined) {\n            var penColor = this.hexToRgb(content.style.penColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        return pen;\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getBrushFromContent = function (content) {\n        var brush = null;\n        if (content.style.textBrushColor !== undefined) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        return brush;\n    };\n    PdfExport.prototype.hexToRgb = function (hex) {\n        if (hex === null || hex === '' || hex.length !== 7) {\n            throw new Error('please set valid hex value for color...');\n        }\n        hex = hex.substring(1);\n        var bigint = parseInt(hex, 16);\n        var r = (bigint >> 16) & 255;\n        var g = (bigint >> 8) & 255;\n        var b = bigint & 255;\n        return { r: r, g: g, b: b };\n    };\n    /**\n     * To destroy the pdf export\n     * @return {void}\n     * @hidden\n     */\n    PdfExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return PdfExport;\n}());\nexport { PdfExport };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, addClass, removeClass, attributes } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren } from '../base/util';\n/**\n * `CommandColumn` used to render command column in grid\n * @hidden\n */\nvar CommandColumnRenderer = /** @class */ (function (_super) {\n    __extends(CommandColumnRenderer, _super);\n    function CommandColumnRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.buttonElement = createElement('button', {});\n        _this.unbounDiv = createElement('div', { className: 'e-unboundcelldiv', styles: 'display: inline-block' });\n        _this.element = createElement('TD', {\n            className: 'e-rowcell e-unboundcell', attrs: {\n                role: 'gridcell', tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CommandColumnRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.unbounDiv.cloneNode());\n        node.setAttribute('aria-label', 'is Command column column header ' + cell.column.headerText);\n        if (cell.column.commandsTemplate) {\n            appendChildren(node.firstElementChild, cell.column.getColumnTemplate()(data));\n        }\n        else {\n            for (var _i = 0, _a = cell.commands; _i < _a.length; _i++) {\n                var command = _a[_i];\n                node = this.renderButton(node, command, attributes.index);\n            }\n        }\n        this.setAttributes(node, cell, attributes);\n        if (this.parent.isEdit) {\n            addClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n        }\n        else {\n            addClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n        }\n        return node;\n    };\n    CommandColumnRenderer.prototype.renderButton = function (node, buttonOption, index) {\n        var button = this.buttonElement.cloneNode();\n        attributes(button, { 'id': this.parent.element.id + (buttonOption.type || '') + '_' + index, 'type': 'button' });\n        button.onclick = buttonOption.buttonOption.click;\n        node.firstElementChild.appendChild(new Button(buttonOption.buttonOption, button).element);\n        switch (buttonOption.type) {\n            case 'edit':\n            case 'delete':\n                addClass([button], ['e-edit-delete', 'e-' + buttonOption.type + 'button']);\n                break;\n            case 'cancel':\n            case 'save':\n                addClass([button], ['e-save-cancel', 'e-' + buttonOption.type + 'button']);\n                break;\n        }\n        return node;\n    };\n    return CommandColumnRenderer;\n}(CellRenderer));\nexport { CommandColumnRenderer };\n","import { closest } from '@syncfusion/ej2-base';\nimport { initialEnd, click, keyPressed } from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { CommandColumnRenderer } from '../renderer/command-column-renderer';\n/**\n * `CommandColumn` used to handle the command column actions.\n * @hidden\n */\nvar CommandColumn = /** @class */ (function () {\n    function CommandColumn(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    CommandColumn.prototype.initiateRender = function () {\n        var cellFac = this.locator.getService('cellRendererFactory');\n        cellFac.addCellRenderer(CellType.CommandColumn, new CommandColumnRenderer(this.parent, this.locator));\n    };\n    CommandColumn.prototype.commandClickHandler = function (e) {\n        var gObj = this.parent;\n        var gID = this.parent.element.id;\n        var target = closest(e.target, 'button');\n        if (!target || !gObj.editModule) {\n            return;\n        }\n        switch (target.id.split('_')[0]) {\n            case gID + 'edit':\n                this.parent.editModule.endEdit();\n                gObj.editModule.startEdit(closest(target, 'tr'));\n                break;\n            case gID + 'cancel':\n                gObj.editModule.closeEdit();\n                break;\n            case gID + 'save':\n                this.parent.editModule.endEdit();\n                break;\n            case gID + 'delete':\n                this.parent.editModule.endEdit();\n                gObj.editModule.deleteRow(closest(target, 'tr'));\n                break;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    CommandColumn.prototype.getModuleName = function () {\n        return 'commandColumn';\n    };\n    /**\n     * To destroy CommandColumn.\n     * @method destroy\n     * @return {void}\n     */\n    CommandColumn.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    CommandColumn.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(click, this.commandClickHandler);\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(keyPressed, this.keyPressHandler);\n    };\n    CommandColumn.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(click, this.commandClickHandler, this);\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(keyPressed, this.keyPressHandler, this);\n    };\n    CommandColumn.prototype.keyPressHandler = function (e) {\n        if (e.action === 'enter' && closest(e.target, 'button')) {\n            this.commandClickHandler(e);\n            e.preventDefault();\n        }\n    };\n    return CommandColumn;\n}());\nexport { CommandColumn };\n","import { closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement, remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { Resize } from '../actions/resize';\nimport { Page } from '../actions/page';\nimport { parentsUntil } from '../base/util';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { PdfExport } from '../actions/pdf-export';\nimport { ExcelExport } from '../actions/excel-export';\nexport var menuClass = {\n    header: '.e-gridheader',\n    content: '.e-gridcontent',\n    edit: '.e-inline-edit',\n    editIcon: 'e-edit',\n    pager: '.e-gridpager',\n    delete: 'e-delete',\n    save: 'e-save',\n    cancel: 'e-cancel',\n    copy: 'e-copy',\n    pdf: 'e-pdfexport',\n    group: 'e-icon-group',\n    ungroup: 'e-icon-ungroup',\n    csv: 'e-csvexport',\n    excel: 'e-excelexport',\n    fPage: 'e-icon-first',\n    nPage: 'e-icon-next',\n    lPage: 'e-icon-last',\n    pPage: 'e-icon-prev',\n    ascending: 'e-icon-ascending',\n    descending: 'e-icon-descending',\n    groupHeader: 'e-groupdroparea',\n    touchPop: 'e-gridpopup'\n};\n/**\n * 'ContextMenu module used to handle context menu actions.'\n */\nvar ContextMenu = /** @class */ (function () {\n    function ContextMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.localeText = this.setLocaleKey();\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.render, this);\n    };\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.render);\n    };\n    ContextMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = createElement('ul', { id: this.gridID + '_cmenu' });\n        this.parent.element.appendChild(this.element);\n        var target = '#' + this.gridID;\n        this.contextMenu = new Menu({\n            items: this.getMenuItems(),\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            target: target,\n            select: this.contextMenuItemClick.bind(this),\n            beforeOpen: this.contextMenuBeforeOpen.bind(this),\n            onOpen: this.contextMenuOpen.bind(this),\n            onClose: this.contextMenuOnClose.bind(this),\n            cssClass: 'e-grid-menu'\n        });\n        this.contextMenu.appendTo(this.element);\n    };\n    ContextMenu.prototype.getMenuItems = function () {\n        var menuItems = [];\n        var exportItems = [];\n        for (var _i = 0, _a = this.parent.contextMenuItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n                if (item.toLocaleLowerCase().indexOf('export') !== -1) {\n                    exportItems.push(this.buildDefaultItems(item));\n                }\n                else {\n                    menuItems.push(this.buildDefaultItems(item));\n                }\n            }\n            else if (typeof item !== 'string') {\n                menuItems.push(item);\n            }\n        }\n        if (exportItems.length > 0) {\n            var exportGroup = this.buildDefaultItems('export');\n            exportGroup.items = exportItems;\n            menuItems.push(exportGroup);\n        }\n        return menuItems;\n    };\n    ContextMenu.prototype.getLastPage = function () {\n        var totalpage = Math.floor(this.parent.pageSettings.totalRecordsCount / this.parent.pageSettings.pageSize);\n        if (this.parent.pageSettings.totalRecordsCount % this.parent.pageSettings.pageSize) {\n            totalpage += 1;\n        }\n        return totalpage;\n    };\n    ContextMenu.prototype.contextMenuOpen = function () {\n        this.isOpen = true;\n    };\n    ContextMenu.prototype.contextMenuItemClick = function (args) {\n        var item = this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'autoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'autoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'edit':\n                if (this.parent.editSettings.mode === 'batch') {\n                    if (this.row && this.cell && !isNaN(parseInt(this.cell.getAttribute('aria-colindex'), 10))) {\n                        this.parent.editModule.editCell(parseInt(this.row.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(this.cell.getAttribute('aria-colindex'), 10)].field);\n                    }\n                }\n                else {\n                    this.parent.editModule.endEdit();\n                    this.parent.editModule.startEdit();\n                }\n                break;\n            case 'delete':\n                if (this.parent.editSettings.mode !== 'batch') {\n                    this.parent.editModule.endEdit();\n                }\n                this.parent.editModule.deleteRow(this.parent.getRowByIndex(this.parent.selectedRowIndex));\n                break;\n            case 'save':\n                this.parent.editModule.endEdit();\n                break;\n            case 'cancel':\n                this.parent.editModule.closeEdit();\n                break;\n            case 'copy':\n                this.parent.copy();\n                break;\n            case 'pdfExport':\n                this.parent.pdfExport();\n                break;\n            case 'excelExport':\n                this.parent.excelExport();\n                break;\n            case 'csvExport':\n                this.parent.csvExport();\n                break;\n            case 'sortAscending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'ascending');\n                break;\n            case 'sortDescending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'descending');\n                break;\n            case 'firstPage':\n                this.parent.goToPage(1);\n                break;\n            case 'prevPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage - 1);\n                break;\n            case 'lastPage':\n                this.parent.goToPage(this.getLastPage());\n                break;\n            case 'nextPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage + 1);\n                break;\n        }\n        this.parent.trigger(events.contextMenuClick, args);\n    };\n    ContextMenu.prototype.contextMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.updateItemStatus();\n        }\n    };\n    ContextMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ContextMenu.prototype.updateItemStatus = function () {\n        this.contextMenu.showItems(this.hiddenItems);\n        this.contextMenu.enableItems(this.disableItems);\n        this.hiddenItems = [];\n        this.disableItems = [];\n        this.isOpen = false;\n    };\n    ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n        var changedRecords = 'changedRecords';\n        var addedRecords = 'addedRecords';\n        var deletedRecords = 'deletedRecords';\n        var closestGrid = closest(args.event.target, '.e-grid');\n        if (args.event && closestGrid && closestGrid !== this.parent.element) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + menuClass.groupHeader)\n            || closest(args.event.target, '.' + menuClass.touchPop))) {\n            args.cancel = true;\n        }\n        else {\n            this.targetColumn = this.getColumn(args.event);\n            this.selectRow(args.event);\n            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var key = this.getKeyFromId(item.id);\n                var dItem = this.defaultItems[key];\n                if (this.getDefaultItems().indexOf(key) !== -1) {\n                    if (this.ensureDisabledStatus(key)) {\n                        this.disableItems.push(item.text);\n                    }\n                    if (args.event && this.ensureTarget(args.event.target, menuClass.edit)) {\n                        if (key !== 'save' && key !== 'cancel') {\n                            this.hiddenItems.push(item.text);\n                        }\n                    }\n                    else if (this.parent.editSettings.mode === 'batch' && ((closest(args.event.target, '.e-gridform')) ||\n                        this.parent.editModule.getBatchChanges()[changedRecords].length ||\n                        this.parent.editModule.getBatchChanges()[addedRecords].length ||\n                        this.parent.editModule.getBatchChanges()[deletedRecords].length) && (key === 'save' || key === 'cancel')) {\n                        continue;\n                    }\n                    else if (isNullOrUndefined(args.parentItem) && args.event\n                        && !this.ensureTarget(args.event.target, dItem.target)) {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (item.target && args.event &&\n                    !this.ensureTarget(args.event.target, item.target)) {\n                    this.hiddenItems.push(item.text);\n                }\n            }\n            this.contextMenu.enableItems(this.disableItems, false);\n            this.contextMenu.hideItems(this.hiddenItems);\n            this.eventArgs = args.event;\n            this.parent.trigger(events.contextMenuOpen, args);\n            if (this.hiddenItems.length === args.items.length) {\n                this.updateItemStatus();\n                args.cancel = true;\n            }\n        }\n    };\n    ContextMenu.prototype.ensureTarget = function (targetElement, selector) {\n        var target = targetElement;\n        if (selector === menuClass.header || selector === menuClass.content) {\n            target = parentsUntil(closest(targetElement, '.e-table'), selector.substr(1, selector.length));\n        }\n        else {\n            target = closest(targetElement, selector);\n        }\n        return target && parentsUntil(target, 'e-grid') === this.parent.element ? true : false;\n    };\n    ContextMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'autoFitAll':\n            case 'autoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n                    status = true;\n                }\n                break;\n            case 'ungroup':\n                if (!this.parent.allowGrouping || !this.parent.ensureModuleInjected(Group)\n                    || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'edit':\n            case 'delete':\n            case 'save':\n            case 'cancel':\n                if (!this.parent.editModule) {\n                    status = true;\n                }\n                break;\n            case 'copy':\n                if (this.parent.getSelectedRowIndexes().length === 0) {\n                    status = true;\n                }\n                break;\n            case 'export':\n                if ((!this.parent.allowExcelExport || !this.parent.excelExport) ||\n                    !this.parent.ensureModuleInjected(PdfExport) && !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'pdfExport':\n                if (!(this.parent.allowPdfExport) || !this.parent.ensureModuleInjected(PdfExport)) {\n                    status = true;\n                }\n                break;\n            case 'excelExport':\n            case 'csvExport':\n                if (!(this.parent.allowExcelExport) || !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'sortAscending':\n            case 'sortDescending':\n                if ((!this.parent.allowSorting) || !this.parent.ensureModuleInjected(Sort)) {\n                    status = true;\n                }\n                else if (this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    this.parent.sortSettings.columns.forEach(function (element) {\n                        if (element.field === _this.targetColumn.field\n                            && element.direction === item.replace('sort', '').toLocaleLowerCase()) {\n                            status = true;\n                        }\n                    });\n                }\n                break;\n            case 'firstPage':\n            case 'prevPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === 1)) {\n                    status = true;\n                }\n                break;\n            case 'lastPage':\n            case 'nextPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === this.getLastPage())) {\n                    status = true;\n                }\n                break;\n        }\n        return status;\n    };\n    /**\n     * Gets the context menu of grid.\n     * @return {Element}\n     */\n    ContextMenu.prototype.getContextMenu = function () {\n        return this.element;\n    };\n    /**\n     * To destroy the Context menu.\n     * @method destroy\n     * @return {void}\n     */\n    ContextMenu.prototype.destroy = function () {\n        this.contextMenu.destroy();\n        remove(this.element);\n        this.removeEventListener();\n    };\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextMenu';\n    };\n    ContextMenu.prototype.generateID = function (item) {\n        return this.gridID + '_cmenu_' + item;\n    };\n    ContextMenu.prototype.getKeyFromId = function (id) {\n        return id.replace(this.gridID + '_cmenu_', '');\n    };\n    ContextMenu.prototype.buildDefaultItems = function (item) {\n        var menuItem;\n        switch (item) {\n            case 'autoFitAll':\n            case 'autoFit':\n                menuItem = { target: menuClass.header };\n                break;\n            case 'group':\n                menuItem = { target: menuClass.header, iconCss: menuClass.group };\n                break;\n            case 'ungroup':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ungroup };\n                break;\n            case 'edit':\n                menuItem = { target: menuClass.content, iconCss: menuClass.editIcon };\n                break;\n            case 'delete':\n                menuItem = { target: menuClass.content, iconCss: menuClass.delete };\n                break;\n            case 'save':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.save };\n                break;\n            case 'cancel':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.cancel };\n                break;\n            case 'copy':\n                menuItem = { target: menuClass.content, iconCss: menuClass.copy };\n                break;\n            case 'export':\n                menuItem = { target: menuClass.content };\n                break;\n            case 'pdfExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.pdf };\n                break;\n            case 'excelExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.excel };\n                break;\n            case 'csvExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.csv };\n                break;\n            case 'sortAscending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ascending };\n                break;\n            case 'sortDescending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.descending };\n                break;\n            case 'firstPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.fPage };\n                break;\n            case 'prevPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.pPage };\n                break;\n            case 'lastPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.lPage };\n                break;\n            case 'nextPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.nPage };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n        };\n        return this.defaultItems[item];\n    };\n    ContextMenu.prototype.getDefaultItems = function () {\n        return ['autoFitAll', 'autoFit',\n            'group', 'ungroup', 'edit', 'delete', 'save', 'cancel', 'copy', 'export',\n            'pdfExport', 'excelExport', 'csvExport', 'sortAscending', 'sortDescending',\n            'firstPage', 'prevPage', 'lastPage', 'nextPage'];\n    };\n    ContextMenu.prototype.setLocaleKey = function () {\n        return {\n            'autoFitAll': 'autoFitAll',\n            'autoFit': 'autoFit',\n            'copy': 'Copy',\n            'group': 'Group',\n            'ungroup': 'Ungroup',\n            'edit': 'EditRecord',\n            'delete': 'DeleteRecord',\n            'save': 'Save',\n            'cancel': 'CancelButton',\n            'pdfExport': 'Pdfexport',\n            'excelExport': 'Excelexport',\n            'csvExport': 'Csvexport',\n            'export': 'Export',\n            'sortAscending': 'SortAscending',\n            'sortDescending': 'SortDescending',\n            'firstPage': 'FirstPage',\n            'lastPage': 'LastPage',\n            'prevPage': 'PreviousPage',\n            'nextPage': 'NextPage'\n        };\n    };\n    ContextMenu.prototype.getColumn = function (e) {\n        var cell = closest(e.target, 'th.e-headercell');\n        if (cell) {\n            var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ContextMenu.prototype.selectRow = function (e) {\n        this.cell = e.target;\n        this.row = closest(e.target, 'tr.e-row');\n        if (this.row) {\n            this.parent.selectRow(this.parent.getDataRows().indexOf(this.row));\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { RowModelGenerator } from '../services/row-model-generator';\n/**\n * FreezeRowModelGenerator is used to generate grid data rows with freeze row and column.\n * @hidden\n */\nvar FreezeRowModelGenerator = /** @class */ (function () {\n    function FreezeRowModelGenerator(parent) {\n        this.isFrzLoad = 1;\n        this.parent = parent;\n        this.rowModelGenerator = new RowModelGenerator(this.parent);\n    }\n    FreezeRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var row = this.rowModelGenerator.generateRows(data, notifyArgs);\n        if (this.parent.frozenColumns) {\n            for (var i = 0, len = row.length; i < len; i++) {\n                if (this.isFrzLoad % 2 === 0) {\n                    row[i].cells = row[i].cells.slice(this.parent.frozenColumns, row[i].cells.length);\n                }\n                else {\n                    row[i].cells = row[i].cells.slice(0, this.parent.frozenColumns);\n                }\n            }\n        }\n        this.isFrzLoad++;\n        return row;\n    };\n    return FreezeRowModelGenerator;\n}());\nexport { FreezeRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, remove } from '@syncfusion/ej2-base';\nimport { HeaderRender } from './header-renderer';\nimport { ContentRender } from './content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\n/**\n * Freeze module is used to render grid content with frozen rows and columns\n * @hidden\n */\nvar FreezeContentRender = /** @class */ (function (_super) {\n    __extends(FreezeContentRender, _super);\n    function FreezeContentRender(parent, locator) {\n        return _super.call(this, parent, locator) || this;\n    }\n    FreezeContentRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        if (this.parent.frozenColumns) {\n            var fDiv = createElement('div', { className: 'e-frozencontent' });\n            var mDiv = createElement('div', { className: 'e-movablecontent' });\n            this.getPanel().firstChild.appendChild(fDiv);\n            this.getPanel().firstChild.appendChild(mDiv);\n            this.setFrozenContent(fDiv);\n            this.setMovableContent(mDiv);\n        }\n    };\n    FreezeContentRender.prototype.renderEmpty = function (tbody) {\n        _super.prototype.renderEmpty.call(this, tbody);\n        if (this.parent.frozenColumns) {\n            this.getMovableContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n            if (this.parent.frozenRows) {\n                this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n                this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n            }\n        }\n        else if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('tbody').innerHTML = '';\n        }\n    };\n    FreezeContentRender.prototype.setFrozenContent = function (ele) {\n        this.frozenContent = ele;\n    };\n    FreezeContentRender.prototype.setMovableContent = function (ele) {\n        this.movableContent = ele;\n    };\n    FreezeContentRender.prototype.getFrozenContent = function () {\n        return this.frozenContent;\n    };\n    FreezeContentRender.prototype.getMovableContent = function () {\n        return this.movableContent;\n    };\n    FreezeContentRender.prototype.getModelGenerator = function () {\n        return new FreezeRowModelGenerator(this.parent);\n    };\n    FreezeContentRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        if (this.parent.frozenColumns) {\n            this.getFrozenContent().appendChild(this.getTable());\n            var mTbl = this.getTable().cloneNode(true);\n            this.getMovableContent().appendChild(mTbl);\n        }\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().firstChild.classList.add('e-frozenhdrcont');\n        }\n    };\n    return FreezeContentRender;\n}(ContentRender));\nexport { FreezeContentRender };\nvar FreezeRender = /** @class */ (function (_super) {\n    __extends(FreezeRender, _super);\n    function FreezeRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeRender.prototype.addEventListener = function () {\n        this.parent.on(events.freezeRender, this.refreshFreeze, this);\n    };\n    FreezeRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        this.rfshMovable();\n    };\n    FreezeRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = createElement('div', { className: 'e-frozenheader' });\n        var mDiv = createElement('div', { className: 'e-movableheader' });\n        this.getPanel().firstChild.appendChild(fDiv);\n        this.getPanel().firstChild.appendChild(mDiv);\n        this.setFrozenHeader(fDiv);\n        this.setMovableHeader(mDiv);\n    };\n    FreezeRender.prototype.refreshUI = function () {\n        this.getMovableHeader().innerHTML = '';\n        _super.prototype.refreshUI.call(this);\n        this.rfshMovable();\n        var mTable = this.getMovableHeader().querySelector('table');\n        remove(this.getMovableHeader().querySelector('colgroup'));\n        mTable.insertBefore(this.renderMovable(this.getFrozenHeader().querySelector('colgroup')), mTable.querySelector('thead'));\n    };\n    FreezeRender.prototype.rfshMovable = function () {\n        this.getFrozenHeader().appendChild(this.getTable());\n        this.getMovableHeader().appendChild(this.createTable());\n        this.refreshFreeze({ case: 'filter' });\n        this.parent.notify(events.freezeRefresh, {});\n    };\n    FreezeRender.prototype.refreshFreeze = function (obj) {\n        if (obj.case === 'filter') {\n            var filterRow = this.getTable().querySelector('.e-filterbar');\n            if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n                this.getMovableHeader().querySelector('thead')\n                    .appendChild(this.renderMovable(filterRow));\n            }\n        }\n        else if (obj.case === 'textwrap') {\n            var fRows = void 0;\n            var mRows = void 0;\n            var wrapMode = this.parent.textWrapSettings.wrapMode;\n            if (wrapMode !== 'header' || obj.isModeChg) {\n                fRows = this.parent.getContent()\n                    .querySelector('.e-frozencontent').querySelectorAll('tr');\n                mRows = this.parent.getContent()\n                    .querySelector('.e-movablecontent').querySelectorAll('tr');\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, true);\n            }\n            if (this.parent.frozenRows) {\n                if (wrapMode === 'content' && this.parent.allowTextWrap) {\n                    this.parent.getHeaderContent().firstChild.classList.add('e-wrap');\n                }\n                else {\n                    this.parent.getHeaderContent().firstChild.classList.remove('e-wrap');\n                }\n                if (wrapMode === 'both' || obj.isModeChg) {\n                    fRows = this.getFrozenHeader().querySelectorAll('tr');\n                    mRows = this.getMovableHeader().querySelectorAll('tr');\n                }\n                else {\n                    fRows = this.getFrozenHeader().querySelector(wrapMode === 'content' ? 'tbody' : 'thead')\n                        .querySelectorAll('tr');\n                    mRows = this.getMovableHeader().querySelector(wrapMode === 'content' ? 'tbody' : 'thead')\n                        .querySelectorAll('tr');\n                }\n                this.setWrapHeight(fRows, mRows, obj.isModeChg);\n            }\n        }\n    };\n    FreezeRender.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset) {\n        var fRowHgt;\n        var mRowHgt;\n        var isWrap = this.parent.allowTextWrap;\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var tHead = this.parent.getHeaderContent().querySelector('thead');\n        var tBody = this.parent.getHeaderContent().querySelector('tbody');\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            if (isModeChg && ((wrapMode === 'header' && isContReset) || ((wrapMode === 'content' && tHead.contains(fRows[i]))\n                || (wrapMode === 'header' && tBody.contains(fRows[i]))))) {\n                fRows[i].style.height = null;\n                mRows[i].style.height = null;\n            }\n            fRowHgt = fRows[i].offsetHeight;\n            mRowHgt = mRows[i].offsetHeight;\n            if ((isWrap && fRowHgt < mRowHgt) || (!isWrap && fRowHgt > mRowHgt)) {\n                fRows[i].style.height = mRowHgt + 'px';\n            }\n            else if ((isWrap && fRowHgt > mRowHgt) || (!isWrap && fRowHgt < mRowHgt)) {\n                mRows[i].style.height = fRowHgt + 'px';\n            }\n        }\n    };\n    FreezeRender.prototype.setFrozenHeader = function (ele) {\n        this.frozenHeader = ele;\n    };\n    FreezeRender.prototype.setMovableHeader = function (ele) {\n        this.movableHeader = ele;\n    };\n    FreezeRender.prototype.getFrozenHeader = function () {\n        return this.frozenHeader;\n    };\n    FreezeRender.prototype.getMovableHeader = function () {\n        return this.movableHeader;\n    };\n    FreezeRender.prototype.renderMovable = function (ele) {\n        var mEle = ele.cloneNode(true);\n        for (var i = 0; i < this.parent.frozenColumns; i++) {\n            mEle.removeChild(mEle.children[0]);\n        }\n        for (var i = this.parent.frozenColumns, len = ele.childElementCount; i < len; i++) {\n            ele.removeChild(ele.children[ele.childElementCount - 1]);\n        }\n        return mEle;\n    };\n    return FreezeRender;\n}(HeaderRender));\nexport { FreezeRender };\n","import * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { FreezeRender, FreezeContentRender } from '../renderer/freeze-renderer';\n/**\n * `Freeze` module is used to handle Frozen rows and columns.\n * @hidden\n */\nvar Freeze = /** @class */ (function () {\n    function Freeze(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Freeze.prototype.getModuleName = function () {\n        return 'freeze';\n    };\n    Freeze.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n    };\n    Freeze.prototype.instantiateRenderer = function () {\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.frozenColumns) {\n            renderer.addRenderer(RenderType.Header, new FreezeRender(this.parent, this.locator));\n            renderer.addRenderer(RenderType.Content, new FreezeContentRender(this.parent, this.locator));\n        }\n        if (this.parent.frozenRows && !this.parent.frozenColumns) {\n            renderer.addRenderer(RenderType.Content, new FreezeContentRender(this.parent, this.locator));\n        }\n    };\n    Freeze.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n    };\n    Freeze.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Freeze;\n}());\nexport { Freeze };\n","import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { createElement, remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\n/**\n * 'column menu module used to handle column menu actions'\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.add(ele, 'mousedown', _this.columnMenuHandlerDown, _this);\n        });\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.remove(ele, 'mousedown', _this.columnMenuHandlerDown);\n        });\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        this.columnMenu.destroy();\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        remove(this.element);\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            if (!this.isOpen) {\n                this.openColumnMenu(e);\n            }\n            else if (this.isOpen && this.headerCell !== this.getHeaderCell(e)) {\n                this.columnMenu.close();\n                this.openColumnMenu(e);\n            }\n            else {\n                this.columnMenu.close();\n            }\n        }\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (Browser.isDevice) {\n            pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n            pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n        }\n        else {\n            if (this.parent.enableRtl) {\n                pos = calculatePosition(this.headerCell, 'left', 'bottom');\n            }\n            else {\n                pos = calculatePosition(this.headerCell, 'right', 'bottom');\n                pos.left -= elePos.width;\n            }\n        }\n        this.columnMenu.open(pos.top, pos.left);\n        e.preventDefault();\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n    };\n    ColumnMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        if (this.isChooserItem(args.item)) {\n            var field = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.getColumnByField(field);\n            var check = createCheckBox(false, {\n                label: args.item.text,\n                checked: column.visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'filter') {\n            args.element.appendChild(createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'columnChooser' &&\n            closest(args.event.target, '.e-menu-parent')) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (parentsUntil(args.event.target, 'e-popup')))) {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[key];\n            if (this.getDefaultItems().indexOf(key) !== -1) {\n                if (this.ensureDisabledStatus(key) && !dItem.hide) {\n                    this.disableItems.push(item.text);\n                }\n                else if (item.hide) {\n                    this.hiddenItems.push(item.text);\n                }\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n                    status = true;\n                }\n                break;\n            case 'autoFitAll':\n            case 'autoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'sortDescending':\n            case 'sortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    this.parent.sortSettings.columns.forEach(function (ele) {\n                        if (ele.field === _this.targetColumn.field\n                            && ele.direction === item.replace('sort', '').toLocaleLowerCase()) {\n                            status = true;\n                        }\n                    });\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort)) {\n                    status = true;\n                }\n                break;\n            case 'filter':\n                status = !(this.parent.allowFiltering && (this.parent.filterSettings.type !== 'filterbar')\n                    && this.parent.ensureModuleInjected(Filter));\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'columnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'autoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'autoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'sortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'ascending');\n                break;\n            case 'sortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'descending');\n                break;\n            case 'columnChooser':\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumn(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumn(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['autoFitAll', 'autoFit', 'sortAscending', 'sortDescending', 'group', 'ungroup', 'columnChooser', 'filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'columnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'sortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'sortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n        };\n        return this.defaultItems[item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        return {\n            'autoFitAll': 'autoFitAll',\n            'autoFit': 'autoFit',\n            'group': 'Group',\n            'ungroup': 'Ungroup',\n            'sortAscending': 'SortAscending',\n            'sortDescending': 'SortDescending',\n            'columnChooser': 'Columnchooser',\n            'filter': 'FilterMenu'\n        };\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'filter';\n        if (!this.defaultItems[filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function (e) {\n        var filterPopup = this.getFilterPop();\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('autoFitAll');\n            items.push('autoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('group');\n            items.push('ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('sortAscending');\n            items.push('sortDescending');\n        }\n        items.push('columnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'filterbar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        return this.parent.element.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n"],"names":["doesImplementInterface","target","checkFor","prototype","valueAccessor","field","data","column","isNullOrUndefined","getValue","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","e","iterateArrayOrObject","collection","predicate","result","i","len","length","pred","push","templateCompiler","template","document","querySelectorAll","baseTemplateComplier","querySelector","innerHTML","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","baseExtend","setStyleAttribute","addClass","attributes","extend","copied","first","second","exclude","moved","Object","keys","forEach","value","index","indexOf","prepareColumns","columns","autoWidth","c","Column","headerText","width","visible","setCssInGridPopUp","popUp","className","isBottomTail","popUpSpan","position","parentElement","getBoundingClientRect","targetPosition","style","display","clientY","changedTouches","offsetHeight","top","left","popup","offsetWidth","x","getPosition","right","getPopupLeftPosition","getActualProperties","obj","ChildProperty","parentsUntil","elem","selector","isID","parent","id","classList","contains","getElementIndex","element","elements","isEqualNode","inArray","getActualPropFromColl","coll","hasOwnProperty","properties","removeElement","slice","call","remove","clientX","y","getUid","prefix","uid","appendChildren","children","appendChild","parents","calculateAggregate","type","context","customAggregate","DataUtil","aggregates","getScrollBarWidth","scrollWidth","divNode","createElement","cssText","body","clientWidth","removeChild","getRowHeight","undefined","rowHeight","table","styles","rect","Math","ceil","height","isEditable","col","row","isOldRow","isIdentity","isPrimaryKey","allowEditing","isActionPrevent","inst","dlg","editSettings","mode","showConfirmDialog","wrap","action","Array","add","changeButtonType","_i","elements_1","button","setFormatter","serviceLocator","fmtr","getService","getFormatFunction","skeleton","format","setParser","getParserFunction","addRemoveActiveClasses","cells","args","arguments","setAttribute","removeAttribute","distinctStringValues","temp","res","toString","getFilterMenuPostion","dialogObj","elementVisible","dlgWidth","newpos","calculateRelativeBasedPosition","leftPos","getZIndexCalcualtion","zIndex","toogleCheckbox","span","createCboxWithWrap","div","removeAddCboxClasses","checked","removeClass","setStateAndProperties","attribute","summaryIterator","callback","ValueFormatter","cultureName","this","intl","Internationalization","culture","getDateFormat","getNumberFormat","getDateParser","getNumberParser","fromView","toView","setCulture","options","allowSorting","allowResizing","allowFiltering","allowGrouping","showColumnMenu","enableGroupByFormat","filter","showInColumnChooser","merge","valueFormatter","commands","textAlign","commandsTemplate","templateFn","itemTemplate","fltrTemplateFn","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getFilterItemTemplate","getDomSetter","disableHtmlEncode","queryCellInfo","actionBegin","actionComplete","actionFailure","dataBound","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDragStart","columnDrag","columnDrop","rowDragStart","rowDrag","rowDrop","printComplete","detailDataBound","toolbarClick","batchAdd","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","recordDoubleClick","beforeDataBound","beforeOpenColumnChooser","checkBoxChange","filterChoiceRequest","filterAfterOpen","filterBeforeOpen","initialLoad","initialEnd","dataReady","contentReady","uiUpdate","onEmpty","inBoundModelChanged","modelChanged","colGroupRefresh","headerRefreshed","pageComplete","sortComplete","filterComplete","searchComplete","reorderComplete","rowDragAndDropComplete","groupComplete","ungroupComplete","rowSelectionComplete","cellSelectionComplete","beforeCellFocused","cellFocused","keyPressed","click","destroy","columnVisibilityChanged","scroll","columnWidthChanged","columnPositionChanged","rowsAdded","rowsRemoved","columnDragStop","headerDrop","dataSourceModified","refreshComplete","refreshVirtualBlock","dblclick","toolbarRefresh","bulkSave","autoCol","tooltipDestroy","updateData","saveComplete","deleteComplete","preventBatch","dialogDestroy","crudAction","addDeleteAction","destroyForm","doubleTap","beforeExcelExport","excelExportComplete","excelQueryCellInfo","beforePdfExport","pdfExportComplete","pdfQueryCellInfo","contextMenuClick","freezeRefresh","freezeRender","contextMenuOpen","columnMenuClick","columnMenuOpen","filterOpen","filterDialogCreated","filterMenuClose","CellType","RenderType","ToolbarItem","CheckBoxFilter","filterSettings","defaultConstants","Search","OK","Cancel","Filter","Clear","SelectAll","Blanks","True","False","NoResult","values","cBoxTrue","createCheckBox","label","cBoxFalse","locale","initLocale","insertBefore","attrs","firstChild","enableRtl","constants","localeObj","L10n","getModuleName","closeDialog","wireEvents","EventHandler","clickHandler","searchBoxKeyUp","unWireEvents","searchBoxClick","sInput","refreshCheckboxes","updateSearchIcon","focus","sIcon","getLocalizedLabel","key","getConstant","updateDataSource","dataSource","DataManager","updateModel","filteredColumns","sortedColumns","sortSettings","query","Query","allowCaseSensitive","isFiltered","localizedStrings","getAndSetChkElem","sBox","hideSearchbox","placeholder","searchBox","Input","createInput","floatLabelType","spinner","cBox","showDialog","requestType","events.filterBeforeOpen","filterModel","columnName","columnType","trigger","events.actionBegin","Dialog","content","close","bind","animationSettings","effect","buttons","btnClick","buttonModel","isExcel","cssClass","isPrimary","created","dialogCreated","open","dialogOpen","appendTo","maxHeight","show","createSpinner","showSpinner","getAllData","Browser","isDevice","X","Y","notify","events.filterDialogCreated","openDialog","isDestroyed","events.filterMenuClose","clearFilter","handler","text","textContent","toLowerCase","fltrBtnHandler","optr","caseSen","defaults","operator","matchcase","isNotEqual","itemsCnt","fObj","getAttribute","setDateObject","initiateFilter","fColl","firstVal","ejpredicate","Predicate","matchCase","j","filterCollection","or","val","clone","parsed","parseFloat","where","processDataSource","getPredicateFromCols","predicates","getPredicate","_a","_this","requiresCount","executeQuery","then","dataSuccess","fullData","cols","executeLocal","getDistinct","filteredData","records","events.filterAfterOpen","events.actionComplete","isInitial","events.filterChoiceRequest","updateResult","createFilterItems","result_1","selectAll","updateAllCBoxes","updateIndeterminatenBtn","cBoxes_1","createCheckbox","cloneNode","cnt","selected","btn","ej2_instances","disabled","cBoxes","isColFiltered","getCheckedState","hideSpinner","json","lookup","setValue","group","sort","fnAscending","filterObject","prevObj","nextObj","Date","prevDate","setDate","getDate","nextDate","predicateSt","predicateEnd","and","generatePredicate","updateDateFilter","getDatePredicate","getCaseValue","p","ignoreCase","Data","initDataManager","on","events.rowsAdded","addRows","events.rowsRemoved","removeRows","events.dataSourceModified","events.destroy","events.updateData","crudActions","events.addDeleteAction","getData","gObj","dataManager","generateQuery","skipPage","excelPredicate","_b","columns_1","sType","getColumnByField","searchSettings","sSettings","fields","getColumnFieldNames","search","aggregate","sortGrp","groupSettings","sortBy","direction","allowPaging","enableVirtualization","pageSettings","currentPage","max","pageCount","pageSize","page","isGrpFmt","formatGroupColumn","getKey","foreignKeyData","getPrimaryKeyFieldNames","insert","ready","deferred_1","Deferred","resolve","catch","reject","promise","date","getDay","getHours","getMinutes","getSeconds","getMilliseconds","update","events.crudAction","saveChanges","changes","isRemote","offline","url","datePredicate","splice","toIndex","off","Row","Cell","isSpanned","CellMergeRender","render","cellArgs","td","cellRenderer","getCellRenderer","cellType","cellSpan","colSpan","spanText","aria-colSpan","enableColumnVirtualization","containsKey","backupMergeCells","fName","setMergeCells","generteKey","fname","splitKey","split","getMergeCells","mergeCells","updateVirtualCells","rows","mCells","columnIndex","getIndexFromAllColumns","vColumnIndices","getColumnIndexesInView","rows_1","getVisibleColumns","item","RowRenderer","role","rowTemplate","refreshRow","refresh","isChanged","refreshMergeCells","tr","cells_1","cell","rowArgs","attrCopy","isDataRow","isSelected","getSelectedRowIndexes","buildAttributeFromRow","addAttributes","cellRendererFact","attr","prop","classes","isAltRow","rowSpan","class","RowModelGenerator","generateRows","startIndex","generateRow","ensureColumns","detailTemplate","childGrid","generateCell","DetailExpand","indent","enableAltRow","concat","generateCells","tmp","getColumns","dummy","CommandColumn","rowId","oIndex","opt","isDataCell","isTemplate","rowID","getColumnIndexByField","refreshRows","input","__extends","extendStatics","setPrototypeOf","__proto__","d","b","__","constructor","create","SummaryModelGenerator","footerTemplate","groupFooterTemplate","groupCaptionTemplate","columnSelector","apply","currentViewData","buildSummaryData","getGeneratedRow","level","summaryRow","raw","indents","getIndentByLevel","indentLength","getGeneratedCell","getCellType","Indent","some","sColumn","scolumn","single","setTemplate","map","types","helper","a","disp","Summary","GroupSummaryModelGenerator","_super","v","indx","GroupSummary","CaptionSummaryModelGenerator","reduce","prev","cur","isEmpty","CaptionSummary","GroupModelGenerator","summaryModelGen","captionModelGen","getGroupedRecords","items","GroupGuid","generateDataRows","generateCaptionRow","getCaptionRowCells","visibles","indexes","groupedLen","generateIndentCell","Expand","captionCells","cIndex_1","wFlag","tmpFlag","GroupCaption","GroupCaptionEmpty","unshift","cRow","ContentRender","isLoaded","drop","events.columnDrop","droppedElement","rafCallback","ariaService","setBusy","getPanel","events.contentReady","events.dataBound","allowTextWrap","events.freezeRender","case","generator","getModelGenerator","events.columnVisibilityChanged","setVisible","events.colGroupRefresh","renderPanel","innerDiv","setOptions","busy","setPanel","renderTable","contentDiv","createContentTable","setTable","getTable","multiselectable","selectionSettings","initializeContentDrop","cellspacing","setColGroup","getColGroup","refreshContentRows","hdrTbody","frag","createDocumentFragment","hdrfrag","rowElements","modelData","idx","fCont","mCont","cont","frozenColumns","tbody","getRowTemplate","isTR","nodeName","frozenRows","colcount","getHeaderContent","getHeaderTable","Number","overflowY","childElementCount","overflow","appendContent","contentPanel","panel","contentTable","getRows","getRowElements","setRowElements","colgroup","colGroup","testRow","r","clen","getNormalizedColumnIndex","canSkip","displayVal","childNodes","Droppable","getContent","accept","renderEmpty","setSelection","set","clearAll","getRowByIndex","getDataRows","HeaderRender","sender","parentEle","allowReordering","visualElement","headercelldiv","getColumnByUid","headerTemplate","firstElementChild","lineHeight","dragStart","events.columnDragStart","event","drag","closest","getClosest","cloneElement","events.columnDrag","dragStop","cancel","events.columnDragStop","events.headerDrop","widthService","events.columnPositionChanged","refreshUI","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","events.headerRefreshed","headerPanel","headerTable","tHead","createTable","bodyCell","findHeaderRow","createHeaderContent","thead","rowBody","Header","len_1","updateColGroup","colHeader","rowRenderer","headerRow","colDepth","getObjDepth","getHeaderCells","len_2","HeaderIndent","DetailHeader","appendCells","isFirstObj","isFirstCol","isLastCol","lastCol","getCellCnt","StackedHeader","getColumnIndexByUid","rowIndex","colIndex","setWidthToColumns","gCells","textWrapSettings","wrapMode","depth","checkDepth","showDropArea","headerRows","Draggable","dragTarget","distance","abort","CellRenderer","locator","tabindex","rowChkBox","localizer","formatter","getGui","evaluate","innerText","invokeFormatter","refreshCell","refreshTD","innerHtml","displayAsCheckBox","localeStr","fromFormatter","appendHtml","persistSelection","checkWrap","setAttributes","CheckBox","isNaN","parseInt","property","buildAttributeFromCell","clipMode","AriaService","name","config","setExpand","expand","setSort","isBusy","invalid","setGrabbed","isGrabbed","grabbed","setDropTarget","isTarget","dropeffect","haspopup","HeaderCellRenderer","hTxtEle","sortEle","gui","chkAllBox","fltrMenuEle","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","editType","checkAllWrap","matchFlColumns","count","extendPrepareHeader","headerTextAlign","alignment","matchFilteredColumns","StackedHeaderCellRenderer","toolTip","IndentCellRenderer","GroupCaptionCellRenderer","captionTemplate","GroupCaptionEmptyCellRenderer","ExpandCellRenderer","HeaderIndentCellRenderer","DetailHeaderIndentCellRenderer","DetailExpandCellRenderer","aria-expanded","Render","l10n","renderer","addEventListener","headerRenderer","getRenderer","contentRenderer","Content","emptyRow","refreshDataManager","isEdit","disablePageWiseAggregates","validateGroupRecords","dataManagerSuccess","dataManagerFailure","sendBulkRequest","dmSuccess","dmFailure","renderEmptyRow","isTrigger","colspan","events.onEmpty","updateColumnType","record","isColTypeDef","events.beforeDataBound","events.tooltipDestroy","dataBind","updatesOnInitialRender","getCurrentViewRecords","events.dataReady","alert","events.actionFailure","error","buildColumns","events.autoCol","instantiateRenderer","addRenderer","cellrender","addCellRenderer","events.initialLoad","events.modelChanged","events.refreshComplete","events.bulkSave","Promise","group0","groupN","addWhere","curFilter","newQuery","rPredicate","deferred","updateGroupInfo","current","untouched","dm","array","uGroup","itemGroup","uGroupItem","CellRendererFactory","cellRenderMap","getEnumValue","ServiceLocator","services","register","RendererFactory","rendererMap","rName","ColumnWidthService","setColumnWidth","module","cWidth","getWidth","setWidth","setWidthToTable","headerCol","header","getContentTable","fWidth","formatUnit","mHdr","contentCol","edit","getSiblingsHeight","getHeightFromDirection","sibling","minWidth","maxWidth","getTableWidth","tWidth","freezeWidth","colGrp","mColGrp","select","FocusStrategy","currentInfo","oneTime","forget","skipFocus","prevIndexes","focusCheck","onFocus","setActive","matrix","get","validator","onClick","force","isContent","beforeArgs","byKey","byClick","clickArgs","event.beforeCellFocused","onKeyPress","skipOn","keyArgs","bValue","outline","swap","jump","isHeader","rowInitVal","preventDefault","activeElement","getFocusedElement","elementToFocus","active","setFocusedElement","setTimeout","removeFocus","addFocus","getFocusInfo","tabIndex","info","isFocused","event.cellFocused","isJump","container","getInfo","cellIndex","refreshMatrix","ContentFocus","HeaderFocus","cFocus","generate","event.keyPressed","event.click","event.contentReady","event.headerRefreshed","restoreFocus","evt","clearOutline","event.batchAdd","event.batchDelete","event.detailDataBound","event.onEmpty","removeEventListener","getPrevIndexes","forgetPrevious","Matrix","allow","min","navigator","inValid","vector","moveTo","rIndex","cIndex","keyActions","rightArrow","tab","leftArrow","shiftTab","upArrow","downArrow","shiftUp","shiftDown","shiftRight","shiftLeft","enter","shiftEnter","indexesByKey","home","end","ctrlHome","ctrlEnd","getCurrentFromAction","isPresent","shouldFocusChange","rN","cN","oRowIndex","oCellIndex","_c","getFocusable","child","isDirty","isData","isSelectable","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","PageSettings","Property","Selection","selectedRowIndexes","selectedRowCellIndexes","selectedRecords","preventFocus","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","selectedRowState","isBatchEdit","prevKey","totalRecordsCount","isChkAll","isUnChkAll","chkAllCollec","isCheckedOnAdd","persistSelectedData","selectionRequest","factory","initializeSelection","mouseDownHandler","onActionBegin","onActionComplete","hidePopUp","clearSelection","isEditing","editModule","formObj","validate","selectRow","isToggle","selectedRow","selectData","isRowType","isRowSelected","hasAttribute","prevRowIndex","isCtrlPressed","isShiftPressed","previousRow","previousRowIndex","events.rowSelecting","clearRow","updateRowSelection","selectedRowIndex","updateRowProps","events.rowSelected","selectRowsByRange","endIndex","selectRows","getCollectionFromIndexes","rowIndexes","selectedData","isSingleSel","prevRow","rowIndexes_1","addRowsToSelection","rowIndexes_2","isUnSelected","rowDeselect","events.rowDeselecting","addRemoveClassesForRow","reverse","clearRowSelection","updatePersistCollection","chkState","rowObj","getRowObjectFromUID","pKey","primaryKey","updateCheckBoxes","chkBox","nextElementSibling","checkedTarget","setCheckAllState","clearCellSelection","row_1","events.rowDeselected","selectCell","isCellType","selectedCell","getCellFromIndex","getColIndex","currentIndex","isCellSelected","isUndefined","prevCIdxs","currentCell","previousRowCellIndex","prevECIdxs","previousRowCell","events.cellSelecting","clearCell","updateCellSelection","updateCellProps","selectedRowCellIndex","events.cellSelected","selectCellsByRange","cellIndexes","stIndex","edIndex","cellSelectionMode","getLastColIndex","addAttribute","selectCells","rowCellIndexes","cellLen","addRowCellIndex","addCellsToSelection","cellIndexes_1","selectedCellIdx","cellDeselect","events.cellDeselecting","events.cellDeselected","m","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","cLen","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","elementFromPoint","offsetLeft","ctrlKey","shiftKey","mouseUpHandler","gridElement","allowRowDragAndDrop","postion","clearSelAfterRefresh","events.initialEnd","events.rowSelectionComplete","events.cellSelectionComplete","events.inBoundModelChanged","onPropertyChanged","events.click","events.cellFocused","onCellFocused","onDataBound","checkBoxSelectionChanged","isCheckColumn","isChkSelection","chkField","chkAllObj","getDataModule","proxy_1","refreshPersistSelection","checkState","editChkBox","checkSelectAllAction","editForm","checkSelectAll","checkBox","state","triggerChkChangeEvent","checkSelect","rowCellSelectionHandler","moveIntoUncheckCollection","events.checkBoxChange","checkedLen","spanEle","popUpClickHandler","chkSelect","checkboxOnly","showPopup","clear","headerAction","applyDownUpKey","applyRightLeftKey","shiftDownKey","applyShiftLeftRightKey","applyHomeEndKey","applyCtrlHomeEndKey","ctrlPlusA","applyUpDown","isAdd","getSelectedRecords","getRowsObject","searchString","events.preventBatch","instance","arg1","events.searchComplete","ShowHide","showBy","batchChanges","getToggleFields","hide","hideBy","showHide","arg2","getKeyBy","Scroll","lastScrollTop","previousValues","oneTimeReady","toolbarModule","toolbar","refreshOverflow","setHeight","mHdrHeight","ensureOverflow","setPadding","getThreshold","cssProps","getCssProperties","border","padding","removePadding","rtl","onContentScroll","scrollTarget","scrollLeft","isFooter","scrollTop","onFreezeContentScroll","onWheelScroll","deltaMode","deltaY","onTouchScroll","pointerType","pageXY","getPointXY","scrollHeight","clientHeight","setPageXY","touches","pageX","pageY","getFooterContent","css","Print","scrollModule","print","isPrinting","printWindow","window","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","printMode","isPagerDisabled","removeColGroup","allowSelection","selectedRows","events.printComplete","groupCaption","colGroups","AggregateColumn","fn","compile","getTemplate","AggregateRow","Collection","Clipboard","copyContent","isSelect","events.keyPressed","keyDownHandler","clipBoardTextArea","readonly","copy","setCopyData","withHeader","getSelection","selectedIndexes","getCopyData","userAgent","match","setSelectionRange","isCell","queryCommandSupported","execCommand","blur","removeAllRanges","SortDescriptor","SortSettings","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","Grid","inViewIndexes","mediaCol","isMediaQuery","isInitialLoad","Component","filterOperators","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Update","Delete","Pdfexport","Excelexport","Wordexport","Csvexport","Save","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","FilterButton","ClearButton","StartsWith","EndsWith","Contains","Equal","NotEqual","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","ChooseDate","EnterValue","Copy","Group","Ungroup","autoFitAll","autoFit","Export","FirstPage","LastPage","PreviousPage","NextPage","SortAscending","SortDescending","EditRecord","DeleteRecord","FilterMenu","Columnchooser","keyConfigs","escape","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusP","delete","f2","ctrlEnter","space","ctrlPlusC","ctrlShiftPlusH","mergePersistGridData","getPersistData","keyEntity","ignoreOnPersist","currentObject","ignoreInArrays","addOnPersist","ignoreOnColumn","ignoreInColumn","requiredModules","modules","member","allowExcelExport","allowPdfExport","isDetail","toolbarTemplate","allowAdding","allowDeleting","extendRequiredModules","isCommandColumn","contextMenuItems","showColumnChooser","preRender","initializeServices","renderModule","getMediaColumns","searchModule","processModel","gridRender","addListener","updateDefaultCursor","gcol","getShowHideService","hideAtMedia","media","matchMedia","mediaQueryUpdate","matches","showHider","refreshMediaCol","eventInitializer","unwireEvents","removeListener","destroyDependentModules","keyboardModule","focusModule","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","events.uiUpdate","enable","rowTemplateFn","detailTemplateFn","headerModule","updateColumnObject","extendedPropertyChange","updateRTL","getToolbar","contextMenuModule","getContextMenu","columnMenuModule","getColumnMenu","updateGridLines","applyTextWrap","removeTextWrap","isModeChg","enableHover","headerRows_1","updateColumnModel","columnModel","inview","vLen","getLocaleConstants","setColumnIndexesInView","setGridHeaderContent","contentModule","setGridContentTable","setGridContent","setGridHeaderTable","footerElement","getElementsByClassName","getFooterContentTable","getPager","gridPager","setGridPager","getRowInfo","ele","rowsObject","rowData","dataRows","getColumnHeaderByIndex","getColumnHeaderByField","getColumnHeaderByUid","getUidByColumnField","columnNames","getDetailTemplate","refreshHeader","getSelectedRows","selectionModule","getSelectedRowCellIndexes","showColumns","hideColumns","goToPage","pageNo","pagerModule","updateExternalMessage","message","sortColumn","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","fieldName","filterOperator","filterValue","actualFilterValue","actualOperator","filterModule","clearFiltering","removeFilteredColsByField","isClearFilterBar","printModule","deleteRecord","fieldname","startEdit","endEdit","closeEdit","addRecord","deleteRow","clipboardModule","recalcIndentWidth","indentWidth","perPixel","events.columnWidthChanged","reorderColumns","fromFName","toFName","reorderModule","autoFitColumns","fieldNames","resizeModule","createColumnchooser","columnChooserModule","renderColumnChooser","valueFormatterService","flag","gCols","sCols","_loop_1","sLen","this_1","showGroupedColumn","parentDetails","parentKeyFieldValue","queryString","rendererFactory","createGridPopUpElement","append","gridLines","updateResizeLines","refreshTooltip","htable","ctable","all","allele","Tooltip","tag","myTableDiv","mySubDiv","myTable","myTr","mytd","mouseClickHandler","focusOutHandler","dblClickHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","dataBoundFunction","isChildGrid","checkEdit","events.recordDoubleClick","events.dblclick","filterClear","localStorage","getItem","dataObj_1","JSON","parse","isProtectedOnChange","_loop_2","this_2","isArray","keys_1","setInjectedModules","injectedModules","refreshColumns","excelExport","exportProperties","isMultipleExport","workbook","excelExportModule","Map","csvExport","pdfExport","pdfDoc","pdfExportModule","groupColumn","groupModule","ungroupColumn","isContextMenuOpen","isOpen","ensureModuleInjected","getInjectedModules","showColumn","hideColumn","Complex","Event","NotifyPropertyChanges","Inject","Sort","contentRefresh","isModelChanged","aria","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","lastSortedCol","isRemove","allowMultiSorting","arg3","removeSortIcons","updateSortedCols","addSortIcons","events.sortComplete","refreshSortIcons","colObj","initiateSort","showPopUp","allowUnsort","enableSortMultiTouch","filterElement","updateAriaAttr","NumericContainer","pagerElement","renderNumericContainer","refreshNumericLinks","updateTotalPages","links","updateLinksHtml","updateStyles","link","pagerObj","aria-label","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","title","PP","NP","next","last","previousPageNo","currentPageSet","totalPages","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPage","prevPageDisabled","replace","lastPage","lastPageDisabled","nextPage","nextPageDisabled","PagerMessage","pageNoMsgElem","pageCountMsgElem","hideMessage","showMessage","str","regx","RegExp","Pager","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","containerModule","pagerMessageModule","enableExternalMessage","checkpagesizes","pagerTemplate","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","checkGoToPage","currentPageChanged","pageSizes","newPageNo","oldPageNo","enableQueryString","updateQueryString","getPagerTemplate","updatedUrl","getUpdatedURL","location","href","history","pushState","path","uri","hash","PagerDropDown","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","defaultValue","dropDownListObject","DropDownList","change","onChange","ExternalMessage","externalMessage","Page","pagerDestroy","gridExtend","dropDownChanged","onSelect","addAriaAttr","isForceCancel","previousPage","keyPressHandler","canSkipAction","el","appendToElement","enableAfterRender","handlers","load","complete","updateLayout","inboundChange","keyPress","events.pageComplete","FilterCellRenderer","filterBarTemplate","Element","templateWrite","write","FlMenuOptrUI","customFltrOperators","customFilterOperators","renderOperatorUI","dlgConetntEle","dlgObj","optrData","customOptr","operators","dropDatasource","selectedValue","dropSelectedVal","optrDiv","optrInput","dropOptr","dropDownOpen","selValue","selectedField","getFlOperator","StringFilterUI","serLocator","actObj","AutoComplete","sortOrder","openPopup","filterType","getOptrInstance","autofill","localizeText","arr","mapObj","filteredValue","read","filterOptr","filterObj","NumberFilterUI","numericTxtObj","NumericTextBox","BooleanFilterUI","dropInstance","ddActionComplete","DateFilterUI","fltrSettings","colFormat","getDatePattern","inputElem","datePickerObj","DatePicker","popupElement","FilterMenuRenderer","fltrObj","colTypes","string","number","boolean","datetime","flMuiObj","renderDlgContent","getElementById","mainDiv","dlgDiv","showCloseIcon","closeOnEscape","filterBtnClick","clearBtnClick","renderFilterUI","writeMethod","renderFlValueUI","valueDiv","instanceofFilterUI","ui","dlgContentEle","flValue","flOptrValue","targ","iconClass","flIcon","ExcelFilter","localeConstants","ClearFilter","NumberFilter","TextFilter","DateFilter","MatchCase","Between","CustomFilter","CustomFilterPlaceHolder","CustomFilterDatePlaceHolder","AND","OR","ShowRowsWhere","getCMenuDS","model","iconCss","separator","unwireExEvents","cmenu","createMenu","isCheckIcon","menu","ul","icon","createMenuElem","iconName","isSubMenu","li","wireExEvents","hoverHandler","clickExHandler","menuItem","destroyCMenu","menuObj","focused","isCMenuOpen","selectedMenu","getExistingPredicate","getSelectedText","menuOptions","selectHandler","onClose","ContextMenu","client","pos","contextRect","getContextBounds","innerHeight","innerWidth","getCMenuYPosition","contextWidth","filterLength","renderDialogue","isModal","overlayClick","removeDialog","createdDialog","removeObjects","datePicker","renderCustomFilter","dlgFields","fieldSet","checkBoxValue","fValue","fOperator","sValue","sOperator","andRadio","getText","firstOperator","firstValue","secondOperator","secondValue","mPredicate","elementID","isFirst","fieldElement","xlfloptr","menuText","getSelectedValue","renderRadioButton","renderMatchCase","radioDiv","frstpredicate","secndpredicate","RadioButton","orRadio","elementId","valueInput","renderAutoComplete","renderNumericTextBox","renderDate","matchCaseDiv","matchCaseInput","inputValue","isRtl","completeAction","mapObject","nextFlMenuOpen","checkbox","excel","fltrDlgDetails","getLocalizedCustomOperators","fltrElem","detail","updateFilterMsg","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","updateSpanClass","keyUpHandler","events.filterComplete","events.freezeRefresh","events.filterOpen","columnMenuFilter","filterIconClickHandler","filterCell","arg4","arg5","arg6","arg7","checkForSkipInput","filterStatusMsg","checkAlreadyColFiltered","isClose","filterDialogOpen","customOperators","displayName","filterHandler","fltrElement","updateCrossIcon","keyCode","processFilter","targetText","previousElementSibling","lastFilterElement","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","stopTimer","startTimer","timer","setInterval","onTimerTick","immediateModeDelay","clearInterval","stringify","templateRead","validateFilterValue","getOperator","substring","charAt","singleOp","multipleOp","=","!","filterCells","fromIndex","filterCells_1","numOptr","stringOperator","numberOperator","dateOperator","datetimeOperator","booleanOperator","gClient","fClient","bottom","datepickerEle","filterIconElement","resizeClassList","root","suppress","cursor","Resize","tapped","isDblClk","findColumn","resizeColumn","indentWidthClone","contentTextClone","contentText","wHeader","wContent","columnbyindex","tableWidth_1","tableWidth","offsetWidthValue","setHandlerHeight","getResizeHandlers","touchStartEvent","resizeStart","callAutoFit","getTargetColumn","refreshColumnWidth","parentElementWidth","appendHelper","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","detach","mousemove","colData","updateHelper","doubleTapEvent","calcPos","floor","cls","parentOffset","offset","doc","ownerDocument","offsetParent","documentElement","parentNode","nodeType","getUserAgent","clearTimeout","timeoutHandler","test","Reorder","events.reorderComplete","createReorderElement","chkDropPosition","srcElem","destElem","targetParentContainerIndex","chkDropAllCols","isFound","headers","pop","findColParent","getColumnsModel","subCols","closestElement","oldIdx","newIndex","moveColumns","destIndex","getColParent","srcIdx","flatColumns","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","draggableType","cliRectBase","scrollElem","setScrollLeft","cliRect","RowDD","events.rowDragStart","dropElem","rowDropSettings","targetID","isDragStop","getElementFromPosition","events.rowDrag","events.rowDrop","initializeDrag","events.rowDragAndDropComplete","getTargetIdx","targetRow","srcControl","targetIndex","skip","dropArea","events.groupComplete","events.ungroupComplete","grpRow","expandCollapseRows","expandAll","collapseAll","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","cellIdx","rowIdx","rowNodes","isHide","expandElem","toExpand","expandCollapse","isExpand","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","groupElem","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","addColToGroupDrop","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","clearGrouping","DetailRow","toogleExpandcollapse","uid_1","nextRow","isDetailRow","detailRow","detailCell","nextSibling","parentID","parentPrimaryKeys","parentKeyField","parentRowData","grid","injectedModues","gridElem","idx_1","events.detailDataBound","detailElement","getTDfromIndex","collapse","Toolbar","predefinedItems","gridID","preItems_1","localeName","toUpperCase","prefixIcon","tooltipText","align","columnchooser","suffixIcon","createToolbar","unWireEvent","getItems","tool","clicked","toolbarClickHandler","enablePersistence","viewStr","searchElement","wireEvent","refreshToolbarItems","updateSearchBox","enableItems","disableItems","toolbarItems","toolbarItems_1","getItemObject","itemObject","itemName","isEnable","items_1","gID","originalEvent","tarElement","targetEle","offsetTop","events.toolbarClick","events.toolbarRefresh","FooterRenderer","gridModule","modelGenerator","overflowX","tFoot","renderSummaryContent","summaries","dummies","fragment","rowrenderer","srow","onScroll","refreshCol","replaceChild","onWidthChange","updateFooterTableWidth","SummaryCellRenderer","tempObj","Aggregate","initiateRender","cellFac","footerRenderer","prepareSummaryInfo","getFormatFromType","cModel","InterSectionObserver","fromWheel","touchMove","sentinelInfo","up","check","containerRect","entered","pageHeight","axis","down","observe","onEnterCallback","virtualScrollHandler","prevTop","prevLeft","debounced100","debounce","debounced50","axes","debounceEvent","sentinel","setPageHeight","VirtualRowModelGenerator","cOffsets","cache","groups","rowModelGenerator","notifyArgs","virtualInfo","xAxis","loadNext","loadSelf","nextInfo","getBlockIndexes","loadedBlocks","checkAndResetCache","blockIndexes","isBlockAvailable","getStartIndex","median","updateGroupRow","getPage","block","columnIndexes","blk","full","even","getColumnIndexes","sLeft","calWidth","iOffset","offsetVal","refreshColOffsets","gLen","n","currentFirst","iterateGroup","oRow","shift","VirtualContentRenderer","prevHeight","preventEvent","actions","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","getBlockHeight","observer","adjustTable","scrollListener","scrollArgs","viewInfo","getInfoFromView","prevInfo","tempBlocks","infoType","getPageFromTop","blocks","ensureBlocks","every","mIdx","old","ind","isEndBlock","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","isIE","sTop","setVirtualHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","cHeight","endTranslate","maxBlock","onEntered","getBlockSize","totalBlocks","setProperties","startIdx","bSize","rem","size","refreshVirtualElement","VirtualHeaderRenderer","gen","xValue","yValue","transform","VirtualScroll","ensurePageSize","blockSize","InlineEditRender","addNew","getEditElement","tdElement","form","td_1","BatchEditRender","columnObject","DialogEditRender","events.dialogDestroy","setLocaleObj","createDialog","dialog","primaryKeyValue","allowDragging","events.destroyForm","dataCell","EditRender","inline","normal","batch","getEditElements","convertWidget","cols_1","focusElement","tArgs","isInput","tagName","BooleanEditCell","activeClasses","classNames","selectChkBox","editRow","params","DropDownEditCell","isInline","enabled","popupHeight","dlgElement","NumericEditCell","focusOut","DefaultEditCell","NormalEdit","allowEditOnDblClick","editComplete","editRowIndex","primaryKeys","primaryKeyValues","previousData","applyFormValidation","editedData","getCurrentEditedData","destroyElements","stopEditStatus","destroyWidgets","editHandler","edSucc","edFail","editSuccess","editFailure","events.doubleTap","events.deleteComplete","events.saveComplete","InlineEdit","BatchEdit","cellDetails","events.beforeCellFocused","onBeforeCellFocused","saveCell","setCellIdx","editCell","validateFormObj","editCellFromIndex","isAddRow","removeRowObjectFromUID","refreshRowIdx","bulkDelete","bulkAddRow","batchSave","getBatchChanges","events.beforeBatchSave","addedRecords","deletedRecords","changedRecords","addRowObject","getIndexFromData","events.beforeBatchDelete","events.batchDelete","defaultData","getDefaultData","events.beforeBatchAdd","findNextEditableCell","args1","events.batchAdd","checkNPCell","dValues","getDataByIndex","getCellIdx","isForeignKey","foreignKeyValue","validationRules","isColored","updateCell","events.queryCellInfo","setChanges","updateRow","cIdx","isForceSave","previousValue","DialogEdit","DatePickerEditCell","editCellType","dropdownedit","numericedit","datepickeredit","booleanedit","defaultedit","updateEditObj","createAlertDlg","createConfirmDlg","updateColTypeObj","tapEvent","alertDObj","refreshToolbar","showDeleteConfirmDialog","endEditing","batchCancel","editFormValidate","getCurrentEditCellData","getValueFromType","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","executeAction","actionBeginFunction","actionCompleteFunction","inputs","preventObj","rules","cols_2","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","createTooltip","inputName","status","inputClient","arrow","ColumnChooser","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","isCustomizeOpenCC","hideDialog","targetElement","refreshCheckboxState","columnChooserSearch","removeCancelIcon","addcancelIcon","events.beforeOpenColumnChooser","refreshPosition","mOpenDlg","openColumnChooser","renderChooserList","beforeOpen","customDialogOpen","beforeClose","customDialogClose","columnChooserManualSearch","confirmDlgBtnClick","clearActions","searchDiv","ccsearchele","ccsearchicon","conDiv","searchFocus","searchBlur","innerDivContent","refreshCheckboxList","targt","columnStateChange","dialogInstance","stateColumns","colUid","currentCol","checkstatecolumn","isChecked","coluid","searchVal","fltrCol","clearSearch","nMatchele","checkBoxClickHandler","checkstate","columnUid","gdCol","ulElement","renderCheckbox","columnUID","cbox","cclist","hideColState","showColState","cccheckboxlist","searchValue","proxy","interval","ExportHelper","hideColumnInclude","getQuery","take","getHeaders","isHideColumnInclude","measureColumnDepth","actualColumns","processColumns","processHeaderCells","removeCellFromRow","generateActualColumns","getConvertedWidth","getCellCount","resultCells","appendGridCells","gridRows","isFirstColumn","isLastColumn","isIgnoreFirstCell","gridColumn","option","gridObj","ExportValueFormatter","internationalization","returnFormattedValue","customFormat","formatCellValue","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","isElementIdChanged","init","toISOString","isExporting","footer","exportValueFormatter","isCsv","events.beforeExcelExport","processRecords","processInnerRecords","blankRows","multipleExport","worksheets","processExcelHeader","groupIndent","childLevels","processHeaderContent","exportType","processRecordContent","events.excelExportComplete","returnType","currentViewRecords","processGroupedRows","processRecordRows","processAggregates","processExcelFooter","sheet","Workbook","save","dataSource_1","getCaptionThemeStyle","theme","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","_d","rLen","excelCellArgs","events.excelQueryCellInfo","styleIndex","getColumnStyle","mergeOptions","rec","summaryModel","groupSummaryRows","sRows","customIndex","cells_2","eCell","getAggreateValue","sum","average","truecount","falsecount","custom","wholeText","JSON1","JSON2","attrname","returnValue","gridColumns","spannedCells","currentCellIndex","column_1","gridCell","getIndex","spannedCell","getHeaderThemeStyle","hAlign","parseStyles","getRecordThemeStyle","fontSize","borders","color","updateThemeStyle","themestyle","fontColor","fontName","lineStyle","bold","backColor","caption","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","numberFormat","PdfExport","customDataSource","isGrouping","pdfDocument","events.beforePdfExport","pdfExportProperties","adaptor","PdfDocument","processExport","events.pdfExportComplete","gridTheme","section","sections","processExportProperties","pdfPage","pages","pdfGrid","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","setBorder","draw","pdfColor","PdfColor","penBrushColor","hexToRgb","g","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfBorders","borderColor","PdfPen","groupIndex","dataSourceItems","getCell","stringFormat","PdfStringFormat","PdfTextAlignment","Left","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","columnCount","getColumn","gridHeader","getHeader","getHorizontalAlignment","getVerticalAlignment","k","allowHorizontalOverflow","pageOrientation","pdfPageSettings","PdfPageSettings","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","clientSize","PointF","fromTop","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromBottom","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","setContentFormat","graphics","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfPageCountField","PdfCompositeField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","sRows_1","leastCaptionSummaryIndex","getTemplateFunction","templateFunction","txt","getSummaryWithoutTemplate","gridRow","setRecordThemeStyle","events.pdfQueryCellInfo","processCellStyle","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","fontFamily","italic","underline","strikeout","borderWidth","Right","Center","Justify","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","getFontFamily","fontStyle","PdfFontStyle","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","CommandColumnRenderer","buttonElement","unbounDiv","command","renderButton","buttonOption","onclick","Button","commandClickHandler","menuClass","editIcon","pager","pdf","ungroup","csv","fPage","nPage","lPage","pPage","ascending","descending","groupHeader","touchPop","defaultItems","hiddenItems","localeText","setLocaleKey","contextMenu","Menu","getMenuItems","contextMenuItemClick","contextMenuBeforeOpen","onOpen","contextMenuOnClose","menuItems","exportItems","getDefaultItems","toLocaleLowerCase","buildDefaultItems","exportGroup","getLastPage","totalpage","getKeyFromId","targetColumn","events.contextMenuClick","updateItemStatus","getLocaleText","showItems","closestGrid","dItem","ensureDisabledStatus","ensureTarget","parentItem","hideItems","eventArgs","events.contextMenuOpen","substr","generateID","export","sortAscending","sortDescending","FreezeRowModelGenerator","isFrzLoad","FreezeContentRender","fDiv","mDiv","setFrozenContent","setMovableContent","getMovableContent","frozenContent","movableContent","getFrozenContent","mTbl","FreezeRender","refreshFreeze","rfshMovable","setFrozenHeader","setMovableHeader","getMovableHeader","mTable","renderMovable","getFrozenHeader","filterRow","fRows","mRows","setWrapHeight","isContReset","fRowHgt","mRowHgt","isWrap","tBody","frozenHeader","movableHeader","mEle","Freeze","ColumnMenu","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","getColumnMenuHandlers","columnMenuHandlerDown","columnMenu","unwireFilterEvents","columnMenuHandlerClick","getHeaderCell","openColumnMenu","elePos","calculatePosition","isFilterItemAdded","filterPosition","columnMenuItemClick","columnMenuBeforeOpen","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","columnMenuBeforeClose","wireFilterEvents","appendFilter","isChooserItem","events.columnMenuOpen","getFilter","events.columnMenuClick","isFilterPopupOpen","defultItems_1","columnMenuItems","getDefault","getDefaultItem","createChooserItems","columnChooser","filterPopup","getFilterPop","setPosition","gridPos","liPos"],"mappings":"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"}